function MJ(e,t){for(var n=0;n<t.length;n++){const r=t[n];if(typeof r!="string"&&!Array.isArray(r)){for(const s in r)if(s!=="default"&&!(s in e)){const a=Object.getOwnPropertyDescriptor(r,s);a&&Object.defineProperty(e,s,a.get?a:{enumerable:!0,get:()=>r[s]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const c of a.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&r(c)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function r(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();var Qm=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function mF(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function NJ(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var RJ={exports:{}},gF={},OJ={exports:{}},io={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var dB=Symbol.for("react.element"),$pe=Symbol.for("react.portal"),Gpe=Symbol.for("react.fragment"),Kpe=Symbol.for("react.strict_mode"),Wpe=Symbol.for("react.profiler"),qpe=Symbol.for("react.provider"),Zpe=Symbol.for("react.context"),Xpe=Symbol.for("react.forward_ref"),Ype=Symbol.for("react.suspense"),Jpe=Symbol.for("react.memo"),eAe=Symbol.for("react.lazy"),mH=Symbol.iterator;function tAe(e){return e===null||typeof e!="object"?null:(e=mH&&e[mH]||e["@@iterator"],typeof e=="function"?e:null)}var DJ={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},UJ=Object.assign,zJ={};function Qw(e,t,n){this.props=e,this.context=t,this.refs=zJ,this.updater=n||DJ}Qw.prototype.isReactComponent={};Qw.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};Qw.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function QJ(){}QJ.prototype=Qw.prototype;function aU(e,t,n){this.props=e,this.context=t,this.refs=zJ,this.updater=n||DJ}var lU=aU.prototype=new QJ;lU.constructor=aU;UJ(lU,Qw.prototype);lU.isPureReactComponent=!0;var gH=Array.isArray,HJ=Object.prototype.hasOwnProperty,cU={current:null},VJ={key:!0,ref:!0,__self:!0,__source:!0};function $J(e,t,n){var r,s={},a=null,c=null;if(t!=null)for(r in t.ref!==void 0&&(c=t.ref),t.key!==void 0&&(a=""+t.key),t)HJ.call(t,r)&&!VJ.hasOwnProperty(r)&&(s[r]=t[r]);var i=arguments.length-2;if(i===1)s.children=n;else if(1<i){for(var f=Array(i),g=0;g<i;g++)f[g]=arguments[g+2];s.children=f}if(e&&e.defaultProps)for(r in i=e.defaultProps,i)s[r]===void 0&&(s[r]=i[r]);return{$$typeof:dB,type:e,key:a,ref:c,props:s,_owner:cU.current}}function nAe(e,t){return{$$typeof:dB,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function uU(e){return typeof e=="object"&&e!==null&&e.$$typeof===dB}function rAe(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var yH=/\/+/g;function XL(e,t){return typeof e=="object"&&e!==null&&e.key!=null?rAe(""+e.key):t.toString(36)}function ST(e,t,n,r,s){var a=typeof e;(a==="undefined"||a==="boolean")&&(e=null);var c=!1;if(e===null)c=!0;else switch(a){case"string":case"number":c=!0;break;case"object":switch(e.$$typeof){case dB:case $pe:c=!0}}if(c)return c=e,s=s(c),e=r===""?"."+XL(c,0):r,gH(s)?(n="",e!=null&&(n=e.replace(yH,"$&/")+"/"),ST(s,t,n,"",function(g){return g})):s!=null&&(uU(s)&&(s=nAe(s,n+(!s.key||c&&c.key===s.key?"":(""+s.key).replace(yH,"$&/")+"/")+e)),t.push(s)),1;if(c=0,r=r===""?".":r+":",gH(e))for(var i=0;i<e.length;i++){a=e[i];var f=r+XL(a,i);c+=ST(a,t,n,f,s)}else if(f=tAe(e),typeof f=="function")for(e=f.call(e),i=0;!(a=e.next()).done;)a=a.value,f=r+XL(a,i++),c+=ST(a,t,n,f,s);else if(a==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return c}function q4(e,t,n){if(e==null)return e;var r=[],s=0;return ST(e,r,"","",function(a){return t.call(n,a,s++)}),r}function iAe(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var vh={current:null},BT={transition:null},sAe={ReactCurrentDispatcher:vh,ReactCurrentBatchConfig:BT,ReactCurrentOwner:cU};function GJ(){throw Error("act(...) is not supported in production builds of React.")}io.Children={map:q4,forEach:function(e,t,n){q4(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return q4(e,function(){t++}),t},toArray:function(e){return q4(e,function(t){return t})||[]},only:function(e){if(!uU(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};io.Component=Qw;io.Fragment=Gpe;io.Profiler=Wpe;io.PureComponent=aU;io.StrictMode=Kpe;io.Suspense=Ype;io.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=sAe;io.act=GJ;io.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var r=UJ({},e.props),s=e.key,a=e.ref,c=e._owner;if(t!=null){if(t.ref!==void 0&&(a=t.ref,c=cU.current),t.key!==void 0&&(s=""+t.key),e.type&&e.type.defaultProps)var i=e.type.defaultProps;for(f in t)HJ.call(t,f)&&!VJ.hasOwnProperty(f)&&(r[f]=t[f]===void 0&&i!==void 0?i[f]:t[f])}var f=arguments.length-2;if(f===1)r.children=n;else if(1<f){i=Array(f);for(var g=0;g<f;g++)i[g]=arguments[g+2];r.children=i}return{$$typeof:dB,type:e.type,key:s,ref:a,props:r,_owner:c}};io.createContext=function(e){return e={$$typeof:Zpe,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:qpe,_context:e},e.Consumer=e};io.createElement=$J;io.createFactory=function(e){var t=$J.bind(null,e);return t.type=e,t};io.createRef=function(){return{current:null}};io.forwardRef=function(e){return{$$typeof:Xpe,render:e}};io.isValidElement=uU;io.lazy=function(e){return{$$typeof:eAe,_payload:{_status:-1,_result:e},_init:iAe}};io.memo=function(e,t){return{$$typeof:Jpe,type:e,compare:t===void 0?null:t}};io.startTransition=function(e){var t=BT.transition;BT.transition={};try{e()}finally{BT.transition=t}};io.unstable_act=GJ;io.useCallback=function(e,t){return vh.current.useCallback(e,t)};io.useContext=function(e){return vh.current.useContext(e)};io.useDebugValue=function(){};io.useDeferredValue=function(e){return vh.current.useDeferredValue(e)};io.useEffect=function(e,t){return vh.current.useEffect(e,t)};io.useId=function(){return vh.current.useId()};io.useImperativeHandle=function(e,t,n){return vh.current.useImperativeHandle(e,t,n)};io.useInsertionEffect=function(e,t){return vh.current.useInsertionEffect(e,t)};io.useLayoutEffect=function(e,t){return vh.current.useLayoutEffect(e,t)};io.useMemo=function(e,t){return vh.current.useMemo(e,t)};io.useReducer=function(e,t,n){return vh.current.useReducer(e,t,n)};io.useRef=function(e){return vh.current.useRef(e)};io.useState=function(e){return vh.current.useState(e)};io.useSyncExternalStore=function(e,t,n){return vh.current.useSyncExternalStore(e,t,n)};io.useTransition=function(){return vh.current.useTransition()};io.version="18.3.1";OJ.exports=io;var q=OJ.exports;const Ti=mF(q),oAe=MJ({__proto__:null,default:Ti},[q]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var aAe=q,lAe=Symbol.for("react.element"),cAe=Symbol.for("react.fragment"),uAe=Object.prototype.hasOwnProperty,dAe=aAe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,hAe={key:!0,ref:!0,__self:!0,__source:!0};function KJ(e,t,n){var r,s={},a=null,c=null;n!==void 0&&(a=""+n),t.key!==void 0&&(a=""+t.key),t.ref!==void 0&&(c=t.ref);for(r in t)uAe.call(t,r)&&!hAe.hasOwnProperty(r)&&(s[r]=t[r]);if(e&&e.defaultProps)for(r in t=e.defaultProps,t)s[r]===void 0&&(s[r]=t[r]);return{$$typeof:lAe,type:e,key:a,ref:c,props:s,_owner:dAe.current}}gF.Fragment=cAe;gF.jsx=KJ;gF.jsxs=KJ;RJ.exports=gF;var A=RJ.exports,WJ={exports:{}},ep={},qJ={exports:{}},ZJ={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(Ue,Qe){var xe=Ue.length;Ue.push(Qe);e:for(;0<xe;){var at=xe-1>>>1,we=Ue[at];if(0<s(we,Qe))Ue[at]=Qe,Ue[xe]=we,xe=at;else break e}}function n(Ue){return Ue.length===0?null:Ue[0]}function r(Ue){if(Ue.length===0)return null;var Qe=Ue[0],xe=Ue.pop();if(xe!==Qe){Ue[0]=xe;e:for(var at=0,we=Ue.length,me=we>>>1;at<me;){var Ze=2*(at+1)-1,ot=Ue[Ze],vt=Ze+1,Qt=Ue[vt];if(0>s(ot,xe))vt<we&&0>s(Qt,ot)?(Ue[at]=Qt,Ue[vt]=xe,at=vt):(Ue[at]=ot,Ue[Ze]=xe,at=Ze);else if(vt<we&&0>s(Qt,xe))Ue[at]=Qt,Ue[vt]=xe,at=vt;else break e}}return Qe}function s(Ue,Qe){var xe=Ue.sortIndex-Qe.sortIndex;return xe!==0?xe:Ue.id-Qe.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;e.unstable_now=function(){return a.now()}}else{var c=Date,i=c.now();e.unstable_now=function(){return c.now()-i}}var f=[],g=[],y=1,b=null,T=3,S=!1,U=!1,N=!1,W=typeof setTimeout=="function"?setTimeout:null,L=typeof clearTimeout=="function"?clearTimeout:null,Q=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function V(Ue){for(var Qe=n(g);Qe!==null;){if(Qe.callback===null)r(g);else if(Qe.startTime<=Ue)r(g),Qe.sortIndex=Qe.expirationTime,t(f,Qe);else break;Qe=n(g)}}function Z(Ue){if(N=!1,V(Ue),!U)if(n(f)!==null)U=!0,Ge(ne);else{var Qe=n(g);Qe!==null&&Je(Z,Qe.startTime-Ue)}}function ne(Ue,Qe){U=!1,N&&(N=!1,L(pe),pe=-1),S=!0;var xe=T;try{for(V(Qe),b=n(f);b!==null&&(!(b.expirationTime>Qe)||Ue&&!he());){var at=b.callback;if(typeof at=="function"){b.callback=null,T=b.priorityLevel;var we=at(b.expirationTime<=Qe);Qe=e.unstable_now(),typeof we=="function"?b.callback=we:b===n(f)&&r(f),V(Qe)}else r(f);b=n(f)}if(b!==null)var me=!0;else{var Ze=n(g);Ze!==null&&Je(Z,Ze.startTime-Qe),me=!1}return me}finally{b=null,T=xe,S=!1}}var Y=!1,le=null,pe=-1,_e=5,ye=-1;function he(){return!(e.unstable_now()-ye<_e)}function be(){if(le!==null){var Ue=e.unstable_now();ye=Ue;var Qe=!0;try{Qe=le(!0,Ue)}finally{Qe?Te():(Y=!1,le=null)}}else Y=!1}var Te;if(typeof Q=="function")Te=function(){Q(be)};else if(typeof MessageChannel<"u"){var Ee=new MessageChannel,Ne=Ee.port2;Ee.port1.onmessage=be,Te=function(){Ne.postMessage(null)}}else Te=function(){W(be,0)};function Ge(Ue){le=Ue,Y||(Y=!0,Te())}function Je(Ue,Qe){pe=W(function(){Ue(e.unstable_now())},Qe)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(Ue){Ue.callback=null},e.unstable_continueExecution=function(){U||S||(U=!0,Ge(ne))},e.unstable_forceFrameRate=function(Ue){0>Ue||125<Ue?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):_e=0<Ue?Math.floor(1e3/Ue):5},e.unstable_getCurrentPriorityLevel=function(){return T},e.unstable_getFirstCallbackNode=function(){return n(f)},e.unstable_next=function(Ue){switch(T){case 1:case 2:case 3:var Qe=3;break;default:Qe=T}var xe=T;T=Qe;try{return Ue()}finally{T=xe}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(Ue,Qe){switch(Ue){case 1:case 2:case 3:case 4:case 5:break;default:Ue=3}var xe=T;T=Ue;try{return Qe()}finally{T=xe}},e.unstable_scheduleCallback=function(Ue,Qe,xe){var at=e.unstable_now();switch(typeof xe=="object"&&xe!==null?(xe=xe.delay,xe=typeof xe=="number"&&0<xe?at+xe:at):xe=at,Ue){case 1:var we=-1;break;case 2:we=250;break;case 5:we=1073741823;break;case 4:we=1e4;break;default:we=5e3}return we=xe+we,Ue={id:y++,callback:Qe,priorityLevel:Ue,startTime:xe,expirationTime:we,sortIndex:-1},xe>at?(Ue.sortIndex=xe,t(g,Ue),n(f)===null&&Ue===n(g)&&(N?(L(pe),pe=-1):N=!0,Je(Z,xe-at))):(Ue.sortIndex=we,t(f,Ue),U||S||(U=!0,Ge(ne))),Ue},e.unstable_shouldYield=he,e.unstable_wrapCallback=function(Ue){var Qe=T;return function(){var xe=T;T=Qe;try{return Ue.apply(this,arguments)}finally{T=xe}}}})(ZJ);qJ.exports=ZJ;var fAe=qJ.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var pAe=q,Jf=fAe;function Tr(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var XJ=new Set,QC={};function Zx(e,t){dw(e,t),dw(e+"Capture",t)}function dw(e,t){for(QC[e]=t,e=0;e<t.length;e++)XJ.add(t[e])}var e0=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),bR=Object.prototype.hasOwnProperty,AAe=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,vH={},xH={};function mAe(e){return bR.call(xH,e)?!0:bR.call(vH,e)?!1:AAe.test(e)?xH[e]=!0:(vH[e]=!0,!1)}function gAe(e,t,n,r){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return r?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function yAe(e,t,n,r){if(t===null||typeof t>"u"||gAe(e,t,n,r))return!0;if(r)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function xh(e,t,n,r,s,a,c){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=r,this.attributeNamespace=s,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=a,this.removeEmptyString=c}var Ku={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Ku[e]=new xh(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Ku[t]=new xh(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Ku[e]=new xh(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Ku[e]=new xh(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Ku[e]=new xh(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Ku[e]=new xh(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Ku[e]=new xh(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Ku[e]=new xh(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Ku[e]=new xh(e,5,!1,e.toLowerCase(),null,!1,!1)});var dU=/[\-:]([a-z])/g;function hU(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(dU,hU);Ku[t]=new xh(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(dU,hU);Ku[t]=new xh(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(dU,hU);Ku[t]=new xh(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Ku[e]=new xh(e,1,!1,e.toLowerCase(),null,!1,!1)});Ku.xlinkHref=new xh("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Ku[e]=new xh(e,1,!1,e.toLowerCase(),null,!0,!0)});function fU(e,t,n,r){var s=Ku.hasOwnProperty(t)?Ku[t]:null;(s!==null?s.type!==0:r||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(yAe(t,n,s,r)&&(n=null),r||s===null?mAe(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):s.mustUseProperty?e[s.propertyName]=n===null?s.type===3?!1:"":n:(t=s.attributeName,r=s.attributeNamespace,n===null?e.removeAttribute(t):(s=s.type,n=s===3||s===4&&n===!0?"":""+n,r?e.setAttributeNS(r,t,n):e.setAttribute(t,n))))}var f0=pAe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Z4=Symbol.for("react.element"),E1=Symbol.for("react.portal"),T1=Symbol.for("react.fragment"),pU=Symbol.for("react.strict_mode"),CR=Symbol.for("react.profiler"),YJ=Symbol.for("react.provider"),JJ=Symbol.for("react.context"),AU=Symbol.for("react.forward_ref"),SR=Symbol.for("react.suspense"),BR=Symbol.for("react.suspense_list"),mU=Symbol.for("react.memo"),iy=Symbol.for("react.lazy"),eee=Symbol.for("react.offscreen"),_H=Symbol.iterator;function l2(e){return e===null||typeof e!="object"?null:(e=_H&&e[_H]||e["@@iterator"],typeof e=="function"?e:null)}var Fl=Object.assign,YL;function H2(e){if(YL===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);YL=t&&t[1]||""}return`
`+YL+e}var JL=!1;function eM(e,t){if(!e||JL)return"";JL=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(g){var r=g}Reflect.construct(e,[],t)}else{try{t.call()}catch(g){r=g}e.call(t.prototype)}else{try{throw Error()}catch(g){r=g}e()}}catch(g){if(g&&r&&typeof g.stack=="string"){for(var s=g.stack.split(`
`),a=r.stack.split(`
`),c=s.length-1,i=a.length-1;1<=c&&0<=i&&s[c]!==a[i];)i--;for(;1<=c&&0<=i;c--,i--)if(s[c]!==a[i]){if(c!==1||i!==1)do if(c--,i--,0>i||s[c]!==a[i]){var f=`
`+s[c].replace(" at new "," at ");return e.displayName&&f.includes("<anonymous>")&&(f=f.replace("<anonymous>",e.displayName)),f}while(1<=c&&0<=i);break}}}finally{JL=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?H2(e):""}function vAe(e){switch(e.tag){case 5:return H2(e.type);case 16:return H2("Lazy");case 13:return H2("Suspense");case 19:return H2("SuspenseList");case 0:case 2:case 15:return e=eM(e.type,!1),e;case 11:return e=eM(e.type.render,!1),e;case 1:return e=eM(e.type,!0),e;default:return""}}function ER(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case T1:return"Fragment";case E1:return"Portal";case CR:return"Profiler";case pU:return"StrictMode";case SR:return"Suspense";case BR:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case JJ:return(e.displayName||"Context")+".Consumer";case YJ:return(e._context.displayName||"Context")+".Provider";case AU:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mU:return t=e.displayName||null,t!==null?t:ER(e.type)||"Memo";case iy:t=e._payload,e=e._init;try{return ER(e(t))}catch{}}return null}function xAe(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return ER(t);case 8:return t===pU?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function Oy(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function tee(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function _Ae(e){var t=tee(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),r=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var s=n.get,a=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return s.call(this)},set:function(c){r=""+c,a.call(this,c)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return r},setValue:function(c){r=""+c},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function X4(e){e._valueTracker||(e._valueTracker=_Ae(e))}function nee(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),r="";return e&&(r=tee(e)?e.checked?"true":"false":e.value),e=r,e!==n?(t.setValue(e),!0):!1}function wI(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function TR(e,t){var n=t.checked;return Fl({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function wH(e,t){var n=t.defaultValue==null?"":t.defaultValue,r=t.checked!=null?t.checked:t.defaultChecked;n=Oy(t.value!=null?t.value:n),e._wrapperState={initialChecked:r,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function ree(e,t){t=t.checked,t!=null&&fU(e,"checked",t,!1)}function IR(e,t){ree(e,t);var n=Oy(t.value),r=t.type;if(n!=null)r==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(r==="submit"||r==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?jR(e,t.type,n):t.hasOwnProperty("defaultValue")&&jR(e,t.type,Oy(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function bH(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var r=t.type;if(!(r!=="submit"&&r!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function jR(e,t,n){(t!=="number"||wI(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var V2=Array.isArray;function W1(e,t,n,r){if(e=e.options,t){t={};for(var s=0;s<n.length;s++)t["$"+n[s]]=!0;for(n=0;n<e.length;n++)s=t.hasOwnProperty("$"+e[n].value),e[n].selected!==s&&(e[n].selected=s),s&&r&&(e[n].defaultSelected=!0)}else{for(n=""+Oy(n),t=null,s=0;s<e.length;s++){if(e[s].value===n){e[s].selected=!0,r&&(e[s].defaultSelected=!0);return}t!==null||e[s].disabled||(t=e[s])}t!==null&&(t.selected=!0)}}function FR(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(Tr(91));return Fl({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function CH(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(Tr(92));if(V2(n)){if(1<n.length)throw Error(Tr(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:Oy(n)}}function iee(e,t){var n=Oy(t.value),r=Oy(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),r!=null&&(e.defaultValue=""+r)}function SH(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function see(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function PR(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?see(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var Y4,oee=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,r,s){MSApp.execUnsafeLocalFunction(function(){return e(t,n,r,s)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(Y4=Y4||document.createElement("div"),Y4.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=Y4.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function HC(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var hC={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},wAe=["Webkit","ms","Moz","O"];Object.keys(hC).forEach(function(e){wAe.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),hC[t]=hC[e]})});function aee(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||hC.hasOwnProperty(e)&&hC[e]?(""+t).trim():t+"px"}function lee(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var r=n.indexOf("--")===0,s=aee(n,t[n],r);n==="float"&&(n="cssFloat"),r?e.setProperty(n,s):e[n]=s}}var bAe=Fl({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function kR(e,t){if(t){if(bAe[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(Tr(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(Tr(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(Tr(61))}if(t.style!=null&&typeof t.style!="object")throw Error(Tr(62))}}function LR(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var MR=null;function gU(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var NR=null,q1=null,Z1=null;function BH(e){if(e=pB(e)){if(typeof NR!="function")throw Error(Tr(280));var t=e.stateNode;t&&(t=wF(t),NR(e.stateNode,e.type,t))}}function cee(e){q1?Z1?Z1.push(e):Z1=[e]:q1=e}function uee(){if(q1){var e=q1,t=Z1;if(Z1=q1=null,BH(e),t)for(e=0;e<t.length;e++)BH(t[e])}}function dee(e,t){return e(t)}function hee(){}var tM=!1;function fee(e,t,n){if(tM)return e(t,n);tM=!0;try{return dee(e,t,n)}finally{tM=!1,(q1!==null||Z1!==null)&&(hee(),uee())}}function VC(e,t){var n=e.stateNode;if(n===null)return null;var r=wF(n);if(r===null)return null;n=r[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(r=!r.disabled)||(e=e.type,r=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!r;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(Tr(231,t,typeof n));return n}var RR=!1;if(e0)try{var c2={};Object.defineProperty(c2,"passive",{get:function(){RR=!0}}),window.addEventListener("test",c2,c2),window.removeEventListener("test",c2,c2)}catch{RR=!1}function CAe(e,t,n,r,s,a,c,i,f){var g=Array.prototype.slice.call(arguments,3);try{t.apply(n,g)}catch(y){this.onError(y)}}var fC=!1,bI=null,CI=!1,OR=null,SAe={onError:function(e){fC=!0,bI=e}};function BAe(e,t,n,r,s,a,c,i,f){fC=!1,bI=null,CAe.apply(SAe,arguments)}function EAe(e,t,n,r,s,a,c,i,f){if(BAe.apply(this,arguments),fC){if(fC){var g=bI;fC=!1,bI=null}else throw Error(Tr(198));CI||(CI=!0,OR=g)}}function Xx(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function pee(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function EH(e){if(Xx(e)!==e)throw Error(Tr(188))}function TAe(e){var t=e.alternate;if(!t){if(t=Xx(e),t===null)throw Error(Tr(188));return t!==e?null:e}for(var n=e,r=t;;){var s=n.return;if(s===null)break;var a=s.alternate;if(a===null){if(r=s.return,r!==null){n=r;continue}break}if(s.child===a.child){for(a=s.child;a;){if(a===n)return EH(s),e;if(a===r)return EH(s),t;a=a.sibling}throw Error(Tr(188))}if(n.return!==r.return)n=s,r=a;else{for(var c=!1,i=s.child;i;){if(i===n){c=!0,n=s,r=a;break}if(i===r){c=!0,r=s,n=a;break}i=i.sibling}if(!c){for(i=a.child;i;){if(i===n){c=!0,n=a,r=s;break}if(i===r){c=!0,r=a,n=s;break}i=i.sibling}if(!c)throw Error(Tr(189))}}if(n.alternate!==r)throw Error(Tr(190))}if(n.tag!==3)throw Error(Tr(188));return n.stateNode.current===n?e:t}function Aee(e){return e=TAe(e),e!==null?mee(e):null}function mee(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=mee(e);if(t!==null)return t;e=e.sibling}return null}var gee=Jf.unstable_scheduleCallback,TH=Jf.unstable_cancelCallback,IAe=Jf.unstable_shouldYield,jAe=Jf.unstable_requestPaint,mc=Jf.unstable_now,FAe=Jf.unstable_getCurrentPriorityLevel,yU=Jf.unstable_ImmediatePriority,yee=Jf.unstable_UserBlockingPriority,SI=Jf.unstable_NormalPriority,PAe=Jf.unstable_LowPriority,vee=Jf.unstable_IdlePriority,yF=null,Gm=null;function kAe(e){if(Gm&&typeof Gm.onCommitFiberRoot=="function")try{Gm.onCommitFiberRoot(yF,e,void 0,(e.current.flags&128)===128)}catch{}}var VA=Math.clz32?Math.clz32:NAe,LAe=Math.log,MAe=Math.LN2;function NAe(e){return e>>>=0,e===0?32:31-(LAe(e)/MAe|0)|0}var J4=64,e3=4194304;function $2(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function BI(e,t){var n=e.pendingLanes;if(n===0)return 0;var r=0,s=e.suspendedLanes,a=e.pingedLanes,c=n&268435455;if(c!==0){var i=c&~s;i!==0?r=$2(i):(a&=c,a!==0&&(r=$2(a)))}else c=n&~s,c!==0?r=$2(c):a!==0&&(r=$2(a));if(r===0)return 0;if(t!==0&&t!==r&&!(t&s)&&(s=r&-r,a=t&-t,s>=a||s===16&&(a&4194240)!==0))return t;if(r&4&&(r|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=r;0<t;)n=31-VA(t),s=1<<n,r|=e[n],t&=~s;return r}function RAe(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function OAe(e,t){for(var n=e.suspendedLanes,r=e.pingedLanes,s=e.expirationTimes,a=e.pendingLanes;0<a;){var c=31-VA(a),i=1<<c,f=s[c];f===-1?(!(i&n)||i&r)&&(s[c]=RAe(i,t)):f<=t&&(e.expiredLanes|=i),a&=~i}}function DR(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function xee(){var e=J4;return J4<<=1,!(J4&4194240)&&(J4=64),e}function nM(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function hB(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-VA(t),e[t]=n}function DAe(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var r=e.eventTimes;for(e=e.expirationTimes;0<n;){var s=31-VA(n),a=1<<s;t[s]=0,r[s]=-1,e[s]=-1,n&=~a}}function vU(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var r=31-VA(n),s=1<<r;s&t|e[r]&t&&(e[r]|=t),n&=~s}}var oa=0;function _ee(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var wee,xU,bee,Cee,See,UR=!1,t3=[],_y=null,wy=null,by=null,$C=new Map,GC=new Map,ay=[],UAe="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function IH(e,t){switch(e){case"focusin":case"focusout":_y=null;break;case"dragenter":case"dragleave":wy=null;break;case"mouseover":case"mouseout":by=null;break;case"pointerover":case"pointerout":$C.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":GC.delete(t.pointerId)}}function u2(e,t,n,r,s,a){return e===null||e.nativeEvent!==a?(e={blockedOn:t,domEventName:n,eventSystemFlags:r,nativeEvent:a,targetContainers:[s]},t!==null&&(t=pB(t),t!==null&&xU(t)),e):(e.eventSystemFlags|=r,t=e.targetContainers,s!==null&&t.indexOf(s)===-1&&t.push(s),e)}function zAe(e,t,n,r,s){switch(t){case"focusin":return _y=u2(_y,e,t,n,r,s),!0;case"dragenter":return wy=u2(wy,e,t,n,r,s),!0;case"mouseover":return by=u2(by,e,t,n,r,s),!0;case"pointerover":var a=s.pointerId;return $C.set(a,u2($C.get(a)||null,e,t,n,r,s)),!0;case"gotpointercapture":return a=s.pointerId,GC.set(a,u2(GC.get(a)||null,e,t,n,r,s)),!0}return!1}function Bee(e){var t=lx(e.target);if(t!==null){var n=Xx(t);if(n!==null){if(t=n.tag,t===13){if(t=pee(n),t!==null){e.blockedOn=t,See(e.priority,function(){bee(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function ET(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=zR(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var r=new n.constructor(n.type,n);MR=r,n.target.dispatchEvent(r),MR=null}else return t=pB(n),t!==null&&xU(t),e.blockedOn=n,!1;t.shift()}return!0}function jH(e,t,n){ET(e)&&n.delete(t)}function QAe(){UR=!1,_y!==null&&ET(_y)&&(_y=null),wy!==null&&ET(wy)&&(wy=null),by!==null&&ET(by)&&(by=null),$C.forEach(jH),GC.forEach(jH)}function d2(e,t){e.blockedOn===t&&(e.blockedOn=null,UR||(UR=!0,Jf.unstable_scheduleCallback(Jf.unstable_NormalPriority,QAe)))}function KC(e){function t(s){return d2(s,e)}if(0<t3.length){d2(t3[0],e);for(var n=1;n<t3.length;n++){var r=t3[n];r.blockedOn===e&&(r.blockedOn=null)}}for(_y!==null&&d2(_y,e),wy!==null&&d2(wy,e),by!==null&&d2(by,e),$C.forEach(t),GC.forEach(t),n=0;n<ay.length;n++)r=ay[n],r.blockedOn===e&&(r.blockedOn=null);for(;0<ay.length&&(n=ay[0],n.blockedOn===null);)Bee(n),n.blockedOn===null&&ay.shift()}var X1=f0.ReactCurrentBatchConfig,EI=!0;function HAe(e,t,n,r){var s=oa,a=X1.transition;X1.transition=null;try{oa=1,_U(e,t,n,r)}finally{oa=s,X1.transition=a}}function VAe(e,t,n,r){var s=oa,a=X1.transition;X1.transition=null;try{oa=4,_U(e,t,n,r)}finally{oa=s,X1.transition=a}}function _U(e,t,n,r){if(EI){var s=zR(e,t,n,r);if(s===null)hM(e,t,r,TI,n),IH(e,r);else if(zAe(s,e,t,n,r))r.stopPropagation();else if(IH(e,r),t&4&&-1<UAe.indexOf(e)){for(;s!==null;){var a=pB(s);if(a!==null&&wee(a),a=zR(e,t,n,r),a===null&&hM(e,t,r,TI,n),a===s)break;s=a}s!==null&&r.stopPropagation()}else hM(e,t,r,null,n)}}var TI=null;function zR(e,t,n,r){if(TI=null,e=gU(r),e=lx(e),e!==null)if(t=Xx(e),t===null)e=null;else if(n=t.tag,n===13){if(e=pee(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return TI=e,null}function Eee(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(FAe()){case yU:return 1;case yee:return 4;case SI:case PAe:return 16;case vee:return 536870912;default:return 16}default:return 16}}var fy=null,wU=null,TT=null;function Tee(){if(TT)return TT;var e,t=wU,n=t.length,r,s="value"in fy?fy.value:fy.textContent,a=s.length;for(e=0;e<n&&t[e]===s[e];e++);var c=n-e;for(r=1;r<=c&&t[n-r]===s[a-r];r++);return TT=s.slice(e,1<r?1-r:void 0)}function IT(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function n3(){return!0}function FH(){return!1}function tp(e){function t(n,r,s,a,c){this._reactName=n,this._targetInst=s,this.type=r,this.nativeEvent=a,this.target=c,this.currentTarget=null;for(var i in e)e.hasOwnProperty(i)&&(n=e[i],this[i]=n?n(a):a[i]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?n3:FH,this.isPropagationStopped=FH,this}return Fl(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=n3)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=n3)},persist:function(){},isPersistent:n3}),t}var Hw={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bU=tp(Hw),fB=Fl({},Hw,{view:0,detail:0}),$Ae=tp(fB),rM,iM,h2,vF=Fl({},fB,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:CU,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==h2&&(h2&&e.type==="mousemove"?(rM=e.screenX-h2.screenX,iM=e.screenY-h2.screenY):iM=rM=0,h2=e),rM)},movementY:function(e){return"movementY"in e?e.movementY:iM}}),PH=tp(vF),GAe=Fl({},vF,{dataTransfer:0}),KAe=tp(GAe),WAe=Fl({},fB,{relatedTarget:0}),sM=tp(WAe),qAe=Fl({},Hw,{animationName:0,elapsedTime:0,pseudoElement:0}),ZAe=tp(qAe),XAe=Fl({},Hw,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),YAe=tp(XAe),JAe=Fl({},Hw,{data:0}),kH=tp(JAe),eme={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},tme={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},nme={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function rme(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=nme[e])?!!t[e]:!1}function CU(){return rme}var ime=Fl({},fB,{key:function(e){if(e.key){var t=eme[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=IT(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?tme[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:CU,charCode:function(e){return e.type==="keypress"?IT(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?IT(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),sme=tp(ime),ome=Fl({},vF,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),LH=tp(ome),ame=Fl({},fB,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:CU}),lme=tp(ame),cme=Fl({},Hw,{propertyName:0,elapsedTime:0,pseudoElement:0}),ume=tp(cme),dme=Fl({},vF,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),hme=tp(dme),fme=[9,13,27,32],SU=e0&&"CompositionEvent"in window,pC=null;e0&&"documentMode"in document&&(pC=document.documentMode);var pme=e0&&"TextEvent"in window&&!pC,Iee=e0&&(!SU||pC&&8<pC&&11>=pC),MH=" ",NH=!1;function jee(e,t){switch(e){case"keyup":return fme.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Fee(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var I1=!1;function Ame(e,t){switch(e){case"compositionend":return Fee(t);case"keypress":return t.which!==32?null:(NH=!0,MH);case"textInput":return e=t.data,e===MH&&NH?null:e;default:return null}}function mme(e,t){if(I1)return e==="compositionend"||!SU&&jee(e,t)?(e=Tee(),TT=wU=fy=null,I1=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return Iee&&t.locale!=="ko"?null:t.data;default:return null}}var gme={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function RH(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!gme[e.type]:t==="textarea"}function Pee(e,t,n,r){cee(r),t=II(t,"onChange"),0<t.length&&(n=new bU("onChange","change",null,n,r),e.push({event:n,listeners:t}))}var AC=null,WC=null;function yme(e){Hee(e,0)}function xF(e){var t=P1(e);if(nee(t))return e}function vme(e,t){if(e==="change")return t}var kee=!1;if(e0){var oM;if(e0){var aM="oninput"in document;if(!aM){var OH=document.createElement("div");OH.setAttribute("oninput","return;"),aM=typeof OH.oninput=="function"}oM=aM}else oM=!1;kee=oM&&(!document.documentMode||9<document.documentMode)}function DH(){AC&&(AC.detachEvent("onpropertychange",Lee),WC=AC=null)}function Lee(e){if(e.propertyName==="value"&&xF(WC)){var t=[];Pee(t,WC,e,gU(e)),fee(yme,t)}}function xme(e,t,n){e==="focusin"?(DH(),AC=t,WC=n,AC.attachEvent("onpropertychange",Lee)):e==="focusout"&&DH()}function _me(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return xF(WC)}function wme(e,t){if(e==="click")return xF(t)}function bme(e,t){if(e==="input"||e==="change")return xF(t)}function Cme(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var qA=typeof Object.is=="function"?Object.is:Cme;function qC(e,t){if(qA(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;for(r=0;r<n.length;r++){var s=n[r];if(!bR.call(t,s)||!qA(e[s],t[s]))return!1}return!0}function UH(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function zH(e,t){var n=UH(e);e=0;for(var r;n;){if(n.nodeType===3){if(r=e+n.textContent.length,e<=t&&r>=t)return{node:n,offset:t-e};e=r}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=UH(n)}}function Mee(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?Mee(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function Nee(){for(var e=window,t=wI();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=wI(e.document)}return t}function BU(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function Sme(e){var t=Nee(),n=e.focusedElem,r=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&Mee(n.ownerDocument.documentElement,n)){if(r!==null&&BU(n)){if(t=r.start,e=r.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var s=n.textContent.length,a=Math.min(r.start,s);r=r.end===void 0?a:Math.min(r.end,s),!e.extend&&a>r&&(s=r,r=a,a=s),s=zH(n,a);var c=zH(n,r);s&&c&&(e.rangeCount!==1||e.anchorNode!==s.node||e.anchorOffset!==s.offset||e.focusNode!==c.node||e.focusOffset!==c.offset)&&(t=t.createRange(),t.setStart(s.node,s.offset),e.removeAllRanges(),a>r?(e.addRange(t),e.extend(c.node,c.offset)):(t.setEnd(c.node,c.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var Bme=e0&&"documentMode"in document&&11>=document.documentMode,j1=null,QR=null,mC=null,HR=!1;function QH(e,t,n){var r=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;HR||j1==null||j1!==wI(r)||(r=j1,"selectionStart"in r&&BU(r)?r={start:r.selectionStart,end:r.selectionEnd}:(r=(r.ownerDocument&&r.ownerDocument.defaultView||window).getSelection(),r={anchorNode:r.anchorNode,anchorOffset:r.anchorOffset,focusNode:r.focusNode,focusOffset:r.focusOffset}),mC&&qC(mC,r)||(mC=r,r=II(QR,"onSelect"),0<r.length&&(t=new bU("onSelect","select",null,t,n),e.push({event:t,listeners:r}),t.target=j1)))}function r3(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var F1={animationend:r3("Animation","AnimationEnd"),animationiteration:r3("Animation","AnimationIteration"),animationstart:r3("Animation","AnimationStart"),transitionend:r3("Transition","TransitionEnd")},lM={},Ree={};e0&&(Ree=document.createElement("div").style,"AnimationEvent"in window||(delete F1.animationend.animation,delete F1.animationiteration.animation,delete F1.animationstart.animation),"TransitionEvent"in window||delete F1.transitionend.transition);function _F(e){if(lM[e])return lM[e];if(!F1[e])return e;var t=F1[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in Ree)return lM[e]=t[n];return e}var Oee=_F("animationend"),Dee=_F("animationiteration"),Uee=_F("animationstart"),zee=_F("transitionend"),Qee=new Map,HH="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Jy(e,t){Qee.set(e,t),Zx(t,[e])}for(var cM=0;cM<HH.length;cM++){var uM=HH[cM],Eme=uM.toLowerCase(),Tme=uM[0].toUpperCase()+uM.slice(1);Jy(Eme,"on"+Tme)}Jy(Oee,"onAnimationEnd");Jy(Dee,"onAnimationIteration");Jy(Uee,"onAnimationStart");Jy("dblclick","onDoubleClick");Jy("focusin","onFocus");Jy("focusout","onBlur");Jy(zee,"onTransitionEnd");dw("onMouseEnter",["mouseout","mouseover"]);dw("onMouseLeave",["mouseout","mouseover"]);dw("onPointerEnter",["pointerout","pointerover"]);dw("onPointerLeave",["pointerout","pointerover"]);Zx("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Zx("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Zx("onBeforeInput",["compositionend","keypress","textInput","paste"]);Zx("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Zx("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Zx("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var G2="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),Ime=new Set("cancel close invalid load scroll toggle".split(" ").concat(G2));function VH(e,t,n){var r=e.type||"unknown-event";e.currentTarget=n,EAe(r,t,void 0,e),e.currentTarget=null}function Hee(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var r=e[n],s=r.event;r=r.listeners;e:{var a=void 0;if(t)for(var c=r.length-1;0<=c;c--){var i=r[c],f=i.instance,g=i.currentTarget;if(i=i.listener,f!==a&&s.isPropagationStopped())break e;VH(s,i,g),a=f}else for(c=0;c<r.length;c++){if(i=r[c],f=i.instance,g=i.currentTarget,i=i.listener,f!==a&&s.isPropagationStopped())break e;VH(s,i,g),a=f}}}if(CI)throw e=OR,CI=!1,OR=null,e}function rl(e,t){var n=t[WR];n===void 0&&(n=t[WR]=new Set);var r=e+"__bubble";n.has(r)||(Vee(t,e,2,!1),n.add(r))}function dM(e,t,n){var r=0;t&&(r|=4),Vee(n,e,r,t)}var i3="_reactListening"+Math.random().toString(36).slice(2);function ZC(e){if(!e[i3]){e[i3]=!0,XJ.forEach(function(n){n!=="selectionchange"&&(Ime.has(n)||dM(n,!1,e),dM(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[i3]||(t[i3]=!0,dM("selectionchange",!1,t))}}function Vee(e,t,n,r){switch(Eee(t)){case 1:var s=HAe;break;case 4:s=VAe;break;default:s=_U}n=s.bind(null,t,n,e),s=void 0,!RR||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(s=!0),r?s!==void 0?e.addEventListener(t,n,{capture:!0,passive:s}):e.addEventListener(t,n,!0):s!==void 0?e.addEventListener(t,n,{passive:s}):e.addEventListener(t,n,!1)}function hM(e,t,n,r,s){var a=r;if(!(t&1)&&!(t&2)&&r!==null)e:for(;;){if(r===null)return;var c=r.tag;if(c===3||c===4){var i=r.stateNode.containerInfo;if(i===s||i.nodeType===8&&i.parentNode===s)break;if(c===4)for(c=r.return;c!==null;){var f=c.tag;if((f===3||f===4)&&(f=c.stateNode.containerInfo,f===s||f.nodeType===8&&f.parentNode===s))return;c=c.return}for(;i!==null;){if(c=lx(i),c===null)return;if(f=c.tag,f===5||f===6){r=a=c;continue e}i=i.parentNode}}r=r.return}fee(function(){var g=a,y=gU(n),b=[];e:{var T=Qee.get(e);if(T!==void 0){var S=bU,U=e;switch(e){case"keypress":if(IT(n)===0)break e;case"keydown":case"keyup":S=sme;break;case"focusin":U="focus",S=sM;break;case"focusout":U="blur",S=sM;break;case"beforeblur":case"afterblur":S=sM;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":S=PH;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":S=KAe;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":S=lme;break;case Oee:case Dee:case Uee:S=ZAe;break;case zee:S=ume;break;case"scroll":S=$Ae;break;case"wheel":S=hme;break;case"copy":case"cut":case"paste":S=YAe;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":S=LH}var N=(t&4)!==0,W=!N&&e==="scroll",L=N?T!==null?T+"Capture":null:T;N=[];for(var Q=g,V;Q!==null;){V=Q;var Z=V.stateNode;if(V.tag===5&&Z!==null&&(V=Z,L!==null&&(Z=VC(Q,L),Z!=null&&N.push(XC(Q,Z,V)))),W)break;Q=Q.return}0<N.length&&(T=new S(T,U,null,n,y),b.push({event:T,listeners:N}))}}if(!(t&7)){e:{if(T=e==="mouseover"||e==="pointerover",S=e==="mouseout"||e==="pointerout",T&&n!==MR&&(U=n.relatedTarget||n.fromElement)&&(lx(U)||U[t0]))break e;if((S||T)&&(T=y.window===y?y:(T=y.ownerDocument)?T.defaultView||T.parentWindow:window,S?(U=n.relatedTarget||n.toElement,S=g,U=U?lx(U):null,U!==null&&(W=Xx(U),U!==W||U.tag!==5&&U.tag!==6)&&(U=null)):(S=null,U=g),S!==U)){if(N=PH,Z="onMouseLeave",L="onMouseEnter",Q="mouse",(e==="pointerout"||e==="pointerover")&&(N=LH,Z="onPointerLeave",L="onPointerEnter",Q="pointer"),W=S==null?T:P1(S),V=U==null?T:P1(U),T=new N(Z,Q+"leave",S,n,y),T.target=W,T.relatedTarget=V,Z=null,lx(y)===g&&(N=new N(L,Q+"enter",U,n,y),N.target=V,N.relatedTarget=W,Z=N),W=Z,S&&U)t:{for(N=S,L=U,Q=0,V=N;V;V=K_(V))Q++;for(V=0,Z=L;Z;Z=K_(Z))V++;for(;0<Q-V;)N=K_(N),Q--;for(;0<V-Q;)L=K_(L),V--;for(;Q--;){if(N===L||L!==null&&N===L.alternate)break t;N=K_(N),L=K_(L)}N=null}else N=null;S!==null&&$H(b,T,S,N,!1),U!==null&&W!==null&&$H(b,W,U,N,!0)}}e:{if(T=g?P1(g):window,S=T.nodeName&&T.nodeName.toLowerCase(),S==="select"||S==="input"&&T.type==="file")var ne=vme;else if(RH(T))if(kee)ne=bme;else{ne=_me;var Y=xme}else(S=T.nodeName)&&S.toLowerCase()==="input"&&(T.type==="checkbox"||T.type==="radio")&&(ne=wme);if(ne&&(ne=ne(e,g))){Pee(b,ne,n,y);break e}Y&&Y(e,T,g),e==="focusout"&&(Y=T._wrapperState)&&Y.controlled&&T.type==="number"&&jR(T,"number",T.value)}switch(Y=g?P1(g):window,e){case"focusin":(RH(Y)||Y.contentEditable==="true")&&(j1=Y,QR=g,mC=null);break;case"focusout":mC=QR=j1=null;break;case"mousedown":HR=!0;break;case"contextmenu":case"mouseup":case"dragend":HR=!1,QH(b,n,y);break;case"selectionchange":if(Bme)break;case"keydown":case"keyup":QH(b,n,y)}var le;if(SU)e:{switch(e){case"compositionstart":var pe="onCompositionStart";break e;case"compositionend":pe="onCompositionEnd";break e;case"compositionupdate":pe="onCompositionUpdate";break e}pe=void 0}else I1?jee(e,n)&&(pe="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(pe="onCompositionStart");pe&&(Iee&&n.locale!=="ko"&&(I1||pe!=="onCompositionStart"?pe==="onCompositionEnd"&&I1&&(le=Tee()):(fy=y,wU="value"in fy?fy.value:fy.textContent,I1=!0)),Y=II(g,pe),0<Y.length&&(pe=new kH(pe,e,null,n,y),b.push({event:pe,listeners:Y}),le?pe.data=le:(le=Fee(n),le!==null&&(pe.data=le)))),(le=pme?Ame(e,n):mme(e,n))&&(g=II(g,"onBeforeInput"),0<g.length&&(y=new kH("onBeforeInput","beforeinput",null,n,y),b.push({event:y,listeners:g}),y.data=le))}Hee(b,t)})}function XC(e,t,n){return{instance:e,listener:t,currentTarget:n}}function II(e,t){for(var n=t+"Capture",r=[];e!==null;){var s=e,a=s.stateNode;s.tag===5&&a!==null&&(s=a,a=VC(e,n),a!=null&&r.unshift(XC(e,a,s)),a=VC(e,t),a!=null&&r.push(XC(e,a,s))),e=e.return}return r}function K_(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function $H(e,t,n,r,s){for(var a=t._reactName,c=[];n!==null&&n!==r;){var i=n,f=i.alternate,g=i.stateNode;if(f!==null&&f===r)break;i.tag===5&&g!==null&&(i=g,s?(f=VC(n,a),f!=null&&c.unshift(XC(n,f,i))):s||(f=VC(n,a),f!=null&&c.push(XC(n,f,i)))),n=n.return}c.length!==0&&e.push({event:t,listeners:c})}var jme=/\r\n?/g,Fme=/\u0000|\uFFFD/g;function GH(e){return(typeof e=="string"?e:""+e).replace(jme,`
`).replace(Fme,"")}function s3(e,t,n){if(t=GH(t),GH(e)!==t&&n)throw Error(Tr(425))}function jI(){}var VR=null,$R=null;function GR(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var KR=typeof setTimeout=="function"?setTimeout:void 0,Pme=typeof clearTimeout=="function"?clearTimeout:void 0,KH=typeof Promise=="function"?Promise:void 0,kme=typeof queueMicrotask=="function"?queueMicrotask:typeof KH<"u"?function(e){return KH.resolve(null).then(e).catch(Lme)}:KR;function Lme(e){setTimeout(function(){throw e})}function fM(e,t){var n=t,r=0;do{var s=n.nextSibling;if(e.removeChild(n),s&&s.nodeType===8)if(n=s.data,n==="/$"){if(r===0){e.removeChild(s),KC(t);return}r--}else n!=="$"&&n!=="$?"&&n!=="$!"||r++;n=s}while(n);KC(t)}function Cy(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function WH(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var Vw=Math.random().toString(36).slice(2),Hm="__reactFiber$"+Vw,YC="__reactProps$"+Vw,t0="__reactContainer$"+Vw,WR="__reactEvents$"+Vw,Mme="__reactListeners$"+Vw,Nme="__reactHandles$"+Vw;function lx(e){var t=e[Hm];if(t)return t;for(var n=e.parentNode;n;){if(t=n[t0]||n[Hm]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=WH(e);e!==null;){if(n=e[Hm])return n;e=WH(e)}return t}e=n,n=e.parentNode}return null}function pB(e){return e=e[Hm]||e[t0],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function P1(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(Tr(33))}function wF(e){return e[YC]||null}var qR=[],k1=-1;function ev(e){return{current:e}}function ol(e){0>k1||(e.current=qR[k1],qR[k1]=null,k1--)}function Na(e,t){k1++,qR[k1]=e.current,e.current=t}var Dy={},Pd=ev(Dy),Xh=ev(!1),Px=Dy;function hw(e,t){var n=e.type.contextTypes;if(!n)return Dy;var r=e.stateNode;if(r&&r.__reactInternalMemoizedUnmaskedChildContext===t)return r.__reactInternalMemoizedMaskedChildContext;var s={},a;for(a in n)s[a]=t[a];return r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=s),s}function Yh(e){return e=e.childContextTypes,e!=null}function FI(){ol(Xh),ol(Pd)}function qH(e,t,n){if(Pd.current!==Dy)throw Error(Tr(168));Na(Pd,t),Na(Xh,n)}function $ee(e,t,n){var r=e.stateNode;if(t=t.childContextTypes,typeof r.getChildContext!="function")return n;r=r.getChildContext();for(var s in r)if(!(s in t))throw Error(Tr(108,xAe(e)||"Unknown",s));return Fl({},n,r)}function PI(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||Dy,Px=Pd.current,Na(Pd,e),Na(Xh,Xh.current),!0}function ZH(e,t,n){var r=e.stateNode;if(!r)throw Error(Tr(169));n?(e=$ee(e,t,Px),r.__reactInternalMemoizedMergedChildContext=e,ol(Xh),ol(Pd),Na(Pd,e)):ol(Xh),Na(Xh,n)}var Hg=null,bF=!1,pM=!1;function Gee(e){Hg===null?Hg=[e]:Hg.push(e)}function Rme(e){bF=!0,Gee(e)}function tv(){if(!pM&&Hg!==null){pM=!0;var e=0,t=oa;try{var n=Hg;for(oa=1;e<n.length;e++){var r=n[e];do r=r(!0);while(r!==null)}Hg=null,bF=!1}catch(s){throw Hg!==null&&(Hg=Hg.slice(e+1)),gee(yU,tv),s}finally{oa=t,pM=!1}}return null}var L1=[],M1=0,kI=null,LI=0,Pp=[],kp=0,kx=null,$g=1,Gg="";function Xv(e,t){L1[M1++]=LI,L1[M1++]=kI,kI=e,LI=t}function Kee(e,t,n){Pp[kp++]=$g,Pp[kp++]=Gg,Pp[kp++]=kx,kx=e;var r=$g;e=Gg;var s=32-VA(r)-1;r&=~(1<<s),n+=1;var a=32-VA(t)+s;if(30<a){var c=s-s%5;a=(r&(1<<c)-1).toString(32),r>>=c,s-=c,$g=1<<32-VA(t)+s|n<<s|r,Gg=a+e}else $g=1<<a|n<<s|r,Gg=e}function EU(e){e.return!==null&&(Xv(e,1),Kee(e,1,0))}function TU(e){for(;e===kI;)kI=L1[--M1],L1[M1]=null,LI=L1[--M1],L1[M1]=null;for(;e===kx;)kx=Pp[--kp],Pp[kp]=null,Gg=Pp[--kp],Pp[kp]=null,$g=Pp[--kp],Pp[kp]=null}var qf=null,Kf=null,gl=!1,RA=null;function Wee(e,t){var n=Op(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function XH(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,qf=e,Kf=Cy(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,qf=e,Kf=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=kx!==null?{id:$g,overflow:Gg}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=Op(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,qf=e,Kf=null,!0):!1;default:return!1}}function ZR(e){return(e.mode&1)!==0&&(e.flags&128)===0}function XR(e){if(gl){var t=Kf;if(t){var n=t;if(!XH(e,t)){if(ZR(e))throw Error(Tr(418));t=Cy(n.nextSibling);var r=qf;t&&XH(e,t)?Wee(r,n):(e.flags=e.flags&-4097|2,gl=!1,qf=e)}}else{if(ZR(e))throw Error(Tr(418));e.flags=e.flags&-4097|2,gl=!1,qf=e}}}function YH(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;qf=e}function o3(e){if(e!==qf)return!1;if(!gl)return YH(e),gl=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!GR(e.type,e.memoizedProps)),t&&(t=Kf)){if(ZR(e))throw qee(),Error(Tr(418));for(;t;)Wee(e,t),t=Cy(t.nextSibling)}if(YH(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(Tr(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Kf=Cy(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Kf=null}}else Kf=qf?Cy(e.stateNode.nextSibling):null;return!0}function qee(){for(var e=Kf;e;)e=Cy(e.nextSibling)}function fw(){Kf=qf=null,gl=!1}function IU(e){RA===null?RA=[e]:RA.push(e)}var Ome=f0.ReactCurrentBatchConfig;function f2(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(Tr(309));var r=n.stateNode}if(!r)throw Error(Tr(147,e));var s=r,a=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===a?t.ref:(t=function(c){var i=s.refs;c===null?delete i[a]:i[a]=c},t._stringRef=a,t)}if(typeof e!="string")throw Error(Tr(284));if(!n._owner)throw Error(Tr(290,e))}return e}function a3(e,t){throw e=Object.prototype.toString.call(t),Error(Tr(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function JH(e){var t=e._init;return t(e._payload)}function Zee(e){function t(L,Q){if(e){var V=L.deletions;V===null?(L.deletions=[Q],L.flags|=16):V.push(Q)}}function n(L,Q){if(!e)return null;for(;Q!==null;)t(L,Q),Q=Q.sibling;return null}function r(L,Q){for(L=new Map;Q!==null;)Q.key!==null?L.set(Q.key,Q):L.set(Q.index,Q),Q=Q.sibling;return L}function s(L,Q){return L=Ty(L,Q),L.index=0,L.sibling=null,L}function a(L,Q,V){return L.index=V,e?(V=L.alternate,V!==null?(V=V.index,V<Q?(L.flags|=2,Q):V):(L.flags|=2,Q)):(L.flags|=1048576,Q)}function c(L){return e&&L.alternate===null&&(L.flags|=2),L}function i(L,Q,V,Z){return Q===null||Q.tag!==6?(Q=_M(V,L.mode,Z),Q.return=L,Q):(Q=s(Q,V),Q.return=L,Q)}function f(L,Q,V,Z){var ne=V.type;return ne===T1?y(L,Q,V.props.children,Z,V.key):Q!==null&&(Q.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===iy&&JH(ne)===Q.type)?(Z=s(Q,V.props),Z.ref=f2(L,Q,V),Z.return=L,Z):(Z=NT(V.type,V.key,V.props,null,L.mode,Z),Z.ref=f2(L,Q,V),Z.return=L,Z)}function g(L,Q,V,Z){return Q===null||Q.tag!==4||Q.stateNode.containerInfo!==V.containerInfo||Q.stateNode.implementation!==V.implementation?(Q=wM(V,L.mode,Z),Q.return=L,Q):(Q=s(Q,V.children||[]),Q.return=L,Q)}function y(L,Q,V,Z,ne){return Q===null||Q.tag!==7?(Q=gx(V,L.mode,Z,ne),Q.return=L,Q):(Q=s(Q,V),Q.return=L,Q)}function b(L,Q,V){if(typeof Q=="string"&&Q!==""||typeof Q=="number")return Q=_M(""+Q,L.mode,V),Q.return=L,Q;if(typeof Q=="object"&&Q!==null){switch(Q.$$typeof){case Z4:return V=NT(Q.type,Q.key,Q.props,null,L.mode,V),V.ref=f2(L,null,Q),V.return=L,V;case E1:return Q=wM(Q,L.mode,V),Q.return=L,Q;case iy:var Z=Q._init;return b(L,Z(Q._payload),V)}if(V2(Q)||l2(Q))return Q=gx(Q,L.mode,V,null),Q.return=L,Q;a3(L,Q)}return null}function T(L,Q,V,Z){var ne=Q!==null?Q.key:null;if(typeof V=="string"&&V!==""||typeof V=="number")return ne!==null?null:i(L,Q,""+V,Z);if(typeof V=="object"&&V!==null){switch(V.$$typeof){case Z4:return V.key===ne?f(L,Q,V,Z):null;case E1:return V.key===ne?g(L,Q,V,Z):null;case iy:return ne=V._init,T(L,Q,ne(V._payload),Z)}if(V2(V)||l2(V))return ne!==null?null:y(L,Q,V,Z,null);a3(L,V)}return null}function S(L,Q,V,Z,ne){if(typeof Z=="string"&&Z!==""||typeof Z=="number")return L=L.get(V)||null,i(Q,L,""+Z,ne);if(typeof Z=="object"&&Z!==null){switch(Z.$$typeof){case Z4:return L=L.get(Z.key===null?V:Z.key)||null,f(Q,L,Z,ne);case E1:return L=L.get(Z.key===null?V:Z.key)||null,g(Q,L,Z,ne);case iy:var Y=Z._init;return S(L,Q,V,Y(Z._payload),ne)}if(V2(Z)||l2(Z))return L=L.get(V)||null,y(Q,L,Z,ne,null);a3(Q,Z)}return null}function U(L,Q,V,Z){for(var ne=null,Y=null,le=Q,pe=Q=0,_e=null;le!==null&&pe<V.length;pe++){le.index>pe?(_e=le,le=null):_e=le.sibling;var ye=T(L,le,V[pe],Z);if(ye===null){le===null&&(le=_e);break}e&&le&&ye.alternate===null&&t(L,le),Q=a(ye,Q,pe),Y===null?ne=ye:Y.sibling=ye,Y=ye,le=_e}if(pe===V.length)return n(L,le),gl&&Xv(L,pe),ne;if(le===null){for(;pe<V.length;pe++)le=b(L,V[pe],Z),le!==null&&(Q=a(le,Q,pe),Y===null?ne=le:Y.sibling=le,Y=le);return gl&&Xv(L,pe),ne}for(le=r(L,le);pe<V.length;pe++)_e=S(le,L,pe,V[pe],Z),_e!==null&&(e&&_e.alternate!==null&&le.delete(_e.key===null?pe:_e.key),Q=a(_e,Q,pe),Y===null?ne=_e:Y.sibling=_e,Y=_e);return e&&le.forEach(function(he){return t(L,he)}),gl&&Xv(L,pe),ne}function N(L,Q,V,Z){var ne=l2(V);if(typeof ne!="function")throw Error(Tr(150));if(V=ne.call(V),V==null)throw Error(Tr(151));for(var Y=ne=null,le=Q,pe=Q=0,_e=null,ye=V.next();le!==null&&!ye.done;pe++,ye=V.next()){le.index>pe?(_e=le,le=null):_e=le.sibling;var he=T(L,le,ye.value,Z);if(he===null){le===null&&(le=_e);break}e&&le&&he.alternate===null&&t(L,le),Q=a(he,Q,pe),Y===null?ne=he:Y.sibling=he,Y=he,le=_e}if(ye.done)return n(L,le),gl&&Xv(L,pe),ne;if(le===null){for(;!ye.done;pe++,ye=V.next())ye=b(L,ye.value,Z),ye!==null&&(Q=a(ye,Q,pe),Y===null?ne=ye:Y.sibling=ye,Y=ye);return gl&&Xv(L,pe),ne}for(le=r(L,le);!ye.done;pe++,ye=V.next())ye=S(le,L,pe,ye.value,Z),ye!==null&&(e&&ye.alternate!==null&&le.delete(ye.key===null?pe:ye.key),Q=a(ye,Q,pe),Y===null?ne=ye:Y.sibling=ye,Y=ye);return e&&le.forEach(function(be){return t(L,be)}),gl&&Xv(L,pe),ne}function W(L,Q,V,Z){if(typeof V=="object"&&V!==null&&V.type===T1&&V.key===null&&(V=V.props.children),typeof V=="object"&&V!==null){switch(V.$$typeof){case Z4:e:{for(var ne=V.key,Y=Q;Y!==null;){if(Y.key===ne){if(ne=V.type,ne===T1){if(Y.tag===7){n(L,Y.sibling),Q=s(Y,V.props.children),Q.return=L,L=Q;break e}}else if(Y.elementType===ne||typeof ne=="object"&&ne!==null&&ne.$$typeof===iy&&JH(ne)===Y.type){n(L,Y.sibling),Q=s(Y,V.props),Q.ref=f2(L,Y,V),Q.return=L,L=Q;break e}n(L,Y);break}else t(L,Y);Y=Y.sibling}V.type===T1?(Q=gx(V.props.children,L.mode,Z,V.key),Q.return=L,L=Q):(Z=NT(V.type,V.key,V.props,null,L.mode,Z),Z.ref=f2(L,Q,V),Z.return=L,L=Z)}return c(L);case E1:e:{for(Y=V.key;Q!==null;){if(Q.key===Y)if(Q.tag===4&&Q.stateNode.containerInfo===V.containerInfo&&Q.stateNode.implementation===V.implementation){n(L,Q.sibling),Q=s(Q,V.children||[]),Q.return=L,L=Q;break e}else{n(L,Q);break}else t(L,Q);Q=Q.sibling}Q=wM(V,L.mode,Z),Q.return=L,L=Q}return c(L);case iy:return Y=V._init,W(L,Q,Y(V._payload),Z)}if(V2(V))return U(L,Q,V,Z);if(l2(V))return N(L,Q,V,Z);a3(L,V)}return typeof V=="string"&&V!==""||typeof V=="number"?(V=""+V,Q!==null&&Q.tag===6?(n(L,Q.sibling),Q=s(Q,V),Q.return=L,L=Q):(n(L,Q),Q=_M(V,L.mode,Z),Q.return=L,L=Q),c(L)):n(L,Q)}return W}var pw=Zee(!0),Xee=Zee(!1),MI=ev(null),NI=null,N1=null,jU=null;function FU(){jU=N1=NI=null}function PU(e){var t=MI.current;ol(MI),e._currentValue=t}function YR(e,t,n){for(;e!==null;){var r=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,r!==null&&(r.childLanes|=t)):r!==null&&(r.childLanes&t)!==t&&(r.childLanes|=t),e===n)break;e=e.return}}function Y1(e,t){NI=e,jU=N1=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(Zh=!0),e.firstContext=null)}function $p(e){var t=e._currentValue;if(jU!==e)if(e={context:e,memoizedValue:t,next:null},N1===null){if(NI===null)throw Error(Tr(308));N1=e,NI.dependencies={lanes:0,firstContext:e}}else N1=N1.next=e;return t}var cx=null;function kU(e){cx===null?cx=[e]:cx.push(e)}function Yee(e,t,n,r){var s=t.interleaved;return s===null?(n.next=n,kU(t)):(n.next=s.next,s.next=n),t.interleaved=n,n0(e,r)}function n0(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var sy=!1;function LU(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function Jee(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function Kg(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function Sy(e,t,n){var r=e.updateQueue;if(r===null)return null;if(r=r.shared,Lo&2){var s=r.pending;return s===null?t.next=t:(t.next=s.next,s.next=t),r.pending=t,n0(e,n)}return s=r.interleaved,s===null?(t.next=t,kU(r)):(t.next=s.next,s.next=t),r.interleaved=t,n0(e,n)}function jT(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vU(e,n)}}function eV(e,t){var n=e.updateQueue,r=e.alternate;if(r!==null&&(r=r.updateQueue,n===r)){var s=null,a=null;if(n=n.firstBaseUpdate,n!==null){do{var c={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};a===null?s=a=c:a=a.next=c,n=n.next}while(n!==null);a===null?s=a=t:a=a.next=t}else s=a=t;n={baseState:r.baseState,firstBaseUpdate:s,lastBaseUpdate:a,shared:r.shared,effects:r.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function RI(e,t,n,r){var s=e.updateQueue;sy=!1;var a=s.firstBaseUpdate,c=s.lastBaseUpdate,i=s.shared.pending;if(i!==null){s.shared.pending=null;var f=i,g=f.next;f.next=null,c===null?a=g:c.next=g,c=f;var y=e.alternate;y!==null&&(y=y.updateQueue,i=y.lastBaseUpdate,i!==c&&(i===null?y.firstBaseUpdate=g:i.next=g,y.lastBaseUpdate=f))}if(a!==null){var b=s.baseState;c=0,y=g=f=null,i=a;do{var T=i.lane,S=i.eventTime;if((r&T)===T){y!==null&&(y=y.next={eventTime:S,lane:0,tag:i.tag,payload:i.payload,callback:i.callback,next:null});e:{var U=e,N=i;switch(T=t,S=n,N.tag){case 1:if(U=N.payload,typeof U=="function"){b=U.call(S,b,T);break e}b=U;break e;case 3:U.flags=U.flags&-65537|128;case 0:if(U=N.payload,T=typeof U=="function"?U.call(S,b,T):U,T==null)break e;b=Fl({},b,T);break e;case 2:sy=!0}}i.callback!==null&&i.lane!==0&&(e.flags|=64,T=s.effects,T===null?s.effects=[i]:T.push(i))}else S={eventTime:S,lane:T,tag:i.tag,payload:i.payload,callback:i.callback,next:null},y===null?(g=y=S,f=b):y=y.next=S,c|=T;if(i=i.next,i===null){if(i=s.shared.pending,i===null)break;T=i,i=T.next,T.next=null,s.lastBaseUpdate=T,s.shared.pending=null}}while(!0);if(y===null&&(f=b),s.baseState=f,s.firstBaseUpdate=g,s.lastBaseUpdate=y,t=s.shared.interleaved,t!==null){s=t;do c|=s.lane,s=s.next;while(s!==t)}else a===null&&(s.shared.lanes=0);Mx|=c,e.lanes=c,e.memoizedState=b}}function tV(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var r=e[t],s=r.callback;if(s!==null){if(r.callback=null,r=n,typeof s!="function")throw Error(Tr(191,s));s.call(r)}}}var AB={},Km=ev(AB),JC=ev(AB),eS=ev(AB);function ux(e){if(e===AB)throw Error(Tr(174));return e}function MU(e,t){switch(Na(eS,t),Na(JC,e),Na(Km,AB),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:PR(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=PR(t,e)}ol(Km),Na(Km,t)}function Aw(){ol(Km),ol(JC),ol(eS)}function ete(e){ux(eS.current);var t=ux(Km.current),n=PR(t,e.type);t!==n&&(Na(JC,e),Na(Km,n))}function NU(e){JC.current===e&&(ol(Km),ol(JC))}var Tl=ev(0);function OI(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var AM=[];function RU(){for(var e=0;e<AM.length;e++)AM[e]._workInProgressVersionPrimary=null;AM.length=0}var FT=f0.ReactCurrentDispatcher,mM=f0.ReactCurrentBatchConfig,Lx=0,jl=null,Zc=null,gu=null,DI=!1,gC=!1,tS=0,Dme=0;function gd(){throw Error(Tr(321))}function OU(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!qA(e[n],t[n]))return!1;return!0}function DU(e,t,n,r,s,a){if(Lx=a,jl=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,FT.current=e===null||e.memoizedState===null?Hme:Vme,e=n(r,s),gC){a=0;do{if(gC=!1,tS=0,25<=a)throw Error(Tr(301));a+=1,gu=Zc=null,t.updateQueue=null,FT.current=$me,e=n(r,s)}while(gC)}if(FT.current=UI,t=Zc!==null&&Zc.next!==null,Lx=0,gu=Zc=jl=null,DI=!1,t)throw Error(Tr(300));return e}function UU(){var e=tS!==0;return tS=0,e}function Om(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return gu===null?jl.memoizedState=gu=e:gu=gu.next=e,gu}function Gp(){if(Zc===null){var e=jl.alternate;e=e!==null?e.memoizedState:null}else e=Zc.next;var t=gu===null?jl.memoizedState:gu.next;if(t!==null)gu=t,Zc=e;else{if(e===null)throw Error(Tr(310));Zc=e,e={memoizedState:Zc.memoizedState,baseState:Zc.baseState,baseQueue:Zc.baseQueue,queue:Zc.queue,next:null},gu===null?jl.memoizedState=gu=e:gu=gu.next=e}return gu}function nS(e,t){return typeof t=="function"?t(e):t}function gM(e){var t=Gp(),n=t.queue;if(n===null)throw Error(Tr(311));n.lastRenderedReducer=e;var r=Zc,s=r.baseQueue,a=n.pending;if(a!==null){if(s!==null){var c=s.next;s.next=a.next,a.next=c}r.baseQueue=s=a,n.pending=null}if(s!==null){a=s.next,r=r.baseState;var i=c=null,f=null,g=a;do{var y=g.lane;if((Lx&y)===y)f!==null&&(f=f.next={lane:0,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null}),r=g.hasEagerState?g.eagerState:e(r,g.action);else{var b={lane:y,action:g.action,hasEagerState:g.hasEagerState,eagerState:g.eagerState,next:null};f===null?(i=f=b,c=r):f=f.next=b,jl.lanes|=y,Mx|=y}g=g.next}while(g!==null&&g!==a);f===null?c=r:f.next=i,qA(r,t.memoizedState)||(Zh=!0),t.memoizedState=r,t.baseState=c,t.baseQueue=f,n.lastRenderedState=r}if(e=n.interleaved,e!==null){s=e;do a=s.lane,jl.lanes|=a,Mx|=a,s=s.next;while(s!==e)}else s===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function yM(e){var t=Gp(),n=t.queue;if(n===null)throw Error(Tr(311));n.lastRenderedReducer=e;var r=n.dispatch,s=n.pending,a=t.memoizedState;if(s!==null){n.pending=null;var c=s=s.next;do a=e(a,c.action),c=c.next;while(c!==s);qA(a,t.memoizedState)||(Zh=!0),t.memoizedState=a,t.baseQueue===null&&(t.baseState=a),n.lastRenderedState=a}return[a,r]}function tte(){}function nte(e,t){var n=jl,r=Gp(),s=t(),a=!qA(r.memoizedState,s);if(a&&(r.memoizedState=s,Zh=!0),r=r.queue,zU(ste.bind(null,n,r,e),[e]),r.getSnapshot!==t||a||gu!==null&&gu.memoizedState.tag&1){if(n.flags|=2048,rS(9,ite.bind(null,n,r,s,t),void 0,null),vu===null)throw Error(Tr(349));Lx&30||rte(n,t,s)}return s}function rte(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=jl.updateQueue,t===null?(t={lastEffect:null,stores:null},jl.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function ite(e,t,n,r){t.value=n,t.getSnapshot=r,ote(t)&&ate(e)}function ste(e,t,n){return n(function(){ote(t)&&ate(e)})}function ote(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!qA(e,n)}catch{return!0}}function ate(e){var t=n0(e,1);t!==null&&$A(t,e,1,-1)}function nV(e){var t=Om();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:nS,lastRenderedState:e},t.queue=e,e=e.dispatch=Qme.bind(null,jl,e),[t.memoizedState,e]}function rS(e,t,n,r){return e={tag:e,create:t,destroy:n,deps:r,next:null},t=jl.updateQueue,t===null?(t={lastEffect:null,stores:null},jl.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(r=n.next,n.next=e,e.next=r,t.lastEffect=e)),e}function lte(){return Gp().memoizedState}function PT(e,t,n,r){var s=Om();jl.flags|=e,s.memoizedState=rS(1|t,n,void 0,r===void 0?null:r)}function CF(e,t,n,r){var s=Gp();r=r===void 0?null:r;var a=void 0;if(Zc!==null){var c=Zc.memoizedState;if(a=c.destroy,r!==null&&OU(r,c.deps)){s.memoizedState=rS(t,n,a,r);return}}jl.flags|=e,s.memoizedState=rS(1|t,n,a,r)}function rV(e,t){return PT(8390656,8,e,t)}function zU(e,t){return CF(2048,8,e,t)}function cte(e,t){return CF(4,2,e,t)}function ute(e,t){return CF(4,4,e,t)}function dte(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function hte(e,t,n){return n=n!=null?n.concat([e]):null,CF(4,4,dte.bind(null,t,e),n)}function QU(){}function fte(e,t){var n=Gp();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&OU(t,r[1])?r[0]:(n.memoizedState=[e,t],e)}function pte(e,t){var n=Gp();t=t===void 0?null:t;var r=n.memoizedState;return r!==null&&t!==null&&OU(t,r[1])?r[0]:(e=e(),n.memoizedState=[e,t],e)}function Ate(e,t,n){return Lx&21?(qA(n,t)||(n=xee(),jl.lanes|=n,Mx|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,Zh=!0),e.memoizedState=n)}function Ume(e,t){var n=oa;oa=n!==0&&4>n?n:4,e(!0);var r=mM.transition;mM.transition={};try{e(!1),t()}finally{oa=n,mM.transition=r}}function mte(){return Gp().memoizedState}function zme(e,t,n){var r=Ey(e);if(n={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null},gte(e))yte(t,n);else if(n=Yee(e,t,n,r),n!==null){var s=mh();$A(n,e,r,s),vte(n,t,r)}}function Qme(e,t,n){var r=Ey(e),s={lane:r,action:n,hasEagerState:!1,eagerState:null,next:null};if(gte(e))yte(t,s);else{var a=e.alternate;if(e.lanes===0&&(a===null||a.lanes===0)&&(a=t.lastRenderedReducer,a!==null))try{var c=t.lastRenderedState,i=a(c,n);if(s.hasEagerState=!0,s.eagerState=i,qA(i,c)){var f=t.interleaved;f===null?(s.next=s,kU(t)):(s.next=f.next,f.next=s),t.interleaved=s;return}}catch{}finally{}n=Yee(e,t,s,r),n!==null&&(s=mh(),$A(n,e,r,s),vte(n,t,r))}}function gte(e){var t=e.alternate;return e===jl||t!==null&&t===jl}function yte(e,t){gC=DI=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function vte(e,t,n){if(n&4194240){var r=t.lanes;r&=e.pendingLanes,n|=r,t.lanes=n,vU(e,n)}}var UI={readContext:$p,useCallback:gd,useContext:gd,useEffect:gd,useImperativeHandle:gd,useInsertionEffect:gd,useLayoutEffect:gd,useMemo:gd,useReducer:gd,useRef:gd,useState:gd,useDebugValue:gd,useDeferredValue:gd,useTransition:gd,useMutableSource:gd,useSyncExternalStore:gd,useId:gd,unstable_isNewReconciler:!1},Hme={readContext:$p,useCallback:function(e,t){return Om().memoizedState=[e,t===void 0?null:t],e},useContext:$p,useEffect:rV,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,PT(4194308,4,dte.bind(null,t,e),n)},useLayoutEffect:function(e,t){return PT(4194308,4,e,t)},useInsertionEffect:function(e,t){return PT(4,2,e,t)},useMemo:function(e,t){var n=Om();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var r=Om();return t=n!==void 0?n(t):t,r.memoizedState=r.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},r.queue=e,e=e.dispatch=zme.bind(null,jl,e),[r.memoizedState,e]},useRef:function(e){var t=Om();return e={current:e},t.memoizedState=e},useState:nV,useDebugValue:QU,useDeferredValue:function(e){return Om().memoizedState=e},useTransition:function(){var e=nV(!1),t=e[0];return e=Ume.bind(null,e[1]),Om().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var r=jl,s=Om();if(gl){if(n===void 0)throw Error(Tr(407));n=n()}else{if(n=t(),vu===null)throw Error(Tr(349));Lx&30||rte(r,t,n)}s.memoizedState=n;var a={value:n,getSnapshot:t};return s.queue=a,rV(ste.bind(null,r,a,e),[e]),r.flags|=2048,rS(9,ite.bind(null,r,a,n,t),void 0,null),n},useId:function(){var e=Om(),t=vu.identifierPrefix;if(gl){var n=Gg,r=$g;n=(r&~(1<<32-VA(r)-1)).toString(32)+n,t=":"+t+"R"+n,n=tS++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=Dme++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},Vme={readContext:$p,useCallback:fte,useContext:$p,useEffect:zU,useImperativeHandle:hte,useInsertionEffect:cte,useLayoutEffect:ute,useMemo:pte,useReducer:gM,useRef:lte,useState:function(){return gM(nS)},useDebugValue:QU,useDeferredValue:function(e){var t=Gp();return Ate(t,Zc.memoizedState,e)},useTransition:function(){var e=gM(nS)[0],t=Gp().memoizedState;return[e,t]},useMutableSource:tte,useSyncExternalStore:nte,useId:mte,unstable_isNewReconciler:!1},$me={readContext:$p,useCallback:fte,useContext:$p,useEffect:zU,useImperativeHandle:hte,useInsertionEffect:cte,useLayoutEffect:ute,useMemo:pte,useReducer:yM,useRef:lte,useState:function(){return yM(nS)},useDebugValue:QU,useDeferredValue:function(e){var t=Gp();return Zc===null?t.memoizedState=e:Ate(t,Zc.memoizedState,e)},useTransition:function(){var e=yM(nS)[0],t=Gp().memoizedState;return[e,t]},useMutableSource:tte,useSyncExternalStore:nte,useId:mte,unstable_isNewReconciler:!1};function FA(e,t){if(e&&e.defaultProps){t=Fl({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function JR(e,t,n,r){t=e.memoizedState,n=n(r,t),n=n==null?t:Fl({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var SF={isMounted:function(e){return(e=e._reactInternals)?Xx(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var r=mh(),s=Ey(e),a=Kg(r,s);a.payload=t,n!=null&&(a.callback=n),t=Sy(e,a,s),t!==null&&($A(t,e,s,r),jT(t,e,s))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var r=mh(),s=Ey(e),a=Kg(r,s);a.tag=1,a.payload=t,n!=null&&(a.callback=n),t=Sy(e,a,s),t!==null&&($A(t,e,s,r),jT(t,e,s))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mh(),r=Ey(e),s=Kg(n,r);s.tag=2,t!=null&&(s.callback=t),t=Sy(e,s,r),t!==null&&($A(t,e,r,n),jT(t,e,r))}};function iV(e,t,n,r,s,a,c){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(r,a,c):t.prototype&&t.prototype.isPureReactComponent?!qC(n,r)||!qC(s,a):!0}function xte(e,t,n){var r=!1,s=Dy,a=t.contextType;return typeof a=="object"&&a!==null?a=$p(a):(s=Yh(t)?Px:Pd.current,r=t.contextTypes,a=(r=r!=null)?hw(e,s):Dy),t=new t(n,a),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=SF,e.stateNode=t,t._reactInternals=e,r&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=s,e.__reactInternalMemoizedMaskedChildContext=a),t}function sV(e,t,n,r){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,r),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,r),t.state!==e&&SF.enqueueReplaceState(t,t.state,null)}function eO(e,t,n,r){var s=e.stateNode;s.props=n,s.state=e.memoizedState,s.refs={},LU(e);var a=t.contextType;typeof a=="object"&&a!==null?s.context=$p(a):(a=Yh(t)?Px:Pd.current,s.context=hw(e,a)),s.state=e.memoizedState,a=t.getDerivedStateFromProps,typeof a=="function"&&(JR(e,t,a,n),s.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof s.getSnapshotBeforeUpdate=="function"||typeof s.UNSAFE_componentWillMount!="function"&&typeof s.componentWillMount!="function"||(t=s.state,typeof s.componentWillMount=="function"&&s.componentWillMount(),typeof s.UNSAFE_componentWillMount=="function"&&s.UNSAFE_componentWillMount(),t!==s.state&&SF.enqueueReplaceState(s,s.state,null),RI(e,n,s,r),s.state=e.memoizedState),typeof s.componentDidMount=="function"&&(e.flags|=4194308)}function mw(e,t){try{var n="",r=t;do n+=vAe(r),r=r.return;while(r);var s=n}catch(a){s=`
Error generating stack: `+a.message+`
`+a.stack}return{value:e,source:t,stack:s,digest:null}}function vM(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function tO(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var Gme=typeof WeakMap=="function"?WeakMap:Map;function _te(e,t,n){n=Kg(-1,n),n.tag=3,n.payload={element:null};var r=t.value;return n.callback=function(){QI||(QI=!0,dO=r),tO(e,t)},n}function wte(e,t,n){n=Kg(-1,n),n.tag=3;var r=e.type.getDerivedStateFromError;if(typeof r=="function"){var s=t.value;n.payload=function(){return r(s)},n.callback=function(){tO(e,t)}}var a=e.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(n.callback=function(){tO(e,t),typeof r!="function"&&(By===null?By=new Set([this]):By.add(this));var c=t.stack;this.componentDidCatch(t.value,{componentStack:c!==null?c:""})}),n}function oV(e,t,n){var r=e.pingCache;if(r===null){r=e.pingCache=new Gme;var s=new Set;r.set(t,s)}else s=r.get(t),s===void 0&&(s=new Set,r.set(t,s));s.has(n)||(s.add(n),e=oge.bind(null,e,t,n),t.then(e,e))}function aV(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function lV(e,t,n,r,s){return e.mode&1?(e.flags|=65536,e.lanes=s,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=Kg(-1,1),t.tag=2,Sy(n,t,1))),n.lanes|=1),e)}var Kme=f0.ReactCurrentOwner,Zh=!1;function hh(e,t,n,r){t.child=e===null?Xee(t,null,n,r):pw(t,e.child,n,r)}function cV(e,t,n,r,s){n=n.render;var a=t.ref;return Y1(t,s),r=DU(e,t,n,r,a,s),n=UU(),e!==null&&!Zh?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,r0(e,t,s)):(gl&&n&&EU(t),t.flags|=1,hh(e,t,r,s),t.child)}function uV(e,t,n,r,s){if(e===null){var a=n.type;return typeof a=="function"&&!ZU(a)&&a.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=a,bte(e,t,a,r,s)):(e=NT(n.type,null,r,t,t.mode,s),e.ref=t.ref,e.return=t,t.child=e)}if(a=e.child,!(e.lanes&s)){var c=a.memoizedProps;if(n=n.compare,n=n!==null?n:qC,n(c,r)&&e.ref===t.ref)return r0(e,t,s)}return t.flags|=1,e=Ty(a,r),e.ref=t.ref,e.return=t,t.child=e}function bte(e,t,n,r,s){if(e!==null){var a=e.memoizedProps;if(qC(a,r)&&e.ref===t.ref)if(Zh=!1,t.pendingProps=r=a,(e.lanes&s)!==0)e.flags&131072&&(Zh=!0);else return t.lanes=e.lanes,r0(e,t,s)}return nO(e,t,n,r,s)}function Cte(e,t,n){var r=t.pendingProps,s=r.children,a=e!==null?e.memoizedState:null;if(r.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},Na(O1,Vf),Vf|=n;else{if(!(n&1073741824))return e=a!==null?a.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,Na(O1,Vf),Vf|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},r=a!==null?a.baseLanes:n,Na(O1,Vf),Vf|=r}else a!==null?(r=a.baseLanes|n,t.memoizedState=null):r=n,Na(O1,Vf),Vf|=r;return hh(e,t,s,n),t.child}function Ste(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function nO(e,t,n,r,s){var a=Yh(n)?Px:Pd.current;return a=hw(t,a),Y1(t,s),n=DU(e,t,n,r,a,s),r=UU(),e!==null&&!Zh?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~s,r0(e,t,s)):(gl&&r&&EU(t),t.flags|=1,hh(e,t,n,s),t.child)}function dV(e,t,n,r,s){if(Yh(n)){var a=!0;PI(t)}else a=!1;if(Y1(t,s),t.stateNode===null)kT(e,t),xte(t,n,r),eO(t,n,r,s),r=!0;else if(e===null){var c=t.stateNode,i=t.memoizedProps;c.props=i;var f=c.context,g=n.contextType;typeof g=="object"&&g!==null?g=$p(g):(g=Yh(n)?Px:Pd.current,g=hw(t,g));var y=n.getDerivedStateFromProps,b=typeof y=="function"||typeof c.getSnapshotBeforeUpdate=="function";b||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(i!==r||f!==g)&&sV(t,c,r,g),sy=!1;var T=t.memoizedState;c.state=T,RI(t,r,c,s),f=t.memoizedState,i!==r||T!==f||Xh.current||sy?(typeof y=="function"&&(JR(t,n,y,r),f=t.memoizedState),(i=sy||iV(t,n,i,r,T,f,g))?(b||typeof c.UNSAFE_componentWillMount!="function"&&typeof c.componentWillMount!="function"||(typeof c.componentWillMount=="function"&&c.componentWillMount(),typeof c.UNSAFE_componentWillMount=="function"&&c.UNSAFE_componentWillMount()),typeof c.componentDidMount=="function"&&(t.flags|=4194308)):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=r,t.memoizedState=f),c.props=r,c.state=f,c.context=g,r=i):(typeof c.componentDidMount=="function"&&(t.flags|=4194308),r=!1)}else{c=t.stateNode,Jee(e,t),i=t.memoizedProps,g=t.type===t.elementType?i:FA(t.type,i),c.props=g,b=t.pendingProps,T=c.context,f=n.contextType,typeof f=="object"&&f!==null?f=$p(f):(f=Yh(n)?Px:Pd.current,f=hw(t,f));var S=n.getDerivedStateFromProps;(y=typeof S=="function"||typeof c.getSnapshotBeforeUpdate=="function")||typeof c.UNSAFE_componentWillReceiveProps!="function"&&typeof c.componentWillReceiveProps!="function"||(i!==b||T!==f)&&sV(t,c,r,f),sy=!1,T=t.memoizedState,c.state=T,RI(t,r,c,s);var U=t.memoizedState;i!==b||T!==U||Xh.current||sy?(typeof S=="function"&&(JR(t,n,S,r),U=t.memoizedState),(g=sy||iV(t,n,g,r,T,U,f)||!1)?(y||typeof c.UNSAFE_componentWillUpdate!="function"&&typeof c.componentWillUpdate!="function"||(typeof c.componentWillUpdate=="function"&&c.componentWillUpdate(r,U,f),typeof c.UNSAFE_componentWillUpdate=="function"&&c.UNSAFE_componentWillUpdate(r,U,f)),typeof c.componentDidUpdate=="function"&&(t.flags|=4),typeof c.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof c.componentDidUpdate!="function"||i===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),t.memoizedProps=r,t.memoizedState=U),c.props=r,c.state=U,c.context=f,r=g):(typeof c.componentDidUpdate!="function"||i===e.memoizedProps&&T===e.memoizedState||(t.flags|=4),typeof c.getSnapshotBeforeUpdate!="function"||i===e.memoizedProps&&T===e.memoizedState||(t.flags|=1024),r=!1)}return rO(e,t,n,r,a,s)}function rO(e,t,n,r,s,a){Ste(e,t);var c=(t.flags&128)!==0;if(!r&&!c)return s&&ZH(t,n,!1),r0(e,t,a);r=t.stateNode,Kme.current=t;var i=c&&typeof n.getDerivedStateFromError!="function"?null:r.render();return t.flags|=1,e!==null&&c?(t.child=pw(t,e.child,null,a),t.child=pw(t,null,i,a)):hh(e,t,i,a),t.memoizedState=r.state,s&&ZH(t,n,!0),t.child}function Bte(e){var t=e.stateNode;t.pendingContext?qH(e,t.pendingContext,t.pendingContext!==t.context):t.context&&qH(e,t.context,!1),MU(e,t.containerInfo)}function hV(e,t,n,r,s){return fw(),IU(s),t.flags|=256,hh(e,t,n,r),t.child}var iO={dehydrated:null,treeContext:null,retryLane:0};function sO(e){return{baseLanes:e,cachePool:null,transitions:null}}function Ete(e,t,n){var r=t.pendingProps,s=Tl.current,a=!1,c=(t.flags&128)!==0,i;if((i=c)||(i=e!==null&&e.memoizedState===null?!1:(s&2)!==0),i?(a=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(s|=1),Na(Tl,s&1),e===null)return XR(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(c=r.children,e=r.fallback,a?(r=t.mode,a=t.child,c={mode:"hidden",children:c},!(r&1)&&a!==null?(a.childLanes=0,a.pendingProps=c):a=TF(c,r,0,null),e=gx(e,r,n,null),a.return=t,e.return=t,a.sibling=e,t.child=a,t.child.memoizedState=sO(n),t.memoizedState=iO,e):HU(t,c));if(s=e.memoizedState,s!==null&&(i=s.dehydrated,i!==null))return Wme(e,t,c,r,i,s,n);if(a){a=r.fallback,c=t.mode,s=e.child,i=s.sibling;var f={mode:"hidden",children:r.children};return!(c&1)&&t.child!==s?(r=t.child,r.childLanes=0,r.pendingProps=f,t.deletions=null):(r=Ty(s,f),r.subtreeFlags=s.subtreeFlags&14680064),i!==null?a=Ty(i,a):(a=gx(a,c,n,null),a.flags|=2),a.return=t,r.return=t,r.sibling=a,t.child=r,r=a,a=t.child,c=e.child.memoizedState,c=c===null?sO(n):{baseLanes:c.baseLanes|n,cachePool:null,transitions:c.transitions},a.memoizedState=c,a.childLanes=e.childLanes&~n,t.memoizedState=iO,r}return a=e.child,e=a.sibling,r=Ty(a,{mode:"visible",children:r.children}),!(t.mode&1)&&(r.lanes=n),r.return=t,r.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=r,t.memoizedState=null,r}function HU(e,t){return t=TF({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function l3(e,t,n,r){return r!==null&&IU(r),pw(t,e.child,null,n),e=HU(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function Wme(e,t,n,r,s,a,c){if(n)return t.flags&256?(t.flags&=-257,r=vM(Error(Tr(422))),l3(e,t,c,r)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(a=r.fallback,s=t.mode,r=TF({mode:"visible",children:r.children},s,0,null),a=gx(a,s,c,null),a.flags|=2,r.return=t,a.return=t,r.sibling=a,t.child=r,t.mode&1&&pw(t,e.child,null,c),t.child.memoizedState=sO(c),t.memoizedState=iO,a);if(!(t.mode&1))return l3(e,t,c,null);if(s.data==="$!"){if(r=s.nextSibling&&s.nextSibling.dataset,r)var i=r.dgst;return r=i,a=Error(Tr(419)),r=vM(a,r,void 0),l3(e,t,c,r)}if(i=(c&e.childLanes)!==0,Zh||i){if(r=vu,r!==null){switch(c&-c){case 4:s=2;break;case 16:s=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:s=32;break;case 536870912:s=268435456;break;default:s=0}s=s&(r.suspendedLanes|c)?0:s,s!==0&&s!==a.retryLane&&(a.retryLane=s,n0(e,s),$A(r,e,s,-1))}return qU(),r=vM(Error(Tr(421))),l3(e,t,c,r)}return s.data==="$?"?(t.flags|=128,t.child=e.child,t=age.bind(null,e),s._reactRetry=t,null):(e=a.treeContext,Kf=Cy(s.nextSibling),qf=t,gl=!0,RA=null,e!==null&&(Pp[kp++]=$g,Pp[kp++]=Gg,Pp[kp++]=kx,$g=e.id,Gg=e.overflow,kx=t),t=HU(t,r.children),t.flags|=4096,t)}function fV(e,t,n){e.lanes|=t;var r=e.alternate;r!==null&&(r.lanes|=t),YR(e.return,t,n)}function xM(e,t,n,r,s){var a=e.memoizedState;a===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:r,tail:n,tailMode:s}:(a.isBackwards=t,a.rendering=null,a.renderingStartTime=0,a.last=r,a.tail=n,a.tailMode=s)}function Tte(e,t,n){var r=t.pendingProps,s=r.revealOrder,a=r.tail;if(hh(e,t,r.children,n),r=Tl.current,r&2)r=r&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&fV(e,n,t);else if(e.tag===19)fV(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}r&=1}if(Na(Tl,r),!(t.mode&1))t.memoizedState=null;else switch(s){case"forwards":for(n=t.child,s=null;n!==null;)e=n.alternate,e!==null&&OI(e)===null&&(s=n),n=n.sibling;n=s,n===null?(s=t.child,t.child=null):(s=n.sibling,n.sibling=null),xM(t,!1,s,n,a);break;case"backwards":for(n=null,s=t.child,t.child=null;s!==null;){if(e=s.alternate,e!==null&&OI(e)===null){t.child=s;break}e=s.sibling,s.sibling=n,n=s,s=e}xM(t,!0,n,null,a);break;case"together":xM(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function kT(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function r0(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),Mx|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(Tr(153));if(t.child!==null){for(e=t.child,n=Ty(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=Ty(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function qme(e,t,n){switch(t.tag){case 3:Bte(t),fw();break;case 5:ete(t);break;case 1:Yh(t.type)&&PI(t);break;case 4:MU(t,t.stateNode.containerInfo);break;case 10:var r=t.type._context,s=t.memoizedProps.value;Na(MI,r._currentValue),r._currentValue=s;break;case 13:if(r=t.memoizedState,r!==null)return r.dehydrated!==null?(Na(Tl,Tl.current&1),t.flags|=128,null):n&t.child.childLanes?Ete(e,t,n):(Na(Tl,Tl.current&1),e=r0(e,t,n),e!==null?e.sibling:null);Na(Tl,Tl.current&1);break;case 19:if(r=(n&t.childLanes)!==0,e.flags&128){if(r)return Tte(e,t,n);t.flags|=128}if(s=t.memoizedState,s!==null&&(s.rendering=null,s.tail=null,s.lastEffect=null),Na(Tl,Tl.current),r)break;return null;case 22:case 23:return t.lanes=0,Cte(e,t,n)}return r0(e,t,n)}var Ite,oO,jte,Fte;Ite=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};oO=function(){};jte=function(e,t,n,r){var s=e.memoizedProps;if(s!==r){e=t.stateNode,ux(Km.current);var a=null;switch(n){case"input":s=TR(e,s),r=TR(e,r),a=[];break;case"select":s=Fl({},s,{value:void 0}),r=Fl({},r,{value:void 0}),a=[];break;case"textarea":s=FR(e,s),r=FR(e,r),a=[];break;default:typeof s.onClick!="function"&&typeof r.onClick=="function"&&(e.onclick=jI)}kR(n,r);var c;n=null;for(g in s)if(!r.hasOwnProperty(g)&&s.hasOwnProperty(g)&&s[g]!=null)if(g==="style"){var i=s[g];for(c in i)i.hasOwnProperty(c)&&(n||(n={}),n[c]="")}else g!=="dangerouslySetInnerHTML"&&g!=="children"&&g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&g!=="autoFocus"&&(QC.hasOwnProperty(g)?a||(a=[]):(a=a||[]).push(g,null));for(g in r){var f=r[g];if(i=s!=null?s[g]:void 0,r.hasOwnProperty(g)&&f!==i&&(f!=null||i!=null))if(g==="style")if(i){for(c in i)!i.hasOwnProperty(c)||f&&f.hasOwnProperty(c)||(n||(n={}),n[c]="");for(c in f)f.hasOwnProperty(c)&&i[c]!==f[c]&&(n||(n={}),n[c]=f[c])}else n||(a||(a=[]),a.push(g,n)),n=f;else g==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,i=i?i.__html:void 0,f!=null&&i!==f&&(a=a||[]).push(g,f)):g==="children"?typeof f!="string"&&typeof f!="number"||(a=a||[]).push(g,""+f):g!=="suppressContentEditableWarning"&&g!=="suppressHydrationWarning"&&(QC.hasOwnProperty(g)?(f!=null&&g==="onScroll"&&rl("scroll",e),a||i===f||(a=[])):(a=a||[]).push(g,f))}n&&(a=a||[]).push("style",n);var g=a;(t.updateQueue=g)&&(t.flags|=4)}};Fte=function(e,t,n,r){n!==r&&(t.flags|=4)};function p2(e,t){if(!gl)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var r=null;n!==null;)n.alternate!==null&&(r=n),n=n.sibling;r===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:r.sibling=null}}function yd(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,r=0;if(t)for(var s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags&14680064,r|=s.flags&14680064,s.return=e,s=s.sibling;else for(s=e.child;s!==null;)n|=s.lanes|s.childLanes,r|=s.subtreeFlags,r|=s.flags,s.return=e,s=s.sibling;return e.subtreeFlags|=r,e.childLanes=n,t}function Zme(e,t,n){var r=t.pendingProps;switch(TU(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return yd(t),null;case 1:return Yh(t.type)&&FI(),yd(t),null;case 3:return r=t.stateNode,Aw(),ol(Xh),ol(Pd),RU(),r.pendingContext&&(r.context=r.pendingContext,r.pendingContext=null),(e===null||e.child===null)&&(o3(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,RA!==null&&(pO(RA),RA=null))),oO(e,t),yd(t),null;case 5:NU(t);var s=ux(eS.current);if(n=t.type,e!==null&&t.stateNode!=null)jte(e,t,n,r,s),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!r){if(t.stateNode===null)throw Error(Tr(166));return yd(t),null}if(e=ux(Km.current),o3(t)){r=t.stateNode,n=t.type;var a=t.memoizedProps;switch(r[Hm]=t,r[YC]=a,e=(t.mode&1)!==0,n){case"dialog":rl("cancel",r),rl("close",r);break;case"iframe":case"object":case"embed":rl("load",r);break;case"video":case"audio":for(s=0;s<G2.length;s++)rl(G2[s],r);break;case"source":rl("error",r);break;case"img":case"image":case"link":rl("error",r),rl("load",r);break;case"details":rl("toggle",r);break;case"input":wH(r,a),rl("invalid",r);break;case"select":r._wrapperState={wasMultiple:!!a.multiple},rl("invalid",r);break;case"textarea":CH(r,a),rl("invalid",r)}kR(n,a),s=null;for(var c in a)if(a.hasOwnProperty(c)){var i=a[c];c==="children"?typeof i=="string"?r.textContent!==i&&(a.suppressHydrationWarning!==!0&&s3(r.textContent,i,e),s=["children",i]):typeof i=="number"&&r.textContent!==""+i&&(a.suppressHydrationWarning!==!0&&s3(r.textContent,i,e),s=["children",""+i]):QC.hasOwnProperty(c)&&i!=null&&c==="onScroll"&&rl("scroll",r)}switch(n){case"input":X4(r),bH(r,a,!0);break;case"textarea":X4(r),SH(r);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(r.onclick=jI)}r=s,t.updateQueue=r,r!==null&&(t.flags|=4)}else{c=s.nodeType===9?s:s.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=see(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=c.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof r.is=="string"?e=c.createElement(n,{is:r.is}):(e=c.createElement(n),n==="select"&&(c=e,r.multiple?c.multiple=!0:r.size&&(c.size=r.size))):e=c.createElementNS(e,n),e[Hm]=t,e[YC]=r,Ite(e,t,!1,!1),t.stateNode=e;e:{switch(c=LR(n,r),n){case"dialog":rl("cancel",e),rl("close",e),s=r;break;case"iframe":case"object":case"embed":rl("load",e),s=r;break;case"video":case"audio":for(s=0;s<G2.length;s++)rl(G2[s],e);s=r;break;case"source":rl("error",e),s=r;break;case"img":case"image":case"link":rl("error",e),rl("load",e),s=r;break;case"details":rl("toggle",e),s=r;break;case"input":wH(e,r),s=TR(e,r),rl("invalid",e);break;case"option":s=r;break;case"select":e._wrapperState={wasMultiple:!!r.multiple},s=Fl({},r,{value:void 0}),rl("invalid",e);break;case"textarea":CH(e,r),s=FR(e,r),rl("invalid",e);break;default:s=r}kR(n,s),i=s;for(a in i)if(i.hasOwnProperty(a)){var f=i[a];a==="style"?lee(e,f):a==="dangerouslySetInnerHTML"?(f=f?f.__html:void 0,f!=null&&oee(e,f)):a==="children"?typeof f=="string"?(n!=="textarea"||f!=="")&&HC(e,f):typeof f=="number"&&HC(e,""+f):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(QC.hasOwnProperty(a)?f!=null&&a==="onScroll"&&rl("scroll",e):f!=null&&fU(e,a,f,c))}switch(n){case"input":X4(e),bH(e,r,!1);break;case"textarea":X4(e),SH(e);break;case"option":r.value!=null&&e.setAttribute("value",""+Oy(r.value));break;case"select":e.multiple=!!r.multiple,a=r.value,a!=null?W1(e,!!r.multiple,a,!1):r.defaultValue!=null&&W1(e,!!r.multiple,r.defaultValue,!0);break;default:typeof s.onClick=="function"&&(e.onclick=jI)}switch(n){case"button":case"input":case"select":case"textarea":r=!!r.autoFocus;break e;case"img":r=!0;break e;default:r=!1}}r&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return yd(t),null;case 6:if(e&&t.stateNode!=null)Fte(e,t,e.memoizedProps,r);else{if(typeof r!="string"&&t.stateNode===null)throw Error(Tr(166));if(n=ux(eS.current),ux(Km.current),o3(t)){if(r=t.stateNode,n=t.memoizedProps,r[Hm]=t,(a=r.nodeValue!==n)&&(e=qf,e!==null))switch(e.tag){case 3:s3(r.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&s3(r.nodeValue,n,(e.mode&1)!==0)}a&&(t.flags|=4)}else r=(n.nodeType===9?n:n.ownerDocument).createTextNode(r),r[Hm]=t,t.stateNode=r}return yd(t),null;case 13:if(ol(Tl),r=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(gl&&Kf!==null&&t.mode&1&&!(t.flags&128))qee(),fw(),t.flags|=98560,a=!1;else if(a=o3(t),r!==null&&r.dehydrated!==null){if(e===null){if(!a)throw Error(Tr(318));if(a=t.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(Tr(317));a[Hm]=t}else fw(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;yd(t),a=!1}else RA!==null&&(pO(RA),RA=null),a=!0;if(!a)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(r=r!==null,r!==(e!==null&&e.memoizedState!==null)&&r&&(t.child.flags|=8192,t.mode&1&&(e===null||Tl.current&1?eu===0&&(eu=3):qU())),t.updateQueue!==null&&(t.flags|=4),yd(t),null);case 4:return Aw(),oO(e,t),e===null&&ZC(t.stateNode.containerInfo),yd(t),null;case 10:return PU(t.type._context),yd(t),null;case 17:return Yh(t.type)&&FI(),yd(t),null;case 19:if(ol(Tl),a=t.memoizedState,a===null)return yd(t),null;if(r=(t.flags&128)!==0,c=a.rendering,c===null)if(r)p2(a,!1);else{if(eu!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(c=OI(e),c!==null){for(t.flags|=128,p2(a,!1),r=c.updateQueue,r!==null&&(t.updateQueue=r,t.flags|=4),t.subtreeFlags=0,r=n,n=t.child;n!==null;)a=n,e=r,a.flags&=14680066,c=a.alternate,c===null?(a.childLanes=0,a.lanes=e,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=c.childLanes,a.lanes=c.lanes,a.child=c.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=c.memoizedProps,a.memoizedState=c.memoizedState,a.updateQueue=c.updateQueue,a.type=c.type,e=c.dependencies,a.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return Na(Tl,Tl.current&1|2),t.child}e=e.sibling}a.tail!==null&&mc()>gw&&(t.flags|=128,r=!0,p2(a,!1),t.lanes=4194304)}else{if(!r)if(e=OI(c),e!==null){if(t.flags|=128,r=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),p2(a,!0),a.tail===null&&a.tailMode==="hidden"&&!c.alternate&&!gl)return yd(t),null}else 2*mc()-a.renderingStartTime>gw&&n!==1073741824&&(t.flags|=128,r=!0,p2(a,!1),t.lanes=4194304);a.isBackwards?(c.sibling=t.child,t.child=c):(n=a.last,n!==null?n.sibling=c:t.child=c,a.last=c)}return a.tail!==null?(t=a.tail,a.rendering=t,a.tail=t.sibling,a.renderingStartTime=mc(),t.sibling=null,n=Tl.current,Na(Tl,r?n&1|2:n&1),t):(yd(t),null);case 22:case 23:return WU(),r=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==r&&(t.flags|=8192),r&&t.mode&1?Vf&1073741824&&(yd(t),t.subtreeFlags&6&&(t.flags|=8192)):yd(t),null;case 24:return null;case 25:return null}throw Error(Tr(156,t.tag))}function Xme(e,t){switch(TU(t),t.tag){case 1:return Yh(t.type)&&FI(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return Aw(),ol(Xh),ol(Pd),RU(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return NU(t),null;case 13:if(ol(Tl),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(Tr(340));fw()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ol(Tl),null;case 4:return Aw(),null;case 10:return PU(t.type._context),null;case 22:case 23:return WU(),null;case 24:return null;default:return null}}var c3=!1,Td=!1,Yme=typeof WeakSet=="function"?WeakSet:Set,ui=null;function R1(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(r){Wl(e,t,r)}else n.current=null}function aO(e,t,n){try{n()}catch(r){Wl(e,t,r)}}var pV=!1;function Jme(e,t){if(VR=EI,e=Nee(),BU(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var r=n.getSelection&&n.getSelection();if(r&&r.rangeCount!==0){n=r.anchorNode;var s=r.anchorOffset,a=r.focusNode;r=r.focusOffset;try{n.nodeType,a.nodeType}catch{n=null;break e}var c=0,i=-1,f=-1,g=0,y=0,b=e,T=null;t:for(;;){for(var S;b!==n||s!==0&&b.nodeType!==3||(i=c+s),b!==a||r!==0&&b.nodeType!==3||(f=c+r),b.nodeType===3&&(c+=b.nodeValue.length),(S=b.firstChild)!==null;)T=b,b=S;for(;;){if(b===e)break t;if(T===n&&++g===s&&(i=c),T===a&&++y===r&&(f=c),(S=b.nextSibling)!==null)break;b=T,T=b.parentNode}b=S}n=i===-1||f===-1?null:{start:i,end:f}}else n=null}n=n||{start:0,end:0}}else n=null;for($R={focusedElem:e,selectionRange:n},EI=!1,ui=t;ui!==null;)if(t=ui,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,ui=e;else for(;ui!==null;){t=ui;try{var U=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(U!==null){var N=U.memoizedProps,W=U.memoizedState,L=t.stateNode,Q=L.getSnapshotBeforeUpdate(t.elementType===t.type?N:FA(t.type,N),W);L.__reactInternalSnapshotBeforeUpdate=Q}break;case 3:var V=t.stateNode.containerInfo;V.nodeType===1?V.textContent="":V.nodeType===9&&V.documentElement&&V.removeChild(V.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(Tr(163))}}catch(Z){Wl(t,t.return,Z)}if(e=t.sibling,e!==null){e.return=t.return,ui=e;break}ui=t.return}return U=pV,pV=!1,U}function yC(e,t,n){var r=t.updateQueue;if(r=r!==null?r.lastEffect:null,r!==null){var s=r=r.next;do{if((s.tag&e)===e){var a=s.destroy;s.destroy=void 0,a!==void 0&&aO(t,n,a)}s=s.next}while(s!==r)}}function BF(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var r=n.create;n.destroy=r()}n=n.next}while(n!==t)}}function lO(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function Pte(e){var t=e.alternate;t!==null&&(e.alternate=null,Pte(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[Hm],delete t[YC],delete t[WR],delete t[Mme],delete t[Nme])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function kte(e){return e.tag===5||e.tag===3||e.tag===4}function AV(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||kte(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function cO(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=jI));else if(r!==4&&(e=e.child,e!==null))for(cO(e,t,n),e=e.sibling;e!==null;)cO(e,t,n),e=e.sibling}function uO(e,t,n){var r=e.tag;if(r===5||r===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(r!==4&&(e=e.child,e!==null))for(uO(e,t,n),e=e.sibling;e!==null;)uO(e,t,n),e=e.sibling}var Du=null,LA=!1;function G0(e,t,n){for(n=n.child;n!==null;)Lte(e,t,n),n=n.sibling}function Lte(e,t,n){if(Gm&&typeof Gm.onCommitFiberUnmount=="function")try{Gm.onCommitFiberUnmount(yF,n)}catch{}switch(n.tag){case 5:Td||R1(n,t);case 6:var r=Du,s=LA;Du=null,G0(e,t,n),Du=r,LA=s,Du!==null&&(LA?(e=Du,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):Du.removeChild(n.stateNode));break;case 18:Du!==null&&(LA?(e=Du,n=n.stateNode,e.nodeType===8?fM(e.parentNode,n):e.nodeType===1&&fM(e,n),KC(e)):fM(Du,n.stateNode));break;case 4:r=Du,s=LA,Du=n.stateNode.containerInfo,LA=!0,G0(e,t,n),Du=r,LA=s;break;case 0:case 11:case 14:case 15:if(!Td&&(r=n.updateQueue,r!==null&&(r=r.lastEffect,r!==null))){s=r=r.next;do{var a=s,c=a.destroy;a=a.tag,c!==void 0&&(a&2||a&4)&&aO(n,t,c),s=s.next}while(s!==r)}G0(e,t,n);break;case 1:if(!Td&&(R1(n,t),r=n.stateNode,typeof r.componentWillUnmount=="function"))try{r.props=n.memoizedProps,r.state=n.memoizedState,r.componentWillUnmount()}catch(i){Wl(n,t,i)}G0(e,t,n);break;case 21:G0(e,t,n);break;case 22:n.mode&1?(Td=(r=Td)||n.memoizedState!==null,G0(e,t,n),Td=r):G0(e,t,n);break;default:G0(e,t,n)}}function mV(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new Yme),t.forEach(function(r){var s=lge.bind(null,e,r);n.has(r)||(n.add(r),r.then(s,s))})}}function bA(e,t){var n=t.deletions;if(n!==null)for(var r=0;r<n.length;r++){var s=n[r];try{var a=e,c=t,i=c;e:for(;i!==null;){switch(i.tag){case 5:Du=i.stateNode,LA=!1;break e;case 3:Du=i.stateNode.containerInfo,LA=!0;break e;case 4:Du=i.stateNode.containerInfo,LA=!0;break e}i=i.return}if(Du===null)throw Error(Tr(160));Lte(a,c,s),Du=null,LA=!1;var f=s.alternate;f!==null&&(f.return=null),s.return=null}catch(g){Wl(s,t,g)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)Mte(t,e),t=t.sibling}function Mte(e,t){var n=e.alternate,r=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(bA(t,e),Fm(e),r&4){try{yC(3,e,e.return),BF(3,e)}catch(N){Wl(e,e.return,N)}try{yC(5,e,e.return)}catch(N){Wl(e,e.return,N)}}break;case 1:bA(t,e),Fm(e),r&512&&n!==null&&R1(n,n.return);break;case 5:if(bA(t,e),Fm(e),r&512&&n!==null&&R1(n,n.return),e.flags&32){var s=e.stateNode;try{HC(s,"")}catch(N){Wl(e,e.return,N)}}if(r&4&&(s=e.stateNode,s!=null)){var a=e.memoizedProps,c=n!==null?n.memoizedProps:a,i=e.type,f=e.updateQueue;if(e.updateQueue=null,f!==null)try{i==="input"&&a.type==="radio"&&a.name!=null&&ree(s,a),LR(i,c);var g=LR(i,a);for(c=0;c<f.length;c+=2){var y=f[c],b=f[c+1];y==="style"?lee(s,b):y==="dangerouslySetInnerHTML"?oee(s,b):y==="children"?HC(s,b):fU(s,y,b,g)}switch(i){case"input":IR(s,a);break;case"textarea":iee(s,a);break;case"select":var T=s._wrapperState.wasMultiple;s._wrapperState.wasMultiple=!!a.multiple;var S=a.value;S!=null?W1(s,!!a.multiple,S,!1):T!==!!a.multiple&&(a.defaultValue!=null?W1(s,!!a.multiple,a.defaultValue,!0):W1(s,!!a.multiple,a.multiple?[]:"",!1))}s[YC]=a}catch(N){Wl(e,e.return,N)}}break;case 6:if(bA(t,e),Fm(e),r&4){if(e.stateNode===null)throw Error(Tr(162));s=e.stateNode,a=e.memoizedProps;try{s.nodeValue=a}catch(N){Wl(e,e.return,N)}}break;case 3:if(bA(t,e),Fm(e),r&4&&n!==null&&n.memoizedState.isDehydrated)try{KC(t.containerInfo)}catch(N){Wl(e,e.return,N)}break;case 4:bA(t,e),Fm(e);break;case 13:bA(t,e),Fm(e),s=e.child,s.flags&8192&&(a=s.memoizedState!==null,s.stateNode.isHidden=a,!a||s.alternate!==null&&s.alternate.memoizedState!==null||(GU=mc())),r&4&&mV(e);break;case 22:if(y=n!==null&&n.memoizedState!==null,e.mode&1?(Td=(g=Td)||y,bA(t,e),Td=g):bA(t,e),Fm(e),r&8192){if(g=e.memoizedState!==null,(e.stateNode.isHidden=g)&&!y&&e.mode&1)for(ui=e,y=e.child;y!==null;){for(b=ui=y;ui!==null;){switch(T=ui,S=T.child,T.tag){case 0:case 11:case 14:case 15:yC(4,T,T.return);break;case 1:R1(T,T.return);var U=T.stateNode;if(typeof U.componentWillUnmount=="function"){r=T,n=T.return;try{t=r,U.props=t.memoizedProps,U.state=t.memoizedState,U.componentWillUnmount()}catch(N){Wl(r,n,N)}}break;case 5:R1(T,T.return);break;case 22:if(T.memoizedState!==null){yV(b);continue}}S!==null?(S.return=T,ui=S):yV(b)}y=y.sibling}e:for(y=null,b=e;;){if(b.tag===5){if(y===null){y=b;try{s=b.stateNode,g?(a=s.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(i=b.stateNode,f=b.memoizedProps.style,c=f!=null&&f.hasOwnProperty("display")?f.display:null,i.style.display=aee("display",c))}catch(N){Wl(e,e.return,N)}}}else if(b.tag===6){if(y===null)try{b.stateNode.nodeValue=g?"":b.memoizedProps}catch(N){Wl(e,e.return,N)}}else if((b.tag!==22&&b.tag!==23||b.memoizedState===null||b===e)&&b.child!==null){b.child.return=b,b=b.child;continue}if(b===e)break e;for(;b.sibling===null;){if(b.return===null||b.return===e)break e;y===b&&(y=null),b=b.return}y===b&&(y=null),b.sibling.return=b.return,b=b.sibling}}break;case 19:bA(t,e),Fm(e),r&4&&mV(e);break;case 21:break;default:bA(t,e),Fm(e)}}function Fm(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(kte(n)){var r=n;break e}n=n.return}throw Error(Tr(160))}switch(r.tag){case 5:var s=r.stateNode;r.flags&32&&(HC(s,""),r.flags&=-33);var a=AV(e);uO(e,a,s);break;case 3:case 4:var c=r.stateNode.containerInfo,i=AV(e);cO(e,i,c);break;default:throw Error(Tr(161))}}catch(f){Wl(e,e.return,f)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function ege(e,t,n){ui=e,Nte(e)}function Nte(e,t,n){for(var r=(e.mode&1)!==0;ui!==null;){var s=ui,a=s.child;if(s.tag===22&&r){var c=s.memoizedState!==null||c3;if(!c){var i=s.alternate,f=i!==null&&i.memoizedState!==null||Td;i=c3;var g=Td;if(c3=c,(Td=f)&&!g)for(ui=s;ui!==null;)c=ui,f=c.child,c.tag===22&&c.memoizedState!==null?vV(s):f!==null?(f.return=c,ui=f):vV(s);for(;a!==null;)ui=a,Nte(a),a=a.sibling;ui=s,c3=i,Td=g}gV(e)}else s.subtreeFlags&8772&&a!==null?(a.return=s,ui=a):gV(e)}}function gV(e){for(;ui!==null;){var t=ui;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Td||BF(5,t);break;case 1:var r=t.stateNode;if(t.flags&4&&!Td)if(n===null)r.componentDidMount();else{var s=t.elementType===t.type?n.memoizedProps:FA(t.type,n.memoizedProps);r.componentDidUpdate(s,n.memoizedState,r.__reactInternalSnapshotBeforeUpdate)}var a=t.updateQueue;a!==null&&tV(t,a,r);break;case 3:var c=t.updateQueue;if(c!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}tV(t,c,n)}break;case 5:var i=t.stateNode;if(n===null&&t.flags&4){n=i;var f=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":f.autoFocus&&n.focus();break;case"img":f.src&&(n.src=f.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var g=t.alternate;if(g!==null){var y=g.memoizedState;if(y!==null){var b=y.dehydrated;b!==null&&KC(b)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(Tr(163))}Td||t.flags&512&&lO(t)}catch(T){Wl(t,t.return,T)}}if(t===e){ui=null;break}if(n=t.sibling,n!==null){n.return=t.return,ui=n;break}ui=t.return}}function yV(e){for(;ui!==null;){var t=ui;if(t===e){ui=null;break}var n=t.sibling;if(n!==null){n.return=t.return,ui=n;break}ui=t.return}}function vV(e){for(;ui!==null;){var t=ui;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{BF(4,t)}catch(f){Wl(t,n,f)}break;case 1:var r=t.stateNode;if(typeof r.componentDidMount=="function"){var s=t.return;try{r.componentDidMount()}catch(f){Wl(t,s,f)}}var a=t.return;try{lO(t)}catch(f){Wl(t,a,f)}break;case 5:var c=t.return;try{lO(t)}catch(f){Wl(t,c,f)}}}catch(f){Wl(t,t.return,f)}if(t===e){ui=null;break}var i=t.sibling;if(i!==null){i.return=t.return,ui=i;break}ui=t.return}}var tge=Math.ceil,zI=f0.ReactCurrentDispatcher,VU=f0.ReactCurrentOwner,zp=f0.ReactCurrentBatchConfig,Lo=0,vu=null,Rc=null,Gu=0,Vf=0,O1=ev(0),eu=0,iS=null,Mx=0,EF=0,$U=0,vC=null,Wh=null,GU=0,gw=1/0,zg=null,QI=!1,dO=null,By=null,u3=!1,py=null,HI=0,xC=0,hO=null,LT=-1,MT=0;function mh(){return Lo&6?mc():LT!==-1?LT:LT=mc()}function Ey(e){return e.mode&1?Lo&2&&Gu!==0?Gu&-Gu:Ome.transition!==null?(MT===0&&(MT=xee()),MT):(e=oa,e!==0||(e=window.event,e=e===void 0?16:Eee(e.type)),e):1}function $A(e,t,n,r){if(50<xC)throw xC=0,hO=null,Error(Tr(185));hB(e,n,r),(!(Lo&2)||e!==vu)&&(e===vu&&(!(Lo&2)&&(EF|=n),eu===4&&ly(e,Gu)),Jh(e,r),n===1&&Lo===0&&!(t.mode&1)&&(gw=mc()+500,bF&&tv()))}function Jh(e,t){var n=e.callbackNode;OAe(e,t);var r=BI(e,e===vu?Gu:0);if(r===0)n!==null&&TH(n),e.callbackNode=null,e.callbackPriority=0;else if(t=r&-r,e.callbackPriority!==t){if(n!=null&&TH(n),t===1)e.tag===0?Rme(xV.bind(null,e)):Gee(xV.bind(null,e)),kme(function(){!(Lo&6)&&tv()}),n=null;else{switch(_ee(r)){case 1:n=yU;break;case 4:n=yee;break;case 16:n=SI;break;case 536870912:n=vee;break;default:n=SI}n=Vte(n,Rte.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function Rte(e,t){if(LT=-1,MT=0,Lo&6)throw Error(Tr(327));var n=e.callbackNode;if(J1()&&e.callbackNode!==n)return null;var r=BI(e,e===vu?Gu:0);if(r===0)return null;if(r&30||r&e.expiredLanes||t)t=VI(e,r);else{t=r;var s=Lo;Lo|=2;var a=Dte();(vu!==e||Gu!==t)&&(zg=null,gw=mc()+500,mx(e,t));do try{ige();break}catch(i){Ote(e,i)}while(!0);FU(),zI.current=a,Lo=s,Rc!==null?t=0:(vu=null,Gu=0,t=eu)}if(t!==0){if(t===2&&(s=DR(e),s!==0&&(r=s,t=fO(e,s))),t===1)throw n=iS,mx(e,0),ly(e,r),Jh(e,mc()),n;if(t===6)ly(e,r);else{if(s=e.current.alternate,!(r&30)&&!nge(s)&&(t=VI(e,r),t===2&&(a=DR(e),a!==0&&(r=a,t=fO(e,a))),t===1))throw n=iS,mx(e,0),ly(e,r),Jh(e,mc()),n;switch(e.finishedWork=s,e.finishedLanes=r,t){case 0:case 1:throw Error(Tr(345));case 2:Yv(e,Wh,zg);break;case 3:if(ly(e,r),(r&130023424)===r&&(t=GU+500-mc(),10<t)){if(BI(e,0)!==0)break;if(s=e.suspendedLanes,(s&r)!==r){mh(),e.pingedLanes|=e.suspendedLanes&s;break}e.timeoutHandle=KR(Yv.bind(null,e,Wh,zg),t);break}Yv(e,Wh,zg);break;case 4:if(ly(e,r),(r&4194240)===r)break;for(t=e.eventTimes,s=-1;0<r;){var c=31-VA(r);a=1<<c,c=t[c],c>s&&(s=c),r&=~a}if(r=s,r=mc()-r,r=(120>r?120:480>r?480:1080>r?1080:1920>r?1920:3e3>r?3e3:4320>r?4320:1960*tge(r/1960))-r,10<r){e.timeoutHandle=KR(Yv.bind(null,e,Wh,zg),r);break}Yv(e,Wh,zg);break;case 5:Yv(e,Wh,zg);break;default:throw Error(Tr(329))}}}return Jh(e,mc()),e.callbackNode===n?Rte.bind(null,e):null}function fO(e,t){var n=vC;return e.current.memoizedState.isDehydrated&&(mx(e,t).flags|=256),e=VI(e,t),e!==2&&(t=Wh,Wh=n,t!==null&&pO(t)),e}function pO(e){Wh===null?Wh=e:Wh.push.apply(Wh,e)}function nge(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var r=0;r<n.length;r++){var s=n[r],a=s.getSnapshot;s=s.value;try{if(!qA(a(),s))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function ly(e,t){for(t&=~$U,t&=~EF,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-VA(t),r=1<<n;e[n]=-1,t&=~r}}function xV(e){if(Lo&6)throw Error(Tr(327));J1();var t=BI(e,0);if(!(t&1))return Jh(e,mc()),null;var n=VI(e,t);if(e.tag!==0&&n===2){var r=DR(e);r!==0&&(t=r,n=fO(e,r))}if(n===1)throw n=iS,mx(e,0),ly(e,t),Jh(e,mc()),n;if(n===6)throw Error(Tr(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Yv(e,Wh,zg),Jh(e,mc()),null}function KU(e,t){var n=Lo;Lo|=1;try{return e(t)}finally{Lo=n,Lo===0&&(gw=mc()+500,bF&&tv())}}function Nx(e){py!==null&&py.tag===0&&!(Lo&6)&&J1();var t=Lo;Lo|=1;var n=zp.transition,r=oa;try{if(zp.transition=null,oa=1,e)return e()}finally{oa=r,zp.transition=n,Lo=t,!(Lo&6)&&tv()}}function WU(){Vf=O1.current,ol(O1)}function mx(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,Pme(n)),Rc!==null)for(n=Rc.return;n!==null;){var r=n;switch(TU(r),r.tag){case 1:r=r.type.childContextTypes,r!=null&&FI();break;case 3:Aw(),ol(Xh),ol(Pd),RU();break;case 5:NU(r);break;case 4:Aw();break;case 13:ol(Tl);break;case 19:ol(Tl);break;case 10:PU(r.type._context);break;case 22:case 23:WU()}n=n.return}if(vu=e,Rc=e=Ty(e.current,null),Gu=Vf=t,eu=0,iS=null,$U=EF=Mx=0,Wh=vC=null,cx!==null){for(t=0;t<cx.length;t++)if(n=cx[t],r=n.interleaved,r!==null){n.interleaved=null;var s=r.next,a=n.pending;if(a!==null){var c=a.next;a.next=s,r.next=c}n.pending=r}cx=null}return e}function Ote(e,t){do{var n=Rc;try{if(FU(),FT.current=UI,DI){for(var r=jl.memoizedState;r!==null;){var s=r.queue;s!==null&&(s.pending=null),r=r.next}DI=!1}if(Lx=0,gu=Zc=jl=null,gC=!1,tS=0,VU.current=null,n===null||n.return===null){eu=1,iS=t,Rc=null;break}e:{var a=e,c=n.return,i=n,f=t;if(t=Gu,i.flags|=32768,f!==null&&typeof f=="object"&&typeof f.then=="function"){var g=f,y=i,b=y.tag;if(!(y.mode&1)&&(b===0||b===11||b===15)){var T=y.alternate;T?(y.updateQueue=T.updateQueue,y.memoizedState=T.memoizedState,y.lanes=T.lanes):(y.updateQueue=null,y.memoizedState=null)}var S=aV(c);if(S!==null){S.flags&=-257,lV(S,c,i,a,t),S.mode&1&&oV(a,g,t),t=S,f=g;var U=t.updateQueue;if(U===null){var N=new Set;N.add(f),t.updateQueue=N}else U.add(f);break e}else{if(!(t&1)){oV(a,g,t),qU();break e}f=Error(Tr(426))}}else if(gl&&i.mode&1){var W=aV(c);if(W!==null){!(W.flags&65536)&&(W.flags|=256),lV(W,c,i,a,t),IU(mw(f,i));break e}}a=f=mw(f,i),eu!==4&&(eu=2),vC===null?vC=[a]:vC.push(a),a=c;do{switch(a.tag){case 3:a.flags|=65536,t&=-t,a.lanes|=t;var L=_te(a,f,t);eV(a,L);break e;case 1:i=f;var Q=a.type,V=a.stateNode;if(!(a.flags&128)&&(typeof Q.getDerivedStateFromError=="function"||V!==null&&typeof V.componentDidCatch=="function"&&(By===null||!By.has(V)))){a.flags|=65536,t&=-t,a.lanes|=t;var Z=wte(a,i,t);eV(a,Z);break e}}a=a.return}while(a!==null)}zte(n)}catch(ne){t=ne,Rc===n&&n!==null&&(Rc=n=n.return);continue}break}while(!0)}function Dte(){var e=zI.current;return zI.current=UI,e===null?UI:e}function qU(){(eu===0||eu===3||eu===2)&&(eu=4),vu===null||!(Mx&268435455)&&!(EF&268435455)||ly(vu,Gu)}function VI(e,t){var n=Lo;Lo|=2;var r=Dte();(vu!==e||Gu!==t)&&(zg=null,mx(e,t));do try{rge();break}catch(s){Ote(e,s)}while(!0);if(FU(),Lo=n,zI.current=r,Rc!==null)throw Error(Tr(261));return vu=null,Gu=0,eu}function rge(){for(;Rc!==null;)Ute(Rc)}function ige(){for(;Rc!==null&&!IAe();)Ute(Rc)}function Ute(e){var t=Hte(e.alternate,e,Vf);e.memoizedProps=e.pendingProps,t===null?zte(e):Rc=t,VU.current=null}function zte(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=Xme(n,t),n!==null){n.flags&=32767,Rc=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{eu=6,Rc=null;return}}else if(n=Zme(n,t,Vf),n!==null){Rc=n;return}if(t=t.sibling,t!==null){Rc=t;return}Rc=t=e}while(t!==null);eu===0&&(eu=5)}function Yv(e,t,n){var r=oa,s=zp.transition;try{zp.transition=null,oa=1,sge(e,t,n,r)}finally{zp.transition=s,oa=r}return null}function sge(e,t,n,r){do J1();while(py!==null);if(Lo&6)throw Error(Tr(327));n=e.finishedWork;var s=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(Tr(177));e.callbackNode=null,e.callbackPriority=0;var a=n.lanes|n.childLanes;if(DAe(e,a),e===vu&&(Rc=vu=null,Gu=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||u3||(u3=!0,Vte(SI,function(){return J1(),null})),a=(n.flags&15990)!==0,n.subtreeFlags&15990||a){a=zp.transition,zp.transition=null;var c=oa;oa=1;var i=Lo;Lo|=4,VU.current=null,Jme(e,n),Mte(n,e),Sme($R),EI=!!VR,$R=VR=null,e.current=n,ege(n),jAe(),Lo=i,oa=c,zp.transition=a}else e.current=n;if(u3&&(u3=!1,py=e,HI=s),a=e.pendingLanes,a===0&&(By=null),kAe(n.stateNode),Jh(e,mc()),t!==null)for(r=e.onRecoverableError,n=0;n<t.length;n++)s=t[n],r(s.value,{componentStack:s.stack,digest:s.digest});if(QI)throw QI=!1,e=dO,dO=null,e;return HI&1&&e.tag!==0&&J1(),a=e.pendingLanes,a&1?e===hO?xC++:(xC=0,hO=e):xC=0,tv(),null}function J1(){if(py!==null){var e=_ee(HI),t=zp.transition,n=oa;try{if(zp.transition=null,oa=16>e?16:e,py===null)var r=!1;else{if(e=py,py=null,HI=0,Lo&6)throw Error(Tr(331));var s=Lo;for(Lo|=4,ui=e.current;ui!==null;){var a=ui,c=a.child;if(ui.flags&16){var i=a.deletions;if(i!==null){for(var f=0;f<i.length;f++){var g=i[f];for(ui=g;ui!==null;){var y=ui;switch(y.tag){case 0:case 11:case 15:yC(8,y,a)}var b=y.child;if(b!==null)b.return=y,ui=b;else for(;ui!==null;){y=ui;var T=y.sibling,S=y.return;if(Pte(y),y===g){ui=null;break}if(T!==null){T.return=S,ui=T;break}ui=S}}}var U=a.alternate;if(U!==null){var N=U.child;if(N!==null){U.child=null;do{var W=N.sibling;N.sibling=null,N=W}while(N!==null)}}ui=a}}if(a.subtreeFlags&2064&&c!==null)c.return=a,ui=c;else e:for(;ui!==null;){if(a=ui,a.flags&2048)switch(a.tag){case 0:case 11:case 15:yC(9,a,a.return)}var L=a.sibling;if(L!==null){L.return=a.return,ui=L;break e}ui=a.return}}var Q=e.current;for(ui=Q;ui!==null;){c=ui;var V=c.child;if(c.subtreeFlags&2064&&V!==null)V.return=c,ui=V;else e:for(c=Q;ui!==null;){if(i=ui,i.flags&2048)try{switch(i.tag){case 0:case 11:case 15:BF(9,i)}}catch(ne){Wl(i,i.return,ne)}if(i===c){ui=null;break e}var Z=i.sibling;if(Z!==null){Z.return=i.return,ui=Z;break e}ui=i.return}}if(Lo=s,tv(),Gm&&typeof Gm.onPostCommitFiberRoot=="function")try{Gm.onPostCommitFiberRoot(yF,e)}catch{}r=!0}return r}finally{oa=n,zp.transition=t}}return!1}function _V(e,t,n){t=mw(n,t),t=_te(e,t,1),e=Sy(e,t,1),t=mh(),e!==null&&(hB(e,1,t),Jh(e,t))}function Wl(e,t,n){if(e.tag===3)_V(e,e,n);else for(;t!==null;){if(t.tag===3){_V(t,e,n);break}else if(t.tag===1){var r=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof r.componentDidCatch=="function"&&(By===null||!By.has(r))){e=mw(n,e),e=wte(t,e,1),t=Sy(t,e,1),e=mh(),t!==null&&(hB(t,1,e),Jh(t,e));break}}t=t.return}}function oge(e,t,n){var r=e.pingCache;r!==null&&r.delete(t),t=mh(),e.pingedLanes|=e.suspendedLanes&n,vu===e&&(Gu&n)===n&&(eu===4||eu===3&&(Gu&130023424)===Gu&&500>mc()-GU?mx(e,0):$U|=n),Jh(e,t)}function Qte(e,t){t===0&&(e.mode&1?(t=e3,e3<<=1,!(e3&130023424)&&(e3=4194304)):t=1);var n=mh();e=n0(e,t),e!==null&&(hB(e,t,n),Jh(e,n))}function age(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),Qte(e,n)}function lge(e,t){var n=0;switch(e.tag){case 13:var r=e.stateNode,s=e.memoizedState;s!==null&&(n=s.retryLane);break;case 19:r=e.stateNode;break;default:throw Error(Tr(314))}r!==null&&r.delete(t),Qte(e,n)}var Hte;Hte=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||Xh.current)Zh=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return Zh=!1,qme(e,t,n);Zh=!!(e.flags&131072)}else Zh=!1,gl&&t.flags&1048576&&Kee(t,LI,t.index);switch(t.lanes=0,t.tag){case 2:var r=t.type;kT(e,t),e=t.pendingProps;var s=hw(t,Pd.current);Y1(t,n),s=DU(null,t,r,e,s,n);var a=UU();return t.flags|=1,typeof s=="object"&&s!==null&&typeof s.render=="function"&&s.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,Yh(r)?(a=!0,PI(t)):a=!1,t.memoizedState=s.state!==null&&s.state!==void 0?s.state:null,LU(t),s.updater=SF,t.stateNode=s,s._reactInternals=t,eO(t,r,e,n),t=rO(null,t,r,!0,a,n)):(t.tag=0,gl&&a&&EU(t),hh(null,t,s,n),t=t.child),t;case 16:r=t.elementType;e:{switch(kT(e,t),e=t.pendingProps,s=r._init,r=s(r._payload),t.type=r,s=t.tag=uge(r),e=FA(r,e),s){case 0:t=nO(null,t,r,e,n);break e;case 1:t=dV(null,t,r,e,n);break e;case 11:t=cV(null,t,r,e,n);break e;case 14:t=uV(null,t,r,FA(r.type,e),n);break e}throw Error(Tr(306,r,""))}return t;case 0:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:FA(r,s),nO(e,t,r,s,n);case 1:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:FA(r,s),dV(e,t,r,s,n);case 3:e:{if(Bte(t),e===null)throw Error(Tr(387));r=t.pendingProps,a=t.memoizedState,s=a.element,Jee(e,t),RI(t,r,null,n);var c=t.memoizedState;if(r=c.element,a.isDehydrated)if(a={element:r,isDehydrated:!1,cache:c.cache,pendingSuspenseBoundaries:c.pendingSuspenseBoundaries,transitions:c.transitions},t.updateQueue.baseState=a,t.memoizedState=a,t.flags&256){s=mw(Error(Tr(423)),t),t=hV(e,t,r,n,s);break e}else if(r!==s){s=mw(Error(Tr(424)),t),t=hV(e,t,r,n,s);break e}else for(Kf=Cy(t.stateNode.containerInfo.firstChild),qf=t,gl=!0,RA=null,n=Xee(t,null,r,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(fw(),r===s){t=r0(e,t,n);break e}hh(e,t,r,n)}t=t.child}return t;case 5:return ete(t),e===null&&XR(t),r=t.type,s=t.pendingProps,a=e!==null?e.memoizedProps:null,c=s.children,GR(r,s)?c=null:a!==null&&GR(r,a)&&(t.flags|=32),Ste(e,t),hh(e,t,c,n),t.child;case 6:return e===null&&XR(t),null;case 13:return Ete(e,t,n);case 4:return MU(t,t.stateNode.containerInfo),r=t.pendingProps,e===null?t.child=pw(t,null,r,n):hh(e,t,r,n),t.child;case 11:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:FA(r,s),cV(e,t,r,s,n);case 7:return hh(e,t,t.pendingProps,n),t.child;case 8:return hh(e,t,t.pendingProps.children,n),t.child;case 12:return hh(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(r=t.type._context,s=t.pendingProps,a=t.memoizedProps,c=s.value,Na(MI,r._currentValue),r._currentValue=c,a!==null)if(qA(a.value,c)){if(a.children===s.children&&!Xh.current){t=r0(e,t,n);break e}}else for(a=t.child,a!==null&&(a.return=t);a!==null;){var i=a.dependencies;if(i!==null){c=a.child;for(var f=i.firstContext;f!==null;){if(f.context===r){if(a.tag===1){f=Kg(-1,n&-n),f.tag=2;var g=a.updateQueue;if(g!==null){g=g.shared;var y=g.pending;y===null?f.next=f:(f.next=y.next,y.next=f),g.pending=f}}a.lanes|=n,f=a.alternate,f!==null&&(f.lanes|=n),YR(a.return,n,t),i.lanes|=n;break}f=f.next}}else if(a.tag===10)c=a.type===t.type?null:a.child;else if(a.tag===18){if(c=a.return,c===null)throw Error(Tr(341));c.lanes|=n,i=c.alternate,i!==null&&(i.lanes|=n),YR(c,n,t),c=a.sibling}else c=a.child;if(c!==null)c.return=a;else for(c=a;c!==null;){if(c===t){c=null;break}if(a=c.sibling,a!==null){a.return=c.return,c=a;break}c=c.return}a=c}hh(e,t,s.children,n),t=t.child}return t;case 9:return s=t.type,r=t.pendingProps.children,Y1(t,n),s=$p(s),r=r(s),t.flags|=1,hh(e,t,r,n),t.child;case 14:return r=t.type,s=FA(r,t.pendingProps),s=FA(r.type,s),uV(e,t,r,s,n);case 15:return bte(e,t,t.type,t.pendingProps,n);case 17:return r=t.type,s=t.pendingProps,s=t.elementType===r?s:FA(r,s),kT(e,t),t.tag=1,Yh(r)?(e=!0,PI(t)):e=!1,Y1(t,n),xte(t,r,s),eO(t,r,s,n),rO(null,t,r,!0,e,n);case 19:return Tte(e,t,n);case 22:return Cte(e,t,n)}throw Error(Tr(156,t.tag))};function Vte(e,t){return gee(e,t)}function cge(e,t,n,r){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=r,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Op(e,t,n,r){return new cge(e,t,n,r)}function ZU(e){return e=e.prototype,!(!e||!e.isReactComponent)}function uge(e){if(typeof e=="function")return ZU(e)?1:0;if(e!=null){if(e=e.$$typeof,e===AU)return 11;if(e===mU)return 14}return 2}function Ty(e,t){var n=e.alternate;return n===null?(n=Op(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function NT(e,t,n,r,s,a){var c=2;if(r=e,typeof e=="function")ZU(e)&&(c=1);else if(typeof e=="string")c=5;else e:switch(e){case T1:return gx(n.children,s,a,t);case pU:c=8,s|=8;break;case CR:return e=Op(12,n,t,s|2),e.elementType=CR,e.lanes=a,e;case SR:return e=Op(13,n,t,s),e.elementType=SR,e.lanes=a,e;case BR:return e=Op(19,n,t,s),e.elementType=BR,e.lanes=a,e;case eee:return TF(n,s,a,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case YJ:c=10;break e;case JJ:c=9;break e;case AU:c=11;break e;case mU:c=14;break e;case iy:c=16,r=null;break e}throw Error(Tr(130,e==null?e:typeof e,""))}return t=Op(c,n,t,s),t.elementType=e,t.type=r,t.lanes=a,t}function gx(e,t,n,r){return e=Op(7,e,r,t),e.lanes=n,e}function TF(e,t,n,r){return e=Op(22,e,r,t),e.elementType=eee,e.lanes=n,e.stateNode={isHidden:!1},e}function _M(e,t,n){return e=Op(6,e,null,t),e.lanes=n,e}function wM(e,t,n){return t=Op(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function dge(e,t,n,r,s){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=nM(0),this.expirationTimes=nM(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=nM(0),this.identifierPrefix=r,this.onRecoverableError=s,this.mutableSourceEagerHydrationData=null}function XU(e,t,n,r,s,a,c,i,f){return e=new dge(e,t,n,i,f),t===1?(t=1,a===!0&&(t|=8)):t=0,a=Op(3,null,null,t),e.current=a,a.stateNode=e,a.memoizedState={element:r,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},LU(a),e}function hge(e,t,n){var r=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:E1,key:r==null?null:""+r,children:e,containerInfo:t,implementation:n}}function $te(e){if(!e)return Dy;e=e._reactInternals;e:{if(Xx(e)!==e||e.tag!==1)throw Error(Tr(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(Yh(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(Tr(171))}if(e.tag===1){var n=e.type;if(Yh(n))return $ee(e,n,t)}return t}function Gte(e,t,n,r,s,a,c,i,f){return e=XU(n,r,!0,e,s,a,c,i,f),e.context=$te(null),n=e.current,r=mh(),s=Ey(n),a=Kg(r,s),a.callback=t??null,Sy(n,a,s),e.current.lanes=s,hB(e,s,r),Jh(e,r),e}function IF(e,t,n,r){var s=t.current,a=mh(),c=Ey(s);return n=$te(n),t.context===null?t.context=n:t.pendingContext=n,t=Kg(a,c),t.payload={element:e},r=r===void 0?null:r,r!==null&&(t.callback=r),e=Sy(s,t,c),e!==null&&($A(e,s,c,a),jT(e,s,c)),c}function $I(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function wV(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function YU(e,t){wV(e,t),(e=e.alternate)&&wV(e,t)}function fge(){return null}var Kte=typeof reportError=="function"?reportError:function(e){console.error(e)};function JU(e){this._internalRoot=e}jF.prototype.render=JU.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(Tr(409));IF(e,t,null,null)};jF.prototype.unmount=JU.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;Nx(function(){IF(null,e,null,null)}),t[t0]=null}};function jF(e){this._internalRoot=e}jF.prototype.unstable_scheduleHydration=function(e){if(e){var t=Cee();e={blockedOn:null,target:e,priority:t};for(var n=0;n<ay.length&&t!==0&&t<ay[n].priority;n++);ay.splice(n,0,e),n===0&&Bee(e)}};function e8(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function FF(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function bV(){}function pge(e,t,n,r,s){if(s){if(typeof r=="function"){var a=r;r=function(){var g=$I(c);a.call(g)}}var c=Gte(t,r,e,0,null,!1,!1,"",bV);return e._reactRootContainer=c,e[t0]=c.current,ZC(e.nodeType===8?e.parentNode:e),Nx(),c}for(;s=e.lastChild;)e.removeChild(s);if(typeof r=="function"){var i=r;r=function(){var g=$I(f);i.call(g)}}var f=XU(e,0,!1,null,null,!1,!1,"",bV);return e._reactRootContainer=f,e[t0]=f.current,ZC(e.nodeType===8?e.parentNode:e),Nx(function(){IF(t,f,n,r)}),f}function PF(e,t,n,r,s){var a=n._reactRootContainer;if(a){var c=a;if(typeof s=="function"){var i=s;s=function(){var f=$I(c);i.call(f)}}IF(t,c,e,s)}else c=pge(n,t,e,s,r);return $I(c)}wee=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=$2(t.pendingLanes);n!==0&&(vU(t,n|1),Jh(t,mc()),!(Lo&6)&&(gw=mc()+500,tv()))}break;case 13:Nx(function(){var r=n0(e,1);if(r!==null){var s=mh();$A(r,e,1,s)}}),YU(e,1)}};xU=function(e){if(e.tag===13){var t=n0(e,134217728);if(t!==null){var n=mh();$A(t,e,134217728,n)}YU(e,134217728)}};bee=function(e){if(e.tag===13){var t=Ey(e),n=n0(e,t);if(n!==null){var r=mh();$A(n,e,t,r)}YU(e,t)}};Cee=function(){return oa};See=function(e,t){var n=oa;try{return oa=e,t()}finally{oa=n}};NR=function(e,t,n){switch(t){case"input":if(IR(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var r=n[t];if(r!==e&&r.form===e.form){var s=wF(r);if(!s)throw Error(Tr(90));nee(r),IR(r,s)}}}break;case"textarea":iee(e,n);break;case"select":t=n.value,t!=null&&W1(e,!!n.multiple,t,!1)}};dee=KU;hee=Nx;var Age={usingClientEntryPoint:!1,Events:[pB,P1,wF,cee,uee,KU]},A2={findFiberByHostInstance:lx,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},mge={bundleType:A2.bundleType,version:A2.version,rendererPackageName:A2.rendererPackageName,rendererConfig:A2.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:f0.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=Aee(e),e===null?null:e.stateNode},findFiberByHostInstance:A2.findFiberByHostInstance||fge,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var d3=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!d3.isDisabled&&d3.supportsFiber)try{yF=d3.inject(mge),Gm=d3}catch{}}ep.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Age;ep.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!e8(t))throw Error(Tr(200));return hge(e,t,null,n)};ep.createRoot=function(e,t){if(!e8(e))throw Error(Tr(299));var n=!1,r="",s=Kte;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(r=t.identifierPrefix),t.onRecoverableError!==void 0&&(s=t.onRecoverableError)),t=XU(e,1,!1,null,null,n,!1,r,s),e[t0]=t.current,ZC(e.nodeType===8?e.parentNode:e),new JU(t)};ep.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(Tr(188)):(e=Object.keys(e).join(","),Error(Tr(268,e)));return e=Aee(t),e=e===null?null:e.stateNode,e};ep.flushSync=function(e){return Nx(e)};ep.hydrate=function(e,t,n){if(!FF(t))throw Error(Tr(200));return PF(null,e,t,!0,n)};ep.hydrateRoot=function(e,t,n){if(!e8(e))throw Error(Tr(405));var r=n!=null&&n.hydratedSources||null,s=!1,a="",c=Kte;if(n!=null&&(n.unstable_strictMode===!0&&(s=!0),n.identifierPrefix!==void 0&&(a=n.identifierPrefix),n.onRecoverableError!==void 0&&(c=n.onRecoverableError)),t=Gte(t,null,e,1,n??null,s,!1,a,c),e[t0]=t.current,ZC(e),r)for(e=0;e<r.length;e++)n=r[e],s=n._getVersion,s=s(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,s]:t.mutableSourceEagerHydrationData.push(n,s);return new jF(t)};ep.render=function(e,t,n){if(!FF(t))throw Error(Tr(200));return PF(null,e,t,!1,n)};ep.unmountComponentAtNode=function(e){if(!FF(e))throw Error(Tr(40));return e._reactRootContainer?(Nx(function(){PF(null,null,e,!1,function(){e._reactRootContainer=null,e[t0]=null})}),!0):!1};ep.unstable_batchedUpdates=KU;ep.unstable_renderSubtreeIntoContainer=function(e,t,n,r){if(!FF(n))throw Error(Tr(200));if(e==null||e._reactInternals===void 0)throw Error(Tr(38));return PF(e,t,n,!1,r)};ep.version="18.3.1-next-f1338f8080-20240426";function Wte(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(Wte)}catch(e){console.error(e)}}Wte(),WJ.exports=ep;var $w=WJ.exports;const gge=mF($w),yge=MJ({__proto__:null,default:gge},[$w]);var qte,CV=$w;qte=CV.createRoot,CV.hydrateRoot;var Zte={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},SV=Ti.createContext&&Ti.createContext(Zte),vge=["attr","size","title"];function xge(e,t){if(e==null)return{};var n=_ge(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function _ge(e,t){if(e==null)return{};var n={};for(var r in e)if(Object.prototype.hasOwnProperty.call(e,r)){if(t.indexOf(r)>=0)continue;n[r]=e[r]}return n}function GI(){return GI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},GI.apply(this,arguments)}function BV(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function KI(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?BV(Object(n),!0).forEach(function(r){wge(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):BV(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function wge(e,t,n){return t=bge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function bge(e){var t=Cge(e,"string");return typeof t=="symbol"?t:t+""}function Cge(e,t){if(typeof e!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var r=n.call(e,t||"default");if(typeof r!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Xte(e){return e&&e.map((t,n)=>Ti.createElement(t.tag,KI({key:n},t.attr),Xte(t.child)))}function yl(e){return t=>Ti.createElement(Sge,GI({attr:KI({},e.attr)},t),Xte(e.child))}function Sge(e){var t=n=>{var{attr:r,size:s,title:a}=e,c=xge(e,vge),i=s||n.size||"1em",f;return n.className&&(f=n.className),e.className&&(f=(f?f+" ":"")+e.className),Ti.createElement("svg",GI({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},n.attr,r,c,{className:f,style:KI(KI({color:e.color||n.color},n.style),e.style),height:i,width:i,xmlns:"http://www.w3.org/2000/svg"}),a&&Ti.createElement("title",null,a),e.children)};return SV!==void 0?Ti.createElement(SV.Consumer,null,n=>t(n)):t(Zte)}function Yte(e){return yl({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M143 352.3L7 216.3c-9.4-9.4-9.4-24.6 0-33.9l22.6-22.6c9.4-9.4 24.6-9.4 33.9 0l96.4 96.4 96.4-96.4c9.4-9.4 24.6-9.4 33.9 0l22.6 22.6c9.4 9.4 9.4 24.6 0 33.9l-136 136c-9.2 9.4-24.4 9.4-33.8 0z"},child:[]}]})(e)}function Jte(e){return yl({tag:"svg",attr:{viewBox:"0 0 320 512"},child:[{tag:"path",attr:{d:"M177 159.7l136 136c9.4 9.4 9.4 24.6 0 33.9l-22.6 22.6c-9.4 9.4-24.6 9.4-33.9 0L160 255.9l-96.4 96.4c-9.4 9.4-24.6 9.4-33.9 0L7 329.7c-9.4-9.4-9.4-24.6 0-33.9l136-136c9.4-9.5 24.6-9.5 34-.1z"},child:[]}]})(e)}function kF(e){return yl({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M257.5 445.1l-22.2 22.2c-9.4 9.4-24.6 9.4-33.9 0L7 273c-9.4-9.4-9.4-24.6 0-33.9L201.4 44.7c9.4-9.4 24.6-9.4 33.9 0l22.2 22.2c9.5 9.5 9.3 25-.4 34.3L136.6 216H424c13.3 0 24 10.7 24 24v32c0 13.3-10.7 24-24 24H136.6l120.5 114.8c9.8 9.3 10 24.8.4 34.3z"},child:[]}]})(e)}function LF(e){return yl({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M16 132h416c8.837 0 16-7.163 16-16V76c0-8.837-7.163-16-16-16H16C7.163 60 0 67.163 0 76v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16zm0 160h416c8.837 0 16-7.163 16-16v-40c0-8.837-7.163-16-16-16H16c-8.837 0-16 7.163-16 16v40c0 8.837 7.163 16 16 16z"},child:[]}]})(e)}function MF(e){return yl({tag:"svg",attr:{viewBox:"0 0 640 512"},child:[{tag:"path",attr:{d:"M400 96a48 48 0 1 0-48-48 48 48 0 0 0 48 48zm-4 121a31.9 31.9 0 0 0 20 7h64a32 32 0 0 0 0-64h-52.78L356 103a31.94 31.94 0 0 0-40.81.68l-112 96a32 32 0 0 0 3.08 50.92L288 305.12V416a32 32 0 0 0 64 0V288a32 32 0 0 0-14.25-26.62l-41.36-27.57 58.25-49.92zm116 39a128 128 0 1 0 128 128 128 128 0 0 0-128-128zm0 192a64 64 0 1 1 64-64 64 64 0 0 1-64 64zM128 256a128 128 0 1 0 128 128 128 128 0 0 0-128-128zm0 192a64 64 0 1 1 64-64 64 64 0 0 1-64 64z"},child:[]}]})(e)}function t8(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M509.5 184.6L458.9 32.8C452.4 13.2 434.1 0 413.4 0H272v192h238.7c-.4-2.5-.4-5-1.2-7.4zM240 0H98.6c-20.7 0-39 13.2-45.5 32.8L2.5 184.6c-.8 2.4-.8 4.9-1.2 7.4H240V0zM0 224v240c0 26.5 21.5 48 48 48h416c26.5 0 48-21.5 48-48V224H0z"},child:[]}]})(e)}function n8(e){return yl({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M400 0H48C22.4 0 0 22.4 0 48v416c0 25.6 22.4 48 48 48h352c25.6 0 48-22.4 48-48V48c0-25.6-22.4-48-48-48zM128 435.2c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm0-128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8v-38.4c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v38.4zm128 128c0 6.4-6.4 12.8-12.8 12.8h-38.4c-6.4 0-12.8-6.4-12.8-12.8V268.8c0-6.4 6.4-12.8 12.8-12.8h38.4c6.4 0 12.8 6.4 12.8 12.8v166.4zm0-256c0 6.4-6.4 12.8-12.8 12.8H76.8c-6.4 0-12.8-6.4-12.8-12.8V76.8C64 70.4 70.4 64 76.8 64h294.4c6.4 0 12.8 6.4 12.8 12.8v102.4z"},child:[]}]})(e)}function i0(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M173.898 439.404l-166.4-166.4c-9.997-9.997-9.997-26.206 0-36.204l36.203-36.204c9.997-9.998 26.207-9.998 36.204 0L192 312.69 432.095 72.596c9.997-9.997 26.207-9.997 36.204 0l36.203 36.204c9.997 9.997 9.997 26.206 0 36.204l-294.4 294.401c-9.998 9.997-26.207 9.997-36.204-.001z"},child:[]}]})(e)}function r8(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.4 315.7l-42.6-24.6c4.3-23.2 4.3-47 0-70.2l42.6-24.6c4.9-2.8 7.1-8.6 5.5-14-11.1-35.6-30-67.8-54.7-94.6-3.8-4.1-10-5.1-14.8-2.3L380.8 110c-17.9-15.4-38.5-27.3-60.8-35.1V25.8c0-5.6-3.9-10.5-9.4-11.7-36.7-8.2-74.3-7.8-109.2 0-5.5 1.2-9.4 6.1-9.4 11.7V75c-22.2 7.9-42.8 19.8-60.8 35.1L88.7 85.5c-4.9-2.8-11-1.9-14.8 2.3-24.7 26.7-43.6 58.9-54.7 94.6-1.7 5.4.6 11.2 5.5 14L67.3 221c-4.3 23.2-4.3 47 0 70.2l-42.6 24.6c-4.9 2.8-7.1 8.6-5.5 14 11.1 35.6 30 67.8 54.7 94.6 3.8 4.1 10 5.1 14.8 2.3l42.6-24.6c17.9 15.4 38.5 27.3 60.8 35.1v49.2c0 5.6 3.9 10.5 9.4 11.7 36.7 8.2 74.3 7.8 109.2 0 5.5-1.2 9.4-6.1 9.4-11.7v-49.2c22.2-7.9 42.8-19.8 60.8-35.1l42.6 24.6c4.9 2.8 11 1.9 14.8-2.3 24.7-26.7 43.6-58.9 54.7-94.6 1.5-5.5-.7-11.3-5.6-14.1zM256 336c-44.1 0-80-35.9-80-80s35.9-80 80-80 80 35.9 80 80-35.9 80-80 80z"},child:[]}]})(e)}function Bge(e){return yl({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M0 432c0 26.5 21.5 48 48 48h480c26.5 0 48-21.5 48-48V256H0v176zm192-68c0-6.6 5.4-12 12-12h136c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H204c-6.6 0-12-5.4-12-12v-40zm-128 0c0-6.6 5.4-12 12-12h72c6.6 0 12 5.4 12 12v40c0 6.6-5.4 12-12 12H76c-6.6 0-12-5.4-12-12v-40zM576 80v48H0V80c0-26.5 21.5-48 48-48h480c26.5 0 48 21.5 48 48z"},child:[]}]})(e)}function OA(e){return yl({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M402.6 83.2l90.2 90.2c3.8 3.8 3.8 10 0 13.8L274.4 405.6l-92.8 10.3c-12.4 1.4-22.9-9.1-21.5-21.5l10.3-92.8L388.8 83.2c3.8-3.8 10-3.8 13.8 0zm162-22.9l-48.8-48.8c-15.2-15.2-39.9-15.2-55.2 0l-35.4 35.4c-3.8 3.8-3.8 10 0 13.8l90.2 90.2c3.8 3.8 10 3.8 13.8 0l35.4-35.4c15.2-15.3 15.2-40 0-55.2zM384 346.2V448H64V128h229.8c3.2 0 6.2-1.3 8.5-3.5l40-40c7.6-7.6 2.2-20.5-8.5-20.5H48C21.5 64 0 85.5 0 112v352c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48V306.2c0-10.7-12.9-16-20.5-8.5l-40 40c-2.2 2.3-3.5 5.3-3.5 8.5z"},child:[]}]})(e)}function ene(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M487.976 0H24.028C2.71 0-8.047 25.866 7.058 40.971L192 225.941V432c0 7.831 3.821 15.17 10.237 19.662l80 55.98C298.02 518.69 320 507.493 320 487.98V225.941l184.947-184.97C520.021 25.896 509.338 0 487.976 0z"},child:[]}]})(e)}function mB(e){return yl({tag:"svg",attr:{viewBox:"0 0 576 512"},child:[{tag:"path",attr:{d:"M280.37 148.26L96 300.11V464a16 16 0 0 0 16 16l112.06-.29a16 16 0 0 0 15.92-16V368a16 16 0 0 1 16-16h64a16 16 0 0 1 16 16v95.64a16 16 0 0 0 16 16.05L464 480a16 16 0 0 0 16-16V300L295.67 148.26a12.19 12.19 0 0 0-15.3 0zM571.6 251.47L488 182.56V44.05a12 12 0 0 0-12-12h-56a12 12 0 0 0-12 12v72.61L318.47 43a48 48 0 0 0-61 0L4.34 251.47a12 12 0 0 0-1.6 16.9l25.5 31A12 12 0 0 0 45.15 301l235.22-193.74a12.19 12.19 0 0 1 15.3 0L530.9 301a12 12 0 0 0 16.9-1.6l25.5-31a12 12 0 0 0-1.7-16.93z"},child:[]}]})(e)}function sS(e){return yl({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M416 208H272V64c0-17.67-14.33-32-32-32h-32c-17.67 0-32 14.33-32 32v144H32c-17.67 0-32 14.33-32 32v32c0 17.67 14.33 32 32 32h144v144c0 17.67 14.33 32 32 32h32c17.67 0 32-14.33 32-32V304h144c17.67 0 32-14.33 32-32v-32c0-17.67-14.33-32-32-32z"},child:[]}]})(e)}function NF(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M448 192V77.25c0-8.49-3.37-16.62-9.37-22.63L393.37 9.37c-6-6-14.14-9.37-22.63-9.37H96C78.33 0 64 14.33 64 32v160c-35.35 0-64 28.65-64 64v112c0 8.84 7.16 16 16 16h48v96c0 17.67 14.33 32 32 32h320c17.67 0 32-14.33 32-32v-96h48c8.84 0 16-7.16 16-16V256c0-35.35-28.65-64-64-64zm-64 256H128v-96h256v96zm0-224H128V64h192v48c0 8.84 7.16 16 16 16h48v96zm48 72c-13.25 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function tne(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M505.04 442.66l-99.71-99.69c-4.5-4.5-10.6-7-17-7h-16.3c27.6-35.3 44-79.69 44-127.99C416.03 93.09 322.92 0 208.02 0S0 93.09 0 207.98s93.11 207.98 208.02 207.98c48.3 0 92.71-16.4 128.01-44v16.3c0 6.4 2.5 12.5 7 17l99.71 99.69c9.4 9.4 24.6 9.4 33.9 0l28.3-28.3c9.4-9.4 9.4-24.59.1-33.99zm-297.02-90.7c-79.54 0-144-64.34-144-143.98 0-79.53 64.35-143.98 144-143.98 79.54 0 144 64.34 144 143.98 0 79.53-64.35 143.98-144 143.98zm.02-239.96c-40.78 0-73.84 33.05-73.84 73.83 0 32.96 48.26 93.05 66.75 114.86a9.24 9.24 0 0 0 14.18 0c18.49-21.81 66.75-81.89 66.75-114.86 0-40.78-33.06-73.83-73.84-73.83zm0 96c-13.26 0-24-10.75-24-24 0-13.26 10.75-24 24-24s24 10.74 24 24c0 13.25-10.75 24-24 24z"},child:[]}]})(e)}function Ege(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M466.5 83.7l-192-80a48.15 48.15 0 0 0-36.9 0l-192 80C27.7 91.1 16 108.6 16 128c0 198.5 114.5 335.7 221.5 380.3 11.8 4.9 25.1 4.9 36.9 0C360.1 472.6 496 349.3 496 128c0-19.4-11.7-36.9-29.5-44.3zM256.1 446.3l-.1-381 175.9 73.3c-3.3 151.4-82.1 261.1-175.8 307.7z"},child:[]}]})(e)}function i8(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M497 273L329 441c-15 15-41 4.5-41-17v-96H152c-13.3 0-24-10.7-24-24v-96c0-13.3 10.7-24 24-24h136V88c0-21.4 25.9-32 41-17l168 168c9.3 9.4 9.3 24.6 0 34zM192 436v-40c0-6.6-5.4-12-12-12H96c-17.7 0-32-14.3-32-32V160c0-17.7 14.3-32 32-32h84c6.6 0 12-5.4 12-12V76c0-6.6-5.4-12-12-12H96c-53 0-96 43-96 96v192c0 53 43 96 96 96h84c6.6 0 12-5.4 12-12z"},child:[]}]})(e)}function RF(e){return yl({tag:"svg",attr:{viewBox:"0 0 352 512"},child:[{tag:"path",attr:{d:"M242.72 256l100.07-100.07c12.28-12.28 12.28-32.19 0-44.48l-22.24-22.24c-12.28-12.28-32.19-12.28-44.48 0L176 189.28 75.93 89.21c-12.28-12.28-32.19-12.28-44.48 0L9.21 111.45c-12.28 12.28-12.28 32.19 0 44.48L109.28 256 9.21 356.07c-12.28 12.28-12.28 32.19 0 44.48l22.24 22.24c12.28 12.28 32.2 12.28 44.48 0L176 322.72l100.07 100.07c12.28 12.28 32.2 12.28 44.48 0l22.24-22.24c12.28-12.28 12.28-32.19 0-44.48L242.72 256z"},child:[]}]})(e)}function OF(e){return yl({tag:"svg",attr:{viewBox:"0 0 448 512"},child:[{tag:"path",attr:{d:"M224 256c70.7 0 128-57.3 128-128S294.7 0 224 0 96 57.3 96 128s57.3 128 128 128zm89.6 32h-16.7c-22.2 10.2-46.9 16-72.9 16s-50.6-5.8-72.9-16h-16.7C60.2 288 0 348.2 0 422.4V464c0 26.5 21.5 48 48 48h352c26.5 0 48-21.5 48-48v-41.6c0-74.2-60.2-134.4-134.4-134.4z"},child:[]}]})(e)}function nne(e){return yl({tag:"svg",attr:{viewBox:"0 0 512 512"},child:[{tag:"path",attr:{d:"M461.2 128H80c-8.84 0-16-7.16-16-16s7.16-16 16-16h384c8.84 0 16-7.16 16-16 0-26.51-21.49-48-48-48H64C28.65 32 0 60.65 0 96v320c0 35.35 28.65 64 64 64h397.2c28.02 0 50.8-21.53 50.8-48V176c0-26.47-22.78-48-50.8-48zM416 336c-17.67 0-32-14.33-32-32s14.33-32 32-32 32 14.33 32 32-14.33 32-32 32z"},child:[]}]})(e)}/**
 * @remix-run/router v1.21.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ml(){return ml=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ml.apply(this,arguments)}var Lc;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(Lc||(Lc={}));const EV="popstate";function Tge(e){e===void 0&&(e={});function t(r,s){let{pathname:a,search:c,hash:i}=r.location;return oS("",{pathname:a,search:c,hash:i},s.state&&s.state.usr||null,s.state&&s.state.key||"default")}function n(r,s){return typeof s=="string"?s:Rx(s)}return jge(t,n,null,e)}function Xs(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function yw(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function Ige(){return Math.random().toString(36).substr(2,8)}function TV(e,t){return{usr:e.state,key:e.key,idx:t}}function oS(e,t,n,r){return n===void 0&&(n=null),ml({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?nv(t):t,{state:n,key:t&&t.key||r||Ige()})}function Rx(e){let{pathname:t="/",search:n="",hash:r=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),r&&r!=="#"&&(t+=r.charAt(0)==="#"?r:"#"+r),t}function nv(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let r=e.indexOf("?");r>=0&&(t.search=e.substr(r),e=e.substr(0,r)),e&&(t.pathname=e)}return t}function jge(e,t,n,r){r===void 0&&(r={});let{window:s=document.defaultView,v5Compat:a=!1}=r,c=s.history,i=Lc.Pop,f=null,g=y();g==null&&(g=0,c.replaceState(ml({},c.state,{idx:g}),""));function y(){return(c.state||{idx:null}).idx}function b(){i=Lc.Pop;let W=y(),L=W==null?null:W-g;g=W,f&&f({action:i,location:N.location,delta:L})}function T(W,L){i=Lc.Push;let Q=oS(N.location,W,L);g=y()+1;let V=TV(Q,g),Z=N.createHref(Q);try{c.pushState(V,"",Z)}catch(ne){if(ne instanceof DOMException&&ne.name==="DataCloneError")throw ne;s.location.assign(Z)}a&&f&&f({action:i,location:N.location,delta:1})}function S(W,L){i=Lc.Replace;let Q=oS(N.location,W,L);g=y();let V=TV(Q,g),Z=N.createHref(Q);c.replaceState(V,"",Z),a&&f&&f({action:i,location:N.location,delta:0})}function U(W){let L=s.location.origin!=="null"?s.location.origin:s.location.href,Q=typeof W=="string"?W:Rx(W);return Q=Q.replace(/ $/,"%20"),Xs(L,"No window.location.(origin|href) available to create URL for href: "+Q),new URL(Q,L)}let N={get action(){return i},get location(){return e(s,c)},listen(W){if(f)throw new Error("A history only accepts one active listener");return s.addEventListener(EV,b),f=W,()=>{s.removeEventListener(EV,b),f=null}},createHref(W){return t(s,W)},createURL:U,encodeLocation(W){let L=U(W);return{pathname:L.pathname,search:L.search,hash:L.hash}},push:T,replace:S,go(W){return c.go(W)}};return N}var ha;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(ha||(ha={}));const Fge=new Set(["lazy","caseSensitive","path","id","index","children"]);function Pge(e){return e.index===!0}function WI(e,t,n,r){return n===void 0&&(n=[]),r===void 0&&(r={}),e.map((s,a)=>{let c=[...n,String(a)],i=typeof s.id=="string"?s.id:c.join("-");if(Xs(s.index!==!0||!s.children,"Cannot specify children on an index route"),Xs(!r[i],'Found a route id collision on id "'+i+`".  Route id's must be globally unique within Data Router usages`),Pge(s)){let f=ml({},s,t(s),{id:i});return r[i]=f,f}else{let f=ml({},s,t(s),{id:i,children:void 0});return r[i]=f,s.children&&(f.children=WI(s.children,t,c,r)),f}})}function tx(e,t,n){return n===void 0&&(n="/"),RT(e,t,n,!1)}function RT(e,t,n,r){let s=typeof t=="string"?nv(t):t,a=s0(s.pathname||"/",n);if(a==null)return null;let c=rne(e);Lge(c);let i=null;for(let f=0;i==null&&f<c.length;++f){let g=$ge(a);i=Hge(c[f],g,r)}return i}function kge(e,t){let{route:n,pathname:r,params:s}=e;return{id:n.id,pathname:r,params:s,data:t[n.id],handle:n.handle}}function rne(e,t,n,r){t===void 0&&(t=[]),n===void 0&&(n=[]),r===void 0&&(r="");let s=(a,c,i)=>{let f={relativePath:i===void 0?a.path||"":i,caseSensitive:a.caseSensitive===!0,childrenIndex:c,route:a};f.relativePath.startsWith("/")&&(Xs(f.relativePath.startsWith(r),'Absolute route path "'+f.relativePath+'" nested under path '+('"'+r+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),f.relativePath=f.relativePath.slice(r.length));let g=Wg([r,f.relativePath]),y=n.concat(f);a.children&&a.children.length>0&&(Xs(a.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+g+'".')),rne(a.children,t,y,g)),!(a.path==null&&!a.index)&&t.push({path:g,score:zge(g,a.index),routesMeta:y})};return e.forEach((a,c)=>{var i;if(a.path===""||!((i=a.path)!=null&&i.includes("?")))s(a,c);else for(let f of ine(a.path))s(a,c,f)}),t}function ine(e){let t=e.split("/");if(t.length===0)return[];let[n,...r]=t,s=n.endsWith("?"),a=n.replace(/\?$/,"");if(r.length===0)return s?[a,""]:[a];let c=ine(r.join("/")),i=[];return i.push(...c.map(f=>f===""?a:[a,f].join("/"))),s&&i.push(...c),i.map(f=>e.startsWith("/")&&f===""?"/":f)}function Lge(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:Qge(t.routesMeta.map(r=>r.childrenIndex),n.routesMeta.map(r=>r.childrenIndex)))}const Mge=/^:[\w-]+$/,Nge=3,Rge=2,Oge=1,Dge=10,Uge=-2,IV=e=>e==="*";function zge(e,t){let n=e.split("/"),r=n.length;return n.some(IV)&&(r+=Uge),t&&(r+=Rge),n.filter(s=>!IV(s)).reduce((s,a)=>s+(Mge.test(a)?Nge:a===""?Oge:Dge),r)}function Qge(e,t){return e.length===t.length&&e.slice(0,-1).every((r,s)=>r===t[s])?e[e.length-1]-t[t.length-1]:0}function Hge(e,t,n){n===void 0&&(n=!1);let{routesMeta:r}=e,s={},a="/",c=[];for(let i=0;i<r.length;++i){let f=r[i],g=i===r.length-1,y=a==="/"?t:t.slice(a.length)||"/",b=qI({path:f.relativePath,caseSensitive:f.caseSensitive,end:g},y),T=f.route;if(!b&&g&&n&&!r[r.length-1].route.index&&(b=qI({path:f.relativePath,caseSensitive:f.caseSensitive,end:!1},y)),!b)return null;Object.assign(s,b.params),c.push({params:s,pathname:Wg([a,b.pathname]),pathnameBase:Wge(Wg([a,b.pathnameBase])),route:T}),b.pathnameBase!=="/"&&(a=Wg([a,b.pathnameBase]))}return c}function qI(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,r]=Vge(e.path,e.caseSensitive,e.end),s=t.match(n);if(!s)return null;let a=s[0],c=a.replace(/(.)\/+$/,"$1"),i=s.slice(1);return{params:r.reduce((g,y,b)=>{let{paramName:T,isOptional:S}=y;if(T==="*"){let N=i[b]||"";c=a.slice(0,a.length-N.length).replace(/(.)\/+$/,"$1")}const U=i[b];return S&&!U?g[T]=void 0:g[T]=(U||"").replace(/%2F/g,"/"),g},{}),pathname:a,pathnameBase:c,pattern:e}}function Vge(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),yw(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let r=[],s="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(c,i,f)=>(r.push({paramName:i,isOptional:f!=null}),f?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(r.push({paramName:"*"}),s+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?s+="\\/*$":e!==""&&e!=="/"&&(s+="(?:(?=\\/|$))"),[new RegExp(s,t?void 0:"i"),r]}function $ge(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return yw(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function s0(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,r=e.charAt(n);return r&&r!=="/"?null:e.slice(n)||"/"}function Gge(e,t){t===void 0&&(t="/");let{pathname:n,search:r="",hash:s=""}=typeof e=="string"?nv(e):e;return{pathname:n?n.startsWith("/")?n:Kge(n,t):t,search:qge(r),hash:Zge(s)}}function Kge(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(s=>{s===".."?n.length>1&&n.pop():s!=="."&&n.push(s)}),n.length>1?n.join("/"):"/"}function bM(e,t,n,r){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(r)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function sne(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function s8(e,t){let n=sne(e);return t?n.map((r,s)=>s===n.length-1?r.pathname:r.pathnameBase):n.map(r=>r.pathnameBase)}function o8(e,t,n,r){r===void 0&&(r=!1);let s;typeof e=="string"?s=nv(e):(s=ml({},e),Xs(!s.pathname||!s.pathname.includes("?"),bM("?","pathname","search",s)),Xs(!s.pathname||!s.pathname.includes("#"),bM("#","pathname","hash",s)),Xs(!s.search||!s.search.includes("#"),bM("#","search","hash",s)));let a=e===""||s.pathname==="",c=a?"/":s.pathname,i;if(c==null)i=n;else{let b=t.length-1;if(!r&&c.startsWith("..")){let T=c.split("/");for(;T[0]==="..";)T.shift(),b-=1;s.pathname=T.join("/")}i=b>=0?t[b]:"/"}let f=Gge(s,i),g=c&&c!=="/"&&c.endsWith("/"),y=(a||c===".")&&n.endsWith("/");return!f.pathname.endsWith("/")&&(g||y)&&(f.pathname+="/"),f}const Wg=e=>e.join("/").replace(/\/\/+/g,"/"),Wge=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),qge=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,Zge=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;class ZI{constructor(t,n,r,s){s===void 0&&(s=!1),this.status=t,this.statusText=n||"",this.internal=s,r instanceof Error?(this.data=r.toString(),this.error=r):this.data=r}}function DF(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const one=["post","put","patch","delete"],Xge=new Set(one),Yge=["get",...one],Jge=new Set(Yge),e0e=new Set([301,302,303,307,308]),t0e=new Set([307,308]),CM={state:"idle",location:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},n0e={state:"idle",data:void 0,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0},m2={state:"unblocked",proceed:void 0,reset:void 0,location:void 0},a8=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,r0e=e=>({hasErrorBoundary:!!e.hasErrorBoundary}),ane="remix-router-transitions";function i0e(e){const t=e.window?e.window:typeof window<"u"?window:void 0,n=typeof t<"u"&&typeof t.document<"u"&&typeof t.document.createElement<"u",r=!n;Xs(e.routes.length>0,"You must provide a non-empty routes array to createRouter");let s;if(e.mapRouteProperties)s=e.mapRouteProperties;else if(e.detectErrorBoundary){let ve=e.detectErrorBoundary;s=Re=>({hasErrorBoundary:ve(Re)})}else s=r0e;let a={},c=WI(e.routes,s,void 0,a),i,f=e.basename||"/",g=e.dataStrategy||l0e,y=e.patchRoutesOnNavigation,b=ml({v7_fetcherPersist:!1,v7_normalizeFormMethod:!1,v7_partialHydration:!1,v7_prependBasename:!1,v7_relativeSplatPath:!1,v7_skipActionErrorRevalidation:!1},e.future),T=null,S=new Set,U=null,N=null,W=null,L=e.hydrationData!=null,Q=tx(c,e.history.location,f),V=null;if(Q==null&&!y){let ve=Vh(404,{pathname:e.history.location.pathname}),{matches:Re,route:ze}=UV(c);Q=Re,V={[ze.id]:ve}}Q&&!e.hydrationData&&Kr(Q,c,e.history.location.pathname).active&&(Q=null);let Z;if(Q)if(Q.some(ve=>ve.route.lazy))Z=!1;else if(!Q.some(ve=>ve.route.loader))Z=!0;else if(b.v7_partialHydration){let ve=e.hydrationData?e.hydrationData.loaderData:null,Re=e.hydrationData?e.hydrationData.errors:null;if(Re){let ze=Q.findIndex(tt=>Re[tt.route.id]!==void 0);Z=Q.slice(0,ze+1).every(tt=>!mO(tt.route,ve,Re))}else Z=Q.every(ze=>!mO(ze.route,ve,Re))}else Z=e.hydrationData!=null;else if(Z=!1,Q=[],b.v7_partialHydration){let ve=Kr(null,c,e.history.location.pathname);ve.active&&ve.matches&&(Q=ve.matches)}let ne,Y={historyAction:e.history.action,location:e.history.location,matches:Q,initialized:Z,navigation:CM,restoreScrollPosition:e.hydrationData!=null?!1:null,preventScrollReset:!1,revalidation:"idle",loaderData:e.hydrationData&&e.hydrationData.loaderData||{},actionData:e.hydrationData&&e.hydrationData.actionData||null,errors:e.hydrationData&&e.hydrationData.errors||V,fetchers:new Map,blockers:new Map},le=Lc.Pop,pe=!1,_e,ye=!1,he=new Map,be=null,Te=!1,Ee=!1,Ne=[],Ge=new Set,Je=new Map,Ue=0,Qe=-1,xe=new Map,at=new Set,we=new Map,me=new Map,Ze=new Set,ot=new Map,vt=new Map,Qt;function Ot(){if(T=e.history.listen(ve=>{let{action:Re,location:ze,delta:tt}=ve;if(Qt){Qt(),Qt=void 0;return}yw(vt.size===0||tt!=null,"You are trying to use a blocker on a POP navigation to a location that was not created by @remix-run/router. This will fail silently in production. This can happen if you are navigating outside the router via `window.history.pushState`/`window.location.hash` instead of using router navigation APIs.  This can also happen if you are using createHashRouter and the user manually changes the URL.");let gt=Es({currentLocation:Y.location,nextLocation:ze,historyAction:Re});if(gt&&tt!=null){let pt=new Promise(Lt=>{Qt=Lt});e.history.go(tt*-1),Vn(gt,{state:"blocked",location:ze,proceed(){Vn(gt,{state:"proceeding",proceed:void 0,reset:void 0,location:ze}),pt.then(()=>e.history.go(tt))},reset(){let Lt=new Map(Y.blockers);Lt.set(gt,m2),Ht({blockers:Lt})}});return}return hn(Re,ze)}),n){w0e(t,he);let ve=()=>b0e(t,he);t.addEventListener("pagehide",ve),be=()=>t.removeEventListener("pagehide",ve)}return Y.initialized||hn(Lc.Pop,Y.location,{initialHydration:!0}),ne}function kt(){T&&T(),be&&be(),S.clear(),_e&&_e.abort(),Y.fetchers.forEach((ve,Re)=>Yt(Re)),Y.blockers.forEach((ve,Re)=>bi(Re))}function Me(ve){return S.add(ve),()=>S.delete(ve)}function Ht(ve,Re){Re===void 0&&(Re={}),Y=ml({},Y,ve);let ze=[],tt=[];b.v7_fetcherPersist&&Y.fetchers.forEach((gt,pt)=>{gt.state==="idle"&&(Ze.has(pt)?tt.push(pt):ze.push(pt))}),[...S].forEach(gt=>gt(Y,{deletedFetchers:tt,viewTransitionOpts:Re.viewTransitionOpts,flushSync:Re.flushSync===!0})),b.v7_fetcherPersist&&(ze.forEach(gt=>Y.fetchers.delete(gt)),tt.forEach(gt=>Yt(gt)))}function Zt(ve,Re,ze){var tt,gt;let{flushSync:pt}=ze===void 0?{}:ze,Lt=Y.actionData!=null&&Y.navigation.formMethod!=null&&MA(Y.navigation.formMethod)&&Y.navigation.state==="loading"&&((tt=ve.state)==null?void 0:tt._isRedirect)!==!0,jt;Re.actionData?Object.keys(Re.actionData).length>0?jt=Re.actionData:jt=null:Lt?jt=Y.actionData:jt=null;let Nt=Re.loaderData?OV(Y.loaderData,Re.loaderData,Re.matches||[],Re.errors):Y.loaderData,rn=Y.blockers;rn.size>0&&(rn=new Map(rn),rn.forEach((sr,Cr)=>rn.set(Cr,m2)));let _n=pe===!0||Y.navigation.formMethod!=null&&MA(Y.navigation.formMethod)&&((gt=ve.state)==null?void 0:gt._isRedirect)!==!0;i&&(c=i,i=void 0),Te||le===Lc.Pop||(le===Lc.Push?e.history.push(ve,ve.state):le===Lc.Replace&&e.history.replace(ve,ve.state));let Pn;if(le===Lc.Pop){let sr=he.get(Y.location.pathname);sr&&sr.has(ve.pathname)?Pn={currentLocation:Y.location,nextLocation:ve}:he.has(ve.pathname)&&(Pn={currentLocation:ve,nextLocation:Y.location})}else if(ye){let sr=he.get(Y.location.pathname);sr?sr.add(ve.pathname):(sr=new Set([ve.pathname]),he.set(Y.location.pathname,sr)),Pn={currentLocation:Y.location,nextLocation:ve}}Ht(ml({},Re,{actionData:jt,loaderData:Nt,historyAction:le,location:ve,initialized:!0,navigation:CM,revalidation:"idle",restoreScrollPosition:Ir(ve,Re.matches||Y.matches),preventScrollReset:_n,blockers:rn}),{viewTransitionOpts:Pn,flushSync:pt===!0}),le=Lc.Pop,pe=!1,ye=!1,Te=!1,Ee=!1,Ne=[]}async function pn(ve,Re){if(typeof ve=="number"){e.history.go(ve);return}let ze=AO(Y.location,Y.matches,f,b.v7_prependBasename,ve,b.v7_relativeSplatPath,Re==null?void 0:Re.fromRouteId,Re==null?void 0:Re.relative),{path:tt,submission:gt,error:pt}=jV(b.v7_normalizeFormMethod,!1,ze,Re),Lt=Y.location,jt=oS(Y.location,tt,Re&&Re.state);jt=ml({},jt,e.history.encodeLocation(jt));let Nt=Re&&Re.replace!=null?Re.replace:void 0,rn=Lc.Push;Nt===!0?rn=Lc.Replace:Nt===!1||gt!=null&&MA(gt.formMethod)&&gt.formAction===Y.location.pathname+Y.location.search&&(rn=Lc.Replace);let _n=Re&&"preventScrollReset"in Re?Re.preventScrollReset===!0:void 0,Pn=(Re&&Re.flushSync)===!0,sr=Es({currentLocation:Lt,nextLocation:jt,historyAction:rn});if(sr){Vn(sr,{state:"blocked",location:jt,proceed(){Vn(sr,{state:"proceeding",proceed:void 0,reset:void 0,location:jt}),pn(ve,Re)},reset(){let Cr=new Map(Y.blockers);Cr.set(sr,m2),Ht({blockers:Cr})}});return}return await hn(rn,jt,{submission:gt,pendingError:pt,preventScrollReset:_n,replace:Re&&Re.replace,enableViewTransition:Re&&Re.viewTransition,flushSync:Pn})}function Dt(){if(wt(),Ht({revalidation:"loading"}),Y.navigation.state!=="submitting"){if(Y.navigation.state==="idle"){hn(Y.historyAction,Y.location,{startUninterruptedRevalidation:!0});return}hn(le||Y.historyAction,Y.navigation.location,{overrideNavigation:Y.navigation,enableViewTransition:ye===!0})}}async function hn(ve,Re,ze){_e&&_e.abort(),_e=null,le=ve,Te=(ze&&ze.startUninterruptedRevalidation)===!0,gr(Y.location,Y.matches),pe=(ze&&ze.preventScrollReset)===!0,ye=(ze&&ze.enableViewTransition)===!0;let tt=i||c,gt=ze&&ze.overrideNavigation,pt=tx(tt,Re,f),Lt=(ze&&ze.flushSync)===!0,jt=Kr(pt,tt,Re.pathname);if(jt.active&&jt.matches&&(pt=jt.matches),!pt){let{error:Ar,notFoundMatches:pr,route:Wr}=ki(Re.pathname);Zt(Re,{matches:pr,loaderData:{},errors:{[Wr.id]:Ar}},{flushSync:Lt});return}if(Y.initialized&&!Ee&&p0e(Y.location,Re)&&!(ze&&ze.submission&&MA(ze.submission.formMethod))){Zt(Re,{matches:pt},{flushSync:Lt});return}_e=new AbortController;let Nt=W_(e.history,Re,_e.signal,ze&&ze.submission),rn;if(ze&&ze.pendingError)rn=[nx(pt).route.id,{type:ha.error,error:ze.pendingError}];else if(ze&&ze.submission&&MA(ze.submission.formMethod)){let Ar=await Oe(Nt,Re,ze.submission,pt,jt.active,{replace:ze.replace,flushSync:Lt});if(Ar.shortCircuited)return;if(Ar.pendingActionResult){let[pr,Wr]=Ar.pendingActionResult;if($f(Wr)&&DF(Wr.error)&&Wr.error.status===404){_e=null,Zt(Re,{matches:Ar.matches,loaderData:{},errors:{[pr]:Wr.error}});return}}pt=Ar.matches||pt,rn=Ar.pendingActionResult,gt=SM(Re,ze.submission),Lt=!1,jt.active=!1,Nt=W_(e.history,Nt.url,Nt.signal)}let{shortCircuited:_n,matches:Pn,loaderData:sr,errors:Cr}=await nn(Nt,Re,pt,jt.active,gt,ze&&ze.submission,ze&&ze.fetcherSubmission,ze&&ze.replace,ze&&ze.initialHydration===!0,Lt,rn);_n||(_e=null,Zt(Re,ml({matches:Pn||pt},DV(rn),{loaderData:sr,errors:Cr})))}async function Oe(ve,Re,ze,tt,gt,pt){pt===void 0&&(pt={}),wt();let Lt=x0e(Re,ze);if(Ht({navigation:Lt},{flushSync:pt.flushSync===!0}),gt){let rn=await Mt(tt,Re.pathname,ve.signal);if(rn.type==="aborted")return{shortCircuited:!0};if(rn.type==="error"){let _n=nx(rn.partialMatches).route.id;return{matches:rn.partialMatches,pendingActionResult:[_n,{type:ha.error,error:rn.error}]}}else if(rn.matches)tt=rn.matches;else{let{notFoundMatches:_n,error:Pn,route:sr}=ki(Re.pathname);return{matches:_n,pendingActionResult:[sr.id,{type:ha.error,error:Pn}]}}}let jt,Nt=K2(tt,Re);if(!Nt.route.action&&!Nt.route.lazy)jt={type:ha.error,error:Vh(405,{method:ve.method,pathname:Re.pathname,routeId:Nt.route.id})};else if(jt=(await Gt("action",Y,ve,[Nt],tt,null))[Nt.route.id],ve.signal.aborted)return{shortCircuited:!0};if(dx(jt)){let rn;return pt&&pt.replace!=null?rn=pt.replace:rn=MV(jt.response.headers.get("Location"),new URL(ve.url),f)===Y.location.pathname+Y.location.search,await rr(ve,jt,!0,{submission:ze,replace:rn}),{shortCircuited:!0}}if(Ay(jt))throw Vh(400,{type:"defer-action"});if($f(jt)){let rn=nx(tt,Nt.route.id);return(pt&&pt.replace)!==!0&&(le=Lc.Push),{matches:tt,pendingActionResult:[rn.route.id,jt]}}return{matches:tt,pendingActionResult:[Nt.route.id,jt]}}async function nn(ve,Re,ze,tt,gt,pt,Lt,jt,Nt,rn,_n){let Pn=gt||SM(Re,pt),sr=pt||Lt||QV(Pn),Cr=!Te&&(!b.v7_partialHydration||!Nt);if(tt){if(Cr){let ho=Vt(_n);Ht(ml({navigation:Pn},ho!==void 0?{actionData:ho}:{}),{flushSync:rn})}let Li=await Mt(ze,Re.pathname,ve.signal);if(Li.type==="aborted")return{shortCircuited:!0};if(Li.type==="error"){let ho=nx(Li.partialMatches).route.id;return{matches:Li.partialMatches,loaderData:{},errors:{[ho]:Li.error}}}else if(Li.matches)ze=Li.matches;else{let{error:ho,notFoundMatches:xc,route:Yl}=ki(Re.pathname);return{matches:xc,loaderData:{},errors:{[Yl.id]:ho}}}}let Ar=i||c,[pr,Wr]=PV(e.history,Y,ze,sr,Re,b.v7_partialHydration&&Nt===!0,b.v7_skipActionErrorRevalidation,Ee,Ne,Ge,Ze,we,at,Ar,f,_n);if(hs(Li=>!(ze&&ze.some(ho=>ho.route.id===Li))||pr&&pr.some(ho=>ho.route.id===Li)),Qe=++Ue,pr.length===0&&Wr.length===0){let Li=_r();return Zt(Re,ml({matches:ze,loaderData:{},errors:_n&&$f(_n[1])?{[_n[0]]:_n[1].error}:null},DV(_n),Li?{fetchers:new Map(Y.fetchers)}:{}),{flushSync:rn}),{shortCircuited:!0}}if(Cr){let Li={};if(!tt){Li.navigation=Pn;let ho=Vt(_n);ho!==void 0&&(Li.actionData=ho)}Wr.length>0&&(Li.fetchers=$t(Wr)),Ht(Li,{flushSync:rn})}Wr.forEach(Li=>{Ln(Li.key),Li.controller&&Je.set(Li.key,Li.controller)});let vi=()=>Wr.forEach(Li=>Ln(Li.key));_e&&_e.signal.addEventListener("abort",vi);let{loaderResults:ti,fetcherResults:Ai}=await Rn(Y,ze,pr,Wr,ve);if(ve.signal.aborted)return{shortCircuited:!0};_e&&_e.signal.removeEventListener("abort",vi),Wr.forEach(Li=>Je.delete(Li.key));let Ci=h3(ti);if(Ci)return await rr(ve,Ci.result,!0,{replace:jt}),{shortCircuited:!0};if(Ci=h3(Ai),Ci)return at.add(Ci.key),await rr(ve,Ci.result,!0,{replace:jt}),{shortCircuited:!0};let{loaderData:Vs,errors:Zo}=RV(Y,ze,ti,_n,Wr,Ai,ot);ot.forEach((Li,ho)=>{Li.subscribe(xc=>{(xc||Li.done)&&ot.delete(ho)})}),b.v7_partialHydration&&Nt&&Y.errors&&(Zo=ml({},Y.errors,Zo));let Rs=_r(),Eo=fr(Qe),Xl=Rs||Eo||Wr.length>0;return ml({matches:ze,loaderData:Vs,errors:Zo},Xl?{fetchers:new Map(Y.fetchers)}:{})}function Vt(ve){if(ve&&!$f(ve[1]))return{[ve[0]]:ve[1].data};if(Y.actionData)return Object.keys(Y.actionData).length===0?null:Y.actionData}function $t(ve){return ve.forEach(Re=>{let ze=Y.fetchers.get(Re.key),tt=g2(void 0,ze?ze.data:void 0);Y.fetchers.set(Re.key,tt)}),new Map(Y.fetchers)}function xn(ve,Re,ze,tt){if(r)throw new Error("router.fetch() was called during the server render, but it shouldn't be. You are likely calling a useFetcher() method in the body of your component. Try moving it to a useEffect or a callback.");Ln(ve);let gt=(tt&&tt.flushSync)===!0,pt=i||c,Lt=AO(Y.location,Y.matches,f,b.v7_prependBasename,ze,b.v7_relativeSplatPath,Re,tt==null?void 0:tt.relative),jt=tx(pt,Lt,f),Nt=Kr(jt,pt,Lt);if(Nt.active&&Nt.matches&&(jt=Nt.matches),!jt){fn(ve,Re,Vh(404,{pathname:Lt}),{flushSync:gt});return}let{path:rn,submission:_n,error:Pn}=jV(b.v7_normalizeFormMethod,!0,Lt,tt);if(Pn){fn(ve,Re,Pn,{flushSync:gt});return}let sr=K2(jt,rn),Cr=(tt&&tt.preventScrollReset)===!0;if(_n&&MA(_n.formMethod)){Xt(ve,Re,rn,sr,jt,Nt.active,gt,Cr,_n);return}we.set(ve,{routeId:Re,path:rn}),gn(ve,Re,rn,sr,jt,Nt.active,gt,Cr,_n)}async function Xt(ve,Re,ze,tt,gt,pt,Lt,jt,Nt){wt(),we.delete(ve);function rn(so){if(!so.route.action&&!so.route.lazy){let Jl=Vh(405,{method:Nt.formMethod,pathname:ze,routeId:Re});return fn(ve,Re,Jl,{flushSync:Lt}),!0}return!1}if(!pt&&rn(tt))return;let _n=Y.fetchers.get(ve);qt(ve,_0e(Nt,_n),{flushSync:Lt});let Pn=new AbortController,sr=W_(e.history,ze,Pn.signal,Nt);if(pt){let so=await Mt(gt,ze,sr.signal);if(so.type==="aborted")return;if(so.type==="error"){fn(ve,Re,so.error,{flushSync:Lt});return}else if(so.matches){if(gt=so.matches,tt=K2(gt,ze),rn(tt))return}else{fn(ve,Re,Vh(404,{pathname:ze}),{flushSync:Lt});return}}Je.set(ve,Pn);let Cr=Ue,pr=(await Gt("action",Y,sr,[tt],gt,ve))[tt.route.id];if(sr.signal.aborted){Je.get(ve)===Pn&&Je.delete(ve);return}if(b.v7_fetcherPersist&&Ze.has(ve)){if(dx(pr)||$f(pr)){qt(ve,Y0(void 0));return}}else{if(dx(pr))if(Je.delete(ve),Qe>Cr){qt(ve,Y0(void 0));return}else return at.add(ve),qt(ve,g2(Nt)),rr(sr,pr,!1,{fetcherSubmission:Nt,preventScrollReset:jt});if($f(pr)){fn(ve,Re,pr.error);return}}if(Ay(pr))throw Vh(400,{type:"defer-action"});let Wr=Y.navigation.location||Y.location,vi=W_(e.history,Wr,Pn.signal),ti=i||c,Ai=Y.navigation.state!=="idle"?tx(ti,Y.navigation.location,f):Y.matches;Xs(Ai,"Didn't find any matches after fetcher action");let Ci=++Ue;xe.set(ve,Ci);let Vs=g2(Nt,pr.data);Y.fetchers.set(ve,Vs);let[Zo,Rs]=PV(e.history,Y,Ai,Nt,Wr,!1,b.v7_skipActionErrorRevalidation,Ee,Ne,Ge,Ze,we,at,ti,f,[tt.route.id,pr]);Rs.filter(so=>so.key!==ve).forEach(so=>{let Jl=so.key,Os=Y.fetchers.get(Jl),Dc=g2(void 0,Os?Os.data:void 0);Y.fetchers.set(Jl,Dc),Ln(Jl),so.controller&&Je.set(Jl,so.controller)}),Ht({fetchers:new Map(Y.fetchers)});let Eo=()=>Rs.forEach(so=>Ln(so.key));Pn.signal.addEventListener("abort",Eo);let{loaderResults:Xl,fetcherResults:Li}=await Rn(Y,Ai,Zo,Rs,vi);if(Pn.signal.aborted)return;Pn.signal.removeEventListener("abort",Eo),xe.delete(ve),Je.delete(ve),Rs.forEach(so=>Je.delete(so.key));let ho=h3(Xl);if(ho)return rr(vi,ho.result,!1,{preventScrollReset:jt});if(ho=h3(Li),ho)return at.add(ho.key),rr(vi,ho.result,!1,{preventScrollReset:jt});let{loaderData:xc,errors:Yl}=RV(Y,Ai,Xl,void 0,Rs,Li,ot);if(Y.fetchers.has(ve)){let so=Y0(pr.data);Y.fetchers.set(ve,so)}fr(Ci),Y.navigation.state==="loading"&&Ci>Qe?(Xs(le,"Expected pending action"),_e&&_e.abort(),Zt(Y.navigation.location,{matches:Ai,loaderData:xc,errors:Yl,fetchers:new Map(Y.fetchers)})):(Ht({errors:Yl,loaderData:OV(Y.loaderData,xc,Ai,Yl),fetchers:new Map(Y.fetchers)}),Ee=!1)}async function gn(ve,Re,ze,tt,gt,pt,Lt,jt,Nt){let rn=Y.fetchers.get(ve);qt(ve,g2(Nt,rn?rn.data:void 0),{flushSync:Lt});let _n=new AbortController,Pn=W_(e.history,ze,_n.signal);if(pt){let pr=await Mt(gt,ze,Pn.signal);if(pr.type==="aborted")return;if(pr.type==="error"){fn(ve,Re,pr.error,{flushSync:Lt});return}else if(pr.matches)gt=pr.matches,tt=K2(gt,ze);else{fn(ve,Re,Vh(404,{pathname:ze}),{flushSync:Lt});return}}Je.set(ve,_n);let sr=Ue,Ar=(await Gt("loader",Y,Pn,[tt],gt,ve))[tt.route.id];if(Ay(Ar)&&(Ar=await l8(Ar,Pn.signal,!0)||Ar),Je.get(ve)===_n&&Je.delete(ve),!Pn.signal.aborted){if(Ze.has(ve)){qt(ve,Y0(void 0));return}if(dx(Ar))if(Qe>sr){qt(ve,Y0(void 0));return}else{at.add(ve),await rr(Pn,Ar,!1,{preventScrollReset:jt});return}if($f(Ar)){fn(ve,Re,Ar.error);return}Xs(!Ay(Ar),"Unhandled fetcher deferred data"),qt(ve,Y0(Ar.data))}}async function rr(ve,Re,ze,tt){let{submission:gt,fetcherSubmission:pt,preventScrollReset:Lt,replace:jt}=tt===void 0?{}:tt;Re.response.headers.has("X-Remix-Revalidate")&&(Ee=!0);let Nt=Re.response.headers.get("Location");Xs(Nt,"Expected a Location header on the redirect Response"),Nt=MV(Nt,new URL(ve.url),f);let rn=oS(Y.location,Nt,{_isRedirect:!0});if(n){let pr=!1;if(Re.response.headers.has("X-Remix-Reload-Document"))pr=!0;else if(a8.test(Nt)){const Wr=e.history.createURL(Nt);pr=Wr.origin!==t.location.origin||s0(Wr.pathname,f)==null}if(pr){jt?t.location.replace(Nt):t.location.assign(Nt);return}}_e=null;let _n=jt===!0||Re.response.headers.has("X-Remix-Replace")?Lc.Replace:Lc.Push,{formMethod:Pn,formAction:sr,formEncType:Cr}=Y.navigation;!gt&&!pt&&Pn&&sr&&Cr&&(gt=QV(Y.navigation));let Ar=gt||pt;if(t0e.has(Re.response.status)&&Ar&&MA(Ar.formMethod))await hn(_n,rn,{submission:ml({},Ar,{formAction:Nt}),preventScrollReset:Lt||pe,enableViewTransition:ze?ye:void 0});else{let pr=SM(rn,gt);await hn(_n,rn,{overrideNavigation:pr,fetcherSubmission:pt,preventScrollReset:Lt||pe,enableViewTransition:ze?ye:void 0})}}async function Gt(ve,Re,ze,tt,gt,pt){let Lt,jt={};try{Lt=await c0e(g,ve,Re,ze,tt,gt,pt,a,s)}catch(Nt){return tt.forEach(rn=>{jt[rn.route.id]={type:ha.error,error:Nt}}),jt}for(let[Nt,rn]of Object.entries(Lt))if(A0e(rn)){let _n=rn.result;jt[Nt]={type:ha.redirect,response:h0e(_n,ze,Nt,gt,f,b.v7_relativeSplatPath)}}else jt[Nt]=await d0e(rn);return jt}async function Rn(ve,Re,ze,tt,gt){let pt=ve.matches,Lt=Gt("loader",ve,gt,ze,Re,null),jt=Promise.all(tt.map(async _n=>{if(_n.matches&&_n.match&&_n.controller){let sr=(await Gt("loader",ve,W_(e.history,_n.path,_n.controller.signal),[_n.match],_n.matches,_n.key))[_n.match.route.id];return{[_n.key]:sr}}else return Promise.resolve({[_n.key]:{type:ha.error,error:Vh(404,{pathname:_n.path})}})})),Nt=await Lt,rn=(await jt).reduce((_n,Pn)=>Object.assign(_n,Pn),{});return await Promise.all([y0e(Re,Nt,gt.signal,pt,ve.loaderData),v0e(Re,rn,tt)]),{loaderResults:Nt,fetcherResults:rn}}function wt(){Ee=!0,Ne.push(...hs()),we.forEach((ve,Re)=>{Je.has(Re)&&Ge.add(Re),Ln(Re)})}function qt(ve,Re,ze){ze===void 0&&(ze={}),Y.fetchers.set(ve,Re),Ht({fetchers:new Map(Y.fetchers)},{flushSync:(ze&&ze.flushSync)===!0})}function fn(ve,Re,ze,tt){tt===void 0&&(tt={});let gt=nx(Y.matches,Re);Yt(ve),Ht({errors:{[gt.route.id]:ze},fetchers:new Map(Y.fetchers)},{flushSync:(tt&&tt.flushSync)===!0})}function Un(ve){return b.v7_fetcherPersist&&(me.set(ve,(me.get(ve)||0)+1),Ze.has(ve)&&Ze.delete(ve)),Y.fetchers.get(ve)||n0e}function Yt(ve){let Re=Y.fetchers.get(ve);Je.has(ve)&&!(Re&&Re.state==="loading"&&xe.has(ve))&&Ln(ve),we.delete(ve),xe.delete(ve),at.delete(ve),Ze.delete(ve),Ge.delete(ve),Y.fetchers.delete(ve)}function cn(ve){if(b.v7_fetcherPersist){let Re=(me.get(ve)||0)-1;Re<=0?(me.delete(ve),Ze.add(ve)):me.set(ve,Re)}else Yt(ve);Ht({fetchers:new Map(Y.fetchers)})}function Ln(ve){let Re=Je.get(ve);Re&&(Re.abort(),Je.delete(ve))}function Hn(ve){for(let Re of ve){let ze=Un(Re),tt=Y0(ze.data);Y.fetchers.set(Re,tt)}}function _r(){let ve=[],Re=!1;for(let ze of at){let tt=Y.fetchers.get(ze);Xs(tt,"Expected fetcher: "+ze),tt.state==="loading"&&(at.delete(ze),ve.push(ze),Re=!0)}return Hn(ve),Re}function fr(ve){let Re=[];for(let[ze,tt]of xe)if(tt<ve){let gt=Y.fetchers.get(ze);Xs(gt,"Expected fetcher: "+ze),gt.state==="loading"&&(Ln(ze),xe.delete(ze),Re.push(ze))}return Hn(Re),Re.length>0}function xr(ve,Re){let ze=Y.blockers.get(ve)||m2;return vt.get(ve)!==Re&&vt.set(ve,Re),ze}function bi(ve){Y.blockers.delete(ve),vt.delete(ve)}function Vn(ve,Re){let ze=Y.blockers.get(ve)||m2;Xs(ze.state==="unblocked"&&Re.state==="blocked"||ze.state==="blocked"&&Re.state==="blocked"||ze.state==="blocked"&&Re.state==="proceeding"||ze.state==="blocked"&&Re.state==="unblocked"||ze.state==="proceeding"&&Re.state==="unblocked","Invalid blocker state transition: "+ze.state+" -> "+Re.state);let tt=new Map(Y.blockers);tt.set(ve,Re),Ht({blockers:tt})}function Es(ve){let{currentLocation:Re,nextLocation:ze,historyAction:tt}=ve;if(vt.size===0)return;vt.size>1&&yw(!1,"A router only supports one blocker at a time");let gt=Array.from(vt.entries()),[pt,Lt]=gt[gt.length-1],jt=Y.blockers.get(pt);if(!(jt&&jt.state==="proceeding")&&Lt({currentLocation:Re,nextLocation:ze,historyAction:tt}))return pt}function ki(ve){let Re=Vh(404,{pathname:ve}),ze=i||c,{matches:tt,route:gt}=UV(ze);return hs(),{notFoundMatches:tt,route:gt,error:Re}}function hs(ve){let Re=[];return ot.forEach((ze,tt)=>{(!ve||ve(tt))&&(ze.cancel(),Re.push(tt),ot.delete(tt))}),Re}function mi(ve,Re,ze){if(U=ve,W=Re,N=ze||null,!L&&Y.navigation===CM){L=!0;let tt=Ir(Y.location,Y.matches);tt!=null&&Ht({restoreScrollPosition:tt})}return()=>{U=null,W=null,N=null}}function br(ve,Re){return N&&N(ve,Re.map(tt=>kge(tt,Y.loaderData)))||ve.key}function gr(ve,Re){if(U&&W){let ze=br(ve,Re);U[ze]=W()}}function Ir(ve,Re){if(U){let ze=br(ve,Re),tt=U[ze];if(typeof tt=="number")return tt}return null}function Kr(ve,Re,ze){if(y)if(ve){if(Object.keys(ve[0].params).length>0)return{active:!0,matches:RT(Re,ze,f,!0)}}else return{active:!0,matches:RT(Re,ze,f,!0)||[]};return{active:!1,matches:null}}async function Mt(ve,Re,ze){if(!y)return{type:"success",matches:ve};let tt=ve;for(;;){let gt=i==null,pt=i||c,Lt=a;try{await y({path:Re,matches:tt,patch:(rn,_n)=>{ze.aborted||LV(rn,_n,pt,Lt,s)}})}catch(rn){return{type:"error",error:rn,partialMatches:tt}}finally{gt&&!ze.aborted&&(c=[...c])}if(ze.aborted)return{type:"aborted"};let jt=tx(pt,Re,f);if(jt)return{type:"success",matches:jt};let Nt=RT(pt,Re,f,!0);if(!Nt||tt.length===Nt.length&&tt.every((rn,_n)=>rn.route.id===Nt[_n].route.id))return{type:"success",matches:null};tt=Nt}}function je(ve){a={},i=WI(ve,s,void 0,a)}function De(ve,Re){let ze=i==null;LV(ve,Re,i||c,a,s),ze&&(c=[...c],Ht({}))}return ne={get basename(){return f},get future(){return b},get state(){return Y},get routes(){return c},get window(){return t},initialize:Ot,subscribe:Me,enableScrollRestoration:mi,navigate:pn,fetch:xn,revalidate:Dt,createHref:ve=>e.history.createHref(ve),encodeLocation:ve=>e.history.encodeLocation(ve),getFetcher:Un,deleteFetcher:cn,dispose:kt,getBlocker:xr,deleteBlocker:bi,patchRoutes:De,_internalFetchControllers:Je,_internalActiveDeferreds:ot,_internalSetRoutes:je},ne}function s0e(e){return e!=null&&("formData"in e&&e.formData!=null||"body"in e&&e.body!==void 0)}function AO(e,t,n,r,s,a,c,i){let f,g;if(c){f=[];for(let b of t)if(f.push(b),b.route.id===c){g=b;break}}else f=t,g=t[t.length-1];let y=o8(s||".",s8(f,a),s0(e.pathname,n)||e.pathname,i==="path");if(s==null&&(y.search=e.search,y.hash=e.hash),(s==null||s===""||s===".")&&g){let b=c8(y.search);if(g.route.index&&!b)y.search=y.search?y.search.replace(/^\?/,"?index&"):"?index";else if(!g.route.index&&b){let T=new URLSearchParams(y.search),S=T.getAll("index");T.delete("index"),S.filter(N=>N).forEach(N=>T.append("index",N));let U=T.toString();y.search=U?"?"+U:""}}return r&&n!=="/"&&(y.pathname=y.pathname==="/"?n:Wg([n,y.pathname])),Rx(y)}function jV(e,t,n,r){if(!r||!s0e(r))return{path:n};if(r.formMethod&&!g0e(r.formMethod))return{path:n,error:Vh(405,{method:r.formMethod})};let s=()=>({path:n,error:Vh(400,{type:"invalid-body"})}),a=r.formMethod||"get",c=e?a.toUpperCase():a.toLowerCase(),i=une(n);if(r.body!==void 0){if(r.formEncType==="text/plain"){if(!MA(c))return s();let T=typeof r.body=="string"?r.body:r.body instanceof FormData||r.body instanceof URLSearchParams?Array.from(r.body.entries()).reduce((S,U)=>{let[N,W]=U;return""+S+N+"="+W+`
`},""):String(r.body);return{path:n,submission:{formMethod:c,formAction:i,formEncType:r.formEncType,formData:void 0,json:void 0,text:T}}}else if(r.formEncType==="application/json"){if(!MA(c))return s();try{let T=typeof r.body=="string"?JSON.parse(r.body):r.body;return{path:n,submission:{formMethod:c,formAction:i,formEncType:r.formEncType,formData:void 0,json:T,text:void 0}}}catch{return s()}}}Xs(typeof FormData=="function","FormData is not available in this environment");let f,g;if(r.formData)f=gO(r.formData),g=r.formData;else if(r.body instanceof FormData)f=gO(r.body),g=r.body;else if(r.body instanceof URLSearchParams)f=r.body,g=NV(f);else if(r.body==null)f=new URLSearchParams,g=new FormData;else try{f=new URLSearchParams(r.body),g=NV(f)}catch{return s()}let y={formMethod:c,formAction:i,formEncType:r&&r.formEncType||"application/x-www-form-urlencoded",formData:g,json:void 0,text:void 0};if(MA(y.formMethod))return{path:n,submission:y};let b=nv(n);return t&&b.search&&c8(b.search)&&f.append("index",""),b.search="?"+f,{path:Rx(b),submission:y}}function FV(e,t,n){n===void 0&&(n=!1);let r=e.findIndex(s=>s.route.id===t);return r>=0?e.slice(0,n?r+1:r):e}function PV(e,t,n,r,s,a,c,i,f,g,y,b,T,S,U,N){let W=N?$f(N[1])?N[1].error:N[1].data:void 0,L=e.createURL(t.location),Q=e.createURL(s),V=n;a&&t.errors?V=FV(n,Object.keys(t.errors)[0],!0):N&&$f(N[1])&&(V=FV(n,N[0]));let Z=N?N[1].statusCode:void 0,ne=c&&Z&&Z>=400,Y=V.filter((pe,_e)=>{let{route:ye}=pe;if(ye.lazy)return!0;if(ye.loader==null)return!1;if(a)return mO(ye,t.loaderData,t.errors);if(o0e(t.loaderData,t.matches[_e],pe)||f.some(Te=>Te===pe.route.id))return!0;let he=t.matches[_e],be=pe;return kV(pe,ml({currentUrl:L,currentParams:he.params,nextUrl:Q,nextParams:be.params},r,{actionResult:W,actionStatus:Z,defaultShouldRevalidate:ne?!1:i||L.pathname+L.search===Q.pathname+Q.search||L.search!==Q.search||lne(he,be)}))}),le=[];return b.forEach((pe,_e)=>{if(a||!n.some(Ee=>Ee.route.id===pe.routeId)||y.has(_e))return;let ye=tx(S,pe.path,U);if(!ye){le.push({key:_e,routeId:pe.routeId,path:pe.path,matches:null,match:null,controller:null});return}let he=t.fetchers.get(_e),be=K2(ye,pe.path),Te=!1;T.has(_e)?Te=!1:g.has(_e)?(g.delete(_e),Te=!0):he&&he.state!=="idle"&&he.data===void 0?Te=i:Te=kV(be,ml({currentUrl:L,currentParams:t.matches[t.matches.length-1].params,nextUrl:Q,nextParams:n[n.length-1].params},r,{actionResult:W,actionStatus:Z,defaultShouldRevalidate:ne?!1:i})),Te&&le.push({key:_e,routeId:pe.routeId,path:pe.path,matches:ye,match:be,controller:new AbortController})}),[Y,le]}function mO(e,t,n){if(e.lazy)return!0;if(!e.loader)return!1;let r=t!=null&&t[e.id]!==void 0,s=n!=null&&n[e.id]!==void 0;return!r&&s?!1:typeof e.loader=="function"&&e.loader.hydrate===!0?!0:!r&&!s}function o0e(e,t,n){let r=!t||n.route.id!==t.route.id,s=e[n.route.id]===void 0;return r||s}function lne(e,t){let n=e.route.path;return e.pathname!==t.pathname||n!=null&&n.endsWith("*")&&e.params["*"]!==t.params["*"]}function kV(e,t){if(e.route.shouldRevalidate){let n=e.route.shouldRevalidate(t);if(typeof n=="boolean")return n}return t.defaultShouldRevalidate}function LV(e,t,n,r,s){var a;let c;if(e){let g=r[e];Xs(g,"No route found to patch children into: routeId = "+e),g.children||(g.children=[]),c=g.children}else c=n;let i=t.filter(g=>!c.some(y=>cne(g,y))),f=WI(i,s,[e||"_","patch",String(((a=c)==null?void 0:a.length)||"0")],r);c.push(...f)}function cne(e,t){return"id"in e&&"id"in t&&e.id===t.id?!0:e.index===t.index&&e.path===t.path&&e.caseSensitive===t.caseSensitive?(!e.children||e.children.length===0)&&(!t.children||t.children.length===0)?!0:e.children.every((n,r)=>{var s;return(s=t.children)==null?void 0:s.some(a=>cne(n,a))}):!1}async function a0e(e,t,n){if(!e.lazy)return;let r=await e.lazy();if(!e.lazy)return;let s=n[e.id];Xs(s,"No route found in manifest");let a={};for(let c in r){let f=s[c]!==void 0&&c!=="hasErrorBoundary";yw(!f,'Route "'+s.id+'" has a static property "'+c+'" defined but its lazy function is also returning a value for this property. '+('The lazy route property "'+c+'" will be ignored.')),!f&&!Fge.has(c)&&(a[c]=r[c])}Object.assign(s,a),Object.assign(s,ml({},t(s),{lazy:void 0}))}async function l0e(e){let{matches:t}=e,n=t.filter(s=>s.shouldLoad);return(await Promise.all(n.map(s=>s.resolve()))).reduce((s,a,c)=>Object.assign(s,{[n[c].route.id]:a}),{})}async function c0e(e,t,n,r,s,a,c,i,f,g){let y=a.map(S=>S.route.lazy?a0e(S.route,f,i):void 0),b=a.map((S,U)=>{let N=y[U],W=s.some(Q=>Q.route.id===S.route.id);return ml({},S,{shouldLoad:W,resolve:async Q=>(Q&&r.method==="GET"&&(S.route.lazy||S.route.loader)&&(W=!0),W?u0e(t,r,S,N,Q,g):Promise.resolve({type:ha.data,result:void 0}))})}),T=await e({matches:b,request:r,params:a[0].params,fetcherKey:c,context:g});try{await Promise.all(y)}catch{}return T}async function u0e(e,t,n,r,s,a){let c,i,f=g=>{let y,b=new Promise((U,N)=>y=N);i=()=>y(),t.signal.addEventListener("abort",i);let T=U=>typeof g!="function"?Promise.reject(new Error("You cannot call the handler for a route which defines a boolean "+('"'+e+'" [routeId: '+n.route.id+"]"))):g({request:t,params:n.params,context:a},...U!==void 0?[U]:[]),S=(async()=>{try{return{type:"data",result:await(s?s(N=>T(N)):T())}}catch(U){return{type:"error",result:U}}})();return Promise.race([S,b])};try{let g=n.route[e];if(r)if(g){let y,[b]=await Promise.all([f(g).catch(T=>{y=T}),r]);if(y!==void 0)throw y;c=b}else if(await r,g=n.route[e],g)c=await f(g);else if(e==="action"){let y=new URL(t.url),b=y.pathname+y.search;throw Vh(405,{method:t.method,pathname:b,routeId:n.route.id})}else return{type:ha.data,result:void 0};else if(g)c=await f(g);else{let y=new URL(t.url),b=y.pathname+y.search;throw Vh(404,{pathname:b})}Xs(c.result!==void 0,"You defined "+(e==="action"?"an action":"a loader")+" for route "+('"'+n.route.id+"\" but didn't return anything from your `"+e+"` ")+"function. Please return a value or `null`.")}catch(g){return{type:ha.error,result:g}}finally{i&&t.signal.removeEventListener("abort",i)}return c}async function d0e(e){let{result:t,type:n}=e;if(dne(t)){let g;try{let y=t.headers.get("Content-Type");y&&/\bapplication\/json\b/.test(y)?t.body==null?g=null:g=await t.json():g=await t.text()}catch(y){return{type:ha.error,error:y}}return n===ha.error?{type:ha.error,error:new ZI(t.status,t.statusText,g),statusCode:t.status,headers:t.headers}:{type:ha.data,data:g,statusCode:t.status,headers:t.headers}}if(n===ha.error){if(zV(t)){var r;if(t.data instanceof Error){var s;return{type:ha.error,error:t.data,statusCode:(s=t.init)==null?void 0:s.status}}t=new ZI(((r=t.init)==null?void 0:r.status)||500,void 0,t.data)}return{type:ha.error,error:t,statusCode:DF(t)?t.status:void 0}}if(m0e(t)){var a,c;return{type:ha.deferred,deferredData:t,statusCode:(a=t.init)==null?void 0:a.status,headers:((c=t.init)==null?void 0:c.headers)&&new Headers(t.init.headers)}}if(zV(t)){var i,f;return{type:ha.data,data:t.data,statusCode:(i=t.init)==null?void 0:i.status,headers:(f=t.init)!=null&&f.headers?new Headers(t.init.headers):void 0}}return{type:ha.data,data:t}}function h0e(e,t,n,r,s,a){let c=e.headers.get("Location");if(Xs(c,"Redirects returned/thrown from loaders/actions must have a Location header"),!a8.test(c)){let i=r.slice(0,r.findIndex(f=>f.route.id===n)+1);c=AO(new URL(t.url),i,s,!0,c,a),e.headers.set("Location",c)}return e}function MV(e,t,n){if(a8.test(e)){let r=e,s=r.startsWith("//")?new URL(t.protocol+r):new URL(r),a=s0(s.pathname,n)!=null;if(s.origin===t.origin&&a)return s.pathname+s.search+s.hash}return e}function W_(e,t,n,r){let s=e.createURL(une(t)).toString(),a={signal:n};if(r&&MA(r.formMethod)){let{formMethod:c,formEncType:i}=r;a.method=c.toUpperCase(),i==="application/json"?(a.headers=new Headers({"Content-Type":i}),a.body=JSON.stringify(r.json)):i==="text/plain"?a.body=r.text:i==="application/x-www-form-urlencoded"&&r.formData?a.body=gO(r.formData):a.body=r.formData}return new Request(s,a)}function gO(e){let t=new URLSearchParams;for(let[n,r]of e.entries())t.append(n,typeof r=="string"?r:r.name);return t}function NV(e){let t=new FormData;for(let[n,r]of e.entries())t.append(n,r);return t}function f0e(e,t,n,r,s){let a={},c=null,i,f=!1,g={},y=n&&$f(n[1])?n[1].error:void 0;return e.forEach(b=>{if(!(b.route.id in t))return;let T=b.route.id,S=t[T];if(Xs(!dx(S),"Cannot handle redirect results in processLoaderData"),$f(S)){let U=S.error;y!==void 0&&(U=y,y=void 0),c=c||{};{let N=nx(e,T);c[N.route.id]==null&&(c[N.route.id]=U)}a[T]=void 0,f||(f=!0,i=DF(S.error)?S.error.status:500),S.headers&&(g[T]=S.headers)}else Ay(S)?(r.set(T,S.deferredData),a[T]=S.deferredData.data,S.statusCode!=null&&S.statusCode!==200&&!f&&(i=S.statusCode),S.headers&&(g[T]=S.headers)):(a[T]=S.data,S.statusCode&&S.statusCode!==200&&!f&&(i=S.statusCode),S.headers&&(g[T]=S.headers))}),y!==void 0&&n&&(c={[n[0]]:y},a[n[0]]=void 0),{loaderData:a,errors:c,statusCode:i||200,loaderHeaders:g}}function RV(e,t,n,r,s,a,c){let{loaderData:i,errors:f}=f0e(t,n,r,c);return s.forEach(g=>{let{key:y,match:b,controller:T}=g,S=a[y];if(Xs(S,"Did not find corresponding fetcher result"),!(T&&T.signal.aborted))if($f(S)){let U=nx(e.matches,b==null?void 0:b.route.id);f&&f[U.route.id]||(f=ml({},f,{[U.route.id]:S.error})),e.fetchers.delete(y)}else if(dx(S))Xs(!1,"Unhandled fetcher revalidation redirect");else if(Ay(S))Xs(!1,"Unhandled fetcher deferred data");else{let U=Y0(S.data);e.fetchers.set(y,U)}}),{loaderData:i,errors:f}}function OV(e,t,n,r){let s=ml({},t);for(let a of n){let c=a.route.id;if(t.hasOwnProperty(c)?t[c]!==void 0&&(s[c]=t[c]):e[c]!==void 0&&a.route.loader&&(s[c]=e[c]),r&&r.hasOwnProperty(c))break}return s}function DV(e){return e?$f(e[1])?{actionData:{}}:{actionData:{[e[0]]:e[1].data}}:{}}function nx(e,t){return(t?e.slice(0,e.findIndex(r=>r.route.id===t)+1):[...e]).reverse().find(r=>r.route.hasErrorBoundary===!0)||e[0]}function UV(e){let t=e.length===1?e[0]:e.find(n=>n.index||!n.path||n.path==="/")||{id:"__shim-error-route__"};return{matches:[{params:{},pathname:"",pathnameBase:"",route:t}],route:t}}function Vh(e,t){let{pathname:n,routeId:r,method:s,type:a,message:c}=t===void 0?{}:t,i="Unknown Server Error",f="Unknown @remix-run/router error";return e===400?(i="Bad Request",s&&n&&r?f="You made a "+s+' request to "'+n+'" but '+('did not provide a `loader` for route "'+r+'", ')+"so there is no way to handle the request.":a==="defer-action"?f="defer() is not supported in actions":a==="invalid-body"&&(f="Unable to encode submission body")):e===403?(i="Forbidden",f='Route "'+r+'" does not match URL "'+n+'"'):e===404?(i="Not Found",f='No route matches URL "'+n+'"'):e===405&&(i="Method Not Allowed",s&&n&&r?f="You made a "+s.toUpperCase()+' request to "'+n+'" but '+('did not provide an `action` for route "'+r+'", ')+"so there is no way to handle the request.":s&&(f='Invalid request method "'+s.toUpperCase()+'"')),new ZI(e||500,i,new Error(f),!0)}function h3(e){let t=Object.entries(e);for(let n=t.length-1;n>=0;n--){let[r,s]=t[n];if(dx(s))return{key:r,result:s}}}function une(e){let t=typeof e=="string"?nv(e):e;return Rx(ml({},t,{hash:""}))}function p0e(e,t){return e.pathname!==t.pathname||e.search!==t.search?!1:e.hash===""?t.hash!=="":e.hash===t.hash?!0:t.hash!==""}function A0e(e){return dne(e.result)&&e0e.has(e.result.status)}function Ay(e){return e.type===ha.deferred}function $f(e){return e.type===ha.error}function dx(e){return(e&&e.type)===ha.redirect}function zV(e){return typeof e=="object"&&e!=null&&"type"in e&&"data"in e&&"init"in e&&e.type==="DataWithResponseInit"}function m0e(e){let t=e;return t&&typeof t=="object"&&typeof t.data=="object"&&typeof t.subscribe=="function"&&typeof t.cancel=="function"&&typeof t.resolveData=="function"}function dne(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.headers=="object"&&typeof e.body<"u"}function g0e(e){return Jge.has(e.toLowerCase())}function MA(e){return Xge.has(e.toLowerCase())}async function y0e(e,t,n,r,s){let a=Object.entries(t);for(let c=0;c<a.length;c++){let[i,f]=a[c],g=e.find(T=>(T==null?void 0:T.route.id)===i);if(!g)continue;let y=r.find(T=>T.route.id===g.route.id),b=y!=null&&!lne(y,g)&&(s&&s[g.route.id])!==void 0;Ay(f)&&b&&await l8(f,n,!1).then(T=>{T&&(t[i]=T)})}}async function v0e(e,t,n){for(let r=0;r<n.length;r++){let{key:s,routeId:a,controller:c}=n[r],i=t[s];e.find(g=>(g==null?void 0:g.route.id)===a)&&Ay(i)&&(Xs(c,"Expected an AbortController for revalidating fetcher deferred result"),await l8(i,c.signal,!0).then(g=>{g&&(t[s]=g)}))}}async function l8(e,t,n){if(n===void 0&&(n=!1),!await e.deferredData.resolveData(t)){if(n)try{return{type:ha.data,data:e.deferredData.unwrappedData}}catch(s){return{type:ha.error,error:s}}return{type:ha.data,data:e.deferredData.data}}}function c8(e){return new URLSearchParams(e).getAll("index").some(t=>t==="")}function K2(e,t){let n=typeof t=="string"?nv(t).search:t.search;if(e[e.length-1].route.index&&c8(n||""))return e[e.length-1];let r=sne(e);return r[r.length-1]}function QV(e){let{formMethod:t,formAction:n,formEncType:r,text:s,formData:a,json:c}=e;if(!(!t||!n||!r)){if(s!=null)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:void 0,text:s};if(a!=null)return{formMethod:t,formAction:n,formEncType:r,formData:a,json:void 0,text:void 0};if(c!==void 0)return{formMethod:t,formAction:n,formEncType:r,formData:void 0,json:c,text:void 0}}}function SM(e,t){return t?{state:"loading",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}:{state:"loading",location:e,formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0}}function x0e(e,t){return{state:"submitting",location:e,formMethod:t.formMethod,formAction:t.formAction,formEncType:t.formEncType,formData:t.formData,json:t.json,text:t.text}}function g2(e,t){return e?{state:"loading",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t}:{state:"loading",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:t}}function _0e(e,t){return{state:"submitting",formMethod:e.formMethod,formAction:e.formAction,formEncType:e.formEncType,formData:e.formData,json:e.json,text:e.text,data:t?t.data:void 0}}function Y0(e){return{state:"idle",formMethod:void 0,formAction:void 0,formEncType:void 0,formData:void 0,json:void 0,text:void 0,data:e}}function w0e(e,t){try{let n=e.sessionStorage.getItem(ane);if(n){let r=JSON.parse(n);for(let[s,a]of Object.entries(r||{}))a&&Array.isArray(a)&&t.set(s,new Set(a||[]))}}catch{}}function b0e(e,t){if(t.size>0){let n={};for(let[r,s]of t)n[r]=[...s];try{e.sessionStorage.setItem(ane,JSON.stringify(n))}catch(r){yw(!1,"Failed to save applied view transitions in sessionStorage ("+r+").")}}}/**
 * React Router v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function XI(){return XI=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},XI.apply(this,arguments)}const gB=q.createContext(null),u8=q.createContext(null),rv=q.createContext(null),d8=q.createContext(null),Yx=q.createContext({outlet:null,matches:[],isDataRoute:!1}),hne=q.createContext(null);function C0e(e,t){let{relative:n}=t===void 0?{}:t;yB()||Xs(!1);let{basename:r,navigator:s}=q.useContext(rv),{hash:a,pathname:c,search:i}=UF(e,{relative:n}),f=c;return r!=="/"&&(f=c==="/"?r:Wg([r,c])),s.createHref({pathname:f,search:i,hash:a})}function yB(){return q.useContext(d8)!=null}function nf(){return yB()||Xs(!1),q.useContext(d8).location}function fne(e){q.useContext(rv).static||q.useLayoutEffect(e)}function Mo(){let{isDataRoute:e}=q.useContext(Yx);return e?N0e():S0e()}function S0e(){yB()||Xs(!1);let e=q.useContext(gB),{basename:t,future:n,navigator:r}=q.useContext(rv),{matches:s}=q.useContext(Yx),{pathname:a}=nf(),c=JSON.stringify(s8(s,n.v7_relativeSplatPath)),i=q.useRef(!1);return fne(()=>{i.current=!0}),q.useCallback(function(g,y){if(y===void 0&&(y={}),!i.current)return;if(typeof g=="number"){r.go(g);return}let b=o8(g,JSON.parse(c),a,y.relative==="path");e==null&&t!=="/"&&(b.pathname=b.pathname==="/"?t:Wg([t,b.pathname])),(y.replace?r.replace:r.push)(b,y.state,y)},[t,r,c,a,e])}function UF(e,t){let{relative:n}=t===void 0?{}:t,{future:r}=q.useContext(rv),{matches:s}=q.useContext(Yx),{pathname:a}=nf(),c=JSON.stringify(s8(s,r.v7_relativeSplatPath));return q.useMemo(()=>o8(e,JSON.parse(c),a,n==="path"),[e,c,a,n])}function B0e(e,t,n,r){yB()||Xs(!1);let{navigator:s}=q.useContext(rv),{matches:a}=q.useContext(Yx),c=a[a.length-1],i=c?c.params:{};c&&c.pathname;let f=c?c.pathnameBase:"/";c&&c.route;let g=nf(),y;y=g;let b=y.pathname||"/",T=b;if(f!=="/"){let N=f.replace(/^\//,"").split("/");T="/"+b.replace(/^\//,"").split("/").slice(N.length).join("/")}let S=tx(e,{pathname:T});return F0e(S&&S.map(N=>Object.assign({},N,{params:Object.assign({},i,N.params),pathname:Wg([f,s.encodeLocation?s.encodeLocation(N.pathname).pathname:N.pathname]),pathnameBase:N.pathnameBase==="/"?f:Wg([f,s.encodeLocation?s.encodeLocation(N.pathnameBase).pathname:N.pathnameBase])})),a,n,r)}function E0e(){let e=M0e(),t=DF(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,s={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return q.createElement(q.Fragment,null,q.createElement("h2",null,"Unexpected Application Error!"),q.createElement("h3",{style:{fontStyle:"italic"}},t),n?q.createElement("pre",{style:s},n):null,null)}const T0e=q.createElement(E0e,null);class I0e extends q.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?q.createElement(Yx.Provider,{value:this.props.routeContext},q.createElement(hne.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function j0e(e){let{routeContext:t,match:n,children:r}=e,s=q.useContext(gB);return s&&s.static&&s.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(s.staticContext._deepestRenderedBoundaryId=n.route.id),q.createElement(Yx.Provider,{value:t},r)}function F0e(e,t,n,r){var s;if(t===void 0&&(t=[]),n===void 0&&(n=null),r===void 0&&(r=null),e==null){var a;if(!n)return null;if(n.errors)e=n.matches;else if((a=r)!=null&&a.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let c=e,i=(s=n)==null?void 0:s.errors;if(i!=null){let y=c.findIndex(b=>b.route.id&&(i==null?void 0:i[b.route.id])!==void 0);y>=0||Xs(!1),c=c.slice(0,Math.min(c.length,y+1))}let f=!1,g=-1;if(n&&r&&r.v7_partialHydration)for(let y=0;y<c.length;y++){let b=c[y];if((b.route.HydrateFallback||b.route.hydrateFallbackElement)&&(g=y),b.route.id){let{loaderData:T,errors:S}=n,U=b.route.loader&&T[b.route.id]===void 0&&(!S||S[b.route.id]===void 0);if(b.route.lazy||U){f=!0,g>=0?c=c.slice(0,g+1):c=[c[0]];break}}}return c.reduceRight((y,b,T)=>{let S,U=!1,N=null,W=null;n&&(S=i&&b.route.id?i[b.route.id]:void 0,N=b.route.errorElement||T0e,f&&(g<0&&T===0?(R0e("route-fallback"),U=!0,W=null):g===T&&(U=!0,W=b.route.hydrateFallbackElement||null)));let L=t.concat(c.slice(0,T+1)),Q=()=>{let V;return S?V=N:U?V=W:b.route.Component?V=q.createElement(b.route.Component,null):b.route.element?V=b.route.element:V=y,q.createElement(j0e,{match:b,routeContext:{outlet:y,matches:L,isDataRoute:n!=null},children:V})};return n&&(b.route.ErrorBoundary||b.route.errorElement||T===0)?q.createElement(I0e,{location:n.location,revalidation:n.revalidation,component:N,error:S,children:Q(),routeContext:{outlet:null,matches:L,isDataRoute:!0}}):Q()},null)}var pne=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}(pne||{}),YI=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(YI||{});function P0e(e){let t=q.useContext(gB);return t||Xs(!1),t}function k0e(e){let t=q.useContext(u8);return t||Xs(!1),t}function L0e(e){let t=q.useContext(Yx);return t||Xs(!1),t}function Ane(e){let t=L0e(),n=t.matches[t.matches.length-1];return n.route.id||Xs(!1),n.route.id}function M0e(){var e;let t=q.useContext(hne),n=k0e(YI.UseRouteError),r=Ane(YI.UseRouteError);return t!==void 0?t:(e=n.errors)==null?void 0:e[r]}function N0e(){let{router:e}=P0e(pne.UseNavigateStable),t=Ane(YI.UseNavigateStable),n=q.useRef(!1);return fne(()=>{n.current=!0}),q.useCallback(function(s,a){a===void 0&&(a={}),n.current&&(typeof s=="number"?e.navigate(s):e.navigate(s,XI({fromRouteId:t},a)))},[e,t])}const HV={};function R0e(e,t,n){HV[e]||(HV[e]=!0)}const VV={};function O0e(e,t){VV[t]||(VV[t]=!0,console.warn(t))}const q_=(e,t,n)=>O0e(e,"⚠️ React Router Future Flag Warning: "+t+". "+("You can use the `"+e+"` future flag to opt-in early. ")+("For more information, see "+n+"."));function D0e(e,t){e!=null&&e.v7_startTransition||q_("v7_startTransition","React Router will begin wrapping state updates in `React.startTransition` in v7","https://reactrouter.com/v6/upgrading/future#v7_starttransition"),!(e!=null&&e.v7_relativeSplatPath)&&(!t||!t.v7_relativeSplatPath)&&q_("v7_relativeSplatPath","Relative route resolution within Splat routes is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_relativesplatpath"),t&&(t.v7_fetcherPersist||q_("v7_fetcherPersist","The persistence behavior of fetchers is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_fetcherpersist"),t.v7_normalizeFormMethod||q_("v7_normalizeFormMethod","Casing of `formMethod` fields is being normalized to uppercase in v7","https://reactrouter.com/v6/upgrading/future#v7_normalizeformmethod"),t.v7_partialHydration||q_("v7_partialHydration","`RouterProvider` hydration behavior is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_partialhydration"),t.v7_skipActionErrorRevalidation||q_("v7_skipActionErrorRevalidation","The revalidation behavior after 4xx/5xx `action` responses is changing in v7","https://reactrouter.com/v6/upgrading/future#v7_skipactionerrorrevalidation"))}function U0e(e){let{basename:t="/",children:n=null,location:r,navigationType:s=Lc.Pop,navigator:a,static:c=!1,future:i}=e;yB()&&Xs(!1);let f=t.replace(/^\/*/,"/"),g=q.useMemo(()=>({basename:f,navigator:a,static:c,future:XI({v7_relativeSplatPath:!1},i)}),[f,i,a,c]);typeof r=="string"&&(r=nv(r));let{pathname:y="/",search:b="",hash:T="",state:S=null,key:U="default"}=r,N=q.useMemo(()=>{let W=s0(y,f);return W==null?null:{location:{pathname:W,search:b,hash:T,state:S,key:U},navigationType:s}},[f,y,b,T,S,U,s]);return N==null?null:q.createElement(rv.Provider,{value:g},q.createElement(d8.Provider,{children:n,value:N}))}new Promise(()=>{});function z0e(e){let t={hasErrorBoundary:e.ErrorBoundary!=null||e.errorElement!=null};return e.Component&&Object.assign(t,{element:q.createElement(e.Component),Component:void 0}),e.HydrateFallback&&Object.assign(t,{hydrateFallbackElement:q.createElement(e.HydrateFallback),HydrateFallback:void 0}),e.ErrorBoundary&&Object.assign(t,{errorElement:q.createElement(e.ErrorBoundary),ErrorBoundary:void 0}),t}/**
 * React Router DOM v6.28.0
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function vw(){return vw=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},vw.apply(this,arguments)}function mne(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}function Q0e(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function H0e(e,t){return e.button===0&&(!t||t==="_self")&&!Q0e(e)}function yO(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let r=e[n];return t.concat(Array.isArray(r)?r.map(s=>[n,s]):[[n,r]])},[]))}function V0e(e,t){let n=yO(e);return t&&t.forEach((r,s)=>{n.has(s)||t.getAll(s).forEach(a=>{n.append(s,a)})}),n}const $0e=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],G0e=["aria-current","caseSensitive","className","end","style","to","viewTransition","children"],K0e="6";try{window.__reactRouterVersion=K0e}catch{}function W0e(e,t){return i0e({basename:void 0,future:vw({},void 0,{v7_prependBasename:!0}),history:Tge({window:void 0}),hydrationData:q0e(),routes:e,mapRouteProperties:z0e,dataStrategy:void 0,patchRoutesOnNavigation:void 0,window:void 0}).initialize()}function q0e(){var e;let t=(e=window)==null?void 0:e.__staticRouterHydrationData;return t&&t.errors&&(t=vw({},t,{errors:Z0e(t.errors)})),t}function Z0e(e){if(!e)return null;let t=Object.entries(e),n={};for(let[r,s]of t)if(s&&s.__type==="RouteErrorResponse")n[r]=new ZI(s.status,s.statusText,s.data,s.internal===!0);else if(s&&s.__type==="Error"){if(s.__subType){let a=window[s.__subType];if(typeof a=="function")try{let c=new a(s.message);c.stack="",n[r]=c}catch{}}if(n[r]==null){let a=new Error(s.message);a.stack="",n[r]=a}}else n[r]=s;return n}const gne=q.createContext({isTransitioning:!1}),X0e=q.createContext(new Map),Y0e="startTransition",$V=oAe[Y0e],J0e="flushSync",GV=yge[J0e];function eye(e){$V?$V(e):e()}function y2(e){GV?GV(e):e()}class tye{constructor(){this.status="pending",this.promise=new Promise((t,n)=>{this.resolve=r=>{this.status==="pending"&&(this.status="resolved",t(r))},this.reject=r=>{this.status==="pending"&&(this.status="rejected",n(r))}})}}function nye(e){let{fallbackElement:t,router:n,future:r}=e,[s,a]=q.useState(n.state),[c,i]=q.useState(),[f,g]=q.useState({isTransitioning:!1}),[y,b]=q.useState(),[T,S]=q.useState(),[U,N]=q.useState(),W=q.useRef(new Map),{v7_startTransition:L}=r||{},Q=q.useCallback(pe=>{L?eye(pe):pe()},[L]),V=q.useCallback((pe,_e)=>{let{deletedFetchers:ye,flushSync:he,viewTransitionOpts:be}=_e;ye.forEach(Ee=>W.current.delete(Ee)),pe.fetchers.forEach((Ee,Ne)=>{Ee.data!==void 0&&W.current.set(Ne,Ee.data)});let Te=n.window==null||n.window.document==null||typeof n.window.document.startViewTransition!="function";if(!be||Te){he?y2(()=>a(pe)):Q(()=>a(pe));return}if(he){y2(()=>{T&&(y&&y.resolve(),T.skipTransition()),g({isTransitioning:!0,flushSync:!0,currentLocation:be.currentLocation,nextLocation:be.nextLocation})});let Ee=n.window.document.startViewTransition(()=>{y2(()=>a(pe))});Ee.finished.finally(()=>{y2(()=>{b(void 0),S(void 0),i(void 0),g({isTransitioning:!1})})}),y2(()=>S(Ee));return}T?(y&&y.resolve(),T.skipTransition(),N({state:pe,currentLocation:be.currentLocation,nextLocation:be.nextLocation})):(i(pe),g({isTransitioning:!0,flushSync:!1,currentLocation:be.currentLocation,nextLocation:be.nextLocation}))},[n.window,T,y,W,Q]);q.useLayoutEffect(()=>n.subscribe(V),[n,V]),q.useEffect(()=>{f.isTransitioning&&!f.flushSync&&b(new tye)},[f]),q.useEffect(()=>{if(y&&c&&n.window){let pe=c,_e=y.promise,ye=n.window.document.startViewTransition(async()=>{Q(()=>a(pe)),await _e});ye.finished.finally(()=>{b(void 0),S(void 0),i(void 0),g({isTransitioning:!1})}),S(ye)}},[Q,c,y,n.window]),q.useEffect(()=>{y&&c&&s.location.key===c.location.key&&y.resolve()},[y,T,s.location,c]),q.useEffect(()=>{!f.isTransitioning&&U&&(i(U.state),g({isTransitioning:!0,flushSync:!1,currentLocation:U.currentLocation,nextLocation:U.nextLocation}),N(void 0))},[f.isTransitioning,U]),q.useEffect(()=>{},[]);let Z=q.useMemo(()=>({createHref:n.createHref,encodeLocation:n.encodeLocation,go:pe=>n.navigate(pe),push:(pe,_e,ye)=>n.navigate(pe,{state:_e,preventScrollReset:ye==null?void 0:ye.preventScrollReset}),replace:(pe,_e,ye)=>n.navigate(pe,{replace:!0,state:_e,preventScrollReset:ye==null?void 0:ye.preventScrollReset})}),[n]),ne=n.basename||"/",Y=q.useMemo(()=>({router:n,navigator:Z,static:!1,basename:ne}),[n,Z,ne]),le=q.useMemo(()=>({v7_relativeSplatPath:n.future.v7_relativeSplatPath}),[n.future.v7_relativeSplatPath]);return q.useEffect(()=>D0e(r,n.future),[r,n.future]),q.createElement(q.Fragment,null,q.createElement(gB.Provider,{value:Y},q.createElement(u8.Provider,{value:s},q.createElement(X0e.Provider,{value:W.current},q.createElement(gne.Provider,{value:f},q.createElement(U0e,{basename:ne,location:s.location,navigationType:s.historyAction,navigator:Z,future:le},s.initialized||n.future.v7_partialHydration?q.createElement(rye,{routes:n.routes,future:n.future,state:s}):t))))),null)}const rye=q.memo(iye);function iye(e){let{routes:t,future:n,state:r}=e;return B0e(t,void 0,r,n)}const sye=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",oye=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,aye=q.forwardRef(function(t,n){let{onClick:r,relative:s,reloadDocument:a,replace:c,state:i,target:f,to:g,preventScrollReset:y,viewTransition:b}=t,T=mne(t,$0e),{basename:S}=q.useContext(rv),U,N=!1;if(typeof g=="string"&&oye.test(g)&&(U=g,sye))try{let V=new URL(window.location.href),Z=g.startsWith("//")?new URL(V.protocol+g):new URL(g),ne=s0(Z.pathname,S);Z.origin===V.origin&&ne!=null?g=ne+Z.search+Z.hash:N=!0}catch{}let W=C0e(g,{relative:s}),L=cye(g,{replace:c,state:i,target:f,preventScrollReset:y,relative:s,viewTransition:b});function Q(V){r&&r(V),V.defaultPrevented||L(V)}return q.createElement("a",vw({},T,{href:U||W,onClick:N||a?r:Q,ref:n,target:f}))}),ss=q.forwardRef(function(t,n){let{"aria-current":r="page",caseSensitive:s=!1,className:a="",end:c=!1,style:i,to:f,viewTransition:g,children:y}=t,b=mne(t,G0e),T=UF(f,{relative:b.relative}),S=nf(),U=q.useContext(u8),{navigator:N,basename:W}=q.useContext(rv),L=U!=null&&uye(T)&&g===!0,Q=N.encodeLocation?N.encodeLocation(T).pathname:T.pathname,V=S.pathname,Z=U&&U.navigation&&U.navigation.location?U.navigation.location.pathname:null;s||(V=V.toLowerCase(),Z=Z?Z.toLowerCase():null,Q=Q.toLowerCase()),Z&&W&&(Z=s0(Z,W)||Z);const ne=Q!=="/"&&Q.endsWith("/")?Q.length-1:Q.length;let Y=V===Q||!c&&V.startsWith(Q)&&V.charAt(ne)==="/",le=Z!=null&&(Z===Q||!c&&Z.startsWith(Q)&&Z.charAt(Q.length)==="/"),pe={isActive:Y,isPending:le,isTransitioning:L},_e=Y?r:void 0,ye;typeof a=="function"?ye=a(pe):ye=[a,Y?"active":null,le?"pending":null,L?"transitioning":null].filter(Boolean).join(" ");let he=typeof i=="function"?i(pe):i;return q.createElement(aye,vw({},b,{"aria-current":_e,className:ye,ref:n,style:he,to:f,viewTransition:g}),typeof y=="function"?y(pe):y)});var vO;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(vO||(vO={}));var KV;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(KV||(KV={}));function lye(e){let t=q.useContext(gB);return t||Xs(!1),t}function cye(e,t){let{target:n,replace:r,state:s,preventScrollReset:a,relative:c,viewTransition:i}=t===void 0?{}:t,f=Mo(),g=nf(),y=UF(e,{relative:c});return q.useCallback(b=>{if(H0e(b,n)){b.preventDefault();let T=r!==void 0?r:Rx(g)===Rx(y);f(e,{replace:T,state:s,preventScrollReset:a,relative:c,viewTransition:i})}},[g,f,y,r,s,n,e,a,c,i])}function h8(e){let t=q.useRef(yO(e)),n=q.useRef(!1),r=nf(),s=q.useMemo(()=>V0e(r.search,n.current?null:t.current),[r.search]),a=Mo(),c=q.useCallback((i,f)=>{const g=yO(typeof i=="function"?i(s):i);n.current=!0,a("?"+g,f)},[a,s]);return[s,c]}function uye(e,t){t===void 0&&(t={});let n=q.useContext(gne);n==null&&Xs(!1);let{basename:r}=lye(vO.useViewTransitionState),s=UF(e,{relative:t.relative});if(!n.isTransitioning)return!1;let a=s0(n.currentLocation.pathname,r)||n.currentLocation.pathname,c=s0(n.nextLocation.pathname,r)||n.nextLocation.pathname;return qI(s.pathname,c)!=null||qI(s.pathname,a)!=null}const f8=q.createContext({});function p8(e){const t=q.useRef(null);return t.current===null&&(t.current=e()),t.current}const A8=typeof window<"u",yne=A8?q.useLayoutEffect:q.useEffect,zF=q.createContext(null),m8=q.createContext({transformPagePoint:e=>e,isStatic:!1,reducedMotion:"never"});class dye extends q.Component{getSnapshotBeforeUpdate(t){const n=this.props.childRef.current;if(n&&t.isPresent&&!this.props.isPresent){const r=n.offsetParent,s=r instanceof HTMLElement&&r.offsetWidth||0,a=this.props.sizeRef.current;a.height=n.offsetHeight||0,a.width=n.offsetWidth||0,a.top=n.offsetTop,a.left=n.offsetLeft,a.right=s-a.width-a.left}return null}componentDidUpdate(){}render(){return this.props.children}}function hye({children:e,isPresent:t,anchorX:n}){const r=q.useId(),s=q.useRef(null),a=q.useRef({width:0,height:0,top:0,left:0,right:0}),{nonce:c}=q.useContext(m8);return q.useInsertionEffect(()=>{const{width:i,height:f,top:g,left:y,right:b}=a.current;if(t||!s.current||!i||!f)return;const T=n==="left"?`left: ${y}`:`right: ${b}`;s.current.dataset.motionPopId=r;const S=document.createElement("style");return c&&(S.nonce=c),document.head.appendChild(S),S.sheet&&S.sheet.insertRule(`
          [data-motion-pop-id="${r}"] {
            position: absolute !important;
            width: ${i}px !important;
            height: ${f}px !important;
            ${T}px !important;
            top: ${g}px !important;
          }
        `),()=>{document.head.removeChild(S)}},[t]),A.jsx(dye,{isPresent:t,childRef:s,sizeRef:a,children:q.cloneElement(e,{ref:s})})}const fye=({children:e,initial:t,isPresent:n,onExitComplete:r,custom:s,presenceAffectsLayout:a,mode:c,anchorX:i})=>{const f=p8(pye),g=q.useId(),y=q.useCallback(T=>{f.set(T,!0);for(const S of f.values())if(!S)return;r&&r()},[f,r]),b=q.useMemo(()=>({id:g,initial:t,isPresent:n,custom:s,onExitComplete:y,register:T=>(f.set(T,!1),()=>f.delete(T))}),a?[Math.random(),y]:[n,y]);return q.useMemo(()=>{f.forEach((T,S)=>f.set(S,!1))},[n]),q.useEffect(()=>{!n&&!f.size&&r&&r()},[n]),c==="popLayout"&&(e=A.jsx(hye,{isPresent:n,anchorX:i,children:e})),A.jsx(zF.Provider,{value:b,children:e})};function pye(){return new Map}function vne(e=!0){const t=q.useContext(zF);if(t===null)return[!0,null];const{isPresent:n,onExitComplete:r,register:s}=t,a=q.useId();q.useEffect(()=>{if(e)return s(a)},[e]);const c=q.useCallback(()=>e&&r&&r(a),[a,r,e]);return!n&&r?[!1,c]:[!0]}const f3=e=>e.key||"";function WV(e){const t=[];return q.Children.forEach(e,n=>{q.isValidElement(n)&&t.push(n)}),t}const Vu=({children:e,custom:t,initial:n=!0,onExitComplete:r,presenceAffectsLayout:s=!0,mode:a="sync",propagate:c=!1,anchorX:i="left"})=>{const[f,g]=vne(c),y=q.useMemo(()=>WV(e),[e]),b=c&&!f?[]:y.map(f3),T=q.useRef(!0),S=q.useRef(y),U=p8(()=>new Map),[N,W]=q.useState(y),[L,Q]=q.useState(y);yne(()=>{T.current=!1,S.current=y;for(let ne=0;ne<L.length;ne++){const Y=f3(L[ne]);b.includes(Y)?U.delete(Y):U.get(Y)!==!0&&U.set(Y,!1)}},[L,b.length,b.join("-")]);const V=[];if(y!==N){let ne=[...y];for(let Y=0;Y<L.length;Y++){const le=L[Y],pe=f3(le);b.includes(pe)||(ne.splice(Y,0,le),V.push(le))}return a==="wait"&&V.length&&(ne=V),Q(WV(ne)),W(y),null}const{forceRender:Z}=q.useContext(f8);return A.jsx(A.Fragment,{children:L.map(ne=>{const Y=f3(ne),le=c&&!f?!1:y===L||b.includes(Y),pe=()=>{if(U.has(Y))U.set(Y,!0);else return;let _e=!0;U.forEach(ye=>{ye||(_e=!1)}),_e&&(Z==null||Z(),Q(S.current),c&&(g==null||g()),r&&r())};return A.jsx(fye,{isPresent:le,initial:!T.current||n?void 0:!1,custom:t,presenceAffectsLayout:s,mode:a,onExitComplete:le?void 0:pe,anchorX:i,children:ne},Y)})})};function g8(e,t){e.indexOf(t)===-1&&e.push(t)}function y8(e,t){const n=e.indexOf(t);n>-1&&e.splice(n,1)}let xO=()=>{};const _O={skipAnimations:!1,useManualTiming:!1};function v8(e){let t;return()=>(t===void 0&&(t=e()),t)}const Qp=e=>e,aS=(e,t,n)=>{const r=t-e;return r===0?1:(n-e)/r};class x8{constructor(){this.subscriptions=[]}add(t){return g8(this.subscriptions,t),()=>y8(this.subscriptions,t)}notify(t,n,r){const s=this.subscriptions.length;if(s)if(s===1)this.subscriptions[0](t,n,r);else for(let a=0;a<s;a++){const c=this.subscriptions[a];c&&c(t,n,r)}}getSize(){return this.subscriptions.length}clear(){this.subscriptions.length=0}}const Wm=e=>e*1e3,qm=e=>e/1e3;function xne(e,t){return t?e*(1e3/t):0}const Aye=v8(()=>window.ScrollTimeline!==void 0);class mye{constructor(t){this.stop=()=>this.runAll("stop"),this.animations=t.filter(Boolean)}get finished(){return Promise.all(this.animations.map(t=>t.finished))}getAll(t){return this.animations[0][t]}setAll(t,n){for(let r=0;r<this.animations.length;r++)this.animations[r][t]=n}attachTimeline(t,n){const r=this.animations.map(s=>{if(Aye()&&s.attachTimeline)return s.attachTimeline(t);if(typeof n=="function")return n(s)});return()=>{r.forEach((s,a)=>{s&&s(),this.animations[a].stop()})}}get time(){return this.getAll("time")}set time(t){this.setAll("time",t)}get speed(){return this.getAll("speed")}set speed(t){this.setAll("speed",t)}get startTime(){return this.getAll("startTime")}get duration(){let t=0;for(let n=0;n<this.animations.length;n++)t=Math.max(t,this.animations[n].duration);return t}runAll(t){this.animations.forEach(n=>n[t]())}flatten(){this.runAll("flatten")}play(){this.runAll("play")}pause(){this.runAll("pause")}cancel(){this.runAll("cancel")}complete(){this.runAll("complete")}}class gye extends mye{then(t,n){return this.finished.finally(t).then(()=>{})}}const qV={value:null,addProjectionMetrics:null},_8=e=>Array.isArray(e)&&typeof e[0]=="number",yye={};function vye(e,t){const n=v8(e);return()=>yye[t]??n()}const lS=vye(()=>{try{document.createElement("div").animate({opacity:0},{easing:"linear(0, 1)"})}catch{return!1}return!0},"linearEasing"),_ne=(e,t,n=10)=>{let r="";const s=Math.max(Math.round(t/n),2);for(let a=0;a<s;a++)r+=e(a/(s-1))+", ";return`linear(${r.substring(0,r.length-2)})`},W2=([e,t,n,r])=>`cubic-bezier(${e}, ${t}, ${n}, ${r})`,wO={linear:"linear",ease:"ease",easeIn:"ease-in",easeOut:"ease-out",easeInOut:"ease-in-out",circIn:W2([0,.65,.55,1]),circOut:W2([.55,0,1,.45]),backIn:W2([.31,.01,.66,-.59]),backOut:W2([.33,1.53,.69,.99])};function wne(e,t){if(e)return typeof e=="function"&&lS()?_ne(e,t):_8(e)?W2(e):Array.isArray(e)?e.map(n=>wne(n,t)||wO.easeOut):wO[e]}function xye(e,t,n,{delay:r=0,duration:s=300,repeat:a=0,repeatType:c="loop",ease:i="easeInOut",times:f}={},g=void 0){const y={[t]:n};f&&(y.offset=f);const b=wne(i,s);return Array.isArray(b)&&(y.easing=b),e.animate(y,{delay:r,duration:s,easing:Array.isArray(b)?"linear":b,fill:"both",iterations:a+1,direction:c==="reverse"?"alternate":"normal",pseudoElement:g})}function w8(e){return typeof e=="function"&&"applyToOptions"in e}function b8(e,t){return(e==null?void 0:e[t])??(e==null?void 0:e.default)??e}const JI=2e4;function C8(e){let t=0;const n=50;let r=e.next(t);for(;!r.done&&t<JI;)t+=n,r=e.next(t);return t>=JI?1/0:t}function _ye(e,t=100,n){const r=n({...e,keyframes:[0,t]}),s=Math.min(C8(r),JI);return{type:"keyframes",ease:a=>r.next(s*a).value/t,duration:qm(s)}}function bne(e){return!!(typeof e=="function"&&lS()||!e||typeof e=="string"&&(e in wO||lS())||_8(e)||Array.isArray(e)&&e.every(bne))}function ZV(e,t){e.timeline=t,e.onfinish=null}const q2=["read","resolveKeyframes","update","preRender","render","postRender"];function wye(e,t){let n=new Set,r=new Set,s=!1,a=!1;const c=new WeakSet;let i={delta:0,timestamp:0,isProcessing:!1},f=0;function g(b){c.has(b)&&(y.schedule(b),e()),f++,b(i)}const y={schedule:(b,T=!1,S=!1)=>{const N=S&&s?n:r;return T&&c.add(b),N.has(b)||N.add(b),b},cancel:b=>{r.delete(b),c.delete(b)},process:b=>{if(i=b,s){a=!0;return}s=!0,[n,r]=[r,n],n.forEach(g),t&&qV.value&&qV.value.frameloop[t].push(f),f=0,n.clear(),s=!1,a&&(a=!1,y.process(b))}};return y}const bye=40;function Cne(e,t){let n=!1,r=!0;const s={delta:0,timestamp:0,isProcessing:!1},a=()=>n=!0,c=q2.reduce((L,Q)=>(L[Q]=wye(a,t?Q:void 0),L),{}),{read:i,resolveKeyframes:f,update:g,preRender:y,render:b,postRender:T}=c,S=()=>{const L=performance.now();n=!1,s.delta=r?1e3/60:Math.max(Math.min(L-s.timestamp,bye),1),s.timestamp=L,s.isProcessing=!0,i.process(s),f.process(s),g.process(s),y.process(s),b.process(s),T.process(s),s.isProcessing=!1,n&&t&&(r=!1,e(S))},U=()=>{n=!0,r=!0,s.isProcessing||e(S)};return{schedule:q2.reduce((L,Q)=>{const V=c[Q];return L[Q]=(Z,ne=!1,Y=!1)=>(n||U(),V.schedule(Z,ne,Y)),L},{}),cancel:L=>{for(let Q=0;Q<q2.length;Q++)c[q2[Q]].cancel(L)},state:s,steps:c}}const{schedule:Oa,cancel:o0,state:Uu,steps:BM}=Cne(typeof requestAnimationFrame<"u"?requestAnimationFrame:Qp,!0),{schedule:S8,cancel:mut}=Cne(queueMicrotask,!1);let OT;function Cye(){OT=void 0}const Zm={now:()=>(OT===void 0&&Zm.set(Uu.isProcessing||_O.useManualTiming?Uu.timestamp:performance.now()),OT),set:e=>{OT=e,queueMicrotask(Cye)}},IA={x:!1,y:!1};function Sne(){return IA.x||IA.y}function Sye(e){return e==="x"||e==="y"?IA[e]?null:(IA[e]=!0,()=>{IA[e]=!1}):IA.x||IA.y?null:(IA.x=IA.y=!0,()=>{IA.x=IA.y=!1})}function Bne(e,t,n){if(e instanceof EventTarget)return[e];if(typeof e=="string"){const s=document.querySelectorAll(e);return s?Array.from(s):[]}return Array.from(e)}function Ene(e,t){const n=Bne(e),r=new AbortController,s={passive:!0,...t,signal:r.signal};return[n,s,()=>r.abort()]}function XV(e){return!(e.pointerType==="touch"||Sne())}function Bye(e,t,n={}){const[r,s,a]=Ene(e,n),c=i=>{if(!XV(i))return;const{target:f}=i,g=t(f,i);if(typeof g!="function"||!f)return;const y=b=>{XV(b)&&(g(b),f.removeEventListener("pointerleave",y))};f.addEventListener("pointerleave",y,s)};return r.forEach(i=>{i.addEventListener("pointerenter",c,s)}),a}const Tne=(e,t)=>t?e===t?!0:Tne(e,t.parentElement):!1,B8=e=>e.pointerType==="mouse"?typeof e.button!="number"||e.button<=0:e.isPrimary!==!1,Eye=new Set(["BUTTON","INPUT","SELECT","TEXTAREA","A"]);function Tye(e){return Eye.has(e.tagName)||e.tabIndex!==-1}const Z2=new WeakSet;function YV(e){return t=>{t.key==="Enter"&&e(t)}}function EM(e,t){e.dispatchEvent(new PointerEvent("pointer"+t,{isPrimary:!0,bubbles:!0}))}const Iye=(e,t)=>{const n=e.currentTarget;if(!n)return;const r=YV(()=>{if(Z2.has(n))return;EM(n,"down");const s=YV(()=>{EM(n,"up")}),a=()=>EM(n,"cancel");n.addEventListener("keyup",s,t),n.addEventListener("blur",a,t)});n.addEventListener("keydown",r,t),n.addEventListener("blur",()=>n.removeEventListener("keydown",r),t)};function JV(e){return B8(e)&&!Sne()}function jye(e,t,n={}){const[r,s,a]=Ene(e,n),c=i=>{const f=i.currentTarget;if(!JV(i)||Z2.has(f))return;Z2.add(f);const g=t(f,i),y=(S,U)=>{window.removeEventListener("pointerup",b),window.removeEventListener("pointercancel",T),!(!JV(S)||!Z2.has(f))&&(Z2.delete(f),typeof g=="function"&&g(S,{success:U}))},b=S=>{y(S,f===window||f===document||n.useGlobalTarget||Tne(f,S.target))},T=S=>{y(S,!1)};window.addEventListener("pointerup",b,s),window.addEventListener("pointercancel",T,s)};return r.forEach(i=>{(n.useGlobalTarget?window:i).addEventListener("pointerdown",c,s),i instanceof HTMLElement&&(i.addEventListener("focus",g=>Iye(g,s)),!Tye(i)&&!i.hasAttribute("tabindex")&&(i.tabIndex=0))}),a}const e$=30,Fye=e=>!isNaN(parseFloat(e));class Pye{constructor(t,n={}){this.version="12.6.5",this.canTrackVelocity=null,this.events={},this.updateAndNotify=(r,s=!0)=>{const a=Zm.now();this.updatedAt!==a&&this.setPrevFrameValue(),this.prev=this.current,this.setCurrent(r),this.current!==this.prev&&this.events.change&&this.events.change.notify(this.current),s&&this.events.renderRequest&&this.events.renderRequest.notify(this.current)},this.hasAnimated=!1,this.setCurrent(t),this.owner=n.owner}setCurrent(t){this.current=t,this.updatedAt=Zm.now(),this.canTrackVelocity===null&&t!==void 0&&(this.canTrackVelocity=Fye(this.current))}setPrevFrameValue(t=this.current){this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt}onChange(t){return this.on("change",t)}on(t,n){this.events[t]||(this.events[t]=new x8);const r=this.events[t].add(n);return t==="change"?()=>{r(),Oa.read(()=>{this.events.change.getSize()||this.stop()})}:r}clearListeners(){for(const t in this.events)this.events[t].clear()}attach(t,n){this.passiveEffect=t,this.stopPassiveEffect=n}set(t,n=!0){!n||!this.passiveEffect?this.updateAndNotify(t,n):this.passiveEffect(t,this.updateAndNotify)}setWithVelocity(t,n,r){this.set(n),this.prev=void 0,this.prevFrameValue=t,this.prevUpdatedAt=this.updatedAt-r}jump(t,n=!0){this.updateAndNotify(t),this.prev=t,this.prevUpdatedAt=this.prevFrameValue=void 0,n&&this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}get(){return this.current}getPrevious(){return this.prev}getVelocity(){const t=Zm.now();if(!this.canTrackVelocity||this.prevFrameValue===void 0||t-this.updatedAt>e$)return 0;const n=Math.min(this.updatedAt-this.prevUpdatedAt,e$);return xne(parseFloat(this.current)-parseFloat(this.prevFrameValue),n)}start(t){return this.stop(),new Promise(n=>{this.hasAnimated=!0,this.animation=t(n),this.events.animationStart&&this.events.animationStart.notify()}).then(()=>{this.events.animationComplete&&this.events.animationComplete.notify(),this.clearAnimation()})}stop(){this.animation&&(this.animation.stop(),this.events.animationCancel&&this.events.animationCancel.notify()),this.clearAnimation()}isAnimating(){return!!this.animation}clearAnimation(){delete this.animation}destroy(){this.clearListeners(),this.stop(),this.stopPassiveEffect&&this.stopPassiveEffect()}}function cS(e,t){return new Pye(e,t)}q2.reduce((e,t)=>(e[t]=n=>o0(n),e),{});const Ine=q.createContext({strict:!1}),t$={animation:["animate","variants","whileHover","whileTap","exit","whileInView","whileFocus","whileDrag"],exit:["exit"],drag:["drag","dragControls"],focus:["whileFocus"],hover:["whileHover","onHoverStart","onHoverEnd"],tap:["whileTap","onTap","onTapStart","onTapCancel"],pan:["onPan","onPanStart","onPanSessionStart","onPanEnd"],inView:["whileInView","onViewportEnter","onViewportLeave"],layout:["layout","layoutId"]},xw={};for(const e in t$)xw[e]={isEnabled:t=>t$[e].some(n=>!!t[n])};function kye(e){for(const t in e)xw[t]={...xw[t],...e[t]}}const Lye=new Set(["animate","exit","variants","initial","style","values","variants","transition","transformTemplate","custom","inherit","onBeforeLayoutMeasure","onAnimationStart","onAnimationComplete","onUpdate","onDragStart","onDrag","onDragEnd","onMeasureDragConstraints","onDirectionLock","onDragTransitionEnd","_dragX","_dragY","onHoverStart","onHoverEnd","onViewportEnter","onViewportLeave","globalTapTarget","ignoreStrict","viewport"]);function ej(e){return e.startsWith("while")||e.startsWith("drag")&&e!=="draggable"||e.startsWith("layout")||e.startsWith("onTap")||e.startsWith("onPan")||e.startsWith("onLayout")||Lye.has(e)}let jne=e=>!ej(e);function Mye(e){e&&(jne=t=>t.startsWith("on")?!ej(t):e(t))}try{Mye(require("@emotion/is-prop-valid").default)}catch{}function Nye(e,t,n){const r={};for(const s in e)s==="values"&&typeof e.values=="object"||(jne(s)||n===!0&&ej(s)||!t&&!ej(s)||e.draggable&&s.startsWith("onDrag"))&&(r[s]=e[s]);return r}function Rye(e){if(typeof Proxy>"u")return e;const t=new Map,n=(...r)=>e(...r);return new Proxy(n,{get:(r,s)=>s==="create"?e:(t.has(s)||t.set(s,e(s)),t.get(s))})}const QF=q.createContext({});function HF(e){return e!==null&&typeof e=="object"&&typeof e.start=="function"}function uS(e){return typeof e=="string"||Array.isArray(e)}const E8=["animate","whileInView","whileFocus","whileHover","whileTap","whileDrag","exit"],T8=["initial",...E8];function VF(e){return HF(e.animate)||T8.some(t=>uS(e[t]))}function Fne(e){return!!(VF(e)||e.variants)}function Oye(e,t){if(VF(e)){const{initial:n,animate:r}=e;return{initial:n===!1||uS(n)?n:void 0,animate:uS(r)?r:void 0}}return e.inherit!==!1?t:{}}function Dye(e){const{initial:t,animate:n}=Oye(e,q.useContext(QF));return q.useMemo(()=>({initial:t,animate:n}),[n$(t),n$(n)])}function n$(e){return Array.isArray(e)?e.join(" "):e}const Uye=Symbol.for("motionComponentSymbol");function D1(e){return e&&typeof e=="object"&&Object.prototype.hasOwnProperty.call(e,"current")}function zye(e,t,n){return q.useCallback(r=>{r&&e.onMount&&e.onMount(r),t&&(r?t.mount(r):t.unmount()),n&&(typeof n=="function"?n(r):D1(n)&&(n.current=r))},[t])}const I8=e=>e.replace(/([a-z])([A-Z])/gu,"$1-$2").toLowerCase(),Qye="framerAppearId",Pne="data-"+I8(Qye),kne=q.createContext({});function Hye(e,t,n,r,s){var N,W;const{visualElement:a}=q.useContext(QF),c=q.useContext(Ine),i=q.useContext(zF),f=q.useContext(m8).reducedMotion,g=q.useRef(null);r=r||c.renderer,!g.current&&r&&(g.current=r(e,{visualState:t,parent:a,props:n,presenceContext:i,blockInitialAnimation:i?i.initial===!1:!1,reducedMotionConfig:f}));const y=g.current,b=q.useContext(kne);y&&!y.projection&&s&&(y.type==="html"||y.type==="svg")&&Vye(g.current,n,s,b);const T=q.useRef(!1);q.useInsertionEffect(()=>{y&&T.current&&y.update(n,i)});const S=n[Pne],U=q.useRef(!!S&&!((N=window.MotionHandoffIsComplete)!=null&&N.call(window,S))&&((W=window.MotionHasOptimisedAnimation)==null?void 0:W.call(window,S)));return yne(()=>{y&&(T.current=!0,window.MotionIsMounted=!0,y.updateFeatures(),S8.render(y.render),U.current&&y.animationState&&y.animationState.animateChanges())}),q.useEffect(()=>{y&&(!U.current&&y.animationState&&y.animationState.animateChanges(),U.current&&(queueMicrotask(()=>{var L;(L=window.MotionHandoffMarkAsComplete)==null||L.call(window,S)}),U.current=!1))}),y}function Vye(e,t,n,r){const{layoutId:s,layout:a,drag:c,dragConstraints:i,layoutScroll:f,layoutRoot:g}=t;e.projection=new n(e.latestValues,t["data-framer-portal-id"]?void 0:Lne(e.parent)),e.projection.setOptions({layoutId:s,layout:a,alwaysMeasureLayout:!!c||i&&D1(i),visualElement:e,animationType:typeof a=="string"?a:"both",initialPromotionConfig:r,layoutScroll:f,layoutRoot:g})}function Lne(e){if(e)return e.options.allowProjection!==!1?e.projection:Lne(e.parent)}function $ye({preloadedFeatures:e,createVisualElement:t,useRender:n,useVisualState:r,Component:s}){e&&kye(e);function a(i,f){let g;const y={...q.useContext(m8),...i,layoutId:Gye(i)},{isStatic:b}=y,T=Dye(i),S=r(i,b);if(!b&&A8){Kye();const U=Wye(y);g=U.MeasureLayout,T.visualElement=Hye(s,S,y,t,U.ProjectionNode)}return A.jsxs(QF.Provider,{value:T,children:[g&&T.visualElement?A.jsx(g,{visualElement:T.visualElement,...y}):null,n(s,i,zye(S,T.visualElement,f),S,b,T.visualElement)]})}a.displayName=`motion.${typeof s=="string"?s:`create(${s.displayName??s.name??""})`}`;const c=q.forwardRef(a);return c[Uye]=s,c}function Gye({layoutId:e}){const t=q.useContext(f8).id;return t&&e!==void 0?t+"-"+e:e}function Kye(e,t){q.useContext(Ine).strict}function Wye(e){const{drag:t,layout:n}=xw;if(!t&&!n)return{};const r={...t,...n};return{MeasureLayout:t!=null&&t.isEnabled(e)||n!=null&&n.isEnabled(e)?r.MeasureLayout:void 0,ProjectionNode:r.ProjectionNode}}const Mne=e=>t=>typeof t=="string"&&t.startsWith(e),j8=Mne("--"),qye=Mne("var(--"),F8=e=>qye(e)?Zye.test(e.split("/*")[0].trim()):!1,Zye=/var\(--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)$/iu,dS={};function Xye(e){for(const t in e)dS[t]=e[t],j8(t)&&(dS[t].isCSSVariable=!0)}const Gw=["transformPerspective","x","y","z","translateX","translateY","translateZ","scale","scaleX","scaleY","rotate","rotateX","rotateY","rotateZ","skew","skewX","skewY"],Jx=new Set(Gw);function Nne(e,{layout:t,layoutId:n}){return Jx.has(e)||e.startsWith("origin")||(t||n!==void 0)&&(!!dS[e]||e==="opacity")}const jd=e=>!!(e&&e.getVelocity),Rne=(e,t)=>t&&typeof e=="number"?t.transform(e):e,a0=(e,t,n)=>n>t?t:n<e?e:n,Kw={test:e=>typeof e=="number",parse:parseFloat,transform:e=>e},hS={...Kw,transform:e=>a0(0,1,e)},p3={...Kw,default:1},vB=e=>({test:t=>typeof t=="string"&&t.endsWith(e)&&t.split(" ").length===1,parse:parseFloat,transform:t=>`${t}${e}`}),J0=vB("deg"),Xm=vB("%"),ns=vB("px"),Yye=vB("vh"),Jye=vB("vw"),r$={...Xm,parse:e=>Xm.parse(e)/100,transform:e=>Xm.transform(e*100)},eve={borderWidth:ns,borderTopWidth:ns,borderRightWidth:ns,borderBottomWidth:ns,borderLeftWidth:ns,borderRadius:ns,radius:ns,borderTopLeftRadius:ns,borderTopRightRadius:ns,borderBottomRightRadius:ns,borderBottomLeftRadius:ns,width:ns,maxWidth:ns,height:ns,maxHeight:ns,top:ns,right:ns,bottom:ns,left:ns,padding:ns,paddingTop:ns,paddingRight:ns,paddingBottom:ns,paddingLeft:ns,margin:ns,marginTop:ns,marginRight:ns,marginBottom:ns,marginLeft:ns,backgroundPositionX:ns,backgroundPositionY:ns},tve={rotate:J0,rotateX:J0,rotateY:J0,rotateZ:J0,scale:p3,scaleX:p3,scaleY:p3,scaleZ:p3,skew:J0,skewX:J0,skewY:J0,distance:ns,translateX:ns,translateY:ns,translateZ:ns,x:ns,y:ns,z:ns,perspective:ns,transformPerspective:ns,opacity:hS,originX:r$,originY:r$,originZ:ns},i$={...Kw,transform:Math.round},P8={...eve,...tve,zIndex:i$,size:ns,fillOpacity:hS,strokeOpacity:hS,numOctaves:i$},nve={x:"translateX",y:"translateY",z:"translateZ",transformPerspective:"perspective"},rve=Gw.length;function ive(e,t,n){let r="",s=!0;for(let a=0;a<rve;a++){const c=Gw[a],i=e[c];if(i===void 0)continue;let f=!0;if(typeof i=="number"?f=i===(c.startsWith("scale")?1:0):f=parseFloat(i)===0,!f||n){const g=Rne(i,P8[c]);if(!f){s=!1;const y=nve[c]||c;r+=`${y}(${g}) `}n&&(t[c]=g)}}return r=r.trim(),n?r=n(t,s?"":r):s&&(r="none"),r}function k8(e,t,n){const{style:r,vars:s,transformOrigin:a}=e;let c=!1,i=!1;for(const f in t){const g=t[f];if(Jx.has(f)){c=!0;continue}else if(j8(f)){s[f]=g;continue}else{const y=Rne(g,P8[f]);f.startsWith("origin")?(i=!0,a[f]=y):r[f]=y}}if(t.transform||(c||n?r.transform=ive(t,e.transform,n):r.transform&&(r.transform="none")),i){const{originX:f="50%",originY:g="50%",originZ:y=0}=a;r.transformOrigin=`${f} ${g} ${y}`}}const L8=()=>({style:{},transform:{},transformOrigin:{},vars:{}});function One(e,t,n){for(const r in t)!jd(t[r])&&!Nne(r,n)&&(e[r]=t[r])}function sve({transformTemplate:e},t){return q.useMemo(()=>{const n=L8();return k8(n,t,e),Object.assign({},n.vars,n.style)},[t])}function ove(e,t){const n=e.style||{},r={};return One(r,n,e),Object.assign(r,sve(e,t)),r}function ave(e,t){const n={},r=ove(e,t);return e.drag&&e.dragListener!==!1&&(n.draggable=!1,r.userSelect=r.WebkitUserSelect=r.WebkitTouchCallout="none",r.touchAction=e.drag===!0?"none":`pan-${e.drag==="x"?"y":"x"}`),e.tabIndex===void 0&&(e.onTap||e.onTapStart||e.whileTap)&&(n.tabIndex=0),n.style=r,n}const lve=["animate","circle","defs","desc","ellipse","g","image","line","filter","marker","mask","metadata","path","pattern","polygon","polyline","rect","stop","switch","symbol","svg","text","tspan","use","view"];function M8(e){return typeof e!="string"||e.includes("-")?!1:!!(lve.indexOf(e)>-1||/[A-Z]/u.test(e))}const cve={offset:"stroke-dashoffset",array:"stroke-dasharray"},uve={offset:"strokeDashoffset",array:"strokeDasharray"};function dve(e,t,n=1,r=0,s=!0){e.pathLength=1;const a=s?cve:uve;e[a.offset]=ns.transform(-r);const c=ns.transform(t),i=ns.transform(n);e[a.array]=`${c} ${i}`}function s$(e,t,n){return typeof e=="string"?e:ns.transform(t+n*e)}function hve(e,t,n){const r=s$(t,e.x,e.width),s=s$(n,e.y,e.height);return`${r} ${s}`}function N8(e,{attrX:t,attrY:n,attrScale:r,originX:s,originY:a,pathLength:c,pathSpacing:i=1,pathOffset:f=0,...g},y,b){if(k8(e,g,b),y){e.style.viewBox&&(e.attrs.viewBox=e.style.viewBox);return}e.attrs=e.style,e.style={};const{attrs:T,style:S,dimensions:U}=e;T.transform&&(U&&(S.transform=T.transform),delete T.transform),U&&(s!==void 0||a!==void 0||S.transform)&&(S.transformOrigin=hve(U,s!==void 0?s:.5,a!==void 0?a:.5)),t!==void 0&&(T.x=t),n!==void 0&&(T.y=n),r!==void 0&&(T.scale=r),c!==void 0&&dve(T,c,i,f,!1)}const Dne=()=>({...L8(),attrs:{}}),R8=e=>typeof e=="string"&&e.toLowerCase()==="svg";function fve(e,t,n,r){const s=q.useMemo(()=>{const a=Dne();return N8(a,t,R8(r),e.transformTemplate),{...a.attrs,style:{...a.style}}},[t]);if(e.style){const a={};One(a,e.style,e),s.style={...a,...s.style}}return s}function pve(e=!1){return(n,r,s,{latestValues:a},c)=>{const f=(M8(n)?fve:ave)(r,a,c,n),g=Nye(r,typeof n=="string",e),y=n!==q.Fragment?{...g,...f,ref:s}:{},{children:b}=r,T=q.useMemo(()=>jd(b)?b.get():b,[b]);return q.createElement(n,{...y,children:T})}}function o$(e){const t=[{},{}];return e==null||e.values.forEach((n,r)=>{t[0][r]=n.get(),t[1][r]=n.getVelocity()}),t}function O8(e,t,n,r){if(typeof t=="function"){const[s,a]=o$(r);t=t(n!==void 0?n:e.custom,s,a)}if(typeof t=="string"&&(t=e.variants&&e.variants[t]),typeof t=="function"){const[s,a]=o$(r);t=t(n!==void 0?n:e.custom,s,a)}return t}const bO=e=>Array.isArray(e),Ave=e=>!!(e&&typeof e=="object"&&e.mix&&e.toValue),mve=e=>bO(e)?e[e.length-1]||0:e;function DT(e){const t=jd(e)?e.get():e;return Ave(t)?t.toValue():t}function gve({scrapeMotionValuesFromProps:e,createRenderState:t,onUpdate:n},r,s,a){const c={latestValues:yve(r,s,a,e),renderState:t()};return n&&(c.onMount=i=>n({props:r,current:i,...c}),c.onUpdate=i=>n(i)),c}const Une=e=>(t,n)=>{const r=q.useContext(QF),s=q.useContext(zF),a=()=>gve(e,t,r,s);return n?a():p8(a)};function yve(e,t,n,r){const s={},a=r(e,{});for(const T in a)s[T]=DT(a[T]);let{initial:c,animate:i}=e;const f=VF(e),g=Fne(e);t&&g&&!f&&e.inherit!==!1&&(c===void 0&&(c=t.initial),i===void 0&&(i=t.animate));let y=n?n.initial===!1:!1;y=y||c===!1;const b=y?i:c;if(b&&typeof b!="boolean"&&!HF(b)){const T=Array.isArray(b)?b:[b];for(let S=0;S<T.length;S++){const U=O8(e,T[S]);if(U){const{transitionEnd:N,transition:W,...L}=U;for(const Q in L){let V=L[Q];if(Array.isArray(V)){const Z=y?V.length-1:0;V=V[Z]}V!==null&&(s[Q]=V)}for(const Q in N)s[Q]=N[Q]}}}return s}function D8(e,t,n){var a;const{style:r}=e,s={};for(const c in r)(jd(r[c])||t.style&&jd(t.style[c])||Nne(c,e)||((a=n==null?void 0:n.getValue(c))==null?void 0:a.liveStyle)!==void 0)&&(s[c]=r[c]);return s}const vve={useVisualState:Une({scrapeMotionValuesFromProps:D8,createRenderState:L8})};function zne(e,t){try{t.dimensions=typeof e.getBBox=="function"?e.getBBox():e.getBoundingClientRect()}catch{t.dimensions={x:0,y:0,width:0,height:0}}}function Qne(e,{style:t,vars:n},r,s){Object.assign(e.style,t,s&&s.getProjectionStyles(r));for(const a in n)e.style.setProperty(a,n[a])}const Hne=new Set(["baseFrequency","diffuseConstant","kernelMatrix","kernelUnitLength","keySplines","keyTimes","limitingConeAngle","markerHeight","markerWidth","numOctaves","targetX","targetY","surfaceScale","specularConstant","specularExponent","stdDeviation","tableValues","viewBox","gradientTransform","pathLength","startOffset","textLength","lengthAdjust"]);function Vne(e,t,n,r){Qne(e,t,void 0,r);for(const s in t.attrs)e.setAttribute(Hne.has(s)?s:I8(s),t.attrs[s])}function $ne(e,t,n){const r=D8(e,t,n);for(const s in e)if(jd(e[s])||jd(t[s])){const a=Gw.indexOf(s)!==-1?"attr"+s.charAt(0).toUpperCase()+s.substring(1):s;r[a]=e[s]}return r}const a$=["x","y","width","height","cx","cy","r"],xve={useVisualState:Une({scrapeMotionValuesFromProps:$ne,createRenderState:Dne,onUpdate:({props:e,prevProps:t,current:n,renderState:r,latestValues:s})=>{if(!n)return;let a=!!e.drag;if(!a){for(const i in s)if(Jx.has(i)){a=!0;break}}if(!a)return;let c=!t;if(t)for(let i=0;i<a$.length;i++){const f=a$[i];e[f]!==t[f]&&(c=!0)}c&&Oa.read(()=>{zne(n,r),Oa.render(()=>{N8(r,s,R8(n.tagName),e.transformTemplate),Vne(n,r)})})}})};function _ve(e,t){return function(r,{forwardMotionProps:s}={forwardMotionProps:!1}){const c={...M8(r)?xve:vve,preloadedFeatures:e,useRender:pve(s),createVisualElement:t,Component:r};return $ye(c)}}function fS(e,t,n){const r=e.getProps();return O8(r,t,n!==void 0?n:r.custom,e)}const Gne=new Set(["width","height","top","left","right","bottom",...Gw]);function wve(e,t,n){e.hasValue(t)?e.getValue(t).set(n):e.addValue(t,cS(n))}function bve(e,t){const n=fS(e,t);let{transitionEnd:r={},transition:s={},...a}=n||{};a={...a,...r};for(const c in a){const i=mve(a[c]);wve(e,c,i)}}function Cve(e){return!!(jd(e)&&e.add)}function CO(e,t){const n=e.getValue("willChange");if(Cve(n))return n.add(t);if(!n&&_O.WillChange){const r=new _O.WillChange("auto");e.addValue("willChange",r),r.add(t)}}function Kne(e){return e.props[Pne]}const Wne=(e,t,n)=>(((1-3*n+3*t)*e+(3*n-6*t))*e+3*t)*e,Sve=1e-7,Bve=12;function Eve(e,t,n,r,s){let a,c,i=0;do c=t+(n-t)/2,a=Wne(c,r,s)-e,a>0?n=c:t=c;while(Math.abs(a)>Sve&&++i<Bve);return c}function xB(e,t,n,r){if(e===t&&n===r)return Qp;const s=a=>Eve(a,0,1,e,n);return a=>a===0||a===1?a:Wne(s(a),t,r)}const qne=e=>t=>t<=.5?e(2*t)/2:(2-e(2*(1-t)))/2,Zne=e=>t=>1-e(1-t),Xne=xB(.33,1.53,.69,.99),U8=Zne(Xne),Yne=qne(U8),Jne=e=>(e*=2)<1?.5*U8(e):.5*(2-Math.pow(2,-10*(e-1))),z8=e=>1-Math.sin(Math.acos(e)),ere=Zne(z8),tre=qne(z8),nre=e=>/^0[^.\s]+$/u.test(e);function Tve(e){return typeof e=="number"?e===0:e!==null?e==="none"||e==="0"||nre(e):!0}const _C=e=>Math.round(e*1e5)/1e5,Q8=/-?(?:\d+(?:\.\d+)?|\.\d+)/gu;function Ive(e){return e==null}const jve=/^(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))$/iu,H8=(e,t)=>n=>!!(typeof n=="string"&&jve.test(n)&&n.startsWith(e)||t&&!Ive(n)&&Object.prototype.hasOwnProperty.call(n,t)),rre=(e,t,n)=>r=>{if(typeof r!="string")return r;const[s,a,c,i]=r.match(Q8);return{[e]:parseFloat(s),[t]:parseFloat(a),[n]:parseFloat(c),alpha:i!==void 0?parseFloat(i):1}},Fve=e=>a0(0,255,e),TM={...Kw,transform:e=>Math.round(Fve(e))},hx={test:H8("rgb","red"),parse:rre("red","green","blue"),transform:({red:e,green:t,blue:n,alpha:r=1})=>"rgba("+TM.transform(e)+", "+TM.transform(t)+", "+TM.transform(n)+", "+_C(hS.transform(r))+")"};function Pve(e){let t="",n="",r="",s="";return e.length>5?(t=e.substring(1,3),n=e.substring(3,5),r=e.substring(5,7),s=e.substring(7,9)):(t=e.substring(1,2),n=e.substring(2,3),r=e.substring(3,4),s=e.substring(4,5),t+=t,n+=n,r+=r,s+=s),{red:parseInt(t,16),green:parseInt(n,16),blue:parseInt(r,16),alpha:s?parseInt(s,16)/255:1}}const SO={test:H8("#"),parse:Pve,transform:hx.transform},U1={test:H8("hsl","hue"),parse:rre("hue","saturation","lightness"),transform:({hue:e,saturation:t,lightness:n,alpha:r=1})=>"hsla("+Math.round(e)+", "+Xm.transform(_C(t))+", "+Xm.transform(_C(n))+", "+_C(hS.transform(r))+")"},Sd={test:e=>hx.test(e)||SO.test(e)||U1.test(e),parse:e=>hx.test(e)?hx.parse(e):U1.test(e)?U1.parse(e):SO.parse(e),transform:e=>typeof e=="string"?e:e.hasOwnProperty("red")?hx.transform(e):U1.transform(e)},kve=/(?:#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\))/giu;function Lve(e){var t,n;return isNaN(e)&&typeof e=="string"&&(((t=e.match(Q8))==null?void 0:t.length)||0)+(((n=e.match(kve))==null?void 0:n.length)||0)>0}const ire="number",sre="color",Mve="var",Nve="var(",l$="${}",Rve=/var\s*\(\s*--(?:[\w-]+\s*|[\w-]+\s*,(?:\s*[^)(\s]|\s*\((?:[^)(]|\([^)(]*\))*\))+\s*)\)|#[\da-f]{3,8}|(?:rgb|hsl)a?\((?:-?[\d.]+%?[,\s]+){2}-?[\d.]+%?\s*(?:[,/]\s*)?(?:\b\d+(?:\.\d+)?|\.\d+)?%?\)|-?(?:\d+(?:\.\d+)?|\.\d+)/giu;function pS(e){const t=e.toString(),n=[],r={color:[],number:[],var:[]},s=[];let a=0;const i=t.replace(Rve,f=>(Sd.test(f)?(r.color.push(a),s.push(sre),n.push(Sd.parse(f))):f.startsWith(Nve)?(r.var.push(a),s.push(Mve),n.push(f)):(r.number.push(a),s.push(ire),n.push(parseFloat(f))),++a,l$)).split(l$);return{values:n,split:i,indexes:r,types:s}}function ore(e){return pS(e).values}function are(e){const{split:t,types:n}=pS(e),r=t.length;return s=>{let a="";for(let c=0;c<r;c++)if(a+=t[c],s[c]!==void 0){const i=n[c];i===ire?a+=_C(s[c]):i===sre?a+=Sd.transform(s[c]):a+=s[c]}return a}}const Ove=e=>typeof e=="number"?0:e;function Dve(e){const t=ore(e);return are(e)(t.map(Ove))}const Uy={test:Lve,parse:ore,createTransformer:are,getAnimatableNone:Dve},Uve=new Set(["brightness","contrast","saturate","opacity"]);function zve(e){const[t,n]=e.slice(0,-1).split("(");if(t==="drop-shadow")return e;const[r]=n.match(Q8)||[];if(!r)return e;const s=n.replace(r,"");let a=Uve.has(t)?1:0;return r!==n&&(a*=100),t+"("+a+s+")"}const Qve=/\b([a-z-]*)\(.*?\)/gu,BO={...Uy,getAnimatableNone:e=>{const t=e.match(Qve);return t?t.map(zve).join(" "):e}},Hve={...P8,color:Sd,backgroundColor:Sd,outlineColor:Sd,fill:Sd,stroke:Sd,borderColor:Sd,borderTopColor:Sd,borderRightColor:Sd,borderBottomColor:Sd,borderLeftColor:Sd,filter:BO,WebkitFilter:BO},lre=e=>Hve[e];function cre(e,t){let n=lre(e);return n!==BO&&(n=Uy),n.getAnimatableNone?n.getAnimatableNone(t):void 0}const Vve=new Set(["auto","none","0"]);function $ve(e,t,n){let r=0,s;for(;r<e.length&&!s;){const a=e[r];typeof a=="string"&&!Vve.has(a)&&pS(a).values.length&&(s=e[r]),r++}if(s&&n)for(const a of t)e[a]=cre(n,s)}const fx=e=>e*180/Math.PI,EO=e=>{const t=fx(Math.atan2(e[1],e[0]));return TO(t)},Gve={x:4,y:5,translateX:4,translateY:5,scaleX:0,scaleY:3,scale:e=>(Math.abs(e[0])+Math.abs(e[3]))/2,rotate:EO,rotateZ:EO,skewX:e=>fx(Math.atan(e[1])),skewY:e=>fx(Math.atan(e[2])),skew:e=>(Math.abs(e[1])+Math.abs(e[2]))/2},TO=e=>(e=e%360,e<0&&(e+=360),e),c$=EO,u$=e=>Math.sqrt(e[0]*e[0]+e[1]*e[1]),d$=e=>Math.sqrt(e[4]*e[4]+e[5]*e[5]),Kve={x:12,y:13,z:14,translateX:12,translateY:13,translateZ:14,scaleX:u$,scaleY:d$,scale:e=>(u$(e)+d$(e))/2,rotateX:e=>TO(fx(Math.atan2(e[6],e[5]))),rotateY:e=>TO(fx(Math.atan2(-e[2],e[0]))),rotateZ:c$,rotate:c$,skewX:e=>fx(Math.atan(e[4])),skewY:e=>fx(Math.atan(e[1])),skew:e=>(Math.abs(e[1])+Math.abs(e[4]))/2};function h$(e){return e.includes("scale")?1:0}function IO(e,t){if(!e||e==="none")return h$(t);const n=e.match(/^matrix3d\(([-\d.e\s,]+)\)$/u);let r,s;if(n)r=Kve,s=n;else{const i=e.match(/^matrix\(([-\d.e\s,]+)\)$/u);r=Gve,s=i}if(!s)return h$(t);const a=r[t],c=s[1].split(",").map(qve);return typeof a=="function"?a(c):c[a]}const Wve=(e,t)=>{const{transform:n="none"}=getComputedStyle(e);return IO(n,t)};function qve(e){return parseFloat(e.trim())}const f$=e=>e===Kw||e===ns,Zve=new Set(["x","y","z"]),Xve=Gw.filter(e=>!Zve.has(e));function Yve(e){const t=[];return Xve.forEach(n=>{const r=e.getValue(n);r!==void 0&&(t.push([n,r.get()]),r.set(n.startsWith("scale")?1:0))}),t}const _w={width:({x:e},{paddingLeft:t="0",paddingRight:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),height:({y:e},{paddingTop:t="0",paddingBottom:n="0"})=>e.max-e.min-parseFloat(t)-parseFloat(n),top:(e,{top:t})=>parseFloat(t),left:(e,{left:t})=>parseFloat(t),bottom:({y:e},{top:t})=>parseFloat(t)+(e.max-e.min),right:({x:e},{left:t})=>parseFloat(t)+(e.max-e.min),x:(e,{transform:t})=>IO(t,"x"),y:(e,{transform:t})=>IO(t,"y")};_w.translateX=_w.x;_w.translateY=_w.y;const yx=new Set;let jO=!1,FO=!1;function ure(){if(FO){const e=Array.from(yx).filter(r=>r.needsMeasurement),t=new Set(e.map(r=>r.element)),n=new Map;t.forEach(r=>{const s=Yve(r);s.length&&(n.set(r,s),r.render())}),e.forEach(r=>r.measureInitialState()),t.forEach(r=>{r.render();const s=n.get(r);s&&s.forEach(([a,c])=>{var i;(i=r.getValue(a))==null||i.set(c)})}),e.forEach(r=>r.measureEndState()),e.forEach(r=>{r.suspendedScrollY!==void 0&&window.scrollTo(0,r.suspendedScrollY)})}FO=!1,jO=!1,yx.forEach(e=>e.complete()),yx.clear()}function dre(){yx.forEach(e=>{e.readKeyframes(),e.needsMeasurement&&(FO=!0)})}function Jve(){dre(),ure()}class V8{constructor(t,n,r,s,a,c=!1){this.isComplete=!1,this.isAsync=!1,this.needsMeasurement=!1,this.isScheduled=!1,this.unresolvedKeyframes=[...t],this.onComplete=n,this.name=r,this.motionValue=s,this.element=a,this.isAsync=c}scheduleResolve(){this.isScheduled=!0,this.isAsync?(yx.add(this),jO||(jO=!0,Oa.read(dre),Oa.resolveKeyframes(ure))):(this.readKeyframes(),this.complete())}readKeyframes(){const{unresolvedKeyframes:t,name:n,element:r,motionValue:s}=this;for(let a=0;a<t.length;a++)if(t[a]===null)if(a===0){const c=s==null?void 0:s.get(),i=t[t.length-1];if(c!==void 0)t[0]=c;else if(r&&n){const f=r.readValue(n,i);f!=null&&(t[0]=f)}t[0]===void 0&&(t[0]=i),s&&c===void 0&&s.set(t[0])}else t[a]=t[a-1]}setFinalKeyframe(){}measureInitialState(){}renderEndStyles(){}measureEndState(){}complete(){this.isComplete=!0,this.onComplete(this.unresolvedKeyframes,this.finalKeyframe),yx.delete(this)}cancel(){this.isComplete||(this.isScheduled=!1,yx.delete(this))}resume(){this.isComplete||this.scheduleResolve()}}const hre=e=>/^-?(?:\d+(?:\.\d+)?|\.\d+)$/u.test(e),exe=/^var\(--(?:([\w-]+)|([\w-]+), ?([a-zA-Z\d ()%#.,-]+))\)/u;function txe(e){const t=exe.exec(e);if(!t)return[,];const[,n,r,s]=t;return[`--${n??r}`,s]}function fre(e,t,n=1){const[r,s]=txe(e);if(!r)return;const a=window.getComputedStyle(t).getPropertyValue(r);if(a){const c=a.trim();return hre(c)?parseFloat(c):c}return F8(s)?fre(s,t,n+1):s}const pre=e=>t=>t.test(e),nxe={test:e=>e==="auto",parse:e=>e},Are=[Kw,ns,Xm,J0,Jye,Yye,nxe],p$=e=>Are.find(pre(e));class mre extends V8{constructor(t,n,r,s,a){super(t,n,r,s,a,!0)}readKeyframes(){const{unresolvedKeyframes:t,element:n,name:r}=this;if(!n||!n.current)return;super.readKeyframes();for(let f=0;f<t.length;f++){let g=t[f];if(typeof g=="string"&&(g=g.trim(),F8(g))){const y=fre(g,n.current);y!==void 0&&(t[f]=y),f===t.length-1&&(this.finalKeyframe=g)}}if(this.resolveNoneKeyframes(),!Gne.has(r)||t.length!==2)return;const[s,a]=t,c=p$(s),i=p$(a);if(c!==i)if(f$(c)&&f$(i))for(let f=0;f<t.length;f++){const g=t[f];typeof g=="string"&&(t[f]=parseFloat(g))}else this.needsMeasurement=!0}resolveNoneKeyframes(){const{unresolvedKeyframes:t,name:n}=this,r=[];for(let s=0;s<t.length;s++)Tve(t[s])&&r.push(s);r.length&&$ve(t,r,n)}measureInitialState(){const{element:t,unresolvedKeyframes:n,name:r}=this;if(!t||!t.current)return;r==="height"&&(this.suspendedScrollY=window.pageYOffset),this.measuredOrigin=_w[r](t.measureViewportBox(),window.getComputedStyle(t.current)),n[0]=this.measuredOrigin;const s=n[n.length-1];s!==void 0&&t.getValue(r,s).jump(s,!1)}measureEndState(){var i;const{element:t,name:n,unresolvedKeyframes:r}=this;if(!t||!t.current)return;const s=t.getValue(n);s&&s.jump(this.measuredOrigin,!1);const a=r.length-1,c=r[a];r[a]=_w[n](t.measureViewportBox(),window.getComputedStyle(t.current)),c!==null&&this.finalKeyframe===void 0&&(this.finalKeyframe=c),(i=this.removedTransforms)!=null&&i.length&&this.removedTransforms.forEach(([f,g])=>{t.getValue(f).set(g)}),this.resolveNoneKeyframes()}}const A$=(e,t)=>t==="zIndex"?!1:!!(typeof e=="number"||Array.isArray(e)||typeof e=="string"&&(Uy.test(e)||e==="0")&&!e.startsWith("url("));function rxe(e){const t=e[0];if(e.length===1)return!0;for(let n=0;n<e.length;n++)if(e[n]!==t)return!0}function ixe(e,t,n,r){const s=e[0];if(s===null)return!1;if(t==="display"||t==="visibility")return!0;const a=e[e.length-1],c=A$(s,t),i=A$(a,t);return!c||!i?!1:rxe(e)||(n==="spring"||w8(n))&&r}const sxe=e=>e!==null;function $F(e,{repeat:t,repeatType:n="loop"},r){const s=e.filter(sxe),a=t&&n!=="loop"&&t%2===1?0:s.length-1;return!a||r===void 0?s[a]:r}const oxe=40;class gre{constructor({autoplay:t=!0,delay:n=0,type:r="keyframes",repeat:s=0,repeatDelay:a=0,repeatType:c="loop",...i}){this.isStopped=!1,this.hasAttemptedResolve=!1,this.createdAt=Zm.now(),this.options={autoplay:t,delay:n,type:r,repeat:s,repeatDelay:a,repeatType:c,...i},this.updateFinishedPromise()}calcStartTime(){return this.resolvedAt?this.resolvedAt-this.createdAt>oxe?this.resolvedAt:this.createdAt:this.createdAt}get resolved(){return!this._resolved&&!this.hasAttemptedResolve&&Jve(),this._resolved}onKeyframesResolved(t,n){this.resolvedAt=Zm.now(),this.hasAttemptedResolve=!0;const{name:r,type:s,velocity:a,delay:c,onComplete:i,onUpdate:f,isGenerator:g}=this.options;if(!g&&!ixe(t,r,s,a))if(c)this.options.duration=0;else{f&&f($F(t,this.options,n)),i&&i(),this.resolveFinishedPromise();return}const y=this.initPlayback(t,n);y!==!1&&(this._resolved={keyframes:t,finalKeyframe:n,...y},this.onPostResolved())}onPostResolved(){}then(t,n){return this.currentFinishedPromise.then(t,n)}flatten(){this.options.allowFlatten&&(this.options.type="keyframes",this.options.ease="linear")}updateFinishedPromise(){this.currentFinishedPromise=new Promise(t=>{this.resolveFinishedPromise=t})}}const Il=(e,t,n)=>e+(t-e)*n;function IM(e,t,n){return n<0&&(n+=1),n>1&&(n-=1),n<1/6?e+(t-e)*6*n:n<1/2?t:n<2/3?e+(t-e)*(2/3-n)*6:e}function axe({hue:e,saturation:t,lightness:n,alpha:r}){e/=360,t/=100,n/=100;let s=0,a=0,c=0;if(!t)s=a=c=n;else{const i=n<.5?n*(1+t):n+t-n*t,f=2*n-i;s=IM(f,i,e+1/3),a=IM(f,i,e),c=IM(f,i,e-1/3)}return{red:Math.round(s*255),green:Math.round(a*255),blue:Math.round(c*255),alpha:r}}function tj(e,t){return n=>n>0?t:e}const jM=(e,t,n)=>{const r=e*e,s=n*(t*t-r)+r;return s<0?0:Math.sqrt(s)},lxe=[SO,hx,U1],cxe=e=>lxe.find(t=>t.test(e));function m$(e){const t=cxe(e);if(!t)return!1;let n=t.parse(e);return t===U1&&(n=axe(n)),n}const g$=(e,t)=>{const n=m$(e),r=m$(t);if(!n||!r)return tj(e,t);const s={...n};return a=>(s.red=jM(n.red,r.red,a),s.green=jM(n.green,r.green,a),s.blue=jM(n.blue,r.blue,a),s.alpha=Il(n.alpha,r.alpha,a),hx.transform(s))},uxe=(e,t)=>n=>t(e(n)),_B=(...e)=>e.reduce(uxe),PO=new Set(["none","hidden"]);function dxe(e,t){return PO.has(e)?n=>n<=0?e:t:n=>n>=1?t:e}function hxe(e,t){return n=>Il(e,t,n)}function $8(e){return typeof e=="number"?hxe:typeof e=="string"?F8(e)?tj:Sd.test(e)?g$:Axe:Array.isArray(e)?yre:typeof e=="object"?Sd.test(e)?g$:fxe:tj}function yre(e,t){const n=[...e],r=n.length,s=e.map((a,c)=>$8(a)(a,t[c]));return a=>{for(let c=0;c<r;c++)n[c]=s[c](a);return n}}function fxe(e,t){const n={...e,...t},r={};for(const s in n)e[s]!==void 0&&t[s]!==void 0&&(r[s]=$8(e[s])(e[s],t[s]));return s=>{for(const a in r)n[a]=r[a](s);return n}}function pxe(e,t){const n=[],r={color:0,var:0,number:0};for(let s=0;s<t.values.length;s++){const a=t.types[s],c=e.indexes[a][r[a]],i=e.values[c]??0;n[s]=i,r[a]++}return n}const Axe=(e,t)=>{const n=Uy.createTransformer(t),r=pS(e),s=pS(t);return r.indexes.var.length===s.indexes.var.length&&r.indexes.color.length===s.indexes.color.length&&r.indexes.number.length>=s.indexes.number.length?PO.has(e)&&!s.values.length||PO.has(t)&&!r.values.length?dxe(e,t):_B(yre(pxe(r,s),s.values),n):tj(e,t)};function vre(e,t,n){return typeof e=="number"&&typeof t=="number"&&typeof n=="number"?Il(e,t,n):$8(e)(e,t)}const mxe=5;function xre(e,t,n){const r=Math.max(t-mxe,0);return xne(n-e(r),t-r)}const Kl={stiffness:100,damping:10,mass:1,velocity:0,duration:800,bounce:.3,visualDuration:.3,restSpeed:{granular:.01,default:2},restDelta:{granular:.005,default:.5},minDuration:.01,maxDuration:10,minDamping:.05,maxDamping:1},FM=.001;function gxe({duration:e=Kl.duration,bounce:t=Kl.bounce,velocity:n=Kl.velocity,mass:r=Kl.mass}){let s,a,c=1-t;c=a0(Kl.minDamping,Kl.maxDamping,c),e=a0(Kl.minDuration,Kl.maxDuration,qm(e)),c<1?(s=g=>{const y=g*c,b=y*e,T=y-n,S=kO(g,c),U=Math.exp(-b);return FM-T/S*U},a=g=>{const b=g*c*e,T=b*n+n,S=Math.pow(c,2)*Math.pow(g,2)*e,U=Math.exp(-b),N=kO(Math.pow(g,2),c);return(-s(g)+FM>0?-1:1)*((T-S)*U)/N}):(s=g=>{const y=Math.exp(-g*e),b=(g-n)*e+1;return-FM+y*b},a=g=>{const y=Math.exp(-g*e),b=(n-g)*(e*e);return y*b});const i=5/e,f=vxe(s,a,i);if(e=Wm(e),isNaN(f))return{stiffness:Kl.stiffness,damping:Kl.damping,duration:e};{const g=Math.pow(f,2)*r;return{stiffness:g,damping:c*2*Math.sqrt(r*g),duration:e}}}const yxe=12;function vxe(e,t,n){let r=n;for(let s=1;s<yxe;s++)r=r-e(r)/t(r);return r}function kO(e,t){return e*Math.sqrt(1-t*t)}const xxe=["duration","bounce"],_xe=["stiffness","damping","mass"];function y$(e,t){return t.some(n=>e[n]!==void 0)}function wxe(e){let t={velocity:Kl.velocity,stiffness:Kl.stiffness,damping:Kl.damping,mass:Kl.mass,isResolvedFromDuration:!1,...e};if(!y$(e,_xe)&&y$(e,xxe))if(e.visualDuration){const n=e.visualDuration,r=2*Math.PI/(n*1.2),s=r*r,a=2*a0(.05,1,1-(e.bounce||0))*Math.sqrt(s);t={...t,mass:Kl.mass,stiffness:s,damping:a}}else{const n=gxe(e);t={...t,...n,mass:Kl.mass},t.isResolvedFromDuration=!0}return t}function nj(e=Kl.visualDuration,t=Kl.bounce){const n=typeof e!="object"?{visualDuration:e,keyframes:[0,1],bounce:t}:e;let{restSpeed:r,restDelta:s}=n;const a=n.keyframes[0],c=n.keyframes[n.keyframes.length-1],i={done:!1,value:a},{stiffness:f,damping:g,mass:y,duration:b,velocity:T,isResolvedFromDuration:S}=wxe({...n,velocity:-qm(n.velocity||0)}),U=T||0,N=g/(2*Math.sqrt(f*y)),W=c-a,L=qm(Math.sqrt(f/y)),Q=Math.abs(W)<5;r||(r=Q?Kl.restSpeed.granular:Kl.restSpeed.default),s||(s=Q?Kl.restDelta.granular:Kl.restDelta.default);let V;if(N<1){const ne=kO(L,N);V=Y=>{const le=Math.exp(-N*L*Y);return c-le*((U+N*L*W)/ne*Math.sin(ne*Y)+W*Math.cos(ne*Y))}}else if(N===1)V=ne=>c-Math.exp(-L*ne)*(W+(U+L*W)*ne);else{const ne=L*Math.sqrt(N*N-1);V=Y=>{const le=Math.exp(-N*L*Y),pe=Math.min(ne*Y,300);return c-le*((U+N*L*W)*Math.sinh(pe)+ne*W*Math.cosh(pe))/ne}}const Z={calculatedDuration:S&&b||null,next:ne=>{const Y=V(ne);if(S)i.done=ne>=b;else{let le=0;N<1&&(le=ne===0?Wm(U):xre(V,ne,Y));const pe=Math.abs(le)<=r,_e=Math.abs(c-Y)<=s;i.done=pe&&_e}return i.value=i.done?c:Y,i},toString:()=>{const ne=Math.min(C8(Z),JI),Y=_ne(le=>Z.next(ne*le).value,ne,30);return ne+"ms "+Y},toTransition:()=>{}};return Z}nj.applyToOptions=e=>{const t=_ye(e,100,nj);return e.ease=lS()?t.ease:"easeOut",e.duration=Wm(t.duration),e.type="keyframes",e};function v$({keyframes:e,velocity:t=0,power:n=.8,timeConstant:r=325,bounceDamping:s=10,bounceStiffness:a=500,modifyTarget:c,min:i,max:f,restDelta:g=.5,restSpeed:y}){const b=e[0],T={done:!1,value:b},S=pe=>i!==void 0&&pe<i||f!==void 0&&pe>f,U=pe=>i===void 0?f:f===void 0||Math.abs(i-pe)<Math.abs(f-pe)?i:f;let N=n*t;const W=b+N,L=c===void 0?W:c(W);L!==W&&(N=L-b);const Q=pe=>-N*Math.exp(-pe/r),V=pe=>L+Q(pe),Z=pe=>{const _e=Q(pe),ye=V(pe);T.done=Math.abs(_e)<=g,T.value=T.done?L:ye};let ne,Y;const le=pe=>{S(T.value)&&(ne=pe,Y=nj({keyframes:[T.value,U(T.value)],velocity:xre(V,pe,T.value),damping:s,stiffness:a,restDelta:g,restSpeed:y}))};return le(0),{calculatedDuration:null,next:pe=>{let _e=!1;return!Y&&ne===void 0&&(_e=!0,Z(pe),le(pe)),ne!==void 0&&pe>=ne?Y.next(pe-ne):(!_e&&Z(pe),T)}}}const bxe=xB(.42,0,1,1),Cxe=xB(0,0,.58,1),_re=xB(.42,0,.58,1),Sxe=e=>Array.isArray(e)&&typeof e[0]!="number",x$={linear:Qp,easeIn:bxe,easeInOut:_re,easeOut:Cxe,circIn:z8,circInOut:tre,circOut:ere,backIn:U8,backInOut:Yne,backOut:Xne,anticipate:Jne},_$=e=>{if(_8(e)){xO(e.length===4);const[t,n,r,s]=e;return xB(t,n,r,s)}else if(typeof e=="string")return xO(x$[e]!==void 0),x$[e];return e};function Bxe(e,t,n){const r=[],s=n||vre,a=e.length-1;for(let c=0;c<a;c++){let i=s(e[c],e[c+1]);if(t){const f=Array.isArray(t)?t[c]||Qp:t;i=_B(f,i)}r.push(i)}return r}function Exe(e,t,{clamp:n=!0,ease:r,mixer:s}={}){const a=e.length;if(xO(a===t.length),a===1)return()=>t[0];if(a===2&&t[0]===t[1])return()=>t[1];const c=e[0]===e[1];e[0]>e[a-1]&&(e=[...e].reverse(),t=[...t].reverse());const i=Bxe(t,r,s),f=i.length,g=y=>{if(c&&y<e[0])return t[0];let b=0;if(f>1)for(;b<e.length-2&&!(y<e[b+1]);b++);const T=aS(e[b],e[b+1],y);return i[b](T)};return n?y=>g(a0(e[0],e[a-1],y)):g}function Txe(e,t){const n=e[e.length-1];for(let r=1;r<=t;r++){const s=aS(0,t,r);e.push(Il(n,1,s))}}function Ixe(e){const t=[0];return Txe(t,e.length-1),t}function jxe(e,t){return e.map(n=>n*t)}function Fxe(e,t){return e.map(()=>t||_re).splice(0,e.length-1)}function rj({duration:e=300,keyframes:t,times:n,ease:r="easeInOut"}){const s=Sxe(r)?r.map(_$):_$(r),a={done:!1,value:t[0]},c=jxe(n&&n.length===t.length?n:Ixe(t),e),i=Exe(c,t,{ease:Array.isArray(s)?s:Fxe(t,s)});return{calculatedDuration:e,next:f=>(a.value=i(f),a.done=f>=e,a)}}const Pxe=e=>{const t=({timestamp:n})=>e(n);return{start:()=>Oa.update(t,!0),stop:()=>o0(t),now:()=>Uu.isProcessing?Uu.timestamp:Zm.now()}},kxe={decay:v$,inertia:v$,tween:rj,keyframes:rj,spring:nj},Lxe=e=>e/100;class G8 extends gre{constructor(t){super(t),this.holdTime=null,this.cancelTime=null,this.currentTime=0,this.playbackSpeed=1,this.pendingPlayState="running",this.startTime=null,this.state="idle",this.stop=()=>{if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.teardown();const{onStop:f}=this.options;f&&f()};const{name:n,motionValue:r,element:s,keyframes:a}=this.options,c=(s==null?void 0:s.KeyframeResolver)||V8,i=(f,g)=>this.onKeyframesResolved(f,g);this.resolver=new c(a,i,n,r,s),this.resolver.scheduleResolve()}flatten(){super.flatten(),this._resolved&&Object.assign(this._resolved,this.initPlayback(this._resolved.keyframes))}initPlayback(t){const{type:n="keyframes",repeat:r=0,repeatDelay:s=0,repeatType:a,velocity:c=0}=this.options,i=w8(n)?n:kxe[n]||rj;let f,g;i!==rj&&typeof t[0]!="number"&&(f=_B(Lxe,vre(t[0],t[1])),t=[0,100]);const y=i({...this.options,keyframes:t});a==="mirror"&&(g=i({...this.options,keyframes:[...t].reverse(),velocity:-c})),y.calculatedDuration===null&&(y.calculatedDuration=C8(y));const{calculatedDuration:b}=y,T=b+s,S=T*(r+1)-s;return{generator:y,mirroredGenerator:g,mapPercentToKeyframes:f,calculatedDuration:b,resolvedDuration:T,totalDuration:S}}onPostResolved(){const{autoplay:t=!0}=this.options;this.play(),this.pendingPlayState==="paused"||!t?this.pause():this.state=this.pendingPlayState}tick(t,n=!1){const{resolved:r}=this;if(!r){const{keyframes:pe}=this.options;return{done:!0,value:pe[pe.length-1]}}const{finalKeyframe:s,generator:a,mirroredGenerator:c,mapPercentToKeyframes:i,keyframes:f,calculatedDuration:g,totalDuration:y,resolvedDuration:b}=r;if(this.startTime===null)return a.next(0);const{delay:T,repeat:S,repeatType:U,repeatDelay:N,onUpdate:W}=this.options;this.speed>0?this.startTime=Math.min(this.startTime,t):this.speed<0&&(this.startTime=Math.min(t-y/this.speed,this.startTime)),n?this.currentTime=t:this.holdTime!==null?this.currentTime=this.holdTime:this.currentTime=Math.round(t-this.startTime)*this.speed;const L=this.currentTime-T*(this.speed>=0?1:-1),Q=this.speed>=0?L<0:L>y;this.currentTime=Math.max(L,0),this.state==="finished"&&this.holdTime===null&&(this.currentTime=y);let V=this.currentTime,Z=a;if(S){const pe=Math.min(this.currentTime,y)/b;let _e=Math.floor(pe),ye=pe%1;!ye&&pe>=1&&(ye=1),ye===1&&_e--,_e=Math.min(_e,S+1),!!(_e%2)&&(U==="reverse"?(ye=1-ye,N&&(ye-=N/b)):U==="mirror"&&(Z=c)),V=a0(0,1,ye)*b}const ne=Q?{done:!1,value:f[0]}:Z.next(V);i&&(ne.value=i(ne.value));let{done:Y}=ne;!Q&&g!==null&&(Y=this.speed>=0?this.currentTime>=y:this.currentTime<=0);const le=this.holdTime===null&&(this.state==="finished"||this.state==="running"&&Y);return le&&s!==void 0&&(ne.value=$F(f,this.options,s)),W&&W(ne.value),le&&this.finish(),ne}get duration(){const{resolved:t}=this;return t?qm(t.calculatedDuration):0}get time(){return qm(this.currentTime)}set time(t){t=Wm(t),this.currentTime=t,this.holdTime!==null||this.speed===0?this.holdTime=t:this.driver&&(this.startTime=this.driver.now()-t/this.speed)}get speed(){return this.playbackSpeed}set speed(t){const n=this.playbackSpeed!==t;this.playbackSpeed=t,n&&(this.time=qm(this.currentTime))}play(){if(this.resolver.isScheduled||this.resolver.resume(),!this._resolved){this.pendingPlayState="running";return}if(this.isStopped)return;const{driver:t=Pxe,onPlay:n,startTime:r}=this.options;this.driver||(this.driver=t(a=>this.tick(a))),n&&n();const s=this.driver.now();this.holdTime!==null?this.startTime=s-this.holdTime:this.startTime?this.state==="finished"&&(this.startTime=s):this.startTime=r??this.calcStartTime(),this.state==="finished"&&this.updateFinishedPromise(),this.cancelTime=this.startTime,this.holdTime=null,this.state="running",this.driver.start()}pause(){if(!this._resolved){this.pendingPlayState="paused";return}this.state="paused",this.holdTime=this.currentTime??0}complete(){this.state!=="running"&&this.play(),this.pendingPlayState=this.state="finished",this.holdTime=null}finish(){this.teardown(),this.state="finished";const{onComplete:t}=this.options;t&&t()}cancel(){this.cancelTime!==null&&this.tick(this.cancelTime),this.teardown(),this.updateFinishedPromise()}teardown(){this.state="idle",this.stopDriver(),this.resolveFinishedPromise(),this.updateFinishedPromise(),this.startTime=this.cancelTime=null,this.resolver.cancel()}stopDriver(){this.driver&&(this.driver.stop(),this.driver=void 0)}sample(t){return this.startTime=0,this.tick(t,!0)}get finished(){return this.currentFinishedPromise}}const Mxe=new Set(["opacity","clipPath","filter","transform"]),Nxe=v8(()=>Object.hasOwnProperty.call(Element.prototype,"animate")),ij=10,Rxe=2e4;function Oxe(e){return w8(e.type)||e.type==="spring"||!bne(e.ease)}function Dxe(e,t){const n=new G8({...t,keyframes:e,repeat:0,delay:0,isGenerator:!0});let r={done:!1,value:e[0]};const s=[];let a=0;for(;!r.done&&a<Rxe;)r=n.sample(a),s.push(r.value),a+=ij;return{times:void 0,keyframes:s,duration:a-ij,ease:"linear"}}const wre={anticipate:Jne,backInOut:Yne,circInOut:tre};function Uxe(e){return e in wre}class w$ extends gre{constructor(t){super(t);const{name:n,motionValue:r,element:s,keyframes:a}=this.options;this.resolver=new mre(a,(c,i)=>this.onKeyframesResolved(c,i),n,r,s),this.resolver.scheduleResolve()}initPlayback(t,n){let{duration:r=300,times:s,ease:a,type:c,motionValue:i,name:f,startTime:g}=this.options;if(!i.owner||!i.owner.current)return!1;if(typeof a=="string"&&lS()&&Uxe(a)&&(a=wre[a]),Oxe(this.options)){const{onComplete:b,onUpdate:T,motionValue:S,element:U,...N}=this.options,W=Dxe(t,N);t=W.keyframes,t.length===1&&(t[1]=t[0]),r=W.duration,s=W.times,a=W.ease,c="keyframes"}const y=xye(i.owner.current,f,t,{...this.options,duration:r,times:s,ease:a});return y.startTime=g??this.calcStartTime(),this.pendingTimeline?(ZV(y,this.pendingTimeline),this.pendingTimeline=void 0):y.onfinish=()=>{const{onComplete:b}=this.options;i.set($F(t,this.options,n)),b&&b(),this.cancel(),this.resolveFinishedPromise()},{animation:y,duration:r,times:s,type:c,ease:a,keyframes:t}}get duration(){const{resolved:t}=this;if(!t)return 0;const{duration:n}=t;return qm(n)}get time(){const{resolved:t}=this;if(!t)return 0;const{animation:n}=t;return qm(n.currentTime||0)}set time(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.currentTime=Wm(t)}get speed(){const{resolved:t}=this;if(!t)return 1;const{animation:n}=t;return n.playbackRate}get finished(){return this.resolved.animation.finished}set speed(t){const{resolved:n}=this;if(!n)return;const{animation:r}=n;r.playbackRate=t}get state(){const{resolved:t}=this;if(!t)return"idle";const{animation:n}=t;return n.playState}get startTime(){const{resolved:t}=this;if(!t)return null;const{animation:n}=t;return n.startTime}attachTimeline(t){if(!this._resolved)this.pendingTimeline=t;else{const{resolved:n}=this;if(!n)return Qp;const{animation:r}=n;ZV(r,t)}return Qp}play(){if(this.isStopped)return;const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.playState==="finished"&&this.updateFinishedPromise(),n.play()}pause(){const{resolved:t}=this;if(!t)return;const{animation:n}=t;n.pause()}stop(){if(this.resolver.cancel(),this.isStopped=!0,this.state==="idle")return;this.resolveFinishedPromise(),this.updateFinishedPromise();const{resolved:t}=this;if(!t)return;const{animation:n,keyframes:r,duration:s,type:a,ease:c,times:i}=t;if(n.playState==="idle"||n.playState==="finished")return;if(this.time){const{motionValue:g,onUpdate:y,onComplete:b,element:T,...S}=this.options,U=new G8({...S,keyframes:r,duration:s,type:a,ease:c,times:i,isGenerator:!0}),N=Wm(this.time);g.setWithVelocity(U.sample(N-ij).value,U.sample(N).value,ij)}const{onStop:f}=this.options;f&&f(),this.cancel()}complete(){const{resolved:t}=this;t&&t.animation.finish()}cancel(){const{resolved:t}=this;t&&t.animation.cancel()}static supports(t){const{motionValue:n,name:r,repeatDelay:s,repeatType:a,damping:c,type:i}=t;if(!n||!n.owner||!(n.owner.current instanceof HTMLElement))return!1;const{onUpdate:f,transformTemplate:g}=n.owner.getProps();return Nxe()&&r&&Mxe.has(r)&&(r!=="transform"||!g)&&!f&&!s&&a!=="mirror"&&c!==0&&i!=="inertia"}}const zxe={type:"spring",stiffness:500,damping:25,restSpeed:10},Qxe=e=>({type:"spring",stiffness:550,damping:e===0?2*Math.sqrt(550):30,restSpeed:10}),Hxe={type:"keyframes",duration:.8},Vxe={type:"keyframes",ease:[.25,.1,.35,1],duration:.3},$xe=(e,{keyframes:t})=>t.length>2?Hxe:Jx.has(e)?e.startsWith("scale")?Qxe(t[1]):zxe:Vxe;function Gxe({when:e,delay:t,delayChildren:n,staggerChildren:r,staggerDirection:s,repeat:a,repeatType:c,repeatDelay:i,from:f,elapsed:g,...y}){return!!Object.keys(y).length}const K8=(e,t,n,r={},s,a)=>c=>{const i=b8(r,e)||{},f=i.delay||r.delay||0;let{elapsed:g=0}=r;g=g-Wm(f);let y={keyframes:Array.isArray(n)?n:[null,n],ease:"easeOut",velocity:t.getVelocity(),...i,delay:-g,onUpdate:T=>{t.set(T),i.onUpdate&&i.onUpdate(T)},onComplete:()=>{c(),i.onComplete&&i.onComplete()},name:e,motionValue:t,element:a?void 0:s};Gxe(i)||(y={...y,...$xe(e,y)}),y.duration&&(y.duration=Wm(y.duration)),y.repeatDelay&&(y.repeatDelay=Wm(y.repeatDelay)),y.from!==void 0&&(y.keyframes[0]=y.from);let b=!1;if((y.type===!1||y.duration===0&&!y.repeatDelay)&&(y.duration=0,y.delay===0&&(b=!0)),y.allowFlatten=!i.type&&!i.ease,b&&!a&&t.get()!==void 0){const T=$F(y.keyframes,i);if(T!==void 0)return Oa.update(()=>{y.onUpdate(T),y.onComplete()}),new gye([])}return!a&&w$.supports(y)?new w$(y):new G8(y)};function Kxe({protectedKeys:e,needsAnimating:t},n){const r=e.hasOwnProperty(n)&&t[n]!==!0;return t[n]=!1,r}function bre(e,t,{delay:n=0,transitionOverride:r,type:s}={}){let{transition:a=e.getDefaultTransition(),transitionEnd:c,...i}=t;r&&(a=r);const f=[],g=s&&e.animationState&&e.animationState.getState()[s];for(const y in i){const b=e.getValue(y,e.latestValues[y]??null),T=i[y];if(T===void 0||g&&Kxe(g,y))continue;const S={delay:n,...b8(a||{},y)};let U=!1;if(window.MotionHandoffAnimation){const W=Kne(e);if(W){const L=window.MotionHandoffAnimation(W,y,Oa);L!==null&&(S.startTime=L,U=!0)}}CO(e,y),b.start(K8(y,b,T,e.shouldReduceMotion&&Gne.has(y)?{type:!1}:S,e,U));const N=b.animation;N&&f.push(N)}return c&&Promise.all(f).then(()=>{Oa.update(()=>{c&&bve(e,c)})}),f}function LO(e,t,n={}){var f;const r=fS(e,t,n.type==="exit"?(f=e.presenceContext)==null?void 0:f.custom:void 0);let{transition:s=e.getDefaultTransition()||{}}=r||{};n.transitionOverride&&(s=n.transitionOverride);const a=r?()=>Promise.all(bre(e,r,n)):()=>Promise.resolve(),c=e.variantChildren&&e.variantChildren.size?(g=0)=>{const{delayChildren:y=0,staggerChildren:b,staggerDirection:T}=s;return Wxe(e,t,y+g,b,T,n)}:()=>Promise.resolve(),{when:i}=s;if(i){const[g,y]=i==="beforeChildren"?[a,c]:[c,a];return g().then(()=>y())}else return Promise.all([a(),c(n.delay)])}function Wxe(e,t,n=0,r=0,s=1,a){const c=[],i=(e.variantChildren.size-1)*r,f=s===1?(g=0)=>g*r:(g=0)=>i-g*r;return Array.from(e.variantChildren).sort(qxe).forEach((g,y)=>{g.notify("AnimationStart",t),c.push(LO(g,t,{...a,delay:n+f(y)}).then(()=>g.notify("AnimationComplete",t)))}),Promise.all(c)}function qxe(e,t){return e.sortNodePosition(t)}function Zxe(e,t,n={}){e.notify("AnimationStart",t);let r;if(Array.isArray(t)){const s=t.map(a=>LO(e,a,n));r=Promise.all(s)}else if(typeof t=="string")r=LO(e,t,n);else{const s=typeof t=="function"?fS(e,t,n.custom):t;r=Promise.all(bre(e,s,n))}return r.then(()=>{e.notify("AnimationComplete",t)})}function Cre(e,t){if(!Array.isArray(t))return!1;const n=t.length;if(n!==e.length)return!1;for(let r=0;r<n;r++)if(t[r]!==e[r])return!1;return!0}const Xxe=T8.length;function Sre(e){if(!e)return;if(!e.isControllingVariants){const n=e.parent?Sre(e.parent)||{}:{};return e.props.initial!==void 0&&(n.initial=e.props.initial),n}const t={};for(let n=0;n<Xxe;n++){const r=T8[n],s=e.props[r];(uS(s)||s===!1)&&(t[r]=s)}return t}const Yxe=[...E8].reverse(),Jxe=E8.length;function e_e(e){return t=>Promise.all(t.map(({animation:n,options:r})=>Zxe(e,n,r)))}function t_e(e){let t=e_e(e),n=b$(),r=!0;const s=f=>(g,y)=>{var T;const b=fS(e,y,f==="exit"?(T=e.presenceContext)==null?void 0:T.custom:void 0);if(b){const{transition:S,transitionEnd:U,...N}=b;g={...g,...N,...U}}return g};function a(f){t=f(e)}function c(f){const{props:g}=e,y=Sre(e.parent)||{},b=[],T=new Set;let S={},U=1/0;for(let W=0;W<Jxe;W++){const L=Yxe[W],Q=n[L],V=g[L]!==void 0?g[L]:y[L],Z=uS(V),ne=L===f?Q.isActive:null;ne===!1&&(U=W);let Y=V===y[L]&&V!==g[L]&&Z;if(Y&&r&&e.manuallyAnimateOnMount&&(Y=!1),Q.protectedKeys={...S},!Q.isActive&&ne===null||!V&&!Q.prevProp||HF(V)||typeof V=="boolean")continue;const le=n_e(Q.prevProp,V);let pe=le||L===f&&Q.isActive&&!Y&&Z||W>U&&Z,_e=!1;const ye=Array.isArray(V)?V:[V];let he=ye.reduce(s(L),{});ne===!1&&(he={});const{prevResolvedValues:be={}}=Q,Te={...be,...he},Ee=Je=>{pe=!0,T.has(Je)&&(_e=!0,T.delete(Je)),Q.needsAnimating[Je]=!0;const Ue=e.getValue(Je);Ue&&(Ue.liveStyle=!1)};for(const Je in Te){const Ue=he[Je],Qe=be[Je];if(S.hasOwnProperty(Je))continue;let xe=!1;bO(Ue)&&bO(Qe)?xe=!Cre(Ue,Qe):xe=Ue!==Qe,xe?Ue!=null?Ee(Je):T.add(Je):Ue!==void 0&&T.has(Je)?Ee(Je):Q.protectedKeys[Je]=!0}Q.prevProp=V,Q.prevResolvedValues=he,Q.isActive&&(S={...S,...he}),r&&e.blockInitialAnimation&&(pe=!1),pe&&(!(Y&&le)||_e)&&b.push(...ye.map(Je=>({animation:Je,options:{type:L}})))}if(T.size){const W={};if(typeof g.initial!="boolean"){const L=fS(e,Array.isArray(g.initial)?g.initial[0]:g.initial);L&&L.transition&&(W.transition=L.transition)}T.forEach(L=>{const Q=e.getBaseTarget(L),V=e.getValue(L);V&&(V.liveStyle=!0),W[L]=Q??null}),b.push({animation:W})}let N=!!b.length;return r&&(g.initial===!1||g.initial===g.animate)&&!e.manuallyAnimateOnMount&&(N=!1),r=!1,N?t(b):Promise.resolve()}function i(f,g){var b;if(n[f].isActive===g)return Promise.resolve();(b=e.variantChildren)==null||b.forEach(T=>{var S;return(S=T.animationState)==null?void 0:S.setActive(f,g)}),n[f].isActive=g;const y=c(f);for(const T in n)n[T].protectedKeys={};return y}return{animateChanges:c,setActive:i,setAnimateFunction:a,getState:()=>n,reset:()=>{n=b$(),r=!0}}}function n_e(e,t){return typeof t=="string"?t!==e:Array.isArray(t)?!Cre(t,e):!1}function Kv(e=!1){return{isActive:e,protectedKeys:{},needsAnimating:{},prevResolvedValues:{}}}function b$(){return{animate:Kv(!0),whileInView:Kv(),whileHover:Kv(),whileTap:Kv(),whileDrag:Kv(),whileFocus:Kv(),exit:Kv()}}class iv{constructor(t){this.isMounted=!1,this.node=t}update(){}}class r_e extends iv{constructor(t){super(t),t.animationState||(t.animationState=t_e(t))}updateAnimationControlsSubscription(){const{animate:t}=this.node.getProps();HF(t)&&(this.unmountControls=t.subscribe(this.node))}mount(){this.updateAnimationControlsSubscription()}update(){const{animate:t}=this.node.getProps(),{animate:n}=this.node.prevProps||{};t!==n&&this.updateAnimationControlsSubscription()}unmount(){var t;this.node.animationState.reset(),(t=this.unmountControls)==null||t.call(this)}}let i_e=0;class s_e extends iv{constructor(){super(...arguments),this.id=i_e++}update(){if(!this.node.presenceContext)return;const{isPresent:t,onExitComplete:n}=this.node.presenceContext,{isPresent:r}=this.node.prevPresenceContext||{};if(!this.node.animationState||t===r)return;const s=this.node.animationState.setActive("exit",!t);n&&!t&&s.then(()=>{n(this.id)})}mount(){const{register:t,onExitComplete:n}=this.node.presenceContext||{};n&&n(this.id),t&&(this.unmount=t(this.id))}unmount(){}}const o_e={animation:{Feature:r_e},exit:{Feature:s_e}};function AS(e,t,n,r={passive:!0}){return e.addEventListener(t,n,r),()=>e.removeEventListener(t,n)}function wB(e){return{point:{x:e.pageX,y:e.pageY}}}const a_e=e=>t=>B8(t)&&e(t,wB(t));function wC(e,t,n,r){return AS(e,t,a_e(n),r)}function Bre({top:e,left:t,right:n,bottom:r}){return{x:{min:t,max:n},y:{min:e,max:r}}}function l_e({x:e,y:t}){return{top:t.min,right:e.max,bottom:t.max,left:e.min}}function c_e(e,t){if(!t)return e;const n=t({x:e.left,y:e.top}),r=t({x:e.right,y:e.bottom});return{top:n.y,left:n.x,bottom:r.y,right:r.x}}const Ere=1e-4,u_e=1-Ere,d_e=1+Ere,Tre=.01,h_e=0-Tre,f_e=0+Tre;function ph(e){return e.max-e.min}function p_e(e,t,n){return Math.abs(e-t)<=n}function C$(e,t,n,r=.5){e.origin=r,e.originPoint=Il(t.min,t.max,e.origin),e.scale=ph(n)/ph(t),e.translate=Il(n.min,n.max,e.origin)-e.originPoint,(e.scale>=u_e&&e.scale<=d_e||isNaN(e.scale))&&(e.scale=1),(e.translate>=h_e&&e.translate<=f_e||isNaN(e.translate))&&(e.translate=0)}function bC(e,t,n,r){C$(e.x,t.x,n.x,r?r.originX:void 0),C$(e.y,t.y,n.y,r?r.originY:void 0)}function S$(e,t,n){e.min=n.min+t.min,e.max=e.min+ph(t)}function A_e(e,t,n){S$(e.x,t.x,n.x),S$(e.y,t.y,n.y)}function B$(e,t,n){e.min=t.min-n.min,e.max=e.min+ph(t)}function CC(e,t,n){B$(e.x,t.x,n.x),B$(e.y,t.y,n.y)}const E$=()=>({translate:0,scale:1,origin:0,originPoint:0}),z1=()=>({x:E$(),y:E$()}),T$=()=>({min:0,max:0}),pc=()=>({x:T$(),y:T$()});function jp(e){return[e("x"),e("y")]}function PM(e){return e===void 0||e===1}function MO({scale:e,scaleX:t,scaleY:n}){return!PM(e)||!PM(t)||!PM(n)}function Jv(e){return MO(e)||Ire(e)||e.z||e.rotate||e.rotateX||e.rotateY||e.skewX||e.skewY}function Ire(e){return I$(e.x)||I$(e.y)}function I$(e){return e&&e!=="0%"}function sj(e,t,n){const r=e-n,s=t*r;return n+s}function j$(e,t,n,r,s){return s!==void 0&&(e=sj(e,s,r)),sj(e,n,r)+t}function NO(e,t=0,n=1,r,s){e.min=j$(e.min,t,n,r,s),e.max=j$(e.max,t,n,r,s)}function jre(e,{x:t,y:n}){NO(e.x,t.translate,t.scale,t.originPoint),NO(e.y,n.translate,n.scale,n.originPoint)}const F$=.999999999999,P$=1.0000000000001;function m_e(e,t,n,r=!1){const s=n.length;if(!s)return;t.x=t.y=1;let a,c;for(let i=0;i<s;i++){a=n[i],c=a.projectionDelta;const{visualElement:f}=a.options;f&&f.props.style&&f.props.style.display==="contents"||(r&&a.options.layoutScroll&&a.scroll&&a!==a.root&&H1(e,{x:-a.scroll.offset.x,y:-a.scroll.offset.y}),c&&(t.x*=c.x.scale,t.y*=c.y.scale,jre(e,c)),r&&Jv(a.latestValues)&&H1(e,a.latestValues))}t.x<P$&&t.x>F$&&(t.x=1),t.y<P$&&t.y>F$&&(t.y=1)}function Q1(e,t){e.min=e.min+t,e.max=e.max+t}function k$(e,t,n,r,s=.5){const a=Il(e.min,e.max,s);NO(e,t,n,a,r)}function H1(e,t){k$(e.x,t.x,t.scaleX,t.scale,t.originX),k$(e.y,t.y,t.scaleY,t.scale,t.originY)}function Fre(e,t){return Bre(c_e(e.getBoundingClientRect(),t))}function g_e(e,t,n){const r=Fre(e,n),{scroll:s}=t;return s&&(Q1(r.x,s.offset.x),Q1(r.y,s.offset.y)),r}const Pre=({current:e})=>e?e.ownerDocument.defaultView:null,L$=(e,t)=>Math.abs(e-t);function y_e(e,t){const n=L$(e.x,t.x),r=L$(e.y,t.y);return Math.sqrt(n**2+r**2)}class kre{constructor(t,n,{transformPagePoint:r,contextWindow:s,dragSnapToOrigin:a=!1}={}){if(this.startEvent=null,this.lastMoveEvent=null,this.lastMoveEventInfo=null,this.handlers={},this.contextWindow=window,this.updatePoint=()=>{if(!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const b=LM(this.lastMoveEventInfo,this.history),T=this.startEvent!==null,S=y_e(b.offset,{x:0,y:0})>=3;if(!T&&!S)return;const{point:U}=b,{timestamp:N}=Uu;this.history.push({...U,timestamp:N});const{onStart:W,onMove:L}=this.handlers;T||(W&&W(this.lastMoveEvent,b),this.startEvent=this.lastMoveEvent),L&&L(this.lastMoveEvent,b)},this.handlePointerMove=(b,T)=>{this.lastMoveEvent=b,this.lastMoveEventInfo=kM(T,this.transformPagePoint),Oa.update(this.updatePoint,!0)},this.handlePointerUp=(b,T)=>{this.end();const{onEnd:S,onSessionEnd:U,resumeAnimation:N}=this.handlers;if(this.dragSnapToOrigin&&N&&N(),!(this.lastMoveEvent&&this.lastMoveEventInfo))return;const W=LM(b.type==="pointercancel"?this.lastMoveEventInfo:kM(T,this.transformPagePoint),this.history);this.startEvent&&S&&S(b,W),U&&U(b,W)},!B8(t))return;this.dragSnapToOrigin=a,this.handlers=n,this.transformPagePoint=r,this.contextWindow=s||window;const c=wB(t),i=kM(c,this.transformPagePoint),{point:f}=i,{timestamp:g}=Uu;this.history=[{...f,timestamp:g}];const{onSessionStart:y}=n;y&&y(t,LM(i,this.history)),this.removeListeners=_B(wC(this.contextWindow,"pointermove",this.handlePointerMove),wC(this.contextWindow,"pointerup",this.handlePointerUp),wC(this.contextWindow,"pointercancel",this.handlePointerUp))}updateHandlers(t){this.handlers=t}end(){this.removeListeners&&this.removeListeners(),o0(this.updatePoint)}}function kM(e,t){return t?{point:t(e.point)}:e}function M$(e,t){return{x:e.x-t.x,y:e.y-t.y}}function LM({point:e},t){return{point:e,delta:M$(e,Lre(t)),offset:M$(e,v_e(t)),velocity:x_e(t,.1)}}function v_e(e){return e[0]}function Lre(e){return e[e.length-1]}function x_e(e,t){if(e.length<2)return{x:0,y:0};let n=e.length-1,r=null;const s=Lre(e);for(;n>=0&&(r=e[n],!(s.timestamp-r.timestamp>Wm(t)));)n--;if(!r)return{x:0,y:0};const a=qm(s.timestamp-r.timestamp);if(a===0)return{x:0,y:0};const c={x:(s.x-r.x)/a,y:(s.y-r.y)/a};return c.x===1/0&&(c.x=0),c.y===1/0&&(c.y=0),c}function __e(e,{min:t,max:n},r){return t!==void 0&&e<t?e=r?Il(t,e,r.min):Math.max(e,t):n!==void 0&&e>n&&(e=r?Il(n,e,r.max):Math.min(e,n)),e}function N$(e,t,n){return{min:t!==void 0?e.min+t:void 0,max:n!==void 0?e.max+n-(e.max-e.min):void 0}}function w_e(e,{top:t,left:n,bottom:r,right:s}){return{x:N$(e.x,n,s),y:N$(e.y,t,r)}}function R$(e,t){let n=t.min-e.min,r=t.max-e.max;return t.max-t.min<e.max-e.min&&([n,r]=[r,n]),{min:n,max:r}}function b_e(e,t){return{x:R$(e.x,t.x),y:R$(e.y,t.y)}}function C_e(e,t){let n=.5;const r=ph(e),s=ph(t);return s>r?n=aS(t.min,t.max-r,e.min):r>s&&(n=aS(e.min,e.max-s,t.min)),a0(0,1,n)}function S_e(e,t){const n={};return t.min!==void 0&&(n.min=t.min-e.min),t.max!==void 0&&(n.max=t.max-e.min),n}const RO=.35;function B_e(e=RO){return e===!1?e=0:e===!0&&(e=RO),{x:O$(e,"left","right"),y:O$(e,"top","bottom")}}function O$(e,t,n){return{min:D$(e,t),max:D$(e,n)}}function D$(e,t){return typeof e=="number"?e:e[t]||0}const E_e=new WeakMap;class T_e{constructor(t){this.openDragLock=null,this.isDragging=!1,this.currentDirection=null,this.originPoint={x:0,y:0},this.constraints=!1,this.hasMutatedConstraints=!1,this.elastic=pc(),this.visualElement=t}start(t,{snapToCursor:n=!1}={}){const{presenceContext:r}=this.visualElement;if(r&&r.isPresent===!1)return;const s=y=>{const{dragSnapToOrigin:b}=this.getProps();b?this.pauseAnimation():this.stopAnimation(),n&&this.snapToCursor(wB(y).point)},a=(y,b)=>{const{drag:T,dragPropagation:S,onDragStart:U}=this.getProps();if(T&&!S&&(this.openDragLock&&this.openDragLock(),this.openDragLock=Sye(T),!this.openDragLock))return;this.isDragging=!0,this.currentDirection=null,this.resolveConstraints(),this.visualElement.projection&&(this.visualElement.projection.isAnimationBlocked=!0,this.visualElement.projection.target=void 0),jp(W=>{let L=this.getAxisMotionValue(W).get()||0;if(Xm.test(L)){const{projection:Q}=this.visualElement;if(Q&&Q.layout){const V=Q.layout.layoutBox[W];V&&(L=ph(V)*(parseFloat(L)/100))}}this.originPoint[W]=L}),U&&Oa.postRender(()=>U(y,b)),CO(this.visualElement,"transform");const{animationState:N}=this.visualElement;N&&N.setActive("whileDrag",!0)},c=(y,b)=>{const{dragPropagation:T,dragDirectionLock:S,onDirectionLock:U,onDrag:N}=this.getProps();if(!T&&!this.openDragLock)return;const{offset:W}=b;if(S&&this.currentDirection===null){this.currentDirection=I_e(W),this.currentDirection!==null&&U&&U(this.currentDirection);return}this.updateAxis("x",b.point,W),this.updateAxis("y",b.point,W),this.visualElement.render(),N&&N(y,b)},i=(y,b)=>this.stop(y,b),f=()=>jp(y=>{var b;return this.getAnimationState(y)==="paused"&&((b=this.getAxisMotionValue(y).animation)==null?void 0:b.play())}),{dragSnapToOrigin:g}=this.getProps();this.panSession=new kre(t,{onSessionStart:s,onStart:a,onMove:c,onSessionEnd:i,resumeAnimation:f},{transformPagePoint:this.visualElement.getTransformPagePoint(),dragSnapToOrigin:g,contextWindow:Pre(this.visualElement)})}stop(t,n){const r=this.isDragging;if(this.cancel(),!r)return;const{velocity:s}=n;this.startAnimation(s);const{onDragEnd:a}=this.getProps();a&&Oa.postRender(()=>a(t,n))}cancel(){this.isDragging=!1;const{projection:t,animationState:n}=this.visualElement;t&&(t.isAnimationBlocked=!1),this.panSession&&this.panSession.end(),this.panSession=void 0;const{dragPropagation:r}=this.getProps();!r&&this.openDragLock&&(this.openDragLock(),this.openDragLock=null),n&&n.setActive("whileDrag",!1)}updateAxis(t,n,r){const{drag:s}=this.getProps();if(!r||!A3(t,s,this.currentDirection))return;const a=this.getAxisMotionValue(t);let c=this.originPoint[t]+r[t];this.constraints&&this.constraints[t]&&(c=__e(c,this.constraints[t],this.elastic[t])),a.set(c)}resolveConstraints(){var a;const{dragConstraints:t,dragElastic:n}=this.getProps(),r=this.visualElement.projection&&!this.visualElement.projection.layout?this.visualElement.projection.measure(!1):(a=this.visualElement.projection)==null?void 0:a.layout,s=this.constraints;t&&D1(t)?this.constraints||(this.constraints=this.resolveRefConstraints()):t&&r?this.constraints=w_e(r.layoutBox,t):this.constraints=!1,this.elastic=B_e(n),s!==this.constraints&&r&&this.constraints&&!this.hasMutatedConstraints&&jp(c=>{this.constraints!==!1&&this.getAxisMotionValue(c)&&(this.constraints[c]=S_e(r.layoutBox[c],this.constraints[c]))})}resolveRefConstraints(){const{dragConstraints:t,onMeasureDragConstraints:n}=this.getProps();if(!t||!D1(t))return!1;const r=t.current,{projection:s}=this.visualElement;if(!s||!s.layout)return!1;const a=g_e(r,s.root,this.visualElement.getTransformPagePoint());let c=b_e(s.layout.layoutBox,a);if(n){const i=n(l_e(c));this.hasMutatedConstraints=!!i,i&&(c=Bre(i))}return c}startAnimation(t){const{drag:n,dragMomentum:r,dragElastic:s,dragTransition:a,dragSnapToOrigin:c,onDragTransitionEnd:i}=this.getProps(),f=this.constraints||{},g=jp(y=>{if(!A3(y,n,this.currentDirection))return;let b=f&&f[y]||{};c&&(b={min:0,max:0});const T=s?200:1e6,S=s?40:1e7,U={type:"inertia",velocity:r?t[y]:0,bounceStiffness:T,bounceDamping:S,timeConstant:750,restDelta:1,restSpeed:10,...a,...b};return this.startAxisValueAnimation(y,U)});return Promise.all(g).then(i)}startAxisValueAnimation(t,n){const r=this.getAxisMotionValue(t);return CO(this.visualElement,t),r.start(K8(t,r,0,n,this.visualElement,!1))}stopAnimation(){jp(t=>this.getAxisMotionValue(t).stop())}pauseAnimation(){jp(t=>{var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.pause()})}getAnimationState(t){var n;return(n=this.getAxisMotionValue(t).animation)==null?void 0:n.state}getAxisMotionValue(t){const n=`_drag${t.toUpperCase()}`,r=this.visualElement.getProps(),s=r[n];return s||this.visualElement.getValue(t,(r.initial?r.initial[t]:void 0)||0)}snapToCursor(t){jp(n=>{const{drag:r}=this.getProps();if(!A3(n,r,this.currentDirection))return;const{projection:s}=this.visualElement,a=this.getAxisMotionValue(n);if(s&&s.layout){const{min:c,max:i}=s.layout.layoutBox[n];a.set(t[n]-Il(c,i,.5))}})}scalePositionWithinConstraints(){if(!this.visualElement.current)return;const{drag:t,dragConstraints:n}=this.getProps(),{projection:r}=this.visualElement;if(!D1(n)||!r||!this.constraints)return;this.stopAnimation();const s={x:0,y:0};jp(c=>{const i=this.getAxisMotionValue(c);if(i&&this.constraints!==!1){const f=i.get();s[c]=C_e({min:f,max:f},this.constraints[c])}});const{transformTemplate:a}=this.visualElement.getProps();this.visualElement.current.style.transform=a?a({},""):"none",r.root&&r.root.updateScroll(),r.updateLayout(),this.resolveConstraints(),jp(c=>{if(!A3(c,t,null))return;const i=this.getAxisMotionValue(c),{min:f,max:g}=this.constraints[c];i.set(Il(f,g,s[c]))})}addListeners(){if(!this.visualElement.current)return;E_e.set(this.visualElement,this);const t=this.visualElement.current,n=wC(t,"pointerdown",f=>{const{drag:g,dragListener:y=!0}=this.getProps();g&&y&&this.start(f)}),r=()=>{const{dragConstraints:f}=this.getProps();D1(f)&&f.current&&(this.constraints=this.resolveRefConstraints())},{projection:s}=this.visualElement,a=s.addEventListener("measure",r);s&&!s.layout&&(s.root&&s.root.updateScroll(),s.updateLayout()),Oa.read(r);const c=AS(window,"resize",()=>this.scalePositionWithinConstraints()),i=s.addEventListener("didUpdate",({delta:f,hasLayoutChanged:g})=>{this.isDragging&&g&&(jp(y=>{const b=this.getAxisMotionValue(y);b&&(this.originPoint[y]+=f[y].translate,b.set(b.get()+f[y].translate))}),this.visualElement.render())});return()=>{c(),n(),a(),i&&i()}}getProps(){const t=this.visualElement.getProps(),{drag:n=!1,dragDirectionLock:r=!1,dragPropagation:s=!1,dragConstraints:a=!1,dragElastic:c=RO,dragMomentum:i=!0}=t;return{...t,drag:n,dragDirectionLock:r,dragPropagation:s,dragConstraints:a,dragElastic:c,dragMomentum:i}}}function A3(e,t,n){return(t===!0||t===e)&&(n===null||n===e)}function I_e(e,t=10){let n=null;return Math.abs(e.y)>t?n="y":Math.abs(e.x)>t&&(n="x"),n}class j_e extends iv{constructor(t){super(t),this.removeGroupControls=Qp,this.removeListeners=Qp,this.controls=new T_e(t)}mount(){const{dragControls:t}=this.node.getProps();t&&(this.removeGroupControls=t.subscribe(this.controls)),this.removeListeners=this.controls.addListeners()||Qp}unmount(){this.removeGroupControls(),this.removeListeners()}}const U$=e=>(t,n)=>{e&&Oa.postRender(()=>e(t,n))};class F_e extends iv{constructor(){super(...arguments),this.removePointerDownListener=Qp}onPointerDown(t){this.session=new kre(t,this.createPanHandlers(),{transformPagePoint:this.node.getTransformPagePoint(),contextWindow:Pre(this.node)})}createPanHandlers(){const{onPanSessionStart:t,onPanStart:n,onPan:r,onPanEnd:s}=this.node.getProps();return{onSessionStart:U$(t),onStart:U$(n),onMove:r,onEnd:(a,c)=>{delete this.session,s&&Oa.postRender(()=>s(a,c))}}}mount(){this.removePointerDownListener=wC(this.node.current,"pointerdown",t=>this.onPointerDown(t))}update(){this.session&&this.session.updateHandlers(this.createPanHandlers())}unmount(){this.removePointerDownListener(),this.session&&this.session.end()}}const UT={hasAnimatedSinceResize:!0,hasEverUpdated:!1};function z$(e,t){return t.max===t.min?0:e/(t.max-t.min)*100}const v2={correct:(e,t)=>{if(!t.target)return e;if(typeof e=="string")if(ns.test(e))e=parseFloat(e);else return e;const n=z$(e,t.target.x),r=z$(e,t.target.y);return`${n}% ${r}%`}},P_e={correct:(e,{treeScale:t,projectionDelta:n})=>{const r=e,s=Uy.parse(e);if(s.length>5)return r;const a=Uy.createTransformer(e),c=typeof s[0]!="number"?1:0,i=n.x.scale*t.x,f=n.y.scale*t.y;s[0+c]/=i,s[1+c]/=f;const g=Il(i,f,.5);return typeof s[2+c]=="number"&&(s[2+c]/=g),typeof s[3+c]=="number"&&(s[3+c]/=g),a(s)}};class k_e extends q.Component{componentDidMount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r,layoutId:s}=this.props,{projection:a}=t;Xye(L_e),a&&(n.group&&n.group.add(a),r&&r.register&&s&&r.register(a),a.root.didUpdate(),a.addEventListener("animationComplete",()=>{this.safeToRemove()}),a.setOptions({...a.options,onExitComplete:()=>this.safeToRemove()})),UT.hasEverUpdated=!0}getSnapshotBeforeUpdate(t){const{layoutDependency:n,visualElement:r,drag:s,isPresent:a}=this.props,c=r.projection;return c&&(c.isPresent=a,s||t.layoutDependency!==n||n===void 0||t.isPresent!==a?c.willUpdate():this.safeToRemove(),t.isPresent!==a&&(a?c.promote():c.relegate()||Oa.postRender(()=>{const i=c.getStack();(!i||!i.members.length)&&this.safeToRemove()}))),null}componentDidUpdate(){const{projection:t}=this.props.visualElement;t&&(t.root.didUpdate(),S8.postRender(()=>{!t.currentAnimation&&t.isLead()&&this.safeToRemove()}))}componentWillUnmount(){const{visualElement:t,layoutGroup:n,switchLayoutGroup:r}=this.props,{projection:s}=t;s&&(s.scheduleCheckAfterUnmount(),n&&n.group&&n.group.remove(s),r&&r.deregister&&r.deregister(s))}safeToRemove(){const{safeToRemove:t}=this.props;t&&t()}render(){return null}}function Mre(e){const[t,n]=vne(),r=q.useContext(f8);return A.jsx(k_e,{...e,layoutGroup:r,switchLayoutGroup:q.useContext(kne),isPresent:t,safeToRemove:n})}const L_e={borderRadius:{...v2,applyTo:["borderTopLeftRadius","borderTopRightRadius","borderBottomLeftRadius","borderBottomRightRadius"]},borderTopLeftRadius:v2,borderTopRightRadius:v2,borderBottomLeftRadius:v2,borderBottomRightRadius:v2,boxShadow:P_e};function M_e(e,t,n){const r=jd(e)?e:cS(e);return r.start(K8("",r,t,n)),r.animation}function N_e(e){return e instanceof SVGElement&&e.tagName!=="svg"}const R_e=(e,t)=>e.depth-t.depth;class O_e{constructor(){this.children=[],this.isDirty=!1}add(t){g8(this.children,t),this.isDirty=!0}remove(t){y8(this.children,t),this.isDirty=!0}forEach(t){this.isDirty&&this.children.sort(R_e),this.isDirty=!1,this.children.forEach(t)}}function D_e(e,t){const n=Zm.now(),r=({timestamp:s})=>{const a=s-n;a>=t&&(o0(r),e(a-t))};return Oa.read(r,!0),()=>o0(r)}const Nre=["TopLeft","TopRight","BottomLeft","BottomRight"],U_e=Nre.length,Q$=e=>typeof e=="string"?parseFloat(e):e,H$=e=>typeof e=="number"||ns.test(e);function z_e(e,t,n,r,s,a){s?(e.opacity=Il(0,n.opacity!==void 0?n.opacity:1,Q_e(r)),e.opacityExit=Il(t.opacity!==void 0?t.opacity:1,0,H_e(r))):a&&(e.opacity=Il(t.opacity!==void 0?t.opacity:1,n.opacity!==void 0?n.opacity:1,r));for(let c=0;c<U_e;c++){const i=`border${Nre[c]}Radius`;let f=V$(t,i),g=V$(n,i);if(f===void 0&&g===void 0)continue;f||(f=0),g||(g=0),f===0||g===0||H$(f)===H$(g)?(e[i]=Math.max(Il(Q$(f),Q$(g),r),0),(Xm.test(g)||Xm.test(f))&&(e[i]+="%")):e[i]=g}(t.rotate||n.rotate)&&(e.rotate=Il(t.rotate||0,n.rotate||0,r))}function V$(e,t){return e[t]!==void 0?e[t]:e.borderRadius}const Q_e=Rre(0,.5,ere),H_e=Rre(.5,.95,Qp);function Rre(e,t,n){return r=>r<e?0:r>t?1:n(aS(e,t,r))}function $$(e,t){e.min=t.min,e.max=t.max}function Ip(e,t){$$(e.x,t.x),$$(e.y,t.y)}function G$(e,t){e.translate=t.translate,e.scale=t.scale,e.originPoint=t.originPoint,e.origin=t.origin}function K$(e,t,n,r,s){return e-=t,e=sj(e,1/n,r),s!==void 0&&(e=sj(e,1/s,r)),e}function V_e(e,t=0,n=1,r=.5,s,a=e,c=e){if(Xm.test(t)&&(t=parseFloat(t),t=Il(c.min,c.max,t/100)-c.min),typeof t!="number")return;let i=Il(a.min,a.max,r);e===a&&(i-=t),e.min=K$(e.min,t,n,i,s),e.max=K$(e.max,t,n,i,s)}function W$(e,t,[n,r,s],a,c){V_e(e,t[n],t[r],t[s],t.scale,a,c)}const $_e=["x","scaleX","originX"],G_e=["y","scaleY","originY"];function q$(e,t,n,r){W$(e.x,t,$_e,n?n.x:void 0,r?r.x:void 0),W$(e.y,t,G_e,n?n.y:void 0,r?r.y:void 0)}function Z$(e){return e.translate===0&&e.scale===1}function Ore(e){return Z$(e.x)&&Z$(e.y)}function X$(e,t){return e.min===t.min&&e.max===t.max}function K_e(e,t){return X$(e.x,t.x)&&X$(e.y,t.y)}function Y$(e,t){return Math.round(e.min)===Math.round(t.min)&&Math.round(e.max)===Math.round(t.max)}function Dre(e,t){return Y$(e.x,t.x)&&Y$(e.y,t.y)}function J$(e){return ph(e.x)/ph(e.y)}function eG(e,t){return e.translate===t.translate&&e.scale===t.scale&&e.originPoint===t.originPoint}class W_e{constructor(){this.members=[]}add(t){g8(this.members,t),t.scheduleRender()}remove(t){if(y8(this.members,t),t===this.prevLead&&(this.prevLead=void 0),t===this.lead){const n=this.members[this.members.length-1];n&&this.promote(n)}}relegate(t){const n=this.members.findIndex(s=>t===s);if(n===0)return!1;let r;for(let s=n;s>=0;s--){const a=this.members[s];if(a.isPresent!==!1){r=a;break}}return r?(this.promote(r),!0):!1}promote(t,n){const r=this.lead;if(t!==r&&(this.prevLead=r,this.lead=t,t.show(),r)){r.instance&&r.scheduleRender(),t.scheduleRender(),t.resumeFrom=r,n&&(t.resumeFrom.preserveOpacity=!0),r.snapshot&&(t.snapshot=r.snapshot,t.snapshot.latestValues=r.animationValues||r.latestValues),t.root&&t.root.isUpdating&&(t.isLayoutDirty=!0);const{crossfade:s}=t.options;s===!1&&r.hide()}}exitAnimationComplete(){this.members.forEach(t=>{const{options:n,resumingFrom:r}=t;n.onExitComplete&&n.onExitComplete(),r&&r.options.onExitComplete&&r.options.onExitComplete()})}scheduleRender(){this.members.forEach(t=>{t.instance&&t.scheduleRender(!1)})}removeLeadSnapshot(){this.lead&&this.lead.snapshot&&(this.lead.snapshot=void 0)}}function q_e(e,t,n){let r="";const s=e.x.translate/t.x,a=e.y.translate/t.y,c=(n==null?void 0:n.z)||0;if((s||a||c)&&(r=`translate3d(${s}px, ${a}px, ${c}px) `),(t.x!==1||t.y!==1)&&(r+=`scale(${1/t.x}, ${1/t.y}) `),n){const{transformPerspective:g,rotate:y,rotateX:b,rotateY:T,skewX:S,skewY:U}=n;g&&(r=`perspective(${g}px) ${r}`),y&&(r+=`rotate(${y}deg) `),b&&(r+=`rotateX(${b}deg) `),T&&(r+=`rotateY(${T}deg) `),S&&(r+=`skewX(${S}deg) `),U&&(r+=`skewY(${U}deg) `)}const i=e.x.scale*t.x,f=e.y.scale*t.y;return(i!==1||f!==1)&&(r+=`scale(${i}, ${f})`),r||"none"}const MM=["","X","Y","Z"],Z_e={visibility:"hidden"},tG=1e3;let X_e=0;function NM(e,t,n,r){const{latestValues:s}=t;s[e]&&(n[e]=s[e],t.setStaticValue(e,0),r&&(r[e]=0))}function Ure(e){if(e.hasCheckedOptimisedAppear=!0,e.root===e)return;const{visualElement:t}=e.options;if(!t)return;const n=Kne(t);if(window.MotionHasOptimisedAnimation(n,"transform")){const{layout:s,layoutId:a}=e.options;window.MotionCancelOptimisedAnimation(n,"transform",Oa,!(s||a))}const{parent:r}=e;r&&!r.hasCheckedOptimisedAppear&&Ure(r)}function zre({attachResizeListener:e,defaultParent:t,measureScroll:n,checkIsScrollRoot:r,resetTransform:s}){return class{constructor(c={},i=t==null?void 0:t()){this.id=X_e++,this.animationId=0,this.children=new Set,this.options={},this.isTreeAnimating=!1,this.isAnimationBlocked=!1,this.isLayoutDirty=!1,this.isProjectionDirty=!1,this.isSharedProjectionDirty=!1,this.isTransformDirty=!1,this.updateManuallyBlocked=!1,this.updateBlockedByResize=!1,this.isUpdating=!1,this.isSVG=!1,this.needsReset=!1,this.shouldResetTransform=!1,this.hasCheckedOptimisedAppear=!1,this.treeScale={x:1,y:1},this.eventHandlers=new Map,this.hasTreeAnimated=!1,this.updateScheduled=!1,this.scheduleUpdate=()=>this.update(),this.projectionUpdateScheduled=!1,this.checkUpdateFailed=()=>{this.isUpdating&&(this.isUpdating=!1,this.clearAllSnapshots())},this.updateProjection=()=>{this.projectionUpdateScheduled=!1,this.nodes.forEach(e1e),this.nodes.forEach(s1e),this.nodes.forEach(o1e),this.nodes.forEach(t1e)},this.resolvedRelativeTargetAt=0,this.hasProjected=!1,this.isVisible=!0,this.animationProgress=0,this.sharedNodes=new Map,this.latestValues=c,this.root=i?i.root||i:this,this.path=i?[...i.path,i]:[],this.parent=i,this.depth=i?i.depth+1:0;for(let f=0;f<this.path.length;f++)this.path[f].shouldResetTransform=!0;this.root===this&&(this.nodes=new O_e)}addEventListener(c,i){return this.eventHandlers.has(c)||this.eventHandlers.set(c,new x8),this.eventHandlers.get(c).add(i)}notifyListeners(c,...i){const f=this.eventHandlers.get(c);f&&f.notify(...i)}hasListeners(c){return this.eventHandlers.has(c)}mount(c,i=this.root.hasTreeAnimated){if(this.instance)return;this.isSVG=N_e(c),this.instance=c;const{layoutId:f,layout:g,visualElement:y}=this.options;if(y&&!y.current&&y.mount(c),this.root.nodes.add(this),this.parent&&this.parent.children.add(this),i&&(g||f)&&(this.isLayoutDirty=!0),e){let b;const T=()=>this.root.updateBlockedByResize=!1;e(c,()=>{this.root.updateBlockedByResize=!0,b&&b(),b=D_e(T,250),UT.hasAnimatedSinceResize&&(UT.hasAnimatedSinceResize=!1,this.nodes.forEach(rG))})}f&&this.root.registerSharedNode(f,this),this.options.animate!==!1&&y&&(f||g)&&this.addEventListener("didUpdate",({delta:b,hasLayoutChanged:T,hasRelativeLayoutChanged:S,layout:U})=>{if(this.isTreeAnimationBlocked()){this.target=void 0,this.relativeTarget=void 0;return}const N=this.options.transition||y.getDefaultTransition()||d1e,{onLayoutAnimationStart:W,onLayoutAnimationComplete:L}=y.getProps(),Q=!this.targetLayout||!Dre(this.targetLayout,U),V=!T&&S;if(this.options.layoutRoot||this.resumeFrom||V||T&&(Q||!this.currentAnimation)){this.resumeFrom&&(this.resumingFrom=this.resumeFrom,this.resumingFrom.resumingFrom=void 0),this.setAnimationOrigin(b,V);const Z={...b8(N,"layout"),onPlay:W,onComplete:L};(y.shouldReduceMotion||this.options.layoutRoot)&&(Z.delay=0,Z.type=!1),this.startAnimation(Z)}else T||rG(this),this.isLead()&&this.options.onExitComplete&&this.options.onExitComplete();this.targetLayout=U})}unmount(){this.options.layoutId&&this.willUpdate(),this.root.nodes.remove(this);const c=this.getStack();c&&c.remove(this),this.parent&&this.parent.children.delete(this),this.instance=void 0,o0(this.updateProjection)}blockUpdate(){this.updateManuallyBlocked=!0}unblockUpdate(){this.updateManuallyBlocked=!1}isUpdateBlocked(){return this.updateManuallyBlocked||this.updateBlockedByResize}isTreeAnimationBlocked(){return this.isAnimationBlocked||this.parent&&this.parent.isTreeAnimationBlocked()||!1}startUpdate(){this.isUpdateBlocked()||(this.isUpdating=!0,this.nodes&&this.nodes.forEach(a1e),this.animationId++)}getTransformTemplate(){const{visualElement:c}=this.options;return c&&c.getProps().transformTemplate}willUpdate(c=!0){if(this.root.hasTreeAnimated=!0,this.root.isUpdateBlocked()){this.options.onExitComplete&&this.options.onExitComplete();return}if(window.MotionCancelOptimisedAnimation&&!this.hasCheckedOptimisedAppear&&Ure(this),!this.root.isUpdating&&this.root.startUpdate(),this.isLayoutDirty)return;this.isLayoutDirty=!0;for(let y=0;y<this.path.length;y++){const b=this.path[y];b.shouldResetTransform=!0,b.updateScroll("snapshot"),b.options.layoutRoot&&b.willUpdate(!1)}const{layoutId:i,layout:f}=this.options;if(i===void 0&&!f)return;const g=this.getTransformTemplate();this.prevTransformTemplateValue=g?g(this.latestValues,""):void 0,this.updateSnapshot(),c&&this.notifyListeners("willUpdate")}update(){if(this.updateScheduled=!1,this.isUpdateBlocked()){this.unblockUpdate(),this.clearAllSnapshots(),this.nodes.forEach(nG);return}this.isUpdating||this.nodes.forEach(r1e),this.isUpdating=!1,this.nodes.forEach(i1e),this.nodes.forEach(Y_e),this.nodes.forEach(J_e),this.clearAllSnapshots();const i=Zm.now();Uu.delta=a0(0,1e3/60,i-Uu.timestamp),Uu.timestamp=i,Uu.isProcessing=!0,BM.update.process(Uu),BM.preRender.process(Uu),BM.render.process(Uu),Uu.isProcessing=!1}didUpdate(){this.updateScheduled||(this.updateScheduled=!0,S8.read(this.scheduleUpdate))}clearAllSnapshots(){this.nodes.forEach(n1e),this.sharedNodes.forEach(l1e)}scheduleUpdateProjection(){this.projectionUpdateScheduled||(this.projectionUpdateScheduled=!0,Oa.preRender(this.updateProjection,!1,!0))}scheduleCheckAfterUnmount(){Oa.postRender(()=>{this.isLayoutDirty?this.root.didUpdate():this.root.checkUpdateFailed()})}updateSnapshot(){this.snapshot||!this.instance||(this.snapshot=this.measure(),this.snapshot&&!ph(this.snapshot.measuredBox.x)&&!ph(this.snapshot.measuredBox.y)&&(this.snapshot=void 0))}updateLayout(){if(!this.instance||(this.updateScroll(),!(this.options.alwaysMeasureLayout&&this.isLead())&&!this.isLayoutDirty))return;if(this.resumeFrom&&!this.resumeFrom.instance)for(let f=0;f<this.path.length;f++)this.path[f].updateScroll();const c=this.layout;this.layout=this.measure(!1),this.layoutCorrected=pc(),this.isLayoutDirty=!1,this.projectionDelta=void 0,this.notifyListeners("measure",this.layout.layoutBox);const{visualElement:i}=this.options;i&&i.notify("LayoutMeasure",this.layout.layoutBox,c?c.layoutBox:void 0)}updateScroll(c="measure"){let i=!!(this.options.layoutScroll&&this.instance);if(this.scroll&&this.scroll.animationId===this.root.animationId&&this.scroll.phase===c&&(i=!1),i){const f=r(this.instance);this.scroll={animationId:this.root.animationId,phase:c,isRoot:f,offset:n(this.instance),wasRoot:this.scroll?this.scroll.isRoot:f}}}resetTransform(){if(!s)return;const c=this.isLayoutDirty||this.shouldResetTransform||this.options.alwaysMeasureLayout,i=this.projectionDelta&&!Ore(this.projectionDelta),f=this.getTransformTemplate(),g=f?f(this.latestValues,""):void 0,y=g!==this.prevTransformTemplateValue;c&&(i||Jv(this.latestValues)||y)&&(s(this.instance,g),this.shouldResetTransform=!1,this.scheduleRender())}measure(c=!0){const i=this.measurePageBox();let f=this.removeElementScroll(i);return c&&(f=this.removeTransform(f)),h1e(f),{animationId:this.root.animationId,measuredBox:i,layoutBox:f,latestValues:{},source:this.id}}measurePageBox(){var g;const{visualElement:c}=this.options;if(!c)return pc();const i=c.measureViewportBox();if(!(((g=this.scroll)==null?void 0:g.wasRoot)||this.path.some(f1e))){const{scroll:y}=this.root;y&&(Q1(i.x,y.offset.x),Q1(i.y,y.offset.y))}return i}removeElementScroll(c){var f;const i=pc();if(Ip(i,c),(f=this.scroll)!=null&&f.wasRoot)return i;for(let g=0;g<this.path.length;g++){const y=this.path[g],{scroll:b,options:T}=y;y!==this.root&&b&&T.layoutScroll&&(b.wasRoot&&Ip(i,c),Q1(i.x,b.offset.x),Q1(i.y,b.offset.y))}return i}applyTransform(c,i=!1){const f=pc();Ip(f,c);for(let g=0;g<this.path.length;g++){const y=this.path[g];!i&&y.options.layoutScroll&&y.scroll&&y!==y.root&&H1(f,{x:-y.scroll.offset.x,y:-y.scroll.offset.y}),Jv(y.latestValues)&&H1(f,y.latestValues)}return Jv(this.latestValues)&&H1(f,this.latestValues),f}removeTransform(c){const i=pc();Ip(i,c);for(let f=0;f<this.path.length;f++){const g=this.path[f];if(!g.instance||!Jv(g.latestValues))continue;MO(g.latestValues)&&g.updateSnapshot();const y=pc(),b=g.measurePageBox();Ip(y,b),q$(i,g.latestValues,g.snapshot?g.snapshot.layoutBox:void 0,y)}return Jv(this.latestValues)&&q$(i,this.latestValues),i}setTargetDelta(c){this.targetDelta=c,this.root.scheduleUpdateProjection(),this.isProjectionDirty=!0}setOptions(c){this.options={...this.options,...c,crossfade:c.crossfade!==void 0?c.crossfade:!0}}clearMeasurements(){this.scroll=void 0,this.layout=void 0,this.snapshot=void 0,this.prevTransformTemplateValue=void 0,this.targetDelta=void 0,this.target=void 0,this.isLayoutDirty=!1}forceRelativeParentToResolveTarget(){this.relativeParent&&this.relativeParent.resolvedRelativeTargetAt!==Uu.timestamp&&this.relativeParent.resolveTargetDelta(!0)}resolveTargetDelta(c=!1){var T;const i=this.getLead();this.isProjectionDirty||(this.isProjectionDirty=i.isProjectionDirty),this.isTransformDirty||(this.isTransformDirty=i.isTransformDirty),this.isSharedProjectionDirty||(this.isSharedProjectionDirty=i.isSharedProjectionDirty);const f=!!this.resumingFrom||this!==i;if(!(c||f&&this.isSharedProjectionDirty||this.isProjectionDirty||(T=this.parent)!=null&&T.isProjectionDirty||this.attemptToResolveRelativeTarget||this.root.updateBlockedByResize))return;const{layout:y,layoutId:b}=this.options;if(!(!this.layout||!(y||b))){if(this.resolvedRelativeTargetAt=Uu.timestamp,!this.targetDelta&&!this.relativeTarget){const S=this.getClosestProjectingParent();S&&S.layout&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pc(),this.relativeTargetOrigin=pc(),CC(this.relativeTargetOrigin,this.layout.layoutBox,S.layout.layoutBox),Ip(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}if(!(!this.relativeTarget&&!this.targetDelta)&&(this.target||(this.target=pc(),this.targetWithTransforms=pc()),this.relativeTarget&&this.relativeTargetOrigin&&this.relativeParent&&this.relativeParent.target?(this.forceRelativeParentToResolveTarget(),A_e(this.target,this.relativeTarget,this.relativeParent.target)):this.targetDelta?(this.resumingFrom?this.target=this.applyTransform(this.layout.layoutBox):Ip(this.target,this.layout.layoutBox),jre(this.target,this.targetDelta)):Ip(this.target,this.layout.layoutBox),this.attemptToResolveRelativeTarget)){this.attemptToResolveRelativeTarget=!1;const S=this.getClosestProjectingParent();S&&!!S.resumingFrom==!!this.resumingFrom&&!S.options.layoutScroll&&S.target&&this.animationProgress!==1?(this.relativeParent=S,this.forceRelativeParentToResolveTarget(),this.relativeTarget=pc(),this.relativeTargetOrigin=pc(),CC(this.relativeTargetOrigin,this.target,S.target),Ip(this.relativeTarget,this.relativeTargetOrigin)):this.relativeParent=this.relativeTarget=void 0}}}getClosestProjectingParent(){if(!(!this.parent||MO(this.parent.latestValues)||Ire(this.parent.latestValues)))return this.parent.isProjecting()?this.parent:this.parent.getClosestProjectingParent()}isProjecting(){return!!((this.relativeTarget||this.targetDelta||this.options.layoutRoot)&&this.layout)}calcProjection(){var U;const c=this.getLead(),i=!!this.resumingFrom||this!==c;let f=!0;if((this.isProjectionDirty||(U=this.parent)!=null&&U.isProjectionDirty)&&(f=!1),i&&(this.isSharedProjectionDirty||this.isTransformDirty)&&(f=!1),this.resolvedRelativeTargetAt===Uu.timestamp&&(f=!1),f)return;const{layout:g,layoutId:y}=this.options;if(this.isTreeAnimating=!!(this.parent&&this.parent.isTreeAnimating||this.currentAnimation||this.pendingAnimation),this.isTreeAnimating||(this.targetDelta=this.relativeTarget=void 0),!this.layout||!(g||y))return;Ip(this.layoutCorrected,this.layout.layoutBox);const b=this.treeScale.x,T=this.treeScale.y;m_e(this.layoutCorrected,this.treeScale,this.path,i),c.layout&&!c.target&&(this.treeScale.x!==1||this.treeScale.y!==1)&&(c.target=c.layout.layoutBox,c.targetWithTransforms=pc());const{target:S}=c;if(!S){this.prevProjectionDelta&&(this.createProjectionDeltas(),this.scheduleRender());return}!this.projectionDelta||!this.prevProjectionDelta?this.createProjectionDeltas():(G$(this.prevProjectionDelta.x,this.projectionDelta.x),G$(this.prevProjectionDelta.y,this.projectionDelta.y)),bC(this.projectionDelta,this.layoutCorrected,S,this.latestValues),(this.treeScale.x!==b||this.treeScale.y!==T||!eG(this.projectionDelta.x,this.prevProjectionDelta.x)||!eG(this.projectionDelta.y,this.prevProjectionDelta.y))&&(this.hasProjected=!0,this.scheduleRender(),this.notifyListeners("projectionUpdate",S))}hide(){this.isVisible=!1}show(){this.isVisible=!0}scheduleRender(c=!0){var i;if((i=this.options.visualElement)==null||i.scheduleRender(),c){const f=this.getStack();f&&f.scheduleRender()}this.resumingFrom&&!this.resumingFrom.instance&&(this.resumingFrom=void 0)}createProjectionDeltas(){this.prevProjectionDelta=z1(),this.projectionDelta=z1(),this.projectionDeltaWithTransform=z1()}setAnimationOrigin(c,i=!1){const f=this.snapshot,g=f?f.latestValues:{},y={...this.latestValues},b=z1();(!this.relativeParent||!this.relativeParent.options.layoutRoot)&&(this.relativeTarget=this.relativeTargetOrigin=void 0),this.attemptToResolveRelativeTarget=!i;const T=pc(),S=f?f.source:void 0,U=this.layout?this.layout.source:void 0,N=S!==U,W=this.getStack(),L=!W||W.members.length<=1,Q=!!(N&&!L&&this.options.crossfade===!0&&!this.path.some(u1e));this.animationProgress=0;let V;this.mixTargetDelta=Z=>{const ne=Z/1e3;iG(b.x,c.x,ne),iG(b.y,c.y,ne),this.setTargetDelta(b),this.relativeTarget&&this.relativeTargetOrigin&&this.layout&&this.relativeParent&&this.relativeParent.layout&&(CC(T,this.layout.layoutBox,this.relativeParent.layout.layoutBox),c1e(this.relativeTarget,this.relativeTargetOrigin,T,ne),V&&K_e(this.relativeTarget,V)&&(this.isProjectionDirty=!1),V||(V=pc()),Ip(V,this.relativeTarget)),N&&(this.animationValues=y,z_e(y,g,this.latestValues,ne,Q,L)),this.root.scheduleUpdateProjection(),this.scheduleRender(),this.animationProgress=ne},this.mixTargetDelta(this.options.layoutRoot?1e3:0)}startAnimation(c){this.notifyListeners("animationStart"),this.currentAnimation&&this.currentAnimation.stop(),this.resumingFrom&&this.resumingFrom.currentAnimation&&this.resumingFrom.currentAnimation.stop(),this.pendingAnimation&&(o0(this.pendingAnimation),this.pendingAnimation=void 0),this.pendingAnimation=Oa.update(()=>{UT.hasAnimatedSinceResize=!0,this.currentAnimation=M_e(0,tG,{...c,onUpdate:i=>{this.mixTargetDelta(i),c.onUpdate&&c.onUpdate(i)},onStop:()=>{},onComplete:()=>{c.onComplete&&c.onComplete(),this.completeAnimation()}}),this.resumingFrom&&(this.resumingFrom.currentAnimation=this.currentAnimation),this.pendingAnimation=void 0})}completeAnimation(){this.resumingFrom&&(this.resumingFrom.currentAnimation=void 0,this.resumingFrom.preserveOpacity=void 0);const c=this.getStack();c&&c.exitAnimationComplete(),this.resumingFrom=this.currentAnimation=this.animationValues=void 0,this.notifyListeners("animationComplete")}finishAnimation(){this.currentAnimation&&(this.mixTargetDelta&&this.mixTargetDelta(tG),this.currentAnimation.stop()),this.completeAnimation()}applyTransformsToTarget(){const c=this.getLead();let{targetWithTransforms:i,target:f,layout:g,latestValues:y}=c;if(!(!i||!f||!g)){if(this!==c&&this.layout&&g&&Qre(this.options.animationType,this.layout.layoutBox,g.layoutBox)){f=this.target||pc();const b=ph(this.layout.layoutBox.x);f.x.min=c.target.x.min,f.x.max=f.x.min+b;const T=ph(this.layout.layoutBox.y);f.y.min=c.target.y.min,f.y.max=f.y.min+T}Ip(i,f),H1(i,y),bC(this.projectionDeltaWithTransform,this.layoutCorrected,i,y)}}registerSharedNode(c,i){this.sharedNodes.has(c)||this.sharedNodes.set(c,new W_e),this.sharedNodes.get(c).add(i);const g=i.options.initialPromotionConfig;i.promote({transition:g?g.transition:void 0,preserveFollowOpacity:g&&g.shouldPreserveFollowOpacity?g.shouldPreserveFollowOpacity(i):void 0})}isLead(){const c=this.getStack();return c?c.lead===this:!0}getLead(){var i;const{layoutId:c}=this.options;return c?((i=this.getStack())==null?void 0:i.lead)||this:this}getPrevLead(){var i;const{layoutId:c}=this.options;return c?(i=this.getStack())==null?void 0:i.prevLead:void 0}getStack(){const{layoutId:c}=this.options;if(c)return this.root.sharedNodes.get(c)}promote({needsReset:c,transition:i,preserveFollowOpacity:f}={}){const g=this.getStack();g&&g.promote(this,f),c&&(this.projectionDelta=void 0,this.needsReset=!0),i&&this.setOptions({transition:i})}relegate(){const c=this.getStack();return c?c.relegate(this):!1}resetSkewAndRotation(){const{visualElement:c}=this.options;if(!c)return;let i=!1;const{latestValues:f}=c;if((f.z||f.rotate||f.rotateX||f.rotateY||f.rotateZ||f.skewX||f.skewY)&&(i=!0),!i)return;const g={};f.z&&NM("z",c,g,this.animationValues);for(let y=0;y<MM.length;y++)NM(`rotate${MM[y]}`,c,g,this.animationValues),NM(`skew${MM[y]}`,c,g,this.animationValues);c.render();for(const y in g)c.setStaticValue(y,g[y]),this.animationValues&&(this.animationValues[y]=g[y]);c.scheduleRender()}getProjectionStyles(c){if(!this.instance||this.isSVG)return;if(!this.isVisible)return Z_e;const i={visibility:""},f=this.getTransformTemplate();if(this.needsReset)return this.needsReset=!1,i.opacity="",i.pointerEvents=DT(c==null?void 0:c.pointerEvents)||"",i.transform=f?f(this.latestValues,""):"none",i;const g=this.getLead();if(!this.projectionDelta||!this.layout||!g.target){const S={};return this.options.layoutId&&(S.opacity=this.latestValues.opacity!==void 0?this.latestValues.opacity:1,S.pointerEvents=DT(c==null?void 0:c.pointerEvents)||""),this.hasProjected&&!Jv(this.latestValues)&&(S.transform=f?f({},""):"none",this.hasProjected=!1),S}const y=g.animationValues||g.latestValues;this.applyTransformsToTarget(),i.transform=q_e(this.projectionDeltaWithTransform,this.treeScale,y),f&&(i.transform=f(y,i.transform));const{x:b,y:T}=this.projectionDelta;i.transformOrigin=`${b.origin*100}% ${T.origin*100}% 0`,g.animationValues?i.opacity=g===this?y.opacity??this.latestValues.opacity??1:this.preserveOpacity?this.latestValues.opacity:y.opacityExit:i.opacity=g===this?y.opacity!==void 0?y.opacity:"":y.opacityExit!==void 0?y.opacityExit:0;for(const S in dS){if(y[S]===void 0)continue;const{correct:U,applyTo:N,isCSSVariable:W}=dS[S],L=i.transform==="none"?y[S]:U(y[S],g);if(N){const Q=N.length;for(let V=0;V<Q;V++)i[N[V]]=L}else W?this.options.visualElement.renderState.vars[S]=L:i[S]=L}return this.options.layoutId&&(i.pointerEvents=g===this?DT(c==null?void 0:c.pointerEvents)||"":"none"),i}clearSnapshot(){this.resumeFrom=this.snapshot=void 0}resetTree(){this.root.nodes.forEach(c=>{var i;return(i=c.currentAnimation)==null?void 0:i.stop()}),this.root.nodes.forEach(nG),this.root.sharedNodes.clear()}}}function Y_e(e){e.updateLayout()}function J_e(e){var n;const t=((n=e.resumeFrom)==null?void 0:n.snapshot)||e.snapshot;if(e.isLead()&&e.layout&&t&&e.hasListeners("didUpdate")){const{layoutBox:r,measuredBox:s}=e.layout,{animationType:a}=e.options,c=t.source!==e.layout.source;a==="size"?jp(b=>{const T=c?t.measuredBox[b]:t.layoutBox[b],S=ph(T);T.min=r[b].min,T.max=T.min+S}):Qre(a,t.layoutBox,r)&&jp(b=>{const T=c?t.measuredBox[b]:t.layoutBox[b],S=ph(r[b]);T.max=T.min+S,e.relativeTarget&&!e.currentAnimation&&(e.isProjectionDirty=!0,e.relativeTarget[b].max=e.relativeTarget[b].min+S)});const i=z1();bC(i,r,t.layoutBox);const f=z1();c?bC(f,e.applyTransform(s,!0),t.measuredBox):bC(f,r,t.layoutBox);const g=!Ore(i);let y=!1;if(!e.resumeFrom){const b=e.getClosestProjectingParent();if(b&&!b.resumeFrom){const{snapshot:T,layout:S}=b;if(T&&S){const U=pc();CC(U,t.layoutBox,T.layoutBox);const N=pc();CC(N,r,S.layoutBox),Dre(U,N)||(y=!0),b.options.layoutRoot&&(e.relativeTarget=N,e.relativeTargetOrigin=U,e.relativeParent=b)}}}e.notifyListeners("didUpdate",{layout:r,snapshot:t,delta:f,layoutDelta:i,hasLayoutChanged:g,hasRelativeLayoutChanged:y})}else if(e.isLead()){const{onExitComplete:r}=e.options;r&&r()}e.options.transition=void 0}function e1e(e){e.parent&&(e.isProjecting()||(e.isProjectionDirty=e.parent.isProjectionDirty),e.isSharedProjectionDirty||(e.isSharedProjectionDirty=!!(e.isProjectionDirty||e.parent.isProjectionDirty||e.parent.isSharedProjectionDirty)),e.isTransformDirty||(e.isTransformDirty=e.parent.isTransformDirty))}function t1e(e){e.isProjectionDirty=e.isSharedProjectionDirty=e.isTransformDirty=!1}function n1e(e){e.clearSnapshot()}function nG(e){e.clearMeasurements()}function r1e(e){e.isLayoutDirty=!1}function i1e(e){const{visualElement:t}=e.options;t&&t.getProps().onBeforeLayoutMeasure&&t.notify("BeforeLayoutMeasure"),e.resetTransform()}function rG(e){e.finishAnimation(),e.targetDelta=e.relativeTarget=e.target=void 0,e.isProjectionDirty=!0}function s1e(e){e.resolveTargetDelta()}function o1e(e){e.calcProjection()}function a1e(e){e.resetSkewAndRotation()}function l1e(e){e.removeLeadSnapshot()}function iG(e,t,n){e.translate=Il(t.translate,0,n),e.scale=Il(t.scale,1,n),e.origin=t.origin,e.originPoint=t.originPoint}function sG(e,t,n,r){e.min=Il(t.min,n.min,r),e.max=Il(t.max,n.max,r)}function c1e(e,t,n,r){sG(e.x,t.x,n.x,r),sG(e.y,t.y,n.y,r)}function u1e(e){return e.animationValues&&e.animationValues.opacityExit!==void 0}const d1e={duration:.45,ease:[.4,0,.1,1]},oG=e=>typeof navigator<"u"&&navigator.userAgent&&navigator.userAgent.toLowerCase().includes(e),aG=oG("applewebkit/")&&!oG("chrome/")?Math.round:Qp;function lG(e){e.min=aG(e.min),e.max=aG(e.max)}function h1e(e){lG(e.x),lG(e.y)}function Qre(e,t,n){return e==="position"||e==="preserve-aspect"&&!p_e(J$(t),J$(n),.2)}function f1e(e){var t;return e!==e.root&&((t=e.scroll)==null?void 0:t.wasRoot)}const p1e=zre({attachResizeListener:(e,t)=>AS(e,"resize",t),measureScroll:()=>({x:document.documentElement.scrollLeft||document.body.scrollLeft,y:document.documentElement.scrollTop||document.body.scrollTop}),checkIsScrollRoot:()=>!0}),RM={current:void 0},Hre=zre({measureScroll:e=>({x:e.scrollLeft,y:e.scrollTop}),defaultParent:()=>{if(!RM.current){const e=new p1e({});e.mount(window),e.setOptions({layoutScroll:!0}),RM.current=e}return RM.current},resetTransform:(e,t)=>{e.style.transform=t!==void 0?t:"none"},checkIsScrollRoot:e=>window.getComputedStyle(e).position==="fixed"}),A1e={pan:{Feature:F_e},drag:{Feature:j_e,ProjectionNode:Hre,MeasureLayout:Mre}};function cG(e,t,n){const{props:r}=e;e.animationState&&r.whileHover&&e.animationState.setActive("whileHover",n==="Start");const s="onHover"+n,a=r[s];a&&Oa.postRender(()=>a(t,wB(t)))}class m1e extends iv{mount(){const{current:t}=this.node;t&&(this.unmount=Bye(t,(n,r)=>(cG(this.node,r,"Start"),s=>cG(this.node,s,"End"))))}unmount(){}}class g1e extends iv{constructor(){super(...arguments),this.isActive=!1}onFocus(){let t=!1;try{t=this.node.current.matches(":focus-visible")}catch{t=!0}!t||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!0),this.isActive=!0)}onBlur(){!this.isActive||!this.node.animationState||(this.node.animationState.setActive("whileFocus",!1),this.isActive=!1)}mount(){this.unmount=_B(AS(this.node.current,"focus",()=>this.onFocus()),AS(this.node.current,"blur",()=>this.onBlur()))}unmount(){}}function uG(e,t,n){const{props:r}=e;if(e.current instanceof HTMLButtonElement&&e.current.disabled)return;e.animationState&&r.whileTap&&e.animationState.setActive("whileTap",n==="Start");const s="onTap"+(n==="End"?"":n),a=r[s];a&&Oa.postRender(()=>a(t,wB(t)))}class y1e extends iv{mount(){const{current:t}=this.node;t&&(this.unmount=jye(t,(n,r)=>(uG(this.node,r,"Start"),(s,{success:a})=>uG(this.node,s,a?"End":"Cancel")),{useGlobalTarget:this.node.props.globalTapTarget}))}unmount(){}}const OO=new WeakMap,OM=new WeakMap,v1e=e=>{const t=OO.get(e.target);t&&t(e)},x1e=e=>{e.forEach(v1e)};function _1e({root:e,...t}){const n=e||document;OM.has(n)||OM.set(n,{});const r=OM.get(n),s=JSON.stringify(t);return r[s]||(r[s]=new IntersectionObserver(x1e,{root:e,...t})),r[s]}function w1e(e,t,n){const r=_1e(t);return OO.set(e,n),r.observe(e),()=>{OO.delete(e),r.unobserve(e)}}const b1e={some:0,all:1};class C1e extends iv{constructor(){super(...arguments),this.hasEnteredView=!1,this.isInView=!1}startObserver(){this.unmount();const{viewport:t={}}=this.node.getProps(),{root:n,margin:r,amount:s="some",once:a}=t,c={root:n?n.current:void 0,rootMargin:r,threshold:typeof s=="number"?s:b1e[s]},i=f=>{const{isIntersecting:g}=f;if(this.isInView===g||(this.isInView=g,a&&!g&&this.hasEnteredView))return;g&&(this.hasEnteredView=!0),this.node.animationState&&this.node.animationState.setActive("whileInView",g);const{onViewportEnter:y,onViewportLeave:b}=this.node.getProps(),T=g?y:b;T&&T(f)};return w1e(this.node.current,c,i)}mount(){this.startObserver()}update(){if(typeof IntersectionObserver>"u")return;const{props:t,prevProps:n}=this.node;["amount","margin","root"].some(S1e(t,n))&&this.startObserver()}unmount(){}}function S1e({viewport:e={}},{viewport:t={}}={}){return n=>e[n]!==t[n]}const B1e={inView:{Feature:C1e},tap:{Feature:y1e},focus:{Feature:g1e},hover:{Feature:m1e}},E1e={layout:{ProjectionNode:Hre,MeasureLayout:Mre}},DO={current:null},Vre={current:!1};function T1e(){if(Vre.current=!0,!!A8)if(window.matchMedia){const e=window.matchMedia("(prefers-reduced-motion)"),t=()=>DO.current=e.matches;e.addListener(t),t()}else DO.current=!1}const I1e=[...Are,Sd,Uy],j1e=e=>I1e.find(pre(e)),F1e=new WeakMap;function P1e(e,t,n){for(const r in t){const s=t[r],a=n[r];if(jd(s))e.addValue(r,s);else if(jd(a))e.addValue(r,cS(s,{owner:e}));else if(a!==s)if(e.hasValue(r)){const c=e.getValue(r);c.liveStyle===!0?c.jump(s):c.hasAnimated||c.set(s)}else{const c=e.getStaticValue(r);e.addValue(r,cS(c!==void 0?c:s,{owner:e}))}}for(const r in n)t[r]===void 0&&e.removeValue(r);return t}const dG=["AnimationStart","AnimationComplete","Update","BeforeLayoutMeasure","LayoutMeasure","LayoutAnimationStart","LayoutAnimationComplete"];class k1e{scrapeMotionValuesFromProps(t,n,r){return{}}constructor({parent:t,props:n,presenceContext:r,reducedMotionConfig:s,blockInitialAnimation:a,visualState:c},i={}){this.current=null,this.children=new Set,this.isVariantNode=!1,this.isControllingVariants=!1,this.shouldReduceMotion=null,this.values=new Map,this.KeyframeResolver=V8,this.features={},this.valueSubscriptions=new Map,this.prevMotionValues={},this.events={},this.propEventSubscriptions={},this.notifyUpdate=()=>this.notify("Update",this.latestValues),this.render=()=>{this.current&&(this.triggerBuild(),this.renderInstance(this.current,this.renderState,this.props.style,this.projection))},this.renderScheduledAt=0,this.scheduleRender=()=>{const S=Zm.now();this.renderScheduledAt<S&&(this.renderScheduledAt=S,Oa.render(this.render,!1,!0))};const{latestValues:f,renderState:g,onUpdate:y}=c;this.onUpdate=y,this.latestValues=f,this.baseTarget={...f},this.initialValues=n.initial?{...f}:{},this.renderState=g,this.parent=t,this.props=n,this.presenceContext=r,this.depth=t?t.depth+1:0,this.reducedMotionConfig=s,this.options=i,this.blockInitialAnimation=!!a,this.isControllingVariants=VF(n),this.isVariantNode=Fne(n),this.isVariantNode&&(this.variantChildren=new Set),this.manuallyAnimateOnMount=!!(t&&t.current);const{willChange:b,...T}=this.scrapeMotionValuesFromProps(n,{},this);for(const S in T){const U=T[S];f[S]!==void 0&&jd(U)&&U.set(f[S],!1)}}mount(t){this.current=t,F1e.set(t,this),this.projection&&!this.projection.instance&&this.projection.mount(t),this.parent&&this.isVariantNode&&!this.isControllingVariants&&(this.removeFromVariantTree=this.parent.addVariantChild(this)),this.values.forEach((n,r)=>this.bindToMotionValue(r,n)),Vre.current||T1e(),this.shouldReduceMotion=this.reducedMotionConfig==="never"?!1:this.reducedMotionConfig==="always"?!0:DO.current,this.parent&&this.parent.children.add(this),this.update(this.props,this.presenceContext)}unmount(){this.projection&&this.projection.unmount(),o0(this.notifyUpdate),o0(this.render),this.valueSubscriptions.forEach(t=>t()),this.valueSubscriptions.clear(),this.removeFromVariantTree&&this.removeFromVariantTree(),this.parent&&this.parent.children.delete(this);for(const t in this.events)this.events[t].clear();for(const t in this.features){const n=this.features[t];n&&(n.unmount(),n.isMounted=!1)}this.current=null}bindToMotionValue(t,n){this.valueSubscriptions.has(t)&&this.valueSubscriptions.get(t)();const r=Jx.has(t);r&&this.onBindTransform&&this.onBindTransform();const s=n.on("change",i=>{this.latestValues[t]=i,this.props.onUpdate&&Oa.preRender(this.notifyUpdate),r&&this.projection&&(this.projection.isTransformDirty=!0)}),a=n.on("renderRequest",this.scheduleRender);let c;window.MotionCheckAppearSync&&(c=window.MotionCheckAppearSync(this,t,n)),this.valueSubscriptions.set(t,()=>{s(),a(),c&&c(),n.owner&&n.stop()})}sortNodePosition(t){return!this.current||!this.sortInstanceNodePosition||this.type!==t.type?0:this.sortInstanceNodePosition(this.current,t.current)}updateFeatures(){let t="animation";for(t in xw){const n=xw[t];if(!n)continue;const{isEnabled:r,Feature:s}=n;if(!this.features[t]&&s&&r(this.props)&&(this.features[t]=new s(this)),this.features[t]){const a=this.features[t];a.isMounted?a.update():(a.mount(),a.isMounted=!0)}}}triggerBuild(){this.build(this.renderState,this.latestValues,this.props)}measureViewportBox(){return this.current?this.measureInstanceViewportBox(this.current,this.props):pc()}getStaticValue(t){return this.latestValues[t]}setStaticValue(t,n){this.latestValues[t]=n}update(t,n){(t.transformTemplate||this.props.transformTemplate)&&this.scheduleRender(),this.prevProps=this.props,this.props=t,this.prevPresenceContext=this.presenceContext,this.presenceContext=n;for(let r=0;r<dG.length;r++){const s=dG[r];this.propEventSubscriptions[s]&&(this.propEventSubscriptions[s](),delete this.propEventSubscriptions[s]);const a="on"+s,c=t[a];c&&(this.propEventSubscriptions[s]=this.on(s,c))}this.prevMotionValues=P1e(this,this.scrapeMotionValuesFromProps(t,this.prevProps,this),this.prevMotionValues),this.handleChildMotionValue&&this.handleChildMotionValue(),this.onUpdate&&this.onUpdate(this)}getProps(){return this.props}getVariant(t){return this.props.variants?this.props.variants[t]:void 0}getDefaultTransition(){return this.props.transition}getTransformPagePoint(){return this.props.transformPagePoint}getClosestVariantNode(){return this.isVariantNode?this:this.parent?this.parent.getClosestVariantNode():void 0}addVariantChild(t){const n=this.getClosestVariantNode();if(n)return n.variantChildren&&n.variantChildren.add(t),()=>n.variantChildren.delete(t)}addValue(t,n){const r=this.values.get(t);n!==r&&(r&&this.removeValue(t),this.bindToMotionValue(t,n),this.values.set(t,n),this.latestValues[t]=n.get())}removeValue(t){this.values.delete(t);const n=this.valueSubscriptions.get(t);n&&(n(),this.valueSubscriptions.delete(t)),delete this.latestValues[t],this.removeValueFromRenderState(t,this.renderState)}hasValue(t){return this.values.has(t)}getValue(t,n){if(this.props.values&&this.props.values[t])return this.props.values[t];let r=this.values.get(t);return r===void 0&&n!==void 0&&(r=cS(n===null?void 0:n,{owner:this}),this.addValue(t,r)),r}readValue(t,n){let r=this.latestValues[t]!==void 0||!this.current?this.latestValues[t]:this.getBaseTargetFromProps(this.props,t)??this.readValueFromInstance(this.current,t,this.options);return r!=null&&(typeof r=="string"&&(hre(r)||nre(r))?r=parseFloat(r):!j1e(r)&&Uy.test(n)&&(r=cre(t,n)),this.setBaseTarget(t,jd(r)?r.get():r)),jd(r)?r.get():r}setBaseTarget(t,n){this.baseTarget[t]=n}getBaseTarget(t){var a;const{initial:n}=this.props;let r;if(typeof n=="string"||typeof n=="object"){const c=O8(this.props,n,(a=this.presenceContext)==null?void 0:a.custom);c&&(r=c[t])}if(n&&r!==void 0)return r;const s=this.getBaseTargetFromProps(this.props,t);return s!==void 0&&!jd(s)?s:this.initialValues[t]!==void 0&&r===void 0?void 0:this.baseTarget[t]}on(t,n){return this.events[t]||(this.events[t]=new x8),this.events[t].add(n)}notify(t,...n){this.events[t]&&this.events[t].notify(...n)}}class $re extends k1e{constructor(){super(...arguments),this.KeyframeResolver=mre}sortInstanceNodePosition(t,n){return t.compareDocumentPosition(n)&2?1:-1}getBaseTargetFromProps(t,n){return t.style?t.style[n]:void 0}removeValueFromRenderState(t,{vars:n,style:r}){delete n[t],delete r[t]}handleChildMotionValue(){this.childSubscription&&(this.childSubscription(),delete this.childSubscription);const{children:t}=this.props;jd(t)&&(this.childSubscription=t.on("change",n=>{this.current&&(this.current.textContent=`${n}`)}))}}function L1e(e){return window.getComputedStyle(e)}class M1e extends $re{constructor(){super(...arguments),this.type="html",this.renderInstance=Qne}readValueFromInstance(t,n){if(Jx.has(n))return Wve(t,n);{const r=L1e(t),s=(j8(n)?r.getPropertyValue(n):r[n])||0;return typeof s=="string"?s.trim():s}}measureInstanceViewportBox(t,{transformPagePoint:n}){return Fre(t,n)}build(t,n,r){k8(t,n,r.transformTemplate)}scrapeMotionValuesFromProps(t,n,r){return D8(t,n,r)}}class N1e extends $re{constructor(){super(...arguments),this.type="svg",this.isSVGTag=!1,this.measureInstanceViewportBox=pc,this.updateDimensions=()=>{this.current&&!this.renderState.dimensions&&zne(this.current,this.renderState)}}getBaseTargetFromProps(t,n){return t[n]}readValueFromInstance(t,n){if(Jx.has(n)){const r=lre(n);return r&&r.default||0}return n=Hne.has(n)?n:I8(n),t.getAttribute(n)}scrapeMotionValuesFromProps(t,n,r){return $ne(t,n,r)}onBindTransform(){this.current&&!this.renderState.dimensions&&Oa.postRender(this.updateDimensions)}build(t,n,r){N8(t,n,this.isSVGTag,r.transformTemplate)}renderInstance(t,n,r,s){Vne(t,n,r,s)}mount(t){this.isSVGTag=R8(t.tagName),super.mount(t)}}const R1e=(e,t)=>M8(e)?new N1e(t):new M1e(t,{allowProjection:e!==q.Fragment}),O1e=_ve({...o_e,...B1e,...A1e,...E1e},R1e),Uo=Rye(O1e),D1e={some:0,all:1};function U1e(e,t,{root:n,margin:r,amount:s="some"}={}){const a=Bne(e),c=new WeakMap,i=g=>{g.forEach(y=>{const b=c.get(y.target);if(y.isIntersecting!==!!b)if(y.isIntersecting){const T=t(y.target,y);typeof T=="function"?c.set(y.target,T):f.unobserve(y.target)}else typeof b=="function"&&(b(y),c.delete(y.target))})},f=new IntersectionObserver(i,{root:n,rootMargin:r,threshold:typeof s=="number"?s:D1e[s]});return a.forEach(g=>f.observe(g)),()=>f.disconnect()}function Gre(e,{root:t,margin:n,amount:r,once:s=!1,initial:a=!1}={}){const[c,i]=q.useState(a);return q.useEffect(()=>{if(!e.current||s&&c)return;const f=()=>(i(!0),s?void 0:()=>i(!1)),g={root:t&&t.current||void 0,margin:n,amount:r};return U1e(e.current,f,g)},[t,e,n,s,r]),c}const GF="/assets/SWIFTLOGIX%20Logo%202-DLdR8UC2.png",z1e=()=>A.jsx(Uo.div,{initial:{opacity:0,y:-50},animate:{opacity:1,y:0},transition:{duration:.3,ease:"easeInOut"},children:A.jsxs("div",{className:"w-screen h-screen bg-[#009688] text-white",children:[A.jsxs("div",{className:"w-[50%] ml-2 shadow-2xl rounded-xl p-4 flex flex-col items-center justify-center mb-6",children:[A.jsx("div",{className:"text-[44px] max-[422px]:text-[36px] font-semibold",children:"SwiftLogix"}),A.jsx("div",{className:"text-[8px] font-semibold",children:"Revolutionizing Logistics & Delivery"})]}),A.jsx("ul",{className:"cursor-pointer p-2 rounded-lg",children:[{icon:A.jsx(mB,{size:20}),label:"Home",ref:"/"},{icon:A.jsx(tne,{size:20}),label:"Live Track",ref:"/live-track"},{icon:A.jsx(MF,{size:20}),label:"Become a Rider",ref:"/rider-login"},{icon:A.jsx(OF,{size:20}),label:"Become a Customer",ref:"/login"}].map((e,t)=>A.jsx(ss,{to:e.ref,children:A.jsxs("li",{className:"font-medium flex items-center gap-2 justify-start hover:bg-[#009688] p-2 rounded-lg hover:text-[#F7F7F7] text-[16px]",children:[A.jsx("span",{className:"text-[#FF7043] w-6 flex justify-center",children:e.icon}),A.jsx("span",{children:e.label})]},t)}))})]})});function _h(){const[e,t]=q.useState(!1),n=()=>t(!e);return A.jsxs("div",{children:[A.jsx("div",{className:"min-[550px]:hidden fixed top-4 right-4 z-50",children:A.jsx("button",{onClick:n,className:"text-white bg-teal-600 p-2 rounded-lg shadow-lg",children:e?A.jsx(RF,{size:20}):A.jsx(LF,{size:20})})}),A.jsx(Vu,{children:!e&&A.jsx(Uo.nav,{initial:{y:-50,opacity:0},animate:{y:0,opacity:1},exit:{y:-50,opacity:0},transition:{duration:.4,ease:"easeInOut"},className:"bg-white w-full text-[#263238]",children:A.jsxs("div",{className:"flex sm:justify-around items-center flex-wrap w-full px-4 py-2",children:[A.jsx(Uo.div,{initial:{scale:.8,opacity:0},animate:{scale:1,opacity:1},transition:{duration:.5,ease:"easeInOut"},className:"flex flex-col items-center",children:A.jsx("img",{src:GF,alt:"SwiftLogix Logo",className:"w-[63px] object-contain"})}),A.jsx(Uo.ul,{initial:"hidden",animate:"visible",variants:{visible:{transition:{staggerChildren:.15}}},className:"hidden md:flex  gap-6 bg-[#F7F7F7] p-2 rounded-lg",children:[{to:"/",icon:A.jsx(mB,{size:20,color:"#FF7043"}),label:"Home"},{to:"/live-track",icon:A.jsx(tne,{size:20,color:"#FF7043"}),label:"Live Track"},{to:"/rider-login",icon:A.jsx(MF,{size:20,color:"#FF7043"}),label:"Become a Rider"}].map((r,s)=>A.jsx(Uo.li,{variants:{hidden:{opacity:0,y:-10},visible:{opacity:1,y:0}},whileHover:{scale:1.1},children:A.jsxs(ss,{to:r.to,className:({isActive:a})=>`flex items-center gap-1 p-2 rounded-lg hover:bg-[#009688] hover:text-[#F7F7F7] transition-colors duration-300 ${a?"bg-[#009688] text-white":""}`,children:[r.icon,A.jsx("span",{children:r.label})]})},s))}),A.jsx(Uo.div,{className:"hidden sm:flex",initial:{opacity:0,scale:.95},animate:{opacity:1,scale:1},transition:{delay:.3},children:A.jsx(ss,{to:"/login",children:A.jsx(Uo.button,{whileHover:{scale:1.05},whileTap:{scale:.95},className:"bg-[#009688] px-4 py-2 rounded-lg text-white font-semibold hover:bg-[#FF7043] transition-all duration-300",children:"Become a Customer"})})})]})})}),e&&A.jsx(z1e,{})]})}function UO(){return UO=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},UO.apply(this,arguments)}var Q1e={strings:["These are the default values...","You know what you should do?","Use your own!","Have a great day!"],stringsElement:null,typeSpeed:0,startDelay:0,backSpeed:0,smartBackspace:!0,shuffle:!1,backDelay:700,fadeOut:!1,fadeOutClass:"typed-fade-out",fadeOutDelay:500,loop:!1,loopCount:1/0,showCursor:!0,cursorChar:"|",autoInsertCss:!0,attr:null,bindInputFocusEvents:!1,contentType:"html",onBegin:function(e){},onComplete:function(e){},preStringTyped:function(e,t){},onStringTyped:function(e,t){},onLastStringBackspaced:function(e){},onTypingPaused:function(e,t){},onTypingResumed:function(e,t){},onReset:function(e){},onStop:function(e,t){},onStart:function(e,t){},onDestroy:function(e){}},H1e=new(function(){function e(){}var t=e.prototype;return t.load=function(n,r,s){if(n.el=typeof s=="string"?document.querySelector(s):s,n.options=UO({},Q1e,r),n.isInput=n.el.tagName.toLowerCase()==="input",n.attr=n.options.attr,n.bindInputFocusEvents=n.options.bindInputFocusEvents,n.showCursor=!n.isInput&&n.options.showCursor,n.cursorChar=n.options.cursorChar,n.cursorBlinking=!0,n.elContent=n.attr?n.el.getAttribute(n.attr):n.el.textContent,n.contentType=n.options.contentType,n.typeSpeed=n.options.typeSpeed,n.startDelay=n.options.startDelay,n.backSpeed=n.options.backSpeed,n.smartBackspace=n.options.smartBackspace,n.backDelay=n.options.backDelay,n.fadeOut=n.options.fadeOut,n.fadeOutClass=n.options.fadeOutClass,n.fadeOutDelay=n.options.fadeOutDelay,n.isPaused=!1,n.strings=n.options.strings.map(function(g){return g.trim()}),n.stringsElement=typeof n.options.stringsElement=="string"?document.querySelector(n.options.stringsElement):n.options.stringsElement,n.stringsElement){n.strings=[],n.stringsElement.style.cssText="clip: rect(0 0 0 0);clip-path:inset(50%);height:1px;overflow:hidden;position:absolute;white-space:nowrap;width:1px;";var a=Array.prototype.slice.apply(n.stringsElement.children),c=a.length;if(c)for(var i=0;i<c;i+=1)n.strings.push(a[i].innerHTML.trim())}for(var f in n.strPos=0,n.currentElContent=this.getCurrentElContent(n),n.currentElContent&&n.currentElContent.length>0&&(n.strPos=n.currentElContent.length-1,n.strings.unshift(n.currentElContent)),n.sequence=[],n.strings)n.sequence[f]=f;n.arrayPos=0,n.stopNum=0,n.loop=n.options.loop,n.loopCount=n.options.loopCount,n.curLoop=0,n.shuffle=n.options.shuffle,n.pause={status:!1,typewrite:!0,curString:"",curStrPos:0},n.typingComplete=!1,n.autoInsertCss=n.options.autoInsertCss,n.autoInsertCss&&(this.appendCursorAnimationCss(n),this.appendFadeOutAnimationCss(n))},t.getCurrentElContent=function(n){return n.attr?n.el.getAttribute(n.attr):n.isInput?n.el.value:n.contentType==="html"?n.el.innerHTML:n.el.textContent},t.appendCursorAnimationCss=function(n){var r="data-typed-js-cursor-css";if(n.showCursor&&!document.querySelector("["+r+"]")){var s=document.createElement("style");s.setAttribute(r,"true"),s.innerHTML=`
        .typed-cursor{
          opacity: 1;
        }
        .typed-cursor.typed-cursor--blink{
          animation: typedjsBlink 0.7s infinite;
          -webkit-animation: typedjsBlink 0.7s infinite;
                  animation: typedjsBlink 0.7s infinite;
        }
        @keyframes typedjsBlink{
          50% { opacity: 0.0; }
        }
        @-webkit-keyframes typedjsBlink{
          0% { opacity: 1; }
          50% { opacity: 0.0; }
          100% { opacity: 1; }
        }
      `,document.body.appendChild(s)}},t.appendFadeOutAnimationCss=function(n){var r="data-typed-fadeout-js-css";if(n.fadeOut&&!document.querySelector("["+r+"]")){var s=document.createElement("style");s.setAttribute(r,"true"),s.innerHTML=`
        .typed-fade-out{
          opacity: 0;
          transition: opacity .25s;
        }
        .typed-cursor.typed-cursor--blink.typed-fade-out{
          -webkit-animation: 0;
          animation: 0;
        }
      `,document.body.appendChild(s)}},e}()),hG=new(function(){function e(){}var t=e.prototype;return t.typeHtmlChars=function(n,r,s){if(s.contentType!=="html")return r;var a=n.substring(r).charAt(0);if(a==="<"||a==="&"){var c;for(c=a==="<"?">":";";n.substring(r+1).charAt(0)!==c&&!(1+ ++r>n.length););r++}return r},t.backSpaceHtmlChars=function(n,r,s){if(s.contentType!=="html")return r;var a=n.substring(r).charAt(0);if(a===">"||a===";"){var c;for(c=a===">"?"<":"&";n.substring(r-1).charAt(0)!==c&&!(--r<0););r--}return r},e}()),V1e=function(){function e(n,r){H1e.load(this,r,n),this.begin()}var t=e.prototype;return t.toggle=function(){this.pause.status?this.start():this.stop()},t.stop=function(){this.typingComplete||this.pause.status||(this.toggleBlinking(!0),this.pause.status=!0,this.options.onStop(this.arrayPos,this))},t.start=function(){this.typingComplete||this.pause.status&&(this.pause.status=!1,this.pause.typewrite?this.typewrite(this.pause.curString,this.pause.curStrPos):this.backspace(this.pause.curString,this.pause.curStrPos),this.options.onStart(this.arrayPos,this))},t.destroy=function(){this.reset(!1),this.options.onDestroy(this)},t.reset=function(n){n===void 0&&(n=!0),clearInterval(this.timeout),this.replaceText(""),this.cursor&&this.cursor.parentNode&&(this.cursor.parentNode.removeChild(this.cursor),this.cursor=null),this.strPos=0,this.arrayPos=0,this.curLoop=0,n&&(this.insertCursor(),this.options.onReset(this),this.begin())},t.begin=function(){var n=this;this.options.onBegin(this),this.typingComplete=!1,this.shuffleStringsIfNeeded(this),this.insertCursor(),this.bindInputFocusEvents&&this.bindFocusEvents(),this.timeout=setTimeout(function(){n.strPos===0?n.typewrite(n.strings[n.sequence[n.arrayPos]],n.strPos):n.backspace(n.strings[n.sequence[n.arrayPos]],n.strPos)},this.startDelay)},t.typewrite=function(n,r){var s=this;this.fadeOut&&this.el.classList.contains(this.fadeOutClass)&&(this.el.classList.remove(this.fadeOutClass),this.cursor&&this.cursor.classList.remove(this.fadeOutClass));var a=this.humanizer(this.typeSpeed),c=1;this.pause.status!==!0?this.timeout=setTimeout(function(){r=hG.typeHtmlChars(n,r,s);var i=0,f=n.substring(r);if(f.charAt(0)==="^"&&/^\^\d+/.test(f)){var g=1;g+=(f=/\d+/.exec(f)[0]).length,i=parseInt(f),s.temporaryPause=!0,s.options.onTypingPaused(s.arrayPos,s),n=n.substring(0,r)+n.substring(r+g),s.toggleBlinking(!0)}if(f.charAt(0)==="`"){for(;n.substring(r+c).charAt(0)!=="`"&&(c++,!(r+c>n.length)););var y=n.substring(0,r),b=n.substring(y.length+1,r+c),T=n.substring(r+c+1);n=y+b+T,c--}s.timeout=setTimeout(function(){s.toggleBlinking(!1),r>=n.length?s.doneTyping(n,r):s.keepTyping(n,r,c),s.temporaryPause&&(s.temporaryPause=!1,s.options.onTypingResumed(s.arrayPos,s))},i)},a):this.setPauseStatus(n,r,!0)},t.keepTyping=function(n,r,s){r===0&&(this.toggleBlinking(!1),this.options.preStringTyped(this.arrayPos,this));var a=n.substring(0,r+=s);this.replaceText(a),this.typewrite(n,r)},t.doneTyping=function(n,r){var s=this;this.options.onStringTyped(this.arrayPos,this),this.toggleBlinking(!0),this.arrayPos===this.strings.length-1&&(this.complete(),this.loop===!1||this.curLoop===this.loopCount)||(this.timeout=setTimeout(function(){s.backspace(n,r)},this.backDelay))},t.backspace=function(n,r){var s=this;if(this.pause.status!==!0){if(this.fadeOut)return this.initFadeOut();this.toggleBlinking(!1);var a=this.humanizer(this.backSpeed);this.timeout=setTimeout(function(){r=hG.backSpaceHtmlChars(n,r,s);var c=n.substring(0,r);if(s.replaceText(c),s.smartBackspace){var i=s.strings[s.arrayPos+1];s.stopNum=i&&c===i.substring(0,r)?r:0}r>s.stopNum?(r--,s.backspace(n,r)):r<=s.stopNum&&(s.arrayPos++,s.arrayPos===s.strings.length?(s.arrayPos=0,s.options.onLastStringBackspaced(),s.shuffleStringsIfNeeded(),s.begin()):s.typewrite(s.strings[s.sequence[s.arrayPos]],r))},a)}else this.setPauseStatus(n,r,!1)},t.complete=function(){this.options.onComplete(this),this.loop?this.curLoop++:this.typingComplete=!0},t.setPauseStatus=function(n,r,s){this.pause.typewrite=s,this.pause.curString=n,this.pause.curStrPos=r},t.toggleBlinking=function(n){this.cursor&&(this.pause.status||this.cursorBlinking!==n&&(this.cursorBlinking=n,n?this.cursor.classList.add("typed-cursor--blink"):this.cursor.classList.remove("typed-cursor--blink")))},t.humanizer=function(n){return Math.round(Math.random()*n/2)+n},t.shuffleStringsIfNeeded=function(){this.shuffle&&(this.sequence=this.sequence.sort(function(){return Math.random()-.5}))},t.initFadeOut=function(){var n=this;return this.el.className+=" "+this.fadeOutClass,this.cursor&&(this.cursor.className+=" "+this.fadeOutClass),setTimeout(function(){n.arrayPos++,n.replaceText(""),n.strings.length>n.arrayPos?n.typewrite(n.strings[n.sequence[n.arrayPos]],0):(n.typewrite(n.strings[0],0),n.arrayPos=0)},this.fadeOutDelay)},t.replaceText=function(n){this.attr?this.el.setAttribute(this.attr,n):this.isInput?this.el.value=n:this.contentType==="html"?this.el.innerHTML=n:this.el.textContent=n},t.bindFocusEvents=function(){var n=this;this.isInput&&(this.el.addEventListener("focus",function(r){n.stop()}),this.el.addEventListener("blur",function(r){n.el.value&&n.el.value.length!==0||n.start()}))},t.insertCursor=function(){this.showCursor&&(this.cursor||(this.cursor=document.createElement("span"),this.cursor.className="typed-cursor",this.cursor.setAttribute("aria-hidden",!0),this.cursor.innerHTML=this.cursorChar,this.el.parentNode&&this.el.parentNode.insertBefore(this.cursor,this.el.nextSibling)))},e}();const $1e="/assets/bg-home-BkpP-AMU.jpg",go=({children:e,delay:t=0})=>{const n=q.useRef(null),r=Gre(n,{once:!1,margin:"0px 0px -100px 0px"});return A.jsx(Uo.div,{ref:n,initial:{opacity:0,y:0},animate:r?{opacity:1,y:0}:{},transition:{duration:.8,delay:t,ease:"easeInOut"},children:e})},G1e=()=>{const e=Mo(),[t,n]=q.useState(""),[r,s]=q.useState(null),a=q.useRef(null),[c,i]=q.useState(""),f=q.useRef(0),g=q.useRef(0),y=q.useRef(!1),b=q.useRef(null),[T,S]=q.useState("idle"),U=["Live-Track your Shipment","Enter Tracking ID"];q.useEffect(()=>{const L=new V1e(a.current,{strings:["Track. Secure. Deliver.","From Click to Confirmation, SwiftLogix Delivers."],typeSpeed:100,backSpeed:60,loop:!0,showCursor:!0,cursorChar:"|",className:["text-lg"]});return()=>L.destroy()},[]),q.useEffect(()=>{const L=()=>{const Q=U[f.current],V=y.current;if(V?(g.current--,i(Q.substring(0,g.current))):(g.current++,i(Q.substring(0,g.current))),!V&&g.current===Q.length){y.current=!0,b.current=setTimeout(L,1e3);return}else V&&g.current===0&&(y.current=!1,f.current=(f.current+1)%U.length);b.current=setTimeout(L,V?60:100)};return L(),()=>clearTimeout(b.current)},[]);const N=L=>{s(""),n(L.target.value)},W=async()=>{if(!t){s("Tracking Id is required*");return}try{S("processing");const Q=await(await fetch("https://swiftlogix.cc/api/track-shipment",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:t})})).json();Q.success?(S("success"),e("/track-shipment",{state:{shipmentDetail:Q.shipmentDetail,originCityCoords:Q.originCityCoords,destinationCityCoords:Q.destinationCityCoords,trackingId:t}})):(S("idle"),s(Q.message))}catch(L){console.error("Error:",L),s("Something went wrong. Please try again later.")}};return A.jsx("div",{children:A.jsxs("div",{className:"w-full flex flex-col items-center relative",children:[A.jsx("div",{className:"w-full max-md:h-[30vh] border-t-4 border-r-2 border-l-2 border-[#009688] overflow-hidden",children:A.jsx("img",{src:$1e,alt:"",className:"w-full h-full object-cover"})}),A.jsx("div",{className:"bg-[#f7f7f756] w-[90%] min-[769px]:w-[85%] min-[1217px]:w-[54%] absolute top-8 p-4 rounded-3xl hover:shadow-xl transition-all ease-in-out duration-300 transform hover:scale-105 text-center",children:A.jsx("span",{ref:a,className:"font-semibold mt-2 text-xl sm:text-3xl text-[#009688] md:text-4xl lg:text-[44px] hover:text-[#FF7043] transition-all duration-300 transform hover:translate-y-2"})}),A.jsx("div",{className:"min-[974px]:absolute bottom-[10%] w-[70%] flex items-center justify-center md:mb-8 my-8",children:A.jsxs("div",{className:"w-full sm:w-[80%] min-[974px]:w-[60%] flex flex-col items-center",children:[A.jsxs("div",{className:"w-full flex flex-col sm:flex-row sm:items-stretch items-center max-sm:gap-1",children:[A.jsx("input",{type:"text",required:!0,onChange:N,value:t,placeholder:c,disabled:T==="processing",className:"placeholder:text-[#009688]  focus:border-[#FF7043] w-full p-4 border-2 border-[#009688] bg-[#F7F7F7] focus:outline-none rounded-t-lg sm:rounded-l-lg sm:rounded-tr-none focus:ring-[#009688] focus:border-[#009688]"}),A.jsx("input",{type:"submit",value:T==="processing"?"Processing...":T==="success"?"Tracked":"Track Now",onClick:W,className:"bg-[#009688] hover:bg-[#FF7043] max-sm:w-40 text-white font-semibold p-4 cursor-pointer rounded-b-lg sm:rounded-r-lg sm:rounded-bl-none transition-all duration-300 hover:text-[18px]"})]}),r&&A.jsx("p",{className:"text-red-500 font-semibold text-md mt-2",children:r})]})})]})})},K1e=({rateCalulatorAdrress:e,scheduleShipAdrress:t,reprintLabelAddress:n})=>{const[r,s]=q.useState(!1);return q.useEffect(()=>{const a=()=>s(window.innerWidth>=768);return a(),window.addEventListener("resize",a),()=>window.removeEventListener("resize",a)},[]),A.jsx("div",{children:A.jsxs("div",{className:"mb-6 mt-[-12px] relative z-50 flex justify-center flex-wrap text-[#F7F7F7] text-sm gap-4",children:[A.jsx(Uo.div,{initial:{y:0,opacity:0,zIndex:1},animate:{y:0,x:r?-170:0,opacity:1},transition:{delay:1,duration:.6,ease:"easeOut"},children:A.jsx(ss,{to:e,children:A.jsxs("div",{className:"md:relative md:left-44 w-[10rem] h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-[0px_4px_6px_0px_#F7F7F7] cursor-pointer transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-[0px_6px_12px_0px_#009688]",children:[A.jsx(n8,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center",children:"Rate Calculator"})]})})}),A.jsx(Uo.div,{initial:{y:100,opacity:0,zIndex:2},animate:{y:0,x:0,opacity:1},transition:{delay:.3,duration:.6,ease:"easeOut"},children:A.jsx(ss,{to:t,children:A.jsxs("div",{className:"w-[10rem] h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-[0px_4px_6px_0px_#F7F7F7] cursor-pointer transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-[0px_6px_12px_0px_#009688]",children:[A.jsx(sS,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center",children:"Schedule a Ship"})]})})}),A.jsx(Uo.div,{initial:{y:0,opacity:0,zIndex:1},animate:{y:0,x:r?170:0,opacity:1},transition:{delay:.9,duration:.6,ease:"easeOut"},children:A.jsx(ss,{to:n,children:A.jsxs("div",{className:"md:relative md:right-44 w-[10rem] h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-[0px_4px_6px_0px_#F7F7F7] cursor-pointer transition-all duration-300 ease-in-out hover:scale-105 hover:shadow-[0px_6px_12px_0px_#009688]",children:[A.jsx(NF,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center",children:"Reprint Shipping Label"})]})})})]})})},W1e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0px'%20y='0px'%20width='100'%20height='100'%20viewBox='0%200%2050%2050'%20fill='%23F7F7F7'%3e%3cpath%20d='M%2025%203%20C%2012.861562%203%203%2012.861562%203%2025%20C%203%2036.019135%2011.127533%2045.138355%2021.712891%2046.728516%20L%2022.861328%2046.902344%20L%2022.861328%2029.566406%20L%2017.664062%2029.566406%20L%2017.664062%2026.046875%20L%2022.861328%2026.046875%20L%2022.861328%2021.373047%20C%2022.861328%2018.494965%2023.551973%2016.599417%2024.695312%2015.410156%20C%2025.838652%2014.220896%2027.528004%2013.621094%2029.878906%2013.621094%20C%2031.758714%2013.621094%2032.490022%2013.734993%2033.185547%2013.820312%20L%2033.185547%2016.701172%20L%2030.738281%2016.701172%20C%2029.349697%2016.701172%2028.210449%2017.475903%2027.619141%2018.507812%20C%2027.027832%2019.539724%2026.84375%2020.771816%2026.84375%2022.027344%20L%2026.84375%2026.044922%20L%2032.966797%2026.044922%20L%2032.421875%2029.564453%20L%2026.84375%2029.564453%20L%2026.84375%2046.929688%20L%2027.978516%2046.775391%20C%2038.71434%2045.319366%2047%2036.126845%2047%2025%20C%2047%2012.861562%2037.138438%203%2025%203%20z%20M%2025%205%20C%2036.057562%205%2045%2013.942438%2045%2025%20C%2045%2034.729791%2038.035799%2042.731796%2028.84375%2044.533203%20L%2028.84375%2031.564453%20L%2034.136719%2031.564453%20L%2035.298828%2024.044922%20L%2028.84375%2024.044922%20L%2028.84375%2022.027344%20C%2028.84375%2020.989871%2029.033574%2020.060293%2029.353516%2019.501953%20C%2029.673457%2018.943614%2029.981865%2018.701172%2030.738281%2018.701172%20L%2035.185547%2018.701172%20L%2035.185547%2012.009766%20L%2034.318359%2011.892578%20C%2033.718567%2011.811418%2032.349197%2011.621094%2029.878906%2011.621094%20C%2027.175808%2011.621094%2024.855567%2012.357448%2023.253906%2014.023438%20C%2021.652246%2015.689426%2020.861328%2018.170128%2020.861328%2021.373047%20L%2020.861328%2024.046875%20L%2015.664062%2024.046875%20L%2015.664062%2031.566406%20L%2020.861328%2031.566406%20L%2020.861328%2044.470703%20C%2011.816995%2042.554813%205%2034.624447%205%2025%20C%205%2013.942438%2013.942438%205%2025%205%20z'%3e%3c/path%3e%3c/svg%3e",q1e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0px'%20y='0px'%20width='100'%20height='100'%20viewBox='0%200%2050%2050'%3e%3cpath%20d='M%2016%203%20C%208.8324839%203%203%208.8324839%203%2016%20L%203%2034%20C%203%2041.167516%208.8324839%2047%2016%2047%20L%2034%2047%20C%2041.167516%2047%2047%2041.167516%2047%2034%20L%2047%2016%20C%2047%208.8324839%2041.167516%203%2034%203%20L%2016%203%20z%20M%2016%205%20L%2034%205%20C%2040.086484%205%2045%209.9135161%2045%2016%20L%2045%2034%20C%2045%2040.086484%2040.086484%2045%2034%2045%20L%2016%2045%20C%209.9135161%2045%205%2040.086484%205%2034%20L%205%2016%20C%205%209.9135161%209.9135161%205%2016%205%20z%20M%2037%2011%20A%202%202%200%200%200%2035%2013%20A%202%202%200%200%200%2037%2015%20A%202%202%200%200%200%2039%2013%20A%202%202%200%200%200%2037%2011%20z%20M%2025%2014%20C%2018.936712%2014%2014%2018.936712%2014%2025%20C%2014%2031.063288%2018.936712%2036%2025%2036%20C%2031.063288%2036%2036%2031.063288%2036%2025%20C%2036%2018.936712%2031.063288%2014%2025%2014%20z%20M%2025%2016%20C%2029.982407%2016%2034%2020.017593%2034%2025%20C%2034%2029.982407%2029.982407%2034%2025%2034%20C%2020.017593%2034%2016%2029.982407%2016%2025%20C%2016%2020.017593%2020.017593%2016%2025%2016%20z'%3e%3c/path%3e%3c/svg%3e",Z1e="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0px'%20y='0px'%20width='100'%20height='100'%20viewBox='0%200%2050%2050'%3e%3cpath%20d='M%209%204%20C%206.2504839%204%204%206.2504839%204%209%20L%204%2041%20C%204%2043.749516%206.2504839%2046%209%2046%20L%2041%2046%20C%2043.749516%2046%2046%2043.749516%2046%2041%20L%2046%209%20C%2046%206.2504839%2043.749516%204%2041%204%20L%209%204%20z%20M%209%206%20L%2041%206%20C%2042.668484%206%2044%207.3315161%2044%209%20L%2044%2041%20C%2044%2042.668484%2042.668484%2044%2041%2044%20L%209%2044%20C%207.3315161%2044%206%2042.668484%206%2041%20L%206%209%20C%206%207.3315161%207.3315161%206%209%206%20z%20M%2014%2011.011719%20C%2012.904779%2011.011719%2011.919219%2011.339079%2011.189453%2011.953125%20C%2010.459687%2012.567171%2010.011719%2013.484511%2010.011719%2014.466797%20C%2010.011719%2016.333977%2011.631285%2017.789609%2013.691406%2017.933594%20A%200.98809878%200.98809878%200%200%200%2013.695312%2017.935547%20A%200.98809878%200.98809878%200%200%200%2014%2017.988281%20C%2016.27301%2017.988281%2017.988281%2016.396083%2017.988281%2014.466797%20A%200.98809878%200.98809878%200%200%200%2017.986328%2014.414062%20C%2017.884577%2012.513831%2016.190443%2011.011719%2014%2011.011719%20z%20M%2014%2012.988281%20C%2015.392231%2012.988281%2015.94197%2013.610038%2016.001953%2014.492188%20C%2015.989803%2015.348434%2015.460091%2016.011719%2014%2016.011719%20C%2012.614594%2016.011719%2011.988281%2015.302225%2011.988281%2014.466797%20C%2011.988281%2014.049083%2012.140703%2013.734298%2012.460938%2013.464844%20C%2012.78117%2013.19539%2013.295221%2012.988281%2014%2012.988281%20z%20M%2011%2019%20A%201.0001%201.0001%200%200%200%2010%2020%20L%2010%2039%20A%201.0001%201.0001%200%200%200%2011%2040%20L%2017%2040%20A%201.0001%201.0001%200%200%200%2018%2039%20L%2018%2033.134766%20L%2018%2020%20A%201.0001%201.0001%200%200%200%2017%2019%20L%2011%2019%20z%20M%2020%2019%20A%201.0001%201.0001%200%200%200%2019%2020%20L%2019%2039%20A%201.0001%201.0001%200%200%200%2020%2040%20L%2026%2040%20A%201.0001%201.0001%200%200%200%2027%2039%20L%2027%2029%20C%2027%2028.170333%2027.226394%2027.345035%2027.625%2026.804688%20C%2028.023606%2026.264339%2028.526466%2025.940057%2029.482422%2025.957031%20C%2030.468166%2025.973981%2030.989999%2026.311669%2031.384766%2026.841797%20C%2031.779532%2027.371924%2032%2028.166667%2032%2029%20L%2032%2039%20A%201.0001%201.0001%200%200%200%2033%2040%20L%2039%2040%20A%201.0001%201.0001%200%200%200%2040%2039%20L%2040%2028.261719%20C%2040%2025.300181%2039.122788%2022.95433%2037.619141%2021.367188%20C%2036.115493%2019.780044%2034.024172%2019%2031.8125%2019%20C%2029.710483%2019%2028.110853%2019.704889%2027%2020.423828%20L%2027%2020%20A%201.0001%201.0001%200%200%200%2026%2019%20L%2020%2019%20z%20M%2012%2021%20L%2016%2021%20L%2016%2033.134766%20L%2016%2038%20L%2012%2038%20L%2012%2021%20z%20M%2021%2021%20L%2025%2021%20L%2025%2022.560547%20A%201.0001%201.0001%200%200%200%2026.798828%2023.162109%20C%2026.798828%2023.162109%2028.369194%2021%2031.8125%2021%20C%2033.565828%2021%2035.069366%2021.582581%2036.167969%2022.742188%20C%2037.266572%2023.901794%2038%2025.688257%2038%2028.261719%20L%2038%2038%20L%2034%2038%20L%2034%2029%20C%2034%2027.833333%2033.720468%2026.627107%2032.990234%2025.646484%20C%2032.260001%2024.665862%2031.031834%2023.983076%2029.517578%2023.957031%20C%2027.995534%2023.930001%2026.747519%2024.626988%2026.015625%2025.619141%20C%2025.283731%2026.611293%2025%2027.829667%2025%2029%20L%2025%2038%20L%2021%2038%20L%2021%2021%20z'%3e%3c/path%3e%3c/svg%3e",X1e="/assets/SWIFTLOGIXFooter-Cjxkiq6v.png",qp=()=>{const e=q.useRef(null),t=Gre(e,{once:!1,margin:"0px 0px -100px 0px"});return A.jsxs(Uo.footer,{ref:e,initial:{opacity:0,y:30},animate:t?{opacity:1,y:0}:{},transition:{duration:1,ease:"easeOut"},className:"w-full bg-[#009688] text-[#F7F7F7]",children:[A.jsxs("div",{className:"flex flex-wrap justify-center px-6 py-10 gap-8",children:[A.jsxs("div",{className:"flex flex-col items-center w-full sm:w-1/2 lg:w-1/4 gap-6",children:[A.jsx("img",{src:X1e,alt:"SwiftLogix Logo",className:"w-24 sm:w-32 lg:w-56 object-contain"}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"text-[20px] font-semibold underline underline-offset-2 mb-2",children:"Headquarter"}),A.jsx("p",{children:"SwiftLogix, Al Hamra 262"}),A.jsx("p",{children:"Lahore, Punjab, 05450"}),A.jsx("p",{children:"Pakistan"})]})]}),A.jsxs("div",{className:"flex flex-col w-full sm:w-1/2 lg:w-1/5 gap-4",children:[A.jsx("h1",{className:"text-[20px] font-semibold underline underline-offset-2",children:"Quick Links"}),A.jsxs("ul",{className:"flex flex-col gap-2",children:[A.jsx(ss,{to:"/rider-login",children:A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:"Get Started as Rider"})}),A.jsx(ss,{to:"/login",children:A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:"Get Started as Customer"})}),A.jsx(ss,{to:"/schedule-a-ship",children:A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:"Customizable Delivery"})}),A.jsx(ss,{to:"/insurane-policy",children:A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:"Insurance Policy"})}),A.jsx(ss,{to:"/payment-methods",children:A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:"Payment Methods"})})]})]}),A.jsxs("div",{className:"flex flex-col w-full sm:w-1/2 lg:w-1/5 gap-4",children:[A.jsx("h1",{className:"text-[20px] font-semibold underline underline-offset-2",children:"Business Solutions"}),A.jsx("ul",{className:"flex flex-col gap-2",children:A.jsx(ss,{to:"/freelance-rider-program",children:A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:"Freelance Rider Program"})})})]}),A.jsxs("div",{className:"flex flex-col w-full sm:w-1/2 lg:w-1/5 gap-4",children:[A.jsx("h1",{className:"text-[20px] font-semibold underline underline-offset-2",children:"Need Help?"}),A.jsxs("ul",{className:"flex flex-col gap-2",children:[A.jsx(ss,{to:"/live-track",children:A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:"Track Your Shipment"})}),A.jsx(ss,{to:"/file-claim",children:A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:"File a Claim"})}),A.jsx("li",{className:"hover:text-[#FF7043] cursor-pointer",children:A.jsx("a",{href:"https://cdn.botpress.cloud/webchat/v2.5/shareable.html?configUrl=https://files.bpcontent.cloud/2025/05/25/16/20250525161042-D665MSI3.json",target:"_blank",rel:"noopener noreferrer",children:"Talk with SwiftBot"})})]})]}),A.jsxs("div",{className:"flex flex-col w-full sm:w-1/2 lg:w-1/5 gap-4 items-center",children:[A.jsx("h1",{className:"text-[20px] font-semibold underline underline-offset-2",children:"Connect with Us"}),A.jsxs("div",{className:"flex gap-4",children:[A.jsx("img",{src:W1e,alt:"Facebook",className:"w-8 cursor-pointer transition-transform duration-300 hover:scale-110"}),A.jsx("img",{src:q1e,alt:"Instagram",className:"w-8 invert cursor-pointer transition-transform duration-300 hover:scale-110"}),A.jsx("img",{src:Z1e,alt:"LinkedIn",className:"w-8 invert cursor-pointer transition-transform duration-300 hover:scale-110"})]})]})]}),A.jsx("div",{className:"w-full text-center py-4 border-t border-[#F7F7F7] text-sm",children:"© 2025 SwiftLogix. All Rights Reserved."})]})};var Y1e=Object.defineProperty,J1e=(e,t,n)=>t in e?Y1e(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,Hf=(e,t,n)=>J1e(e,typeof t!="symbol"?t+"":t,n),Ra=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function uo(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}function ewe(e){if(e.__esModule)return e;var t=e.default;if(typeof t=="function"){var n=function r(){return this instanceof r?Reflect.construct(t,arguments,this.constructor):t.apply(this,arguments)};n.prototype=t.prototype}else n={};return Object.defineProperty(n,"__esModule",{value:!0}),Object.keys(e).forEach(function(r){var s=Object.getOwnPropertyDescriptor(e,r);Object.defineProperty(n,r,s.get?s:{enumerable:!0,get:function(){return e[r]}})}),n}var Kre={exports:{}},x2={};/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var fG;function twe(){if(fG)return x2;fG=1;var e=Ti,t=Symbol.for("react.element"),n=Symbol.for("react.fragment"),r=Object.prototype.hasOwnProperty,s=e.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,a={key:!0,ref:!0,__self:!0,__source:!0};function c(i,f,g){var y,b={},T=null,S=null;g!==void 0&&(T=""+g),f.key!==void 0&&(T=""+f.key),f.ref!==void 0&&(S=f.ref);for(y in f)r.call(f,y)&&!a.hasOwnProperty(y)&&(b[y]=f[y]);if(i&&i.defaultProps)for(y in f=i.defaultProps,f)b[y]===void 0&&(b[y]=f[y]);return{$$typeof:t,type:i,key:T,ref:S,props:b,_owner:s.current}}return x2.Fragment=n,x2.jsx=c,x2.jsxs=c,x2}Kre.exports=twe();var zt=Kre.exports;function nwe(e,t=[]){let n=[];function r(a,c){const i=q.createContext(c),f=n.length;n=[...n,c];function g(b){const{scope:T,children:S,...U}=b,N=(T==null?void 0:T[e][f])||i,W=q.useMemo(()=>U,Object.values(U));return zt.jsx(N.Provider,{value:W,children:S})}function y(b,T){const S=(T==null?void 0:T[e][f])||i,U=q.useContext(S);if(U)return U;if(c!==void 0)return c;throw new Error(`\`${b}\` must be used within \`${a}\``)}return g.displayName=a+"Provider",[g,y]}const s=()=>{const a=n.map(c=>q.createContext(c));return function(c){const i=(c==null?void 0:c[e])||a;return q.useMemo(()=>({[`__scope${e}`]:{...c,[e]:i}}),[c,i])}};return s.scopeName=e,[r,rwe(s,...t)]}function rwe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const a=r.reduce((c,{useScope:i,scopeName:f})=>{const g=i(s)[`__scope${f}`];return{...c,...g}},{});return q.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}function zy(e){const t=q.useRef(e);return q.useEffect(()=>{t.current=e}),q.useMemo(()=>(...n)=>{var r;return(r=t.current)==null?void 0:r.call(t,...n)},[])}var ww=globalThis!=null&&globalThis.document?q.useLayoutEffect:()=>{};function iwe(e,t){typeof e=="function"?e(t):e!=null&&(e.current=t)}function swe(...e){return t=>e.forEach(n=>iwe(n,t))}var Wre=q.forwardRef((e,t)=>{const{children:n,...r}=e,s=q.Children.toArray(n),a=s.find(awe);if(a){const c=a.props.children,i=s.map(f=>f===a?q.Children.count(c)>1?q.Children.only(null):q.isValidElement(c)?c.props.children:null:f);return zt.jsx(zO,{...r,ref:t,children:q.isValidElement(c)?q.cloneElement(c,void 0,i):null})}return zt.jsx(zO,{...r,ref:t,children:n})});Wre.displayName="Slot";var zO=q.forwardRef((e,t)=>{const{children:n,...r}=e;if(q.isValidElement(n)){const s=cwe(n);return q.cloneElement(n,{...lwe(r,n.props),ref:t?swe(t,s):s})}return q.Children.count(n)>1?q.Children.only(null):null});zO.displayName="SlotClone";var owe=({children:e})=>zt.jsx(zt.Fragment,{children:e});function awe(e){return q.isValidElement(e)&&e.type===owe}function lwe(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...c)=>{a(...c),s(...c)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function cwe(e){var t,n;let r=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var uwe=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],W8=uwe.reduce((e,t)=>{const n=q.forwardRef((r,s)=>{const{asChild:a,...c}=r,i=a?Wre:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),zt.jsx(i,{...c,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{}),q8="Avatar",[dwe,yut]=nwe(q8),[hwe,qre]=dwe(q8),Z8=q.forwardRef((e,t)=>{const{__scopeAvatar:n,...r}=e,[s,a]=q.useState("idle");return zt.jsx(hwe,{scope:n,imageLoadingStatus:s,onImageLoadingStatusChange:a,children:zt.jsx(W8.span,{...r,ref:t})})});Z8.displayName=q8;var Zre="AvatarImage",X8=q.forwardRef((e,t)=>{const{__scopeAvatar:n,src:r,onLoadingStatusChange:s=()=>{},...a}=e,c=qre(Zre,n),i=fwe(r),f=zy(g=>{s(g),c.onImageLoadingStatusChange(g)});return ww(()=>{i!=="idle"&&f(i)},[i,f]),i==="loaded"?zt.jsx(W8.img,{...a,ref:t,src:r}):null});X8.displayName=Zre;var Xre="AvatarFallback",Y8=q.forwardRef((e,t)=>{const{__scopeAvatar:n,delayMs:r,...s}=e,a=qre(Xre,n),[c,i]=q.useState(r===void 0);return q.useEffect(()=>{if(r!==void 0){const f=window.setTimeout(()=>i(!0),r);return()=>window.clearTimeout(f)}},[r]),c&&a.imageLoadingStatus!=="loaded"?zt.jsx(W8.span,{...s,ref:t}):null});Y8.displayName=Xre;function fwe(e){const[t,n]=q.useState("idle");return ww(()=>{if(!e){n("error");return}let r=!0;const s=new window.Image,a=c=>()=>{r&&n(c)};return n("loading"),s.onload=a("loaded"),s.onerror=a("error"),s.src=e,()=>{r=!1}},[e]),t}function QO(e){if(!/^#?([a-fA-F\d]{6}|[a-fA-F\d]{3})$/.test(e))return{r:0,g:0,b:0};const t=e.replace(/^#/,"");let n=t;t.length===3&&(n=t.split("").map(i=>i+i).join(""));const r=parseInt(n,16),s=r>>16&255,a=r>>8&255,c=r&255;return{r:s,g:a,b:c}}function pwe(e){return`#${((1<<24)+(e.r<<16)+(e.g<<8)+e.b).toString(16).slice(1)}`}const Awe=(e,t=30)=>{const n=Math.min(e.r,e.g,e.b),r=Math.max(e.r,e.g,e.b,n+1);return{r:Math.floor((e.r-n)/(r-n)*t*(1-.299)+120-t/2),g:Math.floor((e.g-n)/(r-n)*t*(1-.587)+120-t/2),b:Math.floor((e.b-n)/(r-n)*t*(1-.114)+120-t/2)}};function pG(e){return Object.entries(e).reduce((t,[n,r])=>{const s=n.replace(/(\d+)/,a=>(1e3-parseInt(a)).toString());return{...t,[s]:r}},{})}const mwe=2.4,gwe=.2126729,ywe=.7151522,vwe=.072175,xwe=.56,_we=.57,wwe=.62,bwe=.65,m3=.022,AG=1.414,Cwe=1.14,Swe=1.14,Bwe=.035991,Ewe=.035991,Twe=27.7847239587675,Iwe=27.7847239587675,mG=.027,gG=.027,yG=.001,jwe=5e-4;function vG(e){const{r:t,g:n,b:r}=e,s=a=>(a/255)**mwe;return gwe*s(t)+ywe*s(n)+vwe*s(r)}function xG(e,t){if(!e||!t)return 0;let n=vG(QO(e)),r=vG(QO(t)),s=0,a=0;return n=n>m3?n:n+(m3-n)**AG,r=r>m3?r:r+(m3-r)**AG,Math.abs(r-n)<jwe?0:(r>n?(s=(r**xwe-n**_we)*Cwe,a=s<yG?0:s<Bwe?s-s*Twe*mG:s-mG):(s=(r**bwe-n**wwe)*Swe,a=s>-yG?0:s>-Ewe?s-s*Iwe*gG:s+gG),Math.abs(a*100))}let Yre=class{constructor(){Hf(this,"eventMap"),this.eventMap={}}on(e,t){var n;return this.eventMap[e]||(this.eventMap[e]=new Set),(n=this.eventMap[e])==null||n.add(t),()=>{var r;(r=this.eventMap[e])==null||r.delete(t)}}emit(e,t){var n,r;(n=this.eventMap[e])==null||n.forEach(s=>{s(t)}),(r=this.eventMap["*"])==null||r.forEach(s=>{s({type:e,payload:t})})}};const Fwe=new Yre;function _G(e,t){let n=`${e} {`;for(const[r,s]of Object.entries(t))n+=`${r}: ${s}; `;return n+="}",n}function Jre(e,t){let n=0;if(e.length==0)return n;for(let r=0;r<e.length;r++){const s=e.charCodeAt(r);n=(n<<5)-n+s,n=n&n}return Math.abs(n)%t}var eie={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ra,function(){var n=1e3,r=6e4,s=36e5,a="millisecond",c="second",i="minute",f="hour",g="day",y="week",b="month",T="quarter",S="year",U="date",N="Invalid Date",W=/^(\d{4})[-/]?(\d{1,2})?[-/]?(\d{0,2})[Tt\s]*(\d{1,2})?:?(\d{1,2})?:?(\d{1,2})?[.:]?(\d+)?$/,L=/\[([^\]]+)]|Y{1,4}|M{1,4}|D{1,2}|d{1,4}|H{1,2}|h{1,2}|a|A|m{1,2}|s{1,2}|Z{1,2}|SSS/g,Q={name:"en",weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),ordinal:function(Ee){var Ne=["th","st","nd","rd"],Ge=Ee%100;return"["+Ee+(Ne[(Ge-20)%10]||Ne[Ge]||Ne[0])+"]"}},V=function(Ee,Ne,Ge){var Je=String(Ee);return!Je||Je.length>=Ne?Ee:""+Array(Ne+1-Je.length).join(Ge)+Ee},Z={s:V,z:function(Ee){var Ne=-Ee.utcOffset(),Ge=Math.abs(Ne),Je=Math.floor(Ge/60),Ue=Ge%60;return(Ne<=0?"+":"-")+V(Je,2,"0")+":"+V(Ue,2,"0")},m:function Ee(Ne,Ge){if(Ne.date()<Ge.date())return-Ee(Ge,Ne);var Je=12*(Ge.year()-Ne.year())+(Ge.month()-Ne.month()),Ue=Ne.clone().add(Je,b),Qe=Ge-Ue<0,xe=Ne.clone().add(Je+(Qe?-1:1),b);return+(-(Je+(Ge-Ue)/(Qe?Ue-xe:xe-Ue))||0)},a:function(Ee){return Ee<0?Math.ceil(Ee)||0:Math.floor(Ee)},p:function(Ee){return{M:b,y:S,w:y,d:g,D:U,h:f,m:i,s:c,ms:a,Q:T}[Ee]||String(Ee||"").toLowerCase().replace(/s$/,"")},u:function(Ee){return Ee===void 0}},ne="en",Y={};Y[ne]=Q;var le="$isDayjsObject",pe=function(Ee){return Ee instanceof be||!(!Ee||!Ee[le])},_e=function Ee(Ne,Ge,Je){var Ue;if(!Ne)return ne;if(typeof Ne=="string"){var Qe=Ne.toLowerCase();Y[Qe]&&(Ue=Qe),Ge&&(Y[Qe]=Ge,Ue=Qe);var xe=Ne.split("-");if(!Ue&&xe.length>1)return Ee(xe[0])}else{var at=Ne.name;Y[at]=Ne,Ue=at}return!Je&&Ue&&(ne=Ue),Ue||!Je&&ne},ye=function(Ee,Ne){if(pe(Ee))return Ee.clone();var Ge=typeof Ne=="object"?Ne:{};return Ge.date=Ee,Ge.args=arguments,new be(Ge)},he=Z;he.l=_e,he.i=pe,he.w=function(Ee,Ne){return ye(Ee,{locale:Ne.$L,utc:Ne.$u,x:Ne.$x,$offset:Ne.$offset})};var be=function(){function Ee(Ge){this.$L=_e(Ge.locale,null,!0),this.parse(Ge),this.$x=this.$x||Ge.x||{},this[le]=!0}var Ne=Ee.prototype;return Ne.parse=function(Ge){this.$d=function(Je){var Ue=Je.date,Qe=Je.utc;if(Ue===null)return new Date(NaN);if(he.u(Ue))return new Date;if(Ue instanceof Date)return new Date(Ue);if(typeof Ue=="string"&&!/Z$/i.test(Ue)){var xe=Ue.match(W);if(xe){var at=xe[2]-1||0,we=(xe[7]||"0").substring(0,3);return Qe?new Date(Date.UTC(xe[1],at,xe[3]||1,xe[4]||0,xe[5]||0,xe[6]||0,we)):new Date(xe[1],at,xe[3]||1,xe[4]||0,xe[5]||0,xe[6]||0,we)}}return new Date(Ue)}(Ge),this.init()},Ne.init=function(){var Ge=this.$d;this.$y=Ge.getFullYear(),this.$M=Ge.getMonth(),this.$D=Ge.getDate(),this.$W=Ge.getDay(),this.$H=Ge.getHours(),this.$m=Ge.getMinutes(),this.$s=Ge.getSeconds(),this.$ms=Ge.getMilliseconds()},Ne.$utils=function(){return he},Ne.isValid=function(){return this.$d.toString()!==N},Ne.isSame=function(Ge,Je){var Ue=ye(Ge);return this.startOf(Je)<=Ue&&Ue<=this.endOf(Je)},Ne.isAfter=function(Ge,Je){return ye(Ge)<this.startOf(Je)},Ne.isBefore=function(Ge,Je){return this.endOf(Je)<ye(Ge)},Ne.$g=function(Ge,Je,Ue){return he.u(Ge)?this[Je]:this.set(Ue,Ge)},Ne.unix=function(){return Math.floor(this.valueOf()/1e3)},Ne.valueOf=function(){return this.$d.getTime()},Ne.startOf=function(Ge,Je){var Ue=this,Qe=!!he.u(Je)||Je,xe=he.p(Ge),at=function(kt,Me){var Ht=he.w(Ue.$u?Date.UTC(Ue.$y,Me,kt):new Date(Ue.$y,Me,kt),Ue);return Qe?Ht:Ht.endOf(g)},we=function(kt,Me){return he.w(Ue.toDate()[kt].apply(Ue.toDate("s"),(Qe?[0,0,0,0]:[23,59,59,999]).slice(Me)),Ue)},me=this.$W,Ze=this.$M,ot=this.$D,vt="set"+(this.$u?"UTC":"");switch(xe){case S:return Qe?at(1,0):at(31,11);case b:return Qe?at(1,Ze):at(0,Ze+1);case y:var Qt=this.$locale().weekStart||0,Ot=(me<Qt?me+7:me)-Qt;return at(Qe?ot-Ot:ot+(6-Ot),Ze);case g:case U:return we(vt+"Hours",0);case f:return we(vt+"Minutes",1);case i:return we(vt+"Seconds",2);case c:return we(vt+"Milliseconds",3);default:return this.clone()}},Ne.endOf=function(Ge){return this.startOf(Ge,!1)},Ne.$set=function(Ge,Je){var Ue,Qe=he.p(Ge),xe="set"+(this.$u?"UTC":""),at=(Ue={},Ue[g]=xe+"Date",Ue[U]=xe+"Date",Ue[b]=xe+"Month",Ue[S]=xe+"FullYear",Ue[f]=xe+"Hours",Ue[i]=xe+"Minutes",Ue[c]=xe+"Seconds",Ue[a]=xe+"Milliseconds",Ue)[Qe],we=Qe===g?this.$D+(Je-this.$W):Je;if(Qe===b||Qe===S){var me=this.clone().set(U,1);me.$d[at](we),me.init(),this.$d=me.set(U,Math.min(this.$D,me.daysInMonth())).$d}else at&&this.$d[at](we);return this.init(),this},Ne.set=function(Ge,Je){return this.clone().$set(Ge,Je)},Ne.get=function(Ge){return this[he.p(Ge)]()},Ne.add=function(Ge,Je){var Ue,Qe=this;Ge=Number(Ge);var xe=he.p(Je),at=function(Ze){var ot=ye(Qe);return he.w(ot.date(ot.date()+Math.round(Ze*Ge)),Qe)};if(xe===b)return this.set(b,this.$M+Ge);if(xe===S)return this.set(S,this.$y+Ge);if(xe===g)return at(1);if(xe===y)return at(7);var we=(Ue={},Ue[i]=r,Ue[f]=s,Ue[c]=n,Ue)[xe]||1,me=this.$d.getTime()+Ge*we;return he.w(me,this)},Ne.subtract=function(Ge,Je){return this.add(-1*Ge,Je)},Ne.format=function(Ge){var Je=this,Ue=this.$locale();if(!this.isValid())return Ue.invalidDate||N;var Qe=Ge||"YYYY-MM-DDTHH:mm:ssZ",xe=he.z(this),at=this.$H,we=this.$m,me=this.$M,Ze=Ue.weekdays,ot=Ue.months,vt=Ue.meridiem,Qt=function(Me,Ht,Zt,pn){return Me&&(Me[Ht]||Me(Je,Qe))||Zt[Ht].slice(0,pn)},Ot=function(Me){return he.s(at%12||12,Me,"0")},kt=vt||function(Me,Ht,Zt){var pn=Me<12?"AM":"PM";return Zt?pn.toLowerCase():pn};return Qe.replace(L,function(Me,Ht){return Ht||function(Zt){switch(Zt){case"YY":return String(Je.$y).slice(-2);case"YYYY":return he.s(Je.$y,4,"0");case"M":return me+1;case"MM":return he.s(me+1,2,"0");case"MMM":return Qt(Ue.monthsShort,me,ot,3);case"MMMM":return Qt(ot,me);case"D":return Je.$D;case"DD":return he.s(Je.$D,2,"0");case"d":return String(Je.$W);case"dd":return Qt(Ue.weekdaysMin,Je.$W,Ze,2);case"ddd":return Qt(Ue.weekdaysShort,Je.$W,Ze,3);case"dddd":return Ze[Je.$W];case"H":return String(at);case"HH":return he.s(at,2,"0");case"h":return Ot(1);case"hh":return Ot(2);case"a":return kt(at,we,!0);case"A":return kt(at,we,!1);case"m":return String(we);case"mm":return he.s(we,2,"0");case"s":return String(Je.$s);case"ss":return he.s(Je.$s,2,"0");case"SSS":return he.s(Je.$ms,3,"0");case"Z":return xe}return null}(Me)||xe.replace(":","")})},Ne.utcOffset=function(){return 15*-Math.round(this.$d.getTimezoneOffset()/15)},Ne.diff=function(Ge,Je,Ue){var Qe,xe=this,at=he.p(Je),we=ye(Ge),me=(we.utcOffset()-this.utcOffset())*r,Ze=this-we,ot=function(){return he.m(xe,we)};switch(at){case S:Qe=ot()/12;break;case b:Qe=ot();break;case T:Qe=ot()/3;break;case y:Qe=(Ze-me)/6048e5;break;case g:Qe=(Ze-me)/864e5;break;case f:Qe=Ze/s;break;case i:Qe=Ze/r;break;case c:Qe=Ze/n;break;default:Qe=Ze}return Ue?Qe:he.a(Qe)},Ne.daysInMonth=function(){return this.endOf(b).$D},Ne.$locale=function(){return Y[this.$L]},Ne.locale=function(Ge,Je){if(!Ge)return this.$L;var Ue=this.clone(),Qe=_e(Ge,Je,!0);return Qe&&(Ue.$L=Qe),Ue},Ne.clone=function(){return he.w(this.$d,this)},Ne.toDate=function(){return new Date(this.valueOf())},Ne.toJSON=function(){return this.isValid()?this.toISOString():null},Ne.toISOString=function(){return this.$d.toISOString()},Ne.toString=function(){return this.$d.toUTCString()},Ee}(),Te=be.prototype;return ye.prototype=Te,[["$ms",a],["$s",c],["$m",i],["$H",f],["$W",g],["$M",b],["$y",S],["$D",U]].forEach(function(Ee){Te[Ee[1]]=function(Ne){return this.$g(Ne,Ee[0],Ee[1])}}),ye.extend=function(Ee,Ne){return Ee.$i||(Ee(Ne,be,ye),Ee.$i=!0),ye},ye.locale=_e,ye.isDayjs=pe,ye.unix=function(Ee){return ye(1e3*Ee)},ye.en=Y[ne],ye.Ls=Y,ye.p={},ye})})(eie);var Pwe=eie.exports;const KF=uo(Pwe);var tie={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ra,function(){return function(n,r,s){r.prototype.isToday=function(){var a="YYYY-MM-DD",c=s();return this.format(a)===c.format(a)}}})})(tie);var kwe=tie.exports;const Lwe=uo(kwe);var nie={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Ra,function(){return function(n,r,s){r.prototype.isYesterday=function(){var a="YYYY-MM-DD",c=s().subtract(1,"day");return this.format(a)===c.format(a)}}})})(nie);var Mwe=nie.exports;const Nwe=uo(Mwe);let g3;const Rwe=new Uint8Array(16);function Owe(){if(!g3&&(g3=typeof crypto<"u"&&crypto.getRandomValues&&crypto.getRandomValues.bind(crypto),!g3))throw new Error("crypto.getRandomValues() not supported. See https://github.com/uuidjs/uuid#getrandomvalues-not-supported");return g3(Rwe)}const Ou=[];for(let e=0;e<256;++e)Ou.push((e+256).toString(16).slice(1));function Dwe(e,t=0){return Ou[e[t+0]]+Ou[e[t+1]]+Ou[e[t+2]]+Ou[e[t+3]]+"-"+Ou[e[t+4]]+Ou[e[t+5]]+"-"+Ou[e[t+6]]+Ou[e[t+7]]+"-"+Ou[e[t+8]]+Ou[e[t+9]]+"-"+Ou[e[t+10]]+Ou[e[t+11]]+Ou[e[t+12]]+Ou[e[t+13]]+Ou[e[t+14]]+Ou[e[t+15]]}const Uwe=typeof crypto<"u"&&crypto.randomUUID&&crypto.randomUUID.bind(crypto),wG={randomUUID:Uwe};function rie(e,t,n){if(wG.randomUUID&&!t&&!e)return wG.randomUUID();e=e||{};const r=e.random||(e.rng||Owe)();return r[6]=r[6]&15|64,r[8]=r[8]&63|128,Dwe(r)}KF.extend(Lwe);KF.extend(Nwe);function zwe(e,t="day"){var n,r,s;if(!e||e.length===0)return[];const a=[];(n=e[0])!=null&&n.timestamp&&a.push(bG(e[0].timestamp));for(let c=0;c<e.length;c++)if(e[c]&&a.push(e[c]),c+1<e.length){const i=(r=e[c])==null?void 0:r.timestamp,f=(s=e[c+1])==null?void 0:s.timestamp;!KF(i).isSame(f,t)&&f&&a.push(bG(f))}return a}function bG(e){return{id:rie(),direction:"system",sender:{name:"system"},timestamp:e,block:{type:"text",text:Qwe(e)}}}function Qwe(e,t=!1){const n=KF(e),r="h:mma";return n.isToday()?t?`Today • ${n.format(r)}`:"Today":n.isYesterday()?t?`Yesterday • ${n.format(r)}`:"Yesterday":t?n.format(`YYYY-MM-DD • ${r}`):n.format("YYYY-MM-DD")}function Hwe(e=""){if(typeof e!="string")throw new TypeError("Color should be string!");const t=/^#?([\da-f]{2})([\da-f]{2})([\da-f]{2})$/i.exec(e);if(t)return t.splice(1).map(r=>Number.parseInt(r,16));const n=/^#?([\da-f])([\da-f])([\da-f])$/i.exec(e);if(n)return n.splice(1).map(r=>Number.parseInt(r+r,16));if(e.includes(","))return e.split(",").map(r=>Number.parseInt(r));throw new Error("Invalid color format! Use #ABC or #AABBCC or r,g,b")}function Vwe(e){return"#"+e.map(t=>`0${t.toString(16).toUpperCase()}`.slice(-2)).join("")}function $we(e,t){return e.map(n=>Math.round(n+(255-n)*t))}function Gwe(e,t){return e.map(n=>Math.round(n*t))}const _2=e=>t=>$we(t,e),w2=e=>t=>Gwe(t,e),Kwe={50:_2(.95),100:_2(.9),200:_2(.75),300:_2(.6),400:_2(.3),500:e=>e,600:w2(.9),700:w2(.6),800:w2(.45),900:w2(.3),950:w2(.2)};function CG(e,t=Kwe){const n={},r=Hwe(e);for(const[s,a]of Object.entries(t))n[s]=Vwe(a(r));return n}var zo;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const a={};for(const c of s)a[c]=c;return a},e.getValidEnumValues=s=>{const a=e.objectKeys(s).filter(i=>typeof s[s[i]]!="number"),c={};for(const i of a)c[i]=s[i];return e.objectValues(c)},e.objectValues=s=>e.objectKeys(s).map(function(a){return s[a]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&a.push(c);return a},e.find=(s,a)=>{for(const c of s)if(a(c))return c},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(zo||(zo={}));var HO;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(HO||(HO={}));const ii=zo.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),cy=e=>{switch(typeof e){case"undefined":return ii.undefined;case"string":return ii.string;case"number":return isNaN(e)?ii.nan:ii.number;case"boolean":return ii.boolean;case"function":return ii.function;case"bigint":return ii.bigint;case"symbol":return ii.symbol;case"object":return Array.isArray(e)?ii.array:e===null?ii.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?ii.promise:typeof Map<"u"&&e instanceof Map?ii.map:typeof Set<"u"&&e instanceof Set?ii.set:typeof Date<"u"&&e instanceof Date?ii.date:ii.object;default:return ii.unknown}},Pr=zo.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),Wwe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");let GA=class extends Error{constructor(e){super(),this.issues=[],this.addIssue=n=>{this.issues=[...this.issues,n]},this.addIssues=(n=[])=>{this.issues=[...this.issues,...n]};const t=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,t):this.__proto__=t,this.name="ZodError",this.issues=e}get errors(){return this.issues}format(e){const t=e||function(s){return s.message},n={_errors:[]},r=s=>{for(const a of s.issues)if(a.code==="invalid_union")a.unionErrors.map(r);else if(a.code==="invalid_return_type")r(a.returnTypeError);else if(a.code==="invalid_arguments")r(a.argumentsError);else if(a.path.length===0)n._errors.push(t(a));else{let c=n,i=0;for(;i<a.path.length;){const f=a.path[i];i===a.path.length-1?(c[f]=c[f]||{_errors:[]},c[f]._errors.push(t(a))):c[f]=c[f]||{_errors:[]},c=c[f],i++}}};return r(this),n}toString(){return this.message}get message(){return JSON.stringify(this.issues,zo.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(e=t=>t.message){const t={},n=[];for(const r of this.issues)r.path.length>0?(t[r.path[0]]=t[r.path[0]]||[],t[r.path[0]].push(e(r))):n.push(e(r));return{formErrors:n,fieldErrors:t}}get formErrors(){return this.flatten()}};GA.create=e=>new GA(e);const mS=(e,t)=>{let n;switch(e.code){case Pr.invalid_type:e.received===ii.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Pr.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,zo.jsonStringifyReplacer)}`;break;case Pr.unrecognized_keys:n=`Unrecognized key(s) in object: ${zo.joinValues(e.keys,", ")}`;break;case Pr.invalid_union:n="Invalid input";break;case Pr.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${zo.joinValues(e.options)}`;break;case Pr.invalid_enum_value:n=`Invalid enum value. Expected ${zo.joinValues(e.options)}, received '${e.received}'`;break;case Pr.invalid_arguments:n="Invalid function arguments";break;case Pr.invalid_return_type:n="Invalid function return type";break;case Pr.invalid_date:n="Invalid date";break;case Pr.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:zo.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Pr.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Pr.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Pr.custom:n="Invalid input";break;case Pr.invalid_intersection_types:n="Intersection results could not be merged";break;case Pr.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Pr.not_finite:n="Number must be finite";break;default:n=t.defaultError,zo.assertNever(e)}return{message:n}};let iie=mS;function qwe(e){iie=e}function oj(){return iie}const aj=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,a=[...n,...s.path||[]],c={...s,path:a};let i="";const f=r.filter(g=>!!g).slice().reverse();for(const g of f)i=g(c,{data:t,defaultError:i}).message;return{...s,path:a,message:s.message||i}},Zwe=[];function li(e,t){const n=aj({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,oj(),mS].filter(r=>!!r)});e.common.issues.push(n)}let ef=class sie{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return vs;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n)r.push({key:await s.key,value:await s.value});return sie.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:a,value:c}=s;if(a.status==="aborted"||c.status==="aborted")return vs;a.status==="dirty"&&t.dirty(),c.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(r[a.value]=c.value)}return{status:t.value,value:r}}};const vs=Object.freeze({status:"aborted"}),oie=e=>({status:"dirty",value:e}),gh=e=>({status:"valid",value:e}),VO=e=>e.status==="aborted",$O=e=>e.status==="dirty",gS=e=>e.status==="valid",lj=e=>typeof Promise<"u"&&e instanceof Promise;var Hi;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(Hi||(Hi={}));let tg=class{constructor(e,t,n,r){this._cachedPath=[],this.parent=e,this.data=t,this._path=n,this._key=r}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}};const SG=(e,t)=>{if(gS(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new GA(e.common.issues);return this._error=n,this._error}}};function Cs(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(a,c)=>a.code!=="invalid_type"?{message:c.defaultError}:typeof c.data>"u"?{message:r??c.defaultError}:{message:n??c.defaultError},description:s}}let Ms=class{constructor(e){this.spa=this.safeParseAsync,this._def=e,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this)}get description(){return this._def.description}_getType(e){return cy(e.data)}_getOrReturnCtx(e,t){return t||{common:e.parent.common,data:e.data,parsedType:cy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}_processInputParams(e){return{status:new ef,ctx:{common:e.parent.common,data:e.data,parsedType:cy(e.data),schemaErrorMap:this._def.errorMap,path:e.path,parent:e.parent}}}_parseSync(e){const t=this._parse(e);if(lj(t))throw new Error("Synchronous parse encountered promise.");return t}_parseAsync(e){const t=this._parse(e);return Promise.resolve(t)}parse(e,t){const n=this.safeParse(e,t);if(n.success)return n.data;throw n.error}safeParse(e,t){var n;const r={common:{issues:[],async:(n=t==null?void 0:t.async)!==null&&n!==void 0?n:!1,contextualErrorMap:t==null?void 0:t.errorMap},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cy(e)},s=this._parseSync({data:e,path:r.path,parent:r});return SG(r,s)}async parseAsync(e,t){const n=await this.safeParseAsync(e,t);if(n.success)return n.data;throw n.error}async safeParseAsync(e,t){const n={common:{issues:[],contextualErrorMap:t==null?void 0:t.errorMap,async:!0},path:(t==null?void 0:t.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:e,parsedType:cy(e)},r=this._parse({data:e,path:n.path,parent:n}),s=await(lj(r)?r:Promise.resolve(r));return SG(n,s)}refine(e,t){const n=r=>typeof t=="string"||typeof t>"u"?{message:t}:typeof t=="function"?t(r):t;return this._refinement((r,s)=>{const a=e(r),c=()=>s.addIssue({code:Pr.custom,...n(r)});return typeof Promise<"u"&&a instanceof Promise?a.then(i=>i?!0:(c(),!1)):a?!0:(c(),!1)})}refinement(e,t){return this._refinement((n,r)=>e(n)?!0:(r.addIssue(typeof t=="function"?t(n,r):t),!1))}_refinement(e){return new ZA({schema:this,typeName:os.ZodEffects,effect:{type:"refinement",refinement:e}})}superRefine(e){return this._refinement(e)}optional(){return qg.create(this,this._def)}nullable(){return Dx.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return Ox.create(this,this._def)}promise(){return Sw.create(this,this._def)}or(e){return CS.create([this,e],this._def)}and(e){return SS.create(this,e,this._def)}transform(e){return new ZA({...Cs(this._def),schema:this,typeName:os.ZodEffects,effect:{type:"transform",transform:e}})}default(e){const t=typeof e=="function"?e:()=>e;return new IS({...Cs(this._def),innerType:this,defaultValue:t,typeName:os.ZodDefault})}brand(){return new pie({typeName:os.ZodBranded,type:this,...Cs(this._def)})}catch(e){const t=typeof e=="function"?e:()=>e;return new fj({...Cs(this._def),innerType:this,catchValue:t,typeName:os.ZodCatch})}describe(e){const t=this.constructor;return new t({...this._def,description:e})}pipe(e){return J8.create(this,e)}readonly(){return Aj.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}};const Xwe=/^c[^\s-]{8,}$/i,Ywe=/^[a-z][a-z0-9]*$/,Jwe=/^[0-9A-HJKMNP-TV-Z]{26}$/,ebe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,tbe=/^(?!\.)(?!.*\.\.)([A-Z0-9_+-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,nbe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let DM;const rbe=/^(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))$/,ibe=/^(([a-f0-9]{1,4}:){7}|::([a-f0-9]{1,4}:){0,6}|([a-f0-9]{1,4}:){1}:([a-f0-9]{1,4}:){0,5}|([a-f0-9]{1,4}:){2}:([a-f0-9]{1,4}:){0,4}|([a-f0-9]{1,4}:){3}:([a-f0-9]{1,4}:){0,3}|([a-f0-9]{1,4}:){4}:([a-f0-9]{1,4}:){0,2}|([a-f0-9]{1,4}:){5}:([a-f0-9]{1,4}:){0,1})([a-f0-9]{1,4}|(((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2}))\.){3}((25[0-5])|(2[0-4][0-9])|(1[0-9]{2})|([0-9]{1,2})))$/,sbe=e=>e.precision?e.offset?new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}(([+-]\\d{2}(:?\\d{2})?)|Z)$`):new RegExp(`^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}\\.\\d{${e.precision}}Z$`):e.precision===0?e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}Z$"):e.offset?new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?(([+-]\\d{2}(:?\\d{2})?)|Z)$"):new RegExp("^\\d{4}-\\d{2}-\\d{2}T\\d{2}:\\d{2}:\\d{2}(\\.\\d+)?Z$");function obe(e,t){return!!((t==="v4"||!t)&&rbe.test(e)||(t==="v6"||!t)&&ibe.test(e))}let bw=class X2 extends Ms{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==ii.string){const s=this._getOrReturnCtx(t);return li(s,{code:Pr.invalid_type,expected:ii.string,received:s.parsedType}),vs}const n=new ef;let r;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(r=this._getOrReturnCtx(t,r),li(r,{code:Pr.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(r=this._getOrReturnCtx(t,r),li(r,{code:Pr.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=t.data.length>s.value,c=t.data.length<s.value;(a||c)&&(r=this._getOrReturnCtx(t,r),a?li(r,{code:Pr.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):c&&li(r,{code:Pr.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")tbe.test(t.data)||(r=this._getOrReturnCtx(t,r),li(r,{validation:"email",code:Pr.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")DM||(DM=new RegExp(nbe,"u")),DM.test(t.data)||(r=this._getOrReturnCtx(t,r),li(r,{validation:"emoji",code:Pr.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")ebe.test(t.data)||(r=this._getOrReturnCtx(t,r),li(r,{validation:"uuid",code:Pr.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")Xwe.test(t.data)||(r=this._getOrReturnCtx(t,r),li(r,{validation:"cuid",code:Pr.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")Ywe.test(t.data)||(r=this._getOrReturnCtx(t,r),li(r,{validation:"cuid2",code:Pr.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")Jwe.test(t.data)||(r=this._getOrReturnCtx(t,r),li(r,{validation:"ulid",code:Pr.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{r=this._getOrReturnCtx(t,r),li(r,{validation:"url",code:Pr.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(r=this._getOrReturnCtx(t,r),li(r,{validation:"regex",code:Pr.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(t,r),li(r,{code:Pr.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(r=this._getOrReturnCtx(t,r),li(r,{code:Pr.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(r=this._getOrReturnCtx(t,r),li(r,{code:Pr.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?sbe(s).test(t.data)||(r=this._getOrReturnCtx(t,r),li(r,{code:Pr.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="ip"?obe(t.data,s.version)||(r=this._getOrReturnCtx(t,r),li(r,{validation:"ip",code:Pr.invalid_string,message:s.message}),n.dirty()):zo.assertNever(s);return{status:n.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:Pr.invalid_string,...Hi.errToObj(r)})}_addCheck(t){return new X2({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...Hi.errToObj(t)})}url(t){return this._addCheck({kind:"url",...Hi.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...Hi.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...Hi.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...Hi.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...Hi.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...Hi.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...Hi.errToObj(t)})}datetime(t){var n;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,...Hi.errToObj(t==null?void 0:t.message)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...Hi.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...Hi.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...Hi.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...Hi.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...Hi.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...Hi.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...Hi.errToObj(n)})}nonempty(t){return this.min(1,Hi.errToObj(t))}trim(){return new X2({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new X2({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new X2({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};bw.create=e=>{var t;return new bw({checks:[],typeName:os.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Cs(e)})};function abe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,a=parseInt(e.toFixed(s).replace(".","")),c=parseInt(t.toFixed(s).replace(".",""));return a%c/Math.pow(10,s)}let yS=class GO extends Ms{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==ii.number){const s=this._getOrReturnCtx(t);return li(s,{code:Pr.invalid_type,expected:ii.number,received:s.parsedType}),vs}let n;const r=new ef;for(const s of this._def.checks)s.kind==="int"?zo.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),li(n,{code:Pr.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),li(n,{code:Pr.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),li(n,{code:Pr.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?abe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),li(n,{code:Pr.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),li(n,{code:Pr.not_finite,message:s.message}),r.dirty()):zo.assertNever(s);return{status:r.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Hi.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Hi.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Hi.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Hi.toString(n))}setLimit(t,n,r,s){return new GO({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Hi.toString(s)}]})}_addCheck(t){return new GO({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:Hi.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:Hi.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:Hi.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:Hi.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:Hi.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Hi.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:Hi.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:Hi.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:Hi.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&zo.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}};yS.create=e=>new yS({checks:[],typeName:os.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Cs(e)});let vS=class KO extends Ms{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce&&(t.data=BigInt(t.data)),this._getType(t)!==ii.bigint){const s=this._getOrReturnCtx(t);return li(s,{code:Pr.invalid_type,expected:ii.bigint,received:s.parsedType}),vs}let n;const r=new ef;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),li(n,{code:Pr.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),li(n,{code:Pr.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),li(n,{code:Pr.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):zo.assertNever(s);return{status:r.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,Hi.toString(n))}gt(t,n){return this.setLimit("min",t,!1,Hi.toString(n))}lte(t,n){return this.setLimit("max",t,!0,Hi.toString(n))}lt(t,n){return this.setLimit("max",t,!1,Hi.toString(n))}setLimit(t,n,r,s){return new KO({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:Hi.toString(s)}]})}_addCheck(t){return new KO({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:Hi.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:Hi.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:Hi.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:Hi.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:Hi.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}};vS.create=e=>{var t;return new vS({checks:[],typeName:os.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Cs(e)})};let xS=class extends Ms{_parse(e){if(this._def.coerce&&(e.data=!!e.data),this._getType(e)!==ii.boolean){const t=this._getOrReturnCtx(e);return li(t,{code:Pr.invalid_type,expected:ii.boolean,received:t.parsedType}),vs}return gh(e.data)}};xS.create=e=>new xS({typeName:os.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Cs(e)});let _S=class aie extends Ms{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==ii.date){const s=this._getOrReturnCtx(t);return li(s,{code:Pr.invalid_type,expected:ii.date,received:s.parsedType}),vs}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return li(s,{code:Pr.invalid_date}),vs}const n=new ef;let r;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(r=this._getOrReturnCtx(t,r),li(r,{code:Pr.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(r=this._getOrReturnCtx(t,r),li(r,{code:Pr.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):zo.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new aie({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:Hi.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:Hi.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}};_S.create=e=>new _S({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:os.ZodDate,...Cs(e)});let cj=class extends Ms{_parse(e){if(this._getType(e)!==ii.symbol){const t=this._getOrReturnCtx(e);return li(t,{code:Pr.invalid_type,expected:ii.symbol,received:t.parsedType}),vs}return gh(e.data)}};cj.create=e=>new cj({typeName:os.ZodSymbol,...Cs(e)});let wS=class extends Ms{_parse(e){if(this._getType(e)!==ii.undefined){const t=this._getOrReturnCtx(e);return li(t,{code:Pr.invalid_type,expected:ii.undefined,received:t.parsedType}),vs}return gh(e.data)}};wS.create=e=>new wS({typeName:os.ZodUndefined,...Cs(e)});let bS=class extends Ms{_parse(e){if(this._getType(e)!==ii.null){const t=this._getOrReturnCtx(e);return li(t,{code:Pr.invalid_type,expected:ii.null,received:t.parsedType}),vs}return gh(e.data)}};bS.create=e=>new bS({typeName:os.ZodNull,...Cs(e)});let Cw=class extends Ms{constructor(){super(...arguments),this._any=!0}_parse(e){return gh(e.data)}};Cw.create=e=>new Cw({typeName:os.ZodAny,...Cs(e)});let vx=class extends Ms{constructor(){super(...arguments),this._unknown=!0}_parse(e){return gh(e.data)}};vx.create=e=>new vx({typeName:os.ZodUnknown,...Cs(e)});let l0=class extends Ms{_parse(e){const t=this._getOrReturnCtx(e);return li(t,{code:Pr.invalid_type,expected:ii.never,received:t.parsedType}),vs}};l0.create=e=>new l0({typeName:os.ZodNever,...Cs(e)});let uj=class extends Ms{_parse(e){if(this._getType(e)!==ii.undefined){const t=this._getOrReturnCtx(e);return li(t,{code:Pr.invalid_type,expected:ii.void,received:t.parsedType}),vs}return gh(e.data)}};uj.create=e=>new uj({typeName:os.ZodVoid,...Cs(e)});let Ox=class zT extends Ms{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==ii.array)return li(n,{code:Pr.invalid_type,expected:ii.array,received:n.parsedType}),vs;if(s.exactLength!==null){const c=n.data.length>s.exactLength.value,i=n.data.length<s.exactLength.value;(c||i)&&(li(n,{code:c?Pr.too_big:Pr.too_small,minimum:i?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(li(n,{code:Pr.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(li(n,{code:Pr.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((c,i)=>s.type._parseAsync(new tg(n,c,n.path,i)))).then(c=>ef.mergeArray(r,c));const a=[...n.data].map((c,i)=>s.type._parseSync(new tg(n,c,n.path,i)));return ef.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new zT({...this._def,minLength:{value:t,message:Hi.toString(n)}})}max(t,n){return new zT({...this._def,maxLength:{value:t,message:Hi.toString(n)}})}length(t,n){return new zT({...this._def,exactLength:{value:t,message:Hi.toString(n)}})}nonempty(t){return this.min(1,t)}};Ox.create=(e,t)=>new Ox({type:e,minLength:null,maxLength:null,exactLength:null,typeName:os.ZodArray,...Cs(t)});function m1(e){if(e instanceof Kp){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=qg.create(m1(r))}return new Kp({...e._def,shape:()=>t})}else return e instanceof Ox?new Ox({...e._def,type:m1(e.element)}):e instanceof qg?qg.create(m1(e.unwrap())):e instanceof Dx?Dx.create(m1(e.unwrap())):e instanceof Qy?Qy.create(e.items.map(t=>m1(t))):e}let Kp=class BA extends Ms{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=zo.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==ii.object){const f=this._getOrReturnCtx(t);return li(f,{code:Pr.invalid_type,expected:ii.object,received:f.parsedType}),vs}const{status:n,ctx:r}=this._processInputParams(t),{shape:s,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof l0&&this._def.unknownKeys==="strip"))for(const f in r.data)a.includes(f)||c.push(f);const i=[];for(const f of a){const g=s[f],y=r.data[f];i.push({key:{status:"valid",value:f},value:g._parse(new tg(r,y,r.path,f)),alwaysSet:f in r.data})}if(this._def.catchall instanceof l0){const f=this._def.unknownKeys;if(f==="passthrough")for(const g of c)i.push({key:{status:"valid",value:g},value:{status:"valid",value:r.data[g]}});else if(f==="strict")c.length>0&&(li(r,{code:Pr.unrecognized_keys,keys:c}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const g of c){const y=r.data[g];i.push({key:{status:"valid",value:g},value:f._parse(new tg(r,y,r.path,g)),alwaysSet:g in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const f=[];for(const g of i){const y=await g.key;f.push({key:y,value:await g.value,alwaysSet:g.alwaysSet})}return f}).then(f=>ef.mergeObjectSync(n,f)):ef.mergeObjectSync(n,i)}get shape(){return this._def.shape()}strict(t){return Hi.errToObj,new BA({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var s,a,c,i;const f=(c=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,n,r).message)!==null&&c!==void 0?c:r.defaultError;return n.code==="unrecognized_keys"?{message:(i=Hi.errToObj(t).message)!==null&&i!==void 0?i:f}:{message:f}}}:{}})}strip(){return new BA({...this._def,unknownKeys:"strip"})}passthrough(){return new BA({...this._def,unknownKeys:"passthrough"})}extend(t){return new BA({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new BA({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:os.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new BA({...this._def,catchall:t})}pick(t){const n={};return zo.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new BA({...this._def,shape:()=>n})}omit(t){const n={};return zo.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new BA({...this._def,shape:()=>n})}deepPartial(){return m1(this)}partial(t){const n={};return zo.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}),new BA({...this._def,shape:()=>n})}required(t){const n={};return zo.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof qg;)s=s._def.innerType;n[r]=s}}),new BA({...this._def,shape:()=>n})}keyof(){return fie(zo.objectKeys(this.shape))}};Kp.create=(e,t)=>new Kp({shape:()=>e,unknownKeys:"strip",catchall:l0.create(),typeName:os.ZodObject,...Cs(t)});Kp.strictCreate=(e,t)=>new Kp({shape:()=>e,unknownKeys:"strict",catchall:l0.create(),typeName:os.ZodObject,...Cs(t)});Kp.lazycreate=(e,t)=>new Kp({shape:e,unknownKeys:"strip",catchall:l0.create(),typeName:os.ZodObject,...Cs(t)});let CS=class extends Ms{_parse(e){const{ctx:t}=this._processInputParams(e),n=this._def.options;function r(s){for(const c of s)if(c.result.status==="valid")return c.result;for(const c of s)if(c.result.status==="dirty")return t.common.issues.push(...c.ctx.common.issues),c.result;const a=s.map(c=>new GA(c.ctx.common.issues));return li(t,{code:Pr.invalid_union,unionErrors:a}),vs}if(t.common.async)return Promise.all(n.map(async s=>{const a={...t,common:{...t.common,issues:[]},parent:null};return{result:await s._parseAsync({data:t.data,path:t.path,parent:a}),ctx:a}})).then(r);{let s;const a=[];for(const i of n){const f={...t,common:{...t.common,issues:[]},parent:null},g=i._parseSync({data:t.data,path:t.path,parent:f});if(g.status==="valid")return g;g.status==="dirty"&&!s&&(s={result:g,ctx:f}),f.common.issues.length&&a.push(f.common.issues)}if(s)return t.common.issues.push(...s.ctx.common.issues),s.result;const c=a.map(i=>new GA(i));return li(t,{code:Pr.invalid_union,unionErrors:c}),vs}}get options(){return this._def.options}};CS.create=(e,t)=>new CS({options:e,typeName:os.ZodUnion,...Cs(t)});const QT=e=>e instanceof BS?QT(e.schema):e instanceof ZA?QT(e.innerType()):e instanceof ES?[e.value]:e instanceof bB?e.options:e instanceof TS?Object.keys(e.enum):e instanceof IS?QT(e._def.innerType):e instanceof wS?[void 0]:e instanceof bS?[null]:null;let lie=class cie extends Ms{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==ii.object)return li(n,{code:Pr.invalid_type,expected:ii.object,received:n.parsedType}),vs;const r=this.discriminator,s=n.data[r],a=this.optionsMap.get(s);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(li(n,{code:Pr.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),vs)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const s=new Map;for(const a of n){const c=QT(a.shape[t]);if(!c)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const i of c){if(s.has(i))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(i)}`);s.set(i,a)}}return new cie({typeName:os.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:s,...Cs(r)})}};function WO(e,t){const n=cy(e),r=cy(t);if(e===t)return{valid:!0,data:e};if(n===ii.object&&r===ii.object){const s=zo.objectKeys(t),a=zo.objectKeys(e).filter(i=>s.indexOf(i)!==-1),c={...e,...t};for(const i of a){const f=WO(e[i],t[i]);if(!f.valid)return{valid:!1};c[i]=f.data}return{valid:!0,data:c}}else if(n===ii.array&&r===ii.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let a=0;a<e.length;a++){const c=e[a],i=t[a],f=WO(c,i);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return n===ii.date&&r===ii.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}let SS=class extends Ms{_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=(s,a)=>{if(VO(s)||VO(a))return vs;const c=WO(s.value,a.value);return c.valid?(($O(s)||$O(a))&&t.dirty(),{status:t.value,value:c.data}):(li(n,{code:Pr.invalid_intersection_types}),vs)};return n.common.async?Promise.all([this._def.left._parseAsync({data:n.data,path:n.path,parent:n}),this._def.right._parseAsync({data:n.data,path:n.path,parent:n})]).then(([s,a])=>r(s,a)):r(this._def.left._parseSync({data:n.data,path:n.path,parent:n}),this._def.right._parseSync({data:n.data,path:n.path,parent:n}))}};SS.create=(e,t,n)=>new SS({left:e,right:t,typeName:os.ZodIntersection,...Cs(n)});let Qy=class uie extends Ms{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ii.array)return li(r,{code:Pr.invalid_type,expected:ii.array,received:r.parsedType}),vs;if(r.data.length<this._def.items.length)return li(r,{code:Pr.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),vs;!this._def.rest&&r.data.length>this._def.items.length&&(li(r,{code:Pr.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,c)=>{const i=this._def.items[c]||this._def.rest;return i?i._parse(new tg(r,a,r.path,c)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>ef.mergeArray(n,a)):ef.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new uie({...this._def,rest:t})}};Qy.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new Qy({items:e,typeName:os.ZodTuple,rest:null,...Cs(t)})};let die=class qO extends Ms{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ii.object)return li(r,{code:Pr.invalid_type,expected:ii.object,received:r.parsedType}),vs;const s=[],a=this._def.keyType,c=this._def.valueType;for(const i in r.data)s.push({key:a._parse(new tg(r,i,r.path,i)),value:c._parse(new tg(r,r.data[i],r.path,i))});return r.common.async?ef.mergeObjectAsync(n,s):ef.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Ms?new qO({keyType:t,valueType:n,typeName:os.ZodRecord,...Cs(r)}):new qO({keyType:bw.create(),valueType:t,typeName:os.ZodRecord,...Cs(n)})}},dj=class extends Ms{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(e){const{status:t,ctx:n}=this._processInputParams(e);if(n.parsedType!==ii.map)return li(n,{code:Pr.invalid_type,expected:ii.map,received:n.parsedType}),vs;const r=this._def.keyType,s=this._def.valueType,a=[...n.data.entries()].map(([c,i],f)=>({key:r._parse(new tg(n,c,n.path,[f,"key"])),value:s._parse(new tg(n,i,n.path,[f,"value"]))}));if(n.common.async){const c=new Map;return Promise.resolve().then(async()=>{for(const i of a){const f=await i.key,g=await i.value;if(f.status==="aborted"||g.status==="aborted")return vs;(f.status==="dirty"||g.status==="dirty")&&t.dirty(),c.set(f.value,g.value)}return{status:t.value,value:c}})}else{const c=new Map;for(const i of a){const f=i.key,g=i.value;if(f.status==="aborted"||g.status==="aborted")return vs;(f.status==="dirty"||g.status==="dirty")&&t.dirty(),c.set(f.value,g.value)}return{status:t.value,value:c}}}};dj.create=(e,t,n)=>new dj({valueType:t,keyType:e,typeName:os.ZodMap,...Cs(n)});let hj=class ZO extends Ms{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==ii.set)return li(r,{code:Pr.invalid_type,expected:ii.set,received:r.parsedType}),vs;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(li(r,{code:Pr.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(li(r,{code:Pr.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function c(f){const g=new Set;for(const y of f){if(y.status==="aborted")return vs;y.status==="dirty"&&n.dirty(),g.add(y.value)}return{status:n.value,value:g}}const i=[...r.data.values()].map((f,g)=>a._parse(new tg(r,f,r.path,g)));return r.common.async?Promise.all(i).then(f=>c(f)):c(i)}min(t,n){return new ZO({...this._def,minSize:{value:t,message:Hi.toString(n)}})}max(t,n){return new ZO({...this._def,maxSize:{value:t,message:Hi.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}};hj.create=(e,t)=>new hj({valueType:e,minSize:null,maxSize:null,typeName:os.ZodSet,...Cs(t)});let hie=class HT extends Ms{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==ii.function)return li(n,{code:Pr.invalid_type,expected:ii.function,received:n.parsedType}),vs;function r(i,f){return aj({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,oj(),mS].filter(g=>!!g),issueData:{code:Pr.invalid_arguments,argumentsError:f}})}function s(i,f){return aj({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,oj(),mS].filter(g=>!!g),issueData:{code:Pr.invalid_return_type,returnTypeError:f}})}const a={errorMap:n.common.contextualErrorMap},c=n.data;if(this._def.returns instanceof Sw){const i=this;return gh(async function(...f){const g=new GA([]),y=await i._def.args.parseAsync(f,a).catch(T=>{throw g.addIssue(r(f,T)),g}),b=await Reflect.apply(c,this,y);return await i._def.returns._def.type.parseAsync(b,a).catch(T=>{throw g.addIssue(s(b,T)),g})})}else{const i=this;return gh(function(...f){const g=i._def.args.safeParse(f,a);if(!g.success)throw new GA([r(f,g.error)]);const y=Reflect.apply(c,this,g.data),b=i._def.returns.safeParse(y,a);if(!b.success)throw new GA([s(y,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new HT({...this._def,args:Qy.create(t).rest(vx.create())})}returns(t){return new HT({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new HT({args:t||Qy.create([]).rest(vx.create()),returns:n||vx.create(),typeName:os.ZodFunction,...Cs(r)})}},BS=class extends Ms{get schema(){return this._def.getter()}_parse(e){const{ctx:t}=this._processInputParams(e);return this._def.getter()._parse({data:t.data,path:t.path,parent:t})}};BS.create=(e,t)=>new BS({getter:e,typeName:os.ZodLazy,...Cs(t)});let ES=class extends Ms{_parse(e){if(e.data!==this._def.value){const t=this._getOrReturnCtx(e);return li(t,{received:t.data,code:Pr.invalid_literal,expected:this._def.value}),vs}return{status:"valid",value:e.data}}get value(){return this._def.value}};ES.create=(e,t)=>new ES({value:e,typeName:os.ZodLiteral,...Cs(t)});function fie(e,t){return new bB({values:e,typeName:os.ZodEnum,...Cs(t)})}let bB=class XO extends Ms{_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return li(n,{expected:zo.joinValues(r),received:n.parsedType,code:Pr.invalid_type}),vs}if(this._def.values.indexOf(t.data)===-1){const n=this._getOrReturnCtx(t),r=this._def.values;return li(n,{received:n.data,code:Pr.invalid_enum_value,options:r}),vs}return gh(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t){return XO.create(t)}exclude(t){return XO.create(this.options.filter(n=>!t.includes(n)))}};bB.create=fie;let TS=class extends Ms{_parse(e){const t=zo.getValidEnumValues(this._def.values),n=this._getOrReturnCtx(e);if(n.parsedType!==ii.string&&n.parsedType!==ii.number){const r=zo.objectValues(t);return li(n,{expected:zo.joinValues(r),received:n.parsedType,code:Pr.invalid_type}),vs}if(t.indexOf(e.data)===-1){const r=zo.objectValues(t);return li(n,{received:n.data,code:Pr.invalid_enum_value,options:r}),vs}return gh(e.data)}get enum(){return this._def.values}};TS.create=(e,t)=>new TS({values:e,typeName:os.ZodNativeEnum,...Cs(t)});let Sw=class extends Ms{unwrap(){return this._def.type}_parse(e){const{ctx:t}=this._processInputParams(e);if(t.parsedType!==ii.promise&&t.common.async===!1)return li(t,{code:Pr.invalid_type,expected:ii.promise,received:t.parsedType}),vs;const n=t.parsedType===ii.promise?t.data:Promise.resolve(t.data);return gh(n.then(r=>this._def.type.parseAsync(r,{path:t.path,errorMap:t.common.contextualErrorMap})))}};Sw.create=(e,t)=>new Sw({type:e,typeName:os.ZodPromise,...Cs(t)});let ZA=class extends Ms{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===os.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(e){const{status:t,ctx:n}=this._processInputParams(e),r=this._def.effect||null,s={addIssue:a=>{li(n,a),a.fatal?t.abort():t.dirty()},get path(){return n.path}};if(s.addIssue=s.addIssue.bind(s),r.type==="preprocess"){const a=r.transform(n.data,s);return n.common.issues.length?{status:"dirty",value:n.data}:n.common.async?Promise.resolve(a).then(c=>this._def.schema._parseAsync({data:c,path:n.path,parent:n})):this._def.schema._parseSync({data:a,path:n.path,parent:n})}if(r.type==="refinement"){const a=c=>{const i=r.refinement(c,s);if(n.common.async)return Promise.resolve(i);if(i instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return c};if(n.common.async===!1){const c=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});return c.status==="aborted"?vs:(c.status==="dirty"&&t.dirty(),a(c.value),{status:t.value,value:c.value})}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(c=>c.status==="aborted"?vs:(c.status==="dirty"&&t.dirty(),a(c.value).then(()=>({status:t.value,value:c.value}))))}if(r.type==="transform")if(n.common.async===!1){const a=this._def.schema._parseSync({data:n.data,path:n.path,parent:n});if(!gS(a))return a;const c=r.transform(a.value,s);if(c instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:t.value,value:c}}else return this._def.schema._parseAsync({data:n.data,path:n.path,parent:n}).then(a=>gS(a)?Promise.resolve(r.transform(a.value,s)).then(c=>({status:t.value,value:c})):a);zo.assertNever(r)}};ZA.create=(e,t,n)=>new ZA({schema:e,typeName:os.ZodEffects,effect:t,...Cs(n)});ZA.createWithPreprocess=(e,t,n)=>new ZA({schema:t,effect:{type:"preprocess",transform:e},typeName:os.ZodEffects,...Cs(n)});let qg=class extends Ms{_parse(e){return this._getType(e)===ii.undefined?gh(void 0):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};qg.create=(e,t)=>new qg({innerType:e,typeName:os.ZodOptional,...Cs(t)});let Dx=class extends Ms{_parse(e){return this._getType(e)===ii.null?gh(null):this._def.innerType._parse(e)}unwrap(){return this._def.innerType}};Dx.create=(e,t)=>new Dx({innerType:e,typeName:os.ZodNullable,...Cs(t)});let IS=class extends Ms{_parse(e){const{ctx:t}=this._processInputParams(e);let n=t.data;return t.parsedType===ii.undefined&&(n=this._def.defaultValue()),this._def.innerType._parse({data:n,path:t.path,parent:t})}removeDefault(){return this._def.innerType}};IS.create=(e,t)=>new IS({innerType:e,typeName:os.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Cs(t)});let fj=class extends Ms{_parse(e){const{ctx:t}=this._processInputParams(e),n={...t,common:{...t.common,issues:[]}},r=this._def.innerType._parse({data:n.data,path:n.path,parent:{...n}});return lj(r)?r.then(s=>({status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new GA(n.common.issues)},input:n.data})})):{status:"valid",value:r.status==="valid"?r.value:this._def.catchValue({get error(){return new GA(n.common.issues)},input:n.data})}}removeCatch(){return this._def.innerType}};fj.create=(e,t)=>new fj({innerType:e,typeName:os.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Cs(t)});let pj=class extends Ms{_parse(e){if(this._getType(e)!==ii.nan){const t=this._getOrReturnCtx(e);return li(t,{code:Pr.invalid_type,expected:ii.nan,received:t.parsedType}),vs}return{status:"valid",value:e.data}}};pj.create=e=>new pj({typeName:os.ZodNaN,...Cs(e)});const lbe=Symbol("zod_brand");let pie=class extends Ms{_parse(e){const{ctx:t}=this._processInputParams(e),n=t.data;return this._def.type._parse({data:n,path:t.path,parent:t})}unwrap(){return this._def.type}},J8=class Aie extends Ms{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?vs:s.status==="dirty"?(n.dirty(),oie(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?vs:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new Aie({in:t,out:n,typeName:os.ZodPipeline})}},Aj=class extends Ms{_parse(e){const t=this._def.innerType._parse(e);return gS(t)&&(t.value=Object.freeze(t.value)),t}};Aj.create=(e,t)=>new Aj({innerType:e,typeName:os.ZodReadonly,...Cs(t)});const mie=(e,t={},n)=>e?Cw.create().superRefine((r,s)=>{var a,c;if(!e(r)){const i=typeof t=="function"?t(r):typeof t=="string"?{message:t}:t,f=(c=(a=i.fatal)!==null&&a!==void 0?a:n)!==null&&c!==void 0?c:!0,g=typeof i=="string"?{message:i}:i;s.addIssue({code:"custom",...g,fatal:f})}}):Cw.create(),cbe={object:Kp.lazycreate};var os;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(os||(os={}));const ube=(e,t={message:`Input not instance of ${e.name}`})=>mie(n=>n instanceof e,t),gie=bw.create,yie=yS.create,dbe=pj.create,hbe=vS.create,vie=xS.create,fbe=_S.create,pbe=cj.create,Abe=wS.create,mbe=bS.create,gbe=Cw.create,ybe=vx.create,vbe=l0.create,xbe=uj.create,_be=Ox.create,wbe=Kp.create,bbe=Kp.strictCreate,Cbe=CS.create,Sbe=lie.create,Bbe=SS.create,Ebe=Qy.create,Tbe=die.create,Ibe=dj.create,jbe=hj.create,Fbe=hie.create,Pbe=BS.create,kbe=ES.create,Lbe=bB.create,Mbe=TS.create,Nbe=Sw.create,BG=ZA.create,Rbe=qg.create,Obe=Dx.create,Dbe=ZA.createWithPreprocess,Ube=J8.create,zbe=()=>gie().optional(),Qbe=()=>yie().optional(),Hbe=()=>vie().optional(),Vbe={string:e=>bw.create({...e,coerce:!0}),number:e=>yS.create({...e,coerce:!0}),boolean:e=>xS.create({...e,coerce:!0}),bigint:e=>vS.create({...e,coerce:!0}),date:e=>_S.create({...e,coerce:!0})},$be=vs;var ai=Object.freeze({__proto__:null,defaultErrorMap:mS,setErrorMap:qwe,getErrorMap:oj,makeIssue:aj,EMPTY_PATH:Zwe,addIssueToContext:li,ParseStatus:ef,INVALID:vs,DIRTY:oie,OK:gh,isAborted:VO,isDirty:$O,isValid:gS,isAsync:lj,get util(){return zo},get objectUtil(){return HO},ZodParsedType:ii,getParsedType:cy,ZodType:Ms,ZodString:bw,ZodNumber:yS,ZodBigInt:vS,ZodBoolean:xS,ZodDate:_S,ZodSymbol:cj,ZodUndefined:wS,ZodNull:bS,ZodAny:Cw,ZodUnknown:vx,ZodNever:l0,ZodVoid:uj,ZodArray:Ox,ZodObject:Kp,ZodUnion:CS,ZodDiscriminatedUnion:lie,ZodIntersection:SS,ZodTuple:Qy,ZodRecord:die,ZodMap:dj,ZodSet:hj,ZodFunction:hie,ZodLazy:BS,ZodLiteral:ES,ZodEnum:bB,ZodNativeEnum:TS,ZodPromise:Sw,ZodEffects:ZA,ZodTransformer:ZA,ZodOptional:qg,ZodNullable:Dx,ZodDefault:IS,ZodCatch:fj,ZodNaN:pj,BRAND:lbe,ZodBranded:pie,ZodPipeline:J8,ZodReadonly:Aj,custom:mie,Schema:Ms,ZodSchema:Ms,late:cbe,get ZodFirstPartyTypeKind(){return os},coerce:Vbe,any:gbe,array:_be,bigint:hbe,boolean:vie,date:fbe,discriminatedUnion:Sbe,effect:BG,enum:Lbe,function:Fbe,instanceof:ube,intersection:Bbe,lazy:Pbe,literal:kbe,map:Ibe,nan:dbe,nativeEnum:Mbe,never:vbe,null:mbe,nullable:Obe,number:yie,object:wbe,oboolean:Hbe,onumber:Qbe,optional:Rbe,ostring:zbe,pipeline:Ube,preprocess:Dbe,promise:Nbe,record:Tbe,set:jbe,strictObject:bbe,string:gie,symbol:pbe,transformer:BG,tuple:Ebe,undefined:Abe,union:Cbe,unknown:ybe,void:xbe,NEVER:$be,ZodIssueCode:Pr,quotelessJson:Wwe,ZodError:GA});const b2=ai.object({title:ai.string().optional(),link:ai.string().optional()}),xie=ai.object({color:ai.string().optional(),variant:ai.enum(["soft","solid"]).optional(),themeMode:ai.enum(["light","dark"]).optional(),fontFamily:ai.enum(["rubik","inter","ibm","fira"]).optional(),radius:ai.number().min(.5).max(4).optional()}),Gbe=ai.object({composerPlaceholder:ai.string().optional(),botName:ai.string().optional(),botAvatar:ai.string().optional(),botDescription:ai.string().optional(),website:b2.optional(),email:b2.optional(),phone:b2.optional(),privacyPolicy:b2.optional(),termsOfService:b2.optional(),showPoweredBy:ai.boolean().optional(),storageLocation:ai.enum(["localStorage","sessionStorage"]).optional()}).merge(xie),Kbe=ai.enum(["heading1","heading2","heading3","text","horizontalRule","link","italic","bold","orderedList","unorderedList","listItem","lineBreak","pre"]),Wbe=ai.object({}).passthrough().transform(e=>e),Or=ai.object({className:ai.string().optional(),style:Wbe.optional()}),UM=ai.object({container:Or.optional(),image:Or.optional(),fallback:Or.optional()}),qbe=ai.object({button:Or.optional(),text:ai.record(Kbe,Or.optional()),image:ai.object({image:Or.optional(),placeholder:Or.optional()}).optional(),audio:Or.optional(),video:Or.optional(),file:ai.object({container:Or.optional(),title:Or.optional(),icon:Or.optional()}).optional(),location:ai.object({container:Or.optional(),title:Or.optional(),icon:Or.optional()}).optional(),column:Or.optional(),row:Or.optional(),bubble:Or.optional(),carousel:ai.object({container:Or.optional(),slidesContainer:Or.optional(),backButton:Or.optional(),nextButton:Or.optional()}).optional(),dropdown:ai.object({button:ai.object({container:Or.optional(),icon:Or.optional(),text:Or.optional()}).optional(),content:ai.object({container:Or.optional(),item:Or.optional()}).optional()}).optional()}),Zbe=ai.object({container:Or.optional(),modal:ai.object({overlay:Or.optional(),container:Or.optional(),dialog:ai.object({container:Or.optional(),title:ai.object({container:Or.optional(),text:Or.optional(),closeIcon:Or.optional()}).optional(),content:Or.optional(),newConversation:ai.object({text:Or.optional(),button:Or.optional()}).optional()}).optional()}).optional(),notification:ai.object({container:Or.optional(),title:Or.optional(),description:Or.optional(),icon:Or.optional(),closeIcon:Or.optional()}).optional(),header:ai.object({container:Or.optional(),content:ai.object({container:Or.optional(),title:Or.optional(),description:Or.optional(),avatar:UM.optional(),actions:ai.object({container:Or.optional(),icons:Or.optional()}).optional()}),expandedContent:ai.object({container:Or.optional(),group:Or.optional(),descriptionItems:ai.object({container:Or.optional(),icon:Or.optional(),text:Or.optional(),link:Or.optional(),poweredBy:Or.optional()}).optional()}).optional(),description:ai.object({container:Or.optional(),title:Or.optional(),subtitle:Or.optional()}).optional(),newConversationIcon:Or.optional()}).optional(),composer:ai.object({container:Or.optional(),input:Or.optional(),uploadButton:ai.object({container:Or.optional(),icon:Or.optional()}).optional(),button:ai.object({container:Or.optional(),icon:Or.optional()}).optional()}).optional(),fab:ai.object({icon:Or.optional(),container:Or.optional()}).optional(),messageList:ai.object({scrollbar:ai.object({container:Or.optional(),viewport:Or.optional(),thumb:Or.optional(),corner:Or.optional(),background:Or.optional()}).optional(),container:Or.optional(),marquee:ai.object({content:Or.optional(),title:Or.optional(),description:Or.optional(),avatar:UM.optional(),container:Or.optional()}).optional(),scrollDownButton:ai.object({container:Or.optional(),button:Or.optional(),icon:Or.optional()}).optional()}).optional(),message:ai.object({container:Or.optional(),avatar:UM.optional(),blocks:qbe.optional()}).optional(),loadingIndicator:ai.object({container:Or.optional(),loader:Or.optional()}).optional()}),Xbe=ai.enum(["opened","closed","initial"]),Ybe=ai.object({name:ai.string().optional(),pictureUrl:ai.string().optional(),data:ai.record(ai.unknown()).optional(),userKey:ai.string().optional()}),Jbe=ai.object({configuration:Gbe.optional().catch(void 0),theme:Zbe.optional().catch(void 0),style:ai.string().optional().catch(void 0),user:Ybe.optional().catch(void 0)});Jbe.extend({clientId:ai.string(),botId:ai.string(),selector:ai.string().optional().catch(void 0),webchatScriptUrl:ai.string().optional().catch(void 0),fabScriptUrl:ai.string().optional().catch(void 0),pushpinUrl:ai.string().optional().catch(void 0),defaultState:Xbe.optional().catch(void 0)});function e2e(e){const{fontFamily:t,radius:n,themeMode:r,variant:s,color:a}=xie.parse(e);let c={},i={};if(a){const y=CG(a),b=r==="dark"?pG(y):y,T=CG(pwe(Awe(QO(a)))),S=r==="dark"?pG(T):T,U=r==="dark"?"#101010":"#fdfdfd";i=Object.entries({...b,1:U}).reduce((W,[L,Q])=>({...W,[`--bpPrimary-${L}`]:Q}),{});const N=Object.entries({...S,1:U}).reduce((W,[L,Q])=>({...W,[`--bpGray-${L}`]:Q}),{});c={...i,...N}}n&&(c={...c,"--bpRadius-scale":n.toString()});const f=i?xG(i["--bpPrimary-600"],i["--bpPrimary-50"])>40?"var(--bpPrimary-50)":"var(--bpPrimary-900)":"var(--bpPrimary-50)",g=s==="solid"?{"--header-bg":"var(--bpPrimary-600)","--header-bg-hover":"var(--bpPrimary-700)","--header-hover-dark":"var(--bpPrimary-800)","--header-title":f,"--header-description":f,"--header-description-icon":f,"--header-description-link":f,"--header-avatar-bg":"var(--bpPrimary-300)","--header-avatar-text":"var(--bpPrimary-700)","--message-bg":"var(--bpPrimary-600)","--message-bg-hover":"var(--bpPrimary-700)","--message-text":f,"--send-button-bg":"var(--bpPrimary-600)","--send-button-bg-hover":"var(--bpPrimary-700)","--send-button-text":"var(--bpPrimary-50)","--button-bg":"var(--bpPrimary-50)","--button-bg-hover":"var(--bpPrimary-100)","--button-text":"var(--bpPrimary-800)","--fab-bg":"var(--bpPrimary-600)","--fab-bg-hover":"var(--bpPrimary-700)","--fab-icon":f}:{"--header-bg":"var(--bpGray-50)","--header-bg-hover":"var(--bpGray-100)","--header-hover-dark":"var(--bpGray-200)","--header-title":"var(--bpGray-900)","--header-description":"var(--bpGray-800)","--header-description-icon":"var(--bpPrimary-700)","--header-description-link":"var(--bpPrimary-800)","--header-avatar-bg":"var(--bpPrimary-600)","--header-avatar-text":"var(--bpPrimary-50)","--message-bg":"var(--bpPrimary-100)","--message-bg-hover":"var(--bpPrimary-200)","--message-text":"var(--bpPrimary-900)","--send-button-bg":"var(--bpPrimary-600)","--send-button-bg-hover":"var(--bpPrimary-700)","--send-button-text":"var(--bpPrimary-50)","--button-bg":"var(--bpPrimary-500)","--button-bg-hover":"var(--bpPrimary-600)","--button-text":i?xG(i["--bpPrimary-500"],i["--bpPrimary-50"])>40?"var(--bpPrimary-50)":"var(--bpPrimary-900)":"var(--bpPrimary-50)","--fab-bg":"var(--bpPrimary-100)","--fab-bg-hover":"var(--bpPrimary-200)","--fab-icon":"var(--bpPrimary-700)"};return c={...c,...g},_G(":root",c)+(t?_G(".bpFont",{"font-family":`var(--${t}-font)`}):"")}const t2e=(e,t={})=>new Promise((n,r)=>{if(typeof window>"u")return r("Window is not defined");if(!e)return r("Url is not defined");let s=null;const a=new Image;a.addEventListener("load",()=>{s&&clearTimeout(s),n({width:a.naturalWidth,height:a.naturalHeight})}),a.addEventListener("error",c=>{s&&clearTimeout(s),r(`${c.type}: ${c.message}`)}),a.src=e,t.timeout&&(s=setTimeout(()=>r("Timeout"),t.timeout))}),ez=q.forwardRef(({userId:e,src:t,container:n,image:r,fallback:s,...a},c)=>{const i=Jre(e??"",15);return zt.jsxs(Z8,{ref:c,"data-color":i,...n,...a,children:[zt.jsx(X8,{src:t,...r}),zt.jsx(Y8,{...s,children:typeof a.children=="string"?a.children[0]:a.children})]})});ez.displayName="Avatar";function n2e(e,t){const n={};return(e[e.length-1]===""?[...e,""]:e).join((n.padRight?" ":"")+","+(n.padLeft===!1?"":" ")).trim()}const r2e=/^[$_\p{ID_Start}][$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,i2e=/^[$_\p{ID_Start}][-$_\u{200C}\u{200D}\p{ID_Continue}]*$/u,s2e={};function EG(e,t){return(s2e.jsx?i2e:r2e).test(e)}const o2e=/[ \t\n\f\r]/g;function a2e(e){return typeof e=="object"?e.type==="text"?TG(e.value):!1:TG(e)}function TG(e){return e.replace(o2e,"")===""}class CB{constructor(t,n,r){this.property=t,this.normal=n,r&&(this.space=r)}}CB.prototype.property={};CB.prototype.normal={};CB.prototype.space=null;function _ie(e,t){const n={},r={};let s=-1;for(;++s<e.length;)Object.assign(n,e[s].property),Object.assign(r,e[s].normal);return new CB(n,r,t)}function YO(e){return e.toLowerCase()}class Zp{constructor(t,n){this.property=t,this.attribute=n}}Zp.prototype.space=null;Zp.prototype.boolean=!1;Zp.prototype.booleanish=!1;Zp.prototype.overloadedBoolean=!1;Zp.prototype.number=!1;Zp.prototype.commaSeparated=!1;Zp.prototype.spaceSeparated=!1;Zp.prototype.commaOrSpaceSeparated=!1;Zp.prototype.mustUseProperty=!1;Zp.prototype.defined=!1;let l2e=0;const bs=e_(),kc=e_(),wie=e_(),jr=e_(),La=e_(),ew=e_(),zf=e_();function e_(){return 2**++l2e}const JO=Object.freeze(Object.defineProperty({__proto__:null,boolean:bs,booleanish:kc,commaOrSpaceSeparated:zf,commaSeparated:ew,number:jr,overloadedBoolean:wie,spaceSeparated:La},Symbol.toStringTag,{value:"Module"})),zM=Object.keys(JO);class tz extends Zp{constructor(t,n,r,s){let a=-1;if(super(t,n),IG(this,"space",s),typeof r=="number")for(;++a<zM.length;){const c=zM[a];IG(this,zM[a],(r&JO[c])===JO[c])}}}tz.prototype.defined=!0;function IG(e,t,n){n&&(e[t]=n)}const c2e={}.hasOwnProperty;function Ww(e){const t={},n={};let r;for(r in e.properties)if(c2e.call(e.properties,r)){const s=e.properties[r],a=new tz(r,e.transform(e.attributes||{},r),s,e.space);e.mustUseProperty&&e.mustUseProperty.includes(r)&&(a.mustUseProperty=!0),t[r]=a,n[YO(r)]=r,n[YO(a.attribute)]=r}return new CB(t,n,e.space)}const bie=Ww({space:"xlink",transform(e,t){return"xlink:"+t.slice(5).toLowerCase()},properties:{xLinkActuate:null,xLinkArcRole:null,xLinkHref:null,xLinkRole:null,xLinkShow:null,xLinkTitle:null,xLinkType:null}}),Cie=Ww({space:"xml",transform(e,t){return"xml:"+t.slice(3).toLowerCase()},properties:{xmlLang:null,xmlBase:null,xmlSpace:null}});function Sie(e,t){return t in e?e[t]:t}function Bie(e,t){return Sie(e,t.toLowerCase())}const Eie=Ww({space:"xmlns",attributes:{xmlnsxlink:"xmlns:xlink"},transform:Bie,properties:{xmlns:null,xmlnsXLink:null}}),Tie=Ww({transform(e,t){return t==="role"?t:"aria-"+t.slice(4).toLowerCase()},properties:{ariaActiveDescendant:null,ariaAtomic:kc,ariaAutoComplete:null,ariaBusy:kc,ariaChecked:kc,ariaColCount:jr,ariaColIndex:jr,ariaColSpan:jr,ariaControls:La,ariaCurrent:null,ariaDescribedBy:La,ariaDetails:null,ariaDisabled:kc,ariaDropEffect:La,ariaErrorMessage:null,ariaExpanded:kc,ariaFlowTo:La,ariaGrabbed:kc,ariaHasPopup:null,ariaHidden:kc,ariaInvalid:null,ariaKeyShortcuts:null,ariaLabel:null,ariaLabelledBy:La,ariaLevel:jr,ariaLive:null,ariaModal:kc,ariaMultiLine:kc,ariaMultiSelectable:kc,ariaOrientation:null,ariaOwns:La,ariaPlaceholder:null,ariaPosInSet:jr,ariaPressed:kc,ariaReadOnly:kc,ariaRelevant:null,ariaRequired:kc,ariaRoleDescription:La,ariaRowCount:jr,ariaRowIndex:jr,ariaRowSpan:jr,ariaSelected:kc,ariaSetSize:jr,ariaSort:null,ariaValueMax:jr,ariaValueMin:jr,ariaValueNow:jr,ariaValueText:null,role:null}}),u2e=Ww({space:"html",attributes:{acceptcharset:"accept-charset",classname:"class",htmlfor:"for",httpequiv:"http-equiv"},transform:Bie,mustUseProperty:["checked","multiple","muted","selected"],properties:{abbr:null,accept:ew,acceptCharset:La,accessKey:La,action:null,allow:null,allowFullScreen:bs,allowPaymentRequest:bs,allowUserMedia:bs,alt:null,as:null,async:bs,autoCapitalize:null,autoComplete:La,autoFocus:bs,autoPlay:bs,blocking:La,capture:null,charSet:null,checked:bs,cite:null,className:La,cols:jr,colSpan:null,content:null,contentEditable:kc,controls:bs,controlsList:La,coords:jr|ew,crossOrigin:null,data:null,dateTime:null,decoding:null,default:bs,defer:bs,dir:null,dirName:null,disabled:bs,download:wie,draggable:kc,encType:null,enterKeyHint:null,fetchPriority:null,form:null,formAction:null,formEncType:null,formMethod:null,formNoValidate:bs,formTarget:null,headers:La,height:jr,hidden:bs,high:jr,href:null,hrefLang:null,htmlFor:La,httpEquiv:La,id:null,imageSizes:null,imageSrcSet:null,inert:bs,inputMode:null,integrity:null,is:null,isMap:bs,itemId:null,itemProp:La,itemRef:La,itemScope:bs,itemType:La,kind:null,label:null,lang:null,language:null,list:null,loading:null,loop:bs,low:jr,manifest:null,max:null,maxLength:jr,media:null,method:null,min:null,minLength:jr,multiple:bs,muted:bs,name:null,nonce:null,noModule:bs,noValidate:bs,onAbort:null,onAfterPrint:null,onAuxClick:null,onBeforeMatch:null,onBeforePrint:null,onBeforeToggle:null,onBeforeUnload:null,onBlur:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onContextLost:null,onContextMenu:null,onContextRestored:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnded:null,onError:null,onFocus:null,onFormData:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLanguageChange:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadEnd:null,onLoadStart:null,onMessage:null,onMessageError:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRejectionHandled:null,onReset:null,onResize:null,onScroll:null,onScrollEnd:null,onSecurityPolicyViolation:null,onSeeked:null,onSeeking:null,onSelect:null,onSlotChange:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnhandledRejection:null,onUnload:null,onVolumeChange:null,onWaiting:null,onWheel:null,open:bs,optimum:jr,pattern:null,ping:La,placeholder:null,playsInline:bs,popover:null,popoverTarget:null,popoverTargetAction:null,poster:null,preload:null,readOnly:bs,referrerPolicy:null,rel:La,required:bs,reversed:bs,rows:jr,rowSpan:jr,sandbox:La,scope:null,scoped:bs,seamless:bs,selected:bs,shadowRootClonable:bs,shadowRootDelegatesFocus:bs,shadowRootMode:null,shape:null,size:jr,sizes:null,slot:null,span:jr,spellCheck:kc,src:null,srcDoc:null,srcLang:null,srcSet:null,start:jr,step:null,style:null,tabIndex:jr,target:null,title:null,translate:null,type:null,typeMustMatch:bs,useMap:null,value:kc,width:jr,wrap:null,writingSuggestions:null,align:null,aLink:null,archive:La,axis:null,background:null,bgColor:null,border:jr,borderColor:null,bottomMargin:jr,cellPadding:null,cellSpacing:null,char:null,charOff:null,classId:null,clear:null,code:null,codeBase:null,codeType:null,color:null,compact:bs,declare:bs,event:null,face:null,frame:null,frameBorder:null,hSpace:jr,leftMargin:jr,link:null,longDesc:null,lowSrc:null,marginHeight:jr,marginWidth:jr,noResize:bs,noHref:bs,noShade:bs,noWrap:bs,object:null,profile:null,prompt:null,rev:null,rightMargin:jr,rules:null,scheme:null,scrolling:kc,standby:null,summary:null,text:null,topMargin:jr,valueType:null,version:null,vAlign:null,vLink:null,vSpace:jr,allowTransparency:null,autoCorrect:null,autoSave:null,disablePictureInPicture:bs,disableRemotePlayback:bs,prefix:null,property:null,results:jr,security:null,unselectable:null}}),d2e=Ww({space:"svg",attributes:{accentHeight:"accent-height",alignmentBaseline:"alignment-baseline",arabicForm:"arabic-form",baselineShift:"baseline-shift",capHeight:"cap-height",className:"class",clipPath:"clip-path",clipRule:"clip-rule",colorInterpolation:"color-interpolation",colorInterpolationFilters:"color-interpolation-filters",colorProfile:"color-profile",colorRendering:"color-rendering",crossOrigin:"crossorigin",dataType:"datatype",dominantBaseline:"dominant-baseline",enableBackground:"enable-background",fillOpacity:"fill-opacity",fillRule:"fill-rule",floodColor:"flood-color",floodOpacity:"flood-opacity",fontFamily:"font-family",fontSize:"font-size",fontSizeAdjust:"font-size-adjust",fontStretch:"font-stretch",fontStyle:"font-style",fontVariant:"font-variant",fontWeight:"font-weight",glyphName:"glyph-name",glyphOrientationHorizontal:"glyph-orientation-horizontal",glyphOrientationVertical:"glyph-orientation-vertical",hrefLang:"hreflang",horizAdvX:"horiz-adv-x",horizOriginX:"horiz-origin-x",horizOriginY:"horiz-origin-y",imageRendering:"image-rendering",letterSpacing:"letter-spacing",lightingColor:"lighting-color",markerEnd:"marker-end",markerMid:"marker-mid",markerStart:"marker-start",navDown:"nav-down",navDownLeft:"nav-down-left",navDownRight:"nav-down-right",navLeft:"nav-left",navNext:"nav-next",navPrev:"nav-prev",navRight:"nav-right",navUp:"nav-up",navUpLeft:"nav-up-left",navUpRight:"nav-up-right",onAbort:"onabort",onActivate:"onactivate",onAfterPrint:"onafterprint",onBeforePrint:"onbeforeprint",onBegin:"onbegin",onCancel:"oncancel",onCanPlay:"oncanplay",onCanPlayThrough:"oncanplaythrough",onChange:"onchange",onClick:"onclick",onClose:"onclose",onCopy:"oncopy",onCueChange:"oncuechange",onCut:"oncut",onDblClick:"ondblclick",onDrag:"ondrag",onDragEnd:"ondragend",onDragEnter:"ondragenter",onDragExit:"ondragexit",onDragLeave:"ondragleave",onDragOver:"ondragover",onDragStart:"ondragstart",onDrop:"ondrop",onDurationChange:"ondurationchange",onEmptied:"onemptied",onEnd:"onend",onEnded:"onended",onError:"onerror",onFocus:"onfocus",onFocusIn:"onfocusin",onFocusOut:"onfocusout",onHashChange:"onhashchange",onInput:"oninput",onInvalid:"oninvalid",onKeyDown:"onkeydown",onKeyPress:"onkeypress",onKeyUp:"onkeyup",onLoad:"onload",onLoadedData:"onloadeddata",onLoadedMetadata:"onloadedmetadata",onLoadStart:"onloadstart",onMessage:"onmessage",onMouseDown:"onmousedown",onMouseEnter:"onmouseenter",onMouseLeave:"onmouseleave",onMouseMove:"onmousemove",onMouseOut:"onmouseout",onMouseOver:"onmouseover",onMouseUp:"onmouseup",onMouseWheel:"onmousewheel",onOffline:"onoffline",onOnline:"ononline",onPageHide:"onpagehide",onPageShow:"onpageshow",onPaste:"onpaste",onPause:"onpause",onPlay:"onplay",onPlaying:"onplaying",onPopState:"onpopstate",onProgress:"onprogress",onRateChange:"onratechange",onRepeat:"onrepeat",onReset:"onreset",onResize:"onresize",onScroll:"onscroll",onSeeked:"onseeked",onSeeking:"onseeking",onSelect:"onselect",onShow:"onshow",onStalled:"onstalled",onStorage:"onstorage",onSubmit:"onsubmit",onSuspend:"onsuspend",onTimeUpdate:"ontimeupdate",onToggle:"ontoggle",onUnload:"onunload",onVolumeChange:"onvolumechange",onWaiting:"onwaiting",onZoom:"onzoom",overlinePosition:"overline-position",overlineThickness:"overline-thickness",paintOrder:"paint-order",panose1:"panose-1",pointerEvents:"pointer-events",referrerPolicy:"referrerpolicy",renderingIntent:"rendering-intent",shapeRendering:"shape-rendering",stopColor:"stop-color",stopOpacity:"stop-opacity",strikethroughPosition:"strikethrough-position",strikethroughThickness:"strikethrough-thickness",strokeDashArray:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeLineCap:"stroke-linecap",strokeLineJoin:"stroke-linejoin",strokeMiterLimit:"stroke-miterlimit",strokeOpacity:"stroke-opacity",strokeWidth:"stroke-width",tabIndex:"tabindex",textAnchor:"text-anchor",textDecoration:"text-decoration",textRendering:"text-rendering",transformOrigin:"transform-origin",typeOf:"typeof",underlinePosition:"underline-position",underlineThickness:"underline-thickness",unicodeBidi:"unicode-bidi",unicodeRange:"unicode-range",unitsPerEm:"units-per-em",vAlphabetic:"v-alphabetic",vHanging:"v-hanging",vIdeographic:"v-ideographic",vMathematical:"v-mathematical",vectorEffect:"vector-effect",vertAdvY:"vert-adv-y",vertOriginX:"vert-origin-x",vertOriginY:"vert-origin-y",wordSpacing:"word-spacing",writingMode:"writing-mode",xHeight:"x-height",playbackOrder:"playbackorder",timelineBegin:"timelinebegin"},transform:Sie,properties:{about:zf,accentHeight:jr,accumulate:null,additive:null,alignmentBaseline:null,alphabetic:jr,amplitude:jr,arabicForm:null,ascent:jr,attributeName:null,attributeType:null,azimuth:jr,bandwidth:null,baselineShift:null,baseFrequency:null,baseProfile:null,bbox:null,begin:null,bias:jr,by:null,calcMode:null,capHeight:jr,className:La,clip:null,clipPath:null,clipPathUnits:null,clipRule:null,color:null,colorInterpolation:null,colorInterpolationFilters:null,colorProfile:null,colorRendering:null,content:null,contentScriptType:null,contentStyleType:null,crossOrigin:null,cursor:null,cx:null,cy:null,d:null,dataType:null,defaultAction:null,descent:jr,diffuseConstant:jr,direction:null,display:null,dur:null,divisor:jr,dominantBaseline:null,download:bs,dx:null,dy:null,edgeMode:null,editable:null,elevation:jr,enableBackground:null,end:null,event:null,exponent:jr,externalResourcesRequired:null,fill:null,fillOpacity:jr,fillRule:null,filter:null,filterRes:null,filterUnits:null,floodColor:null,floodOpacity:null,focusable:null,focusHighlight:null,fontFamily:null,fontSize:null,fontSizeAdjust:null,fontStretch:null,fontStyle:null,fontVariant:null,fontWeight:null,format:null,fr:null,from:null,fx:null,fy:null,g1:ew,g2:ew,glyphName:ew,glyphOrientationHorizontal:null,glyphOrientationVertical:null,glyphRef:null,gradientTransform:null,gradientUnits:null,handler:null,hanging:jr,hatchContentUnits:null,hatchUnits:null,height:null,href:null,hrefLang:null,horizAdvX:jr,horizOriginX:jr,horizOriginY:jr,id:null,ideographic:jr,imageRendering:null,initialVisibility:null,in:null,in2:null,intercept:jr,k:jr,k1:jr,k2:jr,k3:jr,k4:jr,kernelMatrix:zf,kernelUnitLength:null,keyPoints:null,keySplines:null,keyTimes:null,kerning:null,lang:null,lengthAdjust:null,letterSpacing:null,lightingColor:null,limitingConeAngle:jr,local:null,markerEnd:null,markerMid:null,markerStart:null,markerHeight:null,markerUnits:null,markerWidth:null,mask:null,maskContentUnits:null,maskUnits:null,mathematical:null,max:null,media:null,mediaCharacterEncoding:null,mediaContentEncodings:null,mediaSize:jr,mediaTime:null,method:null,min:null,mode:null,name:null,navDown:null,navDownLeft:null,navDownRight:null,navLeft:null,navNext:null,navPrev:null,navRight:null,navUp:null,navUpLeft:null,navUpRight:null,numOctaves:null,observer:null,offset:null,onAbort:null,onActivate:null,onAfterPrint:null,onBeforePrint:null,onBegin:null,onCancel:null,onCanPlay:null,onCanPlayThrough:null,onChange:null,onClick:null,onClose:null,onCopy:null,onCueChange:null,onCut:null,onDblClick:null,onDrag:null,onDragEnd:null,onDragEnter:null,onDragExit:null,onDragLeave:null,onDragOver:null,onDragStart:null,onDrop:null,onDurationChange:null,onEmptied:null,onEnd:null,onEnded:null,onError:null,onFocus:null,onFocusIn:null,onFocusOut:null,onHashChange:null,onInput:null,onInvalid:null,onKeyDown:null,onKeyPress:null,onKeyUp:null,onLoad:null,onLoadedData:null,onLoadedMetadata:null,onLoadStart:null,onMessage:null,onMouseDown:null,onMouseEnter:null,onMouseLeave:null,onMouseMove:null,onMouseOut:null,onMouseOver:null,onMouseUp:null,onMouseWheel:null,onOffline:null,onOnline:null,onPageHide:null,onPageShow:null,onPaste:null,onPause:null,onPlay:null,onPlaying:null,onPopState:null,onProgress:null,onRateChange:null,onRepeat:null,onReset:null,onResize:null,onScroll:null,onSeeked:null,onSeeking:null,onSelect:null,onShow:null,onStalled:null,onStorage:null,onSubmit:null,onSuspend:null,onTimeUpdate:null,onToggle:null,onUnload:null,onVolumeChange:null,onWaiting:null,onZoom:null,opacity:null,operator:null,order:null,orient:null,orientation:null,origin:null,overflow:null,overlay:null,overlinePosition:jr,overlineThickness:jr,paintOrder:null,panose1:null,path:null,pathLength:jr,patternContentUnits:null,patternTransform:null,patternUnits:null,phase:null,ping:La,pitch:null,playbackOrder:null,pointerEvents:null,points:null,pointsAtX:jr,pointsAtY:jr,pointsAtZ:jr,preserveAlpha:null,preserveAspectRatio:null,primitiveUnits:null,propagate:null,property:zf,r:null,radius:null,referrerPolicy:null,refX:null,refY:null,rel:zf,rev:zf,renderingIntent:null,repeatCount:null,repeatDur:null,requiredExtensions:zf,requiredFeatures:zf,requiredFonts:zf,requiredFormats:zf,resource:null,restart:null,result:null,rotate:null,rx:null,ry:null,scale:null,seed:null,shapeRendering:null,side:null,slope:null,snapshotTime:null,specularConstant:jr,specularExponent:jr,spreadMethod:null,spacing:null,startOffset:null,stdDeviation:null,stemh:null,stemv:null,stitchTiles:null,stopColor:null,stopOpacity:null,strikethroughPosition:jr,strikethroughThickness:jr,string:null,stroke:null,strokeDashArray:zf,strokeDashOffset:null,strokeLineCap:null,strokeLineJoin:null,strokeMiterLimit:jr,strokeOpacity:jr,strokeWidth:null,style:null,surfaceScale:jr,syncBehavior:null,syncBehaviorDefault:null,syncMaster:null,syncTolerance:null,syncToleranceDefault:null,systemLanguage:zf,tabIndex:jr,tableValues:null,target:null,targetX:jr,targetY:jr,textAnchor:null,textDecoration:null,textRendering:null,textLength:null,timelineBegin:null,title:null,transformBehavior:null,type:null,typeOf:zf,to:null,transform:null,transformOrigin:null,u1:null,u2:null,underlinePosition:jr,underlineThickness:jr,unicode:null,unicodeBidi:null,unicodeRange:null,unitsPerEm:jr,values:null,vAlphabetic:jr,vMathematical:jr,vectorEffect:null,vHanging:jr,vIdeographic:jr,version:null,vertAdvY:jr,vertOriginX:jr,vertOriginY:jr,viewBox:null,viewTarget:null,visibility:null,width:null,widths:null,wordSpacing:null,writingMode:null,x:null,x1:null,x2:null,xChannelSelector:null,xHeight:jr,y:null,y1:null,y2:null,yChannelSelector:null,z:null,zoomAndPan:null}}),h2e=/^data[-\w.:]+$/i,jG=/-[a-z]/g,f2e=/[A-Z]/g;function p2e(e,t){const n=YO(t);let r=t,s=Zp;if(n in e.normal)return e.property[e.normal[n]];if(n.length>4&&n.slice(0,4)==="data"&&h2e.test(t)){if(t.charAt(4)==="-"){const a=t.slice(5).replace(jG,m2e);r="data"+a.charAt(0).toUpperCase()+a.slice(1)}else{const a=t.slice(4);if(!jG.test(a)){let c=a.replace(f2e,A2e);c.charAt(0)!=="-"&&(c="-"+c),t="data"+c}}s=tz}return new s(r,t)}function A2e(e){return"-"+e.toLowerCase()}function m2e(e){return e.charAt(1).toUpperCase()}const g2e={classId:"classID",dataType:"datatype",itemId:"itemID",strokeDashArray:"strokeDasharray",strokeDashOffset:"strokeDashoffset",strokeLineCap:"strokeLinecap",strokeLineJoin:"strokeLinejoin",strokeMiterLimit:"strokeMiterlimit",typeOf:"typeof",xLinkActuate:"xlinkActuate",xLinkArcRole:"xlinkArcrole",xLinkHref:"xlinkHref",xLinkRole:"xlinkRole",xLinkShow:"xlinkShow",xLinkTitle:"xlinkTitle",xLinkType:"xlinkType",xmlnsXLink:"xmlnsXlink"},y2e=_ie([Cie,bie,Eie,Tie,u2e],"html"),nz=_ie([Cie,bie,Eie,Tie,d2e],"svg");function v2e(e){return e.join(" ").trim()}var Iie={},FG=/\/\*[^*]*\*+([^/*][^*]*\*+)*\//g,x2e=/\n/g,_2e=/^\s*/,w2e=/^(\*?[-#/*\\\w]+(\[[0-9a-z_-]+\])?)\s*/,b2e=/^:\s*/,C2e=/^((?:'(?:\\'|.)*?'|"(?:\\"|.)*?"|\([^)]*?\)|[^};])+)/,S2e=/^[;\s]*/,B2e=/^\s+|\s+$/g,E2e=`
`,PG="/",kG="*",rx="",T2e="comment",I2e="declaration",j2e=function(e,t){if(typeof e!="string")throw new TypeError("First argument must be a string");if(!e)return[];t=t||{};var n=1,r=1;function s(U){var N=U.match(x2e);N&&(n+=N.length);var W=U.lastIndexOf(E2e);r=~W?U.length-W:r+U.length}function a(){var U={line:n,column:r};return function(N){return N.position=new c(U),g(),N}}function c(U){this.start=U,this.end={line:n,column:r},this.source=t.source}c.prototype.content=e;function i(U){var N=new Error(t.source+":"+n+":"+r+": "+U);if(N.reason=U,N.filename=t.source,N.line=n,N.column=r,N.source=e,!t.silent)throw N}function f(U){var N=U.exec(e);if(N){var W=N[0];return s(W),e=e.slice(W.length),N}}function g(){f(_2e)}function y(U){var N;for(U=U||[];N=b();)N!==!1&&U.push(N);return U}function b(){var U=a();if(!(PG!=e.charAt(0)||kG!=e.charAt(1))){for(var N=2;rx!=e.charAt(N)&&(kG!=e.charAt(N)||PG!=e.charAt(N+1));)++N;if(N+=2,rx===e.charAt(N-1))return i("End of comment missing");var W=e.slice(2,N-2);return r+=2,s(W),e=e.slice(N),r+=2,U({type:T2e,comment:W})}}function T(){var U=a(),N=f(w2e);if(N){if(b(),!f(b2e))return i("property missing ':'");var W=f(C2e),L=U({type:I2e,property:LG(N[0].replace(FG,rx)),value:W?LG(W[0].replace(FG,rx)):rx});return f(S2e),L}}function S(){var U=[];y(U);for(var N;N=T();)N!==!1&&(U.push(N),y(U));return U}return g(),S()};function LG(e){return e?e.replace(B2e,rx):rx}var F2e=Ra&&Ra.__importDefault||function(e){return e&&e.__esModule?e:{default:e}};Object.defineProperty(Iie,"__esModule",{value:!0});var MG=Iie.default=k2e,P2e=F2e(j2e);function k2e(e,t){var n=null;if(!e||typeof e!="string")return n;var r=(0,P2e.default)(e),s=typeof t=="function";return r.forEach(function(a){if(a.type==="declaration"){var c=a.property,i=a.value;s?t(c,i,a):i&&(n=n||{},n[c]=i)}}),n}const L2e=MG.default||MG,jie=Fie("end"),rz=Fie("start");function Fie(e){return t;function t(n){const r=n&&n.position&&n.position[e]||{};if(typeof r.line=="number"&&r.line>0&&typeof r.column=="number"&&r.column>0)return{line:r.line,column:r.column,offset:typeof r.offset=="number"&&r.offset>-1?r.offset:void 0}}}function M2e(e){const t=rz(e),n=jie(e);if(t&&n)return{start:t,end:n}}function SC(e){return!e||typeof e!="object"?"":"position"in e||"type"in e?NG(e.position):"start"in e||"end"in e?NG(e):"line"in e||"column"in e?eD(e):""}function eD(e){return RG(e&&e.line)+":"+RG(e&&e.column)}function NG(e){return eD(e&&e.start)+"-"+eD(e&&e.end)}function RG(e){return e&&typeof e=="number"?e:1}class Md extends Error{constructor(t,n,r){super(),typeof n=="string"&&(r=n,n=void 0);let s="",a={},c=!1;if(n&&("line"in n&&"column"in n?a={place:n}:"start"in n&&"end"in n?a={place:n}:"type"in n?a={ancestors:[n],place:n.position}:a={...n}),typeof t=="string"?s=t:!a.cause&&t&&(c=!0,s=t.message,a.cause=t),!a.ruleId&&!a.source&&typeof r=="string"){const f=r.indexOf(":");f===-1?a.ruleId=r:(a.source=r.slice(0,f),a.ruleId=r.slice(f+1))}if(!a.place&&a.ancestors&&a.ancestors){const f=a.ancestors[a.ancestors.length-1];f&&(a.place=f.position)}const i=a.place&&"start"in a.place?a.place.start:a.place;this.ancestors=a.ancestors||void 0,this.cause=a.cause||void 0,this.column=i?i.column:void 0,this.fatal=void 0,this.file,this.message=s,this.line=i?i.line:void 0,this.name=SC(a.place)||"1:1",this.place=a.place||void 0,this.reason=this.message,this.ruleId=a.ruleId||void 0,this.source=a.source||void 0,this.stack=c&&a.cause&&typeof a.cause.stack=="string"?a.cause.stack:"",this.actual,this.expected,this.note,this.url}}Md.prototype.file="";Md.prototype.name="";Md.prototype.reason="";Md.prototype.message="";Md.prototype.stack="";Md.prototype.column=void 0;Md.prototype.line=void 0;Md.prototype.ancestors=void 0;Md.prototype.cause=void 0;Md.prototype.fatal=void 0;Md.prototype.place=void 0;Md.prototype.ruleId=void 0;Md.prototype.source=void 0;const iz={}.hasOwnProperty,N2e=new Map,R2e=/[A-Z]/g,O2e=/-([a-z])/g,D2e=new Set(["table","tbody","thead","tfoot","tr"]),U2e=new Set(["td","th"]),Pie="https://github.com/syntax-tree/hast-util-to-jsx-runtime";function z2e(e,t){if(!t||t.Fragment===void 0)throw new TypeError("Expected `Fragment` in options");const n=t.filePath||void 0;let r;if(t.development){if(typeof t.jsxDEV!="function")throw new TypeError("Expected `jsxDEV` in options when `development: true`");r=q2e(n,t.jsxDEV)}else{if(typeof t.jsx!="function")throw new TypeError("Expected `jsx` in production options");if(typeof t.jsxs!="function")throw new TypeError("Expected `jsxs` in production options");r=W2e(n,t.jsx,t.jsxs)}const s={Fragment:t.Fragment,ancestors:[],components:t.components||{},create:r,elementAttributeNameCase:t.elementAttributeNameCase||"react",evaluater:t.createEvaluater?t.createEvaluater():void 0,filePath:n,ignoreInvalidStyle:t.ignoreInvalidStyle||!1,passKeys:t.passKeys!==!1,passNode:t.passNode||!1,schema:t.space==="svg"?nz:y2e,stylePropertyNameCase:t.stylePropertyNameCase||"dom",tableCellAlignToStyle:t.tableCellAlignToStyle!==!1},a=kie(s,e,void 0);return a&&typeof a!="string"?a:s.create(e,s.Fragment,{children:a||void 0},void 0)}function kie(e,t,n){if(t.type==="element")return Q2e(e,t,n);if(t.type==="mdxFlowExpression"||t.type==="mdxTextExpression")return H2e(e,t);if(t.type==="mdxJsxFlowElement"||t.type==="mdxJsxTextElement")return $2e(e,t,n);if(t.type==="mdxjsEsm")return V2e(e,t);if(t.type==="root")return G2e(e,t,n);if(t.type==="text")return K2e(e,t)}function Q2e(e,t,n){const r=e.schema;let s=r;t.tagName.toLowerCase()==="svg"&&r.space==="html"&&(s=nz,e.schema=s),e.ancestors.push(t);const a=Mie(e,t.tagName,!1),c=Z2e(e,t);let i=oz(e,t);return D2e.has(t.tagName)&&(i=i.filter(function(f){return typeof f=="string"?!a2e(f):!0})),Lie(e,c,a,t),sz(c,i),e.ancestors.pop(),e.schema=r,e.create(t,a,c,n)}function H2e(e,t){if(t.data&&t.data.estree&&e.evaluater){const n=t.data.estree.body[0];return n.type,e.evaluater.evaluateExpression(n.expression)}jS(e,t.position)}function V2e(e,t){if(t.data&&t.data.estree&&e.evaluater)return e.evaluater.evaluateProgram(t.data.estree);jS(e,t.position)}function $2e(e,t,n){const r=e.schema;let s=r;t.name==="svg"&&r.space==="html"&&(s=nz,e.schema=s),e.ancestors.push(t);const a=t.name===null?e.Fragment:Mie(e,t.name,!0),c=X2e(e,t),i=oz(e,t);return Lie(e,c,a,t),sz(c,i),e.ancestors.pop(),e.schema=r,e.create(t,a,c,n)}function G2e(e,t,n){const r={};return sz(r,oz(e,t)),e.create(t,e.Fragment,r,n)}function K2e(e,t){return t.value}function Lie(e,t,n,r){typeof n!="string"&&n!==e.Fragment&&e.passNode&&(t.node=r)}function sz(e,t){if(t.length>0){const n=t.length>1?t:t[0];n&&(e.children=n)}}function W2e(e,t,n){return r;function r(s,a,c,i){const f=Array.isArray(c.children)?n:t;return i?f(a,c,i):f(a,c)}}function q2e(e,t){return n;function n(r,s,a,c){const i=Array.isArray(a.children),f=rz(r);return t(s,a,c,i,{columnNumber:f?f.column-1:void 0,fileName:e,lineNumber:f?f.line:void 0},void 0)}}function Z2e(e,t){const n={};let r,s;for(s in t.properties)if(s!=="children"&&iz.call(t.properties,s)){const a=Y2e(e,s,t.properties[s]);if(a){const[c,i]=a;e.tableCellAlignToStyle&&c==="align"&&typeof i=="string"&&U2e.has(t.tagName)?r=i:n[c]=i}}if(r){const a=n.style||(n.style={});a[e.stylePropertyNameCase==="css"?"text-align":"textAlign"]=r}return n}function X2e(e,t){const n={};for(const r of t.attributes)if(r.type==="mdxJsxExpressionAttribute")if(r.data&&r.data.estree&&e.evaluater){const s=r.data.estree.body[0];s.type;const a=s.expression;a.type;const c=a.properties[0];c.type,Object.assign(n,e.evaluater.evaluateExpression(c.argument))}else jS(e,t.position);else{const s=r.name;let a;if(r.value&&typeof r.value=="object")if(r.value.data&&r.value.data.estree&&e.evaluater){const c=r.value.data.estree.body[0];c.type,a=e.evaluater.evaluateExpression(c.expression)}else jS(e,t.position);else a=r.value===null?!0:r.value;n[s]=a}return n}function oz(e,t){const n=[];let r=-1;const s=e.passKeys?new Map:N2e;for(;++r<t.children.length;){const a=t.children[r];let c;if(e.passKeys){const f=a.type==="element"?a.tagName:a.type==="mdxJsxFlowElement"||a.type==="mdxJsxTextElement"?a.name:void 0;if(f){const g=s.get(f)||0;c=f+"-"+g,s.set(f,g+1)}}const i=kie(e,a,c);i!==void 0&&n.push(i)}return n}function Y2e(e,t,n){const r=p2e(e.schema,t);if(!(n==null||typeof n=="number"&&Number.isNaN(n))){if(Array.isArray(n)&&(n=r.commaSeparated?n2e(n):v2e(n)),r.property==="style"){let s=typeof n=="object"?n:J2e(e,String(n));return e.stylePropertyNameCase==="css"&&(s=eCe(s)),["style",s]}return[e.elementAttributeNameCase==="react"&&r.space?g2e[r.property]||r.property:r.attribute,n]}}function J2e(e,t){const n={};try{L2e(t,r)}catch(s){if(!e.ignoreInvalidStyle){const a=s,c=new Md("Cannot parse `style` attribute",{ancestors:e.ancestors,cause:a,ruleId:"style",source:"hast-util-to-jsx-runtime"});throw c.file=e.filePath||void 0,c.url=Pie+"#cannot-parse-style-attribute",c}}return n;function r(s,a){let c=s;c.slice(0,2)!=="--"&&(c.slice(0,4)==="-ms-"&&(c="ms-"+c.slice(4)),c=c.replace(O2e,nCe)),n[c]=a}}function Mie(e,t,n){let r;if(!n)r={type:"Literal",value:t};else if(t.includes(".")){const s=t.split(".");let a=-1,c;for(;++a<s.length;){const i=EG(s[a])?{type:"Identifier",name:s[a]}:{type:"Literal",value:s[a]};c=c?{type:"MemberExpression",object:c,property:i,computed:!!(a&&i.type==="Literal"),optional:!1}:i}r=c}else r=EG(t)&&!/^[a-z]/.test(t)?{type:"Identifier",name:t}:{type:"Literal",value:t};if(r.type==="Literal"){const s=r.value;return iz.call(e.components,s)?e.components[s]:s}if(e.evaluater)return e.evaluater.evaluateExpression(r);jS(e)}function jS(e,t){const n=new Md("Cannot handle MDX estrees without `createEvaluater`",{ancestors:e.ancestors,place:t,ruleId:"mdx-estree",source:"hast-util-to-jsx-runtime"});throw n.file=e.filePath||void 0,n.url=Pie+"#cannot-handle-mdx-estrees-without-createevaluater",n}function eCe(e){const t={};let n;for(n in e)iz.call(e,n)&&(t[tCe(n)]=e[n]);return t}function tCe(e){let t=e.replace(R2e,rCe);return t.slice(0,3)==="ms-"&&(t="-"+t),t}function nCe(e,t){return t.toUpperCase()}function rCe(e){return"-"+e.toLowerCase()}const QM={action:["form"],cite:["blockquote","del","ins","q"],data:["object"],formAction:["button","input"],href:["a","area","base","link"],icon:["menuitem"],itemId:null,manifest:["html"],ping:["a","area"],poster:["video"],src:["audio","embed","iframe","img","input","script","source","track","video"]},iCe={};function az(e,t){const n=iCe,r=typeof n.includeImageAlt=="boolean"?n.includeImageAlt:!0,s=typeof n.includeHtml=="boolean"?n.includeHtml:!0;return Nie(e,r,s)}function Nie(e,t,n){if(sCe(e)){if("value"in e)return e.type==="html"&&!n?"":e.value;if(t&&"alt"in e&&e.alt)return e.alt;if("children"in e)return OG(e.children,t,n)}return Array.isArray(e)?OG(e,t,n):""}function OG(e,t,n){const r=[];let s=-1;for(;++s<e.length;)r[s]=Nie(e[s],t,n);return r.join("")}function sCe(e){return!!(e&&typeof e=="object")}const DG=document.createElement("i");function lz(e){const t="&"+e+";";DG.innerHTML=t;const n=DG.textContent;return n.charCodeAt(n.length-1)===59&&e!=="semi"||n===t?!1:n}function Hp(e,t,n,r){const s=e.length;let a=0,c;if(t<0?t=-t>s?0:s+t:t=t>s?s:t,n=n>0?n:0,r.length<1e4)c=Array.from(r),c.unshift(t,n),e.splice(...c);else for(n&&e.splice(t,n);a<r.length;)c=r.slice(a,a+1e4),c.unshift(t,0),e.splice(...c),a+=1e4,t+=1e4}function Lp(e,t){return e.length>0?(Hp(e,e.length,0,t),e):t}const UG={}.hasOwnProperty;function Rie(e){const t={};let n=-1;for(;++n<e.length;)oCe(t,e[n]);return t}function oCe(e,t){let n;for(n in t){const r=(UG.call(e,n)?e[n]:void 0)||(e[n]={}),s=t[n];let a;if(s)for(a in s){UG.call(r,a)||(r[a]=[]);const c=s[a];aCe(r[a],Array.isArray(c)?c:c?[c]:[])}}}function aCe(e,t){let n=-1;const r=[];for(;++n<t.length;)(t[n].add==="after"?e:r).push(t[n]);Hp(e,0,0,r)}function Oie(e,t){const n=Number.parseInt(e,t);return n<9||n===11||n>13&&n<32||n>126&&n<160||n>55295&&n<57344||n>64975&&n<65008||(n&65535)===65535||(n&65535)===65534||n>1114111?"�":String.fromCodePoint(n)}function KA(e){return e.replace(/[\t\n\r ]+/g," ").replace(/^ | $/g,"").toLowerCase().toUpperCase()}const fh=sv(/[A-Za-z]/),Fd=sv(/[\dA-Za-z]/),lCe=sv(/[#-'*+\--9=?A-Z^-~]/);function mj(e){return e!==null&&(e<32||e===127)}const tD=sv(/\d/),cCe=sv(/[\dA-Fa-f]/),uCe=sv(/[!-/:-@[-`{-~]/);function Wi(e){return e!==null&&e<-2}function Ba(e){return e!==null&&(e<0||e===32)}function ro(e){return e===-2||e===-1||e===32}const WF=sv(new RegExp("\\p{P}|\\p{S}","u")),Ux=sv(/\s/);function sv(e){return t;function t(n){return n!==null&&n>-1&&e.test(String.fromCharCode(n))}}function qw(e){const t=[];let n=-1,r=0,s=0;for(;++n<e.length;){const a=e.charCodeAt(n);let c="";if(a===37&&Fd(e.charCodeAt(n+1))&&Fd(e.charCodeAt(n+2)))s=2;else if(a<128)/[!#$&-;=?-Z_a-z~]/.test(String.fromCharCode(a))||(c=String.fromCharCode(a));else if(a>55295&&a<57344){const i=e.charCodeAt(n+1);a<56320&&i>56319&&i<57344?(c=String.fromCharCode(a,i),s=1):c="�"}else c=String.fromCharCode(a);c&&(t.push(e.slice(r,n),encodeURIComponent(c)),r=n+s+1,c=""),s&&(n+=s,s=0)}return t.join("")+e.slice(r)}function Bo(e,t,n,r){const s=r?r-1:Number.POSITIVE_INFINITY;let a=0;return c;function c(f){return ro(f)?(e.enter(n),i(f)):t(f)}function i(f){return ro(f)&&a++<s?(e.consume(f),i):(e.exit(n),t(f))}}const dCe={tokenize:hCe};function hCe(e){const t=e.attempt(this.parser.constructs.contentInitial,r,s);let n;return t;function r(i){if(i===null){e.consume(i);return}return e.enter("lineEnding"),e.consume(i),e.exit("lineEnding"),Bo(e,t,"linePrefix")}function s(i){return e.enter("paragraph"),a(i)}function a(i){const f=e.enter("chunkText",{contentType:"text",previous:n});return n&&(n.next=f),n=f,c(i)}function c(i){if(i===null){e.exit("chunkText"),e.exit("paragraph"),e.consume(i);return}return Wi(i)?(e.consume(i),e.exit("chunkText"),a):(e.consume(i),c)}}const fCe={tokenize:pCe},zG={tokenize:ACe};function pCe(e){const t=this,n=[];let r=0,s,a,c;return i;function i(V){if(r<n.length){const Z=n[r];return t.containerState=Z[1],e.attempt(Z[0].continuation,f,g)(V)}return g(V)}function f(V){if(r++,t.containerState._closeFlow){t.containerState._closeFlow=void 0,s&&Q();const Z=t.events.length;let ne=Z,Y;for(;ne--;)if(t.events[ne][0]==="exit"&&t.events[ne][1].type==="chunkFlow"){Y=t.events[ne][1].end;break}L(r);let le=Z;for(;le<t.events.length;)t.events[le][1].end=Object.assign({},Y),le++;return Hp(t.events,ne+1,0,t.events.slice(Z)),t.events.length=le,g(V)}return i(V)}function g(V){if(r===n.length){if(!s)return T(V);if(s.currentConstruct&&s.currentConstruct.concrete)return U(V);t.interrupt=!!(s.currentConstruct&&!s._gfmTableDynamicInterruptHack)}return t.containerState={},e.check(zG,y,b)(V)}function y(V){return s&&Q(),L(r),T(V)}function b(V){return t.parser.lazy[t.now().line]=r!==n.length,c=t.now().offset,U(V)}function T(V){return t.containerState={},e.attempt(zG,S,U)(V)}function S(V){return r++,n.push([t.currentConstruct,t.containerState]),T(V)}function U(V){if(V===null){s&&Q(),L(0),e.consume(V);return}return s=s||t.parser.flow(t.now()),e.enter("chunkFlow",{contentType:"flow",previous:a,_tokenizer:s}),N(V)}function N(V){if(V===null){W(e.exit("chunkFlow"),!0),L(0),e.consume(V);return}return Wi(V)?(e.consume(V),W(e.exit("chunkFlow")),r=0,t.interrupt=void 0,i):(e.consume(V),N)}function W(V,Z){const ne=t.sliceStream(V);if(Z&&ne.push(null),V.previous=a,a&&(a.next=V),a=V,s.defineSkip(V.start),s.write(ne),t.parser.lazy[V.start.line]){let Y=s.events.length;for(;Y--;)if(s.events[Y][1].start.offset<c&&(!s.events[Y][1].end||s.events[Y][1].end.offset>c))return;const le=t.events.length;let pe=le,_e,ye;for(;pe--;)if(t.events[pe][0]==="exit"&&t.events[pe][1].type==="chunkFlow"){if(_e){ye=t.events[pe][1].end;break}_e=!0}for(L(r),Y=le;Y<t.events.length;)t.events[Y][1].end=Object.assign({},ye),Y++;Hp(t.events,pe+1,0,t.events.slice(le)),t.events.length=Y}}function L(V){let Z=n.length;for(;Z-- >V;){const ne=n[Z];t.containerState=ne[1],ne[0].exit.call(t,e)}n.length=V}function Q(){s.write([null]),a=void 0,s=void 0,t.containerState._closeFlow=void 0}}function ACe(e,t,n){return Bo(e,e.attempt(this.parser.constructs.document,t,n),"linePrefix",this.parser.constructs.disable.null.includes("codeIndented")?void 0:4)}function gj(e){if(e===null||Ba(e)||Ux(e))return 1;if(WF(e))return 2}function qF(e,t,n){const r=[];let s=-1;for(;++s<e.length;){const a=e[s].resolveAll;a&&!r.includes(a)&&(t=a(t,n),r.push(a))}return t}const nD={name:"attention",tokenize:gCe,resolveAll:mCe};function mCe(e,t){let n=-1,r,s,a,c,i,f,g,y;for(;++n<e.length;)if(e[n][0]==="enter"&&e[n][1].type==="attentionSequence"&&e[n][1]._close){for(r=n;r--;)if(e[r][0]==="exit"&&e[r][1].type==="attentionSequence"&&e[r][1]._open&&t.sliceSerialize(e[r][1]).charCodeAt(0)===t.sliceSerialize(e[n][1]).charCodeAt(0)){if((e[r][1]._close||e[n][1]._open)&&(e[n][1].end.offset-e[n][1].start.offset)%3&&!((e[r][1].end.offset-e[r][1].start.offset+e[n][1].end.offset-e[n][1].start.offset)%3))continue;f=e[r][1].end.offset-e[r][1].start.offset>1&&e[n][1].end.offset-e[n][1].start.offset>1?2:1;const b=Object.assign({},e[r][1].end),T=Object.assign({},e[n][1].start);QG(b,-f),QG(T,f),c={type:f>1?"strongSequence":"emphasisSequence",start:b,end:Object.assign({},e[r][1].end)},i={type:f>1?"strongSequence":"emphasisSequence",start:Object.assign({},e[n][1].start),end:T},a={type:f>1?"strongText":"emphasisText",start:Object.assign({},e[r][1].end),end:Object.assign({},e[n][1].start)},s={type:f>1?"strong":"emphasis",start:Object.assign({},c.start),end:Object.assign({},i.end)},e[r][1].end=Object.assign({},c.start),e[n][1].start=Object.assign({},i.end),g=[],e[r][1].end.offset-e[r][1].start.offset&&(g=Lp(g,[["enter",e[r][1],t],["exit",e[r][1],t]])),g=Lp(g,[["enter",s,t],["enter",c,t],["exit",c,t],["enter",a,t]]),g=Lp(g,qF(t.parser.constructs.insideSpan.null,e.slice(r+1,n),t)),g=Lp(g,[["exit",a,t],["enter",i,t],["exit",i,t],["exit",s,t]]),e[n][1].end.offset-e[n][1].start.offset?(y=2,g=Lp(g,[["enter",e[n][1],t],["exit",e[n][1],t]])):y=0,Hp(e,r-1,n-r+3,g),n=r+g.length-y-2;break}}for(n=-1;++n<e.length;)e[n][1].type==="attentionSequence"&&(e[n][1].type="data");return e}function gCe(e,t){const n=this.parser.constructs.attentionMarkers.null,r=this.previous,s=gj(r);let a;return c;function c(f){return a=f,e.enter("attentionSequence"),i(f)}function i(f){if(f===a)return e.consume(f),i;const g=e.exit("attentionSequence"),y=gj(f),b=!y||y===2&&s||n.includes(f),T=!s||s===2&&y||n.includes(r);return g._open=!!(a===42?b:b&&(s||!T)),g._close=!!(a===42?T:T&&(y||!b)),t(f)}}function QG(e,t){e.column+=t,e.offset+=t,e._bufferIndex+=t}const yCe={name:"autolink",tokenize:vCe};function vCe(e,t,n){let r=0;return s;function s(S){return e.enter("autolink"),e.enter("autolinkMarker"),e.consume(S),e.exit("autolinkMarker"),e.enter("autolinkProtocol"),a}function a(S){return fh(S)?(e.consume(S),c):S===64?n(S):g(S)}function c(S){return S===43||S===45||S===46||Fd(S)?(r=1,i(S)):g(S)}function i(S){return S===58?(e.consume(S),r=0,f):(S===43||S===45||S===46||Fd(S))&&r++<32?(e.consume(S),i):(r=0,g(S))}function f(S){return S===62?(e.exit("autolinkProtocol"),e.enter("autolinkMarker"),e.consume(S),e.exit("autolinkMarker"),e.exit("autolink"),t):S===null||S===32||S===60||mj(S)?n(S):(e.consume(S),f)}function g(S){return S===64?(e.consume(S),y):lCe(S)?(e.consume(S),g):n(S)}function y(S){return Fd(S)?b(S):n(S)}function b(S){return S===46?(e.consume(S),r=0,y):S===62?(e.exit("autolinkProtocol").type="autolinkEmail",e.enter("autolinkMarker"),e.consume(S),e.exit("autolinkMarker"),e.exit("autolink"),t):T(S)}function T(S){if((S===45||Fd(S))&&r++<63){const U=S===45?T:b;return e.consume(S),U}return n(S)}}const SB={tokenize:xCe,partial:!0};function xCe(e,t,n){return r;function r(a){return ro(a)?Bo(e,s,"linePrefix")(a):s(a)}function s(a){return a===null||Wi(a)?t(a):n(a)}}const Die={name:"blockQuote",tokenize:_Ce,continuation:{tokenize:wCe},exit:bCe};function _Ce(e,t,n){const r=this;return s;function s(c){if(c===62){const i=r.containerState;return i.open||(e.enter("blockQuote",{_container:!0}),i.open=!0),e.enter("blockQuotePrefix"),e.enter("blockQuoteMarker"),e.consume(c),e.exit("blockQuoteMarker"),a}return n(c)}function a(c){return ro(c)?(e.enter("blockQuotePrefixWhitespace"),e.consume(c),e.exit("blockQuotePrefixWhitespace"),e.exit("blockQuotePrefix"),t):(e.exit("blockQuotePrefix"),t(c))}}function wCe(e,t,n){const r=this;return s;function s(c){return ro(c)?Bo(e,a,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(c):a(c)}function a(c){return e.attempt(Die,t,n)(c)}}function bCe(e){e.exit("blockQuote")}const Uie={name:"characterEscape",tokenize:CCe};function CCe(e,t,n){return r;function r(a){return e.enter("characterEscape"),e.enter("escapeMarker"),e.consume(a),e.exit("escapeMarker"),s}function s(a){return uCe(a)?(e.enter("characterEscapeValue"),e.consume(a),e.exit("characterEscapeValue"),e.exit("characterEscape"),t):n(a)}}const zie={name:"characterReference",tokenize:SCe};function SCe(e,t,n){const r=this;let s=0,a,c;return i;function i(b){return e.enter("characterReference"),e.enter("characterReferenceMarker"),e.consume(b),e.exit("characterReferenceMarker"),f}function f(b){return b===35?(e.enter("characterReferenceMarkerNumeric"),e.consume(b),e.exit("characterReferenceMarkerNumeric"),g):(e.enter("characterReferenceValue"),a=31,c=Fd,y(b))}function g(b){return b===88||b===120?(e.enter("characterReferenceMarkerHexadecimal"),e.consume(b),e.exit("characterReferenceMarkerHexadecimal"),e.enter("characterReferenceValue"),a=6,c=cCe,y):(e.enter("characterReferenceValue"),a=7,c=tD,y(b))}function y(b){if(b===59&&s){const T=e.exit("characterReferenceValue");return c===Fd&&!lz(r.sliceSerialize(T))?n(b):(e.enter("characterReferenceMarker"),e.consume(b),e.exit("characterReferenceMarker"),e.exit("characterReference"),t)}return c(b)&&s++<a?(e.consume(b),y):n(b)}}const HG={tokenize:ECe,partial:!0},VG={name:"codeFenced",tokenize:BCe,concrete:!0};function BCe(e,t,n){const r=this,s={tokenize:ne,partial:!0};let a=0,c=0,i;return f;function f(Y){return g(Y)}function g(Y){const le=r.events[r.events.length-1];return a=le&&le[1].type==="linePrefix"?le[2].sliceSerialize(le[1],!0).length:0,i=Y,e.enter("codeFenced"),e.enter("codeFencedFence"),e.enter("codeFencedFenceSequence"),y(Y)}function y(Y){return Y===i?(c++,e.consume(Y),y):c<3?n(Y):(e.exit("codeFencedFenceSequence"),ro(Y)?Bo(e,b,"whitespace")(Y):b(Y))}function b(Y){return Y===null||Wi(Y)?(e.exit("codeFencedFence"),r.interrupt?t(Y):e.check(HG,N,Z)(Y)):(e.enter("codeFencedFenceInfo"),e.enter("chunkString",{contentType:"string"}),T(Y))}function T(Y){return Y===null||Wi(Y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),b(Y)):ro(Y)?(e.exit("chunkString"),e.exit("codeFencedFenceInfo"),Bo(e,S,"whitespace")(Y)):Y===96&&Y===i?n(Y):(e.consume(Y),T)}function S(Y){return Y===null||Wi(Y)?b(Y):(e.enter("codeFencedFenceMeta"),e.enter("chunkString",{contentType:"string"}),U(Y))}function U(Y){return Y===null||Wi(Y)?(e.exit("chunkString"),e.exit("codeFencedFenceMeta"),b(Y)):Y===96&&Y===i?n(Y):(e.consume(Y),U)}function N(Y){return e.attempt(s,Z,W)(Y)}function W(Y){return e.enter("lineEnding"),e.consume(Y),e.exit("lineEnding"),L}function L(Y){return a>0&&ro(Y)?Bo(e,Q,"linePrefix",a+1)(Y):Q(Y)}function Q(Y){return Y===null||Wi(Y)?e.check(HG,N,Z)(Y):(e.enter("codeFlowValue"),V(Y))}function V(Y){return Y===null||Wi(Y)?(e.exit("codeFlowValue"),Q(Y)):(e.consume(Y),V)}function Z(Y){return e.exit("codeFenced"),t(Y)}function ne(Y,le,pe){let _e=0;return ye;function ye(Ne){return Y.enter("lineEnding"),Y.consume(Ne),Y.exit("lineEnding"),he}function he(Ne){return Y.enter("codeFencedFence"),ro(Ne)?Bo(Y,be,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(Ne):be(Ne)}function be(Ne){return Ne===i?(Y.enter("codeFencedFenceSequence"),Te(Ne)):pe(Ne)}function Te(Ne){return Ne===i?(_e++,Y.consume(Ne),Te):_e>=c?(Y.exit("codeFencedFenceSequence"),ro(Ne)?Bo(Y,Ee,"whitespace")(Ne):Ee(Ne)):pe(Ne)}function Ee(Ne){return Ne===null||Wi(Ne)?(Y.exit("codeFencedFence"),le(Ne)):pe(Ne)}}}function ECe(e,t,n){const r=this;return s;function s(c){return c===null?n(c):(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),a)}function a(c){return r.parser.lazy[r.now().line]?n(c):t(c)}}const HM={name:"codeIndented",tokenize:ICe},TCe={tokenize:jCe,partial:!0};function ICe(e,t,n){const r=this;return s;function s(g){return e.enter("codeIndented"),Bo(e,a,"linePrefix",5)(g)}function a(g){const y=r.events[r.events.length-1];return y&&y[1].type==="linePrefix"&&y[2].sliceSerialize(y[1],!0).length>=4?c(g):n(g)}function c(g){return g===null?f(g):Wi(g)?e.attempt(TCe,c,f)(g):(e.enter("codeFlowValue"),i(g))}function i(g){return g===null||Wi(g)?(e.exit("codeFlowValue"),c(g)):(e.consume(g),i)}function f(g){return e.exit("codeIndented"),t(g)}}function jCe(e,t,n){const r=this;return s;function s(c){return r.parser.lazy[r.now().line]?n(c):Wi(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),s):Bo(e,a,"linePrefix",5)(c)}function a(c){const i=r.events[r.events.length-1];return i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?t(c):Wi(c)?s(c):n(c)}}const FCe={name:"codeText",tokenize:LCe,resolve:PCe,previous:kCe};function PCe(e){let t=e.length-4,n=3,r,s;if((e[n][1].type==="lineEnding"||e[n][1].type==="space")&&(e[t][1].type==="lineEnding"||e[t][1].type==="space")){for(r=n;++r<t;)if(e[r][1].type==="codeTextData"){e[n][1].type="codeTextPadding",e[t][1].type="codeTextPadding",n+=2,t-=2;break}}for(r=n-1,t++;++r<=t;)s===void 0?r!==t&&e[r][1].type!=="lineEnding"&&(s=r):(r===t||e[r][1].type==="lineEnding")&&(e[s][1].type="codeTextData",r!==s+2&&(e[s][1].end=e[r-1][1].end,e.splice(s+2,r-s-2),t-=r-s-2,r=s+2),s=void 0);return e}function kCe(e){return e!==96||this.events[this.events.length-1][1].type==="characterEscape"}function LCe(e,t,n){let r=0,s,a;return c;function c(b){return e.enter("codeText"),e.enter("codeTextSequence"),i(b)}function i(b){return b===96?(e.consume(b),r++,i):(e.exit("codeTextSequence"),f(b))}function f(b){return b===null?n(b):b===32?(e.enter("space"),e.consume(b),e.exit("space"),f):b===96?(a=e.enter("codeTextSequence"),s=0,y(b)):Wi(b)?(e.enter("lineEnding"),e.consume(b),e.exit("lineEnding"),f):(e.enter("codeTextData"),g(b))}function g(b){return b===null||b===32||b===96||Wi(b)?(e.exit("codeTextData"),f(b)):(e.consume(b),g)}function y(b){return b===96?(e.consume(b),s++,y):s===r?(e.exit("codeTextSequence"),e.exit("codeText"),t(b)):(a.type="codeTextData",g(b))}}class MCe{constructor(t){this.left=t?[...t]:[],this.right=[]}get(t){if(t<0||t>=this.left.length+this.right.length)throw new RangeError("Cannot access index `"+t+"` in a splice buffer of size `"+(this.left.length+this.right.length)+"`");return t<this.left.length?this.left[t]:this.right[this.right.length-t+this.left.length-1]}get length(){return this.left.length+this.right.length}shift(){return this.setCursor(0),this.right.pop()}slice(t,n){const r=n??Number.POSITIVE_INFINITY;return r<this.left.length?this.left.slice(t,r):t>this.left.length?this.right.slice(this.right.length-r+this.left.length,this.right.length-t+this.left.length).reverse():this.left.slice(t).concat(this.right.slice(this.right.length-r+this.left.length).reverse())}splice(t,n,r){const s=n||0;this.setCursor(Math.trunc(t));const a=this.right.splice(this.right.length-s,Number.POSITIVE_INFINITY);return r&&C2(this.left,r),a.reverse()}pop(){return this.setCursor(Number.POSITIVE_INFINITY),this.left.pop()}push(t){this.setCursor(Number.POSITIVE_INFINITY),this.left.push(t)}pushMany(t){this.setCursor(Number.POSITIVE_INFINITY),C2(this.left,t)}unshift(t){this.setCursor(0),this.right.push(t)}unshiftMany(t){this.setCursor(0),C2(this.right,t.reverse())}setCursor(t){if(!(t===this.left.length||t>this.left.length&&this.right.length===0||t<0&&this.left.length===0))if(t<this.left.length){const n=this.left.splice(t,Number.POSITIVE_INFINITY);C2(this.right,n.reverse())}else{const n=this.right.splice(this.left.length+this.right.length-t,Number.POSITIVE_INFINITY);C2(this.left,n.reverse())}}}function C2(e,t){let n=0;if(t.length<1e4)e.push(...t);else for(;n<t.length;)e.push(...t.slice(n,n+1e4)),n+=1e4}function Qie(e){const t={};let n=-1,r,s,a,c,i,f,g;const y=new MCe(e);for(;++n<y.length;){for(;n in t;)n=t[n];if(r=y.get(n),n&&r[1].type==="chunkFlow"&&y.get(n-1)[1].type==="listItemPrefix"&&(f=r[1]._tokenizer.events,a=0,a<f.length&&f[a][1].type==="lineEndingBlank"&&(a+=2),a<f.length&&f[a][1].type==="content"))for(;++a<f.length&&f[a][1].type!=="content";)f[a][1].type==="chunkText"&&(f[a][1]._isInFirstContentOfListItem=!0,a++);if(r[0]==="enter")r[1].contentType&&(Object.assign(t,NCe(y,n)),n=t[n],g=!0);else if(r[1]._container){for(a=n,s=void 0;a--&&(c=y.get(a),c[1].type==="lineEnding"||c[1].type==="lineEndingBlank");)c[0]==="enter"&&(s&&(y.get(s)[1].type="lineEndingBlank"),c[1].type="lineEnding",s=a);s&&(r[1].end=Object.assign({},y.get(s)[1].start),i=y.slice(s,n),i.unshift(r),y.splice(s,n-s+1,i))}}return Hp(e,0,Number.POSITIVE_INFINITY,y.slice(0)),!g}function NCe(e,t){const n=e.get(t)[1],r=e.get(t)[2];let s=t-1;const a=[],c=n._tokenizer||r.parser[n.contentType](n.start),i=c.events,f=[],g={};let y,b,T=-1,S=n,U=0,N=0;const W=[N];for(;S;){for(;e.get(++s)[1]!==S;);a.push(s),S._tokenizer||(y=r.sliceStream(S),S.next||y.push(null),b&&c.defineSkip(S.start),S._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=!0),c.write(y),S._isInFirstContentOfListItem&&(c._gfmTasklistFirstContentOfListItem=void 0)),b=S,S=S.next}for(S=n;++T<i.length;)i[T][0]==="exit"&&i[T-1][0]==="enter"&&i[T][1].type===i[T-1][1].type&&i[T][1].start.line!==i[T][1].end.line&&(N=T+1,W.push(N),S._tokenizer=void 0,S.previous=void 0,S=S.next);for(c.events=[],S?(S._tokenizer=void 0,S.previous=void 0):W.pop(),T=W.length;T--;){const L=i.slice(W[T],W[T+1]),Q=a.pop();f.push([Q,Q+L.length-1]),e.splice(Q,2,L)}for(f.reverse(),T=-1;++T<f.length;)g[U+f[T][0]]=U+f[T][1],U+=f[T][1]-f[T][0]-1;return g}const RCe={tokenize:UCe,resolve:DCe},OCe={tokenize:zCe,partial:!0};function DCe(e){return Qie(e),e}function UCe(e,t){let n;return r;function r(i){return e.enter("content"),n=e.enter("chunkContent",{contentType:"content"}),s(i)}function s(i){return i===null?a(i):Wi(i)?e.check(OCe,c,a)(i):(e.consume(i),s)}function a(i){return e.exit("chunkContent"),e.exit("content"),t(i)}function c(i){return e.consume(i),e.exit("chunkContent"),n.next=e.enter("chunkContent",{contentType:"content",previous:n}),n=n.next,s}}function zCe(e,t,n){const r=this;return s;function s(c){return e.exit("chunkContent"),e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),Bo(e,a,"linePrefix")}function a(c){if(c===null||Wi(c))return n(c);const i=r.events[r.events.length-1];return!r.parser.constructs.disable.null.includes("codeIndented")&&i&&i[1].type==="linePrefix"&&i[2].sliceSerialize(i[1],!0).length>=4?t(c):e.interrupt(r.parser.constructs.flow,n,t)(c)}}function Hie(e,t,n,r,s,a,c,i,f){const g=f||Number.POSITIVE_INFINITY;let y=0;return b;function b(L){return L===60?(e.enter(r),e.enter(s),e.enter(a),e.consume(L),e.exit(a),T):L===null||L===32||L===41||mj(L)?n(L):(e.enter(r),e.enter(c),e.enter(i),e.enter("chunkString",{contentType:"string"}),N(L))}function T(L){return L===62?(e.enter(a),e.consume(L),e.exit(a),e.exit(s),e.exit(r),t):(e.enter(i),e.enter("chunkString",{contentType:"string"}),S(L))}function S(L){return L===62?(e.exit("chunkString"),e.exit(i),T(L)):L===null||L===60||Wi(L)?n(L):(e.consume(L),L===92?U:S)}function U(L){return L===60||L===62||L===92?(e.consume(L),S):S(L)}function N(L){return!y&&(L===null||L===41||Ba(L))?(e.exit("chunkString"),e.exit(i),e.exit(c),e.exit(r),t(L)):y<g&&L===40?(e.consume(L),y++,N):L===41?(e.consume(L),y--,N):L===null||L===32||L===40||mj(L)?n(L):(e.consume(L),L===92?W:N)}function W(L){return L===40||L===41||L===92?(e.consume(L),N):N(L)}}function Vie(e,t,n,r,s,a){const c=this;let i=0,f;return g;function g(S){return e.enter(r),e.enter(s),e.consume(S),e.exit(s),e.enter(a),y}function y(S){return i>999||S===null||S===91||S===93&&!f||S===94&&!i&&"_hiddenFootnoteSupport"in c.parser.constructs?n(S):S===93?(e.exit(a),e.enter(s),e.consume(S),e.exit(s),e.exit(r),t):Wi(S)?(e.enter("lineEnding"),e.consume(S),e.exit("lineEnding"),y):(e.enter("chunkString",{contentType:"string"}),b(S))}function b(S){return S===null||S===91||S===93||Wi(S)||i++>999?(e.exit("chunkString"),y(S)):(e.consume(S),f||(f=!ro(S)),S===92?T:b)}function T(S){return S===91||S===92||S===93?(e.consume(S),i++,b):b(S)}}function $ie(e,t,n,r,s,a){let c;return i;function i(T){return T===34||T===39||T===40?(e.enter(r),e.enter(s),e.consume(T),e.exit(s),c=T===40?41:T,f):n(T)}function f(T){return T===c?(e.enter(s),e.consume(T),e.exit(s),e.exit(r),t):(e.enter(a),g(T))}function g(T){return T===c?(e.exit(a),f(c)):T===null?n(T):Wi(T)?(e.enter("lineEnding"),e.consume(T),e.exit("lineEnding"),Bo(e,g,"linePrefix")):(e.enter("chunkString",{contentType:"string"}),y(T))}function y(T){return T===c||T===null||Wi(T)?(e.exit("chunkString"),g(T)):(e.consume(T),T===92?b:y)}function b(T){return T===c||T===92?(e.consume(T),y):y(T)}}function BC(e,t){let n;return r;function r(s){return Wi(s)?(e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),n=!0,r):ro(s)?Bo(e,r,n?"linePrefix":"lineSuffix")(s):t(s)}}const QCe={name:"definition",tokenize:VCe},HCe={tokenize:$Ce,partial:!0};function VCe(e,t,n){const r=this;let s;return a;function a(S){return e.enter("definition"),c(S)}function c(S){return Vie.call(r,e,i,n,"definitionLabel","definitionLabelMarker","definitionLabelString")(S)}function i(S){return s=KA(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)),S===58?(e.enter("definitionMarker"),e.consume(S),e.exit("definitionMarker"),f):n(S)}function f(S){return Ba(S)?BC(e,g)(S):g(S)}function g(S){return Hie(e,y,n,"definitionDestination","definitionDestinationLiteral","definitionDestinationLiteralMarker","definitionDestinationRaw","definitionDestinationString")(S)}function y(S){return e.attempt(HCe,b,b)(S)}function b(S){return ro(S)?Bo(e,T,"whitespace")(S):T(S)}function T(S){return S===null||Wi(S)?(e.exit("definition"),r.parser.defined.push(s),t(S)):n(S)}}function $Ce(e,t,n){return r;function r(i){return Ba(i)?BC(e,s)(i):n(i)}function s(i){return $ie(e,a,n,"definitionTitle","definitionTitleMarker","definitionTitleString")(i)}function a(i){return ro(i)?Bo(e,c,"whitespace")(i):c(i)}function c(i){return i===null||Wi(i)?t(i):n(i)}}const GCe={name:"hardBreakEscape",tokenize:KCe};function KCe(e,t,n){return r;function r(a){return e.enter("hardBreakEscape"),e.consume(a),s}function s(a){return Wi(a)?(e.exit("hardBreakEscape"),t(a)):n(a)}}const WCe={name:"headingAtx",tokenize:ZCe,resolve:qCe};function qCe(e,t){let n=e.length-2,r=3,s,a;return e[r][1].type==="whitespace"&&(r+=2),n-2>r&&e[n][1].type==="whitespace"&&(n-=2),e[n][1].type==="atxHeadingSequence"&&(r===n-1||n-4>r&&e[n-2][1].type==="whitespace")&&(n-=r+1===n?2:4),n>r&&(s={type:"atxHeadingText",start:e[r][1].start,end:e[n][1].end},a={type:"chunkText",start:e[r][1].start,end:e[n][1].end,contentType:"text"},Hp(e,r,n-r+1,[["enter",s,t],["enter",a,t],["exit",a,t],["exit",s,t]])),e}function ZCe(e,t,n){let r=0;return s;function s(y){return e.enter("atxHeading"),a(y)}function a(y){return e.enter("atxHeadingSequence"),c(y)}function c(y){return y===35&&r++<6?(e.consume(y),c):y===null||Ba(y)?(e.exit("atxHeadingSequence"),i(y)):n(y)}function i(y){return y===35?(e.enter("atxHeadingSequence"),f(y)):y===null||Wi(y)?(e.exit("atxHeading"),t(y)):ro(y)?Bo(e,i,"whitespace")(y):(e.enter("atxHeadingText"),g(y))}function f(y){return y===35?(e.consume(y),f):(e.exit("atxHeadingSequence"),i(y))}function g(y){return y===null||y===35||Ba(y)?(e.exit("atxHeadingText"),i(y)):(e.consume(y),g)}}const XCe=["address","article","aside","base","basefont","blockquote","body","caption","center","col","colgroup","dd","details","dialog","dir","div","dl","dt","fieldset","figcaption","figure","footer","form","frame","frameset","h1","h2","h3","h4","h5","h6","head","header","hr","html","iframe","legend","li","link","main","menu","menuitem","nav","noframes","ol","optgroup","option","p","param","search","section","summary","table","tbody","td","tfoot","th","thead","title","tr","track","ul"],$G=["pre","script","style","textarea"],YCe={name:"htmlFlow",tokenize:nSe,resolveTo:tSe,concrete:!0},JCe={tokenize:iSe,partial:!0},eSe={tokenize:rSe,partial:!0};function tSe(e){let t=e.length;for(;t--&&!(e[t][0]==="enter"&&e[t][1].type==="htmlFlow"););return t>1&&e[t-2][1].type==="linePrefix"&&(e[t][1].start=e[t-2][1].start,e[t+1][1].start=e[t-2][1].start,e.splice(t-2,2)),e}function nSe(e,t,n){const r=this;let s,a,c,i,f;return g;function g(me){return y(me)}function y(me){return e.enter("htmlFlow"),e.enter("htmlFlowData"),e.consume(me),b}function b(me){return me===33?(e.consume(me),T):me===47?(e.consume(me),a=!0,N):me===63?(e.consume(me),s=3,r.interrupt?t:xe):fh(me)?(e.consume(me),c=String.fromCharCode(me),W):n(me)}function T(me){return me===45?(e.consume(me),s=2,S):me===91?(e.consume(me),s=5,i=0,U):fh(me)?(e.consume(me),s=4,r.interrupt?t:xe):n(me)}function S(me){return me===45?(e.consume(me),r.interrupt?t:xe):n(me)}function U(me){const Ze="CDATA[";return me===Ze.charCodeAt(i++)?(e.consume(me),i===Ze.length?r.interrupt?t:be:U):n(me)}function N(me){return fh(me)?(e.consume(me),c=String.fromCharCode(me),W):n(me)}function W(me){if(me===null||me===47||me===62||Ba(me)){const Ze=me===47,ot=c.toLowerCase();return!Ze&&!a&&$G.includes(ot)?(s=1,r.interrupt?t(me):be(me)):XCe.includes(c.toLowerCase())?(s=6,Ze?(e.consume(me),L):r.interrupt?t(me):be(me)):(s=7,r.interrupt&&!r.parser.lazy[r.now().line]?n(me):a?Q(me):V(me))}return me===45||Fd(me)?(e.consume(me),c+=String.fromCharCode(me),W):n(me)}function L(me){return me===62?(e.consume(me),r.interrupt?t:be):n(me)}function Q(me){return ro(me)?(e.consume(me),Q):ye(me)}function V(me){return me===47?(e.consume(me),ye):me===58||me===95||fh(me)?(e.consume(me),Z):ro(me)?(e.consume(me),V):ye(me)}function Z(me){return me===45||me===46||me===58||me===95||Fd(me)?(e.consume(me),Z):ne(me)}function ne(me){return me===61?(e.consume(me),Y):ro(me)?(e.consume(me),ne):V(me)}function Y(me){return me===null||me===60||me===61||me===62||me===96?n(me):me===34||me===39?(e.consume(me),f=me,le):ro(me)?(e.consume(me),Y):pe(me)}function le(me){return me===f?(e.consume(me),f=null,_e):me===null||Wi(me)?n(me):(e.consume(me),le)}function pe(me){return me===null||me===34||me===39||me===47||me===60||me===61||me===62||me===96||Ba(me)?ne(me):(e.consume(me),pe)}function _e(me){return me===47||me===62||ro(me)?V(me):n(me)}function ye(me){return me===62?(e.consume(me),he):n(me)}function he(me){return me===null||Wi(me)?be(me):ro(me)?(e.consume(me),he):n(me)}function be(me){return me===45&&s===2?(e.consume(me),Ge):me===60&&s===1?(e.consume(me),Je):me===62&&s===4?(e.consume(me),at):me===63&&s===3?(e.consume(me),xe):me===93&&s===5?(e.consume(me),Qe):Wi(me)&&(s===6||s===7)?(e.exit("htmlFlowData"),e.check(JCe,we,Te)(me)):me===null||Wi(me)?(e.exit("htmlFlowData"),Te(me)):(e.consume(me),be)}function Te(me){return e.check(eSe,Ee,we)(me)}function Ee(me){return e.enter("lineEnding"),e.consume(me),e.exit("lineEnding"),Ne}function Ne(me){return me===null||Wi(me)?Te(me):(e.enter("htmlFlowData"),be(me))}function Ge(me){return me===45?(e.consume(me),xe):be(me)}function Je(me){return me===47?(e.consume(me),c="",Ue):be(me)}function Ue(me){if(me===62){const Ze=c.toLowerCase();return $G.includes(Ze)?(e.consume(me),at):be(me)}return fh(me)&&c.length<8?(e.consume(me),c+=String.fromCharCode(me),Ue):be(me)}function Qe(me){return me===93?(e.consume(me),xe):be(me)}function xe(me){return me===62?(e.consume(me),at):me===45&&s===2?(e.consume(me),xe):be(me)}function at(me){return me===null||Wi(me)?(e.exit("htmlFlowData"),we(me)):(e.consume(me),at)}function we(me){return e.exit("htmlFlow"),t(me)}}function rSe(e,t,n){const r=this;return s;function s(c){return Wi(c)?(e.enter("lineEnding"),e.consume(c),e.exit("lineEnding"),a):n(c)}function a(c){return r.parser.lazy[r.now().line]?n(c):t(c)}}function iSe(e,t,n){return r;function r(s){return e.enter("lineEnding"),e.consume(s),e.exit("lineEnding"),e.attempt(SB,t,n)}}const sSe={name:"htmlText",tokenize:oSe};function oSe(e,t,n){const r=this;let s,a,c;return i;function i(xe){return e.enter("htmlText"),e.enter("htmlTextData"),e.consume(xe),f}function f(xe){return xe===33?(e.consume(xe),g):xe===47?(e.consume(xe),ne):xe===63?(e.consume(xe),V):fh(xe)?(e.consume(xe),pe):n(xe)}function g(xe){return xe===45?(e.consume(xe),y):xe===91?(e.consume(xe),a=0,U):fh(xe)?(e.consume(xe),Q):n(xe)}function y(xe){return xe===45?(e.consume(xe),S):n(xe)}function b(xe){return xe===null?n(xe):xe===45?(e.consume(xe),T):Wi(xe)?(c=b,Je(xe)):(e.consume(xe),b)}function T(xe){return xe===45?(e.consume(xe),S):b(xe)}function S(xe){return xe===62?Ge(xe):xe===45?T(xe):b(xe)}function U(xe){const at="CDATA[";return xe===at.charCodeAt(a++)?(e.consume(xe),a===at.length?N:U):n(xe)}function N(xe){return xe===null?n(xe):xe===93?(e.consume(xe),W):Wi(xe)?(c=N,Je(xe)):(e.consume(xe),N)}function W(xe){return xe===93?(e.consume(xe),L):N(xe)}function L(xe){return xe===62?Ge(xe):xe===93?(e.consume(xe),L):N(xe)}function Q(xe){return xe===null||xe===62?Ge(xe):Wi(xe)?(c=Q,Je(xe)):(e.consume(xe),Q)}function V(xe){return xe===null?n(xe):xe===63?(e.consume(xe),Z):Wi(xe)?(c=V,Je(xe)):(e.consume(xe),V)}function Z(xe){return xe===62?Ge(xe):V(xe)}function ne(xe){return fh(xe)?(e.consume(xe),Y):n(xe)}function Y(xe){return xe===45||Fd(xe)?(e.consume(xe),Y):le(xe)}function le(xe){return Wi(xe)?(c=le,Je(xe)):ro(xe)?(e.consume(xe),le):Ge(xe)}function pe(xe){return xe===45||Fd(xe)?(e.consume(xe),pe):xe===47||xe===62||Ba(xe)?_e(xe):n(xe)}function _e(xe){return xe===47?(e.consume(xe),Ge):xe===58||xe===95||fh(xe)?(e.consume(xe),ye):Wi(xe)?(c=_e,Je(xe)):ro(xe)?(e.consume(xe),_e):Ge(xe)}function ye(xe){return xe===45||xe===46||xe===58||xe===95||Fd(xe)?(e.consume(xe),ye):he(xe)}function he(xe){return xe===61?(e.consume(xe),be):Wi(xe)?(c=he,Je(xe)):ro(xe)?(e.consume(xe),he):_e(xe)}function be(xe){return xe===null||xe===60||xe===61||xe===62||xe===96?n(xe):xe===34||xe===39?(e.consume(xe),s=xe,Te):Wi(xe)?(c=be,Je(xe)):ro(xe)?(e.consume(xe),be):(e.consume(xe),Ee)}function Te(xe){return xe===s?(e.consume(xe),s=void 0,Ne):xe===null?n(xe):Wi(xe)?(c=Te,Je(xe)):(e.consume(xe),Te)}function Ee(xe){return xe===null||xe===34||xe===39||xe===60||xe===61||xe===96?n(xe):xe===47||xe===62||Ba(xe)?_e(xe):(e.consume(xe),Ee)}function Ne(xe){return xe===47||xe===62||Ba(xe)?_e(xe):n(xe)}function Ge(xe){return xe===62?(e.consume(xe),e.exit("htmlTextData"),e.exit("htmlText"),t):n(xe)}function Je(xe){return e.exit("htmlTextData"),e.enter("lineEnding"),e.consume(xe),e.exit("lineEnding"),Ue}function Ue(xe){return ro(xe)?Bo(e,Qe,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(xe):Qe(xe)}function Qe(xe){return e.enter("htmlTextData"),c(xe)}}const cz={name:"labelEnd",tokenize:hSe,resolveTo:dSe,resolveAll:uSe},aSe={tokenize:fSe},lSe={tokenize:pSe},cSe={tokenize:ASe};function uSe(e){let t=-1;for(;++t<e.length;){const n=e[t][1];(n.type==="labelImage"||n.type==="labelLink"||n.type==="labelEnd")&&(e.splice(t+1,n.type==="labelImage"?4:2),n.type="data",t++)}return e}function dSe(e,t){let n=e.length,r=0,s,a,c,i;for(;n--;)if(s=e[n][1],a){if(s.type==="link"||s.type==="labelLink"&&s._inactive)break;e[n][0]==="enter"&&s.type==="labelLink"&&(s._inactive=!0)}else if(c){if(e[n][0]==="enter"&&(s.type==="labelImage"||s.type==="labelLink")&&!s._balanced&&(a=n,s.type!=="labelLink")){r=2;break}}else s.type==="labelEnd"&&(c=n);const f={type:e[a][1].type==="labelLink"?"link":"image",start:Object.assign({},e[a][1].start),end:Object.assign({},e[e.length-1][1].end)},g={type:"label",start:Object.assign({},e[a][1].start),end:Object.assign({},e[c][1].end)},y={type:"labelText",start:Object.assign({},e[a+r+2][1].end),end:Object.assign({},e[c-2][1].start)};return i=[["enter",f,t],["enter",g,t]],i=Lp(i,e.slice(a+1,a+r+3)),i=Lp(i,[["enter",y,t]]),i=Lp(i,qF(t.parser.constructs.insideSpan.null,e.slice(a+r+4,c-3),t)),i=Lp(i,[["exit",y,t],e[c-2],e[c-1],["exit",g,t]]),i=Lp(i,e.slice(c+1)),i=Lp(i,[["exit",f,t]]),Hp(e,a,e.length,i),e}function hSe(e,t,n){const r=this;let s=r.events.length,a,c;for(;s--;)if((r.events[s][1].type==="labelImage"||r.events[s][1].type==="labelLink")&&!r.events[s][1]._balanced){a=r.events[s][1];break}return i;function i(T){return a?a._inactive?b(T):(c=r.parser.defined.includes(KA(r.sliceSerialize({start:a.end,end:r.now()}))),e.enter("labelEnd"),e.enter("labelMarker"),e.consume(T),e.exit("labelMarker"),e.exit("labelEnd"),f):n(T)}function f(T){return T===40?e.attempt(aSe,y,c?y:b)(T):T===91?e.attempt(lSe,y,c?g:b)(T):c?y(T):b(T)}function g(T){return e.attempt(cSe,y,b)(T)}function y(T){return t(T)}function b(T){return a._balanced=!0,n(T)}}function fSe(e,t,n){return r;function r(b){return e.enter("resource"),e.enter("resourceMarker"),e.consume(b),e.exit("resourceMarker"),s}function s(b){return Ba(b)?BC(e,a)(b):a(b)}function a(b){return b===41?y(b):Hie(e,c,i,"resourceDestination","resourceDestinationLiteral","resourceDestinationLiteralMarker","resourceDestinationRaw","resourceDestinationString",32)(b)}function c(b){return Ba(b)?BC(e,f)(b):y(b)}function i(b){return n(b)}function f(b){return b===34||b===39||b===40?$ie(e,g,n,"resourceTitle","resourceTitleMarker","resourceTitleString")(b):y(b)}function g(b){return Ba(b)?BC(e,y)(b):y(b)}function y(b){return b===41?(e.enter("resourceMarker"),e.consume(b),e.exit("resourceMarker"),e.exit("resource"),t):n(b)}}function pSe(e,t,n){const r=this;return s;function s(i){return Vie.call(r,e,a,c,"reference","referenceMarker","referenceString")(i)}function a(i){return r.parser.defined.includes(KA(r.sliceSerialize(r.events[r.events.length-1][1]).slice(1,-1)))?t(i):n(i)}function c(i){return n(i)}}function ASe(e,t,n){return r;function r(a){return e.enter("reference"),e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),s}function s(a){return a===93?(e.enter("referenceMarker"),e.consume(a),e.exit("referenceMarker"),e.exit("reference"),t):n(a)}}const mSe={name:"labelStartImage",tokenize:gSe,resolveAll:cz.resolveAll};function gSe(e,t,n){const r=this;return s;function s(i){return e.enter("labelImage"),e.enter("labelImageMarker"),e.consume(i),e.exit("labelImageMarker"),a}function a(i){return i===91?(e.enter("labelMarker"),e.consume(i),e.exit("labelMarker"),e.exit("labelImage"),c):n(i)}function c(i){return i===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(i):t(i)}}const ySe={name:"labelStartLink",tokenize:vSe,resolveAll:cz.resolveAll};function vSe(e,t,n){const r=this;return s;function s(c){return e.enter("labelLink"),e.enter("labelMarker"),e.consume(c),e.exit("labelMarker"),e.exit("labelLink"),a}function a(c){return c===94&&"_hiddenFootnoteSupport"in r.parser.constructs?n(c):t(c)}}const VM={name:"lineEnding",tokenize:xSe};function xSe(e,t){return n;function n(r){return e.enter("lineEnding"),e.consume(r),e.exit("lineEnding"),Bo(e,t,"linePrefix")}}const VT={name:"thematicBreak",tokenize:_Se};function _Se(e,t,n){let r=0,s;return a;function a(g){return e.enter("thematicBreak"),c(g)}function c(g){return s=g,i(g)}function i(g){return g===s?(e.enter("thematicBreakSequence"),f(g)):r>=3&&(g===null||Wi(g))?(e.exit("thematicBreak"),t(g)):n(g)}function f(g){return g===s?(e.consume(g),r++,f):(e.exit("thematicBreakSequence"),ro(g)?Bo(e,i,"whitespace")(g):i(g))}}const Hh={name:"list",tokenize:CSe,continuation:{tokenize:SSe},exit:ESe},wSe={tokenize:TSe,partial:!0},bSe={tokenize:BSe,partial:!0};function CSe(e,t,n){const r=this,s=r.events[r.events.length-1];let a=s&&s[1].type==="linePrefix"?s[2].sliceSerialize(s[1],!0).length:0,c=0;return i;function i(S){const U=r.containerState.type||(S===42||S===43||S===45?"listUnordered":"listOrdered");if(U==="listUnordered"?!r.containerState.marker||S===r.containerState.marker:tD(S)){if(r.containerState.type||(r.containerState.type=U,e.enter(U,{_container:!0})),U==="listUnordered")return e.enter("listItemPrefix"),S===42||S===45?e.check(VT,n,g)(S):g(S);if(!r.interrupt||S===49)return e.enter("listItemPrefix"),e.enter("listItemValue"),f(S)}return n(S)}function f(S){return tD(S)&&++c<10?(e.consume(S),f):(!r.interrupt||c<2)&&(r.containerState.marker?S===r.containerState.marker:S===41||S===46)?(e.exit("listItemValue"),g(S)):n(S)}function g(S){return e.enter("listItemMarker"),e.consume(S),e.exit("listItemMarker"),r.containerState.marker=r.containerState.marker||S,e.check(SB,r.interrupt?n:y,e.attempt(wSe,T,b))}function y(S){return r.containerState.initialBlankLine=!0,a++,T(S)}function b(S){return ro(S)?(e.enter("listItemPrefixWhitespace"),e.consume(S),e.exit("listItemPrefixWhitespace"),T):n(S)}function T(S){return r.containerState.size=a+r.sliceSerialize(e.exit("listItemPrefix"),!0).length,t(S)}}function SSe(e,t,n){const r=this;return r.containerState._closeFlow=void 0,e.check(SB,s,a);function s(i){return r.containerState.furtherBlankLines=r.containerState.furtherBlankLines||r.containerState.initialBlankLine,Bo(e,t,"listItemIndent",r.containerState.size+1)(i)}function a(i){return r.containerState.furtherBlankLines||!ro(i)?(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,c(i)):(r.containerState.furtherBlankLines=void 0,r.containerState.initialBlankLine=void 0,e.attempt(bSe,t,c)(i))}function c(i){return r.containerState._closeFlow=!0,r.interrupt=void 0,Bo(e,e.attempt(Hh,t,n),"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(i)}}function BSe(e,t,n){const r=this;return Bo(e,s,"listItemIndent",r.containerState.size+1);function s(a){const c=r.events[r.events.length-1];return c&&c[1].type==="listItemIndent"&&c[2].sliceSerialize(c[1],!0).length===r.containerState.size?t(a):n(a)}}function ESe(e){e.exit(this.containerState.type)}function TSe(e,t,n){const r=this;return Bo(e,s,"listItemPrefixWhitespace",r.parser.constructs.disable.null.includes("codeIndented")?void 0:5);function s(a){const c=r.events[r.events.length-1];return!ro(a)&&c&&c[1].type==="listItemPrefixWhitespace"?t(a):n(a)}}const GG={name:"setextUnderline",tokenize:jSe,resolveTo:ISe};function ISe(e,t){let n=e.length,r,s,a;for(;n--;)if(e[n][0]==="enter"){if(e[n][1].type==="content"){r=n;break}e[n][1].type==="paragraph"&&(s=n)}else e[n][1].type==="content"&&e.splice(n,1),!a&&e[n][1].type==="definition"&&(a=n);const c={type:"setextHeading",start:Object.assign({},e[s][1].start),end:Object.assign({},e[e.length-1][1].end)};return e[s][1].type="setextHeadingText",a?(e.splice(s,0,["enter",c,t]),e.splice(a+1,0,["exit",e[r][1],t]),e[r][1].end=Object.assign({},e[a][1].end)):e[r][1]=c,e.push(["exit",c,t]),e}function jSe(e,t,n){const r=this;let s;return a;function a(g){let y=r.events.length,b;for(;y--;)if(r.events[y][1].type!=="lineEnding"&&r.events[y][1].type!=="linePrefix"&&r.events[y][1].type!=="content"){b=r.events[y][1].type==="paragraph";break}return!r.parser.lazy[r.now().line]&&(r.interrupt||b)?(e.enter("setextHeadingLine"),s=g,c(g)):n(g)}function c(g){return e.enter("setextHeadingLineSequence"),i(g)}function i(g){return g===s?(e.consume(g),i):(e.exit("setextHeadingLineSequence"),ro(g)?Bo(e,f,"lineSuffix")(g):f(g))}function f(g){return g===null||Wi(g)?(e.exit("setextHeadingLine"),t(g)):n(g)}}const FSe={tokenize:PSe};function PSe(e){const t=this,n=e.attempt(SB,r,e.attempt(this.parser.constructs.flowInitial,s,Bo(e,e.attempt(this.parser.constructs.flow,s,e.attempt(RCe,s)),"linePrefix")));return n;function r(a){if(a===null){e.consume(a);return}return e.enter("lineEndingBlank"),e.consume(a),e.exit("lineEndingBlank"),t.currentConstruct=void 0,n}function s(a){if(a===null){e.consume(a);return}return e.enter("lineEnding"),e.consume(a),e.exit("lineEnding"),t.currentConstruct=void 0,n}}const kSe={resolveAll:Kie()},LSe=Gie("string"),MSe=Gie("text");function Gie(e){return{tokenize:t,resolveAll:Kie(e==="text"?NSe:void 0)};function t(n){const r=this,s=this.parser.constructs[e],a=n.attempt(s,c,i);return c;function c(y){return g(y)?a(y):i(y)}function i(y){if(y===null){n.consume(y);return}return n.enter("data"),n.consume(y),f}function f(y){return g(y)?(n.exit("data"),a(y)):(n.consume(y),f)}function g(y){if(y===null)return!0;const b=s[y];let T=-1;if(b)for(;++T<b.length;){const S=b[T];if(!S.previous||S.previous.call(r,r.previous))return!0}return!1}}}function Kie(e){return t;function t(n,r){let s=-1,a;for(;++s<=n.length;)a===void 0?n[s]&&n[s][1].type==="data"&&(a=s,s++):(!n[s]||n[s][1].type!=="data")&&(s!==a+2&&(n[a][1].end=n[s-1][1].end,n.splice(a+2,s-a-2),s=a+2),a=void 0);return e?e(n,r):n}}function NSe(e,t){let n=0;for(;++n<=e.length;)if((n===e.length||e[n][1].type==="lineEnding")&&e[n-1][1].type==="data"){const r=e[n-1][1],s=t.sliceStream(r);let a=s.length,c=-1,i=0,f;for(;a--;){const g=s[a];if(typeof g=="string"){for(c=g.length;g.charCodeAt(c-1)===32;)i++,c--;if(c)break;c=-1}else if(g===-2)f=!0,i++;else if(g!==-1){a++;break}}if(i){const g={type:n===e.length||f||i<2?"lineSuffix":"hardBreakTrailing",start:{line:r.end.line,column:r.end.column-i,offset:r.end.offset-i,_index:r.start._index+a,_bufferIndex:a?c:r.start._bufferIndex+c},end:Object.assign({},r.end)};r.end=Object.assign({},g.start),r.start.offset===r.end.offset?Object.assign(r,g):(e.splice(n,0,["enter",g,t],["exit",g,t]),n+=2)}n++}return e}function RSe(e,t,n){let r=Object.assign(n?Object.assign({},n):{line:1,column:1,offset:0},{_index:0,_bufferIndex:-1});const s={},a=[];let c=[],i=[];const f={consume:Q,enter:V,exit:Z,attempt:le(ne),check:le(Y),interrupt:le(Y,{interrupt:!0})},g={previous:null,code:null,containerState:{},events:[],parser:e,sliceStream:S,sliceSerialize:T,now:U,defineSkip:N,write:b};let y=t.tokenize.call(g,f);return t.resolveAll&&a.push(t),g;function b(he){return c=Lp(c,he),W(),c[c.length-1]!==null?[]:(pe(t,0),g.events=qF(a,g.events,g),g.events)}function T(he,be){return DSe(S(he),be)}function S(he){return OSe(c,he)}function U(){const{line:he,column:be,offset:Te,_index:Ee,_bufferIndex:Ne}=r;return{line:he,column:be,offset:Te,_index:Ee,_bufferIndex:Ne}}function N(he){s[he.line]=he.column,ye()}function W(){let he;for(;r._index<c.length;){const be=c[r._index];if(typeof be=="string")for(he=r._index,r._bufferIndex<0&&(r._bufferIndex=0);r._index===he&&r._bufferIndex<be.length;)L(be.charCodeAt(r._bufferIndex));else L(be)}}function L(he){y=y(he)}function Q(he){Wi(he)?(r.line++,r.column=1,r.offset+=he===-3?2:1,ye()):he!==-1&&(r.column++,r.offset++),r._bufferIndex<0?r._index++:(r._bufferIndex++,r._bufferIndex===c[r._index].length&&(r._bufferIndex=-1,r._index++)),g.previous=he}function V(he,be){const Te=be||{};return Te.type=he,Te.start=U(),g.events.push(["enter",Te,g]),i.push(Te),Te}function Z(he){const be=i.pop();return be.end=U(),g.events.push(["exit",be,g]),be}function ne(he,be){pe(he,be.from)}function Y(he,be){be.restore()}function le(he,be){return Te;function Te(Ee,Ne,Ge){let Je,Ue,Qe,xe;return Array.isArray(Ee)?we(Ee):"tokenize"in Ee?we([Ee]):at(Ee);function at(vt){return Qt;function Qt(Ot){const kt=Ot!==null&&vt[Ot],Me=Ot!==null&&vt.null,Ht=[...Array.isArray(kt)?kt:kt?[kt]:[],...Array.isArray(Me)?Me:Me?[Me]:[]];return we(Ht)(Ot)}}function we(vt){return Je=vt,Ue=0,vt.length===0?Ge:me(vt[Ue])}function me(vt){return Qt;function Qt(Ot){return xe=_e(),Qe=vt,vt.partial||(g.currentConstruct=vt),vt.name&&g.parser.constructs.disable.null.includes(vt.name)?ot():vt.tokenize.call(be?Object.assign(Object.create(g),be):g,f,Ze,ot)(Ot)}}function Ze(vt){return he(Qe,xe),Ne}function ot(vt){return xe.restore(),++Ue<Je.length?me(Je[Ue]):Ge}}}function pe(he,be){he.resolveAll&&!a.includes(he)&&a.push(he),he.resolve&&Hp(g.events,be,g.events.length-be,he.resolve(g.events.slice(be),g)),he.resolveTo&&(g.events=he.resolveTo(g.events,g))}function _e(){const he=U(),be=g.previous,Te=g.currentConstruct,Ee=g.events.length,Ne=Array.from(i);return{restore:Ge,from:Ee};function Ge(){r=he,g.previous=be,g.currentConstruct=Te,g.events.length=Ee,i=Ne,ye()}}function ye(){r.line in s&&r.column<2&&(r.column=s[r.line],r.offset+=s[r.line]-1)}}function OSe(e,t){const n=t.start._index,r=t.start._bufferIndex,s=t.end._index,a=t.end._bufferIndex;let c;if(n===s)c=[e[n].slice(r,a)];else{if(c=e.slice(n,s),r>-1){const i=c[0];typeof i=="string"?c[0]=i.slice(r):c.shift()}a>0&&c.push(e[s].slice(0,a))}return c}function DSe(e,t){let n=-1;const r=[];let s;for(;++n<e.length;){const a=e[n];let c;if(typeof a=="string")c=a;else switch(a){case-5:{c="\r";break}case-4:{c=`
`;break}case-3:{c=`\r
`;break}case-2:{c=t?" ":"	";break}case-1:{if(!t&&s)continue;c=" ";break}default:c=String.fromCharCode(a)}s=a===-2,r.push(c)}return r.join("")}const USe={42:Hh,43:Hh,45:Hh,48:Hh,49:Hh,50:Hh,51:Hh,52:Hh,53:Hh,54:Hh,55:Hh,56:Hh,57:Hh,62:Die},zSe={91:QCe},QSe={[-2]:HM,[-1]:HM,32:HM},HSe={35:WCe,42:VT,45:[GG,VT],60:YCe,61:GG,95:VT,96:VG,126:VG},VSe={38:zie,92:Uie},$Se={[-5]:VM,[-4]:VM,[-3]:VM,33:mSe,38:zie,42:nD,60:[yCe,sSe],91:ySe,92:[GCe,Uie],93:cz,95:nD,96:FCe},GSe={null:[nD,kSe]},KSe={null:[42,95]},WSe={null:[]},qSe=Object.freeze(Object.defineProperty({__proto__:null,attentionMarkers:KSe,contentInitial:zSe,disable:WSe,document:USe,flow:HSe,flowInitial:QSe,insideSpan:GSe,string:VSe,text:$Se},Symbol.toStringTag,{value:"Module"}));function ZSe(e){const t=Rie([qSe,...(e||{}).extensions||[]]),n={defined:[],lazy:{},constructs:t,content:r(dCe),document:r(fCe),flow:r(FSe),string:r(LSe),text:r(MSe)};return n;function r(s){return a;function a(c){return RSe(n,s,c)}}}function XSe(e){for(;!Qie(e););return e}const KG=/[\0\t\n\r]/g;function YSe(){let e=1,t="",n=!0,r;return s;function s(a,c,i){const f=[];let g,y,b,T,S;for(a=t+(typeof a=="string"?a.toString():new TextDecoder(c||void 0).decode(a)),b=0,t="",n&&(a.charCodeAt(0)===65279&&b++,n=void 0);b<a.length;){if(KG.lastIndex=b,g=KG.exec(a),T=g&&g.index!==void 0?g.index:a.length,S=a.charCodeAt(T),!g){t=a.slice(b);break}if(S===10&&b===T&&r)f.push(-3),r=void 0;else switch(r&&(f.push(-5),r=void 0),b<T&&(f.push(a.slice(b,T)),e+=T-b),S){case 0:{f.push(65533),e++;break}case 9:{for(y=Math.ceil(e/4)*4,f.push(-2);e++<y;)f.push(-1);break}case 10:{f.push(-4),e=1;break}default:r=!0,e=1}b=T+1}return i&&(r&&f.push(-5),t&&f.push(t),f.push(null)),f}}const JSe=/\\([!-/:-@[-`{-~])|&(#(?:\d{1,7}|x[\da-f]{1,6})|[\da-z]{1,31});/gi;function eBe(e){return e.replace(JSe,tBe)}function tBe(e,t,n){if(t)return t;if(n.charCodeAt(0)===35){const r=n.charCodeAt(1),s=r===120||r===88;return Oie(n.slice(s?2:1),s?16:10)}return lz(n)||e}const Wie={}.hasOwnProperty;function nBe(e,t,n){return typeof t!="string"&&(n=t,t=void 0),rBe(n)(XSe(ZSe(n).document().write(YSe()(e,t,!0))))}function rBe(e){const t={transforms:[],canContainEols:["emphasis","fragment","heading","paragraph","strong"],enter:{autolink:a($t),autolinkProtocol:_e,autolinkEmail:_e,atxHeading:a(hn),blockQuote:a(Me),characterEscape:_e,characterReference:_e,codeFenced:a(Ht),codeFencedFenceInfo:c,codeFencedFenceMeta:c,codeIndented:a(Ht,c),codeText:a(Zt,c),codeTextData:_e,data:_e,codeFlowValue:_e,definition:a(pn),definitionDestinationString:c,definitionLabelString:c,definitionTitleString:c,emphasis:a(Dt),hardBreakEscape:a(Oe),hardBreakTrailing:a(Oe),htmlFlow:a(nn,c),htmlFlowData:_e,htmlText:a(nn,c),htmlTextData:_e,image:a(Vt),label:c,link:a($t),listItem:a(Xt),listItemValue:T,listOrdered:a(xn,b),listUnordered:a(xn),paragraph:a(gn),reference:me,referenceString:c,resourceDestinationString:c,resourceTitleString:c,setextHeading:a(hn),strong:a(rr),thematicBreak:a(Rn)},exit:{atxHeading:f(),atxHeadingSequence:ne,autolink:f(),autolinkEmail:kt,autolinkProtocol:Ot,blockQuote:f(),characterEscapeValue:ye,characterReferenceMarkerHexadecimal:ot,characterReferenceMarkerNumeric:ot,characterReferenceValue:vt,characterReference:Qt,codeFenced:f(W),codeFencedFence:N,codeFencedFenceInfo:S,codeFencedFenceMeta:U,codeFlowValue:ye,codeIndented:f(L),codeText:f(Ne),codeTextData:ye,data:ye,definition:f(),definitionDestinationString:Z,definitionLabelString:Q,definitionTitleString:V,emphasis:f(),hardBreakEscape:f(be),hardBreakTrailing:f(be),htmlFlow:f(Te),htmlFlowData:ye,htmlText:f(Ee),htmlTextData:ye,image:f(Je),label:Qe,labelText:Ue,lineEnding:he,link:f(Ge),listItem:f(),listOrdered:f(),listUnordered:f(),paragraph:f(),referenceString:Ze,resourceDestinationString:xe,resourceTitleString:at,resource:we,setextHeading:f(pe),setextHeadingLineSequence:le,setextHeadingText:Y,strong:f(),thematicBreak:f()}};qie(t,(e||{}).mdastExtensions||[]);const n={};return r;function r(wt){let qt={type:"root",children:[]};const fn={stack:[qt],tokenStack:[],config:t,enter:i,exit:g,buffer:c,resume:y,data:n},Un=[];let Yt=-1;for(;++Yt<wt.length;)if(wt[Yt][1].type==="listOrdered"||wt[Yt][1].type==="listUnordered")if(wt[Yt][0]==="enter")Un.push(Yt);else{const cn=Un.pop();Yt=s(wt,cn,Yt)}for(Yt=-1;++Yt<wt.length;){const cn=t[wt[Yt][0]];Wie.call(cn,wt[Yt][1].type)&&cn[wt[Yt][1].type].call(Object.assign({sliceSerialize:wt[Yt][2].sliceSerialize},fn),wt[Yt][1])}if(fn.tokenStack.length>0){const cn=fn.tokenStack[fn.tokenStack.length-1];(cn[1]||WG).call(fn,void 0,cn[0])}for(qt.position={start:K0(wt.length>0?wt[0][1].start:{line:1,column:1,offset:0}),end:K0(wt.length>0?wt[wt.length-2][1].end:{line:1,column:1,offset:0})},Yt=-1;++Yt<t.transforms.length;)qt=t.transforms[Yt](qt)||qt;return qt}function s(wt,qt,fn){let Un=qt-1,Yt=-1,cn=!1,Ln,Hn,_r,fr;for(;++Un<=fn;){const xr=wt[Un];switch(xr[1].type){case"listUnordered":case"listOrdered":case"blockQuote":{xr[0]==="enter"?Yt++:Yt--,fr=void 0;break}case"lineEndingBlank":{xr[0]==="enter"&&(Ln&&!fr&&!Yt&&!_r&&(_r=Un),fr=void 0);break}case"linePrefix":case"listItemValue":case"listItemMarker":case"listItemPrefix":case"listItemPrefixWhitespace":break;default:fr=void 0}if(!Yt&&xr[0]==="enter"&&xr[1].type==="listItemPrefix"||Yt===-1&&xr[0]==="exit"&&(xr[1].type==="listUnordered"||xr[1].type==="listOrdered")){if(Ln){let bi=Un;for(Hn=void 0;bi--;){const Vn=wt[bi];if(Vn[1].type==="lineEnding"||Vn[1].type==="lineEndingBlank"){if(Vn[0]==="exit")continue;Hn&&(wt[Hn][1].type="lineEndingBlank",cn=!0),Vn[1].type="lineEnding",Hn=bi}else if(!(Vn[1].type==="linePrefix"||Vn[1].type==="blockQuotePrefix"||Vn[1].type==="blockQuotePrefixWhitespace"||Vn[1].type==="blockQuoteMarker"||Vn[1].type==="listItemIndent"))break}_r&&(!Hn||_r<Hn)&&(Ln._spread=!0),Ln.end=Object.assign({},Hn?wt[Hn][1].start:xr[1].end),wt.splice(Hn||Un,0,["exit",Ln,xr[2]]),Un++,fn++}if(xr[1].type==="listItemPrefix"){const bi={type:"listItem",_spread:!1,start:Object.assign({},xr[1].start),end:void 0};Ln=bi,wt.splice(Un,0,["enter",bi,xr[2]]),Un++,fn++,_r=void 0,fr=!0}}}return wt[qt][1]._spread=cn,fn}function a(wt,qt){return fn;function fn(Un){i.call(this,wt(Un),Un),qt&&qt.call(this,Un)}}function c(){this.stack.push({type:"fragment",children:[]})}function i(wt,qt,fn){this.stack[this.stack.length-1].children.push(wt),this.stack.push(wt),this.tokenStack.push([qt,fn]),wt.position={start:K0(qt.start),end:void 0}}function f(wt){return qt;function qt(fn){wt&&wt.call(this,fn),g.call(this,fn)}}function g(wt,qt){const fn=this.stack.pop(),Un=this.tokenStack.pop();if(Un)Un[0].type!==wt.type&&(qt?qt.call(this,wt,Un[0]):(Un[1]||WG).call(this,wt,Un[0]));else throw new Error("Cannot close `"+wt.type+"` ("+SC({start:wt.start,end:wt.end})+"): it’s not open");fn.position.end=K0(wt.end)}function y(){return az(this.stack.pop())}function b(){this.data.expectingFirstListItemValue=!0}function T(wt){if(this.data.expectingFirstListItemValue){const qt=this.stack[this.stack.length-2];qt.start=Number.parseInt(this.sliceSerialize(wt),10),this.data.expectingFirstListItemValue=void 0}}function S(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.lang=wt}function U(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.meta=wt}function N(){this.data.flowCodeInside||(this.buffer(),this.data.flowCodeInside=!0)}function W(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.value=wt.replace(/^(\r?\n|\r)|(\r?\n|\r)$/g,""),this.data.flowCodeInside=void 0}function L(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.value=wt.replace(/(\r?\n|\r)$/g,"")}function Q(wt){const qt=this.resume(),fn=this.stack[this.stack.length-1];fn.label=qt,fn.identifier=KA(this.sliceSerialize(wt)).toLowerCase()}function V(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.title=wt}function Z(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.url=wt}function ne(wt){const qt=this.stack[this.stack.length-1];if(!qt.depth){const fn=this.sliceSerialize(wt).length;qt.depth=fn}}function Y(){this.data.setextHeadingSlurpLineEnding=!0}function le(wt){const qt=this.stack[this.stack.length-1];qt.depth=this.sliceSerialize(wt).codePointAt(0)===61?1:2}function pe(){this.data.setextHeadingSlurpLineEnding=void 0}function _e(wt){const qt=this.stack[this.stack.length-1].children;let fn=qt[qt.length-1];(!fn||fn.type!=="text")&&(fn=Gt(),fn.position={start:K0(wt.start),end:void 0},qt.push(fn)),this.stack.push(fn)}function ye(wt){const qt=this.stack.pop();qt.value+=this.sliceSerialize(wt),qt.position.end=K0(wt.end)}function he(wt){const qt=this.stack[this.stack.length-1];if(this.data.atHardBreak){const fn=qt.children[qt.children.length-1];fn.position.end=K0(wt.end),this.data.atHardBreak=void 0;return}!this.data.setextHeadingSlurpLineEnding&&t.canContainEols.includes(qt.type)&&(_e.call(this,wt),ye.call(this,wt))}function be(){this.data.atHardBreak=!0}function Te(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.value=wt}function Ee(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.value=wt}function Ne(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.value=wt}function Ge(){const wt=this.stack[this.stack.length-1];if(this.data.inReference){const qt=this.data.referenceType||"shortcut";wt.type+="Reference",wt.referenceType=qt,delete wt.url,delete wt.title}else delete wt.identifier,delete wt.label;this.data.referenceType=void 0}function Je(){const wt=this.stack[this.stack.length-1];if(this.data.inReference){const qt=this.data.referenceType||"shortcut";wt.type+="Reference",wt.referenceType=qt,delete wt.url,delete wt.title}else delete wt.identifier,delete wt.label;this.data.referenceType=void 0}function Ue(wt){const qt=this.sliceSerialize(wt),fn=this.stack[this.stack.length-2];fn.label=eBe(qt),fn.identifier=KA(qt).toLowerCase()}function Qe(){const wt=this.stack[this.stack.length-1],qt=this.resume(),fn=this.stack[this.stack.length-1];if(this.data.inReference=!0,fn.type==="link"){const Un=wt.children;fn.children=Un}else fn.alt=qt}function xe(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.url=wt}function at(){const wt=this.resume(),qt=this.stack[this.stack.length-1];qt.title=wt}function we(){this.data.inReference=void 0}function me(){this.data.referenceType="collapsed"}function Ze(wt){const qt=this.resume(),fn=this.stack[this.stack.length-1];fn.label=qt,fn.identifier=KA(this.sliceSerialize(wt)).toLowerCase(),this.data.referenceType="full"}function ot(wt){this.data.characterReferenceType=wt.type}function vt(wt){const qt=this.sliceSerialize(wt),fn=this.data.characterReferenceType;let Un;fn?(Un=Oie(qt,fn==="characterReferenceMarkerNumeric"?10:16),this.data.characterReferenceType=void 0):Un=lz(qt);const Yt=this.stack[this.stack.length-1];Yt.value+=Un}function Qt(wt){const qt=this.stack.pop();qt.position.end=K0(wt.end)}function Ot(wt){ye.call(this,wt);const qt=this.stack[this.stack.length-1];qt.url=this.sliceSerialize(wt)}function kt(wt){ye.call(this,wt);const qt=this.stack[this.stack.length-1];qt.url="mailto:"+this.sliceSerialize(wt)}function Me(){return{type:"blockquote",children:[]}}function Ht(){return{type:"code",lang:null,meta:null,value:""}}function Zt(){return{type:"inlineCode",value:""}}function pn(){return{type:"definition",identifier:"",label:null,title:null,url:""}}function Dt(){return{type:"emphasis",children:[]}}function hn(){return{type:"heading",depth:0,children:[]}}function Oe(){return{type:"break"}}function nn(){return{type:"html",value:""}}function Vt(){return{type:"image",title:null,url:"",alt:null}}function $t(){return{type:"link",title:null,url:"",children:[]}}function xn(wt){return{type:"list",ordered:wt.type==="listOrdered",start:null,spread:wt._spread,children:[]}}function Xt(wt){return{type:"listItem",spread:wt._spread,checked:null,children:[]}}function gn(){return{type:"paragraph",children:[]}}function rr(){return{type:"strong",children:[]}}function Gt(){return{type:"text",value:""}}function Rn(){return{type:"thematicBreak"}}}function K0(e){return{line:e.line,column:e.column,offset:e.offset}}function qie(e,t){let n=-1;for(;++n<t.length;){const r=t[n];Array.isArray(r)?qie(e,r):iBe(e,r)}}function iBe(e,t){let n;for(n in t)if(Wie.call(t,n))switch(n){case"canContainEols":{const r=t[n];r&&e[n].push(...r);break}case"transforms":{const r=t[n];r&&e[n].push(...r);break}case"enter":case"exit":{const r=t[n];r&&Object.assign(e[n],r);break}}}function WG(e,t){throw e?new Error("Cannot close `"+e.type+"` ("+SC({start:e.start,end:e.end})+"): a different token (`"+t.type+"`, "+SC({start:t.start,end:t.end})+") is open"):new Error("Cannot close document, a token (`"+t.type+"`, "+SC({start:t.start,end:t.end})+") is still open")}function sBe(e){const t=this;t.parser=n;function n(r){return nBe(r,{...t.data("settings"),...e,extensions:t.data("micromarkExtensions")||[],mdastExtensions:t.data("fromMarkdownExtensions")||[]})}}function oBe(e,t){const n={type:"element",tagName:"blockquote",properties:{},children:e.wrap(e.all(t),!0)};return e.patch(t,n),e.applyData(t,n)}function aBe(e,t){const n={type:"element",tagName:"br",properties:{},children:[]};return e.patch(t,n),[e.applyData(t,n),{type:"text",value:`
`}]}function lBe(e,t){const n=t.value?t.value+`
`:"",r={};t.lang&&(r.className=["language-"+t.lang]);let s={type:"element",tagName:"code",properties:r,children:[{type:"text",value:n}]};return t.meta&&(s.data={meta:t.meta}),e.patch(t,s),s=e.applyData(t,s),s={type:"element",tagName:"pre",properties:{},children:[s]},e.patch(t,s),s}function cBe(e,t){const n={type:"element",tagName:"del",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function uBe(e,t){const n={type:"element",tagName:"em",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function dBe(e,t){const n=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",r=String(t.identifier).toUpperCase(),s=qw(r.toLowerCase()),a=e.footnoteOrder.indexOf(r);let c,i=e.footnoteCounts.get(r);i===void 0?(i=0,e.footnoteOrder.push(r),c=e.footnoteOrder.length):c=a+1,i+=1,e.footnoteCounts.set(r,i);const f={type:"element",tagName:"a",properties:{href:"#"+n+"fn-"+s,id:n+"fnref-"+s+(i>1?"-"+i:""),dataFootnoteRef:!0,ariaDescribedBy:["footnote-label"]},children:[{type:"text",value:String(c)}]};e.patch(t,f);const g={type:"element",tagName:"sup",properties:{},children:[f]};return e.patch(t,g),e.applyData(t,g)}function hBe(e,t){const n={type:"element",tagName:"h"+t.depth,properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function fBe(e,t){if(e.options.allowDangerousHtml){const n={type:"raw",value:t.value};return e.patch(t,n),e.applyData(t,n)}}function Zie(e,t){const n=t.referenceType;let r="]";if(n==="collapsed"?r+="[]":n==="full"&&(r+="["+(t.label||t.identifier)+"]"),t.type==="imageReference")return[{type:"text",value:"!["+t.alt+r}];const s=e.all(t),a=s[0];a&&a.type==="text"?a.value="["+a.value:s.unshift({type:"text",value:"["});const c=s[s.length-1];return c&&c.type==="text"?c.value+=r:s.push({type:"text",value:r}),s}function pBe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Zie(e,t);const s={src:qw(r.url||""),alt:t.alt};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"img",properties:s,children:[]};return e.patch(t,a),e.applyData(t,a)}function ABe(e,t){const n={src:qw(t.url)};t.alt!==null&&t.alt!==void 0&&(n.alt=t.alt),t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"img",properties:n,children:[]};return e.patch(t,r),e.applyData(t,r)}function mBe(e,t){const n={type:"text",value:t.value.replace(/\r?\n|\r/g," ")};e.patch(t,n);const r={type:"element",tagName:"code",properties:{},children:[n]};return e.patch(t,r),e.applyData(t,r)}function gBe(e,t){const n=String(t.identifier).toUpperCase(),r=e.definitionById.get(n);if(!r)return Zie(e,t);const s={href:qw(r.url||"")};r.title!==null&&r.title!==void 0&&(s.title=r.title);const a={type:"element",tagName:"a",properties:s,children:e.all(t)};return e.patch(t,a),e.applyData(t,a)}function yBe(e,t){const n={href:qw(t.url)};t.title!==null&&t.title!==void 0&&(n.title=t.title);const r={type:"element",tagName:"a",properties:n,children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function vBe(e,t,n){const r=e.all(t),s=n?xBe(n):Xie(t),a={},c=[];if(typeof t.checked=="boolean"){const y=r[0];let b;y&&y.type==="element"&&y.tagName==="p"?b=y:(b={type:"element",tagName:"p",properties:{},children:[]},r.unshift(b)),b.children.length>0&&b.children.unshift({type:"text",value:" "}),b.children.unshift({type:"element",tagName:"input",properties:{type:"checkbox",checked:t.checked,disabled:!0},children:[]}),a.className=["task-list-item"]}let i=-1;for(;++i<r.length;){const y=r[i];(s||i!==0||y.type!=="element"||y.tagName!=="p")&&c.push({type:"text",value:`
`}),y.type==="element"&&y.tagName==="p"&&!s?c.push(...y.children):c.push(y)}const f=r[r.length-1];f&&(s||f.type!=="element"||f.tagName!=="p")&&c.push({type:"text",value:`
`});const g={type:"element",tagName:"li",properties:a,children:c};return e.patch(t,g),e.applyData(t,g)}function xBe(e){let t=!1;if(e.type==="list"){t=e.spread||!1;const n=e.children;let r=-1;for(;!t&&++r<n.length;)t=Xie(n[r])}return t}function Xie(e){return e.spread??e.children.length>1}function _Be(e,t){const n={},r=e.all(t);let s=-1;for(typeof t.start=="number"&&t.start!==1&&(n.start=t.start);++s<r.length;){const c=r[s];if(c.type==="element"&&c.tagName==="li"&&c.properties&&Array.isArray(c.properties.className)&&c.properties.className.includes("task-list-item")){n.className=["contains-task-list"];break}}const a={type:"element",tagName:t.ordered?"ol":"ul",properties:n,children:e.wrap(r,!0)};return e.patch(t,a),e.applyData(t,a)}function wBe(e,t){const n={type:"element",tagName:"p",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function bBe(e,t){const n={type:"root",children:e.wrap(e.all(t))};return e.patch(t,n),e.applyData(t,n)}function CBe(e,t){const n={type:"element",tagName:"strong",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}function SBe(e,t){const n=e.all(t),r=n.shift(),s=[];if(r){const c={type:"element",tagName:"thead",properties:{},children:e.wrap([r],!0)};e.patch(t.children[0],c),s.push(c)}if(n.length>0){const c={type:"element",tagName:"tbody",properties:{},children:e.wrap(n,!0)},i=rz(t.children[1]),f=jie(t.children[t.children.length-1]);i&&f&&(c.position={start:i,end:f}),s.push(c)}const a={type:"element",tagName:"table",properties:{},children:e.wrap(s,!0)};return e.patch(t,a),e.applyData(t,a)}function BBe(e,t,n){const r=n?n.children:void 0,s=(r?r.indexOf(t):1)===0?"th":"td",a=n&&n.type==="table"?n.align:void 0,c=a?a.length:t.children.length;let i=-1;const f=[];for(;++i<c;){const y=t.children[i],b={},T=a?a[i]:void 0;T&&(b.align=T);let S={type:"element",tagName:s,properties:b,children:[]};y&&(S.children=e.all(y),e.patch(y,S),S=e.applyData(y,S)),f.push(S)}const g={type:"element",tagName:"tr",properties:{},children:e.wrap(f,!0)};return e.patch(t,g),e.applyData(t,g)}function EBe(e,t){const n={type:"element",tagName:"td",properties:{},children:e.all(t)};return e.patch(t,n),e.applyData(t,n)}const qG=9,ZG=32;function TBe(e){const t=String(e),n=/\r?\n|\r/g;let r=n.exec(t),s=0;const a=[];for(;r;)a.push(XG(t.slice(s,r.index),s>0,!0),r[0]),s=r.index+r[0].length,r=n.exec(t);return a.push(XG(t.slice(s),s>0,!1)),a.join("")}function XG(e,t,n){let r=0,s=e.length;if(t){let a=e.codePointAt(r);for(;a===qG||a===ZG;)r++,a=e.codePointAt(r)}if(n){let a=e.codePointAt(s-1);for(;a===qG||a===ZG;)s--,a=e.codePointAt(s-1)}return s>r?e.slice(r,s):""}function IBe(e,t){const n={type:"text",value:TBe(String(t.value))};return e.patch(t,n),e.applyData(t,n)}function jBe(e,t){const n={type:"element",tagName:"hr",properties:{},children:[]};return e.patch(t,n),e.applyData(t,n)}const FBe={blockquote:oBe,break:aBe,code:lBe,delete:cBe,emphasis:uBe,footnoteReference:dBe,heading:hBe,html:fBe,imageReference:pBe,image:ABe,inlineCode:mBe,linkReference:gBe,link:yBe,listItem:vBe,list:_Be,paragraph:wBe,root:bBe,strong:CBe,table:SBe,tableCell:EBe,tableRow:BBe,text:IBe,thematicBreak:jBe,toml:y3,yaml:y3,definition:y3,footnoteDefinition:y3};function y3(){}const Yie=-1,ZF=0,yj=1,vj=2,uz=3,dz=4,hz=5,fz=6,Jie=7,ese=8,YG=typeof self=="object"?self:globalThis,PBe=(e,t)=>{const n=(s,a)=>(e.set(a,s),s),r=s=>{if(e.has(s))return e.get(s);const[a,c]=t[s];switch(a){case ZF:case Yie:return n(c,s);case yj:{const i=n([],s);for(const f of c)i.push(r(f));return i}case vj:{const i=n({},s);for(const[f,g]of c)i[r(f)]=r(g);return i}case uz:return n(new Date(c),s);case dz:{const{source:i,flags:f}=c;return n(new RegExp(i,f),s)}case hz:{const i=n(new Map,s);for(const[f,g]of c)i.set(r(f),r(g));return i}case fz:{const i=n(new Set,s);for(const f of c)i.add(r(f));return i}case Jie:{const{name:i,message:f}=c;return n(new YG[i](f),s)}case ese:return n(BigInt(c),s);case"BigInt":return n(Object(BigInt(c)),s)}return n(new YG[a](c),s)};return r},JG=e=>PBe(new Map,e)(0),Z_="",{toString:kBe}={},{keys:LBe}=Object,S2=e=>{const t=typeof e;if(t!=="object"||!e)return[ZF,t];const n=kBe.call(e).slice(8,-1);switch(n){case"Array":return[yj,Z_];case"Object":return[vj,Z_];case"Date":return[uz,Z_];case"RegExp":return[dz,Z_];case"Map":return[hz,Z_];case"Set":return[fz,Z_]}return n.includes("Array")?[yj,n]:n.includes("Error")?[Jie,n]:[vj,n]},v3=([e,t])=>e===ZF&&(t==="function"||t==="symbol"),MBe=(e,t,n,r)=>{const s=(c,i)=>{const f=r.push(c)-1;return n.set(i,f),f},a=c=>{if(n.has(c))return n.get(c);let[i,f]=S2(c);switch(i){case ZF:{let y=c;switch(f){case"bigint":i=ese,y=c.toString();break;case"function":case"symbol":if(e)throw new TypeError("unable to serialize "+f);y=null;break;case"undefined":return s([Yie],c)}return s([i,y],c)}case yj:{if(f)return s([f,[...c]],c);const y=[],b=s([i,y],c);for(const T of c)y.push(a(T));return b}case vj:{if(f)switch(f){case"BigInt":return s([f,c.toString()],c);case"Boolean":case"Number":case"String":return s([f,c.valueOf()],c)}if(t&&"toJSON"in c)return a(c.toJSON());const y=[],b=s([i,y],c);for(const T of LBe(c))(e||!v3(S2(c[T])))&&y.push([a(T),a(c[T])]);return b}case uz:return s([i,c.toISOString()],c);case dz:{const{source:y,flags:b}=c;return s([i,{source:y,flags:b}],c)}case hz:{const y=[],b=s([i,y],c);for(const[T,S]of c)(e||!(v3(S2(T))||v3(S2(S))))&&y.push([a(T),a(S)]);return b}case fz:{const y=[],b=s([i,y],c);for(const T of c)(e||!v3(S2(T)))&&y.push(a(T));return b}}const{message:g}=c;return s([i,{name:f,message:g}],c)};return a},eK=(e,{json:t,lossy:n}={})=>{const r=[];return MBe(!(t||n),!!t,new Map,r)(e),r},xj=typeof structuredClone=="function"?(e,t)=>t&&("json"in t||"lossy"in t)?JG(eK(e,t)):structuredClone(e):(e,t)=>JG(eK(e,t));function NBe(e,t){const n=[{type:"text",value:"↩"}];return t>1&&n.push({type:"element",tagName:"sup",properties:{},children:[{type:"text",value:String(t)}]}),n}function RBe(e,t){return"Back to reference "+(e+1)+(t>1?"-"+t:"")}function OBe(e){const t=typeof e.options.clobberPrefix=="string"?e.options.clobberPrefix:"user-content-",n=e.options.footnoteBackContent||NBe,r=e.options.footnoteBackLabel||RBe,s=e.options.footnoteLabel||"Footnotes",a=e.options.footnoteLabelTagName||"h2",c=e.options.footnoteLabelProperties||{className:["sr-only"]},i=[];let f=-1;for(;++f<e.footnoteOrder.length;){const g=e.footnoteById.get(e.footnoteOrder[f]);if(!g)continue;const y=e.all(g),b=String(g.identifier).toUpperCase(),T=qw(b.toLowerCase());let S=0;const U=[],N=e.footnoteCounts.get(b);for(;N!==void 0&&++S<=N;){U.length>0&&U.push({type:"text",value:" "});let Q=typeof n=="string"?n:n(f,S);typeof Q=="string"&&(Q={type:"text",value:Q}),U.push({type:"element",tagName:"a",properties:{href:"#"+t+"fnref-"+T+(S>1?"-"+S:""),dataFootnoteBackref:"",ariaLabel:typeof r=="string"?r:r(f,S),className:["data-footnote-backref"]},children:Array.isArray(Q)?Q:[Q]})}const W=y[y.length-1];if(W&&W.type==="element"&&W.tagName==="p"){const Q=W.children[W.children.length-1];Q&&Q.type==="text"?Q.value+=" ":W.children.push({type:"text",value:" "}),W.children.push(...U)}else y.push(...U);const L={type:"element",tagName:"li",properties:{id:t+"fn-"+T},children:e.wrap(y,!0)};e.patch(g,L),i.push(L)}if(i.length!==0)return{type:"element",tagName:"section",properties:{dataFootnotes:!0,className:["footnotes"]},children:[{type:"element",tagName:a,properties:{...xj(c),id:"footnote-label"},children:[{type:"text",value:s}]},{type:"text",value:`
`},{type:"element",tagName:"ol",properties:{},children:e.wrap(i,!0)},{type:"text",value:`
`}]}}const XF=function(e){if(e==null)return QBe;if(typeof e=="function")return YF(e);if(typeof e=="object")return Array.isArray(e)?DBe(e):UBe(e);if(typeof e=="string")return zBe(e);throw new Error("Expected function, string, or object as test")};function DBe(e){const t=[];let n=-1;for(;++n<e.length;)t[n]=XF(e[n]);return YF(r);function r(...s){let a=-1;for(;++a<t.length;)if(t[a].apply(this,s))return!0;return!1}}function UBe(e){const t=e;return YF(n);function n(r){const s=r;let a;for(a in e)if(s[a]!==t[a])return!1;return!0}}function zBe(e){return YF(t);function t(n){return n&&n.type===e}}function YF(e){return t;function t(n,r,s){return!!(HBe(n)&&e.call(this,n,typeof r=="number"?r:void 0,s||void 0))}}function QBe(){return!0}function HBe(e){return e!==null&&typeof e=="object"&&"type"in e}const tse=[],VBe=!0,rD=!1,$Be="skip";function nse(e,t,n,r){let s;typeof t=="function"&&typeof n!="function"?(r=n,n=t):s=t;const a=XF(s),c=r?-1:1;i(e,void 0,[])();function i(f,g,y){const b=f&&typeof f=="object"?f:{};if(typeof b.type=="string"){const S=typeof b.tagName=="string"?b.tagName:typeof b.name=="string"?b.name:void 0;Object.defineProperty(T,"name",{value:"node ("+(f.type+(S?"<"+S+">":""))+")"})}return T;function T(){let S=tse,U,N,W;if((!t||a(f,g,y[y.length-1]||void 0))&&(S=GBe(n(f,y)),S[0]===rD))return S;if("children"in f&&f.children){const L=f;if(L.children&&S[0]!==$Be)for(N=(r?L.children.length:-1)+c,W=y.concat(L);N>-1&&N<L.children.length;){const Q=L.children[N];if(U=i(Q,N,W)(),U[0]===rD)return U;N=typeof U[1]=="number"?U[1]:N+c}}return S}}}function GBe(e){return Array.isArray(e)?e:typeof e=="number"?[VBe,e]:e==null?tse:[e]}function pz(e,t,n,r){let s,a,c;typeof t=="function"&&typeof n!="function"?(a=void 0,c=t,s=n):(a=t,c=n,s=r),nse(e,a,i,s);function i(f,g){const y=g[g.length-1],b=y?y.children.indexOf(f):void 0;return c(f,b,y)}}const iD={}.hasOwnProperty,KBe={};function WBe(e,t){const n=t||KBe,r=new Map,s=new Map,a=new Map,c={...FBe,...n.handlers},i={all:g,applyData:ZBe,definitionById:r,footnoteById:s,footnoteCounts:a,footnoteOrder:[],handlers:c,one:f,options:n,patch:qBe,wrap:YBe};return pz(e,function(y){if(y.type==="definition"||y.type==="footnoteDefinition"){const b=y.type==="definition"?r:s,T=String(y.identifier).toUpperCase();b.has(T)||b.set(T,y)}}),i;function f(y,b){const T=y.type,S=i.handlers[T];if(iD.call(i.handlers,T)&&S)return S(i,y,b);if(i.options.passThrough&&i.options.passThrough.includes(T)){if("children"in y){const{children:U,...N}=y,W=xj(N);return W.children=i.all(y),W}return xj(y)}return(i.options.unknownHandler||XBe)(i,y,b)}function g(y){const b=[];if("children"in y){const T=y.children;let S=-1;for(;++S<T.length;){const U=i.one(T[S],y);if(U){if(S&&T[S-1].type==="break"&&(!Array.isArray(U)&&U.type==="text"&&(U.value=tK(U.value)),!Array.isArray(U)&&U.type==="element")){const N=U.children[0];N&&N.type==="text"&&(N.value=tK(N.value))}Array.isArray(U)?b.push(...U):b.push(U)}}}return b}}function qBe(e,t){e.position&&(t.position=M2e(e))}function ZBe(e,t){let n=t;if(e&&e.data){const r=e.data.hName,s=e.data.hChildren,a=e.data.hProperties;if(typeof r=="string")if(n.type==="element")n.tagName=r;else{const c="children"in n?n.children:[n];n={type:"element",tagName:r,properties:{},children:c}}n.type==="element"&&a&&Object.assign(n.properties,xj(a)),"children"in n&&n.children&&s!==null&&s!==void 0&&(n.children=s)}return n}function XBe(e,t){const n=t.data||{},r="value"in t&&!(iD.call(n,"hProperties")||iD.call(n,"hChildren"))?{type:"text",value:t.value}:{type:"element",tagName:"div",properties:{},children:e.all(t)};return e.patch(t,r),e.applyData(t,r)}function YBe(e,t){const n=[];let r=-1;for(t&&n.push({type:"text",value:`
`});++r<e.length;)r&&n.push({type:"text",value:`
`}),n.push(e[r]);return t&&e.length>0&&n.push({type:"text",value:`
`}),n}function tK(e){let t=0,n=e.charCodeAt(t);for(;n===9||n===32;)t++,n=e.charCodeAt(t);return e.slice(t)}function nK(e,t){const n=WBe(e,t),r=n.one(e,void 0),s=OBe(n),a=Array.isArray(r)?{type:"root",children:r}:r||{type:"root",children:[]};return s&&a.children.push({type:"text",value:`
`},s),a}function JBe(e,t){return e&&"run"in e?async function(n,r){const s=nK(n,{file:r,...t});await e.run(s,r)}:function(n,r){return nK(n,{file:r,...e||t})}}function rK(e){if(e)throw e}var $T=Object.prototype.hasOwnProperty,rse=Object.prototype.toString,iK=Object.defineProperty,sK=Object.getOwnPropertyDescriptor,oK=function(e){return typeof Array.isArray=="function"?Array.isArray(e):rse.call(e)==="[object Array]"},aK=function(e){if(!e||rse.call(e)!=="[object Object]")return!1;var t=$T.call(e,"constructor"),n=e.constructor&&e.constructor.prototype&&$T.call(e.constructor.prototype,"isPrototypeOf");if(e.constructor&&!t&&!n)return!1;var r;for(r in e);return typeof r>"u"||$T.call(e,r)},lK=function(e,t){iK&&t.name==="__proto__"?iK(e,t.name,{enumerable:!0,configurable:!0,value:t.newValue,writable:!0}):e[t.name]=t.newValue},cK=function(e,t){if(t==="__proto__")if($T.call(e,t)){if(sK)return sK(e,t).value}else return;return e[t]},eEe=function e(){var t,n,r,s,a,c,i=arguments[0],f=1,g=arguments.length,y=!1;for(typeof i=="boolean"&&(y=i,i=arguments[1]||{},f=2),(i==null||typeof i!="object"&&typeof i!="function")&&(i={});f<g;++f)if(t=arguments[f],t!=null)for(n in t)r=cK(i,n),s=cK(t,n),i!==s&&(y&&s&&(aK(s)||(a=oK(s)))?(a?(a=!1,c=r&&oK(r)?r:[]):c=r&&aK(r)?r:{},lK(i,{name:n,newValue:e(y,c,s)})):typeof s<"u"&&lK(i,{name:n,newValue:s}));return i};const $M=uo(eEe);function sD(e){if(typeof e!="object"||e===null)return!1;const t=Object.getPrototypeOf(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)}function tEe(){const e=[],t={run:n,use:r};return t;function n(...s){let a=-1;const c=s.pop();if(typeof c!="function")throw new TypeError("Expected function as last argument, not "+c);i(null,...s);function i(f,...g){const y=e[++a];let b=-1;if(f){c(f);return}for(;++b<s.length;)(g[b]===null||g[b]===void 0)&&(g[b]=s[b]);s=g,y?nEe(y,i)(...g):c(null,...g)}}function r(s){if(typeof s!="function")throw new TypeError("Expected `middelware` to be a function, not "+s);return e.push(s),t}}function nEe(e,t){let n;return r;function r(...c){const i=e.length>c.length;let f;i&&c.push(s);try{f=e.apply(this,c)}catch(g){const y=g;if(i&&n)throw y;return s(y)}i||(f&&f.then&&typeof f.then=="function"?f.then(a,s):f instanceof Error?s(f):a(f))}function s(c,...i){n||(n=!0,t(c,...i))}function a(c){s(null,c)}}const Dm={basename:rEe,dirname:iEe,extname:sEe,join:oEe,sep:"/"};function rEe(e,t){if(t!==void 0&&typeof t!="string")throw new TypeError('"ext" argument must be a string');BB(e);let n=0,r=-1,s=e.length,a;if(t===void 0||t.length===0||t.length>e.length){for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else r<0&&(a=!0,r=s+1);return r<0?"":e.slice(n,r)}if(t===e)return"";let c=-1,i=t.length-1;for(;s--;)if(e.codePointAt(s)===47){if(a){n=s+1;break}}else c<0&&(a=!0,c=s+1),i>-1&&(e.codePointAt(s)===t.codePointAt(i--)?i<0&&(r=s):(i=-1,r=c));return n===r?r=c:r<0&&(r=e.length),e.slice(n,r)}function iEe(e){if(BB(e),e.length===0)return".";let t=-1,n=e.length,r;for(;--n;)if(e.codePointAt(n)===47){if(r){t=n;break}}else r||(r=!0);return t<0?e.codePointAt(0)===47?"/":".":t===1&&e.codePointAt(0)===47?"//":e.slice(0,t)}function sEe(e){BB(e);let t=e.length,n=-1,r=0,s=-1,a=0,c;for(;t--;){const i=e.codePointAt(t);if(i===47){if(c){r=t+1;break}continue}n<0&&(c=!0,n=t+1),i===46?s<0?s=t:a!==1&&(a=1):s>-1&&(a=-1)}return s<0||n<0||a===0||a===1&&s===n-1&&s===r+1?"":e.slice(s,n)}function oEe(...e){let t=-1,n;for(;++t<e.length;)BB(e[t]),e[t]&&(n=n===void 0?e[t]:n+"/"+e[t]);return n===void 0?".":aEe(n)}function aEe(e){BB(e);const t=e.codePointAt(0)===47;let n=lEe(e,!t);return n.length===0&&!t&&(n="."),n.length>0&&e.codePointAt(e.length-1)===47&&(n+="/"),t?"/"+n:n}function lEe(e,t){let n="",r=0,s=-1,a=0,c=-1,i,f;for(;++c<=e.length;){if(c<e.length)i=e.codePointAt(c);else{if(i===47)break;i=47}if(i===47){if(!(s===c-1||a===1))if(s!==c-1&&a===2){if(n.length<2||r!==2||n.codePointAt(n.length-1)!==46||n.codePointAt(n.length-2)!==46){if(n.length>2){if(f=n.lastIndexOf("/"),f!==n.length-1){f<0?(n="",r=0):(n=n.slice(0,f),r=n.length-1-n.lastIndexOf("/")),s=c,a=0;continue}}else if(n.length>0){n="",r=0,s=c,a=0;continue}}t&&(n=n.length>0?n+"/..":"..",r=2)}else n.length>0?n+="/"+e.slice(s+1,c):n=e.slice(s+1,c),r=c-s-1;s=c,a=0}else i===46&&a>-1?a++:a=-1}return n}function BB(e){if(typeof e!="string")throw new TypeError("Path must be a string. Received "+JSON.stringify(e))}const cEe={cwd:uEe};function uEe(){return"/"}function oD(e){return!!(e!==null&&typeof e=="object"&&"href"in e&&e.href&&"protocol"in e&&e.protocol&&e.auth===void 0)}function dEe(e){if(typeof e=="string")e=new URL(e);else if(!oD(e)){const t=new TypeError('The "path" argument must be of type string or an instance of URL. Received `'+e+"`");throw t.code="ERR_INVALID_ARG_TYPE",t}if(e.protocol!=="file:"){const t=new TypeError("The URL must be of scheme file");throw t.code="ERR_INVALID_URL_SCHEME",t}return hEe(e)}function hEe(e){if(e.hostname!==""){const r=new TypeError('File URL host must be "localhost" or empty on darwin');throw r.code="ERR_INVALID_FILE_URL_HOST",r}const t=e.pathname;let n=-1;for(;++n<t.length;)if(t.codePointAt(n)===37&&t.codePointAt(n+1)===50){const r=t.codePointAt(n+2);if(r===70||r===102){const s=new TypeError("File URL path must not include encoded / characters");throw s.code="ERR_INVALID_FILE_URL_PATH",s}}return decodeURIComponent(t)}const GM=["history","path","basename","stem","extname","dirname"];class ise{constructor(t){let n;t?oD(t)?n={path:t}:typeof t=="string"||fEe(t)?n={value:t}:n=t:n={},this.cwd="cwd"in n?"":cEe.cwd(),this.data={},this.history=[],this.messages=[],this.value,this.map,this.result,this.stored;let r=-1;for(;++r<GM.length;){const a=GM[r];a in n&&n[a]!==void 0&&n[a]!==null&&(this[a]=a==="history"?[...n[a]]:n[a])}let s;for(s in n)GM.includes(s)||(this[s]=n[s])}get basename(){return typeof this.path=="string"?Dm.basename(this.path):void 0}set basename(t){WM(t,"basename"),KM(t,"basename"),this.path=Dm.join(this.dirname||"",t)}get dirname(){return typeof this.path=="string"?Dm.dirname(this.path):void 0}set dirname(t){uK(this.basename,"dirname"),this.path=Dm.join(t||"",this.basename)}get extname(){return typeof this.path=="string"?Dm.extname(this.path):void 0}set extname(t){if(KM(t,"extname"),uK(this.dirname,"extname"),t){if(t.codePointAt(0)!==46)throw new Error("`extname` must start with `.`");if(t.includes(".",1))throw new Error("`extname` cannot contain multiple dots")}this.path=Dm.join(this.dirname,this.stem+(t||""))}get path(){return this.history[this.history.length-1]}set path(t){oD(t)&&(t=dEe(t)),WM(t,"path"),this.path!==t&&this.history.push(t)}get stem(){return typeof this.path=="string"?Dm.basename(this.path,this.extname):void 0}set stem(t){WM(t,"stem"),KM(t,"stem"),this.path=Dm.join(this.dirname||"",t+(this.extname||""))}fail(t,n,r){const s=this.message(t,n,r);throw s.fatal=!0,s}info(t,n,r){const s=this.message(t,n,r);return s.fatal=void 0,s}message(t,n,r){const s=new Md(t,n,r);return this.path&&(s.name=this.path+":"+s.name,s.file=this.path),s.fatal=!1,this.messages.push(s),s}toString(t){return this.value===void 0?"":typeof this.value=="string"?this.value:new TextDecoder(t||void 0).decode(this.value)}}function KM(e,t){if(e&&e.includes(Dm.sep))throw new Error("`"+t+"` cannot be a path: did not expect `"+Dm.sep+"`")}function WM(e,t){if(!e)throw new Error("`"+t+"` cannot be empty")}function uK(e,t){if(!e)throw new Error("Setting `"+t+"` requires `path` to be set too")}function fEe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const pEe=function(e){const t=this.constructor.prototype,n=t[e],r=function(){return n.apply(r,arguments)};return Object.setPrototypeOf(r,t),r},AEe={}.hasOwnProperty;class Az extends pEe{constructor(){super("copy"),this.Compiler=void 0,this.Parser=void 0,this.attachers=[],this.compiler=void 0,this.freezeIndex=-1,this.frozen=void 0,this.namespace={},this.parser=void 0,this.transformers=tEe()}copy(){const t=new Az;let n=-1;for(;++n<this.attachers.length;){const r=this.attachers[n];t.use(...r)}return t.data($M(!0,{},this.namespace)),t}data(t,n){return typeof t=="string"?arguments.length===2?(XM("data",this.frozen),this.namespace[t]=n,this):AEe.call(this.namespace,t)&&this.namespace[t]||void 0:t?(XM("data",this.frozen),this.namespace=t,this):this.namespace}freeze(){if(this.frozen)return this;const t=this;for(;++this.freezeIndex<this.attachers.length;){const[n,...r]=this.attachers[this.freezeIndex];if(r[0]===!1)continue;r[0]===!0&&(r[0]=void 0);const s=n.call(t,...r);typeof s=="function"&&this.transformers.use(s)}return this.frozen=!0,this.freezeIndex=Number.POSITIVE_INFINITY,this}parse(t){this.freeze();const n=x3(t),r=this.parser||this.Parser;return qM("parse",r),r(String(n),n)}process(t,n){const r=this;return this.freeze(),qM("process",this.parser||this.Parser),ZM("process",this.compiler||this.Compiler),n?s(void 0,n):new Promise(s);function s(a,c){const i=x3(t),f=r.parse(i);r.run(f,i,function(y,b,T){if(y||!b||!T)return g(y);const S=b,U=r.stringify(S,T);yEe(U)?T.value=U:T.result=U,g(y,T)});function g(y,b){y||!b?c(y):a?a(b):n(void 0,b)}}}processSync(t){let n=!1,r;return this.freeze(),qM("processSync",this.parser||this.Parser),ZM("processSync",this.compiler||this.Compiler),this.process(t,s),hK("processSync","process",n),r;function s(a,c){n=!0,rK(a),r=c}}run(t,n,r){dK(t),this.freeze();const s=this.transformers;return!r&&typeof n=="function"&&(r=n,n=void 0),r?a(void 0,r):new Promise(a);function a(c,i){const f=x3(n);s.run(t,f,g);function g(y,b,T){const S=b||t;y?i(y):c?c(S):r(void 0,S,T)}}}runSync(t,n){let r=!1,s;return this.run(t,n,a),hK("runSync","run",r),s;function a(c,i){rK(c),s=i,r=!0}}stringify(t,n){this.freeze();const r=x3(n),s=this.compiler||this.Compiler;return ZM("stringify",s),dK(t),s(t,r)}use(t,...n){const r=this.attachers,s=this.namespace;if(XM("use",this.frozen),t!=null)if(typeof t=="function")f(t,n);else if(typeof t=="object")Array.isArray(t)?i(t):c(t);else throw new TypeError("Expected usable value, not `"+t+"`");return this;function a(g){if(typeof g=="function")f(g,[]);else if(typeof g=="object")if(Array.isArray(g)){const[y,...b]=g;f(y,b)}else c(g);else throw new TypeError("Expected usable value, not `"+g+"`")}function c(g){if(!("plugins"in g)&&!("settings"in g))throw new Error("Expected usable value but received an empty preset, which is probably a mistake: presets typically come with `plugins` and sometimes with `settings`, but this has neither");i(g.plugins),g.settings&&(s.settings=$M(!0,s.settings,g.settings))}function i(g){let y=-1;if(g!=null)if(Array.isArray(g))for(;++y<g.length;){const b=g[y];a(b)}else throw new TypeError("Expected a list of plugins, not `"+g+"`")}function f(g,y){let b=-1,T=-1;for(;++b<r.length;)if(r[b][0]===g){T=b;break}if(T===-1)r.push([g,...y]);else if(y.length>0){let[S,...U]=y;const N=r[T][1];sD(N)&&sD(S)&&(S=$M(!0,N,S)),r[T]=[g,S,...U]}}}}const mEe=new Az().freeze();function qM(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `parser`")}function ZM(e,t){if(typeof t!="function")throw new TypeError("Cannot `"+e+"` without `compiler`")}function XM(e,t){if(t)throw new Error("Cannot call `"+e+"` on a frozen processor.\nCreate a new processor first, by calling it: use `processor()` instead of `processor`.")}function dK(e){if(!sD(e)||typeof e.type!="string")throw new TypeError("Expected node, got `"+e+"`")}function hK(e,t,n){if(!n)throw new Error("`"+e+"` finished async. Use `"+t+"` instead")}function x3(e){return gEe(e)?e:new ise(e)}function gEe(e){return!!(e&&typeof e=="object"&&"message"in e&&"messages"in e)}function yEe(e){return typeof e=="string"||vEe(e)}function vEe(e){return!!(e&&typeof e=="object"&&"byteLength"in e&&"byteOffset"in e)}const xEe="https://github.com/remarkjs/react-markdown/blob/main/changelog.md",fK=[],pK={allowDangerousHtml:!0},_Ee=/^(https?|ircs?|mailto|xmpp)$/i,wEe=[{from:"astPlugins",id:"remove-buggy-html-in-markdown-parser"},{from:"allowDangerousHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"allowNode",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowElement"},{from:"allowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"allowedElements"},{from:"disallowedTypes",id:"replace-allownode-allowedtypes-and-disallowedtypes",to:"disallowedElements"},{from:"escapeHtml",id:"remove-buggy-html-in-markdown-parser"},{from:"includeElementIndex",id:"#remove-includeelementindex"},{from:"includeNodeIndex",id:"change-includenodeindex-to-includeelementindex"},{from:"linkTarget",id:"remove-linktarget"},{from:"plugins",id:"change-plugins-to-remarkplugins",to:"remarkPlugins"},{from:"rawSourcePos",id:"#remove-rawsourcepos"},{from:"renderers",id:"change-renderers-to-components",to:"components"},{from:"source",id:"change-source-to-children",to:"children"},{from:"sourcePos",id:"#remove-sourcepos"},{from:"transformImageUri",id:"#add-urltransform",to:"urlTransform"},{from:"transformLinkUri",id:"#add-urltransform",to:"urlTransform"}];function bEe(e){const t=e.allowedElements,n=e.allowElement,r=e.children||"",s=e.className,a=e.components,c=e.disallowedElements,i=e.rehypePlugins||fK,f=e.remarkPlugins||fK,g=e.remarkRehypeOptions?{...e.remarkRehypeOptions,...pK}:pK,y=e.skipHtml,b=e.unwrapDisallowed,T=e.urlTransform||sse,S=mEe().use(sBe).use(f).use(JBe,g).use(i),U=new ise;typeof r=="string"&&(U.value=r);for(const Q of wEe)Object.hasOwn(e,Q.from)&&""+Q.from+(Q.to?"use `"+Q.to+"` instead":"remove it")+xEe+Q.id;const N=S.parse(U);let W=S.runSync(N,U);return s&&(W={type:"element",tagName:"div",properties:{className:s},children:W.type==="root"?W.children:[W]}),pz(W,L),z2e(W,{Fragment:zt.Fragment,components:a,ignoreInvalidStyle:!0,jsx:zt.jsx,jsxs:zt.jsxs,passKeys:!0,passNode:!0});function L(Q,V,Z){if(Q.type==="raw"&&Z&&typeof V=="number")return y?Z.children.splice(V,1):Z.children[V]={type:"text",value:Q.value},V;if(Q.type==="element"){let ne;for(ne in QM)if(Object.hasOwn(QM,ne)&&Object.hasOwn(Q.properties,ne)){const Y=Q.properties[ne],le=QM[ne];(le===null||le.includes(Q.tagName))&&(Q.properties[ne]=T(String(Y||""),ne,Q))}}if(Q.type==="element"){let ne=t?!t.includes(Q.tagName):c?c.includes(Q.tagName):!1;if(!ne&&n&&typeof V=="number"&&(ne=!n(Q,V,Z)),ne&&Z&&typeof V=="number")return b&&Q.children?Z.children.splice(V,1,...Q.children):Z.children.splice(V,1),V}}}function sse(e){const t=e.indexOf(":"),n=e.indexOf("?"),r=e.indexOf("#"),s=e.indexOf("/");return t<0||s>-1&&t>s||n>-1&&t>n||r>-1&&t>r||_Ee.test(e.slice(0,t))?e:""}function CEe(e){if(typeof e!="string")throw new TypeError("Expected a string");return e.replace(/[|\\{}()[\]^$+*?.]/g,"\\$&").replace(/-/g,"\\x2d")}function ose(e,t,n){const r=XF((n||{}).ignore||[]),s=SEe(t);let a=-1;for(;++a<s.length;)nse(e,"text",c);function c(f,g){let y=-1,b;for(;++y<g.length;){const T=g[y],S=b?b.children:void 0;if(r(T,S?S.indexOf(T):void 0,b))return;b=T}if(b)return i(f,g)}function i(f,g){const y=g[g.length-1],b=s[a][0],T=s[a][1];let S=0;const U=y.children.indexOf(f);let N=!1,W=[];b.lastIndex=0;let L=b.exec(f.value);for(;L;){const Q=L.index,V={index:L.index,input:L.input,stack:[...g,f]};let Z=T(...L,V);if(typeof Z=="string"&&(Z=Z.length>0?{type:"text",value:Z}:void 0),Z===!1?b.lastIndex=Q+1:(S!==Q&&W.push({type:"text",value:f.value.slice(S,Q)}),Array.isArray(Z)?W.push(...Z):Z&&W.push(Z),S=Q+L[0].length,N=!0),!b.global)break;L=b.exec(f.value)}return N?(S<f.value.length&&W.push({type:"text",value:f.value.slice(S)}),y.children.splice(U,1,...W)):W=[f],U+W.length}}function SEe(e){const t=[];if(!Array.isArray(e))throw new TypeError("Expected find and replace tuple or list of tuples");const n=!e[0]||Array.isArray(e[0])?e:[e];let r=-1;for(;++r<n.length;){const s=n[r];t.push([BEe(s[0]),EEe(s[1])])}return t}function BEe(e){return typeof e=="string"?new RegExp(CEe(e),"g"):e}function EEe(e){return typeof e=="function"?e:function(){return e}}function TEe(e){ose(e,[/\r?\n|\r/g,IEe])}function IEe(){return{type:"break"}}function jEe(){return function(e){TEe(e)}}function AK(e,t){const n=String(e);if(typeof t!="string")throw new TypeError("Expected character");let r=0,s=n.indexOf(t);for(;s!==-1;)r++,s=n.indexOf(t,s+t.length);return r}const YM="phrasing",JM=["autolink","link","image","label"];function FEe(){return{transforms:[OEe],enter:{literalAutolink:kEe,literalAutolinkEmail:eN,literalAutolinkHttp:eN,literalAutolinkWww:eN},exit:{literalAutolink:REe,literalAutolinkEmail:NEe,literalAutolinkHttp:LEe,literalAutolinkWww:MEe}}}function PEe(){return{unsafe:[{character:"@",before:"[+\\-.\\w]",after:"[\\-.\\w]",inConstruct:YM,notInConstruct:JM},{character:".",before:"[Ww]",after:"[\\-.\\w]",inConstruct:YM,notInConstruct:JM},{character:":",before:"[ps]",after:"\\/",inConstruct:YM,notInConstruct:JM}]}}function kEe(e){this.enter({type:"link",title:null,url:"",children:[]},e)}function eN(e){this.config.enter.autolinkProtocol.call(this,e)}function LEe(e){this.config.exit.autolinkProtocol.call(this,e)}function MEe(e){this.config.exit.data.call(this,e);const t=this.stack[this.stack.length-1];t.type,t.url="http://"+this.sliceSerialize(e)}function NEe(e){this.config.exit.autolinkEmail.call(this,e)}function REe(e){this.exit(e)}function OEe(e){ose(e,[[/(https?:\/\/|www(?=\.))([-.\w]+)([^ \t\r\n]*)/gi,DEe],[new RegExp("(?<=^|\\s|\\p{P}|\\p{S})([-.\\w+]+)@([-\\w]+(?:\\.[-\\w]+)+)","gu"),UEe]],{ignore:["link","linkReference"]})}function DEe(e,t,n,r,s){let a="";if(!ase(s)||(/^w/i.test(t)&&(n=t+n,t="",a="http://"),!zEe(n)))return!1;const c=QEe(n+r);if(!c[0])return!1;const i={type:"link",title:null,url:a+t+c[0],children:[{type:"text",value:t+c[0]}]};return c[1]?[i,{type:"text",value:c[1]}]:i}function UEe(e,t,n,r){return!ase(r,!0)||/[-\d_]$/.test(n)?!1:{type:"link",title:null,url:"mailto:"+t+"@"+n,children:[{type:"text",value:t+"@"+n}]}}function zEe(e){const t=e.split(".");return!(t.length<2||t[t.length-1]&&(/_/.test(t[t.length-1])||!/[a-zA-Z\d]/.test(t[t.length-1]))||t[t.length-2]&&(/_/.test(t[t.length-2])||!/[a-zA-Z\d]/.test(t[t.length-2])))}function QEe(e){const t=/[!"&'),.:;<>?\]}]+$/.exec(e);if(!t)return[e,void 0];e=e.slice(0,t.index);let n=t[0],r=n.indexOf(")");const s=AK(e,"(");let a=AK(e,")");for(;r!==-1&&s>a;)e+=n.slice(0,r+1),n=n.slice(r+1),r=n.indexOf(")"),a++;return[e,n]}function ase(e,t){const n=e.input.charCodeAt(e.index-1);return(e.index===0||Ux(n)||WF(n))&&(!t||n!==47)}lse.peek=JEe;function HEe(){return{enter:{gfmFootnoteDefinition:$Ee,gfmFootnoteDefinitionLabelString:GEe,gfmFootnoteCall:qEe,gfmFootnoteCallString:ZEe},exit:{gfmFootnoteDefinition:WEe,gfmFootnoteDefinitionLabelString:KEe,gfmFootnoteCall:YEe,gfmFootnoteCallString:XEe}}}function VEe(){return{unsafe:[{character:"[",inConstruct:["phrasing","label","reference"]}],handlers:{footnoteDefinition:e4e,footnoteReference:lse}}}function $Ee(e){this.enter({type:"footnoteDefinition",identifier:"",label:"",children:[]},e)}function GEe(){this.buffer()}function KEe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=t,n.identifier=KA(this.sliceSerialize(e)).toLowerCase()}function WEe(e){this.exit(e)}function qEe(e){this.enter({type:"footnoteReference",identifier:"",label:""},e)}function ZEe(){this.buffer()}function XEe(e){const t=this.resume(),n=this.stack[this.stack.length-1];n.type,n.label=t,n.identifier=KA(this.sliceSerialize(e)).toLowerCase()}function YEe(e){this.exit(e)}function lse(e,t,n,r){const s=n.createTracker(r);let a=s.move("[^");const c=n.enter("footnoteReference"),i=n.enter("reference");return a+=s.move(n.safe(n.associationId(e),{...s.current(),before:a,after:"]"})),i(),c(),a+=s.move("]"),a}function JEe(){return"["}function e4e(e,t,n,r){const s=n.createTracker(r);let a=s.move("[^");const c=n.enter("footnoteDefinition"),i=n.enter("label");return a+=s.move(n.safe(n.associationId(e),{...s.current(),before:a,after:"]"})),i(),a+=s.move("]:"+(e.children&&e.children.length>0?" ":"")),s.shift(4),a+=s.move(n.indentLines(n.containerFlow(e,s.current()),t4e)),c(),a}function t4e(e,t,n){return t===0?e:(n?"":"    ")+e}const n4e=["autolink","destinationLiteral","destinationRaw","reference","titleQuote","titleApostrophe"];cse.peek=a4e;function r4e(){return{canContainEols:["delete"],enter:{strikethrough:s4e},exit:{strikethrough:o4e}}}function i4e(){return{unsafe:[{character:"~",inConstruct:"phrasing",notInConstruct:n4e}],handlers:{delete:cse}}}function s4e(e){this.enter({type:"delete",children:[]},e)}function o4e(e){this.exit(e)}function cse(e,t,n,r){const s=n.createTracker(r),a=n.enter("strikethrough");let c=s.move("~~");return c+=n.containerPhrasing(e,{...s.current(),before:c,after:"~"}),c+=s.move("~~"),a(),c}function a4e(){return"~"}function l4e(e){return e.length}function c4e(e,t){const n=t||{},r=(n.align||[]).concat(),s=n.stringLength||l4e,a=[],c=[],i=[],f=[];let g=0,y=-1;for(;++y<e.length;){const N=[],W=[];let L=-1;for(e[y].length>g&&(g=e[y].length);++L<e[y].length;){const Q=u4e(e[y][L]);if(n.alignDelimiters!==!1){const V=s(Q);W[L]=V,(f[L]===void 0||V>f[L])&&(f[L]=V)}N.push(Q)}c[y]=N,i[y]=W}let b=-1;if(typeof r=="object"&&"length"in r)for(;++b<g;)a[b]=mK(r[b]);else{const N=mK(r);for(;++b<g;)a[b]=N}b=-1;const T=[],S=[];for(;++b<g;){const N=a[b];let W="",L="";N===99?(W=":",L=":"):N===108?W=":":N===114&&(L=":");let Q=n.alignDelimiters===!1?1:Math.max(1,f[b]-W.length-L.length);const V=W+"-".repeat(Q)+L;n.alignDelimiters!==!1&&(Q=W.length+Q+L.length,Q>f[b]&&(f[b]=Q),S[b]=Q),T[b]=V}c.splice(1,0,T),i.splice(1,0,S),y=-1;const U=[];for(;++y<c.length;){const N=c[y],W=i[y];b=-1;const L=[];for(;++b<g;){const Q=N[b]||"";let V="",Z="";if(n.alignDelimiters!==!1){const ne=f[b]-(W[b]||0),Y=a[b];Y===114?V=" ".repeat(ne):Y===99?ne%2?(V=" ".repeat(ne/2+.5),Z=" ".repeat(ne/2-.5)):(V=" ".repeat(ne/2),Z=V):Z=" ".repeat(ne)}n.delimiterStart!==!1&&!b&&L.push("|"),n.padding!==!1&&!(n.alignDelimiters===!1&&Q==="")&&(n.delimiterStart!==!1||b)&&L.push(" "),n.alignDelimiters!==!1&&L.push(V),L.push(Q),n.alignDelimiters!==!1&&L.push(Z),n.padding!==!1&&L.push(" "),(n.delimiterEnd!==!1||b!==g-1)&&L.push("|")}U.push(n.delimiterEnd===!1?L.join("").replace(/ +$/,""):L.join(""))}return U.join(`
`)}function u4e(e){return e==null?"":String(e)}function mK(e){const t=typeof e=="string"?e.codePointAt(0):0;return t===67||t===99?99:t===76||t===108?108:t===82||t===114?114:0}function d4e(e,t,n,r){const s=n.enter("blockquote"),a=n.createTracker(r);a.move("> "),a.shift(2);const c=n.indentLines(n.containerFlow(e,a.current()),h4e);return s(),c}function h4e(e,t,n){return">"+(n?"":" ")+e}function f4e(e,t){return gK(e,t.inConstruct,!0)&&!gK(e,t.notInConstruct,!1)}function gK(e,t,n){if(typeof t=="string"&&(t=[t]),!t||t.length===0)return n;let r=-1;for(;++r<t.length;)if(e.includes(t[r]))return!0;return!1}function yK(e,t,n,r){let s=-1;for(;++s<n.unsafe.length;)if(n.unsafe[s].character===`
`&&f4e(n.stack,n.unsafe[s]))return/[ \t]/.test(r.before)?"":" ";return`\\
`}function p4e(e,t){const n=String(e);let r=n.indexOf(t),s=r,a=0,c=0;if(typeof t!="string")throw new TypeError("Expected substring");for(;r!==-1;)r===s?++a>c&&(c=a):a=1,s=r+t.length,r=n.indexOf(t,s);return c}function A4e(e,t){return!!(t.options.fences===!1&&e.value&&!e.lang&&/[^ \r\n]/.test(e.value)&&!/^[\t ]*(?:[\r\n]|$)|(?:^|[\r\n])[\t ]*$/.test(e.value))}function m4e(e){const t=e.options.fence||"`";if(t!=="`"&&t!=="~")throw new Error("Cannot serialize code with `"+t+"` for `options.fence`, expected `` ` `` or `~`");return t}function g4e(e,t,n,r){const s=m4e(n),a=e.value||"",c=s==="`"?"GraveAccent":"Tilde";if(A4e(e,n)){const b=n.enter("codeIndented"),T=n.indentLines(a,y4e);return b(),T}const i=n.createTracker(r),f=s.repeat(Math.max(p4e(a,s)+1,3)),g=n.enter("codeFenced");let y=i.move(f);if(e.lang){const b=n.enter(`codeFencedLang${c}`);y+=i.move(n.safe(e.lang,{before:y,after:" ",encode:["`"],...i.current()})),b()}if(e.lang&&e.meta){const b=n.enter(`codeFencedMeta${c}`);y+=i.move(" "),y+=i.move(n.safe(e.meta,{before:y,after:`
`,encode:["`"],...i.current()})),b()}return y+=i.move(`
`),a&&(y+=i.move(a+`
`)),y+=i.move(f),g(),y}function y4e(e,t,n){return(n?"":"    ")+e}function mz(e){const t=e.options.quote||'"';if(t!=='"'&&t!=="'")throw new Error("Cannot serialize title with `"+t+"` for `options.quote`, expected `\"`, or `'`");return t}function v4e(e,t,n,r){const s=mz(n),a=s==='"'?"Quote":"Apostrophe",c=n.enter("definition");let i=n.enter("label");const f=n.createTracker(r);let g=f.move("[");return g+=f.move(n.safe(n.associationId(e),{before:g,after:"]",...f.current()})),g+=f.move("]: "),i(),!e.url||/[\0- \u007F]/.test(e.url)?(i=n.enter("destinationLiteral"),g+=f.move("<"),g+=f.move(n.safe(e.url,{before:g,after:">",...f.current()})),g+=f.move(">")):(i=n.enter("destinationRaw"),g+=f.move(n.safe(e.url,{before:g,after:e.title?" ":`
`,...f.current()}))),i(),e.title&&(i=n.enter(`title${a}`),g+=f.move(" "+s),g+=f.move(n.safe(e.title,{before:g,after:s,...f.current()})),g+=f.move(s),i()),c(),g}function x4e(e){const t=e.options.emphasis||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize emphasis with `"+t+"` for `options.emphasis`, expected `*`, or `_`");return t}use.peek=_4e;function use(e,t,n,r){const s=x4e(n),a=n.enter("emphasis"),c=n.createTracker(r);let i=c.move(s);return i+=c.move(n.containerPhrasing(e,{before:i,after:s,...c.current()})),i+=c.move(s),a(),i}function _4e(e,t,n){return n.options.emphasis||"*"}function w4e(e,t){let n=!1;return pz(e,function(r){if("value"in r&&/\r?\n|\r/.test(r.value)||r.type==="break")return n=!0,rD}),!!((!e.depth||e.depth<3)&&az(e)&&(t.options.setext||n))}function b4e(e,t,n,r){const s=Math.max(Math.min(6,e.depth||1),1),a=n.createTracker(r);if(w4e(e,n)){const y=n.enter("headingSetext"),b=n.enter("phrasing"),T=n.containerPhrasing(e,{...a.current(),before:`
`,after:`
`});return b(),y(),T+`
`+(s===1?"=":"-").repeat(T.length-(Math.max(T.lastIndexOf("\r"),T.lastIndexOf(`
`))+1))}const c="#".repeat(s),i=n.enter("headingAtx"),f=n.enter("phrasing");a.move(c+" ");let g=n.containerPhrasing(e,{before:"# ",after:`
`,...a.current()});return/^[\t ]/.test(g)&&(g="&#x"+g.charCodeAt(0).toString(16).toUpperCase()+";"+g.slice(1)),g=g?c+" "+g:c,n.options.closeAtx&&(g+=" "+c),f(),i(),g}dse.peek=C4e;function dse(e){return e.value||""}function C4e(){return"<"}hse.peek=S4e;function hse(e,t,n,r){const s=mz(n),a=s==='"'?"Quote":"Apostrophe",c=n.enter("image");let i=n.enter("label");const f=n.createTracker(r);let g=f.move("![");return g+=f.move(n.safe(e.alt,{before:g,after:"]",...f.current()})),g+=f.move("]("),i(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(i=n.enter("destinationLiteral"),g+=f.move("<"),g+=f.move(n.safe(e.url,{before:g,after:">",...f.current()})),g+=f.move(">")):(i=n.enter("destinationRaw"),g+=f.move(n.safe(e.url,{before:g,after:e.title?" ":")",...f.current()}))),i(),e.title&&(i=n.enter(`title${a}`),g+=f.move(" "+s),g+=f.move(n.safe(e.title,{before:g,after:s,...f.current()})),g+=f.move(s),i()),g+=f.move(")"),c(),g}function S4e(){return"!"}fse.peek=B4e;function fse(e,t,n,r){const s=e.referenceType,a=n.enter("imageReference");let c=n.enter("label");const i=n.createTracker(r);let f=i.move("![");const g=n.safe(e.alt,{before:f,after:"]",...i.current()});f+=i.move(g+"]["),c();const y=n.stack;n.stack=[],c=n.enter("reference");const b=n.safe(n.associationId(e),{before:f,after:"]",...i.current()});return c(),n.stack=y,a(),s==="full"||!g||g!==b?f+=i.move(b+"]"):s==="shortcut"?f=f.slice(0,-1):f+=i.move("]"),f}function B4e(){return"!"}pse.peek=E4e;function pse(e,t,n){let r=e.value||"",s="`",a=-1;for(;new RegExp("(^|[^`])"+s+"([^`]|$)").test(r);)s+="`";for(/[^ \r\n]/.test(r)&&(/^[ \r\n]/.test(r)&&/[ \r\n]$/.test(r)||/^`|`$/.test(r))&&(r=" "+r+" ");++a<n.unsafe.length;){const c=n.unsafe[a],i=n.compilePattern(c);let f;if(c.atBreak)for(;f=i.exec(r);){let g=f.index;r.charCodeAt(g)===10&&r.charCodeAt(g-1)===13&&g--,r=r.slice(0,g)+" "+r.slice(f.index+1)}}return s+r+s}function E4e(){return"`"}function Ase(e,t){const n=az(e);return!!(!t.options.resourceLink&&e.url&&!e.title&&e.children&&e.children.length===1&&e.children[0].type==="text"&&(n===e.url||"mailto:"+n===e.url)&&/^[a-z][a-z+.-]+:/i.test(e.url)&&!/[\0- <>\u007F]/.test(e.url))}mse.peek=T4e;function mse(e,t,n,r){const s=mz(n),a=s==='"'?"Quote":"Apostrophe",c=n.createTracker(r);let i,f;if(Ase(e,n)){const y=n.stack;n.stack=[],i=n.enter("autolink");let b=c.move("<");return b+=c.move(n.containerPhrasing(e,{before:b,after:">",...c.current()})),b+=c.move(">"),i(),n.stack=y,b}i=n.enter("link"),f=n.enter("label");let g=c.move("[");return g+=c.move(n.containerPhrasing(e,{before:g,after:"](",...c.current()})),g+=c.move("]("),f(),!e.url&&e.title||/[\0- \u007F]/.test(e.url)?(f=n.enter("destinationLiteral"),g+=c.move("<"),g+=c.move(n.safe(e.url,{before:g,after:">",...c.current()})),g+=c.move(">")):(f=n.enter("destinationRaw"),g+=c.move(n.safe(e.url,{before:g,after:e.title?" ":")",...c.current()}))),f(),e.title&&(f=n.enter(`title${a}`),g+=c.move(" "+s),g+=c.move(n.safe(e.title,{before:g,after:s,...c.current()})),g+=c.move(s),f()),g+=c.move(")"),i(),g}function T4e(e,t,n){return Ase(e,n)?"<":"["}gse.peek=I4e;function gse(e,t,n,r){const s=e.referenceType,a=n.enter("linkReference");let c=n.enter("label");const i=n.createTracker(r);let f=i.move("[");const g=n.containerPhrasing(e,{before:f,after:"]",...i.current()});f+=i.move(g+"]["),c();const y=n.stack;n.stack=[],c=n.enter("reference");const b=n.safe(n.associationId(e),{before:f,after:"]",...i.current()});return c(),n.stack=y,a(),s==="full"||!g||g!==b?f+=i.move(b+"]"):s==="shortcut"?f=f.slice(0,-1):f+=i.move("]"),f}function I4e(){return"["}function gz(e){const t=e.options.bullet||"*";if(t!=="*"&&t!=="+"&&t!=="-")throw new Error("Cannot serialize items with `"+t+"` for `options.bullet`, expected `*`, `+`, or `-`");return t}function j4e(e){const t=gz(e),n=e.options.bulletOther;if(!n)return t==="*"?"-":"*";if(n!=="*"&&n!=="+"&&n!=="-")throw new Error("Cannot serialize items with `"+n+"` for `options.bulletOther`, expected `*`, `+`, or `-`");if(n===t)throw new Error("Expected `bullet` (`"+t+"`) and `bulletOther` (`"+n+"`) to be different");return n}function F4e(e){const t=e.options.bulletOrdered||".";if(t!=="."&&t!==")")throw new Error("Cannot serialize items with `"+t+"` for `options.bulletOrdered`, expected `.` or `)`");return t}function yse(e){const t=e.options.rule||"*";if(t!=="*"&&t!=="-"&&t!=="_")throw new Error("Cannot serialize rules with `"+t+"` for `options.rule`, expected `*`, `-`, or `_`");return t}function P4e(e,t,n,r){const s=n.enter("list"),a=n.bulletCurrent;let c=e.ordered?F4e(n):gz(n);const i=e.ordered?c==="."?")":".":j4e(n);let f=t&&n.bulletLastUsed?c===n.bulletLastUsed:!1;if(!e.ordered){const y=e.children?e.children[0]:void 0;if((c==="*"||c==="-")&&y&&(!y.children||!y.children[0])&&n.stack[n.stack.length-1]==="list"&&n.stack[n.stack.length-2]==="listItem"&&n.stack[n.stack.length-3]==="list"&&n.stack[n.stack.length-4]==="listItem"&&n.indexStack[n.indexStack.length-1]===0&&n.indexStack[n.indexStack.length-2]===0&&n.indexStack[n.indexStack.length-3]===0&&(f=!0),yse(n)===c&&y){let b=-1;for(;++b<e.children.length;){const T=e.children[b];if(T&&T.type==="listItem"&&T.children&&T.children[0]&&T.children[0].type==="thematicBreak"){f=!0;break}}}}f&&(c=i),n.bulletCurrent=c;const g=n.containerFlow(e,r);return n.bulletLastUsed=c,n.bulletCurrent=a,s(),g}function k4e(e){const t=e.options.listItemIndent||"one";if(t!=="tab"&&t!=="one"&&t!=="mixed")throw new Error("Cannot serialize items with `"+t+"` for `options.listItemIndent`, expected `tab`, `one`, or `mixed`");return t}function L4e(e,t,n,r){const s=k4e(n);let a=n.bulletCurrent||gz(n);t&&t.type==="list"&&t.ordered&&(a=(typeof t.start=="number"&&t.start>-1?t.start:1)+(n.options.incrementListMarker===!1?0:t.children.indexOf(e))+a);let c=a.length+1;(s==="tab"||s==="mixed"&&(t&&t.type==="list"&&t.spread||e.spread))&&(c=Math.ceil(c/4)*4);const i=n.createTracker(r);i.move(a+" ".repeat(c-a.length)),i.shift(c);const f=n.enter("listItem"),g=n.indentLines(n.containerFlow(e,i.current()),y);return f(),g;function y(b,T,S){return T?(S?"":" ".repeat(c))+b:(S?a:a+" ".repeat(c-a.length))+b}}function M4e(e,t,n,r){const s=n.enter("paragraph"),a=n.enter("phrasing"),c=n.containerPhrasing(e,r);return a(),s(),c}const N4e=XF(["break","delete","emphasis","footnote","footnoteReference","image","imageReference","inlineCode","inlineMath","link","linkReference","mdxJsxTextElement","mdxTextExpression","strong","text","textDirective"]);function R4e(e,t,n,r){return(e.children.some(function(s){return N4e(s)})?n.containerPhrasing:n.containerFlow).call(n,e,r)}function O4e(e){const t=e.options.strong||"*";if(t!=="*"&&t!=="_")throw new Error("Cannot serialize strong with `"+t+"` for `options.strong`, expected `*`, or `_`");return t}vse.peek=D4e;function vse(e,t,n,r){const s=O4e(n),a=n.enter("strong"),c=n.createTracker(r);let i=c.move(s+s);return i+=c.move(n.containerPhrasing(e,{before:i,after:s,...c.current()})),i+=c.move(s+s),a(),i}function D4e(e,t,n){return n.options.strong||"*"}function U4e(e,t,n,r){return n.safe(e.value,r)}function z4e(e){const t=e.options.ruleRepetition||3;if(t<3)throw new Error("Cannot serialize rules with repetition `"+t+"` for `options.ruleRepetition`, expected `3` or more");return t}function Q4e(e,t,n){const r=(yse(n)+(n.options.ruleSpaces?" ":"")).repeat(z4e(n));return n.options.ruleSpaces?r.slice(0,-1):r}const xse={blockquote:d4e,break:yK,code:g4e,definition:v4e,emphasis:use,hardBreak:yK,heading:b4e,html:dse,image:hse,imageReference:fse,inlineCode:pse,link:mse,linkReference:gse,list:P4e,listItem:L4e,paragraph:M4e,root:R4e,strong:vse,text:U4e,thematicBreak:Q4e};function H4e(){return{enter:{table:V4e,tableData:vK,tableHeader:vK,tableRow:G4e},exit:{codeText:K4e,table:$4e,tableData:tN,tableHeader:tN,tableRow:tN}}}function V4e(e){const t=e._align;this.enter({type:"table",align:t.map(function(n){return n==="none"?null:n}),children:[]},e),this.data.inTable=!0}function $4e(e){this.exit(e),this.data.inTable=void 0}function G4e(e){this.enter({type:"tableRow",children:[]},e)}function tN(e){this.exit(e)}function vK(e){this.enter({type:"tableCell",children:[]},e)}function K4e(e){let t=this.resume();this.data.inTable&&(t=t.replace(/\\([\\|])/g,W4e));const n=this.stack[this.stack.length-1];n.type,n.value=t,this.exit(e)}function W4e(e,t){return t==="|"?t:e}function q4e(e){const t=e||{},n=t.tableCellPadding,r=t.tablePipeAlign,s=t.stringLength,a=n?" ":"|";return{unsafe:[{character:"\r",inConstruct:"tableCell"},{character:`
`,inConstruct:"tableCell"},{atBreak:!0,character:"|",after:"[	 :-]"},{character:"|",inConstruct:"tableCell"},{atBreak:!0,character:":",after:"-"},{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{inlineCode:T,table:c,tableCell:f,tableRow:i}};function c(S,U,N,W){return g(y(S,N,W),S.align)}function i(S,U,N,W){const L=b(S,N,W),Q=g([L]);return Q.slice(0,Q.indexOf(`
`))}function f(S,U,N,W){const L=N.enter("tableCell"),Q=N.enter("phrasing"),V=N.containerPhrasing(S,{...W,before:a,after:a});return Q(),L(),V}function g(S,U){return c4e(S,{align:U,alignDelimiters:r,padding:n,stringLength:s})}function y(S,U,N){const W=S.children;let L=-1;const Q=[],V=U.enter("table");for(;++L<W.length;)Q[L]=b(W[L],U,N);return V(),Q}function b(S,U,N){const W=S.children;let L=-1;const Q=[],V=U.enter("tableRow");for(;++L<W.length;)Q[L]=f(W[L],S,U,N);return V(),Q}function T(S,U,N){let W=xse.inlineCode(S,U,N);return N.stack.includes("tableCell")&&(W=W.replace(/\|/g,"\\$&")),W}}function Z4e(){return{exit:{taskListCheckValueChecked:xK,taskListCheckValueUnchecked:xK,paragraph:Y4e}}}function X4e(){return{unsafe:[{atBreak:!0,character:"-",after:"[:|-]"}],handlers:{listItem:J4e}}}function xK(e){const t=this.stack[this.stack.length-2];t.type,t.checked=e.type==="taskListCheckValueChecked"}function Y4e(e){const t=this.stack[this.stack.length-2];if(t&&t.type==="listItem"&&typeof t.checked=="boolean"){const n=this.stack[this.stack.length-1];n.type;const r=n.children[0];if(r&&r.type==="text"){const s=t.children;let a=-1,c;for(;++a<s.length;){const i=s[a];if(i.type==="paragraph"){c=i;break}}c===n&&(r.value=r.value.slice(1),r.value.length===0?n.children.shift():n.position&&r.position&&typeof r.position.start.offset=="number"&&(r.position.start.column++,r.position.start.offset++,n.position.start=Object.assign({},r.position.start)))}}this.exit(e)}function J4e(e,t,n,r){const s=e.children[0],a=typeof e.checked=="boolean"&&s&&s.type==="paragraph",c="["+(e.checked?"x":" ")+"] ",i=n.createTracker(r);a&&i.move(c);let f=xse.listItem(e,t,n,{...r,...i.current()});return a&&(f=f.replace(/^(?:[*+-]|\d+\.)([\r\n]| {1,3})/,g)),f;function g(y){return y+c}}function e3e(){return[FEe(),HEe(),r4e(),H4e(),Z4e()]}function t3e(e){return{extensions:[PEe(),VEe(),i4e(),q4e(e),X4e()]}}const n3e={tokenize:l3e,partial:!0},_se={tokenize:c3e,partial:!0},wse={tokenize:u3e,partial:!0},bse={tokenize:d3e,partial:!0},r3e={tokenize:h3e,partial:!0},Cse={name:"wwwAutolink",tokenize:o3e,previous:Bse},Sse={name:"protocolAutolink",tokenize:a3e,previous:Ese},p0={name:"emailAutolink",tokenize:s3e,previous:Tse},og={};function i3e(){return{text:og}}let Wv=48;for(;Wv<123;)og[Wv]=p0,Wv++,Wv===58?Wv=65:Wv===91&&(Wv=97);og[43]=p0;og[45]=p0;og[46]=p0;og[95]=p0;og[72]=[p0,Sse];og[104]=[p0,Sse];og[87]=[p0,Cse];og[119]=[p0,Cse];function s3e(e,t,n){const r=this;let s,a;return c;function c(b){return!aD(b)||!Tse.call(r,r.previous)||yz(r.events)?n(b):(e.enter("literalAutolink"),e.enter("literalAutolinkEmail"),i(b))}function i(b){return aD(b)?(e.consume(b),i):b===64?(e.consume(b),f):n(b)}function f(b){return b===46?e.check(r3e,y,g)(b):b===45||b===95||Fd(b)?(a=!0,e.consume(b),f):y(b)}function g(b){return e.consume(b),s=!0,f}function y(b){return a&&s&&fh(r.previous)?(e.exit("literalAutolinkEmail"),e.exit("literalAutolink"),t(b)):n(b)}}function o3e(e,t,n){const r=this;return s;function s(c){return c!==87&&c!==119||!Bse.call(r,r.previous)||yz(r.events)?n(c):(e.enter("literalAutolink"),e.enter("literalAutolinkWww"),e.check(n3e,e.attempt(_se,e.attempt(wse,a),n),n)(c))}function a(c){return e.exit("literalAutolinkWww"),e.exit("literalAutolink"),t(c)}}function a3e(e,t,n){const r=this;let s="",a=!1;return c;function c(b){return(b===72||b===104)&&Ese.call(r,r.previous)&&!yz(r.events)?(e.enter("literalAutolink"),e.enter("literalAutolinkHttp"),s+=String.fromCodePoint(b),e.consume(b),i):n(b)}function i(b){if(fh(b)&&s.length<5)return s+=String.fromCodePoint(b),e.consume(b),i;if(b===58){const T=s.toLowerCase();if(T==="http"||T==="https")return e.consume(b),f}return n(b)}function f(b){return b===47?(e.consume(b),a?g:(a=!0,f)):n(b)}function g(b){return b===null||mj(b)||Ba(b)||Ux(b)||WF(b)?n(b):e.attempt(_se,e.attempt(wse,y),n)(b)}function y(b){return e.exit("literalAutolinkHttp"),e.exit("literalAutolink"),t(b)}}function l3e(e,t,n){let r=0;return s;function s(c){return(c===87||c===119)&&r<3?(r++,e.consume(c),s):c===46&&r===3?(e.consume(c),a):n(c)}function a(c){return c===null?n(c):t(c)}}function c3e(e,t,n){let r,s,a;return c;function c(g){return g===46||g===95?e.check(bse,f,i)(g):g===null||Ba(g)||Ux(g)||g!==45&&WF(g)?f(g):(a=!0,e.consume(g),c)}function i(g){return g===95?r=!0:(s=r,r=void 0),e.consume(g),c}function f(g){return s||r||!a?n(g):t(g)}}function u3e(e,t){let n=0,r=0;return s;function s(c){return c===40?(n++,e.consume(c),s):c===41&&r<n?a(c):c===33||c===34||c===38||c===39||c===41||c===42||c===44||c===46||c===58||c===59||c===60||c===63||c===93||c===95||c===126?e.check(bse,t,a)(c):c===null||Ba(c)||Ux(c)?t(c):(e.consume(c),s)}function a(c){return c===41&&r++,e.consume(c),s}}function d3e(e,t,n){return r;function r(i){return i===33||i===34||i===39||i===41||i===42||i===44||i===46||i===58||i===59||i===63||i===95||i===126?(e.consume(i),r):i===38?(e.consume(i),a):i===93?(e.consume(i),s):i===60||i===null||Ba(i)||Ux(i)?t(i):n(i)}function s(i){return i===null||i===40||i===91||Ba(i)||Ux(i)?t(i):r(i)}function a(i){return fh(i)?c(i):n(i)}function c(i){return i===59?(e.consume(i),r):fh(i)?(e.consume(i),c):n(i)}}function h3e(e,t,n){return r;function r(a){return e.consume(a),s}function s(a){return Fd(a)?n(a):t(a)}}function Bse(e){return e===null||e===40||e===42||e===95||e===91||e===93||e===126||Ba(e)}function Ese(e){return!fh(e)}function Tse(e){return!(e===47||aD(e))}function aD(e){return e===43||e===45||e===46||e===95||Fd(e)}function yz(e){let t=e.length,n=!1;for(;t--;){const r=e[t][1];if((r.type==="labelLink"||r.type==="labelImage")&&!r._balanced){n=!0;break}if(r._gfmAutolinkLiteralWalkedInto){n=!1;break}}return e.length>0&&!n&&(e[e.length-1][1]._gfmAutolinkLiteralWalkedInto=!0),n}const f3e={tokenize:_3e,partial:!0};function p3e(){return{document:{91:{name:"gfmFootnoteDefinition",tokenize:y3e,continuation:{tokenize:v3e},exit:x3e}},text:{91:{name:"gfmFootnoteCall",tokenize:g3e},93:{name:"gfmPotentialFootnoteCall",add:"after",tokenize:A3e,resolveTo:m3e}}}}function A3e(e,t,n){const r=this;let s=r.events.length;const a=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let c;for(;s--;){const f=r.events[s][1];if(f.type==="labelImage"){c=f;break}if(f.type==="gfmFootnoteCall"||f.type==="labelLink"||f.type==="label"||f.type==="image"||f.type==="link")break}return i;function i(f){if(!c||!c._balanced)return n(f);const g=KA(r.sliceSerialize({start:c.end,end:r.now()}));return g.codePointAt(0)!==94||!a.includes(g.slice(1))?n(f):(e.enter("gfmFootnoteCallLabelMarker"),e.consume(f),e.exit("gfmFootnoteCallLabelMarker"),t(f))}}function m3e(e,t){let n=e.length;for(;n--;)if(e[n][1].type==="labelImage"&&e[n][0]==="enter"){e[n][1];break}e[n+1][1].type="data",e[n+3][1].type="gfmFootnoteCallLabelMarker";const r={type:"gfmFootnoteCall",start:Object.assign({},e[n+3][1].start),end:Object.assign({},e[e.length-1][1].end)},s={type:"gfmFootnoteCallMarker",start:Object.assign({},e[n+3][1].end),end:Object.assign({},e[n+3][1].end)};s.end.column++,s.end.offset++,s.end._bufferIndex++;const a={type:"gfmFootnoteCallString",start:Object.assign({},s.end),end:Object.assign({},e[e.length-1][1].start)},c={type:"chunkString",contentType:"string",start:Object.assign({},a.start),end:Object.assign({},a.end)},i=[e[n+1],e[n+2],["enter",r,t],e[n+3],e[n+4],["enter",s,t],["exit",s,t],["enter",a,t],["enter",c,t],["exit",c,t],["exit",a,t],e[e.length-2],e[e.length-1],["exit",r,t]];return e.splice(n,e.length-n+1,...i),e}function g3e(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a=0,c;return i;function i(b){return e.enter("gfmFootnoteCall"),e.enter("gfmFootnoteCallLabelMarker"),e.consume(b),e.exit("gfmFootnoteCallLabelMarker"),f}function f(b){return b!==94?n(b):(e.enter("gfmFootnoteCallMarker"),e.consume(b),e.exit("gfmFootnoteCallMarker"),e.enter("gfmFootnoteCallString"),e.enter("chunkString").contentType="string",g)}function g(b){if(a>999||b===93&&!c||b===null||b===91||Ba(b))return n(b);if(b===93){e.exit("chunkString");const T=e.exit("gfmFootnoteCallString");return s.includes(KA(r.sliceSerialize(T)))?(e.enter("gfmFootnoteCallLabelMarker"),e.consume(b),e.exit("gfmFootnoteCallLabelMarker"),e.exit("gfmFootnoteCall"),t):n(b)}return Ba(b)||(c=!0),a++,e.consume(b),b===92?y:g}function y(b){return b===91||b===92||b===93?(e.consume(b),a++,g):g(b)}}function y3e(e,t,n){const r=this,s=r.parser.gfmFootnotes||(r.parser.gfmFootnotes=[]);let a,c=0,i;return f;function f(U){return e.enter("gfmFootnoteDefinition")._container=!0,e.enter("gfmFootnoteDefinitionLabel"),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(U),e.exit("gfmFootnoteDefinitionLabelMarker"),g}function g(U){return U===94?(e.enter("gfmFootnoteDefinitionMarker"),e.consume(U),e.exit("gfmFootnoteDefinitionMarker"),e.enter("gfmFootnoteDefinitionLabelString"),e.enter("chunkString").contentType="string",y):n(U)}function y(U){if(c>999||U===93&&!i||U===null||U===91||Ba(U))return n(U);if(U===93){e.exit("chunkString");const N=e.exit("gfmFootnoteDefinitionLabelString");return a=KA(r.sliceSerialize(N)),e.enter("gfmFootnoteDefinitionLabelMarker"),e.consume(U),e.exit("gfmFootnoteDefinitionLabelMarker"),e.exit("gfmFootnoteDefinitionLabel"),T}return Ba(U)||(i=!0),c++,e.consume(U),U===92?b:y}function b(U){return U===91||U===92||U===93?(e.consume(U),c++,y):y(U)}function T(U){return U===58?(e.enter("definitionMarker"),e.consume(U),e.exit("definitionMarker"),s.includes(a)||s.push(a),Bo(e,S,"gfmFootnoteDefinitionWhitespace")):n(U)}function S(U){return t(U)}}function v3e(e,t,n){return e.check(SB,t,e.attempt(f3e,t,n))}function x3e(e){e.exit("gfmFootnoteDefinition")}function _3e(e,t,n){const r=this;return Bo(e,s,"gfmFootnoteDefinitionIndent",5);function s(a){const c=r.events[r.events.length-1];return c&&c[1].type==="gfmFootnoteDefinitionIndent"&&c[2].sliceSerialize(c[1],!0).length===4?t(a):n(a)}}function w3e(e){let t=(e||{}).singleTilde;const n={name:"strikethrough",tokenize:s,resolveAll:r};return t==null&&(t=!0),{text:{126:n},insideSpan:{null:[n]},attentionMarkers:{null:[126]}};function r(a,c){let i=-1;for(;++i<a.length;)if(a[i][0]==="enter"&&a[i][1].type==="strikethroughSequenceTemporary"&&a[i][1]._close){let f=i;for(;f--;)if(a[f][0]==="exit"&&a[f][1].type==="strikethroughSequenceTemporary"&&a[f][1]._open&&a[i][1].end.offset-a[i][1].start.offset===a[f][1].end.offset-a[f][1].start.offset){a[i][1].type="strikethroughSequence",a[f][1].type="strikethroughSequence";const g={type:"strikethrough",start:Object.assign({},a[f][1].start),end:Object.assign({},a[i][1].end)},y={type:"strikethroughText",start:Object.assign({},a[f][1].end),end:Object.assign({},a[i][1].start)},b=[["enter",g,c],["enter",a[f][1],c],["exit",a[f][1],c],["enter",y,c]],T=c.parser.constructs.insideSpan.null;T&&Hp(b,b.length,0,qF(T,a.slice(f+1,i),c)),Hp(b,b.length,0,[["exit",y,c],["enter",a[i][1],c],["exit",a[i][1],c],["exit",g,c]]),Hp(a,f-1,i-f+3,b),i=f+b.length-2;break}}for(i=-1;++i<a.length;)a[i][1].type==="strikethroughSequenceTemporary"&&(a[i][1].type="data");return a}function s(a,c,i){const f=this.previous,g=this.events;let y=0;return b;function b(S){return f===126&&g[g.length-1][1].type!=="characterEscape"?i(S):(a.enter("strikethroughSequenceTemporary"),T(S))}function T(S){const U=gj(f);if(S===126)return y>1?i(S):(a.consume(S),y++,T);if(y<2&&!t)return i(S);const N=a.exit("strikethroughSequenceTemporary"),W=gj(S);return N._open=!W||W===2&&!!U,N._close=!U||U===2&&!!W,c(S)}}}class b3e{constructor(){this.map=[]}add(t,n,r){C3e(this,t,n,r)}consume(t){if(this.map.sort(function(a,c){return a[0]-c[0]}),this.map.length===0)return;let n=this.map.length;const r=[];for(;n>0;)n-=1,r.push(t.slice(this.map[n][0]+this.map[n][1]),this.map[n][2]),t.length=this.map[n][0];r.push([...t]),t.length=0;let s=r.pop();for(;s;)t.push(...s),s=r.pop();this.map.length=0}}function C3e(e,t,n,r){let s=0;if(!(n===0&&r.length===0)){for(;s<e.map.length;){if(e.map[s][0]===t){e.map[s][1]+=n,e.map[s][2].push(...r);return}s+=1}e.map.push([t,n,r])}}function S3e(e,t){let n=!1;const r=[];for(;t<e.length;){const s=e[t];if(n){if(s[0]==="enter")s[1].type==="tableContent"&&r.push(e[t+1][1].type==="tableDelimiterMarker"?"left":"none");else if(s[1].type==="tableContent"){if(e[t-1][1].type==="tableDelimiterMarker"){const a=r.length-1;r[a]=r[a]==="left"?"center":"right"}}else if(s[1].type==="tableDelimiterRow")break}else s[0]==="enter"&&s[1].type==="tableDelimiterRow"&&(n=!0);t+=1}return r}function B3e(){return{flow:{null:{name:"table",tokenize:E3e,resolveAll:T3e}}}}function E3e(e,t,n){const r=this;let s=0,a=0,c;return i;function i(ye){let he=r.events.length-1;for(;he>-1;){const Ee=r.events[he][1].type;if(Ee==="lineEnding"||Ee==="linePrefix")he--;else break}const be=he>-1?r.events[he][1].type:null,Te=be==="tableHead"||be==="tableRow"?Y:f;return Te===Y&&r.parser.lazy[r.now().line]?n(ye):Te(ye)}function f(ye){return e.enter("tableHead"),e.enter("tableRow"),g(ye)}function g(ye){return ye===124||(c=!0,a+=1),y(ye)}function y(ye){return ye===null?n(ye):Wi(ye)?a>1?(a=0,r.interrupt=!0,e.exit("tableRow"),e.enter("lineEnding"),e.consume(ye),e.exit("lineEnding"),S):n(ye):ro(ye)?Bo(e,y,"whitespace")(ye):(a+=1,c&&(c=!1,s+=1),ye===124?(e.enter("tableCellDivider"),e.consume(ye),e.exit("tableCellDivider"),c=!0,y):(e.enter("data"),b(ye)))}function b(ye){return ye===null||ye===124||Ba(ye)?(e.exit("data"),y(ye)):(e.consume(ye),ye===92?T:b)}function T(ye){return ye===92||ye===124?(e.consume(ye),b):b(ye)}function S(ye){return r.interrupt=!1,r.parser.lazy[r.now().line]?n(ye):(e.enter("tableDelimiterRow"),c=!1,ro(ye)?Bo(e,U,"linePrefix",r.parser.constructs.disable.null.includes("codeIndented")?void 0:4)(ye):U(ye))}function U(ye){return ye===45||ye===58?W(ye):ye===124?(c=!0,e.enter("tableCellDivider"),e.consume(ye),e.exit("tableCellDivider"),N):ne(ye)}function N(ye){return ro(ye)?Bo(e,W,"whitespace")(ye):W(ye)}function W(ye){return ye===58?(a+=1,c=!0,e.enter("tableDelimiterMarker"),e.consume(ye),e.exit("tableDelimiterMarker"),L):ye===45?(a+=1,L(ye)):ye===null||Wi(ye)?Z(ye):ne(ye)}function L(ye){return ye===45?(e.enter("tableDelimiterFiller"),Q(ye)):ne(ye)}function Q(ye){return ye===45?(e.consume(ye),Q):ye===58?(c=!0,e.exit("tableDelimiterFiller"),e.enter("tableDelimiterMarker"),e.consume(ye),e.exit("tableDelimiterMarker"),V):(e.exit("tableDelimiterFiller"),V(ye))}function V(ye){return ro(ye)?Bo(e,Z,"whitespace")(ye):Z(ye)}function Z(ye){return ye===124?U(ye):ye===null||Wi(ye)?!c||s!==a?ne(ye):(e.exit("tableDelimiterRow"),e.exit("tableHead"),t(ye)):ne(ye)}function ne(ye){return n(ye)}function Y(ye){return e.enter("tableRow"),le(ye)}function le(ye){return ye===124?(e.enter("tableCellDivider"),e.consume(ye),e.exit("tableCellDivider"),le):ye===null||Wi(ye)?(e.exit("tableRow"),t(ye)):ro(ye)?Bo(e,le,"whitespace")(ye):(e.enter("data"),pe(ye))}function pe(ye){return ye===null||ye===124||Ba(ye)?(e.exit("data"),le(ye)):(e.consume(ye),ye===92?_e:pe)}function _e(ye){return ye===92||ye===124?(e.consume(ye),pe):pe(ye)}}function T3e(e,t){let n=-1,r=!0,s=0,a=[0,0,0,0],c=[0,0,0,0],i=!1,f=0,g,y,b;const T=new b3e;for(;++n<e.length;){const S=e[n],U=S[1];S[0]==="enter"?U.type==="tableHead"?(i=!1,f!==0&&(_K(T,t,f,g,y),y=void 0,f=0),g={type:"table",start:Object.assign({},U.start),end:Object.assign({},U.end)},T.add(n,0,[["enter",g,t]])):U.type==="tableRow"||U.type==="tableDelimiterRow"?(r=!0,b=void 0,a=[0,0,0,0],c=[0,n+1,0,0],i&&(i=!1,y={type:"tableBody",start:Object.assign({},U.start),end:Object.assign({},U.end)},T.add(n,0,[["enter",y,t]])),s=U.type==="tableDelimiterRow"?2:y?3:1):s&&(U.type==="data"||U.type==="tableDelimiterMarker"||U.type==="tableDelimiterFiller")?(r=!1,c[2]===0&&(a[1]!==0&&(c[0]=c[1],b=_3(T,t,a,s,void 0,b),a=[0,0,0,0]),c[2]=n)):U.type==="tableCellDivider"&&(r?r=!1:(a[1]!==0&&(c[0]=c[1],b=_3(T,t,a,s,void 0,b)),a=c,c=[a[1],n,0,0])):U.type==="tableHead"?(i=!0,f=n):U.type==="tableRow"||U.type==="tableDelimiterRow"?(f=n,a[1]!==0?(c[0]=c[1],b=_3(T,t,a,s,n,b)):c[1]!==0&&(b=_3(T,t,c,s,n,b)),s=0):s&&(U.type==="data"||U.type==="tableDelimiterMarker"||U.type==="tableDelimiterFiller")&&(c[3]=n)}for(f!==0&&_K(T,t,f,g,y),T.consume(t.events),n=-1;++n<t.events.length;){const S=t.events[n];S[0]==="enter"&&S[1].type==="table"&&(S[1]._align=S3e(t.events,n))}return e}function _3(e,t,n,r,s,a){const c=r===1?"tableHeader":r===2?"tableDelimiter":"tableData",i="tableContent";n[0]!==0&&(a.end=Object.assign({},g1(t.events,n[0])),e.add(n[0],0,[["exit",a,t]]));const f=g1(t.events,n[1]);if(a={type:c,start:Object.assign({},f),end:Object.assign({},f)},e.add(n[1],0,[["enter",a,t]]),n[2]!==0){const g=g1(t.events,n[2]),y=g1(t.events,n[3]),b={type:i,start:Object.assign({},g),end:Object.assign({},y)};if(e.add(n[2],0,[["enter",b,t]]),r!==2){const T=t.events[n[2]],S=t.events[n[3]];if(T[1].end=Object.assign({},S[1].end),T[1].type="chunkText",T[1].contentType="text",n[3]>n[2]+1){const U=n[2]+1,N=n[3]-n[2]-1;e.add(U,N,[])}}e.add(n[3]+1,0,[["exit",b,t]])}return s!==void 0&&(a.end=Object.assign({},g1(t.events,s)),e.add(s,0,[["exit",a,t]]),a=void 0),a}function _K(e,t,n,r,s){const a=[],c=g1(t.events,n);s&&(s.end=Object.assign({},c),a.push(["exit",s,t])),r.end=Object.assign({},c),a.push(["exit",r,t]),e.add(n+1,0,a)}function g1(e,t){const n=e[t],r=n[0]==="enter"?"start":"end";return n[1][r]}const I3e={name:"tasklistCheck",tokenize:F3e};function j3e(){return{text:{91:I3e}}}function F3e(e,t,n){const r=this;return s;function s(f){return r.previous!==null||!r._gfmTasklistFirstContentOfListItem?n(f):(e.enter("taskListCheck"),e.enter("taskListCheckMarker"),e.consume(f),e.exit("taskListCheckMarker"),a)}function a(f){return Ba(f)?(e.enter("taskListCheckValueUnchecked"),e.consume(f),e.exit("taskListCheckValueUnchecked"),c):f===88||f===120?(e.enter("taskListCheckValueChecked"),e.consume(f),e.exit("taskListCheckValueChecked"),c):n(f)}function c(f){return f===93?(e.enter("taskListCheckMarker"),e.consume(f),e.exit("taskListCheckMarker"),e.exit("taskListCheck"),i):n(f)}function i(f){return Wi(f)?t(f):ro(f)?e.check({tokenize:P3e},t,n)(f):n(f)}}function P3e(e,t,n){return Bo(e,r,"whitespace");function r(s){return s===null?n(s):t(s)}}function k3e(e){return Rie([i3e(),p3e(),w3e(e),B3e(),j3e()])}const L3e={};function M3e(e){const t=this,n=e||L3e,r=t.data(),s=r.micromarkExtensions||(r.micromarkExtensions=[]),a=r.fromMarkdownExtensions||(r.fromMarkdownExtensions=[]),c=r.toMarkdownExtensions||(r.toMarkdownExtensions=[]);s.push(k3e(n)),a.push(e3e()),c.push(t3e(n))}const qo={container:{className:"bpReset bpContainer bpFont",dropzone:{overlay:{className:"bpDropzoneOverlay"},container:{className:"bpDropzoneContainer"}}},loader:{className:"bpReset bpLoader"},modal:{container:{className:"bpReset bpModalContainer"},overlay:{className:"bpModalOverlay"},dialog:{container:{className:"bpReset bpModalDialogContainer"},title:{container:{className:"bpReset bpModalDialogTitleContainer"},text:{className:"bpModalDialogTitleText"},closeIcon:{className:"bpModalDialogTitleCloseIcon"}},content:{className:"bpModalDialogContent"},newConversation:{button:{className:"bpModalDialogNewConversationButton"},text:{className:"bpModalDialogNewConversationText"}}}},fab:{container:{className:"bpReset bpFabContainer"},icon:{className:"bpFabIcon"}},notification:{container:{className:"bpReset bpNotificationContainer"},title:{className:"bpNotificationTitle"},description:{className:"bpNotificationDescription"},icon:{className:"bpNotificationIcon"},closeIcon:{className:"bpNotificationCloseIcon"}},header:{container:{className:"bpReset bpHeaderContainer bpFont"},content:{container:{className:"bpReset bpHeaderContentContainer"},title:{className:"bpHeaderContentTitle"},description:{className:"bpHeaderContentDescription"},avatar:{container:{className:"bpReset bpHeaderContentAvatarContainer"},image:{className:"bpHeaderContentAvatarImage"},fallback:{className:"bpHeaderContentAvatarFallback"}},actions:{container:{className:"bpReset bpHeaderContentActionsContainer"},icons:{className:"bpHeaderContentActionsIcons"}}},expandedContent:{container:{className:"bpReset bpHeaderExpandedContentContainer"},descriptionItems:{container:{className:"bpReset bpHeaderExpandedContentDescriptionItemsContainer"},icon:{className:"bpHeaderExpandedContentDescriptionItemsIcon"},text:{className:"bpHeaderExpandedContentDescriptionItemsText"},link:{className:"bpHeaderExpandedContentDescriptionItemsLink"}},group:{className:"bpHeaderExpandedContentGroup"}},newConversationIcon:{className:"bpHeaderNewConversationIcon"}},composer:{container:{className:"bpReset bpComposerContainer bpFont"},poweredBy:{className:"bpComposerPoweredBy"},inputContainer:{className:"bpComposerInputContainer"},input:{className:"bpComposerInput"},button:{container:{className:"bpReset bpComposerButtonContainer"},icon:{className:"bpComposerButtonIcon"}},uploadButton:{icon:{className:"bpComposerUploadButtonIcon"},container:{className:"bpReset bpComposerUploadButtonContainer"}},voiceButton:{icon:{className:"bpComposerVoiceButtonIcon"},container:{className:"bpReset bpComposerVoiceButtonContainer"}},fileContainer:{className:"bpComposerFileContainer"},fileWidget:{container:{className:"bpComposerFileAttachement"},loader:{className:"bpComposerFileLoader"},fileIcon:{container:{className:"bpComposerFileIconWrapper"},icon:{className:"bpComposerFileIcon"}},metadata:{container:{className:"bpComposerFileMetadata"},name:{className:"bpComposerFileName"},type:{className:"bpComposerFileExtension"}},removeIcon:{className:"bpComposerFileRemoveIcon"},errorIcon:{className:"bpComposerFileErrorIcon"},previewImage:{className:"bpComposerFilePreviewImage"}}},messageList:{scrollDownButton:{container:{className:"bpReset bpMessageListScrollDownButtonContainer"},button:{className:"bpMessageListScrollDownButtonButton"},icon:{className:"bpMessageListScrollDownButtonIcon"}},container:{className:"bpReset bpMessageListContainer bpFont"},viewPort:{className:"bpMessageListViewport"},marquee:{container:{className:"bpReset bpMessageListMarqueeContainer"},content:{className:"bpMessageListMarqueeContent"},title:{className:"bpMessageListMarqueeTitle"},description:{className:"bpMessageListMarqueeDescription"},avatar:{container:{className:"bpReset bpMessageListMarqueeAvatarContainer"},image:{className:"bpMessageListMarqueeAvatarImage"},fallback:{className:"bpMessageListMarqueeAvatarFallback"}}},headerMessage:{className:"bpMessageListHeaderMessage"}},message:{container:{className:"bpReset bpMessageContainer"},avatar:{container:{className:"bpReset bpMessageAvatarContainer"},image:{className:"bpMessageAvatarImage"},fallback:{className:"bpMessageAvatarFallback"}},blocks:{text:{heading1:{className:"bpMessageBlocksTextHeading1"},heading2:{className:"bpMessageBlocksTextHeading2"},heading3:{className:"bpMessageBlocksTextHeading3"},heading4:{className:"bpMessageBlocksTextHeading4"},unorderedList:{className:"bpMessageBlocksTextUnorderedList"},orderedList:{className:"bpMessageBlocksTextOrderedList"},listItem:{className:"bpMessageBlocksTextListItem"},link:{className:"bpMessageBlocksTextLink"},italic:{className:"bpMessageBlocksTextItalic"},bold:{className:"bpMessageBlocksTextBold"},text:{className:"bpMessageBlocksTextText"},image:{className:"bpMessageBlocksTextImage"},horizontalRule:{className:"bpMessageBlocksTextHorizontalRule"},lineBreak:{className:"bpMessageBlocksTextLineBreak"},input:{className:"bpMessageBlocksTextInput"},codeBlockContainer:{className:"bpMessageBlocksTextCodeBlockContainer"},codeBlockTitle:{className:"bpMessageBlocksTextCodeBlockTitle"},codeBlockCopyIcon:{className:"bpMessageBlocksTextCodeBlockCopyIcon"},codeBlock:{className:"bpMessageBlocksTextCodeBlock"},code:{className:"bpMessageBlocksTextCode"},tableContainer:{className:"bpMessageBlocksTextTableContainer"},table:{className:"bpMessageBlocksTextTable"},tableHeader:{className:"bpMessageBlocksTextTableHeader"},tableData:{className:"bpMessageBlocksTextTableData"},tableRow:{className:"bpMessageBlocksTextTableRow"}},audio:{className:"bpMessageBlocksAudio"},image:{image:{className:"bpMessageBlocksImageImage"},placeholder:{className:"bpMessageBlocksImagePlaceholder"}},video:{className:"bpMessageBlocksVideo"},location:{container:{className:"bpMessageBlocksLocationContainer"},title:{className:"bpMessageBlocksLocationTitle"},icon:{className:"bpMessageBlocksLocationIcon"}},file:{container:{className:"bpMessageBlocksFileContainer"},title:{className:"bpMessageBlocksFileTitle"},icon:{className:"bpMessageBlocksFileIcon"}},row:{className:"bpMessageBlocksRow"},column:{className:"bpMessageBlocksColumn"},bubble:{className:"bpMessageBlocksBubble"},carousel:{container:{className:"bpMessageBlocksCarouselContainer"},slidesContainer:{className:"bpMessageBlocksCarouselSlidesContainer"},backButton:{className:"bpMessageBlocksCarouselBackButton"},nextButton:{className:"bpMessageBlocksCarouselNextButton"}},dropdown:{button:{container:{className:"bpMessageBlocksDropdownButtonContainer"},text:{className:"bpMessageBlocksDropdownButtonText"},icon:{className:"bpMessageBlocksDropdownButtonIcon"}},content:{container:{className:"bpMessageBlocksDropdownContentContainer"},item:{className:"bpMessageBlocksDropdownContentItem"}}},button:{className:"bpMessageBlocksButton"}}},typingIndicator:{container:{className:"bpTypingIndicatorContainer"},loader:{className:"bpTypingIndicatorLoader"}}};function N3e({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m4.5 12.75 6 6 9-13.5"}))}const R3e=q.forwardRef(N3e);function O3e({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M15.75 17.25v3.375c0 .621-.504 1.125-1.125 1.125h-9.75a1.125 1.125 0 0 1-1.125-1.125V7.875c0-.621.504-1.125 1.125-1.125H6.75a9.06 9.06 0 0 1 1.5.124m7.5 10.376h3.375c.621 0 1.125-.504 1.125-1.125V11.25c0-4.46-3.243-8.161-7.5-8.876a9.06 9.06 0 0 0-1.5-.124H9.375c-.621 0-1.125.504-1.125 1.125v3.5m7.5 10.375H9.375a1.125 1.125 0 0 1-1.125-1.125v-9.25m12 6.625v-1.875a3.375 3.375 0 0 0-3.375-3.375h-1.5a1.125 1.125 0 0 1-1.125-1.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H9.75"}))}const D3e=q.forwardRef(O3e);function U3e({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.5 14.25v-2.625a3.375 3.375 0 0 0-3.375-3.375h-1.5A1.125 1.125 0 0 1 13.5 7.125v-1.5a3.375 3.375 0 0 0-3.375-3.375H8.25m0 12.75h7.5m-7.5 3H12M10.5 2.25H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 0 0-9-9Z"}))}const z3e=q.forwardRef(U3e);function Q3e({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m2.25 15.75 5.159-5.159a2.25 2.25 0 0 1 3.182 0l5.159 5.159m-1.5-1.5 1.409-1.409a2.25 2.25 0 0 1 3.182 0l2.909 2.909m-18 3.75h16.5a1.5 1.5 0 0 0 1.5-1.5V6a1.5 1.5 0 0 0-1.5-1.5H3.75A1.5 1.5 0 0 0 2.25 6v12a1.5 1.5 0 0 0 1.5 1.5Zm10.5-11.25h.008v.008h-.008V8.25Zm.375 0a.375.375 0 1 1-.75 0 .375.375 0 0 1 .75 0Z"}))}const H3e=q.forwardRef(Q3e);function V3e({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M19.114 5.636a9 9 0 0 1 0 12.728M16.463 8.288a5.25 5.25 0 0 1 0 7.424M6.75 8.25l4.72-4.72a.75.75 0 0 1 1.28.53v15.88a.75.75 0 0 1-1.28.53l-4.72-4.72H4.51c-.88 0-1.704-.507-1.938-1.354A9.009 9.009 0 0 1 2.25 12c0-.83.112-1.633.322-2.396C2.806 8.756 3.63 8.25 4.51 8.25H6.75Z"}))}const $3e=q.forwardRef(V3e);function G3e({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"m15.75 10.5 4.72-4.72a.75.75 0 0 1 1.28.53v11.38a.75.75 0 0 1-1.28.53l-4.72-4.72M4.5 18.75h9a2.25 2.25 0 0 0 2.25-2.25v-9a2.25 2.25 0 0 0-2.25-2.25h-9A2.25 2.25 0 0 0 2.25 7.5v9a2.25 2.25 0 0 0 2.25 2.25Z"}))}const K3e=q.forwardRef(G3e);function W3e({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M6 18 18 6M6 6l12 12"}))}const Ise=q.forwardRef(W3e),q3e=({text:e})=>{const{message:{blocks:{text:t}}}=qo,n={h1:({node:r,...s})=>zt.jsx("h1",{...s,...t.heading1}),h2:({node:r,...s})=>zt.jsx("h2",{...s,...t.heading2}),h3:({node:r,...s})=>zt.jsx("h3",{...s,...t.heading3}),h4:({node:r,...s})=>zt.jsx("h4",{...s,...t.heading4}),h5:"h4",h6:"h4",em:({node:r,...s})=>zt.jsx("em",{...s,...t.italic}),strong:({node:r,...s})=>zt.jsx("strong",{...s,...t.bold}),p:({node:r,...s})=>zt.jsx("p",{...s,...t.text}),hr:({node:r,...s})=>zt.jsx("hr",{...s,...t.horizontalRule}),a:({node:r,...s})=>zt.jsx("a",{...s,...t.link,target:"_blank"}),img:({node:r,...s})=>zt.jsx("img",{...s,...t.image}),ol:({node:r,...s})=>zt.jsx("ol",{...s,...t.orderedList}),ul:({node:r,...s})=>zt.jsx("ul",{...s,...t.unorderedList}),li:({node:r,...s})=>zt.jsx("li",{...s,...t.listItem}),br:({node:r,...s})=>zt.jsx("br",{...s,...t.lineBreak}),pre:({node:r,...s})=>{var a,c;const i=r==null?void 0:r.children[0],f=Z3e(((c=(a=i==null?void 0:i.properties)==null?void 0:a.className)==null?void 0:c[0])||""),[g,y]=q.useState(!1),b=q.useRef(null),T=()=>{if(!b.current)return;const S=b.current.textContent||"";navigator.clipboard.writeText(S).then(()=>{y(!0),setTimeout(()=>{y(!1)},1500)}).catch(U=>{console.error("Failed to copy code to clipboard:",U)})};return zt.jsxs("div",{...t.codeBlockContainer,children:[zt.jsxs("div",{...t.codeBlockTitle,children:[f?zt.jsx("span",{children:f}):"Code",g?zt.jsx(R3e,{...t.codeBlockCopyIcon}):zt.jsx(D3e,{...t.codeBlockCopyIcon,onClick:T})]}),zt.jsx("pre",{ref:b,...s,...t.codeBlock})]})},input:({node:r,...s})=>zt.jsx("input",{...s,...t.input,disabled:!1}),code:({node:r,...s})=>zt.jsx("code",{...s,...t.code}),table:({node:r,...s})=>zt.jsx("div",{...t.tableContainer,children:zt.jsx("table",{...s,...t.table})}),th:({node:r,...s})=>zt.jsx("th",{...s,...t.tableHeader}),tr:({node:r,...s})=>zt.jsx("tr",{...s,...t.tableRow}),td:({node:r,...s})=>zt.jsx("td",{...s,...t.tableData})};return zt.jsx(bEe,{urlTransform:r=>r.startsWith("tel:")?r:sse(r),components:n,remarkPlugins:[M3e,jEe],children:e})},Z3e=e=>{if(!e)return"";const t=e.match(/language-(\w+)/);return t?t[1]:""},X3e={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},wK=e=>{let t;const n=new Set,r=(i,f)=>{const g=typeof i=="function"?i(t):i;if(!Object.is(g,t)){const y=t;t=f??(typeof g!="object"||g===null)?g:Object.assign({},t,g),n.forEach(b=>b(t,y))}},s=()=>t,a={setState:r,getState:s,getInitialState:()=>c,subscribe:i=>(n.add(i),()=>n.delete(i)),destroy:()=>{(X3e?"production":void 0)!=="production"&&console.warn("[DEPRECATED] The `destroy` method will be unsupported in a future version. Instead use unsubscribe function returned by subscribe. Everything will be garbage-collected if store is garbage-collected."),n.clear()}},c=t=e(r,s,a);return a},Y3e=e=>e?wK(e):wK;var jse={exports:{}},nN={},bK={exports:{}},rN={};/**
 * @license React
 * use-sync-external-store-shim.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var CK;function J3e(){if(CK)return rN;CK=1;var e=Ti;function t(b,T){return b===T&&(b!==0||1/b===1/T)||b!==b&&T!==T}var n=typeof Object.is=="function"?Object.is:t,r=e.useState,s=e.useEffect,a=e.useLayoutEffect,c=e.useDebugValue;function i(b,T){var S=T(),U=r({inst:{value:S,getSnapshot:T}}),N=U[0].inst,W=U[1];return a(function(){N.value=S,N.getSnapshot=T,f(N)&&W({inst:N})},[b,S,T]),s(function(){return f(N)&&W({inst:N}),b(function(){f(N)&&W({inst:N})})},[b]),c(S),S}function f(b){var T=b.getSnapshot;b=b.value;try{var S=T();return!n(b,S)}catch{return!0}}function g(b,T){return T()}var y=typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"?g:i;return rN.useSyncExternalStore=e.useSyncExternalStore!==void 0?e.useSyncExternalStore:y,rN}var SK;function eTe(){return SK||(SK=1,bK.exports=J3e()),bK.exports}/**
 * @license React
 * use-sync-external-store-shim/with-selector.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var BK;function tTe(){if(BK)return nN;BK=1;var e=Ti,t=eTe();function n(g,y){return g===y&&(g!==0||1/g===1/y)||g!==g&&y!==y}var r=typeof Object.is=="function"?Object.is:n,s=t.useSyncExternalStore,a=e.useRef,c=e.useEffect,i=e.useMemo,f=e.useDebugValue;return nN.useSyncExternalStoreWithSelector=function(g,y,b,T,S){var U=a(null);if(U.current===null){var N={hasValue:!1,value:null};U.current=N}else N=U.current;U=i(function(){function L(Y){if(!Q){if(Q=!0,V=Y,Y=T(Y),S!==void 0&&N.hasValue){var le=N.value;if(S(le,Y))return Z=le}return Z=Y}if(le=Z,r(V,Y))return le;var pe=T(Y);return S!==void 0&&S(le,pe)?le:(V=Y,Z=pe)}var Q=!1,V,Z,ne=b===void 0?null:b;return[function(){return L(y())},ne===null?void 0:function(){return L(ne())}]},[y,b,T,S]);var W=s(g,U[0],U[1]);return c(function(){N.hasValue=!0,N.value=W},[W]),f(W),W},nN}jse.exports=tTe();var nTe=jse.exports;const rTe=uo(nTe),Fse={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},{useDebugValue:iTe}=Ti,{useSyncExternalStoreWithSelector:sTe}=rTe;let EK=!1;const oTe=e=>e;function aTe(e,t=oTe,n){(Fse?"production":void 0)!=="production"&&n&&!EK&&(console.warn("[DEPRECATED] Use `createWithEqualityFn` instead of `create` or use `useStoreWithEqualityFn` instead of `useStore`. They can be imported from 'zustand/traditional'. https://github.com/pmndrs/zustand/discussions/1937"),EK=!0);const r=sTe(e.subscribe,e.getState,e.getServerState||e.getInitialState,t,n);return iTe(r),r}const lTe=e=>{(Fse?"production":void 0)!=="production"&&typeof e!="function"&&console.warn("[DEPRECATED] Passing a vanilla store will be unsupported in a future version. Instead use `import { useStore } from 'zustand'`.");const t=typeof e=="function"?Y3e(e):e,n=(r,s)=>aTe(t,r,s);return Object.assign(n,t),n},Zw=e=>lTe,GT={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1},lD=new Map,w3=e=>{const t=lD.get(e);return t?Object.fromEntries(Object.entries(t.stores).map(([n,r])=>[n,r.getState()])):{}},cTe=(e,t,n)=>{if(e===void 0)return{type:"untracked",connection:t.connect(n)};const r=lD.get(n.name);if(r)return{type:"tracked",store:e,...r};const s={connection:t.connect(n),stores:{}};return lD.set(n.name,s),{type:"tracked",store:e,...s}},uTe=(e,t={})=>(n,r,s)=>{const{enabled:a,anonymousActionType:c,store:i,...f}=t;let g;try{g=(a??(GT?"production":void 0)!=="production")&&window.__REDUX_DEVTOOLS_EXTENSION__}catch{}if(!g)return(GT?"production":void 0)!=="production"&&a&&console.warn("[zustand devtools middleware] Please install/enable Redux devtools extension"),e(n,r,s);const{connection:y,...b}=cTe(i,g,f);let T=!0;s.setState=(N,W,L)=>{const Q=n(N,W);if(!T)return Q;const V=L===void 0?{type:c||"anonymous"}:typeof L=="string"?{type:L}:L;return i===void 0?(y==null||y.send(V,r()),Q):(y==null||y.send({...V,type:`${i}/${V.type}`},{...w3(f.name),[i]:s.getState()}),Q)};const S=(...N)=>{const W=T;T=!1,n(...N),T=W},U=e(s.setState,r,s);if(b.type==="untracked"?y==null||y.init(U):(b.stores[b.store]=s,y==null||y.init(Object.fromEntries(Object.entries(b.stores).map(([N,W])=>[N,N===b.store?U:W.getState()])))),s.dispatchFromDevtools&&typeof s.dispatch=="function"){let N=!1;const W=s.dispatch;s.dispatch=(...L)=>{(GT?"production":void 0)!=="production"&&L[0].type==="__setState"&&!N&&(console.warn('[zustand devtools middleware] "__setState" action type is reserved to set state from the devtools. Avoid using it.'),N=!0),W(...L)}}return y.subscribe(N=>{var W;switch(N.type){case"ACTION":if(typeof N.payload!="string"){console.error("[zustand devtools middleware] Unsupported action format");return}return iN(N.payload,L=>{if(L.type==="__setState"){if(i===void 0){S(L.state);return}Object.keys(L.state).length!==1&&console.error(`
                    [zustand devtools middleware] Unsupported __setState action format. 
                    When using 'store' option in devtools(), the 'state' should have only one key, which is a value of 'store' that was passed in devtools(),
                    and value of this only key should be a state object. Example: { "type": "__setState", "state": { "abc123Store": { "foo": "bar" } } }
                    `);const Q=L.state[i];if(Q==null)return;JSON.stringify(s.getState())!==JSON.stringify(Q)&&S(Q);return}s.dispatchFromDevtools&&typeof s.dispatch=="function"&&s.dispatch(L)});case"DISPATCH":switch(N.payload.type){case"RESET":return S(U),i===void 0?y==null?void 0:y.init(s.getState()):y==null?void 0:y.init(w3(f.name));case"COMMIT":if(i===void 0){y==null||y.init(s.getState());return}return y==null?void 0:y.init(w3(f.name));case"ROLLBACK":return iN(N.state,L=>{if(i===void 0){S(L),y==null||y.init(s.getState());return}S(L[i]),y==null||y.init(w3(f.name))});case"JUMP_TO_STATE":case"JUMP_TO_ACTION":return iN(N.state,L=>{if(i===void 0){S(L);return}JSON.stringify(s.getState())!==JSON.stringify(L[i])&&S(L[i])});case"IMPORT_STATE":{const{nextLiftedState:L}=N.payload,Q=(W=L.computedStates.slice(-1)[0])==null?void 0:W.state;if(!Q)return;S(i===void 0?Q:Q[i]),y==null||y.send(null,L);return}case"PAUSE_RECORDING":return T=!T}return}}),U},JF=uTe,iN=(e,t)=>{let n;try{n=JSON.parse(e)}catch(r){console.error("[zustand devtools middleware] Could not parse the received json",r)}n!==void 0&&t(n)};function Pse(e,t){let n;try{n=e()}catch{return}return{getItem:r=>{var s;const a=i=>i===null?null:JSON.parse(i,void 0),c=(s=n.getItem(r))!=null?s:null;return c instanceof Promise?c.then(a):a(c)},setItem:(r,s)=>n.setItem(r,JSON.stringify(s,void 0)),removeItem:r=>n.removeItem(r)}}const FS=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(r){return FS(r)(n)},catch(r){return this}}}catch(n){return{then(r){return this},catch(r){return FS(r)(n)}}}},dTe=(e,t)=>(n,r,s)=>{let a={getStorage:()=>localStorage,serialize:JSON.stringify,deserialize:JSON.parse,partialize:W=>W,version:0,merge:(W,L)=>({...L,...W}),...t},c=!1;const i=new Set,f=new Set;let g;try{g=a.getStorage()}catch{}if(!g)return e((...W)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...W)},r,s);const y=FS(a.serialize),b=()=>{const W=a.partialize({...r()});let L;const Q=y({state:W,version:a.version}).then(V=>g.setItem(a.name,V)).catch(V=>{L=V});if(L)throw L;return Q},T=s.setState;s.setState=(W,L)=>{T(W,L),b()};const S=e((...W)=>{n(...W),b()},r,s);let U;const N=()=>{var W;if(!g)return;c=!1,i.forEach(Q=>Q(r()));const L=((W=a.onRehydrateStorage)==null?void 0:W.call(a,r()))||void 0;return FS(g.getItem.bind(g))(a.name).then(Q=>{if(Q)return a.deserialize(Q)}).then(Q=>{if(Q)if(typeof Q.version=="number"&&Q.version!==a.version){if(a.migrate)return a.migrate(Q.state,Q.version);console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return Q.state}).then(Q=>{var V;return U=a.merge(Q,(V=r())!=null?V:S),n(U,!0),b()}).then(()=>{L==null||L(U,void 0),c=!0,f.forEach(Q=>Q(U))}).catch(Q=>{L==null||L(void 0,Q)})};return s.persist={setOptions:W=>{a={...a,...W},W.getStorage&&(g=W.getStorage())},clearStorage:()=>{g==null||g.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>N(),hasHydrated:()=>c,onHydrate:W=>(i.add(W),()=>{i.delete(W)}),onFinishHydration:W=>(f.add(W),()=>{f.delete(W)})},N(),U||S},hTe=(e,t)=>(n,r,s)=>{let a={storage:Pse(()=>localStorage),partialize:N=>N,version:0,merge:(N,W)=>({...W,...N}),...t},c=!1;const i=new Set,f=new Set;let g=a.storage;if(!g)return e((...N)=>{console.warn(`[zustand persist middleware] Unable to update item '${a.name}', the given storage is currently unavailable.`),n(...N)},r,s);const y=()=>{const N=a.partialize({...r()});return g.setItem(a.name,{state:N,version:a.version})},b=s.setState;s.setState=(N,W)=>{b(N,W),y()};const T=e((...N)=>{n(...N),y()},r,s);s.getInitialState=()=>T;let S;const U=()=>{var N,W;if(!g)return;c=!1,i.forEach(Q=>{var V;return Q((V=r())!=null?V:T)});const L=((W=a.onRehydrateStorage)==null?void 0:W.call(a,(N=r())!=null?N:T))||void 0;return FS(g.getItem.bind(g))(a.name).then(Q=>{if(Q)if(typeof Q.version=="number"&&Q.version!==a.version){if(a.migrate)return[!0,a.migrate(Q.state,Q.version)];console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,Q.state];return[!1,void 0]}).then(Q=>{var V;const[Z,ne]=Q;if(S=a.merge(ne,(V=r())!=null?V:T),n(S,!0),Z)return y()}).then(()=>{L==null||L(S,void 0),S=r(),c=!0,f.forEach(Q=>Q(S))}).catch(Q=>{L==null||L(void 0,Q)})};return s.persist={setOptions:N=>{a={...a,...N},N.storage&&(g=N.storage)},clearStorage:()=>{g==null||g.removeItem(a.name)},getOptions:()=>a,rehydrate:()=>U(),hasHydrated:()=>c,onHydrate:N=>(i.add(N),()=>{i.delete(N)}),onFinishHydration:N=>(f.add(N),()=>{f.delete(N)})},a.skipHydration||U(),S||T},fTe=(e,t)=>"getStorage"in t||"serialize"in t||"deserialize"in t?((GT?"production":void 0)!=="production"&&console.warn("[DEPRECATED] `getStorage`, `serialize` and `deserialize` options are deprecated. Use `storage` option instead."),dTe(e,t)):hTe(e,t),kse=fTe,Lse=Zw()(JF(kse(e=>({messageHistory:[],addMessageToHistory:t=>e(n=>({...n,messageHistory:[t,...(n.messageHistory??[]).slice(0,100)]}))}),{name:"botpress-message-history"})));function pTe(e){const{metadata:t,conversationId:n,userId:r}=e,{payload:s,disableInput:a}=ATe(e.payload);return{id:e.id,conversationId:n,authorId:r,timestamp:new Date(e.createdAt),block:s,disableInput:a,metadata:t}}const ATe=e=>{switch(e.type){case"audio":return Mse(e);case"card":return mTe(e);case"carousel":return gTe(e);case"choice":return yTe(e);case"dropdown":return vTe(e);case"file":return Nse(e);case"image":return Rse(e);case"location":return Ose(e);case"markdown":return Dse(e);case"text":return Use(e);case"video":return zse(e);case"bloc":return xTe(e);case"custom":return{payload:e};case"reaction":return{payload:{type:"text",text:"Unsupported message type"}};default:{const t=e;throw new Error(`Unsuported message type ${t}`)}}},EB=e=>({block:e,type:"bubble"}),Mse=e=>({payload:{type:"audio",url:e.audioUrl}}),mTe=e=>({payload:EB(Qse(e))}),gTe=e=>({payload:{type:"carousel",blocks:e.items.map(t=>Qse({type:"card",...t}))}}),yTe=e=>{const t=e.options.map(a=>({title:a.label,value:a.value})),n=e.text,r=rie(),s=EB({type:"text",text:n});return t.length===0?{disableInput:e.disableFreeText,payload:s}:{disableInput:e.disableFreeText,payload:{type:"column",blocks:[s,{type:"row",blocks:t.map(({title:a,value:c})=>({type:"button",variant:"action",text:a,buttonValue:c,groupId:r}))}]}}},vTe=e=>{const t=e.options.map(s=>({label:s.label,value:s.value})),n=e.text,r=[{type:"dropdown",label:n??"Select an option",options:t}];return n&&r.unshift({type:"text",text:n}),{disableInput:!0,payload:EB({type:"column",blocks:r})}},Nse=e=>({payload:{type:"file",url:e.fileUrl,title:e.title}}),Rse=e=>({payload:{type:"image",url:e.imageUrl}}),Ose=e=>({payload:{type:"location",latitude:e.latitude,longitude:e.longitude,title:e.title??e.address??"View on map"}}),Dse=e=>({payload:EB({type:"text",text:e.markdown})}),Use=e=>({payload:EB({type:"text",text:e.text,value:e.value})}),zse=e=>({payload:{type:"video",url:e.videoUrl}}),xTe=e=>({payload:{type:"column",blocks:e.items.map(t=>{switch(t.type){case"audio":return Mse({...t.payload,type:t.type}).payload;case"file":return Nse({...t.payload,type:t.type}).payload;case"image":return Rse({...t.payload,type:t.type}).payload;case"location":return Ose({...t.payload,type:t.type}).payload;case"markdown":return Dse({...t.payload,type:t.type}).payload;case"text":return Use({...t.payload,type:t.type}).payload;case"video":return zse({...t.payload,type:t.type}).payload;default:throw new Error("Unsuported message type")}})}}),Qse=e=>{const t=e.title,n=e.subtitle,r=e.imageUrl,s=e.actions.map(c=>{switch(c.action){case"postback":return{type:"button",variant:"action",text:c.label,buttonValue:c.value,reusable:!0};case"url":return{type:"button",variant:"link",text:c.label,buttonValue:c.value,reusable:!0};case"say":return{type:"button",variant:"action",text:c.label,buttonValue:c.value,reusable:!0};default:throw new Error(`Unknown action type ${c.action}`)}}),a=[];return r&&a.push({type:"image",url:r}),t&&a.push({type:"text",text:`#### ${t}`}),n&&a.push({type:"text",text:n}),s.length>0&&a.push({type:"row",blocks:s}),{type:"column",horizontalAlignment:"center",blocks:[...a]}};function cD(e){const{metadata:t,conversationId:n,userId:r}=e;return e.payload.type==="reaction"?{id:e.id,conversationId:n,authorId:r,timestamp:new Date(e.createdAt),block:{type:"text",text:e.payload.reaction},metadata:t}:pTe(e)}const B2=Zw()(JF(e=>({messages:[],isFetching:!1,setMessages:t=>e({messages:t}),addMessage:t=>e(({messages:n})=>{var r;const s=(r=t.metadata)==null?void 0:r.clientMessageId;if(s){const a=n.findIndex(c=>{var i;return((i=c.metadata)==null?void 0:i.clientMessageId)===s});if(a!==-1)return{messages:[...n.slice(0,a),t,...n.slice(a+1)]}}return{messages:[...n.filter(a=>a.id!==t.id),t]}}),updateMessage:(t,n)=>e(({messages:r})=>({messages:r.map(s=>s.id===t?{...s,...n}:s)})),clearMessages:()=>e({messages:[]}),fetchMessages:async({client:t,conversationId:n})=>{const r=[];e({isFetching:!0});let s;do{const{messages:a,meta:c}=await t.listConversationMessages({conversationId:n,nextToken:s});r.push(...a),s=c.nextToken}while(s);return e({isFetching:!1}),r.reverse().map(cD).filter(Boolean)},fetchMessagesLegacy:async({client:t,userKey:n,conversationId:r})=>{const s=[];e({isFetching:!0});let a;do{const c=await t.listConversationMessages({id:r,"x-user-key":n,nextToken:a});s.push(...c.messages),a=c.meta.nextToken}while(a);return e({isFetching:!1}),s.reverse()}}),{name:"messagesStore"})),_Te=(e,t)=>Zw()(JF(kse(n=>({setUser:r=>n(s=>({...s,user:r})),setConversationId:r=>n(s=>({...s,conversationId:r})),clearAll:()=>{n(r=>({...r,messageHistory:{},user:void 0,conversationId:void 0}))}}),{name:e,storage:Pse(()=>t==="sessionStorage"?sessionStorage:localStorage)}))),Hse=class KT{constructor(){}static getInstance(t="bp-webchat",n){return KT._instances[t]||(KT._instances[t]=_Te(t,n)),KT._instances[t]}};Hf(Hse,"_instances",{});let wTe=Hse;const bTe=wTe.getInstance,vz=Zw()(JF(e=>({eventEmitter:Fwe,messageContainerRef:{current:null},setMessageContainerRef:t=>e({messageContainerRef:t})}),{name:"webchatStore"})),CTe=8,Y2=Zw()((e,t)=>({files:[],setFiles:n=>e({files:n}),upsertFile:n=>e(({files:r})=>({files:r.some(s=>s.name===n.name)?r.map(s=>s.name===n.name?{...s,...n}:s):[...r,{...n}]})),uploadFile:async(n,r)=>{const s=t().files.some(c=>c.name===n.name),a=t().files.length===CTe;if(!(!s&&a)){t().upsertFile({name:n.name,type:"file",instance:n,status:"loading"});try{const{fileUrl:c,type:i}=await r(n);t().upsertFile({name:n.name,type:i,url:c,instance:n,status:"uploaded"})}catch(c){console.error("Error sending file:",c),t().upsertFile({name:n.name,type:"file",instance:n,status:"error"})}}},deleteFile:n=>e(({files:r})=>({files:r.filter(s=>s.name!=n)}))})),STe=({text:e,buttonValue:t,variant:n,groupId:r,reusable:s,sendMessage:a,isReadOnly:c,...i})=>{const f=vz(Q=>Q.eventEmitter),[g,y]=q.useState(!1),[b,T]=q.useState(!1),[S,U]=q.useState(!1),{message:{blocks:{button:N}}}=qo;q.useEffect(()=>{if(r)return f.on(`button-group-${r}-click`,()=>{T(!0),s||U(!0)})},[f,r,s]);const W={...i,onClick:Q=>{if((S||c)&&n==="link"){Q.preventDefault();return}y(!0),s||U(!0),r&&f.emit(`button-group-${r}-click`),n!=="link"&&a&&(a==null||a({type:"text",text:e,value:t}))},"data-activated":g?"":void 0,"data-group-activated":b?"":void 0,"data-type":n,...N},L=S||c;return n==="link"?zt.jsx("a",{...W,style:c?{pointerEvents:"none"}:void 0,href:t,target:"_blank",rel:"noopener noreferrer",children:e}):zt.jsx("button",{...W,style:c?{pointerEvents:"none"}:void 0,disabled:L,children:e})},Vse=q.forwardRef(({block:e,direction:t,timestamp:n,sender:r,metadata:s,sendMessage:a,messageId:c,isReadOnly:i,...f},g)=>{const{message:{blocks:{bubble:y}}}=qo;return zt.jsx("div",{"data-direction":t,...f,...y,ref:g,children:zt.jsx(kB,{block:{...e,direction:t,timestamp:n,sender:r,messageId:c,sendMessage:a,isReadOnly:i},direction:t,timestamp:n,sender:r,metadata:s,sendMessage:a,messageId:c,isReadOnly:i})})});Vse.displayName="Bubble";const $se=q.createContext(null);function BTe(){const e=q.useContext($se);if(!e)throw new Error("useMessageContext must be used within a Message");return e}const Gse=q.createContext(null);function Kse(){const e=q.useContext(Gse);if(!e)throw new Error("useModalContext must be used within a ModalProvider");return e}var Rp=function(){return Rp=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},Rp.apply(this,arguments)};function Wse(e,t){var n={};for(var r in e)Object.prototype.hasOwnProperty.call(e,r)&&t.indexOf(r)<0&&(n[r]=e[r]);if(e!=null&&typeof Object.getOwnPropertySymbols=="function")for(var s=0,r=Object.getOwnPropertySymbols(e);s<r.length;s++)t.indexOf(r[s])<0&&Object.prototype.propertyIsEnumerable.call(e,r[s])&&(n[r[s]]=e[r[s]]);return n}function Xw(e,t,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function i(y){try{g(r.next(y))}catch(b){c(b)}}function f(y){try{g(r.throw(y))}catch(b){c(b)}}function g(y){y.done?a(y.value):s(y.value).then(i,f)}g((r=r.apply(e,[])).next())})}function Yw(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,c=Object.create((typeof Iterator=="function"?Iterator:Object).prototype);return c.next=i(0),c.throw=i(1),c.return=i(2),typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(g){return function(y){return f([g,y])}}function f(g){if(r)throw new TypeError("Generator is already executing.");for(;c&&(c=0,g[0]&&(n=0)),n;)try{if(r=1,s&&(a=g[0]&2?s.return:g[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,g[1])).done)return a;switch(s=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,s=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){n.label=g[1];break}if(g[0]===6&&n.label<a[1]){n.label=a[1],a=g;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(g);break}a[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(y){g=[6,y],s=0}finally{r=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function TK(e,t){var n=typeof Symbol=="function"&&e[Symbol.iterator];if(!n)return e;var r=n.call(e),s,a=[],c;try{for(;(t===void 0||t-- >0)&&!(s=r.next()).done;)a.push(s.value)}catch(i){c={error:i}}finally{try{s&&!s.done&&(n=r.return)&&n.call(r)}finally{if(c)throw c.error}}return a}function uD(e,t,n){if(n||arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||Array.prototype.slice.call(t))}function ETe(){var e=q.useRef(!1),t=q.useCallback(function(){return e.current},[]);return q.useEffect(function(){return e.current=!0,function(){e.current=!1}},[]),t}function TTe(e,t,n){t===void 0&&(t=[]),n===void 0&&(n={loading:!1});var r=q.useRef(0),s=ETe(),a=q.useState(n),c=a[0],i=a[1],f=q.useCallback(function(){for(var g=[],y=0;y<arguments.length;y++)g[y]=arguments[y];var b=++r.current;return c.loading||i(function(T){return Rp(Rp({},T),{loading:!0})}),e.apply(void 0,g).then(function(T){return s()&&b===r.current&&i({value:T,loading:!1}),T},function(T){return s()&&b===r.current&&i({error:T,loading:!1}),T})},t);return[c,f]}function ITe(e,t){t===void 0&&(t=[]);var n=TTe(e,t,{loading:!0}),r=n[0],s=n[1];return q.useEffect(function(){s()},[s]),r}const qse=q.forwardRef(({url:e,type:t,orientation:n="auto",...r},s)=>{const a=q.useId(),{setIsLoading:c}=BTe(),[i,f]=q.useState(n),[g,y]=q.useState(!1),{message:{blocks:{image:b}}}=qo;return q.useLayoutEffect(()=>{c(T=>[...T,a])},[]),ITe(async()=>{if(e){try{const{width:T,height:S}=await t2e(e);i==="auto"&&f(jTe(T,S))}catch(T){f("square"),console.error(T)}c(T=>T.filter(S=>S!==a))}},[e]),zt.jsxs(zt.Fragment,{children:[g?null:zt.jsx("div",{"data-orientation":i,...b.placeholder}),zt.jsx("img",{"data-orientation":i,"data-loaded":g,...r,...b.image,src:e,alt:"",ref:s,loading:"lazy",onLoad:()=>{y(!0)}})]})});qse.displayName="Image";function jTe(e,t){const n={square:1,portrait:.75,landscape:1.3333333333333333},r=e/t;return Object.keys(n).reduce((s,a)=>Math.abs(n[a]-r)<Math.abs(n[s]-r)?a:s)}const Zse=q.forwardRef(({url:e,isReadOnly:t,...n},r)=>{const{message:{blocks:{video:s}}}=qo;return zt.jsx("div",{children:zt.jsx("video",{...n,"data-chromatic":"ignore",style:t?{pointerEvents:"none"}:void 0,controls:!0,src:e,...s,ref:r})})});Zse.displayName="Video";const Xse=q.forwardRef(({url:e,isReadOnly:t,...n},r)=>{const{message:{blocks:{audio:s}}}=qo;return zt.jsx("div",{children:zt.jsx("audio",{...n,controls:!0,style:t?{pointerEvents:"none"}:void 0,src:e,...s,ref:r})})});Xse.displayName="Audio";function FTe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M15.312 11.424a5.5 5.5 0 0 1-9.201 2.466l-.312-.311h2.433a.75.75 0 0 0 0-1.5H3.989a.75.75 0 0 0-.75.75v4.242a.75.75 0 0 0 1.5 0v-2.43l.31.31a7 7 0 0 0 11.712-3.138.75.75 0 0 0-1.449-.39Zm1.23-3.723a.75.75 0 0 0 .219-.53V2.929a.75.75 0 0 0-1.5 0V5.36l-.31-.31A7 7 0 0 0 3.239 8.188a.75.75 0 1 0 1.448.389A5.5 5.5 0 0 1 13.89 6.11l.311.31h-2.432a.75.75 0 0 0 0 1.5h4.243a.75.75 0 0 0 .53-.219Z",clipRule:"evenodd"}))}const PTe=q.forwardRef(FTe);function kTe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"}))}const LTe=q.forwardRef(kTe);function MTe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M4.5 2A1.5 1.5 0 0 0 3 3.5v13A1.5 1.5 0 0 0 4.5 18h11a1.5 1.5 0 0 0 1.5-1.5V7.621a1.5 1.5 0 0 0-.44-1.06l-4.12-4.122A1.5 1.5 0 0 0 11.378 2H4.5Zm4.75 6.75a.75.75 0 0 1 1.5 0v2.546l.943-1.048a.75.75 0 0 1 1.114 1.004l-2.25 2.5a.75.75 0 0 1-1.114 0l-2.25-2.5a.75.75 0 1 1 1.114-1.004l.943 1.048V8.75Z",clipRule:"evenodd"}))}const NTe=q.forwardRef(MTe);function RTe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M18 10a8 8 0 1 1-16 0 8 8 0 0 1 16 0Zm-8-5a.75.75 0 0 1 .75.75v4.5a.75.75 0 0 1-1.5 0v-4.5A.75.75 0 0 1 10 5Zm0 10a1 1 0 1 0 0-2 1 1 0 0 0 0 2Z",clipRule:"evenodd"}))}const OTe=q.forwardRef(RTe);function DTe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"m9.69 18.933.003.001C9.89 19.02 10 19 10 19s.11.02.308-.066l.002-.001.006-.003.018-.008a5.741 5.741 0 0 0 .281-.14c.186-.096.446-.24.757-.433.62-.384 1.445-.966 2.274-1.765C15.302 14.988 17 12.493 17 9A7 7 0 1 0 3 9c0 3.492 1.698 5.988 3.355 7.584a13.731 13.731 0 0 0 2.273 1.765 11.842 11.842 0 0 0 .976.544l.062.029.018.008.006.003ZM10 11.25a2.25 2.25 0 1 0 0-4.5 2.25 2.25 0 0 0 0 4.5Z",clipRule:"evenodd"}))}const UTe=q.forwardRef(DTe);function zTe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M10 18a8 8 0 1 0 0-16 8 8 0 0 0 0 16ZM8.28 7.22a.75.75 0 0 0-1.06 1.06L8.94 10l-1.72 1.72a.75.75 0 1 0 1.06 1.06L10 11.06l1.72 1.72a.75.75 0 1 0 1.06-1.06L11.06 10l1.72-1.72a.75.75 0 0 0-1.06-1.06L10 8.94 8.28 7.22Z",clipRule:"evenodd"}))}const sN=q.forwardRef(zTe),Yse=q.forwardRef(({latitude:e,longitude:t,title:n,isReadOnly:r,...s},a)=>{const c=`https://www.google.com/maps/search/?api=1&query=${e},${t}`,{message:{blocks:{location:i}}}=qo;return zt.jsxs("a",{...s,...i.container,style:r?{pointerEvents:"none"}:void 0,href:c,type:"_blank",rel:"noopener",ref:a,children:[zt.jsx("p",{...i.title,children:n}),zt.jsx(UTe,{...i.icon})]})});Yse.displayName="Location";const Jse=q.forwardRef(({blocks:e,horizontalAlignment:t,verticalAlignment:n,direction:r,sender:s,timestamp:a,metadata:c,messageId:i,sendMessage:f,isReadOnly:g,...y},b)=>{const{message:{blocks:{column:T}}}=qo;return zt.jsx("div",{"data-horizontal":t,"data-vertical":n,...y,...T,ref:b,children:e.map((S,U)=>zt.jsx(kB,{block:{...S,direction:r,timestamp:a,sender:s,messageId:i,sendMessage:f,isReadOnly:g},direction:r,timestamp:a,sender:s,metadata:c,sendMessage:f,messageId:i,isReadOnly:g},U))})});Jse.displayName="Column";const eoe=q.forwardRef(({blocks:e,horizontalAlignment:t,verticalAlignment:n,direction:r,sender:s,timestamp:a,metadata:c,sendMessage:i,messageId:f,isReadOnly:g,...y},b)=>{const{message:{blocks:{row:T}}}=qo;return zt.jsx("div",{"data-horizontal":t,"data-vertical":n,...y,...T,ref:b,children:e.map((S,U)=>zt.jsx(kB,{block:{...S,direction:r,timestamp:a,sender:s,messageId:f,sendMessage:i,isReadOnly:g},direction:r,sender:s,timestamp:a,metadata:c,sendMessage:i,messageId:f,isReadOnly:g},U))})});eoe.displayName="Row";function QTe(e){return Object.prototype.toString.call(e)==="[object Object]"}function IK(e){return QTe(e)||Array.isArray(e)}function HTe(){return!!(typeof window<"u"&&window.document&&window.document.createElement)}function xz(e,t){const n=Object.keys(e),r=Object.keys(t);if(n.length!==r.length)return!1;const s=JSON.stringify(Object.keys(e.breakpoints||{})),a=JSON.stringify(Object.keys(t.breakpoints||{}));return s!==a?!1:n.every(c=>{const i=e[c],f=t[c];return typeof i=="function"?`${i}`==`${f}`:!IK(i)||!IK(f)?i===f:xz(i,f)})}function jK(e){return e.concat().sort((t,n)=>t.name>n.name?1:-1).map(t=>t.options)}function VTe(e,t){if(e.length!==t.length)return!1;const n=jK(e),r=jK(t);return n.every((s,a)=>{const c=r[a];return xz(s,c)})}function _z(e){return typeof e=="number"}function FK(e){return typeof e=="string"}function wz(e){return typeof e=="boolean"}function PK(e){return Object.prototype.toString.call(e)==="[object Object]"}function ql(e){return Math.abs(e)}function bz(e){return Math.sign(e)}function WT(e,t){return ql(e-t)}function $Te(e,t){if(e===0||t===0||ql(e)<=ql(t))return 0;const n=WT(ql(e),ql(t));return ql(n/e)}function PS(e){return _j(e).map(Number)}function Zg(e){return e[eP(e)]}function eP(e){return Math.max(0,e.length-1)}function _j(e){return Object.keys(e)}function toe(e,t){return[e,t].reduce((n,r)=>(_j(r).forEach(s=>{const a=n[s],c=r[s],i=PK(a)&&PK(c);n[s]=i?toe(a,c):c}),n),{})}function noe(e,t){return typeof t.MouseEvent<"u"&&e instanceof t.MouseEvent}function GTe(e,t){const n={start:r,center:s,end:a};function r(){return 0}function s(f){return a(f)/2}function a(f){return t-f}function c(){return t*Number(e)}function i(f){return _z(e)?c():n[e](f)}return{measure:i}}function KTe(e,t){const n=e==="y"?"y":"x",r=e==="y"?"x":"y",s=i(),a=f();function c(g){const{width:y,height:b}=g;return n==="x"?y:b}function i(){return n==="y"?"top":t==="rtl"?"right":"left"}function f(){return n==="y"?"bottom":t==="rtl"?"left":"right"}return{scroll:n,cross:r,startEdge:s,endEdge:a,measureSize:c}}function Hy(e,t){const n=ql(e-t);function r(f){return f<e}function s(f){return f>t}function a(f){return r(f)||s(f)}function c(f){return a(f)?r(f)?e:t:f}function i(f){return n?f-n*Math.ceil((f-t)/n):f}return{length:n,max:t,min:e,constrain:c,reachedAny:a,reachedMax:s,reachedMin:r,removeOffset:i}}function roe(e,t,n){const{constrain:r}=Hy(0,e),s=e+1;let a=c(t);function c(T){return n?ql((s+T)%s):r(T)}function i(){return a}function f(T){return a=c(T),b}function g(T){return y().set(i()+T)}function y(){return roe(e,i(),n)}const b={get:i,set:f,add:g,clone:y};return b}function WTe(e){const t=e==="rtl"?-1:1;function n(r){return r*t}return{apply:n}}function kS(){let e=[];function t(s,a,c,i={passive:!0}){return s.addEventListener(a,c,i),e.push(()=>s.removeEventListener(a,c,i)),r}function n(){e=e.filter(s=>s())}const r={add:t,clear:n};return r}function qTe(e,t,n,r,s,a,c,i,f,g,y,b,T,S,U,N,W,L,Q){const{cross:V}=e,Z=["INPUT","SELECT","TEXTAREA"],ne={passive:!1},Y=kS(),le=kS(),pe=Hy(50,225).constrain(U.measure(20)),_e={mouse:300,touch:400},ye={mouse:500,touch:600},he=N?43:25;let be=!1,Te=0,Ee=0,Ne=!1,Ge=!1,Je=!1,Ue=!1;function Qe(Me,Ht){if(!Ht)return;function Zt(Dt){(wz(Ht)||Ht(Me,Dt))&&ot(Dt)}const pn=n;Y.add(pn,"dragstart",Dt=>Dt.preventDefault(),ne).add(pn,"touchmove",()=>{},ne).add(pn,"touchend",()=>{}).add(pn,"touchstart",Zt).add(pn,"mousedown",Zt).add(pn,"touchcancel",Qt).add(pn,"contextmenu",Qt).add(pn,"click",Ot,!0)}function xe(){Y.clear(),le.clear()}function at(){const Me=Ue?r:n;le.add(Me,"touchmove",vt,ne).add(Me,"touchend",Qt).add(Me,"mousemove",vt,ne).add(Me,"mouseup",Qt)}function we(Me){const Ht=Me.nodeName||"";return Z.includes(Ht)}function me(){return(N?ye:_e)[Ue?"mouse":"touch"]}function Ze(Me,Ht){const Zt=T.add(bz(Me)*-1),pn=b.byDistance(Me,!N).distance;return N||ql(Me)<pe?pn:L&&Ht?pn*.5:b.byIndex(Zt.get(),0).distance}function ot(Me){const Ht=noe(Me,s);Ue=Ht,!(Ht&&Me.button!==0)&&(we(Me.target)||(Je=N&&Ht&&!Me.buttons&&be,be=WT(a.get(),i.get())>=2,Ne=!0,c.pointerDown(Me),y.useFriction(0).useDuration(0),a.set(i),at(),Te=c.readPoint(Me),Ee=c.readPoint(Me,V),S.emit("pointerDown")))}function vt(Me){const Ht=c.readPoint(Me),Zt=c.readPoint(Me,V),pn=WT(Ht,Te),Dt=WT(Zt,Ee);if(!Ge&&!Ue&&(!Me.cancelable||(Ge=pn>Dt,!Ge)))return Qt(Me);const hn=c.pointerMove(Me);pn>W&&(Je=!0),y.useFriction(.3).useDuration(1),f.start(),a.add(t.apply(hn)),Me.preventDefault()}function Qt(Me){const Ht=b.byDistance(0,!1).index!==T.get(),Zt=c.pointerUp(Me)*me(),pn=Ze(t.apply(Zt),Ht),Dt=$Te(Zt,pn),hn=he-10*Dt,Oe=Q+Dt/50;Ge=!1,Ne=!1,le.clear(),y.useDuration(hn).useFriction(Oe),g.distance(pn,!N),Ue=!1,S.emit("pointerUp")}function Ot(Me){Je&&(Me.stopPropagation(),Me.preventDefault())}function kt(){return Ne}return{init:Qe,pointerDown:kt,destroy:xe}}function ZTe(e,t){let n,r;function s(g){return g.timeStamp}function a(g,y){const b=`client${(y||e.scroll)==="x"?"X":"Y"}`;return(noe(g,t)?g:g.touches[0])[b]}function c(g){return n=g,r=g,a(g)}function i(g){const y=a(g)-a(r),b=s(g)-s(n)>170;return r=g,b&&(n=g),y}function f(g){if(!n||!r)return 0;const y=a(r)-a(n),b=s(g)-s(n),T=s(g)-s(r)>170,S=y/b;return b&&!T&&ql(S)>.1?S:0}return{pointerDown:c,pointerMove:i,pointerUp:f,readPoint:a}}function XTe(e){function t(n){return e*(n/100)}return{measure:t}}function YTe(e,t,n,r,s){let a,c,i=[],f=!1;function g(T){return s.measureSize(T.getBoundingClientRect())}function y(T,S){if(!S)return;c=g(e),i=r.map(g);function U(N){for(const W of N){const L=W.target===e,Q=r.indexOf(W.target),V=L?c:i[Q],Z=g(L?e:r[Q]);if(V!==Z){n.requestAnimationFrame(()=>{T.reInit(),t.emit("resize")});break}}}a=new ResizeObserver(N=>{f||(wz(S)||S(T,N))&&U(N)}),[e].concat(r).forEach(N=>a.observe(N))}function b(){a&&a.disconnect(),f=!0}return{init:y,destroy:b}}function JTe(e,t,n,r){let s=!0,a=0,c=0,i=n,f=r,g=e.get(),y=0;function b(){const ne=t.get()-e.get(),Y=!i;let le=0;return Y?(a=0,e.set(t),le=ne):(a+=ne/i,a*=f,g+=a,e.add(a),le=g-y),c=bz(le),y=g,s=ql(ne)<.001,Z}function T(){return s}function S(){return i}function U(){return c}function N(){return a}function W(){return Q(n)}function L(){return V(r)}function Q(ne){return i=ne,Z}function V(ne){return f=ne,Z}const Z={direction:U,duration:S,velocity:N,seek:b,settled:T,useBaseFriction:L,useBaseDuration:W,useFriction:V,useDuration:Q};return Z}function eIe(e,t,n,r,s){const a=s.measure(10),c=s.measure(50),i=Hy(.1,.99);let f=!1;function g(){return!(f||!e.reachedAny(n.get())||!e.reachedAny(t.get()))}function y(T){if(!g())return;const S=e.reachedMin(t.get())?"min":"max",U=ql(e[S]-t.get()),N=n.get()-t.get(),W=i.constrain(U/c);n.subtract(N*W),!T&&ql(N)<a&&(n.set(e.constrain(n.get())),r.useDuration(25).useBaseFriction())}function b(T){f=!T}return{constrain:y,toggleActive:b}}function tIe(e,t,n,r){const s=Hy(-t+e,n[0]),a=f(),c=g();function i(){const y=a[0],b=Zg(a),T=a.lastIndexOf(y),S=a.indexOf(b)+1;return Hy(T,S)}function f(){return n.map(s.constrain).map(y=>parseFloat(y.toFixed(3)))}function g(){if(t<=e)return[s.max];if(r==="keepSnaps")return a;const{min:y,max:b}=i();return a.slice(y,b)}return{snapsContained:c}}function nIe(e,t,n){const r=t[0],s=n?r-e:Zg(t);return{limit:Hy(s,r)}}function rIe(e,t,n,r){const s=t.min+.1,a=t.max+.1,{reachedMin:c,reachedMax:i}=Hy(s,a);function f(y){return y===1?i(n.get()):y===-1?c(n.get()):!1}function g(y){if(!f(y))return;const b=e*(y*-1);r.forEach(T=>T.add(b))}return{loop:g}}function iIe(e){const{max:t,length:n}=e;function r(s){return(s-t)/-n}return{get:r}}function sIe(e,t,n,r,s,a,c){const{startEdge:i,endEdge:f}=e,{groupSlides:g}=a,y=S().map(t.measure),b=U(),T=N();function S(){return g(r).map(W=>Zg(W)[f]-W[0][i]).map(ql)}function U(){return r.map(W=>n[i]-W[i]).map(W=>-ql(W))}function N(){const W=Zg(b)-Zg(s);return g(b).map(L=>L[0]).map((L,Q,V)=>{const Z=!Q,ne=Q===eP(V);return c&&Z?0:c&&ne?W:L+y[Q]})}return{snaps:b,snapsAligned:T}}function oIe(e,t,n,r,s){const{reachedAny:a,removeOffset:c,constrain:i}=r;function f(S){return S.concat().sort((U,N)=>ql(U)-ql(N))[0]}function g(S){const U=e?c(S):i(S),N=t.map(L=>L-U).map(L=>y(L,0)).map((L,Q)=>({diff:L,index:Q})).sort((L,Q)=>ql(L.diff)-ql(Q.diff)),{index:W}=N[0];return{index:W,distance:U}}function y(S,U){const N=[S,S+n,S-n];if(!e)return N[0];if(!U)return f(N);const W=N.filter(L=>bz(L)===U);return f(W)}function b(S,U){const N=t[S]-s.get(),W=y(N,U);return{index:S,distance:W}}function T(S,U){const N=s.get()+S,{index:W,distance:L}=g(N),Q=!e&&a(N);if(!U||Q)return{index:W,distance:S};const V=t[W]-L,Z=S+y(V,0);return{index:W,distance:Z}}return{byDistance:T,byIndex:b,shortcut:y}}function aIe(e,t,n,r,s,a,c){function i(y){const b=y.distance,T=y.index!==t.get();a.add(b),b&&(s.duration()?e.start():(e.update(),e.render(1),e.update())),T&&(n.set(t.get()),t.set(y.index),c.emit("select"))}function f(y,b){const T=r.byDistance(y,b);i(T)}function g(y,b){const T=t.clone().set(y),S=r.byIndex(T.get(),b);i(S)}return{distance:f,index:g}}function qT(e){let t=e;function n(){return t}function r(i){t=c(i)}function s(i){t+=c(i)}function a(i){t-=c(i)}function c(i){return _z(i)?i:i.get()}return{get:n,set:r,add:s,subtract:a}}function ioe(e,t,n){const r=e.scroll==="x"?c:i,s=n.style;let a=!1;function c(b){return`translate3d(${b}px,0px,0px)`}function i(b){return`translate3d(0px,${b}px,0px)`}function f(b){a||(s.transform=r(t.apply(b)))}function g(b){a=!b}function y(){a||(s.transform="",n.getAttribute("style")||n.removeAttribute("style"))}return{clear:y,to:f,toggleActive:g}}function lIe(e,t,n,r,s,a,c,i,f){const g=PS(s),y=PS(s).reverse(),b=N().concat(W());function T(Z,ne){return Z.reduce((Y,le)=>Y-s[le],ne)}function S(Z,ne){return Z.reduce((Y,le)=>T(Y,ne)>0?Y.concat([le]):Y,[])}function U(Z,ne){const Y=ne==="start",le=Y?-r:r,pe=c.findSlideBounds([le]);return Z.map(_e=>{const ye=Y?0:-r,he=Y?r:0,be=pe.filter(Te=>Te.index===_e)[0][Y?"end":"start"];return{index:_e,slideLocation:qT(-1),translate:ioe(e,t,f[_e]),target:()=>i.get()>be?ye:he}})}function N(){const Z=a[0]-1,ne=S(y,Z);return U(ne,"end")}function W(){const Z=n-a[0]-1,ne=S(g,Z);return U(ne,"start")}function L(){return b.every(({index:Z})=>{const ne=g.filter(Y=>Y!==Z);return T(ne,n)<=.1})}function Q(){b.forEach(Z=>{const{target:ne,translate:Y,slideLocation:le}=Z,pe=ne();pe!==le.get()&&(Y.to(pe),le.set(pe))})}function V(){b.forEach(Z=>Z.translate.clear())}return{canLoop:L,clear:V,loop:Q,loopPoints:b}}function cIe(e,t){let n,r=!1;function s(c,i){if(!i)return;function f(g){for(const y of g)if(y.type==="childList"){c.reInit(),t.emit("slidesChanged");break}}n=new MutationObserver(g=>{r||(wz(i)||i(c,g))&&f(g)}),n.observe(e,{childList:!0})}function a(){n&&n.disconnect(),r=!0}return{init:s,destroy:a}}function uIe(e,t,n,r,s,a,c){const{removeOffset:i,constrain:f}=s,g=.5,y=a?[0,t,-t]:[0],b=S(y,c);function T(N){const W=N||0;return n.map(L=>Hy(g,L-g).constrain(L*W))}function S(N,W){const L=N||y,Q=T(W);return L.reduce((V,Z)=>{const ne=r.map((Y,le)=>({start:Y-n[le]+Q[le]+Z,end:Y+e-Q[le]+Z,index:le}));return V.concat(ne)},[])}function U(N,W){const L=a?i(N):f(N);return(W||b).reduce((Q,V)=>{const{index:Z,start:ne,end:Y}=V,le=Q.includes(Z),pe=ne<L&&Y>L;return!le&&pe?Q.concat([Z]):Q},[])}return{check:U,findSlideBounds:S}}function dIe(e,t,n,r,s,a){const{measureSize:c,startEdge:i,endEdge:f}=e,g=n[0]&&s,y=U(),b=N(),T=n.map(c),S=W();function U(){if(!g)return 0;const L=n[0];return ql(t[i]-L[i])}function N(){if(!g)return 0;const L=a.getComputedStyle(Zg(r));return parseFloat(L.getPropertyValue(`margin-${f}`))}function W(){return n.map((L,Q,V)=>{const Z=!Q,ne=Q===eP(V);return Z?T[Q]+y:ne?T[Q]+b:V[Q+1][i]-L[i]}).map(ql)}return{slideSizes:T,slideSizesWithGaps:S}}function hIe(e,t,n){const r=_z(n);function s(i,f){return PS(i).filter(g=>g%f===0).map(g=>i.slice(g,g+f))}function a(i){return PS(i).reduce((f,g)=>{const y=t.slice(Zg(f),g+1).reduce((b,T)=>b+T,0);return!g||y>e?f.concat(g):f},[]).map((f,g,y)=>i.slice(f,y[g+1]))}function c(i){return r?s(i,n):a(i)}return{groupSlides:c}}function fIe(e,t,n,r,s,a,c,i){const{align:f,axis:g,direction:y,startIndex:b,inViewThreshold:T,loop:S,duration:U,dragFree:N,dragThreshold:W,slidesToScroll:L,skipSnaps:Q,containScroll:V}=a,Z=t.getBoundingClientRect(),ne=n.map(Vt=>Vt.getBoundingClientRect()),Y=WTe(y),le=KTe(g,y),pe=le.measureSize(Z),_e=XTe(pe),ye=GTe(f,pe),he=!S&&!!V,be=S||!!V,{slideSizes:Te,slideSizesWithGaps:Ee}=dIe(le,Z,ne,n,be,s),Ne=hIe(pe,Ee,L),{snaps:Ge,snapsAligned:Je}=sIe(le,ye,Z,ne,Ee,Ne,he),Ue=-Zg(Ge)+Zg(Ee),{snapsContained:Qe}=tIe(pe,Ue,Je,V),xe=he?Qe:Je,{limit:at}=nIe(Ue,xe,S),we=roe(eP(xe),b,S),me=we.clone(),Ze=PS(n),ot=({dragHandler:Vt,scrollBody:$t,scrollBounds:xn,eventHandler:Xt,animation:gn,options:{loop:rr}})=>{const Gt=Vt.pointerDown();rr||xn.constrain(Gt);const Rn=$t.seek().settled();Rn&&!Gt&&(gn.stop(),Xt.emit("settle")),Rn||Xt.emit("scroll")},vt=({scrollBody:Vt,translate:$t,location:xn,offsetLocation:Xt,scrollLooper:gn,slideLooper:rr,options:{loop:Gt}},Rn)=>{const wt=Vt.velocity();Xt.set(xn.get()-wt+wt*Rn),Gt&&(gn.loop(Vt.direction()),rr.loop()),$t.to(Xt.get())},Qt={start:()=>i.start(nn),stop:()=>i.stop(nn),update:()=>ot(nn),render:Vt=>vt(nn,Vt)},Ot=.68,kt=xe[we.get()],Me=qT(kt),Ht=qT(kt),Zt=qT(kt),pn=JTe(Me,Zt,U,Ot),Dt=oIe(S,xe,Ue,at,Zt),hn=aIe(Qt,we,me,Dt,pn,Zt,c),Oe=uIe(pe,Ue,Te,Ge,at,S,T),nn={ownerDocument:r,ownerWindow:s,eventHandler:c,containerRect:Z,slideRects:ne,animation:Qt,axis:le,direction:Y,dragHandler:qTe(le,Y,e,r,s,Zt,ZTe(le,s),Me,Qt,hn,pn,Dt,we,c,_e,N,W,Q,Ot),eventStore:kS(),percentOfView:_e,index:we,indexPrevious:me,limit:at,location:Me,offsetLocation:Ht,options:a,resizeHandler:YTe(t,c,s,n,le),scrollBody:pn,scrollBounds:eIe(at,Me,Zt,pn,_e),scrollLooper:rIe(Ue,at,Ht,[Me,Ht,Zt]),scrollProgress:iIe(at),scrollSnaps:xe,scrollTarget:Dt,scrollTo:hn,slideLooper:lIe(le,Y,pe,Ue,Ee,xe,Oe,Ht,n),slidesHandler:cIe(t,c),slidesInView:Oe,slideIndexes:Ze,slidesToScroll:Ne,target:Zt,translate:ioe(le,Y,t)};return nn}function pIe(e){const t=16.666666666666668;let n=[],r=null,s=0,a=0;function c(y){r||(r=y);const b=y-r;for(r=y,s+=b;s>=t;)n.forEach(({animation:S})=>S.update()),s-=t;const T=ql(s/t);n.forEach(({animation:S})=>S.render(T)),a&&e.requestAnimationFrame(c)}function i(y){n.includes(y)||n.push(y),!a&&(a=e.requestAnimationFrame(c))}function f(y){n=n.filter(b=>b!==y),!n.length&&(e.cancelAnimationFrame(a),r=null,s=0,a=0)}function g(){r=null,s=0}return{start:i,stop:f,reset:g,window:e}}function AIe(){const e={};let t;function n(f){t=f}function r(f){return e[f]||[]}function s(f){return r(f).forEach(g=>g(t,f)),i}function a(f,g){return e[f]=r(f).concat([g]),i}function c(f,g){return e[f]=r(f).filter(y=>y!==g),i}const i={init:n,emit:s,off:c,on:a};return i}const mIe={align:"center",axis:"x",container:null,slides:null,containScroll:"trimSnaps",direction:"ltr",slidesToScroll:1,breakpoints:{},dragFree:!1,dragThreshold:10,inViewThreshold:0,loop:!1,skipSnaps:!1,duration:25,startIndex:0,active:!0,watchDrag:!0,watchResize:!0,watchSlides:!0};function gIe(e){function t(s,a){return toe(s,a||{})}function n(s){const a=s.breakpoints||{},c=_j(a).filter(i=>e.matchMedia(i).matches).map(i=>a[i]).reduce((i,f)=>t(i,f),{});return t(s,c)}function r(s){return s.map(a=>_j(a.breakpoints||{})).reduce((a,c)=>a.concat(c),[]).map(e.matchMedia)}return{mergeOptions:t,optionsAtMedia:n,optionsMediaQueries:r}}function yIe(e){let t=[];function n(s,a){return t=s.filter(({options:c})=>e.optionsAtMedia(c).active!==!1),t.forEach(c=>c.init(a,e)),s.reduce((c,i)=>Object.assign(c,{[i.name]:i}),{})}function r(){t=t.filter(s=>s.destroy())}return{init:n,destroy:r}}function Bw(e,t,n){const r=e.ownerDocument,s=r.defaultView,a=gIe(s),c=yIe(a),i=kS(),f=kS(),g=AIe(),{animationRealms:y}=Bw,{mergeOptions:b,optionsAtMedia:T,optionsMediaQueries:S}=a,{on:U,off:N,emit:W}=g,L=Te;let Q=!1,V,Z=b(mIe,Bw.globalOptions),ne=b(Z),Y=[],le,pe,_e;function ye(){const{container:pn,slides:Dt}=ne;pe=(FK(pn)?e.querySelector(pn):pn)||e.children[0];const hn=FK(Dt)?pe.querySelectorAll(Dt):Dt;_e=[].slice.call(hn||pe.children)}function he(pn,Dt){const hn=fIe(e,pe,_e,r,s,pn,g,Dt);if(pn.loop&&!hn.slideLooper.canLoop()){const Oe=Object.assign({},pn,{loop:!1});return he(Oe,Dt)}return hn}function be(pn,Dt){if(Q)return;const hn=y.find(nn=>nn.window===s),Oe=hn||pIe(s);hn||y.push(Oe),Z=b(Z,pn),ne=T(Z),Y=Dt||Y,ye(),V=he(ne,Oe),S([Z,...Y.map(({options:nn})=>nn)]).forEach(nn=>i.add(nn,"change",Te)),ne.active&&(V.translate.to(V.location.get()),V.eventHandler.init(Zt),V.resizeHandler.init(Zt,ne.watchResize),V.slidesHandler.init(Zt,ne.watchSlides),f.add(r,"visibilitychange",()=>{r.hidden&&Oe.reset()}),V.options.loop&&V.slideLooper.loop(),pe.offsetParent&&_e.length&&V.dragHandler.init(Zt,ne.watchDrag),le=c.init(Y,Zt))}function Te(pn,Dt){const hn=ot();Ee(),be(b({startIndex:hn},pn),Dt),g.emit("reInit")}function Ee(){V.dragHandler.destroy(),V.animation.stop(),V.eventStore.clear(),V.translate.clear(),V.slideLooper.clear(),V.resizeHandler.destroy(),V.slidesHandler.destroy(),c.destroy(),i.clear(),f.clear()}function Ne(){Q||(Q=!0,i.clear(),Ee(),g.emit("destroy"))}function Ge(pn){const Dt=V[pn?"target":"location"].get(),hn=ne.loop?"removeOffset":"constrain";return V.slidesInView.check(V.limit[hn](Dt))}function Je(pn){const Dt=Ge(pn);return V.slideIndexes.filter(hn=>!Dt.includes(hn))}function Ue(pn,Dt,hn){!ne.active||Q||(V.scrollBody.useBaseFriction().useDuration(Dt?0:ne.duration),V.scrollTo.index(pn,hn||0))}function Qe(pn){const Dt=V.index.add(1).get();Ue(Dt,pn===!0,-1)}function xe(pn){const Dt=V.index.add(-1).get();Ue(Dt,pn===!0,1)}function at(){return V.index.add(1).get()!==ot()}function we(){return V.index.add(-1).get()!==ot()}function me(){return V.scrollSnaps.map(V.scrollProgress.get)}function Ze(){return V.scrollProgress.get(V.location.get())}function ot(){return V.index.get()}function vt(){return V.indexPrevious.get()}function Qt(){return le}function Ot(){return V}function kt(){return e}function Me(){return pe}function Ht(){return _e}const Zt={canScrollNext:at,canScrollPrev:we,containerNode:Me,internalEngine:Ot,destroy:Ne,off:N,on:U,emit:W,plugins:Qt,previousScrollSnap:vt,reInit:L,rootNode:kt,scrollNext:Qe,scrollPrev:xe,scrollProgress:Ze,scrollSnapList:me,scrollTo:Ue,selectedScrollSnap:ot,slideNodes:Ht,slidesInView:Ge,slidesNotInView:Je};return be(t,n),setTimeout(()=>g.emit("init"),0),Zt}Bw.animationRealms=[];Bw.globalOptions=void 0;function Cz(e={},t=[]){const n=q.useRef(e),r=q.useRef(t),[s,a]=q.useState(),[c,i]=q.useState(),f=q.useCallback(()=>{s&&s.reInit(n.current,r.current)},[s]);return q.useEffect(()=>{if(HTe()&&c){Bw.globalOptions=Cz.globalOptions;const g=Bw(c,n.current,r.current);return a(g),()=>g.destroy()}else a(void 0)},[c,a]),q.useEffect(()=>{xz(n.current,e)||(n.current=e,f())},[e,f]),q.useEffect(()=>{VTe(r.current,t)||(r.current=t,f())},[t,f]),[i,s]}Cz.globalOptions=void 0;function vIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M15.75 2.25H21a.75.75 0 0 1 .75.75v5.25a.75.75 0 0 1-1.5 0V4.81L8.03 17.03a.75.75 0 0 1-1.06-1.06L19.19 3.75h-3.44a.75.75 0 0 1 0-1.5Zm-10.5 4.5a1.5 1.5 0 0 0-1.5 1.5v10.5a1.5 1.5 0 0 0 1.5 1.5h10.5a1.5 1.5 0 0 0 1.5-1.5V10.5a.75.75 0 0 1 1.5 0v8.25a3 3 0 0 1-3 3H5.25a3 3 0 0 1-3-3V8.25a3 3 0 0 1 3-3h8.25a.75.75 0 0 1 0 1.5H5.25Z",clipRule:"evenodd"}))}const xIe=q.forwardRef(vIe);function _Ie({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M7.72 12.53a.75.75 0 0 1 0-1.06l7.5-7.5a.75.75 0 1 1 1.06 1.06L9.31 12l6.97 6.97a.75.75 0 1 1-1.06 1.06l-7.5-7.5Z",clipRule:"evenodd"}))}const wIe=q.forwardRef(_Ie);function bIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M16.28 11.47a.75.75 0 0 1 0 1.06l-7.5 7.5a.75.75 0 0 1-1.06-1.06L14.69 12 7.72 5.03a.75.75 0 0 1 1.06-1.06l7.5 7.5Z",clipRule:"evenodd"}))}const CIe=q.forwardRef(bIe);function SIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M10.5 3.75a6 6 0 0 0-5.98 6.496A5.25 5.25 0 0 0 6.75 20.25H18a4.5 4.5 0 0 0 2.206-8.423 3.75 3.75 0 0 0-4.133-4.303A6.001 6.001 0 0 0 10.5 3.75Zm2.03 5.47a.75.75 0 0 0-1.06 0l-3 3a.75.75 0 1 0 1.06 1.06l1.72-1.72v4.94a.75.75 0 0 0 1.5 0v-4.94l1.72 1.72a.75.75 0 1 0 1.06-1.06l-3-3Z",clipRule:"evenodd"}))}const BIe=q.forwardRef(SIe);function EIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M5.625 1.5c-1.036 0-1.875.84-1.875 1.875v17.25c0 1.035.84 1.875 1.875 1.875h12.75c1.035 0 1.875-.84 1.875-1.875V12.75A3.75 3.75 0 0 0 16.5 9h-1.875a1.875 1.875 0 0 1-1.875-1.875V5.25A3.75 3.75 0 0 0 9 1.5H5.625ZM7.5 15a.75.75 0 0 1 .75-.75h7.5a.75.75 0 0 1 0 1.5h-7.5A.75.75 0 0 1 7.5 15Zm.75 2.25a.75.75 0 0 0 0 1.5H12a.75.75 0 0 0 0-1.5H8.25Z",clipRule:"evenodd"}),q.createElement("path",{d:"M12.971 1.816A5.23 5.23 0 0 1 14.25 5.25v1.875c0 .207.168.375.375.375H16.5a5.23 5.23 0 0 1 3.434 1.279 9.768 9.768 0 0 0-6.963-6.963Z"}))}const TIe=q.forwardRef(EIe);function IIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{d:"M1.5 8.67v8.58a3 3 0 0 0 3 3h15a3 3 0 0 0 3-3V8.67l-8.928 5.493a3 3 0 0 1-3.144 0L1.5 8.67Z"}),q.createElement("path",{d:"M22.5 6.908V6.75a3 3 0 0 0-3-3h-15a3 3 0 0 0-3 3v.158l9.714 5.978a1.5 1.5 0 0 0 1.572 0L22.5 6.908Z"}))}const jIe=q.forwardRef(IIe);function FIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{d:"M21.721 12.752a9.711 9.711 0 0 0-.945-5.003 12.754 12.754 0 0 1-4.339 2.708 18.991 18.991 0 0 1-.214 4.772 17.165 17.165 0 0 0 5.498-2.477ZM14.634 15.55a17.324 17.324 0 0 0 .332-4.647c-.952.227-1.945.347-2.966.347-1.021 0-2.014-.12-2.966-.347a17.515 17.515 0 0 0 .332 4.647 17.385 17.385 0 0 0 5.268 0ZM9.772 17.119a18.963 18.963 0 0 0 4.456 0A17.182 17.182 0 0 1 12 21.724a17.18 17.18 0 0 1-2.228-4.605ZM7.777 15.23a18.87 18.87 0 0 1-.214-4.774 12.753 12.753 0 0 1-4.34-2.708 9.711 9.711 0 0 0-.944 5.004 17.165 17.165 0 0 0 5.498 2.477ZM21.356 14.752a9.765 9.765 0 0 1-7.478 6.817 18.64 18.64 0 0 0 1.988-4.718 18.627 18.627 0 0 0 5.49-2.098ZM2.644 14.752c1.682.971 3.53 1.688 5.49 2.099a18.64 18.64 0 0 0 1.988 4.718 9.765 9.765 0 0 1-7.478-6.816ZM13.878 2.43a9.755 9.755 0 0 1 6.116 3.986 11.267 11.267 0 0 1-3.746 2.504 18.63 18.63 0 0 0-2.37-6.49ZM12 2.276a17.152 17.152 0 0 1 2.805 7.121c-.897.23-1.837.353-2.805.353-.968 0-1.908-.122-2.805-.353A17.151 17.151 0 0 1 12 2.276ZM10.122 2.43a18.629 18.629 0 0 0-2.37 6.49 11.266 11.266 0 0 1-3.746-2.504 9.754 9.754 0 0 1 6.116-3.985Z"}))}const PIe=q.forwardRef(FIe);function kIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M12 1.5a5.25 5.25 0 0 0-5.25 5.25v3a3 3 0 0 0-3 3v6.75a3 3 0 0 0 3 3h10.5a3 3 0 0 0 3-3v-6.75a3 3 0 0 0-3-3v-3c0-2.9-2.35-5.25-5.25-5.25Zm3.75 8.25v-3a3.75 3.75 0 1 0-7.5 0v3h7.5Z",clipRule:"evenodd"}))}const LIe=q.forwardRef(kIe);function MIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M1.5 4.5a3 3 0 0 1 3-3h1.372c.86 0 1.61.586 1.819 1.42l1.105 4.423a1.875 1.875 0 0 1-.694 1.955l-1.293.97c-.135.101-.164.249-.126.352a11.285 11.285 0 0 0 6.697 6.697c.103.038.25.009.352-.126l.97-1.293a1.875 1.875 0 0 1 1.955-.694l4.423 1.105c.834.209 1.42.959 1.42 1.82V19.5a3 3 0 0 1-3 3h-2.25C8.552 22.5 1.5 15.448 1.5 6.75V4.5Z",clipRule:"evenodd"}))}const NIe=q.forwardRef(MIe);function RIe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M12 3.75a.75.75 0 0 1 .75.75v6.75h6.75a.75.75 0 0 1 0 1.5h-6.75v6.75a.75.75 0 0 1-1.5 0v-6.75H4.5a.75.75 0 0 1 0-1.5h6.75V4.5a.75.75 0 0 1 .75-.75Z",clipRule:"evenodd"}))}const OIe=q.forwardRef(RIe),soe=q.forwardRef(({blocks:e,direction:t,sender:n,timestamp:r,metadata:s,sendMessage:a,messageId:c,isReadOnly:i},f)=>{const[g,y]=Cz({skipSnaps:!0,loop:!0}),[b,T]=q.useState(!0),[S,U]=q.useState(!0),N=q.useCallback(()=>y==null?void 0:y.scrollPrev(),[y]),W=q.useCallback(()=>y==null?void 0:y.scrollNext(),[y]),{message:{blocks:{carousel:L}}}=qo,Q=q.useCallback(V=>{T(!V.canScrollPrev()),U(!V.canScrollNext())},[]);return q.useEffect(()=>{y&&(Q(y),y.on("reInit",Q),y.on("select",Q))},[y,Q]),zt.jsxs("div",{...L==null?void 0:L.container,"data-container":"carousel",ref:g,children:[zt.jsx("div",{ref:f,...L==null?void 0:L.slidesContainer,children:e.map((V,Z)=>zt.jsx(kB,{block:{...V,direction:t,timestamp:r,sender:n,messageId:c,sendMessage:a,isReadOnly:i},direction:t,sender:n,timestamp:r,metadata:s,sendMessage:a,messageId:c,isReadOnly:i},Z))}),e.length>1&&zt.jsxs(zt.Fragment,{children:[zt.jsx(wIe,{...L==null?void 0:L.backButton,"data-disabled":b?"":void 0,onClick:N}),zt.jsx(CIe,{...L==null?void 0:L.nextButton,"data-disabled":S?"":void 0,onClick:W})]})]})});soe.displayName="Carousel";const kK=Math.floor;function ooe(e){return aoe(e)?(e.nodeName||"").toLowerCase():"#document"}function TB(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function DIe(e){var t;return(t=(aoe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function aoe(e){return e instanceof Node||e instanceof TB(e).Node}function DA(e){return e instanceof Element||e instanceof TB(e).Element}function Ew(e){return e instanceof HTMLElement||e instanceof TB(e).HTMLElement}function dD(e){return typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof TB(e).ShadowRoot}function UIe(e){return["html","body","#document"].includes(ooe(e))}function zIe(e){return TB(e).getComputedStyle(e)}function QIe(e){if(ooe(e)==="html")return e;const t=e.assignedSlot||e.parentNode||dD(e)&&e.host||DIe(e);return dD(t)?t.host:t}function uy(e){let t=e.activeElement;for(;((n=t)==null||(r=n.shadowRoot)==null?void 0:r.activeElement)!=null;){var n,r;t=t.shadowRoot.activeElement}return t}function $h(e,t){if(!e||!t)return!1;const n=t.getRootNode&&t.getRootNode();if(e.contains(t))return!0;if(n&&dD(n)){let r=t;for(;r;){if(e===r)return!0;r=r.parentNode||r.host}}return!1}function loe(){const e=navigator.userAgentData;return e!=null&&e.platform?e.platform:navigator.platform}function HIe(){const e=navigator.userAgentData;return e&&Array.isArray(e.brands)?e.brands.map(t=>{let{brand:n,version:r}=t;return n+"/"+r}).join(" "):navigator.userAgent}function coe(e){if(e.mozInputSource===0&&e.isTrusted)return!0;const t=/Android/i;return(t.test(loe())||t.test(HIe()))&&e.pointerType?e.type==="click"&&e.buttons===1:e.detail===0&&!e.pointerType}function uoe(e){return e.width===0&&e.height===0||e.width===1&&e.height===1&&e.pressure===0&&e.detail===0&&e.pointerType!=="mouse"||e.width<1&&e.height<1&&e.pressure===0&&e.detail===0}function doe(){return/apple/i.test(navigator.vendor)}function VIe(){return loe().toLowerCase().startsWith("mac")&&!navigator.maxTouchPoints}function LK(e,t){return["mouse","pen"].includes(e)}function $Ie(e){return"nativeEvent"in e}function GIe(e){return e.matches("html,body")}function zA(e){return(e==null?void 0:e.ownerDocument)||document}function oN(e,t){if(t==null)return!1;if("composedPath"in e)return e.composedPath().includes(t);const n=e;return n.target!=null&&t.contains(n.target)}function hoe(e){return"composedPath"in e?e.composedPath()[0]:e.target}const KIe="input:not([type='hidden']):not([disabled]),[contenteditable]:not([contenteditable='false']),textarea:not([disabled])";function foe(e){return Ew(e)&&e.matches(KIe)}function Qu(e){e.preventDefault(),e.stopPropagation()}const Tw=Math.min,Gf=Math.max,wj=Math.round,b3=Math.floor,Vy=e=>({x:e,y:e});function MK(e,t,n){return Gf(e,Tw(t,n))}function tP(e,t){return typeof e=="function"?e(t):e}function IB(e){return e.split("-")[0]}function Sz(e){return e.split("-")[1]}function poe(e){return e==="x"?"y":"x"}function WIe(e){return e==="y"?"height":"width"}function jB(e){return["top","bottom"].includes(IB(e))?"y":"x"}function qIe(e){return poe(jB(e))}function ZIe(e){return{top:0,right:0,bottom:0,left:0,...e}}function XIe(e){return typeof e!="number"?ZIe(e):{top:e,right:e,bottom:e,left:e}}function bj(e){const{x:t,y:n,width:r,height:s}=e;return{width:r,height:s,top:n,left:t,right:t+r,bottom:n+s,x:t,y:n}}function NK(e,t,n){let{reference:r,floating:s}=e;const a=jB(t),c=qIe(t),i=WIe(c),f=IB(t),g=a==="y",y=r.x+r.width/2-s.width/2,b=r.y+r.height/2-s.height/2,T=r[i]/2-s[i]/2;let S;switch(f){case"top":S={x:y,y:r.y-s.height};break;case"bottom":S={x:y,y:r.y+r.height};break;case"right":S={x:r.x+r.width,y:b};break;case"left":S={x:r.x-s.width,y:b};break;default:S={x:r.x,y:r.y}}switch(Sz(t)){case"start":S[c]-=T*(n&&g?-1:1);break;case"end":S[c]+=T*(n&&g?-1:1);break}return S}const YIe=async(e,t,n)=>{const{placement:r="bottom",strategy:s="absolute",middleware:a=[],platform:c}=n,i=a.filter(Boolean),f=await(c.isRTL==null?void 0:c.isRTL(t));let g=await c.getElementRects({reference:e,floating:t,strategy:s}),{x:y,y:b}=NK(g,r,f),T=r,S={},U=0;for(let N=0;N<i.length;N++){const{name:W,fn:L}=i[N],{x:Q,y:V,data:Z,reset:ne}=await L({x:y,y:b,initialPlacement:r,placement:T,strategy:s,middlewareData:S,rects:g,platform:c,elements:{reference:e,floating:t}});y=Q??y,b=V??b,S={...S,[W]:{...S[W],...Z}},ne&&U<=50&&(U++,typeof ne=="object"&&(ne.placement&&(T=ne.placement),ne.rects&&(g=ne.rects===!0?await c.getElementRects({reference:e,floating:t,strategy:s}):ne.rects),{x:y,y:b}=NK(g,T,f)),N=-1)}return{x:y,y:b,placement:T,strategy:s,middlewareData:S}};async function Aoe(e,t){var n;t===void 0&&(t={});const{x:r,y:s,platform:a,rects:c,elements:i,strategy:f}=e,{boundary:g="clippingAncestors",rootBoundary:y="viewport",elementContext:b="floating",altBoundary:T=!1,padding:S=0}=tP(t,e),U=XIe(S),N=i[T?b==="floating"?"reference":"floating":b],W=bj(await a.getClippingRect({element:(n=await(a.isElement==null?void 0:a.isElement(N)))==null||n?N:N.contextElement||await(a.getDocumentElement==null?void 0:a.getDocumentElement(i.floating)),boundary:g,rootBoundary:y,strategy:f})),L=b==="floating"?{x:r,y:s,width:c.floating.width,height:c.floating.height}:c.reference,Q=await(a.getOffsetParent==null?void 0:a.getOffsetParent(i.floating)),V=await(a.isElement==null?void 0:a.isElement(Q))?await(a.getScale==null?void 0:a.getScale(Q))||{x:1,y:1}:{x:1,y:1},Z=bj(a.convertOffsetParentRelativeRectToViewportRelativeRect?await a.convertOffsetParentRelativeRectToViewportRelativeRect({elements:i,rect:L,offsetParent:Q,strategy:f}):L);return{top:(W.top-Z.top+U.top)/V.y,bottom:(Z.bottom-W.bottom+U.bottom)/V.y,left:(W.left-Z.left+U.left)/V.x,right:(Z.right-W.right+U.right)/V.x}}async function JIe(e,t){const{placement:n,platform:r,elements:s}=e,a=await(r.isRTL==null?void 0:r.isRTL(s.floating)),c=IB(n),i=Sz(n),f=jB(n)==="y",g=["left","top"].includes(c)?-1:1,y=a&&f?-1:1,b=tP(t,e);let{mainAxis:T,crossAxis:S,alignmentAxis:U}=typeof b=="number"?{mainAxis:b,crossAxis:0,alignmentAxis:null}:{mainAxis:b.mainAxis||0,crossAxis:b.crossAxis||0,alignmentAxis:b.alignmentAxis};return i&&typeof U=="number"&&(S=i==="end"?U*-1:U),f?{x:S*y,y:T*g}:{x:T*g,y:S*y}}const eje=function(e){return e===void 0&&(e=0),{name:"offset",options:e,async fn(t){var n,r;const{x:s,y:a,placement:c,middlewareData:i}=t,f=await JIe(t,e);return c===((n=i.offset)==null?void 0:n.placement)&&(r=i.arrow)!=null&&r.alignmentOffset?{}:{x:s+f.x,y:a+f.y,data:{...f,placement:c}}}}},tje=function(e){return e===void 0&&(e={}),{name:"shift",options:e,async fn(t){const{x:n,y:r,placement:s}=t,{mainAxis:a=!0,crossAxis:c=!1,limiter:i={fn:W=>{let{x:L,y:Q}=W;return{x:L,y:Q}}},...f}=tP(e,t),g={x:n,y:r},y=await Aoe(t,f),b=jB(IB(s)),T=poe(b);let S=g[T],U=g[b];if(a){const W=T==="y"?"top":"left",L=T==="y"?"bottom":"right",Q=S+y[W],V=S-y[L];S=MK(Q,S,V)}if(c){const W=b==="y"?"top":"left",L=b==="y"?"bottom":"right",Q=U+y[W],V=U-y[L];U=MK(Q,U,V)}const N=i.fn({...t,[T]:S,[b]:U});return{...N,data:{x:N.x-n,y:N.y-r,enabled:{[T]:a,[b]:c}}}}}},nje=function(e){return e===void 0&&(e={}),{name:"size",options:e,async fn(t){var n,r;const{placement:s,rects:a,platform:c,elements:i}=t,{apply:f=()=>{},...g}=tP(e,t),y=await Aoe(t,g),b=IB(s),T=Sz(s),S=jB(s)==="y",{width:U,height:N}=a.floating;let W,L;b==="top"||b==="bottom"?(W=b,L=T===(await(c.isRTL==null?void 0:c.isRTL(i.floating))?"start":"end")?"left":"right"):(L=b,W=T==="end"?"top":"bottom");const Q=N-y.top-y.bottom,V=U-y.left-y.right,Z=Tw(N-y[W],Q),ne=Tw(U-y[L],V),Y=!t.middlewareData.shift;let le=Z,pe=ne;if((n=t.middlewareData.shift)!=null&&n.enabled.x&&(pe=V),(r=t.middlewareData.shift)!=null&&r.enabled.y&&(le=Q),Y&&!T){const ye=Gf(y.left,0),he=Gf(y.right,0),be=Gf(y.top,0),Te=Gf(y.bottom,0);S?pe=U-2*(ye!==0||he!==0?ye+he:Gf(y.left,y.right)):le=N-2*(be!==0||Te!==0?be+Te:Gf(y.top,y.bottom))}await f({...t,availableWidth:pe,availableHeight:le});const _e=await c.getDimensions(i.floating);return U!==_e.width||N!==_e.height?{reset:{rects:!0}}:{}}}};function nP(){return typeof window<"u"}function Jw(e){return moe(e)?(e.nodeName||"").toLowerCase():"#document"}function Zf(e){var t;return(e==null||(t=e.ownerDocument)==null?void 0:t.defaultView)||window}function ag(e){var t;return(t=(moe(e)?e.ownerDocument:e.document)||window.document)==null?void 0:t.documentElement}function moe(e){return nP()?e instanceof Node||e instanceof Zf(e).Node:!1}function XA(e){return nP()?e instanceof Element||e instanceof Zf(e).Element:!1}function ng(e){return nP()?e instanceof HTMLElement||e instanceof Zf(e).HTMLElement:!1}function RK(e){return!nP()||typeof ShadowRoot>"u"?!1:e instanceof ShadowRoot||e instanceof Zf(e).ShadowRoot}function FB(e){const{overflow:t,overflowX:n,overflowY:r,display:s}=YA(e);return/auto|scroll|overlay|hidden|clip/.test(t+r+n)&&!["inline","contents"].includes(s)}function rje(e){return["table","td","th"].includes(Jw(e))}function rP(e){return[":popover-open",":modal"].some(t=>{try{return e.matches(t)}catch{return!1}})}function Bz(e){const t=Ez(),n=XA(e)?YA(e):e;return n.transform!=="none"||n.perspective!=="none"||(n.containerType?n.containerType!=="normal":!1)||!t&&(n.backdropFilter?n.backdropFilter!=="none":!1)||!t&&(n.filter?n.filter!=="none":!1)||["transform","perspective","filter"].some(r=>(n.willChange||"").includes(r))||["paint","layout","strict","content"].some(r=>(n.contain||"").includes(r))}function ije(e){let t=$y(e);for(;ng(t)&&!Iw(t);){if(Bz(t))return t;if(rP(t))return null;t=$y(t)}return null}function Ez(){return typeof CSS>"u"||!CSS.supports?!1:CSS.supports("-webkit-backdrop-filter","none")}function Iw(e){return["html","body","#document"].includes(Jw(e))}function YA(e){return Zf(e).getComputedStyle(e)}function iP(e){return XA(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.scrollX,scrollTop:e.scrollY}}function $y(e){if(Jw(e)==="html")return e;const t=e.assignedSlot||e.parentNode||RK(e)&&e.host||ag(e);return RK(t)?t.host:t}function goe(e){const t=$y(e);return Iw(t)?e.ownerDocument?e.ownerDocument.body:e.body:ng(t)&&FB(t)?t:goe(t)}function Iy(e,t,n){var r;t===void 0&&(t=[]),n===void 0&&(n=!0);const s=goe(e),a=s===((r=e.ownerDocument)==null?void 0:r.body),c=Zf(s);if(a){const i=hD(c);return t.concat(c,c.visualViewport||[],FB(s)?s:[],i&&n?Iy(i):[])}return t.concat(s,Iy(s,[],n))}function hD(e){return e.parent&&Object.getPrototypeOf(e.parent)?e.frameElement:null}function yoe(e){const t=YA(e);let n=parseFloat(t.width)||0,r=parseFloat(t.height)||0;const s=ng(e),a=s?e.offsetWidth:n,c=s?e.offsetHeight:r,i=wj(n)!==a||wj(r)!==c;return i&&(n=a,r=c),{width:n,height:r,$:i}}function Tz(e){return XA(e)?e:e.contextElement}function tw(e){const t=Tz(e);if(!ng(t))return Vy(1);const n=t.getBoundingClientRect(),{width:r,height:s,$:a}=yoe(t);let c=(a?wj(n.width):n.width)/r,i=(a?wj(n.height):n.height)/s;return(!c||!Number.isFinite(c))&&(c=1),(!i||!Number.isFinite(i))&&(i=1),{x:c,y:i}}const sje=Vy(0);function voe(e){const t=Zf(e);return!Ez()||!t.visualViewport?sje:{x:t.visualViewport.offsetLeft,y:t.visualViewport.offsetTop}}function oje(e,t,n){return t===void 0&&(t=!1),!n||t&&n!==Zf(e)?!1:t}function zx(e,t,n,r){t===void 0&&(t=!1),n===void 0&&(n=!1);const s=e.getBoundingClientRect(),a=Tz(e);let c=Vy(1);t&&(r?XA(r)&&(c=tw(r)):c=tw(e));const i=oje(a,n,r)?voe(a):Vy(0);let f=(s.left+i.x)/c.x,g=(s.top+i.y)/c.y,y=s.width/c.x,b=s.height/c.y;if(a){const T=Zf(a),S=r&&XA(r)?Zf(r):r;let U=T,N=hD(U);for(;N&&r&&S!==U;){const W=tw(N),L=N.getBoundingClientRect(),Q=YA(N),V=L.left+(N.clientLeft+parseFloat(Q.paddingLeft))*W.x,Z=L.top+(N.clientTop+parseFloat(Q.paddingTop))*W.y;f*=W.x,g*=W.y,y*=W.x,b*=W.y,f+=V,g+=Z,U=Zf(N),N=hD(U)}}return bj({width:y,height:b,x:f,y:g})}function aje(e){let{elements:t,rect:n,offsetParent:r,strategy:s}=e;const a=s==="fixed",c=ag(r),i=t?rP(t.floating):!1;if(r===c||i&&a)return n;let f={scrollLeft:0,scrollTop:0},g=Vy(1);const y=Vy(0),b=ng(r);if((b||!b&&!a)&&((Jw(r)!=="body"||FB(c))&&(f=iP(r)),ng(r))){const T=zx(r);g=tw(r),y.x=T.x+r.clientLeft,y.y=T.y+r.clientTop}return{width:n.width*g.x,height:n.height*g.y,x:n.x*g.x-f.scrollLeft*g.x+y.x,y:n.y*g.y-f.scrollTop*g.y+y.y}}function lje(e){return Array.from(e.getClientRects())}function fD(e,t){const n=iP(e).scrollLeft;return t?t.left+n:zx(ag(e)).left+n}function cje(e){const t=ag(e),n=iP(e),r=e.ownerDocument.body,s=Gf(t.scrollWidth,t.clientWidth,r.scrollWidth,r.clientWidth),a=Gf(t.scrollHeight,t.clientHeight,r.scrollHeight,r.clientHeight);let c=-n.scrollLeft+fD(e);const i=-n.scrollTop;return YA(r).direction==="rtl"&&(c+=Gf(t.clientWidth,r.clientWidth)-s),{width:s,height:a,x:c,y:i}}function uje(e,t){const n=Zf(e),r=ag(e),s=n.visualViewport;let a=r.clientWidth,c=r.clientHeight,i=0,f=0;if(s){a=s.width,c=s.height;const g=Ez();(!g||g&&t==="fixed")&&(i=s.offsetLeft,f=s.offsetTop)}return{width:a,height:c,x:i,y:f}}function dje(e,t){const n=zx(e,!0,t==="fixed"),r=n.top+e.clientTop,s=n.left+e.clientLeft,a=ng(e)?tw(e):Vy(1),c=e.clientWidth*a.x,i=e.clientHeight*a.y,f=s*a.x,g=r*a.y;return{width:c,height:i,x:f,y:g}}function OK(e,t,n){let r;if(t==="viewport")r=uje(e,n);else if(t==="document")r=cje(ag(e));else if(XA(t))r=dje(t,n);else{const s=voe(e);r={...t,x:t.x-s.x,y:t.y-s.y}}return bj(r)}function xoe(e,t){const n=$y(e);return n===t||!XA(n)||Iw(n)?!1:YA(n).position==="fixed"||xoe(n,t)}function hje(e,t){const n=t.get(e);if(n)return n;let r=Iy(e,[],!1).filter(i=>XA(i)&&Jw(i)!=="body"),s=null;const a=YA(e).position==="fixed";let c=a?$y(e):e;for(;XA(c)&&!Iw(c);){const i=YA(c),f=Bz(c);!f&&i.position==="fixed"&&(s=null),(a?!f&&!s:!f&&i.position==="static"&&s&&["absolute","fixed"].includes(s.position)||FB(c)&&!f&&xoe(e,c))?r=r.filter(g=>g!==c):s=i,c=$y(c)}return t.set(e,r),r}function fje(e){let{element:t,boundary:n,rootBoundary:r,strategy:s}=e;const a=[...n==="clippingAncestors"?rP(t)?[]:hje(t,this._c):[].concat(n),r],c=a[0],i=a.reduce((f,g)=>{const y=OK(t,g,s);return f.top=Gf(y.top,f.top),f.right=Tw(y.right,f.right),f.bottom=Tw(y.bottom,f.bottom),f.left=Gf(y.left,f.left),f},OK(t,c,s));return{width:i.right-i.left,height:i.bottom-i.top,x:i.left,y:i.top}}function pje(e){const{width:t,height:n}=yoe(e);return{width:t,height:n}}function Aje(e,t,n){const r=ng(t),s=ag(t),a=n==="fixed",c=zx(e,!0,a,t);let i={scrollLeft:0,scrollTop:0};const f=Vy(0);if(r||!r&&!a)if((Jw(t)!=="body"||FB(s))&&(i=iP(t)),r){const S=zx(t,!0,a,t);f.x=S.x+t.clientLeft,f.y=S.y+t.clientTop}else s&&(f.x=fD(s));let g=0,y=0;if(s&&!r&&!a){const S=s.getBoundingClientRect();y=S.top+i.scrollTop,g=S.left+i.scrollLeft-fD(s,S)}const b=c.left+i.scrollLeft-f.x-g,T=c.top+i.scrollTop-f.y-y;return{x:b,y:T,width:c.width,height:c.height}}function aN(e){return YA(e).position==="static"}function DK(e,t){if(!ng(e)||YA(e).position==="fixed")return null;if(t)return t(e);let n=e.offsetParent;return ag(e)===n&&(n=n.ownerDocument.body),n}function _oe(e,t){const n=Zf(e);if(rP(e))return n;if(!ng(e)){let s=$y(e);for(;s&&!Iw(s);){if(XA(s)&&!aN(s))return s;s=$y(s)}return n}let r=DK(e,t);for(;r&&rje(r)&&aN(r);)r=DK(r,t);return r&&Iw(r)&&aN(r)&&!Bz(r)?n:r||ije(e)||n}const mje=async function(e){const t=this.getOffsetParent||_oe,n=this.getDimensions,r=await n(e.floating);return{reference:Aje(e.reference,await t(e.floating),e.strategy),floating:{x:0,y:0,width:r.width,height:r.height}}};function gje(e){return YA(e).direction==="rtl"}const yje={convertOffsetParentRelativeRectToViewportRelativeRect:aje,getDocumentElement:ag,getClippingRect:fje,getOffsetParent:_oe,getElementRects:mje,getClientRects:lje,getDimensions:pje,getScale:tw,isElement:XA,isRTL:gje};function vje(e,t){let n=null,r;const s=ag(e);function a(){var i;clearTimeout(r),(i=n)==null||i.disconnect(),n=null}function c(i,f){i===void 0&&(i=!1),f===void 0&&(f=1),a();const{left:g,top:y,width:b,height:T}=e.getBoundingClientRect();if(i||t(),!b||!T)return;const S=b3(y),U=b3(s.clientWidth-(g+b)),N=b3(s.clientHeight-(y+T)),W=b3(g),L={rootMargin:-S+"px "+-U+"px "+-N+"px "+-W+"px",threshold:Gf(0,Tw(1,f))||1};let Q=!0;function V(Z){const ne=Z[0].intersectionRatio;if(ne!==f){if(!Q)return c();ne?c(!1,ne):r=setTimeout(()=>{c(!1,1e-7)},1e3)}Q=!1}try{n=new IntersectionObserver(V,{...L,root:s.ownerDocument})}catch{n=new IntersectionObserver(V,L)}n.observe(e)}return c(!0),a}function xje(e,t,n,r){r===void 0&&(r={});const{ancestorScroll:s=!0,ancestorResize:a=!0,elementResize:c=typeof ResizeObserver=="function",layoutShift:i=typeof IntersectionObserver=="function",animationFrame:f=!1}=r,g=Tz(e),y=s||a?[...g?Iy(g):[],...Iy(t)]:[];y.forEach(L=>{s&&L.addEventListener("scroll",n,{passive:!0}),a&&L.addEventListener("resize",n)});const b=g&&i?vje(g,n):null;let T=-1,S=null;c&&(S=new ResizeObserver(L=>{let[Q]=L;Q&&Q.target===g&&S&&(S.unobserve(t),cancelAnimationFrame(T),T=requestAnimationFrame(()=>{var V;(V=S)==null||V.observe(t)})),n()}),g&&!f&&S.observe(g),S.observe(t));let U,N=f?zx(e):null;f&&W();function W(){const L=zx(e);N&&(L.x!==N.x||L.y!==N.y||L.width!==N.width||L.height!==N.height)&&n(),N=L,U=requestAnimationFrame(W)}return n(),()=>{var L;y.forEach(Q=>{s&&Q.removeEventListener("scroll",n),a&&Q.removeEventListener("resize",n)}),b==null||b(),(L=S)==null||L.disconnect(),S=null,f&&cancelAnimationFrame(U)}}const _je=eje,wje=tje,bje=nje,Cje=(e,t,n)=>{const r=new Map,s={platform:yje,...n},a={...s.platform,_c:r};return YIe(e,t,{...s,platform:a})};var ZT=typeof document<"u"?q.useLayoutEffect:q.useEffect;function Cj(e,t){if(e===t)return!0;if(typeof e!=typeof t)return!1;if(typeof e=="function"&&e.toString()===t.toString())return!0;let n,r,s;if(e&&t&&typeof e=="object"){if(Array.isArray(e)){if(n=e.length,n!==t.length)return!1;for(r=n;r--!==0;)if(!Cj(e[r],t[r]))return!1;return!0}if(s=Object.keys(e),n=s.length,n!==Object.keys(t).length)return!1;for(r=n;r--!==0;)if(!{}.hasOwnProperty.call(t,s[r]))return!1;for(r=n;r--!==0;){const a=s[r];if(!(a==="_owner"&&e.$$typeof)&&!Cj(e[a],t[a]))return!1}return!0}return e!==e&&t!==t}function woe(e){return typeof window>"u"?1:(e.ownerDocument.defaultView||window).devicePixelRatio||1}function UK(e,t){const n=woe(e);return Math.round(t*n)/n}function lN(e){const t=q.useRef(e);return ZT(()=>{t.current=e}),t}function Sje(e){e===void 0&&(e={});const{placement:t="bottom",strategy:n="absolute",middleware:r=[],platform:s,elements:{reference:a,floating:c}={},transform:i=!0,whileElementsMounted:f,open:g}=e,[y,b]=q.useState({x:0,y:0,strategy:n,placement:t,middlewareData:{},isPositioned:!1}),[T,S]=q.useState(r);Cj(T,r)||S(r);const[U,N]=q.useState(null),[W,L]=q.useState(null),Q=q.useCallback(Ue=>{Ue!==Y.current&&(Y.current=Ue,N(Ue))},[]),V=q.useCallback(Ue=>{Ue!==le.current&&(le.current=Ue,L(Ue))},[]),Z=a||U,ne=c||W,Y=q.useRef(null),le=q.useRef(null),pe=q.useRef(y),_e=f!=null,ye=lN(f),he=lN(s),be=lN(g),Te=q.useCallback(()=>{if(!Y.current||!le.current)return;const Ue={placement:t,strategy:n,middleware:T};he.current&&(Ue.platform=he.current),Cje(Y.current,le.current,Ue).then(Qe=>{const xe={...Qe,isPositioned:be.current!==!1};Ee.current&&!Cj(pe.current,xe)&&(pe.current=xe,$w.flushSync(()=>{b(xe)}))})},[T,t,n,he,be]);ZT(()=>{g===!1&&pe.current.isPositioned&&(pe.current.isPositioned=!1,b(Ue=>({...Ue,isPositioned:!1})))},[g]);const Ee=q.useRef(!1);ZT(()=>(Ee.current=!0,()=>{Ee.current=!1}),[]),ZT(()=>{if(Z&&(Y.current=Z),ne&&(le.current=ne),Z&&ne){if(ye.current)return ye.current(Z,ne,Te);Te()}},[Z,ne,Te,ye,_e]);const Ne=q.useMemo(()=>({reference:Y,floating:le,setReference:Q,setFloating:V}),[Q,V]),Ge=q.useMemo(()=>({reference:Z,floating:ne}),[Z,ne]),Je=q.useMemo(()=>{const Ue={position:n,left:0,top:0};if(!Ge.floating)return Ue;const Qe=UK(Ge.floating,y.x),xe=UK(Ge.floating,y.y);return i?{...Ue,transform:"translate("+Qe+"px, "+xe+"px)",...woe(Ge.floating)>=1.5&&{willChange:"transform"}}:{position:n,left:Qe,top:xe}},[n,i,Ge.floating,y.x,y.y]);return q.useMemo(()=>({...y,update:Te,refs:Ne,elements:Ge,floatingStyles:Je}),[y,Te,Ne,Ge,Je])}const Bje=(e,t)=>({..._je(e),options:[e,t]}),Eje=(e,t)=>({...wje(e),options:[e,t]}),Tje=(e,t)=>({...bje(e),options:[e,t]});/*!
* tabbable 6.2.0
* @license MIT, https://github.com/focus-trap/tabbable/blob/master/LICENSE
*/var Ije=["input:not([inert])","select:not([inert])","textarea:not([inert])","a[href]:not([inert])","button:not([inert])","[tabindex]:not(slot):not([inert])","audio[controls]:not([inert])","video[controls]:not([inert])",'[contenteditable]:not([contenteditable="false"]):not([inert])',"details>summary:first-of-type:not([inert])","details:not([inert])"],pD=Ije.join(","),boe=typeof Element>"u",LS=boe?function(){}:Element.prototype.matches||Element.prototype.msMatchesSelector||Element.prototype.webkitMatchesSelector,Sj=!boe&&Element.prototype.getRootNode?function(e){var t;return e==null||(t=e.getRootNode)===null||t===void 0?void 0:t.call(e)}:function(e){return e==null?void 0:e.ownerDocument},Bj=function e(t,n){var r;n===void 0&&(n=!0);var s=t==null||(r=t.getAttribute)===null||r===void 0?void 0:r.call(t,"inert"),a=s===""||s==="true",c=a||n&&t&&e(t.parentNode);return c},jje=function(e){var t,n=e==null||(t=e.getAttribute)===null||t===void 0?void 0:t.call(e,"contenteditable");return n===""||n==="true"},Fje=function(e,t,n){if(Bj(e))return[];var r=Array.prototype.slice.apply(e.querySelectorAll(pD));return t&&LS.call(e,pD)&&r.unshift(e),r=r.filter(n),r},Pje=function e(t,n,r){for(var s=[],a=Array.from(t);a.length;){var c=a.shift();if(!Bj(c,!1))if(c.tagName==="SLOT"){var i=c.assignedElements(),f=i.length?i:c.children,g=e(f,!0,r);r.flatten?s.push.apply(s,g):s.push({scopeParent:c,candidates:g})}else{var y=LS.call(c,pD);y&&r.filter(c)&&(n||!t.includes(c))&&s.push(c);var b=c.shadowRoot||typeof r.getShadowRoot=="function"&&r.getShadowRoot(c),T=!Bj(b,!1)&&(!r.shadowRootFilter||r.shadowRootFilter(c));if(b&&T){var S=e(b===!0?c.children:b.children,!0,r);r.flatten?s.push.apply(s,S):s.push({scopeParent:c,candidates:S})}else a.unshift.apply(a,c.children)}}return s},Coe=function(e){return!isNaN(parseInt(e.getAttribute("tabindex"),10))},Soe=function(e){if(!e)throw new Error("No node provided");return e.tabIndex<0&&(/^(AUDIO|VIDEO|DETAILS)$/.test(e.tagName)||jje(e))&&!Coe(e)?0:e.tabIndex},kje=function(e,t){var n=Soe(e);return n<0&&t&&!Coe(e)?0:n},Lje=function(e,t){return e.tabIndex===t.tabIndex?e.documentOrder-t.documentOrder:e.tabIndex-t.tabIndex},Boe=function(e){return e.tagName==="INPUT"},Mje=function(e){return Boe(e)&&e.type==="hidden"},Nje=function(e){var t=e.tagName==="DETAILS"&&Array.prototype.slice.apply(e.children).some(function(n){return n.tagName==="SUMMARY"});return t},Rje=function(e,t){for(var n=0;n<e.length;n++)if(e[n].checked&&e[n].form===t)return e[n]},Oje=function(e){if(!e.name)return!0;var t=e.form||Sj(e),n=function(a){return t.querySelectorAll('input[type="radio"][name="'+a+'"]')},r;if(typeof window<"u"&&typeof window.CSS<"u"&&typeof window.CSS.escape=="function")r=n(window.CSS.escape(e.name));else try{r=n(e.name)}catch(a){return console.error("Looks like you have a radio button with a name attribute containing invalid CSS selector characters and need the CSS.escape polyfill: %s",a.message),!1}var s=Rje(r,e.form);return!s||s===e},Dje=function(e){return Boe(e)&&e.type==="radio"},Uje=function(e){return Dje(e)&&!Oje(e)},zje=function(e){var t,n=e&&Sj(e),r=(t=n)===null||t===void 0?void 0:t.host,s=!1;if(n&&n!==e){var a,c,i;for(s=!!((a=r)!==null&&a!==void 0&&(c=a.ownerDocument)!==null&&c!==void 0&&c.contains(r)||e!=null&&(i=e.ownerDocument)!==null&&i!==void 0&&i.contains(e));!s&&r;){var f,g,y;n=Sj(r),r=(f=n)===null||f===void 0?void 0:f.host,s=!!((g=r)!==null&&g!==void 0&&(y=g.ownerDocument)!==null&&y!==void 0&&y.contains(r))}}return s},zK=function(e){var t=e.getBoundingClientRect(),n=t.width,r=t.height;return n===0&&r===0},Qje=function(e,t){var n=t.displayCheck,r=t.getShadowRoot;if(getComputedStyle(e).visibility==="hidden")return!0;var s=LS.call(e,"details>summary:first-of-type"),a=s?e.parentElement:e;if(LS.call(a,"details:not([open]) *"))return!0;if(!n||n==="full"||n==="legacy-full"){if(typeof r=="function"){for(var c=e;e;){var i=e.parentElement,f=Sj(e);if(i&&!i.shadowRoot&&r(i)===!0)return zK(e);e.assignedSlot?e=e.assignedSlot:!i&&f!==e.ownerDocument?e=f.host:e=i}e=c}if(zje(e))return!e.getClientRects().length;if(n!=="legacy-full")return!0}else if(n==="non-zero-area")return zK(e);return!1},Hje=function(e){if(/^(INPUT|BUTTON|SELECT|TEXTAREA)$/.test(e.tagName))for(var t=e.parentElement;t;){if(t.tagName==="FIELDSET"&&t.disabled){for(var n=0;n<t.children.length;n++){var r=t.children.item(n);if(r.tagName==="LEGEND")return LS.call(t,"fieldset[disabled] *")?!0:!r.contains(e)}return!0}t=t.parentElement}return!1},Vje=function(e,t){return!(t.disabled||Bj(t)||Mje(t)||Qje(t,e)||Nje(t)||Hje(t))},QK=function(e,t){return!(Uje(t)||Soe(t)<0||!Vje(e,t))},$je=function(e){var t=parseInt(e.getAttribute("tabindex"),10);return!!(isNaN(t)||t>=0)},Gje=function e(t){var n=[],r=[];return t.forEach(function(s,a){var c=!!s.scopeParent,i=c?s.scopeParent:s,f=kje(i,c),g=c?e(s.candidates):i;f===0?c?n.push.apply(n,g):n.push(i):r.push({documentOrder:a,tabIndex:f,item:s,isScope:c,content:g})}),r.sort(Lje).reduce(function(s,a){return a.isScope?s.push.apply(s,a.content):s.push(a.content),s},[]).concat(n)},Iz=function(e,t){t=t||{};var n;return t.getShadowRoot?n=Pje([e],t.includeContainer,{filter:QK.bind(null,t),flatten:!1,getShadowRoot:t.getShadowRoot,shadowRootFilter:$je}):n=Fje(e,t.includeContainer,QK.bind(null,t)),Gje(n)};const jz="ArrowUp",sP="ArrowDown",jw="ArrowLeft",PB="ArrowRight";function C3(e,t,n){return Math.floor(e/t)!==n}function EC(e,t){return t<0||t>=e.current.length}function cN(e,t){return Bd(e,{disabledIndices:t})}function HK(e,t){return Bd(e,{decrement:!0,startingIndex:e.current.length,disabledIndices:t})}function Bd(e,t){let{startingIndex:n=-1,decrement:r=!1,disabledIndices:s,amount:a=1}=t===void 0?{}:t;const c=e.current;let i=n;do{var f,g;i=i+(r?-a:a)}while(i>=0&&i<=c.length-1&&(s?s.includes(i):c[i]==null||(f=c[i])!=null&&f.hasAttribute("disabled")||((g=c[i])==null?void 0:g.getAttribute("aria-disabled"))==="true"));return i}function Kje(e,t){let{event:n,orientation:r,loop:s,cols:a,disabledIndices:c,minIndex:i,maxIndex:f,prevIndex:g,stopEvent:y=!1}=t,b=g;if(n.key===jz){if(y&&Qu(n),g===-1)b=f;else if(b=Bd(e,{startingIndex:b,amount:a,decrement:!0,disabledIndices:c}),s&&(g-a<i||b<0)){const T=g%a,S=f%a,U=f-(S-T);S===T?b=f:b=S>T?U:U-a}EC(e,b)&&(b=g)}if(n.key===sP&&(y&&Qu(n),g===-1?b=i:(b=Bd(e,{startingIndex:g,amount:a,disabledIndices:c}),s&&g+a>f&&(b=Bd(e,{startingIndex:g%a-a,amount:a,disabledIndices:c}))),EC(e,b)&&(b=g)),r==="both"){const T=kK(g/a);n.key===PB&&(y&&Qu(n),g%a!==a-1?(b=Bd(e,{startingIndex:g,disabledIndices:c}),s&&C3(b,a,T)&&(b=Bd(e,{startingIndex:g-g%a-1,disabledIndices:c}))):s&&(b=Bd(e,{startingIndex:g-g%a-1,disabledIndices:c})),C3(b,a,T)&&(b=g)),n.key===jw&&(y&&Qu(n),g%a!==0?(b=Bd(e,{startingIndex:g,disabledIndices:c,decrement:!0}),s&&C3(b,a,T)&&(b=Bd(e,{startingIndex:g+(a-g%a),decrement:!0,disabledIndices:c}))):s&&(b=Bd(e,{startingIndex:g+(a-g%a),decrement:!0,disabledIndices:c})),C3(b,a,T)&&(b=g));const S=kK(f/a)===T;EC(e,b)&&(s&&S?b=n.key===jw?f:Bd(e,{startingIndex:g-g%a-1,disabledIndices:c}):b=g)}return b}let VK=0;function Qg(e,t){t===void 0&&(t={});const{preventScroll:n=!1,cancelPrevious:r=!0,sync:s=!1}=t;r&&cancelAnimationFrame(VK);const a=()=>e==null?void 0:e.focus({preventScroll:n});s?a():VK=requestAnimationFrame(a)}var Yc=typeof document<"u"?q.useLayoutEffect:q.useEffect;function Ej(){return Ej=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Ej.apply(this,arguments)}let uN=!1,Wje=0;const $K=()=>"floating-ui-"+Wje++;function qje(){const[e,t]=q.useState(()=>uN?$K():void 0);return Yc(()=>{e==null&&t($K())},[]),q.useEffect(()=>{uN||(uN=!0)},[]),e}const Zje=q.useId,Fz=Zje||qje;function Xje(){const e=new Map;return{emit(t,n){var r;(r=e.get(t))==null||r.forEach(s=>s(n))},on(t,n){e.set(t,[...e.get(t)||[],n])},off(t,n){var r;e.set(t,((r=e.get(t))==null?void 0:r.filter(s=>s!==n))||[])}}}const Yje=q.createContext(null),Jje=q.createContext(null),Eoe=()=>{var e;return((e=q.useContext(Yje))==null?void 0:e.id)||null},oP=()=>q.useContext(Jje);function MS(e){return"data-floating-ui-"+e}function jy(e){const t=q.useRef(e);return Yc(()=>{t.current=e}),t}function eFe(e,t){var n;let r=[],s=(n=e.find(a=>a.id===t))==null?void 0:n.parentId;for(;s;){const a=e.find(c=>c.id===s);s=a==null?void 0:a.parentId,a&&(r=r.concat(a))}return r}function nw(e,t){let n=e.filter(s=>{var a;return s.parentId===t&&((a=s.context)==null?void 0:a.open)}),r=n;for(;r.length;)r=e.filter(s=>{var a;return(a=r)==null?void 0:a.some(c=>{var i;return s.parentId===c.id&&((i=s.context)==null?void 0:i.open)})}),n=n.concat(r);return n}function tFe(e,t){let n,r=-1;function s(a,c){c>r&&(n=a,r=c),nw(e,a).forEach(i=>{s(i.id,c+1)})}return s(t,0),e.find(a=>a.id===n)}let X_=new WeakMap,S3=new WeakSet,B3={},dN=0;const nFe=()=>typeof HTMLElement<"u"&&"inert"in HTMLElement.prototype,Toe=e=>e&&(e.host||Toe(e.parentNode)),rFe=(e,t)=>t.map(n=>{if(e.contains(n))return n;const r=Toe(n);return e.contains(r)?r:null}).filter(n=>n!=null);function iFe(e,t,n,r){const s="data-floating-ui-inert",a=r?"inert":n?"aria-hidden":null,c=rFe(t,e),i=new Set,f=new Set(c),g=[];B3[s]||(B3[s]=new WeakMap);const y=B3[s];c.forEach(b),T(t),i.clear();function b(S){!S||i.has(S)||(i.add(S),S.parentNode&&b(S.parentNode))}function T(S){!S||f.has(S)||Array.prototype.forEach.call(S.children,U=>{if(i.has(U))T(U);else{const N=a?U.getAttribute(a):null,W=N!==null&&N!=="false",L=(X_.get(U)||0)+1,Q=(y.get(U)||0)+1;X_.set(U,L),y.set(U,Q),g.push(U),L===1&&W&&S3.add(U),Q===1&&U.setAttribute(s,""),!W&&a&&U.setAttribute(a,"true")}})}return dN++,()=>{g.forEach(S=>{const U=(X_.get(S)||0)-1,N=(y.get(S)||0)-1;X_.set(S,U),y.set(S,N),U||(!S3.has(S)&&a&&S.removeAttribute(a),S3.delete(S)),N||S.removeAttribute(s)}),dN--,dN||(X_=new WeakMap,X_=new WeakMap,S3=new WeakSet,B3={})}}function GK(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!1);const r=zA(e[0]).body;return iFe(e.concat(Array.from(r.querySelectorAll("[aria-live]"))),r,t,n)}const Pz=()=>({getShadowRoot:!0,displayCheck:typeof ResizeObserver=="function"&&ResizeObserver.toString().includes("[native code]")?"full":"none"});function Ioe(e,t){const n=Iz(e,Pz());t==="prev"&&n.reverse();const r=n.indexOf(uy(zA(e)));return n.slice(r+1)[0]}function joe(){return Ioe(document.body,"next")}function Foe(){return Ioe(document.body,"prev")}function TC(e,t){const n=t||e.currentTarget,r=e.relatedTarget;return!r||!$h(n,r)}function sFe(e){Iz(e,Pz()).forEach(t=>{t.dataset.tabindex=t.getAttribute("tabindex")||"",t.setAttribute("tabindex","-1")})}function oFe(e){e.querySelectorAll("[data-tabindex]").forEach(t=>{const n=t.dataset.tabindex;delete t.dataset.tabindex,n?t.setAttribute("tabindex",n):t.removeAttribute("tabindex")})}const kz={border:0,clip:"rect(0 0 0 0)",height:"1px",margin:"-1px",overflow:"hidden",padding:0,position:"fixed",whiteSpace:"nowrap",width:"1px",top:0,left:0};let aFe;function KK(e){e.key==="Tab"&&(e.target,clearTimeout(aFe))}const Tj=q.forwardRef(function(e,t){const[n,r]=q.useState();Yc(()=>(doe()&&r("button"),document.addEventListener("keydown",KK),()=>{document.removeEventListener("keydown",KK)}),[]);const s={ref:t,tabIndex:0,role:n,"aria-hidden":n?void 0:!0,[MS("focus-guard")]:"",style:kz};return q.createElement("span",Ej({},e,s))}),Poe=q.createContext(null);function lFe(e){let{id:t,root:n}=e===void 0?{}:e;const[r,s]=q.useState(null),a=Fz(),c=koe(),i=q.useMemo(()=>({id:t,root:n,portalContext:c,uniqueId:a}),[t,n,c,a]),f=q.useRef();return Yc(()=>()=>{r==null||r.remove()},[r,i]),Yc(()=>{if(f.current===i)return;f.current=i;const{id:g,root:y,portalContext:b,uniqueId:T}=i,S=g?document.getElementById(g):null,U=MS("portal");if(S){const N=document.createElement("div");N.id=T,N.setAttribute(U,""),S.appendChild(N),s(N)}else{let N=y||(b==null?void 0:b.portalNode);N&&!DA(N)&&(N=N.current),N=N||document.body;let W=null;g&&(W=document.createElement("div"),W.id=g,N.appendChild(W));const L=document.createElement("div");L.id=T,L.setAttribute(U,""),N=W||N,N.appendChild(L),s(L)}},[i]),r}function cFe(e){let{children:t,id:n,root:r=null,preserveTabOrder:s=!0}=e;const a=lFe({id:n,root:r}),[c,i]=q.useState(null),f=q.useRef(null),g=q.useRef(null),y=q.useRef(null),b=q.useRef(null),T=!!c&&!c.modal&&c.open&&s&&!!(r||a);return q.useEffect(()=>{if(!a||!s||c!=null&&c.modal)return;function S(U){a&&TC(U)&&(U.type==="focusin"?oFe:sFe)(a)}return a.addEventListener("focusin",S,!0),a.addEventListener("focusout",S,!0),()=>{a.removeEventListener("focusin",S,!0),a.removeEventListener("focusout",S,!0)}},[a,s,c==null?void 0:c.modal]),q.createElement(Poe.Provider,{value:q.useMemo(()=>({preserveTabOrder:s,beforeOutsideRef:f,afterOutsideRef:g,beforeInsideRef:y,afterInsideRef:b,portalNode:a,setFocusManagerState:i}),[s,a])},T&&a&&q.createElement(Tj,{"data-type":"outside",ref:f,onFocus:S=>{if(TC(S,a)){var U;(U=y.current)==null||U.focus()}else{const N=Foe()||(c==null?void 0:c.refs.domReference.current);N==null||N.focus()}}}),T&&a&&q.createElement("span",{"aria-owns":a.id,style:kz}),a&&$w.createPortal(t,a),T&&a&&q.createElement(Tj,{"data-type":"outside",ref:g,onFocus:S=>{if(TC(S,a)){var U;(U=b.current)==null||U.focus()}else{const N=joe()||(c==null?void 0:c.refs.domReference.current);N==null||N.focus(),c!=null&&c.closeOnFocusOut&&(c==null||c.onOpenChange(!1,S.nativeEvent))}}}))}const koe=()=>q.useContext(Poe),uFe=q.forwardRef(function(e,t){return q.createElement("button",Ej({},e,{type:"button",ref:t,tabIndex:-1,style:kz}))});function dFe(e){const{context:t,children:n,disabled:r=!1,order:s=["content"],guards:a=!0,initialFocus:c=0,returnFocus:i=!0,modal:f=!0,visuallyHiddenDismiss:g=!1,closeOnFocusOut:y=!0}=e,{open:b,refs:T,nodeId:S,onOpenChange:U,events:N,dataRef:W,elements:{domReference:L,floating:Q}}=t,V=nFe()?a:!0,Z=jy(s),ne=jy(c),Y=jy(i),le=oP(),pe=koe(),_e=typeof c=="number"&&c<0,ye=q.useRef(null),he=q.useRef(null),be=q.useRef(!1),Te=q.useRef(null),Ee=q.useRef(!1),Ne=pe!=null,Ge=L&&L.getAttribute("role")==="combobox"&&foe(L)&&_e,Je=q.useCallback(function(at){return at===void 0&&(at=Q),at?Iz(at,Pz()):[]},[Q]),Ue=q.useCallback(at=>{const we=Je(at);return Z.current.map(me=>L&&me==="reference"?L:Q&&me==="floating"?Q:we).filter(Boolean).flat()},[L,Q,Z,Je]);q.useEffect(()=>{if(r||!f)return;function at(me){if(me.key==="Tab"){$h(Q,uy(zA(Q)))&&Je().length===0&&!Ge&&Qu(me);const Ze=Ue(),ot=hoe(me);Z.current[0]==="reference"&&ot===L&&(Qu(me),me.shiftKey?Qg(Ze[Ze.length-1]):Qg(Ze[1])),Z.current[1]==="floating"&&ot===Q&&me.shiftKey&&(Qu(me),Qg(Ze[0]))}}const we=zA(Q);return we.addEventListener("keydown",at),()=>{we.removeEventListener("keydown",at)}},[r,L,Q,f,Z,T,Ge,Je,Ue]),q.useEffect(()=>{if(r||!y)return;function at(){Ee.current=!0,setTimeout(()=>{Ee.current=!1})}function we(me){const Ze=me.relatedTarget;queueMicrotask(()=>{const ot=!($h(L,Ze)||$h(Q,Ze)||$h(Ze,Q)||$h(pe==null?void 0:pe.portalNode,Ze)||Ze!=null&&Ze.hasAttribute(MS("focus-guard"))||le&&(nw(le.nodesRef.current,S).find(vt=>{var Qt,Ot;return $h((Qt=vt.context)==null?void 0:Qt.elements.floating,Ze)||$h((Ot=vt.context)==null?void 0:Ot.elements.domReference,Ze)})||eFe(le.nodesRef.current,S).find(vt=>{var Qt,Ot;return((Qt=vt.context)==null?void 0:Qt.elements.floating)===Ze||((Ot=vt.context)==null?void 0:Ot.elements.domReference)===Ze})));Ze&&ot&&!Ee.current&&Ze!==Te.current&&(be.current=!0,U(!1,me))})}if(Q&&Ew(L))return L.addEventListener("focusout",we),L.addEventListener("pointerdown",at),!f&&Q.addEventListener("focusout",we),()=>{L.removeEventListener("focusout",we),L.removeEventListener("pointerdown",at),!f&&Q.removeEventListener("focusout",we)}},[r,L,Q,f,S,le,pe,U,y]),q.useEffect(()=>{var at;if(r)return;const we=Array.from((pe==null||(at=pe.portalNode)==null?void 0:at.querySelectorAll("["+MS("portal")+"]"))||[]);if(Q){const me=[Q,...we,ye.current,he.current,Z.current.includes("reference")||Ge?L:null].filter(ot=>ot!=null),Ze=f?GK(me,V,!V):GK(me);return()=>{Ze()}}},[r,L,Q,f,Z,pe,Ge,V]),Yc(()=>{if(r||!Q)return;const at=zA(Q),we=uy(at);queueMicrotask(()=>{const me=Ue(Q),Ze=ne.current,ot=(typeof Ze=="number"?me[Ze]:Ze.current)||Q,vt=$h(Q,we);!_e&&!vt&&b&&Qg(ot,{preventScroll:ot===Q})})},[r,b,Q,_e,Ue,ne]),Yc(()=>{if(r||!Q)return;let at=!1;const we=zA(Q),me=uy(we),Ze=W.current;Te.current=me;function ot(vt){if(vt.type==="escapeKey"&&T.domReference.current&&(Te.current=T.domReference.current),["referencePress","escapeKey"].includes(vt.type))return;const Qt=vt.data.returnFocus;typeof Qt=="object"?(be.current=!1,at=Qt.preventScroll):be.current=!Qt}return N.on("dismiss",ot),()=>{N.off("dismiss",ot);const vt=uy(we);($h(Q,vt)||le&&nw(le.nodesRef.current,S).some(Qt=>{var Ot;return $h((Ot=Qt.context)==null?void 0:Ot.elements.floating,vt)})||Ze.openEvent&&["click","mousedown"].includes(Ze.openEvent.type))&&T.domReference.current&&(Te.current=T.domReference.current),Y.current&&Ew(Te.current)&&!be.current&&Qg(Te.current,{cancelPrevious:!1,preventScroll:at})}},[r,Q,Y,W,T,N,le,S]),Yc(()=>{if(!(r||!pe))return pe.setFocusManagerState({modal:f,closeOnFocusOut:y,open:b,onOpenChange:U,refs:T}),()=>{pe.setFocusManagerState(null)}},[r,pe,f,b,U,T,y]),Yc(()=>{if(!r&&Q&&typeof MutationObserver=="function"&&!_e){const at=()=>{const me=Q.getAttribute("tabindex");Z.current.includes("floating")||uy(zA(Q))!==T.domReference.current&&Je().length===0?me!=="0"&&Q.setAttribute("tabindex","0"):me!=="-1"&&Q.setAttribute("tabindex","-1")};at();const we=new MutationObserver(at);return we.observe(Q,{childList:!0,subtree:!0,attributes:!0}),()=>{we.disconnect()}}},[r,Q,T,Z,Je,_e]);function Qe(at){return r||!g||!f?null:q.createElement(uFe,{ref:at==="start"?ye:he,onClick:we=>U(!1,we.nativeEvent)},typeof g=="string"?g:"Dismiss")}const xe=!r&&V&&!Ge&&(Ne||f);return q.createElement(q.Fragment,null,xe&&q.createElement(Tj,{"data-type":"inside",ref:pe==null?void 0:pe.beforeInsideRef,onFocus:at=>{if(f){const me=Ue();Qg(s[0]==="reference"?me[0]:me[me.length-1])}else if(pe!=null&&pe.preserveTabOrder&&pe.portalNode)if(be.current=!1,TC(at,pe.portalNode)){const me=joe()||L;me==null||me.focus()}else{var we;(we=pe.beforeOutsideRef.current)==null||we.focus()}}}),!Ge&&Qe("start"),n,Qe("end"),xe&&q.createElement(Tj,{"data-type":"inside",ref:pe==null?void 0:pe.afterInsideRef,onFocus:at=>{if(f)Qg(Ue()[0]);else if(pe!=null&&pe.preserveTabOrder&&pe.portalNode)if(y&&(be.current=!0),TC(at,pe.portalNode)){const me=Foe()||L;me==null||me.focus()}else{var we;(we=pe.afterOutsideRef.current)==null||we.focus()}}}))}function WK(e){return Ew(e.target)&&e.target.tagName==="BUTTON"}function qK(e){return foe(e)}function hFe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,dataRef:s,elements:{domReference:a}}=e,{enabled:c=!0,event:i="click",toggle:f=!0,ignoreMouse:g=!1,keyboardHandlers:y=!0}=t,b=q.useRef(),T=q.useRef(!1);return q.useMemo(()=>c?{reference:{onPointerDown(S){b.current=S.pointerType},onMouseDown(S){S.button===0&&(LK(b.current)&&g||i!=="click"&&(n&&f&&(!s.current.openEvent||s.current.openEvent.type==="mousedown")?r(!1,S.nativeEvent):(S.preventDefault(),r(!0,S.nativeEvent))))},onClick(S){if(i==="mousedown"&&b.current){b.current=void 0;return}LK(b.current)&&g||(n&&f&&(!s.current.openEvent||s.current.openEvent.type==="click")?r(!1,S.nativeEvent):r(!0,S.nativeEvent))},onKeyDown(S){b.current=void 0,!(S.defaultPrevented||!y||WK(S))&&(S.key===" "&&!qK(a)&&(S.preventDefault(),T.current=!0),S.key==="Enter"&&r(!(n&&f),S.nativeEvent))},onKeyUp(S){S.defaultPrevented||!y||WK(S)||qK(a)||S.key===" "&&T.current&&(T.current=!1,r(!(n&&f),S.nativeEvent))}}}:{},[c,s,i,g,y,a,f,n,r])}const fFe=q.useInsertionEffect,pFe=fFe||(e=>e());function Fy(e){const t=q.useRef(()=>{});return pFe(()=>{t.current=e}),q.useCallback(function(){for(var n=arguments.length,r=new Array(n),s=0;s<n;s++)r[s]=arguments[s];return t.current==null?void 0:t.current(...r)},[])}const AFe={pointerdown:"onPointerDown",mousedown:"onMouseDown",click:"onClick"},mFe={pointerdown:"onPointerDownCapture",mousedown:"onMouseDownCapture",click:"onClickCapture"},gFe=e=>{var t,n;return{escapeKeyBubbles:typeof e=="boolean"?e:(t=e==null?void 0:e.escapeKey)!=null?t:!1,outsidePressBubbles:typeof e=="boolean"?e:(n=e==null?void 0:e.outsidePress)!=null?n:!0}};function yFe(e,t){t===void 0&&(t={});const{open:n,onOpenChange:r,events:s,nodeId:a,elements:{reference:c,domReference:i,floating:f},dataRef:g}=e,{enabled:y=!0,escapeKey:b=!0,outsidePress:T=!0,outsidePressEvent:S="pointerdown",referencePress:U=!1,referencePressEvent:N="pointerdown",ancestorScroll:W=!1,bubbles:L}=t,Q=oP(),V=Eoe()!=null,Z=Fy(typeof T=="function"?T:()=>!1),ne=typeof T=="function"?Z:T,Y=q.useRef(!1),{escapeKeyBubbles:le,outsidePressBubbles:pe}=gFe(L),_e=Fy(he=>{if(!n||!y||!b||he.key!=="Escape")return;const be=Q?nw(Q.nodesRef.current,a):[];if(!le&&(he.stopPropagation(),be.length>0)){let Te=!0;if(be.forEach(Ee=>{var Ne;if((Ne=Ee.context)!=null&&Ne.open&&!Ee.context.dataRef.current.__escapeKeyBubbles){Te=!1;return}}),!Te)return}s.emit("dismiss",{type:"escapeKey",data:{returnFocus:{preventScroll:!1}}}),r(!1,$Ie(he)?he.nativeEvent:he)}),ye=Fy(he=>{const be=Y.current;if(Y.current=!1,be||typeof ne=="function"&&!ne(he))return;const Te=hoe(he),Ee="["+MS("inert")+"]",Ne=zA(f).querySelectorAll(Ee);let Ge=DA(Te)?Te:null;for(;Ge&&!UIe(Ge);){const Qe=QIe(Ge);if(Qe===zA(f).body||!DA(Qe))break;Ge=Qe}if(Ne.length&&DA(Te)&&!GIe(Te)&&!$h(Te,f)&&Array.from(Ne).every(Qe=>!$h(Ge,Qe)))return;if(Ew(Te)&&f){const Qe=Te.clientWidth>0&&Te.scrollWidth>Te.clientWidth,xe=Te.clientHeight>0&&Te.scrollHeight>Te.clientHeight;let at=xe&&he.offsetX>Te.clientWidth;if(xe&&zIe(Te).direction==="rtl"&&(at=he.offsetX<=Te.offsetWidth-Te.clientWidth),at||Qe&&he.offsetY>Te.clientHeight)return}const Je=Q&&nw(Q.nodesRef.current,a).some(Qe=>{var xe;return oN(he,(xe=Qe.context)==null?void 0:xe.elements.floating)});if(oN(he,f)||oN(he,i)||Je)return;const Ue=Q?nw(Q.nodesRef.current,a):[];if(Ue.length>0){let Qe=!0;if(Ue.forEach(xe=>{var at;if((at=xe.context)!=null&&at.open&&!xe.context.dataRef.current.__outsidePressBubbles){Qe=!1;return}}),!Qe)return}s.emit("dismiss",{type:"outsidePress",data:{returnFocus:V?{preventScroll:!0}:coe(he)||uoe(he)}}),r(!1,he)});return q.useEffect(()=>{if(!n||!y)return;g.current.__escapeKeyBubbles=le,g.current.__outsidePressBubbles=pe;function he(Ee){r(!1,Ee)}const be=zA(f);b&&be.addEventListener("keydown",_e),ne&&be.addEventListener(S,ye);let Te=[];return W&&(DA(i)&&(Te=Iy(i)),DA(f)&&(Te=Te.concat(Iy(f))),!DA(c)&&c&&c.contextElement&&(Te=Te.concat(Iy(c.contextElement)))),Te=Te.filter(Ee=>{var Ne;return Ee!==((Ne=be.defaultView)==null?void 0:Ne.visualViewport)}),Te.forEach(Ee=>{Ee.addEventListener("scroll",he,{passive:!0})}),()=>{b&&be.removeEventListener("keydown",_e),ne&&be.removeEventListener(S,ye),Te.forEach(Ee=>{Ee.removeEventListener("scroll",he)})}},[g,f,i,c,b,ne,S,n,r,W,y,le,pe,_e,ye]),q.useEffect(()=>{Y.current=!1},[ne,S]),q.useMemo(()=>y?{reference:{onKeyDown:_e,[AFe[N]]:he=>{U&&(s.emit("dismiss",{type:"referencePress",data:{returnFocus:!1}}),r(!1,he.nativeEvent))}},floating:{onKeyDown:_e,[mFe[S]]:()=>{Y.current=!0}}}:{},[y,s,U,S,N,r,_e])}function vFe(e){var t;e===void 0&&(e={});const{open:n=!1,onOpenChange:r,nodeId:s}=e,[a,c]=q.useState(null),i=((t=e.elements)==null?void 0:t.reference)||a,f=Sje(e),g=oP(),y=Fy((Z,ne)=>{Z&&(T.current.openEvent=ne),r==null||r(Z,ne)}),b=q.useRef(null),T=q.useRef({}),S=q.useState(()=>Xje())[0],U=Fz(),N=q.useCallback(Z=>{const ne=DA(Z)?{getBoundingClientRect:()=>Z.getBoundingClientRect(),contextElement:Z}:Z;f.refs.setReference(ne)},[f.refs]),W=q.useCallback(Z=>{(DA(Z)||Z===null)&&(b.current=Z,c(Z)),(DA(f.refs.reference.current)||f.refs.reference.current===null||Z!==null&&!DA(Z))&&f.refs.setReference(Z)},[f.refs]),L=q.useMemo(()=>({...f.refs,setReference:W,setPositionReference:N,domReference:b}),[f.refs,W,N]),Q=q.useMemo(()=>({...f.elements,domReference:i}),[f.elements,i]),V=q.useMemo(()=>({...f,refs:L,elements:Q,dataRef:T,nodeId:s,floatingId:U,events:S,open:n,onOpenChange:y}),[f,s,U,S,n,y,L,Q]);return Yc(()=>{const Z=g==null?void 0:g.nodesRef.current.find(ne=>ne.id===s);Z&&(Z.context=V)}),q.useMemo(()=>({...f,context:V,refs:L,elements:Q}),[f,L,Q,V])}function hN(e,t,n){const r=new Map;return{...n==="floating"&&{tabIndex:-1},...e,...t.map(s=>s?s[n]:null).concat(e).reduce((s,a)=>(a&&Object.entries(a).forEach(c=>{let[i,f]=c;if(i.indexOf("on")===0){if(r.has(i)||r.set(i,[]),typeof f=="function"){var g;(g=r.get(i))==null||g.push(f),s[i]=function(){for(var y,b=arguments.length,T=new Array(b),S=0;S<b;S++)T[S]=arguments[S];return(y=r.get(i))==null?void 0:y.map(U=>U(...T)).find(U=>U!==void 0)}}}else s[i]=f}),s),{})}}function xFe(e){e===void 0&&(e=[]);const t=e,n=q.useCallback(a=>hN(a,e,"reference"),t),r=q.useCallback(a=>hN(a,e,"floating"),t),s=q.useCallback(a=>hN(a,e,"item"),e.map(a=>a==null?void 0:a.item));return q.useMemo(()=>({getReferenceProps:n,getFloatingProps:r,getItemProps:s}),[n,r,s])}let ZK=!1;function aP(e,t,n){switch(e){case"vertical":return t;case"horizontal":return n;default:return t||n}}function XK(e,t){return aP(t,e===jz||e===sP,e===jw||e===PB)}function fN(e,t,n){return aP(t,e===sP,n?e===jw:e===PB)||e==="Enter"||e==" "||e===""}function _Fe(e,t,n){return aP(t,n?e===jw:e===PB,e===sP)}function YK(e,t,n){return aP(t,n?e===PB:e===jw,e===jz)}function wFe(e,t){const{open:n,onOpenChange:r,refs:s,elements:{domReference:a,floating:c}}=e,{listRef:i,activeIndex:f,onNavigate:g=()=>{},enabled:y=!0,selectedIndex:b=null,allowEscape:T=!1,loop:S=!1,nested:U=!1,rtl:N=!1,virtual:W=!1,focusItemOnOpen:L="auto",focusItemOnHover:Q=!0,openOnArrowKeyDown:V=!0,disabledIndices:Z=void 0,orientation:ne="vertical",cols:Y=1,scrollItemIntoView:le=!0,virtualItemRef:pe}=t,_e=Eoe(),ye=oP(),he=Fy(g),be=q.useRef(L),Te=q.useRef(b??-1),Ee=q.useRef(null),Ne=q.useRef(!0),Ge=q.useRef(he),Je=q.useRef(!!c),Ue=q.useRef(!1),Qe=q.useRef(!1),xe=jy(Z),at=jy(n),we=jy(le),[me,Ze]=q.useState(),[ot,vt]=q.useState(),Qt=Fy(function(Me,Ht,Zt){Zt===void 0&&(Zt=!1);const pn=Me.current[Ht.current];pn&&(W?(Ze(pn.id),ye==null||ye.events.emit("virtualfocus",pn),pe&&(pe.current=pn)):Qg(pn,{preventScroll:!0,sync:VIe()&&doe()?ZK||Ue.current:!1}),requestAnimationFrame(()=>{const Dt=we.current;Dt&&pn&&(Zt||!Ne.current)&&(pn.scrollIntoView==null||pn.scrollIntoView(typeof Dt=="boolean"?{block:"nearest",inline:"nearest"}:Dt))}))});Yc(()=>{document.createElement("div").focus({get preventScroll(){return ZK=!0,!1}})},[]),Yc(()=>{y&&(n&&c?be.current&&b!=null&&(Qe.current=!0,he(b)):Je.current&&(Te.current=-1,Ge.current(null)))},[y,n,c,b,he]),Yc(()=>{if(y&&n&&c)if(f==null){if(Ue.current=!1,b!=null)return;if(Je.current&&(Te.current=-1,Qt(i,Te)),!Je.current&&be.current&&(Ee.current!=null||be.current===!0&&Ee.current==null)){let Me=0;const Ht=()=>{i.current[0]==null?(Me<2&&(Me?requestAnimationFrame:queueMicrotask)(Ht),Me++):(Te.current=Ee.current==null||fN(Ee.current,ne,N)||U?cN(i,xe.current):HK(i,xe.current),Ee.current=null,he(Te.current))};Ht()}}else EC(i,f)||(Te.current=f,Qt(i,Te,Qe.current),Qe.current=!1)},[y,n,c,f,b,U,i,ne,N,he,Qt,xe]),Yc(()=>{var Me,Ht;if(!y||c||!ye||W||!Je.current)return;const Zt=ye.nodesRef.current,pn=(Me=Zt.find(Oe=>Oe.id===_e))==null||(Ht=Me.context)==null?void 0:Ht.elements.floating,Dt=uy(zA(c)),hn=Zt.some(Oe=>Oe.context&&$h(Oe.context.elements.floating,Dt));pn&&!hn&&Ne.current&&pn.focus({preventScroll:!0})},[y,c,ye,_e,W]),Yc(()=>{if(!y||!ye||!W||_e)return;function Me(Ht){vt(Ht.id),pe&&(pe.current=Ht)}return ye.events.on("virtualfocus",Me),()=>{ye.events.off("virtualfocus",Me)}},[y,ye,W,_e,pe]),Yc(()=>{Ge.current=he,Je.current=!!c}),Yc(()=>{n||(Ee.current=null)},[n]);const Ot=f!=null,kt=q.useMemo(()=>{function Me(Ht){if(!n)return;const Zt=i.current.indexOf(Ht);Zt!==-1&&he(Zt)}return{onFocus(Ht){let{currentTarget:Zt}=Ht;Me(Zt)},onClick:Ht=>{let{currentTarget:Zt}=Ht;return Zt.focus({preventScroll:!0})},...Q&&{onMouseMove(Ht){let{currentTarget:Zt}=Ht;Me(Zt)},onPointerLeave(Ht){let{pointerType:Zt}=Ht;!Ne.current||Zt==="touch"||(Te.current=-1,Qt(i,Te),he(null),W||Qg(s.floating.current,{preventScroll:!0}))}}}},[n,s,Qt,Q,i,he,W]);return q.useMemo(()=>{if(!y)return{};const Me=xe.current;function Ht(Oe){if(Ne.current=!1,Ue.current=!0,!at.current&&Oe.currentTarget===s.floating.current)return;if(U&&YK(Oe.key,ne,N)){Qu(Oe),r(!1,Oe.nativeEvent),Ew(a)&&!W&&a.focus();return}const nn=Te.current,Vt=cN(i,Me),$t=HK(i,Me);if(Oe.key==="Home"&&(Qu(Oe),Te.current=Vt,he(Te.current)),Oe.key==="End"&&(Qu(Oe),Te.current=$t,he(Te.current)),!(Y>1&&(Te.current=Kje(i,{event:Oe,orientation:ne,loop:S,cols:Y,disabledIndices:Me,minIndex:Vt,maxIndex:$t,prevIndex:Te.current,stopEvent:!0}),he(Te.current),ne==="both"))&&XK(Oe.key,ne)){if(Qu(Oe),n&&!W&&uy(Oe.currentTarget.ownerDocument)===Oe.currentTarget){Te.current=fN(Oe.key,ne,N)?Vt:$t,he(Te.current);return}fN(Oe.key,ne,N)?S?Te.current=nn>=$t?T&&nn!==i.current.length?-1:Vt:Bd(i,{startingIndex:nn,disabledIndices:Me}):Te.current=Math.min($t,Bd(i,{startingIndex:nn,disabledIndices:Me})):S?Te.current=nn<=Vt?T&&nn!==-1?i.current.length:$t:Bd(i,{startingIndex:nn,decrement:!0,disabledIndices:Me}):Te.current=Math.max(Vt,Bd(i,{startingIndex:nn,decrement:!0,disabledIndices:Me})),EC(i,Te.current)?he(null):he(Te.current)}}function Zt(Oe){L==="auto"&&coe(Oe.nativeEvent)&&(be.current=!0)}function pn(Oe){be.current=L,L==="auto"&&uoe(Oe.nativeEvent)&&(be.current=!0)}const Dt=W&&n&&Ot&&{"aria-activedescendant":ot||me},hn=i.current.find(Oe=>(Oe==null?void 0:Oe.id)===me);return{reference:{...Dt,onKeyDown(Oe){Ne.current=!1;const nn=Oe.key.indexOf("Arrow")===0,Vt=_Fe(Oe.key,ne,N),$t=YK(Oe.key,ne,N),xn=XK(Oe.key,ne),Xt=(U?Vt:xn)||Oe.key==="Enter"||Oe.key.trim()==="";if(W&&n){const Rn=ye==null?void 0:ye.nodesRef.current.find(qt=>qt.parentId==null),wt=ye&&Rn?tFe(ye.nodesRef.current,Rn.id):null;if(nn&&wt&&pe){const qt=new KeyboardEvent("keydown",{key:Oe.key,bubbles:!0});if(Vt||$t){var gn,rr;const fn=((gn=wt.context)==null?void 0:gn.elements.domReference)===Oe.currentTarget,Un=$t&&!fn?(rr=wt.context)==null?void 0:rr.elements.domReference:Vt?hn:null;Un&&(Qu(Oe),Un.dispatchEvent(qt),vt(void 0))}if(xn&&wt.context&&wt.context.open&&wt.parentId&&Oe.currentTarget!==wt.context.elements.domReference){var Gt;Qu(Oe),(Gt=wt.context.elements.domReference)==null||Gt.dispatchEvent(qt);return}}return Ht(Oe)}if(!(!n&&!V&&nn)){if(Xt&&(Ee.current=U&&xn?null:Oe.key),U){Vt&&(Qu(Oe),n?(Te.current=cN(i,Me),he(Te.current)):r(!0,Oe.nativeEvent));return}xn&&(b!=null&&(Te.current=b),Qu(Oe),!n&&V?r(!0,Oe.nativeEvent):Ht(Oe),n&&he(Te.current))}},onFocus(){n&&he(null)},onPointerDown:pn,onMouseDown:Zt,onClick:Zt},floating:{"aria-orientation":ne==="both"?void 0:ne,...Dt,onKeyDown:Ht,onPointerMove(){Ne.current=!0}},item:kt}},[a,s,me,ot,xe,at,i,y,ne,N,W,n,Ot,U,b,V,T,Y,S,L,he,r,kt,ye,pe])}function bFe(e,t){t===void 0&&(t={});const{open:n,floatingId:r}=e,{enabled:s=!0,role:a="dialog"}=t,c=Fz();return q.useMemo(()=>{const i={id:r,role:a};return s?a==="tooltip"?{reference:{"aria-describedby":n?r:void 0},floating:i}:{reference:{"aria-expanded":n?"true":"false","aria-haspopup":a==="alertdialog"?"dialog":a,"aria-controls":n?r:void 0,...a==="listbox"&&{role:"combobox"},...a==="menu"&&{id:c}},floating:{...i,...a==="menu"&&{"aria-labelledby":c}}}:{}},[s,a,n,r,c])}function CFe(e,t){var n;const{open:r,dataRef:s}=e,{listRef:a,activeIndex:c,onMatch:i,onTypingChange:f,enabled:g=!0,findMatch:y=null,resetMs:b=750,ignoreKeys:T=[],selectedIndex:S=null}=t,U=q.useRef(),N=q.useRef(""),W=q.useRef((n=S??c)!=null?n:-1),L=q.useRef(null),Q=Fy(i),V=Fy(f),Z=jy(y),ne=jy(T);return Yc(()=>{r&&(clearTimeout(U.current),L.current=null,N.current="")},[r]),Yc(()=>{if(r&&N.current===""){var Y;W.current=(Y=S??c)!=null?Y:-1}},[r,S,c]),q.useMemo(()=>{if(!g)return{};function Y(_e){_e?s.current.typing||(s.current.typing=_e,V(_e)):s.current.typing&&(s.current.typing=_e,V(_e))}function le(_e,ye,he){const be=Z.current?Z.current(ye,he):ye.find(Te=>(Te==null?void 0:Te.toLocaleLowerCase().indexOf(he.toLocaleLowerCase()))===0);return be?_e.indexOf(be):-1}function pe(_e){const ye=a.current;if(N.current.length>0&&N.current[0]!==" "&&(le(ye,ye,N.current)===-1?Y(!1):_e.key===" "&&Qu(_e)),ye==null||ne.current.includes(_e.key)||_e.key.length!==1||_e.ctrlKey||_e.metaKey||_e.altKey)return;r&&_e.key!==" "&&(Qu(_e),Y(!0)),ye.every(Te=>{var Ee,Ne;return Te?((Ee=Te[0])==null?void 0:Ee.toLocaleLowerCase())!==((Ne=Te[1])==null?void 0:Ne.toLocaleLowerCase()):!0})&&N.current===_e.key&&(N.current="",W.current=L.current),N.current+=_e.key,clearTimeout(U.current),U.current=setTimeout(()=>{N.current="",W.current=L.current,Y(!1)},b);const he=W.current,be=le(ye,[...ye.slice((he||0)+1),...ye.slice(0,(he||0)+1)],N.current);be!==-1?(Q(be),L.current=be):_e.key!==" "&&(N.current="",Y(!1))}return{reference:{onKeyDown:pe},floating:{onKeyDown:pe,onKeyUp(_e){_e.key===" "&&Y(!1)}}}},[g,r,s,a,b,ne,Z,Q,V])}const SFe=({options:e,reusable:t,sendMessage:n,isReadOnly:r})=>{var s,a,c,i,f;const g=vz(Qe=>Qe.messageContainerRef),[y,b]=q.useState(!1),[T,S]=q.useState(null),[U,N]=q.useState(null),{message:{blocks:{dropdown:W}}}=qo,L=e.reduce((Qe,xe)=>(Qe[xe.label]=xe.value,Qe),{}),Q=L?Object.keys(L):[],V=Qe=>{b(U!==null&&!t?!1:Qe)},{refs:Z,floatingStyles:ne,context:Y}=vFe({placement:"bottom-start",open:y,onOpenChange:V,whileElementsMounted:xje,middleware:[Bje(5),Eje({padding:10,boundary:(g==null?void 0:g.current)??void 0,crossAxis:!0}),Tje({apply({rects:Qe,elements:xe,availableHeight:at}){Object.assign(xe.floating.style,{maxHeight:`${at}px`,minWidth:`${Qe.reference.width}px`})},padding:10})]}),le=q.useRef([]),pe=q.useRef(Q),_e=q.useRef(!1),ye=hFe(Y,{event:"mousedown"}),he=yFe(Y),be=bFe(Y,{role:"listbox"}),Te=wFe(Y,{listRef:le,activeIndex:T,selectedIndex:U,onNavigate:S,loop:!0}),Ee=CFe(Y,{listRef:pe,activeIndex:T,selectedIndex:U,onMatch:y?S:N,onTypingChange(Qe){_e.current=Qe}}),{getReferenceProps:Ne,getFloatingProps:Ge,getItemProps:Je}=xFe([he,be,Te,Ee,ye]),Ue=Qe=>{N(Qe),Q[Qe]!==void 0&&(n==null||n({type:"text",text:Q[Qe]??"",value:L[Q[Qe]]??""})),b(!1)};return zt.jsxs(zt.Fragment,{children:[zt.jsxs("div",{tabIndex:0,ref:Z.setReference,"aria-labelledby":"select-label","aria-autocomplete":"none","data-disabled":U!==null&&!t?"":void 0,style:r?{pointerEvents:"none"}:void 0,...(s=W.button)==null?void 0:s.container,...Ne(),children:[zt.jsx("span",{...(a=W.button)==null?void 0:a.text,children:"Select..."}),zt.jsx(LTe,{...(c=W.button)==null?void 0:c.icon})]}),y&&zt.jsx(cFe,{children:zt.jsx(dFe,{context:Y,modal:!1,children:zt.jsx("div",{ref:Z.setFloating,className:(f=(i=W.content)==null?void 0:i.container)==null?void 0:f.className,style:{...ne},...Ge(),children:Q.map((Qe,xe)=>{var at;return zt.jsx("div",{ref:we=>{le.current[xe]=we},role:"option",tabIndex:xe===T?0:-1,"aria-selected":xe===U&&xe===T,"data-active":xe===T?"":void 0,...(at=W.content)==null?void 0:at.item,...Je({onClick(){Ue(xe)},onKeyDown(we){we.key==="Enter"&&(we.preventDefault(),Ue(xe)),we.key===" "&&!_e.current&&(we.preventDefault(),Ue(xe))}}),children:Qe},Qe)})})})})]})},Loe=q.forwardRef(({title:e,url:t,isReadOnly:n,...r},s)=>{const{message:{blocks:{file:a}}}=qo;return zt.jsxs("a",{...r,...a.container,href:t,style:n?{pointerEvents:"none"}:void 0,download:!0,ref:s,target:"_blank",rel:"noreferrer",children:[zt.jsx("p",{...a.title,children:e||t}),zt.jsx(NTe,{...a.icon})]})});Loe.displayName="File";const BFe=Zw()((e,t)=>({components:{},getCustomComponent:async n=>{const r=t().components[n];if(r)return r;const s=await fetch(n).then(f=>f.text()),a=new Blob([s],{type:"application/javascript"}),c=await import(URL.createObjectURL(a)),i=()=>c.default;return e(f=>({components:{...f.components,[n]:i}})),i}}));globalThis.React=Ti;const EFe=({url:e,name:t,data:n,...r})=>{const s=BFe(g=>g.getCustomComponent),[a,c]=q.useState(null),[i,f]=q.useState(null);return q.useEffect(()=>{s(e).then(c).catch(g=>{f(g.message)})},[e]),i?zt.jsx("div",{style:{color:"red"},children:i}):a?zt.jsx(a,{...n,...r}):null},TFe={audio:Xse,bubble:Vse,button:STe,carousel:soe,column:Jse,dropdown:SFe,file:Loe,image:qse,location:Yse,row:eoe,text:q3e,video:Zse,custom:EFe},kB=({block:e,renderers:t,...n})=>{const r=(t==null?void 0:t[e.type])??TFe[e.type],s={...n,...e};return zt.jsx(r,{...s})};function IFe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{fillRule:"evenodd",d:"M8 14a.75.75 0 0 1-.75-.75V4.56L4.03 7.78a.75.75 0 0 1-1.06-1.06l4.5-4.5a.75.75 0 0 1 1.06 0l4.5 4.5a.75.75 0 0 1-1.06 1.06L8.75 4.56v8.69A.75.75 0 0 1 8 14Z",clipRule:"evenodd"}))}const jFe=q.forwardRef(IFe);function FFe({title:e,titleId:t,...n},r){return q.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 16 16",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:r,"aria-labelledby":t},n),e?q.createElement("title",{id:t},e):null,q.createElement("path",{d:"M8 1a2 2 0 0 0-2 2v4a2 2 0 1 0 4 0V3a2 2 0 0 0-2-2Z"}),q.createElement("path",{d:"M4.5 7A.75.75 0 0 0 3 7a5.001 5.001 0 0 0 4.25 4.944V13.5h-1.5a.75.75 0 0 0 0 1.5h4.5a.75.75 0 0 0 0-1.5h-1.5v-1.556A5.001 5.001 0 0 0 13 7a.75.75 0 0 0-1.5 0 3.5 3.5 0 1 1-7 0Z"}))}const PFe=q.forwardRef(FFe);function Moe(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Moe(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function NS(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Moe(e))&&(r&&(r+=" "),r+=t);return r}const kFe=({disabled:e,onFileSelected:t})=>{const n=q.useRef(null),{container:r,icon:s}=qo.composer.uploadButton,a=()=>{n.current&&n.current.click()},c=i=>{const f=i.target.files;f&&f.length>0&&Array.from(f).forEach(g=>{t(g)})};return zt.jsxs(zt.Fragment,{children:[zt.jsx("button",{type:"button",disabled:e,...r,children:zt.jsx(OIe,{...s,"data-disabled":e,onClick:a})}),zt.jsx("input",{value:"",multiple:!0,type:"file",ref:n,style:{display:"none"},onChange:c})]})},LFe=({name:e,type:t,instance:n,status:r,removeFile:s})=>{const{loader:a,fileIcon:c,removeIcon:i,errorIcon:f,previewImage:g}=qo.composer.fileWidget,y=["PNG","JPEG","JPG"].includes(T3(e)),b=q.useMemo(()=>y?URL.createObjectURL(n):"",[n]);return r==="loading"?zt.jsx(E3,{name:e,status:r,removeButton:zt.jsx("div",{...a}),extension:T3(e),children:zt.jsx("div",{...c.container,children:zt.jsx(pN,{type:t,...c.icon})})}):r==="error"?zt.jsx(E3,{name:e,status:r,removeButton:zt.jsx(sN,{onClick:()=>s(e),...i}),extension:"Upload Error",children:zt.jsxs("div",{...c.container,children:[zt.jsx(OTe,{...f}),zt.jsx(pN,{type:t,...c.icon})]})}):r=="uploaded"&&y?zt.jsx(E3,{name:e,status:r,removeButton:zt.jsx(sN,{onClick:()=>s(e),...i}),extension:T3(e),children:zt.jsx("div",{...c.container,children:zt.jsx("img",{src:b,alt:e,...g})})}):zt.jsx(E3,{name:e,status:r,removeButton:zt.jsx(sN,{onClick:()=>s(e),...i}),extension:T3(e),children:zt.jsx("div",{...c.container,children:zt.jsx(pN,{type:t,...c.icon})})})},E3=({name:e,status:t,removeButton:n,children:r,extension:s})=>{const{container:a,metadata:c}=qo.composer.fileWidget;return zt.jsxs("div",{"data-status":t,title:e,...a,children:[n,r,zt.jsxs("div",{...c.container,children:[zt.jsx("div",{...c.name,children:e}),zt.jsx("div",{...c.type,children:s})]})]})},pN=({type:e,...t})=>e==="image"?zt.jsx(H3e,{...t}):e==="video"?zt.jsx(K3e,{...t}):e==="audio"?zt.jsx($3e,{...t}):zt.jsx(z3e,{...t}),T3=e=>{const t=e.split(".").pop();return t?t.toUpperCase():"File"};function AD(){return AD=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)({}).hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},AD.apply(null,arguments)}function MFe(e,t){if(e==null)return{};var n={};for(var r in e)if({}.hasOwnProperty.call(e,r)){if(t.includes(r))continue;n[r]=e[r]}return n}var NFe=q.useLayoutEffect,RFe=function(e){var t=q.useRef(e);return NFe(function(){t.current=e}),t},JK=function(e,t){if(typeof e=="function"){e(t);return}e.current=t},OFe=function(e,t){var n=q.useRef();return q.useCallback(function(r){e.current=r,n.current&&JK(n.current,null),n.current=t,t&&JK(t,r)},[t])},eW={"min-height":"0","max-height":"none",height:"0",visibility:"hidden",overflow:"hidden",position:"absolute","z-index":"-1000",top:"0",right:"0",display:"block"},DFe=function(e){Object.keys(eW).forEach(function(t){e.style.setProperty(t,eW[t],"important")})},tW=DFe,uh=null,nW=function(e,t){var n=e.scrollHeight;return t.sizingStyle.boxSizing==="border-box"?n+t.borderSize:n-t.paddingSize};function UFe(e,t,n,r){n===void 0&&(n=1),r===void 0&&(r=1/0),uh||(uh=document.createElement("textarea"),uh.setAttribute("tabindex","-1"),uh.setAttribute("aria-hidden","true"),tW(uh)),uh.parentNode===null&&document.body.appendChild(uh);var s=e.paddingSize,a=e.borderSize,c=e.sizingStyle,i=c.boxSizing;Object.keys(c).forEach(function(T){var S=T;uh.style[S]=c[S]}),tW(uh),uh.value=t;var f=nW(uh,e);uh.value=t,f=nW(uh,e),uh.value="x";var g=uh.scrollHeight-s,y=g*n;i==="border-box"&&(y=y+s+a),f=Math.max(y,f);var b=g*r;return i==="border-box"&&(b=b+s+a),f=Math.min(b,f),[f,g]}var rW=function(){},zFe=function(e,t){return e.reduce(function(n,r){return n[r]=t[r],n},{})},QFe=["borderBottomWidth","borderLeftWidth","borderRightWidth","borderTopWidth","boxSizing","fontFamily","fontSize","fontStyle","fontWeight","letterSpacing","lineHeight","paddingBottom","paddingLeft","paddingRight","paddingTop","tabSize","textIndent","textRendering","textTransform","width","wordBreak"],HFe=!!document.documentElement.currentStyle,VFe=function(e){var t=window.getComputedStyle(e);if(t===null)return null;var n=zFe(QFe,t),r=n.boxSizing;if(r==="")return null;HFe&&r==="border-box"&&(n.width=parseFloat(n.width)+parseFloat(n.borderRightWidth)+parseFloat(n.borderLeftWidth)+parseFloat(n.paddingRight)+parseFloat(n.paddingLeft)+"px");var s=parseFloat(n.paddingBottom)+parseFloat(n.paddingTop),a=parseFloat(n.borderBottomWidth)+parseFloat(n.borderTopWidth);return{sizingStyle:n,paddingSize:s,borderSize:a}},$Fe=VFe;function Noe(e,t,n){var r=RFe(n);q.useLayoutEffect(function(){var s=function(a){return r.current(a)};if(e)return e.addEventListener(t,s),function(){return e.removeEventListener(t,s)}},[])}var GFe=function(e){Noe(window,"resize",e)},KFe=function(e){Noe(document.fonts,"loadingdone",e)},WFe=["cacheMeasurements","maxRows","minRows","onChange","onHeightChange"],qFe=function(e,t){var n=e.cacheMeasurements,r=e.maxRows,s=e.minRows,a=e.onChange,c=a===void 0?rW:a,i=e.onHeightChange,f=i===void 0?rW:i,g=MFe(e,WFe),y=g.value!==void 0,b=q.useRef(null),T=OFe(b,t),S=q.useRef(0),U=q.useRef(),N=function(){var L=b.current,Q=n&&U.current?U.current:$Fe(L);if(Q){U.current=Q;var V=UFe(Q,L.value||L.placeholder||"x",s,r),Z=V[0],ne=V[1];S.current!==Z&&(S.current=Z,L.style.setProperty("height",Z+"px","important"),f(Z,{rowHeight:ne}))}},W=function(L){y||N(),c(L)};return q.useLayoutEffect(N),GFe(N),KFe(N),q.createElement("textarea",AD({},g,{onChange:W,ref:T}))},ZFe=q.forwardRef(qFe);const XFe=({inputRef:e,composerPlaceholder:t,composerDisabled:n,textInput:r,historyIndex:s,setTextInput:a,setHistoryIndex:c,sendComposerMessage:i})=>{const f=Lse(y=>y.messageHistory),{input:g}=qo.composer;return zt.jsx(ZFe,{...g,ref:e,placeholder:t??"Type your message...",disabled:n,value:r,"data-has-value":!!r,onChange:y=>a(y.target.value),maxRows:5,onKeyDown:y=>{n||(y.key==="Enter"&&y.shiftKey?(y.preventDefault(),a(`${r}
`)):y.key==="Enter"&&(y.preventDefault(),i()),y.key==="ArrowUp"&&(y.preventDefault(),s<f.length-1&&a(f[s+1]??""),c(Math.min(s+1,f.length-1))),y.key==="ArrowDown"&&(y.preventDefault(),a(s===0?"":f[s-1]??""),c(Math.max(s-1,-1))))}})},YFe=({textInput:e,setTextInput:t})=>{const[n,r]=q.useState(!1),s=q.useRef(null),{icon:a,container:c}=qo.composer.voiceButton,i=window.SpeechRecognition||window.webkitSpeechRecognition,f=()=>{s.current||(s.current=new i);const g=s.current;g&&(g.continuous=!0,g.onresult=y=>{var b,T,S;const U=((S=(T=(b=y.results)==null?void 0:b[0])==null?void 0:T[0])==null?void 0:S.transcript)??"";t(U??""),g.stop(),r(!1)},n?(g.stop(),r(!1)):(g.start(),r(!0)))};if(i)return zt.jsx("button",{...c,type:"button","aria-label":"Activate voice input",disabled:!!e,onClick:f,"data-listens":!!n,children:zt.jsx(PFe,{...a})})},JFe=q.memo(q.forwardRef(({className:e,inputRef:t,disableComposer:n,isReadOnly:r,allowFileUpload:s,connected:a,composerPlaceholder:c,showPoweredBy:i,sendMessage:f,uploadFile:g,...y},b)=>{const{composer:T}=qo,S=n||r||!a,[U,N]=q.useState(""),[W,L]=q.useState(-1),Q=Y2(_e=>_e.files),V=Y2(_e=>_e.setFiles),Z=Y2(_e=>_e.deleteFile),ne=Y2(_e=>_e.uploadFile),Y=Lse(_e=>_e.addMessageToHistory),le=U||Q.filter(_e=>_e.status==="uploaded").length>0,pe=()=>{const _e=Q.filter(be=>be.status==="uploaded");if(!_e.length&&!U)return;const ye=(_e==null?void 0:_e.map(be=>{const Te=be.url,Ee=be.type;return{video:{type:"video",videoUrl:Te},audio:{type:"audio",audioUrl:Te},image:{type:"image",imageUrl:Te}}[Ee]??{title:be.name,type:"file",fileUrl:Te}}))??[];U&&ye.push({type:"text",text:U});let he;ye.length==1?he=ye[0]:he={type:"bloc",items:ye.map(be=>{const{type:Te,...Ee}=be;return{type:Te,payload:Ee}})},f==null||f(he),V([]),N(""),Y(U),L(-1)};return r?null:zt.jsxs(zt.Fragment,{children:[zt.jsxs("div",{"data-disabled":S,...y,className:NS(T.container.className,e),ref:b,children:[Q.length>0&&zt.jsx("div",{...T==null?void 0:T.fileContainer,children:Q.map(_e=>zt.jsx(LFe,{..._e,removeFile:Z},_e.name))}),zt.jsxs("div",{...T.inputContainer,children:[s&&zt.jsx(kFe,{disabled:S||!g,onFileSelected:_e=>{g&&ne(_e,g)}}),zt.jsx(XFe,{inputRef:t,composerPlaceholder:c,composerDisabled:S,textInput:U,historyIndex:W,setTextInput:N,setHistoryIndex:L,sendComposerMessage:pe}),le&&zt.jsx("button",{type:"button","aria-label":"Send message",...T.button.container,disabled:S,onClick:()=>pe(),children:zt.jsx(jFe,{...T.button.icon})}),!le&&zt.jsx(YFe,{textInput:U,setTextInput:N})]})]}),zt.jsx("a",{...T.poweredBy,"data-hidden":i===!1,hidden:i===!1,href:"https://botpress.com/?from=webchat",target:"_blank",rel:"noopener noreferrer",children:"⚡ by Botpress"})]})}));var Roe={exports:{}},AN,iW;function ePe(){if(iW)return AN;iW=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return AN=e,AN}var mN,sW;function tPe(){if(sW)return mN;sW=1;var e=ePe();function t(){}function n(){}return n.resetWarningCache=t,mN=function(){function r(c,i,f,g,y,b){if(b!==e){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}r.isRequired=r;function s(){return r}var a={array:r,bigint:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},mN}Roe.exports=tPe()();var nPe=Roe.exports;const Ca=uo(nPe);var rPe=new Map([["aac","audio/aac"],["abw","application/x-abiword"],["arc","application/x-freearc"],["avif","image/avif"],["avi","video/x-msvideo"],["azw","application/vnd.amazon.ebook"],["bin","application/octet-stream"],["bmp","image/bmp"],["bz","application/x-bzip"],["bz2","application/x-bzip2"],["cda","application/x-cdf"],["csh","application/x-csh"],["css","text/css"],["csv","text/csv"],["doc","application/msword"],["docx","application/vnd.openxmlformats-officedocument.wordprocessingml.document"],["eot","application/vnd.ms-fontobject"],["epub","application/epub+zip"],["gz","application/gzip"],["gif","image/gif"],["heic","image/heic"],["heif","image/heif"],["htm","text/html"],["html","text/html"],["ico","image/vnd.microsoft.icon"],["ics","text/calendar"],["jar","application/java-archive"],["jpeg","image/jpeg"],["jpg","image/jpeg"],["js","text/javascript"],["json","application/json"],["jsonld","application/ld+json"],["mid","audio/midi"],["midi","audio/midi"],["mjs","text/javascript"],["mp3","audio/mpeg"],["mp4","video/mp4"],["mpeg","video/mpeg"],["mpkg","application/vnd.apple.installer+xml"],["odp","application/vnd.oasis.opendocument.presentation"],["ods","application/vnd.oasis.opendocument.spreadsheet"],["odt","application/vnd.oasis.opendocument.text"],["oga","audio/ogg"],["ogv","video/ogg"],["ogx","application/ogg"],["opus","audio/opus"],["otf","font/otf"],["png","image/png"],["pdf","application/pdf"],["php","application/x-httpd-php"],["ppt","application/vnd.ms-powerpoint"],["pptx","application/vnd.openxmlformats-officedocument.presentationml.presentation"],["rar","application/vnd.rar"],["rtf","application/rtf"],["sh","application/x-sh"],["svg","image/svg+xml"],["swf","application/x-shockwave-flash"],["tar","application/x-tar"],["tif","image/tiff"],["tiff","image/tiff"],["ts","video/mp2t"],["ttf","font/ttf"],["txt","text/plain"],["vsd","application/vnd.visio"],["wav","audio/wav"],["weba","audio/webm"],["webm","video/webm"],["webp","image/webp"],["woff","font/woff"],["woff2","font/woff2"],["xhtml","application/xhtml+xml"],["xls","application/vnd.ms-excel"],["xlsx","application/vnd.openxmlformats-officedocument.spreadsheetml.sheet"],["xml","application/xml"],["xul","application/vnd.mozilla.xul+xml"],["zip","application/zip"],["7z","application/x-7z-compressed"],["mkv","video/x-matroska"],["mov","video/quicktime"],["msg","application/vnd.ms-outlook"]]);function LB(e,t){var n=iPe(e);if(typeof n.path!="string"){var r=e.webkitRelativePath;Object.defineProperty(n,"path",{value:typeof t=="string"?t:typeof r=="string"&&r.length>0?r:e.name,writable:!1,configurable:!1,enumerable:!0})}return n}function iPe(e){var t=e.name,n=t&&t.lastIndexOf(".")!==-1;if(n&&!e.type){var r=t.split(".").pop().toLowerCase(),s=rPe.get(r);s&&Object.defineProperty(e,"type",{value:s,writable:!1,configurable:!1,enumerable:!0})}return e}var sPe=[".DS_Store","Thumbs.db"];function oPe(e){return Xw(this,void 0,void 0,function(){return Yw(this,function(t){return Ij(e)&&aPe(e.dataTransfer)?[2,dPe(e.dataTransfer,e.type)]:lPe(e)?[2,cPe(e)]:Array.isArray(e)&&e.every(function(n){return"getFile"in n&&typeof n.getFile=="function"})?[2,uPe(e)]:[2,[]]})})}function aPe(e){return Ij(e)}function lPe(e){return Ij(e)&&Ij(e.target)}function Ij(e){return typeof e=="object"&&e!==null}function cPe(e){return mD(e.target.files).map(function(t){return LB(t)})}function uPe(e){return Xw(this,void 0,void 0,function(){var t;return Yw(this,function(n){switch(n.label){case 0:return[4,Promise.all(e.map(function(r){return r.getFile()}))];case 1:return t=n.sent(),[2,t.map(function(r){return LB(r)})]}})})}function dPe(e,t){return Xw(this,void 0,void 0,function(){var n,r;return Yw(this,function(s){switch(s.label){case 0:return e.items?(n=mD(e.items).filter(function(a){return a.kind==="file"}),t!=="drop"?[2,n]:[4,Promise.all(n.map(hPe))]):[3,2];case 1:return r=s.sent(),[2,oW(Ooe(r))];case 2:return[2,oW(mD(e.files).map(function(a){return LB(a)}))]}})})}function oW(e){return e.filter(function(t){return sPe.indexOf(t.name)===-1})}function mD(e){if(e===null)return[];for(var t=[],n=0;n<e.length;n++){var r=e[n];t.push(r)}return t}function hPe(e){if(typeof e.webkitGetAsEntry!="function")return aW(e);var t=e.webkitGetAsEntry();return t&&t.isDirectory?Doe(t):aW(e)}function Ooe(e){return e.reduce(function(t,n){return uD(uD([],TK(t),!1),TK(Array.isArray(n)?Ooe(n):[n]),!1)},[])}function aW(e){var t=e.getAsFile();if(!t)return Promise.reject("".concat(e," is not a File"));var n=LB(t);return Promise.resolve(n)}function fPe(e){return Xw(this,void 0,void 0,function(){return Yw(this,function(t){return[2,e.isDirectory?Doe(e):pPe(e)]})})}function Doe(e){var t=e.createReader();return new Promise(function(n,r){var s=[];function a(){var c=this;t.readEntries(function(i){return Xw(c,void 0,void 0,function(){var f,g,y;return Yw(this,function(b){switch(b.label){case 0:if(i.length)return[3,5];b.label=1;case 1:return b.trys.push([1,3,,4]),[4,Promise.all(s)];case 2:return f=b.sent(),n(f),[3,4];case 3:return g=b.sent(),r(g),[3,4];case 4:return[3,6];case 5:y=Promise.all(i.map(fPe)),s.push(y),a(),b.label=6;case 6:return[2]}})})},function(i){r(i)})}a()})}function pPe(e){return Xw(this,void 0,void 0,function(){return Yw(this,function(t){return[2,new Promise(function(n,r){e.file(function(s){var a=LB(s,e.fullPath);n(a)},function(s){r(s)})})]})})}var APe=function(e,t){if(e&&t){var n=Array.isArray(t)?t:t.split(",");if(n.length===0)return!0;var r=e.name||"",s=(e.type||"").toLowerCase(),a=s.replace(/\/.*$/,"");return n.some(function(c){var i=c.trim().toLowerCase();return i.charAt(0)==="."?r.toLowerCase().endsWith(i):i.endsWith("/*")?a===i.replace(/\/.*$/,""):s===i})}return!0};function lW(e){return yPe(e)||gPe(e)||zoe(e)||mPe()}function mPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function gPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function yPe(e){if(Array.isArray(e))return gD(e)}function cW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function uW(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?cW(Object(n),!0).forEach(function(r){Uoe(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):cW(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function Uoe(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function RS(e,t){return _Pe(e)||xPe(e,t)||zoe(e,t)||vPe()}function vPe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function zoe(e,t){if(e){if(typeof e=="string")return gD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gD(e,t)}}function gD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function xPe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,c,i;try{for(n=n.call(e);!(s=(c=n.next()).done)&&(r.push(c.value),!(t&&r.length===t));s=!0);}catch(f){a=!0,i=f}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw i}}return r}}function _Pe(e){if(Array.isArray(e))return e}var wPe="file-invalid-type",bPe="file-too-large",CPe="file-too-small",SPe="too-many-files",BPe=function(e){e=Array.isArray(e)&&e.length===1?e[0]:e;var t=Array.isArray(e)?"one of ".concat(e.join(", ")):e;return{code:wPe,message:"File type must be ".concat(t)}},dW=function(e){return{code:bPe,message:"File is larger than ".concat(e," ").concat(e===1?"byte":"bytes")}},hW=function(e){return{code:CPe,message:"File is smaller than ".concat(e," ").concat(e===1?"byte":"bytes")}},EPe={code:SPe,message:"Too many files"};function Qoe(e,t){var n=e.type==="application/x-moz-file"||APe(e,t);return[n,n?null:BPe(t)]}function Hoe(e,t,n){if(ix(e.size))if(ix(t)&&ix(n)){if(e.size>n)return[!1,dW(n)];if(e.size<t)return[!1,hW(t)]}else{if(ix(t)&&e.size<t)return[!1,hW(t)];if(ix(n)&&e.size>n)return[!1,dW(n)]}return[!0,null]}function ix(e){return e!=null}function TPe(e){var t=e.files,n=e.accept,r=e.minSize,s=e.maxSize,a=e.multiple,c=e.maxFiles,i=e.validator;return!a&&t.length>1||a&&c>=1&&t.length>c?!1:t.every(function(f){var g=Qoe(f,n),y=RS(g,1),b=y[0],T=Hoe(f,r,s),S=RS(T,1),U=S[0],N=i?i(f):null;return b&&U&&!N})}function jj(e){return typeof e.isPropagationStopped=="function"?e.isPropagationStopped():typeof e.cancelBubble<"u"?e.cancelBubble:!1}function I3(e){return e.dataTransfer?Array.prototype.some.call(e.dataTransfer.types,function(t){return t==="Files"||t==="application/x-moz-file"}):!!e.target&&!!e.target.files}function fW(e){e.preventDefault()}function IPe(e){return e.indexOf("MSIE")!==-1||e.indexOf("Trident/")!==-1}function jPe(e){return e.indexOf("Edge/")!==-1}function FPe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:window.navigator.userAgent;return IPe(e)||jPe(e)}function Pm(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];return function(r){for(var s=arguments.length,a=new Array(s>1?s-1:0),c=1;c<s;c++)a[c-1]=arguments[c];return t.some(function(i){return!jj(r)&&i&&i.apply(void 0,[r].concat(a)),jj(r)})}}function PPe(){return"showOpenFilePicker"in window}function kPe(e){if(ix(e)){var t=Object.entries(e).filter(function(n){var r=RS(n,2),s=r[0],a=r[1],c=!0;return Voe(s)||(console.warn('Skipped "'.concat(s,'" because it is not a valid MIME type. Check https://developer.mozilla.org/en-US/docs/Web/HTTP/Basics_of_HTTP/MIME_types/Common_types for a list of valid MIME types.')),c=!1),(!Array.isArray(a)||!a.every($oe))&&(console.warn('Skipped "'.concat(s,'" because an invalid file extension was provided.')),c=!1),c}).reduce(function(n,r){var s=RS(r,2),a=s[0],c=s[1];return uW(uW({},n),{},Uoe({},a,c))},{});return[{description:"Files",accept:t}]}return e}function LPe(e){if(ix(e))return Object.entries(e).reduce(function(t,n){var r=RS(n,2),s=r[0],a=r[1];return[].concat(lW(t),[s],lW(a))},[]).filter(function(t){return Voe(t)||$oe(t)}).join(",")}function MPe(e){return e instanceof DOMException&&(e.name==="AbortError"||e.code===e.ABORT_ERR)}function NPe(e){return e instanceof DOMException&&(e.name==="SecurityError"||e.code===e.SECURITY_ERR)}function Voe(e){return e==="audio/*"||e==="video/*"||e==="image/*"||e==="text/*"||/\w+\/[-+.\w]+/g.test(e)}function $oe(e){return/^.*\.[\w]+$/.test(e)}var RPe=["children"],OPe=["open"],DPe=["refKey","role","onKeyDown","onFocus","onBlur","onClick","onDragEnter","onDragOver","onDragLeave","onDrop"],UPe=["refKey","onChange","onClick"];function zPe(e){return VPe(e)||HPe(e)||Goe(e)||QPe()}function QPe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function HPe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function VPe(e){if(Array.isArray(e))return yD(e)}function gN(e,t){return KPe(e)||GPe(e,t)||Goe(e,t)||$Pe()}function $Pe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Goe(e,t){if(e){if(typeof e=="string")return yD(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yD(e,t)}}function yD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function GPe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var r=[],s=!0,a=!1,c,i;try{for(n=n.call(e);!(s=(c=n.next()).done)&&(r.push(c.value),!(t&&r.length===t));s=!0);}catch(f){a=!0,i=f}finally{try{!s&&n.return!=null&&n.return()}finally{if(a)throw i}}return r}}function KPe(e){if(Array.isArray(e))return e}function pW(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter(function(s){return Object.getOwnPropertyDescriptor(e,s).enumerable})),n.push.apply(n,r)}return n}function El(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?pW(Object(n),!0).forEach(function(r){vD(e,r,n[r])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):pW(Object(n)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(n,r))})}return e}function vD(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Fj(e,t){if(e==null)return{};var n=WPe(e,t),r,s;if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(s=0;s<a.length;s++)r=a[s],!(t.indexOf(r)>=0)&&Object.prototype.propertyIsEnumerable.call(e,r)&&(n[r]=e[r])}return n}function WPe(e,t){if(e==null)return{};var n={},r=Object.keys(e),s,a;for(a=0;a<r.length;a++)s=r[a],!(t.indexOf(s)>=0)&&(n[s]=e[s]);return n}var lP=q.forwardRef(function(e,t){var n=e.children,r=Fj(e,RPe),s=qPe(r),a=s.open,c=Fj(s,OPe);return q.useImperativeHandle(t,function(){return{open:a}},[a]),Ti.createElement(q.Fragment,null,n(El(El({},c),{},{open:a})))});lP.displayName="Dropzone";var Koe={disabled:!1,getFilesFromEvent:oPe,maxSize:1/0,minSize:0,multiple:!0,maxFiles:0,preventDropOnDocument:!0,noClick:!1,noKeyboard:!1,noDrag:!1,noDragEventsBubbling:!1,validator:null,useFsAccessApi:!0,autoFocus:!1};lP.defaultProps=Koe;lP.propTypes={children:Ca.func,accept:Ca.objectOf(Ca.arrayOf(Ca.string)),multiple:Ca.bool,preventDropOnDocument:Ca.bool,noClick:Ca.bool,noKeyboard:Ca.bool,noDrag:Ca.bool,noDragEventsBubbling:Ca.bool,minSize:Ca.number,maxSize:Ca.number,maxFiles:Ca.number,disabled:Ca.bool,getFilesFromEvent:Ca.func,onFileDialogCancel:Ca.func,onFileDialogOpen:Ca.func,useFsAccessApi:Ca.bool,autoFocus:Ca.bool,onDragEnter:Ca.func,onDragLeave:Ca.func,onDragOver:Ca.func,onDrop:Ca.func,onDropAccepted:Ca.func,onDropRejected:Ca.func,onError:Ca.func,validator:Ca.func};var xD={isFocused:!1,isFileDialogActive:!1,isDragActive:!1,isDragAccept:!1,isDragReject:!1,acceptedFiles:[],fileRejections:[]};function qPe(){var e=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},t=El(El({},Koe),e),n=t.accept,r=t.disabled,s=t.getFilesFromEvent,a=t.maxSize,c=t.minSize,i=t.multiple,f=t.maxFiles,g=t.onDragEnter,y=t.onDragLeave,b=t.onDragOver,T=t.onDrop,S=t.onDropAccepted,U=t.onDropRejected,N=t.onFileDialogCancel,W=t.onFileDialogOpen,L=t.useFsAccessApi,Q=t.autoFocus,V=t.preventDropOnDocument,Z=t.noClick,ne=t.noKeyboard,Y=t.noDrag,le=t.noDragEventsBubbling,pe=t.onError,_e=t.validator,ye=q.useMemo(function(){return LPe(n)},[n]),he=q.useMemo(function(){return kPe(n)},[n]),be=q.useMemo(function(){return typeof W=="function"?W:AW},[W]),Te=q.useMemo(function(){return typeof N=="function"?N:AW},[N]),Ee=q.useRef(null),Ne=q.useRef(null),Ge=q.useReducer(ZPe,xD),Je=gN(Ge,2),Ue=Je[0],Qe=Je[1],xe=Ue.isFocused,at=Ue.isFileDialogActive,we=q.useRef(typeof window<"u"&&window.isSecureContext&&L&&PPe()),me=function(){!we.current&&at&&setTimeout(function(){if(Ne.current){var Gt=Ne.current.files;Gt.length||(Qe({type:"closeDialog"}),Te())}},300)};q.useEffect(function(){return window.addEventListener("focus",me,!1),function(){window.removeEventListener("focus",me,!1)}},[Ne,at,Te,we]);var Ze=q.useRef([]),ot=function(Gt){Ee.current&&Ee.current.contains(Gt.target)||(Gt.preventDefault(),Ze.current=[])};q.useEffect(function(){return V&&(document.addEventListener("dragover",fW,!1),document.addEventListener("drop",ot,!1)),function(){V&&(document.removeEventListener("dragover",fW),document.removeEventListener("drop",ot))}},[Ee,V]),q.useEffect(function(){return!r&&Q&&Ee.current&&Ee.current.focus(),function(){}},[Ee,Q,r]);var vt=q.useCallback(function(Gt){pe?pe(Gt):console.error(Gt)},[pe]),Qt=q.useCallback(function(Gt){Gt.preventDefault(),Gt.persist(),xn(Gt),Ze.current=[].concat(zPe(Ze.current),[Gt.target]),I3(Gt)&&Promise.resolve(s(Gt)).then(function(Rn){if(!(jj(Gt)&&!le)){var wt=Rn.length,qt=wt>0&&TPe({files:Rn,accept:ye,minSize:c,maxSize:a,multiple:i,maxFiles:f,validator:_e}),fn=wt>0&&!qt;Qe({isDragAccept:qt,isDragReject:fn,isDragActive:!0,type:"setDraggedFiles"}),g&&g(Gt)}}).catch(function(Rn){return vt(Rn)})},[s,g,vt,le,ye,c,a,i,f,_e]),Ot=q.useCallback(function(Gt){Gt.preventDefault(),Gt.persist(),xn(Gt);var Rn=I3(Gt);if(Rn&&Gt.dataTransfer)try{Gt.dataTransfer.dropEffect="copy"}catch{}return Rn&&b&&b(Gt),!1},[b,le]),kt=q.useCallback(function(Gt){Gt.preventDefault(),Gt.persist(),xn(Gt);var Rn=Ze.current.filter(function(qt){return Ee.current&&Ee.current.contains(qt)}),wt=Rn.indexOf(Gt.target);wt!==-1&&Rn.splice(wt,1),Ze.current=Rn,!(Rn.length>0)&&(Qe({type:"setDraggedFiles",isDragActive:!1,isDragAccept:!1,isDragReject:!1}),I3(Gt)&&y&&y(Gt))},[Ee,y,le]),Me=q.useCallback(function(Gt,Rn){var wt=[],qt=[];Gt.forEach(function(fn){var Un=Qoe(fn,ye),Yt=gN(Un,2),cn=Yt[0],Ln=Yt[1],Hn=Hoe(fn,c,a),_r=gN(Hn,2),fr=_r[0],xr=_r[1],bi=_e?_e(fn):null;if(cn&&fr&&!bi)wt.push(fn);else{var Vn=[Ln,xr];bi&&(Vn=Vn.concat(bi)),qt.push({file:fn,errors:Vn.filter(function(Es){return Es})})}}),(!i&&wt.length>1||i&&f>=1&&wt.length>f)&&(wt.forEach(function(fn){qt.push({file:fn,errors:[EPe]})}),wt.splice(0)),Qe({acceptedFiles:wt,fileRejections:qt,type:"setFiles"}),T&&T(wt,qt,Rn),qt.length>0&&U&&U(qt,Rn),wt.length>0&&S&&S(wt,Rn)},[Qe,i,ye,c,a,f,T,S,U,_e]),Ht=q.useCallback(function(Gt){Gt.preventDefault(),Gt.persist(),xn(Gt),Ze.current=[],I3(Gt)&&Promise.resolve(s(Gt)).then(function(Rn){jj(Gt)&&!le||Me(Rn,Gt)}).catch(function(Rn){return vt(Rn)}),Qe({type:"reset"})},[s,Me,vt,le]),Zt=q.useCallback(function(){if(we.current){Qe({type:"openDialog"}),be();var Gt={multiple:i,types:he};window.showOpenFilePicker(Gt).then(function(Rn){return s(Rn)}).then(function(Rn){Me(Rn,null),Qe({type:"closeDialog"})}).catch(function(Rn){MPe(Rn)?(Te(Rn),Qe({type:"closeDialog"})):NPe(Rn)?(we.current=!1,Ne.current?(Ne.current.value=null,Ne.current.click()):vt(new Error("Cannot open the file picker because the https://developer.mozilla.org/en-US/docs/Web/API/File_System_Access_API is not supported and no <input> was provided."))):vt(Rn)});return}Ne.current&&(Qe({type:"openDialog"}),be(),Ne.current.value=null,Ne.current.click())},[Qe,be,Te,L,Me,vt,he,i]),pn=q.useCallback(function(Gt){!Ee.current||!Ee.current.isEqualNode(Gt.target)||(Gt.key===" "||Gt.key==="Enter"||Gt.keyCode===32||Gt.keyCode===13)&&(Gt.preventDefault(),Zt())},[Ee,Zt]),Dt=q.useCallback(function(){Qe({type:"focus"})},[]),hn=q.useCallback(function(){Qe({type:"blur"})},[]),Oe=q.useCallback(function(){Z||(FPe()?setTimeout(Zt,0):Zt())},[Z,Zt]),nn=function(Gt){return r?null:Gt},Vt=function(Gt){return ne?null:nn(Gt)},$t=function(Gt){return Y?null:nn(Gt)},xn=function(Gt){le&&Gt.stopPropagation()},Xt=q.useMemo(function(){return function(){var Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rn=Gt.refKey,wt=Rn===void 0?"ref":Rn,qt=Gt.role,fn=Gt.onKeyDown,Un=Gt.onFocus,Yt=Gt.onBlur,cn=Gt.onClick,Ln=Gt.onDragEnter,Hn=Gt.onDragOver,_r=Gt.onDragLeave,fr=Gt.onDrop,xr=Fj(Gt,DPe);return El(El(vD({onKeyDown:Vt(Pm(fn,pn)),onFocus:Vt(Pm(Un,Dt)),onBlur:Vt(Pm(Yt,hn)),onClick:nn(Pm(cn,Oe)),onDragEnter:$t(Pm(Ln,Qt)),onDragOver:$t(Pm(Hn,Ot)),onDragLeave:$t(Pm(_r,kt)),onDrop:$t(Pm(fr,Ht)),role:typeof qt=="string"&&qt!==""?qt:"presentation"},wt,Ee),!r&&!ne?{tabIndex:0}:{}),xr)}},[Ee,pn,Dt,hn,Oe,Qt,Ot,kt,Ht,ne,Y,r]),gn=q.useCallback(function(Gt){Gt.stopPropagation()},[]),rr=q.useMemo(function(){return function(){var Gt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},Rn=Gt.refKey,wt=Rn===void 0?"ref":Rn,qt=Gt.onChange,fn=Gt.onClick,Un=Fj(Gt,UPe),Yt=vD({accept:ye,multiple:i,type:"file",style:{display:"none"},onChange:nn(Pm(qt,Ht)),onClick:nn(Pm(fn,gn)),tabIndex:-1},wt,Ne);return El(El({},Yt),Un)}},[Ne,n,i,Ht,r]);return El(El({},Ue),{},{isFocused:xe&&!r,getRootProps:Xt,getInputProps:rr,rootRef:Ee,inputRef:Ne,open:nn(Zt)})}function ZPe(e,t){switch(t.type){case"focus":return El(El({},e),{},{isFocused:!0});case"blur":return El(El({},e),{},{isFocused:!1});case"openDialog":return El(El({},xD),{},{isFileDialogActive:!0});case"closeDialog":return El(El({},e),{},{isFileDialogActive:!1});case"setDraggedFiles":return El(El({},e),{},{isDragActive:t.isDragActive,isDragAccept:t.isDragAccept,isDragReject:t.isDragReject});case"setFiles":return El(El({},e),{},{acceptedFiles:t.acceptedFiles,fileRejections:t.fileRejections});case"reset":return El({},xD);default:return e}}function AW(){}const mW=({children:e})=>{const[t,n]=q.useState(!1),[r,s]=q.useState(""),[a,c]=q.useState(null),i=({title:g,content:y})=>{s(g),c(y),n(!0)},f=()=>{n(!1)};return zt.jsxs(Gse.Provider,{value:{hideModal:f,showModal:i,title:r,content:a,open:t},children:[zt.jsx(Hx,{open:t,onOpenChange:n,children:zt.jsx(Hx.Content,{title:r,children:a})}),e]})},XPe=({color:e,fontFamily:t,radius:n,themeMode:r,variant:s})=>{const a=q.useMemo(()=>e2e({color:e,fontFamily:t,radius:n,themeMode:r,variant:s}),[e,t,n,r,s]);return zt.jsx("style",{children:a})};function Xg(e,t,{checkForDefaultPrevented:n=!0}={}){return function(r){if(e==null||e(r),n===!1||!r.defaultPrevented)return t==null?void 0:t(r)}}function gW(e,t){if(typeof e=="function")return e(t);e!=null&&(e.current=t)}function Woe(...e){return t=>{let n=!1;const r=e.map(s=>{const a=gW(s,t);return!n&&typeof a=="function"&&(n=!0),a});if(n)return()=>{for(let s=0;s<r.length;s++){const a=r[s];typeof a=="function"?a():gW(e[s],null)}}}}function ov(...e){return q.useCallback(Woe(...e),e)}function YPe(e,t){const n=q.createContext(t),r=a=>{const{children:c,...i}=a,f=q.useMemo(()=>i,Object.values(i));return zt.jsx(n.Provider,{value:f,children:c})};r.displayName=e+"Provider";function s(a){const c=q.useContext(n);if(c)return c;if(t!==void 0)return t;throw new Error(`\`${a}\` must be used within \`${e}\``)}return[r,s]}function qoe(e,t=[]){let n=[];function r(a,c){const i=q.createContext(c),f=n.length;n=[...n,c];const g=b=>{var T;const{scope:S,children:U,...N}=b,W=((T=S==null?void 0:S[e])==null?void 0:T[f])||i,L=q.useMemo(()=>N,Object.values(N));return zt.jsx(W.Provider,{value:L,children:U})};g.displayName=a+"Provider";function y(b,T){var S;const U=((S=T==null?void 0:T[e])==null?void 0:S[f])||i,N=q.useContext(U);if(N)return N;if(c!==void 0)return c;throw new Error(`\`${b}\` must be used within \`${a}\``)}return[g,y]}const s=()=>{const a=n.map(c=>q.createContext(c));return function(c){const i=(c==null?void 0:c[e])||a;return q.useMemo(()=>({[`__scope${e}`]:{...c,[e]:i}}),[c,i])}};return s.scopeName=e,[r,JPe(s,...t)]}function JPe(...e){const t=e[0];if(e.length===1)return t;const n=()=>{const r=e.map(s=>({useScope:s(),scopeName:s.scopeName}));return function(s){const a=r.reduce((c,{useScope:i,scopeName:f})=>{const g=i(s)[`__scope${f}`];return{...c,...g}},{});return q.useMemo(()=>({[`__scope${t.scopeName}`]:a}),[a])}};return n.scopeName=t.scopeName,n}var eke=q.useId||(()=>{}),tke=0;function XT(e){const[t,n]=q.useState(eke());return ww(()=>{e||n(r=>r??String(tke++))},[e]),e||(t?`radix-${t}`:"")}function Zoe({prop:e,defaultProp:t,onChange:n=()=>{}}){const[r,s]=nke({defaultProp:t,onChange:n}),a=e!==void 0,c=a?e:r,i=zy(n),f=q.useCallback(g=>{if(a){const y=typeof g=="function"?g(e):g;y!==e&&i(y)}else s(g)},[a,e,s,i]);return[c,f]}function nke({defaultProp:e,onChange:t}){const n=q.useState(e),[r]=n,s=q.useRef(r),a=zy(t);return q.useEffect(()=>{s.current!==r&&(a(r),s.current=r)},[r,s,a]),n}var Lz=q.forwardRef((e,t)=>{const{children:n,...r}=e,s=q.Children.toArray(n),a=s.find(ike);if(a){const c=a.props.children,i=s.map(f=>f===a?q.Children.count(c)>1?q.Children.only(null):q.isValidElement(c)?c.props.children:null:f);return zt.jsx(_D,{...r,ref:t,children:q.isValidElement(c)?q.cloneElement(c,void 0,i):null})}return zt.jsx(_D,{...r,ref:t,children:n})});Lz.displayName="Slot";var _D=q.forwardRef((e,t)=>{const{children:n,...r}=e;if(q.isValidElement(n)){const s=oke(n);return q.cloneElement(n,{...ske(r,n.props),ref:t?Woe(t,s):s})}return q.Children.count(n)>1?q.Children.only(null):null});_D.displayName="SlotClone";var rke=({children:e})=>zt.jsx(zt.Fragment,{children:e});function ike(e){return q.isValidElement(e)&&e.type===rke}function ske(e,t){const n={...t};for(const r in t){const s=e[r],a=t[r];/^on[A-Z]/.test(r)?s&&a?n[r]=(...c)=>{a(...c),s(...c)}:s&&(n[r]=s):r==="style"?n[r]={...s,...a}:r==="className"&&(n[r]=[s,a].filter(Boolean).join(" "))}return{...e,...n}}function oke(e){var t,n;let r=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var ake=["a","button","div","form","h2","h3","img","input","label","li","nav","ol","p","span","svg","ul"],nm=ake.reduce((e,t)=>{const n=q.forwardRef((r,s)=>{const{asChild:a,...c}=r,i=a?Lz:t;return typeof window<"u"&&(window[Symbol.for("radix-ui")]=!0),zt.jsx(i,{...c,ref:s})});return n.displayName=`Primitive.${t}`,{...e,[t]:n}},{});function lke(e,t){e&&$w.flushSync(()=>e.dispatchEvent(t))}function cke(e,t=globalThis==null?void 0:globalThis.document){const n=zy(e);q.useEffect(()=>{const r=s=>{s.key==="Escape"&&n(s)};return t.addEventListener("keydown",r,{capture:!0}),()=>t.removeEventListener("keydown",r,{capture:!0})},[n,t])}var uke="DismissableLayer",wD="dismissableLayer.update",dke="dismissableLayer.pointerDownOutside",hke="dismissableLayer.focusOutside",yW,Xoe=q.createContext({layers:new Set,layersWithOutsidePointerEventsDisabled:new Set,branches:new Set}),Yoe=q.forwardRef((e,t)=>{const{disableOutsidePointerEvents:n=!1,onEscapeKeyDown:r,onPointerDownOutside:s,onFocusOutside:a,onInteractOutside:c,onDismiss:i,...f}=e,g=q.useContext(Xoe),[y,b]=q.useState(null),T=(y==null?void 0:y.ownerDocument)??(globalThis==null?void 0:globalThis.document),[,S]=q.useState({}),U=ov(t,le=>b(le)),N=Array.from(g.layers),[W]=[...g.layersWithOutsidePointerEventsDisabled].slice(-1),L=N.indexOf(W),Q=y?N.indexOf(y):-1,V=g.layersWithOutsidePointerEventsDisabled.size>0,Z=Q>=L,ne=Ake(le=>{const pe=le.target,_e=[...g.branches].some(ye=>ye.contains(pe));!Z||_e||(s==null||s(le),c==null||c(le),le.defaultPrevented||i==null||i())},T),Y=mke(le=>{const pe=le.target;[...g.branches].some(_e=>_e.contains(pe))||(a==null||a(le),c==null||c(le),le.defaultPrevented||i==null||i())},T);return cke(le=>{Q===g.layers.size-1&&(r==null||r(le),!le.defaultPrevented&&i&&(le.preventDefault(),i()))},T),q.useEffect(()=>{if(y)return n&&(g.layersWithOutsidePointerEventsDisabled.size===0&&(yW=T.body.style.pointerEvents,T.body.style.pointerEvents="none"),g.layersWithOutsidePointerEventsDisabled.add(y)),g.layers.add(y),vW(),()=>{n&&g.layersWithOutsidePointerEventsDisabled.size===1&&(T.body.style.pointerEvents=yW)}},[y,T,n,g]),q.useEffect(()=>()=>{y&&(g.layers.delete(y),g.layersWithOutsidePointerEventsDisabled.delete(y),vW())},[y,g]),q.useEffect(()=>{const le=()=>S({});return document.addEventListener(wD,le),()=>document.removeEventListener(wD,le)},[]),zt.jsx(nm.div,{...f,ref:U,style:{pointerEvents:V?Z?"auto":"none":void 0,...e.style},onFocusCapture:Xg(e.onFocusCapture,Y.onFocusCapture),onBlurCapture:Xg(e.onBlurCapture,Y.onBlurCapture),onPointerDownCapture:Xg(e.onPointerDownCapture,ne.onPointerDownCapture)})});Yoe.displayName=uke;var fke="DismissableLayerBranch",pke=q.forwardRef((e,t)=>{const n=q.useContext(Xoe),r=q.useRef(null),s=ov(t,r);return q.useEffect(()=>{const a=r.current;if(a)return n.branches.add(a),()=>{n.branches.delete(a)}},[n.branches]),zt.jsx(nm.div,{...e,ref:s})});pke.displayName=fke;function Ake(e,t=globalThis==null?void 0:globalThis.document){const n=zy(e),r=q.useRef(!1),s=q.useRef(()=>{});return q.useEffect(()=>{const a=i=>{if(i.target&&!r.current){let f=function(){Joe(dke,n,g,{discrete:!0})};const g={originalEvent:i};i.pointerType==="touch"?(t.removeEventListener("click",s.current),s.current=f,t.addEventListener("click",s.current,{once:!0})):f()}else t.removeEventListener("click",s.current);r.current=!1},c=window.setTimeout(()=>{t.addEventListener("pointerdown",a)},0);return()=>{window.clearTimeout(c),t.removeEventListener("pointerdown",a),t.removeEventListener("click",s.current)}},[t,n]),{onPointerDownCapture:()=>r.current=!0}}function mke(e,t=globalThis==null?void 0:globalThis.document){const n=zy(e),r=q.useRef(!1);return q.useEffect(()=>{const s=a=>{a.target&&!r.current&&Joe(hke,n,{originalEvent:a},{discrete:!1})};return t.addEventListener("focusin",s),()=>t.removeEventListener("focusin",s)},[t,n]),{onFocusCapture:()=>r.current=!0,onBlurCapture:()=>r.current=!1}}function vW(){const e=new CustomEvent(wD);document.dispatchEvent(e)}function Joe(e,t,n,{discrete:r}){const s=n.originalEvent.target,a=new CustomEvent(e,{bubbles:!1,cancelable:!0,detail:n});t&&s.addEventListener(e,t,{once:!0}),r?lke(s,a):s.dispatchEvent(a)}var yN="focusScope.autoFocusOnMount",vN="focusScope.autoFocusOnUnmount",xW={bubbles:!1,cancelable:!0},gke="FocusScope",eae=q.forwardRef((e,t)=>{const{loop:n=!1,trapped:r=!1,onMountAutoFocus:s,onUnmountAutoFocus:a,...c}=e,[i,f]=q.useState(null),g=zy(s),y=zy(a),b=q.useRef(null),T=ov(t,N=>f(N)),S=q.useRef({paused:!1,pause(){this.paused=!0},resume(){this.paused=!1}}).current;q.useEffect(()=>{if(r){let N=function(V){if(S.paused||!i)return;const Z=V.target;i.contains(Z)?b.current=Z:ey(b.current,{select:!0})},W=function(V){if(S.paused||!i)return;const Z=V.relatedTarget;Z!==null&&(i.contains(Z)||ey(b.current,{select:!0}))},L=function(V){if(document.activeElement===document.body)for(const Z of V)Z.removedNodes.length>0&&ey(i)};document.addEventListener("focusin",N),document.addEventListener("focusout",W);const Q=new MutationObserver(L);return i&&Q.observe(i,{childList:!0,subtree:!0}),()=>{document.removeEventListener("focusin",N),document.removeEventListener("focusout",W),Q.disconnect()}}},[r,i,S.paused]),q.useEffect(()=>{if(i){wW.add(S);const N=document.activeElement;if(!i.contains(N)){const W=new CustomEvent(yN,xW);i.addEventListener(yN,g),i.dispatchEvent(W),W.defaultPrevented||(yke(bke(tae(i)),{select:!0}),document.activeElement===N&&ey(i))}return()=>{i.removeEventListener(yN,g),setTimeout(()=>{const W=new CustomEvent(vN,xW);i.addEventListener(vN,y),i.dispatchEvent(W),W.defaultPrevented||ey(N??document.body,{select:!0}),i.removeEventListener(vN,y),wW.remove(S)},0)}}},[i,g,y,S]);const U=q.useCallback(N=>{if(!n&&!r||S.paused)return;const W=N.key==="Tab"&&!N.altKey&&!N.ctrlKey&&!N.metaKey,L=document.activeElement;if(W&&L){const Q=N.currentTarget,[V,Z]=vke(Q);V&&Z?!N.shiftKey&&L===Z?(N.preventDefault(),n&&ey(V,{select:!0})):N.shiftKey&&L===V&&(N.preventDefault(),n&&ey(Z,{select:!0})):L===Q&&N.preventDefault()}},[n,r,S.paused]);return zt.jsx(nm.div,{tabIndex:-1,...c,ref:T,onKeyDown:U})});eae.displayName=gke;function yke(e,{select:t=!1}={}){const n=document.activeElement;for(const r of e)if(ey(r,{select:t}),document.activeElement!==n)return}function vke(e){const t=tae(e),n=_W(t,e),r=_W(t.reverse(),e);return[n,r]}function tae(e){const t=[],n=document.createTreeWalker(e,NodeFilter.SHOW_ELEMENT,{acceptNode:r=>{const s=r.tagName==="INPUT"&&r.type==="hidden";return r.disabled||r.hidden||s?NodeFilter.FILTER_SKIP:r.tabIndex>=0?NodeFilter.FILTER_ACCEPT:NodeFilter.FILTER_SKIP}});for(;n.nextNode();)t.push(n.currentNode);return t}function _W(e,t){for(const n of e)if(!xke(n,{upTo:t}))return n}function xke(e,{upTo:t}){if(getComputedStyle(e).visibility==="hidden")return!0;for(;e;){if(t!==void 0&&e===t)return!1;if(getComputedStyle(e).display==="none")return!0;e=e.parentElement}return!1}function _ke(e){return e instanceof HTMLInputElement&&"select"in e}function ey(e,{select:t=!1}={}){if(e&&e.focus){const n=document.activeElement;e.focus({preventScroll:!0}),e!==n&&_ke(e)&&t&&e.select()}}var wW=wke();function wke(){let e=[];return{add(t){const n=e[0];t!==n&&(n==null||n.pause()),e=bW(e,t),e.unshift(t)},remove(t){var n;e=bW(e,t),(n=e[0])==null||n.resume()}}}function bW(e,t){const n=[...e],r=n.indexOf(t);return r!==-1&&n.splice(r,1),n}function bke(e){return e.filter(t=>t.tagName!=="A")}function Cke(e,t){return q.useReducer((n,r)=>t[n][r]??n,e)}var cP=e=>{const{present:t,children:n}=e,r=Ske(t),s=typeof n=="function"?n({present:r.isPresent}):q.Children.only(n),a=ov(r.ref,Bke(s));return typeof n=="function"||r.isPresent?q.cloneElement(s,{ref:a}):null};cP.displayName="Presence";function Ske(e){const[t,n]=q.useState(),r=q.useRef({}),s=q.useRef(e),a=q.useRef("none"),c=e?"mounted":"unmounted",[i,f]=Cke(c,{mounted:{UNMOUNT:"unmounted",ANIMATION_OUT:"unmountSuspended"},unmountSuspended:{MOUNT:"mounted",ANIMATION_END:"unmounted"},unmounted:{MOUNT:"mounted"}});return q.useEffect(()=>{const g=j3(r.current);a.current=i==="mounted"?g:"none"},[i]),ww(()=>{const g=r.current,y=s.current;if(y!==e){const b=a.current,T=j3(g);e?f("MOUNT"):T==="none"||(g==null?void 0:g.display)==="none"?f("UNMOUNT"):f(y&&b!==T?"ANIMATION_OUT":"UNMOUNT"),s.current=e}},[e,f]),ww(()=>{if(t){let g;const y=t.ownerDocument.defaultView??window,b=S=>{const U=j3(r.current).includes(S.animationName);if(S.target===t&&U&&(f("ANIMATION_END"),!s.current)){const N=t.style.animationFillMode;t.style.animationFillMode="forwards",g=y.setTimeout(()=>{t.style.animationFillMode==="forwards"&&(t.style.animationFillMode=N)})}},T=S=>{S.target===t&&(a.current=j3(r.current))};return t.addEventListener("animationstart",T),t.addEventListener("animationcancel",b),t.addEventListener("animationend",b),()=>{y.clearTimeout(g),t.removeEventListener("animationstart",T),t.removeEventListener("animationcancel",b),t.removeEventListener("animationend",b)}}else f("ANIMATION_END")},[t,f]),{isPresent:["mounted","unmountSuspended"].includes(i),ref:q.useCallback(g=>{g&&(r.current=getComputedStyle(g)),n(g)},[])}}function j3(e){return(e==null?void 0:e.animationName)||"none"}function Bke(e){var t,n;let r=(t=Object.getOwnPropertyDescriptor(e.props,"ref"))==null?void 0:t.get,s=r&&"isReactWarning"in r&&r.isReactWarning;return s?e.ref:(r=(n=Object.getOwnPropertyDescriptor(e,"ref"))==null?void 0:n.get,s=r&&"isReactWarning"in r&&r.isReactWarning,s?e.props.ref:e.props.ref||e.ref)}var xN=0;function Eke(){q.useEffect(()=>{const e=document.querySelectorAll("[data-radix-focus-guard]");return document.body.insertAdjacentElement("afterbegin",e[0]??CW()),document.body.insertAdjacentElement("beforeend",e[1]??CW()),xN++,()=>{xN===1&&document.querySelectorAll("[data-radix-focus-guard]").forEach(t=>t.remove()),xN--}},[])}function CW(){const e=document.createElement("span");return e.setAttribute("data-radix-focus-guard",""),e.tabIndex=0,e.style.outline="none",e.style.opacity="0",e.style.position="fixed",e.style.pointerEvents="none",e}var YT="right-scroll-bar-position",JT="width-before-scroll-bar",Tke="with-scroll-bars-hidden",Ike="--removed-body-scroll-bar-size";function _N(e,t){return typeof e=="function"?e(t):e&&(e.current=t),e}function jke(e,t){var n=q.useState(function(){return{value:e,callback:t,facade:{get current(){return n.value},set current(r){var s=n.value;s!==r&&(n.value=r,n.callback(r,s))}}}})[0];return n.callback=t,n.facade}var Fke=typeof window<"u"?q.useLayoutEffect:q.useEffect,SW=new WeakMap;function Pke(e,t){var n=jke(null,function(r){return e.forEach(function(s){return _N(s,r)})});return Fke(function(){var r=SW.get(n);if(r){var s=new Set(r),a=new Set(e),c=n.current;s.forEach(function(i){a.has(i)||_N(i,null)}),a.forEach(function(i){s.has(i)||_N(i,c)})}SW.set(n,e)},[e]),n}function kke(e){return e}function Lke(e,t){t===void 0&&(t=kke);var n=[],r=!1,s={read:function(){if(r)throw new Error("Sidecar: could not `read` from an `assigned` medium. `read` could be used only with `useMedium`.");return n.length?n[n.length-1]:e},useMedium:function(a){var c=t(a,r);return n.push(c),function(){n=n.filter(function(i){return i!==c})}},assignSyncMedium:function(a){for(r=!0;n.length;){var c=n;n=[],c.forEach(a)}n={push:function(i){return a(i)},filter:function(){return n}}},assignMedium:function(a){r=!0;var c=[];if(n.length){var i=n;n=[],i.forEach(a),c=n}var f=function(){var y=c;c=[],y.forEach(a)},g=function(){return Promise.resolve().then(f)};g(),n={push:function(y){c.push(y),g()},filter:function(y){return c=c.filter(y),n}}}};return s}function Mke(e){e===void 0&&(e={});var t=Lke(null);return t.options=Rp({async:!0,ssr:!1},e),t}var nae=function(e){var t=e.sideCar,n=Wse(e,["sideCar"]);if(!t)throw new Error("Sidecar: please provide `sideCar` property to import the right car");var r=t.read();if(!r)throw new Error("Sidecar medium not found");return q.createElement(r,Rp({},n))};nae.isSideCarExport=!0;function Nke(e,t){return e.useMedium(t),nae}var rae=Mke(),wN=function(){},uP=q.forwardRef(function(e,t){var n=q.useRef(null),r=q.useState({onScrollCapture:wN,onWheelCapture:wN,onTouchMoveCapture:wN}),s=r[0],a=r[1],c=e.forwardProps,i=e.children,f=e.className,g=e.removeScrollBar,y=e.enabled,b=e.shards,T=e.sideCar,S=e.noIsolation,U=e.inert,N=e.allowPinchZoom,W=e.as,L=W===void 0?"div":W,Q=e.gapMode,V=Wse(e,["forwardProps","children","className","removeScrollBar","enabled","shards","sideCar","noIsolation","inert","allowPinchZoom","as","gapMode"]),Z=T,ne=Pke([n,t]),Y=Rp(Rp({},V),s);return q.createElement(q.Fragment,null,y&&q.createElement(Z,{sideCar:rae,removeScrollBar:g,shards:b,noIsolation:S,inert:U,setCallbacks:a,allowPinchZoom:!!N,lockRef:n,gapMode:Q}),c?q.cloneElement(q.Children.only(i),Rp(Rp({},Y),{ref:ne})):q.createElement(L,Rp({},Y,{className:f,ref:ne}),i))});uP.defaultProps={enabled:!0,removeScrollBar:!0,inert:!1};uP.classNames={fullWidth:JT,zeroRight:YT};var Rke=function(){if(typeof __webpack_nonce__<"u")return __webpack_nonce__};function Oke(){if(!document)return null;var e=document.createElement("style");e.type="text/css";var t=Rke();return t&&e.setAttribute("nonce",t),e}function Dke(e,t){e.styleSheet?e.styleSheet.cssText=t:e.appendChild(document.createTextNode(t))}function Uke(e){var t=document.head||document.getElementsByTagName("head")[0];t.appendChild(e)}var zke=function(){var e=0,t=null;return{add:function(n){e==0&&(t=Oke())&&(Dke(t,n),Uke(t)),e++},remove:function(){e--,!e&&t&&(t.parentNode&&t.parentNode.removeChild(t),t=null)}}},Qke=function(){var e=zke();return function(t,n){q.useEffect(function(){return e.add(t),function(){e.remove()}},[t&&n])}},iae=function(){var e=Qke(),t=function(n){var r=n.styles,s=n.dynamic;return e(r,s),null};return t},Hke={left:0,top:0,right:0,gap:0},bN=function(e){return parseInt(e||"",10)||0},Vke=function(e){var t=window.getComputedStyle(document.body),n=t[e==="padding"?"paddingLeft":"marginLeft"],r=t[e==="padding"?"paddingTop":"marginTop"],s=t[e==="padding"?"paddingRight":"marginRight"];return[bN(n),bN(r),bN(s)]},$ke=function(e){if(e===void 0&&(e="margin"),typeof window>"u")return Hke;var t=Vke(e),n=document.documentElement.clientWidth,r=window.innerWidth;return{left:t[0],top:t[1],right:t[2],gap:Math.max(0,r-n+t[2]-t[0])}},Gke=iae(),rw="data-scroll-locked",Kke=function(e,t,n,r){var s=e.left,a=e.top,c=e.right,i=e.gap;return n===void 0&&(n="margin"),`
  .`.concat(Tke,` {
   overflow: hidden `).concat(r,`;
   padding-right: `).concat(i,"px ").concat(r,`;
  }
  body[`).concat(rw,`] {
    overflow: hidden `).concat(r,`;
    overscroll-behavior: contain;
    `).concat([t&&"position: relative ".concat(r,";"),n==="margin"&&`
    padding-left: `.concat(s,`px;
    padding-top: `).concat(a,`px;
    padding-right: `).concat(c,`px;
    margin-left:0;
    margin-top:0;
    margin-right: `).concat(i,"px ").concat(r,`;
    `),n==="padding"&&"padding-right: ".concat(i,"px ").concat(r,";")].filter(Boolean).join(""),`
  }
  
  .`).concat(YT,` {
    right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(JT,` {
    margin-right: `).concat(i,"px ").concat(r,`;
  }
  
  .`).concat(YT," .").concat(YT,` {
    right: 0 `).concat(r,`;
  }
  
  .`).concat(JT," .").concat(JT,` {
    margin-right: 0 `).concat(r,`;
  }
  
  body[`).concat(rw,`] {
    `).concat(Ike,": ").concat(i,`px;
  }
`)},BW=function(){var e=parseInt(document.body.getAttribute(rw)||"0",10);return isFinite(e)?e:0},Wke=function(){q.useEffect(function(){return document.body.setAttribute(rw,(BW()+1).toString()),function(){var e=BW()-1;e<=0?document.body.removeAttribute(rw):document.body.setAttribute(rw,e.toString())}},[])},qke=function(e){var t=e.noRelative,n=e.noImportant,r=e.gapMode,s=r===void 0?"margin":r;Wke();var a=q.useMemo(function(){return $ke(s)},[s]);return q.createElement(Gke,{styles:Kke(a,!t,s,n?"":"!important")})},bD=!1;if(typeof window<"u")try{var F3=Object.defineProperty({},"passive",{get:function(){return bD=!0,!0}});window.addEventListener("test",F3,F3),window.removeEventListener("test",F3,F3)}catch{bD=!1}var Y_=bD?{passive:!1}:!1,Zke=function(e){return e.tagName==="TEXTAREA"},sae=function(e,t){if(!(e instanceof Element))return!1;var n=window.getComputedStyle(e);return n[t]!=="hidden"&&!(n.overflowY===n.overflowX&&!Zke(e)&&n[t]==="visible")},Xke=function(e){return sae(e,"overflowY")},Yke=function(e){return sae(e,"overflowX")},EW=function(e,t){var n=t.ownerDocument,r=t;do{typeof ShadowRoot<"u"&&r instanceof ShadowRoot&&(r=r.host);var s=oae(e,r);if(s){var a=aae(e,r),c=a[1],i=a[2];if(c>i)return!0}r=r.parentNode}while(r&&r!==n.body);return!1},Jke=function(e){var t=e.scrollTop,n=e.scrollHeight,r=e.clientHeight;return[t,n,r]},eLe=function(e){var t=e.scrollLeft,n=e.scrollWidth,r=e.clientWidth;return[t,n,r]},oae=function(e,t){return e==="v"?Xke(t):Yke(t)},aae=function(e,t){return e==="v"?Jke(t):eLe(t)},tLe=function(e,t){return e==="h"&&t==="rtl"?-1:1},nLe=function(e,t,n,r,s){var a=tLe(e,window.getComputedStyle(t).direction),c=a*r,i=n.target,f=t.contains(i),g=!1,y=c>0,b=0,T=0;do{var S=aae(e,i),U=S[0],N=S[1],W=S[2],L=N-W-a*U;(U||L)&&oae(e,i)&&(b+=L,T+=U),i instanceof ShadowRoot?i=i.host:i=i.parentNode}while(!f&&i!==document.body||f&&(t.contains(i)||t===i));return(y&&(Math.abs(b)<1||!s)||!y&&(Math.abs(T)<1||!s))&&(g=!0),g},P3=function(e){return"changedTouches"in e?[e.changedTouches[0].clientX,e.changedTouches[0].clientY]:[0,0]},TW=function(e){return[e.deltaX,e.deltaY]},IW=function(e){return e&&"current"in e?e.current:e},rLe=function(e,t){return e[0]===t[0]&&e[1]===t[1]},iLe=function(e){return`
  .block-interactivity-`.concat(e,` {pointer-events: none;}
  .allow-interactivity-`).concat(e,` {pointer-events: all;}
`)},sLe=0,J_=[];function oLe(e){var t=q.useRef([]),n=q.useRef([0,0]),r=q.useRef(),s=q.useState(sLe++)[0],a=q.useState(iae)[0],c=q.useRef(e);q.useEffect(function(){c.current=e},[e]),q.useEffect(function(){if(e.inert){document.body.classList.add("block-interactivity-".concat(s));var N=uD([e.lockRef.current],(e.shards||[]).map(IW),!0).filter(Boolean);return N.forEach(function(W){return W.classList.add("allow-interactivity-".concat(s))}),function(){document.body.classList.remove("block-interactivity-".concat(s)),N.forEach(function(W){return W.classList.remove("allow-interactivity-".concat(s))})}}},[e.inert,e.lockRef.current,e.shards]);var i=q.useCallback(function(N,W){if("touches"in N&&N.touches.length===2||N.type==="wheel"&&N.ctrlKey)return!c.current.allowPinchZoom;var L=P3(N),Q=n.current,V="deltaX"in N?N.deltaX:Q[0]-L[0],Z="deltaY"in N?N.deltaY:Q[1]-L[1],ne,Y=N.target,le=Math.abs(V)>Math.abs(Z)?"h":"v";if("touches"in N&&le==="h"&&Y.type==="range")return!1;var pe=EW(le,Y);if(!pe)return!0;if(pe?ne=le:(ne=le==="v"?"h":"v",pe=EW(le,Y)),!pe)return!1;if(!r.current&&"changedTouches"in N&&(V||Z)&&(r.current=ne),!ne)return!0;var _e=r.current||ne;return nLe(_e,W,N,_e==="h"?V:Z,!0)},[]),f=q.useCallback(function(N){var W=N;if(!(!J_.length||J_[J_.length-1]!==a)){var L="deltaY"in W?TW(W):P3(W),Q=t.current.filter(function(ne){return ne.name===W.type&&(ne.target===W.target||W.target===ne.shadowParent)&&rLe(ne.delta,L)})[0];if(Q&&Q.should){W.cancelable&&W.preventDefault();return}if(!Q){var V=(c.current.shards||[]).map(IW).filter(Boolean).filter(function(ne){return ne.contains(W.target)}),Z=V.length>0?i(W,V[0]):!c.current.noIsolation;Z&&W.cancelable&&W.preventDefault()}}},[]),g=q.useCallback(function(N,W,L,Q){var V={name:N,delta:W,target:L,should:Q,shadowParent:aLe(L)};t.current.push(V),setTimeout(function(){t.current=t.current.filter(function(Z){return Z!==V})},1)},[]),y=q.useCallback(function(N){n.current=P3(N),r.current=void 0},[]),b=q.useCallback(function(N){g(N.type,TW(N),N.target,i(N,e.lockRef.current))},[]),T=q.useCallback(function(N){g(N.type,P3(N),N.target,i(N,e.lockRef.current))},[]);q.useEffect(function(){return J_.push(a),e.setCallbacks({onScrollCapture:b,onWheelCapture:b,onTouchMoveCapture:T}),document.addEventListener("wheel",f,Y_),document.addEventListener("touchmove",f,Y_),document.addEventListener("touchstart",y,Y_),function(){J_=J_.filter(function(N){return N!==a}),document.removeEventListener("wheel",f,Y_),document.removeEventListener("touchmove",f,Y_),document.removeEventListener("touchstart",y,Y_)}},[]);var S=e.removeScrollBar,U=e.inert;return q.createElement(q.Fragment,null,U?q.createElement(a,{styles:iLe(s)}):null,S?q.createElement(qke,{gapMode:e.gapMode}):null)}function aLe(e){for(var t=null;e!==null;)e instanceof ShadowRoot&&(t=e.host,e=e.host),e=e.parentNode;return t}const lLe=Nke(rae,oLe);var lae=q.forwardRef(function(e,t){return q.createElement(uP,Rp({},e,{ref:t,sideCar:lLe}))});lae.classNames=uP.classNames;var cLe=function(e){if(typeof document>"u")return null;var t=Array.isArray(e)?e[0]:e;return t.ownerDocument.body},e1=new WeakMap,k3=new WeakMap,L3={},CN=0,cae=function(e){return e&&(e.host||cae(e.parentNode))},uLe=function(e,t){return t.map(function(n){if(e.contains(n))return n;var r=cae(n);return r&&e.contains(r)?r:(console.error("aria-hidden",n,"in not contained inside",e,". Doing nothing"),null)}).filter(function(n){return!!n})},dLe=function(e,t,n,r){var s=uLe(t,Array.isArray(e)?e:[e]);L3[n]||(L3[n]=new WeakMap);var a=L3[n],c=[],i=new Set,f=new Set(s),g=function(b){!b||i.has(b)||(i.add(b),g(b.parentNode))};s.forEach(g);var y=function(b){!b||f.has(b)||Array.prototype.forEach.call(b.children,function(T){if(i.has(T))y(T);else try{var S=T.getAttribute(r),U=S!==null&&S!=="false",N=(e1.get(T)||0)+1,W=(a.get(T)||0)+1;e1.set(T,N),a.set(T,W),c.push(T),N===1&&U&&k3.set(T,!0),W===1&&T.setAttribute(n,"true"),U||T.setAttribute(r,"true")}catch(L){console.error("aria-hidden: cannot operate on ",T,L)}})};return y(t),i.clear(),CN++,function(){c.forEach(function(b){var T=e1.get(b)-1,S=a.get(b)-1;e1.set(b,T),a.set(b,S),T||(k3.has(b)||b.removeAttribute(r),k3.delete(b)),S||b.removeAttribute(n)}),CN--,CN||(e1=new WeakMap,e1=new WeakMap,k3=new WeakMap,L3={})}},hLe=function(e,t,n){n===void 0&&(n="data-aria-hidden");var r=Array.from(Array.isArray(e)?e:[e]),s=cLe(e);return s?(r.push.apply(r,Array.from(s.querySelectorAll("[aria-live]"))),dLe(r,s,n,"aria-hidden")):function(){return null}},Mz="Dialog",[uae,vut]=qoe(Mz),[fLe,lg]=uae(Mz),dae=e=>{const{__scopeDialog:t,children:n,open:r,defaultOpen:s,onOpenChange:a,modal:c=!0}=e,i=q.useRef(null),f=q.useRef(null),[g=!1,y]=Zoe({prop:r,defaultProp:s,onChange:a});return zt.jsx(fLe,{scope:t,triggerRef:i,contentRef:f,contentId:XT(),titleId:XT(),descriptionId:XT(),open:g,onOpenChange:y,onOpenToggle:q.useCallback(()=>y(b=>!b),[y]),modal:c,children:n})};dae.displayName=Mz;var hae="DialogTrigger",fae=q.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=lg(hae,n),a=ov(t,s.triggerRef);return zt.jsx(nm.button,{type:"button","aria-haspopup":"dialog","aria-expanded":s.open,"aria-controls":s.contentId,"data-state":Rz(s.open),...r,ref:a,onClick:Xg(e.onClick,s.onOpenToggle)})});fae.displayName=hae;var pLe="DialogPortal",[xut,pae]=uae(pLe,{forceMount:void 0}),Pj="DialogOverlay",Aae=q.forwardRef((e,t)=>{const n=pae(Pj,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=lg(Pj,e.__scopeDialog);return a.modal?zt.jsx(cP,{present:r||a.open,children:zt.jsx(ALe,{...s,ref:t})}):null});Aae.displayName=Pj;var ALe=q.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=lg(Pj,n);return zt.jsx(lae,{as:Lz,allowPinchZoom:!0,shards:[s.contentRef],children:zt.jsx(nm.div,{"data-state":Rz(s.open),...r,ref:t,style:{pointerEvents:"auto",...r.style}})})}),Qx="DialogContent",mae=q.forwardRef((e,t)=>{const n=pae(Qx,e.__scopeDialog),{forceMount:r=n.forceMount,...s}=e,a=lg(Qx,e.__scopeDialog);return zt.jsx(cP,{present:r||a.open,children:a.modal?zt.jsx(mLe,{...s,ref:t}):zt.jsx(gLe,{...s,ref:t})})});mae.displayName=Qx;var mLe=q.forwardRef((e,t)=>{const n=lg(Qx,e.__scopeDialog),r=q.useRef(null),s=ov(t,n.contentRef,r);return q.useEffect(()=>{const a=r.current;if(a)return hLe(a)},[]),zt.jsx(gae,{...e,ref:s,trapFocus:n.open,disableOutsidePointerEvents:!0,onCloseAutoFocus:Xg(e.onCloseAutoFocus,a=>{var c;a.preventDefault(),(c=n.triggerRef.current)==null||c.focus()}),onPointerDownOutside:Xg(e.onPointerDownOutside,a=>{const c=a.detail.originalEvent,i=c.button===0&&c.ctrlKey===!0;(c.button===2||i)&&a.preventDefault()}),onFocusOutside:Xg(e.onFocusOutside,a=>a.preventDefault())})}),gLe=q.forwardRef((e,t)=>{const n=lg(Qx,e.__scopeDialog),r=q.useRef(!1),s=q.useRef(!1);return zt.jsx(gae,{...e,ref:t,trapFocus:!1,disableOutsidePointerEvents:!1,onCloseAutoFocus:a=>{var c,i;(c=e.onCloseAutoFocus)==null||c.call(e,a),a.defaultPrevented||(r.current||(i=n.triggerRef.current)==null||i.focus(),a.preventDefault()),r.current=!1,s.current=!1},onInteractOutside:a=>{var c,i;(c=e.onInteractOutside)==null||c.call(e,a),a.defaultPrevented||(r.current=!0,a.detail.originalEvent.type==="pointerdown"&&(s.current=!0));const f=a.target;(i=n.triggerRef.current)!=null&&i.contains(f)&&a.preventDefault(),a.detail.originalEvent.type==="focusin"&&s.current&&a.preventDefault()}})}),gae=q.forwardRef((e,t)=>{const{__scopeDialog:n,trapFocus:r,onOpenAutoFocus:s,onCloseAutoFocus:a,...c}=e,i=lg(Qx,n),f=q.useRef(null),g=ov(t,f);return Eke(),zt.jsxs(zt.Fragment,{children:[zt.jsx(eae,{asChild:!0,loop:!0,trapped:r,onMountAutoFocus:s,onUnmountAutoFocus:a,children:zt.jsx(Yoe,{role:"dialog",id:i.contentId,"aria-describedby":i.descriptionId,"aria-labelledby":i.titleId,"data-state":Rz(i.open),...c,ref:g,onDismiss:()=>i.onOpenChange(!1)})}),zt.jsxs(zt.Fragment,{children:[zt.jsx(vLe,{titleId:i.titleId}),zt.jsx(_Le,{contentRef:f,descriptionId:i.descriptionId})]})]})}),Nz="DialogTitle",yae=q.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=lg(Nz,n);return zt.jsx(nm.h2,{id:s.titleId,...r,ref:t})});yae.displayName=Nz;var vae="DialogDescription",yLe=q.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=lg(vae,n);return zt.jsx(nm.p,{id:s.descriptionId,...r,ref:t})});yLe.displayName=vae;var xae="DialogClose",_ae=q.forwardRef((e,t)=>{const{__scopeDialog:n,...r}=e,s=lg(xae,n);return zt.jsx(nm.button,{type:"button",...r,ref:t,onClick:Xg(e.onClick,()=>s.onOpenChange(!1))})});_ae.displayName=xae;function Rz(e){return e?"open":"closed"}var wae="DialogTitleWarning",[_ut,bae]=YPe(wae,{contentName:Qx,titleName:Nz,docsSlug:"dialog"}),vLe=({titleId:e})=>{const t=bae(wae),n=`\`${t.contentName}\` requires a \`${t.titleName}\` for the component to be accessible for screen reader users.

If you want to hide the \`${t.titleName}\`, you can wrap it with our VisuallyHidden component.

For more information, see https://radix-ui.com/primitives/docs/components/${t.docsSlug}`;return q.useEffect(()=>{e&&(document.getElementById(e)||console.error(n))},[n,e]),null},xLe="DialogDescriptionWarning",_Le=({contentRef:e,descriptionId:t})=>{const n=`Warning: Missing \`Description\` or \`aria-describedby={undefined}\` for {${bae(xLe).contentName}}.`;return q.useEffect(()=>{var r;const s=(r=e.current)==null?void 0:r.getAttribute("aria-describedby");t&&s&&(document.getElementById(t)||console.warn(n))},[n,e,t]),null},wLe=dae,bLe=fae,CLe=Aae,SLe=mae,BLe=yae,Cae=_ae;function Hx({open:e,onOpenChange:t,children:n}){return zt.jsx(wLe,{open:e,onOpenChange:t,children:n})}function ELe({title:e,children:t}){var n,r,s,a,c,i,f,g;const{modal:y}=qo;return zt.jsxs(zt.Fragment,{children:[zt.jsx(CLe,{...y==null?void 0:y.overlay}),zt.jsx("div",{...y==null?void 0:y.container,children:zt.jsxs(SLe,{...(n=y==null?void 0:y.dialog)==null?void 0:n.container,children:[zt.jsxs("div",{...(s=(r=y==null?void 0:y.dialog)==null?void 0:r.title)==null?void 0:s.container,children:[zt.jsx(BLe,{...(c=(a=y==null?void 0:y.dialog)==null?void 0:a.title)==null?void 0:c.text,children:e}),zt.jsx(Cae,{children:zt.jsx(Ise,{role:"button",tabIndex:0,...(f=(i=y==null?void 0:y.dialog)==null?void 0:i.title)==null?void 0:f.closeIcon})})]}),zt.jsx("div",{...(g=y==null?void 0:y.dialog)==null?void 0:g.content,children:t})]})})]})}Hx.Button=bLe;Hx.Close=Cae;Hx.Content=ELe;const Sae=({children:e,className:t,connected:n,uploadFile:r,allowFileUpload:s,...a})=>{const{container:c}=qo,i=vz(y=>y.setMessageContainerRef),f=Y2(y=>y.uploadFile),g=q.useRef(null);return q.useEffect(()=>{i(g)},[g]),s&&r?zt.jsx(lP,{noClick:!0,onDrop:y=>y.forEach(b=>f(b,r)),children:({getRootProps:y,isDragActive:b})=>zt.jsxs("div",{...a,className:NS(c.className,t),ref:g,children:[zt.jsxs("div",{"data-hover":b,...c.dropzone.overlay,children:["Drop files to upload",zt.jsx(BIe,{style:{width:"50px"}})]}),zt.jsxs(mW,{children:[zt.jsx(jW,{connected:n}),zt.jsx("div",{...c.dropzone.container,...y(),children:e})]})]})}):zt.jsx("div",{...a,className:NS(c.className,t),ref:g,children:zt.jsxs(mW,{children:[zt.jsx(jW,{connected:n}),e]})})},jW=({connected:e})=>{const{modal:t}=qo,{showModal:n}=Kse();return q.useEffect(()=>{var r,s,a,c;e===!1&&n({title:"Connection Error",content:zt.jsxs(zt.Fragment,{children:[zt.jsx("p",{...(s=(r=t==null?void 0:t.dialog)==null?void 0:r.newConversation)==null?void 0:s.text,children:"There was an error connecting to the server. Please check your internet connection and try again."}),zt.jsx(Hx.Close,{asChild:!0,children:zt.jsx("button",{type:"button",...(c=(a=t==null?void 0:t.dialog)==null?void 0:a.newConversation)==null?void 0:c.button,onClick:()=>window.location.reload(),children:"Restart"})})]})})},[e]),zt.jsx(zt.Fragment,{})};Sae.displayName="Container";const TLe=q.forwardRef(({children:e,onClick:t,...n},r)=>{const{fab:s}=qo,{container:a,icon:c}=s??{};return zt.jsx("div",{...n,...a,ref:r,onClick:t,children:zt.jsx("div",{...c})})});TLe.displayName="Fab";var Oz="Collapsible",[ILe,wut]=qoe(Oz),[jLe,Dz]=ILe(Oz),Bae=q.forwardRef((e,t)=>{const{__scopeCollapsible:n,open:r,defaultOpen:s,disabled:a,onOpenChange:c,...i}=e,[f=!1,g]=Zoe({prop:r,defaultProp:s,onChange:c});return zt.jsx(jLe,{scope:n,disabled:a,contentId:XT(),open:f,onOpenToggle:q.useCallback(()=>g(y=>!y),[g]),children:zt.jsx(nm.div,{"data-state":zz(f),"data-disabled":a?"":void 0,...i,ref:t})})});Bae.displayName=Oz;var Eae="CollapsibleTrigger",Tae=q.forwardRef((e,t)=>{const{__scopeCollapsible:n,...r}=e,s=Dz(Eae,n);return zt.jsx(nm.button,{type:"button","aria-controls":s.contentId,"aria-expanded":s.open||!1,"data-state":zz(s.open),"data-disabled":s.disabled?"":void 0,disabled:s.disabled,...r,ref:t,onClick:Xg(e.onClick,s.onOpenToggle)})});Tae.displayName=Eae;var Uz="CollapsibleContent",Iae=q.forwardRef((e,t)=>{const{forceMount:n,...r}=e,s=Dz(Uz,e.__scopeCollapsible);return zt.jsx(cP,{present:n||s.open,children:({present:a})=>zt.jsx(FLe,{...r,ref:t,present:a})})});Iae.displayName=Uz;var FLe=q.forwardRef((e,t)=>{const{__scopeCollapsible:n,present:r,children:s,...a}=e,c=Dz(Uz,n),[i,f]=q.useState(r),g=q.useRef(null),y=ov(t,g),b=q.useRef(0),T=b.current,S=q.useRef(0),U=S.current,N=c.open||i,W=q.useRef(N),L=q.useRef(void 0);return q.useEffect(()=>{const Q=requestAnimationFrame(()=>W.current=!1);return()=>cancelAnimationFrame(Q)},[]),ww(()=>{const Q=g.current;if(Q){L.current=L.current||{transitionDuration:Q.style.transitionDuration,animationName:Q.style.animationName},Q.style.transitionDuration="0s",Q.style.animationName="none";const V=Q.getBoundingClientRect();b.current=V.height,S.current=V.width,W.current||(Q.style.transitionDuration=L.current.transitionDuration,Q.style.animationName=L.current.animationName),f(r)}},[c.open,r]),zt.jsx(nm.div,{"data-state":zz(c.open),"data-disabled":c.disabled?"":void 0,id:c.contentId,hidden:!N,...a,ref:y,style:{"--radix-collapsible-content-height":T?`${T}px`:void 0,"--radix-collapsible-content-width":U?`${U}px`:void 0,...e.style},children:N&&s})});function zz(e){return e?"open":"closed"}var PLe=Bae,kLe=Iae;const LLe=({onClick:e,...t})=>{var n,r;const{header:s,modal:a}=qo,{showModal:c}=Kse(),i=f=>{var g,y,b,T;f.stopPropagation(),c({title:"Restart Conversation",content:zt.jsxs(zt.Fragment,{children:[zt.jsx("p",{...(y=(g=a==null?void 0:a.dialog)==null?void 0:g.newConversation)==null?void 0:y.text,children:"Are you sure you want to restart a new conversation?"}),zt.jsx(Hx.Close,{asChild:!0,children:zt.jsx("button",{type:"button",...(T=(b=a==null?void 0:a.dialog)==null?void 0:b.newConversation)==null?void 0:T.button,onClick:e,children:"Restart"})})]})})};return zt.jsx(PTe,{...t,...(r=(n=s==null?void 0:s.content)==null?void 0:n.actions)==null?void 0:r.icons,role:"button",tabIndex:0,onClick:i,onKeyDown:f=>{f.key==="Enter"&&i(f)}})},MLe=({onClick:e,...t})=>{const{header:n}=qo,r=s=>{s.stopPropagation(),e==null||e()};return zt.jsx(Ise,{...t,...n.content.actions.icons,role:"button",tabIndex:0,onClick:r,onKeyDown:s=>{s.key==="Enter"&&r(s)}})},E2=({icon:e,title:t,link:n,...r})=>{var s,a,c,i,f,g,y,b,T,S,U,N;const{header:W}=qo,L=e??xIe;return t?n?zt.jsxs("a",{...r,...(a=(s=W.expandedContent)==null?void 0:s.descriptionItems)==null?void 0:a.container,href:n,target:"_blank",rel:"noreferrer noopener",children:[zt.jsx(L,{...(i=(c=W.expandedContent)==null?void 0:c.descriptionItems)==null?void 0:i.icon}),zt.jsx("p",{...(g=(f=W.expandedContent)==null?void 0:f.descriptionItems)==null?void 0:g.link,children:t})]}):zt.jsxs("div",{...r,...(b=(y=W.expandedContent)==null?void 0:y.descriptionItems)==null?void 0:b.container,children:[zt.jsx(L,{...(S=(T=W.expandedContent)==null?void 0:T.descriptionItems)==null?void 0:S.icon}),zt.jsx("p",{...(N=(U=W.expandedContent)==null?void 0:U.descriptionItems)==null?void 0:N.text,children:t})]}):null},NLe=({defaultOpen:e,closeWindow:t,configuration:n,restartConversation:r,...s})=>{var a,c,i,f,g,y,b,T,S,U,N,W,L,Q,V,Z,ne,Y,le,pe,_e,ye;const{header:he}=qo,[be,Te]=q.useState(!!e),Ee=!!((a=n.email)!=null&&a.title)||!!((c=n.phone)!=null&&c.title)||!!((i=n.website)!=null&&i.title)||!!((f=n.termsOfService)!=null&&f.link)||!!((g=n.privacyPolicy)!=null&&g.link),Ne=Ee||!!n.botDescription;return zt.jsxs(PLe,{open:Ne?be:!1,onOpenChange:Te,"data-disabled":Ne?void 0:"",...he.container,...s,children:[zt.jsxs(Tae,{...he.content.container,children:[zt.jsx(ez,{...s,src:n.botAvatar,...he.content.avatar,children:n.botName||"Bot"}),zt.jsx("h2",{...he.content.title,children:n.botName||"Bot"}),n.botDescription&&zt.jsx("p",{...he.content.description,children:n.botDescription}),zt.jsxs("div",{...he.content.actions.container,children:[r&&zt.jsx(LLe,{onClick:r}),t&&zt.jsx(MLe,{onClick:t})]})]}),Ee&&zt.jsxs(kLe,{...he.expandedContent.container,children:[zt.jsxs("div",{"data-links":"",...he.expandedContent.group,children:[zt.jsx(E2,{"data-email":"",icon:jIe,title:(y=n.email)==null?void 0:y.title,link:(T=(b=n.email)==null?void 0:b.link)!=null&&T.startsWith("mailto:")?(S=n.email)==null?void 0:S.link:`mailto:${(U=n.email)==null?void 0:U.link}`}),zt.jsx(E2,{"data-phone":"",icon:NIe,title:(N=n.phone)==null?void 0:N.title,link:(L=(W=n.phone)==null?void 0:W.link)!=null&&L.startsWith("tel:")?(Q=n.phone)==null?void 0:Q.link:`tel:${(V=n.phone)==null?void 0:V.link}`}),zt.jsx(E2,{"data-website":"",link:(Z=n.website)==null?void 0:Z.link,icon:PIe,title:(ne=n.website)==null?void 0:ne.title})]}),zt.jsxs("div",{"data-legal":"",...(Y=he.expandedContent)==null?void 0:Y.group,children:[zt.jsx(E2,{"data-terms":"",link:(le=n.termsOfService)==null?void 0:le.link,icon:TIe,title:(pe=n.termsOfService)==null?void 0:pe.title}),zt.jsx(E2,{"data-privacy":"",link:(_e=n.privacyPolicy)==null?void 0:_e.link,icon:LIe,title:(ye=n.privacyPolicy)==null?void 0:ye.title})]})]})]})},RLe=q.memo(({...e})=>{const{typingIndicator:t}=qo;return zt.jsx("div",{...e,...t==null?void 0:t.container,children:zt.jsx("div",{...t==null?void 0:t.loader})})}),FW=q.memo(q.forwardRef(({direction:e,block:t,disableInput:n,children:r,sender:s,id:a,authorId:c,renderers:i,sendMessage:f,isReadOnly:g,timestamp:y},b)=>{var T,S,U;const[N,W]=q.useState([]),{message:L}=qo,Q=Jre(c??"",15),[V,Z]=q.useState("idle");return zt.jsx($se.Provider,{value:{isLoading:N,setIsLoading:W},children:zt.jsxs("div",{...L==null?void 0:L.container,"data-loaded":N.length===0,"data-disable-input":!!n,"data-direction":e,ref:b,children:[zt.jsxs(Z8,{"data-color":Q,"data-loading-status":V,...(T=L==null?void 0:L.avatar)==null?void 0:T.container,children:[zt.jsx(X8,{...(S=L==null?void 0:L.avatar)==null?void 0:S.image,onLoadingStatusChange:Z,src:s==null?void 0:s.avatar}),zt.jsxs(Y8,{...(U=L==null?void 0:L.avatar)==null?void 0:U.fallback,children:[s==null?void 0:s.name[0]," "]})]}),t&&zt.jsx(kB,{block:{...t,isReadOnly:g,direction:e,timestamp:y,sender:s,messageId:a,sendMessage:f},renderers:i}),r]})})}));function OLe({botAvatar:e,botDescription:t,botName:n}){const{messageList:{marquee:r}}=qo;return zt.jsxs("li",{...r.container,children:[zt.jsx(ez,{src:e,...r.avatar,children:(n||"Bot").slice(0,1)}),zt.jsxs("div",{...r.content,children:[zt.jsx("h1",{...r.title,children:n||"Bot"}),zt.jsx("p",{...r.description,children:t})]})]})}function DLe(e,t){try{var n=global,r=n.document;if(typeof r<"u"&&r.createElement&&r.head&&r.head.appendChild){var s=r.querySelector('html meta[name="'.concat(encodeURI(e),'"]'))||r.createElement("meta");s.setAttribute("name",e),s.setAttribute("content",t),r.head.appendChild(s)}}catch{}}function ULe(){DLe("react-scroll-to-bottom:version","4.2.0")}var T2=function(e){return e&&e.Math===Math&&e},tu=T2(typeof globalThis=="object"&&globalThis)||T2(typeof window=="object"&&window)||T2(typeof self=="object"&&self)||T2(typeof Ra=="object"&&Ra)||T2(typeof Ra=="object"&&Ra)||function(){return this}()||Function("return this")(),nu=function(e){try{return!!e()}catch{return!0}},zLe=nu,dP=!zLe(function(){var e=(function(){}).bind();return typeof e!="function"||e.hasOwnProperty("prototype")}),QLe=dP,jae=Function.prototype,PW=jae.apply,kW=jae.call,Qz=typeof Reflect=="object"&&Reflect.apply||(QLe?kW.bind(PW):function(){return kW.apply(PW,arguments)}),Fae=dP,Pae=Function.prototype,CD=Pae.call,HLe=Fae&&Pae.bind.bind(CD,CD),ru=Fae?HLe:function(e){return function(){return CD.apply(e,arguments)}},kae=ru,VLe=kae({}.toString),$Le=kae("".slice),t_=function(e){return $Le(VLe(e),8,-1)},GLe=t_,KLe=ru,Hz=function(e){if(GLe(e)==="Function")return KLe(e)},SN=typeof document=="object"&&document.all,Nd=typeof SN>"u"&&SN!==void 0?function(e){return typeof e=="function"||e===SN}:function(e){return typeof e=="function"},MB={},WLe=nu,rf=!WLe(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!==7}),qLe=dP,M3=Function.prototype.call,cg=qLe?M3.bind(M3):function(){return M3.apply(M3,arguments)},Vz={},Lae={}.propertyIsEnumerable,Mae=Object.getOwnPropertyDescriptor,ZLe=Mae&&!Lae.call({1:2},1);Vz.f=ZLe?function(e){var t=Mae(this,e);return!!t&&t.enumerable}:Lae;var NB=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},XLe=ru,YLe=nu,JLe=t_,BN=Object,eMe=XLe("".split),Nae=YLe(function(){return!BN("z").propertyIsEnumerable(0)})?function(e){return JLe(e)==="String"?eMe(e,""):BN(e)}:BN,$z=function(e){return e==null},tMe=$z,nMe=TypeError,Gz=function(e){if(tMe(e))throw new nMe("Can't call method on "+e);return e},rMe=Nae,iMe=Gz,ug=function(e){return rMe(iMe(e))},sMe=Nd,A0=function(e){return typeof e=="object"?e!==null:sMe(e)},Wu={},EN=Wu,TN=tu,oMe=Nd,LW=function(e){return oMe(e)?e:void 0},dg=function(e,t){return arguments.length<2?LW(EN[e])||LW(TN[e]):EN[e]&&EN[e][t]||TN[e]&&TN[e][t]},aMe=ru,m0=aMe({}.isPrototypeOf),lMe=tu,MW=lMe.navigator,NW=MW&&MW.userAgent,Kz=NW?String(NW):"",Rae=tu,IN=Kz,RW=Rae.process,OW=Rae.Deno,DW=RW&&RW.versions||OW&&OW.version,UW=DW&&DW.v8,UA,kj;UW&&(UA=UW.split("."),kj=UA[0]>0&&UA[0]<4?1:+(UA[0]+UA[1]));!kj&&IN&&(UA=IN.match(/Edge\/(\d+)/),(!UA||UA[1]>=74)&&(UA=IN.match(/Chrome\/(\d+)/),UA&&(kj=+UA[1])));var Wz=kj,zW=Wz,cMe=nu,uMe=tu,dMe=uMe.String,eb=!!Object.getOwnPropertySymbols&&!cMe(function(){var e=Symbol("symbol detection");return!dMe(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&zW&&zW<41}),hMe=eb,Oae=hMe&&!Symbol.sham&&typeof Symbol.iterator=="symbol",fMe=dg,pMe=Nd,AMe=m0,mMe=Oae,gMe=Object,RB=mMe?function(e){return typeof e=="symbol"}:function(e){var t=fMe("Symbol");return pMe(t)&&AMe(t.prototype,gMe(e))},yMe=String,hP=function(e){try{return yMe(e)}catch{return"Object"}},vMe=Nd,xMe=hP,_Me=TypeError,qz=function(e){if(vMe(e))return e;throw new _Me(xMe(e)+" is not a function")},wMe=qz,bMe=$z,Zz=function(e,t){var n=e[t];return bMe(n)?void 0:wMe(n)},jN=cg,FN=Nd,PN=A0,CMe=TypeError,SMe=function(e,t){var n,r;if(t==="string"&&FN(n=e.toString)&&!PN(r=jN(n,e))||FN(n=e.valueOf)&&!PN(r=jN(n,e))||t!=="string"&&FN(n=e.toString)&&!PN(r=jN(n,e)))return r;throw new CMe("Can't convert object to primitive value")},Dae={exports:{}},QW=tu,BMe=Object.defineProperty,EMe=function(e,t){try{BMe(QW,e,{value:t,configurable:!0,writable:!0})}catch{QW[e]=t}return t},TMe=tu,IMe=EMe,HW="__core-js_shared__",VW=Dae.exports=TMe[HW]||IMe(HW,{});(VW.versions||(VW.versions=[])).push({version:"3.38.1",mode:"pure",copyright:"© 2014-2024 Denis Pushkarev (zloirock.ru)",license:"https://github.com/zloirock/core-js/blob/v3.38.1/LICENSE",source:"https://github.com/zloirock/core-js"});var Xz=Dae.exports,$W=Xz,tb=function(e,t){return $W[e]||($W[e]=t||{})},jMe=Gz,FMe=Object,g0=function(e){return FMe(jMe(e))},PMe=ru,kMe=g0,LMe=PMe({}.hasOwnProperty),np=Object.hasOwn||function(e,t){return LMe(kMe(e),t)},MMe=ru,NMe=0,RMe=Math.random(),OMe=MMe(1 .toString),Yz=function(e){return"Symbol("+(e===void 0?"":e)+")_"+OMe(++NMe+RMe,36)},DMe=tu,UMe=tb,GW=np,zMe=Yz,QMe=eb,HMe=Oae,V1=DMe.Symbol,kN=UMe("wks"),VMe=HMe?V1.for||V1:V1&&V1.withoutSetter||zMe,_u=function(e){return GW(kN,e)||(kN[e]=QMe&&GW(V1,e)?V1[e]:VMe("Symbol."+e)),kN[e]},$Me=cg,KW=A0,WW=RB,GMe=Zz,KMe=SMe,WMe=_u,qMe=TypeError,ZMe=WMe("toPrimitive"),XMe=function(e,t){if(!KW(e)||WW(e))return e;var n=GMe(e,ZMe),r;if(n){if(t===void 0&&(t="default"),r=$Me(n,e,t),!KW(r)||WW(r))return r;throw new qMe("Can't convert object to primitive value")}return t===void 0&&(t="number"),KMe(e,t)},YMe=XMe,JMe=RB,Jz=function(e){var t=YMe(e,"string");return JMe(t)?t:t+""},eNe=tu,qW=A0,SD=eNe.document,tNe=qW(SD)&&qW(SD.createElement),Uae=function(e){return tNe?SD.createElement(e):{}},nNe=rf,rNe=nu,iNe=Uae,zae=!nNe&&!rNe(function(){return Object.defineProperty(iNe("div"),"a",{get:function(){return 7}}).a!==7}),sNe=rf,oNe=cg,aNe=Vz,lNe=NB,cNe=ug,uNe=Jz,dNe=np,hNe=zae,ZW=Object.getOwnPropertyDescriptor;MB.f=sNe?ZW:function(e,t){if(e=cNe(e),t=uNe(t),hNe)try{return ZW(e,t)}catch{}if(dNe(e,t))return lNe(!oNe(aNe.f,e,t),e[t])};var fNe=nu,pNe=Nd,ANe=/#|\.prototype\./,OB=function(e,t){var n=gNe[mNe(e)];return n===vNe?!0:n===yNe?!1:pNe(t)?fNe(t):!!t},mNe=OB.normalize=function(e){return String(e).replace(ANe,".").toLowerCase()},gNe=OB.data={},yNe=OB.NATIVE="N",vNe=OB.POLYFILL="P",xNe=OB,XW=Hz,_Ne=qz,wNe=dP,bNe=XW(XW.bind),e7=function(e,t){return _Ne(e),t===void 0?e:wNe?bNe(e,t):function(){return e.apply(t,arguments)}},rm={},CNe=rf,SNe=nu,Qae=CNe&&SNe(function(){return Object.defineProperty(function(){},"prototype",{value:42,writable:!1}).prototype!==42}),BNe=A0,ENe=String,TNe=TypeError,av=function(e){if(BNe(e))return e;throw new TNe(ENe(e)+" is not an object")},INe=rf,jNe=zae,FNe=Qae,N3=av,YW=Jz,PNe=TypeError,LN=Object.defineProperty,kNe=Object.getOwnPropertyDescriptor,MN="enumerable",NN="configurable",RN="writable";rm.f=INe?FNe?function(e,t,n){if(N3(e),t=YW(t),N3(n),typeof e=="function"&&t==="prototype"&&"value"in n&&RN in n&&!n[RN]){var r=kNe(e,t);r&&r[RN]&&(e[t]=n.value,n={configurable:NN in n?n[NN]:r[NN],enumerable:MN in n?n[MN]:r[MN],writable:!1})}return LN(e,t,n)}:LN:function(e,t,n){if(N3(e),t=YW(t),N3(n),jNe)try{return LN(e,t,n)}catch{}if("get"in n||"set"in n)throw new PNe("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var LNe=rf,MNe=rm,NNe=NB,fP=LNe?function(e,t,n){return MNe.f(e,t,NNe(1,n))}:function(e,t,n){return e[t]=n,e},I2=tu,RNe=Qz,ONe=Hz,DNe=Nd,UNe=MB.f,zNe=xNe,t1=Wu,QNe=e7,n1=fP,JW=np,HNe=function(e){var t=function(n,r,s){if(this instanceof t){switch(arguments.length){case 0:return new e;case 1:return new e(n);case 2:return new e(n,r)}return new e(n,r,s)}return RNe(e,this,arguments)};return t.prototype=e.prototype,t},pa=function(e,t){var n=e.target,r=e.global,s=e.stat,a=e.proto,c=r?I2:s?I2[n]:I2[n]&&I2[n].prototype,i=r?t1:t1[n]||n1(t1,n,{})[n],f=i.prototype,g,y,b,T,S,U,N,W,L;for(T in t)g=zNe(r?T:n+(s?".":"#")+T,e.forced),y=!g&&c&&JW(c,T),U=i[T],y&&(e.dontCallGetSet?(L=UNe(c,T),N=L&&L.value):N=c[T]),S=y&&N?N:t[T],!(!g&&!a&&typeof U==typeof S)&&(e.bind&&y?W=QNe(S,I2):e.wrap&&y?W=HNe(S):a&&DNe(S)?W=ONe(S):W=S,(e.sham||S&&S.sham||U&&U.sham)&&n1(W,"sham",!0),n1(i,T,W),a&&(b=n+"Prototype",JW(t1,b)||n1(t1,b,{}),n1(t1[b],T,S),e.real&&f&&(g||!f[T])&&n1(f,T,S)))},VNe=t_,nb=Array.isArray||function(e){return VNe(e)==="Array"},$Ne=pa,GNe=nb;$Ne({target:"Array",stat:!0},{isArray:GNe});var KNe=Wu,WNe=KNe.Array.isArray,qNe=WNe,Hae=qNe,ZNe=Hae,XNe=ZNe,YNe=XNe,JNe=YNe,e5e=JNe;const Vae=uo(e5e);function t5e(e){if(Vae(e))return e}var n5e=Math.ceil,r5e=Math.floor,i5e=Math.trunc||function(e){var t=+e;return(t>0?r5e:n5e)(t)},s5e=i5e,pP=function(e){var t=+e;return t!==t||t===0?0:s5e(t)},o5e=pP,a5e=Math.min,l5e=function(e){var t=o5e(e);return t>0?a5e(t,9007199254740991):0},c5e=l5e,n_=function(e){return c5e(e.length)},u5e=TypeError,d5e=9007199254740991,t7=function(e){if(e>d5e)throw u5e("Maximum allowed index exceeded");return e},h5e=rf,f5e=rm,p5e=NB,DB=function(e,t,n){h5e?f5e.f(e,t,p5e(0,n)):e[t]=n},A5e=_u,m5e=A5e("toStringTag"),$ae={};$ae[m5e]="z";var n7=String($ae)==="[object z]",g5e=n7,y5e=Nd,eI=t_,v5e=_u,x5e=v5e("toStringTag"),_5e=Object,w5e=eI(function(){return arguments}())==="Arguments",b5e=function(e,t){try{return e[t]}catch{}},UB=g5e?eI:function(e){var t,n,r;return e===void 0?"Undefined":e===null?"Null":typeof(n=b5e(t=_5e(e),x5e))=="string"?n:w5e?eI(t):(r=eI(t))==="Object"&&y5e(t.callee)?"Arguments":r},C5e=ru,S5e=Nd,BD=Xz,B5e=C5e(Function.toString);S5e(BD.inspectSource)||(BD.inspectSource=function(e){return B5e(e)});var E5e=BD.inspectSource,T5e=ru,I5e=nu,Gae=Nd,j5e=UB,F5e=dg,P5e=E5e,Kae=function(){},Wae=F5e("Reflect","construct"),r7=/^\s*(?:class|function)\b/,k5e=T5e(r7.exec),L5e=!r7.test(Kae),j2=function(e){if(!Gae(e))return!1;try{return Wae(Kae,[],e),!0}catch{return!1}},qae=function(e){if(!Gae(e))return!1;switch(j5e(e)){case"AsyncFunction":case"GeneratorFunction":case"AsyncGeneratorFunction":return!1}try{return L5e||!!k5e(r7,P5e(e))}catch{return!0}};qae.sham=!0;var i7=!Wae||I5e(function(){var e;return j2(j2.call)||!j2(Object)||!j2(function(){e=!0})||e})?qae:j2,eq=nb,M5e=i7,N5e=A0,R5e=_u,O5e=R5e("species"),tq=Array,D5e=function(e){var t;return eq(e)&&(t=e.constructor,M5e(t)&&(t===tq||eq(t.prototype))?t=void 0:N5e(t)&&(t=t[O5e],t===null&&(t=void 0))),t===void 0?tq:t},U5e=D5e,s7=function(e,t){return new(U5e(e))(t===0?0:t)},z5e=nu,Q5e=_u,H5e=Wz,V5e=Q5e("species"),AP=function(e){return H5e>=51||!z5e(function(){var t=[],n=t.constructor={};return n[V5e]=function(){return{foo:1}},t[e](Boolean).foo!==1})},$5e=pa,G5e=nu,K5e=nb,W5e=A0,q5e=g0,Z5e=n_,nq=t7,rq=DB,X5e=s7,Y5e=AP,J5e=_u,eRe=Wz,Zae=J5e("isConcatSpreadable"),tRe=eRe>=51||!G5e(function(){var e=[];return e[Zae]=!1,e.concat()[0]!==e}),nRe=function(e){if(!W5e(e))return!1;var t=e[Zae];return t!==void 0?!!t:K5e(e)},rRe=!tRe||!Y5e("concat");$5e({target:"Array",proto:!0,arity:1,forced:rRe},{concat:function(e){var t=q5e(this),n=X5e(t,0),r=0,s,a,c,i,f;for(s=-1,c=arguments.length;s<c;s++)if(f=s===-1?t:arguments[s],nRe(f))for(i=Z5e(f),nq(r+i),a=0;a<i;a++,r++)a in f&&rq(n,r,f[a]);else nq(r+1),rq(n,r++,f);return n.length=r,n}});var iRe=UB,sRe=String,zB=function(e){if(iRe(e)==="Symbol")throw new TypeError("Cannot convert a Symbol value to a string");return sRe(e)},mP={},oRe=pP,aRe=Math.max,lRe=Math.min,o7=function(e,t){var n=oRe(e);return n<0?aRe(n+t,0):lRe(n,t)},cRe=ug,uRe=o7,dRe=n_,iq=function(e){return function(t,n,r){var s=cRe(t),a=dRe(s);if(a===0)return!e&&-1;var c=uRe(r,a),i;if(e&&n!==n){for(;a>c;)if(i=s[c++],i!==i)return!0}else for(;a>c;c++)if((e||c in s)&&s[c]===n)return e||c||0;return!e&&-1}},Xae={includes:iq(!0),indexOf:iq(!1)},gP={},hRe=ru,ON=np,fRe=ug,pRe=Xae.indexOf,ARe=gP,sq=hRe([].push),Yae=function(e,t){var n=fRe(e),r=0,s=[],a;for(a in n)!ON(ARe,a)&&ON(n,a)&&sq(s,a);for(;t.length>r;)ON(n,a=t[r++])&&(~pRe(s,a)||sq(s,a));return s},a7=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],mRe=Yae,gRe=a7,l7=Object.keys||function(e){return mRe(e,gRe)},yRe=rf,vRe=Qae,xRe=rm,_Re=av,wRe=ug,bRe=l7;mP.f=yRe&&!vRe?Object.defineProperties:function(e,t){_Re(e);for(var n=wRe(t),r=bRe(t),s=r.length,a=0,c;s>a;)xRe.f(e,c=r[a++],n[c]);return e};var CRe=dg,SRe=CRe("document","documentElement"),BRe=tb,ERe=Yz,oq=BRe("keys"),yP=function(e){return oq[e]||(oq[e]=ERe(e))},TRe=av,IRe=mP,aq=a7,jRe=gP,FRe=SRe,PRe=Uae,kRe=yP,lq=">",cq="<",ED="prototype",TD="script",Jae=kRe("IE_PROTO"),DN=function(){},ele=function(e){return cq+TD+lq+e+cq+"/"+TD+lq},uq=function(e){e.write(ele("")),e.close();var t=e.parentWindow.Object;return e=null,t},LRe=function(){var e=PRe("iframe"),t="java"+TD+":",n;return e.style.display="none",FRe.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(ele("document.F=Object")),n.close(),n.F},R3,tI=function(){try{R3=new ActiveXObject("htmlfile")}catch{}tI=typeof document<"u"?document.domain&&R3?uq(R3):LRe():uq(R3);for(var e=aq.length;e--;)delete tI[ED][aq[e]];return tI()};jRe[Jae]=!0;var c7=Object.create||function(e,t){var n;return e!==null?(DN[ED]=TRe(e),n=new DN,DN[ED]=null,n[Jae]=e):n=tI(),t===void 0?n:IRe.f(n,t)},vP={},MRe=Yae,NRe=a7,RRe=NRe.concat("length","prototype");vP.f=Object.getOwnPropertyNames||function(e){return MRe(e,RRe)};var tle={},ORe=ru,xP=ORe([].slice),DRe=t_,URe=ug,nle=vP.f,zRe=xP,rle=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],QRe=function(e){try{return nle(e)}catch{return zRe(rle)}};tle.f=function(e){return rle&&DRe(e)==="Window"?QRe(e):nle(URe(e))};var _P={};_P.f=Object.getOwnPropertySymbols;var HRe=fP,wP=function(e,t,n,r){return r&&r.enumerable?e[t]=n:HRe(e,t,n),e},VRe=rm,$Re=function(e,t,n){return VRe.f(e,t,n)},QB={},GRe=_u;QB.f=GRe;var dq=Wu,KRe=np,WRe=QB,qRe=rm.f,Pl=function(e){var t=dq.Symbol||(dq.Symbol={});KRe(t,e)||qRe(t,e,{value:WRe.f(e)})},ZRe=cg,XRe=dg,YRe=_u,JRe=wP,ile=function(){var e=XRe("Symbol"),t=e&&e.prototype,n=t&&t.valueOf,r=YRe("toPrimitive");t&&!t[r]&&JRe(t,r,function(s){return ZRe(n,this)},{arity:1})},eOe=n7,tOe=UB,nOe=eOe?{}.toString:function(){return"[object "+tOe(this)+"]"},rOe=n7,iOe=rm.f,sOe=fP,oOe=np,aOe=nOe,lOe=_u,hq=lOe("toStringTag"),rb=function(e,t,n,r){var s=n?e:e&&e.prototype;s&&(oOe(s,hq)||iOe(s,hq,{configurable:!0,value:t}),r&&!rOe&&sOe(s,"toString",aOe))},cOe=tu,uOe=Nd,fq=cOe.WeakMap,dOe=uOe(fq)&&/native code/.test(String(fq)),hOe=dOe,sle=tu,fOe=A0,pOe=fP,UN=np,zN=Xz,AOe=yP,mOe=gP,pq="Object already initialized",ID=sle.TypeError,gOe=sle.WeakMap,Lj,OS,Mj,yOe=function(e){return Mj(e)?OS(e):Lj(e,{})},vOe=function(e){return function(t){var n;if(!fOe(t)||(n=OS(t)).type!==e)throw new ID("Incompatible receiver, "+e+" required");return n}};if(hOe||zN.state){var km=zN.state||(zN.state=new gOe);km.get=km.get,km.has=km.has,km.set=km.set,Lj=function(e,t){if(km.has(e))throw new ID(pq);return t.facade=e,km.set(e,t),t},OS=function(e){return km.get(e)||{}},Mj=function(e){return km.has(e)}}else{var r1=AOe("state");mOe[r1]=!0,Lj=function(e,t){if(UN(e,r1))throw new ID(pq);return t.facade=e,pOe(e,r1,t),t},OS=function(e){return UN(e,r1)?e[r1]:{}},Mj=function(e){return UN(e,r1)}}var u7={set:Lj,get:OS,has:Mj,enforce:yOe,getterFor:vOe},xOe=e7,_Oe=ru,wOe=Nae,bOe=g0,COe=n_,SOe=s7,Aq=_Oe([].push),W0=function(e){var t=e===1,n=e===2,r=e===3,s=e===4,a=e===6,c=e===7,i=e===5||a;return function(f,g,y,b){for(var T=bOe(f),S=wOe(T),U=COe(S),N=xOe(g,y),W=0,L=b||SOe,Q=t?L(f,U):n||c?L(f,0):void 0,V,Z;U>W;W++)if((i||W in S)&&(V=S[W],Z=N(V,W,T),e))if(t)Q[W]=Z;else if(Z)switch(e){case 3:return!0;case 5:return V;case 6:return W;case 2:Aq(Q,V)}else switch(e){case 4:return!1;case 7:Aq(Q,V)}return a?-1:r||s?s:Q}},d7={forEach:W0(0),map:W0(1),filter:W0(2),some:W0(3),every:W0(4),find:W0(5),findIndex:W0(6),filterReject:W0(7)},bP=pa,HB=tu,h7=cg,BOe=ru,Fw=rf,Pw=eb,EOe=nu,yu=np,TOe=m0,jD=av,CP=ug,f7=Jz,IOe=zB,FD=NB,kw=c7,ole=l7,jOe=vP,ale=tle,FOe=_P,lle=MB,cle=rm,POe=mP,ule=Vz,mq=wP,kOe=$Re,p7=tb,LOe=yP,dle=gP,gq=Yz,MOe=_u,NOe=QB,ROe=Pl,OOe=ile,DOe=rb,hle=u7,SP=d7.forEach,qh=LOe("hidden"),BP="Symbol",DS="prototype",UOe=hle.set,yq=hle.getterFor(BP),QA=Object[DS],xx=HB.Symbol,J2=xx&&xx[DS],zOe=HB.RangeError,QOe=HB.TypeError,QN=HB.QObject,fle=lle.f,_x=cle.f,ple=ale.f,HOe=ule.f,Ale=BOe([].push),c0=p7("symbols"),VB=p7("op-symbols"),VOe=p7("wks"),PD=!QN||!QN[DS]||!QN[DS].findChild,mle=function(e,t,n){var r=fle(QA,t);r&&delete QA[t],_x(e,t,n),r&&e!==QA&&_x(QA,t,r)},kD=Fw&&EOe(function(){return kw(_x({},"a",{get:function(){return _x(this,"a",{value:7}).a}})).a!==7})?mle:_x,HN=function(e,t){var n=c0[e]=kw(J2);return UOe(n,{type:BP,tag:e,description:t}),Fw||(n.description=t),n},EP=function(e,t,n){e===QA&&EP(VB,t,n),jD(e);var r=f7(t);return jD(n),yu(c0,r)?(n.enumerable?(yu(e,qh)&&e[qh][r]&&(e[qh][r]=!1),n=kw(n,{enumerable:FD(0,!1)})):(yu(e,qh)||_x(e,qh,FD(1,kw(null))),e[qh][r]=!0),kD(e,r,n)):_x(e,r,n)},A7=function(e,t){jD(e);var n=CP(t),r=ole(n).concat(xle(n));return SP(r,function(s){(!Fw||h7(gle,n,s))&&EP(e,s,n[s])}),e},$Oe=function(e,t){return t===void 0?kw(e):A7(kw(e),t)},gle=function(e){var t=f7(e),n=h7(HOe,this,t);return this===QA&&yu(c0,t)&&!yu(VB,t)?!1:n||!yu(this,t)||!yu(c0,t)||yu(this,qh)&&this[qh][t]?n:!0},yle=function(e,t){var n=CP(e),r=f7(t);if(!(n===QA&&yu(c0,r)&&!yu(VB,r))){var s=fle(n,r);return s&&yu(c0,r)&&!(yu(n,qh)&&n[qh][r])&&(s.enumerable=!0),s}},vle=function(e){var t=ple(CP(e)),n=[];return SP(t,function(r){!yu(c0,r)&&!yu(dle,r)&&Ale(n,r)}),n},xle=function(e){var t=e===QA,n=ple(t?VB:CP(e)),r=[];return SP(n,function(s){yu(c0,s)&&(!t||yu(QA,s))&&Ale(r,c0[s])}),r};Pw||(xx=function(){if(TOe(J2,this))throw new QOe("Symbol is not a constructor");var e=!arguments.length||arguments[0]===void 0?void 0:IOe(arguments[0]),t=gq(e),n=function(r){var s=this===void 0?HB:this;s===QA&&h7(n,VB,r),yu(s,qh)&&yu(s[qh],t)&&(s[qh][t]=!1);var a=FD(1,r);try{kD(s,t,a)}catch(c){if(!(c instanceof zOe))throw c;mle(s,t,a)}};return Fw&&PD&&kD(QA,t,{configurable:!0,set:n}),HN(t,e)},J2=xx[DS],mq(J2,"toString",function(){return yq(this).tag}),mq(xx,"withoutSetter",function(e){return HN(gq(e),e)}),ule.f=gle,cle.f=EP,POe.f=A7,lle.f=yle,jOe.f=ale.f=vle,FOe.f=xle,NOe.f=function(e){return HN(MOe(e),e)},Fw&&kOe(J2,"description",{configurable:!0,get:function(){return yq(this).description}}));bP({global:!0,constructor:!0,wrap:!0,forced:!Pw,sham:!Pw},{Symbol:xx});SP(ole(VOe),function(e){ROe(e)});bP({target:BP,stat:!0,forced:!Pw},{useSetter:function(){PD=!0},useSimple:function(){PD=!1}});bP({target:"Object",stat:!0,forced:!Pw,sham:!Fw},{create:$Oe,defineProperty:EP,defineProperties:A7,getOwnPropertyDescriptor:yle});bP({target:"Object",stat:!0,forced:!Pw},{getOwnPropertyNames:vle});OOe();DOe(xx,BP);dle[qh]=!0;var GOe=eb,_le=GOe&&!!Symbol.for&&!!Symbol.keyFor,KOe=pa,WOe=dg,qOe=np,ZOe=zB,wle=tb,XOe=_le,VN=wle("string-to-symbol-registry"),YOe=wle("symbol-to-string-registry");KOe({target:"Symbol",stat:!0,forced:!XOe},{for:function(e){var t=ZOe(e);if(qOe(VN,t))return VN[t];var n=WOe("Symbol")(t);return VN[t]=n,YOe[n]=t,n}});var JOe=pa,eDe=np,tDe=RB,nDe=hP,rDe=tb,iDe=_le,vq=rDe("symbol-to-string-registry");JOe({target:"Symbol",stat:!0,forced:!iDe},{keyFor:function(e){if(!tDe(e))throw new TypeError(nDe(e)+" is not a symbol");if(eDe(vq,e))return vq[e]}});var sDe=ru,xq=nb,oDe=Nd,_q=t_,aDe=zB,wq=sDe([].push),lDe=function(e){if(oDe(e))return e;if(xq(e)){for(var t=e.length,n=[],r=0;r<t;r++){var s=e[r];typeof s=="string"?wq(n,s):(typeof s=="number"||_q(s)==="Number"||_q(s)==="String")&&wq(n,aDe(s))}var a=n.length,c=!0;return function(i,f){if(c)return c=!1,f;if(xq(this))return f;for(var g=0;g<a;g++)if(n[g]===i)return f}}},cDe=pa,ble=dg,Cle=Qz,uDe=cg,$B=ru,Sle=nu,bq=Nd,Cq=RB,Ble=xP,dDe=lDe,hDe=eb,fDe=String,Py=ble("JSON","stringify"),O3=$B(/./.exec),Sq=$B("".charAt),pDe=$B("".charCodeAt),ADe=$B("".replace),mDe=$B(1 .toString),gDe=/[\uD800-\uDFFF]/g,Bq=/^[\uD800-\uDBFF]$/,Eq=/^[\uDC00-\uDFFF]$/,Tq=!hDe||Sle(function(){var e=ble("Symbol")("stringify detection");return Py([e])!=="[null]"||Py({a:e})!=="{}"||Py(Object(e))!=="{}"}),Iq=Sle(function(){return Py("\uDF06\uD834")!=='"\\udf06\\ud834"'||Py("\uDEAD")!=='"\\udead"'}),yDe=function(e,t){var n=Ble(arguments),r=dDe(t);if(!(!bq(r)&&(e===void 0||Cq(e))))return n[1]=function(s,a){if(bq(r)&&(a=uDe(r,this,fDe(s),a)),!Cq(a))return a},Cle(Py,null,n)},vDe=function(e,t,n){var r=Sq(n,t-1),s=Sq(n,t+1);return O3(Bq,e)&&!O3(Eq,s)||O3(Eq,e)&&!O3(Bq,r)?"\\u"+mDe(pDe(e,0),16):e};Py&&cDe({target:"JSON",stat:!0,arity:3,forced:Tq||Iq},{stringify:function(e,t,n){var r=Ble(arguments),s=Cle(Tq?yDe:Py,null,r);return Iq&&typeof s=="string"?ADe(s,gDe,vDe):s}});var xDe=pa,_De=eb,wDe=nu,Ele=_P,bDe=g0,CDe=!_De||wDe(function(){Ele.f(1)});xDe({target:"Object",stat:!0,forced:CDe},{getOwnPropertySymbols:function(e){var t=Ele.f;return t?t(bDe(e)):[]}});var SDe=Pl;SDe("asyncIterator");var BDe=Pl;BDe("hasInstance");var EDe=Pl;EDe("isConcatSpreadable");var TDe=Pl;TDe("iterator");var IDe=Pl;IDe("match");var jDe=Pl;jDe("matchAll");var FDe=Pl;FDe("replace");var PDe=Pl;PDe("search");var kDe=Pl;kDe("species");var LDe=Pl;LDe("split");var MDe=Pl,NDe=ile;MDe("toPrimitive");NDe();var RDe=dg,ODe=Pl,DDe=rb;ODe("toStringTag");DDe(RDe("Symbol"),"Symbol");var UDe=Pl;UDe("unscopables");var zDe=tu,QDe=rb;QDe(zDe.JSON,"JSON",!0);var HDe=Wu,VDe=HDe.Symbol,ib={},LD=rf,$De=np,Tle=Function.prototype,GDe=LD&&Object.getOwnPropertyDescriptor,m7=$De(Tle,"name"),KDe=m7&&(function(){}).name==="something",WDe=m7&&(!LD||LD&&GDe(Tle,"name").configurable),qDe={EXISTS:m7,PROPER:KDe,CONFIGURABLE:WDe},ZDe=nu,XDe=!ZDe(function(){function e(){}return e.prototype.constructor=null,Object.getPrototypeOf(new e)!==e.prototype}),YDe=np,JDe=Nd,e6e=g0,t6e=yP,n6e=XDe,jq=t6e("IE_PROTO"),MD=Object,r6e=MD.prototype,Ile=n6e?MD.getPrototypeOf:function(e){var t=e6e(e);if(YDe(t,jq))return t[jq];var n=t.constructor;return JDe(n)&&t instanceof n?n.prototype:t instanceof MD?r6e:null},i6e=nu,s6e=Nd,o6e=A0,a6e=c7,Fq=Ile,l6e=wP,c6e=_u,ND=c6e("iterator"),jle=!1,Yg,$N,GN;[].keys&&(GN=[].keys(),"next"in GN?($N=Fq(Fq(GN)),$N!==Object.prototype&&(Yg=$N)):jle=!0);var u6e=!o6e(Yg)||i6e(function(){var e={};return Yg[ND].call(e)!==e});u6e?Yg={}:Yg=a6e(Yg);s6e(Yg[ND])||l6e(Yg,ND,function(){return this});var Fle={IteratorPrototype:Yg,BUGGY_SAFARI_ITERATORS:jle},d6e=Fle.IteratorPrototype,h6e=c7,f6e=NB,p6e=rb,A6e=ib,m6e=function(){return this},g6e=function(e,t,n,r){var s=t+" Iterator";return e.prototype=h6e(d6e,{next:f6e(+!r,n)}),p6e(e,s,!1,!0),A6e[s]=m6e,e},y6e=pa,v6e=cg,x6e=qDe,_6e=g6e,w6e=Ile,b6e=rb,Pq=wP,C6e=_u,kq=ib,S6e=Fle,B6e=x6e.PROPER,D3=S6e.BUGGY_SAFARI_ITERATORS,KN=C6e("iterator"),Lq="keys",U3="values",Mq="entries",E6e=function(){return this},Ple=function(e,t,n,r,s,a,c){_6e(n,t,r);var i=function(L){if(L===s&&T)return T;if(!D3&&L&&L in y)return y[L];switch(L){case Lq:return function(){return new n(this,L)};case U3:return function(){return new n(this,L)};case Mq:return function(){return new n(this,L)}}return function(){return new n(this)}},f=t+" Iterator",g=!1,y=e.prototype,b=y[KN]||y["@@iterator"]||s&&y[s],T=!D3&&b||i(s),S=t==="Array"&&y.entries||b,U,N,W;if(S&&(U=w6e(S.call(new e)),U!==Object.prototype&&U.next&&(b6e(U,f,!0,!0),kq[f]=E6e)),B6e&&s===U3&&b&&b.name!==U3&&(g=!0,T=function(){return v6e(b,this)}),s)if(N={values:i(U3),keys:a?T:i(Lq),entries:i(Mq)},c)for(W in N)(D3||g||!(W in y))&&Pq(y,W,N[W]);else y6e({target:t,proto:!0,forced:D3||g},N);return c&&y[KN]!==T&&Pq(y,KN,T,{name:s}),kq[t]=T,N},kle=function(e,t){return{value:e,done:t}},T6e=ug,Nq=ib,Lle=u7;rm.f;var I6e=Ple,z3=kle,Mle="Array Iterator",j6e=Lle.set,F6e=Lle.getterFor(Mle);I6e(Array,"Array",function(e,t){j6e(this,{type:Mle,target:T6e(e),index:0,kind:t})},function(){var e=F6e(this),t=e.target,n=e.index++;if(!t||n>=t.length)return e.target=null,z3(void 0,!0);switch(e.kind){case"keys":return z3(n,!1);case"values":return z3(t[n],!1)}return z3([n,t[n]],!1)},"values");Nq.Arguments=Nq.Array;var P6e={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0},k6e=P6e,L6e=tu,M6e=rb,Rq=ib;for(var WN in k6e)M6e(L6e[WN],WN),Rq[WN]=Rq.Array;var N6e=VDe,R6e=N6e,O6e=_u,D6e=rm.f,Oq=O6e("metadata"),Dq=Function.prototype;Dq[Oq]===void 0&&D6e(Dq,Oq,{value:null});var U6e=Pl;U6e("asyncDispose");var z6e=Pl;z6e("dispose");var Q6e=Pl;Q6e("metadata");var H6e=R6e,V6e=H6e,$6e=dg,G6e=ru,g7=$6e("Symbol"),K6e=g7.keyFor,W6e=G6e(g7.prototype.valueOf),Nle=g7.isRegisteredSymbol||function(e){try{return K6e(W6e(e))!==void 0}catch{return!1}},q6e=pa,Z6e=Nle;q6e({target:"Symbol",stat:!0},{isRegisteredSymbol:Z6e});var X6e=tb,Rle=dg,Y6e=ru,J6e=RB,eUe=_u,Nj=Rle("Symbol"),Uq=Nj.isWellKnownSymbol,Ole=Rle("Object","getOwnPropertyNames"),tUe=Y6e(Nj.prototype.valueOf),zq=X6e("wks");for(var qN=0,Qq=Ole(Nj),nUe=Qq.length;qN<nUe;qN++)try{var Hq=Qq[qN];J6e(Nj[Hq])&&eUe(Hq)}catch{}var Dle=function(e){if(Uq&&Uq(e))return!0;try{for(var t=tUe(e),n=0,r=Ole(zq),s=r.length;n<s;n++)if(zq[r[n]]==t)return!0}catch{}return!1},rUe=pa,iUe=Dle;rUe({target:"Symbol",stat:!0,forced:!0},{isWellKnownSymbol:iUe});var sUe=Pl;sUe("customMatcher");var oUe=Pl;oUe("observable");var aUe=pa,lUe=Nle;aUe({target:"Symbol",stat:!0,name:"isRegisteredSymbol"},{isRegistered:lUe});var cUe=pa,uUe=Dle;cUe({target:"Symbol",stat:!0,name:"isWellKnownSymbol",forced:!0},{isWellKnown:uUe});var dUe=Pl;dUe("matcher");var hUe=Pl;hUe("metadataKey");var fUe=Pl;fUe("patternMatch");var pUe=Pl;pUe("replaceAll");var AUe=V6e,mUe=AUe,gUe=mUe;const $1=uo(gUe);var y7=ru,yUe=pP,vUe=zB,xUe=Gz,_Ue=y7("".charAt),Vq=y7("".charCodeAt),wUe=y7("".slice),$q=function(e){return function(t,n){var r=vUe(xUe(t)),s=yUe(n),a=r.length,c,i;return s<0||s>=a?e?"":void 0:(c=Vq(r,s),c<55296||c>56319||s+1===a||(i=Vq(r,s+1))<56320||i>57343?e?_Ue(r,s):c:e?wUe(r,s,s+2):(c-55296<<10)+(i-56320)+65536)}},bUe={codeAt:$q(!1),charAt:$q(!0)},CUe=bUe.charAt,SUe=zB,Ule=u7,BUe=Ple,Gq=kle,zle="String Iterator",EUe=Ule.set,TUe=Ule.getterFor(zle);BUe(String,"String",function(e){EUe(this,{type:zle,string:SUe(e),index:0})},function(){var e=TUe(this),t=e.string,n=e.index,r;return n>=t.length?Gq(void 0,!0):(r=CUe(t,n),e.index+=r.length,Gq(r,!1))});var IUe=UB,Kq=Zz,jUe=$z,FUe=ib,PUe=_u,kUe=PUe("iterator"),v7=function(e){if(!jUe(e))return Kq(e,kUe)||Kq(e,"@@iterator")||FUe[IUe(e)]},LUe=v7,MUe=LUe,NUe=MUe,RUe=NUe,OUe=RUe,DUe=OUe,UUe=DUe,zUe=UUe,QUe=zUe;const Qle=uo(QUe);var HUe=rf,VUe=nb,$Ue=TypeError,GUe=Object.getOwnPropertyDescriptor,KUe=HUe&&!function(){if(this!==void 0)return!0;try{Object.defineProperty([],"length",{writable:!1}).length=1}catch(e){return e instanceof TypeError}}(),Hle=KUe?function(e,t){if(VUe(e)&&!GUe(e,"length").writable)throw new $Ue("Cannot set read only .length");return e.length=t}:function(e,t){return e.length=t},WUe=pa,qUe=g0,ZUe=n_,XUe=Hle,YUe=t7,JUe=nu,e8e=JUe(function(){return[].push.call({length:4294967296},1)!==4294967297}),t8e=function(){try{Object.defineProperty([],"length",{writable:!1}).push()}catch(e){return e instanceof TypeError}},n8e=e8e||!t8e();WUe({target:"Array",proto:!0,arity:1,forced:n8e},{push:function(e){var t=qUe(this),n=ZUe(t),r=arguments.length;YUe(n+r);for(var s=0;s<r;s++)t[n]=arguments[s],n++;return XUe(t,n),n}});var r8e=tu,i8e=Wu,r_=function(e,t){var n=i8e[e+"Prototype"],r=n&&n[t];if(r)return r;var s=r8e[e],a=s&&s.prototype;return a&&a[t]},s8e=r_,o8e=s8e("Array","push"),a8e=m0,l8e=o8e,ZN=Array.prototype,c8e=function(e){var t=e.push;return e===ZN||a8e(ZN,e)&&t===ZN.push?l8e:t},u8e=c8e,d8e=u8e,h8e=d8e,f8e=h8e,p8e=f8e,A8e=p8e,m8e=A8e;const g8e=uo(m8e);function y8e(e,t){var n=e==null?null:typeof $1<"u"&&Qle(e)||e["@@iterator"];if(n!=null){var r,s,a,c,i=[],f=!0,g=!1;try{if(a=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;f=!1}else for(;!(f=(r=a.call(n)).done)&&(g8e(i).call(i,r.value),i.length!==t);f=!0);}catch(y){g=!0,s=y}finally{try{if(!f&&n.return!=null&&(c=n.return(),Object(c)!==c))return}finally{if(g)throw s}}return i}}var v8e=pa,Wq=nb,x8e=i7,_8e=A0,qq=o7,w8e=n_,b8e=ug,C8e=DB,S8e=_u,B8e=AP,E8e=xP,T8e=B8e("slice"),I8e=S8e("species"),XN=Array,j8e=Math.max;v8e({target:"Array",proto:!0,forced:!T8e},{slice:function(e,t){var n=b8e(this),r=w8e(n),s=qq(e,r),a=qq(t===void 0?r:t,r),c,i,f;if(Wq(n)&&(c=n.constructor,x8e(c)&&(c===XN||Wq(c.prototype))?c=void 0:_8e(c)&&(c=c[I8e],c===null&&(c=void 0)),c===XN||c===void 0))return E8e(n,s,a);for(i=new(c===void 0?XN:c)(j8e(a-s,0)),f=0;s<a;s++,f++)s in n&&C8e(i,f,n[s]);return i.length=f,i}});var F8e=r_,P8e=F8e("Array","slice"),k8e=m0,L8e=P8e,YN=Array.prototype,M8e=function(e){var t=e.slice;return e===YN||k8e(YN,e)&&t===YN.slice?L8e:t},N8e=M8e,R8e=N8e,O8e=R8e,D8e=O8e,U8e=D8e,z8e=U8e,Q8e=z8e;const H8e=uo(Q8e);var V8e=cg,Zq=av,$8e=Zz,G8e=function(e,t,n){var r,s;Zq(e);try{if(r=$8e(e,"return"),!r){if(t==="throw")throw n;return n}r=V8e(r,e)}catch(a){s=!0,r=a}if(t==="throw")throw n;if(s)throw r;return Zq(r),n},K8e=av,W8e=G8e,q8e=function(e,t,n,r){try{return r?t(K8e(n)[0],n[1]):t(n)}catch(s){W8e(e,"throw",s)}},Z8e=_u,X8e=ib,Y8e=Z8e("iterator"),J8e=Array.prototype,eze=function(e){return e!==void 0&&(X8e.Array===e||J8e[Y8e]===e)},tze=cg,nze=qz,rze=av,ize=hP,sze=v7,oze=TypeError,aze=function(e,t){var n=arguments.length<2?sze(e):t;if(nze(n))return rze(tze(n,e));throw new oze(ize(e)+" is not iterable")},lze=e7,cze=cg,uze=g0,dze=q8e,hze=eze,fze=i7,pze=n_,Xq=DB,Aze=aze,mze=v7,Yq=Array,gze=function(e){var t=uze(e),n=fze(this),r=arguments.length,s=r>1?arguments[1]:void 0,a=s!==void 0;a&&(s=lze(s,r>2?arguments[2]:void 0));var c=mze(t),i=0,f,g,y,b,T,S;if(c&&!(this===Yq&&hze(c)))for(g=n?new this:[],b=Aze(t,c),T=b.next;!(y=cze(T,b)).done;i++)S=a?dze(b,s,[y.value,i],!0):y.value,Xq(g,i,S);else for(f=pze(t),g=n?new this(f):Yq(f);f>i;i++)S=a?s(t[i],i):t[i],Xq(g,i,S);return g.length=i,g},yze=_u,Vle=yze("iterator"),$le=!1;try{var vze=0,Jq={next:function(){return{done:!!vze++}},return:function(){$le=!0}};Jq[Vle]=function(){return this},Array.from(Jq,function(){throw 2})}catch{}var xze=function(e,t){try{if(!t&&!$le)return!1}catch{return!1}var n=!1;try{var r={};r[Vle]=function(){return{next:function(){return{done:n=!0}}}},e(r)}catch{}return n},_ze=pa,wze=gze,bze=xze,Cze=!bze(function(e){Array.from(e)});_ze({target:"Array",stat:!0,forced:Cze},{from:wze});var Sze=Wu,Bze=Sze.Array.from,Eze=Bze,Tze=Eze,Ize=Tze,jze=Ize,Fze=jze,Pze=Fze,kze=Pze;const Gle=uo(kze);function RD(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,r=Array(t);n<t;n++)r[n]=e[n];return r}function Kle(e,t){if(e){var n;if(typeof e=="string")return RD(e,t);var r=H8e(n={}.toString.call(e)).call(n,8,-1);return r==="Object"&&e.constructor&&(r=e.constructor.name),r==="Map"||r==="Set"?Gle(e):r==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?RD(e,t):void 0}}function Lze(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Um(e,t){return t5e(e)||y8e(e,t)||Kle(e,t)||Lze()}var Wle={exports:{}};/*!
  Copyright (c) 2018 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/(function(e){(function(){var t={}.hasOwnProperty;function n(){for(var r=[],s=0;s<arguments.length;s++){var a=arguments[s];if(a){var c=typeof a;if(c==="string"||c==="number")r.push(a);else if(Array.isArray(a)){if(a.length){var i=n.apply(null,a);i&&r.push(i)}}else if(c==="object")if(a.toString===Object.prototype.toString)for(var f in a)t.call(a,f)&&a[f]&&r.push(f);else r.push(a.toString())}}return r.join(" ")}e.exports?(n.default=n,e.exports=n):window.classNames=n})()})(Wle);var Mze=Wle.exports;const x7=uo(Mze);var qle={exports:{}},JN,eZ;function Nze(){if(eZ)return JN;eZ=1;var e="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED";return JN=e,JN}var e5,tZ;function Rze(){if(tZ)return e5;tZ=1;var e=Nze();function t(){}function n(){}return n.resetWarningCache=t,e5=function(){function r(c,i,f,g,y,b){if(b!==e){var T=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw T.name="Invariant Violation",T}}r.isRequired=r;function s(){return r}var a={array:r,bool:r,func:r,number:r,object:r,string:r,symbol:r,any:r,arrayOf:s,element:r,elementType:r,instanceOf:s,node:r,objectOf:s,oneOf:s,oneOfType:s,shape:s,exact:s,checkPropTypes:n,resetWarningCache:t};return a.PropTypes=a,a},e5}qle.exports=Rze()();var Oze=qle.exports;const Po=uo(Oze);var _7=Ti.createContext({scrollTo:function(){return 0},scrollToBottom:function(){return 0},scrollToEnd:function(){return 0},scrollToStart:function(){return 0},scrollToTop:function(){return 0}});_7.displayName="ScrollToBottomFunctionContext";function Dze(){return q.useContext(_7)}function Uze(){var e=Dze(),t=e.scrollToEnd;return t}var w7=Ti.createContext({atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom"});w7.displayName="ScrollToBottomState1Context";var b7=Ti.createContext({animating:!1,animatingToEnd:!1,sticky:!0});b7.displayName="ScrollToBottomState2Context";var C7=Ti.createContext({animating:!1,animatingToEnd:!1,atBottom:!0,atEnd:!0,atStart:!1,atTop:!0,mode:"bottom",sticky:!0});C7.displayName="ScrollToBottomStateContext";var nZ=[C7,w7,b7];function zze(e){return q.useContext(nZ[e]||nZ[0])}function Qze(){var e=zze(2),t=e.sticky;return[t]}var TP=Ti.createContext({offsetHeight:0,scrollHeight:0,setTarget:function(){return 0},styleToClassName:function(){return""}});TP.displayName="ScrollToBottomInternalContext";function Hze(){return q.useContext(TP)}function S7(){var e=Hze(),t=e.styleToClassName;return t}var Vze={backgroundColor:"rgba(0, 0, 0, .2)",borderRadius:10,borderWidth:0,bottom:5,cursor:"pointer",height:20,outline:0,position:"absolute",right:20,width:20,"&:hover":{backgroundColor:"rgba(0, 0, 0, .4)"},"&:active":{backgroundColor:"rgba(0, 0, 0, .6)"}},B7=function(e){var t=e.children,n=e.className,r=Qze(),s=Um(r,1),a=s[0],c=S7()(Vze),i=Uze();return!a&&Ti.createElement("button",{className:x7(c,(n||"")+""),onClick:i,type:"button"},t)};B7.defaultProps={children:void 0,className:""};B7.propTypes={children:Po.any,className:Po.string};var Zle={exports:{}},$ze=pa,Gze=rf,rZ=rm.f;$ze({target:"Object",stat:!0,forced:Object.defineProperty!==rZ,sham:!Gze},{defineProperty:rZ});var Kze=Wu,Xle=Kze.Object,Wze=Zle.exports=function(e,t,n){return Xle.defineProperty(e,t,n)};Xle.defineProperty.sham&&(Wze.sham=!0);var qze=Zle.exports,Zze=qze,Yle=Zze,Xze=Yle,Yze=Xze,Jze=Yze,e7e=Jze,t7e=e7e;const n7e=uo(t7e);var r7e=QB,i7e=r7e.f("iterator"),s7e=i7e,o7e=s7e,a7e=o7e,l7e=a7e,c7e=l7e,u7e=c7e,d7e=u7e;const h7e=uo(d7e);function US(e){"@babel/helpers - typeof";return US=typeof $1=="function"&&typeof h7e=="symbol"?function(t){return typeof t}:function(t){return t&&typeof $1=="function"&&t.constructor===$1&&t!==$1.prototype?"symbol":typeof t},US(e)}var f7e=QB,p7e=f7e.f("toPrimitive"),A7e=p7e,m7e=A7e,g7e=m7e,y7e=g7e,v7e=y7e,x7e=v7e,_7e=x7e;const w7e=uo(_7e);function b7e(e,t){if(US(e)!="object"||!e)return e;var n=e[w7e];if(n!==void 0){var r=n.call(e,t||"default");if(US(r)!="object")return r;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function C7e(e){var t=b7e(e,"string");return US(t)=="symbol"?t:t+""}function S7e(e,t,n){return(t=C7e(t))in e?n7e(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function B7e(e){if(Vae(e))return RD(e)}function E7e(e){if(typeof $1<"u"&&Qle(e)!=null||e["@@iterator"]!=null)return Gle(e)}function T7e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Co(e){return B7e(e)||E7e(e)||Kle(e)||T7e()}var Q3=function(e){return e&&e.Math==Math&&e},rp=Q3(typeof globalThis=="object"&&globalThis)||Q3(typeof window=="object"&&window)||Q3(typeof self=="object"&&self)||Q3(typeof Ra=="object"&&Ra)||function(){return this}()||Function("return this")(),E7={},im=function(e){try{return!!e()}catch{return!0}},I7e=im,i_=!I7e(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7}),Jle={},ece={}.propertyIsEnumerable,tce=Object.getOwnPropertyDescriptor,j7e=tce&&!ece.call({1:2},1);Jle.f=j7e?function(e){var t=tce(this,e);return!!t&&t.enumerable}:ece;var nce=function(e,t){return{enumerable:!(e&1),configurable:!(e&2),writable:!(e&4),value:t}},F7e={}.toString,T7=function(e){return F7e.call(e).slice(8,-1)},P7e=im,k7e=T7,L7e="".split,M7e=P7e(function(){return!Object("z").propertyIsEnumerable(0)})?function(e){return k7e(e)=="String"?L7e.call(e,""):Object(e)}:Object,IP=function(e){if(e==null)throw TypeError("Can't call method on "+e);return e},N7e=M7e,R7e=IP,I7=function(e){return N7e(R7e(e))},Xp=function(e){return typeof e=="function"},O7e=Xp,GB=function(e){return typeof e=="object"?e!==null:O7e(e)},t5=rp,D7e=Xp,U7e=function(e){return D7e(e)?e:void 0},jP=function(e,t){return arguments.length<2?U7e(t5[e]):t5[e]&&t5[e][t]},z7e=jP,Q7e=z7e("navigator","userAgent")||"",rce=rp,n5=Q7e,iZ=rce.process,sZ=rce.Deno,oZ=iZ&&iZ.versions||sZ&&sZ.version,aZ=oZ&&oZ.v8,Lm,Rj;aZ?(Lm=aZ.split("."),Rj=Lm[0]<4?1:Lm[0]+Lm[1]):n5&&(Lm=n5.match(/Edge\/(\d+)/),(!Lm||Lm[1]>=74)&&(Lm=n5.match(/Chrome\/(\d+)/),Lm&&(Rj=Lm[1])));var H7e=Rj&&+Rj,lZ=H7e,V7e=im,ice=!!Object.getOwnPropertySymbols&&!V7e(function(){var e=Symbol();return!String(e)||!(Object(e)instanceof Symbol)||!Symbol.sham&&lZ&&lZ<41}),$7e=ice,sce=$7e&&!Symbol.sham&&typeof Symbol.iterator=="symbol",G7e=Xp,K7e=jP,W7e=sce,oce=W7e?function(e){return typeof e=="symbol"}:function(e){var t=K7e("Symbol");return G7e(t)&&Object(e)instanceof t},q7e=function(e){try{return String(e)}catch{return"Object"}},Z7e=Xp,X7e=q7e,Y7e=function(e){if(Z7e(e))return e;throw TypeError(X7e(e)+" is not a function")},J7e=Y7e,ace=function(e,t){var n=e[t];return n==null?void 0:J7e(n)},r5=Xp,i5=GB,eQe=function(e,t){var n,r;if(t==="string"&&r5(n=e.toString)&&!i5(r=n.call(e))||r5(n=e.valueOf)&&!i5(r=n.call(e))||t!=="string"&&r5(n=e.toString)&&!i5(r=n.call(e)))return r;throw TypeError("Can't convert object to primitive value")},lce={exports:{}},cZ=rp,j7=function(e,t){try{Object.defineProperty(cZ,e,{value:t,configurable:!0,writable:!0})}catch{cZ[e]=t}return t},tQe=rp,nQe=j7,uZ="__core-js_shared__",rQe=tQe[uZ]||nQe(uZ,{}),F7=rQe,dZ=F7;(lce.exports=function(e,t){return dZ[e]||(dZ[e]=t!==void 0?t:{})})("versions",[]).push({version:"3.18.3",mode:"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"});var P7=lce.exports,iQe=IP,cce=function(e){return Object(iQe(e))},sQe=cce,oQe={}.hasOwnProperty,s_=Object.hasOwn||function(e,t){return oQe.call(sQe(e),t)},aQe=0,lQe=Math.random(),uce=function(e){return"Symbol("+String(e===void 0?"":e)+")_"+(++aQe+lQe).toString(36)},cQe=rp,uQe=P7,hZ=s_,dQe=uce,fZ=ice,hQe=sce,F2=uQe("wks"),IC=cQe.Symbol,fQe=hQe?IC:IC&&IC.withoutSetter||dQe,KB=function(e){return(!hZ(F2,e)||!(fZ||typeof F2[e]=="string"))&&(fZ&&hZ(IC,e)?F2[e]=IC[e]:F2[e]=fQe("Symbol."+e)),F2[e]},pZ=GB,AZ=oce,pQe=ace,AQe=eQe,mQe=KB,gQe=mQe("toPrimitive"),yQe=function(e,t){if(!pZ(e)||AZ(e))return e;var n=pQe(e,gQe),r;if(n){if(t===void 0&&(t="default"),r=n.call(e,t),!pZ(r)||AZ(r))return r;throw TypeError("Can't convert object to primitive value")}return t===void 0&&(t="number"),AQe(e,t)},vQe=yQe,xQe=oce,dce=function(e){var t=vQe(e,"string");return xQe(t)?t:String(t)},_Qe=rp,mZ=GB,OD=_Qe.document,wQe=mZ(OD)&&mZ(OD.createElement),hce=function(e){return wQe?OD.createElement(e):{}},bQe=i_,CQe=im,SQe=hce,fce=!bQe&&!CQe(function(){return Object.defineProperty(SQe("div"),"a",{get:function(){return 7}}).a!=7}),BQe=i_,EQe=Jle,TQe=nce,IQe=I7,jQe=dce,FQe=s_,PQe=fce,gZ=Object.getOwnPropertyDescriptor;E7.f=BQe?gZ:function(e,t){if(e=IQe(e),t=jQe(t),PQe)try{return gZ(e,t)}catch{}if(FQe(e,t))return TQe(!EQe.f.call(e,t),e[t])};var WB={},kQe=GB,lv=function(e){if(kQe(e))return e;throw TypeError(String(e)+" is not an object")},LQe=i_,MQe=fce,yZ=lv,NQe=dce,vZ=Object.defineProperty;WB.f=LQe?vZ:function(e,t,n){if(yZ(e),t=NQe(t),yZ(n),MQe)try{return vZ(e,t,n)}catch{}if("get"in n||"set"in n)throw TypeError("Accessors not supported");return"value"in n&&(e[t]=n.value),e};var RQe=i_,OQe=WB,DQe=nce,FP=RQe?function(e,t,n){return OQe.f(e,t,DQe(1,n))}:function(e,t,n){return e[t]=n,e},pce={exports:{}},UQe=Xp,DD=F7,zQe=Function.toString;UQe(DD.inspectSource)||(DD.inspectSource=function(e){return zQe.call(e)});var Ace=DD.inspectSource,QQe=rp,HQe=Xp,VQe=Ace,xZ=QQe.WeakMap,$Qe=HQe(xZ)&&/native code/.test(VQe(xZ)),GQe=P7,KQe=uce,_Z=GQe("keys"),mce=function(e){return _Z[e]||(_Z[e]=KQe(e))},k7={},WQe=$Qe,qQe=rp,ZQe=GB,XQe=FP,s5=s_,o5=F7,YQe=mce,JQe=k7,wZ="Object already initialized",e9e=qQe.WeakMap,Oj,zS,Dj,t9e=function(e){return Dj(e)?zS(e):Oj(e,{})},n9e=function(e){return function(t){var n;if(!ZQe(t)||(n=zS(t)).type!==e)throw TypeError("Incompatible receiver, "+e+" required");return n}};if(WQe||o5.state){var qv=o5.state||(o5.state=new e9e),r9e=qv.get,bZ=qv.has,i9e=qv.set;Oj=function(e,t){if(bZ.call(qv,e))throw new TypeError(wZ);return t.facade=e,i9e.call(qv,e,t),t},zS=function(e){return r9e.call(qv,e)||{}},Dj=function(e){return bZ.call(qv,e)}}else{var i1=YQe("state");JQe[i1]=!0,Oj=function(e,t){if(s5(e,i1))throw new TypeError(wZ);return t.facade=e,XQe(e,i1,t),t},zS=function(e){return s5(e,i1)?e[i1]:{}},Dj=function(e){return s5(e,i1)}}var gce={set:Oj,get:zS,has:Dj,enforce:t9e,getterFor:n9e},UD=i_,s9e=s_,yce=Function.prototype,o9e=UD&&Object.getOwnPropertyDescriptor,L7=s9e(yce,"name"),a9e=L7&&(function(){}).name==="something",l9e=L7&&(!UD||UD&&o9e(yce,"name").configurable),M7={EXISTS:L7,PROPER:a9e,CONFIGURABLE:l9e},c9e=rp,CZ=Xp,u9e=s_,SZ=FP,d9e=j7,h9e=Ace,vce=gce,f9e=M7.CONFIGURABLE,p9e=vce.get,A9e=vce.enforce,m9e=String(String).split("String");(pce.exports=function(e,t,n,r){var s=r?!!r.unsafe:!1,a=r?!!r.enumerable:!1,c=r?!!r.noTargetGet:!1,i=r&&r.name!==void 0?r.name:t,f;if(CZ(n)&&(String(i).slice(0,7)==="Symbol("&&(i="["+String(i).replace(/^Symbol\(([^)]*)\)/,"$1")+"]"),(!u9e(n,"name")||f9e&&n.name!==i)&&SZ(n,"name",i),f=A9e(n),f.source||(f.source=m9e.join(typeof i=="string"?i:""))),e===c9e){a?e[t]=n:d9e(t,n);return}else s?!c&&e[t]&&(a=!0):delete e[t];a?e[t]=n:SZ(e,t,n)})(Function.prototype,"toString",function(){return CZ(this)&&p9e(this).source||h9e(this)});var qB=pce.exports,xce={},g9e=Math.ceil,y9e=Math.floor,PP=function(e){var t=+e;return t!==t||t===0?0:(t>0?y9e:g9e)(t)},v9e=PP,x9e=Math.max,_9e=Math.min,w9e=function(e,t){var n=v9e(e);return n<0?x9e(n+t,0):_9e(n,t)},b9e=PP,C9e=Math.min,_ce=function(e){return e>0?C9e(b9e(e),9007199254740991):0},S9e=_ce,B9e=function(e){return S9e(e.length)},E9e=I7,T9e=w9e,I9e=B9e,BZ=function(e){return function(t,n,r){var s=E9e(t),a=I9e(s),c=T9e(r,a),i;if(e&&n!=n){for(;a>c;)if(i=s[c++],i!=i)return!0}else for(;a>c;c++)if((e||c in s)&&s[c]===n)return e||c||0;return!e&&-1}},j9e={includes:BZ(!0),indexOf:BZ(!1)},a5=s_,F9e=I7,P9e=j9e.indexOf,k9e=k7,wce=function(e,t){var n=F9e(e),r=0,s=[],a;for(a in n)!a5(k9e,a)&&a5(n,a)&&s.push(a);for(;t.length>r;)a5(n,a=t[r++])&&(~P9e(s,a)||s.push(a));return s},N7=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"],L9e=wce,M9e=N7,N9e=M9e.concat("length","prototype");xce.f=Object.getOwnPropertyNames||function(e){return L9e(e,N9e)};var bce={};bce.f=Object.getOwnPropertySymbols;var R9e=jP,O9e=xce,D9e=bce,U9e=lv,z9e=R9e("Reflect","ownKeys")||function(e){var t=O9e.f(U9e(e)),n=D9e.f;return n?t.concat(n(e)):t},Q9e=s_,H9e=z9e,V9e=E7,$9e=WB,G9e=function(e,t){for(var n=H9e(t),r=$9e.f,s=V9e.f,a=0;a<n.length;a++){var c=n[a];Q9e(e,c)||r(e,c,s(t,c))}},K9e=im,W9e=Xp,q9e=/#|\.prototype\./,ZB=function(e,t){var n=X9e[Z9e(e)];return n==J9e?!0:n==Y9e?!1:W9e(t)?K9e(t):!!t},Z9e=ZB.normalize=function(e){return String(e).replace(q9e,".").toLowerCase()},X9e=ZB.data={},Y9e=ZB.NATIVE="N",J9e=ZB.POLYFILL="P",eHe=ZB,l5=rp,tHe=E7.f,nHe=FP,rHe=qB,iHe=j7,sHe=G9e,oHe=eHe,aHe=function(e,t){var n=e.target,r=e.global,s=e.stat,a,c,i,f,g,y;if(r?c=l5:s?c=l5[n]||iHe(n,{}):c=(l5[n]||{}).prototype,c)for(i in t){if(g=t[i],e.noTargetGet?(y=tHe(c,i),f=y&&y.value):f=c[i],a=oHe(r?i:n+(s?".":"#")+i,e.forced),!a&&f!==void 0){if(typeof g==typeof f)continue;sHe(g,f)}(e.sham||f&&f.sham)&&nHe(g,"sham",!0),rHe(c,i,g,e)}},lHe=KB,cHe=lHe("toStringTag"),Cce={};Cce[cHe]="z";var R7=String(Cce)==="[object z]",uHe=R7,dHe=Xp,nI=T7,hHe=KB,fHe=hHe("toStringTag"),pHe=nI(function(){return arguments}())=="Arguments",AHe=function(e,t){try{return e[t]}catch{}},Sce=uHe?nI:function(e){var t,n,r;return e===void 0?"Undefined":e===null?"Null":typeof(n=AHe(t=Object(e),fHe))=="string"?n:pHe?nI(t):(r=nI(t))=="Object"&&dHe(t.callee)?"Arguments":r},mHe=Sce,kP=function(e){if(mHe(e)==="Symbol")throw TypeError("Cannot convert a Symbol value to a string");return String(e)},gHe=lv,Bce=function(){var e=gHe(this),t="";return e.global&&(t+="g"),e.ignoreCase&&(t+="i"),e.multiline&&(t+="m"),e.dotAll&&(t+="s"),e.unicode&&(t+="u"),e.sticky&&(t+="y"),t},O7={},Ece=im,yHe=rp,Tce=yHe.RegExp;O7.UNSUPPORTED_Y=Ece(function(){var e=Tce("a","y");return e.lastIndex=2,e.exec("abcd")!=null});O7.BROKEN_CARET=Ece(function(){var e=Tce("^r","gy");return e.lastIndex=2,e.exec("str")!=null});var vHe=wce,xHe=N7,_He=Object.keys||function(e){return vHe(e,xHe)},wHe=i_,bHe=WB,CHe=lv,SHe=_He,BHe=wHe?Object.defineProperties:function(e,t){CHe(e);for(var n=SHe(t),r=n.length,s=0,a;r>s;)bHe.f(e,a=n[s++],t[a]);return e},EHe=jP,THe=EHe("document","documentElement"),IHe=lv,jHe=BHe,EZ=N7,FHe=k7,PHe=THe,kHe=hce,LHe=mce,TZ=">",IZ="<",zD="prototype",QD="script",Ice=LHe("IE_PROTO"),c5=function(){},jce=function(e){return IZ+QD+TZ+e+IZ+"/"+QD+TZ},jZ=function(e){e.write(jce("")),e.close();var t=e.parentWindow.Object;return e=null,t},MHe=function(){var e=kHe("iframe"),t="java"+QD+":",n;return e.style.display="none",PHe.appendChild(e),e.src=String(t),n=e.contentWindow.document,n.open(),n.write(jce("document.F=Object")),n.close(),n.F},H3,rI=function(){try{H3=new ActiveXObject("htmlfile")}catch{}rI=typeof document<"u"?document.domain&&H3?jZ(H3):MHe():jZ(H3);for(var e=EZ.length;e--;)delete rI[zD][EZ[e]];return rI()};FHe[Ice]=!0;var NHe=Object.create||function(e,t){var n;return e!==null?(c5[zD]=IHe(e),n=new c5,c5[zD]=null,n[Ice]=e):n=rI(),t===void 0?n:jHe(n,t)},RHe=im,OHe=rp,DHe=OHe.RegExp,UHe=RHe(function(){var e=DHe(".","s");return!(e.dotAll&&e.exec(`
`)&&e.flags==="s")}),zHe=im,QHe=rp,HHe=QHe.RegExp,VHe=zHe(function(){var e=HHe("(?<a>b)","g");return e.exec("b").groups.a!=="b"||"b".replace(e,"$<a>c")!=="bc"}),$He=kP,GHe=Bce,FZ=O7,KHe=P7,WHe=NHe,qHe=gce.get,ZHe=UHe,XHe=VHe,Uj=RegExp.prototype.exec,YHe=KHe("native-string-replace",String.prototype.replace),HD=Uj,VD=function(){var e=/a/,t=/b*/g;return Uj.call(e,"a"),Uj.call(t,"a"),e.lastIndex!==0||t.lastIndex!==0}(),Fce=FZ.UNSUPPORTED_Y||FZ.BROKEN_CARET,$D=/()??/.exec("")[1]!==void 0,JHe=VD||$D||Fce||ZHe||XHe;JHe&&(HD=function(e){var t=this,n=qHe(t),r=$He(e),s=n.raw,a,c,i,f,g,y,b;if(s)return s.lastIndex=t.lastIndex,a=HD.call(s,r),t.lastIndex=s.lastIndex,a;var T=n.groups,S=Fce&&t.sticky,U=GHe.call(t),N=t.source,W=0,L=r;if(S&&(U=U.replace("y",""),U.indexOf("g")===-1&&(U+="g"),L=r.slice(t.lastIndex),t.lastIndex>0&&(!t.multiline||t.multiline&&r.charAt(t.lastIndex-1)!==`
`)&&(N="(?: "+N+")",L=" "+L,W++),c=new RegExp("^(?:"+N+")",U)),$D&&(c=new RegExp("^"+N+"$(?!\\s)",U)),VD&&(i=t.lastIndex),f=Uj.call(S?c:t,L),S?f?(f.input=f.input.slice(W),f[0]=f[0].slice(W),f.index=t.lastIndex,t.lastIndex+=f[0].length):t.lastIndex=0:VD&&f&&(t.lastIndex=t.global?f.index+f[0].length:i),$D&&f&&f.length>1&&YHe.call(f[0],c,function(){for(g=1;g<arguments.length-2;g++)arguments[g]===void 0&&(f[g]=void 0)}),f&&T)for(f.groups=y=WHe(null),g=0;g<T.length;g++)b=T[g],y[b[0]]=f[b[1]];return f});var D7=HD,eVe=aHe,PZ=D7;eVe({target:"RegExp",proto:!0,forced:/./.exec!==PZ},{exec:PZ});var kZ=qB,tVe=D7,LZ=im,Pce=KB,nVe=FP,rVe=Pce("species"),u5=RegExp.prototype,iVe=function(e,t,n,r){var s=Pce(e),a=!LZ(function(){var g={};return g[s]=function(){return 7},""[e](g)!=7}),c=a&&!LZ(function(){var g=!1,y=/a/;return e==="split"&&(y={},y.constructor={},y.constructor[rVe]=function(){return y},y.flags="",y[s]=/./[s]),y.exec=function(){return g=!0,null},y[s](""),!g});if(!a||!c||n){var i=/./[s],f=t(s,""[e],function(g,y,b,T,S){var U=y.exec;return U===tVe||U===u5.exec?a&&!S?{done:!0,value:i.call(y,b,T)}:{done:!0,value:g.call(b,y,T)}:{done:!1}});kZ(String.prototype,e,f[0]),kZ(u5,s,f[1])}r&&nVe(u5[s],"sham",!0)},sVe=PP,oVe=kP,aVe=IP,MZ=function(e){return function(t,n){var r=oVe(aVe(t)),s=sVe(n),a=r.length,c,i;return s<0||s>=a?e?"":void 0:(c=r.charCodeAt(s),c<55296||c>56319||s+1===a||(i=r.charCodeAt(s+1))<56320||i>57343?e?r.charAt(s):c:e?r.slice(s,s+2):(c-55296<<10)+(i-56320)+65536)}},lVe={codeAt:MZ(!1),charAt:MZ(!0)},cVe=lVe.charAt,uVe=function(e,t,n){return t+(n?cVe(e,t).length:1)},dVe=cce,hVe=Math.floor,fVe="".replace,pVe=/\$([$&'`]|\d{1,2}|<[^>]*>)/g,AVe=/\$([$&'`]|\d{1,2})/g,mVe=function(e,t,n,r,s,a){var c=n+e.length,i=r.length,f=AVe;return s!==void 0&&(s=dVe(s),f=pVe),fVe.call(a,f,function(g,y){var b;switch(y.charAt(0)){case"$":return"$";case"&":return e;case"`":return t.slice(0,n);case"'":return t.slice(c);case"<":b=s[y.slice(1,-1)];break;default:var T=+y;if(T===0)return g;if(T>i){var S=hVe(T/10);return S===0?g:S<=i?r[S-1]===void 0?y.charAt(1):r[S-1]+y.charAt(1):g}b=r[T-1]}return b===void 0?"":b})},gVe=lv,yVe=Xp,vVe=T7,xVe=D7,_Ve=function(e,t){var n=e.exec;if(yVe(n)){var r=n.call(e,t);return r!==null&&gVe(r),r}if(vVe(e)==="RegExp")return xVe.call(e,t);throw TypeError("RegExp#exec called on incompatible receiver")},wVe=iVe,bVe=im,CVe=lv,SVe=Xp,BVe=PP,EVe=_ce,s1=kP,TVe=IP,IVe=uVe,jVe=ace,FVe=mVe,PVe=_Ve,kVe=KB,GD=kVe("replace"),LVe=Math.max,MVe=Math.min,NVe=function(e){return e===void 0?e:String(e)},RVe=function(){return"a".replace(/./,"$0")==="$0"}(),NZ=function(){return/./[GD]?/./[GD]("a","$0")==="":!1}(),OVe=!bVe(function(){var e=/./;return e.exec=function(){var t=[];return t.groups={a:"7"},t},"".replace(e,"$<a>")!=="7"});wVe("replace",function(e,t,n){var r=NZ?"$":"$0";return[function(s,a){var c=TVe(this),i=s==null?void 0:jVe(s,GD);return i?i.call(s,c,a):t.call(s1(c),s,a)},function(s,a){var c=CVe(this),i=s1(s);if(typeof a=="string"&&a.indexOf(r)===-1&&a.indexOf("$<")===-1){var f=n(t,c,i,a);if(f.done)return f.value}var g=SVe(a);g||(a=s1(a));var y=c.global;if(y){var b=c.unicode;c.lastIndex=0}for(var T=[];;){var S=PVe(c,i);if(S===null||(T.push(S),!y))break;var U=s1(S[0]);U===""&&(c.lastIndex=IVe(i,EVe(c.lastIndex),b))}for(var N="",W=0,L=0;L<T.length;L++){S=T[L];for(var Q=s1(S[0]),V=LVe(MVe(BVe(S.index),i.length),0),Z=[],ne=1;ne<S.length;ne++)Z.push(NVe(S[ne]));var Y=S.groups;if(g){var le=[Q].concat(Z,V,i);Y!==void 0&&le.push(Y);var pe=s1(a.apply(void 0,le))}else pe=FVe(Q,i,V,Z,Y,a);V>=W&&(N+=i.slice(W,V)+pe,W=V+Q.length)}return N+i.slice(W)}]},!OVe||!RVe||NZ);var P2=tu,DVe=Kz,UVe=t_,V3=function(e){return DVe.slice(0,e.length)===e},zVe=function(){return V3("Bun/")?"BUN":V3("Cloudflare-Workers")?"CLOUDFLARE":V3("Deno/")?"DENO":V3("Node.js/")?"NODE":P2.Bun&&typeof Bun.version=="string"?"BUN":P2.Deno&&typeof Deno.version=="object"?"DENO":UVe(P2.process)==="process"?"NODE":P2.window&&P2.document?"BROWSER":"REST"}(),QVe=TypeError,HVe=function(e,t){if(e<t)throw new QVe("Not enough arguments");return e},kce=tu,VVe=Qz,$Ve=Nd,GVe=zVe,KVe=Kz,WVe=xP,qVe=HVe,ZVe=kce.Function,XVe=/MSIE .\./.test(KVe)||GVe==="BUN"&&function(){var e=kce.Bun.version.split(".");return e.length<3||e[0]==="0"&&(e[1]<3||e[1]==="3"&&e[2]==="0")}(),Lce=function(e,t){var n=t?2:1;return XVe?function(r,s){var a=qVe(arguments.length,1)>n,c=$Ve(r)?r:ZVe(r),i=a?WVe(arguments,n):[],f=a?function(){VVe(c,this,i)}:c;return t?e(f,s):e(f)}:e},YVe=pa,Mce=tu,JVe=Lce,RZ=JVe(Mce.setInterval,!0);YVe({global:!0,bind:!0,forced:Mce.setInterval!==RZ},{setInterval:RZ});var e$e=pa,Nce=tu,t$e=Lce,OZ=t$e(Nce.setTimeout,!0);e$e({global:!0,bind:!0,forced:Nce.setTimeout!==OZ},{setTimeout:OZ});var n$e=Wu,r$e=n$e.setInterval,i$e=r$e;const s$e=uo(i$e);var o$e=nu,Rce=function(e,t){var n=[][e];return!!n&&o$e(function(){n.call(null,t||function(){return 1},1)})},a$e=pa,l$e=Hz,c$e=Xae.indexOf,u$e=Rce,KD=l$e([].indexOf),Oce=!!KD&&1/KD([1],1,-0)<0,d$e=Oce||!u$e("indexOf");a$e({target:"Array",proto:!0,forced:d$e},{indexOf:function(e){var t=arguments.length>1?arguments[1]:void 0;return Oce?KD(this,e,t)||0:c$e(this,e,t)}});var h$e=r_,f$e=h$e("Array","indexOf"),p$e=m0,A$e=f$e,d5=Array.prototype,m$e=function(e){var t=e.indexOf;return e===d5||p$e(d5,e)&&t===d5.indexOf?A$e:t},g$e=m$e,y$e=g$e,v$e=y$e;const x$e=uo(v$e);var DZ=hP,_$e=TypeError,w$e=function(e,t){if(!delete e[t])throw new _$e("Cannot delete property "+DZ(t)+" of "+DZ(e))},b$e=pa,C$e=g0,S$e=o7,B$e=pP,E$e=n_,T$e=Hle,I$e=t7,j$e=s7,F$e=DB,h5=w$e,P$e=AP,k$e=P$e("splice"),L$e=Math.max,M$e=Math.min;b$e({target:"Array",proto:!0,forced:!k$e},{splice:function(e,t){var n=C$e(this),r=E$e(n),s=S$e(e,r),a=arguments.length,c,i,f,g,y,b;for(a===0?c=i=0:a===1?(c=0,i=r-s):(c=a-2,i=M$e(L$e(B$e(t),0),r-s)),I$e(r+c-i),f=j$e(n,i),g=0;g<i;g++)y=s+g,y in n&&F$e(f,g,n[y]);if(f.length=i,c<i){for(g=s;g<r-i;g++)y=g+i,b=g+c,y in n?n[b]=n[y]:h5(n,b);for(g=r;g>r-i+c;g--)h5(n,g-1)}else if(c>i)for(g=r-i;g>s;g--)y=g+i-1,b=g+c-1,y in n?n[b]=n[y]:h5(n,b);for(g=0;g<c;g++)n[g+s]=arguments[g+2];return T$e(n,r-i+c),f}});var N$e=r_,R$e=N$e("Array","splice"),O$e=m0,D$e=R$e,f5=Array.prototype,U$e=function(e){var t=e.splice;return e===f5||O$e(f5,e)&&t===f5.splice?D$e:t},z$e=U$e,Q$e=z$e,H$e=Q$e;const V$e=uo(H$e);var $$e=r_,G$e=$$e("Array","concat"),K$e=m0,W$e=G$e,p5=Array.prototype,q$e=function(e){var t=e.concat;return e===p5||K$e(p5,e)&&t===p5.concat?W$e:t},Z$e=q$e,X$e=Z$e,Y$e=X$e;const Bl=uo(Y$e);var J$e=pa,eGe=ru,Dce=Date,tGe=eGe(Dce.prototype.getTime);J$e({target:"Date",stat:!0},{now:function(){return tGe(new Dce)}});var nGe=Wu,rGe=nGe.Date.now,iGe=rGe,sGe=iGe,oGe=sGe;const ky=uo(oGe);var aGe=d7.forEach,lGe=Rce,cGe=lGe("forEach"),uGe=cGe?[].forEach:function(e){return aGe(this,e,arguments.length>1?arguments[1]:void 0)},dGe=pa,UZ=uGe;dGe({target:"Array",proto:!0,forced:[].forEach!==UZ},{forEach:UZ});var hGe=r_,fGe=hGe("Array","forEach"),pGe=fGe,AGe=pGe,mGe=UB,gGe=np,yGe=m0,vGe=AGe,A5=Array.prototype,xGe={DOMTokenList:!0,NodeList:!0},_Ge=function(e){var t=e.forEach;return e===A5||yGe(A5,e)&&t===A5.forEach||gGe(xGe,mGe(e))?vGe:t},wGe=_Ge;const zj=uo(wGe);var bGe=pa,CGe=g0,Uce=l7,SGe=nu,BGe=SGe(function(){Uce(1)});bGe({target:"Object",stat:!0,forced:BGe},{keys:function(e){return Uce(CGe(e))}});var EGe=Wu,TGe=EGe.Object.keys,IGe=TGe,jGe=IGe,FGe=jGe;const PGe=uo(FGe);var kGe=Wu,LGe=kGe.Object.getOwnPropertySymbols,MGe=LGe,NGe=MGe,RGe=NGe;const zZ=uo(RGe);var OGe=pa,DGe=d7.filter,UGe=AP,zGe=UGe("filter");OGe({target:"Array",proto:!0,forced:!zGe},{filter:function(e){return DGe(this,e,arguments.length>1?arguments[1]:void 0)}});var QGe=r_,HGe=QGe("Array","filter"),VGe=m0,$Ge=HGe,m5=Array.prototype,GGe=function(e){var t=e.filter;return e===m5||VGe(m5,e)&&t===m5.filter?$Ge:t},KGe=GGe,WGe=KGe,qGe=WGe;const ZGe=uo(qGe);var zce={exports:{}},XGe=pa,YGe=nu,JGe=ug,Qce=MB.f,Hce=rf,eKe=!Hce||YGe(function(){Qce(1)});XGe({target:"Object",stat:!0,forced:eKe,sham:!Hce},{getOwnPropertyDescriptor:function(e,t){return Qce(JGe(e),t)}});var tKe=Wu,Vce=tKe.Object,nKe=zce.exports=function(e,t){return Vce.getOwnPropertyDescriptor(e,t)};Vce.getOwnPropertyDescriptor.sham&&(nKe.sham=!0);var rKe=zce.exports,iKe=rKe,sKe=iKe,oKe=sKe;const $ce=uo(oKe);var aKe=dg,lKe=ru,cKe=vP,uKe=_P,dKe=av,hKe=lKe([].concat),fKe=aKe("Reflect","ownKeys")||function(e){var t=cKe.f(dKe(e)),n=uKe.f;return n?hKe(t,n(e)):t},pKe=pa,AKe=rf,mKe=fKe,gKe=ug,yKe=MB,vKe=DB;pKe({target:"Object",stat:!0,sham:!AKe},{getOwnPropertyDescriptors:function(e){for(var t=gKe(e),n=yKe.f,r=mKe(t),s={},a=0,c,i;r.length>a;)i=n(t,c=r[a++]),i!==void 0&&vKe(s,c,i);return s}});var xKe=Wu,_Ke=xKe.Object.getOwnPropertyDescriptors,wKe=_Ke,bKe=wKe,CKe=bKe;const QZ=uo(CKe);var Gce={exports:{}},SKe=pa,BKe=rf,HZ=mP.f;SKe({target:"Object",stat:!0,forced:Object.defineProperties!==HZ,sham:!BKe},{defineProperties:HZ});var EKe=Wu,Kce=EKe.Object,TKe=Gce.exports=function(e,t){return Kce.defineProperties(e,t)};Kce.defineProperties.sham&&(TKe.sham=!0);var IKe=Gce.exports,jKe=IKe,FKe=jKe,PKe=FKe;const kKe=uo(PKe);var LKe=Yle;const MKe=uo(LKe);var NKe=!1;function RKe(e){if(e.sheet)return e.sheet;for(var t=0;t<document.styleSheets.length;t++)if(document.styleSheets[t].ownerNode===e)return document.styleSheets[t]}function OKe(e){var t=document.createElement("style");return t.setAttribute("data-emotion",e.key),e.nonce!==void 0&&t.setAttribute("nonce",e.nonce),t.appendChild(document.createTextNode("")),t.setAttribute("data-s",""),t}var DKe=function(){function e(n){var r=this;this._insertTag=function(s){var a;r.tags.length===0?r.insertionPoint?a=r.insertionPoint.nextSibling:r.prepend?a=r.container.firstChild:a=r.before:a=r.tags[r.tags.length-1].nextSibling,r.container.insertBefore(s,a),r.tags.push(s)},this.isSpeedy=n.speedy===void 0?!NKe:n.speedy,this.tags=[],this.ctr=0,this.nonce=n.nonce,this.key=n.key,this.container=n.container,this.prepend=n.prepend,this.insertionPoint=n.insertionPoint,this.before=null}var t=e.prototype;return t.hydrate=function(n){n.forEach(this._insertTag)},t.insert=function(n){this.ctr%(this.isSpeedy?65e3:1)===0&&this._insertTag(OKe(this));var r=this.tags[this.tags.length-1];if(this.isSpeedy){var s=RKe(r);try{s.insertRule(n,s.cssRules.length)}catch{}}else r.appendChild(document.createTextNode(n));this.ctr++},t.flush=function(){this.tags.forEach(function(n){var r;return(r=n.parentNode)==null?void 0:r.removeChild(n)}),this.tags=[],this.ctr=0},e}(),bd="-ms-",Qj="-moz-",Ko="-webkit-",Wce="comm",U7="rule",z7="decl",UKe="@import",qce="@keyframes",zKe="@layer",QKe=Math.abs,LP=String.fromCharCode,HKe=Object.assign;function VKe(e,t){return Hu(e,0)^45?(((t<<2^Hu(e,0))<<2^Hu(e,1))<<2^Hu(e,2))<<2^Hu(e,3):0}function Zce(e){return e.trim()}function $Ke(e,t){return(e=t.exec(e))?e[0]:e}function Wo(e,t,n){return e.replace(t,n)}function WD(e,t){return e.indexOf(t)}function Hu(e,t){return e.charCodeAt(t)|0}function QS(e,t,n){return e.slice(t,n)}function zm(e){return e.length}function Q7(e){return e.length}function $3(e,t){return t.push(e),e}function GKe(e,t){return e.map(t).join("")}var MP=1,Lw=1,Xce=0,tf=0,Mc=0,sb="";function NP(e,t,n,r,s,a,c){return{value:e,root:t,parent:n,type:r,props:s,children:a,line:MP,column:Lw,length:c,return:""}}function k2(e,t){return HKe(NP("",null,null,"",null,null,0),e,{length:-e.length},t)}function KKe(){return Mc}function WKe(){return Mc=tf>0?Hu(sb,--tf):0,Lw--,Mc===10&&(Lw=1,MP--),Mc}function Xf(){return Mc=tf<Xce?Hu(sb,tf++):0,Lw++,Mc===10&&(Lw=1,MP++),Mc}function Ym(){return Hu(sb,tf)}function iI(){return tf}function XB(e,t){return QS(sb,e,t)}function HS(e){switch(e){case 0:case 9:case 10:case 13:case 32:return 5;case 33:case 43:case 44:case 47:case 62:case 64:case 126:case 59:case 123:case 125:return 4;case 58:return 3;case 34:case 39:case 40:case 91:return 2;case 41:case 93:return 1}return 0}function Yce(e){return MP=Lw=1,Xce=zm(sb=e),tf=0,[]}function Jce(e){return sb="",e}function sI(e){return Zce(XB(tf-1,qD(e===91?e+2:e===40?e+1:e)))}function qKe(e){for(;(Mc=Ym())&&Mc<33;)Xf();return HS(e)>2||HS(Mc)>3?"":" "}function ZKe(e,t){for(;--t&&Xf()&&!(Mc<48||Mc>102||Mc>57&&Mc<65||Mc>70&&Mc<97););return XB(e,iI()+(t<6&&Ym()==32&&Xf()==32))}function qD(e){for(;Xf();)switch(Mc){case e:return tf;case 34:case 39:e!==34&&e!==39&&qD(Mc);break;case 40:e===41&&qD(e);break;case 92:Xf();break}return tf}function XKe(e,t){for(;Xf()&&e+Mc!==57&&!(e+Mc===84&&Ym()===47););return"/*"+XB(t,tf-1)+"*"+LP(e===47?e:Xf())}function YKe(e){for(;!HS(Ym());)Xf();return XB(e,tf)}function JKe(e){return Jce(oI("",null,null,null,[""],e=Yce(e),0,[0],e))}function oI(e,t,n,r,s,a,c,i,f){for(var g=0,y=0,b=c,T=0,S=0,U=0,N=1,W=1,L=1,Q=0,V="",Z=s,ne=a,Y=r,le=V;W;)switch(U=Q,Q=Xf()){case 40:if(U!=108&&Hu(le,b-1)==58){WD(le+=Wo(sI(Q),"&","&\f"),"&\f")!=-1&&(L=-1);break}case 34:case 39:case 91:le+=sI(Q);break;case 9:case 10:case 13:case 32:le+=qKe(U);break;case 92:le+=ZKe(iI()-1,7);continue;case 47:switch(Ym()){case 42:case 47:$3(eWe(XKe(Xf(),iI()),t,n),f);break;default:le+="/"}break;case 123*N:i[g++]=zm(le)*L;case 125*N:case 59:case 0:switch(Q){case 0:case 125:W=0;case 59+y:L==-1&&(le=Wo(le,/\f/g,"")),S>0&&zm(le)-b&&$3(S>32?$Z(le+";",r,n,b-1):$Z(Wo(le," ","")+";",r,n,b-2),f);break;case 59:le+=";";default:if($3(Y=VZ(le,t,n,g,y,s,i,V,Z=[],ne=[],b),a),Q===123)if(y===0)oI(le,t,Y,Y,Z,a,b,i,ne);else switch(T===99&&Hu(le,3)===110?100:T){case 100:case 108:case 109:case 115:oI(e,Y,Y,r&&$3(VZ(e,Y,Y,0,0,s,i,V,s,Z=[],b),ne),s,ne,b,i,r?Z:ne);break;default:oI(le,Y,Y,Y,[""],ne,0,i,ne)}}g=y=S=0,N=L=1,V=le="",b=c;break;case 58:b=1+zm(le),S=U;default:if(N<1){if(Q==123)--N;else if(Q==125&&N++==0&&WKe()==125)continue}switch(le+=LP(Q),Q*N){case 38:L=y>0?1:(le+="\f",-1);break;case 44:i[g++]=(zm(le)-1)*L,L=1;break;case 64:Ym()===45&&(le+=sI(Xf())),T=Ym(),y=b=zm(V=le+=YKe(iI())),Q++;break;case 45:U===45&&zm(le)==2&&(N=0)}}return a}function VZ(e,t,n,r,s,a,c,i,f,g,y){for(var b=s-1,T=s===0?a:[""],S=Q7(T),U=0,N=0,W=0;U<r;++U)for(var L=0,Q=QS(e,b+1,b=QKe(N=c[U])),V=e;L<S;++L)(V=Zce(N>0?T[L]+" "+Q:Wo(Q,/&\f/g,T[L])))&&(f[W++]=V);return NP(e,t,n,s===0?U7:i,f,g,y)}function eWe(e,t,n){return NP(e,t,n,Wce,LP(KKe()),QS(e,2,-2),0)}function $Z(e,t,n,r){return NP(e,t,n,z7,QS(e,0,r),QS(e,r+1,-1),r)}function iw(e,t){for(var n="",r=Q7(e),s=0;s<r;s++)n+=t(e[s],s,e,t)||"";return n}function tWe(e,t,n,r){switch(e.type){case zKe:if(e.children.length)break;case UKe:case z7:return e.return=e.return||e.value;case Wce:return"";case qce:return e.return=e.value+"{"+iw(e.children,r)+"}";case U7:e.value=e.props.join(",")}return zm(n=iw(e.children,r))?e.return=e.value+"{"+n+"}":""}function nWe(e){var t=Q7(e);return function(n,r,s,a){for(var c="",i=0;i<t;i++)c+=e[i](n,r,s,a)||"";return c}}function rWe(e){return function(t){t.root||(t=t.return)&&e(t)}}function iWe(e){var t=Object.create(null);return function(n){return t[n]===void 0&&(t[n]=e(n)),t[n]}}var sWe=function(e,t,n){for(var r=0,s=0;r=s,s=Ym(),r===38&&s===12&&(t[n]=1),!HS(s);)Xf();return XB(e,tf)},oWe=function(e,t){var n=-1,r=44;do switch(HS(r)){case 0:r===38&&Ym()===12&&(t[n]=1),e[n]+=sWe(tf-1,t,n);break;case 2:e[n]+=sI(r);break;case 4:if(r===44){e[++n]=Ym()===58?"&\f":"",t[n]=e[n].length;break}default:e[n]+=LP(r)}while(r=Xf());return e},aWe=function(e,t){return Jce(oWe(Yce(e),t))},GZ=new WeakMap,lWe=function(e){if(!(e.type!=="rule"||!e.parent||e.length<1)){for(var t=e.value,n=e.parent,r=e.column===n.column&&e.line===n.line;n.type!=="rule";)if(n=n.parent,!n)return;if(!(e.props.length===1&&t.charCodeAt(0)!==58&&!GZ.get(n))&&!r){GZ.set(e,!0);for(var s=[],a=aWe(t,s),c=n.props,i=0,f=0;i<a.length;i++)for(var g=0;g<c.length;g++,f++)e.props[f]=s[i]?a[i].replace(/&\f/g,c[g]):c[g]+" "+a[i]}}},cWe=function(e){if(e.type==="decl"){var t=e.value;t.charCodeAt(0)===108&&t.charCodeAt(2)===98&&(e.return="",e.value="")}};function eue(e,t){switch(VKe(e,t)){case 5103:return Ko+"print-"+e+e;case 5737:case 4201:case 3177:case 3433:case 1641:case 4457:case 2921:case 5572:case 6356:case 5844:case 3191:case 6645:case 3005:case 6391:case 5879:case 5623:case 6135:case 4599:case 4855:case 4215:case 6389:case 5109:case 5365:case 5621:case 3829:return Ko+e+e;case 5349:case 4246:case 4810:case 6968:case 2756:return Ko+e+Qj+e+bd+e+e;case 6828:case 4268:return Ko+e+bd+e+e;case 6165:return Ko+e+bd+"flex-"+e+e;case 5187:return Ko+e+Wo(e,/(\w+).+(:[^]+)/,Ko+"box-$1$2"+bd+"flex-$1$2")+e;case 5443:return Ko+e+bd+"flex-item-"+Wo(e,/flex-|-self/,"")+e;case 4675:return Ko+e+bd+"flex-line-pack"+Wo(e,/align-content|flex-|-self/,"")+e;case 5548:return Ko+e+bd+Wo(e,"shrink","negative")+e;case 5292:return Ko+e+bd+Wo(e,"basis","preferred-size")+e;case 6060:return Ko+"box-"+Wo(e,"-grow","")+Ko+e+bd+Wo(e,"grow","positive")+e;case 4554:return Ko+Wo(e,/([^-])(transform)/g,"$1"+Ko+"$2")+e;case 6187:return Wo(Wo(Wo(e,/(zoom-|grab)/,Ko+"$1"),/(image-set)/,Ko+"$1"),e,"")+e;case 5495:case 3959:return Wo(e,/(image-set\([^]*)/,Ko+"$1$`$1");case 4968:return Wo(Wo(e,/(.+:)(flex-)?(.*)/,Ko+"box-pack:$3"+bd+"flex-pack:$3"),/s.+-b[^;]+/,"justify")+Ko+e+e;case 4095:case 3583:case 4068:case 2532:return Wo(e,/(.+)-inline(.+)/,Ko+"$1$2")+e;case 8116:case 7059:case 5753:case 5535:case 5445:case 5701:case 4933:case 4677:case 5533:case 5789:case 5021:case 4765:if(zm(e)-1-t>6)switch(Hu(e,t+1)){case 109:if(Hu(e,t+4)!==45)break;case 102:return Wo(e,/(.+:)(.+)-([^]+)/,"$1"+Ko+"$2-$3$1"+Qj+(Hu(e,t+3)==108?"$3":"$2-$3"))+e;case 115:return~WD(e,"stretch")?eue(Wo(e,"stretch","fill-available"),t)+e:e}break;case 4949:if(Hu(e,t+1)!==115)break;case 6444:switch(Hu(e,zm(e)-3-(~WD(e,"!important")&&10))){case 107:return Wo(e,":",":"+Ko)+e;case 101:return Wo(e,/(.+:)([^;!]+)(;|!.+)?/,"$1"+Ko+(Hu(e,14)===45?"inline-":"")+"box$3$1"+Ko+"$2$3$1"+bd+"$2box$3")+e}break;case 5936:switch(Hu(e,t+11)){case 114:return Ko+e+bd+Wo(e,/[svh]\w+-[tblr]{2}/,"tb")+e;case 108:return Ko+e+bd+Wo(e,/[svh]\w+-[tblr]{2}/,"tb-rl")+e;case 45:return Ko+e+bd+Wo(e,/[svh]\w+-[tblr]{2}/,"lr")+e}return Ko+e+bd+e+e}return e}var uWe=function(e,t,n,r){if(e.length>-1&&!e.return)switch(e.type){case z7:e.return=eue(e.value,e.length);break;case qce:return iw([k2(e,{value:Wo(e.value,"@","@"+Ko)})],r);case U7:if(e.length)return GKe(e.props,function(s){switch($Ke(s,/(::plac\w+|:read-\w+)/)){case":read-only":case":read-write":return iw([k2(e,{props:[Wo(s,/:(read-\w+)/,":"+Qj+"$1")]})],r);case"::placeholder":return iw([k2(e,{props:[Wo(s,/:(plac\w+)/,":"+Ko+"input-$1")]}),k2(e,{props:[Wo(s,/:(plac\w+)/,":"+Qj+"$1")]}),k2(e,{props:[Wo(s,/:(plac\w+)/,bd+"input-$1")]})],r)}return""})}},dWe=[uWe],hWe=function(e){var t=e.key;if(t==="css"){var n=document.querySelectorAll("style[data-emotion]:not([data-s])");Array.prototype.forEach.call(n,function(U){var N=U.getAttribute("data-emotion");N.indexOf(" ")!==-1&&(document.head.appendChild(U),U.setAttribute("data-s",""))})}var r=e.stylisPlugins||dWe,s={},a,c=[];a=e.container||document.head,Array.prototype.forEach.call(document.querySelectorAll('style[data-emotion^="'+t+' "]'),function(U){for(var N=U.getAttribute("data-emotion").split(" "),W=1;W<N.length;W++)s[N[W]]=!0;c.push(U)});var i,f=[lWe,cWe];{var g,y=[tWe,rWe(function(U){g.insert(U)})],b=nWe(f.concat(r,y)),T=function(U){return iw(JKe(U),b)};i=function(U,N,W,L){g=W,T(U?U+"{"+N.styles+"}":N.styles),L&&(S.inserted[N.name]=!0)}}var S={key:t,sheet:new DKe({key:t,container:a,nonce:e.nonce,speedy:e.speedy,prepend:e.prepend,insertionPoint:e.insertionPoint}),nonce:e.nonce,inserted:s,registered:{},insert:i};return S.sheet.hydrate(c),S};function fWe(e){for(var t=0,n,r=0,s=e.length;s>=4;++r,s-=4)n=e.charCodeAt(r)&255|(e.charCodeAt(++r)&255)<<8|(e.charCodeAt(++r)&255)<<16|(e.charCodeAt(++r)&255)<<24,n=(n&65535)*1540483477+((n>>>16)*59797<<16),n^=n>>>24,t=(n&65535)*1540483477+((n>>>16)*59797<<16)^(t&65535)*1540483477+((t>>>16)*59797<<16);switch(s){case 3:t^=(e.charCodeAt(r+2)&255)<<16;case 2:t^=(e.charCodeAt(r+1)&255)<<8;case 1:t^=e.charCodeAt(r)&255,t=(t&65535)*1540483477+((t>>>16)*59797<<16)}return t^=t>>>13,t=(t&65535)*1540483477+((t>>>16)*59797<<16),((t^t>>>15)>>>0).toString(36)}var pWe={animationIterationCount:1,aspectRatio:1,borderImageOutset:1,borderImageSlice:1,borderImageWidth:1,boxFlex:1,boxFlexGroup:1,boxOrdinalGroup:1,columnCount:1,columns:1,flex:1,flexGrow:1,flexPositive:1,flexShrink:1,flexNegative:1,flexOrder:1,gridRow:1,gridRowEnd:1,gridRowSpan:1,gridRowStart:1,gridColumn:1,gridColumnEnd:1,gridColumnSpan:1,gridColumnStart:1,msGridRow:1,msGridRowSpan:1,msGridColumn:1,msGridColumnSpan:1,fontWeight:1,lineHeight:1,opacity:1,order:1,orphans:1,scale:1,tabSize:1,widows:1,zIndex:1,zoom:1,WebkitLineClamp:1,fillOpacity:1,floodOpacity:1,stopOpacity:1,strokeDasharray:1,strokeDashoffset:1,strokeMiterlimit:1,strokeOpacity:1,strokeWidth:1},AWe=!1,mWe=/[A-Z]|^ms/g,gWe=/_EMO_([^_]+?)_([^]*?)_EMO_/g,tue=function(e){return e.charCodeAt(1)===45},KZ=function(e){return e!=null&&typeof e!="boolean"},g5=iWe(function(e){return tue(e)?e:e.replace(mWe,"-$&").toLowerCase()}),WZ=function(e,t){switch(e){case"animation":case"animationName":if(typeof t=="string")return t.replace(gWe,function(n,r,s){return my={name:r,styles:s,next:my},r})}return pWe[e]!==1&&!tue(e)&&typeof t=="number"&&t!==0?t+"px":t},yWe="Component selectors can only be used in conjunction with @emotion/babel-plugin, the swc Emotion plugin, or another Emotion-aware compiler transform.";function Hj(e,t,n){if(n==null)return"";var r=n;if(r.__emotion_styles!==void 0)return r;switch(typeof n){case"boolean":return"";case"object":{var s=n;if(s.anim===1)return my={name:s.name,styles:s.styles,next:my},s.name;var a=n;if(a.styles!==void 0){var c=a.next;if(c!==void 0)for(;c!==void 0;)my={name:c.name,styles:c.styles,next:my},c=c.next;var i=a.styles+";";return i}return vWe(e,t,n)}}var f=n;if(t==null)return f;var g=t[f];return g!==void 0?g:f}function vWe(e,t,n){var r="";if(Array.isArray(n))for(var s=0;s<n.length;s++)r+=Hj(e,t,n[s])+";";else for(var a in n){var c=n[a];if(typeof c!="object"){var i=c;t!=null&&t[i]!==void 0?r+=a+"{"+t[i]+"}":KZ(i)&&(r+=g5(a)+":"+WZ(a,i)+";")}else{if(a==="NO_COMPONENT_SELECTOR"&&AWe)throw new Error(yWe);if(Array.isArray(c)&&typeof c[0]=="string"&&(t==null||t[c[0]]===void 0))for(var f=0;f<c.length;f++)KZ(c[f])&&(r+=g5(a)+":"+WZ(a,c[f])+";");else{var g=Hj(e,t,c);switch(a){case"animation":case"animationName":{r+=g5(a)+":"+g+";";break}default:r+=a+"{"+g+"}"}}}}return r}var qZ=/label:\s*([^\s;{]+)\s*(;|$)/g,my;function y5(e,t,n){if(e.length===1&&typeof e[0]=="object"&&e[0]!==null&&e[0].styles!==void 0)return e[0];var r=!0,s="";my=void 0;var a=e[0];if(a==null||a.raw===void 0)r=!1,s+=Hj(n,t,a);else{var c=a;s+=c[0]}for(var i=1;i<e.length;i++)if(s+=Hj(n,t,e[i]),r){var f=a;s+=f[i]}qZ.lastIndex=0;for(var g="",y;(y=qZ.exec(s))!==null;)g+="-"+y[1];var b=fWe(s)+g;return{name:b,styles:s,next:my}}function nue(e,t,n){var r="";return n.split(" ").forEach(function(s){e[s]!==void 0?t.push(e[s]+";"):s&&(r+=s+" ")}),r}var xWe=function(e,t,n){var r=e.key+"-"+t.name;e.registered[r]===void 0&&(e.registered[r]=t.styles)},_We=function(e,t,n){xWe(e,t);var r=e.key+"-"+t.name;if(e.inserted[t.name]===void 0){var s=t;do e.insert(t===s?"."+r:"",s,e.sheet,!0),s=s.next;while(s!==void 0)}};function ZZ(e,t){if(e.inserted[t.name]===void 0)return e.insert("",t,e.sheet,!0)}function XZ(e,t,n){var r=[],s=nue(e,r,n);return r.length<2?n:s+t(r)}var wWe=function(e){var t=hWe(e);t.sheet.speedy=function(c){this.isSpeedy=c},t.compat=!0;var n=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];var g=y5(i,t.registered,void 0);return _We(t,g),t.key+"-"+g.name},r=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];var g=y5(i,t.registered),y="animation-"+g.name;return ZZ(t,{name:g.name,styles:"@keyframes "+y+"{"+g.styles+"}"}),y},s=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];var g=y5(i,t.registered);ZZ(t,g)},a=function(){for(var c=arguments.length,i=new Array(c),f=0;f<c;f++)i[f]=arguments[f];return XZ(t.registered,n,bWe(i))};return{css:n,cx:a,injectGlobal:s,keyframes:r,hydrate:function(c){c.forEach(function(i){t.inserted[i]=!0})},flush:function(){t.registered={},t.inserted={},t.sheet.flush()},sheet:t.sheet,cache:t,getRegisteredStyles:nue.bind(null,t.registered),merge:XZ.bind(null,t.registered,n)}},bWe=function e(t){for(var n="",r=0;r<t.length;r++){var s=t[r];if(s!=null){var a=void 0;switch(typeof s){case"boolean":break;case"object":{if(Array.isArray(s))a=e(s);else{a="";for(var c in s)s[c]&&c&&(a&&(a+=" "),a+=c)}break}default:a=s}a&&(n&&(n+=" "),n+=a)}}return n},CWe=qB,H7=Date.prototype,YZ="Invalid Date",rue="toString",SWe=H7[rue],BWe=H7.getTime;String(new Date(NaN))!=YZ&&CWe(H7,rue,function(){var e=BWe.call(this);return e===e?SWe.call(this):YZ});var EWe=R7,TWe=Sce,IWe=EWe?{}.toString:function(){return"[object "+TWe(this)+"]"},jWe=R7,FWe=qB,PWe=IWe;jWe||FWe(Object.prototype,"toString",PWe,{unsafe:!0});var kWe=M7.PROPER,LWe=qB,MWe=lv,JZ=kP,NWe=im,RWe=Bce,V7="toString",iue=RegExp.prototype,sue=iue[V7],OWe=NWe(function(){return sue.call({source:"a",flags:"b"})!="/a/b"}),DWe=kWe&&sue.name!=V7;(OWe||DWe)&&LWe(RegExp.prototype,V7,function(){var e=MWe(this),t=JZ(e.source),n=e.flags,r=JZ(n===void 0&&e instanceof RegExp&&!("flags"in iue)?RWe.call(e):n);return"/"+t+"/"+r},{unsafe:!0});var eX=typeof window<"u"?window:self,UWe=eX.crypto||eX.msCrypto,zWe=function(e){if(!e)return Math.random;var t=Math.pow(2,32),n=new Uint32Array(1);return function(){return e.getRandomValues(n)[0]/t}}(UWe);const QWe=uo(zWe);function HWe(){return QWe().toString(26).substr(2,5).replace(/[0-9]/g,function(e){return String.fromCharCode(e.charCodeAt(0)+65)})}var VWe=Hae;const tX=uo(VWe);function ia(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"white",n="background-color: ".concat(e,"; border-radius: 4px; padding: 2px 4px;");return t&&(n+=" color: ".concat(t,";")),[n,""]}function nX(e,t){for(var n,r,s=arguments.length,a=new Array(s>2?s-2:0),c=2;c<s;c++)a[c-2]=arguments[c];return Bl(n=[Bl(r="%c".concat(e,"%c ")).call(r,t)]).call(n,Co(ia("green","white")),a)}function $We(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},n=t.force,r=n===void 0?!1:n;return r?function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];if(a.length){var i=a,f=Um(i,1),g=f[0];typeof g=="function"&&(a=g());var y=tX(a[0])?a:[a],b=y.length===1;zj(y).call(y,function(T,S){if(b){var U,N;(U=console).log.apply(U,Co(nX.apply(void 0,Bl(N=[e]).call(N,Co(T)))))}else if(S){var W;(W=console).log.apply(W,Co(tX(T)?T:[T]))}else{var L,Q;(L=console).groupCollapsed.apply(L,Co(nX.apply(void 0,Bl(Q=[e]).call(Q,Co(T)))))}}),b||console.groupEnd()}}:function(){return 0}}var GWe=i_,KWe=M7.EXISTS,WWe=WB.f,oue=Function.prototype,qWe=oue.toString,ZWe=/^\s*function ([^ (]*)/,XWe="name";GWe&&!KWe&&WWe(oue,XWe,{configurable:!0,get:function(){try{return qWe.call(this).match(ZWe)[1]}catch{return""}}});var YWe=Wu,JWe=YWe.setTimeout,eqe=JWe;const tqe=uo(eqe);function nqe(e,t){if(!t)return e;var n=0,r=null;return function(){for(var s=arguments.length,a=new Array(s),c=0;c<s;c++)a[c]=arguments[c];var i=ky();i-n>t?(e.apply(void 0,a),n=i):(clearTimeout(r),r=tqe(function(){e.apply(void 0,a),n=ky()},Math.max(0,t-i+n)))}}var aue=function(e){var t=e.debounce,n=e.name,r=e.onEvent,s=e.target,a=q.useRef();a.current=r;var c=q.useMemo(function(){return nqe(function(f){var g=a.current;g&&g(f)},t)},[t,a]),i=q.useCallback(function(f){f.timeStampLow=ky(),c(f)},[c]);return q.useLayoutEffect(function(){return s.addEventListener(n,i,{passive:!0}),i({target:s,type:n}),function(){return s.removeEventListener(n,i)}},[n,i,s]),!1};aue.defaultProps={debounce:200};var rqe=Math.sign||function(e){var t=+e;return t===0||t!==t?t:t<0?-1:1},iqe=pa,sqe=rqe;iqe({target:"Math",stat:!0},{sign:sqe});var oqe=Wu,aqe=oqe.Math.sign,lqe=aqe,cqe=lqe,uqe=cqe;const dqe=uo(uqe);function hqe(e,t){var n=dqe(t-e),r=Math.sqrt(Math.abs(t-e)),s=e+r*n;return n>0?Math.min(t,s):Math.max(t,s)}function fqe(e,t,n,r){for(var s=e,a=0;a<r;a++)s=n(s,t);return s}var lue=function(e){var t=e.name,n=e.onEnd,r=e.target,s=e.value,a=q.useRef(),c=q.useCallback(function(f,g,y,b){var T=arguments.length>4&&arguments[4]!==void 0?arguments[4]:ky();(y==="100%"||typeof y=="number")&&(cancelAnimationFrame(a.current),a.current=requestAnimationFrame(function(){if(r){var S=y==="100%"?r.scrollHeight-r.offsetHeight:y,U=fqe(g,S,hqe,(ky()-T)/5);Math.abs(S-U)<1.5&&(U=S),r[f]=U,S===U?n&&n(!0):c(f,g,y,b+1,T)}}))},[a,n,r]),i=q.useCallback(function(){cancelAnimationFrame(a.current),n&&n(!1)},[n]);return q.useLayoutEffect(function(){return c(t,r[t],s,1),r?(r.addEventListener("pointerdown",i,{passive:!0}),r.addEventListener("wheel",i,{passive:!0}),function(){r.removeEventListener("pointerdown",i),r.removeEventListener("wheel",i),cancelAnimationFrame(a.current)}):function(){return cancelAnimationFrame(a.current)}},[c,a,i,t,r,s]),!1};lue.propTypes={name:Po.string.isRequired,onEnd:Po.func,target:Po.any.isRequired,value:Po.oneOfType([Po.number,Po.oneOf(["100%"])]).isRequired};function v5(e){var t=q.useState(e),n=Um(t,2),r=n[0],s=n[1],a=q.useRef(),c=q.useCallback(function(i){typeof i=="function"?c(function(f){return i=i(f),a.current=i,i}):(a.current=i,c(i))},[a]);return a.current=r,[r,s,a]}function rX(e,t){var n=PGe(e);if(zZ){var r=zZ(e);t&&(r=ZGe(r).call(r,function(s){return $ce(e,s).enumerable})),n.push.apply(n,r)}return n}function iX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};if(t%2){var r;zj(r=rX(Object(n),!0)).call(r,function(a){S7e(e,a,n[a])})}else if(QZ)kKe(e,QZ(n));else{var s;zj(s=rX(Object(n))).call(s,function(a){MKe(e,a,$ce(n,a))})}}return e}var pqe=function(){return 1/0},sX=17,Aqe="bottom",PA="top",oX=1,mqe=34,aX={};function gqe(e,t){return e(),s$e(e,t)}function lX(e){var t=e.mode,n=e.target,r=n.offsetHeight,s=n.scrollHeight,a=n.scrollTop,c=s-a-r<oX,i=a<oX,f=t===PA?i:c,g=t!==PA?i:c;return{atBottom:c,atEnd:f,atStart:g,atTop:i}}function L2(e,t){return e===(t===PA?0:"100%")}var $7=function(e){var t=e.checkInterval,n=e.children,r=e.debounce,s=e.debug,a=e.initialScrollBehavior,c=e.mode,i=e.nonce,f=e.scroller,g=q.useMemo(function(){return $We("<ScrollToBottom>",{force:s})},[s]);c=c===PA?PA:Aqe;var y=q.useRef(0),b=q.useRef(a),T=v5(c===PA?0:"100%"),S=Um(T,3),U=S[0],N=S[1],W=S[2],L=v5(null),Q=Um(L,3),V=Q[0],Z=Q[1],ne=Q[2],Y=q.useRef(0),le=q.useRef(0),pe=q.useRef(0),_e=q.useState(!0),ye=Um(_e,2),he=ye[0],be=ye[1],Te=q.useState(!0),Ee=Um(Te,2),Ne=Ee[0],Ge=Ee[1],Je=q.useState(!0),Ue=Um(Je,2),Qe=Ue[0],xe=Ue[1],at=q.useState(!1),we=Um(at,2),me=we[0],Ze=we[1],ot=v5(!0),vt=Um(ot,3),Qt=vt[0],Ot=vt[1],kt=vt[2],Me=q.useRef([]),Ht=q.useCallback(function(wt){var qt=ne.current;return Me.current.push(wt),qt&&wt({scrollTop:qt.scrollTop}),function(){var fn=Me.current,Un=x$e(fn).call(fn,wt);~Un&&V$e(fn).call(fn,Un,1)}},[Me,ne]),Zt=q.useCallback(function(){var wt=W.current;g(function(){var qt;return Bl(qt=["%cSpineTo%c: %conEnd%c is fired."]).call(qt,Co(ia("magenta")),Co(ia("orange")),[{animateTo:wt}])}),y.current=ky(),L2(wt,c)||Ot(!1),N(null)},[W,g,y,c,N,Ot]),pn=q.useCallback(function(wt){var qt=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},fn=qt.behavior,Un=ne.current;if(typeof wt!="number"&&wt!=="100%")return console.warn('react-scroll-to-bottom: Arguments passed to scrollTo() must be either number or "100%".');g(function(){var Yt;return[Bl(Yt=["%cscrollTo%c: Will scroll to %c".concat(typeof wt=="number"?wt+"px":wt.replace(/%/g,"%%"),"%c")]).call(Yt,Co(ia("lime","")),Co(ia("purple"))),{behavior:fn,nextAnimateTo:wt,target:Un}]}),fn==="auto"?(Zt(),Un&&(Un.scrollTop=wt==="100%"?Un.scrollHeight-Un.offsetHeight:wt)):(fn!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollTo". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),N(wt)),L2(wt,c)&&(g(function(){var Yt;return[Bl(Yt=["%cscrollTo%c: Scrolling to end, will set sticky to %ctrue%c."]).call(Yt,Co(ia("lime","")),Co(ia("purple"))),[{mode:c,nextAnimateTo:wt}]]}),Ot(!0))},[g,Zt,c,N,Ot,ne]),Dt=q.useCallback(function(){var wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qt=wt.behavior;g(function(){var fn;return Bl(fn=["%cscrollToBottom%c: Called"]).call(fn,Co(ia("yellow","")))}),qt!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToBottom". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),pn("100%",{behavior:qt||"smooth"})},[g,pn]),hn=q.useCallback(function(){var wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qt=wt.behavior;g(function(){var fn;return Bl(fn=["%cscrollToTop%c: Called"]).call(fn,Co(ia("yellow","")))}),qt!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToTop". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.'),pn(0,{behavior:qt||"smooth"})},[g,pn]),Oe=q.useCallback(function(){var wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qt=wt.behavior;g(function(){var Un;return Bl(Un=["%cscrollToEnd%c: Called"]).call(Un,Co(ia("yellow","")))}),qt!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToEnd". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var fn={behavior:qt||"smooth"};c===PA?hn(fn):Dt(fn)},[g,c,Dt,hn]),nn=q.useCallback(function(){var wt=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},qt=wt.behavior;g(function(){var Un;return Bl(Un=["%cscrollToStart%c: Called"]).call(Un,Co(ia("yellow","")))}),qt!=="smooth"&&console.warn('react-scroll-to-bottom: Please set "behavior" when calling "scrollToStart". In future versions, the default behavior will be changed from smooth scrolling to discrete scrolling to align with HTML Standard.');var fn={behavior:qt||"smooth"};c===PA?Dt(fn):hn(fn)},[g,c,Dt,hn]),Vt=q.useCallback(function(){var wt=ne.current;if(wt){if(b.current==="auto"){g(function(){var xr;return Bl(xr=["%ctarget changed%c: Initial scroll"]).call(xr,Co(ia("blue")))}),wt.scrollTop=c===PA?0:wt.scrollHeight-wt.offsetHeight,b.current=!1;return}var qt=Y.current,fn=wt.offsetHeight,Un=wt.scrollHeight,Yt=wt.scrollTop,cn=c===PA?0:Math.max(0,Un-fn-Yt),Ln=Math.max(0,qt-Yt),Hn=f({maxValue:cn,minValue:Ln,offsetHeight:fn,scrollHeight:Un,scrollTop:Yt}),_r=Math.max(0,Math.min(cn,Hn)),fr;c===PA||_r!==cn?fr=Yt+_r:fr="100%",g(function(){var xr,bi,Vn;return[Bl(xr=[Bl(bi=Bl(Vn="%cscrollToSticky%c: Will animate from %c".concat(qt,"px%c to %c")).call(Vn,typeof fr=="number"?fr+"px":fr.replace(/%/g,"%%"),"%c (%c")).call(bi,(fr==="100%"?cn:fr)+qt,"px%c)")]).call(xr,Co(ia("orange")),Co(ia("purple")),Co(ia("purple")),Co(ia("purple"))),{animateFrom:qt,maxValue:cn,minValue:Ln,nextAnimateTo:fr,nextValue:_r,offsetHeight:fn,rawNextValue:Hn,scrollHeight:Un,scrollTop:Yt}]}),pn(fr,{behavior:"smooth"})}},[Y,g,c,f,pn,ne]),$t=q.useCallback(function(wt){var qt,fn=wt.timeStampLow,Un=W.current,Yt=ne.current,cn=Un!==null;if(!(fn<=y.current||!Yt)){var Ln=lX({mode:c,target:Yt}),Hn=Ln.atBottom,_r=Ln.atEnd,fr=Ln.atStart,xr=Ln.atTop;be(Hn),Ge(_r),Ze(fr),xe(xr);var bi=Yt.offsetHeight,Vn=Yt.scrollHeight,Es=le.current,ki=pe.current,hs=bi!==Es,mi=Vn!==ki;if(hs&&(le.current=bi),mi&&(pe.current=Vn),!hs&&!mi){var br=cn&&L2(Un,c)||_r;kt.current!==br&&(g(function(){var Ir,Kr,Mt,je;return[Bl(Ir=["%conScroll%c: %csetSticky%c(%c".concat(br,"%c)")]).call(Ir,Co(ia("red")),Co(ia("red")),Co(ia("purple"))),Bl(Kr=[Bl(Mt=Bl(je="(animating = %c".concat(cn,"%c && isEnd = %c")).call(je,L2(Un,c),"%c) || atEnd = %c")).call(Mt,_r,"%c")]).call(Kr,Co(ia("purple")),Co(ia("purple")),Co(ia("purple")),[{animating:cn,animateTo:Un,atEnd:_r,mode:c,offsetHeight:Yt.offsetHeight,scrollHeight:Yt.scrollHeight,sticky:kt.current,nextSticky:br}])]}),Ot(br))}else kt.current&&(g(function(){var Ir;return[Bl(Ir=["%conScroll%c: Size changed while sticky, calling %cscrollToSticky()%c"]).call(Ir,Co(ia("red")),Co(ia("orange")),[{offsetHeightChanged:hs,scrollHeightChanged:mi}]),{nextOffsetHeight:bi,prevOffsetHeight:Es,nextScrollHeight:Vn,prevScrollHeight:ki}]}),Vt());var gr=Yt.scrollTop;zj(qt=Me.current).call(qt,function(Ir){return Ir({scrollTop:gr})})}},[W,g,y,c,le,pe,Me,Vt,be,Ge,Ze,xe,Ot,kt,ne]);q.useEffect(function(){if(V){var wt=!1,qt=gqe(function(){var fn=ne.current,Un=W.current!==null;kt.current?lX({mode:c,target:fn}).atEnd?wt=!1:wt?ky()-wt>mqe&&(Un||(Y.current=fn.scrollTop,g(function(){var Yt;return Bl(Yt=["%cInterval check%c: Should sticky but not at end, calling %cscrollToSticky()%c to scroll"]).call(Yt,Co(ia("navy")),Co(ia("orange")))}),Vt()),wt=!1):wt=ky():fn.scrollHeight<=fn.offsetHeight&&!kt.current&&(g(function(){var Yt;return[Bl(Yt=["%cInterval check%c: Container is emptied, setting sticky back to %ctrue%c"]).call(Yt,Co(ia("navy")),Co(ia("purple"))),[{offsetHeight:fn.offsetHeight,scrollHeight:fn.scrollHeight,sticky:kt.current}]]}),Ot(!0))},Math.max(sX,t)||sX);return function(){return clearInterval(qt)}}},[W,t,g,c,Vt,Ot,kt,V,ne]);var xn=q.useMemo(function(){var wt=aX[i]||(aX[i]=wWe({key:"react-scroll-to-bottom--css-"+HWe(),nonce:i}));return function(qt){return wt.css(qt)+""}},[i]),Xt=q.useMemo(function(){return{observeScrollPosition:Ht,setTarget:Z,styleToClassName:xn}},[Ht,Z,xn]),gn=q.useMemo(function(){return{atBottom:he,atEnd:Ne,atStart:me,atTop:Qe,mode:c}},[he,Ne,me,Qe,c]),rr=q.useMemo(function(){var wt=U!==null;return{animating:wt,animatingToEnd:wt&&L2(U,c),sticky:Qt}},[U,c,Qt]),Gt=q.useMemo(function(){return iX(iX({},gn),rr)},[gn,rr]),Rn=q.useMemo(function(){return{scrollTo:pn,scrollToBottom:Dt,scrollToEnd:Oe,scrollToStart:nn,scrollToTop:hn}},[pn,Dt,Oe,nn,hn]);return q.useEffect(function(){if(V){var wt=function(){pe.current=V.scrollHeight};return V.addEventListener("focus",wt,{capture:!0,passive:!0}),function(){return V.removeEventListener("focus",wt)}}},[V]),g(function(){var wt;return[Bl(wt=["%cRender%c: Render"]).call(wt,Co(ia("cyan",""))),{animateTo:U,animating:U!==null,sticky:Qt,target:V}]}),Ti.createElement(TP.Provider,{value:Xt},Ti.createElement(_7.Provider,{value:Rn},Ti.createElement(C7.Provider,{value:Gt},Ti.createElement(w7.Provider,{value:gn},Ti.createElement(b7.Provider,{value:rr},n,V&&Ti.createElement(aue,{debounce:r,name:"scroll",onEvent:$t,target:V}),V&&U!==null&&Ti.createElement(lue,{name:"scrollTop",onEnd:Zt,target:V,value:U}))))))};$7.defaultProps={checkInterval:100,children:void 0,debounce:17,debug:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:pqe};$7.propTypes={checkInterval:Po.number,children:Po.any,debounce:Po.number,debug:Po.bool,initialScrollBehavior:Po.oneOf(["auto","smooth"]),mode:Po.oneOf(["bottom","top"]),nonce:Po.string,scroller:Po.func};var yqe={height:"100%",overflowY:"auto",width:"100%"},G7=function(e){var t=e.children,n=e.className,r=q.useContext(TP),s=r.setTarget,a=S7()(yqe);return Ti.createElement("div",{className:x7(a,(n||"")+""),ref:s},t)};G7.defaultProps={children:void 0,className:void 0};G7.propTypes={children:Po.any,className:Po.string};var vqe={position:"relative"},K7=function(e){var t=e.children,n=e.className,r=e.followButtonClassName,s=e.scrollViewClassName,a=S7()(vqe);return Ti.createElement("div",{className:x7(a,(n||"")+"")},Ti.createElement(G7,{className:(s||"")+""},t),Ti.createElement(B7,{className:(r||"")+""}))};K7.defaultProps={children:void 0,className:void 0,followButtonClassName:void 0,scrollViewClassName:void 0};K7.propTypes={children:Po.any,className:Po.string,followButtonClassName:Po.string,scrollViewClassName:Po.string};var W7=function(e){var t=e.checkInterval,n=e.children,r=e.className,s=e.debounce,a=e.debug,c=e.followButtonClassName,i=e.initialScrollBehavior,f=e.mode,g=e.nonce,y=e.scroller,b=e.scrollViewClassName;return Ti.createElement($7,{checkInterval:t,debounce:s,debug:a,initialScrollBehavior:i,mode:f,nonce:g,scroller:y},Ti.createElement(K7,{className:r,followButtonClassName:c,scrollViewClassName:b},n))};W7.defaultProps={checkInterval:void 0,children:void 0,className:void 0,debounce:void 0,debug:void 0,followButtonClassName:void 0,initialScrollBehavior:"smooth",mode:void 0,nonce:void 0,scroller:void 0,scrollViewClassName:void 0};W7.propTypes={checkInterval:Po.number,children:Po.any,className:Po.string,debounce:Po.number,debug:Po.bool,followButtonClassName:Po.string,initialScrollBehavior:Po.oneOf(["auto","smooth"]),mode:Po.oneOf(["bottom","top"]),nonce:Po.string,scroller:Po.func,scrollViewClassName:Po.string};ULe();let cue=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce((t,n)=>(n&=63,n<36?t+=n.toString(36):n<62?t+=(n-26).toString(36).toUpperCase():n>62?t+="-":t+="_",t),"");const uue=q.memo(({className:e,messages:t=[],isTyping:n,headerMessage:r,renderers:s,botAvatar:a,botDescription:c,botName:i,sendMessage:f,showMarquee:g=!0,...y})=>{const{messageList:b}=qo,T=q.useMemo(()=>zwe(t),[t.length]);return zt.jsxs(W7,{...y,className:NS(b.container.className,e),followButtonClassName:b.scrollDownButton.button.className,scrollViewClassName:b.viewPort.className,children:[r&&zt.jsx("span",{...b.headerMessage,children:r}),g&&zt.jsx(OLe,{botAvatar:a,botDescription:c,botName:i}),T.map(S=>zt.jsx(FW,{renderers:s,sendMessage:f,...S},S.id)),n&&zt.jsx(FW,{id:cue(),renderers:s,sendMessage:f,direction:"incoming",timestamp:new Date,block:void 0,sender:{name:i??"",avatar:a},children:zt.jsx(RLe,{})})]})});uue.displayName="MessageList";const xqe=({className:e,...t})=>{const{className:n}=qo.loader;return zt.jsx("div",{...t,className:NS(e,n)})},_qe=({connected:e,configuration:t,closeWindow:n,isTyping:r,messages:s,user:a,sendMessage:c,uploadFile:i,isLoading:f,renderers:g,isReadOnly:y,disableComposer:b,restartConversation:T,allowFileUpload:S,...U})=>{const{color:N,fontFamily:W,radius:L,themeMode:Q,variant:V,botAvatar:Z,botDescription:ne,botName:Y,composerPlaceholder:le,showPoweredBy:pe}=t,_e={color:N,fontFamily:W,radius:L,themeMode:Q,variant:V},ye=q.useMemo(()=>s.map(he=>{const{authorId:be}=he,Te=be===(a==null?void 0:a.id)?"outgoing":"incoming";return{...he,direction:Te,sender:Te==="outgoing"?{name:"You"}:{name:t.botName??"Bot",avatar:t.botAvatar}}}),[t.botAvatar,t.botName,s.length,a==null?void 0:a.id]);return zt.jsxs(zt.Fragment,{children:[zt.jsx(XPe,{..._e}),zt.jsxs(Sae,{connected:e,allowFileUpload:S,uploadFile:i,...U,children:[zt.jsx(NLe,{closeWindow:n,configuration:t,restartConversation:T}),f?zt.jsx(xqe,{}):zt.jsx(zt.Fragment,{children:zt.jsx(uue,{botAvatar:Z,botDescription:ne,botName:Y,renderers:g,isTyping:r,sendMessage:c,messages:ye})}),zt.jsx(JFe,{sendMessage:c,uploadFile:i,connected:e,isReadOnly:y,disableComposer:b,showPoweredBy:pe,composerPlaceholder:le,allowFileUpload:S})]})]})};function due(e,t){return function(){return e.apply(t,arguments)}}const{toString:hue}=Object.prototype,{getPrototypeOf:q7}=Object,Z7=(e=>t=>{const n=hue.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),y0=e=>(e=e.toLowerCase(),t=>Z7(t)===e),RP=e=>t=>typeof t===e,{isArray:ob}=Array,VS=RP("undefined");function wqe(e){return e!==null&&!VS(e)&&e.constructor!==null&&!VS(e.constructor)&&Vx(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const fue=y0("ArrayBuffer");function bqe(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&fue(e.buffer),t}const Cqe=RP("string"),Vx=RP("function"),pue=RP("number"),X7=e=>e!==null&&typeof e=="object",Sqe=e=>e===!0||e===!1,aI=e=>{if(Z7(e)!=="object")return!1;const t=q7(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(Symbol.toStringTag in e)&&!(Symbol.iterator in e)},Bqe=y0("Date"),Eqe=y0("File"),Tqe=y0("Blob"),Iqe=y0("FileList"),jqe=e=>X7(e)&&Vx(e.pipe),Fqe=e=>{const t="[object FormData]";return e&&(typeof FormData=="function"&&e instanceof FormData||hue.call(e)===t||Vx(e.toString)&&e.toString()===t)},Pqe=y0("URLSearchParams"),kqe=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function YB(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let r,s;if(typeof e!="object"&&(e=[e]),ob(e))for(r=0,s=e.length;r<s;r++)t.call(null,e[r],r,e);else{const a=n?Object.getOwnPropertyNames(e):Object.keys(e),c=a.length;let i;for(r=0;r<c;r++)i=a[r],t.call(null,e[i],i,e)}}function Aue(e,t){t=t.toLowerCase();const n=Object.keys(e);let r=n.length,s;for(;r-- >0;)if(s=n[r],t===s.toLowerCase())return s;return null}const mue=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,gue=e=>!VS(e)&&e!==mue;function ZD(){const{caseless:e}=gue(this)&&this||{},t={},n=(r,s)=>{const a=e&&Aue(t,s)||s;aI(t[a])&&aI(r)?t[a]=ZD(t[a],r):aI(r)?t[a]=ZD({},r):ob(r)?t[a]=r.slice():t[a]=r};for(let r=0,s=arguments.length;r<s;r++)arguments[r]&&YB(arguments[r],n);return t}const Lqe=(e,t,n,{allOwnKeys:r}={})=>(YB(t,(s,a)=>{n&&Vx(s)?e[a]=due(s,n):e[a]=s},{allOwnKeys:r}),e),Mqe=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),Nqe=(e,t,n,r)=>{e.prototype=Object.create(t.prototype,r),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},Rqe=(e,t,n,r)=>{let s,a,c;const i={};if(t=t||{},e==null)return t;do{for(s=Object.getOwnPropertyNames(e),a=s.length;a-- >0;)c=s[a],(!r||r(c,e,t))&&!i[c]&&(t[c]=e[c],i[c]=!0);e=n!==!1&&q7(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},Oqe=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const r=e.indexOf(t,n);return r!==-1&&r===n},Dqe=e=>{if(!e)return null;if(ob(e))return e;let t=e.length;if(!pue(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},Uqe=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&q7(Uint8Array)),zqe=(e,t)=>{const n=(e&&e[Symbol.iterator]).call(e);let r;for(;(r=n.next())&&!r.done;){const s=r.value;t.call(e,s[0],s[1])}},Qqe=(e,t)=>{let n;const r=[];for(;(n=e.exec(t))!==null;)r.push(n);return r},Hqe=y0("HTMLFormElement"),Vqe=e=>e.toLowerCase().replace(/[_-\s]([a-z\d])(\w*)/g,function(t,n,r){return n.toUpperCase()+r}),cX=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),$qe=y0("RegExp"),yue=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),r={};YB(n,(s,a)=>{t(s,a,e)!==!1&&(r[a]=s)}),Object.defineProperties(e,r)},Gqe=e=>{yue(e,(t,n)=>{if(Vx(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const r=e[n];if(Vx(r)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},Kqe=(e,t)=>{const n={},r=s=>{s.forEach(a=>{n[a]=!0})};return ob(e)?r(e):r(String(e).split(t)),n},Wqe=()=>{},qqe=(e,t)=>(e=+e,Number.isFinite(e)?e:t),Zqe=e=>{const t=new Array(10),n=(r,s)=>{if(X7(r)){if(t.indexOf(r)>=0)return;if(!("toJSON"in r)){t[s]=r;const a=ob(r)?[]:{};return YB(r,(c,i)=>{const f=n(c,s+1);!VS(f)&&(a[i]=f)}),t[s]=void 0,a}}return r};return n(e,0)},lr={isArray:ob,isArrayBuffer:fue,isBuffer:wqe,isFormData:Fqe,isArrayBufferView:bqe,isString:Cqe,isNumber:pue,isBoolean:Sqe,isObject:X7,isPlainObject:aI,isUndefined:VS,isDate:Bqe,isFile:Eqe,isBlob:Tqe,isRegExp:$qe,isFunction:Vx,isStream:jqe,isURLSearchParams:Pqe,isTypedArray:Uqe,isFileList:Iqe,forEach:YB,merge:ZD,extend:Lqe,trim:kqe,stripBOM:Mqe,inherits:Nqe,toFlatObject:Rqe,kindOf:Z7,kindOfTest:y0,endsWith:Oqe,toArray:Dqe,forEachEntry:zqe,matchAll:Qqe,isHTMLForm:Hqe,hasOwnProperty:cX,hasOwnProp:cX,reduceDescriptors:yue,freezeMethods:Gqe,toObjectSet:Kqe,toCamelCase:Vqe,noop:Wqe,toFiniteNumber:qqe,findKey:Aue,global:mue,isContextDefined:gue,toJSONObject:Zqe};function ko(e,t,n,r,s){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),r&&(this.request=r),s&&(this.response=s)}lr.inherits(ko,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:lr.toJSONObject(this.config),code:this.code,status:this.response&&this.response.status?this.response.status:null}}});const vue=ko.prototype,xue={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{xue[e]={value:e}});Object.defineProperties(ko,xue);Object.defineProperty(vue,"isAxiosError",{value:!0});ko.from=(e,t,n,r,s,a)=>{const c=Object.create(vue);return lr.toFlatObject(e,c,function(i){return i!==Error.prototype},i=>i!=="isAxiosError"),ko.call(c,e.message,t,n,r,s),c.cause=e,c.name=e.name,a&&Object.assign(c,a),c};var Xqe=typeof self=="object"?self.FormData:window.FormData;const Yqe=uo(Xqe);function XD(e){return lr.isPlainObject(e)||lr.isArray(e)}function _ue(e){return lr.endsWith(e,"[]")?e.slice(0,-2):e}function uX(e,t,n){return e?e.concat(t).map(function(r,s){return r=_ue(r),!n&&s?"["+r+"]":r}).join(n?".":""):t}function Jqe(e){return lr.isArray(e)&&!e.some(XD)}const eZe=lr.toFlatObject(lr,{},null,function(e){return/^is[A-Z]/.test(e)});function tZe(e){return e&&lr.isFunction(e.append)&&e[Symbol.toStringTag]==="FormData"&&e[Symbol.iterator]}function OP(e,t,n){if(!lr.isObject(e))throw new TypeError("target must be an object");t=t||new(Yqe||FormData),n=lr.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(S,U){return!lr.isUndefined(U[S])});const r=n.metaTokens,s=n.visitor||g,a=n.dots,c=n.indexes,i=(n.Blob||typeof Blob<"u"&&Blob)&&tZe(t);if(!lr.isFunction(s))throw new TypeError("visitor must be a function");function f(S){if(S===null)return"";if(lr.isDate(S))return S.toISOString();if(!i&&lr.isBlob(S))throw new ko("Blob is not supported. Use a Buffer instead.");return lr.isArrayBuffer(S)||lr.isTypedArray(S)?i&&typeof Blob=="function"?new Blob([S]):Buffer.from(S):S}function g(S,U,N){let W=S;if(S&&!N&&typeof S=="object"){if(lr.endsWith(U,"{}"))U=r?U:U.slice(0,-2),S=JSON.stringify(S);else if(lr.isArray(S)&&Jqe(S)||lr.isFileList(S)||lr.endsWith(U,"[]")&&(W=lr.toArray(S)))return U=_ue(U),W.forEach(function(L,Q){!(lr.isUndefined(L)||L===null)&&t.append(c===!0?uX([U],Q,a):c===null?U:U+"[]",f(L))}),!1}return XD(S)?!0:(t.append(uX(N,U,a),f(S)),!1)}const y=[],b=Object.assign(eZe,{defaultVisitor:g,convertValue:f,isVisitable:XD});function T(S,U){if(!lr.isUndefined(S)){if(y.indexOf(S)!==-1)throw Error("Circular reference detected in "+U.join("."));y.push(S),lr.forEach(S,function(N,W){(!(lr.isUndefined(N)||N===null)&&s.call(t,N,lr.isString(W)?W.trim():W,U,b))===!0&&T(N,U?U.concat(W):[W])}),y.pop()}}if(!lr.isObject(e))throw new TypeError("data must be an object");return T(e),t}function dX(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(n){return t[n]})}function Y7(e,t){this._pairs=[],e&&OP(e,this,t)}const wue=Y7.prototype;wue.append=function(e,t){this._pairs.push([e,t])};wue.toString=function(e){const t=e?function(n){return e.call(this,n,dX)}:dX;return this._pairs.map(function(n){return t(n[0])+"="+t(n[1])},"").join("&")};function nZe(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+").replace(/%5B/gi,"[").replace(/%5D/gi,"]")}function bue(e,t,n){if(!t)return e;const r=n&&n.encode||nZe,s=n&&n.serialize;let a;if(s?a=s(t,n):a=lr.isURLSearchParams(t)?t.toString():new Y7(t,n).toString(r),a){const c=e.indexOf("#");c!==-1&&(e=e.slice(0,c)),e+=(e.indexOf("?")===-1?"?":"&")+a}return e}class hX{constructor(){this.handlers=[]}use(t,n,r){return this.handlers.push({fulfilled:t,rejected:n,synchronous:r?r.synchronous:!1,runWhen:r?r.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){lr.forEach(this.handlers,function(n){n!==null&&t(n)})}}const Cue={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},rZe=typeof URLSearchParams<"u"?URLSearchParams:Y7,iZe=FormData,sZe=(()=>{let e;return typeof navigator<"u"&&((e=navigator.product)==="ReactNative"||e==="NativeScript"||e==="NS")?!1:typeof window<"u"&&typeof document<"u"})(),oZe=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",Vm={isBrowser:!0,classes:{URLSearchParams:rZe,FormData:iZe,Blob},isStandardBrowserEnv:sZe,isStandardBrowserWebWorkerEnv:oZe,protocols:["http","https","file","blob","url","data"]};function aZe(e,t){return OP(e,new Vm.classes.URLSearchParams,Object.assign({visitor:function(n,r,s,a){return Vm.isNode&&lr.isBuffer(n)?(this.append(r,n.toString("base64")),!1):a.defaultVisitor.apply(this,arguments)}},t))}function lZe(e){return lr.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function cZe(e){const t={},n=Object.keys(e);let r;const s=n.length;let a;for(r=0;r<s;r++)a=n[r],t[a]=e[a];return t}function Sue(e){function t(n,r,s,a){let c=n[a++];const i=Number.isFinite(+c),f=a>=n.length;return c=!c&&lr.isArray(s)?s.length:c,f?(lr.hasOwnProp(s,c)?s[c]=[s[c],r]:s[c]=r,!i):((!s[c]||!lr.isObject(s[c]))&&(s[c]=[]),t(n,r,s[c],a)&&lr.isArray(s[c])&&(s[c]=cZe(s[c])),!i)}if(lr.isFormData(e)&&lr.isFunction(e.entries)){const n={};return lr.forEachEntry(e,(r,s)=>{t(lZe(r),s,n,0)}),n}return null}const uZe={"Content-Type":void 0};function dZe(e,t,n){if(lr.isString(e))try{return(t||JSON.parse)(e),lr.trim(e)}catch(r){if(r.name!=="SyntaxError")throw r}return(n||JSON.stringify)(e)}const ab={transitional:Cue,adapter:["xhr","http"],transformRequest:[function(e,t){const n=t.getContentType()||"",r=n.indexOf("application/json")>-1,s=lr.isObject(e);if(s&&lr.isHTMLForm(e)&&(e=new FormData(e)),lr.isFormData(e))return r&&r?JSON.stringify(Sue(e)):e;if(lr.isArrayBuffer(e)||lr.isBuffer(e)||lr.isStream(e)||lr.isFile(e)||lr.isBlob(e))return e;if(lr.isArrayBufferView(e))return e.buffer;if(lr.isURLSearchParams(e))return t.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),e.toString();let a;if(s){if(n.indexOf("application/x-www-form-urlencoded")>-1)return aZe(e,this.formSerializer).toString();if((a=lr.isFileList(e))||n.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return OP(a?{"files[]":e}:e,c&&new c,this.formSerializer)}}return s||r?(t.setContentType("application/json",!1),dZe(e)):e}],transformResponse:[function(e){const t=this.transitional||ab.transitional,n=t&&t.forcedJSONParsing,r=this.responseType==="json";if(e&&lr.isString(e)&&(n&&!this.responseType||r)){const s=!(t&&t.silentJSONParsing)&&r;try{return JSON.parse(e)}catch(a){if(s)throw a.name==="SyntaxError"?ko.from(a,ko.ERR_BAD_RESPONSE,this,null,this.response):a}}return e}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Vm.classes.FormData,Blob:Vm.classes.Blob},validateStatus:function(e){return e>=200&&e<300},headers:{common:{Accept:"application/json, text/plain, */*"}}};lr.forEach(["delete","get","head"],function(e){ab.headers[e]={}});lr.forEach(["post","put","patch"],function(e){ab.headers[e]=lr.merge(uZe)});const hZe=lr.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),fZe=e=>{const t={};let n,r,s;return e&&e.split(`
`).forEach(function(a){s=a.indexOf(":"),n=a.substring(0,s).trim().toLowerCase(),r=a.substring(s+1).trim(),!(!n||t[n]&&hZe[n])&&(n==="set-cookie"?t[n]?t[n].push(r):t[n]=[r]:t[n]=t[n]?t[n]+", "+r:r)}),t},fX=Symbol("internals");function M2(e){return e&&String(e).trim().toLowerCase()}function lI(e){return e===!1||e==null?e:lr.isArray(e)?e.map(lI):String(e)}function pZe(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let r;for(;r=n.exec(e);)t[r[1]]=r[2];return t}function AZe(e){return/^[-_a-zA-Z]+$/.test(e.trim())}function pX(e,t,n,r){if(lr.isFunction(r))return r.call(this,t,n);if(lr.isString(t)){if(lr.isString(r))return t.indexOf(r)!==-1;if(lr.isRegExp(r))return r.test(t)}}function mZe(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,r)=>n.toUpperCase()+r)}function gZe(e,t){const n=lr.toCamelCase(" "+t);["get","set","has"].forEach(r=>{Object.defineProperty(e,r+n,{value:function(s,a,c){return this[r].call(this,t,s,a,c)},configurable:!0})})}class Vp{constructor(t){t&&this.set(t)}set(t,n,r){const s=this;function a(i,f,g){const y=M2(f);if(!y)throw new Error("header name must be a non-empty string");const b=lr.findKey(s,y);(!b||s[b]===void 0||g===!0||g===void 0&&s[b]!==!1)&&(s[b||f]=lI(i))}const c=(i,f)=>lr.forEach(i,(g,y)=>a(g,y,f));return lr.isPlainObject(t)||t instanceof this.constructor?c(t,n):lr.isString(t)&&(t=t.trim())&&!AZe(t)?c(fZe(t),n):t!=null&&a(n,t,r),this}get(t,n){if(t=M2(t),t){const r=lr.findKey(this,t);if(r){const s=this[r];if(!n)return s;if(n===!0)return pZe(s);if(lr.isFunction(n))return n.call(this,s,r);if(lr.isRegExp(n))return n.exec(s);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=M2(t),t){const r=lr.findKey(this,t);return!!(r&&(!n||pX(this,this[r],r,n)))}return!1}delete(t,n){const r=this;let s=!1;function a(c){if(c=M2(c),c){const i=lr.findKey(r,c);i&&(!n||pX(r,r[i],i,n))&&(delete r[i],s=!0)}}return lr.isArray(t)?t.forEach(a):a(t),s}clear(){return Object.keys(this).forEach(this.delete.bind(this))}normalize(t){const n=this,r={};return lr.forEach(this,(s,a)=>{const c=lr.findKey(r,a);if(c){n[c]=lI(s),delete n[a];return}const i=t?mZe(a):String(a).trim();i!==a&&delete n[a],n[i]=lI(s),r[i]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return lr.forEach(this,(r,s)=>{r!=null&&r!==!1&&(n[s]=t&&lr.isArray(r)?r.join(", "):r)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const r=new this(t);return n.forEach(s=>r.set(s)),r}static accessor(t){const n=(this[fX]=this[fX]={accessors:{}}).accessors,r=this.prototype;function s(a){const c=M2(a);n[c]||(gZe(r,a),n[c]=!0)}return lr.isArray(t)?t.forEach(s):s(t),this}}Vp.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent"]);lr.freezeMethods(Vp.prototype);lr.freezeMethods(Vp);function x5(e,t){const n=this||ab,r=t||n,s=Vp.from(r.headers);let a=r.data;return lr.forEach(e,function(c){a=c.call(n,a,s.normalize(),t?t.status:void 0)}),s.normalize(),a}function Bue(e){return!!(e&&e.__CANCEL__)}function JB(e,t,n){ko.call(this,e??"canceled",ko.ERR_CANCELED,t,n),this.name="CanceledError"}lr.inherits(JB,ko,{__CANCEL__:!0});const yZe=null;function vZe(e,t,n){const r=n.config.validateStatus;!n.status||!r||r(n.status)?e(n):t(new ko("Request failed with status code "+n.status,[ko.ERR_BAD_REQUEST,ko.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}const xZe=Vm.isStandardBrowserEnv?function(){return{write:function(e,t,n,r,s,a){const c=[];c.push(e+"="+encodeURIComponent(t)),lr.isNumber(n)&&c.push("expires="+new Date(n).toGMTString()),lr.isString(r)&&c.push("path="+r),lr.isString(s)&&c.push("domain="+s),a===!0&&c.push("secure"),document.cookie=c.join("; ")},read:function(e){const t=document.cookie.match(new RegExp("(^|;\\s*)("+e+")=([^;]*)"));return t?decodeURIComponent(t[3]):null},remove:function(e){this.write(e,"",Date.now()-864e5)}}}():function(){return{write:function(){},read:function(){return null},remove:function(){}}}();function _Ze(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function wZe(e,t){return t?e.replace(/\/+$/,"")+"/"+t.replace(/^\/+/,""):e}function Eue(e,t){return e&&!_Ze(t)?wZe(e,t):t}const bZe=Vm.isStandardBrowserEnv?function(){const e=/(msie|trident)/i.test(navigator.userAgent),t=document.createElement("a");let n;function r(s){let a=s;return e&&(t.setAttribute("href",a),a=t.href),t.setAttribute("href",a),{href:t.href,protocol:t.protocol?t.protocol.replace(/:$/,""):"",host:t.host,search:t.search?t.search.replace(/^\?/,""):"",hash:t.hash?t.hash.replace(/^#/,""):"",hostname:t.hostname,port:t.port,pathname:t.pathname.charAt(0)==="/"?t.pathname:"/"+t.pathname}}return n=r(window.location.href),function(s){const a=lr.isString(s)?r(s):s;return a.protocol===n.protocol&&a.host===n.host}}():function(){return function(){return!0}}();function CZe(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function SZe(e,t){e=e||10;const n=new Array(e),r=new Array(e);let s=0,a=0,c;return t=t!==void 0?t:1e3,function(i){const f=Date.now(),g=r[a];c||(c=f),n[s]=i,r[s]=f;let y=a,b=0;for(;y!==s;)b+=n[y++],y=y%e;if(s=(s+1)%e,s===a&&(a=(a+1)%e),f-c<t)return;const T=g&&f-g;return T?Math.round(b*1e3/T):void 0}}function AX(e,t){let n=0;const r=SZe(50,250);return s=>{const a=s.loaded,c=s.lengthComputable?s.total:void 0,i=a-n,f=r(i),g=a<=c;n=a;const y={loaded:a,total:c,progress:c?a/c:void 0,bytes:i,rate:f||void 0,estimated:f&&c&&g?(c-a)/f:void 0,event:s};y[t?"download":"upload"]=!0,e(y)}}const BZe=typeof XMLHttpRequest<"u",EZe=BZe&&function(e){return new Promise(function(t,n){let r=e.data;const s=Vp.from(e.headers).normalize(),a=e.responseType;let c;function i(){e.cancelToken&&e.cancelToken.unsubscribe(c),e.signal&&e.signal.removeEventListener("abort",c)}lr.isFormData(r)&&(Vm.isStandardBrowserEnv||Vm.isStandardBrowserWebWorkerEnv)&&s.setContentType(!1);let f=new XMLHttpRequest;if(e.auth){const T=e.auth.username||"",S=e.auth.password?unescape(encodeURIComponent(e.auth.password)):"";s.set("Authorization","Basic "+btoa(T+":"+S))}const g=Eue(e.baseURL,e.url);f.open(e.method.toUpperCase(),bue(g,e.params,e.paramsSerializer),!0),f.timeout=e.timeout;function y(){if(!f)return;const T=Vp.from("getAllResponseHeaders"in f&&f.getAllResponseHeaders()),S={data:!a||a==="text"||a==="json"?f.responseText:f.response,status:f.status,statusText:f.statusText,headers:T,config:e,request:f};vZe(function(U){t(U),i()},function(U){n(U),i()},S),f=null}if("onloadend"in f?f.onloadend=y:f.onreadystatechange=function(){!f||f.readyState!==4||f.status===0&&!(f.responseURL&&f.responseURL.indexOf("file:")===0)||setTimeout(y)},f.onabort=function(){f&&(n(new ko("Request aborted",ko.ECONNABORTED,e,f)),f=null)},f.onerror=function(){n(new ko("Network Error",ko.ERR_NETWORK,e,f)),f=null},f.ontimeout=function(){let T=e.timeout?"timeout of "+e.timeout+"ms exceeded":"timeout exceeded";const S=e.transitional||Cue;e.timeoutErrorMessage&&(T=e.timeoutErrorMessage),n(new ko(T,S.clarifyTimeoutError?ko.ETIMEDOUT:ko.ECONNABORTED,e,f)),f=null},Vm.isStandardBrowserEnv){const T=(e.withCredentials||bZe(g))&&e.xsrfCookieName&&xZe.read(e.xsrfCookieName);T&&s.set(e.xsrfHeaderName,T)}r===void 0&&s.setContentType(null),"setRequestHeader"in f&&lr.forEach(s.toJSON(),function(T,S){f.setRequestHeader(S,T)}),lr.isUndefined(e.withCredentials)||(f.withCredentials=!!e.withCredentials),a&&a!=="json"&&(f.responseType=e.responseType),typeof e.onDownloadProgress=="function"&&f.addEventListener("progress",AX(e.onDownloadProgress,!0)),typeof e.onUploadProgress=="function"&&f.upload&&f.upload.addEventListener("progress",AX(e.onUploadProgress)),(e.cancelToken||e.signal)&&(c=T=>{f&&(n(!T||T.type?new JB(null,e,f):T),f.abort(),f=null)},e.cancelToken&&e.cancelToken.subscribe(c),e.signal&&(e.signal.aborted?c():e.signal.addEventListener("abort",c)));const b=CZe(g);if(b&&Vm.protocols.indexOf(b)===-1){n(new ko("Unsupported protocol "+b+":",ko.ERR_BAD_REQUEST,e));return}f.send(r||null)})},cI={http:yZe,xhr:EZe};lr.forEach(cI,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const TZe={getAdapter:e=>{e=lr.isArray(e)?e:[e];const{length:t}=e;let n,r;for(let s=0;s<t&&(n=e[s],!(r=lr.isString(n)?cI[n.toLowerCase()]:n));s++);if(!r)throw r===!1?new ko(`Adapter ${n} is not supported by the environment`,"ERR_NOT_SUPPORT"):new Error(lr.hasOwnProp(cI,n)?`Adapter '${n}' is not available in the build`:`Unknown adapter '${n}'`);if(!lr.isFunction(r))throw new TypeError("adapter is not a function");return r},adapters:cI};function _5(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new JB(null,e)}function mX(e){return _5(e),e.headers=Vp.from(e.headers),e.data=x5.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),TZe.getAdapter(e.adapter||ab.adapter)(e).then(function(t){return _5(e),t.data=x5.call(e,e.transformResponse,t),t.headers=Vp.from(t.headers),t},function(t){return Bue(t)||(_5(e),t&&t.response&&(t.response.data=x5.call(e,e.transformResponse,t.response),t.response.headers=Vp.from(t.response.headers))),Promise.reject(t)})}const gX=e=>e instanceof Vp?e.toJSON():e;function Mw(e,t){t=t||{};const n={};function r(g,y,b){return lr.isPlainObject(g)&&lr.isPlainObject(y)?lr.merge.call({caseless:b},g,y):lr.isPlainObject(y)?lr.merge({},y):lr.isArray(y)?y.slice():y}function s(g,y,b){if(lr.isUndefined(y)){if(!lr.isUndefined(g))return r(void 0,g,b)}else return r(g,y,b)}function a(g,y){if(!lr.isUndefined(y))return r(void 0,y)}function c(g,y){if(lr.isUndefined(y)){if(!lr.isUndefined(g))return r(void 0,g)}else return r(void 0,y)}function i(g,y,b){if(b in t)return r(g,y);if(b in e)return r(void 0,g)}const f={url:a,method:a,data:a,baseURL:c,transformRequest:c,transformResponse:c,paramsSerializer:c,timeout:c,timeoutMessage:c,withCredentials:c,adapter:c,responseType:c,xsrfCookieName:c,xsrfHeaderName:c,onUploadProgress:c,onDownloadProgress:c,decompress:c,maxContentLength:c,maxBodyLength:c,beforeRedirect:c,transport:c,httpAgent:c,httpsAgent:c,cancelToken:c,socketPath:c,responseEncoding:c,validateStatus:i,headers:(g,y)=>s(gX(g),gX(y),!0)};return lr.forEach(Object.keys(e).concat(Object.keys(t)),function(g){const y=f[g]||s,b=y(e[g],t[g],g);lr.isUndefined(b)&&y!==i||(n[g]=b)}),n}const Tue="1.2.5",J7={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{J7[e]=function(n){return typeof n===e||"a"+(t<1?"n ":" ")+e}});const yX={};J7.transitional=function(e,t,n){function r(s,a){return"[Axios v"+Tue+"] Transitional option '"+s+"'"+a+(n?". "+n:"")}return(s,a,c)=>{if(e===!1)throw new ko(r(a," has been removed"+(t?" in "+t:"")),ko.ERR_DEPRECATED);return t&&!yX[a]&&(yX[a]=!0,console.warn(r(a," has been deprecated since v"+t+" and will be removed in the near future"))),e?e(s,a,c):!0}};function IZe(e,t,n){if(typeof e!="object")throw new ko("options must be an object",ko.ERR_BAD_OPTION_VALUE);const r=Object.keys(e);let s=r.length;for(;s-- >0;){const a=r[s],c=t[a];if(c){const i=e[a],f=i===void 0||c(i,a,e);if(f!==!0)throw new ko("option "+a+" must be "+f,ko.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new ko("Unknown option "+a,ko.ERR_BAD_OPTION)}}const YD={assertOptions:IZe,validators:J7},q0=YD.validators;class wx{constructor(t){this.defaults=t,this.interceptors={request:new hX,response:new hX}}request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=Mw(this.defaults,n);const{transitional:r,paramsSerializer:s,headers:a}=n;r!==void 0&&YD.assertOptions(r,{silentJSONParsing:q0.transitional(q0.boolean),forcedJSONParsing:q0.transitional(q0.boolean),clarifyTimeoutError:q0.transitional(q0.boolean)},!1),s!==void 0&&YD.assertOptions(s,{encode:q0.function,serialize:q0.function},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let c;c=a&&lr.merge(a.common,a[n.method]),c&&lr.forEach(["delete","get","head","post","put","patch","common"],U=>{delete a[U]}),n.headers=Vp.concat(c,a);const i=[];let f=!0;this.interceptors.request.forEach(function(U){typeof U.runWhen=="function"&&U.runWhen(n)===!1||(f=f&&U.synchronous,i.unshift(U.fulfilled,U.rejected))});const g=[];this.interceptors.response.forEach(function(U){g.push(U.fulfilled,U.rejected)});let y,b=0,T;if(!f){const U=[mX.bind(this),void 0];for(U.unshift.apply(U,i),U.push.apply(U,g),T=U.length,y=Promise.resolve(n);b<T;)y=y.then(U[b++],U[b++]);return y}T=i.length;let S=n;for(b=0;b<T;){const U=i[b++],N=i[b++];try{S=U(S)}catch(W){N.call(this,W);break}}try{y=mX.call(this,S)}catch(U){return Promise.reject(U)}for(b=0,T=g.length;b<T;)y=y.then(g[b++],g[b++]);return y}getUri(t){t=Mw(this.defaults,t);const n=Eue(t.baseURL,t.url);return bue(n,t.params,t.paramsSerializer)}}lr.forEach(["delete","get","head","options"],function(e){wx.prototype[e]=function(t,n){return this.request(Mw(n||{},{method:e,url:t,data:(n||{}).data}))}});lr.forEach(["post","put","patch"],function(e){function t(n){return function(r,s,a){return this.request(Mw(a||{},{method:e,headers:n?{"Content-Type":"multipart/form-data"}:{},url:r,data:s}))}}wx.prototype[e]=t(),wx.prototype[e+"Form"]=t(!0)});class eQ{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(s){n=s});const r=this;this.promise.then(s=>{if(!r._listeners)return;let a=r._listeners.length;for(;a-- >0;)r._listeners[a](s);r._listeners=null}),this.promise.then=s=>{let a;const c=new Promise(i=>{r.subscribe(i),a=i}).then(s);return c.cancel=function(){r.unsubscribe(a)},c},t(function(s,a,c){r.reason||(r.reason=new JB(s,a,c),n(r.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}static source(){let t;return{token:new eQ(function(n){t=n}),cancel:t}}}function jZe(e){return function(t){return e.apply(null,t)}}function FZe(e){return lr.isObject(e)&&e.isAxiosError===!0}const JD={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511};Object.entries(JD).forEach(([e,t])=>{JD[t]=e});function Iue(e){const t=new wx(e),n=due(wx.prototype.request,t);return lr.extend(n,wx.prototype,t,{allOwnKeys:!0}),lr.extend(n,t,null,{allOwnKeys:!0}),n.create=function(r){return Iue(Mw(e,r))},n}const xu=Iue(ab);xu.Axios=wx;xu.CanceledError=JB;xu.CancelToken=eQ;xu.isCancel=Bue;xu.VERSION=Tue;xu.toFormData=OP;xu.AxiosError=ko;xu.Cancel=xu.CanceledError;xu.all=function(e){return Promise.all(e)};xu.spread=jZe;xu.isAxiosError=FZe;xu.mergeConfig=Mw;xu.AxiosHeaders=Vp;xu.formToJSON=e=>Sue(lr.isHTMLForm(e)?new FormData(e):e);xu.HttpStatusCode=JD;xu.default=xu;const jue={},PZe=Object.freeze(Object.defineProperty({__proto__:null,default:jue},Symbol.toStringTag,{value:"Module"}));var Fue=Object,kZe=Error,LZe=EvalError,MZe=RangeError,NZe=ReferenceError,Pue=SyntaxError,eE=TypeError,RZe=URIError,OZe=Math.abs,DZe=Math.floor,UZe=Math.max,zZe=Math.min,QZe=Math.pow,HZe=Math.round,VZe=Number.isNaN||function(e){return e!==e},$Ze=VZe,GZe=function(e){return $Ze(e)||e===0?e:e<0?-1:1},KZe=Object.getOwnPropertyDescriptor,uI=KZe;if(uI)try{uI([],"length")}catch{uI=null}var DP=uI,dI=Object.defineProperty||!1;if(dI)try{dI({},"a",{value:1})}catch{dI=!1}var UP=dI,vX,xX;function WZe(){return xX||(xX=1,vX=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var e={},t=Symbol("test"),n=Object(t);if(typeof t=="string"||Object.prototype.toString.call(t)!=="[object Symbol]"||Object.prototype.toString.call(n)!=="[object Symbol]")return!1;var r=42;e[t]=r;for(var s in e)return!1;if(typeof Object.keys=="function"&&Object.keys(e).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(e).length!==0)return!1;var a=Object.getOwnPropertySymbols(e);if(a.length!==1||a[0]!==t||!Object.prototype.propertyIsEnumerable.call(e,t))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var c=Object.getOwnPropertyDescriptor(e,t);if(c.value!==r||c.enumerable!==!0)return!1}return!0}),vX}var w5,_X;function qZe(){if(_X)return w5;_X=1;var e=typeof Symbol<"u"&&Symbol,t=WZe();return w5=function(){return typeof e!="function"||typeof Symbol!="function"||typeof e("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:t()},w5}var wX,bX;function kue(){return bX||(bX=1,wX=typeof Reflect<"u"&&Reflect.getPrototypeOf||null),wX}var b5,CX;function Lue(){if(CX)return b5;CX=1;var e=Fue;return b5=e.getPrototypeOf||null,b5}var C5,SX;function ZZe(){if(SX)return C5;SX=1;var e="Function.prototype.bind called on incompatible ",t=Object.prototype.toString,n=Math.max,r="[object Function]",s=function(i,f){for(var g=[],y=0;y<i.length;y+=1)g[y]=i[y];for(var b=0;b<f.length;b+=1)g[b+i.length]=f[b];return g},a=function(i,f){for(var g=[],y=f,b=0;y<i.length;y+=1,b+=1)g[b]=i[y];return g},c=function(i,f){for(var g="",y=0;y<i.length;y+=1)g+=i[y],y+1<i.length&&(g+=f);return g};return C5=function(i){var f=this;if(typeof f!="function"||t.apply(f)!==r)throw new TypeError(e+f);for(var g=a(arguments,1),y,b=function(){if(this instanceof y){var W=f.apply(this,s(g,arguments));return Object(W)===W?W:this}return f.apply(i,s(g,arguments))},T=n(0,f.length-g.length),S=[],U=0;U<T;U++)S[U]="$"+U;if(y=Function("binder","return function ("+c(S,",")+"){ return binder.apply(this,arguments); }")(b),f.prototype){var N=function(){};N.prototype=f.prototype,y.prototype=new N,N.prototype=null}return y},C5}var S5,BX;function tE(){if(BX)return S5;BX=1;var e=ZZe();return S5=Function.prototype.bind||e,S5}var EX,TX;function tQ(){return TX||(TX=1,EX=Function.prototype.call),EX}var IX,jX;function Mue(){return jX||(jX=1,IX=Function.prototype.apply),IX}var FX,PX;function XZe(){return PX||(PX=1,FX=typeof Reflect<"u"&&Reflect&&Reflect.apply),FX}var B5,kX;function YZe(){if(kX)return B5;kX=1;var e=tE(),t=Mue(),n=tQ(),r=XZe();return B5=r||e.call(n,t),B5}var E5,LX;function JZe(){if(LX)return E5;LX=1;var e=tE(),t=eE,n=tQ(),r=YZe();return E5=function(s){if(s.length<1||typeof s[0]!="function")throw new t("a function is required");return r(e,n,s)},E5}var T5,MX;function eXe(){if(MX)return T5;MX=1;var e=JZe(),t=DP,n;try{n=[].__proto__===Array.prototype}catch(c){if(!c||typeof c!="object"||!("code"in c)||c.code!=="ERR_PROTO_ACCESS")throw c}var r=!!n&&t&&t(Object.prototype,"__proto__"),s=Object,a=s.getPrototypeOf;return T5=r&&typeof r.get=="function"?e([r.get]):typeof a=="function"?function(c){return a(c==null?c:s(c))}:!1,T5}var I5,NX;function tXe(){if(NX)return I5;NX=1;var e=kue(),t=Lue(),n=eXe();return I5=e?function(r){return e(r)}:t?function(r){if(!r||typeof r!="object"&&typeof r!="function")throw new TypeError("getProto: not an object");return t(r)}:n?function(r){return n(r)}:null,I5}var j5,RX;function nXe(){if(RX)return j5;RX=1;var e=Function.prototype.call,t=Object.prototype.hasOwnProperty,n=tE();return j5=n.call(e,t),j5}var Ao,rXe=Fue,iXe=kZe,sXe=LZe,oXe=MZe,aXe=NZe,Nw=Pue,sw=eE,lXe=RZe,cXe=OZe,uXe=DZe,dXe=UZe,hXe=zZe,fXe=QZe,pXe=HZe,AXe=GZe,Nue=Function,F5=function(e){try{return Nue('"use strict"; return ('+e+").constructor;")()}catch{}},$S=DP,mXe=UP,P5=function(){throw new sw},gXe=$S?function(){try{return arguments.callee,P5}catch{try{return $S(arguments,"callee").get}catch{return P5}}}():P5,o1=qZe()(),mu=tXe(),yXe=Lue(),vXe=kue(),Rue=Mue(),nE=tQ(),y1={},xXe=typeof Uint8Array>"u"||!mu?Ao:mu(Uint8Array),bx={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?Ao:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?Ao:ArrayBuffer,"%ArrayIteratorPrototype%":o1&&mu?mu([][Symbol.iterator]()):Ao,"%AsyncFromSyncIteratorPrototype%":Ao,"%AsyncFunction%":y1,"%AsyncGenerator%":y1,"%AsyncGeneratorFunction%":y1,"%AsyncIteratorPrototype%":y1,"%Atomics%":typeof Atomics>"u"?Ao:Atomics,"%BigInt%":typeof BigInt>"u"?Ao:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?Ao:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?Ao:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?Ao:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":iXe,"%eval%":eval,"%EvalError%":sXe,"%Float32Array%":typeof Float32Array>"u"?Ao:Float32Array,"%Float64Array%":typeof Float64Array>"u"?Ao:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?Ao:FinalizationRegistry,"%Function%":Nue,"%GeneratorFunction%":y1,"%Int8Array%":typeof Int8Array>"u"?Ao:Int8Array,"%Int16Array%":typeof Int16Array>"u"?Ao:Int16Array,"%Int32Array%":typeof Int32Array>"u"?Ao:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":o1&&mu?mu(mu([][Symbol.iterator]())):Ao,"%JSON%":typeof JSON=="object"?JSON:Ao,"%Map%":typeof Map>"u"?Ao:Map,"%MapIteratorPrototype%":typeof Map>"u"||!o1||!mu?Ao:mu(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":rXe,"%Object.getOwnPropertyDescriptor%":$S,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?Ao:Promise,"%Proxy%":typeof Proxy>"u"?Ao:Proxy,"%RangeError%":oXe,"%ReferenceError%":aXe,"%Reflect%":typeof Reflect>"u"?Ao:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?Ao:Set,"%SetIteratorPrototype%":typeof Set>"u"||!o1||!mu?Ao:mu(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?Ao:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":o1&&mu?mu(""[Symbol.iterator]()):Ao,"%Symbol%":o1?Symbol:Ao,"%SyntaxError%":Nw,"%ThrowTypeError%":gXe,"%TypedArray%":xXe,"%TypeError%":sw,"%Uint8Array%":typeof Uint8Array>"u"?Ao:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?Ao:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?Ao:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?Ao:Uint32Array,"%URIError%":lXe,"%WeakMap%":typeof WeakMap>"u"?Ao:WeakMap,"%WeakRef%":typeof WeakRef>"u"?Ao:WeakRef,"%WeakSet%":typeof WeakSet>"u"?Ao:WeakSet,"%Function.prototype.call%":nE,"%Function.prototype.apply%":Rue,"%Object.defineProperty%":mXe,"%Object.getPrototypeOf%":yXe,"%Math.abs%":cXe,"%Math.floor%":uXe,"%Math.max%":dXe,"%Math.min%":hXe,"%Math.pow%":fXe,"%Math.round%":pXe,"%Math.sign%":AXe,"%Reflect.getPrototypeOf%":vXe};if(mu)try{null.error}catch(e){var _Xe=mu(mu(e));bx["%Error.prototype%"]=_Xe}var wXe=function e(t){var n;if(t==="%AsyncFunction%")n=F5("async function () {}");else if(t==="%GeneratorFunction%")n=F5("function* () {}");else if(t==="%AsyncGeneratorFunction%")n=F5("async function* () {}");else if(t==="%AsyncGenerator%"){var r=e("%AsyncGeneratorFunction%");r&&(n=r.prototype)}else if(t==="%AsyncIteratorPrototype%"){var s=e("%AsyncGenerator%");s&&mu&&(n=mu(s.prototype))}return bx[t]=n,n},OX={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},rE=tE(),Vj=nXe(),bXe=rE.call(nE,Array.prototype.concat),CXe=rE.call(Rue,Array.prototype.splice),DX=rE.call(nE,String.prototype.replace),$j=rE.call(nE,String.prototype.slice),SXe=rE.call(nE,RegExp.prototype.exec),BXe=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,EXe=/\\(\\)?/g,TXe=function(e){var t=$j(e,0,1),n=$j(e,-1);if(t==="%"&&n!=="%")throw new Nw("invalid intrinsic syntax, expected closing `%`");if(n==="%"&&t!=="%")throw new Nw("invalid intrinsic syntax, expected opening `%`");var r=[];return DX(e,BXe,function(s,a,c,i){r[r.length]=c?DX(i,EXe,"$1"):a||s}),r},IXe=function(e,t){var n=e,r;if(Vj(OX,n)&&(r=OX[n],n="%"+r[0]+"%"),Vj(bx,n)){var s=bx[n];if(s===y1&&(s=wXe(n)),typeof s>"u"&&!t)throw new sw("intrinsic "+e+" exists, but is not available. Please file an issue!");return{alias:r,name:n,value:s}}throw new Nw("intrinsic "+e+" does not exist!")},zP=function(e,t){if(typeof e!="string"||e.length===0)throw new sw("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof t!="boolean")throw new sw('"allowMissing" argument must be a boolean');if(SXe(/^%?[^%]*%?$/,e)===null)throw new Nw("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var n=TXe(e),r=n.length>0?n[0]:"",s=IXe("%"+r+"%",t),a=s.name,c=s.value,i=!1,f=s.alias;f&&(r=f[0],CXe(n,bXe([0,1],f)));for(var g=1,y=!0;g<n.length;g+=1){var b=n[g],T=$j(b,0,1),S=$j(b,-1);if((T==='"'||T==="'"||T==="`"||S==='"'||S==="'"||S==="`")&&T!==S)throw new Nw("property names with quotes must have matching quotes");if((b==="constructor"||!y)&&(i=!0),r+="."+b,a="%"+r+"%",Vj(bx,a))c=bx[a];else if(c!=null){if(!(b in c)){if(!t)throw new sw("base intrinsic for "+e+" exists, but the property is not available.");return}if($S&&g+1>=n.length){var U=$S(c,b);y=!!U,y&&"get"in U&&!("originalValue"in U.get)?c=U.get:c=c[b]}else y=Vj(c,b),c=c[b];y&&!i&&(bx[a]=c)}}return c},Oue={exports:{}},UX=UP,jXe=Pue,a1=eE,zX=DP,FXe=function(e,t,n){if(!e||typeof e!="object"&&typeof e!="function")throw new a1("`obj` must be an object or a function`");if(typeof t!="string"&&typeof t!="symbol")throw new a1("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new a1("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new a1("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new a1("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new a1("`loose`, if provided, must be a boolean");var r=arguments.length>3?arguments[3]:null,s=arguments.length>4?arguments[4]:null,a=arguments.length>5?arguments[5]:null,c=arguments.length>6?arguments[6]:!1,i=!!zX&&zX(e,t);if(UX)UX(e,t,{configurable:a===null&&i?i.configurable:!a,enumerable:r===null&&i?i.enumerable:!r,value:n,writable:s===null&&i?i.writable:!s});else if(c||!r&&!s&&!a)e[t]=n;else throw new jXe("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},e6=UP,Due=function(){return!!e6};Due.hasArrayLengthDefineBug=function(){if(!e6)return null;try{return e6([],"length",{value:1}).length!==1}catch{return!0}};var PXe=Due,kXe=zP,QX=FXe,LXe=PXe(),HX=DP,VX=eE,MXe=kXe("%Math.floor%"),NXe=function(e,t){if(typeof e!="function")throw new VX("`fn` is not a function");if(typeof t!="number"||t<0||t>4294967295||MXe(t)!==t)throw new VX("`length` must be a positive 32-bit integer");var n=arguments.length>2&&!!arguments[2],r=!0,s=!0;if("length"in e&&HX){var a=HX(e,"length");a&&!a.configurable&&(r=!1),a&&!a.writable&&(s=!1)}return(r||s||!n)&&(LXe?QX(e,"length",t,!0,!0):QX(e,"length",t)),e};(function(e){var t=tE(),n=zP,r=NXe,s=eE,a=n("%Function.prototype.apply%"),c=n("%Function.prototype.call%"),i=n("%Reflect.apply%",!0)||t.call(c,a),f=UP,g=n("%Math.max%");e.exports=function(b){if(typeof b!="function")throw new s("a function is required");var T=i(t,c,arguments);return r(T,1+g(0,b.length-(arguments.length-1)),!0)};var y=function(){return i(t,a,arguments)};f?f(e.exports,"apply",{value:y}):e.exports.apply=y})(Oue);var RXe=Oue.exports,Uue=zP,zue=RXe,OXe=zue(Uue("String.prototype.indexOf")),DXe=function(e,t){var n=Uue(e,!!t);return typeof n=="function"&&OXe(e,".prototype.")>-1?zue(n):n};const UXe=ewe(PZe);var Que=typeof Map=="function"&&Map.prototype,k5=Object.getOwnPropertyDescriptor&&Que?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null;Que&&k5&&typeof k5.get=="function"&&k5.get;var Hue=typeof Set=="function"&&Set.prototype,L5=Object.getOwnPropertyDescriptor&&Hue?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null;Hue&&L5&&typeof L5.get=="function"&&L5.get;var $X=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,zXe=typeof Symbol=="function"&&typeof Symbol.iterator=="object",QXe=UXe,GX=QXe.custom;HXe(GX);function HXe(e){if(zXe)return e&&typeof e=="object"&&e instanceof Symbol;if(typeof e=="symbol")return!0;if(!e||typeof e!="object"||!$X)return!1;try{return $X.call(e),!0}catch{}return!1}var Vue=zP,lb=DXe;Vue("%WeakMap%",!0);Vue("%Map%",!0);lb("WeakMap.prototype.get",!0);lb("WeakMap.prototype.set",!0);lb("WeakMap.prototype.has",!0);lb("Map.prototype.get",!0);lb("Map.prototype.set",!0);lb("Map.prototype.has",!0);var VXe=String.prototype.replace,$Xe=/%20/g,M5={RFC1738:"RFC1738",RFC3986:"RFC3986"},$ue={default:M5.RFC3986,formatters:{RFC1738:function(e){return VXe.call(e,$Xe,"+")},RFC3986:function(e){return String(e)}},RFC1738:M5.RFC1738,RFC3986:M5.RFC3986},GXe=$ue,N5=Object.prototype.hasOwnProperty,sx=Array.isArray,Mm=function(){for(var e=[],t=0;t<256;++t)e.push("%"+((t<16?"0":"")+t.toString(16)).toUpperCase());return e}(),KXe=function(e){for(;e.length>1;){var t=e.pop(),n=t.obj[t.prop];if(sx(n)){for(var r=[],s=0;s<n.length;++s)typeof n[s]<"u"&&r.push(n[s]);t.obj[t.prop]=r}}},Gue=function(e,t){for(var n=t&&t.plainObjects?Object.create(null):{},r=0;r<e.length;++r)typeof e[r]<"u"&&(n[r]=e[r]);return n},WXe=function e(t,n,r){if(!n)return t;if(typeof n!="object"){if(sx(t))t.push(n);else if(t&&typeof t=="object")(r&&(r.plainObjects||r.allowPrototypes)||!N5.call(Object.prototype,n))&&(t[n]=!0);else return[t,n];return t}if(!t||typeof t!="object")return[t].concat(n);var s=t;return sx(t)&&!sx(n)&&(s=Gue(t,r)),sx(t)&&sx(n)?(n.forEach(function(a,c){if(N5.call(t,c)){var i=t[c];i&&typeof i=="object"&&a&&typeof a=="object"?t[c]=e(i,a,r):t.push(a)}else t[c]=a}),t):Object.keys(n).reduce(function(a,c){var i=n[c];return N5.call(a,c)?a[c]=e(a[c],i,r):a[c]=i,a},s)},qXe=function(e,t){return Object.keys(t).reduce(function(n,r){return n[r]=t[r],n},e)},ZXe=function(e,t,n){var r=e.replace(/\+/g," ");if(n==="iso-8859-1")return r.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(r)}catch{return r}},R5=1024,XXe=function(e,t,n,r,s){if(e.length===0)return e;var a=e;if(typeof e=="symbol"?a=Symbol.prototype.toString.call(e):typeof e!="string"&&(a=String(e)),n==="iso-8859-1")return escape(a).replace(/%u[0-9a-f]{4}/gi,function(T){return"%26%23"+parseInt(T.slice(2),16)+"%3B"});for(var c="",i=0;i<a.length;i+=R5){for(var f=a.length>=R5?a.slice(i,i+R5):a,g=[],y=0;y<f.length;++y){var b=f.charCodeAt(y);if(b===45||b===46||b===95||b===126||b>=48&&b<=57||b>=65&&b<=90||b>=97&&b<=122||s===GXe.RFC1738&&(b===40||b===41)){g[g.length]=f.charAt(y);continue}if(b<128){g[g.length]=Mm[b];continue}if(b<2048){g[g.length]=Mm[192|b>>6]+Mm[128|b&63];continue}if(b<55296||b>=57344){g[g.length]=Mm[224|b>>12]+Mm[128|b>>6&63]+Mm[128|b&63];continue}y+=1,b=65536+((b&1023)<<10|f.charCodeAt(y)&1023),g[g.length]=Mm[240|b>>18]+Mm[128|b>>12&63]+Mm[128|b>>6&63]+Mm[128|b&63]}c+=g.join("")}return c},YXe=function(e){for(var t=[{obj:{o:e},prop:"o"}],n=[],r=0;r<t.length;++r)for(var s=t[r],a=s.obj[s.prop],c=Object.keys(a),i=0;i<c.length;++i){var f=c[i],g=a[f];typeof g=="object"&&g!==null&&n.indexOf(g)===-1&&(t.push({obj:a,prop:f}),n.push(g))}return KXe(t),e},JXe=function(e){return Object.prototype.toString.call(e)==="[object RegExp]"},eYe=function(e){return!e||typeof e!="object"?!1:!!(e.constructor&&e.constructor.isBuffer&&e.constructor.isBuffer(e))},tYe=function(e,t){return[].concat(e,t)},nYe=function(e,t){if(sx(e)){for(var n=[],r=0;r<e.length;r+=1)n.push(t(e[r]));return n}return t(e)},rYe={arrayToObject:Gue,assign:qXe,combine:tYe,compact:YXe,decode:ZXe,encode:XXe,isBuffer:eYe,isRegExp:JXe,maybeMap:nYe,merge:WXe},iYe=rYe,Kue=$ue,sYe=Date.prototype.toISOString,KX=Kue.default;iYe.encode,Kue.formatters[KX];var t6={exports:{}};/** @license
 * eventsource.js
 * Available under MIT License (MIT)
 * https://github.com/Yaffle/EventSource/
 */(function(e,t){(function(n){var r=n.setTimeout,s=n.clearTimeout,a=n.XMLHttpRequest,c=n.XDomainRequest,i=n.ActiveXObject,f=n.EventSource,g=n.document,y=n.Promise,b=n.fetch,T=n.Response,S=n.TextDecoder,U=n.TextEncoder,N=n.AbortController;if(typeof window<"u"&&typeof g<"u"&&!("readyState"in g)&&g.body==null&&(g.readyState="loading",window.addEventListener("load",function(Oe){g.readyState="complete"},!1)),a==null&&i!=null&&(a=function(){return new i("Microsoft.XMLHTTP")}),Object.create==null&&(Object.create=function(Oe){function nn(){}return nn.prototype=Oe,new nn}),Date.now||(Date.now=function(){return new Date().getTime()}),N==null){var W=b;b=function(Oe,nn){var Vt=nn.signal;return W(Oe,{headers:nn.headers,credentials:nn.credentials,cache:nn.cache}).then(function($t){var xn=$t.body.getReader();return Vt._reader=xn,Vt._aborted&&Vt._reader.cancel(),{status:$t.status,statusText:$t.statusText,headers:$t.headers,body:{getReader:function(){return xn}}}})},N=function(){this.signal={_reader:null,_aborted:!1},this.abort=function(){this.signal._reader!=null&&this.signal._reader.cancel(),this.signal._aborted=!0}}}function L(){this.bitsNeeded=0,this.codePoint=0}L.prototype.decode=function(Oe){function nn(Rn,wt,qt){if(qt===1)return Rn>=128>>wt&&Rn<<wt<=2047;if(qt===2)return Rn>=2048>>wt&&Rn<<wt<=55295||Rn>=57344>>wt&&Rn<<wt<=65535;if(qt===3)return Rn>=65536>>wt&&Rn<<wt<=1114111;throw new Error}function Vt(Rn,wt){if(Rn===6*1)return wt>>6>15?3:wt>31?2:1;if(Rn===6*2)return wt>15?3:2;if(Rn===6*3)return 3;throw new Error}for(var $t=65533,xn="",Xt=this.bitsNeeded,gn=this.codePoint,rr=0;rr<Oe.length;rr+=1){var Gt=Oe[rr];Xt!==0&&(Gt<128||Gt>191||!nn(gn<<6|Gt&63,Xt-6,Vt(Xt,gn)))&&(Xt=0,gn=$t,xn+=String.fromCharCode(gn)),Xt===0?(Gt>=0&&Gt<=127?(Xt=0,gn=Gt):Gt>=192&&Gt<=223?(Xt=6*1,gn=Gt&31):Gt>=224&&Gt<=239?(Xt=6*2,gn=Gt&15):Gt>=240&&Gt<=247?(Xt=6*3,gn=Gt&7):(Xt=0,gn=$t),Xt!==0&&!nn(gn,Xt,Vt(Xt,gn))&&(Xt=0,gn=$t)):(Xt-=6,gn=gn<<6|Gt&63),Xt===0&&(gn<=65535?xn+=String.fromCharCode(gn):(xn+=String.fromCharCode(55296+(gn-65535-1>>10)),xn+=String.fromCharCode(56320+(gn-65535-1&1023))))}return this.bitsNeeded=Xt,this.codePoint=gn,xn};var Q=function(){try{return new S().decode(new U().encode("test"),{stream:!0})==="test"}catch(Oe){console.debug("TextDecoder does not support streaming option. Using polyfill instead: "+Oe)}return!1};(S==null||U==null||!Q())&&(S=L);var V=function(){};function Z(Oe){this.withCredentials=!1,this.readyState=0,this.status=0,this.statusText="",this.responseText="",this.onprogress=V,this.onload=V,this.onerror=V,this.onreadystatechange=V,this._contentType="",this._xhr=Oe,this._sendTimeout=0,this._abort=V}Z.prototype.open=function(Oe,nn){this._abort(!0);var Vt=this,$t=this._xhr,xn=1,Xt=0;this._abort=function(qt){Vt._sendTimeout!==0&&(s(Vt._sendTimeout),Vt._sendTimeout=0),(xn===1||xn===2||xn===3)&&(xn=4,$t.onload=V,$t.onerror=V,$t.onabort=V,$t.onprogress=V,$t.onreadystatechange=V,$t.abort(),Xt!==0&&(s(Xt),Xt=0),qt||(Vt.readyState=4,Vt.onabort(null),Vt.onreadystatechange())),xn=0};var gn=function(){if(xn===1){var qt=0,fn="",Un=void 0;if("contentType"in $t)qt=200,fn="OK",Un=$t.contentType;else try{qt=$t.status,fn=$t.statusText,Un=$t.getResponseHeader("Content-Type")}catch{qt=0,fn="",Un=void 0}qt!==0&&(xn=2,Vt.readyState=2,Vt.status=qt,Vt.statusText=fn,Vt._contentType=Un,Vt.onreadystatechange())}},rr=function(){if(gn(),xn===2||xn===3){xn=3;var qt="";try{qt=$t.responseText}catch{}Vt.readyState=3,Vt.responseText=qt,Vt.onprogress()}},Gt=function(qt,fn){if((fn==null||fn.preventDefault==null)&&(fn={preventDefault:V}),rr(),xn===1||xn===2||xn===3){if(xn=4,Xt!==0&&(s(Xt),Xt=0),Vt.readyState=4,qt==="load")Vt.onload(fn);else if(qt==="error")Vt.onerror(fn);else if(qt==="abort")Vt.onabort(fn);else throw new TypeError;Vt.onreadystatechange()}},Rn=function(qt){$t!=null&&($t.readyState===4?(!("onload"in $t)||!("onerror"in $t)||!("onabort"in $t))&&Gt($t.responseText===""?"error":"load",qt):$t.readyState===3?"onprogress"in $t||rr():$t.readyState===2&&gn())},wt=function(){Xt=r(function(){wt()},500),$t.readyState===3&&rr()};"onload"in $t&&($t.onload=function(qt){Gt("load",qt)}),"onerror"in $t&&($t.onerror=function(qt){Gt("error",qt)}),"onabort"in $t&&($t.onabort=function(qt){Gt("abort",qt)}),"onprogress"in $t&&($t.onprogress=rr),"onreadystatechange"in $t&&($t.onreadystatechange=function(qt){Rn(qt)}),("contentType"in $t||!("ontimeout"in a.prototype))&&(nn+=(nn.indexOf("?")===-1?"?":"&")+"padding=true"),$t.open(Oe,nn,!0),"readyState"in $t&&(Xt=r(function(){wt()},0))},Z.prototype.abort=function(){this._abort(!1)},Z.prototype.getResponseHeader=function(Oe){return this._contentType},Z.prototype.setRequestHeader=function(Oe,nn){var Vt=this._xhr;"setRequestHeader"in Vt&&Vt.setRequestHeader(Oe,nn)},Z.prototype.getAllResponseHeaders=function(){return this._xhr.getAllResponseHeaders!=null&&this._xhr.getAllResponseHeaders()||""},Z.prototype.send=function(){if((!("ontimeout"in a.prototype)||!("sendAsBinary"in a.prototype)&&!("mozAnon"in a.prototype))&&g!=null&&g.readyState!=null&&g.readyState!=="complete"){var Oe=this;Oe._sendTimeout=r(function(){Oe._sendTimeout=0,Oe.send()},4);return}var nn=this._xhr;"withCredentials"in nn&&(nn.withCredentials=this.withCredentials);try{nn.send(void 0)}catch(Vt){throw Vt}};function ne(Oe){return Oe.replace(/[A-Z]/g,function(nn){return String.fromCharCode(nn.charCodeAt(0)+32)})}function Y(Oe){for(var nn=Object.create(null),Vt=Oe.split(`\r
`),$t=0;$t<Vt.length;$t+=1){var xn=Vt[$t],Xt=xn.split(": "),gn=Xt.shift(),rr=Xt.join(": ");nn[ne(gn)]=rr}this._map=nn}Y.prototype.get=function(Oe){return this._map[ne(Oe)]},a!=null&&a.HEADERS_RECEIVED==null&&(a.HEADERS_RECEIVED=2);function le(){}le.prototype.open=function(Oe,nn,Vt,$t,xn,Xt,gn){Oe.open("GET",xn);var rr=0;Oe.onprogress=function(){var Rn=Oe.responseText,wt=Rn.slice(rr);rr+=wt.length,Vt(wt)},Oe.onerror=function(Rn){Rn.preventDefault(),$t(new Error("NetworkError"))},Oe.onload=function(){$t(null)},Oe.onabort=function(){$t(null)},Oe.onreadystatechange=function(){if(Oe.readyState===a.HEADERS_RECEIVED){var Rn=Oe.status,wt=Oe.statusText,qt=Oe.getResponseHeader("Content-Type"),fn=Oe.getAllResponseHeaders();nn(Rn,wt,qt,new Y(fn))}},Oe.withCredentials=Xt;for(var Gt in gn)Object.prototype.hasOwnProperty.call(gn,Gt)&&Oe.setRequestHeader(Gt,gn[Gt]);return Oe.send(),Oe};function pe(Oe){this._headers=Oe}pe.prototype.get=function(Oe){return this._headers.get(Oe)};function _e(){}_e.prototype.open=function(Oe,nn,Vt,$t,xn,Xt,gn){var rr=null,Gt=new N,Rn=Gt.signal,wt=new S;return b(xn,{headers:gn,credentials:Xt?"include":"same-origin",signal:Rn,cache:"no-store"}).then(function(qt){return rr=qt.body.getReader(),nn(qt.status,qt.statusText,qt.headers.get("Content-Type"),new pe(qt.headers)),new y(function(fn,Un){var Yt=function(){rr.read().then(function(cn){if(cn.done)fn(void 0);else{var Ln=wt.decode(cn.value,{stream:!0});Vt(Ln),Yt()}}).catch(function(cn){Un(cn)})};Yt()})}).catch(function(qt){if(qt.name!=="AbortError")return qt}).then(function(qt){$t(qt)}),{abort:function(){rr!=null&&rr.cancel(),Gt.abort()}}};function ye(){this._listeners=Object.create(null)}function he(Oe){r(function(){throw Oe},0)}ye.prototype.dispatchEvent=function(Oe){Oe.target=this;var nn=this._listeners[Oe.type];if(nn!=null)for(var Vt=nn.length,$t=0;$t<Vt;$t+=1){var xn=nn[$t];try{typeof xn.handleEvent=="function"?xn.handleEvent(Oe):xn.call(this,Oe)}catch(Xt){he(Xt)}}},ye.prototype.addEventListener=function(Oe,nn){Oe=String(Oe);var Vt=this._listeners,$t=Vt[Oe];$t==null&&($t=[],Vt[Oe]=$t);for(var xn=!1,Xt=0;Xt<$t.length;Xt+=1)$t[Xt]===nn&&(xn=!0);xn||$t.push(nn)},ye.prototype.removeEventListener=function(Oe,nn){Oe=String(Oe);var Vt=this._listeners,$t=Vt[Oe];if($t!=null){for(var xn=[],Xt=0;Xt<$t.length;Xt+=1)$t[Xt]!==nn&&xn.push($t[Xt]);xn.length===0?delete Vt[Oe]:Vt[Oe]=xn}};function be(Oe){this.type=Oe,this.target=void 0}function Te(Oe,nn){be.call(this,Oe),this.data=nn.data,this.lastEventId=nn.lastEventId}Te.prototype=Object.create(be.prototype);function Ee(Oe,nn){be.call(this,Oe),this.status=nn.status,this.statusText=nn.statusText,this.headers=nn.headers}Ee.prototype=Object.create(be.prototype);function Ne(Oe,nn){be.call(this,Oe),this.error=nn.error}Ne.prototype=Object.create(be.prototype);var Ge=-1,Je=0,Ue=1,Qe=2,xe=-1,at=0,we=1,me=2,Ze=3,ot=/^text\/event\-stream(;.*)?$/i,vt=1e3,Qt=18e6,Ot=function(Oe,nn){var Vt=Oe==null?nn:parseInt(Oe,10);return Vt!==Vt&&(Vt=nn),kt(Vt)},kt=function(Oe){return Math.min(Math.max(Oe,vt),Qt)},Me=function(Oe,nn,Vt){try{typeof nn=="function"&&nn.call(Oe,Vt)}catch($t){he($t)}};function Ht(Oe,nn){ye.call(this),nn=nn||{},this.onopen=void 0,this.onmessage=void 0,this.onerror=void 0,this.url=void 0,this.readyState=void 0,this.withCredentials=void 0,this.headers=void 0,this._close=void 0,Dt(this,Oe,nn)}function Zt(){return a!=null&&"withCredentials"in a.prototype||c==null?new a:new c}var pn=b!=null&&T!=null&&"body"in T.prototype;function Dt(Oe,nn,Vt){nn=String(nn);var $t=!!Vt.withCredentials,xn=Vt.lastEventIdQueryParameterName||"lastEventId",Xt=kt(1e3),gn=Ot(Vt.heartbeatTimeout,45e3),rr="",Gt=Xt,Rn=!1,wt=0,qt=Vt.headers||{},fn=Vt.Transport,Un=pn&&fn==null?void 0:new Z(fn!=null?new fn:Zt()),Yt=fn!=null&&typeof fn!="string"?new fn:Un==null?new _e:new le,cn=void 0,Ln=0,Hn=Ge,_r="",fr="",xr="",bi="",Vn=at,Es=0,ki=0,hs=function(Kr,Mt,je,De){if(Hn===Je)if(Kr===200&&je!=null&&ot.test(je)){Hn=Ue,Rn=Date.now(),Gt=Xt,Oe.readyState=Ue;var ve=new Ee("open",{status:Kr,statusText:Mt,headers:De});Oe.dispatchEvent(ve),Me(Oe,Oe.onopen,ve)}else{var Re="";Kr!==200?(Mt&&(Mt=Mt.replace(/\s+/g," ")),Re="EventSource's response has a status "+Kr+" "+Mt+" that is not 200. Aborting the connection."):Re="EventSource's response has a Content-Type specifying an unsupported type: "+(je==null?"-":je.replace(/\s+/g," "))+". Aborting the connection.",gr();var ve=new Ee("error",{status:Kr,statusText:Mt,headers:De});Oe.dispatchEvent(ve),Me(Oe,Oe.onerror,ve),console.error(Re)}},mi=function(Kr){if(Hn===Ue){for(var Mt=-1,je=0;je<Kr.length;je+=1){var De=Kr.charCodeAt(je);(De===10||De===13)&&(Mt=je)}var ve=(Mt!==-1?bi:"")+Kr.slice(0,Mt+1);bi=(Mt===-1?bi:"")+Kr.slice(Mt+1),Kr!==""&&(Rn=Date.now(),wt+=Kr.length);for(var Re=0;Re<ve.length;Re+=1){var De=ve.charCodeAt(Re);if(Vn===xe&&De===10)Vn=at;else if(Vn===xe&&(Vn=at),De===13||De===10){if(Vn!==at){Vn===we&&(ki=Re+1);var ze=ve.slice(Es,ki-1),tt=ve.slice(ki+(ki<Re&&ve.charCodeAt(ki)===32?1:0),Re);ze==="data"?(_r+=`
`,_r+=tt):ze==="id"?fr=tt:ze==="event"?xr=tt:ze==="retry"?(Xt=Ot(tt,Xt),Gt=Xt):ze==="heartbeatTimeout"&&(gn=Ot(tt,gn),Ln!==0&&(s(Ln),Ln=r(function(){Ir()},gn)))}if(Vn===at){if(_r!==""){rr=fr,xr===""&&(xr="message");var gt=new Te(xr,{data:_r.slice(1),lastEventId:fr});if(Oe.dispatchEvent(gt),xr==="open"?Me(Oe,Oe.onopen,gt):xr==="message"?Me(Oe,Oe.onmessage,gt):xr==="error"&&Me(Oe,Oe.onerror,gt),Hn===Qe)return}_r="",xr=""}Vn=De===13?xe:at}else Vn===at&&(Es=Re,Vn=we),Vn===we?De===58&&(ki=Re+1,Vn=me):Vn===me&&(Vn=Ze)}}},br=function(Kr){if(Hn===Ue||Hn===Je){Hn=Ge,Ln!==0&&(s(Ln),Ln=0),Ln=r(function(){Ir()},Gt),Gt=kt(Math.min(Xt*16,Gt*2)),Oe.readyState=Je;var Mt=new Ne("error",{error:Kr});Oe.dispatchEvent(Mt),Me(Oe,Oe.onerror,Mt),Kr!=null&&console.error(Kr)}},gr=function(){Hn=Qe,cn!=null&&(cn.abort(),cn=void 0),Ln!==0&&(s(Ln),Ln=0),Oe.readyState=Qe},Ir=function(){if(Ln=0,Hn!==Ge){if(!Rn&&cn!=null)br(new Error("No activity within "+gn+" milliseconds. "+(Hn===Je?"No response received.":wt+" chars received.")+" Reconnecting.")),cn!=null&&(cn.abort(),cn=void 0);else{var Kr=Math.max((Rn||Date.now())+gn-Date.now(),1);Rn=!1,Ln=r(function(){Ir()},Kr)}return}Rn=!1,wt=0,Ln=r(function(){Ir()},gn),Hn=Je,_r="",xr="",fr=rr,bi="",Es=0,ki=0,Vn=at;var Mt=nn;if(nn.slice(0,5)!=="data:"&&nn.slice(0,5)!=="blob:"&&rr!==""){var je=nn.indexOf("?");Mt=je===-1?nn:nn.slice(0,je+1)+nn.slice(je+1).replace(/(?:^|&)([^=&]*)(?:=[^&]*)?/g,function(tt,gt){return gt===xn?"":tt}),Mt+=(nn.indexOf("?")===-1?"?":"&")+xn+"="+encodeURIComponent(rr)}var De=Oe.withCredentials,ve={};ve.Accept="text/event-stream";var Re=Oe.headers;if(Re!=null)for(var ze in Re)Object.prototype.hasOwnProperty.call(Re,ze)&&(ve[ze]=Re[ze]);try{cn=Yt.open(Un,hs,mi,br,Mt,De,ve)}catch(tt){throw gr(),tt}};Oe.url=nn,Oe.readyState=Je,Oe.withCredentials=$t,Oe.headers=qt,Oe._close=gr,Ir()}Ht.prototype=Object.create(ye.prototype),Ht.prototype.CONNECTING=Je,Ht.prototype.OPEN=Ue,Ht.prototype.CLOSED=Qe,Ht.prototype.close=function(){this._close()},Ht.CONNECTING=Je,Ht.OPEN=Ue,Ht.CLOSED=Qe,Ht.prototype.withCredentials=void 0;var hn=f;a!=null&&(f==null||!("withCredentials"in f.prototype))&&(hn=Ht),function(Oe){{var nn=Oe(t);nn!==void 0&&(e.exports=nn)}}(function(Oe){Oe.EventSourcePolyfill=Ht,Oe.NativeEventSource=f,Oe.EventSource=hn})})(typeof globalThis>"u"?typeof window<"u"?window:typeof self<"u"?self:Ra:globalThis)})(t6,t6.exports);var oYe=t6.exports;const aYe=uo(oYe);var So;(function(e){e.assertEqual=s=>s;function t(s){}e.assertIs=t;function n(s){throw new Error}e.assertNever=n,e.arrayToEnum=s=>{const a={};for(const c of s)a[c]=c;return a},e.getValidEnumValues=s=>{const a=e.objectKeys(s).filter(i=>typeof s[s[i]]!="number"),c={};for(const i of a)c[i]=s[i];return e.objectValues(c)},e.objectValues=s=>e.objectKeys(s).map(function(a){return s[a]}),e.objectKeys=typeof Object.keys=="function"?s=>Object.keys(s):s=>{const a=[];for(const c in s)Object.prototype.hasOwnProperty.call(s,c)&&a.push(c);return a},e.find=(s,a)=>{for(const c of s)if(a(c))return c},e.isInteger=typeof Number.isInteger=="function"?s=>Number.isInteger(s):s=>typeof s=="number"&&isFinite(s)&&Math.floor(s)===s;function r(s,a=" | "){return s.map(c=>typeof c=="string"?`'${c}'`:c).join(a)}e.joinValues=r,e.jsonStringifyReplacer=(s,a)=>typeof a=="bigint"?a.toString():a})(So||(So={}));var n6;(function(e){e.mergeShapes=(t,n)=>({...t,...n})})(n6||(n6={}));const si=So.arrayToEnum(["string","nan","number","integer","float","boolean","date","bigint","symbol","function","undefined","null","array","object","unknown","promise","void","never","map","set"]),Vg=e=>{switch(typeof e){case"undefined":return si.undefined;case"string":return si.string;case"number":return isNaN(e)?si.nan:si.number;case"boolean":return si.boolean;case"function":return si.function;case"bigint":return si.bigint;case"symbol":return si.symbol;case"object":return Array.isArray(e)?si.array:e===null?si.null:e.then&&typeof e.then=="function"&&e.catch&&typeof e.catch=="function"?si.promise:typeof Map<"u"&&e instanceof Map?si.map:typeof Set<"u"&&e instanceof Set?si.set:typeof Date<"u"&&e instanceof Date?si.date:si.object;default:return si.unknown}},Er=So.arrayToEnum(["invalid_type","invalid_literal","custom","invalid_union","invalid_union_discriminator","invalid_enum_value","unrecognized_keys","invalid_arguments","invalid_return_type","invalid_date","invalid_string","too_small","too_big","invalid_intersection_types","not_multiple_of","not_finite"]),lYe=e=>JSON.stringify(e,null,2).replace(/"([^"]+)":/g,"$1:");class Yf extends Error{get errors(){return this.issues}constructor(t){super(),this.issues=[],this.addIssue=r=>{this.issues=[...this.issues,r]},this.addIssues=(r=[])=>{this.issues=[...this.issues,...r]};const n=new.target.prototype;Object.setPrototypeOf?Object.setPrototypeOf(this,n):this.__proto__=n,this.name="ZodError",this.issues=t}format(t){const n=t||function(a){return a.message},r={_errors:[]},s=a=>{for(const c of a.issues)if(c.code==="invalid_union")c.unionErrors.map(s);else if(c.code==="invalid_return_type")s(c.returnTypeError);else if(c.code==="invalid_arguments")s(c.argumentsError);else if(c.path.length===0)r._errors.push(n(c));else{let i=r,f=0;for(;f<c.path.length;){const g=c.path[f];f===c.path.length-1?(i[g]=i[g]||{_errors:[]},i[g]._errors.push(n(c))):i[g]=i[g]||{_errors:[]},i=i[g],f++}}};return s(this),r}static assert(t){if(!(t instanceof Yf))throw new Error(`Not a ZodError: ${t}`)}toString(){return this.message}get message(){return JSON.stringify(this.issues,So.jsonStringifyReplacer,2)}get isEmpty(){return this.issues.length===0}flatten(t=n=>n.message){const n={},r=[];for(const s of this.issues)s.path.length>0?(n[s.path[0]]=n[s.path[0]]||[],n[s.path[0]].push(t(s))):r.push(t(s));return{formErrors:r,fieldErrors:n}}get formErrors(){return this.flatten()}}Yf.create=e=>new Yf(e);const Rw=(e,t)=>{let n;switch(e.code){case Er.invalid_type:e.received===si.undefined?n="Required":n=`Expected ${e.expected}, received ${e.received}`;break;case Er.invalid_literal:n=`Invalid literal value, expected ${JSON.stringify(e.expected,So.jsonStringifyReplacer)}`;break;case Er.unrecognized_keys:n=`Unrecognized key(s) in object: ${So.joinValues(e.keys,", ")}`;break;case Er.invalid_union:n="Invalid input";break;case Er.invalid_union_discriminator:n=`Invalid discriminator value. Expected ${So.joinValues(e.options)}`;break;case Er.invalid_enum_value:n=`Invalid enum value. Expected ${So.joinValues(e.options)}, received '${e.received}'`;break;case Er.invalid_arguments:n="Invalid function arguments";break;case Er.invalid_return_type:n="Invalid function return type";break;case Er.invalid_date:n="Invalid date";break;case Er.invalid_string:typeof e.validation=="object"?"includes"in e.validation?(n=`Invalid input: must include "${e.validation.includes}"`,typeof e.validation.position=="number"&&(n=`${n} at one or more positions greater than or equal to ${e.validation.position}`)):"startsWith"in e.validation?n=`Invalid input: must start with "${e.validation.startsWith}"`:"endsWith"in e.validation?n=`Invalid input: must end with "${e.validation.endsWith}"`:So.assertNever(e.validation):e.validation!=="regex"?n=`Invalid ${e.validation}`:n="Invalid";break;case Er.too_small:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at least":"more than"} ${e.minimum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at least":"over"} ${e.minimum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${e.minimum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly equal to ":e.inclusive?"greater than or equal to ":"greater than "}${new Date(Number(e.minimum))}`:n="Invalid input";break;case Er.too_big:e.type==="array"?n=`Array must contain ${e.exact?"exactly":e.inclusive?"at most":"less than"} ${e.maximum} element(s)`:e.type==="string"?n=`String must contain ${e.exact?"exactly":e.inclusive?"at most":"under"} ${e.maximum} character(s)`:e.type==="number"?n=`Number must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="bigint"?n=`BigInt must be ${e.exact?"exactly":e.inclusive?"less than or equal to":"less than"} ${e.maximum}`:e.type==="date"?n=`Date must be ${e.exact?"exactly":e.inclusive?"smaller than or equal to":"smaller than"} ${new Date(Number(e.maximum))}`:n="Invalid input";break;case Er.custom:n="Invalid input";break;case Er.invalid_intersection_types:n="Intersection results could not be merged";break;case Er.not_multiple_of:n=`Number must be a multiple of ${e.multipleOf}`;break;case Er.not_finite:n="Number must be finite";break;default:n=t.defaultError,So.assertNever(e)}return{message:n}};let Wue=Rw;function cYe(e){Wue=e}function Gj(){return Wue}const Kj=e=>{const{data:t,path:n,errorMaps:r,issueData:s}=e,a=[...n,...s.path||[]],c={...s,path:a};if(s.message!==void 0)return{...s,path:a,message:s.message};let i="";const f=r.filter(g=>!!g).slice().reverse();for(const g of f)i=g(c,{data:t,defaultError:i}).message;return{...s,path:a,message:i}},uYe=[];function Gr(e,t){const n=Gj(),r=Kj({issueData:t,data:e.data,path:e.path,errorMaps:[e.common.contextualErrorMap,e.schemaErrorMap,n,n===Rw?void 0:Rw].filter(s=>!!s)});e.common.issues.push(r)}class kd{constructor(){this.value="valid"}dirty(){this.value==="valid"&&(this.value="dirty")}abort(){this.value!=="aborted"&&(this.value="aborted")}static mergeArray(t,n){const r=[];for(const s of n){if(s.status==="aborted")return cs;s.status==="dirty"&&t.dirty(),r.push(s.value)}return{status:t.value,value:r}}static async mergeObjectAsync(t,n){const r=[];for(const s of n){const a=await s.key,c=await s.value;r.push({key:a,value:c})}return kd.mergeObjectSync(t,r)}static mergeObjectSync(t,n){const r={};for(const s of n){const{key:a,value:c}=s;if(a.status==="aborted"||c.status==="aborted")return cs;a.status==="dirty"&&t.dirty(),c.status==="dirty"&&t.dirty(),a.value!=="__proto__"&&(typeof c.value<"u"||s.alwaysSet)&&(r[a.value]=c.value)}return{status:t.value,value:r}}}const cs=Object.freeze({status:"aborted"}),Wj=e=>({status:"dirty",value:e}),yh=e=>({status:"valid",value:e}),r6=e=>e.status==="aborted",i6=e=>e.status==="dirty",$x=e=>e.status==="valid",GS=e=>typeof Promise<"u"&&e instanceof Promise;function qj(e,t,n,r){if(typeof t=="function"?e!==t||!r:!t.has(e))throw new TypeError("Cannot read private member from an object whose class did not declare it");return t.get(e)}function que(e,t,n,r,s){if(typeof t=="function"?e!==t||!s:!t.has(e))throw new TypeError("Cannot write private member to an object whose class did not declare it");return t.set(e,n),n}var wi;(function(e){e.errToObj=t=>typeof t=="string"?{message:t}:t||{},e.toString=t=>typeof t=="string"?t:t==null?void 0:t.message})(wi||(wi={}));var eC,tC;class rg{constructor(t,n,r,s){this._cachedPath=[],this.parent=t,this.data=n,this._path=r,this._key=s}get path(){return this._cachedPath.length||(this._key instanceof Array?this._cachedPath.push(...this._path,...this._key):this._cachedPath.push(...this._path,this._key)),this._cachedPath}}const WX=(e,t)=>{if($x(t))return{success:!0,data:t.value};if(!e.common.issues.length)throw new Error("Validation failed but no issues detected.");return{success:!1,get error(){if(this._error)return this._error;const n=new Yf(e.common.issues);return this._error=n,this._error}}};function Ss(e){if(!e)return{};const{errorMap:t,invalid_type_error:n,required_error:r,description:s}=e;if(t&&(n||r))throw new Error(`Can't use "invalid_type_error" or "required_error" in conjunction with custom error map.`);return t?{errorMap:t,description:s}:{errorMap:(a,c)=>{var i,f;const{message:g}=e;return a.code==="invalid_enum_value"?{message:g??c.defaultError}:typeof c.data>"u"?{message:(i=g??r)!==null&&i!==void 0?i:c.defaultError}:a.code!=="invalid_type"?{message:c.defaultError}:{message:(f=g??n)!==null&&f!==void 0?f:c.defaultError}},description:s}}class Ns{get description(){return this._def.description}_getType(t){return Vg(t.data)}_getOrReturnCtx(t,n){return n||{common:t.parent.common,data:t.data,parsedType:Vg(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}_processInputParams(t){return{status:new kd,ctx:{common:t.parent.common,data:t.data,parsedType:Vg(t.data),schemaErrorMap:this._def.errorMap,path:t.path,parent:t.parent}}}_parseSync(t){const n=this._parse(t);if(GS(n))throw new Error("Synchronous parse encountered promise.");return n}_parseAsync(t){const n=this._parse(t);return Promise.resolve(n)}parse(t,n){const r=this.safeParse(t,n);if(r.success)return r.data;throw r.error}safeParse(t,n){var r;const s={common:{issues:[],async:(r=n==null?void 0:n.async)!==null&&r!==void 0?r:!1,contextualErrorMap:n==null?void 0:n.errorMap},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Vg(t)},a=this._parseSync({data:t,path:s.path,parent:s});return WX(s,a)}"~validate"(t){var n,r;const s={common:{issues:[],async:!!this["~standard"].async},path:[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Vg(t)};if(!this["~standard"].async)try{const a=this._parseSync({data:t,path:[],parent:s});return $x(a)?{value:a.value}:{issues:s.common.issues}}catch(a){!((r=(n=a==null?void 0:a.message)===null||n===void 0?void 0:n.toLowerCase())===null||r===void 0)&&r.includes("encountered")&&(this["~standard"].async=!0),s.common={issues:[],async:!0}}return this._parseAsync({data:t,path:[],parent:s}).then(a=>$x(a)?{value:a.value}:{issues:s.common.issues})}async parseAsync(t,n){const r=await this.safeParseAsync(t,n);if(r.success)return r.data;throw r.error}async safeParseAsync(t,n){const r={common:{issues:[],contextualErrorMap:n==null?void 0:n.errorMap,async:!0},path:(n==null?void 0:n.path)||[],schemaErrorMap:this._def.errorMap,parent:null,data:t,parsedType:Vg(t)},s=this._parse({data:t,path:r.path,parent:r}),a=await(GS(s)?s:Promise.resolve(s));return WX(r,a)}refine(t,n){const r=s=>typeof n=="string"||typeof n>"u"?{message:n}:typeof n=="function"?n(s):n;return this._refinement((s,a)=>{const c=t(s),i=()=>a.addIssue({code:Er.custom,...r(s)});return typeof Promise<"u"&&c instanceof Promise?c.then(f=>f?!0:(i(),!1)):c?!0:(i(),!1)})}refinement(t,n){return this._refinement((r,s)=>t(r)?!0:(s.addIssue(typeof n=="function"?n(r,s):n),!1))}_refinement(t){return new JA({schema:this,typeName:as.ZodEffects,effect:{type:"refinement",refinement:t}})}superRefine(t){return this._refinement(t)}constructor(t){this.spa=this.safeParseAsync,this._def=t,this.parse=this.parse.bind(this),this.safeParse=this.safeParse.bind(this),this.parseAsync=this.parseAsync.bind(this),this.safeParseAsync=this.safeParseAsync.bind(this),this.spa=this.spa.bind(this),this.refine=this.refine.bind(this),this.refinement=this.refinement.bind(this),this.superRefine=this.superRefine.bind(this),this.optional=this.optional.bind(this),this.nullable=this.nullable.bind(this),this.nullish=this.nullish.bind(this),this.array=this.array.bind(this),this.promise=this.promise.bind(this),this.or=this.or.bind(this),this.and=this.and.bind(this),this.transform=this.transform.bind(this),this.brand=this.brand.bind(this),this.default=this.default.bind(this),this.catch=this.catch.bind(this),this.describe=this.describe.bind(this),this.pipe=this.pipe.bind(this),this.readonly=this.readonly.bind(this),this.isNullable=this.isNullable.bind(this),this.isOptional=this.isOptional.bind(this),this["~standard"]={version:1,vendor:"zod",validate:n=>this["~validate"](n)}}optional(){return Jm.create(this,this._def)}nullable(){return qy.create(this,this._def)}nullish(){return this.nullable().optional()}array(){return WA.create(this)}promise(){return Dw.create(this,this._def)}or(t){return ZS.create([this,t],this._def)}and(t){return XS.create(this,t,this._def)}transform(t){return new JA({...Ss(this._def),schema:this,typeName:as.ZodEffects,effect:{type:"transform",transform:t}})}default(t){const n=typeof t=="function"?t:()=>t;return new nB({...Ss(this._def),innerType:this,defaultValue:n,typeName:as.ZodDefault})}brand(){return new nQ({typeName:as.ZodBranded,type:this,...Ss(this._def)})}catch(t){const n=typeof t=="function"?t:()=>t;return new rB({...Ss(this._def),innerType:this,catchValue:n,typeName:as.ZodCatch})}describe(t){const n=this.constructor;return new n({...this._def,description:t})}pipe(t){return iE.create(this,t)}readonly(){return iB.create(this)}isOptional(){return this.safeParse(void 0).success}isNullable(){return this.safeParse(null).success}}const dYe=/^c[^\s-]{8,}$/i,hYe=/^[0-9a-z]+$/,fYe=/^[0-9A-HJKMNP-TV-Z]{26}$/i,pYe=/^[0-9a-fA-F]{8}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{4}\b-[0-9a-fA-F]{12}$/i,AYe=/^[a-z0-9_-]{21}$/i,mYe=/^[A-Za-z0-9-_]+\.[A-Za-z0-9-_]+\.[A-Za-z0-9-_]*$/,gYe=/^[-+]?P(?!$)(?:(?:[-+]?\d+Y)|(?:[-+]?\d+[.,]\d+Y$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:(?:[-+]?\d+W)|(?:[-+]?\d+[.,]\d+W$))?(?:(?:[-+]?\d+D)|(?:[-+]?\d+[.,]\d+D$))?(?:T(?=[\d+-])(?:(?:[-+]?\d+H)|(?:[-+]?\d+[.,]\d+H$))?(?:(?:[-+]?\d+M)|(?:[-+]?\d+[.,]\d+M$))?(?:[-+]?\d+(?:[.,]\d+)?S)?)??$/,yYe=/^(?!\.)(?!.*\.\.)([A-Z0-9_'+\-\.]*)[A-Z0-9_+-]@([A-Z0-9][A-Z0-9\-]*\.)+[A-Z]{2,}$/i,vYe="^(\\p{Extended_Pictographic}|\\p{Emoji_Component})+$";let O5;const xYe=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])$/,_Ye=/^(?:(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\.){3}(?:25[0-5]|2[0-4][0-9]|1[0-9][0-9]|[1-9][0-9]|[0-9])\/(3[0-2]|[12]?[0-9])$/,wYe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))$/,bYe=/^(([0-9a-fA-F]{1,4}:){7,7}[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,7}:|([0-9a-fA-F]{1,4}:){1,6}:[0-9a-fA-F]{1,4}|([0-9a-fA-F]{1,4}:){1,5}(:[0-9a-fA-F]{1,4}){1,2}|([0-9a-fA-F]{1,4}:){1,4}(:[0-9a-fA-F]{1,4}){1,3}|([0-9a-fA-F]{1,4}:){1,3}(:[0-9a-fA-F]{1,4}){1,4}|([0-9a-fA-F]{1,4}:){1,2}(:[0-9a-fA-F]{1,4}){1,5}|[0-9a-fA-F]{1,4}:((:[0-9a-fA-F]{1,4}){1,6})|:((:[0-9a-fA-F]{1,4}){1,7}|:)|fe80:(:[0-9a-fA-F]{0,4}){0,4}%[0-9a-zA-Z]{1,}|::(ffff(:0{1,4}){0,1}:){0,1}((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])|([0-9a-fA-F]{1,4}:){1,4}:((25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9])\.){3,3}(25[0-5]|(2[0-4]|1{0,1}[0-9]){0,1}[0-9]))\/(12[0-8]|1[01][0-9]|[1-9]?[0-9])$/,CYe=/^([0-9a-zA-Z+/]{4})*(([0-9a-zA-Z+/]{2}==)|([0-9a-zA-Z+/]{3}=))?$/,SYe=/^([0-9a-zA-Z-_]{4})*(([0-9a-zA-Z-_]{2}(==)?)|([0-9a-zA-Z-_]{3}(=)?))?$/,Zue="((\\d\\d[2468][048]|\\d\\d[13579][26]|\\d\\d0[48]|[02468][048]00|[13579][26]00)-02-29|\\d{4}-((0[13578]|1[02])-(0[1-9]|[12]\\d|3[01])|(0[469]|11)-(0[1-9]|[12]\\d|30)|(02)-(0[1-9]|1\\d|2[0-8])))",BYe=new RegExp(`^${Zue}$`);function Xue(e){let t="([01]\\d|2[0-3]):[0-5]\\d:[0-5]\\d";return e.precision?t=`${t}\\.\\d{${e.precision}}`:e.precision==null&&(t=`${t}(\\.\\d+)?`),t}function EYe(e){return new RegExp(`^${Xue(e)}$`)}function Yue(e){let t=`${Zue}T${Xue(e)}`;const n=[];return n.push(e.local?"Z?":"Z"),e.offset&&n.push("([+-]\\d{2}:?\\d{2})"),t=`${t}(${n.join("|")})`,new RegExp(`^${t}$`)}function TYe(e,t){return!!((t==="v4"||!t)&&xYe.test(e)||(t==="v6"||!t)&&wYe.test(e))}function IYe(e,t){if(!mYe.test(e))return!1;try{const[n]=e.split("."),r=n.replace(/-/g,"+").replace(/_/g,"/").padEnd(n.length+(4-n.length%4)%4,"="),s=JSON.parse(atob(r));return!(typeof s!="object"||s===null||!s.typ||!s.alg||t&&s.alg!==t)}catch{return!1}}function jYe(e,t){return!!((t==="v4"||!t)&&_Ye.test(e)||(t==="v6"||!t)&&bYe.test(e))}class HA extends Ns{_parse(t){if(this._def.coerce&&(t.data=String(t.data)),this._getType(t)!==si.string){const s=this._getOrReturnCtx(t);return Gr(s,{code:Er.invalid_type,expected:si.string,received:s.parsedType}),cs}const n=new kd;let r;for(const s of this._def.checks)if(s.kind==="min")t.data.length<s.value&&(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="max")t.data.length>s.value&&(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!1,message:s.message}),n.dirty());else if(s.kind==="length"){const a=t.data.length>s.value,c=t.data.length<s.value;(a||c)&&(r=this._getOrReturnCtx(t,r),a?Gr(r,{code:Er.too_big,maximum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}):c&&Gr(r,{code:Er.too_small,minimum:s.value,type:"string",inclusive:!0,exact:!0,message:s.message}),n.dirty())}else if(s.kind==="email")yYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"email",code:Er.invalid_string,message:s.message}),n.dirty());else if(s.kind==="emoji")O5||(O5=new RegExp(vYe,"u")),O5.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"emoji",code:Er.invalid_string,message:s.message}),n.dirty());else if(s.kind==="uuid")pYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"uuid",code:Er.invalid_string,message:s.message}),n.dirty());else if(s.kind==="nanoid")AYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"nanoid",code:Er.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid")dYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"cuid",code:Er.invalid_string,message:s.message}),n.dirty());else if(s.kind==="cuid2")hYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"cuid2",code:Er.invalid_string,message:s.message}),n.dirty());else if(s.kind==="ulid")fYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"ulid",code:Er.invalid_string,message:s.message}),n.dirty());else if(s.kind==="url")try{new URL(t.data)}catch{r=this._getOrReturnCtx(t,r),Gr(r,{validation:"url",code:Er.invalid_string,message:s.message}),n.dirty()}else s.kind==="regex"?(s.regex.lastIndex=0,s.regex.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"regex",code:Er.invalid_string,message:s.message}),n.dirty())):s.kind==="trim"?t.data=t.data.trim():s.kind==="includes"?t.data.includes(s.value,s.position)||(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.invalid_string,validation:{includes:s.value,position:s.position},message:s.message}),n.dirty()):s.kind==="toLowerCase"?t.data=t.data.toLowerCase():s.kind==="toUpperCase"?t.data=t.data.toUpperCase():s.kind==="startsWith"?t.data.startsWith(s.value)||(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.invalid_string,validation:{startsWith:s.value},message:s.message}),n.dirty()):s.kind==="endsWith"?t.data.endsWith(s.value)||(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.invalid_string,validation:{endsWith:s.value},message:s.message}),n.dirty()):s.kind==="datetime"?Yue(s).test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.invalid_string,validation:"datetime",message:s.message}),n.dirty()):s.kind==="date"?BYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.invalid_string,validation:"date",message:s.message}),n.dirty()):s.kind==="time"?EYe(s).test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.invalid_string,validation:"time",message:s.message}),n.dirty()):s.kind==="duration"?gYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"duration",code:Er.invalid_string,message:s.message}),n.dirty()):s.kind==="ip"?TYe(t.data,s.version)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"ip",code:Er.invalid_string,message:s.message}),n.dirty()):s.kind==="jwt"?IYe(t.data,s.alg)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"jwt",code:Er.invalid_string,message:s.message}),n.dirty()):s.kind==="cidr"?jYe(t.data,s.version)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"cidr",code:Er.invalid_string,message:s.message}),n.dirty()):s.kind==="base64"?CYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"base64",code:Er.invalid_string,message:s.message}),n.dirty()):s.kind==="base64url"?SYe.test(t.data)||(r=this._getOrReturnCtx(t,r),Gr(r,{validation:"base64url",code:Er.invalid_string,message:s.message}),n.dirty()):So.assertNever(s);return{status:n.value,value:t.data}}_regex(t,n,r){return this.refinement(s=>t.test(s),{validation:n,code:Er.invalid_string,...wi.errToObj(r)})}_addCheck(t){return new HA({...this._def,checks:[...this._def.checks,t]})}email(t){return this._addCheck({kind:"email",...wi.errToObj(t)})}url(t){return this._addCheck({kind:"url",...wi.errToObj(t)})}emoji(t){return this._addCheck({kind:"emoji",...wi.errToObj(t)})}uuid(t){return this._addCheck({kind:"uuid",...wi.errToObj(t)})}nanoid(t){return this._addCheck({kind:"nanoid",...wi.errToObj(t)})}cuid(t){return this._addCheck({kind:"cuid",...wi.errToObj(t)})}cuid2(t){return this._addCheck({kind:"cuid2",...wi.errToObj(t)})}ulid(t){return this._addCheck({kind:"ulid",...wi.errToObj(t)})}base64(t){return this._addCheck({kind:"base64",...wi.errToObj(t)})}base64url(t){return this._addCheck({kind:"base64url",...wi.errToObj(t)})}jwt(t){return this._addCheck({kind:"jwt",...wi.errToObj(t)})}ip(t){return this._addCheck({kind:"ip",...wi.errToObj(t)})}cidr(t){return this._addCheck({kind:"cidr",...wi.errToObj(t)})}datetime(t){var n,r;return typeof t=="string"?this._addCheck({kind:"datetime",precision:null,offset:!1,local:!1,message:t}):this._addCheck({kind:"datetime",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,offset:(n=t==null?void 0:t.offset)!==null&&n!==void 0?n:!1,local:(r=t==null?void 0:t.local)!==null&&r!==void 0?r:!1,...wi.errToObj(t==null?void 0:t.message)})}date(t){return this._addCheck({kind:"date",message:t})}time(t){return typeof t=="string"?this._addCheck({kind:"time",precision:null,message:t}):this._addCheck({kind:"time",precision:typeof(t==null?void 0:t.precision)>"u"?null:t==null?void 0:t.precision,...wi.errToObj(t==null?void 0:t.message)})}duration(t){return this._addCheck({kind:"duration",...wi.errToObj(t)})}regex(t,n){return this._addCheck({kind:"regex",regex:t,...wi.errToObj(n)})}includes(t,n){return this._addCheck({kind:"includes",value:t,position:n==null?void 0:n.position,...wi.errToObj(n==null?void 0:n.message)})}startsWith(t,n){return this._addCheck({kind:"startsWith",value:t,...wi.errToObj(n)})}endsWith(t,n){return this._addCheck({kind:"endsWith",value:t,...wi.errToObj(n)})}min(t,n){return this._addCheck({kind:"min",value:t,...wi.errToObj(n)})}max(t,n){return this._addCheck({kind:"max",value:t,...wi.errToObj(n)})}length(t,n){return this._addCheck({kind:"length",value:t,...wi.errToObj(n)})}nonempty(t){return this.min(1,wi.errToObj(t))}trim(){return new HA({...this._def,checks:[...this._def.checks,{kind:"trim"}]})}toLowerCase(){return new HA({...this._def,checks:[...this._def.checks,{kind:"toLowerCase"}]})}toUpperCase(){return new HA({...this._def,checks:[...this._def.checks,{kind:"toUpperCase"}]})}get isDatetime(){return!!this._def.checks.find(t=>t.kind==="datetime")}get isDate(){return!!this._def.checks.find(t=>t.kind==="date")}get isTime(){return!!this._def.checks.find(t=>t.kind==="time")}get isDuration(){return!!this._def.checks.find(t=>t.kind==="duration")}get isEmail(){return!!this._def.checks.find(t=>t.kind==="email")}get isURL(){return!!this._def.checks.find(t=>t.kind==="url")}get isEmoji(){return!!this._def.checks.find(t=>t.kind==="emoji")}get isUUID(){return!!this._def.checks.find(t=>t.kind==="uuid")}get isNANOID(){return!!this._def.checks.find(t=>t.kind==="nanoid")}get isCUID(){return!!this._def.checks.find(t=>t.kind==="cuid")}get isCUID2(){return!!this._def.checks.find(t=>t.kind==="cuid2")}get isULID(){return!!this._def.checks.find(t=>t.kind==="ulid")}get isIP(){return!!this._def.checks.find(t=>t.kind==="ip")}get isCIDR(){return!!this._def.checks.find(t=>t.kind==="cidr")}get isBase64(){return!!this._def.checks.find(t=>t.kind==="base64")}get isBase64url(){return!!this._def.checks.find(t=>t.kind==="base64url")}get minLength(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxLength(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}HA.create=e=>{var t;return new HA({checks:[],typeName:as.ZodString,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ss(e)})};function FYe(e,t){const n=(e.toString().split(".")[1]||"").length,r=(t.toString().split(".")[1]||"").length,s=n>r?n:r,a=parseInt(e.toFixed(s).replace(".","")),c=parseInt(t.toFixed(s).replace(".",""));return a%c/Math.pow(10,s)}class Gy extends Ns{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte,this.step=this.multipleOf}_parse(t){if(this._def.coerce&&(t.data=Number(t.data)),this._getType(t)!==si.number){const s=this._getOrReturnCtx(t);return Gr(s,{code:Er.invalid_type,expected:si.number,received:s.parsedType}),cs}let n;const r=new kd;for(const s of this._def.checks)s.kind==="int"?So.isInteger(t.data)||(n=this._getOrReturnCtx(t,n),Gr(n,{code:Er.invalid_type,expected:"integer",received:"float",message:s.message}),r.dirty()):s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),Gr(n,{code:Er.too_small,minimum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),Gr(n,{code:Er.too_big,maximum:s.value,type:"number",inclusive:s.inclusive,exact:!1,message:s.message}),r.dirty()):s.kind==="multipleOf"?FYe(t.data,s.value)!==0&&(n=this._getOrReturnCtx(t,n),Gr(n,{code:Er.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):s.kind==="finite"?Number.isFinite(t.data)||(n=this._getOrReturnCtx(t,n),Gr(n,{code:Er.not_finite,message:s.message}),r.dirty()):So.assertNever(s);return{status:r.value,value:t.data}}gte(t,n){return this.setLimit("min",t,!0,wi.toString(n))}gt(t,n){return this.setLimit("min",t,!1,wi.toString(n))}lte(t,n){return this.setLimit("max",t,!0,wi.toString(n))}lt(t,n){return this.setLimit("max",t,!1,wi.toString(n))}setLimit(t,n,r,s){return new Gy({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:wi.toString(s)}]})}_addCheck(t){return new Gy({...this._def,checks:[...this._def.checks,t]})}int(t){return this._addCheck({kind:"int",message:wi.toString(t)})}positive(t){return this._addCheck({kind:"min",value:0,inclusive:!1,message:wi.toString(t)})}negative(t){return this._addCheck({kind:"max",value:0,inclusive:!1,message:wi.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:0,inclusive:!0,message:wi.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:0,inclusive:!0,message:wi.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:wi.toString(n)})}finite(t){return this._addCheck({kind:"finite",message:wi.toString(t)})}safe(t){return this._addCheck({kind:"min",inclusive:!0,value:Number.MIN_SAFE_INTEGER,message:wi.toString(t)})._addCheck({kind:"max",inclusive:!0,value:Number.MAX_SAFE_INTEGER,message:wi.toString(t)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}get isInt(){return!!this._def.checks.find(t=>t.kind==="int"||t.kind==="multipleOf"&&So.isInteger(t.value))}get isFinite(){let t=null,n=null;for(const r of this._def.checks){if(r.kind==="finite"||r.kind==="int"||r.kind==="multipleOf")return!0;r.kind==="min"?(n===null||r.value>n)&&(n=r.value):r.kind==="max"&&(t===null||r.value<t)&&(t=r.value)}return Number.isFinite(n)&&Number.isFinite(t)}}Gy.create=e=>new Gy({checks:[],typeName:as.ZodNumber,coerce:(e==null?void 0:e.coerce)||!1,...Ss(e)});class Ky extends Ns{constructor(){super(...arguments),this.min=this.gte,this.max=this.lte}_parse(t){if(this._def.coerce)try{t.data=BigInt(t.data)}catch{return this._getInvalidInput(t)}if(this._getType(t)!==si.bigint)return this._getInvalidInput(t);let n;const r=new kd;for(const s of this._def.checks)s.kind==="min"?(s.inclusive?t.data<s.value:t.data<=s.value)&&(n=this._getOrReturnCtx(t,n),Gr(n,{code:Er.too_small,type:"bigint",minimum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="max"?(s.inclusive?t.data>s.value:t.data>=s.value)&&(n=this._getOrReturnCtx(t,n),Gr(n,{code:Er.too_big,type:"bigint",maximum:s.value,inclusive:s.inclusive,message:s.message}),r.dirty()):s.kind==="multipleOf"?t.data%s.value!==BigInt(0)&&(n=this._getOrReturnCtx(t,n),Gr(n,{code:Er.not_multiple_of,multipleOf:s.value,message:s.message}),r.dirty()):So.assertNever(s);return{status:r.value,value:t.data}}_getInvalidInput(t){const n=this._getOrReturnCtx(t);return Gr(n,{code:Er.invalid_type,expected:si.bigint,received:n.parsedType}),cs}gte(t,n){return this.setLimit("min",t,!0,wi.toString(n))}gt(t,n){return this.setLimit("min",t,!1,wi.toString(n))}lte(t,n){return this.setLimit("max",t,!0,wi.toString(n))}lt(t,n){return this.setLimit("max",t,!1,wi.toString(n))}setLimit(t,n,r,s){return new Ky({...this._def,checks:[...this._def.checks,{kind:t,value:n,inclusive:r,message:wi.toString(s)}]})}_addCheck(t){return new Ky({...this._def,checks:[...this._def.checks,t]})}positive(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!1,message:wi.toString(t)})}negative(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!1,message:wi.toString(t)})}nonpositive(t){return this._addCheck({kind:"max",value:BigInt(0),inclusive:!0,message:wi.toString(t)})}nonnegative(t){return this._addCheck({kind:"min",value:BigInt(0),inclusive:!0,message:wi.toString(t)})}multipleOf(t,n){return this._addCheck({kind:"multipleOf",value:t,message:wi.toString(n)})}get minValue(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t}get maxValue(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t}}Ky.create=e=>{var t;return new Ky({checks:[],typeName:as.ZodBigInt,coerce:(t=e==null?void 0:e.coerce)!==null&&t!==void 0?t:!1,...Ss(e)})};class KS extends Ns{_parse(t){if(this._def.coerce&&(t.data=!!t.data),this._getType(t)!==si.boolean){const n=this._getOrReturnCtx(t);return Gr(n,{code:Er.invalid_type,expected:si.boolean,received:n.parsedType}),cs}return yh(t.data)}}KS.create=e=>new KS({typeName:as.ZodBoolean,coerce:(e==null?void 0:e.coerce)||!1,...Ss(e)});class Gx extends Ns{_parse(t){if(this._def.coerce&&(t.data=new Date(t.data)),this._getType(t)!==si.date){const s=this._getOrReturnCtx(t);return Gr(s,{code:Er.invalid_type,expected:si.date,received:s.parsedType}),cs}if(isNaN(t.data.getTime())){const s=this._getOrReturnCtx(t);return Gr(s,{code:Er.invalid_date}),cs}const n=new kd;let r;for(const s of this._def.checks)s.kind==="min"?t.data.getTime()<s.value&&(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.too_small,message:s.message,inclusive:!0,exact:!1,minimum:s.value,type:"date"}),n.dirty()):s.kind==="max"?t.data.getTime()>s.value&&(r=this._getOrReturnCtx(t,r),Gr(r,{code:Er.too_big,message:s.message,inclusive:!0,exact:!1,maximum:s.value,type:"date"}),n.dirty()):So.assertNever(s);return{status:n.value,value:new Date(t.data.getTime())}}_addCheck(t){return new Gx({...this._def,checks:[...this._def.checks,t]})}min(t,n){return this._addCheck({kind:"min",value:t.getTime(),message:wi.toString(n)})}max(t,n){return this._addCheck({kind:"max",value:t.getTime(),message:wi.toString(n)})}get minDate(){let t=null;for(const n of this._def.checks)n.kind==="min"&&(t===null||n.value>t)&&(t=n.value);return t!=null?new Date(t):null}get maxDate(){let t=null;for(const n of this._def.checks)n.kind==="max"&&(t===null||n.value<t)&&(t=n.value);return t!=null?new Date(t):null}}Gx.create=e=>new Gx({checks:[],coerce:(e==null?void 0:e.coerce)||!1,typeName:as.ZodDate,...Ss(e)});class Zj extends Ns{_parse(t){if(this._getType(t)!==si.symbol){const n=this._getOrReturnCtx(t);return Gr(n,{code:Er.invalid_type,expected:si.symbol,received:n.parsedType}),cs}return yh(t.data)}}Zj.create=e=>new Zj({typeName:as.ZodSymbol,...Ss(e)});class WS extends Ns{_parse(t){if(this._getType(t)!==si.undefined){const n=this._getOrReturnCtx(t);return Gr(n,{code:Er.invalid_type,expected:si.undefined,received:n.parsedType}),cs}return yh(t.data)}}WS.create=e=>new WS({typeName:as.ZodUndefined,...Ss(e)});class qS extends Ns{_parse(t){if(this._getType(t)!==si.null){const n=this._getOrReturnCtx(t);return Gr(n,{code:Er.invalid_type,expected:si.null,received:n.parsedType}),cs}return yh(t.data)}}qS.create=e=>new qS({typeName:as.ZodNull,...Ss(e)});class Ow extends Ns{constructor(){super(...arguments),this._any=!0}_parse(t){return yh(t.data)}}Ow.create=e=>new Ow({typeName:as.ZodAny,...Ss(e)});class Cx extends Ns{constructor(){super(...arguments),this._unknown=!0}_parse(t){return yh(t.data)}}Cx.create=e=>new Cx({typeName:as.ZodUnknown,...Ss(e)});class u0 extends Ns{_parse(t){const n=this._getOrReturnCtx(t);return Gr(n,{code:Er.invalid_type,expected:si.never,received:n.parsedType}),cs}}u0.create=e=>new u0({typeName:as.ZodNever,...Ss(e)});class Xj extends Ns{_parse(t){if(this._getType(t)!==si.undefined){const n=this._getOrReturnCtx(t);return Gr(n,{code:Er.invalid_type,expected:si.void,received:n.parsedType}),cs}return yh(t.data)}}Xj.create=e=>new Xj({typeName:as.ZodVoid,...Ss(e)});class WA extends Ns{_parse(t){const{ctx:n,status:r}=this._processInputParams(t),s=this._def;if(n.parsedType!==si.array)return Gr(n,{code:Er.invalid_type,expected:si.array,received:n.parsedType}),cs;if(s.exactLength!==null){const c=n.data.length>s.exactLength.value,i=n.data.length<s.exactLength.value;(c||i)&&(Gr(n,{code:c?Er.too_big:Er.too_small,minimum:i?s.exactLength.value:void 0,maximum:c?s.exactLength.value:void 0,type:"array",inclusive:!0,exact:!0,message:s.exactLength.message}),r.dirty())}if(s.minLength!==null&&n.data.length<s.minLength.value&&(Gr(n,{code:Er.too_small,minimum:s.minLength.value,type:"array",inclusive:!0,exact:!1,message:s.minLength.message}),r.dirty()),s.maxLength!==null&&n.data.length>s.maxLength.value&&(Gr(n,{code:Er.too_big,maximum:s.maxLength.value,type:"array",inclusive:!0,exact:!1,message:s.maxLength.message}),r.dirty()),n.common.async)return Promise.all([...n.data].map((c,i)=>s.type._parseAsync(new rg(n,c,n.path,i)))).then(c=>kd.mergeArray(r,c));const a=[...n.data].map((c,i)=>s.type._parseSync(new rg(n,c,n.path,i)));return kd.mergeArray(r,a)}get element(){return this._def.type}min(t,n){return new WA({...this._def,minLength:{value:t,message:wi.toString(n)}})}max(t,n){return new WA({...this._def,maxLength:{value:t,message:wi.toString(n)}})}length(t,n){return new WA({...this._def,exactLength:{value:t,message:wi.toString(n)}})}nonempty(t){return this.min(1,t)}}WA.create=(e,t)=>new WA({type:e,minLength:null,maxLength:null,exactLength:null,typeName:as.ZodArray,...Ss(t)});function v1(e){if(e instanceof Wp){const t={};for(const n in e.shape){const r=e.shape[n];t[n]=Jm.create(v1(r))}return new Wp({...e._def,shape:()=>t})}else return e instanceof WA?new WA({...e._def,type:v1(e.element)}):e instanceof Jm?Jm.create(v1(e.unwrap())):e instanceof qy?qy.create(v1(e.unwrap())):e instanceof ig?ig.create(e.items.map(t=>v1(t))):e}let Wp=class EA extends Ns{constructor(){super(...arguments),this._cached=null,this.nonstrict=this.passthrough,this.augment=this.extend}_getCached(){if(this._cached!==null)return this._cached;const t=this._def.shape(),n=So.objectKeys(t);return this._cached={shape:t,keys:n}}_parse(t){if(this._getType(t)!==si.object){const f=this._getOrReturnCtx(t);return Gr(f,{code:Er.invalid_type,expected:si.object,received:f.parsedType}),cs}const{status:n,ctx:r}=this._processInputParams(t),{shape:s,keys:a}=this._getCached(),c=[];if(!(this._def.catchall instanceof u0&&this._def.unknownKeys==="strip"))for(const f in r.data)a.includes(f)||c.push(f);const i=[];for(const f of a){const g=s[f],y=r.data[f];i.push({key:{status:"valid",value:f},value:g._parse(new rg(r,y,r.path,f)),alwaysSet:f in r.data})}if(this._def.catchall instanceof u0){const f=this._def.unknownKeys;if(f==="passthrough")for(const g of c)i.push({key:{status:"valid",value:g},value:{status:"valid",value:r.data[g]}});else if(f==="strict")c.length>0&&(Gr(r,{code:Er.unrecognized_keys,keys:c}),n.dirty());else if(f!=="strip")throw new Error("Internal ZodObject error: invalid unknownKeys value.")}else{const f=this._def.catchall;for(const g of c){const y=r.data[g];i.push({key:{status:"valid",value:g},value:f._parse(new rg(r,y,r.path,g)),alwaysSet:g in r.data})}}return r.common.async?Promise.resolve().then(async()=>{const f=[];for(const g of i){const y=await g.key,b=await g.value;f.push({key:y,value:b,alwaysSet:g.alwaysSet})}return f}).then(f=>kd.mergeObjectSync(n,f)):kd.mergeObjectSync(n,i)}get shape(){return this._def.shape()}strict(t){return wi.errToObj,new EA({...this._def,unknownKeys:"strict",...t!==void 0?{errorMap:(n,r)=>{var s,a,c,i;const f=(c=(a=(s=this._def).errorMap)===null||a===void 0?void 0:a.call(s,n,r).message)!==null&&c!==void 0?c:r.defaultError;return n.code==="unrecognized_keys"?{message:(i=wi.errToObj(t).message)!==null&&i!==void 0?i:f}:{message:f}}}:{}})}strip(){return new EA({...this._def,unknownKeys:"strip"})}passthrough(){return new EA({...this._def,unknownKeys:"passthrough"})}extend(t){return new EA({...this._def,shape:()=>({...this._def.shape(),...t})})}merge(t){return new EA({unknownKeys:t._def.unknownKeys,catchall:t._def.catchall,shape:()=>({...this._def.shape(),...t._def.shape()}),typeName:as.ZodObject})}setKey(t,n){return this.augment({[t]:n})}catchall(t){return new EA({...this._def,catchall:t})}pick(t){const n={};return So.objectKeys(t).forEach(r=>{t[r]&&this.shape[r]&&(n[r]=this.shape[r])}),new EA({...this._def,shape:()=>n})}omit(t){const n={};return So.objectKeys(this.shape).forEach(r=>{t[r]||(n[r]=this.shape[r])}),new EA({...this._def,shape:()=>n})}deepPartial(){return v1(this)}partial(t){const n={};return So.objectKeys(this.shape).forEach(r=>{const s=this.shape[r];t&&!t[r]?n[r]=s:n[r]=s.optional()}),new EA({...this._def,shape:()=>n})}required(t){const n={};return So.objectKeys(this.shape).forEach(r=>{if(t&&!t[r])n[r]=this.shape[r];else{let s=this.shape[r];for(;s instanceof Jm;)s=s._def.innerType;n[r]=s}}),new EA({...this._def,shape:()=>n})}keyof(){return Jue(So.objectKeys(this.shape))}};Wp.create=(e,t)=>new Wp({shape:()=>e,unknownKeys:"strip",catchall:u0.create(),typeName:as.ZodObject,...Ss(t)});Wp.strictCreate=(e,t)=>new Wp({shape:()=>e,unknownKeys:"strict",catchall:u0.create(),typeName:as.ZodObject,...Ss(t)});Wp.lazycreate=(e,t)=>new Wp({shape:e,unknownKeys:"strip",catchall:u0.create(),typeName:as.ZodObject,...Ss(t)});class ZS extends Ns{_parse(t){const{ctx:n}=this._processInputParams(t),r=this._def.options;function s(a){for(const i of a)if(i.result.status==="valid")return i.result;for(const i of a)if(i.result.status==="dirty")return n.common.issues.push(...i.ctx.common.issues),i.result;const c=a.map(i=>new Yf(i.ctx.common.issues));return Gr(n,{code:Er.invalid_union,unionErrors:c}),cs}if(n.common.async)return Promise.all(r.map(async a=>{const c={...n,common:{...n.common,issues:[]},parent:null};return{result:await a._parseAsync({data:n.data,path:n.path,parent:c}),ctx:c}})).then(s);{let a;const c=[];for(const f of r){const g={...n,common:{...n.common,issues:[]},parent:null},y=f._parseSync({data:n.data,path:n.path,parent:g});if(y.status==="valid")return y;y.status==="dirty"&&!a&&(a={result:y,ctx:g}),g.common.issues.length&&c.push(g.common.issues)}if(a)return n.common.issues.push(...a.ctx.common.issues),a.result;const i=c.map(f=>new Yf(f));return Gr(n,{code:Er.invalid_union,unionErrors:i}),cs}}get options(){return this._def.options}}ZS.create=(e,t)=>new ZS({options:e,typeName:as.ZodUnion,...Ss(t)});const ty=e=>e instanceof JS?ty(e.schema):e instanceof JA?ty(e.innerType()):e instanceof eB?[e.value]:e instanceof Wy?e.options:e instanceof tB?So.objectValues(e.enum):e instanceof nB?ty(e._def.innerType):e instanceof WS?[void 0]:e instanceof qS?[null]:e instanceof Jm?[void 0,...ty(e.unwrap())]:e instanceof qy?[null,...ty(e.unwrap())]:e instanceof nQ||e instanceof iB?ty(e.unwrap()):e instanceof rB?ty(e._def.innerType):[];class QP extends Ns{_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==si.object)return Gr(n,{code:Er.invalid_type,expected:si.object,received:n.parsedType}),cs;const r=this.discriminator,s=n.data[r],a=this.optionsMap.get(s);return a?n.common.async?a._parseAsync({data:n.data,path:n.path,parent:n}):a._parseSync({data:n.data,path:n.path,parent:n}):(Gr(n,{code:Er.invalid_union_discriminator,options:Array.from(this.optionsMap.keys()),path:[r]}),cs)}get discriminator(){return this._def.discriminator}get options(){return this._def.options}get optionsMap(){return this._def.optionsMap}static create(t,n,r){const s=new Map;for(const a of n){const c=ty(a.shape[t]);if(!c.length)throw new Error(`A discriminator value for key \`${t}\` could not be extracted from all schema options`);for(const i of c){if(s.has(i))throw new Error(`Discriminator property ${String(t)} has duplicate value ${String(i)}`);s.set(i,a)}}return new QP({typeName:as.ZodDiscriminatedUnion,discriminator:t,options:n,optionsMap:s,...Ss(r)})}}function s6(e,t){const n=Vg(e),r=Vg(t);if(e===t)return{valid:!0,data:e};if(n===si.object&&r===si.object){const s=So.objectKeys(t),a=So.objectKeys(e).filter(i=>s.indexOf(i)!==-1),c={...e,...t};for(const i of a){const f=s6(e[i],t[i]);if(!f.valid)return{valid:!1};c[i]=f.data}return{valid:!0,data:c}}else if(n===si.array&&r===si.array){if(e.length!==t.length)return{valid:!1};const s=[];for(let a=0;a<e.length;a++){const c=e[a],i=t[a],f=s6(c,i);if(!f.valid)return{valid:!1};s.push(f.data)}return{valid:!0,data:s}}else return n===si.date&&r===si.date&&+e==+t?{valid:!0,data:e}:{valid:!1}}class XS extends Ns{_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=(a,c)=>{if(r6(a)||r6(c))return cs;const i=s6(a.value,c.value);return i.valid?((i6(a)||i6(c))&&n.dirty(),{status:n.value,value:i.data}):(Gr(r,{code:Er.invalid_intersection_types}),cs)};return r.common.async?Promise.all([this._def.left._parseAsync({data:r.data,path:r.path,parent:r}),this._def.right._parseAsync({data:r.data,path:r.path,parent:r})]).then(([a,c])=>s(a,c)):s(this._def.left._parseSync({data:r.data,path:r.path,parent:r}),this._def.right._parseSync({data:r.data,path:r.path,parent:r}))}}XS.create=(e,t,n)=>new XS({left:e,right:t,typeName:as.ZodIntersection,...Ss(n)});class ig extends Ns{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==si.array)return Gr(r,{code:Er.invalid_type,expected:si.array,received:r.parsedType}),cs;if(r.data.length<this._def.items.length)return Gr(r,{code:Er.too_small,minimum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),cs;!this._def.rest&&r.data.length>this._def.items.length&&(Gr(r,{code:Er.too_big,maximum:this._def.items.length,inclusive:!0,exact:!1,type:"array"}),n.dirty());const s=[...r.data].map((a,c)=>{const i=this._def.items[c]||this._def.rest;return i?i._parse(new rg(r,a,r.path,c)):null}).filter(a=>!!a);return r.common.async?Promise.all(s).then(a=>kd.mergeArray(n,a)):kd.mergeArray(n,s)}get items(){return this._def.items}rest(t){return new ig({...this._def,rest:t})}}ig.create=(e,t)=>{if(!Array.isArray(e))throw new Error("You must pass an array of schemas to z.tuple([ ... ])");return new ig({items:e,typeName:as.ZodTuple,rest:null,...Ss(t)})};class YS extends Ns{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==si.object)return Gr(r,{code:Er.invalid_type,expected:si.object,received:r.parsedType}),cs;const s=[],a=this._def.keyType,c=this._def.valueType;for(const i in r.data)s.push({key:a._parse(new rg(r,i,r.path,i)),value:c._parse(new rg(r,r.data[i],r.path,i)),alwaysSet:i in r.data});return r.common.async?kd.mergeObjectAsync(n,s):kd.mergeObjectSync(n,s)}get element(){return this._def.valueType}static create(t,n,r){return n instanceof Ns?new YS({keyType:t,valueType:n,typeName:as.ZodRecord,...Ss(r)}):new YS({keyType:HA.create(),valueType:t,typeName:as.ZodRecord,...Ss(n)})}}class Yj extends Ns{get keySchema(){return this._def.keyType}get valueSchema(){return this._def.valueType}_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==si.map)return Gr(r,{code:Er.invalid_type,expected:si.map,received:r.parsedType}),cs;const s=this._def.keyType,a=this._def.valueType,c=[...r.data.entries()].map(([i,f],g)=>({key:s._parse(new rg(r,i,r.path,[g,"key"])),value:a._parse(new rg(r,f,r.path,[g,"value"]))}));if(r.common.async){const i=new Map;return Promise.resolve().then(async()=>{for(const f of c){const g=await f.key,y=await f.value;if(g.status==="aborted"||y.status==="aborted")return cs;(g.status==="dirty"||y.status==="dirty")&&n.dirty(),i.set(g.value,y.value)}return{status:n.value,value:i}})}else{const i=new Map;for(const f of c){const g=f.key,y=f.value;if(g.status==="aborted"||y.status==="aborted")return cs;(g.status==="dirty"||y.status==="dirty")&&n.dirty(),i.set(g.value,y.value)}return{status:n.value,value:i}}}}Yj.create=(e,t,n)=>new Yj({valueType:t,keyType:e,typeName:as.ZodMap,...Ss(n)});class Kx extends Ns{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.parsedType!==si.set)return Gr(r,{code:Er.invalid_type,expected:si.set,received:r.parsedType}),cs;const s=this._def;s.minSize!==null&&r.data.size<s.minSize.value&&(Gr(r,{code:Er.too_small,minimum:s.minSize.value,type:"set",inclusive:!0,exact:!1,message:s.minSize.message}),n.dirty()),s.maxSize!==null&&r.data.size>s.maxSize.value&&(Gr(r,{code:Er.too_big,maximum:s.maxSize.value,type:"set",inclusive:!0,exact:!1,message:s.maxSize.message}),n.dirty());const a=this._def.valueType;function c(f){const g=new Set;for(const y of f){if(y.status==="aborted")return cs;y.status==="dirty"&&n.dirty(),g.add(y.value)}return{status:n.value,value:g}}const i=[...r.data.values()].map((f,g)=>a._parse(new rg(r,f,r.path,g)));return r.common.async?Promise.all(i).then(f=>c(f)):c(i)}min(t,n){return new Kx({...this._def,minSize:{value:t,message:wi.toString(n)}})}max(t,n){return new Kx({...this._def,maxSize:{value:t,message:wi.toString(n)}})}size(t,n){return this.min(t,n).max(t,n)}nonempty(t){return this.min(1,t)}}Kx.create=(e,t)=>new Kx({valueType:e,minSize:null,maxSize:null,typeName:as.ZodSet,...Ss(t)});class ow extends Ns{constructor(){super(...arguments),this.validate=this.implement}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==si.function)return Gr(n,{code:Er.invalid_type,expected:si.function,received:n.parsedType}),cs;function r(i,f){return Kj({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Gj(),Rw].filter(g=>!!g),issueData:{code:Er.invalid_arguments,argumentsError:f}})}function s(i,f){return Kj({data:i,path:n.path,errorMaps:[n.common.contextualErrorMap,n.schemaErrorMap,Gj(),Rw].filter(g=>!!g),issueData:{code:Er.invalid_return_type,returnTypeError:f}})}const a={errorMap:n.common.contextualErrorMap},c=n.data;if(this._def.returns instanceof Dw){const i=this;return yh(async function(...f){const g=new Yf([]),y=await i._def.args.parseAsync(f,a).catch(T=>{throw g.addIssue(r(f,T)),g}),b=await Reflect.apply(c,this,y);return await i._def.returns._def.type.parseAsync(b,a).catch(T=>{throw g.addIssue(s(b,T)),g})})}else{const i=this;return yh(function(...f){const g=i._def.args.safeParse(f,a);if(!g.success)throw new Yf([r(f,g.error)]);const y=Reflect.apply(c,this,g.data),b=i._def.returns.safeParse(y,a);if(!b.success)throw new Yf([s(y,b.error)]);return b.data})}}parameters(){return this._def.args}returnType(){return this._def.returns}args(...t){return new ow({...this._def,args:ig.create(t).rest(Cx.create())})}returns(t){return new ow({...this._def,returns:t})}implement(t){return this.parse(t)}strictImplement(t){return this.parse(t)}static create(t,n,r){return new ow({args:t||ig.create([]).rest(Cx.create()),returns:n||Cx.create(),typeName:as.ZodFunction,...Ss(r)})}}class JS extends Ns{get schema(){return this._def.getter()}_parse(t){const{ctx:n}=this._processInputParams(t);return this._def.getter()._parse({data:n.data,path:n.path,parent:n})}}JS.create=(e,t)=>new JS({getter:e,typeName:as.ZodLazy,...Ss(t)});class eB extends Ns{_parse(t){if(t.data!==this._def.value){const n=this._getOrReturnCtx(t);return Gr(n,{received:n.data,code:Er.invalid_literal,expected:this._def.value}),cs}return{status:"valid",value:t.data}}get value(){return this._def.value}}eB.create=(e,t)=>new eB({value:e,typeName:as.ZodLiteral,...Ss(t)});function Jue(e,t){return new Wy({values:e,typeName:as.ZodEnum,...Ss(t)})}class Wy extends Ns{constructor(){super(...arguments),eC.set(this,void 0)}_parse(t){if(typeof t.data!="string"){const n=this._getOrReturnCtx(t),r=this._def.values;return Gr(n,{expected:So.joinValues(r),received:n.parsedType,code:Er.invalid_type}),cs}if(qj(this,eC)||que(this,eC,new Set(this._def.values)),!qj(this,eC).has(t.data)){const n=this._getOrReturnCtx(t),r=this._def.values;return Gr(n,{received:n.data,code:Er.invalid_enum_value,options:r}),cs}return yh(t.data)}get options(){return this._def.values}get enum(){const t={};for(const n of this._def.values)t[n]=n;return t}get Values(){const t={};for(const n of this._def.values)t[n]=n;return t}get Enum(){const t={};for(const n of this._def.values)t[n]=n;return t}extract(t,n=this._def){return Wy.create(t,{...this._def,...n})}exclude(t,n=this._def){return Wy.create(this.options.filter(r=>!t.includes(r)),{...this._def,...n})}}eC=new WeakMap;Wy.create=Jue;class tB extends Ns{constructor(){super(...arguments),tC.set(this,void 0)}_parse(t){const n=So.getValidEnumValues(this._def.values),r=this._getOrReturnCtx(t);if(r.parsedType!==si.string&&r.parsedType!==si.number){const s=So.objectValues(n);return Gr(r,{expected:So.joinValues(s),received:r.parsedType,code:Er.invalid_type}),cs}if(qj(this,tC)||que(this,tC,new Set(So.getValidEnumValues(this._def.values))),!qj(this,tC).has(t.data)){const s=So.objectValues(n);return Gr(r,{received:r.data,code:Er.invalid_enum_value,options:s}),cs}return yh(t.data)}get enum(){return this._def.values}}tC=new WeakMap;tB.create=(e,t)=>new tB({values:e,typeName:as.ZodNativeEnum,...Ss(t)});class Dw extends Ns{unwrap(){return this._def.type}_parse(t){const{ctx:n}=this._processInputParams(t);if(n.parsedType!==si.promise&&n.common.async===!1)return Gr(n,{code:Er.invalid_type,expected:si.promise,received:n.parsedType}),cs;const r=n.parsedType===si.promise?n.data:Promise.resolve(n.data);return yh(r.then(s=>this._def.type.parseAsync(s,{path:n.path,errorMap:n.common.contextualErrorMap})))}}Dw.create=(e,t)=>new Dw({type:e,typeName:as.ZodPromise,...Ss(t)});class JA extends Ns{innerType(){return this._def.schema}sourceType(){return this._def.schema._def.typeName===as.ZodEffects?this._def.schema.sourceType():this._def.schema}_parse(t){const{status:n,ctx:r}=this._processInputParams(t),s=this._def.effect||null,a={addIssue:c=>{Gr(r,c),c.fatal?n.abort():n.dirty()},get path(){return r.path}};if(a.addIssue=a.addIssue.bind(a),s.type==="preprocess"){const c=s.transform(r.data,a);if(r.common.async)return Promise.resolve(c).then(async i=>{if(n.value==="aborted")return cs;const f=await this._def.schema._parseAsync({data:i,path:r.path,parent:r});return f.status==="aborted"?cs:f.status==="dirty"||n.value==="dirty"?Wj(f.value):f});{if(n.value==="aborted")return cs;const i=this._def.schema._parseSync({data:c,path:r.path,parent:r});return i.status==="aborted"?cs:i.status==="dirty"||n.value==="dirty"?Wj(i.value):i}}if(s.type==="refinement"){const c=i=>{const f=s.refinement(i,a);if(r.common.async)return Promise.resolve(f);if(f instanceof Promise)throw new Error("Async refinement encountered during synchronous parse operation. Use .parseAsync instead.");return i};if(r.common.async===!1){const i=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});return i.status==="aborted"?cs:(i.status==="dirty"&&n.dirty(),c(i.value),{status:n.value,value:i.value})}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(i=>i.status==="aborted"?cs:(i.status==="dirty"&&n.dirty(),c(i.value).then(()=>({status:n.value,value:i.value}))))}if(s.type==="transform")if(r.common.async===!1){const c=this._def.schema._parseSync({data:r.data,path:r.path,parent:r});if(!$x(c))return c;const i=s.transform(c.value,a);if(i instanceof Promise)throw new Error("Asynchronous transform encountered during synchronous parse operation. Use .parseAsync instead.");return{status:n.value,value:i}}else return this._def.schema._parseAsync({data:r.data,path:r.path,parent:r}).then(c=>$x(c)?Promise.resolve(s.transform(c.value,a)).then(i=>({status:n.value,value:i})):c);So.assertNever(s)}}JA.create=(e,t,n)=>new JA({schema:e,typeName:as.ZodEffects,effect:t,...Ss(n)});JA.createWithPreprocess=(e,t,n)=>new JA({schema:t,effect:{type:"preprocess",transform:e},typeName:as.ZodEffects,...Ss(n)});class Jm extends Ns{_parse(t){return this._getType(t)===si.undefined?yh(void 0):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}Jm.create=(e,t)=>new Jm({innerType:e,typeName:as.ZodOptional,...Ss(t)});class qy extends Ns{_parse(t){return this._getType(t)===si.null?yh(null):this._def.innerType._parse(t)}unwrap(){return this._def.innerType}}qy.create=(e,t)=>new qy({innerType:e,typeName:as.ZodNullable,...Ss(t)});class nB extends Ns{_parse(t){const{ctx:n}=this._processInputParams(t);let r=n.data;return n.parsedType===si.undefined&&(r=this._def.defaultValue()),this._def.innerType._parse({data:r,path:n.path,parent:n})}removeDefault(){return this._def.innerType}}nB.create=(e,t)=>new nB({innerType:e,typeName:as.ZodDefault,defaultValue:typeof t.default=="function"?t.default:()=>t.default,...Ss(t)});class rB extends Ns{_parse(t){const{ctx:n}=this._processInputParams(t),r={...n,common:{...n.common,issues:[]}},s=this._def.innerType._parse({data:r.data,path:r.path,parent:{...r}});return GS(s)?s.then(a=>({status:"valid",value:a.status==="valid"?a.value:this._def.catchValue({get error(){return new Yf(r.common.issues)},input:r.data})})):{status:"valid",value:s.status==="valid"?s.value:this._def.catchValue({get error(){return new Yf(r.common.issues)},input:r.data})}}removeCatch(){return this._def.innerType}}rB.create=(e,t)=>new rB({innerType:e,typeName:as.ZodCatch,catchValue:typeof t.catch=="function"?t.catch:()=>t.catch,...Ss(t)});class Jj extends Ns{_parse(t){if(this._getType(t)!==si.nan){const n=this._getOrReturnCtx(t);return Gr(n,{code:Er.invalid_type,expected:si.nan,received:n.parsedType}),cs}return{status:"valid",value:t.data}}}Jj.create=e=>new Jj({typeName:as.ZodNaN,...Ss(e)});const PYe=Symbol("zod_brand");class nQ extends Ns{_parse(t){const{ctx:n}=this._processInputParams(t),r=n.data;return this._def.type._parse({data:r,path:n.path,parent:n})}unwrap(){return this._def.type}}class iE extends Ns{_parse(t){const{status:n,ctx:r}=this._processInputParams(t);if(r.common.async)return(async()=>{const s=await this._def.in._parseAsync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?cs:s.status==="dirty"?(n.dirty(),Wj(s.value)):this._def.out._parseAsync({data:s.value,path:r.path,parent:r})})();{const s=this._def.in._parseSync({data:r.data,path:r.path,parent:r});return s.status==="aborted"?cs:s.status==="dirty"?(n.dirty(),{status:"dirty",value:s.value}):this._def.out._parseSync({data:s.value,path:r.path,parent:r})}}static create(t,n){return new iE({in:t,out:n,typeName:as.ZodPipeline})}}class iB extends Ns{_parse(t){const n=this._def.innerType._parse(t),r=s=>($x(s)&&(s.value=Object.freeze(s.value)),s);return GS(n)?n.then(s=>r(s)):r(n)}unwrap(){return this._def.innerType}}iB.create=(e,t)=>new iB({innerType:e,typeName:as.ZodReadonly,...Ss(t)});function qX(e,t){const n=typeof e=="function"?e(t):typeof e=="string"?{message:e}:e;return typeof n=="string"?{message:n}:n}function ede(e,t={},n){return e?Ow.create().superRefine((r,s)=>{var a,c;const i=e(r);if(i instanceof Promise)return i.then(f=>{var g,y;if(!f){const b=qX(t,r),T=(y=(g=b.fatal)!==null&&g!==void 0?g:n)!==null&&y!==void 0?y:!0;s.addIssue({code:"custom",...b,fatal:T})}});if(!i){const f=qX(t,r),g=(c=(a=f.fatal)!==null&&a!==void 0?a:n)!==null&&c!==void 0?c:!0;s.addIssue({code:"custom",...f,fatal:g})}}):Ow.create()}const kYe={object:Wp.lazycreate};var as;(function(e){e.ZodString="ZodString",e.ZodNumber="ZodNumber",e.ZodNaN="ZodNaN",e.ZodBigInt="ZodBigInt",e.ZodBoolean="ZodBoolean",e.ZodDate="ZodDate",e.ZodSymbol="ZodSymbol",e.ZodUndefined="ZodUndefined",e.ZodNull="ZodNull",e.ZodAny="ZodAny",e.ZodUnknown="ZodUnknown",e.ZodNever="ZodNever",e.ZodVoid="ZodVoid",e.ZodArray="ZodArray",e.ZodObject="ZodObject",e.ZodUnion="ZodUnion",e.ZodDiscriminatedUnion="ZodDiscriminatedUnion",e.ZodIntersection="ZodIntersection",e.ZodTuple="ZodTuple",e.ZodRecord="ZodRecord",e.ZodMap="ZodMap",e.ZodSet="ZodSet",e.ZodFunction="ZodFunction",e.ZodLazy="ZodLazy",e.ZodLiteral="ZodLiteral",e.ZodEnum="ZodEnum",e.ZodEffects="ZodEffects",e.ZodNativeEnum="ZodNativeEnum",e.ZodOptional="ZodOptional",e.ZodNullable="ZodNullable",e.ZodDefault="ZodDefault",e.ZodCatch="ZodCatch",e.ZodPromise="ZodPromise",e.ZodBranded="ZodBranded",e.ZodPipeline="ZodPipeline",e.ZodReadonly="ZodReadonly"})(as||(as={}));const LYe=(e,t={message:`Input not instance of ${e.name}`})=>ede(n=>n instanceof e,t),tde=HA.create,nde=Gy.create,MYe=Jj.create,NYe=Ky.create,rde=KS.create,RYe=Gx.create,OYe=Zj.create,DYe=WS.create,UYe=qS.create,zYe=Ow.create,QYe=Cx.create,HYe=u0.create,VYe=Xj.create,$Ye=WA.create,GYe=Wp.create,KYe=Wp.strictCreate,WYe=ZS.create,qYe=QP.create,ZYe=XS.create,XYe=ig.create,YYe=YS.create,JYe=Yj.create,eJe=Kx.create,tJe=ow.create,nJe=JS.create,rJe=eB.create,iJe=Wy.create,sJe=tB.create,oJe=Dw.create,ZX=JA.create,aJe=Jm.create,lJe=qy.create,cJe=JA.createWithPreprocess,uJe=iE.create,dJe=()=>tde().optional(),hJe=()=>nde().optional(),fJe=()=>rde().optional(),pJe={string:e=>HA.create({...e,coerce:!0}),number:e=>Gy.create({...e,coerce:!0}),boolean:e=>KS.create({...e,coerce:!0}),bigint:e=>Ky.create({...e,coerce:!0}),date:e=>Gx.create({...e,coerce:!0})},AJe=cs;var Tt=Object.freeze({__proto__:null,defaultErrorMap:Rw,setErrorMap:cYe,getErrorMap:Gj,makeIssue:Kj,EMPTY_PATH:uYe,addIssueToContext:Gr,ParseStatus:kd,INVALID:cs,DIRTY:Wj,OK:yh,isAborted:r6,isDirty:i6,isValid:$x,isAsync:GS,get util(){return So},get objectUtil(){return n6},ZodParsedType:si,getParsedType:Vg,ZodType:Ns,datetimeRegex:Yue,ZodString:HA,ZodNumber:Gy,ZodBigInt:Ky,ZodBoolean:KS,ZodDate:Gx,ZodSymbol:Zj,ZodUndefined:WS,ZodNull:qS,ZodAny:Ow,ZodUnknown:Cx,ZodNever:u0,ZodVoid:Xj,ZodArray:WA,ZodObject:Wp,ZodUnion:ZS,ZodDiscriminatedUnion:QP,ZodIntersection:XS,ZodTuple:ig,ZodRecord:YS,ZodMap:Yj,ZodSet:Kx,ZodFunction:ow,ZodLazy:JS,ZodLiteral:eB,ZodEnum:Wy,ZodNativeEnum:tB,ZodPromise:Dw,ZodEffects:JA,ZodTransformer:JA,ZodOptional:Jm,ZodNullable:qy,ZodDefault:nB,ZodCatch:rB,ZodNaN:Jj,BRAND:PYe,ZodBranded:nQ,ZodPipeline:iE,ZodReadonly:iB,custom:ede,Schema:Ns,ZodSchema:Ns,late:kYe,get ZodFirstPartyTypeKind(){return as},coerce:pJe,any:zYe,array:$Ye,bigint:NYe,boolean:rde,date:RYe,discriminatedUnion:qYe,effect:ZX,enum:iJe,function:tJe,instanceof:LYe,intersection:ZYe,lazy:nJe,literal:rJe,map:JYe,nan:MYe,nativeEnum:sJe,never:HYe,null:UYe,nullable:lJe,number:nde,object:GYe,oboolean:fJe,onumber:hJe,optional:aJe,ostring:dJe,pipeline:uJe,preprocess:cJe,promise:oJe,record:YYe,set:eJe,strictObject:KYe,string:tde,symbol:OYe,transformer:ZX,tuple:XYe,undefined:DYe,union:WYe,unknown:QYe,void:VYe,NEVER:AJe,ZodIssueCode:Er,quotelessJson:lYe,ZodError:Yf}),mJe=Object.defineProperty,gJe=(e,t,n)=>t in e?mJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,yJe=(e,t,n)=>(gJe(e,t+"",n),n),vJe={getRandomValues:e=>new Uint8Array(e.map(()=>Math.floor(Math.random()*256)))},XX=typeof window<"u"&&typeof window.document<"u"?window.crypto:jue;XX.getRandomValues||(XX=vJe);var ide=class{constructor(){Hf(this,"listeners",{})}emit(e,t){const n=this.listeners[e];if(n)for(const r of[...n])r(t)}onceOrMore(e,t){const n=r=>{t(r)==="stop-listening"&&this.off(e,n)};this.on(e,n)}once(e,t){const n=r=>{this.off(e,n),t(r)};this.on(e,n)}on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){const n=this.listeners[e];if(!n)return;const r=n.indexOf(t);r!==-1&&n.splice(r,1)}cleanup(){this.listeners={}}},xJe=(e,t)=>{const n=new aYe.EventSourcePolyfill(e,{headers:t.headers,heartbeatTimeout:t.timeout}),r=new ide;return n.onopen=s=>r.emit("open",s),n.onmessage=s=>r.emit("message",s),n.onerror=s=>r.emit("error",s),{emitter:r,source:n}},_Je=async(e,t={})=>{const{emitter:n,source:r}=xJe(e,t);return await new Promise((s,a)=>{n.on("open",()=>{s()}),n.on("error",c=>{a(c)})}).finally(()=>n.cleanup()),{on:n.on.bind(n),close:()=>{n.cleanup(),r.close()}}},wJe=Tt.object({type:Tt.literal("message_created"),data:Tt.object({id:Tt.string().describe("Id of the [Message](#schema_message)"),createdAt:Tt.string().datetime().describe("Creation date of the [Message](#schema_message) in ISO 8601 format"),payload:Tt.union([Tt.object({audioUrl:Tt.string().min(1),type:Tt.literal("audio")}),Tt.object({title:Tt.string().min(1),subtitle:Tt.string().min(1).optional(),imageUrl:Tt.string().min(1).optional(),actions:Tt.array(Tt.object({action:Tt.enum(["postback","url","say"]),label:Tt.string().min(1),value:Tt.string().min(1)})),type:Tt.literal("card")}),Tt.object({items:Tt.array(Tt.object({title:Tt.string().min(1),subtitle:Tt.string().min(1).optional(),imageUrl:Tt.string().min(1).optional(),actions:Tt.array(Tt.object({action:Tt.enum(["postback","url","say"]),label:Tt.string().min(1),value:Tt.string().min(1)}))})),type:Tt.literal("carousel")}),Tt.object({text:Tt.string().min(1),options:Tt.array(Tt.object({label:Tt.string().min(1),value:Tt.string().min(1)})),disableFreeText:Tt.boolean().optional(),type:Tt.literal("choice")}),Tt.object({text:Tt.string().min(1),options:Tt.array(Tt.object({label:Tt.string().min(1),value:Tt.string().min(1)})),disableFreeText:Tt.boolean().optional(),type:Tt.literal("dropdown")}),Tt.object({fileUrl:Tt.string().min(1),title:Tt.string().min(1).optional(),type:Tt.literal("file")}),Tt.object({imageUrl:Tt.string().min(1),type:Tt.literal("image")}),Tt.object({latitude:Tt.number(),longitude:Tt.number(),address:Tt.string().optional(),title:Tt.string().optional(),type:Tt.literal("location")}),Tt.object({text:Tt.string().min(1),value:Tt.string().optional(),type:Tt.literal("text")}),Tt.object({videoUrl:Tt.string().min(1),type:Tt.literal("video")}),Tt.object({items:Tt.array(Tt.union([Tt.object({type:Tt.literal("text"),payload:Tt.object({text:Tt.string().min(1),value:Tt.string().optional()})}),Tt.object({type:Tt.literal("markdown"),payload:Tt.object({markdown:Tt.string().min(1)})}),Tt.object({type:Tt.literal("image"),payload:Tt.object({imageUrl:Tt.string().min(1)})}),Tt.object({type:Tt.literal("audio"),payload:Tt.object({audioUrl:Tt.string().min(1)})}),Tt.object({type:Tt.literal("video"),payload:Tt.object({videoUrl:Tt.string().min(1)})}),Tt.object({type:Tt.literal("file"),payload:Tt.object({fileUrl:Tt.string().min(1),title:Tt.string().min(1).optional()})}),Tt.object({type:Tt.literal("location"),payload:Tt.object({latitude:Tt.number(),longitude:Tt.number(),address:Tt.string().optional(),title:Tt.string().optional()})})])),type:Tt.literal("bloc")}),Tt.object({markdown:Tt.string().min(1),type:Tt.literal("markdown")}),Tt.object({url:Tt.string(),name:Tt.string(),data:Tt.union([Tt.any(),Tt.null()]).optional(),type:Tt.literal("custom")}),Tt.object({reaction:Tt.string(),type:Tt.literal("reaction")})]).describe("Payload is the content of the message."),userId:Tt.string().describe("ID of the [User](#schema_user)"),conversationId:Tt.string().describe("ID of the [Conversation](#schema_conversation)"),metadata:Tt.record(Tt.union([Tt.any(),Tt.null()])).describe("Metadata of the message").optional(),replyTo:Tt.string().describe("ID of the message this message is replying to").optional(),selectedBy:Tt.string().describe("ID of the user who selected this message. Undefined if not selected.").optional()}).describe("The Message object represents a message in a [Conversation](#schema_conversation) for a specific [User](#schema_user).")}),bJe=Tt.object({type:Tt.literal("message_updated"),data:Tt.object({id:Tt.string().describe("Id of the [Message](#schema_message)"),createdAt:Tt.string().datetime().describe("Creation date of the [Message](#schema_message) in ISO 8601 format"),payload:Tt.union([Tt.object({audioUrl:Tt.string().min(1),type:Tt.literal("audio")}),Tt.object({title:Tt.string().min(1),subtitle:Tt.string().min(1).optional(),imageUrl:Tt.string().min(1).optional(),actions:Tt.array(Tt.object({action:Tt.enum(["postback","url","say"]),label:Tt.string().min(1),value:Tt.string().min(1)})),type:Tt.literal("card")}),Tt.object({items:Tt.array(Tt.object({title:Tt.string().min(1),subtitle:Tt.string().min(1).optional(),imageUrl:Tt.string().min(1).optional(),actions:Tt.array(Tt.object({action:Tt.enum(["postback","url","say"]),label:Tt.string().min(1),value:Tt.string().min(1)}))})),type:Tt.literal("carousel")}),Tt.object({text:Tt.string().min(1),options:Tt.array(Tt.object({label:Tt.string().min(1),value:Tt.string().min(1)})),disableFreeText:Tt.boolean().optional(),type:Tt.literal("choice")}),Tt.object({text:Tt.string().min(1),options:Tt.array(Tt.object({label:Tt.string().min(1),value:Tt.string().min(1)})),disableFreeText:Tt.boolean().optional(),type:Tt.literal("dropdown")}),Tt.object({fileUrl:Tt.string().min(1),title:Tt.string().min(1).optional(),type:Tt.literal("file")}),Tt.object({imageUrl:Tt.string().min(1),type:Tt.literal("image")}),Tt.object({latitude:Tt.number(),longitude:Tt.number(),address:Tt.string().optional(),title:Tt.string().optional(),type:Tt.literal("location")}),Tt.object({text:Tt.string().min(1),value:Tt.string().optional(),type:Tt.literal("text")}),Tt.object({videoUrl:Tt.string().min(1),type:Tt.literal("video")}),Tt.object({items:Tt.array(Tt.union([Tt.object({type:Tt.literal("text"),payload:Tt.object({text:Tt.string().min(1),value:Tt.string().optional()})}),Tt.object({type:Tt.literal("markdown"),payload:Tt.object({markdown:Tt.string().min(1)})}),Tt.object({type:Tt.literal("image"),payload:Tt.object({imageUrl:Tt.string().min(1)})}),Tt.object({type:Tt.literal("audio"),payload:Tt.object({audioUrl:Tt.string().min(1)})}),Tt.object({type:Tt.literal("video"),payload:Tt.object({videoUrl:Tt.string().min(1)})}),Tt.object({type:Tt.literal("file"),payload:Tt.object({fileUrl:Tt.string().min(1),title:Tt.string().min(1).optional()})}),Tt.object({type:Tt.literal("location"),payload:Tt.object({latitude:Tt.number(),longitude:Tt.number(),address:Tt.string().optional(),title:Tt.string().optional()})})])),type:Tt.literal("bloc")}),Tt.object({markdown:Tt.string().min(1),type:Tt.literal("markdown")}),Tt.object({url:Tt.string(),name:Tt.string(),data:Tt.union([Tt.any(),Tt.null()]).optional(),type:Tt.literal("custom")}),Tt.object({reaction:Tt.string(),type:Tt.literal("reaction")})]).describe("Payload is the content of the message."),userId:Tt.string().describe("ID of the [User](#schema_user)"),conversationId:Tt.string().describe("ID of the [Conversation](#schema_conversation)"),metadata:Tt.record(Tt.union([Tt.any(),Tt.null()])).describe("Metadata of the message").optional(),replyTo:Tt.string().describe("ID of the message this message is replying to").optional(),selectedBy:Tt.string().describe("ID of the user who selected this message. Undefined if not selected.").optional()}).describe("The Message object represents a message in a [Conversation](#schema_conversation) for a specific [User](#schema_user).")}),CJe=Tt.object({type:Tt.literal("webchat_visibility"),data:Tt.object({visibility:Tt.union([Tt.literal("show"),Tt.literal("hide"),Tt.literal("toggle")])})}),SJe=Tt.object({type:Tt.literal("webchat_config"),data:Tt.object({config:Tt.record(Tt.union([Tt.any(),Tt.null()]))})}),BJe=Tt.object({type:Tt.literal("custom"),data:Tt.object({event:Tt.record(Tt.union([Tt.any(),Tt.null()]))})}),EJe=Tt.object({type:Tt.literal("typing_started"),data:Tt.object({timeout:Tt.number().optional()})}),TJe=Tt.object({type:Tt.literal("typing_stopped"),data:Tt.record(Tt.never())}),IJe={messageCreated:wJe,messageUpdated:bJe,webchatVisibility:CJe,webchatConfig:SJe,custom:BJe,typingStarted:EJe,typingStopped:TJe},YX="unknown error",sde=class extends ide{constructor(e){super(),Hf(this,"_state",{status:"disconnected"}),Hf(this,"connect",async()=>{if(this._state.status==="connected")return;if(this._state.status==="connecting"){await this._state.connectionPromise;return}const t=this._connect();this._state={status:"connecting",connectionPromise:t},await t}),Hf(this,"disconnect",async()=>{if(this._state.status==="disconnected")return;let t;this._state.status==="connecting"?t=await this._state.connectionPromise:t=this._state.source,this._disconnectSync(t)}),Hf(this,"_connect",async()=>{const t=await _Je(`${this._props.url}/conversations/${this._props.conversationId}/listen`,{headers:{"x-user-key":this._props.userKey},timeout:this._props.timeout});return t.on("message",this._handleMessage),t.on("error",this._handleError(t)),this._state={status:"connected",source:t},t}),Hf(this,"_disconnectSync",t=>{t.close(),this._state={status:"disconnected"}}),Hf(this,"_handleMessage",t=>{const n=this._parseSignal(t.data);this.emit(n.type,n.data)}),Hf(this,"_handleError",t=>n=>{this._disconnectSync(t);const r=this._toError(n);this.emit("error",r)}),Hf(this,"_parseSignal",t=>{for(const n of Object.values(IJe)){const r=this._safeJsonParse(t),s=n.safeParse(r);if(s.success)return s.data}return{type:"unknown",data:t}}),Hf(this,"_safeJsonParse",t=>{try{return JSON.parse(t)}catch{return t}}),Hf(this,"_toError",t=>{if(t instanceof Error)return t;if(typeof t=="string")return new Error(t);if(t===null)return new Error(YX);if(typeof t=="object"&&"message"in t)return this._toError(t.message);try{const n=JSON.stringify(t);return new Error(n)}catch{return new Error(YX)}}),this._props=e}get status(){return this._state.status}},jJe=sde;yJe(jJe,"listen",async e=>{const t=new sde(e);return await t.connect(),t});const FJe=["audio","file","image","video"],PJe=e=>FJe.includes(e);function kJe(){const[e,t]=q.useState(!1),n=q.useRef(null);return{isTyping:e,setIsTyping:(r,s)=>{if(t(r),!r)return()=>{};if(n.current=new Date,!s)return()=>{};const a=setTimeout(()=>{const c=n.current;c&&new Date().getTime()-c.getTime()>s&&t(!1)},s+100);return()=>clearTimeout(a)}}}var LJe=Object.defineProperty,MJe=(e,t,n)=>t in e?LJe(e,t,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[t]=n,NJe=(e,t,n)=>MJe(e,t+"",n),RJe=async(e,t)=>{let n=typeof t=="function"?await t(e):t;if(n)return e.scheme==="bearer"?`Bearer ${n}`:e.scheme==="basic"?`Basic ${btoa(n)}`:n},OJe={bodySerializer:e=>JSON.stringify(e,(t,n)=>typeof n=="bigint"?n.toString():n)},DJe=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},UJe=e=>{switch(e){case"form":return",";case"pipeDelimited":return"|";case"spaceDelimited":return"%20";default:return","}},zJe=e=>{switch(e){case"label":return".";case"matrix":return";";case"simple":return",";default:return"&"}},ode=({allowReserved:e,explode:t,name:n,style:r,value:s})=>{if(!t){let i=(e?s:s.map(f=>encodeURIComponent(f))).join(UJe(r));switch(r){case"label":return`.${i}`;case"matrix":return`;${n}=${i}`;case"simple":return i;default:return`${n}=${i}`}}let a=DJe(r),c=s.map(i=>r==="label"||r==="simple"?e?i:encodeURIComponent(i):HP({allowReserved:e,name:n,value:i})).join(a);return r==="label"||r==="matrix"?a+c:c},HP=({allowReserved:e,name:t,value:n})=>{if(n==null)return"";if(typeof n=="object")throw new Error("Deeply-nested arrays/objects aren’t supported. Provide your own `querySerializer()` to handle these.");return`${t}=${e?n:encodeURIComponent(n)}`},ade=({allowReserved:e,explode:t,name:n,style:r,value:s})=>{if(s instanceof Date)return`${n}=${s.toISOString()}`;if(r!=="deepObject"&&!t){let i=[];Object.entries(s).forEach(([g,y])=>{i=[...i,g,e?y:encodeURIComponent(y)]});let f=i.join(",");switch(r){case"form":return`${n}=${f}`;case"label":return`.${f}`;case"matrix":return`;${n}=${f}`;default:return f}}let a=zJe(r),c=Object.entries(s).map(([i,f])=>HP({allowReserved:e,name:r==="deepObject"?`${n}[${i}]`:i,value:f})).join(a);return r==="label"||r==="matrix"?a+c:c},QJe=/\{[^{}]+\}/g,HJe=({path:e,url:t})=>{let n=t,r=t.match(QJe);if(r)for(let s of r){let a=!1,c=s.substring(1,s.length-1),i="simple";c.endsWith("*")&&(a=!0,c=c.substring(0,c.length-1)),c.startsWith(".")?(c=c.substring(1),i="label"):c.startsWith(";")&&(c=c.substring(1),i="matrix");let f=e[c];if(f==null)continue;if(Array.isArray(f)){n=n.replace(s,ode({explode:a,name:c,style:i,value:f}));continue}if(typeof f=="object"){n=n.replace(s,ade({explode:a,name:c,style:i,value:f}));continue}if(i==="matrix"){n=n.replace(s,`;${HP({name:c,value:f})}`);continue}let g=encodeURIComponent(i==="label"?`.${f}`:f);n=n.replace(s,g)}return n},lde=({allowReserved:e,array:t,object:n}={})=>r=>{let s=[];if(r&&typeof r=="object")for(let a in r){let c=r[a];if(c!=null){if(Array.isArray(c)){s=[...s,ode({allowReserved:e,explode:!0,name:a,style:"form",value:c,...t})];continue}if(typeof c=="object"){s=[...s,ade({allowReserved:e,explode:!0,name:a,style:"deepObject",value:c,...n})];continue}s=[...s,HP({allowReserved:e,name:a,value:c})]}}return s.join("&")},VJe=e=>{var t;if(!e)return"stream";let n=(t=e.split(";")[0])==null?void 0:t.trim();if(n){if(n.startsWith("application/json")||n.endsWith("+json"))return"json";if(n==="multipart/form-data")return"formData";if(["application/","audio/","image/","video/"].some(r=>n.startsWith(r)))return"blob";if(n.startsWith("text/"))return"text"}},$Je=async({security:e,...t})=>{for(let n of e){let r=await RJe(n,t.auth);if(!r)continue;let s=n.name??"Authorization";switch(n.in){case"query":t.query||(t.query={}),t.query[s]=r;break;case"cookie":t.headers.append("Cookie",`${s}=${r}`);break;case"header":default:t.headers.set(s,r);break}return}},JX=e=>GJe({baseUrl:e.baseUrl,path:e.path,query:e.query,querySerializer:typeof e.querySerializer=="function"?e.querySerializer:lde(e.querySerializer),url:e.url}),GJe=({baseUrl:e,path:t,query:n,querySerializer:r,url:s})=>{let a=s.startsWith("/")?s:`/${s}`,c=(e??"")+a;t&&(c=HJe({path:t,url:c}));let i=n?r(n):"";return i.startsWith("?")&&(i=i.substring(1)),i&&(c+=`?${i}`),c},eY=(e,t)=>{var n;let r={...e,...t};return(n=r.baseUrl)!=null&&n.endsWith("/")&&(r.baseUrl=r.baseUrl.substring(0,r.baseUrl.length-1)),r.headers=cde(e.headers,t.headers),r},cde=(...e)=>{let t=new Headers;for(let n of e){if(!n||typeof n!="object")continue;let r=n instanceof Headers?n.entries():Object.entries(n);for(let[s,a]of r)if(a===null)t.delete(s);else if(Array.isArray(a))for(let c of a)t.append(s,c);else a!==void 0&&t.set(s,typeof a=="object"?JSON.stringify(a):a)}return t},D5=class{constructor(){NJe(this,"_fns"),this._fns=[]}clear(){this._fns=[]}exists(e){return this._fns.indexOf(e)!==-1}eject(e){let t=this._fns.indexOf(e);t!==-1&&(this._fns=[...this._fns.slice(0,t),...this._fns.slice(t+1)])}use(e){this._fns=[...this._fns,e]}},KJe=()=>({error:new D5,request:new D5,response:new D5}),WJe=lde({allowReserved:!1,array:{explode:!0,style:"form"},object:{explode:!0,style:"deepObject"}}),qJe={"Content-Type":"application/json"},ude=(e={})=>({...OJe,headers:qJe,parseAs:"auto",querySerializer:WJe,...e}),ZJe=(e={})=>{let t=eY(ude(),e),n=()=>({...t}),r=c=>(t=eY(t,c),n()),s=KJe(),a=async c=>{let i={...t,...c,fetch:c.fetch??t.fetch??globalThis.fetch,headers:cde(t.headers,c.headers)};i.security&&await $Je({...i,security:i.security}),i.body&&i.bodySerializer&&(i.body=i.bodySerializer(i.body)),(i.body===void 0||i.body==="")&&i.headers.delete("Content-Type");let f=JX(i),g={redirect:"follow",...i},y=new Request(f,g);for(let W of s.request._fns)y=await W(y,i);let b=i.fetch,T=await b(y);for(let W of s.response._fns)T=await W(T,y,i);let S={request:y,response:T};if(T.ok){if(T.status===204||T.headers.get("Content-Length")==="0")return{data:{},...S};let W=(i.parseAs==="auto"?VJe(T.headers.get("Content-Type")):i.parseAs)??"json";if(W==="stream")return{data:T.body,...S};let L=await T[W]();return W==="json"&&(i.responseValidator&&await i.responseValidator(L),i.responseTransformer&&(L=await i.responseTransformer(L))),{data:L,...S}}let U=await T.text();try{U=JSON.parse(U)}catch{}let N=U;for(let W of s.error._fns)N=await W(U,T,y,i);if(N=N||{},i.throwOnError)throw N;return{error:N,...S}};return{buildUrl:JX,connect:c=>a({...c,method:"CONNECT"}),delete:c=>a({...c,method:"DELETE"}),get:c=>a({...c,method:"GET"}),getConfig:n,head:c=>a({...c,method:"HEAD"}),interceptors:s,options:c=>a({...c,method:"OPTIONS"}),patch:c=>a({...c,method:"PATCH"}),post:c=>a({...c,method:"POST"}),put:c=>a({...c,method:"PUT"}),request:a,setConfig:r,trace:c=>a({...c,method:"TRACE"})}},XJe=ZJe,YJe=ude;const JJe=e=>({...e,withCredentials:!0,timeout:6e4,maxBodyLength:104857600,maxContentLength:104857600,throwOnError:!0}),Zl=XJe(JJe(YJe({baseUrl:"https://webchat.botpress.cloud/"}))),eet=e=>(e.client??Zl).delete({url:"/conversations/{id}",...e}),tet=e=>(e.client??Zl).get({url:"/conversations/{id}",...e}),net=e=>(e.client??Zl).get({url:"/conversations",...e}),ret=e=>(e.client??Zl).post({url:"/conversations",...e,headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}}),iet=e=>(e.client??Zl).get({url:"/conversations/{id}/messages",...e}),set=e=>(e.client??Zl).get({url:"/conversations/{id}/participants",...e}),oet=e=>(e.client??Zl).post({url:"/conversations/{id}/participants",...e,headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}}),aet=e=>(e.client??Zl).delete({url:"/conversations/{id}/participants/{userId}",...e}),cet=e=>(e.client??Zl).get({url:"/conversations/{id}/participants/{userId}",...e}),uet=e=>(e.client??Zl).delete({url:"/messages/{id}",...e}),det=e=>(e.client??Zl).get({url:"/messages/{id}",...e}),het=e=>(e.client??Zl).put({url:"/messages/{id}",...e,headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}}),fet=e=>(e.client??Zl).post({url:"/messages",...e,headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}}),pet=e=>(e.client??Zl).delete({url:"/users/me",...e}),Aet=e=>(e.client??Zl).get({url:"/users/me",...e}),met=e=>(e.client??Zl).put({url:"/users/me",...e,headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}}),dde=e=>((e==null?void 0:e.client)??Zl).post({url:"/users",...e,headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}}),get=e=>(e.client??Zl).get({url:"/events/{id}",...e}),yet=e=>(e.client??Zl).post({url:"/events",...e,headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}}),vet=e=>(e.client??Zl).post({url:"/files",...e,headers:{"Content-Type":"application/json",...e==null?void 0:e.headers}});let tY=class extends Error{constructor(e,t){super(e),this.name="ParseError",this.type=t.type,this.field=t.field,this.value=t.value,this.line=t.line}};function U5(e){}function xet(e){if(typeof e=="function")throw new TypeError("`callbacks` must be an object, got a function instead. Did you mean `{onEvent: fn}`?");const{onEvent:t=U5,onError:n=U5,onRetry:r=U5,onComment:s}=e;let a="",c=!0,i,f="",g="";function y(N){const W=c?N.replace(/^\xEF\xBB\xBF/,""):N,[L,Q]=_et(`${a}${W}`);for(const V of L)b(V);a=Q,c=!1}function b(N){if(N===""){S();return}if(N.startsWith(":")){s&&s(N.slice(N.startsWith(": ")?2:1));return}const W=N.indexOf(":");if(W!==-1){const L=N.slice(0,W),Q=N[W+1]===" "?2:1,V=N.slice(W+Q);T(L,V,N);return}T(N,"",N)}function T(N,W,L){switch(N){case"event":g=W;break;case"data":f=`${f}${W}
`;break;case"id":i=W.includes("\0")?void 0:W;break;case"retry":/^\d+$/.test(W)?r(parseInt(W,10)):n(new tY(`Invalid \`retry\` value: "${W}"`,{type:"invalid-retry",value:W,line:L}));break;default:n(new tY(`Unknown field "${N.length>20?`${N.slice(0,20)}…`:N}"`,{type:"unknown-field",field:N,value:W,line:L}));break}}function S(){f.length>0&&t({id:i,event:g||void 0,data:f.endsWith(`
`)?f.slice(0,-1):f}),i=void 0,f="",g=""}function U(N={}){a&&N.consume&&b(a),c=!0,i=void 0,f="",g="",a=""}return{feed:y,reset:U}}function _et(e){const t=[];let n="",r=0;for(;r<e.length;){const s=e.indexOf("\r",r),a=e.indexOf(`
`,r);let c=-1;if(s!==-1&&a!==-1?c=Math.min(s,a):s!==-1?c=s:a!==-1&&(c=a),c===-1){n=e.slice(r);break}else{const i=e.slice(r,c);t.push(i),r=c+1,e[r-1]==="\r"&&e[r]===`
`&&r++}}return[t,n]}let nY=class extends Event{constructor(t,n){var r,s;super(t),this.code=(r=n==null?void 0:n.code)!=null?r:void 0,this.message=(s=n==null?void 0:n.message)!=null?s:void 0}[Symbol.for("nodejs.util.inspect.custom")](t,n,r){return r(rY(this),n)}[Symbol.for("Deno.customInspect")](t,n){return t(rY(this),n)}};function wet(e){const t=globalThis.DOMException;return typeof t=="function"?new t(e,"SyntaxError"):new SyntaxError(e)}function o6(e){return e instanceof Error?"errors"in e&&Array.isArray(e.errors)?e.errors.map(o6).join(", "):"cause"in e&&e.cause instanceof Error?`${e}: ${o6(e.cause)}`:e.message:`${e}`}function rY(e){return{type:e.type,message:e.message,code:e.code,defaultPrevented:e.defaultPrevented,cancelable:e.cancelable,timeStamp:e.timeStamp}}var hde=e=>{throw TypeError(e)},rQ=(e,t,n)=>t.has(e)||hde("Cannot "+n),no=(e,t,n)=>(rQ(e,t,"read from private field"),n?n.call(e):t.get(e)),qc=(e,t,n)=>t.has(e)?hde("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),Al=(e,t,n,r)=>(rQ(e,t,"write to private field"),t.set(e,n),n),Ug=(e,t,n)=>(rQ(e,t,"access private method"),n),Gh,ox,x1,hI,eF,jC,G1,FC,dy,_1,aw,w1,nC,jA,a6,l6,c6,iY,u6,d6,rC,h6,f6;class fI extends EventTarget{constructor(t,n){var r,s;super(),qc(this,jA),this.CONNECTING=0,this.OPEN=1,this.CLOSED=2,qc(this,Gh),qc(this,ox),qc(this,x1),qc(this,hI),qc(this,eF),qc(this,jC),qc(this,G1),qc(this,FC,null),qc(this,dy),qc(this,_1),qc(this,aw,null),qc(this,w1,null),qc(this,nC,null),qc(this,l6,async a=>{var c;no(this,_1).reset();const{body:i,redirected:f,status:g,headers:y}=a;if(g===204){Ug(this,jA,rC).call(this,"Server sent HTTP 204, not reconnecting",204),this.close();return}if(f?Al(this,x1,new URL(a.url)):Al(this,x1,void 0),g!==200){Ug(this,jA,rC).call(this,`Non-200 status code (${g})`,g);return}if(!(y.get("content-type")||"").startsWith("text/event-stream")){Ug(this,jA,rC).call(this,'Invalid content type, expected "text/event-stream"',g);return}if(no(this,Gh)===this.CLOSED)return;Al(this,Gh,this.OPEN);const b=new Event("open");if((c=no(this,nC))==null||c.call(this,b),this.dispatchEvent(b),typeof i!="object"||!i||!("getReader"in i)){Ug(this,jA,rC).call(this,"Invalid response body, expected a web ReadableStream",g),this.close();return}const T=new TextDecoder,S=i.getReader();let U=!0;do{const{done:N,value:W}=await S.read();W&&no(this,_1).feed(T.decode(W,{stream:!N})),N&&(U=!1,no(this,_1).reset(),Ug(this,jA,h6).call(this))}while(U)}),qc(this,c6,a=>{Al(this,dy,void 0),!(a.name==="AbortError"||a.type==="aborted")&&Ug(this,jA,h6).call(this,o6(a))}),qc(this,u6,a=>{typeof a.id=="string"&&Al(this,FC,a.id);const c=new MessageEvent(a.event||"message",{data:a.data,origin:no(this,x1)?no(this,x1).origin:no(this,ox).origin,lastEventId:a.id||""});no(this,w1)&&(!a.event||a.event==="message")&&no(this,w1).call(this,c),this.dispatchEvent(c)}),qc(this,d6,a=>{Al(this,jC,a)}),qc(this,f6,()=>{Al(this,G1,void 0),no(this,Gh)===this.CONNECTING&&Ug(this,jA,a6).call(this)});try{if(t instanceof URL)Al(this,ox,t);else if(typeof t=="string")Al(this,ox,new URL(t,bet()));else throw new Error("Invalid URL")}catch{throw wet("An invalid or illegal string was specified")}Al(this,_1,xet({onEvent:no(this,u6),onRetry:no(this,d6)})),Al(this,Gh,this.CONNECTING),Al(this,jC,3e3),Al(this,eF,(r=n==null?void 0:n.fetch)!=null?r:globalThis.fetch),Al(this,hI,(s=n==null?void 0:n.withCredentials)!=null?s:!1),Ug(this,jA,a6).call(this)}get readyState(){return no(this,Gh)}get url(){return no(this,ox).href}get withCredentials(){return no(this,hI)}get onerror(){return no(this,aw)}set onerror(t){Al(this,aw,t)}get onmessage(){return no(this,w1)}set onmessage(t){Al(this,w1,t)}get onopen(){return no(this,nC)}set onopen(t){Al(this,nC,t)}addEventListener(t,n,r){const s=n;super.addEventListener(t,s,r)}removeEventListener(t,n,r){const s=n;super.removeEventListener(t,s,r)}close(){no(this,G1)&&clearTimeout(no(this,G1)),no(this,Gh)!==this.CLOSED&&(no(this,dy)&&no(this,dy).abort(),Al(this,Gh,this.CLOSED),Al(this,dy,void 0))}}Gh=new WeakMap,ox=new WeakMap,x1=new WeakMap,hI=new WeakMap,eF=new WeakMap,jC=new WeakMap,G1=new WeakMap,FC=new WeakMap,dy=new WeakMap,_1=new WeakMap,aw=new WeakMap,w1=new WeakMap,nC=new WeakMap,jA=new WeakSet,a6=function(){Al(this,Gh,this.CONNECTING),Al(this,dy,new AbortController),no(this,eF)(no(this,ox),Ug(this,jA,iY).call(this)).then(no(this,l6)).catch(no(this,c6))},l6=new WeakMap,c6=new WeakMap,iY=function(){var e;const t={mode:"cors",redirect:"follow",headers:{Accept:"text/event-stream",...no(this,FC)?{"Last-Event-ID":no(this,FC)}:void 0},cache:"no-store",signal:(e=no(this,dy))==null?void 0:e.signal};return"window"in globalThis&&(t.credentials=this.withCredentials?"include":"same-origin"),t},u6=new WeakMap,d6=new WeakMap,rC=function(e,t){var n;no(this,Gh)!==this.CLOSED&&Al(this,Gh,this.CLOSED);const r=new nY("error",{code:t,message:e});(n=no(this,aw))==null||n.call(this,r),this.dispatchEvent(r)},h6=function(e,t){var n;if(no(this,Gh)===this.CLOSED)return;Al(this,Gh,this.CONNECTING);const r=new nY("error",{code:t,message:e});(n=no(this,aw))==null||n.call(this,r),this.dispatchEvent(r),Al(this,G1,setTimeout(no(this,f6),no(this,jC)))},f6=new WeakMap,fI.CONNECTING=0,fI.OPEN=1,fI.CLOSED=2;function bet(){const e="document"in globalThis?globalThis.document:void 0;return e&&typeof e=="object"&&"baseURI"in e&&typeof e.baseURI=="string"?e.baseURI:void 0}class Cet{constructor(){this.eventMap={}}on(t,n){var r;return this.eventMap[t]||(this.eventMap[t]=new Set),(r=this.eventMap[t])==null||r.add(n),()=>{var s;(s=this.eventMap[t])==null||s.delete(n)}}emit(t,n){var r,s;(r=this.eventMap[t])==null||r.forEach(a=>{a(n)}),(s=this.eventMap["*"])==null||s.forEach(a=>{a({type:t,payload:n})})}}const fc=e=>e.data,fde={throwOnError:!0},Bet=({clientId:e,apiUrl:t})=>{const n=`${t||Zl.getConfig().baseUrl}/${e}`,r={...fde,baseUrl:n};return dde({...r,body:{}}).then(fc)},sY=({userKey:e,clientId:t,apiUrl:n})=>{const r={"x-user-key":e},s=`${n||Zl.getConfig().baseUrl}/${t}`,a={...fde,baseUrl:s};return{createConversation:()=>ret({...a,headers:r,body:{}}).then(fc),getConversation:({conversationId:c})=>tet({...a,headers:r,path:{id:c}}).then(fc),deleteConversation:({conversationId:c})=>eet({...a,headers:r,path:{id:c}}).then(fc),listConversations:({nextToken:c})=>net({...a,headers:r,query:{nextToken:c}}).then(fc),listConversationMessages:({conversationId:c,nextToken:i})=>iet({...a,headers:r,path:{id:c},query:{nextToken:i}}).then(fc),addParticipant:({conversationId:c,userId:i})=>oet({...a,headers:r,path:{id:c},body:{userId:i}}).then(fc),removeParticipant:({conversationId:c,userId:i})=>aet({...a,headers:r,path:{id:c,userId:i}}).then(fc),getParticipant:({conversationId:c,userId:i})=>cet({...a,headers:r,path:{id:c,userId:i}}).then(fc),listParticipants:({conversationId:c,nextToken:i})=>set({...a,headers:r,path:{id:c},query:{nextToken:i}}).then(fc),createMessage:c=>fet({...a,headers:r,body:c}).then(fc),updateMessage:({messageId:c,...i})=>het({...a,headers:r,path:{id:c},body:i}).then(fc),getMessage:({messageId:c})=>det({...a,headers:r,path:{id:c}}).then(fc),deleteMessage:({messageId:c})=>uet({...a,headers:r,path:{id:c}}).then(fc),createFile:c=>vet({...a,headers:r,body:c}).then(fc),createUser:c=>dde({...a,headers:r,body:c}).then(fc),getUser:()=>Aet({...a,headers:r}).then(fc),updateUser:c=>met({...a,headers:r,body:c}).then(fc),deleteUser:()=>pet({...a,headers:r}).then(fc),createEvent:c=>yet({...a,headers:r,body:c}).then(fc),getEvent:({eventId:c})=>get({...a,headers:r,path:{id:c}}).then(fc),listenConversation:({conversationId:c})=>{let i=0,f=null;const g=new Cet,y=()=>{f&&f.close();const b=`${s}/conversations/${c}/listen`;f=new fI(b,{fetch:(T,S)=>fetch(T,{...S,headers:{...S==null?void 0:S.headers,...r,timeout:"60_000"}})}),f.onopen=()=>g.emit("open"),f.onerror=T=>{g.emit("error",T),i<10&&(i++,setTimeout(()=>y(),3e3))},f.onmessage=T=>{const S=Eet(T.data);g.emit(S.type,S.data)}};return y(),g.on.bind(g)}}},Eet=e=>{try{return JSON.parse(e)}catch{return e}};async function Tet({conversationId:e,userCredentials:t,clientId:n,apiUrl:r}){let s=t,a=e,c;if(s){if(c=sY({userKey:s.userToken,clientId:n,apiUrl:r}),!a){const{conversation:i}=await c.createConversation();a=i.id}}else{const{key:i,user:f}=await Bet({clientId:n,apiUrl:r});s={userId:f.id,userToken:i},c=sY({userKey:s.userToken,clientId:n,apiUrl:r});const{conversation:g}=await c.createConversation();a=g.id}return{client:c,conversationId:a,userCredentials:s}}function Iet({apiUrl:e="https://webchat.botpress.cloud",clientId:t,storageKey:n,storageLocation:r,...s}){const a=bTe(n,r),c=a(Ee=>Ee.conversationId),i=a(Ee=>Ee.user),f=a(Ee=>Ee.setConversationId),g=a(Ee=>Ee.setUser),y=B2(Ee=>Ee.messages),b=B2(Ee=>Ee.addMessage),T=B2(Ee=>Ee.fetchMessages),S=B2(Ee=>Ee.setMessages),U=B2(Ee=>Ee.isFetching),[N,W]=q.useState("connecting"),{isTyping:L,setIsTyping:Q}=kJe(),V=q.useMemo(()=>new Yre,[]),[Z,ne]=q.useState(!!s.conversationId||!!c),[Y,le]=q.useState(s.conversationId),[pe,_e]=q.useState(s.user),[ye,he]=q.useState(void 0);if(q.useEffect(()=>{async function Ee(){try{const Ne=s.conversationId||c;Ne&&ne(!0);const{client:Ge,conversationId:Je,userCredentials:Ue}=await Tet({clientId:t,apiUrl:e,userCredentials:s.user||i,conversationId:Ne});he(Ge),le(Je),_e(Ue),g(Ue),f(Je),W("connected"),!Ne&&V.emit("conversation",Je)}catch(Ne){console.error("Failed to initialize webchat:",Ne),W("error")}}Ee()},[s.user,s.conversationId]),q.useEffect(()=>{async function Ee(){if(Z&&ye&&Y){const Ne=await T({client:ye,conversationId:Y});S(Ne),ne(!1)}}Ee()},[Z,ye,Y]),q.useEffect(()=>{if(!ye||!Y)return;const Ee=ye.listenConversation({conversationId:Y}),Ne=[Ee("open",()=>W("connected")),Ee("error",Ge=>{V.emit("error",new Error(`Connection to conversation lost: ${Ge.message}`)),W("error")}),Ee("message_created",Ge=>{const Je=cD(Ge);b(Je),V.emit("message",Je),Q(!1),(pe==null?void 0:pe.userId)!==Je.authorId?Q(!1):setTimeout(()=>Q(!0,5e3),500)}),Ee("webchat_visibility",Ge=>V.emit("webchatVisibility",Ge.visibility)),Ee("webchat_config",Ge=>V.emit("webchatConfig",Ge.config)),Ee("typing_started",Ge=>{const Je=Ge.timeout??5e3;Q(!0,Je),V.emit("isTyping",{isTyping:!0,timeout:Je})}),Ee("typing_stopped",()=>{Q(!1),V.emit("isTyping",{isTyping:!1,timeout:0})}),Ee("custom",Ge=>V.emit("customEvent",Ge.event))];return()=>{Ne.forEach(Ge=>Ge())}},[Y,ye]),N==="connecting"||!pe||!Y||!ye)return{clientState:"connecting",on:V.on.bind(V),client:void 0,messages:[],conversationId:void 0,newConversation:()=>{},user:void 0,isTyping:void 0,isFetchingMessages:U};const be=async()=>{const{conversation:Ee}=await ye.createConversation();return a.setState({conversationId:Ee.id}),le(Ee.id),await ye.createEvent({conversationId:Ee.id,payload:{type:"conversation_started",data:{}}}),Ee.id},Te={sendMessage:async Ee=>{const Ne=cue();b(cD({id:Ne,createdAt:new Date().toISOString(),userId:pe.userId,conversationId:Y,payload:Ee,metadata:{clientMessageId:Ne,delivered:!1}})),await ye.createMessage({conversationId:Y,payload:Ee,metadata:{clientMessageId:Ne}}).catch(Ge=>V.emit("error",Ge))},updateUser:async Ee=>{const{user:Ne}=await ye.updateUser({name:Ee.name,pictureUrl:Ee.pictureUrl,userData:Ee.data});return Ne},sendEvent:async Ee=>{await ye.createEvent({conversationId:Y,payload:{type:"custom",data:Ee}})},uploadFile:async Ee=>{const{size:Ne,name:Ge}=Ee,Je=await(Ze=>new Promise((ot,vt)=>{const Qt=new FileReader;Qt.onload=Ot=>{var kt;return ot((kt=Ot.target)==null?void 0:kt.result)},Qt.onerror=Ot=>{var kt;return vt((kt=Ot.target)==null?void 0:kt.error)},Qt.readAsArrayBuffer(Ze)}))(Ee),Ue=new Date;Ue.setDate(Ue.getDate()+30);const{file:{uploadUrl:Qe,contentType:xe,url:at}}=await ye.createFile({size:Ne,key:Ge,accessPolicies:["public_content"],index:!1,tags:{source:"integration",integrationName:"webchat"},expiresAt:Ue.toISOString()});await fetch(Qe,{method:"PUT",headers:{"x-amz-tagging":"public=true"},body:Je});const we=xe.split("/").shift()??"",me=PJe(we)?we:"file";return{fileUrl:at,name:Ge,type:me}},getUser:async()=>{const{user:Ee}=await ye.getUser({userId:pe.userId});return Ee}};return{clientState:N,on:V.on.bind(V),client:Te,messages:y,conversationId:Y,newConversation:()=>{S([]),be().then(f)},user:i,isTyping:L,isFetchingMessages:U}}var pde={},iQ={},tF=Ra&&Ra.__assign||function(){return tF=Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++){t=arguments[n];for(var s in t)Object.prototype.hasOwnProperty.call(t,s)&&(e[s]=t[s])}return e},tF.apply(this,arguments)};Object.defineProperty(iQ,"__esModule",{value:!0});var jet={delayFirstAttempt:!1,jitter:"none",maxDelay:1/0,numOfAttempts:10,retry:function(){return!0},startingDelay:100,timeMultiple:2};function Fet(e){var t=tF(tF({},jet),e);return t.numOfAttempts<1&&(t.numOfAttempts=1),t}iQ.getSanitizedOptions=Fet;var sQ={},oQ={},VP={},aQ={},lQ={};Object.defineProperty(lQ,"__esModule",{value:!0});function Pet(e){var t=Math.random()*e;return Math.round(t)}lQ.fullJitter=Pet;var cQ={};Object.defineProperty(cQ,"__esModule",{value:!0});function ket(e){return e}cQ.noJitter=ket;Object.defineProperty(aQ,"__esModule",{value:!0});var Let=lQ,Met=cQ;function Net(e){switch(e.jitter){case"full":return Let.fullJitter;case"none":default:return Met.noJitter}}aQ.JitterFactory=Net;Object.defineProperty(VP,"__esModule",{value:!0});var Ret=aQ,Oet=function(){function e(t){this.options=t,this.attempt=0}return e.prototype.apply=function(){var t=this;return new Promise(function(n){return setTimeout(n,t.jitteredDelay)})},e.prototype.setAttemptNumber=function(t){this.attempt=t},Object.defineProperty(e.prototype,"jitteredDelay",{get:function(){var t=Ret.JitterFactory(this.options);return t(this.delay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"delay",{get:function(){var t=this.options.startingDelay,n=this.options.timeMultiple,r=this.numOfDelayedAttempts,s=t*Math.pow(n,r);return Math.min(s,this.options.maxDelay)},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt},enumerable:!0,configurable:!0}),e}();VP.Delay=Oet;var Det=Ra&&Ra.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}(),Uet=Ra&&Ra.__awaiter||function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function i(y){try{g(r.next(y))}catch(b){c(b)}}function f(y){try{g(r.throw(y))}catch(b){c(b)}}function g(y){y.done?a(y.value):s(y.value).then(i,f)}g((r=r.apply(e,t||[])).next())})},zet=Ra&&Ra.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(g){return function(y){return f([g,y])}}function f(g){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=g[0]&2?s.return:g[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,g[1])).done)return a;switch(s=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,s=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){n.label=g[1];break}if(g[0]===6&&n.label<a[1]){n.label=a[1],a=g;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(g);break}a[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(y){g=[6,y],s=0}finally{r=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(oQ,"__esModule",{value:!0});var Qet=VP,Het=function(e){Det(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t.prototype.apply=function(){return Uet(this,void 0,void 0,function(){return zet(this,function(n){return[2,this.isFirstAttempt?!0:e.prototype.apply.call(this)]})})},Object.defineProperty(t.prototype,"isFirstAttempt",{get:function(){return this.attempt===0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"numOfDelayedAttempts",{get:function(){return this.attempt-1},enumerable:!0,configurable:!0}),t}(Qet.Delay);oQ.SkipFirstDelay=Het;var uQ={},Vet=Ra&&Ra.__extends||function(){var e=function(t,n){return e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(r,s){r.__proto__=s}||function(r,s){for(var a in s)s.hasOwnProperty(a)&&(r[a]=s[a])},e(t,n)};return function(t,n){e(t,n);function r(){this.constructor=t}t.prototype=n===null?Object.create(n):(r.prototype=n.prototype,new r)}}();Object.defineProperty(uQ,"__esModule",{value:!0});var $et=VP,Get=function(e){Vet(t,e);function t(){return e!==null&&e.apply(this,arguments)||this}return t}($et.Delay);uQ.AlwaysDelay=Get;Object.defineProperty(sQ,"__esModule",{value:!0});var Ket=oQ,Wet=uQ;function qet(e,t){var n=Zet(e);return n.setAttemptNumber(t),n}sQ.DelayFactory=qet;function Zet(e){return e.delayFirstAttempt?new Wet.AlwaysDelay(e):new Ket.SkipFirstDelay(e)}var p6=Ra&&Ra.__awaiter||function(e,t,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function i(y){try{g(r.next(y))}catch(b){c(b)}}function f(y){try{g(r.throw(y))}catch(b){c(b)}}function g(y){y.done?a(y.value):s(y.value).then(i,f)}g((r=r.apply(e,t||[])).next())})},A6=Ra&&Ra.__generator||function(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(g){return function(y){return f([g,y])}}function f(g){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=g[0]&2?s.return:g[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,g[1])).done)return a;switch(s=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,s=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){n.label=g[1];break}if(g[0]===6&&n.label<a[1]){n.label=a[1],a=g;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(g);break}a[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(y){g=[6,y],s=0}finally{r=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}};Object.defineProperty(pde,"__esModule",{value:!0});var Xet=iQ,Yet=sQ;function Jet(e,t){return t===void 0&&(t={}),p6(this,void 0,void 0,function(){var n,r;return A6(this,function(s){switch(s.label){case 0:return n=Xet.getSanitizedOptions(t),r=new ett(e,n),[4,r.execute()];case 1:return[2,s.sent()]}})})}pde.backOff=Jet;var ett=function(){function e(t,n){this.request=t,this.options=n,this.attemptNumber=0}return e.prototype.execute=function(){return p6(this,void 0,void 0,function(){var t,n;return A6(this,function(r){switch(r.label){case 0:if(this.attemptLimitReached)return[3,7];r.label=1;case 1:return r.trys.push([1,4,,6]),[4,this.applyDelay()];case 2:return r.sent(),[4,this.request()];case 3:return[2,r.sent()];case 4:return t=r.sent(),this.attemptNumber++,[4,this.options.retry(t,this.attemptNumber)];case 5:if(n=r.sent(),!n||this.attemptLimitReached)throw t;return[3,6];case 6:return[3,0];case 7:throw new Error("Something went wrong.")}})})},Object.defineProperty(e.prototype,"attemptLimitReached",{get:function(){return this.attemptNumber>=this.options.numOfAttempts},enumerable:!0,configurable:!0}),e.prototype.applyDelay=function(){return p6(this,void 0,void 0,function(){var t;return A6(this,function(n){switch(n.label){case 0:return t=Yet.DelayFactory(this.options,this.attemptNumber),[4,t.apply()];case 1:return n.sent(),[2]}})})},e}();const ttt=({clientId:e,storageKey:t,configuration:n,allowFileUpload:r,apiUrl:s,user:a,conversationId:c,...i})=>{const f=t||`bp-webchat-${e}`,{clientState:g,client:y,isFetchingMessages:b,isTyping:T,newConversation:S,messages:U,user:N}=Iet({clientId:e,apiUrl:s,conversationId:c,user:a,storageKey:f,storageLocation:n==null?void 0:n.storageLocation}),{sendMessage:W,uploadFile:L}=y??{};return zt.jsx(_qe,{configuration:n??{},user:N!=null&&N.userId?{id:N==null?void 0:N.userId}:void 0,isLoading:b||g==="connecting",isTyping:T,connected:g==="connected"?!0:g==="disconnected"?!1:void 0,messages:U,sendMessage:W,uploadFile:L,allowFileUpload:r,restartConversation:S,...i})},oY="/assets/assistant-BJ6l_2aY.png";function al(){const[e,t]=q.useState(!1),n=()=>t(s=>!s),r={botName:"SWIFTBOT",botAvatar:oY,variant:"solid",color:"009688",showPoweredBy:!1,radius:2,fontFamily:"inter"};return A.jsxs(A.Fragment,{children:[A.jsx(Vu,{children:e&&A.jsx(Uo.div,{initial:{x:300,opacity:0,scale:.9},animate:{x:0,opacity:1,scale:1},exit:{x:300,opacity:0,scale:.9},transition:{type:"spring",stiffness:260,damping:20},style:{width:"90vw",maxWidth:"400px",height:"80vh",maxHeight:"600px",position:"fixed",bottom:"110px",right:"20px",zIndex:50,display:"flex",boxShadow:"0px 8px 30px rgba(0, 0, 0, 0.2)",borderRadius:"1rem",overflow:"hidden",backdropFilter:"blur(8px)"},children:A.jsx(ttt,{clientId:"21aef817-dd6b-4b33-a993-8f38e60acb72",configuration:r,className:"z-50 w-full h-full"})},"webchat")}),A.jsx(Vu,{children:A.jsx(Uo.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{x:100,opacity:0},transition:{type:"spring",stiffness:200,damping:20},style:{position:"fixed",bottom:"30px",right:"20px",zIndex:50},children:A.jsx(Uo.img,{className:"w-12 sm:w-16 cursor-pointer",src:oY,onClick:n,whileHover:{scale:1.15,rotate:[0,-10,10,0]},whileTap:{scale:.9},animate:{scale:[1,1.05,1],transition:{repeat:1/0,duration:1.8}},alt:"Chatbot Toggle"})},"toggle-icon")})]})}function Ade(e){var t,n,r="";if(typeof e=="string"||typeof e=="number")r+=e;else if(typeof e=="object")if(Array.isArray(e)){var s=e.length;for(t=0;t<s;t++)e[t]&&(n=Ade(e[t]))&&(r&&(r+=" "),r+=n)}else for(n in e)e[n]&&(r&&(r+=" "),r+=n);return r}function Sx(){for(var e,t,n=0,r="",s=arguments.length;n<s;n++)(e=arguments[n])&&(t=Ade(e))&&(r&&(r+=" "),r+=t);return r}function ntt(e){if(typeof document>"u")return;let t=document.head||document.getElementsByTagName("head")[0],n=document.createElement("style");n.type="text/css",t.firstChild?t.insertBefore(n,t.firstChild):t.appendChild(n),n.styleSheet?n.styleSheet.cssText=e:n.appendChild(document.createTextNode(e))}ntt(`:root{--toastify-color-light: #fff;--toastify-color-dark: #121212;--toastify-color-info: #3498db;--toastify-color-success: #07bc0c;--toastify-color-warning: #f1c40f;--toastify-color-error: hsl(6, 78%, 57%);--toastify-color-transparent: rgba(255, 255, 255, .7);--toastify-icon-color-info: var(--toastify-color-info);--toastify-icon-color-success: var(--toastify-color-success);--toastify-icon-color-warning: var(--toastify-color-warning);--toastify-icon-color-error: var(--toastify-color-error);--toastify-container-width: fit-content;--toastify-toast-width: 320px;--toastify-toast-offset: 16px;--toastify-toast-top: max(var(--toastify-toast-offset), env(safe-area-inset-top));--toastify-toast-right: max(var(--toastify-toast-offset), env(safe-area-inset-right));--toastify-toast-left: max(var(--toastify-toast-offset), env(safe-area-inset-left));--toastify-toast-bottom: max(var(--toastify-toast-offset), env(safe-area-inset-bottom));--toastify-toast-background: #fff;--toastify-toast-padding: 14px;--toastify-toast-min-height: 64px;--toastify-toast-max-height: 800px;--toastify-toast-bd-radius: 6px;--toastify-toast-shadow: 0px 4px 12px rgba(0, 0, 0, .1);--toastify-font-family: sans-serif;--toastify-z-index: 9999;--toastify-text-color-light: #757575;--toastify-text-color-dark: #fff;--toastify-text-color-info: #fff;--toastify-text-color-success: #fff;--toastify-text-color-warning: #fff;--toastify-text-color-error: #fff;--toastify-spinner-color: #616161;--toastify-spinner-color-empty-area: #e0e0e0;--toastify-color-progress-light: linear-gradient(to right, #4cd964, #5ac8fa, #007aff, #34aadc, #5856d6, #ff2d55);--toastify-color-progress-dark: #bb86fc;--toastify-color-progress-info: var(--toastify-color-info);--toastify-color-progress-success: var(--toastify-color-success);--toastify-color-progress-warning: var(--toastify-color-warning);--toastify-color-progress-error: var(--toastify-color-error);--toastify-color-progress-bgo: .2}.Toastify__toast-container{z-index:var(--toastify-z-index);-webkit-transform:translate3d(0,0,var(--toastify-z-index));position:fixed;width:var(--toastify-container-width);box-sizing:border-box;color:#fff;display:flex;flex-direction:column}.Toastify__toast-container--top-left{top:var(--toastify-toast-top);left:var(--toastify-toast-left)}.Toastify__toast-container--top-center{top:var(--toastify-toast-top);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--top-right{top:var(--toastify-toast-top);right:var(--toastify-toast-right);align-items:end}.Toastify__toast-container--bottom-left{bottom:var(--toastify-toast-bottom);left:var(--toastify-toast-left)}.Toastify__toast-container--bottom-center{bottom:var(--toastify-toast-bottom);left:50%;transform:translate(-50%);align-items:center}.Toastify__toast-container--bottom-right{bottom:var(--toastify-toast-bottom);right:var(--toastify-toast-right);align-items:end}.Toastify__toast{--y: 0;position:relative;touch-action:none;width:var(--toastify-toast-width);min-height:var(--toastify-toast-min-height);box-sizing:border-box;margin-bottom:1rem;padding:var(--toastify-toast-padding);border-radius:var(--toastify-toast-bd-radius);box-shadow:var(--toastify-toast-shadow);max-height:var(--toastify-toast-max-height);font-family:var(--toastify-font-family);z-index:0;display:flex;flex:1 auto;align-items:center;word-break:break-word}@media only screen and (max-width: 480px){.Toastify__toast-container{width:100vw;left:env(safe-area-inset-left);margin:0}.Toastify__toast-container--top-left,.Toastify__toast-container--top-center,.Toastify__toast-container--top-right{top:env(safe-area-inset-top);transform:translate(0)}.Toastify__toast-container--bottom-left,.Toastify__toast-container--bottom-center,.Toastify__toast-container--bottom-right{bottom:env(safe-area-inset-bottom);transform:translate(0)}.Toastify__toast-container--rtl{right:env(safe-area-inset-right);left:initial}.Toastify__toast{--toastify-toast-width: 100%;margin-bottom:0;border-radius:0}}.Toastify__toast-container[data-stacked=true]{width:var(--toastify-toast-width)}.Toastify__toast--stacked{position:absolute;width:100%;transform:translate3d(0,var(--y),0) scale(var(--s));transition:transform .3s}.Toastify__toast--stacked[data-collapsed] .Toastify__toast-body,.Toastify__toast--stacked[data-collapsed] .Toastify__close-button{transition:opacity .1s}.Toastify__toast--stacked[data-collapsed=false]{overflow:visible}.Toastify__toast--stacked[data-collapsed=true]:not(:last-child)>*{opacity:0}.Toastify__toast--stacked:after{content:"";position:absolute;left:0;right:0;height:calc(var(--g) * 1px);bottom:100%}.Toastify__toast--stacked[data-pos=top]{top:0}.Toastify__toast--stacked[data-pos=bot]{bottom:0}.Toastify__toast--stacked[data-pos=bot].Toastify__toast--stacked:before{transform-origin:top}.Toastify__toast--stacked[data-pos=top].Toastify__toast--stacked:before{transform-origin:bottom}.Toastify__toast--stacked:before{content:"";position:absolute;left:0;right:0;bottom:0;height:100%;transform:scaleY(3);z-index:-1}.Toastify__toast--rtl{direction:rtl}.Toastify__toast--close-on-click{cursor:pointer}.Toastify__toast-icon{margin-inline-end:10px;width:22px;flex-shrink:0;display:flex}.Toastify--animate{animation-fill-mode:both;animation-duration:.5s}.Toastify--animate-icon{animation-fill-mode:both;animation-duration:.3s}.Toastify__toast-theme--dark{background:var(--toastify-color-dark);color:var(--toastify-text-color-dark)}.Toastify__toast-theme--light,.Toastify__toast-theme--colored.Toastify__toast--default{background:var(--toastify-color-light);color:var(--toastify-text-color-light)}.Toastify__toast-theme--colored.Toastify__toast--info{color:var(--toastify-text-color-info);background:var(--toastify-color-info)}.Toastify__toast-theme--colored.Toastify__toast--success{color:var(--toastify-text-color-success);background:var(--toastify-color-success)}.Toastify__toast-theme--colored.Toastify__toast--warning{color:var(--toastify-text-color-warning);background:var(--toastify-color-warning)}.Toastify__toast-theme--colored.Toastify__toast--error{color:var(--toastify-text-color-error);background:var(--toastify-color-error)}.Toastify__progress-bar-theme--light{background:var(--toastify-color-progress-light)}.Toastify__progress-bar-theme--dark{background:var(--toastify-color-progress-dark)}.Toastify__progress-bar--info{background:var(--toastify-color-progress-info)}.Toastify__progress-bar--success{background:var(--toastify-color-progress-success)}.Toastify__progress-bar--warning{background:var(--toastify-color-progress-warning)}.Toastify__progress-bar--error{background:var(--toastify-color-progress-error)}.Toastify__progress-bar-theme--colored.Toastify__progress-bar--info,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--success,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--warning,.Toastify__progress-bar-theme--colored.Toastify__progress-bar--error{background:var(--toastify-color-transparent)}.Toastify__close-button{color:#fff;position:absolute;top:6px;right:6px;background:transparent;outline:none;border:none;padding:0;cursor:pointer;opacity:.7;transition:.3s ease;z-index:1}.Toastify__toast--rtl .Toastify__close-button{left:6px;right:unset}.Toastify__close-button--light{color:#000;opacity:.3}.Toastify__close-button>svg{fill:currentColor;height:16px;width:14px}.Toastify__close-button:hover,.Toastify__close-button:focus{opacity:1}@keyframes Toastify__trackProgress{0%{transform:scaleX(1)}to{transform:scaleX(0)}}.Toastify__progress-bar{position:absolute;bottom:0;left:0;width:100%;height:100%;z-index:1;opacity:.7;transform-origin:left}.Toastify__progress-bar--animated{animation:Toastify__trackProgress linear 1 forwards}.Toastify__progress-bar--controlled{transition:transform .2s}.Toastify__progress-bar--rtl{right:0;left:initial;transform-origin:right;border-bottom-left-radius:initial}.Toastify__progress-bar--wrp{position:absolute;overflow:hidden;bottom:0;left:0;width:100%;height:5px;border-bottom-left-radius:var(--toastify-toast-bd-radius);border-bottom-right-radius:var(--toastify-toast-bd-radius)}.Toastify__progress-bar--wrp[data-hidden=true]{opacity:0}.Toastify__progress-bar--bg{opacity:var(--toastify-color-progress-bgo);width:100%;height:100%}.Toastify__spinner{width:20px;height:20px;box-sizing:border-box;border:2px solid;border-radius:100%;border-color:var(--toastify-spinner-color-empty-area);border-right-color:var(--toastify-spinner-color);animation:Toastify__spin .65s linear infinite}@keyframes Toastify__bounceInRight{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(3000px,0,0)}60%{opacity:1;transform:translate3d(-25px,0,0)}75%{transform:translate3d(10px,0,0)}90%{transform:translate3d(-5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutRight{20%{opacity:1;transform:translate3d(-20px,var(--y),0)}to{opacity:0;transform:translate3d(2000px,var(--y),0)}}@keyframes Toastify__bounceInLeft{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(-3000px,0,0)}60%{opacity:1;transform:translate3d(25px,0,0)}75%{transform:translate3d(-10px,0,0)}90%{transform:translate3d(5px,0,0)}to{transform:none}}@keyframes Toastify__bounceOutLeft{20%{opacity:1;transform:translate3d(20px,var(--y),0)}to{opacity:0;transform:translate3d(-2000px,var(--y),0)}}@keyframes Toastify__bounceInUp{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,3000px,0)}60%{opacity:1;transform:translate3d(0,-20px,0)}75%{transform:translate3d(0,10px,0)}90%{transform:translate3d(0,-5px,0)}to{transform:translateZ(0)}}@keyframes Toastify__bounceOutUp{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,-2000px,0)}}@keyframes Toastify__bounceInDown{0%,60%,75%,90%,to{animation-timing-function:cubic-bezier(.215,.61,.355,1)}0%{opacity:0;transform:translate3d(0,-3000px,0)}60%{opacity:1;transform:translate3d(0,25px,0)}75%{transform:translate3d(0,-10px,0)}90%{transform:translate3d(0,5px,0)}to{transform:none}}@keyframes Toastify__bounceOutDown{20%{transform:translate3d(0,calc(var(--y) - 10px),0)}40%,45%{opacity:1;transform:translate3d(0,calc(var(--y) + 20px),0)}to{opacity:0;transform:translate3d(0,2000px,0)}}.Toastify__bounce-enter--top-left,.Toastify__bounce-enter--bottom-left{animation-name:Toastify__bounceInLeft}.Toastify__bounce-enter--top-right,.Toastify__bounce-enter--bottom-right{animation-name:Toastify__bounceInRight}.Toastify__bounce-enter--top-center{animation-name:Toastify__bounceInDown}.Toastify__bounce-enter--bottom-center{animation-name:Toastify__bounceInUp}.Toastify__bounce-exit--top-left,.Toastify__bounce-exit--bottom-left{animation-name:Toastify__bounceOutLeft}.Toastify__bounce-exit--top-right,.Toastify__bounce-exit--bottom-right{animation-name:Toastify__bounceOutRight}.Toastify__bounce-exit--top-center{animation-name:Toastify__bounceOutUp}.Toastify__bounce-exit--bottom-center{animation-name:Toastify__bounceOutDown}@keyframes Toastify__zoomIn{0%{opacity:0;transform:scale3d(.3,.3,.3)}50%{opacity:1}}@keyframes Toastify__zoomOut{0%{opacity:1}50%{opacity:0;transform:translate3d(0,var(--y),0) scale3d(.3,.3,.3)}to{opacity:0}}.Toastify__zoom-enter{animation-name:Toastify__zoomIn}.Toastify__zoom-exit{animation-name:Toastify__zoomOut}@keyframes Toastify__flipIn{0%{transform:perspective(400px) rotateX(90deg);animation-timing-function:ease-in;opacity:0}40%{transform:perspective(400px) rotateX(-20deg);animation-timing-function:ease-in}60%{transform:perspective(400px) rotateX(10deg);opacity:1}80%{transform:perspective(400px) rotateX(-5deg)}to{transform:perspective(400px)}}@keyframes Toastify__flipOut{0%{transform:translate3d(0,var(--y),0) perspective(400px)}30%{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(-20deg);opacity:1}to{transform:translate3d(0,var(--y),0) perspective(400px) rotateX(90deg);opacity:0}}.Toastify__flip-enter{animation-name:Toastify__flipIn}.Toastify__flip-exit{animation-name:Toastify__flipOut}@keyframes Toastify__slideInRight{0%{transform:translate3d(110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInLeft{0%{transform:translate3d(-110%,0,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInUp{0%{transform:translate3d(0,110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideInDown{0%{transform:translate3d(0,-110%,0);visibility:visible}to{transform:translate3d(0,var(--y),0)}}@keyframes Toastify__slideOutRight{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(110%,var(--y),0)}}@keyframes Toastify__slideOutLeft{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(-110%,var(--y),0)}}@keyframes Toastify__slideOutDown{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,500px,0)}}@keyframes Toastify__slideOutUp{0%{transform:translate3d(0,var(--y),0)}to{visibility:hidden;transform:translate3d(0,-500px,0)}}.Toastify__slide-enter--top-left,.Toastify__slide-enter--bottom-left{animation-name:Toastify__slideInLeft}.Toastify__slide-enter--top-right,.Toastify__slide-enter--bottom-right{animation-name:Toastify__slideInRight}.Toastify__slide-enter--top-center{animation-name:Toastify__slideInDown}.Toastify__slide-enter--bottom-center{animation-name:Toastify__slideInUp}.Toastify__slide-exit--top-left,.Toastify__slide-exit--bottom-left{animation-name:Toastify__slideOutLeft;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-right,.Toastify__slide-exit--bottom-right{animation-name:Toastify__slideOutRight;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--top-center{animation-name:Toastify__slideOutUp;animation-timing-function:ease-in;animation-duration:.3s}.Toastify__slide-exit--bottom-center{animation-name:Toastify__slideOutDown;animation-timing-function:ease-in;animation-duration:.3s}@keyframes Toastify__spin{0%{transform:rotate(0)}to{transform:rotate(360deg)}}
`);var sE=e=>typeof e=="number"&&!isNaN(e),Wx=e=>typeof e=="string",d0=e=>typeof e=="function",rtt=e=>Wx(e)||sE(e),m6=e=>Wx(e)||d0(e)?e:null,itt=(e,t)=>e===!1||sE(e)&&e>0?e:t,g6=e=>q.isValidElement(e)||Wx(e)||d0(e)||sE(e);function stt(e,t,n=300){let{scrollHeight:r,style:s}=e;requestAnimationFrame(()=>{s.minHeight="initial",s.height=r+"px",s.transition=`all ${n}ms`,requestAnimationFrame(()=>{s.height="0",s.padding="0",s.margin="0",setTimeout(t,n)})})}function ott({enter:e,exit:t,appendPosition:n=!1,collapse:r=!0,collapseDuration:s=300}){return function({children:a,position:c,preventExitTransition:i,done:f,nodeRef:g,isIn:y,playToast:b}){let T=n?`${e}--${c}`:e,S=n?`${t}--${c}`:t,U=q.useRef(0);return q.useLayoutEffect(()=>{let N=g.current,W=T.split(" "),L=Q=>{Q.target===g.current&&(b(),N.removeEventListener("animationend",L),N.removeEventListener("animationcancel",L),U.current===0&&Q.type!=="animationcancel"&&N.classList.remove(...W))};N.classList.add(...W),N.addEventListener("animationend",L),N.addEventListener("animationcancel",L)},[]),q.useEffect(()=>{let N=g.current,W=()=>{N.removeEventListener("animationend",W),r?stt(N,f,s):f()};y||(i?W():(U.current=1,N.className+=` ${S}`,N.addEventListener("animationend",W)))},[y]),Ti.createElement(Ti.Fragment,null,a)}}function aY(e,t){return{content:mde(e.content,e.props),containerId:e.props.containerId,id:e.props.toastId,theme:e.props.theme,type:e.props.type,data:e.props.data||{},isLoading:e.props.isLoading,icon:e.props.icon,reason:e.removalReason,status:t}}function mde(e,t,n=!1){return q.isValidElement(e)&&!Wx(e.type)?q.cloneElement(e,{closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):d0(e)?e({closeToast:t.closeToast,toastProps:t,data:t.data,isPaused:n}):e}function att({closeToast:e,theme:t,ariaLabel:n="close"}){return Ti.createElement("button",{className:`Toastify__close-button Toastify__close-button--${t}`,type:"button",onClick:r=>{r.stopPropagation(),e(!0)},"aria-label":n},Ti.createElement("svg",{"aria-hidden":"true",viewBox:"0 0 14 16"},Ti.createElement("path",{fillRule:"evenodd",d:"M7.71 8.23l3.75 3.75-1.48 1.48-3.75-3.75-3.75 3.75L1 11.98l3.75-3.75L1 4.48 2.48 3l3.75 3.75L9.98 3l1.48 1.48-3.75 3.75z"})))}function ltt({delay:e,isRunning:t,closeToast:n,type:r="default",hide:s,className:a,controlledProgress:c,progress:i,rtl:f,isIn:g,theme:y}){let b=s||c&&i===0,T={animationDuration:`${e}ms`,animationPlayState:t?"running":"paused"};c&&(T.transform=`scaleX(${i})`);let S=Sx("Toastify__progress-bar",c?"Toastify__progress-bar--controlled":"Toastify__progress-bar--animated",`Toastify__progress-bar-theme--${y}`,`Toastify__progress-bar--${r}`,{"Toastify__progress-bar--rtl":f}),U=d0(a)?a({rtl:f,type:r,defaultClassName:S}):Sx(S,a),N={[c&&i>=1?"onTransitionEnd":"onAnimationEnd"]:c&&i<1?null:()=>{g&&n()}};return Ti.createElement("div",{className:"Toastify__progress-bar--wrp","data-hidden":b},Ti.createElement("div",{className:`Toastify__progress-bar--bg Toastify__progress-bar-theme--${y} Toastify__progress-bar--${r}`}),Ti.createElement("div",{role:"progressbar","aria-hidden":b?"true":"false","aria-label":"notification timer",className:U,style:T,...N}))}var ctt=1,gde=()=>`${ctt++}`;function utt(e,t,n){let r=1,s=0,a=[],c=[],i=t,f=new Map,g=new Set,y=Q=>(g.add(Q),()=>g.delete(Q)),b=()=>{c=Array.from(f.values()),g.forEach(Q=>Q())},T=({containerId:Q,toastId:V,updateId:Z})=>{let ne=Q?Q!==e:e!==1,Y=f.has(V)&&Z==null;return ne||Y},S=(Q,V)=>{f.forEach(Z=>{var ne;(V==null||V===Z.props.toastId)&&((ne=Z.toggle)==null||ne.call(Z,Q))})},U=Q=>{var V,Z;(Z=(V=Q.props)==null?void 0:V.onClose)==null||Z.call(V,Q.removalReason),Q.isActive=!1},N=Q=>{if(Q==null)f.forEach(U);else{let V=f.get(Q);V&&U(V)}b()},W=()=>{s-=a.length,a=[]},L=Q=>{var V,Z;let{toastId:ne,updateId:Y}=Q.props,le=Y==null;Q.staleId&&f.delete(Q.staleId),Q.isActive=!0,f.set(ne,Q),b(),n(aY(Q,le?"added":"updated")),le&&((Z=(V=Q.props).onOpen)==null||Z.call(V))};return{id:e,props:i,observe:y,toggle:S,removeToast:N,toasts:f,clearQueue:W,buildToast:(Q,V)=>{if(T(V))return;let{toastId:Z,updateId:ne,data:Y,staleId:le,delay:pe}=V,_e=ne==null;_e&&s++;let ye={...i,style:i.toastStyle,key:r++,...Object.fromEntries(Object.entries(V).filter(([be,Te])=>Te!=null)),toastId:Z,updateId:ne,data:Y,isIn:!1,className:m6(V.className||i.toastClassName),progressClassName:m6(V.progressClassName||i.progressClassName),autoClose:V.isLoading?!1:itt(V.autoClose,i.autoClose),closeToast(be){f.get(Z).removalReason=be,N(Z)},deleteToast(){let be=f.get(Z);if(be!=null){if(n(aY(be,"removed")),f.delete(Z),s--,s<0&&(s=0),a.length>0){L(a.shift());return}b()}}};ye.closeButton=i.closeButton,V.closeButton===!1||g6(V.closeButton)?ye.closeButton=V.closeButton:V.closeButton===!0&&(ye.closeButton=g6(i.closeButton)?i.closeButton:!0);let he={content:Q,props:ye,staleId:le};i.limit&&i.limit>0&&s>i.limit&&_e?a.push(he):sE(pe)?setTimeout(()=>{L(he)},pe):L(he)},setProps(Q){i=Q},setToggle:(Q,V)=>{let Z=f.get(Q);Z&&(Z.toggle=V)},isToastActive:Q=>{var V;return(V=f.get(Q))==null?void 0:V.isActive},getSnapshot:()=>c}}var Ah=new Map,sB=[],y6=new Set,dtt=e=>y6.forEach(t=>t(e)),yde=()=>Ah.size>0;function htt(){sB.forEach(e=>xde(e.content,e.options)),sB=[]}var ftt=(e,{containerId:t})=>{var n;return(n=Ah.get(t||1))==null?void 0:n.toasts.get(e)};function vde(e,t){var n;if(t)return!!((n=Ah.get(t))!=null&&n.isToastActive(e));let r=!1;return Ah.forEach(s=>{s.isToastActive(e)&&(r=!0)}),r}function ptt(e){if(!yde()){sB=sB.filter(t=>e!=null&&t.options.toastId!==e);return}if(e==null||rtt(e))Ah.forEach(t=>{t.removeToast(e)});else if(e&&("containerId"in e||"id"in e)){let t=Ah.get(e.containerId);t?t.removeToast(e.id):Ah.forEach(n=>{n.removeToast(e.id)})}}var Att=(e={})=>{Ah.forEach(t=>{t.props.limit&&(!e.containerId||t.id===e.containerId)&&t.clearQueue()})};function xde(e,t){g6(e)&&(yde()||sB.push({content:e,options:t}),Ah.forEach(n=>{n.buildToast(e,t)}))}function mtt(e){var t;(t=Ah.get(e.containerId||1))==null||t.setToggle(e.id,e.fn)}function _de(e,t){Ah.forEach(n=>{(t==null||!(t!=null&&t.containerId)||(t==null?void 0:t.containerId)===n.id)&&n.toggle(e,t==null?void 0:t.id)})}function gtt(e){let t=e.containerId||1;return{subscribe(n){let r=utt(t,e,dtt);Ah.set(t,r);let s=r.observe(n);return htt(),()=>{s(),Ah.delete(t)}},setProps(n){var r;(r=Ah.get(t))==null||r.setProps(n)},getSnapshot(){var n;return(n=Ah.get(t))==null?void 0:n.getSnapshot()}}}function ytt(e){return y6.add(e),()=>{y6.delete(e)}}function vtt(e){return e&&(Wx(e.toastId)||sE(e.toastId))?e.toastId:gde()}function oE(e,t){return xde(e,t),t.toastId}function $P(e,t){return{...t,type:t&&t.type||e,toastId:vtt(t)}}function GP(e){return(t,n)=>oE(t,$P(e,n))}function qi(e,t){return oE(e,$P("default",t))}qi.loading=(e,t)=>oE(e,$P("default",{isLoading:!0,autoClose:!1,closeOnClick:!1,closeButton:!1,draggable:!1,...t}));function xtt(e,{pending:t,error:n,success:r},s){let a;t&&(a=Wx(t)?qi.loading(t,s):qi.loading(t.render,{...s,...t}));let c={isLoading:null,autoClose:null,closeOnClick:null,closeButton:null,draggable:null},i=(g,y,b)=>{if(y==null){qi.dismiss(a);return}let T={type:g,...c,...s,data:b},S=Wx(y)?{render:y}:y;return a?qi.update(a,{...T,...S}):qi(S.render,{...T,...S}),b},f=d0(e)?e():e;return f.then(g=>i("success",r,g)).catch(g=>i("error",n,g)),f}qi.promise=xtt;qi.success=GP("success");qi.info=GP("info");qi.error=GP("error");qi.warning=GP("warning");qi.warn=qi.warning;qi.dark=(e,t)=>oE(e,$P("default",{theme:"dark",...t}));function _tt(e){ptt(e)}qi.dismiss=_tt;qi.clearWaitingQueue=Att;qi.isActive=vde;qi.update=(e,t={})=>{let n=ftt(e,t);if(n){let{props:r,content:s}=n,a={delay:100,...r,...t,toastId:t.toastId||e,updateId:gde()};a.toastId!==e&&(a.staleId=e);let c=a.render||s;delete a.render,oE(c,a)}};qi.done=e=>{qi.update(e,{progress:1})};qi.onChange=ytt;qi.play=e=>_de(!0,e);qi.pause=e=>_de(!1,e);function wtt(e){var t;let{subscribe:n,getSnapshot:r,setProps:s}=q.useRef(gtt(e)).current;s(e);let a=(t=q.useSyncExternalStore(n,r,r))==null?void 0:t.slice();function c(i){if(!a)return[];let f=new Map;return e.newestOnTop&&a.reverse(),a.forEach(g=>{let{position:y}=g.props;f.has(y)||f.set(y,[]),f.get(y).push(g)}),Array.from(f,g=>i(g[0],g[1]))}return{getToastToRender:c,isToastActive:vde,count:a==null?void 0:a.length}}function btt(e){let[t,n]=q.useState(!1),[r,s]=q.useState(!1),a=q.useRef(null),c=q.useRef({start:0,delta:0,removalDistance:0,canCloseOnClick:!0,canDrag:!1,didMove:!1}).current,{autoClose:i,pauseOnHover:f,closeToast:g,onClick:y,closeOnClick:b}=e;mtt({id:e.toastId,containerId:e.containerId,fn:n}),q.useEffect(()=>{if(e.pauseOnFocusLoss)return T(),()=>{S()}},[e.pauseOnFocusLoss]);function T(){document.hasFocus()||L(),window.addEventListener("focus",W),window.addEventListener("blur",L)}function S(){window.removeEventListener("focus",W),window.removeEventListener("blur",L)}function U(le){if(e.draggable===!0||e.draggable===le.pointerType){Q();let pe=a.current;c.canCloseOnClick=!0,c.canDrag=!0,pe.style.transition="none",e.draggableDirection==="x"?(c.start=le.clientX,c.removalDistance=pe.offsetWidth*(e.draggablePercent/100)):(c.start=le.clientY,c.removalDistance=pe.offsetHeight*(e.draggablePercent===80?e.draggablePercent*1.5:e.draggablePercent)/100)}}function N(le){let{top:pe,bottom:_e,left:ye,right:he}=a.current.getBoundingClientRect();le.nativeEvent.type!=="touchend"&&e.pauseOnHover&&le.clientX>=ye&&le.clientX<=he&&le.clientY>=pe&&le.clientY<=_e?L():W()}function W(){n(!0)}function L(){n(!1)}function Q(){c.didMove=!1,document.addEventListener("pointermove",Z),document.addEventListener("pointerup",ne)}function V(){document.removeEventListener("pointermove",Z),document.removeEventListener("pointerup",ne)}function Z(le){let pe=a.current;if(c.canDrag&&pe){c.didMove=!0,t&&L(),e.draggableDirection==="x"?c.delta=le.clientX-c.start:c.delta=le.clientY-c.start,c.start!==le.clientX&&(c.canCloseOnClick=!1);let _e=e.draggableDirection==="x"?`${c.delta}px, var(--y)`:`0, calc(${c.delta}px + var(--y))`;pe.style.transform=`translate3d(${_e},0)`,pe.style.opacity=`${1-Math.abs(c.delta/c.removalDistance)}`}}function ne(){V();let le=a.current;if(c.canDrag&&c.didMove&&le){if(c.canDrag=!1,Math.abs(c.delta)>c.removalDistance){s(!0),e.closeToast(!0),e.collapseAll();return}le.style.transition="transform 0.2s, opacity 0.2s",le.style.removeProperty("transform"),le.style.removeProperty("opacity")}}let Y={onPointerDown:U,onPointerUp:N};return i&&f&&(Y.onMouseEnter=L,e.stacked||(Y.onMouseLeave=W)),b&&(Y.onClick=le=>{y&&y(le),c.canCloseOnClick&&g(!0)}),{playToast:W,pauseToast:L,isRunning:t,preventExitTransition:r,toastRef:a,eventHandlers:Y}}var Ctt=typeof window<"u"?q.useLayoutEffect:q.useEffect,KP=({theme:e,type:t,isLoading:n,...r})=>Ti.createElement("svg",{viewBox:"0 0 24 24",width:"100%",height:"100%",fill:e==="colored"?"currentColor":`var(--toastify-icon-color-${t})`,...r});function Stt(e){return Ti.createElement(KP,{...e},Ti.createElement("path",{d:"M23.32 17.191L15.438 2.184C14.728.833 13.416 0 11.996 0c-1.42 0-2.733.833-3.443 2.184L.533 17.448a4.744 4.744 0 000 4.368C1.243 23.167 2.555 24 3.975 24h16.05C22.22 24 24 22.044 24 19.632c0-.904-.251-1.746-.68-2.44zm-9.622 1.46c0 1.033-.724 1.823-1.698 1.823s-1.698-.79-1.698-1.822v-.043c0-1.028.724-1.822 1.698-1.822s1.698.79 1.698 1.822v.043zm.039-12.285l-.84 8.06c-.057.581-.408.943-.897.943-.49 0-.84-.367-.896-.942l-.84-8.065c-.057-.624.25-1.095.779-1.095h1.91c.528.005.84.476.784 1.1z"}))}function Btt(e){return Ti.createElement(KP,{...e},Ti.createElement("path",{d:"M12 0a12 12 0 1012 12A12.013 12.013 0 0012 0zm.25 5a1.5 1.5 0 11-1.5 1.5 1.5 1.5 0 011.5-1.5zm2.25 13.5h-4a1 1 0 010-2h.75a.25.25 0 00.25-.25v-4.5a.25.25 0 00-.25-.25h-.75a1 1 0 010-2h1a2 2 0 012 2v4.75a.25.25 0 00.25.25h.75a1 1 0 110 2z"}))}function Ett(e){return Ti.createElement(KP,{...e},Ti.createElement("path",{d:"M12 0a12 12 0 1012 12A12.014 12.014 0 0012 0zm6.927 8.2l-6.845 9.289a1.011 1.011 0 01-1.43.188l-4.888-3.908a1 1 0 111.25-1.562l4.076 3.261 6.227-8.451a1 1 0 111.61 1.183z"}))}function Ttt(e){return Ti.createElement(KP,{...e},Ti.createElement("path",{d:"M11.983 0a12.206 12.206 0 00-8.51 3.653A11.8 11.8 0 000 12.207 11.779 11.779 0 0011.8 24h.214A12.111 12.111 0 0024 11.791 11.766 11.766 0 0011.983 0zM10.5 16.542a1.476 1.476 0 011.449-1.53h.027a1.527 1.527 0 011.523 1.47 1.475 1.475 0 01-1.449 1.53h-.027a1.529 1.529 0 01-1.523-1.47zM11 12.5v-6a1 1 0 012 0v6a1 1 0 11-2 0z"}))}function Itt(){return Ti.createElement("div",{className:"Toastify__spinner"})}var v6={info:Btt,warning:Stt,success:Ett,error:Ttt,spinner:Itt},jtt=e=>e in v6;function Ftt({theme:e,type:t,isLoading:n,icon:r}){let s=null,a={theme:e,type:t};return r===!1||(d0(r)?s=r({...a,isLoading:n}):q.isValidElement(r)?s=q.cloneElement(r,a):n?s=v6.spinner():jtt(t)&&(s=v6[t](a))),s}var Ptt=e=>{let{isRunning:t,preventExitTransition:n,toastRef:r,eventHandlers:s,playToast:a}=btt(e),{closeButton:c,children:i,autoClose:f,onClick:g,type:y,hideProgressBar:b,closeToast:T,transition:S,position:U,className:N,style:W,progressClassName:L,updateId:Q,role:V,progress:Z,rtl:ne,toastId:Y,deleteToast:le,isIn:pe,isLoading:_e,closeOnClick:ye,theme:he,ariaLabel:be}=e,Te=Sx("Toastify__toast",`Toastify__toast-theme--${he}`,`Toastify__toast--${y}`,{"Toastify__toast--rtl":ne},{"Toastify__toast--close-on-click":ye}),Ee=d0(N)?N({rtl:ne,position:U,type:y,defaultClassName:Te}):Sx(Te,N),Ne=Ftt(e),Ge=!!Z||!f,Je={closeToast:T,type:y,theme:he},Ue=null;return c===!1||(d0(c)?Ue=c(Je):q.isValidElement(c)?Ue=q.cloneElement(c,Je):Ue=att(Je)),Ti.createElement(S,{isIn:pe,done:le,position:U,preventExitTransition:n,nodeRef:r,playToast:a},Ti.createElement("div",{id:Y,tabIndex:0,onClick:g,"data-in":pe,className:Ee,...s,style:W,ref:r,...pe&&{role:V,"aria-label":be}},Ne!=null&&Ti.createElement("div",{className:Sx("Toastify__toast-icon",{"Toastify--animate-icon Toastify__zoom-enter":!_e})},Ne),mde(i,e,!t),Ue,!e.customProgressBar&&Ti.createElement(ltt,{...Q&&!Ge?{key:`p-${Q}`}:{},rtl:ne,theme:he,delay:f,isRunning:t,isIn:pe,closeToast:T,hide:b,type:y,className:L,controlledProgress:Ge,progress:Z||0})))},ktt=(e,t=!1)=>({enter:`Toastify--animate Toastify__${e}-enter`,exit:`Toastify--animate Toastify__${e}-exit`,appendPosition:t}),Ltt=ott(ktt("bounce",!0)),Mtt={position:"top-right",transition:Ltt,autoClose:5e3,closeButton:!0,pauseOnHover:!0,pauseOnFocusLoss:!0,draggable:"touch",draggablePercent:80,draggableDirection:"x",role:"alert",theme:"light","aria-label":"Notifications Alt+T",hotKeys:e=>e.altKey&&e.code==="KeyT"};function cb(e){let t={...Mtt,...e},n=e.stacked,[r,s]=q.useState(!0),a=q.useRef(null),{getToastToRender:c,isToastActive:i,count:f}=wtt(t),{className:g,style:y,rtl:b,containerId:T,hotKeys:S}=t;function U(W){let L=Sx("Toastify__toast-container",`Toastify__toast-container--${W}`,{"Toastify__toast-container--rtl":b});return d0(g)?g({position:W,rtl:b,defaultClassName:L}):Sx(L,m6(g))}function N(){n&&(s(!0),qi.play())}return Ctt(()=>{var W;if(n){let L=a.current.querySelectorAll('[data-in="true"]'),Q=12,V=(W=t.position)==null?void 0:W.includes("top"),Z=0,ne=0;Array.from(L).reverse().forEach((Y,le)=>{let pe=Y;pe.classList.add("Toastify__toast--stacked"),le>0&&(pe.dataset.collapsed=`${r}`),pe.dataset.pos||(pe.dataset.pos=V?"top":"bot");let _e=Z*(r?.2:1)+(r?0:Q*le);pe.style.setProperty("--y",`${V?_e:_e*-1}px`),pe.style.setProperty("--g",`${Q}`),pe.style.setProperty("--s",`${1-(r?ne:0)}`),Z+=pe.offsetHeight,ne+=.025})}},[r,f,n]),q.useEffect(()=>{function W(L){var Q;let V=a.current;S(L)&&((Q=V.querySelector('[tabIndex="0"]'))==null||Q.focus(),s(!1),qi.pause()),L.key==="Escape"&&(document.activeElement===V||V!=null&&V.contains(document.activeElement))&&(s(!0),qi.play())}return document.addEventListener("keydown",W),()=>{document.removeEventListener("keydown",W)}},[S]),Ti.createElement("section",{ref:a,className:"Toastify",id:T,onMouseEnter:()=>{n&&(s(!1),qi.pause())},onMouseLeave:N,"aria-live":"polite","aria-atomic":"false","aria-relevant":"additions text","aria-label":t["aria-label"]},c((W,L)=>{let Q=L.length?{...y}:{...y,pointerEvents:"none"};return Ti.createElement("div",{tabIndex:-1,className:U(W),"data-stacked":n,style:Q,key:`c-${W}`},L.map(({content:V,props:Z})=>Ti.createElement(Ptt,{...Z,stacked:n,collapseAll:N,isIn:i(Z.toastId,Z.containerId),key:`t-${Z.key}`},V)))}))}const Bs=()=>{const[e,t]=q.useState(!navigator.onLine);return q.useEffect(()=>{const n=()=>{t(!1),qi.success("Back online")},r=()=>{t(!0),qi.error("You are offline")};return window.addEventListener("online",n),window.addEventListener("offline",r),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",r)}},[]),A.jsxs(A.Fragment,{children:[e&&A.jsx("div",{className:"fixed bottom-0 bg-red-600 text-white  w-full  text-center",children:"⚠️ No Internet Connection"}),A.jsx(cb,{})]})};function Ntt(){const[e,t]=q.useState("/rate-calculator"),[n,r]=q.useState("/schedule-a-ship"),[s,a]=q.useState("/reprint-shipping-label");return q.useState(!navigator.onLine),A.jsxs(A.Fragment,{children:[A.jsx(_h,{}),A.jsx(G1e,{}),A.jsx(K1e,{rateCalulatorAdrress:e,scheduleShipAdrress:n,reprintLabelAddress:s}),A.jsx(al,{}),A.jsx(qp,{}),A.jsx(Bs,{})]})}const Rtt=()=>{const e=Mo(),[t,n]=q.useState({originCity:"",destinationCity:"",weight:"",shipmentType:"",insurance:"",orignalprice:""}),[r,s]=q.useState(null),[a,c]=q.useState(null),[i,f]=q.useState("idle"),g=b=>{const{name:T,value:S}=b.target;n({...t,[T]:S}),s(""),c("")},y=async b=>{b.preventDefault();const T=new FormData(b.target),S={};if(T.forEach((U,N)=>{S[N]=U}),!(S.weight>0)){s("Weight must be greater than 0");return}if(!(/^\d+$/.test(S.orignalprice)||S.insurance==="no")){c("Shipment price must be entered in digits only (e.g., 1200)");return}if(!(S.orignalprice>0)&&S.insurance==="yes"){c("Original Price must be greater than 0");return}f("processing");try{const N=await(await fetch("https://swiftlogix.cc/api/calculate-point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(S)})).json();f("success"),e("/price-page",{state:{service:N.service,basePrice:N.basePrice,weightCharges:N.weightCharges,distanceCharges:N.distanceCharges,totalPrice:N.totalPrice,insuranceType:N.insurance}})}catch(U){console.error("Error submitting form:",U)}};return A.jsx(go,{delay:.2,children:A.jsxs("div",{className:"w-full",children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl font-semibold",children:"Rate Calculator"})}),A.jsx("div",{className:"flex justify-center py-10 px-4 bg-gray-100",children:A.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-sm",children:[A.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Rate Calculator"}),A.jsxs("form",{onSubmit:y,children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"originCity",className:"block text-sm font-medium text-gray-700",children:"Origin City"}),A.jsxs("select",{id:"originCity",name:"originCity",value:t.originCity,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Select a city"}),["Karachi","Islamabad","Lahore","Rawalpindi","Faisalabad","Sialkot","Multan","Peshawar","Quetta","Bahawalpur","Gujranwala","Sukkur","Mardan","Abbottabad"].filter(b=>b!==t.destinationCity).map(b=>A.jsx("option",{value:b,children:b},b))]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"destinationCity",className:"block text-sm font-medium text-gray-700",children:"Destination City"}),A.jsxs("select",{id:"destinationCity",name:"destinationCity",value:t.destinationCity,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Select a city"}),["Karachi","Islamabad","Lahore","Rawalpindi","Faisalabad","Sialkot","Multan","Peshawar","Quetta","Bahawalpur","Gujranwala","Sukkur","Mardan","Abbottabad"].filter(b=>b!==t.originCity).map(b=>A.jsx("option",{value:b,children:b},b))]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700",children:"Weight (in kg)"}),A.jsx("input",{type:"number",id:"weight",name:"weight",value:t.weight,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),r&&A.jsx("p",{className:"text-red-500 text-sm mt-1",children:r})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{htmlFor:"shipmentType",className:"block text-sm font-medium text-gray-700",children:"Shipment Type"}),A.jsxs("select",{id:"shipmentType",name:"shipmentType",value:t.shipmentType,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",children:"Shipment type"}),A.jsx("option",{value:"Ground",children:"Ground"}),A.jsx("option",{value:"Express",children:"Express"})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"insurance",className:"block text-sm font-medium text-gray-700",children:"Insurance Type"}),A.jsxs("select",{id:"insurance",name:"insurance",value:t.insurance,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Insurance Type"}),A.jsx("option",{value:"yes",children:"Yes"}),A.jsx("option",{value:"no",children:"No"})]})]}),t.insurance==="yes"&&A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"orignalprice",className:"block text-sm font-medium text-gray-700",children:"Shipment Original Price"}),A.jsx("input",{type:"text",id:"orignalprice",name:"orignalprice",value:t.orignalprice,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),a&&A.jsx("p",{className:"text-red-500 text-sm mt-1",children:a})]}),A.jsx("button",{type:"submit",disabled:i==="processing",className:"w-full py-2 px-4 bg-[#009688] text-white font-semibold rounded-lg hover:bg-[#FF7043] transition-all duration-300 ease-in-out",children:i==="processing"?"Processing...":i==="success"?"Calculated":"Calculate"})]})]})})]})})},Ott=()=>A.jsxs("div",{children:[A.jsx(Bs,{}),A.jsx(al,{}),A.jsx(_h,{}),A.jsx(Rtt,{}),A.jsx(qp,{})]}),Dtt=()=>{const e=nf(),{service:t,basePrice:n,weightCharges:r,distanceCharges:s,totalPrice:a,insuranceType:c}=e.state;return A.jsxs("div",{children:[A.jsx(_h,{}),A.jsx(Bs,{}),A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl font-semibold",children:"Rate Calculator"})}),A.jsx(go,{delay:.2,children:A.jsx("div",{className:"w-full flex justify-center",children:A.jsxs("div",{className:"w-full sm:w-[90%] md:w-[85%] lg:w-[70%] flex flex-col items-center my-8 px-2",children:[A.jsx("div",{className:"w-full m-4 flex justify-start",children:A.jsx("div",{className:"font-semibold text-2xl sm:text-3xl md:text-4xl text-center",children:"Price Details:"})}),A.jsx("div",{className:"w-full overflow-x-auto border-[2px] flex justify-center",children:A.jsxs("div",{className:"min-w-[600px] w-full",children:[A.jsxs("div",{className:"w-full font-semibold bg-[#009688] flex text-sm sm:text-base text-center",children:[A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:"Service"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:"Base Price"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:"Weight Charges"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:"Distance Charges"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:"Insurance"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:"Total Price"})]}),A.jsxs("div",{className:"w-full font-semibold flex text-sm sm:text-base text-center",children:[A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:t}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:n}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:r}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:s}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:c}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2",children:a})]})]})}),A.jsx("div",{className:"mt-8 flex justify-center",children:A.jsx(ss,{to:"/rate-calculator",children:A.jsx("button",{className:"bg-[#009688] text-white font-medium px-6 py-2 rounded-lg hover:bg-[#FF7043] transition duration-300 hover:scale-105",children:"Recalculate Price"})})})]})})}),A.jsx(al,{}),A.jsx(qp,{})]})},dQ=({senderFormData:e,onSenderFormDataChange:t,onNextStep:n,useMyProfile:r,userData:s})=>{q.useState(!1);const[a,c]=q.useState({sendername:"",sendercontact:"",senderemail:"",sendercnic:""}),i=b=>{const{name:T}=b.target;t(b),c({...a,[T]:""})},f=()=>{let b=!0,T={};return e.sendername?/^[a-zA-Z\s]+$/.test(e.sendername)||(T.sendername="Name must contain only alphabets",b=!1):(T.sendername="Name is required",b=!1),e.sendercontact?/^[0-9]+$/.test(e.sendercontact)||(T.sendercontact="Contact number must contain only digits",b=!1):(T.sendercontact="Contact number is required",b=!1),e.senderemail?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.senderemail)||(T.senderemail="Please enter a valid email address",b=!1):(T.senderemail="Email is required",b=!1),e.sendercnic?/^[0-9]{13}$/.test(e.sendercnic)||(T.sendercnic="CNIC must be exactly 13 digits",b=!1):(T.sendercnic="CNIC is required",b=!1),c(T),b},g=()=>{f()&&n()},y=()=>{s()};return A.jsxs("div",{className:"max-w-3xl mx-auto my-10 p-6 bg-white rounded-lg shadow-lg",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-700 text-center mb-6",children:"Sender Information"}),A.jsxs("form",{children:[A.jsxs("div",{className:"w-full flex gap-4",children:[A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"sendername",value:e.sendername,onChange:i,placeholder:"Name",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),a.sendername&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.sendername})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"sendercontact",value:e.sendercontact,onChange:i,placeholder:"Contact No",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),a.sendercontact&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.sendercontact})]})]}),A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"email",name:"senderemail",value:e.senderemail,onChange:i,placeholder:"Email Address",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),a.senderemail&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.senderemail})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"sendercnic",value:e.sendercnic,onChange:i,placeholder:"CNIC",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"}),a.sendercnic&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:a.sendercnic})]})]})]}),A.jsxs("div",{className:`flex  ${r?"justify-between":"justify-end"} mt-6`,children:[r&&A.jsx("button",{type:"button",onClick:y,className:"bg-[#009688] text-white py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out",children:"Use My Profile"}),A.jsx("button",{type:"button",onClick:g,className:"bg-[#009688] text-white py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out",children:"Next"})]})]})]})},wde="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0px'%20y='0px'%20width='48'%20height='48'%20viewBox='0%200%2048%2048'%3e%3cpath%20fill='%23FFA726'%20d='M14%2027c0%202.209-1.791%204-4%204s-4-1.791-4-4%201.791-4%204-4S14%2024.791%2014%2027M42%2027c0%202.209-1.791%204-4%204s-4-1.791-4-4%201.791-4%204-4S42%2024.791%2042%2027'%3e%3c/path%3e%3cpath%20fill='%23FFB74D'%20d='M9,20c0-12.725,30-8.284,30,0v10c0,8.284-6.716,15-15,15S9,38.284,9,30V20z'%3e%3c/path%3e%3cpath%20fill='%23424242'%20d='M40.891,19.338C40.417,13.365,38.33,7.482,31,6l-2-3h-5C14.772,3,7,10.48,7,21v3.4l3,3.6v-6l21-7l7,6v7l3-3.6V21C41,20.436,40.957,19.883,40.891,19.338'%3e%3c/path%3e%3cpath%20fill='%23784719'%20d='M33%2028c0%201.105-.895%202-2%202s-2-.895-2-2%20.895-2%202-2S33%2026.895%2033%2028M19%2028c0%201.105-.895%202-2%202s-2-.895-2-2%20.895-2%202-2S19%2026.895%2019%2028'%3e%3c/path%3e%3cpath%20fill='%23FB8C00'%20d='M19,37h10c0,0-2,3-5,3S19,37,19,37z'%3e%3c/path%3e%3c/svg%3e",Ld="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20x='0px'%20y='0px'%20width='50'%20height='50'%20viewBox='0,0,256,256'%3e%3cg%20fill='%234bb543'%20fill-rule='nonzero'%20stroke='none'%20stroke-width='1'%20stroke-linecap='butt'%20stroke-linejoin='miter'%20stroke-miterlimit='10'%20stroke-dasharray=''%20stroke-dashoffset='0'%20font-family='none'%20font-weight='none'%20font-size='none'%20text-anchor='none'%20style='mix-blend-mode:%20normal'%3e%3cg%20transform='scale(5.12,5.12)'%3e%3cpath%20d='M43.171,10.925l-19.086,22.521l-9.667,-9.015l1.363,-1.463l8.134,7.585l17.946,-21.175c-4.204,-4.534%20-10.205,-7.378%20-16.861,-7.378c-12.683,0%20-23,10.317%20-23,23c0,12.683%2010.317,23%2023,23c12.683,0%2023,-10.317%2023,-23c0,-5.299%20-1.806,-10.182%20-4.829,-14.075z'%3e%3c/path%3e%3c/g%3e%3c/g%3e%3c/svg%3e",bde="/assets/start-Bvh918k5.png",Cde="/assets/end-CNATcT52.png";var Sde={exports:{}};(function(e,t){(function(n,r){e.exports=r()})(Qm,function(){var n,r,s;function a(i,f){if(!n)n=f;else if(!r)r=f;else{var g="self.onerror = function() { console.error('An error occurred while parsing the WebWorker bundle. This is most likely due to improper transpilation by Babel; please see https://docs.mapbox.com/mapbox-gl-js/guides/install/#transpiling'); }; var sharedChunk = {}; ("+n+")(sharedChunk); ("+r+")(sharedChunk); self.onerror = null;",y={};n(y),s=f(y),typeof window<"u"&&window&&window.URL&&window.URL.createObjectURL&&(s.workerUrl=window.URL.createObjectURL(new Blob([g],{type:"text/javascript"})))}}a(["exports"],function(i){function f(h){return h&&h.__esModule&&Object.prototype.hasOwnProperty.call(h,"default")?h.default:h}var g,y={},b={};function T(){if(g)return b;g=1,Object.defineProperty(b,"__esModule",{value:!0}),b.setMatrixArrayType=function(_){b.ARRAY_TYPE=o=_},b.toRadian=function(_){return _*p},b.equals=function(_,m){return Math.abs(_-m)<=h*Math.max(1,Math.abs(_),Math.abs(m))},b.RANDOM=b.ARRAY_TYPE=b.EPSILON=void 0;var h=1e-6;b.EPSILON=h;var o=typeof Float32Array<"u"?Float32Array:Array;b.ARRAY_TYPE=o;var u=Math.random;b.RANDOM=u;var p=Math.PI/180;return Math.hypot||(Math.hypot=function(){for(var _=0,m=arguments.length;m--;)_+=arguments[m]*arguments[m];return Math.sqrt(_)}),b}var S,U={};function N(){if(S)return U;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},h(m)}S=1,Object.defineProperty(U,"__esModule",{value:!0}),U.create=function(){var m=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0),m[0]=1,m[3]=1,m},U.clone=function(m){var w=new o.ARRAY_TYPE(4);return w[0]=m[0],w[1]=m[1],w[2]=m[2],w[3]=m[3],w},U.copy=function(m,w){return m[0]=w[0],m[1]=w[1],m[2]=w[2],m[3]=w[3],m},U.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m},U.fromValues=function(m,w,j,k){var H=new o.ARRAY_TYPE(4);return H[0]=m,H[1]=w,H[2]=j,H[3]=k,H},U.set=function(m,w,j,k,H){return m[0]=w,m[1]=j,m[2]=k,m[3]=H,m},U.transpose=function(m,w){if(m===w){var j=w[1];m[1]=w[2],m[2]=j}else m[0]=w[0],m[1]=w[2],m[2]=w[1],m[3]=w[3];return m},U.invert=function(m,w){var j=w[0],k=w[1],H=w[2],E=w[3],M=j*E-H*k;return M?(m[0]=E*(M=1/M),m[1]=-k*M,m[2]=-H*M,m[3]=j*M,m):null},U.adjoint=function(m,w){var j=w[0];return m[0]=w[3],m[1]=-w[1],m[2]=-w[2],m[3]=j,m},U.determinant=function(m){return m[0]*m[3]-m[2]*m[1]},U.multiply=p,U.rotate=function(m,w,j){var k=w[0],H=w[1],E=w[2],M=w[3],O=Math.sin(j),P=Math.cos(j);return m[0]=k*P+E*O,m[1]=H*P+M*O,m[2]=k*-O+E*P,m[3]=H*-O+M*P,m},U.scale=function(m,w,j){var k=w[1],H=w[2],E=w[3],M=j[0],O=j[1];return m[0]=w[0]*M,m[1]=k*M,m[2]=H*O,m[3]=E*O,m},U.fromRotation=function(m,w){var j=Math.sin(w),k=Math.cos(w);return m[0]=k,m[1]=j,m[2]=-j,m[3]=k,m},U.fromScaling=function(m,w){return m[0]=w[0],m[1]=0,m[2]=0,m[3]=w[1],m},U.str=function(m){return"mat2("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+")"},U.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3])},U.LDU=function(m,w,j,k){return m[2]=k[2]/k[0],j[0]=k[0],j[1]=k[1],j[3]=k[3]-m[2]*j[1],[m,w,j]},U.add=function(m,w,j){return m[0]=w[0]+j[0],m[1]=w[1]+j[1],m[2]=w[2]+j[2],m[3]=w[3]+j[3],m},U.subtract=_,U.exactEquals=function(m,w){return m[0]===w[0]&&m[1]===w[1]&&m[2]===w[2]&&m[3]===w[3]},U.equals=function(m,w){var j=m[0],k=m[1],H=m[2],E=m[3],M=w[0],O=w[1],P=w[2],R=w[3];return Math.abs(j-M)<=o.EPSILON*Math.max(1,Math.abs(j),Math.abs(M))&&Math.abs(k-O)<=o.EPSILON*Math.max(1,Math.abs(k),Math.abs(O))&&Math.abs(H-P)<=o.EPSILON*Math.max(1,Math.abs(H),Math.abs(P))&&Math.abs(E-R)<=o.EPSILON*Math.max(1,Math.abs(E),Math.abs(R))},U.multiplyScalar=function(m,w,j){return m[0]=w[0]*j,m[1]=w[1]*j,m[2]=w[2]*j,m[3]=w[3]*j,m},U.multiplyScalarAndAdd=function(m,w,j,k){return m[0]=w[0]+j[0]*k,m[1]=w[1]+j[1]*k,m[2]=w[2]+j[2]*k,m[3]=w[3]+j[3]*k,m},U.sub=U.mul=void 0;var o=function(m,w){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var j=u(void 0);if(j&&j.has(m))return j.get(m);var k={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var M=H?Object.getOwnPropertyDescriptor(m,E):null;M&&(M.get||M.set)?Object.defineProperty(k,E,M):k[E]=m[E]}return k.default=m,j&&j.set(m,k),k}(T());function u(m){if(typeof WeakMap!="function")return null;var w=new WeakMap,j=new WeakMap;return(u=function(k){return k?j:w})(m)}function p(m,w,j){var k=w[0],H=w[1],E=w[2],M=w[3],O=j[0],P=j[1],R=j[2],$=j[3];return m[0]=k*O+E*P,m[1]=H*O+M*P,m[2]=k*R+E*$,m[3]=H*R+M*$,m}function _(m,w,j){return m[0]=w[0]-j[0],m[1]=w[1]-j[1],m[2]=w[2]-j[2],m[3]=w[3]-j[3],m}return U.mul=p,U.sub=_,U}var W,L={};function Q(){if(W)return L;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},h(m)}W=1,Object.defineProperty(L,"__esModule",{value:!0}),L.create=function(){var m=new o.ARRAY_TYPE(6);return o.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[4]=0,m[5]=0),m[0]=1,m[3]=1,m},L.clone=function(m){var w=new o.ARRAY_TYPE(6);return w[0]=m[0],w[1]=m[1],w[2]=m[2],w[3]=m[3],w[4]=m[4],w[5]=m[5],w},L.copy=function(m,w){return m[0]=w[0],m[1]=w[1],m[2]=w[2],m[3]=w[3],m[4]=w[4],m[5]=w[5],m},L.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=0,m[5]=0,m},L.fromValues=function(m,w,j,k,H,E){var M=new o.ARRAY_TYPE(6);return M[0]=m,M[1]=w,M[2]=j,M[3]=k,M[4]=H,M[5]=E,M},L.set=function(m,w,j,k,H,E,M){return m[0]=w,m[1]=j,m[2]=k,m[3]=H,m[4]=E,m[5]=M,m},L.invert=function(m,w){var j=w[0],k=w[1],H=w[2],E=w[3],M=w[4],O=w[5],P=j*E-k*H;return P?(m[0]=E*(P=1/P),m[1]=-k*P,m[2]=-H*P,m[3]=j*P,m[4]=(H*O-E*M)*P,m[5]=(k*M-j*O)*P,m):null},L.determinant=function(m){return m[0]*m[3]-m[1]*m[2]},L.multiply=p,L.rotate=function(m,w,j){var k=w[0],H=w[1],E=w[2],M=w[3],O=w[4],P=w[5],R=Math.sin(j),$=Math.cos(j);return m[0]=k*$+E*R,m[1]=H*$+M*R,m[2]=k*-R+E*$,m[3]=H*-R+M*$,m[4]=O,m[5]=P,m},L.scale=function(m,w,j){var k=w[1],H=w[2],E=w[3],M=w[4],O=w[5],P=j[0],R=j[1];return m[0]=w[0]*P,m[1]=k*P,m[2]=H*R,m[3]=E*R,m[4]=M,m[5]=O,m},L.translate=function(m,w,j){var k=w[0],H=w[1],E=w[2],M=w[3],O=w[4],P=w[5],R=j[0],$=j[1];return m[0]=k,m[1]=H,m[2]=E,m[3]=M,m[4]=k*R+E*$+O,m[5]=H*R+M*$+P,m},L.fromRotation=function(m,w){var j=Math.sin(w),k=Math.cos(w);return m[0]=k,m[1]=j,m[2]=-j,m[3]=k,m[4]=0,m[5]=0,m},L.fromScaling=function(m,w){return m[0]=w[0],m[1]=0,m[2]=0,m[3]=w[1],m[4]=0,m[5]=0,m},L.fromTranslation=function(m,w){return m[0]=1,m[1]=0,m[2]=0,m[3]=1,m[4]=w[0],m[5]=w[1],m},L.str=function(m){return"mat2d("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+")"},L.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],1)},L.add=function(m,w,j){return m[0]=w[0]+j[0],m[1]=w[1]+j[1],m[2]=w[2]+j[2],m[3]=w[3]+j[3],m[4]=w[4]+j[4],m[5]=w[5]+j[5],m},L.subtract=_,L.multiplyScalar=function(m,w,j){return m[0]=w[0]*j,m[1]=w[1]*j,m[2]=w[2]*j,m[3]=w[3]*j,m[4]=w[4]*j,m[5]=w[5]*j,m},L.multiplyScalarAndAdd=function(m,w,j,k){return m[0]=w[0]+j[0]*k,m[1]=w[1]+j[1]*k,m[2]=w[2]+j[2]*k,m[3]=w[3]+j[3]*k,m[4]=w[4]+j[4]*k,m[5]=w[5]+j[5]*k,m},L.exactEquals=function(m,w){return m[0]===w[0]&&m[1]===w[1]&&m[2]===w[2]&&m[3]===w[3]&&m[4]===w[4]&&m[5]===w[5]},L.equals=function(m,w){var j=m[0],k=m[1],H=m[2],E=m[3],M=m[4],O=m[5],P=w[0],R=w[1],$=w[2],te=w[3],ie=w[4],de=w[5];return Math.abs(j-P)<=o.EPSILON*Math.max(1,Math.abs(j),Math.abs(P))&&Math.abs(k-R)<=o.EPSILON*Math.max(1,Math.abs(k),Math.abs(R))&&Math.abs(H-$)<=o.EPSILON*Math.max(1,Math.abs(H),Math.abs($))&&Math.abs(E-te)<=o.EPSILON*Math.max(1,Math.abs(E),Math.abs(te))&&Math.abs(M-ie)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(ie))&&Math.abs(O-de)<=o.EPSILON*Math.max(1,Math.abs(O),Math.abs(de))},L.sub=L.mul=void 0;var o=function(m,w){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var j=u(void 0);if(j&&j.has(m))return j.get(m);var k={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var M=H?Object.getOwnPropertyDescriptor(m,E):null;M&&(M.get||M.set)?Object.defineProperty(k,E,M):k[E]=m[E]}return k.default=m,j&&j.set(m,k),k}(T());function u(m){if(typeof WeakMap!="function")return null;var w=new WeakMap,j=new WeakMap;return(u=function(k){return k?j:w})(m)}function p(m,w,j){var k=w[0],H=w[1],E=w[2],M=w[3],O=w[4],P=w[5],R=j[0],$=j[1],te=j[2],ie=j[3],de=j[4],fe=j[5];return m[0]=k*R+E*$,m[1]=H*R+M*$,m[2]=k*te+E*ie,m[3]=H*te+M*ie,m[4]=k*de+E*fe+O,m[5]=H*de+M*fe+P,m}function _(m,w,j){return m[0]=w[0]-j[0],m[1]=w[1]-j[1],m[2]=w[2]-j[2],m[3]=w[3]-j[3],m[4]=w[4]-j[4],m[5]=w[5]-j[5],m}return L.mul=p,L.sub=_,L}var V,Z={};function ne(){if(V)return Z;function h(m){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(w){return typeof w}:function(w){return w&&typeof Symbol=="function"&&w.constructor===Symbol&&w!==Symbol.prototype?"symbol":typeof w},h(m)}V=1,Object.defineProperty(Z,"__esModule",{value:!0}),Z.create=function(){var m=new o.ARRAY_TYPE(9);return o.ARRAY_TYPE!=Float32Array&&(m[1]=0,m[2]=0,m[3]=0,m[5]=0,m[6]=0,m[7]=0),m[0]=1,m[4]=1,m[8]=1,m},Z.fromMat4=function(m,w){return m[0]=w[0],m[1]=w[1],m[2]=w[2],m[3]=w[4],m[4]=w[5],m[5]=w[6],m[6]=w[8],m[7]=w[9],m[8]=w[10],m},Z.clone=function(m){var w=new o.ARRAY_TYPE(9);return w[0]=m[0],w[1]=m[1],w[2]=m[2],w[3]=m[3],w[4]=m[4],w[5]=m[5],w[6]=m[6],w[7]=m[7],w[8]=m[8],w},Z.copy=function(m,w){return m[0]=w[0],m[1]=w[1],m[2]=w[2],m[3]=w[3],m[4]=w[4],m[5]=w[5],m[6]=w[6],m[7]=w[7],m[8]=w[8],m},Z.fromValues=function(m,w,j,k,H,E,M,O,P){var R=new o.ARRAY_TYPE(9);return R[0]=m,R[1]=w,R[2]=j,R[3]=k,R[4]=H,R[5]=E,R[6]=M,R[7]=O,R[8]=P,R},Z.set=function(m,w,j,k,H,E,M,O,P,R){return m[0]=w,m[1]=j,m[2]=k,m[3]=H,m[4]=E,m[5]=M,m[6]=O,m[7]=P,m[8]=R,m},Z.identity=function(m){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},Z.transpose=function(m,w){if(m===w){var j=w[1],k=w[2],H=w[5];m[1]=w[3],m[2]=w[6],m[3]=j,m[5]=w[7],m[6]=k,m[7]=H}else m[0]=w[0],m[1]=w[3],m[2]=w[6],m[3]=w[1],m[4]=w[4],m[5]=w[7],m[6]=w[2],m[7]=w[5],m[8]=w[8];return m},Z.invert=function(m,w){var j=w[0],k=w[1],H=w[2],E=w[3],M=w[4],O=w[5],P=w[6],R=w[7],$=w[8],te=$*M-O*R,ie=-$*E+O*P,de=R*E-M*P,fe=j*te+k*ie+H*de;return fe?(m[0]=te*(fe=1/fe),m[1]=(-$*k+H*R)*fe,m[2]=(O*k-H*M)*fe,m[3]=ie*fe,m[4]=($*j-H*P)*fe,m[5]=(-O*j+H*E)*fe,m[6]=de*fe,m[7]=(-R*j+k*P)*fe,m[8]=(M*j-k*E)*fe,m):null},Z.adjoint=function(m,w){var j=w[0],k=w[1],H=w[2],E=w[3],M=w[4],O=w[5],P=w[6],R=w[7],$=w[8];return m[0]=M*$-O*R,m[1]=H*R-k*$,m[2]=k*O-H*M,m[3]=O*P-E*$,m[4]=j*$-H*P,m[5]=H*E-j*O,m[6]=E*R-M*P,m[7]=k*P-j*R,m[8]=j*M-k*E,m},Z.determinant=function(m){var w=m[3],j=m[4],k=m[5],H=m[6],E=m[7],M=m[8];return m[0]*(M*j-k*E)+m[1]*(-M*w+k*H)+m[2]*(E*w-j*H)},Z.multiply=p,Z.translate=function(m,w,j){var k=w[0],H=w[1],E=w[2],M=w[3],O=w[4],P=w[5],R=w[6],$=w[7],te=w[8],ie=j[0],de=j[1];return m[0]=k,m[1]=H,m[2]=E,m[3]=M,m[4]=O,m[5]=P,m[6]=ie*k+de*M+R,m[7]=ie*H+de*O+$,m[8]=ie*E+de*P+te,m},Z.rotate=function(m,w,j){var k=w[0],H=w[1],E=w[2],M=w[3],O=w[4],P=w[5],R=w[6],$=w[7],te=w[8],ie=Math.sin(j),de=Math.cos(j);return m[0]=de*k+ie*M,m[1]=de*H+ie*O,m[2]=de*E+ie*P,m[3]=de*M-ie*k,m[4]=de*O-ie*H,m[5]=de*P-ie*E,m[6]=R,m[7]=$,m[8]=te,m},Z.scale=function(m,w,j){var k=j[0],H=j[1];return m[0]=k*w[0],m[1]=k*w[1],m[2]=k*w[2],m[3]=H*w[3],m[4]=H*w[4],m[5]=H*w[5],m[6]=w[6],m[7]=w[7],m[8]=w[8],m},Z.fromTranslation=function(m,w){return m[0]=1,m[1]=0,m[2]=0,m[3]=0,m[4]=1,m[5]=0,m[6]=w[0],m[7]=w[1],m[8]=1,m},Z.fromRotation=function(m,w){var j=Math.sin(w),k=Math.cos(w);return m[0]=k,m[1]=j,m[2]=0,m[3]=-j,m[4]=k,m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},Z.fromScaling=function(m,w){return m[0]=w[0],m[1]=0,m[2]=0,m[3]=0,m[4]=w[1],m[5]=0,m[6]=0,m[7]=0,m[8]=1,m},Z.fromMat2d=function(m,w){return m[0]=w[0],m[1]=w[1],m[2]=0,m[3]=w[2],m[4]=w[3],m[5]=0,m[6]=w[4],m[7]=w[5],m[8]=1,m},Z.fromQuat=function(m,w){var j=w[0],k=w[1],H=w[2],E=w[3],M=j+j,O=k+k,P=H+H,R=j*M,$=k*M,te=k*O,ie=H*M,de=H*O,fe=H*P,ae=E*M,ge=E*O,Be=E*P;return m[0]=1-te-fe,m[3]=$-Be,m[6]=ie+ge,m[1]=$+Be,m[4]=1-R-fe,m[7]=de-ae,m[2]=ie-ge,m[5]=de+ae,m[8]=1-R-te,m},Z.normalFromMat4=function(m,w){var j=w[0],k=w[1],H=w[2],E=w[3],M=w[4],O=w[5],P=w[6],R=w[7],$=w[8],te=w[9],ie=w[10],de=w[11],fe=w[12],ae=w[13],ge=w[14],Be=w[15],ke=j*O-k*M,Ye=j*P-H*M,Xe=j*R-E*M,We=k*P-H*O,At=k*R-E*O,nt=H*R-E*P,yt=$*ae-te*fe,bt=$*ge-ie*fe,_t=$*Be-de*fe,Et=te*ge-ie*ae,Ut=te*Be-de*ae,Wt=ie*Be-de*ge,Pt=ke*Wt-Ye*Ut+Xe*Et+We*_t-At*bt+nt*yt;return Pt?(m[0]=(O*Wt-P*Ut+R*Et)*(Pt=1/Pt),m[1]=(P*_t-M*Wt-R*bt)*Pt,m[2]=(M*Ut-O*_t+R*yt)*Pt,m[3]=(H*Ut-k*Wt-E*Et)*Pt,m[4]=(j*Wt-H*_t+E*bt)*Pt,m[5]=(k*_t-j*Ut-E*yt)*Pt,m[6]=(ae*nt-ge*At+Be*We)*Pt,m[7]=(ge*Xe-fe*nt-Be*Ye)*Pt,m[8]=(fe*At-ae*Xe+Be*ke)*Pt,m):null},Z.projection=function(m,w,j){return m[0]=2/w,m[1]=0,m[2]=0,m[3]=0,m[4]=-2/j,m[5]=0,m[6]=-1,m[7]=1,m[8]=1,m},Z.str=function(m){return"mat3("+m[0]+", "+m[1]+", "+m[2]+", "+m[3]+", "+m[4]+", "+m[5]+", "+m[6]+", "+m[7]+", "+m[8]+")"},Z.frob=function(m){return Math.hypot(m[0],m[1],m[2],m[3],m[4],m[5],m[6],m[7],m[8])},Z.add=function(m,w,j){return m[0]=w[0]+j[0],m[1]=w[1]+j[1],m[2]=w[2]+j[2],m[3]=w[3]+j[3],m[4]=w[4]+j[4],m[5]=w[5]+j[5],m[6]=w[6]+j[6],m[7]=w[7]+j[7],m[8]=w[8]+j[8],m},Z.subtract=_,Z.multiplyScalar=function(m,w,j){return m[0]=w[0]*j,m[1]=w[1]*j,m[2]=w[2]*j,m[3]=w[3]*j,m[4]=w[4]*j,m[5]=w[5]*j,m[6]=w[6]*j,m[7]=w[7]*j,m[8]=w[8]*j,m},Z.multiplyScalarAndAdd=function(m,w,j,k){return m[0]=w[0]+j[0]*k,m[1]=w[1]+j[1]*k,m[2]=w[2]+j[2]*k,m[3]=w[3]+j[3]*k,m[4]=w[4]+j[4]*k,m[5]=w[5]+j[5]*k,m[6]=w[6]+j[6]*k,m[7]=w[7]+j[7]*k,m[8]=w[8]+j[8]*k,m},Z.exactEquals=function(m,w){return m[0]===w[0]&&m[1]===w[1]&&m[2]===w[2]&&m[3]===w[3]&&m[4]===w[4]&&m[5]===w[5]&&m[6]===w[6]&&m[7]===w[7]&&m[8]===w[8]},Z.equals=function(m,w){var j=m[0],k=m[1],H=m[2],E=m[3],M=m[4],O=m[5],P=m[6],R=m[7],$=m[8],te=w[0],ie=w[1],de=w[2],fe=w[3],ae=w[4],ge=w[5],Be=w[6],ke=w[7],Ye=w[8];return Math.abs(j-te)<=o.EPSILON*Math.max(1,Math.abs(j),Math.abs(te))&&Math.abs(k-ie)<=o.EPSILON*Math.max(1,Math.abs(k),Math.abs(ie))&&Math.abs(H-de)<=o.EPSILON*Math.max(1,Math.abs(H),Math.abs(de))&&Math.abs(E-fe)<=o.EPSILON*Math.max(1,Math.abs(E),Math.abs(fe))&&Math.abs(M-ae)<=o.EPSILON*Math.max(1,Math.abs(M),Math.abs(ae))&&Math.abs(O-ge)<=o.EPSILON*Math.max(1,Math.abs(O),Math.abs(ge))&&Math.abs(P-Be)<=o.EPSILON*Math.max(1,Math.abs(P),Math.abs(Be))&&Math.abs(R-ke)<=o.EPSILON*Math.max(1,Math.abs(R),Math.abs(ke))&&Math.abs($-Ye)<=o.EPSILON*Math.max(1,Math.abs($),Math.abs(Ye))},Z.sub=Z.mul=void 0;var o=function(m,w){if(m&&m.__esModule)return m;if(m===null||h(m)!=="object"&&typeof m!="function")return{default:m};var j=u(void 0);if(j&&j.has(m))return j.get(m);var k={},H=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var E in m)if(E!=="default"&&Object.prototype.hasOwnProperty.call(m,E)){var M=H?Object.getOwnPropertyDescriptor(m,E):null;M&&(M.get||M.set)?Object.defineProperty(k,E,M):k[E]=m[E]}return k.default=m,j&&j.set(m,k),k}(T());function u(m){if(typeof WeakMap!="function")return null;var w=new WeakMap,j=new WeakMap;return(u=function(k){return k?j:w})(m)}function p(m,w,j){var k=w[0],H=w[1],E=w[2],M=w[3],O=w[4],P=w[5],R=w[6],$=w[7],te=w[8],ie=j[0],de=j[1],fe=j[2],ae=j[3],ge=j[4],Be=j[5],ke=j[6],Ye=j[7],Xe=j[8];return m[0]=ie*k+de*M+fe*R,m[1]=ie*H+de*O+fe*$,m[2]=ie*E+de*P+fe*te,m[3]=ae*k+ge*M+Be*R,m[4]=ae*H+ge*O+Be*$,m[5]=ae*E+ge*P+Be*te,m[6]=ke*k+Ye*M+Xe*R,m[7]=ke*H+Ye*O+Xe*$,m[8]=ke*E+Ye*P+Xe*te,m}function _(m,w,j){return m[0]=w[0]-j[0],m[1]=w[1]-j[1],m[2]=w[2]-j[2],m[3]=w[3]-j[3],m[4]=w[4]-j[4],m[5]=w[5]-j[5],m[6]=w[6]-j[6],m[7]=w[7]-j[7],m[8]=w[8]-j[8],m}return Z.mul=p,Z.sub=_,Z}var Y,le={};function pe(){if(Y)return le;function h(E){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(M){return typeof M}:function(M){return M&&typeof Symbol=="function"&&M.constructor===Symbol&&M!==Symbol.prototype?"symbol":typeof M},h(E)}Y=1,Object.defineProperty(le,"__esModule",{value:!0}),le.create=function(){var E=new o.ARRAY_TYPE(16);return o.ARRAY_TYPE!=Float32Array&&(E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=0,E[12]=0,E[13]=0,E[14]=0),E[0]=1,E[5]=1,E[10]=1,E[15]=1,E},le.clone=function(E){var M=new o.ARRAY_TYPE(16);return M[0]=E[0],M[1]=E[1],M[2]=E[2],M[3]=E[3],M[4]=E[4],M[5]=E[5],M[6]=E[6],M[7]=E[7],M[8]=E[8],M[9]=E[9],M[10]=E[10],M[11]=E[11],M[12]=E[12],M[13]=E[13],M[14]=E[14],M[15]=E[15],M},le.copy=function(E,M){return E[0]=M[0],E[1]=M[1],E[2]=M[2],E[3]=M[3],E[4]=M[4],E[5]=M[5],E[6]=M[6],E[7]=M[7],E[8]=M[8],E[9]=M[9],E[10]=M[10],E[11]=M[11],E[12]=M[12],E[13]=M[13],E[14]=M[14],E[15]=M[15],E},le.fromValues=function(E,M,O,P,R,$,te,ie,de,fe,ae,ge,Be,ke,Ye,Xe){var We=new o.ARRAY_TYPE(16);return We[0]=E,We[1]=M,We[2]=O,We[3]=P,We[4]=R,We[5]=$,We[6]=te,We[7]=ie,We[8]=de,We[9]=fe,We[10]=ae,We[11]=ge,We[12]=Be,We[13]=ke,We[14]=Ye,We[15]=Xe,We},le.set=function(E,M,O,P,R,$,te,ie,de,fe,ae,ge,Be,ke,Ye,Xe,We){return E[0]=M,E[1]=O,E[2]=P,E[3]=R,E[4]=$,E[5]=te,E[6]=ie,E[7]=de,E[8]=fe,E[9]=ae,E[10]=ge,E[11]=Be,E[12]=ke,E[13]=Ye,E[14]=Xe,E[15]=We,E},le.identity=p,le.transpose=function(E,M){if(E===M){var O=M[1],P=M[2],R=M[3],$=M[6],te=M[7],ie=M[11];E[1]=M[4],E[2]=M[8],E[3]=M[12],E[4]=O,E[6]=M[9],E[7]=M[13],E[8]=P,E[9]=$,E[11]=M[14],E[12]=R,E[13]=te,E[14]=ie}else E[0]=M[0],E[1]=M[4],E[2]=M[8],E[3]=M[12],E[4]=M[1],E[5]=M[5],E[6]=M[9],E[7]=M[13],E[8]=M[2],E[9]=M[6],E[10]=M[10],E[11]=M[14],E[12]=M[3],E[13]=M[7],E[14]=M[11],E[15]=M[15];return E},le.invert=function(E,M){var O=M[0],P=M[1],R=M[2],$=M[3],te=M[4],ie=M[5],de=M[6],fe=M[7],ae=M[8],ge=M[9],Be=M[10],ke=M[11],Ye=M[12],Xe=M[13],We=M[14],At=M[15],nt=O*ie-P*te,yt=O*de-R*te,bt=O*fe-$*te,_t=P*de-R*ie,Et=P*fe-$*ie,Ut=R*fe-$*de,Wt=ae*Xe-ge*Ye,Pt=ae*We-Be*Ye,mn=ae*At-ke*Ye,Nn=ge*We-Be*Xe,vn=ge*At-ke*Xe,qn=Be*At-ke*We,Kn=nt*qn-yt*vn+bt*Nn+_t*mn-Et*Pt+Ut*Wt;return Kn?(E[0]=(ie*qn-de*vn+fe*Nn)*(Kn=1/Kn),E[1]=(R*vn-P*qn-$*Nn)*Kn,E[2]=(Xe*Ut-We*Et+At*_t)*Kn,E[3]=(Be*Et-ge*Ut-ke*_t)*Kn,E[4]=(de*mn-te*qn-fe*Pt)*Kn,E[5]=(O*qn-R*mn+$*Pt)*Kn,E[6]=(We*bt-Ye*Ut-At*yt)*Kn,E[7]=(ae*Ut-Be*bt+ke*yt)*Kn,E[8]=(te*vn-ie*mn+fe*Wt)*Kn,E[9]=(P*mn-O*vn-$*Wt)*Kn,E[10]=(Ye*Et-Xe*bt+At*nt)*Kn,E[11]=(ge*bt-ae*Et-ke*nt)*Kn,E[12]=(ie*Pt-te*Nn-de*Wt)*Kn,E[13]=(O*Nn-P*Pt+R*Wt)*Kn,E[14]=(Xe*yt-Ye*_t-We*nt)*Kn,E[15]=(ae*_t-ge*yt+Be*nt)*Kn,E):null},le.adjoint=function(E,M){var O=M[0],P=M[1],R=M[2],$=M[3],te=M[4],ie=M[5],de=M[6],fe=M[7],ae=M[8],ge=M[9],Be=M[10],ke=M[11],Ye=M[12],Xe=M[13],We=M[14],At=M[15];return E[0]=ie*(Be*At-ke*We)-ge*(de*At-fe*We)+Xe*(de*ke-fe*Be),E[1]=-(P*(Be*At-ke*We)-ge*(R*At-$*We)+Xe*(R*ke-$*Be)),E[2]=P*(de*At-fe*We)-ie*(R*At-$*We)+Xe*(R*fe-$*de),E[3]=-(P*(de*ke-fe*Be)-ie*(R*ke-$*Be)+ge*(R*fe-$*de)),E[4]=-(te*(Be*At-ke*We)-ae*(de*At-fe*We)+Ye*(de*ke-fe*Be)),E[5]=O*(Be*At-ke*We)-ae*(R*At-$*We)+Ye*(R*ke-$*Be),E[6]=-(O*(de*At-fe*We)-te*(R*At-$*We)+Ye*(R*fe-$*de)),E[7]=O*(de*ke-fe*Be)-te*(R*ke-$*Be)+ae*(R*fe-$*de),E[8]=te*(ge*At-ke*Xe)-ae*(ie*At-fe*Xe)+Ye*(ie*ke-fe*ge),E[9]=-(O*(ge*At-ke*Xe)-ae*(P*At-$*Xe)+Ye*(P*ke-$*ge)),E[10]=O*(ie*At-fe*Xe)-te*(P*At-$*Xe)+Ye*(P*fe-$*ie),E[11]=-(O*(ie*ke-fe*ge)-te*(P*ke-$*ge)+ae*(P*fe-$*ie)),E[12]=-(te*(ge*We-Be*Xe)-ae*(ie*We-de*Xe)+Ye*(ie*Be-de*ge)),E[13]=O*(ge*We-Be*Xe)-ae*(P*We-R*Xe)+Ye*(P*Be-R*ge),E[14]=-(O*(ie*We-de*Xe)-te*(P*We-R*Xe)+Ye*(P*de-R*ie)),E[15]=O*(ie*Be-de*ge)-te*(P*Be-R*ge)+ae*(P*de-R*ie),E},le.determinant=function(E){var M=E[0],O=E[1],P=E[2],R=E[3],$=E[4],te=E[5],ie=E[6],de=E[7],fe=E[8],ae=E[9],ge=E[10],Be=E[11],ke=E[12],Ye=E[13],Xe=E[14],We=E[15];return(M*te-O*$)*(ge*We-Be*Xe)-(M*ie-P*$)*(ae*We-Be*Ye)+(M*de-R*$)*(ae*Xe-ge*Ye)+(O*ie-P*te)*(fe*We-Be*ke)-(O*de-R*te)*(fe*Xe-ge*ke)+(P*de-R*ie)*(fe*Ye-ae*ke)},le.multiply=_,le.translate=function(E,M,O){var P,R,$,te,ie,de,fe,ae,ge,Be,ke,Ye,Xe=O[0],We=O[1],At=O[2];return M===E?(E[12]=M[0]*Xe+M[4]*We+M[8]*At+M[12],E[13]=M[1]*Xe+M[5]*We+M[9]*At+M[13],E[14]=M[2]*Xe+M[6]*We+M[10]*At+M[14],E[15]=M[3]*Xe+M[7]*We+M[11]*At+M[15]):(R=M[1],$=M[2],te=M[3],ie=M[4],de=M[5],fe=M[6],ae=M[7],ge=M[8],Be=M[9],ke=M[10],Ye=M[11],E[0]=P=M[0],E[1]=R,E[2]=$,E[3]=te,E[4]=ie,E[5]=de,E[6]=fe,E[7]=ae,E[8]=ge,E[9]=Be,E[10]=ke,E[11]=Ye,E[12]=P*Xe+ie*We+ge*At+M[12],E[13]=R*Xe+de*We+Be*At+M[13],E[14]=$*Xe+fe*We+ke*At+M[14],E[15]=te*Xe+ae*We+Ye*At+M[15]),E},le.scale=function(E,M,O){var P=O[0],R=O[1],$=O[2];return E[0]=M[0]*P,E[1]=M[1]*P,E[2]=M[2]*P,E[3]=M[3]*P,E[4]=M[4]*R,E[5]=M[5]*R,E[6]=M[6]*R,E[7]=M[7]*R,E[8]=M[8]*$,E[9]=M[9]*$,E[10]=M[10]*$,E[11]=M[11]*$,E[12]=M[12],E[13]=M[13],E[14]=M[14],E[15]=M[15],E},le.rotate=function(E,M,O,P){var R,$,te,ie,de,fe,ae,ge,Be,ke,Ye,Xe,We,At,nt,yt,bt,_t,Et,Ut,Wt,Pt,mn,Nn,vn=P[0],qn=P[1],Kn=P[2],ir=Math.hypot(vn,qn,Kn);return ir<o.EPSILON?null:(vn*=ir=1/ir,qn*=ir,Kn*=ir,R=Math.sin(O),$=Math.cos(O),de=M[1],fe=M[2],ae=M[3],Be=M[5],ke=M[6],Ye=M[7],We=M[9],At=M[10],nt=M[11],yt=vn*vn*(te=1-$)+$,Et=vn*qn*te-Kn*R,Ut=qn*qn*te+$,Wt=Kn*qn*te+vn*R,Pt=vn*Kn*te+qn*R,mn=qn*Kn*te-vn*R,Nn=Kn*Kn*te+$,E[0]=(ie=M[0])*yt+(ge=M[4])*(bt=qn*vn*te+Kn*R)+(Xe=M[8])*(_t=Kn*vn*te-qn*R),E[1]=de*yt+Be*bt+We*_t,E[2]=fe*yt+ke*bt+At*_t,E[3]=ae*yt+Ye*bt+nt*_t,E[4]=ie*Et+ge*Ut+Xe*Wt,E[5]=de*Et+Be*Ut+We*Wt,E[6]=fe*Et+ke*Ut+At*Wt,E[7]=ae*Et+Ye*Ut+nt*Wt,E[8]=ie*Pt+ge*mn+Xe*Nn,E[9]=de*Pt+Be*mn+We*Nn,E[10]=fe*Pt+ke*mn+At*Nn,E[11]=ae*Pt+Ye*mn+nt*Nn,M!==E&&(E[12]=M[12],E[13]=M[13],E[14]=M[14],E[15]=M[15]),E)},le.rotateX=function(E,M,O){var P=Math.sin(O),R=Math.cos(O),$=M[4],te=M[5],ie=M[6],de=M[7],fe=M[8],ae=M[9],ge=M[10],Be=M[11];return M!==E&&(E[0]=M[0],E[1]=M[1],E[2]=M[2],E[3]=M[3],E[12]=M[12],E[13]=M[13],E[14]=M[14],E[15]=M[15]),E[4]=$*R+fe*P,E[5]=te*R+ae*P,E[6]=ie*R+ge*P,E[7]=de*R+Be*P,E[8]=fe*R-$*P,E[9]=ae*R-te*P,E[10]=ge*R-ie*P,E[11]=Be*R-de*P,E},le.rotateY=function(E,M,O){var P=Math.sin(O),R=Math.cos(O),$=M[0],te=M[1],ie=M[2],de=M[3],fe=M[8],ae=M[9],ge=M[10],Be=M[11];return M!==E&&(E[4]=M[4],E[5]=M[5],E[6]=M[6],E[7]=M[7],E[12]=M[12],E[13]=M[13],E[14]=M[14],E[15]=M[15]),E[0]=$*R-fe*P,E[1]=te*R-ae*P,E[2]=ie*R-ge*P,E[3]=de*R-Be*P,E[8]=$*P+fe*R,E[9]=te*P+ae*R,E[10]=ie*P+ge*R,E[11]=de*P+Be*R,E},le.rotateZ=function(E,M,O){var P=Math.sin(O),R=Math.cos(O),$=M[0],te=M[1],ie=M[2],de=M[3],fe=M[4],ae=M[5],ge=M[6],Be=M[7];return M!==E&&(E[8]=M[8],E[9]=M[9],E[10]=M[10],E[11]=M[11],E[12]=M[12],E[13]=M[13],E[14]=M[14],E[15]=M[15]),E[0]=$*R+fe*P,E[1]=te*R+ae*P,E[2]=ie*R+ge*P,E[3]=de*R+Be*P,E[4]=fe*R-$*P,E[5]=ae*R-te*P,E[6]=ge*R-ie*P,E[7]=Be*R-de*P,E},le.fromTranslation=function(E,M){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=M[0],E[13]=M[1],E[14]=M[2],E[15]=1,E},le.fromScaling=function(E,M){return E[0]=M[0],E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=M[1],E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=M[2],E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},le.fromRotation=function(E,M,O){var P,R,$,te=O[0],ie=O[1],de=O[2],fe=Math.hypot(te,ie,de);return fe<o.EPSILON?null:(te*=fe=1/fe,ie*=fe,de*=fe,P=Math.sin(M),R=Math.cos(M),E[0]=te*te*($=1-R)+R,E[1]=ie*te*$+de*P,E[2]=de*te*$-ie*P,E[3]=0,E[4]=te*ie*$-de*P,E[5]=ie*ie*$+R,E[6]=de*ie*$+te*P,E[7]=0,E[8]=te*de*$+ie*P,E[9]=ie*de*$-te*P,E[10]=de*de*$+R,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E)},le.fromXRotation=function(E,M){var O=Math.sin(M),P=Math.cos(M);return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=P,E[6]=O,E[7]=0,E[8]=0,E[9]=-O,E[10]=P,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},le.fromYRotation=function(E,M){var O=Math.sin(M),P=Math.cos(M);return E[0]=P,E[1]=0,E[2]=-O,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=O,E[9]=0,E[10]=P,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},le.fromZRotation=function(E,M){var O=Math.sin(M),P=Math.cos(M);return E[0]=P,E[1]=O,E[2]=0,E[3]=0,E[4]=-O,E[5]=P,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},le.fromRotationTranslation=m,le.fromQuat2=function(E,M){var O=new o.ARRAY_TYPE(3),P=-M[0],R=-M[1],$=-M[2],te=M[3],ie=M[4],de=M[5],fe=M[6],ae=M[7],ge=P*P+R*R+$*$+te*te;return ge>0?(O[0]=2*(ie*te+ae*P+de*$-fe*R)/ge,O[1]=2*(de*te+ae*R+fe*P-ie*$)/ge,O[2]=2*(fe*te+ae*$+ie*R-de*P)/ge):(O[0]=2*(ie*te+ae*P+de*$-fe*R),O[1]=2*(de*te+ae*R+fe*P-ie*$),O[2]=2*(fe*te+ae*$+ie*R-de*P)),m(E,M,O),E},le.getTranslation=function(E,M){return E[0]=M[12],E[1]=M[13],E[2]=M[14],E},le.getScaling=w,le.getRotation=function(E,M){var O=new o.ARRAY_TYPE(3);w(O,M);var P=1/O[0],R=1/O[1],$=1/O[2],te=M[0]*P,ie=M[1]*R,de=M[2]*$,fe=M[4]*P,ae=M[5]*R,ge=M[6]*$,Be=M[8]*P,ke=M[9]*R,Ye=M[10]*$,Xe=te+ae+Ye,We=0;return Xe>0?(We=2*Math.sqrt(Xe+1),E[3]=.25*We,E[0]=(ge-ke)/We,E[1]=(Be-de)/We,E[2]=(ie-fe)/We):te>ae&&te>Ye?(We=2*Math.sqrt(1+te-ae-Ye),E[3]=(ge-ke)/We,E[0]=.25*We,E[1]=(ie+fe)/We,E[2]=(Be+de)/We):ae>Ye?(We=2*Math.sqrt(1+ae-te-Ye),E[3]=(Be-de)/We,E[0]=(ie+fe)/We,E[1]=.25*We,E[2]=(ge+ke)/We):(We=2*Math.sqrt(1+Ye-te-ae),E[3]=(ie-fe)/We,E[0]=(Be+de)/We,E[1]=(ge+ke)/We,E[2]=.25*We),E},le.fromRotationTranslationScale=function(E,M,O,P){var R=M[0],$=M[1],te=M[2],ie=M[3],de=R+R,fe=$+$,ae=te+te,ge=R*de,Be=R*fe,ke=R*ae,Ye=$*fe,Xe=$*ae,We=te*ae,At=ie*de,nt=ie*fe,yt=ie*ae,bt=P[0],_t=P[1],Et=P[2];return E[0]=(1-(Ye+We))*bt,E[1]=(Be+yt)*bt,E[2]=(ke-nt)*bt,E[3]=0,E[4]=(Be-yt)*_t,E[5]=(1-(ge+We))*_t,E[6]=(Xe+At)*_t,E[7]=0,E[8]=(ke+nt)*Et,E[9]=(Xe-At)*Et,E[10]=(1-(ge+Ye))*Et,E[11]=0,E[12]=O[0],E[13]=O[1],E[14]=O[2],E[15]=1,E},le.fromRotationTranslationScaleOrigin=function(E,M,O,P,R){var $=M[0],te=M[1],ie=M[2],de=M[3],fe=$+$,ae=te+te,ge=ie+ie,Be=$*fe,ke=$*ae,Ye=$*ge,Xe=te*ae,We=te*ge,At=ie*ge,nt=de*fe,yt=de*ae,bt=de*ge,_t=P[0],Et=P[1],Ut=P[2],Wt=R[0],Pt=R[1],mn=R[2],Nn=(1-(Xe+At))*_t,vn=(ke+bt)*_t,qn=(Ye-yt)*_t,Kn=(ke-bt)*Et,ir=(1-(Be+At))*Et,Bn=(We+nt)*Et,Br=(Ye+yt)*Ut,Zn=(We-nt)*Ut,vr=(1-(Be+Xe))*Ut;return E[0]=Nn,E[1]=vn,E[2]=qn,E[3]=0,E[4]=Kn,E[5]=ir,E[6]=Bn,E[7]=0,E[8]=Br,E[9]=Zn,E[10]=vr,E[11]=0,E[12]=O[0]+Wt-(Nn*Wt+Kn*Pt+Br*mn),E[13]=O[1]+Pt-(vn*Wt+ir*Pt+Zn*mn),E[14]=O[2]+mn-(qn*Wt+Bn*Pt+vr*mn),E[15]=1,E},le.fromQuat=function(E,M){var O=M[0],P=M[1],R=M[2],$=M[3],te=O+O,ie=P+P,de=R+R,fe=O*te,ae=P*te,ge=P*ie,Be=R*te,ke=R*ie,Ye=R*de,Xe=$*te,We=$*ie,At=$*de;return E[0]=1-ge-Ye,E[1]=ae+At,E[2]=Be-We,E[3]=0,E[4]=ae-At,E[5]=1-fe-Ye,E[6]=ke+Xe,E[7]=0,E[8]=Be+We,E[9]=ke-Xe,E[10]=1-fe-ge,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E},le.frustum=function(E,M,O,P,R,$,te){var ie=1/(O-M),de=1/(R-P),fe=1/($-te);return E[0]=2*$*ie,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=2*$*de,E[6]=0,E[7]=0,E[8]=(O+M)*ie,E[9]=(R+P)*de,E[10]=(te+$)*fe,E[11]=-1,E[12]=0,E[13]=0,E[14]=te*$*2*fe,E[15]=0,E},le.perspectiveNO=j,le.perspectiveZO=function(E,M,O,P,R){var $,te=1/Math.tan(M/2);return E[0]=te/O,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=te,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,R!=null&&R!==1/0?(E[10]=R*($=1/(P-R)),E[14]=R*P*$):(E[10]=-1,E[14]=-P),E},le.perspectiveFromFieldOfView=function(E,M,O,P){var R=Math.tan(M.upDegrees*Math.PI/180),$=Math.tan(M.downDegrees*Math.PI/180),te=Math.tan(M.leftDegrees*Math.PI/180),ie=Math.tan(M.rightDegrees*Math.PI/180),de=2/(te+ie),fe=2/(R+$);return E[0]=de,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=fe,E[6]=0,E[7]=0,E[8]=-(te-ie)*de*.5,E[9]=(R-$)*fe*.5,E[10]=P/(O-P),E[11]=-1,E[12]=0,E[13]=0,E[14]=P*O/(O-P),E[15]=0,E},le.orthoNO=k,le.orthoZO=function(E,M,O,P,R,$,te){var ie=1/(M-O),de=1/(P-R),fe=1/($-te);return E[0]=-2*ie,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*de,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=fe,E[11]=0,E[12]=(M+O)*ie,E[13]=(R+P)*de,E[14]=$*fe,E[15]=1,E},le.lookAt=function(E,M,O,P){var R,$,te,ie,de,fe,ae,ge,Be,ke,Ye=M[0],Xe=M[1],We=M[2],At=P[0],nt=P[1],yt=P[2],bt=O[0],_t=O[1],Et=O[2];return Math.abs(Ye-bt)<o.EPSILON&&Math.abs(Xe-_t)<o.EPSILON&&Math.abs(We-Et)<o.EPSILON?p(E):(ae=Ye-bt,ge=Xe-_t,Be=We-Et,R=nt*(Be*=ke=1/Math.hypot(ae,ge,Be))-yt*(ge*=ke),$=yt*(ae*=ke)-At*Be,te=At*ge-nt*ae,(ke=Math.hypot(R,$,te))?(R*=ke=1/ke,$*=ke,te*=ke):(R=0,$=0,te=0),ie=ge*te-Be*$,de=Be*R-ae*te,fe=ae*$-ge*R,(ke=Math.hypot(ie,de,fe))?(ie*=ke=1/ke,de*=ke,fe*=ke):(ie=0,de=0,fe=0),E[0]=R,E[1]=ie,E[2]=ae,E[3]=0,E[4]=$,E[5]=de,E[6]=ge,E[7]=0,E[8]=te,E[9]=fe,E[10]=Be,E[11]=0,E[12]=-(R*Ye+$*Xe+te*We),E[13]=-(ie*Ye+de*Xe+fe*We),E[14]=-(ae*Ye+ge*Xe+Be*We),E[15]=1,E)},le.targetTo=function(E,M,O,P){var R=M[0],$=M[1],te=M[2],ie=P[0],de=P[1],fe=P[2],ae=R-O[0],ge=$-O[1],Be=te-O[2],ke=ae*ae+ge*ge+Be*Be;ke>0&&(ae*=ke=1/Math.sqrt(ke),ge*=ke,Be*=ke);var Ye=de*Be-fe*ge,Xe=fe*ae-ie*Be,We=ie*ge-de*ae;return(ke=Ye*Ye+Xe*Xe+We*We)>0&&(Ye*=ke=1/Math.sqrt(ke),Xe*=ke,We*=ke),E[0]=Ye,E[1]=Xe,E[2]=We,E[3]=0,E[4]=ge*We-Be*Xe,E[5]=Be*Ye-ae*We,E[6]=ae*Xe-ge*Ye,E[7]=0,E[8]=ae,E[9]=ge,E[10]=Be,E[11]=0,E[12]=R,E[13]=$,E[14]=te,E[15]=1,E},le.str=function(E){return"mat4("+E[0]+", "+E[1]+", "+E[2]+", "+E[3]+", "+E[4]+", "+E[5]+", "+E[6]+", "+E[7]+", "+E[8]+", "+E[9]+", "+E[10]+", "+E[11]+", "+E[12]+", "+E[13]+", "+E[14]+", "+E[15]+")"},le.frob=function(E){return Math.hypot(E[0],E[1],E[2],E[3],E[4],E[5],E[6],E[7],E[8],E[9],E[10],E[11],E[12],E[13],E[14],E[15])},le.add=function(E,M,O){return E[0]=M[0]+O[0],E[1]=M[1]+O[1],E[2]=M[2]+O[2],E[3]=M[3]+O[3],E[4]=M[4]+O[4],E[5]=M[5]+O[5],E[6]=M[6]+O[6],E[7]=M[7]+O[7],E[8]=M[8]+O[8],E[9]=M[9]+O[9],E[10]=M[10]+O[10],E[11]=M[11]+O[11],E[12]=M[12]+O[12],E[13]=M[13]+O[13],E[14]=M[14]+O[14],E[15]=M[15]+O[15],E},le.subtract=H,le.multiplyScalar=function(E,M,O){return E[0]=M[0]*O,E[1]=M[1]*O,E[2]=M[2]*O,E[3]=M[3]*O,E[4]=M[4]*O,E[5]=M[5]*O,E[6]=M[6]*O,E[7]=M[7]*O,E[8]=M[8]*O,E[9]=M[9]*O,E[10]=M[10]*O,E[11]=M[11]*O,E[12]=M[12]*O,E[13]=M[13]*O,E[14]=M[14]*O,E[15]=M[15]*O,E},le.multiplyScalarAndAdd=function(E,M,O,P){return E[0]=M[0]+O[0]*P,E[1]=M[1]+O[1]*P,E[2]=M[2]+O[2]*P,E[3]=M[3]+O[3]*P,E[4]=M[4]+O[4]*P,E[5]=M[5]+O[5]*P,E[6]=M[6]+O[6]*P,E[7]=M[7]+O[7]*P,E[8]=M[8]+O[8]*P,E[9]=M[9]+O[9]*P,E[10]=M[10]+O[10]*P,E[11]=M[11]+O[11]*P,E[12]=M[12]+O[12]*P,E[13]=M[13]+O[13]*P,E[14]=M[14]+O[14]*P,E[15]=M[15]+O[15]*P,E},le.exactEquals=function(E,M){return E[0]===M[0]&&E[1]===M[1]&&E[2]===M[2]&&E[3]===M[3]&&E[4]===M[4]&&E[5]===M[5]&&E[6]===M[6]&&E[7]===M[7]&&E[8]===M[8]&&E[9]===M[9]&&E[10]===M[10]&&E[11]===M[11]&&E[12]===M[12]&&E[13]===M[13]&&E[14]===M[14]&&E[15]===M[15]},le.equals=function(E,M){var O=E[0],P=E[1],R=E[2],$=E[3],te=E[4],ie=E[5],de=E[6],fe=E[7],ae=E[8],ge=E[9],Be=E[10],ke=E[11],Ye=E[12],Xe=E[13],We=E[14],At=E[15],nt=M[0],yt=M[1],bt=M[2],_t=M[3],Et=M[4],Ut=M[5],Wt=M[6],Pt=M[7],mn=M[8],Nn=M[9],vn=M[10],qn=M[11],Kn=M[12],ir=M[13],Bn=M[14],Br=M[15];return Math.abs(O-nt)<=o.EPSILON*Math.max(1,Math.abs(O),Math.abs(nt))&&Math.abs(P-yt)<=o.EPSILON*Math.max(1,Math.abs(P),Math.abs(yt))&&Math.abs(R-bt)<=o.EPSILON*Math.max(1,Math.abs(R),Math.abs(bt))&&Math.abs($-_t)<=o.EPSILON*Math.max(1,Math.abs($),Math.abs(_t))&&Math.abs(te-Et)<=o.EPSILON*Math.max(1,Math.abs(te),Math.abs(Et))&&Math.abs(ie-Ut)<=o.EPSILON*Math.max(1,Math.abs(ie),Math.abs(Ut))&&Math.abs(de-Wt)<=o.EPSILON*Math.max(1,Math.abs(de),Math.abs(Wt))&&Math.abs(fe-Pt)<=o.EPSILON*Math.max(1,Math.abs(fe),Math.abs(Pt))&&Math.abs(ae-mn)<=o.EPSILON*Math.max(1,Math.abs(ae),Math.abs(mn))&&Math.abs(ge-Nn)<=o.EPSILON*Math.max(1,Math.abs(ge),Math.abs(Nn))&&Math.abs(Be-vn)<=o.EPSILON*Math.max(1,Math.abs(Be),Math.abs(vn))&&Math.abs(ke-qn)<=o.EPSILON*Math.max(1,Math.abs(ke),Math.abs(qn))&&Math.abs(Ye-Kn)<=o.EPSILON*Math.max(1,Math.abs(Ye),Math.abs(Kn))&&Math.abs(Xe-ir)<=o.EPSILON*Math.max(1,Math.abs(Xe),Math.abs(ir))&&Math.abs(We-Bn)<=o.EPSILON*Math.max(1,Math.abs(We),Math.abs(Bn))&&Math.abs(At-Br)<=o.EPSILON*Math.max(1,Math.abs(At),Math.abs(Br))},le.sub=le.mul=le.ortho=le.perspective=void 0;var o=function(E,M){if(E&&E.__esModule)return E;if(E===null||h(E)!=="object"&&typeof E!="function")return{default:E};var O=u(void 0);if(O&&O.has(E))return O.get(E);var P={},R=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var $ in E)if($!=="default"&&Object.prototype.hasOwnProperty.call(E,$)){var te=R?Object.getOwnPropertyDescriptor(E,$):null;te&&(te.get||te.set)?Object.defineProperty(P,$,te):P[$]=E[$]}return P.default=E,O&&O.set(E,P),P}(T());function u(E){if(typeof WeakMap!="function")return null;var M=new WeakMap,O=new WeakMap;return(u=function(P){return P?O:M})(E)}function p(E){return E[0]=1,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=1,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=1,E[11]=0,E[12]=0,E[13]=0,E[14]=0,E[15]=1,E}function _(E,M,O){var P=M[0],R=M[1],$=M[2],te=M[3],ie=M[4],de=M[5],fe=M[6],ae=M[7],ge=M[8],Be=M[9],ke=M[10],Ye=M[11],Xe=M[12],We=M[13],At=M[14],nt=M[15],yt=O[0],bt=O[1],_t=O[2],Et=O[3];return E[0]=yt*P+bt*ie+_t*ge+Et*Xe,E[1]=yt*R+bt*de+_t*Be+Et*We,E[2]=yt*$+bt*fe+_t*ke+Et*At,E[3]=yt*te+bt*ae+_t*Ye+Et*nt,E[4]=(yt=O[4])*P+(bt=O[5])*ie+(_t=O[6])*ge+(Et=O[7])*Xe,E[5]=yt*R+bt*de+_t*Be+Et*We,E[6]=yt*$+bt*fe+_t*ke+Et*At,E[7]=yt*te+bt*ae+_t*Ye+Et*nt,E[8]=(yt=O[8])*P+(bt=O[9])*ie+(_t=O[10])*ge+(Et=O[11])*Xe,E[9]=yt*R+bt*de+_t*Be+Et*We,E[10]=yt*$+bt*fe+_t*ke+Et*At,E[11]=yt*te+bt*ae+_t*Ye+Et*nt,E[12]=(yt=O[12])*P+(bt=O[13])*ie+(_t=O[14])*ge+(Et=O[15])*Xe,E[13]=yt*R+bt*de+_t*Be+Et*We,E[14]=yt*$+bt*fe+_t*ke+Et*At,E[15]=yt*te+bt*ae+_t*Ye+Et*nt,E}function m(E,M,O){var P=M[0],R=M[1],$=M[2],te=M[3],ie=P+P,de=R+R,fe=$+$,ae=P*ie,ge=P*de,Be=P*fe,ke=R*de,Ye=R*fe,Xe=$*fe,We=te*ie,At=te*de,nt=te*fe;return E[0]=1-(ke+Xe),E[1]=ge+nt,E[2]=Be-At,E[3]=0,E[4]=ge-nt,E[5]=1-(ae+Xe),E[6]=Ye+We,E[7]=0,E[8]=Be+At,E[9]=Ye-We,E[10]=1-(ae+ke),E[11]=0,E[12]=O[0],E[13]=O[1],E[14]=O[2],E[15]=1,E}function w(E,M){var O=M[4],P=M[5],R=M[6],$=M[8],te=M[9],ie=M[10];return E[0]=Math.hypot(M[0],M[1],M[2]),E[1]=Math.hypot(O,P,R),E[2]=Math.hypot($,te,ie),E}function j(E,M,O,P,R){var $,te=1/Math.tan(M/2);return E[0]=te/O,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=te,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[11]=-1,E[12]=0,E[13]=0,E[15]=0,R!=null&&R!==1/0?(E[10]=(R+P)*($=1/(P-R)),E[14]=2*R*P*$):(E[10]=-1,E[14]=-2*P),E}function k(E,M,O,P,R,$,te){var ie=1/(M-O),de=1/(P-R),fe=1/($-te);return E[0]=-2*ie,E[1]=0,E[2]=0,E[3]=0,E[4]=0,E[5]=-2*de,E[6]=0,E[7]=0,E[8]=0,E[9]=0,E[10]=2*fe,E[11]=0,E[12]=(M+O)*ie,E[13]=(R+P)*de,E[14]=(te+$)*fe,E[15]=1,E}function H(E,M,O){return E[0]=M[0]-O[0],E[1]=M[1]-O[1],E[2]=M[2]-O[2],E[3]=M[3]-O[3],E[4]=M[4]-O[4],E[5]=M[5]-O[5],E[6]=M[6]-O[6],E[7]=M[7]-O[7],E[8]=M[8]-O[8],E[9]=M[9]-O[9],E[10]=M[10]-O[10],E[11]=M[11]-O[11],E[12]=M[12]-O[12],E[13]=M[13]-O[13],E[14]=M[14]-O[14],E[15]=M[15]-O[15],E}return le.perspective=j,le.ortho=k,le.mul=_,le.sub=H,le}var _e,ye={},he={};function be(){if(_e)return he;function h(R){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function($){return typeof $}:function($){return $&&typeof Symbol=="function"&&$.constructor===Symbol&&$!==Symbol.prototype?"symbol":typeof $},h(R)}_e=1,Object.defineProperty(he,"__esModule",{value:!0}),he.create=p,he.clone=function(R){var $=new o.ARRAY_TYPE(3);return $[0]=R[0],$[1]=R[1],$[2]=R[2],$},he.length=_,he.fromValues=function(R,$,te){var ie=new o.ARRAY_TYPE(3);return ie[0]=R,ie[1]=$,ie[2]=te,ie},he.copy=function(R,$){return R[0]=$[0],R[1]=$[1],R[2]=$[2],R},he.set=function(R,$,te,ie){return R[0]=$,R[1]=te,R[2]=ie,R},he.add=function(R,$,te){return R[0]=$[0]+te[0],R[1]=$[1]+te[1],R[2]=$[2]+te[2],R},he.subtract=m,he.multiply=w,he.divide=j,he.ceil=function(R,$){return R[0]=Math.ceil($[0]),R[1]=Math.ceil($[1]),R[2]=Math.ceil($[2]),R},he.floor=function(R,$){return R[0]=Math.floor($[0]),R[1]=Math.floor($[1]),R[2]=Math.floor($[2]),R},he.min=function(R,$,te){return R[0]=Math.min($[0],te[0]),R[1]=Math.min($[1],te[1]),R[2]=Math.min($[2],te[2]),R},he.max=function(R,$,te){return R[0]=Math.max($[0],te[0]),R[1]=Math.max($[1],te[1]),R[2]=Math.max($[2],te[2]),R},he.round=function(R,$){return R[0]=Math.round($[0]),R[1]=Math.round($[1]),R[2]=Math.round($[2]),R},he.scale=function(R,$,te){return R[0]=$[0]*te,R[1]=$[1]*te,R[2]=$[2]*te,R},he.scaleAndAdd=function(R,$,te,ie){return R[0]=$[0]+te[0]*ie,R[1]=$[1]+te[1]*ie,R[2]=$[2]+te[2]*ie,R},he.distance=k,he.squaredDistance=H,he.squaredLength=E,he.negate=function(R,$){return R[0]=-$[0],R[1]=-$[1],R[2]=-$[2],R},he.inverse=function(R,$){return R[0]=1/$[0],R[1]=1/$[1],R[2]=1/$[2],R},he.normalize=function(R,$){var te=$[0],ie=$[1],de=$[2],fe=te*te+ie*ie+de*de;return fe>0&&(fe=1/Math.sqrt(fe)),R[0]=$[0]*fe,R[1]=$[1]*fe,R[2]=$[2]*fe,R},he.dot=M,he.cross=function(R,$,te){var ie=$[0],de=$[1],fe=$[2],ae=te[0],ge=te[1],Be=te[2];return R[0]=de*Be-fe*ge,R[1]=fe*ae-ie*Be,R[2]=ie*ge-de*ae,R},he.lerp=function(R,$,te,ie){var de=$[0],fe=$[1],ae=$[2];return R[0]=de+ie*(te[0]-de),R[1]=fe+ie*(te[1]-fe),R[2]=ae+ie*(te[2]-ae),R},he.hermite=function(R,$,te,ie,de,fe){var ae=fe*fe,ge=ae*(2*fe-3)+1,Be=ae*(fe-2)+fe,ke=ae*(fe-1),Ye=ae*(3-2*fe);return R[0]=$[0]*ge+te[0]*Be+ie[0]*ke+de[0]*Ye,R[1]=$[1]*ge+te[1]*Be+ie[1]*ke+de[1]*Ye,R[2]=$[2]*ge+te[2]*Be+ie[2]*ke+de[2]*Ye,R},he.bezier=function(R,$,te,ie,de,fe){var ae=1-fe,ge=ae*ae,Be=fe*fe,ke=ge*ae,Ye=3*fe*ge,Xe=3*Be*ae,We=Be*fe;return R[0]=$[0]*ke+te[0]*Ye+ie[0]*Xe+de[0]*We,R[1]=$[1]*ke+te[1]*Ye+ie[1]*Xe+de[1]*We,R[2]=$[2]*ke+te[2]*Ye+ie[2]*Xe+de[2]*We,R},he.random=function(R,$){$=$||1;var te=2*o.RANDOM()*Math.PI,ie=2*o.RANDOM()-1,de=Math.sqrt(1-ie*ie)*$;return R[0]=Math.cos(te)*de,R[1]=Math.sin(te)*de,R[2]=ie*$,R},he.transformMat4=function(R,$,te){var ie=$[0],de=$[1],fe=$[2],ae=te[3]*ie+te[7]*de+te[11]*fe+te[15];return R[0]=(te[0]*ie+te[4]*de+te[8]*fe+te[12])/(ae=ae||1),R[1]=(te[1]*ie+te[5]*de+te[9]*fe+te[13])/ae,R[2]=(te[2]*ie+te[6]*de+te[10]*fe+te[14])/ae,R},he.transformMat3=function(R,$,te){var ie=$[0],de=$[1],fe=$[2];return R[0]=ie*te[0]+de*te[3]+fe*te[6],R[1]=ie*te[1]+de*te[4]+fe*te[7],R[2]=ie*te[2]+de*te[5]+fe*te[8],R},he.transformQuat=function(R,$,te){var ie=te[0],de=te[1],fe=te[2],ae=$[0],ge=$[1],Be=$[2],ke=de*Be-fe*ge,Ye=fe*ae-ie*Be,Xe=ie*ge-de*ae,We=de*Xe-fe*Ye,At=fe*ke-ie*Xe,nt=ie*Ye-de*ke,yt=2*te[3];return Ye*=yt,Xe*=yt,At*=2,nt*=2,R[0]=ae+(ke*=yt)+(We*=2),R[1]=ge+Ye+At,R[2]=Be+Xe+nt,R},he.rotateX=function(R,$,te,ie){var de=[],fe=[];return de[0]=$[0]-te[0],de[1]=$[1]-te[1],de[2]=$[2]-te[2],fe[0]=de[0],fe[1]=de[1]*Math.cos(ie)-de[2]*Math.sin(ie),fe[2]=de[1]*Math.sin(ie)+de[2]*Math.cos(ie),R[0]=fe[0]+te[0],R[1]=fe[1]+te[1],R[2]=fe[2]+te[2],R},he.rotateY=function(R,$,te,ie){var de=[],fe=[];return de[0]=$[0]-te[0],de[1]=$[1]-te[1],de[2]=$[2]-te[2],fe[0]=de[2]*Math.sin(ie)+de[0]*Math.cos(ie),fe[1]=de[1],fe[2]=de[2]*Math.cos(ie)-de[0]*Math.sin(ie),R[0]=fe[0]+te[0],R[1]=fe[1]+te[1],R[2]=fe[2]+te[2],R},he.rotateZ=function(R,$,te,ie){var de=[],fe=[];return de[0]=$[0]-te[0],de[1]=$[1]-te[1],de[2]=$[2]-te[2],fe[0]=de[0]*Math.cos(ie)-de[1]*Math.sin(ie),fe[1]=de[0]*Math.sin(ie)+de[1]*Math.cos(ie),fe[2]=de[2],R[0]=fe[0]+te[0],R[1]=fe[1]+te[1],R[2]=fe[2]+te[2],R},he.angle=function(R,$){var te=R[0],ie=R[1],de=R[2],fe=$[0],ae=$[1],ge=$[2],Be=Math.sqrt(te*te+ie*ie+de*de)*Math.sqrt(fe*fe+ae*ae+ge*ge),ke=Be&&M(R,$)/Be;return Math.acos(Math.min(Math.max(ke,-1),1))},he.zero=function(R){return R[0]=0,R[1]=0,R[2]=0,R},he.str=function(R){return"vec3("+R[0]+", "+R[1]+", "+R[2]+")"},he.exactEquals=function(R,$){return R[0]===$[0]&&R[1]===$[1]&&R[2]===$[2]},he.equals=function(R,$){var te=R[0],ie=R[1],de=R[2],fe=$[0],ae=$[1],ge=$[2];return Math.abs(te-fe)<=o.EPSILON*Math.max(1,Math.abs(te),Math.abs(fe))&&Math.abs(ie-ae)<=o.EPSILON*Math.max(1,Math.abs(ie),Math.abs(ae))&&Math.abs(de-ge)<=o.EPSILON*Math.max(1,Math.abs(de),Math.abs(ge))},he.forEach=he.sqrLen=he.len=he.sqrDist=he.dist=he.div=he.mul=he.sub=void 0;var o=function(R,$){if(R&&R.__esModule)return R;if(R===null||h(R)!=="object"&&typeof R!="function")return{default:R};var te=u(void 0);if(te&&te.has(R))return te.get(R);var ie={},de=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var fe in R)if(fe!=="default"&&Object.prototype.hasOwnProperty.call(R,fe)){var ae=de?Object.getOwnPropertyDescriptor(R,fe):null;ae&&(ae.get||ae.set)?Object.defineProperty(ie,fe,ae):ie[fe]=R[fe]}return ie.default=R,te&&te.set(R,ie),ie}(T());function u(R){if(typeof WeakMap!="function")return null;var $=new WeakMap,te=new WeakMap;return(u=function(ie){return ie?te:$})(R)}function p(){var R=new o.ARRAY_TYPE(3);return o.ARRAY_TYPE!=Float32Array&&(R[0]=0,R[1]=0,R[2]=0),R}function _(R){return Math.hypot(R[0],R[1],R[2])}function m(R,$,te){return R[0]=$[0]-te[0],R[1]=$[1]-te[1],R[2]=$[2]-te[2],R}function w(R,$,te){return R[0]=$[0]*te[0],R[1]=$[1]*te[1],R[2]=$[2]*te[2],R}function j(R,$,te){return R[0]=$[0]/te[0],R[1]=$[1]/te[1],R[2]=$[2]/te[2],R}function k(R,$){return Math.hypot($[0]-R[0],$[1]-R[1],$[2]-R[2])}function H(R,$){var te=$[0]-R[0],ie=$[1]-R[1],de=$[2]-R[2];return te*te+ie*ie+de*de}function E(R){var $=R[0],te=R[1],ie=R[2];return $*$+te*te+ie*ie}function M(R,$){return R[0]*$[0]+R[1]*$[1]+R[2]*$[2]}he.sub=m,he.mul=w,he.div=j,he.dist=k,he.sqrDist=H,he.len=_,he.sqrLen=E;var O,P=(O=p(),function(R,$,te,ie,de,fe){var ae,ge;for($||($=3),te||(te=0),ge=ie?Math.min(ie*$+te,R.length):R.length,ae=te;ae<ge;ae+=$)O[0]=R[ae],O[1]=R[ae+1],O[2]=R[ae+2],de(O,O,fe),R[ae]=O[0],R[ae+1]=O[1],R[ae+2]=O[2];return R});return he.forEach=P,he}var Te,Ee,Ne={};function Ge(){if(Te)return Ne;function h(P){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},h(P)}Te=1,Object.defineProperty(Ne,"__esModule",{value:!0}),Ne.create=p,Ne.clone=function(P){var R=new o.ARRAY_TYPE(4);return R[0]=P[0],R[1]=P[1],R[2]=P[2],R[3]=P[3],R},Ne.fromValues=function(P,R,$,te){var ie=new o.ARRAY_TYPE(4);return ie[0]=P,ie[1]=R,ie[2]=$,ie[3]=te,ie},Ne.copy=function(P,R){return P[0]=R[0],P[1]=R[1],P[2]=R[2],P[3]=R[3],P},Ne.set=function(P,R,$,te,ie){return P[0]=R,P[1]=$,P[2]=te,P[3]=ie,P},Ne.add=function(P,R,$){return P[0]=R[0]+$[0],P[1]=R[1]+$[1],P[2]=R[2]+$[2],P[3]=R[3]+$[3],P},Ne.subtract=_,Ne.multiply=m,Ne.divide=w,Ne.ceil=function(P,R){return P[0]=Math.ceil(R[0]),P[1]=Math.ceil(R[1]),P[2]=Math.ceil(R[2]),P[3]=Math.ceil(R[3]),P},Ne.floor=function(P,R){return P[0]=Math.floor(R[0]),P[1]=Math.floor(R[1]),P[2]=Math.floor(R[2]),P[3]=Math.floor(R[3]),P},Ne.min=function(P,R,$){return P[0]=Math.min(R[0],$[0]),P[1]=Math.min(R[1],$[1]),P[2]=Math.min(R[2],$[2]),P[3]=Math.min(R[3],$[3]),P},Ne.max=function(P,R,$){return P[0]=Math.max(R[0],$[0]),P[1]=Math.max(R[1],$[1]),P[2]=Math.max(R[2],$[2]),P[3]=Math.max(R[3],$[3]),P},Ne.round=function(P,R){return P[0]=Math.round(R[0]),P[1]=Math.round(R[1]),P[2]=Math.round(R[2]),P[3]=Math.round(R[3]),P},Ne.scale=function(P,R,$){return P[0]=R[0]*$,P[1]=R[1]*$,P[2]=R[2]*$,P[3]=R[3]*$,P},Ne.scaleAndAdd=function(P,R,$,te){return P[0]=R[0]+$[0]*te,P[1]=R[1]+$[1]*te,P[2]=R[2]+$[2]*te,P[3]=R[3]+$[3]*te,P},Ne.distance=j,Ne.squaredDistance=k,Ne.length=H,Ne.squaredLength=E,Ne.negate=function(P,R){return P[0]=-R[0],P[1]=-R[1],P[2]=-R[2],P[3]=-R[3],P},Ne.inverse=function(P,R){return P[0]=1/R[0],P[1]=1/R[1],P[2]=1/R[2],P[3]=1/R[3],P},Ne.normalize=function(P,R){var $=R[0],te=R[1],ie=R[2],de=R[3],fe=$*$+te*te+ie*ie+de*de;return fe>0&&(fe=1/Math.sqrt(fe)),P[0]=$*fe,P[1]=te*fe,P[2]=ie*fe,P[3]=de*fe,P},Ne.dot=function(P,R){return P[0]*R[0]+P[1]*R[1]+P[2]*R[2]+P[3]*R[3]},Ne.cross=function(P,R,$,te){var ie=$[0]*te[1]-$[1]*te[0],de=$[0]*te[2]-$[2]*te[0],fe=$[0]*te[3]-$[3]*te[0],ae=$[1]*te[2]-$[2]*te[1],ge=$[1]*te[3]-$[3]*te[1],Be=$[2]*te[3]-$[3]*te[2],ke=R[0],Ye=R[1],Xe=R[2],We=R[3];return P[0]=Ye*Be-Xe*ge+We*ae,P[1]=-ke*Be+Xe*fe-We*de,P[2]=ke*ge-Ye*fe+We*ie,P[3]=-ke*ae+Ye*de-Xe*ie,P},Ne.lerp=function(P,R,$,te){var ie=R[0],de=R[1],fe=R[2],ae=R[3];return P[0]=ie+te*($[0]-ie),P[1]=de+te*($[1]-de),P[2]=fe+te*($[2]-fe),P[3]=ae+te*($[3]-ae),P},Ne.random=function(P,R){var $,te,ie,de,fe,ae;R=R||1;do fe=($=2*o.RANDOM()-1)*$+(te=2*o.RANDOM()-1)*te;while(fe>=1);do ae=(ie=2*o.RANDOM()-1)*ie+(de=2*o.RANDOM()-1)*de;while(ae>=1);var ge=Math.sqrt((1-fe)/ae);return P[0]=R*$,P[1]=R*te,P[2]=R*ie*ge,P[3]=R*de*ge,P},Ne.transformMat4=function(P,R,$){var te=R[0],ie=R[1],de=R[2],fe=R[3];return P[0]=$[0]*te+$[4]*ie+$[8]*de+$[12]*fe,P[1]=$[1]*te+$[5]*ie+$[9]*de+$[13]*fe,P[2]=$[2]*te+$[6]*ie+$[10]*de+$[14]*fe,P[3]=$[3]*te+$[7]*ie+$[11]*de+$[15]*fe,P},Ne.transformQuat=function(P,R,$){var te=R[0],ie=R[1],de=R[2],fe=$[0],ae=$[1],ge=$[2],Be=$[3],ke=Be*te+ae*de-ge*ie,Ye=Be*ie+ge*te-fe*de,Xe=Be*de+fe*ie-ae*te,We=-fe*te-ae*ie-ge*de;return P[0]=ke*Be+We*-fe+Ye*-ge-Xe*-ae,P[1]=Ye*Be+We*-ae+Xe*-fe-ke*-ge,P[2]=Xe*Be+We*-ge+ke*-ae-Ye*-fe,P[3]=R[3],P},Ne.zero=function(P){return P[0]=0,P[1]=0,P[2]=0,P[3]=0,P},Ne.str=function(P){return"vec4("+P[0]+", "+P[1]+", "+P[2]+", "+P[3]+")"},Ne.exactEquals=function(P,R){return P[0]===R[0]&&P[1]===R[1]&&P[2]===R[2]&&P[3]===R[3]},Ne.equals=function(P,R){var $=P[0],te=P[1],ie=P[2],de=P[3],fe=R[0],ae=R[1],ge=R[2],Be=R[3];return Math.abs($-fe)<=o.EPSILON*Math.max(1,Math.abs($),Math.abs(fe))&&Math.abs(te-ae)<=o.EPSILON*Math.max(1,Math.abs(te),Math.abs(ae))&&Math.abs(ie-ge)<=o.EPSILON*Math.max(1,Math.abs(ie),Math.abs(ge))&&Math.abs(de-Be)<=o.EPSILON*Math.max(1,Math.abs(de),Math.abs(Be))},Ne.forEach=Ne.sqrLen=Ne.len=Ne.sqrDist=Ne.dist=Ne.div=Ne.mul=Ne.sub=void 0;var o=function(P,R){if(P&&P.__esModule)return P;if(P===null||h(P)!=="object"&&typeof P!="function")return{default:P};var $=u(void 0);if($&&$.has(P))return $.get(P);var te={},ie=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var de in P)if(de!=="default"&&Object.prototype.hasOwnProperty.call(P,de)){var fe=ie?Object.getOwnPropertyDescriptor(P,de):null;fe&&(fe.get||fe.set)?Object.defineProperty(te,de,fe):te[de]=P[de]}return te.default=P,$&&$.set(P,te),te}(T());function u(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,$=new WeakMap;return(u=function(te){return te?$:R})(P)}function p(){var P=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0,P[2]=0,P[3]=0),P}function _(P,R,$){return P[0]=R[0]-$[0],P[1]=R[1]-$[1],P[2]=R[2]-$[2],P[3]=R[3]-$[3],P}function m(P,R,$){return P[0]=R[0]*$[0],P[1]=R[1]*$[1],P[2]=R[2]*$[2],P[3]=R[3]*$[3],P}function w(P,R,$){return P[0]=R[0]/$[0],P[1]=R[1]/$[1],P[2]=R[2]/$[2],P[3]=R[3]/$[3],P}function j(P,R){return Math.hypot(R[0]-P[0],R[1]-P[1],R[2]-P[2],R[3]-P[3])}function k(P,R){var $=R[0]-P[0],te=R[1]-P[1],ie=R[2]-P[2],de=R[3]-P[3];return $*$+te*te+ie*ie+de*de}function H(P){return Math.hypot(P[0],P[1],P[2],P[3])}function E(P){var R=P[0],$=P[1],te=P[2],ie=P[3];return R*R+$*$+te*te+ie*ie}Ne.sub=_,Ne.mul=m,Ne.div=w,Ne.dist=j,Ne.sqrDist=k,Ne.len=H,Ne.sqrLen=E;var M,O=(M=p(),function(P,R,$,te,ie,de){var fe,ae;for(R||(R=4),$||($=0),ae=te?Math.min(te*R+$,P.length):P.length,fe=$;fe<ae;fe+=R)M[0]=P[fe],M[1]=P[fe+1],M[2]=P[fe+2],M[3]=P[fe+3],ie(M,M,de),P[fe]=M[0],P[fe+1]=M[1],P[fe+2]=M[2],P[fe+3]=M[3];return P});return Ne.forEach=O,Ne}function Je(){if(Ee)return ye;function h(nt){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(yt){return typeof yt}:function(yt){return yt&&typeof Symbol=="function"&&yt.constructor===Symbol&&yt!==Symbol.prototype?"symbol":typeof yt},h(nt)}Ee=1,Object.defineProperty(ye,"__esModule",{value:!0}),ye.create=j,ye.identity=function(nt){return nt[0]=0,nt[1]=0,nt[2]=0,nt[3]=1,nt},ye.setAxisAngle=k,ye.getAxisAngle=function(nt,yt){var bt=2*Math.acos(yt[3]),_t=Math.sin(bt/2);return _t>o.EPSILON?(nt[0]=yt[0]/_t,nt[1]=yt[1]/_t,nt[2]=yt[2]/_t):(nt[0]=1,nt[1]=0,nt[2]=0),bt},ye.getAngle=function(nt,yt){var bt=$(nt,yt);return Math.acos(2*bt*bt-1)},ye.multiply=H,ye.rotateX=function(nt,yt,bt){bt*=.5;var _t=yt[0],Et=yt[1],Ut=yt[2],Wt=yt[3],Pt=Math.sin(bt),mn=Math.cos(bt);return nt[0]=_t*mn+Wt*Pt,nt[1]=Et*mn+Ut*Pt,nt[2]=Ut*mn-Et*Pt,nt[3]=Wt*mn-_t*Pt,nt},ye.rotateY=function(nt,yt,bt){bt*=.5;var _t=yt[0],Et=yt[1],Ut=yt[2],Wt=yt[3],Pt=Math.sin(bt),mn=Math.cos(bt);return nt[0]=_t*mn-Ut*Pt,nt[1]=Et*mn+Wt*Pt,nt[2]=Ut*mn+_t*Pt,nt[3]=Wt*mn-Et*Pt,nt},ye.rotateZ=function(nt,yt,bt){bt*=.5;var _t=yt[0],Et=yt[1],Ut=yt[2],Wt=yt[3],Pt=Math.sin(bt),mn=Math.cos(bt);return nt[0]=_t*mn+Et*Pt,nt[1]=Et*mn-_t*Pt,nt[2]=Ut*mn+Wt*Pt,nt[3]=Wt*mn-Ut*Pt,nt},ye.calculateW=function(nt,yt){var bt=yt[0],_t=yt[1],Et=yt[2];return nt[0]=bt,nt[1]=_t,nt[2]=Et,nt[3]=Math.sqrt(Math.abs(1-bt*bt-_t*_t-Et*Et)),nt},ye.exp=E,ye.ln=M,ye.pow=function(nt,yt,bt){return M(nt,yt),R(nt,nt,bt),E(nt,nt),nt},ye.slerp=O,ye.random=function(nt){var yt=o.RANDOM(),bt=o.RANDOM(),_t=o.RANDOM(),Et=Math.sqrt(1-yt),Ut=Math.sqrt(yt);return nt[0]=Et*Math.sin(2*Math.PI*bt),nt[1]=Et*Math.cos(2*Math.PI*bt),nt[2]=Ut*Math.sin(2*Math.PI*_t),nt[3]=Ut*Math.cos(2*Math.PI*_t),nt},ye.invert=function(nt,yt){var bt=yt[0],_t=yt[1],Et=yt[2],Ut=yt[3],Wt=bt*bt+_t*_t+Et*Et+Ut*Ut,Pt=Wt?1/Wt:0;return nt[0]=-bt*Pt,nt[1]=-_t*Pt,nt[2]=-Et*Pt,nt[3]=Ut*Pt,nt},ye.conjugate=function(nt,yt){return nt[0]=-yt[0],nt[1]=-yt[1],nt[2]=-yt[2],nt[3]=yt[3],nt},ye.fromMat3=P,ye.fromEuler=function(nt,yt,bt,_t){var Et=.5*Math.PI/180;yt*=Et,bt*=Et,_t*=Et;var Ut=Math.sin(yt),Wt=Math.cos(yt),Pt=Math.sin(bt),mn=Math.cos(bt),Nn=Math.sin(_t),vn=Math.cos(_t);return nt[0]=Ut*mn*vn-Wt*Pt*Nn,nt[1]=Wt*Pt*vn+Ut*mn*Nn,nt[2]=Wt*mn*Nn-Ut*Pt*vn,nt[3]=Wt*mn*vn+Ut*Pt*Nn,nt},ye.str=function(nt){return"quat("+nt[0]+", "+nt[1]+", "+nt[2]+", "+nt[3]+")"},ye.setAxes=ye.sqlerp=ye.rotationTo=ye.equals=ye.exactEquals=ye.normalize=ye.sqrLen=ye.squaredLength=ye.len=ye.length=ye.lerp=ye.dot=ye.scale=ye.mul=ye.add=ye.set=ye.copy=ye.fromValues=ye.clone=void 0;var o=w(T()),u=w(ne()),p=w(be()),_=w(Ge());function m(nt){if(typeof WeakMap!="function")return null;var yt=new WeakMap,bt=new WeakMap;return(m=function(_t){return _t?bt:yt})(nt)}function w(nt,yt){if(nt&&nt.__esModule)return nt;if(nt===null||h(nt)!=="object"&&typeof nt!="function")return{default:nt};var bt=m(yt);if(bt&&bt.has(nt))return bt.get(nt);var _t={},Et=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var Ut in nt)if(Ut!=="default"&&Object.prototype.hasOwnProperty.call(nt,Ut)){var Wt=Et?Object.getOwnPropertyDescriptor(nt,Ut):null;Wt&&(Wt.get||Wt.set)?Object.defineProperty(_t,Ut,Wt):_t[Ut]=nt[Ut]}return _t.default=nt,bt&&bt.set(nt,_t),_t}function j(){var nt=new o.ARRAY_TYPE(4);return o.ARRAY_TYPE!=Float32Array&&(nt[0]=0,nt[1]=0,nt[2]=0),nt[3]=1,nt}function k(nt,yt,bt){bt*=.5;var _t=Math.sin(bt);return nt[0]=_t*yt[0],nt[1]=_t*yt[1],nt[2]=_t*yt[2],nt[3]=Math.cos(bt),nt}function H(nt,yt,bt){var _t=yt[0],Et=yt[1],Ut=yt[2],Wt=yt[3],Pt=bt[0],mn=bt[1],Nn=bt[2],vn=bt[3];return nt[0]=_t*vn+Wt*Pt+Et*Nn-Ut*mn,nt[1]=Et*vn+Wt*mn+Ut*Pt-_t*Nn,nt[2]=Ut*vn+Wt*Nn+_t*mn-Et*Pt,nt[3]=Wt*vn-_t*Pt-Et*mn-Ut*Nn,nt}function E(nt,yt){var bt=yt[0],_t=yt[1],Et=yt[2],Ut=yt[3],Wt=Math.sqrt(bt*bt+_t*_t+Et*Et),Pt=Math.exp(Ut),mn=Wt>0?Pt*Math.sin(Wt)/Wt:0;return nt[0]=bt*mn,nt[1]=_t*mn,nt[2]=Et*mn,nt[3]=Pt*Math.cos(Wt),nt}function M(nt,yt){var bt=yt[0],_t=yt[1],Et=yt[2],Ut=yt[3],Wt=Math.sqrt(bt*bt+_t*_t+Et*Et),Pt=Wt>0?Math.atan2(Wt,Ut)/Wt:0;return nt[0]=bt*Pt,nt[1]=_t*Pt,nt[2]=Et*Pt,nt[3]=.5*Math.log(bt*bt+_t*_t+Et*Et+Ut*Ut),nt}function O(nt,yt,bt,_t){var Et,Ut,Wt,Pt,mn,Nn=yt[0],vn=yt[1],qn=yt[2],Kn=yt[3],ir=bt[0],Bn=bt[1],Br=bt[2],Zn=bt[3];return(Ut=Nn*ir+vn*Bn+qn*Br+Kn*Zn)<0&&(Ut=-Ut,ir=-ir,Bn=-Bn,Br=-Br,Zn=-Zn),1-Ut>o.EPSILON?(Et=Math.acos(Ut),Wt=Math.sin(Et),Pt=Math.sin((1-_t)*Et)/Wt,mn=Math.sin(_t*Et)/Wt):(Pt=1-_t,mn=_t),nt[0]=Pt*Nn+mn*ir,nt[1]=Pt*vn+mn*Bn,nt[2]=Pt*qn+mn*Br,nt[3]=Pt*Kn+mn*Zn,nt}function P(nt,yt){var bt,_t=yt[0]+yt[4]+yt[8];if(_t>0)bt=Math.sqrt(_t+1),nt[3]=.5*bt,nt[0]=(yt[5]-yt[7])*(bt=.5/bt),nt[1]=(yt[6]-yt[2])*bt,nt[2]=(yt[1]-yt[3])*bt;else{var Et=0;yt[4]>yt[0]&&(Et=1),yt[8]>yt[3*Et+Et]&&(Et=2);var Ut=(Et+1)%3,Wt=(Et+2)%3;bt=Math.sqrt(yt[3*Et+Et]-yt[3*Ut+Ut]-yt[3*Wt+Wt]+1),nt[Et]=.5*bt,nt[3]=(yt[3*Ut+Wt]-yt[3*Wt+Ut])*(bt=.5/bt),nt[Ut]=(yt[3*Ut+Et]+yt[3*Et+Ut])*bt,nt[Wt]=(yt[3*Wt+Et]+yt[3*Et+Wt])*bt}return nt}ye.clone=_.clone,ye.fromValues=_.fromValues,ye.copy=_.copy,ye.set=_.set,ye.add=_.add,ye.mul=H;var R=_.scale;ye.scale=R;var $=_.dot;ye.dot=$,ye.lerp=_.lerp;var te=_.length;ye.length=te,ye.len=te;var ie=_.squaredLength;ye.squaredLength=ie,ye.sqrLen=ie;var de=_.normalize;ye.normalize=de,ye.exactEquals=_.exactEquals,ye.equals=_.equals;var fe,ae,ge,Be=(fe=p.create(),ae=p.fromValues(1,0,0),ge=p.fromValues(0,1,0),function(nt,yt,bt){var _t=p.dot(yt,bt);return _t<-.999999?(p.cross(fe,ae,yt),p.len(fe)<1e-6&&p.cross(fe,ge,yt),p.normalize(fe,fe),k(nt,fe,Math.PI),nt):_t>.999999?(nt[0]=0,nt[1]=0,nt[2]=0,nt[3]=1,nt):(p.cross(fe,yt,bt),nt[0]=fe[0],nt[1]=fe[1],nt[2]=fe[2],nt[3]=1+_t,de(nt,nt))});ye.rotationTo=Be;var ke,Ye,Xe=(ke=j(),Ye=j(),function(nt,yt,bt,_t,Et,Ut){return O(ke,yt,Et,Ut),O(Ye,bt,_t,Ut),O(nt,ke,Ye,2*Ut*(1-Ut)),nt});ye.sqlerp=Xe;var We,At=(We=u.create(),function(nt,yt,bt,_t){return We[0]=bt[0],We[3]=bt[1],We[6]=bt[2],We[1]=_t[0],We[4]=_t[1],We[7]=_t[2],We[2]=-yt[0],We[5]=-yt[1],We[8]=-yt[2],de(nt,P(nt,We))});return ye.setAxes=At,ye}var Ue,Qe={};function xe(){if(Ue)return Qe;function h(O){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(P){return typeof P}:function(P){return P&&typeof Symbol=="function"&&P.constructor===Symbol&&P!==Symbol.prototype?"symbol":typeof P},h(O)}Ue=1,Object.defineProperty(Qe,"__esModule",{value:!0}),Qe.create=function(){var O=new o.ARRAY_TYPE(8);return o.ARRAY_TYPE!=Float32Array&&(O[0]=0,O[1]=0,O[2]=0,O[4]=0,O[5]=0,O[6]=0,O[7]=0),O[3]=1,O},Qe.clone=function(O){var P=new o.ARRAY_TYPE(8);return P[0]=O[0],P[1]=O[1],P[2]=O[2],P[3]=O[3],P[4]=O[4],P[5]=O[5],P[6]=O[6],P[7]=O[7],P},Qe.fromValues=function(O,P,R,$,te,ie,de,fe){var ae=new o.ARRAY_TYPE(8);return ae[0]=O,ae[1]=P,ae[2]=R,ae[3]=$,ae[4]=te,ae[5]=ie,ae[6]=de,ae[7]=fe,ae},Qe.fromRotationTranslationValues=function(O,P,R,$,te,ie,de){var fe=new o.ARRAY_TYPE(8);fe[0]=O,fe[1]=P,fe[2]=R,fe[3]=$;var ae=.5*te,ge=.5*ie,Be=.5*de;return fe[4]=ae*$+ge*R-Be*P,fe[5]=ge*$+Be*O-ae*R,fe[6]=Be*$+ae*P-ge*O,fe[7]=-ae*O-ge*P-Be*R,fe},Qe.fromRotationTranslation=w,Qe.fromTranslation=function(O,P){return O[0]=0,O[1]=0,O[2]=0,O[3]=1,O[4]=.5*P[0],O[5]=.5*P[1],O[6]=.5*P[2],O[7]=0,O},Qe.fromRotation=function(O,P){return O[0]=P[0],O[1]=P[1],O[2]=P[2],O[3]=P[3],O[4]=0,O[5]=0,O[6]=0,O[7]=0,O},Qe.fromMat4=function(O,P){var R=u.create();p.getRotation(R,P);var $=new o.ARRAY_TYPE(3);return p.getTranslation($,P),w(O,R,$),O},Qe.copy=j,Qe.identity=function(O){return O[0]=0,O[1]=0,O[2]=0,O[3]=1,O[4]=0,O[5]=0,O[6]=0,O[7]=0,O},Qe.set=function(O,P,R,$,te,ie,de,fe,ae){return O[0]=P,O[1]=R,O[2]=$,O[3]=te,O[4]=ie,O[5]=de,O[6]=fe,O[7]=ae,O},Qe.getDual=function(O,P){return O[0]=P[4],O[1]=P[5],O[2]=P[6],O[3]=P[7],O},Qe.setDual=function(O,P){return O[4]=P[0],O[5]=P[1],O[6]=P[2],O[7]=P[3],O},Qe.getTranslation=function(O,P){var R=P[4],$=P[5],te=P[6],ie=P[7],de=-P[0],fe=-P[1],ae=-P[2],ge=P[3];return O[0]=2*(R*ge+ie*de+$*ae-te*fe),O[1]=2*($*ge+ie*fe+te*de-R*ae),O[2]=2*(te*ge+ie*ae+R*fe-$*de),O},Qe.translate=function(O,P,R){var $=P[0],te=P[1],ie=P[2],de=P[3],fe=.5*R[0],ae=.5*R[1],ge=.5*R[2],Be=P[4],ke=P[5],Ye=P[6],Xe=P[7];return O[0]=$,O[1]=te,O[2]=ie,O[3]=de,O[4]=de*fe+te*ge-ie*ae+Be,O[5]=de*ae+ie*fe-$*ge+ke,O[6]=de*ge+$*ae-te*fe+Ye,O[7]=-$*fe-te*ae-ie*ge+Xe,O},Qe.rotateX=function(O,P,R){var $=-P[0],te=-P[1],ie=-P[2],de=P[3],fe=P[4],ae=P[5],ge=P[6],Be=P[7],ke=fe*de+Be*$+ae*ie-ge*te,Ye=ae*de+Be*te+ge*$-fe*ie,Xe=ge*de+Be*ie+fe*te-ae*$,We=Be*de-fe*$-ae*te-ge*ie;return u.rotateX(O,P,R),O[4]=ke*(de=O[3])+We*($=O[0])+Ye*(ie=O[2])-Xe*(te=O[1]),O[5]=Ye*de+We*te+Xe*$-ke*ie,O[6]=Xe*de+We*ie+ke*te-Ye*$,O[7]=We*de-ke*$-Ye*te-Xe*ie,O},Qe.rotateY=function(O,P,R){var $=-P[0],te=-P[1],ie=-P[2],de=P[3],fe=P[4],ae=P[5],ge=P[6],Be=P[7],ke=fe*de+Be*$+ae*ie-ge*te,Ye=ae*de+Be*te+ge*$-fe*ie,Xe=ge*de+Be*ie+fe*te-ae*$,We=Be*de-fe*$-ae*te-ge*ie;return u.rotateY(O,P,R),O[4]=ke*(de=O[3])+We*($=O[0])+Ye*(ie=O[2])-Xe*(te=O[1]),O[5]=Ye*de+We*te+Xe*$-ke*ie,O[6]=Xe*de+We*ie+ke*te-Ye*$,O[7]=We*de-ke*$-Ye*te-Xe*ie,O},Qe.rotateZ=function(O,P,R){var $=-P[0],te=-P[1],ie=-P[2],de=P[3],fe=P[4],ae=P[5],ge=P[6],Be=P[7],ke=fe*de+Be*$+ae*ie-ge*te,Ye=ae*de+Be*te+ge*$-fe*ie,Xe=ge*de+Be*ie+fe*te-ae*$,We=Be*de-fe*$-ae*te-ge*ie;return u.rotateZ(O,P,R),O[4]=ke*(de=O[3])+We*($=O[0])+Ye*(ie=O[2])-Xe*(te=O[1]),O[5]=Ye*de+We*te+Xe*$-ke*ie,O[6]=Xe*de+We*ie+ke*te-Ye*$,O[7]=We*de-ke*$-Ye*te-Xe*ie,O},Qe.rotateByQuatAppend=function(O,P,R){var $=R[0],te=R[1],ie=R[2],de=R[3],fe=P[0],ae=P[1],ge=P[2],Be=P[3];return O[0]=fe*de+Be*$+ae*ie-ge*te,O[1]=ae*de+Be*te+ge*$-fe*ie,O[2]=ge*de+Be*ie+fe*te-ae*$,O[3]=Be*de-fe*$-ae*te-ge*ie,O[4]=(fe=P[4])*de+(Be=P[7])*$+(ae=P[5])*ie-(ge=P[6])*te,O[5]=ae*de+Be*te+ge*$-fe*ie,O[6]=ge*de+Be*ie+fe*te-ae*$,O[7]=Be*de-fe*$-ae*te-ge*ie,O},Qe.rotateByQuatPrepend=function(O,P,R){var $=P[0],te=P[1],ie=P[2],de=P[3],fe=R[0],ae=R[1],ge=R[2],Be=R[3];return O[0]=$*Be+de*fe+te*ge-ie*ae,O[1]=te*Be+de*ae+ie*fe-$*ge,O[2]=ie*Be+de*ge+$*ae-te*fe,O[3]=de*Be-$*fe-te*ae-ie*ge,O[4]=$*(Be=R[7])+de*(fe=R[4])+te*(ge=R[6])-ie*(ae=R[5]),O[5]=te*Be+de*ae+ie*fe-$*ge,O[6]=ie*Be+de*ge+$*ae-te*fe,O[7]=de*Be-$*fe-te*ae-ie*ge,O},Qe.rotateAroundAxis=function(O,P,R,$){if(Math.abs($)<o.EPSILON)return j(O,P);var te=Math.hypot(R[0],R[1],R[2]);$*=.5;var ie=Math.sin($),de=ie*R[0]/te,fe=ie*R[1]/te,ae=ie*R[2]/te,ge=Math.cos($),Be=P[0],ke=P[1],Ye=P[2],Xe=P[3];O[0]=Be*ge+Xe*de+ke*ae-Ye*fe,O[1]=ke*ge+Xe*fe+Ye*de-Be*ae,O[2]=Ye*ge+Xe*ae+Be*fe-ke*de,O[3]=Xe*ge-Be*de-ke*fe-Ye*ae;var We=P[4],At=P[5],nt=P[6],yt=P[7];return O[4]=We*ge+yt*de+At*ae-nt*fe,O[5]=At*ge+yt*fe+nt*de-We*ae,O[6]=nt*ge+yt*ae+We*fe-At*de,O[7]=yt*ge-We*de-At*fe-nt*ae,O},Qe.add=function(O,P,R){return O[0]=P[0]+R[0],O[1]=P[1]+R[1],O[2]=P[2]+R[2],O[3]=P[3]+R[3],O[4]=P[4]+R[4],O[5]=P[5]+R[5],O[6]=P[6]+R[6],O[7]=P[7]+R[7],O},Qe.multiply=k,Qe.scale=function(O,P,R){return O[0]=P[0]*R,O[1]=P[1]*R,O[2]=P[2]*R,O[3]=P[3]*R,O[4]=P[4]*R,O[5]=P[5]*R,O[6]=P[6]*R,O[7]=P[7]*R,O},Qe.lerp=function(O,P,R,$){var te=1-$;return H(P,R)<0&&($=-$),O[0]=P[0]*te+R[0]*$,O[1]=P[1]*te+R[1]*$,O[2]=P[2]*te+R[2]*$,O[3]=P[3]*te+R[3]*$,O[4]=P[4]*te+R[4]*$,O[5]=P[5]*te+R[5]*$,O[6]=P[6]*te+R[6]*$,O[7]=P[7]*te+R[7]*$,O},Qe.invert=function(O,P){var R=M(P);return O[0]=-P[0]/R,O[1]=-P[1]/R,O[2]=-P[2]/R,O[3]=P[3]/R,O[4]=-P[4]/R,O[5]=-P[5]/R,O[6]=-P[6]/R,O[7]=P[7]/R,O},Qe.conjugate=function(O,P){return O[0]=-P[0],O[1]=-P[1],O[2]=-P[2],O[3]=P[3],O[4]=-P[4],O[5]=-P[5],O[6]=-P[6],O[7]=P[7],O},Qe.normalize=function(O,P){var R=M(P);if(R>0){R=Math.sqrt(R);var $=P[0]/R,te=P[1]/R,ie=P[2]/R,de=P[3]/R,fe=P[4],ae=P[5],ge=P[6],Be=P[7],ke=$*fe+te*ae+ie*ge+de*Be;O[0]=$,O[1]=te,O[2]=ie,O[3]=de,O[4]=(fe-$*ke)/R,O[5]=(ae-te*ke)/R,O[6]=(ge-ie*ke)/R,O[7]=(Be-de*ke)/R}return O},Qe.str=function(O){return"quat2("+O[0]+", "+O[1]+", "+O[2]+", "+O[3]+", "+O[4]+", "+O[5]+", "+O[6]+", "+O[7]+")"},Qe.exactEquals=function(O,P){return O[0]===P[0]&&O[1]===P[1]&&O[2]===P[2]&&O[3]===P[3]&&O[4]===P[4]&&O[5]===P[5]&&O[6]===P[6]&&O[7]===P[7]},Qe.equals=function(O,P){var R=O[0],$=O[1],te=O[2],ie=O[3],de=O[4],fe=O[5],ae=O[6],ge=O[7],Be=P[0],ke=P[1],Ye=P[2],Xe=P[3],We=P[4],At=P[5],nt=P[6],yt=P[7];return Math.abs(R-Be)<=o.EPSILON*Math.max(1,Math.abs(R),Math.abs(Be))&&Math.abs($-ke)<=o.EPSILON*Math.max(1,Math.abs($),Math.abs(ke))&&Math.abs(te-Ye)<=o.EPSILON*Math.max(1,Math.abs(te),Math.abs(Ye))&&Math.abs(ie-Xe)<=o.EPSILON*Math.max(1,Math.abs(ie),Math.abs(Xe))&&Math.abs(de-We)<=o.EPSILON*Math.max(1,Math.abs(de),Math.abs(We))&&Math.abs(fe-At)<=o.EPSILON*Math.max(1,Math.abs(fe),Math.abs(At))&&Math.abs(ae-nt)<=o.EPSILON*Math.max(1,Math.abs(ae),Math.abs(nt))&&Math.abs(ge-yt)<=o.EPSILON*Math.max(1,Math.abs(ge),Math.abs(yt))},Qe.sqrLen=Qe.squaredLength=Qe.len=Qe.length=Qe.dot=Qe.mul=Qe.setReal=Qe.getReal=void 0;var o=m(T()),u=m(Je()),p=m(pe());function _(O){if(typeof WeakMap!="function")return null;var P=new WeakMap,R=new WeakMap;return(_=function($){return $?R:P})(O)}function m(O,P){if(O&&O.__esModule)return O;if(O===null||h(O)!=="object"&&typeof O!="function")return{default:O};var R=_(P);if(R&&R.has(O))return R.get(O);var $={},te=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var ie in O)if(ie!=="default"&&Object.prototype.hasOwnProperty.call(O,ie)){var de=te?Object.getOwnPropertyDescriptor(O,ie):null;de&&(de.get||de.set)?Object.defineProperty($,ie,de):$[ie]=O[ie]}return $.default=O,R&&R.set(O,$),$}function w(O,P,R){var $=.5*R[0],te=.5*R[1],ie=.5*R[2],de=P[0],fe=P[1],ae=P[2],ge=P[3];return O[0]=de,O[1]=fe,O[2]=ae,O[3]=ge,O[4]=$*ge+te*ae-ie*fe,O[5]=te*ge+ie*de-$*ae,O[6]=ie*ge+$*fe-te*de,O[7]=-$*de-te*fe-ie*ae,O}function j(O,P){return O[0]=P[0],O[1]=P[1],O[2]=P[2],O[3]=P[3],O[4]=P[4],O[5]=P[5],O[6]=P[6],O[7]=P[7],O}function k(O,P,R){var $=P[0],te=P[1],ie=P[2],de=P[3],fe=R[4],ae=R[5],ge=R[6],Be=R[7],ke=P[4],Ye=P[5],Xe=P[6],We=P[7],At=R[0],nt=R[1],yt=R[2],bt=R[3];return O[0]=$*bt+de*At+te*yt-ie*nt,O[1]=te*bt+de*nt+ie*At-$*yt,O[2]=ie*bt+de*yt+$*nt-te*At,O[3]=de*bt-$*At-te*nt-ie*yt,O[4]=$*Be+de*fe+te*ge-ie*ae+ke*bt+We*At+Ye*yt-Xe*nt,O[5]=te*Be+de*ae+ie*fe-$*ge+Ye*bt+We*nt+Xe*At-ke*yt,O[6]=ie*Be+de*ge+$*ae-te*fe+Xe*bt+We*yt+ke*nt-Ye*At,O[7]=de*Be-$*fe-te*ae-ie*ge+We*bt-ke*At-Ye*nt-Xe*yt,O}Qe.getReal=u.copy,Qe.setReal=u.copy,Qe.mul=k;var H=u.dot;Qe.dot=H;var E=u.length;Qe.length=E,Qe.len=E;var M=u.squaredLength;return Qe.squaredLength=M,Qe.sqrLen=M,Qe}var at,we,me={};function Ze(){if(at)return me;function h(P){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},h(P)}at=1,Object.defineProperty(me,"__esModule",{value:!0}),me.create=p,me.clone=function(P){var R=new o.ARRAY_TYPE(2);return R[0]=P[0],R[1]=P[1],R},me.fromValues=function(P,R){var $=new o.ARRAY_TYPE(2);return $[0]=P,$[1]=R,$},me.copy=function(P,R){return P[0]=R[0],P[1]=R[1],P},me.set=function(P,R,$){return P[0]=R,P[1]=$,P},me.add=function(P,R,$){return P[0]=R[0]+$[0],P[1]=R[1]+$[1],P},me.subtract=_,me.multiply=m,me.divide=w,me.ceil=function(P,R){return P[0]=Math.ceil(R[0]),P[1]=Math.ceil(R[1]),P},me.floor=function(P,R){return P[0]=Math.floor(R[0]),P[1]=Math.floor(R[1]),P},me.min=function(P,R,$){return P[0]=Math.min(R[0],$[0]),P[1]=Math.min(R[1],$[1]),P},me.max=function(P,R,$){return P[0]=Math.max(R[0],$[0]),P[1]=Math.max(R[1],$[1]),P},me.round=function(P,R){return P[0]=Math.round(R[0]),P[1]=Math.round(R[1]),P},me.scale=function(P,R,$){return P[0]=R[0]*$,P[1]=R[1]*$,P},me.scaleAndAdd=function(P,R,$,te){return P[0]=R[0]+$[0]*te,P[1]=R[1]+$[1]*te,P},me.distance=j,me.squaredDistance=k,me.length=H,me.squaredLength=E,me.negate=function(P,R){return P[0]=-R[0],P[1]=-R[1],P},me.inverse=function(P,R){return P[0]=1/R[0],P[1]=1/R[1],P},me.normalize=function(P,R){var $=R[0],te=R[1],ie=$*$+te*te;return ie>0&&(ie=1/Math.sqrt(ie)),P[0]=R[0]*ie,P[1]=R[1]*ie,P},me.dot=function(P,R){return P[0]*R[0]+P[1]*R[1]},me.cross=function(P,R,$){var te=R[0]*$[1]-R[1]*$[0];return P[0]=P[1]=0,P[2]=te,P},me.lerp=function(P,R,$,te){var ie=R[0],de=R[1];return P[0]=ie+te*($[0]-ie),P[1]=de+te*($[1]-de),P},me.random=function(P,R){R=R||1;var $=2*o.RANDOM()*Math.PI;return P[0]=Math.cos($)*R,P[1]=Math.sin($)*R,P},me.transformMat2=function(P,R,$){var te=R[0],ie=R[1];return P[0]=$[0]*te+$[2]*ie,P[1]=$[1]*te+$[3]*ie,P},me.transformMat2d=function(P,R,$){var te=R[0],ie=R[1];return P[0]=$[0]*te+$[2]*ie+$[4],P[1]=$[1]*te+$[3]*ie+$[5],P},me.transformMat3=function(P,R,$){var te=R[0],ie=R[1];return P[0]=$[0]*te+$[3]*ie+$[6],P[1]=$[1]*te+$[4]*ie+$[7],P},me.transformMat4=function(P,R,$){var te=R[0],ie=R[1];return P[0]=$[0]*te+$[4]*ie+$[12],P[1]=$[1]*te+$[5]*ie+$[13],P},me.rotate=function(P,R,$,te){var ie=R[0]-$[0],de=R[1]-$[1],fe=Math.sin(te),ae=Math.cos(te);return P[0]=ie*ae-de*fe+$[0],P[1]=ie*fe+de*ae+$[1],P},me.angle=function(P,R){var $=P[0],te=P[1],ie=R[0],de=R[1],fe=Math.sqrt($*$+te*te)*Math.sqrt(ie*ie+de*de);return Math.acos(Math.min(Math.max(fe&&($*ie+te*de)/fe,-1),1))},me.zero=function(P){return P[0]=0,P[1]=0,P},me.str=function(P){return"vec2("+P[0]+", "+P[1]+")"},me.exactEquals=function(P,R){return P[0]===R[0]&&P[1]===R[1]},me.equals=function(P,R){var $=P[0],te=P[1],ie=R[0],de=R[1];return Math.abs($-ie)<=o.EPSILON*Math.max(1,Math.abs($),Math.abs(ie))&&Math.abs(te-de)<=o.EPSILON*Math.max(1,Math.abs(te),Math.abs(de))},me.forEach=me.sqrLen=me.sqrDist=me.dist=me.div=me.mul=me.sub=me.len=void 0;var o=function(P,R){if(P&&P.__esModule)return P;if(P===null||h(P)!=="object"&&typeof P!="function")return{default:P};var $=u(void 0);if($&&$.has(P))return $.get(P);var te={},ie=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var de in P)if(de!=="default"&&Object.prototype.hasOwnProperty.call(P,de)){var fe=ie?Object.getOwnPropertyDescriptor(P,de):null;fe&&(fe.get||fe.set)?Object.defineProperty(te,de,fe):te[de]=P[de]}return te.default=P,$&&$.set(P,te),te}(T());function u(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,$=new WeakMap;return(u=function(te){return te?$:R})(P)}function p(){var P=new o.ARRAY_TYPE(2);return o.ARRAY_TYPE!=Float32Array&&(P[0]=0,P[1]=0),P}function _(P,R,$){return P[0]=R[0]-$[0],P[1]=R[1]-$[1],P}function m(P,R,$){return P[0]=R[0]*$[0],P[1]=R[1]*$[1],P}function w(P,R,$){return P[0]=R[0]/$[0],P[1]=R[1]/$[1],P}function j(P,R){return Math.hypot(R[0]-P[0],R[1]-P[1])}function k(P,R){var $=R[0]-P[0],te=R[1]-P[1];return $*$+te*te}function H(P){return Math.hypot(P[0],P[1])}function E(P){var R=P[0],$=P[1];return R*R+$*$}me.len=H,me.sub=_,me.mul=m,me.div=w,me.dist=j,me.sqrDist=k,me.sqrLen=E;var M,O=(M=p(),function(P,R,$,te,ie,de){var fe,ae;for(R||(R=2),$||($=0),ae=te?Math.min(te*R+$,P.length):P.length,fe=$;fe<ae;fe+=R)M[0]=P[fe],M[1]=P[fe+1],ie(M,M,de),P[fe]=M[0],P[fe+1]=M[1];return P});return me.forEach=O,me}function ot(){if(we)return y;function h(P){return h=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(R){return typeof R}:function(R){return R&&typeof Symbol=="function"&&R.constructor===Symbol&&R!==Symbol.prototype?"symbol":typeof R},h(P)}we=1,Object.defineProperty(y,"__esModule",{value:!0}),y.vec4=y.vec3=y.vec2=y.quat2=y.quat=y.mat4=y.mat3=y.mat2d=y.mat2=y.glMatrix=void 0;var o=O(T());y.glMatrix=o;var u=O(N());y.mat2=u;var p=O(Q());y.mat2d=p;var _=O(ne());y.mat3=_;var m=O(pe());y.mat4=m;var w=O(Je());y.quat=w;var j=O(xe());y.quat2=j;var k=O(Ze());y.vec2=k;var H=O(be());y.vec3=H;var E=O(Ge());function M(P){if(typeof WeakMap!="function")return null;var R=new WeakMap,$=new WeakMap;return(M=function(te){return te?$:R})(P)}function O(P,R){if(P&&P.__esModule)return P;if(P===null||h(P)!=="object"&&typeof P!="function")return{default:P};var $=M(R);if($&&$.has(P))return $.get(P);var te={},ie=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var de in P)if(de!=="default"&&Object.prototype.hasOwnProperty.call(P,de)){var fe=ie?Object.getOwnPropertyDescriptor(P,de):null;fe&&(fe.get||fe.set)?Object.defineProperty(te,de,fe):te[de]=P[de]}return te.default=P,$&&$.set(P,te),te}return y.vec4=E,y}var vt,Qt,Ot,kt,Me=ot(),Ht=function(){if(Qt)return vt;function h(o,u,p,_){this.cx=3*o,this.bx=3*(p-o)-this.cx,this.ax=1-this.cx-this.bx,this.cy=3*u,this.by=3*(_-u)-this.cy,this.ay=1-this.cy-this.by,this.p1x=o,this.p1y=u,this.p2x=p,this.p2y=_}return Qt=1,vt=h,h.prototype={sampleCurveX:function(o){return((this.ax*o+this.bx)*o+this.cx)*o},sampleCurveY:function(o){return((this.ay*o+this.by)*o+this.cy)*o},sampleCurveDerivativeX:function(o){return(3*this.ax*o+2*this.bx)*o+this.cx},solveCurveX:function(o,u){if(u===void 0&&(u=1e-6),o<0)return 0;if(o>1)return 1;for(var p=o,_=0;_<8;_++){var m=this.sampleCurveX(p)-o;if(Math.abs(m)<u)return p;var w=this.sampleCurveDerivativeX(p);if(Math.abs(w)<1e-6)break;p-=m/w}var j=0,k=1;for(p=o,_=0;_<20&&(m=this.sampleCurveX(p),!(Math.abs(m-o)<u));_++)o>m?j=p:k=p,p=.5*(k-j)+j;return p},solve:function(o,u){return this.sampleCurveY(this.solveCurveX(o,u))}},vt}(),Zt=f(Ht);function pn(){if(kt)return Ot;function h(o,u){this.x=o,this.y=u}return kt=1,Ot=h,h.prototype={clone:function(){return new h(this.x,this.y)},add:function(o){return this.clone()._add(o)},sub:function(o){return this.clone()._sub(o)},multByPoint:function(o){return this.clone()._multByPoint(o)},divByPoint:function(o){return this.clone()._divByPoint(o)},mult:function(o){return this.clone()._mult(o)},div:function(o){return this.clone()._div(o)},rotate:function(o){return this.clone()._rotate(o)},rotateAround:function(o,u){return this.clone()._rotateAround(o,u)},matMult:function(o){return this.clone()._matMult(o)},unit:function(){return this.clone()._unit()},perp:function(){return this.clone()._perp()},round:function(){return this.clone()._round()},mag:function(){return Math.sqrt(this.x*this.x+this.y*this.y)},equals:function(o){return this.x===o.x&&this.y===o.y},dist:function(o){return Math.sqrt(this.distSqr(o))},distSqr:function(o){var u=o.x-this.x,p=o.y-this.y;return u*u+p*p},angle:function(){return Math.atan2(this.y,this.x)},angleTo:function(o){return Math.atan2(this.y-o.y,this.x-o.x)},angleWith:function(o){return this.angleWithSep(o.x,o.y)},angleWithSep:function(o,u){return Math.atan2(this.x*u-this.y*o,this.x*o+this.y*u)},_matMult:function(o){var u=o[2]*this.x+o[3]*this.y;return this.x=o[0]*this.x+o[1]*this.y,this.y=u,this},_add:function(o){return this.x+=o.x,this.y+=o.y,this},_sub:function(o){return this.x-=o.x,this.y-=o.y,this},_mult:function(o){return this.x*=o,this.y*=o,this},_div:function(o){return this.x/=o,this.y/=o,this},_multByPoint:function(o){return this.x*=o.x,this.y*=o.y,this},_divByPoint:function(o){return this.x/=o.x,this.y/=o.y,this},_unit:function(){return this._div(this.mag()),this},_perp:function(){var o=this.y;return this.y=this.x,this.x=-o,this},_rotate:function(o){var u=Math.cos(o),p=Math.sin(o),_=p*this.x+u*this.y;return this.x=u*this.x-p*this.y,this.y=_,this},_rotateAround:function(o,u){var p=Math.cos(o),_=Math.sin(o),m=u.y+_*(this.x-u.x)+p*(this.y-u.y);return this.x=u.x+p*(this.x-u.x)-_*(this.y-u.y),this.y=m,this},_round:function(){return this.x=Math.round(this.x),this.y=Math.round(this.y),this}},h.convert=function(o){return o instanceof h?o:Array.isArray(o)?new h(o[0],o[1]):o},Ot}var Dt=f(pn());function hn(h,o){if(Array.isArray(h)){if(!Array.isArray(o)||h.length!==o.length)return!1;for(let u=0;u<h.length;u++)if(!hn(h[u],o[u]))return!1;return!0}if(typeof h=="object"&&h!==null&&o!==null){if(typeof o!="object"||Object.keys(h).length!==Object.keys(o).length)return!1;for(const u in h)if(!hn(h[u],o[u]))return!1;return!0}return h===o}const Oe=Math.PI/180,nn=180/Math.PI;function Vt(h){return h*Oe}function $t(h){return h*nn}const xn=[[0,0],[1,0],[1,1],[0,1]];function Xt(h){if(h<=0)return 0;if(h>=1)return 1;const o=h*h,u=o*h;return 4*(h<.5?u:3*(h-o)+u-.75)}function gn(h,o,u,p){const _=new Zt(h,o,u,p);return function(m){return _.solve(m)}}const rr=gn(.25,.1,.25,1);function Gt(h,o,u){return Math.min(u,Math.max(o,h))}function Rn(h,o,u){return(u=Gt((u-h)/(o-h),0,1))*u*(3-2*u)}function wt(h,o,u){const p=u-o,_=((h-o)%p+p)%p+o;return _===o?u:_}function qt(h,o,u){if(!h.length)return u(null,[]);let p=h.length;const _=new Array(h.length);let m=null;h.forEach((w,j)=>{o(w,(k,H)=>{k&&(m=k),_[j]=H,--p==0&&u(m,_)})})}function fn(h,...o){for(const u of o)for(const p in u)h[p]=u[p];return h}let Un=1;function Yt(){return Un++}function cn(h){return h<=1?1:Math.pow(2,Math.ceil(Math.log(h)/Math.LN2))}function Ln(h,o){h.forEach(u=>{o[u]&&(o[u]=o[u].bind(o))})}function Hn(h,o){return h.indexOf(o,h.length-o.length)!==-1}function _r(h,o,u){const p={};for(const _ in h)p[_]=o.call(this,h[_],_,h);return p}function fr(h,o,u){const p={};for(const _ in h)o.call(this,h[_],_,h)&&(p[_]=h[_]);return p}function xr(h){return Array.isArray(h)?h.map(xr):typeof h=="object"&&h?_r(h,xr):h}const bi={};function Vn(h){bi[h]||(typeof console<"u"&&console.warn(h),bi[h]=!0)}function Es(h,o,u){return(u.y-h.y)*(o.x-h.x)>(o.y-h.y)*(u.x-h.x)}function ki(h){let o=0;for(let u,p,_=0,m=h.length,w=m-1;_<m;w=_++)u=h[_],p=h[w],o+=(p.x-u.x)*(u.y+p.y);return o}function hs([h,o,u]){const p=Vt(o+90),_=Vt(u);return{x:h*Math.cos(p)*Math.sin(_),y:h*Math.sin(p)*Math.sin(_),z:h*Math.cos(_),azimuthal:o,polar:u}}function mi(){return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope}function br(h){const o={};if(h.replace(/(?:^|(?:\s*\,\s*))([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)(?:\=(?:([^\x00-\x20\(\)<>@\,;\:\\"\/\[\]\?\=\{\}\x7F]+)|(?:\"((?:[^"\\]|\\.)*)\")))?/g,(u,p,_,m)=>{const w=_||m;return o[p]=!w||w.toLowerCase(),""}),o["max-age"]){const u=parseInt(o["max-age"],10);isNaN(u)?delete o["max-age"]:o["max-age"]=u}return o}let gr=null;function Ir(h,o){return[h[4*o],h[4*o+1],h[4*o+2],h[4*o+3]]}function Kr(h,o,u,p){for(;o<u;){const _=o+u>>1;h[_]<p?o=_+1:u=_}return o}function Mt(h,o,u,p){for(;o<u;){const _=o+u>>1;h[_]<=p?o=_+1:u=_}return o}function je(h){return h>0?1/(1.001-h):1+h}function De(h){return h>0?1-1/(1.001-h):-h}const ve={API_URL:"https://api.mapbox.com",get API_URL_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/|\?|$)/i},get API_TILEJSON_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/v[0-9]*\/.*\.json.*$)/i},get API_SPRITE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*\/sprite.*\..*$)/i},get API_FONTS_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/fonts\/v[0-9]*\/)(.*\.pbf.*$)/i},get API_STYLE_REGEX(){return/^((https?:)?\/\/)?([^\/]+\.)?mapbox\.c(n|om)(\/styles\/v[0-9]*\/)(.*$)/i},get API_CDN_URL_REGEX(){return/^((https?:)?\/\/)?api\.mapbox\.c(n|om)(\/mapbox-gl-js\/)(.*$)/i},get EVENTS_URL(){if(!ve.API_URL)return null;try{const h=new URL(ve.API_URL);return h.hostname==="api.mapbox.cn"?"https://events.mapbox.cn/events/v2":h.hostname==="api.mapbox.com"?"https://events.mapbox.com/events/v2":null}catch{return null}},SESSION_PATH:"/map-sessions/v1",FEEDBACK_URL:"https://apps.mapbox.com/feedback",TILE_URL_VERSION:"v4",RASTER_URL_PREFIX:"raster/v1",RASTERARRAYS_URL_PREFIX:"rasterarrays/v1",REQUIRE_ACCESS_TOKEN:!0,ACCESS_TOKEN:null,DEFAULT_STYLE:"mapbox://styles/mapbox/standard",MAX_PARALLEL_IMAGE_REQUESTS:16,DRACO_URL:"https://api.mapbox.com/mapbox-gl-js/draco_decoder_gltf_v1.5.6.wasm",MESHOPT_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_base_v0.20.wasm",MESHOPT_SIMD_URL:"https://api.mapbox.com/mapbox-gl-js/meshopt_simd_v0.20.wasm",GLYPHS_URL:"mapbox://fonts/mapbox/{fontstack}/{range}.pbf",TILES3D_URL_PREFIX:"3dtiles/v1"};function Re(h){return ve.API_URL_REGEX.test(h)}function ze(h){return ve.API_SPRITE_REGEX.test(h)}let tt,gt,pt,Lt,jt,Nt;function rn(){return tt==null&&(tt=self.OffscreenCanvas&&new OffscreenCanvas(1,1).getContext("2d")&&typeof self.createImageBitmap=="function"),tt}const _n={now:()=>Lt!==void 0?Lt:performance.now(),setNow(h){Lt=h},restoreNow(){Lt=void 0},frame(h){const o=requestAnimationFrame(h);return{cancel:()=>cancelAnimationFrame(o)}},getImageData(h,o=0){const{width:u,height:p}=h;jt||(jt=document.createElement("canvas"));const _=jt.getContext("2d",{willReadFrequently:!0});if(!_)throw new Error("failed to create canvas 2d context");return(u>jt.width||p>jt.height)&&(jt.width=u,jt.height=p),_.clearRect(-o,-o,u+2*o,p+2*o),_.drawImage(h,0,0,u,p),_.getImageData(-o,-o,u+2*o,p+2*o)},resolveURL:h=>(gt||(gt=document.createElement("a")),gt.href=h,gt.href),get devicePixelRatio(){return window.devicePixelRatio},get prefersReducedMotion(){return!!window.matchMedia&&(pt==null&&(pt=window.matchMedia("(prefers-reduced-motion: reduce)")),pt.matches)},hasCanvasFingerprintNoise(){if(Nt!==void 0)return Nt;if(!rn())return Nt=!1,!1;const h=new OffscreenCanvas(85,1),o=h.getContext("2d",{willReadFrequently:!0});let u=0;for(let _=0;_<h.width;++_)o.fillStyle=`rgba(${u++},${u++},${u++}, 255)`,o.fillRect(_,0,1,1);const p=o.getImageData(0,0,h.width,h.height);u=0;for(let _=0;_<p.data.length;++_)if(_%4!=3&&u++!==p.data[_])return Nt=!0,!0;return Nt=!1,!1}};function Pn(h,o){const u=h.indexOf("?");if(u<0)return`${h}?${new URLSearchParams(o).toString()}`;const p=new URLSearchParams(h.slice(u));for(const _ in o)p.set(_,o[_]);return`${h.slice(0,u)}?${p.toString()}`}function sr(h,o={persistentParams:[]}){const u=h.indexOf("?");if(u<0)return h;const p=new URLSearchParams,_=new URLSearchParams(h.slice(u));for(const w of o.persistentParams){const j=_.get(w);j&&p.set(w,j)}const m=p.toString();return`${h.slice(0,u)}${m.length>0?`?${m}`:""}`}const Cr="mapbox-tiles";let Ar=500,pr=50;const Wr=["language","worldview","jobid"];let vi,ti;function Ai(){try{return caches}catch{}}function Ci(){const h=Ai();h&&vi==null&&(vi=h.open(Cr))}let Vs=1/0;const Zo={supported:!1,testSupport:function(h){!Xl&&Eo&&(Li?xc(h):Rs=h)}};let Rs,Eo,Xl=!1,Li=!1;const ho=typeof self<"u"?self:{};function xc(h){const o=h.createTexture();h.bindTexture(h.TEXTURE_2D,o);try{if(h.texImage2D(h.TEXTURE_2D,0,h.RGBA,h.RGBA,h.UNSIGNED_BYTE,Eo),h.isContextLost())return;Zo.supported=!0}catch{}h.deleteTexture(o),Xl=!0}ho.document&&(Eo=ho.document.createElement("img"),Eo.onload=function(){Rs&&xc(Rs),Rs=null,Li=!0},Eo.onerror=function(){Xl=!0,Rs=null},Eo.src="data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAQAAAAfQ//73v/+BiOh/AAA=");const Yl={Unknown:"Unknown",Style:"Style",Source:"Source",Tile:"Tile",Glyphs:"Glyphs",SpriteImage:"SpriteImage",SpriteJSON:"SpriteJSON",Iconset:"Iconset",Image:"Image",Model:"Model"};typeof Object.freeze=="function"&&Object.freeze(Yl);class so extends Error{constructor(o,u,p){u===401&&Re(p)&&(o+=": you may have provided an invalid Mapbox access token. See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes"),super(o),this.status=u,this.url=p}toString(){return`${this.name}: ${this.message} (${this.status}): ${this.url}`}}const Jl=mi()?()=>self.worker&&self.worker.referrer:()=>(location.protocol==="blob:"?parent:self).location.href,Os=function(h,o){if(!(/^file:/.test(u=h.url)||/^file:/.test(Jl())&&!/^\w+:/.test(u))){if(self.fetch&&self.Request&&self.AbortController&&Request.prototype.hasOwnProperty("signal"))return function(p,_){const m=new AbortController,w=new Request(p.url,{method:p.method||"GET",body:p.body,credentials:p.credentials,headers:p.headers,referrer:Jl(),referrerPolicy:p.referrerPolicy,signal:m.signal});let j=!1,k=!1;const H=(E=w.url).indexOf("sku=")>0&&Re(E);var E;p.type==="json"&&w.headers.set("Accept","application/json");const M=(P,R,$)=>{if(k)return;if(P&&P.message!=="SecurityError"&&Vn(P.toString()),R&&$)return O(R);const te=Date.now();fetch(w).then(ie=>{if(ie.ok){const de=H?ie.clone():null;return O(ie,de,te)}return _(new so(ie.statusText,ie.status,p.url))}).catch(ie=>{ie.name!=="AbortError"&&_(new Error(`${ie.message} ${p.url}`))})},O=(P,R,$)=>{(p.type==="arrayBuffer"?P.arrayBuffer():p.type==="json"?P.json():P.text()).then(te=>{k||(R&&$&&function(ie,de,fe){if(Ci(),vi==null)return;const ae=br(de.headers.get("Cache-Control")||"");if(ae["no-store"])return;const ge={status:de.status,statusText:de.statusText,headers:new Headers};de.headers.forEach((Ye,Xe)=>ge.headers.set(Xe,Ye)),ae["max-age"]&&ge.headers.set("Expires",new Date(fe+1e3*ae["max-age"]).toUTCString());const Be=ge.headers.get("Expires");if(!Be||new Date(Be).getTime()-fe<42e4)return;let ke=sr(ie.url,{persistentParams:Wr});if(de.status===206){const Ye=ie.headers.get("Range");if(!Ye)return;ge.status=200,ke=Pn(ke,{range:Ye})}(function(Ye,Xe){if(ti===void 0)try{new Response(new ReadableStream),ti=!0}catch{ti=!1}ti?Xe(Ye.body):Ye.blob().then(Xe)})(de,Ye=>{const Xe=new Response((We=de.status)!==200&&We!==404&&[101,103,204,205,304].includes(We)?null:Ye,ge);var We;Ci(),vi!=null&&vi.then(At=>At.put(ke,Xe)).catch(At=>Vn(At.message))})}(w,R,$),j=!0,_(null,te,P.headers.get("Cache-Control"),P.headers.get("Expires")))}).catch(te=>{k||_(new Error(te.message))})};return H?function(P,R){if(Ci(),vi==null)return R(null);vi.then($=>{let te=sr(P.url,{persistentParams:Wr});const ie=P.headers.get("Range");ie&&(te=Pn(te,{range:ie})),$.match(te).then(de=>{const fe=function(ae){if(!ae)return!1;const ge=new Date(ae.headers.get("Expires")||0),Be=br(ae.headers.get("Cache-Control")||"");return ge>Date.now()&&!Be["no-cache"]}(de);$.delete(te),fe&&$.put(te,de.clone()),R(null,de,fe)}).catch(R)}).catch(R)}(w,M):M(null,null),{cancel:()=>{k=!0,j||m.abort()}}}(h,o);if(mi()&&self.worker&&self.worker.actor)return self.worker.actor.send("getResource",h,o,void 0,!0)}var u;return function(p,_){const m=new XMLHttpRequest;m.open(p.method||"GET",p.url,!0),p.type==="arrayBuffer"&&(m.responseType="arraybuffer");for(const w in p.headers)m.setRequestHeader(w,p.headers[w]);return p.type==="json"&&(m.responseType="text",m.setRequestHeader("Accept","application/json")),m.withCredentials=p.credentials==="include",m.onerror=()=>{_(new Error(m.statusText))},m.onload=()=>{if((m.status>=200&&m.status<300||m.status===0)&&m.response!==null){let w=m.response;if(p.type==="json")try{w=JSON.parse(m.response)}catch(j){return _(j)}_(null,w,m.getResponseHeader("Cache-Control"),m.getResponseHeader("Expires"))}else _(new so(m.statusText,m.status,p.url))},m.send(p.body),{cancel:()=>m.abort()}}(h,o)},Dc=function(h,o){return Os(fn(h,{type:"arrayBuffer"}),o)};function of(h){const o=document.createElement("a");return o.href=h,o.protocol===location.protocol&&o.host===location.host}const af="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAYAAAAfFcSJAAAAC0lEQVQYV2NgAAIAAAUAAarVyFEAAAAASUVORK5CYII=";let wh,bh;wh=[],bh=0;const vl=function(h,o){if(Zo.supported&&(h.headers||(h.headers={}),h.headers.accept="image/webp,*/*"),bh>=ve.MAX_PARALLEL_IMAGE_REQUESTS){const m={requestParameters:h,callback:o,cancelled:!1,cancel(){this.cancelled=!0}};return wh.push(m),m}bh++;let u=!1;const p=()=>{if(!u)for(u=!0,bh--;wh.length&&bh<ve.MAX_PARALLEL_IMAGE_REQUESTS;){const m=wh.shift(),{requestParameters:w,callback:j,cancelled:k}=m;k||(m.cancel=vl(w,j).cancel)}},_=Dc(h,(m,w,j,k)=>{p(),m?o(m):w&&(self.createImageBitmap?function(H,E){const M=new Blob([new Uint8Array(H)],{type:"image/png"});createImageBitmap(M).then(O=>{E(null,O)}).catch(O=>{E(new Error(`Could not load image because of ${O.message}. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported.`))})}(w,(H,E)=>o(H,E,j,k)):function(H,E){const M=new Image;M.onload=()=>{E(null,M),URL.revokeObjectURL(M.src),M.onload=null,requestAnimationFrame(()=>{M.src=af})},M.onerror=()=>E(new Error("Could not load image. Please make sure to use a supported image type such as PNG or JPEG. Note that SVGs are not supported."));const O=new Blob([new Uint8Array(H)],{type:"image/png"});M.src=H.byteLength?URL.createObjectURL(O):af}(w,(H,E)=>o(H,E,j,k)))});return{cancel:()=>{_.cancel(),p()}}};var Rd,No,kl,Ll={exports:{}},ec={exports:{}},iu={exports:{}},lf=function(){if(kl)return Ll.exports;kl=1;var h=(Rd||(Rd=1,ec.exports=function(u,p){var _,m,w,j,k,H,E,M;for(m=u.length-(_=3&u.length),w=p,k=3432918353,H=461845907,M=0;M<m;)E=255&u.charCodeAt(M)|(255&u.charCodeAt(++M))<<8|(255&u.charCodeAt(++M))<<16|(255&u.charCodeAt(++M))<<24,++M,w=27492+(65535&(j=5*(65535&(w=(w^=E=(65535&(E=(E=(65535&E)*k+(((E>>>16)*k&65535)<<16)&4294967295)<<15|E>>>17))*H+(((E>>>16)*H&65535)<<16)&4294967295)<<13|w>>>19))+((5*(w>>>16)&65535)<<16)&4294967295))+((58964+(j>>>16)&65535)<<16);switch(E=0,_){case 3:E^=(255&u.charCodeAt(M+2))<<16;case 2:E^=(255&u.charCodeAt(M+1))<<8;case 1:w^=E=(65535&(E=(E=(65535&(E^=255&u.charCodeAt(M)))*k+(((E>>>16)*k&65535)<<16)&4294967295)<<15|E>>>17))*H+(((E>>>16)*H&65535)<<16)&4294967295}return w^=u.length,w=2246822507*(65535&(w^=w>>>16))+((2246822507*(w>>>16)&65535)<<16)&4294967295,w=3266489909*(65535&(w^=w>>>13))+((3266489909*(w>>>16)&65535)<<16)&4294967295,(w^=w>>>16)>>>0}),ec.exports),o=(No||(No=1,iu.exports=function(u,p){for(var _,m=u.length,w=p^m,j=0;m>=4;)_=1540483477*(65535&(_=255&u.charCodeAt(j)|(255&u.charCodeAt(++j))<<8|(255&u.charCodeAt(++j))<<16|(255&u.charCodeAt(++j))<<24))+((1540483477*(_>>>16)&65535)<<16),w=1540483477*(65535&w)+((1540483477*(w>>>16)&65535)<<16)^(_=1540483477*(65535&(_^=_>>>24))+((1540483477*(_>>>16)&65535)<<16)),m-=4,++j;switch(m){case 3:w^=(255&u.charCodeAt(j+2))<<16;case 2:w^=(255&u.charCodeAt(j+1))<<8;case 1:w=1540483477*(65535&(w^=255&u.charCodeAt(j)))+((1540483477*(w>>>16)&65535)<<16)}return w=1540483477*(65535&(w^=w>>>13))+((1540483477*(w>>>16)&65535)<<16),(w^=w>>>15)>>>0}),iu.exports);return Ll.exports=h,Ll.exports.murmur3=h,Ll.exports.murmur2=o,Ll.exports}(),qu=f(lf);class su{constructor(o,...u){fn(this,u[0]||{}),this.type=o}}class xl extends su{constructor(o,u={}){super("error",fn({error:o},u))}}function cf(h,o,u){u[h]&&u[h].indexOf(o)!==-1||(u[h]=u[h]||[],u[h].push(o))}function ip(h,o,u){if(u&&u[h]){const p=u[h].indexOf(o);p!==-1&&u[h].splice(p,1)}}class Ch{on(o,u){return this._listeners=this._listeners||{},cf(o,u,this._listeners),this}off(o,u){return ip(o,u,this._listeners),ip(o,u,this._oneTimeListeners),this}once(o,u){return u?(this._oneTimeListeners=this._oneTimeListeners||{},cf(o,u,this._oneTimeListeners),this):new Promise(p=>this.once(o,p))}fire(o,u){const p=typeof o=="string"?new su(o,u):o,_=p.type;if(this.listens(_)){p.target=this;const m=this._listeners&&this._listeners[_]?this._listeners[_].slice():[];for(const k of m)k.call(this,p);const w=this._oneTimeListeners&&this._oneTimeListeners[_]?this._oneTimeListeners[_].slice():[];for(const k of w)ip(_,k,this._oneTimeListeners),k.call(this,p);const j=this._eventedParent;j&&(fn(p,typeof this._eventedParentData=="function"?this._eventedParentData():this._eventedParentData),j.fire(p))}else p instanceof xl&&console.error(p.error);return this}listens(o){return!!(this._listeners&&this._listeners[o]&&this._listeners[o].length>0||this._oneTimeListeners&&this._oneTimeListeners[o]&&this._oneTimeListeners[o].length>0||this._eventedParent&&this._eventedParent.listens(o))}setEventedParent(o,u){return this._eventedParent=o,this._eventedParentData=u,this}}var Aa,Zu={},Xu=function(){if(Aa)return Zu;Aa=1;var h={transparent:[0,0,0,0],aliceblue:[240,248,255,1],antiquewhite:[250,235,215,1],aqua:[0,255,255,1],aquamarine:[127,255,212,1],azure:[240,255,255,1],beige:[245,245,220,1],bisque:[255,228,196,1],black:[0,0,0,1],blanchedalmond:[255,235,205,1],blue:[0,0,255,1],blueviolet:[138,43,226,1],brown:[165,42,42,1],burlywood:[222,184,135,1],cadetblue:[95,158,160,1],chartreuse:[127,255,0,1],chocolate:[210,105,30,1],coral:[255,127,80,1],cornflowerblue:[100,149,237,1],cornsilk:[255,248,220,1],crimson:[220,20,60,1],cyan:[0,255,255,1],darkblue:[0,0,139,1],darkcyan:[0,139,139,1],darkgoldenrod:[184,134,11,1],darkgray:[169,169,169,1],darkgreen:[0,100,0,1],darkgrey:[169,169,169,1],darkkhaki:[189,183,107,1],darkmagenta:[139,0,139,1],darkolivegreen:[85,107,47,1],darkorange:[255,140,0,1],darkorchid:[153,50,204,1],darkred:[139,0,0,1],darksalmon:[233,150,122,1],darkseagreen:[143,188,143,1],darkslateblue:[72,61,139,1],darkslategray:[47,79,79,1],darkslategrey:[47,79,79,1],darkturquoise:[0,206,209,1],darkviolet:[148,0,211,1],deeppink:[255,20,147,1],deepskyblue:[0,191,255,1],dimgray:[105,105,105,1],dimgrey:[105,105,105,1],dodgerblue:[30,144,255,1],firebrick:[178,34,34,1],floralwhite:[255,250,240,1],forestgreen:[34,139,34,1],fuchsia:[255,0,255,1],gainsboro:[220,220,220,1],ghostwhite:[248,248,255,1],gold:[255,215,0,1],goldenrod:[218,165,32,1],gray:[128,128,128,1],green:[0,128,0,1],greenyellow:[173,255,47,1],grey:[128,128,128,1],honeydew:[240,255,240,1],hotpink:[255,105,180,1],indianred:[205,92,92,1],indigo:[75,0,130,1],ivory:[255,255,240,1],khaki:[240,230,140,1],lavender:[230,230,250,1],lavenderblush:[255,240,245,1],lawngreen:[124,252,0,1],lemonchiffon:[255,250,205,1],lightblue:[173,216,230,1],lightcoral:[240,128,128,1],lightcyan:[224,255,255,1],lightgoldenrodyellow:[250,250,210,1],lightgray:[211,211,211,1],lightgreen:[144,238,144,1],lightgrey:[211,211,211,1],lightpink:[255,182,193,1],lightsalmon:[255,160,122,1],lightseagreen:[32,178,170,1],lightskyblue:[135,206,250,1],lightslategray:[119,136,153,1],lightslategrey:[119,136,153,1],lightsteelblue:[176,196,222,1],lightyellow:[255,255,224,1],lime:[0,255,0,1],limegreen:[50,205,50,1],linen:[250,240,230,1],magenta:[255,0,255,1],maroon:[128,0,0,1],mediumaquamarine:[102,205,170,1],mediumblue:[0,0,205,1],mediumorchid:[186,85,211,1],mediumpurple:[147,112,219,1],mediumseagreen:[60,179,113,1],mediumslateblue:[123,104,238,1],mediumspringgreen:[0,250,154,1],mediumturquoise:[72,209,204,1],mediumvioletred:[199,21,133,1],midnightblue:[25,25,112,1],mintcream:[245,255,250,1],mistyrose:[255,228,225,1],moccasin:[255,228,181,1],navajowhite:[255,222,173,1],navy:[0,0,128,1],oldlace:[253,245,230,1],olive:[128,128,0,1],olivedrab:[107,142,35,1],orange:[255,165,0,1],orangered:[255,69,0,1],orchid:[218,112,214,1],palegoldenrod:[238,232,170,1],palegreen:[152,251,152,1],paleturquoise:[175,238,238,1],palevioletred:[219,112,147,1],papayawhip:[255,239,213,1],peachpuff:[255,218,185,1],peru:[205,133,63,1],pink:[255,192,203,1],plum:[221,160,221,1],powderblue:[176,224,230,1],purple:[128,0,128,1],rebeccapurple:[102,51,153,1],red:[255,0,0,1],rosybrown:[188,143,143,1],royalblue:[65,105,225,1],saddlebrown:[139,69,19,1],salmon:[250,128,114,1],sandybrown:[244,164,96,1],seagreen:[46,139,87,1],seashell:[255,245,238,1],sienna:[160,82,45,1],silver:[192,192,192,1],skyblue:[135,206,235,1],slateblue:[106,90,205,1],slategray:[112,128,144,1],slategrey:[112,128,144,1],snow:[255,250,250,1],springgreen:[0,255,127,1],steelblue:[70,130,180,1],tan:[210,180,140,1],teal:[0,128,128,1],thistle:[216,191,216,1],tomato:[255,99,71,1],turquoise:[64,224,208,1],violet:[238,130,238,1],wheat:[245,222,179,1],white:[255,255,255,1],whitesmoke:[245,245,245,1],yellow:[255,255,0,1],yellowgreen:[154,205,50,1]};function o(m){return(m=Math.round(m))<0?0:m>255?255:m}function u(m){return o(m[m.length-1]==="%"?parseFloat(m)/100*255:parseInt(m))}function p(m){return(w=m[m.length-1]==="%"?parseFloat(m)/100:parseFloat(m))<0?0:w>1?1:w;var w}function _(m,w,j){return j<0?j+=1:j>1&&(j-=1),6*j<1?m+(w-m)*j*6:2*j<1?w:3*j<2?m+(w-m)*(2/3-j)*6:m}try{Zu.parseCSSColor=function(m){var w,j=m.replace(/ /g,"").toLowerCase();if(j in h)return h[j].slice();if(j[0]==="#")return j.length===4?(w=parseInt(j.substr(1),16))>=0&&w<=4095?[(3840&w)>>4|(3840&w)>>8,240&w|(240&w)>>4,15&w|(15&w)<<4,1]:null:j.length===7&&(w=parseInt(j.substr(1),16))>=0&&w<=16777215?[(16711680&w)>>16,(65280&w)>>8,255&w,1]:null;var k=j.indexOf("("),H=j.indexOf(")");if(k!==-1&&H+1===j.length){var E=j.substr(0,k),M=j.substr(k+1,H-(k+1)).split(","),O=1;switch(E){case"rgba":if(M.length!==4)return null;O=p(M.pop());case"rgb":return M.length!==3?null:[u(M[0]),u(M[1]),u(M[2]),O];case"hsla":if(M.length!==4)return null;O=p(M.pop());case"hsl":if(M.length!==3)return null;var P=(parseFloat(M[0])%360+360)%360/360,R=p(M[1]),$=p(M[2]),te=$<=.5?$*(R+1):$+R-$*R,ie=2*$-te;return[o(255*_(ie,te,P+1/3)),o(255*_(ie,te,P)),o(255*_(ie,te,P-1/3)),O];default:return null}}return null}}catch{}return Zu}();class ji{constructor(o,u,p,_=1){this.r=o,this.g=u,this.b=p,this.a=_}static parse(o){if(!o)return;if(o instanceof ji)return o;if(typeof o!="string")return;const u=Xu.parseCSSColor(o);return u?new ji(u[0]/255*u[3],u[1]/255*u[3],u[2]/255*u[3],u[3]):void 0}toStringPremultipliedAlpha(){const[o,u,p,_]=this.a===0?[0,0,0,0]:[255*this.r/this.a,255*this.g/this.a,255*this.b/this.a,this.a];return`rgba(${Math.round(o)},${Math.round(u)},${Math.round(p)},${_})`}toString(){const[o,u,p,_]=[this.r,this.g,this.b,this.a];return`rgba(${Math.round(255*o)},${Math.round(255*u)},${Math.round(255*p)},${_})`}toRenderColor(o){const{r:u,g:p,b:_,a:m}=this;return new Ml(o,u,p,_,m)}clone(){return new ji(this.r,this.g,this.b,this.a)}}class Ml{constructor(o,u,p,_,m){if(o){const w=o.image.height,j=w*w;u=m===0?0:u/m*(w-1),p=m===0?0:p/m*(w-1),_=m===0?0:_/m*(w-1);const k=Math.floor(u),H=Math.floor(p),E=Math.floor(_),M=Math.ceil(u),O=Math.ceil(p),P=Math.ceil(_),R=u-k,$=p-H,te=_-E,ie=o.image.data,de=4*(k+H*j+E*w),fe=4*(k+H*j+P*w),ae=4*(k+O*j+E*w),ge=4*(k+O*j+P*w),Be=4*(M+H*j+E*w),ke=4*(M+H*j+P*w),Ye=4*(M+O*j+E*w),Xe=4*(M+O*j+P*w);if(de<0||Xe>=ie.length)throw new Error("out of range");this.r=Ur(Ur(Ur(ie[de],ie[fe],te),Ur(ie[ae],ie[ge],te),$),Ur(Ur(ie[Be],ie[ke],te),Ur(ie[Ye],ie[Xe],te),$),R)/255*m,this.g=Ur(Ur(Ur(ie[de+1],ie[fe+1],te),Ur(ie[ae+1],ie[ge+1],te),$),Ur(Ur(ie[Be+1],ie[ke+1],te),Ur(ie[Ye+1],ie[Xe+1],te),$),R)/255*m,this.b=Ur(Ur(Ur(ie[de+2],ie[fe+2],te),Ur(ie[ae+2],ie[ge+2],te),$),Ur(Ur(ie[Be+2],ie[ke+2],te),Ur(ie[Ye+2],ie[Xe+2],te),$),R)/255*m,this.a=m}else this.r=u,this.g=p,this.b=_,this.a=m}toArray(){const{r:o,g:u,b:p,a:_}=this;return _===0?[0,0,0,0]:[255*o/_,255*u/_,255*p/_,_]}toHslaArray(){if(this.a===0)return[0,0,0,0];const{r:o,g:u,b:p,a:_}=this,m=Math.min(Math.max(o/_,0),1),w=Math.min(Math.max(u/_,0),1),j=Math.min(Math.max(p/_,0),1),k=Math.min(m,w,j),H=Math.max(m,w,j),E=(k+H)/2;if(k===H)return[0,0,100*E,_];const M=H-k,O=E>.5?M/(2-H-k):M/(H+k);let P=0;return H===m?P=(w-j)/M+(w<j?6:0):H===w?P=(j-m)/M+2:H===j&&(P=(m-w)/M+4),P*=60,[Math.min(Math.max(P,0),360),Math.min(Math.max(100*O,0),100),Math.min(Math.max(100*E,0),100),_]}toArray01(){const{r:o,g:u,b:p,a:_}=this;return _===0?[0,0,0,0]:[o/_,u/_,p/_,_]}toArray01Scaled(o){const{r:u,g:p,b:_,a:m}=this;return m===0?[0,0,0]:[u/m*o,p/m*o,_/m*o]}toArray01PremultipliedAlpha(){const{r:o,g:u,b:p,a:_}=this;return[o,u,p,_]}toArray01Linear(){const{r:o,g:u,b:p,a:_}=this;return _===0?[0,0,0,0]:[Math.pow(o/_,2.2),Math.pow(u/_,2.2),Math.pow(p/_,2.2),_]}}function Ur(h,o,u){return h*(1-u)+o*u}function sp(h,o,u){return h.map((p,_)=>Ur(p,o[_],u))}ji.black=new ji(0,0,0,1),ji.white=new ji(1,1,1,1),ji.transparent=new ji(0,0,0,0),ji.red=new ji(1,0,0,1),ji.blue=new ji(0,0,1,1);var Sr=Object.freeze({__proto__:null,array:sp,color:function(h,o,u){return new ji(Ur(h.r,o.r,u),Ur(h.g,o.g,u),Ur(h.b,o.b,u),Ur(h.a,o.a,u))},number:Ur});function op(h,...o){for(const u of o)for(const p in u)h[p]=u[p];return h}class _c extends Error{constructor(o,u){super(u),this.message=u,this.key=o}}class ou{constructor(o,u=[]){this.parent=o,this.bindings={};for(const[p,_]of u)this.bindings[p]=_}concat(o){return new ou(this,o)}get(o){if(this.bindings[o])return this.bindings[o];if(this.parent)return this.parent.get(o);throw new Error(`${o} not found in scope.`)}has(o){return!!this.bindings[o]||!!this.parent&&this.parent.has(o)}}const Od={kind:"null"},cr={kind:"number"},Pi={kind:"string"},Ii={kind:"boolean"},Nl={kind:"color"},Dd={kind:"object"},Si={kind:"value"},$s={kind:"collator"},us={kind:"formatted"},wc={kind:"resolvedImage"};function Da(h,o){return{kind:"array",itemType:h,N:o}}function ds(h){if(h.kind==="array"){const o=ds(h.itemType);return typeof h.N=="number"?`array<${o}, ${h.N}>`:h.itemType.kind==="value"?"array":`array<${o}>`}return h.kind}const ap=[Od,cr,Pi,Ii,Nl,us,Dd,Da(Si),wc];function Yu(h,o){if(o.kind==="error")return null;if(h.kind==="array"){if(o.kind==="array"&&(o.N===0&&o.itemType.kind==="value"||!Yu(h.itemType,o.itemType))&&(typeof h.N!="number"||h.N===o.N))return null}else{if(h.kind===o.kind)return null;if(h.kind==="value"){for(const u of ap)if(!Yu(u,o))return null}}return`Expected ${ds(h)} but found ${ds(o)} instead.`}function uf(h,o){return o.some(u=>u.kind===h.kind)}function Ju(h,o){return o.some(u=>u==="null"?h===null:u==="array"?Array.isArray(h):u==="object"?h&&!Array.isArray(h)&&typeof h=="object":u===typeof h)}class df{constructor(o,u,p){this.sensitivity=o?u?"variant":"case":u?"accent":"base",this.locale=p,this.collator=new Intl.Collator(this.locale?this.locale:[],{sensitivity:this.sensitivity,usage:"search"})}compare(o,u){return this.collator.compare(o,u)}resolvedLocale(){return new Intl.Collator(this.locale?this.locale:[]).resolvedOptions().locale}}class Xo{constructor(o,u,p,_,m){this.text=o.normalize?o.normalize():o,this.image=u,this.scale=p,this.fontStack=_,this.textColor=m}}class yo{constructor(o){this.sections=o}static fromString(o){return new yo([new Xo(o,null,null,null,null)])}isEmpty(){return this.sections.length===0||!this.sections.some(o=>o.text.length!==0||o.image&&o.image.namePrimary)}static factory(o){return o instanceof yo?o:yo.fromString(o)}toString(){return this.sections.length===0?"":this.sections.map(o=>o.text).join("")}serialize(){const o=["format"];for(const u of this.sections){if(u.image){o.push(["image",u.image.namePrimary]);continue}o.push(u.text);const p={};u.fontStack&&(p["text-font"]=["literal",u.fontStack.split(",")]),u.scale&&(p["font-scale"]=u.scale),u.textColor&&(p["text-color"]=["rgba"].concat(u.textColor.toRenderColor(null).toArray())),o.push(p)}return o}}class ma{constructor(o,u){if(this.id=o,this.options=u||{params:{}},this.options.transform){const{a:p,b:_,c:m,d:w,e:j,f:k}=this.options.transform;this.options.transform=new DOMMatrix([p,_,m,w,j,k])}else this.options.transform=new DOMMatrix([1,0,0,1,0,0])}static deserializeFromString(o){const u=JSON.parse(o),{a:p,b:_,c:m,d:w,e:j,f:k}=u.options.transform;return new DOMMatrix([p,_,m,w,j,k]),new ma(u.id,u.options)}scaleSelf(o){return this.options.transform=this.options.transform.scale(o),this}serialize(){const o={id:this.id};this.options&&(o.options=this.options);const{a:u,b:p,c:_,d:m,e:w,f:j}=this.options.transform;return o.options.transform={a:u,b:p,c:_,d:m,e:w,f:j},JSON.stringify(o)}}class Yo{constructor(o){this.namePrimary=o.namePrimary,o.nameSecondary&&(this.nameSecondary=o.nameSecondary),o.optionsPrimary&&(this.optionsPrimary=o.optionsPrimary),o.optionsSecondary&&(this.optionsSecondary=o.optionsSecondary),this.available=o.available}toString(){return this.namePrimary&&this.nameSecondary?`[${this.namePrimary},${this.nameSecondary}]`:this.namePrimary}getPrimary(){return new ma(this.namePrimary,{params:this.optionsPrimary&&this.optionsPrimary.params||{}})}getSerializedPrimary(){return this.getPrimary().serialize()}getSecondary(){return this.nameSecondary?new ma(this.nameSecondary,{params:this.optionsSecondary&&this.optionsSecondary.params||{}}):null}static from(o){return typeof o=="string"?Yo.build(o):o}static build(o,u,p,_){return o?new Yo({namePrimary:o,nameSecondary:u,optionsPrimary:p,optionsSecondary:_,available:!1}):null}}function Rl(h,o,u,p){return typeof h=="number"&&h>=0&&h<=255&&typeof o=="number"&&o>=0&&o<=255&&typeof u=="number"&&u>=0&&u<=255?p===void 0||typeof p=="number"&&p>=0&&p<=1?null:`Invalid rgba value [${[h,o,u,p].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid rgba value [${(typeof p=="number"?[h,o,u,p]:[h,o,u]).join(", ")}]: 'r', 'g', and 'b' must be between 0 and 255.`}function vo(h){if(h===null||typeof h=="string"||typeof h=="boolean"||typeof h=="number"||h instanceof ji||h instanceof df||h instanceof yo||h instanceof Yo)return!0;if(Array.isArray(h)){for(const o of h)if(!vo(o))return!1;return!0}if(typeof h=="object"){for(const o in h)if(!vo(h[o]))return!1;return!0}return!1}function xs(h){if(h===null)return Od;if(typeof h=="string")return Pi;if(typeof h=="boolean")return Ii;if(typeof h=="number")return cr;if(h instanceof ji)return Nl;if(h instanceof df)return $s;if(h instanceof yo)return us;if(h instanceof Yo)return wc;if(Array.isArray(h)){const o=h.length;let u;for(const p of h){const _=xs(p);if(u){if(u===_)continue;u=Si;break}u=_}return Da(u||Si,o)}return Dd}function ll(h){const o=typeof h;return h===null?"":o==="string"||o==="number"||o==="boolean"?String(h):h instanceof ji?h.toStringPremultipliedAlpha():h instanceof yo||h instanceof Yo?h.toString():JSON.stringify(h)}class tc{constructor(o,u){this.type=o,this.value=u}static parse(o,u){if(o.length!==2)return u.error(`'literal' expression requires exactly one argument, but found ${o.length-1} instead.`);if(!vo(o[1]))return u.error("invalid value");const p=o[1];let _=xs(p);const m=u.expectedType;return _.kind!=="array"||_.N!==0||!m||m.kind!=="array"||typeof m.N=="number"&&m.N!==0||(_=m),new tc(_,p)}evaluate(){return this.value}eachChild(){}outputDefined(){return!0}serialize(){return this.type.kind==="array"||this.type.kind==="object"?["literal",this.value]:this.value instanceof ji?["rgba"].concat(this.value.toRenderColor(null).toArray()):this.value instanceof yo?this.value.serialize():this.value}}class oo{constructor(o){this.name="ExpressionEvaluationError",this.message=o}toJSON(){return this.message}}const Sh={string:Pi,number:cr,boolean:Ii,object:Dd};class _l{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");let p,_=1;const m=o[0];if(m==="array"){let j,k;if(o.length>2){const H=o[1];if(typeof H!="string"||!(H in Sh)||H==="object")return u.error('The item type argument of "array" must be one of string, number, boolean',1);j=Sh[H],_++}else j=Si;if(o.length>3){if(o[2]!==null&&(typeof o[2]!="number"||o[2]<0||o[2]!==Math.floor(o[2])))return u.error('The length argument to "array" must be a positive integer literal',2);k=o[2],_++}p=Da(j,k)}else p=Sh[m];const w=[];for(;_<o.length;_++){const j=u.parse(o[_],_,Si);if(!j)return null;w.push(j)}return new _l(p,w)}evaluate(o){for(let u=0;u<this.args.length;u++){const p=this.args[u].evaluate(o);if(!Yu(this.type,xs(p)))return p;if(u===this.args.length-1)throw new oo(`The expression ${JSON.stringify(this.args[u].serialize())} evaluated to ${ds(xs(p))} but was expected to be of type ${ds(this.type)}.`)}return null}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=this.type,u=[o.kind];if(o.kind==="array"){const p=o.itemType;if(p.kind==="string"||p.kind==="number"||p.kind==="boolean"){u.push(p.kind);const _=o.N;(typeof _=="number"||this.args.length>1)&&u.push(_)}}return u.concat(this.args.map(p=>p.serialize()))}}class Qo{constructor(o){this.type=us,this.sections=o}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const p=o[1];if(!Array.isArray(p)&&typeof p=="object")return u.error("First argument must be an image or text section.");const _=[];let m=!1;for(let w=1;w<=o.length-1;++w){const j=o[w];if(m&&typeof j=="object"&&!Array.isArray(j)){m=!1;let k=null;if(j["font-scale"]&&(k=u.parseObjectValue(j["font-scale"],w,"font-scale",cr),!k))return null;let H=null;if(j["text-font"]&&(H=u.parseObjectValue(j["text-font"],w,"text-font",Da(Pi)),!H))return null;let E=null;if(j["text-color"]&&(E=u.parseObjectValue(j["text-color"],w,"text-color",Nl),!E))return null;const M=_[_.length-1];M.scale=k,M.font=H,M.textColor=E}else{const k=u.parse(o[w],w,Si);if(!k)return null;const H=k.type.kind;if(H!=="string"&&H!=="value"&&H!=="null"&&H!=="resolvedImage")return u.error("Formatted text type must be 'string', 'value', 'image' or 'null'.");m=!0,_.push({content:k,scale:null,font:null,textColor:null})}}return new Qo(_)}evaluate(o){return new yo(this.sections.map(u=>{const p=u.content.evaluate(o);return xs(p)===wc?new Xo("",p,null,null,null):new Xo(ll(p),null,u.scale?u.scale.evaluate(o):null,u.font?u.font.evaluate(o).join(","):null,u.textColor?u.textColor.evaluate(o):null)}))}eachChild(o){for(const u of this.sections)o(u.content),u.scale&&o(u.scale),u.font&&o(u.font),u.textColor&&o(u.textColor)}outputDefined(){return!1}serialize(){const o=["format"];for(const u of this.sections){o.push(u.content.serialize());const p={};u.scale&&(p["font-scale"]=u.scale.serialize()),u.font&&(p["text-font"]=u.font.serialize()),u.textColor&&(p["text-color"]=u.textColor.serialize()),o.push(p)}return o}}class Ud{constructor(o,u,p,_){this._imageWarnHistory={},this.type=wc,this.inputPrimary=o,this.inputSecondary=u,this.inputPrimaryParams=p,this.inputSecondaryParams=_}static parse(o,u){if(o.length<2)return u.error("Expected two or more arguments.");let p=1;const _=[];function m(){if(p<o.length){const j=u.parse(o[p],p++,Pi);return j?(_.push({image:j,options:void 0}),!0):(u.error(_.length?"Secondary image variant is not a string.":"No image name provided."),!1)}return!0}function w(){if(p<o.length){if((j=o[p])===null||typeof j!="object"||Array.isArray(j))return!0;const k=o[p].params,H=u.concat(p);if(!k)return p++,!0;if(typeof k!="object"||k.constructor!==Object)return H.error('Image options "params" should be an object'),!1;const E={},M=H.concat(void 0,"params");for(const O in k){if(!O)return M.error("Image parameter name should be non-empty"),!1;const P=M.concat(void 0,O).parse(k[O],void 0,Nl,void 0,{typeAnnotation:"coerce"});if(!P)return!1;E[O]=P}return _[_.length-1].options=E,p++,!0}var j;return!0}for(let j=0;j<2;j++)if(!m()||!w())return;return new Ud(_[0].image,_[1]?_[1].image:void 0,_[0].options,_[1]?_[1].options:void 0)}evaluateParams(o,u){const p={};if(u){for(const _ in u)if(u[_])try{const m=u[_].evaluate(o),w=`Ignoring image parameter "${_}" with semi-transparent color ${m.toString()}`;if(m.a!==1){this._imageWarnHistory[w]||(console.warn(w),this._imageWarnHistory[w]=!0);continue}p[_]=m}catch{continue}if(Object.keys(p).length!==0)return{params:p}}}evaluate(o){const u=Yo.build(this.inputPrimary.evaluate(o),this.inputSecondary?this.inputSecondary.evaluate(o):void 0,this.inputPrimaryParams?this.evaluateParams(o,this.inputPrimaryParams):void 0,this.inputSecondaryParams?this.evaluateParams(o,this.inputSecondaryParams):void 0);return u&&o.availableImages&&(u.available=o.availableImages.indexOf(u.namePrimary)>-1,u.nameSecondary&&u.available&&o.availableImages&&(u.available=o.availableImages.indexOf(u.nameSecondary)>-1)),u}eachChild(o){if(o(this.inputPrimary),this.inputPrimaryParams)for(const u in this.inputPrimaryParams)this.inputPrimaryParams[u]&&o(this.inputPrimaryParams[u]);if(this.inputSecondary&&(o(this.inputSecondary),this.inputSecondaryParams))for(const u in this.inputSecondaryParams)this.inputSecondaryParams[u]&&o(this.inputSecondaryParams[u])}outputDefined(){return!1}serializeParams(o){const u={};if(o){for(const p in o)o[p]&&(u[p]=o[p].serialize());return{params:u}}}serialize(){const o=["image",this.inputPrimary.serialize()];return this.inputPrimaryParams&&o.push(this.serializeParams(this.inputPrimaryParams)),this.inputSecondary&&(o.push(this.inputSecondary.serialize()),this.inputSecondaryParams&&o.push(this.serializeParams(this.inputSecondaryParams))),o}}function ta(h){return h instanceof Number?"number":h instanceof String?"string":h instanceof Boolean?"boolean":Array.isArray(h)?"array":h===null?"null":typeof h}const Yp={"to-boolean":Ii,"to-color":Nl,"to-number":cr,"to-string":Pi};class bc{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expected at least one argument.");const p=o[0],_=[];let m=Od;if(p==="to-array"){if(!Array.isArray(o[1]))return null;const w=o[1].length;if(u.expectedType){if(u.expectedType.kind!=="array")return u.error(`Expected ${u.expectedType.kind} but found array.`);m=Da(u.expectedType.itemType,w)}else{if(!(w>0&&vo(o[1][0])))return null;m=Da(xs(o[1][0]),w)}for(let j=0;j<w;j++){const k=o[1][j];let H;if(ta(k)==="array")H=u.parse(k,void 0,m.itemType);else{const E=ta(k);if(E!==m.itemType.kind)return u.error(`Expected ${m.itemType.kind} but found ${E}.`);H=u.registry.literal.parse(["literal",k===void 0?null:k],u)}if(!H)return null;_.push(H)}}else{if((p==="to-boolean"||p==="to-string")&&o.length!==2)return u.error("Expected one argument.");m=Yp[p];for(let w=1;w<o.length;w++){const j=u.parse(o[w],w,Si);if(!j)return null;_.push(j)}}return new bc(m,_)}evaluate(o){if(this.type.kind==="boolean")return!!this.args[0].evaluate(o);if(this.type.kind==="color"){let u,p;for(const _ of this.args){if(u=_.evaluate(o),p=null,u instanceof ji)return u;if(typeof u=="string"){const m=o.parseColor(u);if(m)return m}else if(Array.isArray(u)&&(p=u.length<3||u.length>4?`Invalid rbga value ${JSON.stringify(u)}: expected an array containing either three or four numeric values.`:Rl(u[0],u[1],u[2],u[3]),!p))return new ji(u[0]/255,u[1]/255,u[2]/255,u[3])}throw new oo(p||`Could not parse color from value '${typeof u=="string"?u:String(JSON.stringify(u))}'`)}if(this.type.kind==="number"){let u=null;for(const p of this.args){if(u=p.evaluate(o),u===null)return 0;const _=Number(u);if(!isNaN(_))return _}throw new oo(`Could not convert ${JSON.stringify(u)} to number.`)}return this.type.kind==="formatted"?yo.fromString(ll(this.args[0].evaluate(o))):this.type.kind==="resolvedImage"?Yo.build(ll(this.args[0].evaluate(o))):this.type.kind==="array"?this.args.map(u=>u.evaluate(o)):ll(this.args[0].evaluate(o))}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){if(this.type.kind==="formatted")return new Qo([{content:this.args[0],scale:null,font:null,textColor:null}]).serialize();if(this.type.kind==="resolvedImage")return new Ud(this.args[0]).serialize();const o=this.type.kind==="array"?[]:[`to-${this.type.kind}`];return this.eachChild(u=>{o.push(u.serialize())}),o}}const au=["Unknown","Point","LineString","Polygon"];class zd{constructor(o,u){this.globals=null,this.feature=null,this.featureState=null,this.formattedSection=null,this._parseColorCache={},this.availableImages=null,this.canonical=null,this.featureTileCoord=null,this.featureDistanceData=null,this.scope=o,this.options=u}id(){return this.feature&&this.feature.id!==void 0?this.feature.id:null}geometryType(){return this.feature?typeof this.feature.type=="number"?au[this.feature.type]:this.feature.type:null}geometry(){return this.feature&&"geometry"in this.feature?this.feature.geometry:null}canonicalID(){return this.canonical}properties(){return this.feature&&this.feature.properties||{}}measureLight(o){return this.globals.brightness||0}distanceFromCenter(){if(this.featureTileCoord&&this.featureDistanceData){const o=this.featureDistanceData.center,u=this.featureDistanceData.scale,{x:p,y:_}=this.featureTileCoord;return this.featureDistanceData.bearing[0]*(p*u-o[0])+this.featureDistanceData.bearing[1]*(_*u-o[1])}return 0}parseColor(o){let u=this._parseColorCache[o];return u||(u=this._parseColorCache[o]=ji.parse(o)),u}getConfig(o){return this.options?this.options.get(o):null}}class ga{constructor(o,u,p,_,m){this.name=o,this.type=u,this._evaluate=p,this.args=_,this._overloadIndex=m}evaluate(o){if(!this._evaluate){const u=ga.definitions[this.name];this._evaluate=Array.isArray(u)?u[2]:u.overloads[this._overloadIndex][1]}return this._evaluate(o,this.args)}eachChild(o){this.args.forEach(o)}outputDefined(){return!1}serialize(){return[this.name].concat(this.args.map(o=>o.serialize()))}static parse(o,u){const p=o[0],_=ga.definitions[p];if(!_)return u.error(`Unknown expression "${p}". If you wanted a literal array, use ["literal", [...]].`,0);const m=Array.isArray(_)?_[0]:_.type,w=Array.isArray(_)?[[_[1],_[2]]]:_.overloads,j=[];let k=null,H=-1;for(const[E,M]of w){if(Array.isArray(E)&&E.length!==o.length-1)continue;j.push(E),H++,k=new va(u.registry,u.path,null,u.scope,void 0,u._scope,u.options);const O=[];let P=!1;for(let R=1;R<o.length;R++){const $=o[R],te=Array.isArray(E)?E[R-1]:E.type,ie=k.parse($,1+O.length,te);if(!ie){P=!0;break}O.push(ie)}if(!P)if(Array.isArray(E)&&E.length!==O.length)k.error(`Expected ${E.length} arguments, but found ${O.length} instead.`);else{for(let R=0;R<O.length;R++){const $=Array.isArray(E)?E[R]:E.type,te=O[R];k.concat(R+1).checkSubtype($,te.type)}if(k.errors.length===0)return new ga(p,m,M,O,H)}}if(j.length===1)u.errors.push(...k.errors);else{const E=(j.length?j:w.map(([O])=>O)).map(Ds).join(" | "),M=[];for(let O=1;O<o.length;O++){const P=u.parse(o[O],1+M.length);if(!P)return null;M.push(ds(P.type))}u.error(`Expected arguments of type ${E}, but found (${M.join(", ")}) instead.`)}return null}static register(o,u){ga.definitions=u;for(const p in u)o[p]=ga}}function Ds(h){return Array.isArray(h)?`(${h.map(ds).join(", ")})`:`(${ds(h.type)}...)`}class nc{constructor(o,u,p){this.type=$s,this.locale=p,this.caseSensitive=o,this.diacriticSensitive=u}static parse(o,u){if(o.length!==2)return u.error("Expected one argument.");const p=o[1];if(typeof p!="object"||Array.isArray(p))return u.error("Collator options argument must be an object.");const _=p["case-sensitive"]===void 0?u.parse(!1,1,Ii):u.parseObjectValue(p["case-sensitive"],1,"case-sensitive",Ii);if(!_)return null;const m=p["diacritic-sensitive"]===void 0?u.parse(!1,1,Ii):u.parseObjectValue(p["diacritic-sensitive"],1,"diacritic-sensitive",Ii);if(!m)return null;let w=null;return p.locale&&(w=u.parseObjectValue(p.locale,1,"locale",Pi),!w)?null:new nc(_,m,w)}evaluate(o){return new df(this.caseSensitive.evaluate(o),this.diacriticSensitive.evaluate(o),this.locale?this.locale.evaluate(o):null)}eachChild(o){o(this.caseSensitive),o(this.diacriticSensitive),this.locale&&o(this.locale)}outputDefined(){return!1}serialize(){const o={};return o["case-sensitive"]=this.caseSensitive.serialize(),o["diacritic-sensitive"]=this.diacriticSensitive.serialize(),this.locale&&(o.locale=this.locale.serialize()),["collator",o]}}function wu(h,o,u=0,p=h.length-1,_=ce){for(;p>u;){if(p-u>600){const k=p-u+1,H=o-u+1,E=Math.log(k),M=.5*Math.exp(2*E/3),O=.5*Math.sqrt(E*M*(k-M)/k)*(H-k/2<0?-1:1);wu(h,o,Math.max(u,Math.floor(o-H*M/k+O)),Math.min(p,Math.floor(o+(k-H)*M/k+O)),_)}const m=h[o];let w=u,j=p;for(Qd(h,u,o),_(h[p],m)>0&&Qd(h,u,p);w<j;){for(Qd(h,w,j),w++,j--;_(h[w],m)<0;)w++;for(;_(h[j],m)>0;)j--}_(h[u],m)===0?Qd(h,u,j):(j++,Qd(h,j,p)),j<=o&&(u=j+1),o<=j&&(p=j-1)}}function Qd(h,o,u){const p=h[o];h[o]=h[u],h[u]=p}function ce(h,o){return h<o?-1:h>o?1:0}function Ke(h){let o=0;for(let u,p,_=0,m=h.length,w=m-1;_<m;w=_++)u=h[_],p=h[w],o+=(p.x-u.x)*(u.y+p.y);return o}function Ft(h,o){h[0]=Math.min(h[0],o[0]),h[1]=Math.min(h[1],o[1]),h[2]=Math.max(h[2],o[0]),h[3]=Math.max(h[3],o[1])}function sn(h,o){return!(h[0]<=o[0]||h[2]>=o[2]||h[1]<=o[1]||h[3]>=o[3])}function Sn(h,o,u){const p=h[0]-o[0],_=h[1]-o[1],m=h[0]-u[0],w=h[1]-u[1];return p*w-m*_==0&&p*m<=0&&_*w<=0}function On(h,o,u=!1){let p=!1;for(let j=0,k=o.length;j<k;j++){const H=o[j];for(let E=0,M=H.length,O=M-1;E<M;O=E++){const P=H[O],R=H[E];if(Sn(h,P,R))return u;(m=P)[1]>(_=h)[1]!=(w=R)[1]>_[1]&&_[0]<(w[0]-m[0])*(_[1]-m[1])/(w[1]-m[1])+m[0]&&(p=!p)}}var _,m,w;return p}function dr(h,o,u,p){const _=p[0]-u[0],m=p[1]-u[1],w=(h[0]-u[0])*m-_*(h[1]-u[1]),j=(o[0]-u[0])*m-_*(o[1]-u[1]);return w>0&&j<0||w<0&&j>0}function zr(h,o,u,p){return(_=[p[0]-u[0],p[1]-u[1]])[0]*(m=[o[0]-h[0],o[1]-h[1]])[1]-_[1]*m[0]!=0&&!(!dr(h,o,u,p)||!dr(u,p,h,o));var _,m}const Jr=8192;function Yi(h,o){const u=(180+h[0])/360,p=(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h[1]*Math.PI/360)))/360,_=Math.pow(2,o.z);return[Math.round(u*_*Jr),Math.round(p*_*Jr)]}function Vi(h,o){for(let u=0;u<o.length;u++)if(On(h,o[u]))return!0;return!1}function _s(h,o,u){for(const p of u)for(let _=0,m=p.length,w=m-1;_<m;w=_++)if(zr(h,o,p[w],p[_]))return!0;return!1}function Ho(h,o){for(let u=0;u<h.length;++u)if(!On(h[u],o))return!1;for(let u=0;u<h.length-1;++u)if(_s(h[u],h[u+1],o))return!1;return!0}function To(h,o){for(let u=0;u<o.length;u++)if(Ho(h,o[u]))return!0;return!1}function Mr(h,o,u){const p=[];for(let _=0;_<h.length;_++){const m=[];for(let w=0;w<h[_].length;w++){const j=Yi(h[_][w],u);Ft(o,j),m.push(j)}p.push(m)}return p}function mr(h,o,u){const p=[];for(let _=0;_<h.length;_++){const m=Mr(h[_],o,u);p.push(m)}return p}function ya(h,o,u,p){if(h[0]<u[0]||h[0]>u[2]){const _=.5*p;let m=h[0]-u[0]>_?-p:u[0]-h[0]>_?p:0;m===0&&(m=h[0]-u[2]>_?-p:u[2]-h[0]>_?p:0),h[0]+=m}Ft(o,h)}function Rr(h,o,u,p){const _=Math.pow(2,p.z)*Jr,m=[p.x*Jr,p.y*Jr],w=[];if(!h)return w;for(const j of h)for(const k of j){const H=[k.x+m[0],k.y+m[1]];ya(H,o,u,_),w.push(H)}return w}function xo(h,o,u,p){const _=Math.pow(2,p.z)*Jr,m=[p.x*Jr,p.y*Jr],w=[];if(!h)return w;for(const k of h){const H=[];for(const E of k){const M=[E.x+m[0],E.y+m[1]];Ft(o,M),H.push(M)}w.push(H)}if(o[2]-o[0]<=_/2){(j=o)[0]=j[1]=1/0,j[2]=j[3]=-1/0;for(const k of w)for(const H of k)ya(H,o,u,_)}var j;return w}class Ea{constructor(o,u){this.type=Ii,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'within' expression requires exactly one argument, but found ${o.length-1} instead.`);if(vo(o[1])){const p=o[1];if(p.type==="FeatureCollection")for(let _=0;_<p.features.length;++_){const m=p.features[_].geometry.type;if(m==="Polygon"||m==="MultiPolygon")return new Ea(p,p.features[_].geometry)}else if(p.type==="Feature"){const _=p.geometry.type;if(_==="Polygon"||_==="MultiPolygon")return new Ea(p,p.geometry)}else if(p.type==="Polygon"||p.type==="MultiPolygon")return new Ea(p,p)}return u.error("'within' expression requires valid geojson object that contains polygon geometry type.")}evaluate(o){if(o.geometry()!=null&&o.canonicalID()!=null){if(o.geometryType()==="Point")return function(u,p){const _=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if(p.type==="Polygon"){const j=Mr(p.coordinates,m,w),k=Rr(u.geometry(),_,m,w);if(!sn(_,m))return!1;for(const H of k)if(!On(H,j))return!1}if(p.type==="MultiPolygon"){const j=mr(p.coordinates,m,w),k=Rr(u.geometry(),_,m,w);if(!sn(_,m))return!1;for(const H of k)if(!Vi(H,j))return!1}return!0}(o,this.geometries);if(o.geometryType()==="LineString")return function(u,p){const _=[1/0,1/0,-1/0,-1/0],m=[1/0,1/0,-1/0,-1/0],w=u.canonicalID();if(!w)return!1;if(p.type==="Polygon"){const j=Mr(p.coordinates,m,w),k=xo(u.geometry(),_,m,w);if(!sn(_,m))return!1;for(const H of k)if(!Ho(H,j))return!1}if(p.type==="MultiPolygon"){const j=mr(p.coordinates,m,w),k=xo(u.geometry(),_,m,w);if(!sn(_,m))return!1;for(const H of k)if(!To(H,j))return!1}return!0}(o,this.geometries)}return!1}eachChild(){}outputDefined(){return!0}serialize(){return["within",this.geojson]}}const Lr={kilometers:1,miles:1e3/1609.344,nauticalmiles:1e3/1852,meters:1e3,metres:1e3,yards:1e3/.9144,feet:1e3/.3048,inches:1e3/.0254},Bh=1/298.257223563,Hd=Bh*(2-Bh),bu=Math.PI/180;class ed{static fromTile(o,u,p){const _=Math.PI*(1-2*(o+.5)/Math.pow(2,u)),m=Math.atan(.5*(Math.exp(_)-Math.exp(-_)))/bu;return new ed(m,p)}static get units(){return Lr}constructor(o,u){if(o===void 0)throw new Error("No latitude given.");if(u&&!Lr[u])throw new Error(`Unknown unit ${u}. Use one of: ${Object.keys(Lr).join(", ")}`);const p=6378.137*bu*(u?Lr[u]:1),_=Math.cos(o*bu),m=1/(1-Hd*(1-_*_)),w=Math.sqrt(m);this.kx=p*w*_,this.ky=p*w*m*(1-Hd)}distance(o,u){const p=ao(o[0]-u[0])*this.kx,_=(o[1]-u[1])*this.ky;return Math.sqrt(p*p+_*_)}bearing(o,u){const p=ao(u[0]-o[0])*this.kx;return Math.atan2(p,(u[1]-o[1])*this.ky)/bu}destination(o,u,p){const _=p*bu;return this.offset(o,Math.sin(_)*u,Math.cos(_)*u)}offset(o,u,p){return[o[0]+u/this.kx,o[1]+p/this.ky]}lineDistance(o){let u=0;for(let p=0;p<o.length-1;p++)u+=this.distance(o[p],o[p+1]);return u}area(o){let u=0;for(let p=0;p<o.length;p++){const _=o[p];for(let m=0,w=_.length,j=w-1;m<w;j=m++)u+=ao(_[m][0]-_[j][0])*(_[m][1]+_[j][1])*(p?-1:1)}return Math.abs(u)/2*this.kx*this.ky}along(o,u){let p=0;if(u<=0)return o[0];for(let _=0;_<o.length-1;_++){const m=o[_],w=o[_+1],j=this.distance(m,w);if(p+=j,p>u)return na(m,w,(u-(p-j))/j)}return o[o.length-1]}pointToSegmentDistance(o,u,p){let[_,m]=u,w=ao(p[0]-_)*this.kx,j=(p[1]-m)*this.ky;if(w!==0||j!==0){const k=(ao(o[0]-_)*this.kx*w+(o[1]-m)*this.ky*j)/(w*w+j*j);k>1?(_=p[0],m=p[1]):k>0&&(_+=w/this.kx*k,m+=j/this.ky*k)}return w=ao(o[0]-_)*this.kx,j=(o[1]-m)*this.ky,Math.sqrt(w*w+j*j)}pointOnLine(o,u){let p=1/0,_=o[0][0],m=o[0][1],w=0,j=0;for(let k=0;k<o.length-1;k++){let H=o[k][0],E=o[k][1],M=ao(o[k+1][0]-H)*this.kx,O=(o[k+1][1]-E)*this.ky,P=0;M===0&&O===0||(P=(ao(u[0]-H)*this.kx*M+(u[1]-E)*this.ky*O)/(M*M+O*O),P>1?(H=o[k+1][0],E=o[k+1][1]):P>0&&(H+=M/this.kx*P,E+=O/this.ky*P)),M=ao(u[0]-H)*this.kx,O=(u[1]-E)*this.ky;const R=M*M+O*O;R<p&&(p=R,_=H,m=E,w=k,j=P)}return{point:[_,m],index:w,t:Math.max(0,Math.min(1,j))}}lineSlice(o,u,p){let _=this.pointOnLine(p,o),m=this.pointOnLine(p,u);if(_.index>m.index||_.index===m.index&&_.t>m.t){const H=_;_=m,m=H}const w=[_.point],j=_.index+1,k=m.index;!Vd(p[j],w[0])&&j<=k&&w.push(p[j]);for(let H=j+1;H<=k;H++)w.push(p[H]);return Vd(p[k],m.point)||w.push(m.point),w}lineSliceAlong(o,u,p){let _=0;const m=[];for(let w=0;w<p.length-1;w++){const j=p[w],k=p[w+1],H=this.distance(j,k);if(_+=H,_>o&&m.length===0&&m.push(na(j,k,(o-(_-H))/H)),_>=u)return m.push(na(j,k,(u-(_-H))/H)),m;_>o&&m.push(k)}return m}bufferPoint(o,u){const p=u/this.ky,_=u/this.kx;return[o[0]-_,o[1]-p,o[0]+_,o[1]+p]}bufferBBox(o,u){const p=u/this.ky,_=u/this.kx;return[o[0]-_,o[1]-p,o[2]+_,o[3]+p]}insideBBox(o,u){return ao(o[0]-u[0])>=0&&ao(o[0]-u[2])<=0&&o[1]>=u[1]&&o[1]<=u[3]}}function Vd(h,o){return h[0]===o[0]&&h[1]===o[1]}function na(h,o,u){const p=ao(o[0]-h[0]);return[h[0]+p*u,h[1]+(o[1]-h[1])*u]}function ao(h){for(;h<-180;)h+=360;for(;h>180;)h-=360;return h}class Cc{constructor(o=[],u=(p,_)=>p<_?-1:p>_?1:0){if(this.data=o,this.length=this.data.length,this.compare=u,this.length>0)for(let p=(this.length>>1)-1;p>=0;p--)this._down(p)}push(o){this.data.push(o),this._up(this.length++)}pop(){if(this.length===0)return;const o=this.data[0],u=this.data.pop();return--this.length>0&&(this.data[0]=u,this._down(0)),o}peek(){return this.data[0]}_up(o){const{data:u,compare:p}=this,_=u[o];for(;o>0;){const m=o-1>>1,w=u[m];if(p(_,w)>=0)break;u[o]=w,o=m}u[o]=_}_down(o){const{data:u,compare:p}=this,_=this.length>>1,m=u[o];for(;o<_;){let w=1+(o<<1);const j=w+1;if(j<this.length&&p(u[j],u[w])<0&&(w=j),p(u[w],m)>=0)break;u[o]=u[w],o=w}u[o]=m}}var Wn=8192;function $d(h,o){return o.dist-h.dist}const rc=100,Gs=50;function Cu(h){const o=[1/0,1/0,-1/0,-1/0];if(o.length!==h.length)return!1;for(let u=0;u<o.length;u++)if(o[u]!==h[u])return!1;return!0}function Su(h){return h[1]-h[0]+1}function lu(h,o){const u=h[1]>=h[0]&&h[1]<o;return u||console.warn("Distance Expression: Index is out of range"),u}function wl(h,o){if(h[0]>h[1])return[null,null];const u=Su(h);if(o){if(u===2)return[h,null];const p=Math.floor(u/2);return[[h[0],h[0]+p],[h[0]+p,h[1]]]}{if(u===1)return[h,null];const p=Math.floor(u/2)-1;return[[h[0],h[0]+p],[h[0]+p+1,h[1]]]}}function Uc(h,o){const u=[1/0,1/0,-1/0,-1/0];if(!lu(o,h.length))return u;for(let p=o[0];p<=o[1];++p)Ft(u,h[p]);return u}function Sc(h){const o=[1/0,1/0,-1/0,-1/0];for(let u=0;u<h.length;++u)for(let p=0;p<h[u].length;++p)Ft(o,h[u][p]);return o}function Ua(h,o,u){if(Cu(h)||Cu(o))return NaN;let p=0,_=0;return h[2]<o[0]&&(p=o[0]-h[2]),h[0]>o[2]&&(p=h[0]-o[2]),h[1]>o[3]&&(_=h[1]-o[3]),h[3]<o[1]&&(_=o[1]-h[3]),u.distance([0,0],[p,_])}function Gd(h){return 360*h-180}function hf(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function Ol(h,o){const u=Math.pow(2,o.z),p=(h.y/Wn+o.y)/u;return[Gd((h.x/Wn+o.x)/u),hf(p)]}function Dl(h,o){const u=[];for(let p=0;p<h.length;++p)u.push(Ol(h[p],o));return u}function Kd(h,o,u){const p=u.pointOnLine(o,h).point;return u.distance(h,p)}function td(h,o,u,p,_){const m=u.slice(p[0],p[1]+1);let w=1/0;for(let j=o[0];j<=o[1];++j)if((w=Math.min(w,Kd(h[j],m,_)))===0)return 0;return w}function aa(h,o,u,p,_){const m=Math.min(_.pointToSegmentDistance(h,u,p),_.pointToSegmentDistance(o,u,p)),w=Math.min(_.pointToSegmentDistance(u,h,o),_.pointToSegmentDistance(p,h,o));return Math.min(m,w)}function yn(h,o,u,p,_){if(!lu(o,h.length)||!lu(p,u.length))return NaN;let m=1/0;for(let w=o[0];w<o[1];++w)for(let j=p[0];j<p[1];++j){if(zr(h[w],h[w+1],u[j],u[j+1]))return 0;m=Math.min(m,aa(h[w],h[w+1],u[j],u[j+1],_))}return m}function $n(h,o,u,p,_){if(!lu(o,h.length)||!lu(p,u.length))return NaN;let m=1/0;for(let w=o[0];w<=o[1];++w)for(let j=p[0];j<=p[1];++j)if((m=Math.min(m,_.distance(h[w],u[j])))===0)return m;return m}function jn(h,o,u){if(On(h,o,!0))return 0;let p=1/0;for(const _ of o){const m=_.length;if(m<2)return console.warn("Distance Expression: Invalid polygon!"),NaN;if(_[0]!==_[m-1]&&(p=Math.min(p,u.pointToSegmentDistance(h,_[m-1],_[0])))===0||(p=Math.min(p,Kd(h,_,u)))===0)return p}return p}function Hr(h,o,u,p){if(!lu(o,h.length))return NaN;for(let m=o[0];m<=o[1];++m)if(On(h[m],u,!0))return 0;let _=1/0;for(let m=o[0];m<o[1];++m)for(const w of u)for(let j=0,k=w.length,H=k-1;j<k;H=j++){if(zr(h[m],h[m+1],w[H],w[j]))return 0;_=Math.min(_,aa(h[m],h[m+1],w[H],w[j],p))}return _}function ci(h,o){for(const u of h)for(let p=0;p<=u.length-1;++p)if(On(u[p],o,!0))return!0;return!1}function Bi(h,o,u,p=1/0){const _=Sc(h),m=Sc(o);if(p!==1/0&&Ua(_,m,u)>=p)return p;if(sn(_,m)){if(ci(h,o))return 0}else if(ci(o,h))return 0;let w=p;for(const j of h)for(let k=0,H=j.length,E=H-1;k<H;E=k++)for(const M of o)for(let O=0,P=M.length,R=P-1;O<P;R=O++){if(zr(j[E],j[k],M[R],M[O]))return 0;w=Math.min(w,aa(j[E],j[k],M[R],M[O],u))}return w}function _o(h,o,u,p,_,m,w){if(m===null||w===null)return;const j=Ua(Uc(p,m),Uc(_,w),u);j<o&&h.push({dist:j,range1:m,range2:w})}function Ys(h,o,u,p,_=1/0){let m=Math.min(p.distance(h[0],u[0][0]),_);if(m===0)return m;const w=new Cc([{dist:0,range1:[0,h.length-1],range2:[0,0]}],$d),j=o?Gs:rc,k=Sc(u);for(;w.length;){const H=w.pop();if(H.dist>=m)continue;const E=H.range1;if(Su(E)<=j){if(!lu(E,h.length))return NaN;if(o){const M=Hr(h,E,u,p);if((m=Math.min(m,M))===0)return m}else for(let M=E[0];M<=E[1];++M){const O=jn(h[M],u,p);if((m=Math.min(m,O))===0)return m}}else{const M=wl(E,o);if(M[0]!==null){const O=Ua(Uc(h,M[0]),k,p);O<m&&w.push({dist:O,range1:M[0],range2:[0,0]})}if(M[1]!==null){const O=Ua(Uc(h,M[1]),k,p);O<m&&w.push({dist:O,range1:M[1],range2:[0,0]})}}}return m}function Wd(h,o,u,p,_,m=1/0){let w=Math.min(m,_.distance(h[0],u[0]));if(w===0)return w;const j=new Cc([{dist:0,range1:[0,h.length-1],range2:[0,u.length-1]}],$d),k=o?Gs:rc,H=p?Gs:rc;for(;j.length;){const E=j.pop();if(E.dist>=w)continue;const M=E.range1,O=E.range2;if(Su(M)<=k&&Su(O)<=H){if(!lu(M,h.length)||!lu(O,u.length))return NaN;if(o&&p?w=Math.min(w,yn(h,M,u,O,_)):o||p?o&&!p?w=Math.min(w,td(u,O,h,M,_)):!o&&p&&(w=Math.min(w,td(h,M,u,O,_))):w=Math.min(w,$n(h,M,u,O,_)),w===0)return w}else{const P=wl(M,o),R=wl(O,p);_o(j,w,_,h,u,P[0],R[0]),_o(j,w,_,h,u,P[0],R[1]),_o(j,w,_,h,u,P[1],R[0]),_o(j,w,_,h,u,P[1],R[1])}}return w}function nd(h,o,u,p,_=1/0){let m=_;const w=Uc(h,[0,h.length-1]);for(const j of u)if(!(m!==1/0&&Ua(w,Uc(j,[0,j.length-1]),p)>=m)&&(m=Math.min(m,Wd(h,o,j,!0,p,m)),m===0))return m;return m}function la(h,o,u,p,_=1/0){let m=_;const w=Uc(h,[0,h.length-1]);for(const j of u){if(m!==1/0&&Ua(w,Sc(j),p)>=m)continue;const k=Ys(h,o,j,p,m);if(isNaN(k))return k;if((m=Math.min(m,k))===0)return m}return m}function Bc(h){return h==="Point"||h==="MultiPoint"||h==="LineString"||h==="MultiLineString"||h==="Polygon"||h==="MultiPolygon"}class Ec{constructor(o,u){this.type=cr,this.geojson=o,this.geometries=u}static parse(o,u){if(o.length!==2)return u.error(`'distance' expression requires either one argument, but found ' ${o.length-1} instead.`);if(vo(o[1])){const p=o[1];if(p.type==="FeatureCollection"){for(let _=0;_<p.features.length;++_)if(Bc(p.features[_].geometry.type))return new Ec(p,p.features[_].geometry)}else if(p.type==="Feature"){if(Bc(p.geometry.type))return new Ec(p,p.geometry)}else if(Bc(p.type))return new Ec(p,p)}return u.error("'distance' expression needs to be an array with format ['Distance', GeoJSONObj].")}evaluate(o){const u=o.geometry(),p=o.canonicalID();if(u!=null&&p!=null){if(o.geometryType()==="Point")return function(_,m,w){const j=[];for(const H of _)for(const E of H)j.push(Ol(E,m));const k=new ed(j[0][1],"meters");return w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString"?Wd(j,!1,w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",k):w.type==="MultiLineString"?nd(j,!1,w.coordinates,k):w.type==="Polygon"||w.type==="MultiPolygon"?la(j,!1,w.type==="Polygon"?[w.coordinates]:w.coordinates,k):null}(u,p,this.geometries);if(o.geometryType()==="LineString")return function(_,m,w){const j=[];for(const H of _){const E=[];for(const M of H)E.push(Ol(M,m));j.push(E)}const k=new ed(j[0][0][1],"meters");if(w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString")return nd(w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",j,k);if(w.type==="MultiLineString"){let H=1/0;for(let E=0;E<w.coordinates.length;E++){const M=nd(w.coordinates[E],!0,j,k,H);if(isNaN(M))return M;if((H=Math.min(H,M))===0)return H}return H}if(w.type==="Polygon"||w.type==="MultiPolygon"){let H=1/0;for(let E=0;E<j.length;E++){const M=la(j[E],!0,w.type==="Polygon"?[w.coordinates]:w.coordinates,k,H);if(isNaN(M))return M;if((H=Math.min(H,M))===0)return H}return H}return null}(u,p,this.geometries);if(o.geometryType()==="Polygon")return function(_,m,w){const j=[];for(const H of function(E,M){const O=E.length;if(O<=1)return[E];const P=[];let R,$;for(let te=0;te<O;te++){const ie=Ke(E[te]);ie!==0&&(E[te].area=Math.abs(ie),$===void 0&&($=ie<0),$===ie<0?(R&&P.push(R),R=[E[te]]):R.push(E[te]))}return R&&P.push(R),P}(_)){const E=[];for(let M=0;M<H.length;++M)E.push(Dl(H[M],m));j.push(E)}const k=new ed(j[0][0][0][1],"meters");if(w.type==="Point"||w.type==="MultiPoint"||w.type==="LineString")return la(w.type==="Point"?[w.coordinates]:w.coordinates,w.type==="LineString",j,k);if(w.type==="MultiLineString"){let H=1/0;for(let E=0;E<w.coordinates.length;E++){const M=la(w.coordinates[E],!0,j,k,H);if(isNaN(M))return M;if((H=Math.min(H,M))===0)return H}return H}return w.type==="Polygon"||w.type==="MultiPolygon"?function(H,E,M){let O=1/0;for(const P of H)for(const R of E){const $=Bi(P,R,M,O);if(isNaN($))return $;if((O=Math.min(O,$))===0)return O}return O}(w.type==="Polygon"?[w.coordinates]:w.coordinates,j,k):null}(u,p,this.geometries);console.warn("Distance Expression: currently only evaluates valid Point/LineString/Polygon geometries.")}else console.warn("Distance Expression: requirs valid feature and canonical information.");return null}eachChild(){}outputDefined(){return!0}serialize(){return["distance",this.geojson]}}function Tc(h,o){switch(h){case"string":return ll(o);case"number":return+o;case"boolean":return!!o;case"color":return ji.parse(o);case"formatted":return yo.fromString(ll(o));case"resolvedImage":return Yo.build(ll(o))}return o}function cu(h,o,u,p){return p!==void 0&&(h=p*Math.round(h/p)),o!==void 0&&h<o&&(h=o),u!==void 0&&h>u&&(h=u),h}class bl{constructor(o,u,p){this.type=o,this.key=u,this.scope=p}static parse(o,u){let p=u.expectedType;if(p==null&&(p=Si),o.length<2||o.length>3)return u.error("Invalid number of arguments for 'config' expression.");const _=u.parse(o[1],1);if(!(_ instanceof tc))return u.error("Key name of 'config' expression must be a string literal.");if(o.length>=3){const m=u.parse(o[2],2);return m instanceof tc?new bl(p,ll(_.value),ll(m.value)):u.error("Scope of 'config' expression must be a string literal.")}return new bl(p,ll(_.value))}evaluate(o){const u=[this.key,this.scope,o.scope].filter(Boolean).join(""),p=o.getConfig(u);if(!p)return null;const{type:_,value:m,values:w,minValue:j,maxValue:k,stepValue:H}=p,E=p.default.evaluate(o);let M=E;if(m){const O=o.scope;o.scope=(O||"").split("").slice(1).join(""),M=m.evaluate(o),o.scope=O}return _&&(M=Tc(_,M)),M===void 0||j===void 0&&k===void 0&&H===void 0||(typeof M=="number"?M=cu(M,j,k,H):Array.isArray(M)&&(M=M.map(O=>typeof O=="number"?cu(O,j,k,H):O))),m!==void 0&&M!==void 0&&w&&!w.includes(M)&&(M=E,_&&(M=Tc(_,M))),(_&&_!==this.type||M!==void 0&&xs(M)!==this.type)&&(M=Tc(this.type.kind,M)),M}eachChild(){}outputDefined(){return!1}serialize(){const o=["config",this.key];return this.scope&&o.concat(this.key),o}}function fs(h){if(h instanceof ga&&(h.name==="get"&&h.args.length===1||h.name==="feature-state"||h.name==="has"&&h.args.length===1||h.name==="properties"||h.name==="geometry-type"||h.name==="id"||/^filter-/.test(h.name))||h instanceof Ea||h instanceof Ec)return!1;let o=!0;return h.eachChild(u=>{o&&!fs(u)&&(o=!1)}),o}function cl(h){if(h instanceof ga&&h.name==="feature-state")return!1;let o=!0;return h.eachChild(u=>{o&&!cl(u)&&(o=!1)}),o}function za(h){if(h instanceof bl)return new Set([h.key]);let o=new Set;return h.eachChild(u=>{o=new Set([...o,...za(u)])}),o}function As(h,o){if(h instanceof ga&&o.indexOf(h.name)>=0)return!1;let u=!0;return h.eachChild(p=>{u&&!As(p,o)&&(u=!1)}),u}class lo{constructor(o,u){this.type=u.type,this.name=o,this.boundExpression=u}static parse(o,u){if(o.length!==2||typeof o[1]!="string")return u.error("'var' expression requires exactly one string literal argument.");const p=o[1];return u.scope.has(p)?new lo(p,u.scope.get(p)):u.error(`Unknown variable "${p}". Make sure "${p}" has been bound in an enclosing "let" expression before using it.`,1)}evaluate(o){return this.boundExpression.evaluate(o)}eachChild(){}outputDefined(){return!1}serialize(){return["var",this.name]}}class Jo{constructor(o,u=[],p,_=new ou,m=[],w,j){this.registry=o,this.path=u,this.key=u.map(k=>typeof k=="string"?`['${k}']`:`[${k}]`).join(""),this.scope=_,this.errors=m,this.expectedType=p,this._scope=w,this.options=j}parse(o,u,p,_,m={}){return u||p?this.concat(u,null,p,_)._parse(o,m):this._parse(o,m)}parseObjectValue(o,u,p,_,m,w={}){return this.concat(u,p,_,m)._parse(o,w)}_parse(o,u){function p(_,m,w){return w==="assert"?new _l(m,[_]):w==="coerce"?new bc(m,[_]):_}if(o!==null&&typeof o!="string"&&typeof o!="boolean"&&typeof o!="number"||(o=["literal",o]),Array.isArray(o)){if(o.length===0)return this.error('Expected an array with at least one element. If you wanted a literal array, use ["literal", []].');const _=typeof o[0]=="string"?this.registry[o[0]]:void 0;if(_){let m=_.parse(o,this);if(!m)return null;if(this.expectedType){const w=this.expectedType,j=m.type;if(w.kind!=="string"&&w.kind!=="number"&&w.kind!=="boolean"&&w.kind!=="object"&&w.kind!=="array"||j.kind!=="value")if(w.kind!=="color"&&w.kind!=="formatted"&&w.kind!=="resolvedImage"||j.kind!=="value"&&j.kind!=="string"){if(this.checkSubtype(w,j))return null}else m=p(m,w,u.typeAnnotation||"coerce");else m=p(m,w,u.typeAnnotation||"assert")}if(!(m instanceof tc)&&m.type.kind!=="resolvedImage"&&Qa(m)){const w=new zd(this._scope,this.options);try{m=new tc(m.type,m.evaluate(w))}catch(j){return this.error(j.message),null}}return m}return bc.parse(["to-array",o],this)}return this.error(o===void 0?"'undefined' value invalid. Use null instead.":typeof o=="object"?'Bare objects invalid. Use ["literal", {...}] instead.':`Expected an array, but found ${typeof o} instead.`)}concat(o,u,p,_){let m=typeof o=="number"?this.path.concat(o):this.path;m=typeof u=="string"?m.concat(u):m;const w=_?this.scope.concat(_):this.scope;return new Jo(this.registry,m,p||null,w,this.errors,this._scope,this.options)}error(o,...u){const p=`${this.key}${u.map(_=>`[${_}]`).join("")}`;this.errors.push(new _c(p,o))}checkSubtype(o,u){const p=Yu(o,u);return p&&this.error(p),p}}var va=Jo;function Qa(h){if(h instanceof lo)return Qa(h.boundExpression);if(h instanceof ga&&h.name==="error"||h instanceof nc||h instanceof Ea||h instanceof Ec||h instanceof bl)return!1;const o=h instanceof bc||h instanceof _l;let u=!0;return h.eachChild(p=>{u=o?u&&Qa(p):u&&p instanceof tc}),!!u&&fs(h)&&As(h,["zoom","heatmap-density","line-progress","raster-value","sky-radial-progress","accumulated","is-supported-script","pitch","distance-from-center","measure-light","raster-particle-speed"])}function oi(h,o){const u=h.length-1;let p,_,m=0,w=u,j=0;for(;m<=w;)if(j=Math.floor((m+w)/2),p=h[j],_=h[j+1],p<=o){if(j===u||o<_)return j;m=j+1}else{if(!(p>o))throw new oo("Input is not a number.");w=j-1}return 0}class zc{constructor(o,u,p){this.type=o,this.input=u,this.labels=[],this.outputs=[];for(const[_,m]of p)this.labels.push(_),this.outputs.push(m)}static parse(o,u){if(o.length-1<4)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if((o.length-1)%2!=0)return u.error("Expected an even number of arguments.");const p=u.parse(o[1],1,cr);if(!p)return null;const _=[];let m=null;u.expectedType&&u.expectedType.kind!=="value"&&(m=u.expectedType);for(let w=1;w<o.length;w+=2){const j=w===1?-1/0:o[w],k=o[w+1],H=w,E=w+1;if(typeof j!="number")return u.error('Input/output pairs for "step" expressions must be defined using literal numeric values (not computed expressions) for the input values.',H);if(_.length&&_[_.length-1][0]>=j)return u.error('Input/output pairs for "step" expressions must be arranged with input values in strictly ascending order.',H);const M=u.parse(k,E,m);if(!M)return null;m=m||M.type,_.push([j,M])}return new zc(m,p,_)}evaluate(o){const u=this.labels,p=this.outputs;if(u.length===1)return p[0].evaluate(o);const _=this.input.evaluate(o);if(_<=u[0])return p[0].evaluate(o);const m=u.length;return _>=u[m-1]?p[m-1].evaluate(o):p[oi(u,_)].evaluate(o)}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){const o=["step",this.input.serialize()];for(let u=0;u<this.labels.length;u++)u>0&&o.push(this.labels[u]),o.push(this.outputs[u].serialize());return o}}const lp=.95047,ff=1.08883,pf=4/29,Ha=6/29,Ri=3*Ha*Ha,Jp=Ha*Ha*Ha,Eh=Math.PI/180,Th=180/Math.PI;function qd(h){return h>Jp?Math.pow(h,1/3):h/Ri+pf}function cp(h){return h>Ha?h*h*h:Ri*(h-pf)}function eA(h){return 255*(h<=.0031308?12.92*h:1.055*Math.pow(h,1/2.4)-.055)}function lm(h){return(h/=255)<=.04045?h/12.92:Math.pow((h+.055)/1.055,2.4)}function Af(h){const o=lm(h.r),u=lm(h.g),p=lm(h.b),_=qd((.4124564*o+.3575761*u+.1804375*p)/lp),m=qd((.2126729*o+.7151522*u+.072175*p)/1);return{l:116*m-16,a:500*(_-m),b:200*(m-qd((.0193339*o+.119192*u+.9503041*p)/ff)),alpha:h.a}}function mf(h){let o=(h.l+16)/116,u=isNaN(h.a)?o:o+h.a/500,p=isNaN(h.b)?o:o-h.b/200;return o=1*cp(o),u=lp*cp(u),p=ff*cp(p),new ji(eA(3.2404542*u-1.5371385*o-.4985314*p),eA(-.969266*u+1.8760108*o+.041556*p),eA(.0556434*u-.2040259*o+1.0572252*p),h.alpha)}function up(h,o,u){const p=o-h;return h+u*(p>180||p<-180?p-360*Math.round(p/360):p)}const gf={forward:Af,reverse:mf,interpolate:function(h,o,u){return{l:Ur(h.l,o.l,u),a:Ur(h.a,o.a,u),b:Ur(h.b,o.b,u),alpha:Ur(h.alpha,o.alpha,u)}}},dp={forward:function(h){const{l:o,a:u,b:p}=Af(h),_=Math.atan2(p,u)*Th;return{h:_<0?_+360:_,c:Math.sqrt(u*u+p*p),l:o,alpha:h.a}},reverse:function(h){const o=h.h*Eh,u=h.c;return mf({l:h.l,a:Math.cos(o)*u,b:Math.sin(o)*u,alpha:h.alpha})},interpolate:function(h,o,u){return{h:up(h.h,o.h,u),c:Ur(h.c,o.c,u),l:Ur(h.l,o.l,u),alpha:Ur(h.alpha,o.alpha,u)}}};var x0=Object.freeze({__proto__:null,hcl:dp,lab:gf});class ic{constructor(o,u,p,_,m,w){this.type=o,this.operator=u,this.interpolation=p,this.input=_,this.dynamicStops=m,this.labels=[],this.outputs=[];for(const[j,k]of w)this.labels.push(j),this.outputs.push(k)}static interpolationFactor(o,u,p,_){let m=0;if(o.name==="exponential")m=xa(u,o.base,p,_);else if(o.name==="linear")m=xa(u,1,p,_);else if(o.name==="cubic-bezier"){const w=o.controlPoints;m=new Zt(w[0],w[1],w[2],w[3]).solve(xa(u,1,p,_))}return m}static parse(o,u){let[p,_,m,...w]=o;if(!Array.isArray(_)||_.length===0)return u.error("Expected an interpolation type expression.",1);if(_[0]==="linear")_={name:"linear"};else if(_[0]==="exponential"){const H=_[1];if(typeof H!="number")return u.error("Exponential interpolation requires a numeric base.",1,1);_={name:"exponential",base:H}}else{if(_[0]!=="cubic-bezier")return u.error(`Unknown interpolation type ${String(_[0])}`,1,0);{const H=_.slice(1);if(H.length!==4||H.some(E=>typeof E!="number"||E<0||E>1))return u.error("Cubic bezier interpolation requires four numeric arguments with values between 0 and 1.",1);_={name:"cubic-bezier",controlPoints:H}}}if(o.length-1<3)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length-1>3&&(o.length-1)%2!=0)return u.error("Expected an even number of arguments.");if(m=u.parse(m,2,cr),!m)return null;const j=[];let k=null;if(p==="interpolate-hcl"||p==="interpolate-lab"?k=Nl:u.expectedType&&u.expectedType.kind!=="value"&&(k=u.expectedType),o.length-1==3){const H=u.parse(w[0],3,Si);return H?new ic(k,p,_,m,H,j):null}for(let H=0;H<w.length;H+=2){const E=w[H],M=w[H+1],O=H+3,P=H+4;if(typeof E!="number")return u.error('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.',O);if(j.length&&j[j.length-1][0]>=E)return u.error('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.',O);const R=u.parse(M,P,k);if(!R)return null;k=k||R.type,j.push([E,R])}return k.kind==="number"||k.kind==="color"||k.kind==="array"&&k.itemType.kind==="number"&&typeof k.N=="number"?new ic(k,p,_,m,null,j):u.error(`Type ${ds(k)} is not interpolatable.`)}evaluate(o){let u=this.labels,p=this.outputs;if(this.dynamicStops){const E=this.dynamicStops.evaluate(o);if(E.length%2!=0)throw new oo("Expected an even number of arguments.");u=[],p=[];for(let M=0;M<E.length;M+=2){const O=E[M],P=new tc(cr,E[M+1]);if(typeof O!="number")throw new oo('Input/output pairs for "interpolate" expressions must be defined using literal numeric values (not computed expressions) for the input values.');if(u.length&&u[u.length-1]>=O)throw new oo('Input/output pairs for "interpolate" expressions must be arranged with input values in strictly ascending order.');u.push(O),p.push(P)}if(u.length===0)throw new oo("Expected at least one input/output pair.")}if(u.length===1)return p[0].evaluate(o);const _=this.input.evaluate(o);if(_<=u[0])return p[0].evaluate(o);const m=u.length;if(_>=u[m-1])return p[m-1].evaluate(o);const w=oi(u,_),j=ic.interpolationFactor(this.interpolation,_,u[w],u[w+1]),k=p[w].evaluate(o),H=p[w+1].evaluate(o);return this.operator==="interpolate"?Sr[this.type.kind.toLowerCase()](k,H,j):this.operator==="interpolate-hcl"?dp.reverse(dp.interpolate(dp.forward(k),dp.forward(H),j)):gf.reverse(gf.interpolate(gf.forward(k),gf.forward(H),j))}eachChild(o){o(this.input);for(const u of this.outputs)o(u)}outputDefined(){return this.outputs.every(o=>o.outputDefined())}serialize(){let o;o=this.interpolation.name==="linear"?["linear"]:this.interpolation.name==="exponential"?this.interpolation.base===1?["linear"]:["exponential",this.interpolation.base]:["cubic-bezier"].concat(this.interpolation.controlPoints);const u=[this.operator,o,this.input.serialize()];if(this.dynamicStops)u.push(this.dynamicStops.serialize());else for(let p=0;p<this.labels.length;p++)u.push(this.labels[p],this.outputs[p].serialize());return u}}function xa(h,o,u,p){const _=p-u,m=h-u;return _===0?0:o===1?m/_:(Math.pow(o,m)-1)/(Math.pow(o,_)-1)}class Va{constructor(o,u){this.type=o,this.args=u}static parse(o,u){if(o.length<2)return u.error("Expectected at least one argument.");let p=null;const _=u.expectedType;_&&_.kind!=="value"&&(p=_);const m=[];for(const j of o.slice(1)){const k=u.parse(j,1+m.length,p,void 0,{typeAnnotation:"omit"});if(!k)return null;p=p||k.type,m.push(k)}const w=_&&m.some(j=>Yu(_,j.type));return new Va(w?Si:p,m)}evaluate(o){let u,p=null,_=0;for(const m of this.args){if(_++,p=m.evaluate(o),p&&p instanceof Yo&&!p.available&&(u||(u=p),p=null,_===this.args.length))return u;if(p!==null)break}return p}eachChild(o){this.args.forEach(o)}outputDefined(){return this.args.every(o=>o.outputDefined())}serialize(){const o=["coalesce"];return this.eachChild(u=>{o.push(u.serialize())}),o}}class cm{constructor(o,u){this.type=u.type,this.bindings=[].concat(o),this.result=u}evaluate(o){return this.result.evaluate(o)}eachChild(o){for(const u of this.bindings)o(u[1]);o(this.result)}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found ${o.length-1} instead.`);const p=[];for(let m=1;m<o.length-1;m+=2){const w=o[m];if(typeof w!="string")return u.error(`Expected string, but found ${typeof w} instead.`,m);if(/[^a-zA-Z0-9_]/.test(w))return u.error("Variable names must contain only alphanumeric characters or '_'.",m);const j=u.parse(o[m+1],m+1);if(!j)return null;p.push([w,j])}const _=u.parse(o[o.length-1],o.length-1,u.expectedType,p);return _?new cm(p,_):null}outputDefined(){return this.result.outputDefined()}serialize(){const o=["let"];for(const[u,p]of this.bindings)o.push(u,p.serialize());return o.push(this.result.serialize()),o}}class mg{constructor(o,u,p){this.type=o,this.index=u,this.input=p}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,cr),_=u.parse(o[2],2,Da(u.expectedType||Si));return p&&_?new mg(_.type.itemType,p,_):null}evaluate(o){const u=this.index.evaluate(o),p=this.input.evaluate(o);if(u<0)throw new oo(`Array index out of bounds: ${u} < 0.`);if(u>p.length-1)throw new oo(`Array index out of bounds: ${u} > ${p.length-1}.`);if(u===Math.floor(u))return p[u];const _=Math.floor(u),m=Math.ceil(u),w=p[_],j=p[m];if(typeof w!="number"||typeof j!="number")throw new oo(`Cannot interpolate between non-number values at index ${u}.`);const k=u-_;return w*(1-k)+j*k}eachChild(o){o(this.index),o(this.input)}outputDefined(){return!1}serialize(){return["at",this.index.serialize(),this.input.serialize()]}}class um{constructor(o,u){this.type=Ii,this.needle=o,this.haystack=u}static parse(o,u){if(o.length!==3)return u.error(`Expected 2 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,Si),_=u.parse(o[2],2,Si);return p&&_?uf(p.type,[Ii,Pi,cr,Od,Si])?new um(p,_):u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ds(p.type)} instead`):null}evaluate(o){const u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(p==null)return!1;if(!Ju(u,["boolean","string","number","null"]))throw new oo(`Expected first argument to be of type boolean, string, number or null, but found ${ds(xs(u))} instead.`);if(!Ju(p,["string","array"]))throw new oo(`Expected second argument to be of type array or string, but found ${ds(xs(p))} instead.`);return p.indexOf(u)>=0}eachChild(o){o(this.needle),o(this.haystack)}outputDefined(){return!0}serialize(){return["in",this.needle.serialize(),this.haystack.serialize()]}}class hp{constructor(o,u,p){this.type=cr,this.needle=o,this.haystack=u,this.fromIndex=p}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,Si),_=u.parse(o[2],2,Si);if(!p||!_)return null;if(!uf(p.type,[Ii,Pi,cr,Od,Si]))return u.error(`Expected first argument to be of type boolean, string, number or null, but found ${ds(p.type)} instead`);if(o.length===4){const m=u.parse(o[3],3,cr);return m?new hp(p,_,m):null}return new hp(p,_)}evaluate(o){const u=this.needle.evaluate(o),p=this.haystack.evaluate(o);if(!Ju(u,["boolean","string","number","null"]))throw new oo(`Expected first argument to be of type boolean, string, number or null, but found ${ds(xs(u))} instead.`);if(!Ju(p,["string","array"]))throw new oo(`Expected second argument to be of type array or string, but found ${ds(xs(p))} instead.`);if(this.fromIndex){const _=this.fromIndex.evaluate(o);return p.indexOf(u,_)}return p.indexOf(u)}eachChild(o){o(this.needle),o(this.haystack),this.fromIndex&&o(this.fromIndex)}outputDefined(){return!1}serialize(){if(this.fromIndex!=null&&this.fromIndex!==void 0){const o=this.fromIndex.serialize();return["index-of",this.needle.serialize(),this.haystack.serialize(),o]}return["index-of",this.needle.serialize(),this.haystack.serialize()]}}class yf{constructor(o,u,p,_,m,w){this.inputType=o,this.type=u,this.input=p,this.cases=_,this.outputs=m,this.otherwise=w}static parse(o,u){if(o.length<5)return u.error(`Expected at least 4 arguments, but found only ${o.length-1}.`);if(o.length%2!=1)return u.error("Expected an even number of arguments.");let p,_;u.expectedType&&u.expectedType.kind!=="value"&&(_=u.expectedType);const m={},w=[];for(let H=2;H<o.length-1;H+=2){let E=o[H];const M=o[H+1];Array.isArray(E)||(E=[E]);const O=u.concat(H);if(E.length===0)return O.error("Expected at least one branch label.");for(const R of E){if(typeof R!="number"&&typeof R!="string")return O.error("Branch labels must be numbers or strings.");if(typeof R=="number"&&Math.abs(R)>Number.MAX_SAFE_INTEGER)return O.error(`Branch labels must be integers no larger than ${Number.MAX_SAFE_INTEGER}.`);if(typeof R=="number"&&Math.floor(R)!==R)return O.error("Numeric branch labels must be integer values.");if(p){if(O.checkSubtype(p,xs(R)))return null}else p=xs(R);if(m[String(R)]!==void 0)return O.error("Branch labels must be unique.");m[String(R)]=w.length}const P=u.parse(M,H,_);if(!P)return null;_=_||P.type,w.push(P)}const j=u.parse(o[1],1,Si);if(!j)return null;const k=u.parse(o[o.length-1],o.length-1,_);return k?j.type.kind!=="value"&&u.concat(1).checkSubtype(p,j.type)?null:new yf(p,_,j,m,w,k):null}evaluate(o){const u=this.input.evaluate(o);return(xs(u)===this.inputType&&this.outputs[this.cases[u]]||this.otherwise).evaluate(o)}eachChild(o){o(this.input),this.outputs.forEach(o),o(this.otherwise)}outputDefined(){return this.outputs.every(o=>o.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["match",this.input.serialize()],u=Object.keys(this.cases).sort(),p=[],_={};for(const w of u){const j=_[this.cases[w]];j===void 0?(_[this.cases[w]]=p.length,p.push([this.cases[w],[w]])):p[j][1].push(w)}const m=w=>this.inputType.kind==="number"?Number(w):w;for(const[w,j]of p)o.push(j.length===1?m(j[0]):j.map(m)),o.push(this.outputs[w].serialize());return o.push(this.otherwise.serialize()),o}}class Bu{constructor(o,u,p){this.type=o,this.branches=u,this.otherwise=p}static parse(o,u){if(o.length<4)return u.error(`Expected at least 3 arguments, but found only ${o.length-1}.`);if(o.length%2!=0)return u.error("Expected an odd number of arguments.");let p;u.expectedType&&u.expectedType.kind!=="value"&&(p=u.expectedType);const _=[];for(let w=1;w<o.length-1;w+=2){const j=u.parse(o[w],w,Ii);if(!j)return null;const k=u.parse(o[w+1],w+1,p);if(!k)return null;_.push([j,k]),p=p||k.type}const m=u.parse(o[o.length-1],o.length-1,p);return m?new Bu(p,_,m):null}evaluate(o){for(const[u,p]of this.branches)if(u.evaluate(o))return p.evaluate(o);return this.otherwise.evaluate(o)}eachChild(o){for(const[u,p]of this.branches)o(u),o(p);o(this.otherwise)}outputDefined(){return this.branches.every(([o,u])=>u.outputDefined())&&this.otherwise.outputDefined()}serialize(){const o=["case"];return this.eachChild(u=>{o.push(u.serialize())}),o}}class fp{constructor(o,u,p,_){this.type=o,this.input=u,this.beginIndex=p,this.endIndex=_}static parse(o,u){if(o.length<=2||o.length>=5)return u.error(`Expected 3 or 4 arguments, but found ${o.length-1} instead.`);const p=u.parse(o[1],1,Si),_=u.parse(o[2],2,cr);if(!p||!_)return null;if(!uf(p.type,[Da(Si),Pi,Si]))return u.error(`Expected first argument to be of type array or string, but found ${ds(p.type)} instead`);if(o.length===4){const m=u.parse(o[3],3,cr);return m?new fp(p.type,p,_,m):null}return new fp(p.type,p,_)}evaluate(o){const u=this.input.evaluate(o),p=this.beginIndex.evaluate(o);if(!Ju(u,["string","array"]))throw new oo(`Expected first argument to be of type array or string, but found ${ds(xs(u))} instead.`);if(this.endIndex){const _=this.endIndex.evaluate(o);return u.slice(p,_)}return u.slice(p)}eachChild(o){o(this.input),o(this.beginIndex),this.endIndex&&o(this.endIndex)}outputDefined(){return!1}serialize(){if(this.endIndex!=null&&this.endIndex!==void 0){const o=this.endIndex.serialize();return["slice",this.input.serialize(),this.beginIndex.serialize(),o]}return["slice",this.input.serialize(),this.beginIndex.serialize()]}}function vf(h,o){return h==="=="||h==="!="?o.kind==="boolean"||o.kind==="string"||o.kind==="number"||o.kind==="null"||o.kind==="value":o.kind==="string"||o.kind==="number"||o.kind==="value"}function xf(h,o,u,p){return p.compare(o,u)===0}function rd(h,o,u){const p=h!=="=="&&h!=="!=";return class Bde{constructor(m,w,j){this.type=Ii,this.lhs=m,this.rhs=w,this.collator=j,this.hasUntypedArgument=m.type.kind==="value"||w.type.kind==="value"}static parse(m,w){if(m.length!==3&&m.length!==4)return w.error("Expected two or three arguments.");const j=m[0];let k=w.parse(m[1],1,Si);if(!k)return null;if(!vf(j,k.type))return w.concat(1).error(`"${j}" comparisons are not supported for type '${ds(k.type)}'.`);let H=w.parse(m[2],2,Si);if(!H)return null;if(!vf(j,H.type))return w.concat(2).error(`"${j}" comparisons are not supported for type '${ds(H.type)}'.`);if(k.type.kind!==H.type.kind&&k.type.kind!=="value"&&H.type.kind!=="value")return w.error(`Cannot compare types '${ds(k.type)}' and '${ds(H.type)}'.`);p&&(k.type.kind==="value"&&H.type.kind!=="value"?k=new _l(H.type,[k]):k.type.kind!=="value"&&H.type.kind==="value"&&(H=new _l(k.type,[H])));let E=null;if(m.length===4){if(k.type.kind!=="string"&&H.type.kind!=="string"&&k.type.kind!=="value"&&H.type.kind!=="value")return w.error("Cannot use collator to compare non-string types.");if(E=w.parse(m[3],3,$s),!E)return null}return new Bde(k,H,E)}evaluate(m){const w=this.lhs.evaluate(m),j=this.rhs.evaluate(m);if(p&&this.hasUntypedArgument){const k=xs(w),H=xs(j);if(k.kind!==H.kind||k.kind!=="string"&&k.kind!=="number")throw new oo(`Expected arguments for "${h}" to be (string, string) or (number, number), but found (${k.kind}, ${H.kind}) instead.`)}if(this.collator&&!p&&this.hasUntypedArgument){const k=xs(w),H=xs(j);if(k.kind!=="string"||H.kind!=="string")return o(m,w,j)}return this.collator?u(m,w,j,this.collator.evaluate(m)):o(m,w,j)}eachChild(m){m(this.lhs),m(this.rhs),this.collator&&m(this.collator)}outputDefined(){return!0}serialize(){const m=[h];return this.eachChild(w=>{m.push(w.serialize())}),m}}}const dm=rd("==",function(h,o,u){return o===u},xf),pp=rd("!=",function(h,o,u){return o!==u},function(h,o,u,p){return!xf(0,o,u,p)}),cv=rd("<",function(h,o,u){return o<u},function(h,o,u,p){return p.compare(o,u)<0}),Ih=rd(">",function(h,o,u){return o>u},function(h,o,u,p){return p.compare(o,u)>0}),Eu=rd("<=",function(h,o,u){return o<=u},function(h,o,u,p){return p.compare(o,u)<=0}),Tu=rd(">=",function(h,o,u){return o>=u},function(h,o,u,p){return p.compare(o,u)>=0});class gg{constructor(o,u,p,_,m,w){this.type=Pi,this.number=o,this.locale=u,this.currency=p,this.unit=_,this.minFractionDigits=m,this.maxFractionDigits=w}static parse(o,u){if(o.length!==3)return u.error("Expected two arguments.");const p=u.parse(o[1],1,cr);if(!p)return null;const _=o[2];if(typeof _!="object"||Array.isArray(_))return u.error("NumberFormat options argument must be an object.");let m=null;if(_.locale&&(m=u.parseObjectValue(_.locale,2,"locale",Pi),!m))return null;let w=null;if(_.currency&&(w=u.parseObjectValue(_.currency,2,"currency",Pi),!w))return null;let j=null;if(_.unit&&(j=u.parseObjectValue(_.unit,2,"unit",Pi),!j))return null;let k=null;if(_["min-fraction-digits"]&&(k=u.parseObjectValue(_["min-fraction-digits"],2,"min-fraction-digits",cr),!k))return null;let H=null;return _["max-fraction-digits"]&&(H=u.parseObjectValue(_["max-fraction-digits"],2,"max-fraction-digits",cr),!H)?null:new gg(p,m,w,j,k,H)}evaluate(o){return new Intl.NumberFormat(this.locale?this.locale.evaluate(o):[],{style:(this.currency?"currency":this.unit&&"unit")||"decimal",currency:this.currency?this.currency.evaluate(o):void 0,unit:this.unit?this.unit.evaluate(o):void 0,minimumFractionDigits:this.minFractionDigits?this.minFractionDigits.evaluate(o):void 0,maximumFractionDigits:this.maxFractionDigits?this.maxFractionDigits.evaluate(o):void 0}).format(this.number.evaluate(o))}eachChild(o){o(this.number),this.locale&&o(this.locale),this.currency&&o(this.currency),this.unit&&o(this.unit),this.minFractionDigits&&o(this.minFractionDigits),this.maxFractionDigits&&o(this.maxFractionDigits)}outputDefined(){return!1}serialize(){const o={};return this.locale&&(o.locale=this.locale.serialize()),this.currency&&(o.currency=this.currency.serialize()),this.unit&&(o.unit=this.unit.serialize()),this.minFractionDigits&&(o["min-fraction-digits"]=this.minFractionDigits.serialize()),this.maxFractionDigits&&(o["max-fraction-digits"]=this.maxFractionDigits.serialize()),["number-format",this.number.serialize(),o]}}class jh{constructor(o){this.type=cr,this.input=o}static parse(o,u){if(o.length!==2)return u.error(`Expected 1 argument, but found ${o.length-1} instead.`);const p=u.parse(o[1],1);return p?p.type.kind!=="array"&&p.type.kind!=="string"&&p.type.kind!=="value"?u.error(`Expected argument of type string or array, but found ${ds(p.type)} instead.`):new jh(p):null}evaluate(o){const u=this.input.evaluate(o);if(typeof u=="string"||Array.isArray(u))return u.length;throw new oo(`Expected value to be of type string or array, but found ${ds(xs(u))} instead.`)}eachChild(o){o(this.input)}outputDefined(){return!1}serialize(){const o=["length"];return this.eachChild(u=>{o.push(u.serialize())}),o}}function Qc(h){return function(){h=1831565813+(h|=0)|0;let o=Math.imul(h^h>>>15,1|h);return o=o+Math.imul(o^o>>>7,61|o)^o,((o^o>>>14)>>>0)/4294967296}}const ul={"==":dm,"!=":pp,">":Ih,"<":cv,">=":Tu,"<=":Eu,array:_l,at:mg,boolean:_l,case:Bu,coalesce:Va,collator:nc,format:Qo,image:Ud,in:um,"index-of":hp,interpolate:ic,"interpolate-hcl":ic,"interpolate-lab":ic,length:jh,let:cm,literal:tc,match:yf,number:_l,"number-format":gg,object:_l,slice:fp,step:zc,string:_l,"to-boolean":bc,"to-color":bc,"to-number":bc,"to-string":bc,var:lo,within:Ea,distance:Ec,config:bl};function ct(h,[o,u,p,_]){o=o.evaluate(h),u=u.evaluate(h),p=p.evaluate(h);const m=_?_.evaluate(h):1,w=Rl(o,u,p,m);if(w)throw new oo(w);return new ji(o/255*m,u/255*m,p/255*m,m)}function Fh(h,[o,u,p,_]){o=o.evaluate(h),u=u.evaluate(h),p=p.evaluate(h);const m=_?_.evaluate(h):1,w=function(H,E,M,O){return typeof H=="number"&&H>=0&&H<=360?typeof E=="number"&&E>=0&&E<=100&&typeof M=="number"&&M>=0&&M<=100?O===void 0||typeof O=="number"&&O>=0&&O<=1?null:`Invalid hsla value [${[H,E,M,O].join(", ")}]: 'a' must be between 0 and 1.`:`Invalid hsla value [${(typeof O=="number"?[H,E,M,O]:[H,E,M]).join(", ")}]: 's', and 'l' must be between 0 and 100.`:`Invalid hsla value [${(typeof O=="number"?[H,E,M,O]:[H,E,M]).join(", ")}]: 'h' must be between 0 and 360.`}(o,u,p,m);if(w)throw new oo(w);const j=`hsla(${o}, ${u}%, ${p}%, ${m})`,k=ji.parse(j);if(!k)throw new oo(`Failed to parse HSLA color: ${j}`);return k}function _f(h,o){return h in o}function Ta(h,o){const u=o[h];return u===void 0?null:u}function Ji(h){return{type:h}}function hm(h){return{result:"success",value:h}}function Ph(h){return{result:"error",value:h}}function kh(h,o){return!!h&&!!h.parameters&&h.parameters.indexOf(o)>-1}function sc(h){return h["property-type"]==="data-driven"}function Ap(h){return kh(h.expression,"measure-light")}function fm(h){return kh(h.expression,"zoom")}function tA(h){return!!h.expression&&h.expression.interpolated}function pm(h){return typeof h=="object"&&h!==null&&!Array.isArray(h)}function _0(h){return h}function id(h,o){const u=o.type==="color",p=h.stops&&typeof h.stops[0][0]=="object",_=p||!(p||h.property!==void 0),m=h.type||(tA(o)?"exponential":"interval");if(u&&((h=op({},h)).stops&&(h.stops=h.stops.map(H=>[H[0],ji.parse(H[1])])),h.default=ji.parse(h.default?h.default:o.default)),h.colorSpace&&h.colorSpace!=="rgb"&&!x0[h.colorSpace])throw new Error(`Unknown color space: ${h.colorSpace}`);let w,j,k;if(m==="exponential")w=rA;else if(m==="interval")w=b0;else if(m==="categorical"){w=w0,j=Object.create(null);for(const H of h.stops)j[H[0]]=H[1];k=typeof h.stops[0][0]}else{if(m!=="identity")throw new Error(`Unknown function type "${m}"`);w=uv}if(p){const H={},E=[];for(let P=0;P<h.stops.length;P++){const R=h.stops[P],$=R[0].zoom;H[$]===void 0&&(H[$]={zoom:$,type:h.type,property:h.property,default:h.default,stops:[]},E.push($)),H[$].stops.push([R[0].value,R[1]])}const M=[];for(const P of E)M.push([H[P].zoom,id(H[P],o)]);const O={name:"linear"};return{kind:"composite",interpolationType:O,interpolationFactor:ic.interpolationFactor.bind(void 0,O),zoomStops:M.map(P=>P[0]),evaluate:({zoom:P},R)=>rA({stops:M,base:h.base},o,P).evaluate(P,R)}}if(_){const H=m==="exponential"?{name:"exponential",base:h.base!==void 0?h.base:1}:null;return{kind:"camera",interpolationType:H,interpolationFactor:ic.interpolationFactor.bind(void 0,H),zoomStops:h.stops.map(E=>E[0]),evaluate:({zoom:E})=>w(h,o,E,j,k)}}return{kind:"source",evaluate(H,E){const M=E&&E.properties?E.properties[h.property]:void 0;return M===void 0?nA(h.default,o.default):w(h,o,M,j,k)}}}function nA(h,o,u){return h!==void 0?h:o!==void 0?o:u!==void 0?u:void 0}function w0(h,o,u,p,_){return nA(typeof u===_?p[u]:void 0,h.default,o.default)}function b0(h,o,u){if(ta(u)!=="number")return nA(h.default,o.default);const p=h.stops.length;if(p===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[p-1][0])return h.stops[p-1][1];const _=oi(h.stops.map(m=>m[0]),u);return h.stops[_][1]}function rA(h,o,u){const p=h.base!==void 0?h.base:1;if(ta(u)!=="number")return nA(h.default,o.default);const _=h.stops.length;if(_===1||u<=h.stops[0][0])return h.stops[0][1];if(u>=h.stops[_-1][0])return h.stops[_-1][1];const m=oi(h.stops.map(E=>E[0]),u),w=function(E,M,O,P){const R=P-O,$=E-O;return R===0?0:M===1?$/R:(Math.pow(M,$)-1)/(Math.pow(M,R)-1)}(u,p,h.stops[m][0],h.stops[m+1][0]),j=h.stops[m][1],k=h.stops[m+1][1];let H=Sr[o.type]||_0;if(h.colorSpace&&h.colorSpace!=="rgb"){const E=x0[h.colorSpace];H=(M,O)=>E.reverse(E.interpolate(E.forward(M),E.forward(O),w))}return typeof j.evaluate=="function"?{evaluate(...E){const M=j.evaluate.apply(void 0,E),O=k.evaluate.apply(void 0,E);if(M!==void 0&&O!==void 0)return H(M,O,w)}}:H(j,k,w)}function uv(h,o,u){return o.type==="color"?u=ji.parse(u):o.type==="formatted"?u=yo.fromString(u.toString()):o.type==="resolvedImage"?u=Yo.build(u.toString()):ta(u)===o.type||o.type==="enum"&&o.values[u]||(u=void 0),nA(u,h.default,o.default)}ga.register(ul,{error:[{kind:"error"},[Pi],(h,[o])=>{throw new oo(o.evaluate(h))}],typeof:[Pi,[Si],(h,[o])=>ds(xs(o.evaluate(h)))],"to-rgba":[Da(cr,4),[Nl],(h,[o])=>o.evaluate(h).toRenderColor(null).toArray()],"to-hsla":[Da(cr,4),[Nl],(h,[o])=>o.evaluate(h).toRenderColor(null).toHslaArray()],rgb:[Nl,[cr,cr,cr],ct],rgba:[Nl,[cr,cr,cr,cr],ct],hsl:[Nl,[cr,cr,cr],Fh],hsla:[Nl,[cr,cr,cr,cr],Fh],has:{type:Ii,overloads:[[[Pi],(h,[o])=>_f(o.evaluate(h),h.properties())],[[Pi,Dd],(h,[o,u])=>_f(o.evaluate(h),u.evaluate(h))]]},get:{type:Si,overloads:[[[Pi],(h,[o])=>Ta(o.evaluate(h),h.properties())],[[Pi,Dd],(h,[o,u])=>Ta(o.evaluate(h),u.evaluate(h))]]},"feature-state":[Si,[Pi],(h,[o])=>Ta(o.evaluate(h),h.featureState||{})],properties:[Dd,[],h=>h.properties()],"geometry-type":[Pi,[],h=>h.geometryType()],id:[Si,[],h=>h.id()],zoom:[cr,[],h=>h.globals.zoom],pitch:[cr,[],h=>h.globals.pitch||0],"distance-from-center":[cr,[],h=>h.distanceFromCenter()],"measure-light":[cr,[Pi],(h,[o])=>h.measureLight(o.evaluate(h))],"heatmap-density":[cr,[],h=>h.globals.heatmapDensity||0],"line-progress":[cr,[],h=>h.globals.lineProgress||0],"raster-value":[cr,[],h=>h.globals.rasterValue||0],"raster-particle-speed":[cr,[],h=>h.globals.rasterParticleSpeed||0],"sky-radial-progress":[cr,[],h=>h.globals.skyRadialProgress||0],accumulated:[Si,[],h=>h.globals.accumulated===void 0?null:h.globals.accumulated],"+":[cr,Ji(cr),(h,o)=>{let u=0;for(const p of o)u+=p.evaluate(h);return u}],"*":[cr,Ji(cr),(h,o)=>{let u=1;for(const p of o)u*=p.evaluate(h);return u}],"-":{type:cr,overloads:[[[cr,cr],(h,[o,u])=>o.evaluate(h)-u.evaluate(h)],[[cr],(h,[o])=>-o.evaluate(h)]]},"/":[cr,[cr,cr],(h,[o,u])=>o.evaluate(h)/u.evaluate(h)],"%":[cr,[cr,cr],(h,[o,u])=>o.evaluate(h)%u.evaluate(h)],ln2:[cr,[],()=>Math.LN2],pi:[cr,[],()=>Math.PI],e:[cr,[],()=>Math.E],"^":[cr,[cr,cr],(h,[o,u])=>Math.pow(o.evaluate(h),u.evaluate(h))],sqrt:[cr,[cr],(h,[o])=>Math.sqrt(o.evaluate(h))],log10:[cr,[cr],(h,[o])=>Math.log(o.evaluate(h))/Math.LN10],ln:[cr,[cr],(h,[o])=>Math.log(o.evaluate(h))],log2:[cr,[cr],(h,[o])=>Math.log(o.evaluate(h))/Math.LN2],sin:[cr,[cr],(h,[o])=>Math.sin(o.evaluate(h))],cos:[cr,[cr],(h,[o])=>Math.cos(o.evaluate(h))],tan:[cr,[cr],(h,[o])=>Math.tan(o.evaluate(h))],asin:[cr,[cr],(h,[o])=>Math.asin(o.evaluate(h))],acos:[cr,[cr],(h,[o])=>Math.acos(o.evaluate(h))],atan:[cr,[cr],(h,[o])=>Math.atan(o.evaluate(h))],min:[cr,Ji(cr),(h,o)=>Math.min(...o.map(u=>u.evaluate(h)))],max:[cr,Ji(cr),(h,o)=>Math.max(...o.map(u=>u.evaluate(h)))],abs:[cr,[cr],(h,[o])=>Math.abs(o.evaluate(h))],round:[cr,[cr],(h,[o])=>{const u=o.evaluate(h);return u<0?-Math.round(-u):Math.round(u)}],floor:[cr,[cr],(h,[o])=>Math.floor(o.evaluate(h))],ceil:[cr,[cr],(h,[o])=>Math.ceil(o.evaluate(h))],"filter-==":[Ii,[Pi,Si],(h,[o,u])=>h.properties()[o.value]===u.value],"filter-id-==":[Ii,[Si],(h,[o])=>h.id()===o.value],"filter-type-==":[Ii,[Pi],(h,[o])=>h.geometryType()===o.value],"filter-<":[Ii,[Pi,Si],(h,[o,u])=>{const p=h.properties()[o.value],_=u.value;return typeof p==typeof _&&p<_}],"filter-id-<":[Ii,[Si],(h,[o])=>{const u=h.id(),p=o.value;return typeof u==typeof p&&u<p}],"filter->":[Ii,[Pi,Si],(h,[o,u])=>{const p=h.properties()[o.value],_=u.value;return typeof p==typeof _&&p>_}],"filter-id->":[Ii,[Si],(h,[o])=>{const u=h.id(),p=o.value;return typeof u==typeof p&&u>p}],"filter-<=":[Ii,[Pi,Si],(h,[o,u])=>{const p=h.properties()[o.value],_=u.value;return typeof p==typeof _&&p<=_}],"filter-id-<=":[Ii,[Si],(h,[o])=>{const u=h.id(),p=o.value;return typeof u==typeof p&&u<=p}],"filter->=":[Ii,[Pi,Si],(h,[o,u])=>{const p=h.properties()[o.value],_=u.value;return typeof p==typeof _&&p>=_}],"filter-id->=":[Ii,[Si],(h,[o])=>{const u=h.id(),p=o.value;return typeof u==typeof p&&u>=p}],"filter-has":[Ii,[Si],(h,[o])=>o.value in h.properties()],"filter-has-id":[Ii,[],h=>h.id()!==null&&h.id()!==void 0],"filter-type-in":[Ii,[Da(Pi)],(h,[o])=>o.value.indexOf(h.geometryType())>=0],"filter-id-in":[Ii,[Da(Si)],(h,[o])=>o.value.indexOf(h.id())>=0],"filter-in-small":[Ii,[Pi,Da(Si)],(h,[o,u])=>u.value.indexOf(h.properties()[o.value])>=0],"filter-in-large":[Ii,[Pi,Da(Si)],(h,[o,u])=>function(p,_,m,w){for(;m<=w;){const j=m+w>>1;if(_[j]===p)return!0;_[j]>p?w=j-1:m=j+1}return!1}(h.properties()[o.value],u.value,0,u.value.length-1)],all:{type:Ii,overloads:[[[Ii,Ii],(h,[o,u])=>o.evaluate(h)&&u.evaluate(h)],[Ji(Ii),(h,o)=>{for(const u of o)if(!u.evaluate(h))return!1;return!0}]]},any:{type:Ii,overloads:[[[Ii,Ii],(h,[o,u])=>o.evaluate(h)||u.evaluate(h)],[Ji(Ii),(h,o)=>{for(const u of o)if(u.evaluate(h))return!0;return!1}]]},"!":[Ii,[Ii],(h,[o])=>!o.evaluate(h)],"is-supported-script":[Ii,[Pi],(h,[o])=>{const u=h.globals&&h.globals.isSupportedScript;return!u||u(o.evaluate(h))}],upcase:[Pi,[Pi],(h,[o])=>o.evaluate(h).toUpperCase()],downcase:[Pi,[Pi],(h,[o])=>o.evaluate(h).toLowerCase()],concat:[Pi,Ji(Si),(h,o)=>o.map(u=>ll(u.evaluate(h))).join("")],"resolved-locale":[Pi,[$s],(h,[o])=>o.evaluate(h).resolvedLocale()],random:[cr,[cr,cr,Si],(h,o)=>{const[u,p,_]=o.map(w=>w.evaluate(h));if(u>p||u===p)return u;let m;if(typeof _=="string")m=function(w){let j=0;if(w.length===0)return j;for(let k=0;k<w.length;k++)j=(j<<5)-j+w.charCodeAt(k),j|=0;return j}(_);else{if(typeof _!="number")throw new oo(`Invalid seed input: ${_}`);m=_}return u+Qc(m)()*(p-u)}]});class Hc{constructor(o,u,p,_){this.expression=o,this._warningHistory={},this._evaluator=new zd(p,_),this._defaultValue=u?function(m){return m.type==="color"&&(pm(m.default)||Array.isArray(m.default))?new ji(0,0,0,0):m.type==="color"?ji.parse(m.default)||null:m.default===void 0?null:m.default}(u):null,this._enumValues=u&&u.type==="enum"?u.values:null,this.configDependencies=za(o)}evaluateWithoutErrorHandling(o,u,p,_,m,w,j,k){return this._evaluator.globals=o,this._evaluator.feature=u,this._evaluator.featureState=p,this._evaluator.canonical=_||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=w,this._evaluator.featureTileCoord=j||null,this._evaluator.featureDistanceData=k||null,this.expression.evaluate(this._evaluator)}evaluate(o,u,p,_,m,w,j,k){this._evaluator.globals=o,this._evaluator.feature=u||null,this._evaluator.featureState=p||null,this._evaluator.canonical=_||null,this._evaluator.availableImages=m||null,this._evaluator.formattedSection=w||null,this._evaluator.featureTileCoord=j||null,this._evaluator.featureDistanceData=k||null;try{const H=this.expression.evaluate(this._evaluator);if(H==null||typeof H=="number"&&H!=H)return this._defaultValue;if(this._enumValues&&!(H in this._enumValues))throw new oo(`Expected value to be one of ${Object.keys(this._enumValues).map(E=>JSON.stringify(E)).join(", ")}, but found ${JSON.stringify(H)} instead.`);return H}catch(H){return this._warningHistory[H.message]||(this._warningHistory[H.message]=!0,typeof console<"u"&&console.warn(`Failed to evaluate expression "${JSON.stringify(this.expression.serialize())}". ${H.message}`)),this._defaultValue}}}function mp(h){return Array.isArray(h)&&h.length>0&&typeof h[0]=="string"&&h[0]in ul}function iA(h,o,u,p){const _=new va(ul,[],o?function(w){const j={color:Nl,string:Pi,number:cr,enum:Pi,boolean:Ii,formatted:us,resolvedImage:wc};return w.type==="array"?Da(j[w.value]||Si,w.length):j[w.type]}(o):void 0,void 0,void 0,u,p),m=_.parse(h,void 0,void 0,void 0,o&&o.type==="string"?{typeAnnotation:"coerce"}:void 0);return m?hm(new Hc(m,o,u,p)):Ph(_.errors)}class Am{constructor(o,u,p,_){this.kind=o,this._styleExpression=u,this.isLightConstant=p,this.isLineProgressConstant=_,this.isStateDependent=o!=="constant"&&!cl(u.expression),this.configDependencies=za(u.expression)}evaluateWithoutErrorHandling(o,u,p,_,m,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,_,m,w)}evaluate(o,u,p,_,m,w){return this._styleExpression.evaluate(o,u,p,_,m,w)}}class wf{constructor(o,u,p,_,m,w){this.kind=o,this.zoomStops=p,this._styleExpression=u,this.isStateDependent=o!=="camera"&&!cl(u.expression),this.isLightConstant=m,this.isLineProgressConstant=w,this.configDependencies=za(u.expression),this.interpolationType=_}evaluateWithoutErrorHandling(o,u,p,_,m,w){return this._styleExpression.evaluateWithoutErrorHandling(o,u,p,_,m,w)}evaluate(o,u,p,_,m,w){return this._styleExpression.evaluate(o,u,p,_,m,w)}interpolationFactor(o,u,p){return this.interpolationType?ic.interpolationFactor(this.interpolationType,o,u,p):0}}function G(h,o,u,p){if((h=iA(h,o,u,p)).result==="error")return h;const _=h.value.expression,m=fs(_);if(!m&&!sc(o))return Ph([new _c("","data expressions not supported")]);const w=As(_,["zoom","pitch","distance-from-center"]);if(!w&&!fm(o))return Ph([new _c("","zoom expressions not supported")]);const j=As(_,["measure-light"]);if(!j&&!Ap(o))return Ph([new _c("","measure-light expression not supported")]);const k=As(_,["line-progress"]);if(!k&&!function(M){return kh(M.expression,"line-progress")}(o))return Ph([new _c("","line-progress expression not supported")]);const H=o.expression&&o.expression.relaxZoomRestriction,E=Ae(_);return E||w||H?E instanceof _c?Ph([E]):E instanceof ic&&!tA(o)?Ph([new _c("",'"interpolate" expressions cannot be used with this property')]):hm(E?new wf(m&&k?"camera":"composite",h.value,E.labels,E instanceof ic?E.interpolation:void 0,j,k):new Am(m&&k?"constant":"source",h.value,j,k)):Ph([new _c("",'"zoom" expression may only be used as input to a top-level "step" or "interpolate" expression, or in the properties of atmosphere.')])}class ee{constructor(o,u){this._parameters=o,this._specification=u,op(this,id(this._parameters,this._specification))}static deserialize(o){return new ee(o._parameters,o._specification)}static serialize(o){return{_parameters:o._parameters,_specification:o._specification}}}function Ae(h){let o=null;if(h instanceof cm)o=Ae(h.result);else if(h instanceof Va){for(const u of h.args)if(o=Ae(u),o)break}else(h instanceof zc||h instanceof ic)&&h.input instanceof ga&&h.input.name==="zoom"&&(o=h);return o instanceof _c||h.eachChild(u=>{const p=Ae(u);p instanceof _c?o=p:o&&p&&o!==p&&(o=new _c("",'Only one zoom-based "step" or "interpolate" subexpression may be used in an expression.'))}),o}var Fe,Ve,it=function(){if(Ve)return Fe;Ve=1,Fe=o;var h=3;function o(u,p,_){var m=this.cells=[];if(u instanceof ArrayBuffer){this.arrayBuffer=u;var w=new Int32Array(this.arrayBuffer);u=w[0],this.d=(p=w[1])+2*(_=w[2]);for(var j=0;j<this.d*this.d;j++){var k=w[h+j],H=w[h+j+1];m.push(k===H?null:w.subarray(k,H))}var E=w[h+m.length+1];this.keys=w.subarray(w[h+m.length],E),this.bboxes=w.subarray(E),this.insert=this._insertReadonly}else{this.d=p+2*_;for(var M=0;M<this.d*this.d;M++)m.push([]);this.keys=[],this.bboxes=[]}this.n=p,this.extent=u,this.padding=_,this.scale=p/u,this.uid=0;var O=_/p*u;this.min=-O,this.max=u+O}return o.prototype.insert=function(u,p,_,m,w){this._forEachCell(p,_,m,w,this._insertCell,this.uid++),this.keys.push(u),this.bboxes.push(p),this.bboxes.push(_),this.bboxes.push(m),this.bboxes.push(w)},o.prototype._insertReadonly=function(){throw"Cannot insert into a GridIndex created from an ArrayBuffer."},o.prototype._insertCell=function(u,p,_,m,w,j){this.cells[w].push(j)},o.prototype.query=function(u,p,_,m,w){var j=this.min,k=this.max;if(u<=j&&p<=j&&k<=_&&k<=m&&!w)return Array.prototype.slice.call(this.keys);var H=[];return this._forEachCell(u,p,_,m,this._queryCell,H,{},w),H},o.prototype._queryCell=function(u,p,_,m,w,j,k,H){var E=this.cells[w];if(E!==null)for(var M=this.keys,O=this.bboxes,P=0;P<E.length;P++){var R=E[P];if(k[R]===void 0){var $=4*R;(H?H(O[$+0],O[$+1],O[$+2],O[$+3]):u<=O[$+2]&&p<=O[$+3]&&_>=O[$+0]&&m>=O[$+1])?(k[R]=!0,j.push(M[R])):k[R]=!1}}},o.prototype._forEachCell=function(u,p,_,m,w,j,k,H){for(var E=this._convertToCellCoord(u),M=this._convertToCellCoord(p),O=this._convertToCellCoord(_),P=this._convertToCellCoord(m),R=E;R<=O;R++)for(var $=M;$<=P;$++){var te=this.d*$+R;if((!H||H(this._convertFromCellCoord(R),this._convertFromCellCoord($),this._convertFromCellCoord(R+1),this._convertFromCellCoord($+1)))&&w.call(this,u,p,_,m,te,j,k,H))return}},o.prototype._convertFromCellCoord=function(u){return(u-this.padding)/this.scale},o.prototype._convertToCellCoord=function(u){return Math.max(0,Math.min(this.d-1,Math.floor(u*this.scale)+this.padding))},o.prototype.toArrayBuffer=function(){if(this.arrayBuffer)return this.arrayBuffer;for(var u=this.cells,p=h+this.cells.length+1+1,_=0,m=0;m<this.cells.length;m++)_+=this.cells[m].length;var w=new Int32Array(p+_+this.keys.length+this.bboxes.length);w[0]=this.extent,w[1]=this.n,w[2]=this.padding;for(var j=p,k=0;k<u.length;k++){var H=u[k];w[h+k]=j,w.set(H,j),j+=H.length}return w[h+u.length]=j,w.set(this.keys,j),w[h+u.length+1]=j+=this.keys.length,w.set(this.bboxes,j),j+=this.bboxes.length,w.buffer},Fe}(),st=f(it);const lt={};function He(h,o,u={}){Object.defineProperty(h,"_classRegistryKey",{value:o,writable:!1}),lt[o]={klass:h,omit:u.omit||[]}}He(Object,"Object"),st.serialize=function(h,o){const u=h.toArrayBuffer();return o&&o.add(u),{buffer:u}},st.deserialize=function(h){return new st(h.buffer)},Object.defineProperty(st,"name",{value:"Grid"}),He(st,"Grid"),typeof DOMMatrix<"u"&&He(DOMMatrix,"DOMMatrix"),He(ji,"Color"),He(Error,"Error"),He(yo,"Formatted"),He(Xo,"FormattedSection"),He(so,"AJAXError"),He(Yo,"ResolvedImage"),He(ee,"StylePropertyFunction"),He(Hc,"StyleExpression",{omit:["_evaluator"]}),He(ma,"ImageIdWithOptions"),He(wf,"ZoomDependentExpression"),He(Am,"ZoomConstantExpression"),He(ga,"CompoundExpression",{omit:["_evaluate"]});for(const h in ul)lt[ul[h]._classRegistryKey]||He(ul[h],`Expression${h}`);function St(h){return h&&typeof ArrayBuffer<"u"&&(h instanceof ArrayBuffer||h.constructor&&h.constructor.name==="ArrayBuffer")}function on(h){return self.ImageBitmap&&h instanceof ImageBitmap}function En(h,o){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp)return h;if(St(h)||on(h))return o&&o.add(h),h;if(ArrayBuffer.isView(h))return o&&o.add(h.buffer),h;if(h instanceof ImageData)return o&&o.add(h.data.buffer),h;if(Array.isArray(h)){const u=[];for(const p of h)u.push(En(p,o));return u}if(h instanceof Map){const u={$name:"Map"};for(const[p,_]of h.entries())u[p]=En(_);return u}if(h instanceof Set){const u={$name:"Set"};let p=0;for(const _ of h.values())u[++p]=En(_);return u}if(typeof h=="object"){const u=h.constructor,p=u._classRegistryKey;if(!p)throw new Error(`Can't serialize object of unregistered class "${p}".`);const _=u.serialize?u.serialize(h,o):{};if(!u.serialize){for(const m in h)h.hasOwnProperty(m)&&(lt[p].omit.indexOf(m)>=0||(_[m]=En(h[m],o)));h instanceof Error&&(_.message=h.message)}if(_.$name)throw new Error("$name property is reserved for worker serialization logic.");return p!=="Object"&&(_.$name=p),_}throw new Error("can't serialize object of type "+typeof h)}function Tn(h){if(h==null||typeof h=="boolean"||typeof h=="number"||typeof h=="string"||h instanceof Boolean||h instanceof Number||h instanceof String||h instanceof Date||h instanceof RegExp||St(h)||on(h)||ArrayBuffer.isView(h)||h instanceof ImageData)return h;if(Array.isArray(h))return h.map(Tn);if(typeof h=="object"){const o=h.$name||"Object";if(o==="Map"){const _=new Map;for(const m of Object.keys(h))m!=="$name"&&_.set(m,Tn(h[m]));return _}if(o==="Set"){const _=new Set;for(const m of Object.keys(h))m!=="$name"&&_.add(Tn(h[m]));return _}const{klass:u}=lt[o];if(!u)throw new Error(`Can't deserialize unregistered class "${o}".`);if(u.deserialize)return u.deserialize(h);const p=Object.create(u.prototype);for(const _ of Object.keys(h))_!=="$name"&&(p[_]=Tn(h[_]));return p}throw new Error("can't deserialize object of type "+typeof h)}const It={"Latin-1 Supplement":h=>h>=128&&h<=255,Arabic:h=>h>=1536&&h<=1791,"Arabic Supplement":h=>h>=1872&&h<=1919,"Arabic Extended-A":h=>h>=2208&&h<=2303,"Hangul Jamo":h=>h>=4352&&h<=4607,"Unified Canadian Aboriginal Syllabics":h=>h>=5120&&h<=5759,Khmer:h=>h>=6016&&h<=6143,"Unified Canadian Aboriginal Syllabics Extended":h=>h>=6320&&h<=6399,"General Punctuation":h=>h>=8192&&h<=8303,"Letterlike Symbols":h=>h>=8448&&h<=8527,"Number Forms":h=>h>=8528&&h<=8591,"Miscellaneous Technical":h=>h>=8960&&h<=9215,"Control Pictures":h=>h>=9216&&h<=9279,"Optical Character Recognition":h=>h>=9280&&h<=9311,"Enclosed Alphanumerics":h=>h>=9312&&h<=9471,"Geometric Shapes":h=>h>=9632&&h<=9727,"Miscellaneous Symbols":h=>h>=9728&&h<=9983,"Miscellaneous Symbols and Arrows":h=>h>=11008&&h<=11263,"CJK Radicals Supplement":h=>h>=11904&&h<=12031,"Kangxi Radicals":h=>h>=12032&&h<=12255,"Ideographic Description Characters":h=>h>=12272&&h<=12287,"CJK Symbols and Punctuation":h=>h>=12288&&h<=12351,Hiragana:h=>h>=12352&&h<=12447,Katakana:h=>h>=12448&&h<=12543,Bopomofo:h=>h>=12544&&h<=12591,"Hangul Compatibility Jamo":h=>h>=12592&&h<=12687,Kanbun:h=>h>=12688&&h<=12703,"Bopomofo Extended":h=>h>=12704&&h<=12735,"CJK Strokes":h=>h>=12736&&h<=12783,"Katakana Phonetic Extensions":h=>h>=12784&&h<=12799,"Enclosed CJK Letters and Months":h=>h>=12800&&h<=13055,"CJK Compatibility":h=>h>=13056&&h<=13311,"CJK Unified Ideographs Extension A":h=>h>=13312&&h<=19903,"Yijing Hexagram Symbols":h=>h>=19904&&h<=19967,"CJK Unified Ideographs":h=>h>=19968&&h<=40959,"Yi Syllables":h=>h>=40960&&h<=42127,"Yi Radicals":h=>h>=42128&&h<=42191,"Hangul Jamo Extended-A":h=>h>=43360&&h<=43391,"Hangul Syllables":h=>h>=44032&&h<=55215,"Hangul Jamo Extended-B":h=>h>=55216&&h<=55295,"Private Use Area":h=>h>=57344&&h<=63743,"CJK Compatibility Ideographs":h=>h>=63744&&h<=64255,"Arabic Presentation Forms-A":h=>h>=64336&&h<=65023,"Vertical Forms":h=>h>=65040&&h<=65055,"CJK Compatibility Forms":h=>h>=65072&&h<=65103,"Small Form Variants":h=>h>=65104&&h<=65135,"Arabic Presentation Forms-B":h=>h>=65136&&h<=65279,"Halfwidth and Fullwidth Forms":h=>h>=65280&&h<=65519,Osage:h=>h>=66736&&h<=66815,"CJK Unified Ideographs Extension B":h=>h>=131072&&h<=173791};function er(h){for(const o of h)if(An(o.charCodeAt(0)))return!0;return!1}function zn(h){for(const o of h)if(!un(o.charCodeAt(0)))return!1;return!0}function un(h){return!(It.Arabic(h)||It["Arabic Supplement"](h)||It["Arabic Extended-A"](h)||It["Arabic Presentation Forms-A"](h)||It["Arabic Presentation Forms-B"](h))}function An(h){return!(h!==746&&h!==747&&(h<4352||!(It["Bopomofo Extended"](h)||It.Bopomofo(h)||It["CJK Compatibility Forms"](h)&&!(h>=65097&&h<=65103)||It["CJK Compatibility Ideographs"](h)||It["CJK Compatibility"](h)||It["CJK Radicals Supplement"](h)||It["CJK Strokes"](h)||!(!It["CJK Symbols and Punctuation"](h)||h>=12296&&h<=12305||h>=12308&&h<=12319||h===12336)||It["CJK Unified Ideographs Extension A"](h)||It["CJK Unified Ideographs"](h)||It["Enclosed CJK Letters and Months"](h)||It["Hangul Compatibility Jamo"](h)||It["Hangul Jamo Extended-A"](h)||It["Hangul Jamo Extended-B"](h)||It["Hangul Jamo"](h)||It["Hangul Syllables"](h)||It.Hiragana(h)||It["Ideographic Description Characters"](h)||It.Kanbun(h)||It["Kangxi Radicals"](h)||It["Katakana Phonetic Extensions"](h)||It.Katakana(h)&&h!==12540||!(!It["Halfwidth and Fullwidth Forms"](h)||h===65288||h===65289||h===65293||h>=65306&&h<=65310||h===65339||h===65341||h===65343||h>=65371&&h<=65503||h===65507||h>=65512&&h<=65519)||!(!It["Small Form Variants"](h)||h>=65112&&h<=65118||h>=65123&&h<=65126)||It["Unified Canadian Aboriginal Syllabics"](h)||It["Unified Canadian Aboriginal Syllabics Extended"](h)||It["Vertical Forms"](h)||It["Yijing Hexagram Symbols"](h)||It["Yi Syllables"](h)||It["Yi Radicals"](h))))}function Jn(h){return!(An(h)||function(o){return!!(It["Latin-1 Supplement"](o)&&(o===167||o===169||o===174||o===177||o===188||o===189||o===190||o===215||o===247)||It["General Punctuation"](o)&&(o===8214||o===8224||o===8225||o===8240||o===8241||o===8251||o===8252||o===8258||o===8263||o===8264||o===8265||o===8273)||It["Letterlike Symbols"](o)||It["Number Forms"](o)||It["Miscellaneous Technical"](o)&&(o>=8960&&o<=8967||o>=8972&&o<=8991||o>=8996&&o<=9e3||o===9003||o>=9085&&o<=9114||o>=9150&&o<=9165||o===9167||o>=9169&&o<=9179||o>=9186&&o<=9215)||It["Control Pictures"](o)&&o!==9251||It["Optical Character Recognition"](o)||It["Enclosed Alphanumerics"](o)||It["Geometric Shapes"](o)||It["Miscellaneous Symbols"](o)&&!(o>=9754&&o<=9759)||It["Miscellaneous Symbols and Arrows"](o)&&(o>=11026&&o<=11055||o>=11088&&o<=11097||o>=11192&&o<=11243)||It["CJK Symbols and Punctuation"](o)||It.Katakana(o)||It["Private Use Area"](o)||It["CJK Compatibility Forms"](o)||It["Small Form Variants"](o)||It["Halfwidth and Fullwidth Forms"](o)||o===8734||o===8756||o===8757||o>=9984&&o<=10087||o>=10102&&o<=10131||o===65532||o===65533)}(h))}function ur(h){return h>=1424&&h<=2303||It["Arabic Presentation Forms-A"](h)||It["Arabic Presentation Forms-B"](h)}function Xn(h,o){return!(!o&&ur(h)||h>=2304&&h<=3583||h>=3840&&h<=4255||It.Khmer(h))}function Vr(h){for(const o of h)if(ur(o.charCodeAt(0)))return!0;return!1}const wr="deferred",ei="loading",Nr="loaded";let Ts=null,rs="unavailable",Oi=null;const Zi=function(h){h&&typeof h=="string"&&h.indexOf("NetworkError")>-1&&(rs="error"),Ts&&Ts(h)};function Us(){Js.fire(new su("pluginStateChange",{pluginStatus:rs,pluginURL:Oi}))}const Js=new Ch,Di=function(){return rs},_a=function(){if(rs!==wr||!Oi)throw new Error("rtl-text-plugin cannot be downloaded unless a pluginURL is specified");rs=ei,Us(),Oi&&Dc({url:Oi},h=>{h?Zi(h):(rs=Nr,Us())})},wo={applyArabicShaping:null,processBidirectionalText:null,processStyledBidirectionalText:null,isLoaded:()=>rs===Nr||wo.applyArabicShaping!=null,isLoading:()=>rs===ei,setState(h){rs=h.pluginStatus,Oi=h.pluginURL},isParsed:()=>wo.applyArabicShaping!=null&&wo.processBidirectionalText!=null&&wo.processStyledBidirectionalText!=null,getPluginURL:()=>Oi};class qr{constructor(o,u){this.zoom=o,u?(this.now=u.now,this.fadeDuration=u.fadeDuration,this.transition=u.transition,this.pitch=u.pitch,this.brightness=u.brightness):(this.now=0,this.fadeDuration=0,this.transition={},this.pitch=0,this.brightness=0)}isSupportedScript(o){return function(u,p){for(const _ of u)if(!Xn(_.charCodeAt(0),p))return!1;return!0}(o,wo.isLoaded())}}class Ia{constructor(o,u,p,_){this.property=o,this.value=u,this.expression=function(m,w,j,k){if(pm(m))return new ee(m,w);if(mp(m)||Array.isArray(m)&&m.length>0){const H=G(m,w,j,k);if(H.result==="error")throw new Error(H.value.map(E=>`${E.key}: ${E.message}`).join(", "));return H.value}{let H=m;return typeof m=="string"&&w.type==="color"&&(H=ji.parse(m)),{kind:"constant",configDependencies:new Set,evaluate:()=>H}}}(u===void 0?o.specification.default:u,o.specification,p,_)}isDataDriven(){return this.expression.kind==="source"||this.expression.kind==="composite"}possiblyEvaluate(o,u,p){return this.property.possiblyEvaluate(this,o,u,p)}}class Is{constructor(o,u,p){this.property=o,this.value=new Ia(o,void 0,u,p)}transitioned(o,u){return new Ul(this.property,this.value,u,fn({},o.transition,this.transition),o.now)}untransitioned(){return new Ul(this.property,this.value,null,{},0)}}class bo{constructor(o,u,p){this._properties=o,this._values=Object.create(o.defaultTransitionablePropertyValues),this._scope=u,this._options=p,this.configDependencies=new Set}getValue(o){return xr(this._values[o].value.value)}setValue(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new Is(this._values[o].property,this._scope,this._options)),this._values[o].value=new Ia(this._values[o].property,u===null?void 0:xr(u),this._scope,this._options),this._values[o].value.expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].value.expression.configDependencies]))}setTransitionOrValue(o,u){u&&(this._options=u);const p=this._properties.properties;if(o)for(const _ in o){const m=o[_];if(Hn(_,"-transition")){const w=_.slice(0,-11);p[w]&&this.setTransition(w,m)}else p.hasOwnProperty(_)&&this.setValue(_,m)}}getTransition(o){return xr(this._values[o].transition)}setTransition(o,u){this._values.hasOwnProperty(o)||(this._values[o]=new Is(this._values[o].property)),this._values[o].transition=xr(u)||void 0}serialize(){const o={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(o[u]=p);const _=this.getTransition(u);_!==void 0&&(o[`${u}-transition`]=_)}return o}transitioned(o,u){const p=new ca(this._properties);for(const _ of Object.keys(this._values))p._values[_]=this._values[_].transitioned(o,u._values[_]);return p}untransitioned(){const o=new ca(this._properties);for(const u of Object.keys(this._values))o._values[u]=this._values[u].untransitioned();return o}}class Ul{constructor(o,u,p,_,m){const w=_.delay||0,j=_.duration||0;m=m||0,this.property=o,this.value=u,this.begin=m+w,this.end=this.begin+j,o.specification.transition&&(_.delay||_.duration)&&(this.prior=p)}possiblyEvaluate(o,u,p){const _=o.now||0,m=this.value.possiblyEvaluate(o,u,p),w=this.prior;if(w){if(_>this.end)return this.prior=null,m;if(this.value.isDataDriven())return this.prior=null,m;if(_<this.begin)return w.possiblyEvaluate(o,u,p);{const j=(_-this.begin)/(this.end-this.begin);return this.property.interpolate(w.possiblyEvaluate(o,u,p),m,Xt(j))}}return m}}class ca{constructor(o){this._properties=o,this._values=Object.create(o.defaultTransitioningPropertyValues)}possiblyEvaluate(o,u,p){const _=new eo(this._properties);for(const m of Object.keys(this._values))_._values[m]=this._values[m].possiblyEvaluate(o,u,p);return _}hasTransition(){for(const o of Object.keys(this._values))if(this._values[o].prior)return!0;return!1}}class ra{constructor(o,u,p){this._properties=o,this._values=Object.create(o.defaultPropertyValues),this._scope=u,this._options=p,this.configDependencies=new Set}getValue(o){return xr(this._values[o].value)}setValue(o,u){this._values[o]=new Ia(this._values[o].property,u===null?void 0:xr(u),this._scope,this._options),this._values[o].expression.configDependencies&&(this.configDependencies=new Set([...this.configDependencies,...this._values[o].expression.configDependencies]))}serialize(){const o={};for(const u of Object.keys(this._values)){const p=this.getValue(u);p!==void 0&&(o[u]=p)}return o}possiblyEvaluate(o,u,p){const _=new eo(this._properties);for(const m of Object.keys(this._values))_._values[m]=this._values[m].possiblyEvaluate(o,u,p);return _}}class wa{constructor(o,u,p){this.property=o,this.value=u,this.parameters=p}isConstant(){return this.value.kind==="constant"}constantOr(o){return this.value.kind==="constant"?this.value.value:o}evaluate(o,u,p,_){return this.property.evaluate(this.value,this.parameters,o,u,p,_)}}class eo{constructor(o){this._properties=o,this._values=Object.create(o.defaultPossiblyEvaluatedValues)}get(o){return this._values[o]}}class Mn{constructor(o){this.specification=o}possiblyEvaluate(o,u){return o.expression.evaluate(u)}interpolate(o,u,p){const _=Sr[this.specification.type];return _?_(o,u,p):o}}class Gn{constructor(o,u){this.specification=o,this.overrides=u}possiblyEvaluate(o,u,p,_){return new wa(this,o.expression.kind==="constant"||o.expression.kind==="camera"?{kind:"constant",value:o.expression.evaluate(u,null,{},p,_)}:o.expression,u)}interpolate(o,u,p){if(o.value.kind!=="constant"||u.value.kind!=="constant")return o;if(o.value.value===void 0||u.value.value===void 0)return new wa(this,{kind:"constant",value:void 0},o.parameters);const _=Sr[this.specification.type];return _?new wa(this,{kind:"constant",value:_(o.value.value,u.value.value,p)},o.parameters):o}evaluate(o,u,p,_,m,w){return o.kind==="constant"?o.value:o.evaluate(u,p,_,m,w)}}class Ic{constructor(o){this.specification=o}possiblyEvaluate(o,u,p,_){return!!o.expression.evaluate(u,null,{},p,_)}interpolate(){return!1}}class ks{constructor(o){this.properties=o,this.defaultPropertyValues={},this.defaultTransitionablePropertyValues={},this.defaultTransitioningPropertyValues={},this.defaultPossiblyEvaluatedValues={},this.overridableProperties=[];const u=new qr(0,{});for(const p in o){const _=o[p];_.specification.overridable&&this.overridableProperties.push(p);const m=this.defaultPropertyValues[p]=new Ia(_,void 0),w=this.defaultTransitionablePropertyValues[p]=new Is(_);this.defaultTransitioningPropertyValues[p]=w.untransitioned(),this.defaultPossiblyEvaluatedValues[p]=m.possiblyEvaluate(u)}}}He(Gn,"DataDrivenProperty"),He(Mn,"DataConstantProperty"),He(Ic,"ColorRampProperty");var en=JSON.parse('{"$version":8,"$root":{"version":{"required":true,"type":"enum","values":[8]},"fragment":{"type":"boolean"},"name":{"type":"string"},"metadata":{"type":"*"},"center":{"type":"array","value":"number"},"zoom":{"type":"number"},"bearing":{"type":"number","default":0,"period":360},"pitch":{"type":"number","default":0},"light":{"type":"light"},"lights":{"required":false,"type":"array","value":"light-3d"},"terrain":{"type":"terrain","optional":true},"fog":{"type":"fog"},"snow":{"type":"snow","experimental":true},"rain":{"type":"rain","experimental":true},"camera":{"type":"camera"},"color-theme":{"type":"colorTheme"},"indoor":{"type":"indoor","experimental":true},"imports":{"type":"array","value":"import"},"schema":{"type":"schema"},"sources":{"required":true,"type":"sources"},"sprite":{"type":"string"},"glyphs":{"type":"string","default":"mapbox://fonts/mapbox/{fontstack}/{range}.pbf"},"transition":{"type":"transition"},"projection":{"type":"projection"},"layers":{"required":true,"type":"array","value":"layer"},"models":{"type":"models"},"featuresets":{"experimental":true,"type":"featuresets"}},"featuresets":{"experimental":true,"*":{"type":"featureset"}},"featureset":{"experimental":true,"metadata":{"type":"*"},"selectors":{"type":"array","value":"selector"}},"selector":{"experimental":true,"layer":{"type":"string","required":true},"properties":{"type":"selectorProperty","required":false},"featureNamespace":{"type":"string","required":false}},"selectorProperty":{"experimental":true,"*":{"type":"*"}},"model":{"type":"string","required":true},"import":{"id":{"type":"string","required":true},"url":{"type":"string","required":true},"config":{"type":"config"},"data":{"type":"$root"},"color-theme":{"type":"colorTheme","optional":true}},"config":{"*":{"type":"*"}},"schema":{"*":{"type":"option"}},"option":{"default":{"type":"*","property-type":"data-constant","expression":{},"required":true},"type":{"type":"enum","values":{"string":1,"number":1,"boolean":1,"color":1}},"array":{"type":"boolean"},"minValue":{"type":"number"},"maxValue":{"type":"number"},"stepValue":{"type":"number"},"values":{"type":"array","value":"*"},"metadata":{"type":"*"}},"models":{"*":{"type":"model"}},"light-3d":{"id":{"type":"string","required":true},"properties":{"type":"properties"},"type":{"type":"enum","values":{"ambient":{},"directional":{},"flat":{}}}},"properties":["properties_light_directional","properties_light_ambient","properties_light_flat"],"properties_light_directional":{"direction":{"type":"array","default":[210,30],"minimum":[0,0],"maximum":[360,90],"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"cast-shadows":{"type":"boolean","default":false,"property-type":"data-constant"},"shadow-quality":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"parameters":["zoom"]},"experimental":true},"shadow-intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_ambient":{"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"properties_light_flat":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"sources":{"*":{"type":"source"}},"source":["source_vector","source_raster","source_raster_dem","source_raster_array","source_geojson","source_video","source_image","source_model"],"source_vector":{"type":{"required":true,"type":"enum","values":{"vector":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"attribution":{"type":"string"},"promoteId":{"type":"promoteId"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster":{"type":{"required":true,"type":"enum","values":{"raster":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"scheme":{"type":"enum","values":{"xyz":1,"tms":1},"default":"xyz"},"attribution":{"type":"string"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_dem":{"type":{"required":true,"type":"enum","values":{"raster-dem":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"encoding":{"type":"enum","values":{"terrarium":1,"mapbox":1},"default":"mapbox"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_raster_array":{"experimental":true,"type":{"required":true,"type":"enum","values":{"raster-array":1}},"url":{"type":"string"},"tiles":{"type":"array","value":"string"},"bounds":{"type":"array","value":"number","length":4,"default":[-180,-85.051129,180,85.051129]},"minzoom":{"type":"number","default":0},"maxzoom":{"type":"number","default":22},"tileSize":{"type":"number","default":512},"attribution":{"type":"string"},"rasterLayers":{"type":"*"},"volatile":{"type":"boolean","default":false},"*":{"type":"*"}},"source_geojson":{"type":{"required":true,"type":"enum","values":{"geojson":1}},"data":{"type":"*"},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"attribution":{"type":"string"},"buffer":{"type":"number","default":128,"maximum":512,"minimum":0},"filter":{"type":"*"},"tolerance":{"type":"number","default":0.375},"cluster":{"type":"boolean","default":false},"clusterRadius":{"type":"number","default":50,"minimum":0},"clusterMaxZoom":{"type":"number"},"clusterMinPoints":{"type":"number"},"clusterProperties":{"type":"*"},"lineMetrics":{"type":"boolean","default":false},"generateId":{"type":"boolean","default":false},"promoteId":{"type":"promoteId"},"dynamic":{"type":"boolean","default":false}},"source_video":{"type":{"required":true,"type":"enum","values":{"video":1}},"urls":{"required":true,"type":"array","value":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_image":{"type":{"required":true,"type":"enum","values":{"image":1}},"url":{"required":false,"type":"string"},"coordinates":{"required":true,"type":"array","length":4,"value":{"type":"array","length":2,"value":"number"}}},"source_model":{"type":{"required":true,"type":"enum","values":{"model":1,"batched-model":1}},"maxzoom":{"type":"number","default":18},"minzoom":{"type":"number","default":0},"tiles":{"type":"array","value":"string"}},"layer":{"id":{"type":"string","required":true},"type":{"type":"enum","values":{"fill":{},"line":{},"symbol":{},"circle":{},"heatmap":{},"fill-extrusion":{},"raster":{},"raster-particle":{"experimental":true},"hillshade":{},"model":{"experimental":true},"background":{},"sky":{},"slot":{},"clip":{}},"required":true},"metadata":{"type":"*"},"source":{"type":"string"},"source-layer":{"type":"string"},"slot":{"type":"string"},"minzoom":{"type":"number","minimum":0,"maximum":24},"maxzoom":{"type":"number","minimum":0,"maximum":24},"filter":{"type":"filter"},"layout":{"type":"layout"},"paint":{"type":"paint"}},"layout":["layout_clip","layout_fill","layout_line","layout_circle","layout_heatmap","layout_fill-extrusion","layout_symbol","layout_raster","layout_raster-particle","layout_hillshade","layout_background","layout_sky","layout_model"],"layout_background":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_sky":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_model":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"model-id":{"type":"string","default":"","property-type":"data-driven","expression":{"parameters":["zoom","feature"]}}},"layout_clip":{"clip-layer-types":{"type":"array","value":"enum","values":{"model":1,"symbol":1},"default":[],"expression":{},"property-type":"data-constant"},"clip-layer-scope":{"type":"array","value":"string","default":[],"expression":{},"property-type":"data-constant"}},"layout_fill":{"fill-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-elevation-reference":{"type":"enum","values":{"none":1,"hd-road-base":1,"hd-road-markup":1},"default":"none","experimental":true,"private":true,"expression":{},"property-type":"data-constant"}},"layout_circle":{"circle-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_heatmap":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_fill-extrusion":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"fill-extrusion-edge-radius":{"type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"constant"}},"layout_line":{"line-cap":{"type":"enum","values":{"butt":1,"round":1,"square":1},"default":"butt","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-join":{"type":"enum","values":{"bevel":1,"round":1,"miter":1,"none":1},"default":"miter","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-miter-limit":{"type":"number","default":2,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-round-limit":{"type":"number","default":1.05,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-z-offset":{"type":"number","experimental":true,"default":0,"expression":{"parameters":["zoom","feature","line-progress"]},"property-type":"data-driven"},"line-elevation-reference":{"type":"enum","values":{"none":1,"sea":1,"ground":1,"hd-road-markup":1},"default":"none","experimental":true,"expression":{},"property-type":"data-constant"},"line-cross-slope":{"type":"number","experimental":true,"expression":{},"property-type":"constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"},"line-width-unit":{"type":"enum","values":{"pixels":1,"meters":1},"default":"pixels","experimental":true,"private":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"}},"layout_symbol":{"symbol-placement":{"type":"enum","values":{"point":1,"line":1,"line-center":1},"default":"point","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-spacing":{"type":"number","default":250,"minimum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"symbol-avoid-edges":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-sort-key":{"type":"number","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"symbol-z-order":{"type":"enum","values":{"auto":1,"viewport-y":1,"source":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-z-elevate":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"symbol-elevation-reference":{"type":"enum","values":{"sea":1,"ground":1,"hd-road-markup":1},"default":"ground","experimental":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-size":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"icon-text-fit":{"type":"enum","values":{"none":1,"width":1,"height":1,"both":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-text-fit-padding":{"type":"array","value":"number","length":4,"default":[0,0,0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-image":{"type":"resolvedImage","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-keep-upright":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"icon-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotation-alignment":{"type":"enum","values":{"map":1,"viewport":1,"auto":1},"default":"auto","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-field":{"type":"formatted","default":"","tokens":true,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-font":{"type":"array","value":"string","default":["Open Sans Regular","Arial Unicode MS Regular"],"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size":{"type":"number","default":16,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-size-scale-range":{"type":"array","value":"number","length":2,"default":[0.8,2],"minimum":0.1,"maximum":10,"experimental":true,"private":true,"expression":{},"property-type":"data-constant"},"text-max-width":{"type":"number","default":10,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-line-height":{"type":"number","default":1.2,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-letter-spacing":{"type":"number","default":0,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-justify":{"type":"enum","values":{"auto":1,"left":1,"center":1,"right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-radial-offset":{"type":"number","default":0,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["zoom","feature"]}},"text-variable-anchor":{"type":"array","value":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-anchor":{"type":"enum","values":{"center":1,"left":1,"right":1,"top":1,"bottom":1,"top-left":1,"top-right":1,"bottom-left":1,"bottom-right":1},"default":"center","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-max-angle":{"type":"number","default":45,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-writing-mode":{"type":"array","value":"enum","values":{"horizontal":1,"vertical":1},"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-rotate":{"type":"number","default":0,"period":360,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-padding":{"type":"number","default":2,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-keep-upright":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-transform":{"type":"enum","values":{"none":1,"uppercase":1,"lowercase":1},"default":"none","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-offset":{"type":"array","value":"number","length":2,"default":[0,0],"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"},"text-allow-overlap":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-ignore-placement":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"text-optional":{"type":"boolean","default":false,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_raster-particle":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"layout_hillshade":{"visibility":{"type":"enum","values":{"visible":1,"none":1},"default":"visible","expression":{},"property-type":"constant"}},"filter":{"type":"array","value":"*"},"filter_symbol":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature","pitch","distance-from-center"]}},"filter_fill":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_hillshade":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_raster-particle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_clip":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_model":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_line":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_circle":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_fill-extrusion":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_heatmap":{"type":"boolean","default":false,"property-type":"data-driven","expression":{"parameters":["zoom","feature"]}},"filter_operator":{"type":"enum","values":{"==":1,"!=":1,">":1,">=":1,"<":1,"<=":1,"in":1,"!in":1,"all":1,"any":1,"none":1,"has":1,"!has":1}},"geometry_type":{"type":"enum","values":{"Point":1,"LineString":1,"Polygon":1}},"function":{"expression":{"type":"expression"},"stops":{"type":"array","value":"function_stop"},"base":{"type":"number","default":1,"minimum":0},"property":{"type":"string","default":"$zoom"},"type":{"type":"enum","values":{"identity":1,"exponential":1,"interval":1,"categorical":1},"default":"exponential"},"colorSpace":{"type":"enum","values":{"rgb":1,"lab":1,"hcl":1},"default":"rgb"},"default":{"type":"*","required":false}},"function_stop":{"type":"array","minimum":0,"maximum":24,"value":["number","color"],"length":2},"expression":{"type":"array","value":"*","minimum":1},"fog":{"range":{"type":"array","default":[0.5,10],"minimum":-20,"maximum":20,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"high-color":{"type":"color","property-type":"data-constant","default":"#245cdf","expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"space-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,"#010b19",7,"#367ab9"],"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"horizon-blend":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],4,0.2,7,0.1],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"star-intensity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],5,0.35,6,0],"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vertical-range":{"type":"array","default":[0,0],"minimum":0,"length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}}},"snow":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.85],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.3],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":"#ffffff","experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.4,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,50],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"flake-size":{"type":"number","property-type":"data-constant","default":0.71,"minimum":0,"maximum":5,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"rain":{"density":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,0.5],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#03113d",0.3,"#a8adbc"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"opacity":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,0.88,1,0.7],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette":{"type":"number","property-type":"data-constant","default":["interpolate",["linear"],["zoom"],11,0,13,1],"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"vignette-color":{"type":"color","property-type":"data-constant","default":["interpolate",["linear"],["measure-light","brightness"],0,"#001736",0.3,"#464646"],"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"center-thinning":{"type":"number","property-type":"data-constant","default":0.57,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true},"direction":{"type":"array","default":[0,80],"minimum":0,"maximum":360,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"droplet-size":{"type":"array","default":[2.6,18.2],"minimum":0,"maximum":50,"length":2,"value":"number","property-type":"data-constant","transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true}},"distortion-strength":{"type":"number","property-type":"data-constant","default":0.7,"minimum":0,"maximum":1,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"],"relaxZoomRestriction":true},"transition":true}},"camera":{"camera-projection":{"type":"enum","values":{"perspective":1,"orthographic":1},"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"default":"perspective","property-type":"data-constant"}},"colorTheme":{"data":{"type":"string","property-type":"data-constant","expression":{}}},"indoor":{"floorplanFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}},"buildingFeaturesetId":{"type":"string","experimental":true,"property-type":"data-constant","expression":{}}},"light":{"anchor":{"type":"enum","default":"viewport","values":{"map":1,"viewport":1},"property-type":"data-constant","expression":{"parameters":["zoom"]}},"position":{"type":"array","default":[1.15,210,30],"length":3,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"color":{"type":"color","property-type":"data-constant","default":"#ffffff","expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"intensity":{"type":"number","property-type":"data-constant","default":0.5,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"projection":{"name":{"type":"enum","values":{"albers":1,"equalEarth":1,"equirectangular":1,"lambertConformalConic":1,"mercator":1,"naturalEarth":1,"winkelTripel":1,"globe":1},"default":"mercator","required":true},"center":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-180,-90],"maximum":[180,90]},"parallels":{"type":"array","length":2,"value":"number","property-type":"data-constant","minimum":[-90,-90],"maximum":[90,90]}},"terrain":{"source":{"type":"string","required":true},"exaggeration":{"type":"number","property-type":"data-constant","default":1,"minimum":0,"maximum":1000,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true}},"paint":["paint_fill","paint_line","paint_circle","paint_heatmap","paint_fill-extrusion","paint_symbol","paint_raster","paint_raster-particle","paint_hillshade","paint_background","paint_sky","paint_model"],"paint_fill":{"fill-antialias":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-outline-color":{"type":"color","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"fill-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_fill-extrusion":{"fill-extrusion-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"fill-extrusion-height":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-base":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"fill-extrusion-height-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"flat","property-type":"data-constant"},"fill-extrusion-base-alignment":{"type":"enum","experimental":true,"values":{"terrain":1,"flat":1},"default":"terrain","property-type":"data-constant"},"fill-extrusion-vertical-gradient":{"type":"boolean","default":true,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"fill-extrusion-ambient-occlusion-intensity":{"property-type":"data-constant","type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-radius":{"property-type":"data-constant","type":"number","default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-wall-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-radius":{"property-type":"data-constant","type":"number","experimental":true,"default":3,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true},"fill-extrusion-ambient-occlusion-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-flood-light-color":{"property-type":"data-constant","type":"color","experimental":true,"default":"#ffffff","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-intensity":{"property-type":"data-constant","type":"number","experimental":true,"default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]}},"fill-extrusion-flood-light-wall-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-radius":{"property-type":"data-driven","type":"number","experimental":true,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state"]}},"fill-extrusion-flood-light-ground-attenuation":{"property-type":"data-constant","type":"number","experimental":true,"default":0.69,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-vertical-scale":{"property-type":"data-constant","type":"number","experimental":true,"default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"fill-extrusion-rounded-roof":{"property-type":"data-constant","type":"boolean","default":true,"experimental":true,"expression":{"parameters":["zoom"]}},"fill-extrusion-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"fill-extrusion-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"fill-extrusion-line-width":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"fill-extrusion-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"}},"paint_line":{"line-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"line-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"line-width":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light","line-progress"]},"property-type":"data-driven"},"line-gap-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-offset":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"line-dasharray":{"type":"array","value":"number","minimum":0,"expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom","feature"]},"property-type":"data-driven"},"line-gradient":{"type":"color","expression":{"interpolated":true,"parameters":["line-progress"]},"property-type":"color-ramp"},"line-trim-offset":{"type":"array","value":"number","length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"property-type":"constant"},"line-trim-fade-range":{"type":"array","value":"number","experimental":true,"length":2,"default":[0,0],"minimum":[0,0],"maximum":[1,1],"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-trim-color":{"type":"color","experimental":true,"default":"transparent","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"line-border-width":{"type":"number","private":true,"default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-border-color":{"type":"color","private":true,"default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state"]},"property-type":"data-driven"},"line-occlusion-opacity":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"transition":true,"property-type":"data-constant"}},"paint_circle":{"circle-radius":{"type":"number","default":5,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-blur":{"type":"number","default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"circle-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-scale":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"circle-stroke-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-stroke-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"circle-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_heatmap":{"heatmap-radius":{"type":"number","default":30,"minimum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-weight":{"type":"number","default":1,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"heatmap-intensity":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"heatmap-color":{"type":"color","default":["interpolate",["linear"],["heatmap-density"],0,"rgba(0, 0, 255, 0)",0.1,"royalblue",0.3,"cyan",0.5,"lime",0.7,"yellow",1,"red"],"expression":{"interpolated":true,"parameters":["heatmap-density"]},"property-type":"color-ramp"},"heatmap-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_symbol":{"icon-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"text-emissive-strength":{"type":"number","default":1,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light","feature-state"]},"property-type":"data-driven"},"icon-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"icon-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"icon-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-image-cross-fade":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"transition":true},"text-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-occlusion-opacity":{"type":"number","minimum":0,"maximum":1,"default":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-color":{"type":"color","default":"#000000","transition":true,"overridable":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-color":{"type":"color","default":"rgba(0, 0, 0, 0)","transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-width":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-halo-blur":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","feature","feature-state","measure-light"]},"property-type":"data-driven"},"text-translate":{"type":"array","value":"number","length":2,"default":[0,0],"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"text-translate-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"icon-color-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"icon-color-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"symbol-z-offset":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom","feature"]},"property-type":"data-driven"}},"paint_raster":{"raster-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-value"]},"property-type":"color-ramp"},"raster-color-mix":{"type":"array","default":[0.2126,0.7152,0.0722,0],"length":4,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-color-range":{"type":"array","length":2,"value":"number","property-type":"data-constant","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]}},"raster-hue-rotate":{"type":"number","default":0,"period":360,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-min":{"type":"number","default":0,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-brightness-max":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-saturation":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-contrast":{"type":"number","default":0,"minimum":-1,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-resampling":{"type":"enum","values":{"linear":1,"nearest":1},"default":"linear","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"raster-fade-duration":{"type":"number","default":300,"minimum":0,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"raster-array-band":{"type":"string","required":false,"experimental":true,"property-type":"data-constant"},"raster-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"experimental":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_raster-particle":{"raster-particle-array-band":{"type":"string","required":false,"property-type":"data-constant"},"raster-particle-count":{"type":"number","default":512,"minimum":1,"property-type":"data-constant"},"raster-particle-color":{"type":"color","expression":{"interpolated":true,"parameters":["raster-particle-speed"]},"property-type":"color-ramp"},"raster-particle-max-speed":{"type":"number","default":1,"minimum":1,"property-type":"data-constant"},"raster-particle-speed-factor":{"type":"number","default":0.2,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-fade-opacity-factor":{"type":"number","default":0.98,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"raster-particle-reset-rate-factor":{"type":"number","default":0.8,"minimum":0,"maximum":1,"property-type":"data-constant"},"raster-particle-elevation":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_hillshade":{"hillshade-illumination-direction":{"type":"number","default":335,"minimum":0,"maximum":359,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-illumination-anchor":{"type":"enum","values":{"map":1,"viewport":1},"default":"viewport","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-exaggeration":{"type":"number","default":0.5,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"hillshade-shadow-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-highlight-color":{"type":"color","default":"#FFFFFF","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-accent-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"},"hillshade-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_background":{"background-pitch-alignment":{"type":"enum","values":{"map":1,"viewport":1},"default":"map","expression":{"parameters":[]},"experimental":true,"property-type":"data-constant"},"background-color":{"type":"color","default":"#000000","transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-pattern":{"type":"resolvedImage","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"background-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"},"background-emissive-strength":{"type":"number","default":0,"minimum":0,"transition":true,"expression":{"interpolated":true,"parameters":["zoom","measure-light"]},"property-type":"data-constant"}},"paint_sky":{"sky-type":{"type":"enum","values":{"gradient":1,"atmosphere":1},"default":"atmosphere","expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun":{"type":"array","value":"number","length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-atmosphere-sun-intensity":{"type":"number","default":10,"minimum":0,"maximum":100,"property-type":"data-constant"},"sky-gradient-center":{"type":"array","value":"number","default":[0,0],"length":2,"minimum":[0,0],"maximum":[360,180],"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient-radius":{"type":"number","default":90,"minimum":0,"maximum":180,"expression":{"parameters":["zoom"]},"property-type":"data-constant"},"sky-gradient":{"type":"color","default":["interpolate",["linear"],["sky-radial-progress"],0.8,"#87ceeb",1,"white"],"expression":{"interpolated":true,"parameters":["sky-radial-progress"]},"property-type":"color-ramp"},"sky-atmosphere-halo-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-atmosphere-color":{"type":"color","default":"white","property-type":"data-constant"},"sky-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant"}},"paint_model":{"model-opacity":{"type":"number","default":1,"minimum":0,"maximum":1,"transition":true,"expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"property-type":"data-driven"},"model-rotation":{"type":"array","value":"number","length":3,"default":[0,0,0],"period":360,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-scale":{"type":"array","value":"number","length":3,"default":[1,1,1],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-translation":{"type":"array","value":"number","length":3,"default":[0,0,0],"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","zoom"]},"transition":true},"model-color":{"type":"color","default":"#ffffff","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light","zoom"]},"transition":true},"model-color-mix-intensity":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-type":{"type":"enum","values":{"common-3d":1,"location-indicator":1},"default":"common-3d","property-type":"data-constant"},"model-cast-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-receive-shadows":{"type":"boolean","default":true,"property-type":"data-constant"},"model-ambient-occlusion-intensity":{"type":"number","default":1,"minimum":0,"maximum":1,"expression":{"interpolated":true,"parameters":["zoom"]},"property-type":"data-constant","transition":true},"model-emissive-strength":{"type":"number","property-type":"data-driven","default":0,"minimum":0,"maximum":5,"expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-roughness":{"type":"number","default":1,"minimum":0,"maximum":1,"property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state"]},"transition":true},"model-height-based-emissive-strength-multiplier":{"type":"array","default":[1,1,1,1,0],"length":5,"value":"number","property-type":"data-driven","expression":{"interpolated":true,"parameters":["feature","feature-state","measure-light"]},"transition":true},"model-cutoff-fade-range":{"type":"number","default":0,"minimum":0,"maximum":1,"expression":{},"property-type":"data-constant"},"model-front-cutoff":{"type":"array","private":true,"value":"number","property-type":"data-constant","expression":{"interpolated":true,"parameters":["zoom"]},"length":3,"default":[0,0,1],"minimum":[0,0,0],"maximum":[1,1,1]}},"transition":{"duration":{"type":"number","default":300,"minimum":0},"delay":{"type":"number","default":0,"minimum":0}},"property-type":{"data-driven":{"type":"property-type"},"color-ramp":{"type":"property-type"},"data-constant":{"type":"property-type"},"constant":{"type":"property-type"}},"promoteId":{"*":{"type":"string"}}}');function Zd(h){return h instanceof Number||h instanceof String||h instanceof Boolean?h.valueOf():h}function fo(h){if(Array.isArray(h))return h.map(fo);if(h instanceof Object&&!(h instanceof Number||h instanceof String||h instanceof Boolean)){const o={};for(const u in h)o[u]=fo(h[u]);return o}return Zd(h)}function gp(h){if(h===!0||h===!1)return!0;if(!Array.isArray(h)||h.length===0)return!1;switch(h[0]){case"has":return h.length>=2&&h[1]!=="$id"&&h[1]!=="$type";case"in":return h.length>=3&&(typeof h[1]!="string"||Array.isArray(h[2]));case"!in":case"!has":case"none":return!1;case"==":case"!=":case">":case">=":case"<":case"<=":return h.length!==3||Array.isArray(h[1])||Array.isArray(h[2]);case"any":case"all":for(const o of h.slice(1))if(!gp(o)&&typeof o!="boolean")return!1;return!0;default:return!0}}function yg(h,o="",u=null,p="fill"){if(h==null)return{filter:()=>!0,needGeometry:!1,needFeature:!1};gp(h)||(h=od(h));const _=h;let m=!0;try{m=function(E){if(!sd(E))return E;let M=fo(E);return Xd(M),M=vg(M),M}(_)}catch{console.warn(`Failed to extract static filter. Filter will continue working, but at higher memory usage and slower framerate.
This is most likely a bug, please report this via https://github.com/mapbox/mapbox-gl-js/issues/new?assignees=&labels=&template=Bug_report.md
and paste the contents of this message in the report.
Thank you!
Filter Expression:
${JSON.stringify(_,null,2)}
        `)}let w=null,j=null;if(p!=="background"&&p!=="sky"&&p!=="slot"){j=en[`filter_${p}`];const E=iA(m,j,o,u);if(E.result==="error")throw new Error(E.value.map(M=>`${M.key}: ${M.message}`).join(", "));w=(M,O,P)=>E.value.evaluate(M,O,{},P)}let k=null,H=null;if(m!==_){const E=iA(_,j,o,u);if(E.result==="error")throw new Error(E.value.map(M=>`${M.key}: ${M.message}`).join(", "));k=(M,O,P,R,$)=>E.value.evaluate(M,O,{},P,void 0,void 0,R,$),H=!fs(E.value.expression)}return{filter:w,dynamicFilter:k||void 0,needGeometry:Yd(m),needFeature:!!H}}function vg(h){if(!Array.isArray(h))return h;const o=function(u){if(mm.has(u[0])){for(let p=1;p<u.length;p++)if(sd(u[p]))return!0}return u}(h);return o===!0?o:o.map(u=>vg(u))}function Xd(h){let o=!1;const u=[];if(h[0]==="case"){for(let p=1;p<h.length-1;p+=2)o=o||sd(h[p]),u.push(h[p+1]);u.push(h[h.length-1])}else if(h[0]==="match"){o=o||sd(h[1]);for(let p=2;p<h.length-1;p+=2)u.push(h[p+1]);u.push(h[h.length-1])}else if(h[0]==="step"){o=o||sd(h[1]);for(let p=1;p<h.length-1;p+=2)u.push(h[p+1])}o&&(h.length=0,h.push("any",...u));for(let p=1;p<h.length;p++)Xd(h[p])}function sd(h){if(!Array.isArray(h))return!1;if((o=h[0])==="pitch"||o==="distance-from-center")return!0;var o;for(let u=1;u<h.length;u++)if(sd(h[u]))return!0;return!1}const mm=new Set(["in","==","!=",">",">=","<","<=","to-boolean"]);function dl(h,o){return h<o?-1:h>o?1:0}function Yd(h){if(!Array.isArray(h))return!1;if(h[0]==="within"||h[0]==="distance")return!0;for(let o=1;o<h.length;o++)if(Yd(h[o]))return!0;return!1}function od(h){if(!h)return!0;const o=h[0];return h.length<=1?o!=="any":o==="=="?bf(h[1],h[2],"=="):o==="!="?zl(bf(h[1],h[2],"==")):o==="<"||o===">"||o==="<="||o===">="?bf(h[1],h[2],o):o==="any"?(u=h.slice(1),["any"].concat(u.map(od))):o==="all"?["all"].concat(h.slice(1).map(od)):o==="none"?["all"].concat(h.slice(1).map(od).map(zl)):o==="in"?sA(h[1],h.slice(2)):o==="!in"?zl(sA(h[1],h.slice(2))):o==="has"?gm(h[1]):o!=="!has"||zl(gm(h[1]));var u}function bf(h,o,u){switch(h){case"$type":return[`filter-type-${u}`,o];case"$id":return[`filter-id-${u}`,o];default:return[`filter-${u}`,h,o]}}function sA(h,o){if(o.length===0)return!1;switch(h){case"$type":return["filter-type-in",["literal",o]];case"$id":return["filter-id-in",["literal",o]];default:return o.length>200&&!o.some(u=>typeof u!=typeof o[0])?["filter-in-large",h,["literal",o.sort(dl)]]:["filter-in-small",h,["literal",o]]}}function gm(h){switch(h){case"$type":return!0;case"$id":return["filter-has-id"];default:return["filter-has",h]}}function zl(h){return["!",h]}const Cf="";function ja(h,o){return o?`${h}${Cf}${o}`:h}const Sf="-transition",C0=new Set(["fill","line","background","hillshade","raster"]);class Ql extends Ch{constructor(o,u,p,_,m){if(super(),this.id=o.id,this.fqid=ja(this.id,p),this.type=o.type,this.scope=p,this.lut=_,this.options=m,this._featureFilter={filter:()=>!0,needGeometry:!1,needFeature:!1},this._filterCompiled=!1,this.configDependencies=new Set,o.type!=="custom"){if(this.metadata=o.metadata,this.minzoom=o.minzoom,this.maxzoom=o.maxzoom,o.type&&o.type!=="background"&&o.type!=="sky"&&o.type!=="slot"){this.source=o.source,this.sourceLayer=o["source-layer"],this.filter=o.filter;const w=iA(this.filter,en[`filter_${o.type}`]);w.result!=="error"&&(this.configDependencies=new Set([...this.configDependencies,...w.value.configDependencies]))}if(o.slot&&(this.slot=o.slot),u.layout&&(this._unevaluatedLayout=new ra(u.layout,this.scope,m),this.configDependencies=new Set([...this.configDependencies,...this._unevaluatedLayout.configDependencies])),u.paint){this._transitionablePaint=new bo(u.paint,this.scope,m);for(const w in o.paint)this.setPaintProperty(w,o.paint[w]);for(const w in o.layout)this.setLayoutProperty(w,o.layout[w]);this.configDependencies=new Set([...this.configDependencies,...this._transitionablePaint.configDependencies]),this._transitioningPaint=this._transitionablePaint.untransitioned(),this.paint=new eo(u.paint)}}}onAdd(o){}onRemove(o){}isDraped(o){return!this.is3D()&&C0.has(this.type)}getLayoutProperty(o){return o==="visibility"?this.visibility:this._unevaluatedLayout.getValue(o)}setLayoutProperty(o,u){if(this.type==="custom"&&o==="visibility")return void(this.visibility=u);const p=this._unevaluatedLayout;p._properties.properties[o]&&(p.setValue(o,u),this.configDependencies=new Set([...this.configDependencies,...p.configDependencies]),o==="visibility"&&this.possiblyEvaluateVisibility())}possiblyEvaluateVisibility(){this._unevaluatedLayout._values.visibility&&(this.visibility=this._unevaluatedLayout._values.visibility.possiblyEvaluate({zoom:0}))}getPaintProperty(o){return Hn(o,Sf)?this._transitionablePaint.getTransition(o.slice(0,-11)):this._transitionablePaint.getValue(o)}setPaintProperty(o,u){const p=this._transitionablePaint,_=p._properties.properties;if(Hn(o,Sf)){const M=o.slice(0,-11);return _[M]&&p.setTransition(M,u||void 0),!1}if(!_[o])return!1;const m=p._values[o],w=m.value.isDataDriven(),j=m.value;p.setValue(o,u),this.configDependencies=new Set([...this.configDependencies,...p.configDependencies]),this._handleSpecialPaintPropertyUpdate(o);const k=p._values[o].value,H=k.isDataDriven(),E=Hn(o,"pattern")||o==="line-dasharray";return H||w||E||this._handleOverridablePaintPropertyUpdate(o,j,k)}_handleSpecialPaintPropertyUpdate(o){}getProgramIds(){return null}getDefaultProgramParams(o,u,p){return null}_handleOverridablePaintPropertyUpdate(o,u,p){return!1}isHidden(o){return!!(this.minzoom&&o<this.minzoom)||!!(this.maxzoom&&o>=this.maxzoom)||this.visibility==="none"}updateTransitions(o){this._transitioningPaint=this._transitionablePaint.transitioned(o,this._transitioningPaint)}hasTransition(){return this._transitioningPaint.hasTransition()}recalculate(o,u){this._unevaluatedLayout&&(this.layout=this._unevaluatedLayout.possiblyEvaluate(o,void 0,u)),this.paint=this._transitioningPaint.possiblyEvaluate(o,void 0,u)}serialize(){return fr({id:this.id,type:this.type,slot:this.slot,source:this.source,"source-layer":this.sourceLayer,metadata:this.metadata,minzoom:this.minzoom,maxzoom:this.maxzoom,filter:this.filter,layout:this._unevaluatedLayout&&this._unevaluatedLayout.serialize(),paint:this._transitionablePaint&&this._transitionablePaint.serialize()},(o,u)=>!(o===void 0||u==="layout"&&!Object.keys(o).length||u==="paint"&&!Object.keys(o).length))}is3D(){return!1}isSky(){return!1}isTileClipped(){return!1}hasOffscreenPass(){return!1}hasShadowPass(){return!1}canCastShadows(){return!1}hasLightBeamPass(){return!1}cutoffRange(){return 0}tileCoverLift(){return 0}resize(){}isStateDependent(){for(const o in this.paint._values){const u=this.paint.get(o);if(u instanceof wa&&sc(u.property.specification)&&(u.value.kind==="source"||u.value.kind==="composite")&&u.value.isStateDependent)return!0}return!1}compileFilter(o){this._filterCompiled||(this._featureFilter=yg(this.filter,this.scope,o),this._filterCompiled=!0)}invalidateCompiledFilter(){this._filterCompiled=!1}dynamicFilter(){return this._featureFilter.dynamicFilter}dynamicFilterNeedsFeature(){return this._featureFilter.needFeature}getLayerRenderingStats(){return this._stats}resetLayerRenderingStats(o){this._stats&&(o.renderPass==="shadow"?this._stats.numRenderedVerticesInShadowPass=0:this._stats.numRenderedVerticesInTransparentPass=0)}queryRadius(o){}queryIntersectsFeature(o,u,p,_,m,w,j,k,H){}}const yp={Int8:Int8Array,Uint8:Uint8Array,Int16:Int16Array,Uint16:Uint16Array,Int32:Int32Array,Uint32:Uint32Array,Float32:Float32Array};class uu{constructor(o,u){this._structArray=o,this._pos1=u*this.size,this._pos2=this._pos1/2,this._pos4=this._pos1/4,this._pos8=this._pos1/8}}class js{constructor(){this.isTransferred=!1,this.capacity=-1,this.resize(0)}static serialize(o,u){return o._trim(),u&&(o.isTransferred=!0,u.add(o.arrayBuffer)),{length:o.length,arrayBuffer:o.arrayBuffer}}static deserialize(o){const u=Object.create(this.prototype);return u.arrayBuffer=o.arrayBuffer,u.length=o.length,u.capacity=o.arrayBuffer.byteLength/u.bytesPerElement,u._refreshViews(),u}_trim(){this.length!==this.capacity&&(this.capacity=this.length,this.arrayBuffer=this.arrayBuffer.slice(0,this.length*this.bytesPerElement),this._refreshViews())}clear(){this.length=0}resize(o){this.reserve(o),this.length=o}reserve(o){if(o>this.capacity){this.capacity=Math.max(o,Math.floor(5*this.capacity),128),this.arrayBuffer=new ArrayBuffer(this.capacity*this.bytesPerElement);const u=this.uint8;this._refreshViews(),u&&this.uint8.set(u)}}_refreshViews(){throw new Error("StructArray#_refreshViews() must be implemented by each concrete StructArray layout")}emplace(...o){throw new Error("StructArray#emplace() must be implemented by each concrete StructArray layout")}emplaceBack(...o){throw new Error("StructArray#emplaceBack() must be implemented by each concrete StructArray layout")}destroy(){this.int8=this.uint8=this.int16=this.uint16=this.int32=this.uint32=this.float32=null,this.arrayBuffer=null}}function $i(h,o=1){let u=0,p=0;return{members:h.map(_=>{const m=yp[_.type].BYTES_PER_ELEMENT,w=u=oA(u,Math.max(o,m)),j=_.components||1;return p=Math.max(p,m),u+=m*j,{name:_.name,type:_.type,components:j,offset:w}}),size:oA(u,Math.max(p,o)),alignment:o}}function oA(h,o){return Math.ceil(h/o)*o}class Iu extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const _=2*o;return this.int16[_+0]=u,this.int16[_+1]=p,o}}Iu.prototype.bytesPerElement=4,He(Iu,"StructArrayLayout2i4");class Jd extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p){const _=this.length;return this.resize(_+1),this.emplace(_,o,u,p)}emplace(o,u,p,_){const m=3*o;return this.int16[m+0]=u,this.int16[m+1]=p,this.int16[m+2]=_,o}}Jd.prototype.bytesPerElement=6,He(Jd,"StructArrayLayout3i6");class eh extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,_){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p,_)}emplace(o,u,p,_,m){const w=4*o;return this.int16[w+0]=u,this.int16[w+1]=p,this.int16[w+2]=_,this.int16[w+3]=m,o}}eh.prototype.bytesPerElement=8,He(eh,"StructArrayLayout4i8");class jc extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,p,_,m)}emplace(o,u,p,_,m,w){const j=5*o;return this.int16[j+0]=u,this.int16[j+1]=p,this.int16[j+2]=_,this.int16[j+3]=m,this.int16[j+4]=w,o}}jc.prototype.bytesPerElement=10,He(jc,"StructArrayLayout5i10");class Lh extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j){const k=this.length;return this.resize(k+1),this.emplace(k,o,u,p,_,m,w,j)}emplace(o,u,p,_,m,w,j,k){const H=6*o,E=12*o,M=3*o;return this.int16[H+0]=u,this.int16[H+1]=p,this.uint8[E+4]=_,this.uint8[E+5]=m,this.uint8[E+6]=w,this.uint8[E+7]=j,this.float32[M+2]=k,o}}Lh.prototype.bytesPerElement=12,He(Lh,"StructArrayLayout2i4ub1f12");class ju extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p,_)}emplace(o,u,p,_,m){const w=4*o;return this.float32[w+0]=u,this.float32[w+1]=p,this.float32[w+2]=_,this.float32[w+3]=m,o}}ju.prototype.bytesPerElement=16,He(ju,"StructArrayLayout4f16");class Fc extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p){const _=this.length;return this.resize(_+1),this.emplace(_,o,u,p)}emplace(o,u,p,_){const m=3*o;return this.float32[m+0]=u,this.float32[m+1]=p,this.float32[m+2]=_,o}}Fc.prototype.bytesPerElement=12,He(Fc,"StructArrayLayout3f12");class Ui extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,p,_,m)}emplace(o,u,p,_,m,w){const j=6*o,k=3*o;return this.uint16[j+0]=u,this.uint16[j+1]=p,this.uint16[j+2]=_,this.uint16[j+3]=m,this.float32[k+2]=w,o}}Ui.prototype.bytesPerElement=12,He(Ui,"StructArrayLayout4ui1f12");class ym extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,_){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p,_)}emplace(o,u,p,_,m){const w=4*o;return this.uint16[w+0]=u,this.uint16[w+1]=p,this.uint16[w+2]=_,this.uint16[w+3]=m,o}}ym.prototype.bytesPerElement=8,He(ym,"StructArrayLayout4ui8");class Bf extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w){const j=this.length;return this.resize(j+1),this.emplace(j,o,u,p,_,m,w)}emplace(o,u,p,_,m,w,j){const k=6*o;return this.int16[k+0]=u,this.int16[k+1]=p,this.int16[k+2]=_,this.int16[k+3]=m,this.int16[k+4]=w,this.int16[k+5]=j,o}}Bf.prototype.bytesPerElement=12,He(Bf,"StructArrayLayout6i12");class Mh extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j,k,H,E,M,O){const P=this.length;return this.resize(P+1),this.emplace(P,o,u,p,_,m,w,j,k,H,E,M,O)}emplace(o,u,p,_,m,w,j,k,H,E,M,O,P){const R=12*o;return this.int16[R+0]=u,this.int16[R+1]=p,this.int16[R+2]=_,this.int16[R+3]=m,this.uint16[R+4]=w,this.uint16[R+5]=j,this.uint16[R+6]=k,this.uint16[R+7]=H,this.int16[R+8]=E,this.int16[R+9]=M,this.int16[R+10]=O,this.int16[R+11]=P,o}}Mh.prototype.bytesPerElement=24,He(Mh,"StructArrayLayout4i4ui4i24");class vp extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w){const j=this.length;return this.resize(j+1),this.emplace(j,o,u,p,_,m,w)}emplace(o,u,p,_,m,w,j){const k=10*o,H=5*o;return this.int16[k+0]=u,this.int16[k+1]=p,this.int16[k+2]=_,this.float32[H+2]=m,this.float32[H+3]=w,this.float32[H+4]=j,o}}vp.prototype.bytesPerElement=20,He(vp,"StructArrayLayout3i3f20");class ad extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint32[1*o+0]=u,o}}ad.prototype.bytesPerElement=4,He(ad,"StructArrayLayout1ul4");class th extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const _=2*o;return this.uint16[_+0]=u,this.uint16[_+1]=p,o}}th.prototype.bytesPerElement=4,He(th,"StructArrayLayout2ui4");class oc extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j,k,H,E,M,O,P){const R=this.length;return this.resize(R+1),this.emplace(R,o,u,p,_,m,w,j,k,H,E,M,O,P)}emplace(o,u,p,_,m,w,j,k,H,E,M,O,P,R){const $=20*o,te=10*o;return this.int16[$+0]=u,this.int16[$+1]=p,this.int16[$+2]=_,this.int16[$+3]=m,this.int16[$+4]=w,this.float32[te+3]=j,this.float32[te+4]=k,this.float32[te+5]=H,this.float32[te+6]=E,this.int16[$+14]=M,this.uint32[te+8]=O,this.uint16[$+18]=P,this.uint16[$+19]=R,o}}oc.prototype.bytesPerElement=40,He(oc,"StructArrayLayout5i4f1i1ul2ui40");class aA extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j){const k=this.length;return this.resize(k+1),this.emplace(k,o,u,p,_,m,w,j)}emplace(o,u,p,_,m,w,j,k){const H=8*o;return this.int16[H+0]=u,this.int16[H+1]=p,this.int16[H+2]=_,this.int16[H+4]=m,this.int16[H+5]=w,this.int16[H+6]=j,this.int16[H+7]=k,o}}aA.prototype.bytesPerElement=16,He(aA,"StructArrayLayout3i2i2i16");class Ef extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,p,_,m)}emplace(o,u,p,_,m,w){const j=4*o,k=8*o;return this.float32[j+0]=u,this.float32[j+1]=p,this.float32[j+2]=_,this.int16[k+6]=m,this.int16[k+7]=w,o}}Ef.prototype.bytesPerElement=16,He(Ef,"StructArrayLayout2f1f2i16");class ld extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w){const j=this.length;return this.resize(j+1),this.emplace(j,o,u,p,_,m,w)}emplace(o,u,p,_,m,w,j){const k=20*o,H=5*o;return this.uint8[k+0]=u,this.uint8[k+1]=p,this.float32[H+1]=_,this.float32[H+2]=m,this.float32[H+3]=w,this.float32[H+4]=j,o}}ld.prototype.bytesPerElement=20,He(ld,"StructArrayLayout2ub4f20");class $a extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p){const _=this.length;return this.resize(_+1),this.emplace(_,o,u,p)}emplace(o,u,p,_){const m=3*o;return this.uint16[m+0]=u,this.uint16[m+1]=p,this.uint16[m+2]=_,o}}$a.prototype.bytesPerElement=6,He($a,"StructArrayLayout3ui6");class xp extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te,ie,de,fe,ae,ge){const Be=this.length;return this.resize(Be+1),this.emplace(Be,o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te,ie,de,fe,ae,ge)}emplace(o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te,ie,de,fe,ae,ge,Be){const ke=30*o,Ye=15*o,Xe=60*o;return this.int16[ke+0]=u,this.int16[ke+1]=p,this.int16[ke+2]=_,this.float32[Ye+2]=m,this.float32[Ye+3]=w,this.uint16[ke+8]=j,this.uint16[ke+9]=k,this.uint32[Ye+5]=H,this.uint32[Ye+6]=E,this.uint32[Ye+7]=M,this.uint16[ke+16]=O,this.uint16[ke+17]=P,this.uint16[ke+18]=R,this.float32[Ye+10]=$,this.float32[Ye+11]=te,this.uint8[Xe+48]=ie,this.uint8[Xe+49]=de,this.uint8[Xe+50]=fe,this.uint32[Ye+13]=ae,this.int16[ke+28]=ge,this.uint8[Xe+58]=Be,o}}xp.prototype.bytesPerElement=60,He(xp,"StructArrayLayout3i2f2ui3ul3ui2f3ub1ul1i1ub60");class Hl extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te,ie,de,fe,ae,ge,Be,ke,Ye,Xe,We,At,nt,yt,bt,_t,Et){const Ut=this.length;return this.resize(Ut+1),this.emplace(Ut,o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te,ie,de,fe,ae,ge,Be,ke,Ye,Xe,We,At,nt,yt,bt,_t,Et)}emplace(o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te,ie,de,fe,ae,ge,Be,ke,Ye,Xe,We,At,nt,yt,bt,_t,Et,Ut){const Wt=20*o,Pt=40*o,mn=80*o;return this.float32[Wt+0]=u,this.float32[Wt+1]=p,this.int16[Pt+4]=_,this.int16[Pt+5]=m,this.int16[Pt+6]=w,this.int16[Pt+7]=j,this.int16[Pt+8]=k,this.int16[Pt+9]=H,this.int16[Pt+10]=E,this.int16[Pt+11]=M,this.int16[Pt+12]=O,this.uint16[Pt+13]=P,this.uint16[Pt+14]=R,this.uint16[Pt+15]=$,this.uint16[Pt+16]=te,this.uint16[Pt+17]=ie,this.uint16[Pt+18]=de,this.uint16[Pt+19]=fe,this.uint16[Pt+20]=ae,this.uint16[Pt+21]=ge,this.uint16[Pt+22]=Be,this.uint16[Pt+23]=ke,this.uint16[Pt+24]=Ye,this.uint16[Pt+25]=Xe,this.uint16[Pt+26]=We,this.uint16[Pt+27]=At,this.uint32[Wt+14]=nt,this.float32[Wt+15]=yt,this.float32[Wt+16]=bt,this.float32[Wt+17]=_t,this.float32[Wt+18]=Et,this.uint8[mn+76]=Ut,o}}Hl.prototype.bytesPerElement=80,He(Hl,"StructArrayLayout2f9i15ui1ul4f1ub80");class Fa extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.float32[1*o+0]=u,o}}Fa.prototype.bytesPerElement=4,He(Fa,"StructArrayLayout1f4");class cd extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m){const w=this.length;return this.resize(w+1),this.emplace(w,o,u,p,_,m)}emplace(o,u,p,_,m,w){const j=5*o;return this.float32[j+0]=u,this.float32[j+1]=p,this.float32[j+2]=_,this.float32[j+3]=m,this.float32[j+4]=w,o}}cd.prototype.bytesPerElement=20,He(cd,"StructArrayLayout5f20");class Nh extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j){const k=this.length;return this.resize(k+1),this.emplace(k,o,u,p,_,m,w,j)}emplace(o,u,p,_,m,w,j,k){const H=7*o;return this.float32[H+0]=u,this.float32[H+1]=p,this.float32[H+2]=_,this.float32[H+3]=m,this.float32[H+4]=w,this.float32[H+5]=j,this.float32[H+6]=k,o}}Nh.prototype.bytesPerElement=28,He(Nh,"StructArrayLayout7f28");class Rh extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j,k,H,E,M){const O=this.length;return this.resize(O+1),this.emplace(O,o,u,p,_,m,w,j,k,H,E,M)}emplace(o,u,p,_,m,w,j,k,H,E,M,O){const P=11*o;return this.float32[P+0]=u,this.float32[P+1]=p,this.float32[P+2]=_,this.float32[P+3]=m,this.float32[P+4]=w,this.float32[P+5]=j,this.float32[P+6]=k,this.float32[P+7]=H,this.float32[P+8]=E,this.float32[P+9]=M,this.float32[P+10]=O,o}}Rh.prototype.bytesPerElement=44,He(Rh,"StructArrayLayout11f44");class Tf extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j,k,H){const E=this.length;return this.resize(E+1),this.emplace(E,o,u,p,_,m,w,j,k,H)}emplace(o,u,p,_,m,w,j,k,H,E){const M=9*o;return this.float32[M+0]=u,this.float32[M+1]=p,this.float32[M+2]=_,this.float32[M+3]=m,this.float32[M+4]=w,this.float32[M+5]=j,this.float32[M+6]=k,this.float32[M+7]=H,this.float32[M+8]=E,o}}Tf.prototype.bytesPerElement=36,He(Tf,"StructArrayLayout9f36");class Ga extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u){const p=this.length;return this.resize(p+1),this.emplace(p,o,u)}emplace(o,u,p){const _=2*o;return this.float32[_+0]=u,this.float32[_+1]=p,o}}Ga.prototype.bytesPerElement=8,He(Ga,"StructArrayLayout2f8");class du extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint32=new Uint32Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o,u,p,_){const m=this.length;return this.resize(m+1),this.emplace(m,o,u,p,_)}emplace(o,u,p,_,m){const w=6*o;return this.uint32[3*o+0]=u,this.uint16[w+2]=p,this.uint16[w+3]=_,this.uint16[w+4]=m,o}}du.prototype.bytesPerElement=12,He(du,"StructArrayLayout1ul3ui12");class hu extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint16[1*o+0]=u,o}}hu.prototype.bytesPerElement=2,He(hu,"StructArrayLayout1ui2");class nh extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te){const ie=this.length;return this.resize(ie+1),this.emplace(ie,o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te)}emplace(o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te,ie){const de=16*o;return this.float32[de+0]=u,this.float32[de+1]=p,this.float32[de+2]=_,this.float32[de+3]=m,this.float32[de+4]=w,this.float32[de+5]=j,this.float32[de+6]=k,this.float32[de+7]=H,this.float32[de+8]=E,this.float32[de+9]=M,this.float32[de+10]=O,this.float32[de+11]=P,this.float32[de+12]=R,this.float32[de+13]=$,this.float32[de+14]=te,this.float32[de+15]=ie,o}}nh.prototype.bytesPerElement=64,He(nh,"StructArrayLayout16f64");class Vc extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.uint16=new Uint16Array(this.arrayBuffer),this.float32=new Float32Array(this.arrayBuffer)}emplaceBack(o,u,p,_,m,w,j){const k=this.length;return this.resize(k+1),this.emplace(k,o,u,p,_,m,w,j)}emplace(o,u,p,_,m,w,j,k){const H=10*o,E=5*o;return this.uint16[H+0]=u,this.uint16[H+1]=p,this.uint16[H+2]=_,this.uint16[H+3]=m,this.float32[E+2]=w,this.float32[E+3]=j,this.float32[E+4]=k,o}}Vc.prototype.bytesPerElement=20,He(Vc,"StructArrayLayout4ui3f20");class lA extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer),this.int16=new Int16Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.int16[1*o+0]=u,o}}lA.prototype.bytesPerElement=2,He(lA,"StructArrayLayout1i2");class $c extends js{_refreshViews(){this.uint8=new Uint8Array(this.arrayBuffer)}emplaceBack(o){const u=this.length;return this.resize(u+1),this.emplace(u,o)}emplace(o,u){return this.uint8[1*o+0]=u,o}}$c.prototype.bytesPerElement=1,He($c,"StructArrayLayout1ub1");class cA extends uu{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.int16[this._pos2+3]}get tileAnchorY(){return this._structArray.int16[this._pos2+4]}get x1(){return this._structArray.float32[this._pos4+3]}get y1(){return this._structArray.float32[this._pos4+4]}get x2(){return this._structArray.float32[this._pos4+5]}get y2(){return this._structArray.float32[this._pos4+6]}get padding(){return this._structArray.int16[this._pos2+14]}get featureIndex(){return this._structArray.uint32[this._pos4+8]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+18]}get bucketIndex(){return this._structArray.uint16[this._pos2+19]}}cA.prototype.size=40;class uA extends oc{get(o){return new cA(this,o)}}He(uA,"CollisionBoxArray");class S0 extends uu{get projectedAnchorX(){return this._structArray.int16[this._pos2+0]}get projectedAnchorY(){return this._structArray.int16[this._pos2+1]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+2]}get tileAnchorX(){return this._structArray.float32[this._pos4+2]}get tileAnchorY(){return this._structArray.float32[this._pos4+3]}get glyphStartIndex(){return this._structArray.uint16[this._pos2+8]}get numGlyphs(){return this._structArray.uint16[this._pos2+9]}get vertexStartIndex(){return this._structArray.uint32[this._pos4+5]}get lineStartIndex(){return this._structArray.uint32[this._pos4+6]}get lineLength(){return this._structArray.uint32[this._pos4+7]}get segment(){return this._structArray.uint16[this._pos2+16]}get lowerSize(){return this._structArray.uint16[this._pos2+17]}get upperSize(){return this._structArray.uint16[this._pos2+18]}get lineOffsetX(){return this._structArray.float32[this._pos4+10]}get lineOffsetY(){return this._structArray.float32[this._pos4+11]}get writingMode(){return this._structArray.uint8[this._pos1+48]}get placedOrientation(){return this._structArray.uint8[this._pos1+49]}set placedOrientation(o){this._structArray.uint8[this._pos1+49]=o}get hidden(){return this._structArray.uint8[this._pos1+50]}set hidden(o){this._structArray.uint8[this._pos1+50]=o}get crossTileID(){return this._structArray.uint32[this._pos4+13]}set crossTileID(o){this._structArray.uint32[this._pos4+13]=o}get associatedIconIndex(){return this._structArray.int16[this._pos2+28]}get flipState(){return this._structArray.uint8[this._pos1+58]}set flipState(o){this._structArray.uint8[this._pos1+58]=o}}S0.prototype.size=60;class l_ extends xp{get(o){return new S0(this,o)}}He(l_,"PlacedSymbolArray");class c_ extends uu{get tileAnchorX(){return this._structArray.float32[this._pos4+0]}get tileAnchorY(){return this._structArray.float32[this._pos4+1]}get projectedAnchorX(){return this._structArray.int16[this._pos2+4]}get projectedAnchorY(){return this._structArray.int16[this._pos2+5]}get projectedAnchorZ(){return this._structArray.int16[this._pos2+6]}get rightJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+7]}get centerJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+8]}get leftJustifiedTextSymbolIndex(){return this._structArray.int16[this._pos2+9]}get verticalPlacedTextSymbolIndex(){return this._structArray.int16[this._pos2+10]}get placedIconSymbolIndex(){return this._structArray.int16[this._pos2+11]}get verticalPlacedIconSymbolIndex(){return this._structArray.int16[this._pos2+12]}get key(){return this._structArray.uint16[this._pos2+13]}get textBoxStartIndex(){return this._structArray.uint16[this._pos2+14]}get textBoxEndIndex(){return this._structArray.uint16[this._pos2+15]}get verticalTextBoxStartIndex(){return this._structArray.uint16[this._pos2+16]}get verticalTextBoxEndIndex(){return this._structArray.uint16[this._pos2+17]}get iconBoxStartIndex(){return this._structArray.uint16[this._pos2+18]}get iconBoxEndIndex(){return this._structArray.uint16[this._pos2+19]}get verticalIconBoxStartIndex(){return this._structArray.uint16[this._pos2+20]}get verticalIconBoxEndIndex(){return this._structArray.uint16[this._pos2+21]}get featureIndex(){return this._structArray.uint16[this._pos2+22]}get numHorizontalGlyphVertices(){return this._structArray.uint16[this._pos2+23]}get numVerticalGlyphVertices(){return this._structArray.uint16[this._pos2+24]}get numIconVertices(){return this._structArray.uint16[this._pos2+25]}get numVerticalIconVertices(){return this._structArray.uint16[this._pos2+26]}get useRuntimeCollisionCircles(){return this._structArray.uint16[this._pos2+27]}get crossTileID(){return this._structArray.uint32[this._pos4+14]}set crossTileID(o){this._structArray.uint32[this._pos4+14]=o}get textOffset0(){return this._structArray.float32[this._pos4+15]}get textOffset1(){return this._structArray.float32[this._pos4+16]}get collisionCircleDiameter(){return this._structArray.float32[this._pos4+17]}get zOffset(){return this._structArray.float32[this._pos4+18]}set zOffset(o){this._structArray.float32[this._pos4+18]=o}get hasIconTextFit(){return this._structArray.uint8[this._pos1+76]}}c_.prototype.size=80;class xg extends Hl{get(o){return new c_(this,o)}}He(xg,"SymbolInstanceArray");class vm extends Fa{getoffsetX(o){return this.float32[1*o+0]}}He(vm,"GlyphOffsetArray");class Gc extends Iu{getx(o){return this.int16[2*o+0]}gety(o){return this.int16[2*o+1]}}He(Gc,"SymbolLineVertexArray");class _g extends uu{get featureIndex(){return this._structArray.uint32[this._pos4+0]}get sourceLayerIndex(){return this._structArray.uint16[this._pos2+2]}get bucketIndex(){return this._structArray.uint16[this._pos2+3]}get layoutVertexArrayOffset(){return this._structArray.uint16[this._pos2+4]}}_g.prototype.size=12;class dv extends du{get(o){return new _g(this,o)}}He(dv,"FeatureIndexArray");class hv extends th{geta_centroid_pos0(o){return this.uint16[2*o+0]}geta_centroid_pos1(o){return this.uint16[2*o+1]}}He(hv,"FillExtrusionCentroidArray");class Kc extends uu{get a_join_normal_inside0(){return this._structArray.int16[this._pos2+0]}get a_join_normal_inside1(){return this._structArray.int16[this._pos2+1]}get a_join_normal_inside2(){return this._structArray.int16[this._pos2+2]}}Kc.prototype.size=6;class rh extends Jd{get(o){return new Kc(this,o)}}He(rh,"FillExtrusionWallArray");const fv=$i([{name:"a_pos",components:2,type:"Int16"}],4),pb=$i([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]);class po{constructor(o=[]){this.segments=o}_prepareSegment(o,u,p,_){let m=this.segments[this.segments.length-1];return o>po.MAX_VERTEX_ARRAY_LENGTH&&Vn(`Max vertices per segment is ${po.MAX_VERTEX_ARRAY_LENGTH}: bucket requested ${o}`),(!m||m.vertexLength+o>po.MAX_VERTEX_ARRAY_LENGTH||m.sortKey!==_)&&(m={vertexOffset:u,primitiveOffset:p,vertexLength:0,primitiveLength:0},_!==void 0&&(m.sortKey=_),this.segments.push(m)),m}prepareSegment(o,u,p,_){return this._prepareSegment(o,u.length,p.length,_)}get(){return this.segments}destroy(){for(const o of this.segments)for(const u in o.vaos)o.vaos[u].destroy()}static simpleSegment(o,u,p,_){return new po([{vertexOffset:o,primitiveOffset:u,vertexLength:p,primitiveLength:_,vaos:{},sortKey:0}])}}function dA(h,o){return 256*(h=Gt(Math.floor(h),0,255))+Gt(Math.floor(o),0,255)}po.MAX_VERTEX_ARRAY_LENGTH=Math.pow(2,16)-1,He(po,"SegmentVector");const u_=$i([{name:"a_pattern",components:4,type:"Uint16"},{name:"a_pixel_ratio",components:1,type:"Float32"}]),B0=$i([{name:"a_dash",components:4,type:"Uint16"}]);class wg{constructor(){this.ids=[],this.uniqueIds=[],this.positions=[],this.indexed=!1}add(o,u,p,_){this.ids.push(E0(o)),this.positions.push(u,p,_)}eachPosition(o,u){const p=E0(o);let _=0,m=this.ids.length-1;for(;_<m;){const w=_+m>>1;this.ids[w]>=p?m=w:_=w+1}for(;this.ids[_]===p;)u(this.positions[3*_],this.positions[3*_+1],this.positions[3*_+2]),_++}static serialize(o,u){const p=new Float64Array(o.ids),_=new Uint32Array(o.positions);return If(p,_,0,p.length-1),u&&(u.add(p.buffer),u.add(_.buffer)),{ids:p,positions:_}}static deserialize(o){const u=new wg;let p;u.ids=o.ids,u.positions=o.positions;for(const _ of u.ids)_!==p&&u.uniqueIds.push(_),p=_;return u.indexed=!0,u}}function E0(h){const o=+h;return!isNaN(o)&&Number.MIN_SAFE_INTEGER<=o&&o<=Number.MAX_SAFE_INTEGER?o:qu(String(h))}function If(h,o,u,p){for(;u<p;){const _=h[u+p>>1];let m=u-1,w=p+1;for(;;){do m++;while(h[m]<_);do w--;while(h[w]>_);if(m>=w)break;_p(h,m,w),_p(o,3*m,3*w),_p(o,3*m+1,3*w+1),_p(o,3*m+2,3*w+2)}w-u<p-w?(If(h,o,u,w),u=w+1):(If(h,o,w+1,p),p=w)}}function _p(h,o,u){const p=h[o];h[o]=h[u],h[u]=p}He(wg,"FeaturePositionMap");class ih{constructor(o){this.gl=o.gl,this.initialized=!1}fetchUniformLocation(o,u){return this.location||this.initialized||(this.location=this.gl.getUniformLocation(o,u),this.initialized=!0),!!this.location}set(o,u,p){throw new Error("Uniform#set() must be implemented by each concrete Uniform")}}class wp extends ih{constructor(o){super(o),this.current=0}set(o,u,p){this.fetchUniformLocation(o,u)&&this.current!==p&&(this.current=p,this.gl.uniform1i(this.location,p))}}class Vo extends ih{constructor(o){super(o),this.current=0}set(o,u,p){this.fetchUniformLocation(o,u)&&this.current!==p&&(this.current=p,this.gl.uniform1f(this.location,p))}}class Fu extends ih{constructor(o){super(o),this.current=[0,0]}set(o,u,p){this.fetchUniformLocation(o,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]||(this.current=p,this.gl.uniform2f(this.location,p[0],p[1])))}}class bg extends ih{constructor(o){super(o),this.current=[0,0,0]}set(o,u,p){this.fetchUniformLocation(o,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]||(this.current=p,this.gl.uniform3f(this.location,p[0],p[1],p[2])))}}class hA extends ih{constructor(o){super(o),this.current=[0,0,0,0]}set(o,u,p){this.fetchUniformLocation(o,u)&&(p[0]===this.current[0]&&p[1]===this.current[1]&&p[2]===this.current[2]&&p[3]===this.current[3]||(this.current=p,this.gl.uniform4f(this.location,p[0],p[1],p[2],p[3])))}}class xm extends ih{constructor(o){super(o),this.current=ji.transparent.toRenderColor(null)}set(o,u,p){this.fetchUniformLocation(o,u)&&(p.r===this.current.r&&p.g===this.current.g&&p.b===this.current.b&&p.a===this.current.a||(this.current=p,this.gl.uniform4f(this.location,p.r,p.g,p.b,p.a)))}}const T0=new Float32Array(16);class Cg extends ih{constructor(o){super(o),this.current=T0}set(o,u,p){if(this.fetchUniformLocation(o,u)){if(p[12]!==this.current[12]||p[0]!==this.current[0])return this.current=p,void this.gl.uniformMatrix4fv(this.location,!1,p);for(let _=1;_<16;_++)if(p[_]!==this.current[_]){this.current=p,this.gl.uniformMatrix4fv(this.location,!1,p);break}}}}const d_=new Float32Array(9),I0=new Float32Array(4);class Sg extends ih{constructor(o){super(o),this.current=I0}set(o,u,p){if(this.fetchUniformLocation(o,u)){for(let _=0;_<4;_++)if(p[_]!==this.current[_]){this.current=p,this.gl.uniformMatrix2fv(this.location,!1,p);break}}}}function Bg(h){return[dA(255*h.r,255*h.g),dA(255*h.b,255*h.a)]}class _m{constructor(o,u,p,_){this.value=o,this.uniformNames=u.map(m=>`u_${m}`),this.type=p,this.context=_}setUniform(o,u,p,_,m){const w=_.constantOr(this.value);u.set(o,m,w instanceof ji?w.toRenderColor(this.ignoreLut?null:this.context.lut):w)}getBinding(o,u){return this.type==="color"?new xm(o):new Vo(o)}}class fA{constructor(o,u){this.uniformNames=u.map(p=>`u_${p}`),this.pattern=null,this.pixelRatio=1}setConstantPatternPositions(o){this.pixelRatio=o.pixelRatio||1,this.pattern=o.tl.concat(o.br)}setUniform(o,u,p,_,m){const w=m==="u_pattern"||m==="u_dash"?this.pattern:m==="u_pixel_ratio"?this.pixelRatio:null;w&&u.set(o,m,w)}getBinding(o,u){return u==="u_pattern"||u==="u_dash"?new hA(o):new Vo(o)}}class ac{constructor(o,u,p,_){this.expression=o,this.type=p,this.maxValue=0,this.paintVertexAttributes=u.map(m=>({name:`a_${m}`,type:"Float32",components:p==="color"?2:1,offset:0})),this.paintVertexArray=new _}populatePaintArray(o,u,p,_,m,w,j){const k=this.paintVertexArray.length,H=this.expression.evaluate(new qr(0,{brightness:w}),u,{},m,_,j);this.paintVertexArray.resize(o),this._setPaintValue(k,o,H,this.context)}updatePaintArray(o,u,p,_,m,w,j){const k=this.expression.evaluate({zoom:0,brightness:j},p,_,void 0,m);this._setPaintValue(o,u,k,this.context)}_setPaintValue(o,u,p,_){if(this.type==="color"){const m=Bg(p.toRenderColor(this.ignoreLut?null:_.lut));for(let w=o;w<u;w++)this.paintVertexArray.emplace(w,m[0],m[1])}else{for(let m=o;m<u;m++)this.paintVertexArray.emplace(m,p);this.maxValue=Math.max(this.maxValue,Math.abs(p))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class ud{constructor(o,u,p,_,m,w){this.expression=o,this.uniformNames=u.map(j=>`u_${j}_t`),this.type=p,this.useIntegerZoom=_,this.context=m,this.maxValue=0,this.paintVertexAttributes=u.map(j=>({name:`a_${j}`,type:"Float32",components:p==="color"?4:2,offset:0})),this.paintVertexArray=new w}populatePaintArray(o,u,p,_,m,w,j){const k=this.expression.evaluate(new qr(this.context.zoom,{brightness:w}),u,{},m,_,j),H=this.expression.evaluate(new qr(this.context.zoom+1,{brightness:w}),u,{},m,_,j),E=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValue(E,o,k,H,this.context)}updatePaintArray(o,u,p,_,m,w,j){const k=this.expression.evaluate({zoom:this.context.zoom,brightness:j},p,_,void 0,m),H=this.expression.evaluate({zoom:this.context.zoom+1,brightness:j},p,_,void 0,m);this._setPaintValue(o,u,k,H,this.context)}_setPaintValue(o,u,p,_,m){if(this.type==="color"){const w=Bg(p.toRenderColor(this.ignoreLut?null:m.lut)),j=Bg(p.toRenderColor(this.ignoreLut?null:m.lut));for(let k=o;k<u;k++)this.paintVertexArray.emplace(k,w[0],w[1],j[0],j[1])}else{for(let w=o;w<u;w++)this.paintVertexArray.emplace(w,p,_);this.maxValue=Math.max(this.maxValue,Math.abs(p),Math.abs(_))}}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer&&this.paintVertexBuffer.buffer?this.paintVertexBuffer.updateData(this.paintVertexArray):this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}setUniform(o,u,p,_,m){const w=this.useIntegerZoom?Math.floor(p.zoom):p.zoom,j=Gt(this.expression.interpolationFactor(w,this.context.zoom,this.context.zoom+1),0,1);u.set(o,m,j)}getBinding(o,u){return new Vo(o)}}class jf{constructor(o,u,p,_,m){this.expression=o,this.layerId=m,this.paintVertexAttributes=(p==="array"?B0:u_).members;for(let w=0;w<u.length;++w);this.paintVertexArray=new _}populatePaintArray(o,u,p,_){const m=this.paintVertexArray.length;this.paintVertexArray.resize(o),this._setPaintValues(m,o,u.patterns&&u.patterns[this.layerId],p)}updatePaintArray(o,u,p,_,m,w,j){this._setPaintValues(o,u,p.patterns&&p.patterns[this.layerId],w)}_setPaintValues(o,u,p,_){if(!_||!p)return;const m=_[p];if(!m)return;const{tl:w,br:j,pixelRatio:k}=m;for(let H=o;H<u;H++)this.paintVertexArray.emplace(H,w[0],w[1],j[0],j[1],k)}upload(o){this.paintVertexArray&&this.paintVertexArray.arrayBuffer&&(this.paintVertexBuffer=o.createVertexBuffer(this.paintVertexArray,this.paintVertexAttributes,this.expression.isStateDependent||!this.expression.isLightConstant))}destroy(){this.paintVertexBuffer&&this.paintVertexBuffer.destroy()}}class pA{constructor(o,u,p=()=>!0){this.binders={},this._buffers=[],this.context=u;const _=[];for(const m in o.paint._values){const w=o.paint.get(m),j=o.paint.get(`${m}-use-theme`);if(m.endsWith("-use-theme")||!p(m)||!(w instanceof wa&&sc(w.property.specification)))continue;const k=Ab(m,o.type),H=w.value,E=w.property.specification.type,M=!!w.property.useIntegerZoom,O=m==="line-dasharray"||m.endsWith("pattern"),P=m==="line-dasharray"&&o.layout.get("line-cap").value.kind!=="constant";if(H.kind!=="constant"||P)if(H.kind==="source"||P||O){const R=F0(m,E,"source");this.binders[m]=O?new jf(H,k,E,R,o.id):new ac(H,k,E,R),_.push(`/a_${m}`)}else{const R=F0(m,E,"composite");this.binders[m]=new ud(H,k,E,M,u,R),_.push(`/z_${m}`)}else this.binders[m]=O?new fA(H.value,k):new _m(H.value,k,E,u),_.push(`/u_${m}`);j&&(this.binders[m].ignoreLut=j.constantOr("default")==="none",this.binders[m].checkUseTheme=!0)}this.cacheKey=_.sort().join("")}getMaxValue(o){const u=this.binders[o];return u instanceof ac||u instanceof ud?u.maxValue:0}populatePaintArrays(o,u,p,_,m,w,j){for(const k in this.binders){const H=this.binders[k];H.context=this.context,(H instanceof ac||H instanceof ud||H instanceof jf)&&H.populatePaintArray(o,u,p,_,m,w,j)}}setConstantPatternPositions(o){for(const u in this.binders){const p=this.binders[u];p instanceof fA&&p.setConstantPatternPositions(o)}}updatePaintArrays(o,u,p,_,m,w,j,k,H){let E=!1;const M=Object.keys(o),O=M.length!==0&&!k,P=O?M:u.uniqueIds;this.context.lut=m.lut;for(const R in this.binders){const $=this.binders[R];if($.context=this.context,($ instanceof ac||$ instanceof ud||$ instanceof jf)&&($.expression.isStateDependent===!0||$.expression.isLightConstant===!1)){const te=m.paint.get(R);$.expression=te.value;for(const ie of P){const de=o[ie.toString()];u.eachPosition(ie,(fe,ae,ge)=>{const Be=_.feature(fe);$.updatePaintArray(ae,ge,Be,de,w,j,H)})}if(!O)for(const ie of p.uniqueIds){const de=o[ie.toString()];p.eachPosition(ie,(fe,ae,ge)=>{const Be=_.feature(fe);$.updatePaintArray(ae,ge,Be,de,w,j,H)})}E=!0}}return E}defines(){const o=[];for(const u in this.binders){const p=this.binders[u];(p instanceof _m||p instanceof fA)&&o.push(...p.uniformNames.map(_=>`#define HAS_UNIFORM_${_}`))}return o}getBinderAttributes(){const o=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof ac||p instanceof ud||p instanceof jf)for(let _=0;_<p.paintVertexAttributes.length;_++)o.push(p.paintVertexAttributes[_].name)}return o}getBinderUniforms(){const o=[];for(const u in this.binders){const p=this.binders[u];if(p instanceof _m||p instanceof fA||p instanceof ud)for(const _ of p.uniformNames)o.push(_)}return o}getPaintVertexBuffers(){return this._buffers}getUniforms(o){const u=[];for(const p in this.binders){const _=this.binders[p];if(_ instanceof _m||_ instanceof fA||_ instanceof ud)for(const m of _.uniformNames)u.push({name:m,property:p,binding:_.getBinding(o,m)})}return u}setUniforms(o,u,p,_,m){for(const{name:w,property:j,binding:k}of p){if(this.binders[j].checkUseTheme&&this.binders[j]instanceof _m){const H=_.get(`${j}-use-theme`);H.isConstant()&&(this.binders[j].ignoreLut=H.constantOr("default")==="none")}this.binders[j].setUniform(o,k,m,_.get(j),w)}}updatePaintBuffers(){this._buffers=[];for(const o in this.binders){const u=this.binders[o];(u instanceof ac||u instanceof ud||u instanceof jf)&&u.paintVertexBuffer&&this._buffers.push(u.paintVertexBuffer)}}upload(o){for(const u in this.binders){const p=this.binders[u];(p instanceof ac||p instanceof ud||p instanceof jf)&&p.upload(o)}this.updatePaintBuffers()}destroy(){for(const o in this.binders){const u=this.binders[o];(u instanceof ac||u instanceof ud||u instanceof jf)&&u.destroy()}}}class Ff{constructor(o,u,p=()=>!0){this.programConfigurations={};for(const _ of o)this.programConfigurations[_.id]=new pA(_,u,p);this.needsUpload=!1,this._featureMap=new wg,this._featureMapWithoutIds=new wg,this._bufferOffset=0,this._idlessCounter=0}populatePaintArrays(o,u,p,_,m,w,j,k){for(const H in this.programConfigurations)this.programConfigurations[H].populatePaintArrays(o,u,_,m,w,j,k);u.id!==void 0?this._featureMap.add(u.id,p,this._bufferOffset,o):(this._featureMapWithoutIds.add(this._idlessCounter,p,this._bufferOffset,o),this._idlessCounter+=1),this._bufferOffset=o,this.needsUpload=!0}updatePaintArrays(o,u,p,_,m,w,j){for(const k of p)this.needsUpload=this.programConfigurations[k.id].updatePaintArrays(o,this._featureMap,this._featureMapWithoutIds,u,k,_,m,w,j||0)||this.needsUpload}get(o){return this.programConfigurations[o]}upload(o){if(this.needsUpload){for(const u in this.programConfigurations)this.programConfigurations[u].upload(o);this.needsUpload=!1}}destroy(){for(const o in this.programConfigurations)this.programConfigurations[o].destroy()}}const j0={"text-opacity":["opacity"],"icon-opacity":["opacity"],"text-occlusion-opacity":["occlusion_opacity"],"icon-occlusion-opacity":["occlusion_opacity"],"text-color":["fill_color"],"icon-color":["fill_color"],"text-emissive-strength":["emissive_strength"],"icon-emissive-strength":["emissive_strength"],"text-halo-color":["halo_color"],"icon-halo-color":["halo_color"],"text-halo-blur":["halo_blur"],"icon-halo-blur":["halo_blur"],"text-halo-width":["halo_width"],"icon-halo-width":["halo_width"],"symbol-z-offset":["z_offset"],"line-gap-width":["gapwidth"],"line-pattern":["pattern","pixel_ratio"],"fill-pattern":["pattern","pixel_ratio"],"fill-extrusion-pattern":["pattern","pixel_ratio"],"line-dasharray":["dash"]};function Ab(h,o){return j0[h]||[h.replace(`${o}-`,"").replace(/-/g,"_")]}const Pf={"line-pattern":{source:Ui,composite:Ui},"fill-pattern":{source:Ui,composite:Ui},"fill-extrusion-pattern":{source:Ui,composite:Ui},"line-dasharray":{source:ym,composite:ym}},wm={color:{source:Ga,composite:ju},number:{source:Fa,composite:Ga}};function F0(h,o,u){const p=Pf[h];return p&&p[u]||wm[o][u]}He(_m,"ConstantBinder"),He(fA,"PatternConstantBinder"),He(ac,"SourceExpressionBinder"),He(jf,"PatternCompositeBinder"),He(ud,"CompositeExpressionBinder"),He(pA,"ProgramConfiguration",{omit:["_buffers"]}),He(Ff,"ProgramConfigurationSet");const Cl=Wn/Math.PI/2,bm=5,bp=6,Fi=16383,Oh=64,Eg=[Oh,32,16],Vl=-Cl,dd=Cl;function kf(h,o,u,p=Cl){return u=Vt(u),[h*Math.sin(u)*p,-o*p,h*Math.cos(u)*p]}function Cp(h,o,u){return kf(Math.cos(Vt(h)),Math.sin(Vt(h)),o,u)}const Ka=63710088e-1,pv=2*Math.PI*Ka;class es{constructor(o,u){if(isNaN(o)||isNaN(u))throw new Error(`Invalid LngLat object: (${o}, ${u})`);if(this.lng=+o,this.lat=+u,this.lat>90||this.lat<-90)throw new Error("Invalid LngLat latitude value: must be between -90 and 90")}wrap(){return new es(wt(this.lng,-180,180),this.lat)}toArray(){return[this.lng,this.lat]}toString(){return`LngLat(${this.lng}, ${this.lat})`}distanceTo(o){const u=Math.PI/180,p=this.lat*u,_=o.lat*u,m=Math.sin(p)*Math.sin(_)+Math.cos(p)*Math.cos(_)*Math.cos((o.lng-this.lng)*u);return Ka*Math.acos(Math.min(m,1))}toBounds(o=0){const u=360*o/40075017,p=u/Math.cos(Math.PI/180*this.lat);return new Lf({lng:this.lng-p,lat:this.lat-u},{lng:this.lng+p,lat:this.lat+u})}toEcef(o){return Cp(this.lat,this.lng,Cl+o*Cl/Ka)}static convert(o){if(o instanceof es)return o;if(Array.isArray(o)&&(o.length===2||o.length===3))return new es(Number(o[0]),Number(o[1]));if(!Array.isArray(o)&&typeof o=="object"&&o!==null)return new es(Number("lng"in o?o.lng:o.lon),Number(o.lat));throw new Error("`LngLatLike` argument must be specified as a LngLat instance, an object {lng: <lng>, lat: <lat>}, an object {lon: <lng>, lat: <lat>}, or an array of [<lng>, <lat>]")}}class Lf{constructor(o,u){if(o)if(u)this.setSouthWest(o).setNorthEast(u);else if(o.length===4){const p=o;this.setSouthWest([p[0],p[1]]).setNorthEast([p[2],p[3]])}else{const p=o;this.setSouthWest(p[0]).setNorthEast(p[1])}}setNorthEast(o){return this._ne=o instanceof es?new es(o.lng,o.lat):es.convert(o),this}setSouthWest(o){return this._sw=o instanceof es?new es(o.lng,o.lat):es.convert(o),this}extend(o){const u=this._sw,p=this._ne;let _,m;if(o instanceof es)_=o,m=o;else{if(!(o instanceof Lf))return Array.isArray(o)?o.length===4||o.every(Array.isArray)?this.extend(Lf.convert(o)):this.extend(es.convert(o)):typeof o=="object"&&o!==null&&o.hasOwnProperty("lat")&&(o.hasOwnProperty("lon")||o.hasOwnProperty("lng"))?this.extend(es.convert(o)):this;if(_=o._sw,m=o._ne,!_||!m)return this}return u||p?(u.lng=Math.min(_.lng,u.lng),u.lat=Math.min(_.lat,u.lat),p.lng=Math.max(m.lng,p.lng),p.lat=Math.max(m.lat,p.lat)):(this._sw=new es(_.lng,_.lat),this._ne=new es(m.lng,m.lat)),this}getCenter(){return new es((this._sw.lng+this._ne.lng)/2,(this._sw.lat+this._ne.lat)/2)}getSouthWest(){return this._sw}getNorthEast(){return this._ne}getNorthWest(){return new es(this.getWest(),this.getNorth())}getSouthEast(){return new es(this.getEast(),this.getSouth())}getWest(){return this._sw.lng}getSouth(){return this._sw.lat}getEast(){return this._ne.lng}getNorth(){return this._ne.lat}toArray(){return[this._sw.toArray(),this._ne.toArray()]}toString(){return`LngLatBounds(${this._sw.toString()}, ${this._ne.toString()})`}isEmpty(){return!(this._sw&&this._ne)}contains(o){const{lng:u,lat:p}=es.convert(o);let _=this._sw.lng<=u&&u<=this._ne.lng;return this._sw.lng>this._ne.lng&&(_=this._sw.lng>=u&&u>=this._ne.lng),this._sw.lat<=p&&p<=this._ne.lat&&_}static convert(o){if(o)return o instanceof Lf?o:new Lf(o)}}const h_=0,P0=25.5;function Tg(h){return pv*Math.cos(h*Math.PI/180)}function Sp(h){return(180+h)/360}function Mf(h){return(180-180/Math.PI*Math.log(Math.tan(Math.PI/4+h*Math.PI/360)))/360}function ua(h,o){return h/Tg(o)}function Ro(h){return 360*h-180}function Wa(h){return 360/Math.PI*Math.atan(Math.exp((180-360*h)*Math.PI/180))-90}function Av(h,o){return h*Tg(Wa(o))}const $o=85.051129;function v(h){return Math.cos(Vt(Gt(h,-$o,$o)))}function l(h,o){const u=Gt(o,h_,P0),p=Math.pow(2,u);return v(h)*pv/(512*p)}function d(h){return 1/Math.cos(h*Math.PI/180)}function x(h,o=0){const u=Math.exp(Math.PI*(1-(h.y+o/Wn)/(1<<h.z)*2));return 80150034*u/(u*u+1)/Wn/(1<<h.z)}class C{constructor(o,u,p=0){this.x=+o,this.y=+u,this.z=+p}static fromLngLat(o,u=0){const p=es.convert(o);return new C(Sp(p.lng),Mf(p.lat),ua(u,p.lat))}toLngLat(){return new es(Ro(this.x),Wa(this.y))}toAltitude(){return Av(this.z,this.y)}meterInMercatorCoordinateUnits(){return 1/pv*d(Wa(this.y))}}function B(h,o,u,p,_,m,w,j,k){const H=(o+p)/2,E=(u+_)/2,M=new Dt(H,E);j(M),function(O,P,R,$,te,ie){const de=R-te,fe=$-ie;return Math.abs(($-P)*de-(R-O)*fe)/Math.hypot(de,fe)}(M.x,M.y,m.x,m.y,w.x,w.y)>=k?(B(h,o,u,H,E,m,M,j,k),B(h,H,E,p,_,M,w,j,k)):h.push(w)}function F(h,o,u){let p=h[0],_=p.x,m=p.y;o(p);const w=[p];for(let j=1;j<h.length;j++){const k=h[j],{x:H,y:E}=k;o(k),B(w,_,m,H,E,p,k,o,u),_=H,m=E,p=k}return w}function z(h,o,u,p){if(p(o,u)){const _=o.add(u)._mult(.5);z(h,o,_,p),z(h,_,u,p)}else h.push(u)}function K(h,o){let u=h[0];const p=[u];for(let _=1;_<h.length;_++){const m=h[_];z(p,u,m,o),u=m}return p}const X=Math.pow(2,14)-1,J=-X-1;function oe(h,o){const u=Math.round(h.x*o),p=Math.round(h.y*o);return h.x=Gt(u,J,X),h.y=Gt(p,J,X),(u<h.x||u>h.x+1||p<h.y||p>h.y+1)&&Vn("Geometry exceeds allowed extent, reduce your vector tile buffer size"),h}function se(h,o,u){const p=h.loadGeometry(),_=h.extent,m=Wn/_;if(o&&u&&u.projection.isReprojectedInTileSpace){const w=1<<o.z,{scale:j,x:k,y:H,projection:E}=u,M=O=>{const P=Ro((o.x+O.x/_)/w),R=Wa((o.y+O.y/_)/w),$=E.project(P,R);O.x=($.x*j-k)*_,O.y=($.y*j-H)*_};for(let O=0;O<p.length;O++)if(h.type!==1)p[O]=F(p[O],M,1);else{const P=[];for(const R of p[O])R.x<0||R.x>=_||R.y<0||R.y>=_||(M(R),P.push(R));p[O]=P}}for(const w of p)for(const j of w)oe(j,m);return p}function ue(h,o){return{type:h.type,id:h.id,properties:h.properties,geometry:o?se(h):[]}}function Ie(h,o,u,p,_){h.emplaceBack(2*o+(p+1)/2,2*u+(_+1)/2)}function Se(h,o,u){h.emplaceBack(o.x,o.y,o.z,u[0]*16384,u[1]*16384,u[2]*16384)}class Pe{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.projection=o.projection,this.layoutVertexArray=new Iu,this.indexArray=new $a,this.segments=new po,this.programConfigurations=new Ff(o.layers,{zoom:o.zoom,lut:o.lut}),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id)}updateFootprints(o,u){}populate(o,u,p,_){const m=this.layers[0],w=[];let j=null;m.type==="circle"&&(j=m.layout.get("circle-sort-key"));for(const{feature:H,id:E,index:M,sourceLayerIndex:O}of o){const P=this.layers[0]._featureFilter.needGeometry,R=ue(H,P);if(!this.layers[0]._featureFilter.filter(new qr(this.zoom),R,p))continue;const $=j?j.evaluate(R,{},p):void 0,te={id:E,properties:H.properties,type:H.type,sourceLayerIndex:O,index:M,geometry:P?R.geometry:se(H,p,_),patterns:{},sortKey:$};w.push(te)}j&&w.sort((H,E)=>H.sortKey-E.sortKey);let k=null;_.projection.name==="globe"&&(this.globeExtVertexArray=new Bf,k=_.projection);for(const H of w){const{geometry:E,index:M,sourceLayerIndex:O}=H,P=o[M].feature;this.addFeature(H,E,M,u.availableImages,p,k,u.brightness),u.featureIndex.insert(P,E,M,O,this.index)}}update(o,u,p,_,m,w,j){this.programConfigurations.updatePaintArrays(o,u,m,p,_,w,j)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,fv.members),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.globeExtVertexArray&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,pb.members))),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy())}addFeature(o,u,p,_,m,w,j){for(const k of u)for(const H of k){const E=H.x,M=H.y;if(E<0||E>=Wn||M<0||M>=Wn)continue;if(w){const R=w.projectTilePoint(E,M,m),$=w.upVector(m,E,M),te=this.globeExtVertexArray;Se(te,R,$),Se(te,R,$),Se(te,R,$),Se(te,R,$)}const O=this.segments.prepareSegment(4,this.layoutVertexArray,this.indexArray,o.sortKey),P=O.vertexLength;Ie(this.layoutVertexArray,E,M,-1,-1),Ie(this.layoutVertexArray,E,M,1,-1),Ie(this.layoutVertexArray,E,M,1,1),Ie(this.layoutVertexArray,E,M,-1,1),this.indexArray.emplaceBack(P,P+1,P+2),this.indexArray.emplaceBack(P,P+2,P+3),O.vertexLength+=4,O.primitiveLength+=2}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,{},_,m,j)}}function Le(h,o){for(let u=0;u<h.length;u++)if(Bt(o,h[u]))return!0;for(let u=0;u<o.length;u++)if(Bt(h,o[u]))return!0;return!!ft(h,o)}function $e(h,o,u){return!!Bt(h,o)||!!ht(o,h,u)}function rt(h,o){if(h.length===1)return xt(o,h[0]);for(let u=0;u<o.length;u++){const p=o[u];for(let _=0;_<p.length;_++)if(Bt(h,p[_]))return!0}for(let u=0;u<h.length;u++)if(xt(o,h[u]))return!0;for(let u=0;u<o.length;u++)if(ft(h,o[u]))return!0;return!1}function et(h,o,u){if(h.length>1){if(ft(h,o))return!0;for(let p=0;p<o.length;p++)if(ht(o[p],h,u))return!0}for(let p=0;p<h.length;p++)if(ht(h[p],o,u))return!0;return!1}function ft(h,o){if(h.length===0||o.length===0)return!1;for(let u=0;u<h.length-1;u++){const p=h[u],_=h[u+1];for(let m=0;m<o.length-1;m++)if(dt(p,_,o[m],o[m+1]))return!0}return!1}function dt(h,o,u,p){return Es(h,u,p)!==Es(o,u,p)&&Es(h,o,u)!==Es(h,o,p)}function ht(h,o,u){const p=u*u;if(o.length===1)return h.distSqr(o[0])<p;for(let _=1;_<o.length;_++)if(ut(h,o[_-1],o[_])<p)return!0;return!1}function ut(h,o,u){const p=o.distSqr(u);if(p===0)return h.distSqr(o);const _=((h.x-o.x)*(u.x-o.x)+(h.y-o.y)*(u.y-o.y))/p;return h.distSqr(_<0?o:_>1?u:u.sub(o)._mult(_)._add(o))}function xt(h,o){let u,p,_,m=!1;for(let w=0;w<h.length;w++){u=h[w];for(let j=0,k=u.length-1;j<u.length;k=j++)p=u[j],_=u[k],p.y>o.y!=_.y>o.y&&o.x<(_.x-p.x)*(o.y-p.y)/(_.y-p.y)+p.x&&(m=!m)}return m}function Bt(h,o){let u=!1;for(let p=0,_=h.length-1;p<h.length;_=p++){const m=h[p],w=h[_];m.y>o.y!=w.y>o.y&&o.x<(w.x-m.x)*(o.y-m.y)/(w.y-m.y)+m.x&&(u=!u)}return u}function an(h,o,u,p,_){for(const w of h)if(o<=w.x&&u<=w.y&&p>=w.x&&_>=w.y)return!0;const m=[new Dt(o,u),new Dt(o,_),new Dt(p,_),new Dt(p,u)];if(h.length>2){for(const w of m)if(Bt(h,w))return!0}for(let w=0;w<h.length-1;w++)if(tn(h[w],h[w+1],m))return!0;return!1}function tn(h,o,u){const p=u[0],_=u[2];if(h.x<p.x&&o.x<p.x||h.x>_.x&&o.x>_.x||h.y<p.y&&o.y<p.y||h.y>_.y&&o.y>_.y)return!1;const m=Es(h,o,u[0]);return m!==Es(h,o,u[1])||m!==Es(h,o,u[2])||m!==Es(h,o,u[3])}function Ct(h,o,u,p,_,m){let w=o.y-h.y,j=h.x-o.x;if(m=m||0){const k=w*w+j*j;if(k===0)return!0;const H=Math.sqrt(k);w/=H,j/=H}return!((u.x-h.x)*w+(u.y-h.y)*j-m<0||(p.x-h.x)*w+(p.y-h.y)*j-m<0||(_.x-h.x)*w+(_.y-h.y)*j-m<0)}function Rt(h,o,u,p,_,m,w){return!(Ct(h,o,p,_,m,w)||Ct(o,u,p,_,m,w)||Ct(u,h,p,_,m,w)||Ct(p,_,h,o,u,w)||Ct(_,m,h,o,u,w)||Ct(m,p,h,o,u,w))}function wn(h,o,u){const p=o.paint.get(h).value;return p.kind==="constant"?p.value:u.programConfigurations.get(o.id).getMaxValue(h)}function kn(h){return Math.sqrt(h[0]*h[0]+h[1]*h[1])}function Qn(h,o,u,p,_){if(!o[0]&&!o[1])return h;const m=Dt.convert(o)._mult(_);u==="viewport"&&m._rotate(-p);const w=[];for(let j=0;j<h.length;j++)w.push(h[j].sub(m));return w}function Jt(h,o,u,p){const _=Dt.convert(h)._mult(p);return o==="viewport"&&_._rotate(-u),_}let In,dn;He(Pe,"CircleBucket",{omit:["layers"]});var Dn,Fn={exports:{}},bn=(Dn||(Dn=1,function(h,o){(function(u){function p(m,w,j){var k=_(256*m,256*(w=Math.pow(2,j)-w-1),j),H=_(256*(m+1),256*(w+1),j);return k[0]+","+k[1]+","+H[0]+","+H[1]}function _(m,w,j){var k=2*Math.PI*6378137/256/Math.pow(2,j);return[m*k-2*Math.PI*6378137/2,w*k-2*Math.PI*6378137/2]}u.getURL=function(m,w,j,k,H,E){return E=E||{},m+"?"+["bbox="+p(j,k,H),"format="+(E.format||"image/png"),"service="+(E.service||"WMS"),"version="+(E.version||"1.1.1"),"request="+(E.request||"GetMap"),"srs="+(E.srs||"EPSG:3857"),"width="+(E.width||256),"height="+(E.height||256),"layers="+w].join("&")},u.getTileBBox=p,u.getMercCoords=_,Object.defineProperty(u,"__esModule",{value:!0})})(o)}(0,Fn.exports)),Fn.exports);class tr{constructor(o,u,p){this.z=o,this.x=u,this.y=p,this.key=hr(0,o,o,u,p)}equals(o){return this.z===o.z&&this.x===o.x&&this.y===o.y}url(o,u){const p=bn.getTileBBox(this.x,this.y,this.z),_=function(m,w,j){let k,H="";for(let E=m;E>0;E--)k=1<<E-1,H+=(w&k?1:0)+(j&k?2:0);return H}(this.z,this.x,this.y);return o[(this.x+this.y)%o.length].replace("{prefix}",(this.x%16).toString(16)+(this.y%16).toString(16)).replace(/{z}/g,String(this.z)).replace(/{x}/g,String(this.x)).replace(/{y}/g,String(u==="tms"?Math.pow(2,this.z)-this.y-1:this.y)).replace("{quadkey}",_).replace("{bbox-epsg-3857}",p)}toString(){return`${this.z}/${this.x}/${this.y}`}}class nr{constructor(o,u){this.wrap=o,this.canonical=u,this.key=hr(o,u.z,u.z,u.x,u.y)}}class Yn{constructor(o,u,p,_,m){this.overscaledZ=o,this.wrap=u,this.canonical=new tr(p,+_,+m),this.key=u===0&&o===p?this.canonical.key:hr(u,o,p,_,m)}equals(o){return this.overscaledZ===o.overscaledZ&&this.wrap===o.wrap&&this.canonical.equals(o.canonical)}scaledTo(o){const u=this.canonical.z-o;return o>this.canonical.z?new Yn(o,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y):new Yn(o,this.wrap,o,this.canonical.x>>u,this.canonical.y>>u)}calculateScaledKey(o,u=!0){if(this.overscaledZ===o&&u)return this.key;if(o>this.canonical.z)return hr(this.wrap*+u,o,this.canonical.z,this.canonical.x,this.canonical.y);{const p=this.canonical.z-o;return hr(this.wrap*+u,o,o,this.canonical.x>>p,this.canonical.y>>p)}}isChildOf(o){if(o.wrap!==this.wrap)return!1;const u=this.canonical.z-o.canonical.z;return o.overscaledZ===0||o.overscaledZ<this.overscaledZ&&o.canonical.z<this.canonical.z&&o.canonical.x===this.canonical.x>>u&&o.canonical.y===this.canonical.y>>u}children(o){if(this.overscaledZ>=o)return[new Yn(this.overscaledZ+1,this.wrap,this.canonical.z,this.canonical.x,this.canonical.y)];const u=this.canonical.z+1,p=2*this.canonical.x,_=2*this.canonical.y;return[new Yn(u,this.wrap,u,p,_),new Yn(u,this.wrap,u,p+1,_),new Yn(u,this.wrap,u,p,_+1),new Yn(u,this.wrap,u,p+1,_+1)]}isLessThan(o){return this.wrap<o.wrap||!(this.wrap>o.wrap)&&(this.overscaledZ<o.overscaledZ||!(this.overscaledZ>o.overscaledZ)&&(this.canonical.x<o.canonical.x||!(this.canonical.x>o.canonical.x)&&this.canonical.y<o.canonical.y))}wrapped(){return new Yn(this.overscaledZ,0,this.canonical.z,this.canonical.x,this.canonical.y)}unwrapTo(o){return new Yn(this.overscaledZ,o,this.canonical.z,this.canonical.x,this.canonical.y)}overscaleFactor(){return Math.pow(2,this.overscaledZ-this.canonical.z)}toUnwrapped(){return new nr(this.wrap,this.canonical)}toString(){return`${this.overscaledZ}/${this.canonical.x}/${this.canonical.y}`}}function hr(h,o,u,p,_){const m=1<<Math.min(u,22);let w=m*(_%m)+p%m;return h&&u<22&&(w+=m*m*((h<0?-2*h-1:2*h)%(1<<2*(22-u)))),16*(32*w+u)+(o-u)}const Zr=[h=>{let o=h.canonical.x-1,u=h.wrap;return o<0&&(o=(1<<h.canonical.z)-1,u--),new Yn(h.overscaledZ,u,h.canonical.z,o,h.canonical.y)},h=>{let o=h.canonical.x+1,u=h.wrap;return o===1<<h.canonical.z&&(o=0,u++),new Yn(h.overscaledZ,u,h.canonical.z,o,h.canonical.y)},h=>new Yn(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,(h.canonical.y===0?1<<h.canonical.z:h.canonical.y)-1),h=>new Yn(h.overscaledZ,h.wrap,h.canonical.z,h.canonical.x,h.canonical.y===(1<<h.canonical.z)-1?0:h.canonical.y+1)];He(tr,"CanonicalTileID"),He(Yn,"OverscaledTileID",{omit:["projMatrix","expandedProjMatrix"]});const kr=$i([{type:"Float32",name:"a_globe_pos",components:3},{type:"Float32",name:"a_uv",components:2}]),{members:Fr}=kr,Xr=$i([{name:"a_pos_3",components:3,type:"Int16"}]);var di=$i([{name:"a_pos",type:"Int16",components:2}]);class gi{constructor(o,u){this.pos=o,this.dir=u}intersectsPlane(o,u,p){const _=Me.vec3.dot(u,this.dir);if(Math.abs(_)<1e-6)return!1;const m=((o[0]-this.pos[0])*u[0]+(o[1]-this.pos[1])*u[1]+(o[2]-this.pos[2])*u[2])/_;return p[0]=this.pos[0]+this.dir[0]*m,p[1]=this.pos[1]+this.dir[1]*m,p[2]=this.pos[2]+this.dir[2]*m,!0}closestPointOnSphere(o,u,p){if(Me.vec3.equals(this.pos,o)||u===0)return p[0]=p[1]=p[2]=0,!1;const[_,m,w]=this.dir,j=this.pos[0]-o[0],k=this.pos[1]-o[1],H=this.pos[2]-o[2],E=_*_+m*m+w*w,M=2*(j*_+k*m+H*w),O=M*M-4*E*(j*j+k*k+H*H-u*u);if(O<0){const P=Math.max(-M/2,0),R=j+_*P,$=k+m*P,te=H+w*P,ie=Math.hypot(R,$,te);return p[0]=R*u/ie,p[1]=$*u/ie,p[2]=te*u/ie,!1}{const P=(-M-Math.sqrt(O))/(2*E);if(P<0){const R=Math.hypot(j,k,H);return p[0]=j*u/R,p[1]=k*u/R,p[2]=H*u/R,!1}return p[0]=j+_*P,p[1]=k+m*P,p[2]=H+w*P,!0}}}class to{constructor(o,u,p,_,m){this.TL=o,this.TR=u,this.BR=p,this.BL=_,this.horizon=m}static fromInvProjectionMatrix(o,u,p){const _=[-1,1,1],m=[1,1,1],w=[1,-1,1],j=[-1,-1,1],k=Me.vec3.transformMat4(_,_,o),H=Me.vec3.transformMat4(m,m,o),E=Me.vec3.transformMat4(w,w,o),M=Me.vec3.transformMat4(j,j,o);return new to(k,H,E,M,u/p)}}function zs(h,o,u){let p=1/0,_=-1/0;const m=[];for(const w of h){Me.vec3.sub(m,w,o);const j=Me.vec3.dot(m,u);p=Math.min(p,j),_=Math.max(_,j)}return[p,_]}function ls(h,o){let u=!0;for(let p=0;p<h.planes.length;p++){const _=h.planes[p];let m=0;for(let w=0;w<o.length;w++)m+=Me.vec3.dot(_,o[w])+_[3]>=0;if(m===0)return 0;m!==o.length&&(u=!1)}return u?2:1}function ms(h,o){for(const u of h.projections){const p=zs(o,h.points[0],u.axis);if(u.projection[1]<p[0]||u.projection[0]>p[1])return 0}return 1}function yi(h,o){let u=0;const p=[0,0,0,0];for(let _=0;_<h.length;_++)p[0]=h[_][0],p[1]=h[_][1],p[2]=h[_][2],p[3]=1,Me.vec4.dot(p,o)>=0&&u++;return u}class zi{constructor(o,u){this.points=o||new Array(8).fill([0,0,0]),this.planes=u||new Array(6).fill([0,0,0,0]),this.bounds=$r.fromPoints(this.points),this.projections=[],this.frustumEdges=[Me.vec3.sub([],this.points[2],this.points[3]),Me.vec3.sub([],this.points[0],this.points[3]),Me.vec3.sub([],this.points[4],this.points[0]),Me.vec3.sub([],this.points[5],this.points[1]),Me.vec3.sub([],this.points[6],this.points[2]),Me.vec3.sub([],this.points[7],this.points[3])];for(const p of this.frustumEdges){const _=[0,-p[2],p[1]],m=[p[2],0,-p[0]];this.projections.push({axis:_,projection:zs(this.points,this.points[0],_)}),this.projections.push({axis:m,projection:zs(this.points,this.points[0],m)})}}static fromInvProjectionMatrix(o,u,p,_){const m=Math.pow(2,p),w=[[-1,1,-1,1],[1,1,-1,1],[1,-1,-1,1],[-1,-1,-1,1],[-1,1,1,1],[1,1,1,1],[1,-1,1,1],[-1,-1,1,1]].map(H=>{const E=Me.vec4.transformMat4([],H,o),M=1/E[3]/u*m;return Me.vec4.mul(E,E,[M,M,_?1/E[3]:M,M])}),j=[[0,1,2],[6,5,4],[0,3,7],[2,1,5],[3,2,6],[0,4,5]].map(H=>{const E=Me.vec3.sub([],w[H[0]],w[H[1]]),M=Me.vec3.sub([],w[H[2]],w[H[1]]),O=Me.vec3.normalize([],Me.vec3.cross([],E,M)),P=-Me.vec3.dot(O,w[H[1]]);return O.concat(P)}),k=[];for(let H=0;H<w.length;H++)k.push([w[H][0],w[H][1],w[H][2]]);return new zi(k,j)}intersectsPrecise(o,u,p){for(let _=0;_<u.length;_++)if(!yi(o,u[_]))return 0;for(let _=0;_<this.planes.length;_++)if(!yi(o,this.planes[_]))return 0;for(const _ of p)for(const m of this.frustumEdges){const w=Me.vec3.cross([],_,m),j=Me.vec3.length(w);if(j===0)continue;Me.vec3.scale(w,w,1/j);const k=zs(this.points,this.points[0],w),H=zs(o,this.points[0],w);if(k[0]>H[1]||H[0]>k[1])return 0}return 1}containsPoint(o){for(const u of this.planes){const p=u[3];if(Me.vec3.dot([u[0],u[1],u[2]],o)+p<0)return!1}return!0}}class $r{static fromPoints(o){const u=[1/0,1/0,1/0],p=[-1/0,-1/0,-1/0];for(const _ of o)Me.vec3.min(u,u,_),Me.vec3.max(p,p,_);return new $r(u,p)}static fromTileIdAndHeight(o,u,p){const _=1<<o.canonical.z,m=o.canonical.x,w=o.canonical.y;return new $r([m/_,w/_,u],[(m+1)/_,(w+1)/_,p])}static applyTransform(o,u){const p=o.getCorners();for(let _=0;_<p.length;++_)Me.vec3.transformMat4(p[_],p[_],u);return $r.fromPoints(p)}static applyTransformFast(o,u){const p=[u[12],u[13],u[14]],_=[...p];for(let m=0;m<3;m++)for(let w=0;w<3;w++){const j=u[4*w+m],k=j*o.min[w],H=j*o.max[w];p[m]+=Math.min(k,H),_[m]+=Math.max(k,H)}return new $r(p,_)}static projectAabbCorners(o,u){const p=o.getCorners();for(let _=0;_<p.length;++_)Me.vec3.transformMat4(p[_],p[_],u);return p}constructor(o,u){this.min=o,this.max=u,this.center=Me.vec3.scale([],Me.vec3.add([],this.min,this.max),.5)}quadrant(o){const u=[o%2==0,o<2],p=Me.vec3.clone(this.min),_=Me.vec3.clone(this.max);for(let m=0;m<u.length;m++)p[m]=u[m]?this.min[m]:this.center[m],_[m]=u[m]?this.center[m]:this.max[m];return _[2]=this.max[2],new $r(p,_)}distanceX(o){return Math.max(Math.min(this.max[0],o[0]),this.min[0])-o[0]}distanceY(o){return Math.max(Math.min(this.max[1],o[1]),this.min[1])-o[1]}distanceZ(o){return Math.max(Math.min(this.max[2],o[2]),this.min[2])-o[2]}getCorners(){const o=this.min,u=this.max;return[[o[0],o[1],o[2]],[u[0],o[1],o[2]],[u[0],u[1],o[2]],[o[0],u[1],o[2]],[o[0],o[1],u[2]],[u[0],o[1],u[2]],[u[0],u[1],u[2]],[o[0],u[1],u[2]]]}intersects(o){return this.intersectsAabb(o.bounds)?ls(o,this.getCorners()):0}intersectsFlat(o){return this.intersectsAabb(o.bounds)?ls(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsPrecise(o,u){return u||this.intersects(o)?ms(o,this.getCorners()):0}intersectsPreciseFlat(o,u){return u||this.intersectsFlat(o)?ms(o,[[this.min[0],this.min[1],0],[this.max[0],this.min[1],0],[this.max[0],this.max[1],0],[this.min[0],this.max[1],0]]):0}intersectsAabb(o){for(let u=0;u<3;++u)if(this.min[u]>o.max[u]||o.min[u]>this.max[u])return!1;return!0}intersectsAabbXY(o){return!(this.min[0]>o.max[0]||o.min[0]>this.max[0]||this.min[1]>o.max[1]||o.min[1]>this.max[1])}encapsulate(o){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],o.min[u]),this.max[u]=Math.max(this.max[u],o.max[u])}encapsulatePoint(o){for(let u=0;u<3;u++)this.min[u]=Math.min(this.min[u],o[u]),this.max[u]=Math.max(this.max[u],o[u])}closestPoint(o){return[Math.max(Math.min(this.max[0],o[0]),this.min[0]),Math.max(Math.min(this.max[1],o[1]),this.min[1]),Math.max(Math.min(this.max[2],o[2]),this.min[2])]}}function Xi(h){return h*Cl/Ka}He($r,"Aabb");const Io=[new $r([Vl,Vl,Vl],[dd,dd,dd]),new $r([Vl,Vl,Vl],[0,0,dd]),new $r([0,Vl,Vl],[dd,0,dd]),new $r([Vl,0,Vl],[0,dd,dd]),new $r([0,0,Vl],[dd,dd,dd])];function hl(h,o,u,p=!0){const _=Me.vec3.scale([],h._camera.position,h.worldSize),m=[o,u,1,1];Me.vec4.transformMat4(m,m,h.pixelMatrixInverse),Me.vec4.scale(m,m,1/m[3]);const w=Me.vec3.sub([],m,_),j=Me.vec3.normalize([],w),k=h.globeMatrix,H=[k[12],k[13],k[14]],E=Me.vec3.sub([],H,_),M=Me.vec3.length(E),O=Me.vec3.normalize([],E),P=h.worldSize/(2*Math.PI),R=Me.vec3.dot(O,j),$=Math.asin(P/M);if($<Math.acos(R)){if(!p)return null;const At=[],nt=[];Me.vec3.scale(At,j,M/R),Me.vec3.normalize(nt,Me.vec3.sub(nt,At,E)),Me.vec3.normalize(j,Me.vec3.add(j,E,Me.vec3.scale(j,nt,Math.tan($)*M)))}const te=[];new gi(_,j).closestPointOnSphere(H,P,te);const ie=Me.vec3.normalize([],Ir(k,0)),de=Me.vec3.normalize([],Ir(k,1)),fe=Me.vec3.normalize([],Ir(k,2)),ae=Me.vec3.dot(ie,te),ge=Me.vec3.dot(de,te),Be=Me.vec3.dot(fe,te),ke=$t(Math.asin(-ge/P));let Ye=$t(Math.atan2(ae,Be));Ye=h.center.lng+function(At,nt){const yt=(nt-At+180)%360-180;return yt<-180?yt+360:yt}(h.center.lng,Ye);const Xe=Sp(Ye),We=Gt(Mf(ke),0,1);return new C(Xe,We)}class fu{constructor(o,u,p){this.a=Me.vec3.sub([],o,p),this.b=Me.vec3.sub([],u,p),this.center=p;const _=Me.vec3.normalize([],this.a),m=Me.vec3.normalize([],this.b);this.angle=Math.acos(Me.vec3.dot(_,m))}}function lc(h,o){if(h.angle===0)return null;let u;return u=h.a[o]===0?1/h.angle*.5*Math.PI:1/h.angle*Math.atan(h.b[o]/h.a[o]/Math.sin(h.angle)-1/Math.tan(h.angle)),u<0||u>1?null:function(p,_,m,w){const j=Math.sin(m);return p*(Math.sin((1-w)*m)/j)+_*(Math.sin(w*m)/j)}(h.a[o],h.b[o],h.angle,Gt(u,0,1))+h.center[o]}function qa(h){if(h.z<=1)return Io[h.z+2*h.y+h.x];const o=Gi(Ls(h));return $r.fromPoints(o)}function da(h,o,u){return Me.vec3.scale(h,h,1-u),Me.vec3.scaleAndAdd(h,h,o,u)}function Go(h,o,u){for(const p of h)Me.vec3.transformMat4(p,p,o),Me.vec3.scale(p,p,u)}function Ks(h,o,u,p){const _=o/h.worldSize,m=h.globeMatrix;if(u.z<=1){const Xe=qa(u).getCorners();return Go(Xe,m,_),$r.fromPoints(Xe)}const w=Ls(u,p),j=Gi(w,Cl+Xi(h._tileCoverLift));Go(j,m,_);const k=Number.MAX_VALUE,H=[-k,-k,-k],E=[k,k,k];if(w.contains(h.center)){for(const At of j)Me.vec3.min(E,E,At),Me.vec3.max(H,H,At);H[2]=0;const Xe=h.point,We=[Xe.x*_,Xe.y*_,0];return Me.vec3.min(E,E,We),Me.vec3.max(H,H,We),new $r(E,H)}if(h._tileCoverLift>0){for(const Xe of j)Me.vec3.min(E,E,Xe),Me.vec3.max(H,H,Xe);return new $r(E,H)}const M=[m[12]*_,m[13]*_,m[14]*_],O=w.getCenter(),P=Gt(h.center.lat,-$o,$o),R=Gt(O.lat,-$o,$o),$=Sp(h.center.lng),te=Mf(P);let ie=$-Sp(O.lng);const de=te-Mf(R);ie>.5?ie-=1:ie<-.5&&(ie+=1);let fe=0;if(Math.abs(ie)>Math.abs(de))fe=ie>=0?1:3;else{fe=de>=0?0:2;const Xe=[m[4]*_,m[5]*_,m[6]*_],We=-Math.sin(Vt(de>=0?w.getSouth():w.getNorth()))*Cl;Me.vec3.scaleAndAdd(M,M,Xe,We)}const ae=j[fe],ge=j[(fe+1)%4],Be=new fu(ae,ge,M),ke=[lc(Be,0)||ae[0],lc(Be,1)||ae[1],lc(Be,2)||ae[2]],Ye=cc(h.zoom);if(Ye>0){const Xe=function({x:At,y:nt,z:yt},bt,_t,Et,Ut){const Wt=1/(1<<yt);let Pt=At*Wt,mn=Pt+Wt,Nn=nt*Wt,vn=Nn+Wt,qn=0;const Kn=(Pt+mn)/2-Et;return Kn>.5?qn=-1:Kn<-.5&&(qn=1),Pt=((Pt+qn)*bt-(Et*=bt))*_t+Et,mn=((mn+qn)*bt-Et)*_t+Et,Nn=(Nn*bt-(Ut*=bt))*_t+Ut,vn=(vn*bt-Ut)*_t+Ut,[[Pt,vn,0],[mn,vn,0],[mn,Nn,0],[Pt,Nn,0]]}(u,o,h._pixelsPerMercatorPixel,$,te);for(let At=0;At<j.length;At++)da(j[At],Xe[At],Ye);const We=Me.vec3.add([],Xe[fe],Xe[(fe+1)%4]);Me.vec3.scale(We,We,.5),da(ke,We,Ye)}for(const Xe of j)Me.vec3.min(E,E,Xe),Me.vec3.max(H,H,Xe);return E[2]=Math.min(ae[2],ge[2]),Me.vec3.min(E,E,ke),Me.vec3.max(H,H,ke),new $r(E,H)}function Ls({x:h,y:o,z:u},p=!1){const _=1/(1<<u),m=new es(Ro(h*_),o===(1<<u)-1&&p?-90:Wa((o+1)*_)),w=new es(Ro((h+1)*_),o===0&&p?90:Wa(o*_));return new Lf(m,w)}function Gi(h,o=Cl){const u=Vt(h.getNorth()),p=Vt(h.getSouth()),_=Math.cos(u),m=Math.cos(p),w=Math.sin(u),j=Math.sin(p),k=h.getWest(),H=h.getEast();return[kf(m,j,k,o),kf(m,j,H,o),kf(_,w,H,o),kf(_,w,k,o)]}function Oo(h,o,u,p){const _=1<<u.z,m=(h/Wn+u.x)/_;return Cp(Wa((o/Wn+u.y)/_),Ro(m),p)}function Za({min:h,max:o}){return Fi/Math.max(o[0]-h[0],o[1]-h[1],o[2]-h[2])}const Qs=new Float64Array(16);function $l(h){const o=Za(h),u=Me.mat4.fromScaling(Qs,[o,o,o]);return Me.mat4.translate(u,u,Me.vec3.negate([],h.min))}function Pu(h){const o=Me.mat4.fromTranslation(Qs,h.min),u=1/Za(h);return Me.mat4.scale(o,o,[u,u,u])}function Wc(h){const o=Wn/(2*Math.PI);return h/(2*Math.PI)/o}function Nf(h,o){return Wn/(512*Math.pow(2,h))*Za(qa(o))}function Dh(h,o,u,p,_){const m=Wc(u),w=[h,o,-u/(2*Math.PI)],j=Me.mat4.identity(new Float64Array(16));return Me.mat4.translate(j,j,w),Me.mat4.scale(j,j,[m,m,m]),Me.mat4.rotateX(j,j,Vt(-_)),Me.mat4.rotateY(j,j,Vt(-p)),j}function cc(h){return Rn(bm,bp,h)}function ku(h,o){const u=Cp(o.lat,o.lng),p=function(m){const w=Cp(m._center.lat,m._center.lng),j=Me.vec3.fromValues(0,1,0);let k=Me.vec3.cross([],j,w);const H=Me.mat4.fromRotation([],-m.angle,w);k=Me.vec3.transformMat4(k,k,H),Me.mat4.fromRotation(H,-m._pitch,k);const E=Me.vec3.normalize([],w);return Me.vec3.scale(E,E,Xi(m.cameraToCenterDistance/m.pixelsPerMeter)),Me.vec3.transformMat4(E,E,H),Me.vec3.add([],w,E)}(h),_=Me.vec3.subtract([],p,u);return Me.vec3.angle(_,u)}function sh(h,o){return ku(h,o)>Math.PI/2*1.01}const hd=Vt(85),AA=Math.cos(hd),Ig=Math.sin(hd),mv=Me.mat4.create(),k0=h=>{const o=[];return h.paint.get("circle-pitch-alignment")==="map"&&o.push("PITCH_WITH_MAP"),h.paint.get("circle-pitch-scale")==="map"&&o.push("SCALE_WITH_MAP"),o};function uE(h,o,u,p,_,m,w,j,k){if(m&&h.queryGeometry.isAboveHorizon)return!1;m&&(k*=h.pixelToTileUnitsFactor);const H=h.tileID.canonical,E=u.projection.upVectorScale(H,u.center.lat,u.worldSize).metersToTile;for(const M of o)for(const O of M){const P=O.add(j),R=_&&u.elevation?u.elevation.exaggeration()*_.getElevationAt(P.x,P.y,!0):0,$=u.projection.projectTilePoint(P.x,P.y,H);if(R>0){const fe=u.projection.upVector(H,P.x,P.y);$.x+=fe[0]*E*R,$.y+=fe[1]*E*R,$.z+=fe[2]*E*R}const te=m?P:hk($.x,$.y,$.z,p),ie=m?h.tilespaceRays.map(fe=>hE(fe,R)):h.queryGeometry.screenGeometry,de=Me.vec4.transformMat4([],[$.x,$.y,$.z,1],p);if(!w&&m?k*=de[3]/u.cameraToCenterDistance:w&&!m&&(k*=u.cameraToCenterDistance/de[3]),m){const fe=Wa((O.y/Wn+H.y)/(1<<H.z));k/=u.projection.pixelsPerMeter(fe,1)/ua(1,fe)}if($e(ie,te,k))return!0}return!1}function hk(h,o,u,p){const _=Me.vec4.transformMat4([],[h,o,u,1],p);return new Dt(_[0]/_[3],_[1]/_[3])}const dE=Me.vec3.fromValues(0,0,0),fk=Me.vec3.fromValues(0,0,1);function hE(h,o){const u=Me.vec3.create();return dE[2]=o,h.intersectsPlane(dE,fk,u),new Dt(u[0],u[1])}class fE extends Pe{}let gv,pE,AE,mE;function gE(h,{width:o,height:u},p,_){if(_){if(_ instanceof Uint8ClampedArray)_=new Uint8Array(_.buffer);else if(_.length!==o*u*p)throw new RangeError("mismatched image size")}else _=new Uint8Array(o*u*p);return h.width=o,h.height=u,h.data=_,h}function yE(h,o,u){const{width:p,height:_}=o;p===h.width&&_===h.height||(mb(h,o,{x:0,y:0},{x:0,y:0},{width:Math.min(h.width,p),height:Math.min(h.height,_)},u,null),h.width=p,h.height=_,h.data=o.data)}function mb(h,o,u,p,_,m,w,j){if(_.width===0||_.height===0)return o;if(_.width>h.width||_.height>h.height||u.x>h.width-_.width||u.y>h.height-_.height)throw new RangeError("out of range source coordinates for image copy");if(_.width>o.width||_.height>o.height||p.x>o.width-_.width||p.y>o.height-_.height)throw new RangeError("out of range destination coordinates for image copy");const k=h.data,H=o.data,E=m===4&&j;for(let M=0;M<_.height;M++){const O=((u.y+M)*h.width+u.x)*m,P=((p.y+M)*o.width+p.x)*m;if(E)for(let R=0;R<_.width;R++){const $=O+R*m+3,te=P+R*m;H[te+0]=255,H[te+1]=255,H[te+2]=255,H[te+3]=k[$]}else if(w)for(let R=0;R<_.width;R++){const $=O+R*m,te=P+R*m,ie=k[$+3],de=new ji(k[$+0]/255*ie,k[$+1]/255*ie,k[$+2]/255*ie,ie).toRenderColor(w).toArray();H[te+0]=de[0],H[te+1]=de[1],H[te+2]=de[2],H[te+3]=de[3]}else for(let R=0;R<_.width*m;R++)H[P+R]=k[O+R]}return o}He(fE,"HeatmapBucket",{omit:["layers"]});class Cm{constructor(o,u){gE(this,o,1,u)}resize(o){yE(this,new Cm(o),1)}clone(){return new Cm({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,p,_,m){mb(o,u,p,_,m,1,null)}}class Pc{constructor(o,u){gE(this,o,4,u)}resize(o){yE(this,new Pc(o),4)}replace(o,u){u?this.data.set(o):this.data=o instanceof Uint8ClampedArray?new Uint8Array(o.buffer):o}clone(){return new Pc({width:this.width,height:this.height},new Uint8Array(this.data))}static copy(o,u,p,_,m,w,j){mb(o,u,p,_,m,4,w,j)}}class vE{constructor(o,u){this.width=o.width,this.height=o.height,this.data=u instanceof Uint8Array?new Float32Array(u.buffer):u}}function yv(h){const o={},u=h.resolution||256,p=h.clips?h.clips.length:1,_=h.image||new Pc({width:u,height:p}),m=(w,j,k)=>{o[h.evaluationKey]=k;const H=h.expression.evaluate(o);H&&(_.data[w+j+0]=Math.floor(255*H.r/H.a),_.data[w+j+1]=Math.floor(255*H.g/H.a),_.data[w+j+2]=Math.floor(255*H.b/H.a),_.data[w+j+3]=Math.floor(255*H.a))};if(h.clips)for(let w=0,j=0;w<p;++w,j+=4*u)for(let k=0,H=0;k<u;k++,H+=4){const E=k/(u-1),{start:M,end:O}=h.clips[w];m(j,H,M*(1-E)+O*E)}else for(let w=0,j=0;w<u;w++,j+=4)m(0,j,w/(u-1));return _}He(Cm,"AlphaImage"),He(Pc,"RGBAImage");const pk=$i([{name:"a_pos",components:2,type:"Int16"}],4),{members:Ak}=pk;function vv(h,o,u=2){const p=o&&o.length,_=p?o[0]*u:h.length;let m=xE(h,0,_,u,!0);const w=[];if(!m||m.next===m.prev)return w;let j,k,H;if(p&&(m=function(E,M,O,P){const R=[];for(let $=0,te=M.length;$<te;$++){const ie=xE(E,M[$]*P,$<te-1?M[$+1]*P:E.length,P,!1);ie===ie.next&&(ie.steiner=!0),R.push(xk(ie))}R.sort(yk);for(let $=0;$<R.length;$++)O=vk(R[$],O);return O}(h,o,m,u)),h.length>80*u){j=1/0,k=1/0;let E=-1/0,M=-1/0;for(let O=u;O<_;O+=u){const P=h[O],R=h[O+1];P<j&&(j=P),R<k&&(k=R),P>E&&(E=P),R>M&&(M=R)}H=Math.max(E-j,M-k),H=H!==0?32767/H:0}return xv(m,w,u,j,k,H,0),w}function xE(h,o,u,p,_){let m;if(_===function(w,j,k,H){let E=0;for(let M=j,O=k-H;M<k;M+=H)E+=(w[O]-w[M])*(w[M+1]+w[O+1]),O=M;return E}(h,o,u,p)>0)for(let w=o;w<u;w+=p)m=wv(w/p|0,h[w],h[w+1],m);else for(let w=u-p;w>=o;w-=p)m=wv(w/p|0,h[w],h[w+1],m);return m&&p_(m,m.next)&&(bv(m),m=m.next),m}function jg(h,o){if(!h)return h;o||(o=h);let u,p=h;do if(u=!1,p.steiner||!p_(p,p.next)&&Xa(p.prev,p,p.next)!==0)p=p.next;else{if(bv(p),p=o=p.prev,p===p.next)break;u=!0}while(u||p!==o);return o}function xv(h,o,u,p,_,m,w){if(!h)return;!w&&m&&function(k,H,E,M){let O=k;do O.z===0&&(O.z=gb(O.x,O.y,H,E,M)),O.prevZ=O.prev,O.nextZ=O.next,O=O.next;while(O!==k);O.prevZ.nextZ=null,O.prevZ=null,function(P){let R,$=1;do{let te,ie=P;P=null;let de=null;for(R=0;ie;){R++;let fe=ie,ae=0;for(let Be=0;Be<$&&(ae++,fe=fe.nextZ,fe);Be++);let ge=$;for(;ae>0||ge>0&&fe;)ae!==0&&(ge===0||!fe||ie.z<=fe.z)?(te=ie,ie=ie.nextZ,ae--):(te=fe,fe=fe.nextZ,ge--),de?de.nextZ=te:P=te,te.prevZ=de,de=te;ie=fe}de.nextZ=null,$*=2}while(R>1)}(O)}(h,p,_,m);let j=h;for(;h.prev!==h.next;){const k=h.prev,H=h.next;if(m?wE(h,p,_,m):_E(h))o.push(k.i,h.i,H.i),bv(h),h=H.next,j=H.next;else if((h=H)===j){w?w===1?xv(h=mk(jg(h),o),o,u,p,_,m,2):w===2&&gk(h,o,u,p,_,m):xv(jg(h),o,u,p,_,m,1);break}}}function _E(h){const o=h.prev,u=h,p=h.next;if(Xa(o,u,p)>=0)return!1;const _=o.x,m=u.x,w=p.x,j=o.y,k=u.y,H=p.y,E=_<m?_<w?_:w:m<w?m:w,M=j<k?j<H?j:H:k<H?k:H,O=_>m?_>w?_:w:m>w?m:w,P=j>k?j>H?j:H:k>H?k:H;let R=p.next;for(;R!==o;){if(R.x>=E&&R.x<=O&&R.y>=M&&R.y<=P&&L0(_,j,m,k,w,H,R.x,R.y)&&Xa(R.prev,R,R.next)>=0)return!1;R=R.next}return!0}function wE(h,o,u,p){const _=h.prev,m=h,w=h.next;if(Xa(_,m,w)>=0)return!1;const j=_.x,k=m.x,H=w.x,E=_.y,M=m.y,O=w.y,P=j<k?j<H?j:H:k<H?k:H,R=E<M?E<O?E:O:M<O?M:O,$=j>k?j>H?j:H:k>H?k:H,te=E>M?E>O?E:O:M>O?M:O,ie=gb(P,R,o,u,p),de=gb($,te,o,u,p);let fe=h.prevZ,ae=h.nextZ;for(;fe&&fe.z>=ie&&ae&&ae.z<=de;){if(fe.x>=P&&fe.x<=$&&fe.y>=R&&fe.y<=te&&fe!==_&&fe!==w&&L0(j,E,k,M,H,O,fe.x,fe.y)&&Xa(fe.prev,fe,fe.next)>=0||(fe=fe.prevZ,ae.x>=P&&ae.x<=$&&ae.y>=R&&ae.y<=te&&ae!==_&&ae!==w&&L0(j,E,k,M,H,O,ae.x,ae.y)&&Xa(ae.prev,ae,ae.next)>=0))return!1;ae=ae.nextZ}for(;fe&&fe.z>=ie;){if(fe.x>=P&&fe.x<=$&&fe.y>=R&&fe.y<=te&&fe!==_&&fe!==w&&L0(j,E,k,M,H,O,fe.x,fe.y)&&Xa(fe.prev,fe,fe.next)>=0)return!1;fe=fe.prevZ}for(;ae&&ae.z<=de;){if(ae.x>=P&&ae.x<=$&&ae.y>=R&&ae.y<=te&&ae!==_&&ae!==w&&L0(j,E,k,M,H,O,ae.x,ae.y)&&Xa(ae.prev,ae,ae.next)>=0)return!1;ae=ae.nextZ}return!0}function mk(h,o){let u=h;do{const p=u.prev,_=u.next.next;!p_(p,_)&&bE(p,u,u.next,_)&&_v(p,_)&&_v(_,p)&&(o.push(p.i,u.i,_.i),bv(u),bv(u.next),u=h=_),u=u.next}while(u!==h);return jg(u)}function gk(h,o,u,p,_,m){let w=h;do{let j=w.next.next;for(;j!==w.prev;){if(w.i!==j.i&&_k(w,j)){let k=CE(w,j);return w=jg(w,w.next),k=jg(k,k.next),xv(w,o,u,p,_,m,0),void xv(k,o,u,p,_,m,0)}j=j.next}w=w.next}while(w!==h)}function yk(h,o){return h.x-o.x}function vk(h,o){const u=function(_,m){let w=m;const j=_.x,k=_.y;let H,E=-1/0;do{if(k<=w.y&&k>=w.next.y&&w.next.y!==w.y){const $=w.x+(k-w.y)*(w.next.x-w.x)/(w.next.y-w.y);if($<=j&&$>E&&(E=$,H=w.x<w.next.x?w:w.next,$===j))return H}w=w.next}while(w!==m);if(!H)return null;const M=H,O=H.x,P=H.y;let R=1/0;w=H;do{if(j>=w.x&&w.x>=O&&j!==w.x&&L0(k<P?j:E,k,O,P,k<P?E:j,k,w.x,w.y)){const $=Math.abs(k-w.y)/(j-w.x);_v(w,_)&&($<R||$===R&&(w.x>H.x||w.x===H.x&&f_(H,w)))&&(H=w,R=$)}w=w.next}while(w!==M);return H}(h,o);if(!u)return o;const p=CE(u,h);return jg(p,p.next),jg(u,u.next)}function f_(h,o){return Xa(h.prev,h,o.prev)<0&&Xa(o.next,h,h.next)<0}function gb(h,o,u,p,_){return(h=1431655765&((h=858993459&((h=252645135&((h=16711935&((h=(h-u)*_|0)|h<<8))|h<<4))|h<<2))|h<<1))|(o=1431655765&((o=858993459&((o=252645135&((o=16711935&((o=(o-p)*_|0)|o<<8))|o<<4))|o<<2))|o<<1))<<1}function xk(h){let o=h,u=h;do(o.x<u.x||o.x===u.x&&o.y<u.y)&&(u=o),o=o.next;while(o!==h);return u}function L0(h,o,u,p,_,m,w,j){return(_-w)*(o-j)>=(h-w)*(m-j)&&(h-w)*(p-j)>=(u-w)*(o-j)&&(u-w)*(m-j)>=(_-w)*(p-j)}function _k(h,o){return h.next.i!==o.i&&h.prev.i!==o.i&&!function(u,p){let _=u;do{if(_.i!==u.i&&_.next.i!==u.i&&_.i!==p.i&&_.next.i!==p.i&&bE(_,_.next,u,p))return!0;_=_.next}while(_!==u);return!1}(h,o)&&(_v(h,o)&&_v(o,h)&&function(u,p){let _=u,m=!1;const w=(u.x+p.x)/2,j=(u.y+p.y)/2;do _.y>j!=_.next.y>j&&_.next.y!==_.y&&w<(_.next.x-_.x)*(j-_.y)/(_.next.y-_.y)+_.x&&(m=!m),_=_.next;while(_!==u);return m}(h,o)&&(Xa(h.prev,h,o.prev)||Xa(h,o.prev,o))||p_(h,o)&&Xa(h.prev,h,h.next)>0&&Xa(o.prev,o,o.next)>0)}function Xa(h,o,u){return(o.y-h.y)*(u.x-o.x)-(o.x-h.x)*(u.y-o.y)}function p_(h,o){return h.x===o.x&&h.y===o.y}function bE(h,o,u,p){const _=m_(Xa(h,o,u)),m=m_(Xa(h,o,p)),w=m_(Xa(u,p,h)),j=m_(Xa(u,p,o));return _!==m&&w!==j||!(_!==0||!A_(h,u,o))||!(m!==0||!A_(h,p,o))||!(w!==0||!A_(u,h,p))||!(j!==0||!A_(u,o,p))}function A_(h,o,u){return o.x<=Math.max(h.x,u.x)&&o.x>=Math.min(h.x,u.x)&&o.y<=Math.max(h.y,u.y)&&o.y>=Math.min(h.y,u.y)}function m_(h){return h>0?1:h<0?-1:0}function _v(h,o){return Xa(h.prev,h,h.next)<0?Xa(h,o,h.next)>=0&&Xa(h,h.prev,o)>=0:Xa(h,o,h.prev)<0||Xa(h,h.next,o)<0}function CE(h,o){const u=g_(h.i,h.x,h.y),p=g_(o.i,o.x,o.y),_=h.next,m=o.prev;return h.next=o,o.prev=h,u.next=_,_.prev=u,p.next=u,u.prev=p,m.next=p,p.prev=m,p}function wv(h,o,u,p){const _=g_(h,o,u);return p?(_.next=p.next,_.prev=p,p.next.prev=_,p.next=_):(_.prev=_,_.next=_),_}function bv(h){h.next.prev=h.prev,h.prev.next=h.next,h.prevZ&&(h.prevZ.nextZ=h.nextZ),h.nextZ&&(h.nextZ.prevZ=h.prevZ)}function g_(h,o,u){return{i:h,x:o,y:u,prev:null,next:null,z:0,prevZ:null,nextZ:null,steiner:!1}}function Cv(h,o){const u=h.length;if(u<=1)return[h];const p=[];let _,m;for(let w=0;w<u;w++){const j=ki(h[w]);j!==0&&(h[w].area=Math.abs(j),m===void 0&&(m=j<0),m===j<0?(_&&p.push(_),_=[h[w]]):_.push(h[w]))}if(_&&p.push(_),o>1)for(let w=0;w<p.length;w++)p[w].length<=o||(wu(p[w],o,1,p[w].length-1,yb),p[w]=p[w].slice(0,o));return p}function yb(h,o){return o.area-h.area}function vb(h,o){if(!h)return null;const u=typeof h=="string"?h:h.getPrimary().id;o[u]||(o[u]=[]);const p=Yo.from(h).getPrimary();return o[u].push(p),p.serialize()}function y_(h,o,u){const p=u.patternDependencies;let _=!1;for(const m of o){const w=m.paint.get(`${h}-pattern`);w.isConstant()||(_=!0),vb(w.constantOr(null),p)&&(_=!0)}return _}function v_(h,o,u,p,_){const m=_.patternDependencies;for(const w of o){const j=w.paint.get(`${h}-pattern`).value;if(j.kind!=="constant"){let k=j.evaluate({zoom:p},u,{},_.availableImages);k=k&&k.name?k.name:k;const H=vb(k,m);H&&(u.patterns[w.id]=H)}}return u}class x_{constructor(o){this.zoom=o.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.patternFeatures=[],this.layoutVertexArray=new Iu,this.indexArray=new $a,this.indexArray2=new th,this.programConfigurations=new Ff(o.layers,{zoom:o.zoom,lut:o.lut}),this.segments=new po,this.segments2=new po,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.projection=o.projection}updateFootprints(o,u){}populate(o,u,p,_){this.hasPattern=y_("fill",this.layers,u);const m=this.layers[0].layout.get("fill-sort-key"),w=[];for(const{feature:j,id:k,index:H,sourceLayerIndex:E}of o){const M=this.layers[0]._featureFilter.needGeometry,O=ue(j,M);if(!this.layers[0]._featureFilter.filter(new qr(this.zoom),O,p))continue;const P=m?m.evaluate(O,{},p,u.availableImages):void 0,R={id:k,properties:j.properties,type:j.type,sourceLayerIndex:E,index:H,geometry:M?O.geometry:se(j,p,_),patterns:{},sortKey:P};w.push(R)}m&&w.sort((j,k)=>j.sortKey-k.sortKey);for(const j of w){const{geometry:k,index:H,sourceLayerIndex:E}=j;if(this.hasPattern){const M=v_("fill",this.layers,j,this.zoom,u);this.patternFeatures.push(M)}else this.addFeature(j,k,H,p,{},u.availableImages,u.brightness);u.featureIndex.insert(o[H].feature,k,H,E,this.index)}}update(o,u,p,_,m,w,j){this.programConfigurations.updatePaintArrays(o,u,m,p,_,w,j)}addFeatures(o,u,p,_,m,w){for(const j of this.patternFeatures)this.addFeature(j,j.geometry,j.index,u,p,_,w)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Ak),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.indexBuffer2=o.createIndexBuffer(this.indexArray2)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.indexBuffer2.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.segments2.destroy())}addFeature(o,u,p,_,m,w=[],j){for(const k of Cv(u,500)){let H=0;for(const $ of k)H+=$.length;const E=this.segments.prepareSegment(H,this.layoutVertexArray,this.indexArray),M=E.vertexLength,O=[],P=[];for(const $ of k){if($.length===0)continue;$!==k[0]&&P.push(O.length/2);const te=this.segments2.prepareSegment($.length,this.layoutVertexArray,this.indexArray2),ie=te.vertexLength;this.layoutVertexArray.emplaceBack($[0].x,$[0].y),this.indexArray2.emplaceBack(ie+$.length-1,ie),O.push($[0].x),O.push($[0].y);for(let de=1;de<$.length;de++)this.layoutVertexArray.emplaceBack($[de].x,$[de].y),this.indexArray2.emplaceBack(ie+de-1,ie+de),O.push($[de].x),O.push($[de].y);te.vertexLength+=$.length,te.primitiveLength+=$.length}const R=vv(O,P);for(let $=0;$<R.length;$+=3)this.indexArray.emplaceBack(M+R[$],M+R[$+1],M+R[$+2]);E.vertexLength+=H,E.primitiveLength+=R.length/3}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,m,w,_,j)}}let SE,BE,EE,Sv;He(x_,"FillBucket",{omit:["layers","patternFeatures"]});class M0{constructor(o,u,p,_){if(this.triangleCount=u.length/3,this.min=new Dt(0,0),this.max=new Dt(0,0),this.xScale=0,this.yScale=0,this.cellsX=0,this.cellsY=0,this.cells=[],this.payload=[],this.triangleCount===0||o.length===0)return;const[m,w]=[o[0].clone(),o[0].clone()];for(let M=1;M<o.length;++M){const O=o[M];m.x=Math.min(m.x,O.x),m.y=Math.min(m.y,O.y),w.x=Math.max(w.x,O.x),w.y=Math.max(w.y,O.y)}if(_){const M=Math.ceil(Math.max(w.x-m.x,w.y-m.y)/_);p=Math.max(p,M)}if(p===0)return;this.min=m,this.max=w;const j=this.max.sub(this.min);j.x=Math.max(j.x,1),j.y=Math.max(j.y,1);const k=Math.max(j.x,j.y)/p;this.cellsX=Math.max(1,Math.ceil(j.x/k)),this.cellsY=Math.max(1,Math.ceil(j.y/k)),this.xScale=1/k,this.yScale=1/k;const H=[];for(let M=0;M<this.triangleCount;M++){const O=o[u[3*M+0]].sub(this.min),P=o[u[3*M+1]].sub(this.min),R=o[u[3*M+2]].sub(this.min),$=Bp(Math.floor(Math.min(O.x,P.x,R.x)),this.xScale,this.cellsX),te=Bp(Math.floor(Math.max(O.x,P.x,R.x)),this.xScale,this.cellsX),ie=Bp(Math.floor(Math.min(O.y,P.y,R.y)),this.yScale,this.cellsY),de=Bp(Math.floor(Math.max(O.y,P.y,R.y)),this.yScale,this.cellsY),fe=new Dt(0,0),ae=new Dt(0,0),ge=new Dt(0,0),Be=new Dt(0,0);for(let ke=ie;ke<=de;++ke){fe.y=ae.y=ke*k,ge.y=Be.y=(ke+1)*k;for(let Ye=$;Ye<=te;++Ye)fe.x=ge.x=Ye*k,ae.x=Be.x=(Ye+1)*k,(Rt(O,P,R,fe,ae,Be)||Rt(O,P,R,fe,Be,ge))&&H.push({cellIdx:ke*this.cellsX+Ye,triIdx:M})}}if(H.length===0)return;H.sort((M,O)=>M.cellIdx-O.cellIdx||M.triIdx-O.triIdx);let E=0;for(;E<H.length;){const M=H[E].cellIdx,O={start:this.payload.length,len:0};for(;E<H.length&&H[E].cellIdx===M;)++O.len,this.payload.push(H[E++].triIdx);this.cells[M]=O}}_lazyInitLookup(){this.lookup||(this.lookup=new Uint8Array(Math.ceil(this.triangleCount/8))),this.lookup.fill(0)}queryPoint(o,u){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>o.x||o.y>this.max.y||this.min.y>o.y)return;const p=Bp(o.x-this.min.x,this.xScale,this.cellsX),_=Bp(o.y-this.min.y,this.yScale,this.cellsY),m=this.cells[_*this.cellsX+p];if(m){this._lazyInitLookup();for(let w=0;w<m.len;w++){const j=this.payload[m.start+w],k=Math.floor(j/8),H=1<<j%8;if(!(this.lookup[k]&H)&&(this.lookup[k]|=H,u.push(j),u.length===this.triangleCount))return}}}query(o,u,p){if(this.triangleCount===0||this.cells.length===0||o.x>this.max.x||this.min.x>u.x||o.y>this.max.y||this.min.y>u.y)return;this._lazyInitLookup();const _=Bp(o.x-this.min.x,this.xScale,this.cellsX),m=Bp(u.x-this.min.x,this.xScale,this.cellsX),w=Bp(o.y-this.min.y,this.yScale,this.cellsY),j=Bp(u.y-this.min.y,this.yScale,this.cellsY);for(let k=w;k<=j;k++)for(let H=_;H<=m;H++){const E=this.cells[k*this.cellsX+H];if(E)for(let M=0;M<E.len;M++){const O=this.payload[E.start+M],P=Math.floor(O/8),R=1<<O%8;if(!(this.lookup[P]&R)&&(this.lookup[P]|=R,p.push(O),p.length===this.triangleCount))return}}}}function Bp(h,o,u){return Math.max(0,Math.min(u-1,Math.floor(h*o)))}He(M0,"TriangleGridIndex");class TE{constructor(o){this.zoom=o.zoom,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.footprints=[]}updateFootprints(o,u){for(const p of this.footprints)u.push({footprint:p,id:o})}populate(o,u,p,_){const m=[];for(const{feature:w,id:j,index:k,sourceLayerIndex:H}of o){const E=this.layers[0]._featureFilter.needGeometry,M=ue(w,E);if(!this.layers[0]._featureFilter.filter(new qr(this.zoom),M,p))continue;const O={id:j,properties:w.properties,type:w.type,sourceLayerIndex:H,index:k,geometry:E?M.geometry:se(w,p,_),patterns:{}};m.push(O)}for(const w of m){const{geometry:j,index:k,sourceLayerIndex:H}=w;this.addFeature(w,j,k,p,{},u.availableImages,u.brightness),u.featureIndex.insert(o[k].feature,j,k,H,this.index)}}isEmpty(){return this.footprints.length===0}uploadPending(){return!1}upload(o){}update(o,u,p,_,m,w,j){}destroy(){}addFeature(o,u,p,_,m,w=[],j){for(const k of Cv(u,2)){const H=[],E=[],M=[],O=new Dt(1/0,1/0),P=new Dt(-1/0,-1/0);for(const te of k)if(te.length!==0){te!==k[0]&&M.push(E.length/2);for(let ie=0;ie<te.length;ie++)E.push(te[ie].x),E.push(te[ie].y),H.push(te[ie]),O.x=Math.min(O.x,te[ie].x),O.y=Math.min(O.y,te[ie].y),P.x=Math.max(P.x,te[ie].x),P.y=Math.max(P.y,te[ie].y)}const R=vv(E,M),$=new M0(H,R,8,256);this.footprints.push({vertices:H,indices:R,grid:$,min:O,max:P})}}}He(TE,"ClipBucket",{omit:["layers"]});const xb=$i([{name:"a_pos_normal_ed",components:4,type:"Int16"}]),IE=$i([{name:"a_pos_end",components:4,type:"Int16"},{name:"a_angular_offset_factor",components:1,type:"Int16"}]),wk=$i([{name:"a_centroid_pos",components:2,type:"Uint16"}]),bk=$i([{name:"a_join_normal_inside",components:3,type:"Int16"}]),Ck=$i([{name:"a_hidden_by_landmark",components:1,type:"Uint8"}]),Sk=$i([{name:"a_pos_3",components:3,type:"Int16"},{name:"a_pos_normal_3",components:3,type:"Int16"}]),{members:Bk}=xb;var _b,jE,wb,FE,bb,PE,kE,fd={};function LE(){if(jE)return _b;jE=1;var h=pn();function o(_,m,w,j,k){this.properties={},this.extent=w,this.type=0,this._pbf=_,this._geometry=-1,this._keys=j,this._values=k,_.readFields(u,this,m)}function u(_,m,w){_==1?m.id=w.readVarint():_==2?function(j,k){for(var H=j.readVarint()+j.pos;j.pos<H;){var E=k._keys[j.readVarint()],M=k._values[j.readVarint()];k.properties[E]=M}}(w,m):_==3?m.type=w.readVarint():_==4&&(m._geometry=w.pos)}function p(_){for(var m,w,j=0,k=0,H=_.length,E=H-1;k<H;E=k++)j+=((w=_[E]).x-(m=_[k]).x)*(m.y+w.y);return j}return _b=o,o.types=["Unknown","Point","LineString","Polygon"],o.prototype.loadGeometry=function(){var _=this._pbf;_.pos=this._geometry;for(var m,w=_.readVarint()+_.pos,j=1,k=0,H=0,E=0,M=[];_.pos<w;){if(k<=0){var O=_.readVarint();j=7&O,k=O>>3}if(k--,j===1||j===2)H+=_.readSVarint(),E+=_.readSVarint(),j===1&&(m&&M.push(m),m=[]),m.push(new h(H,E));else{if(j!==7)throw new Error("unknown command "+j);m&&m.push(m[0].clone())}}return m&&M.push(m),M},o.prototype.bbox=function(){var _=this._pbf;_.pos=this._geometry;for(var m=_.readVarint()+_.pos,w=1,j=0,k=0,H=0,E=1/0,M=-1/0,O=1/0,P=-1/0;_.pos<m;){if(j<=0){var R=_.readVarint();w=7&R,j=R>>3}if(j--,w===1||w===2)(k+=_.readSVarint())<E&&(E=k),k>M&&(M=k),(H+=_.readSVarint())<O&&(O=H),H>P&&(P=H);else if(w!==7)throw new Error("unknown command "+w)}return[E,O,M,P]},o.prototype.toGeoJSON=function(_,m,w){var j,k,H=this.extent*Math.pow(2,w),E=this.extent*_,M=this.extent*m,O=this.loadGeometry(),P=o.types[this.type];function R(ie){for(var de=0;de<ie.length;de++){var fe=ie[de];ie[de]=[360*(fe.x+E)/H-180,360/Math.PI*Math.atan(Math.exp((180-360*(fe.y+M)/H)*Math.PI/180))-90]}}switch(this.type){case 1:var $=[];for(j=0;j<O.length;j++)$[j]=O[j][0];R(O=$);break;case 2:for(j=0;j<O.length;j++)R(O[j]);break;case 3:for(O=function(ie){var de=ie.length;if(de<=1)return[ie];for(var fe,ae,ge=[],Be=0;Be<de;Be++){var ke=p(ie[Be]);ke!==0&&(ae===void 0&&(ae=ke<0),ae===ke<0?(fe&&ge.push(fe),fe=[ie[Be]]):fe.push(ie[Be]))}return fe&&ge.push(fe),ge}(O),j=0;j<O.length;j++)for(k=0;k<O[j].length;k++)R(O[j][k])}O.length===1?O=O[0]:P="Multi"+P;var te={type:"Feature",geometry:{type:P,coordinates:O},properties:this.properties};return"id"in this&&(te.id=this.id),te},_b}function ME(){if(FE)return wb;FE=1;var h=LE();function o(p,_){this.version=1,this.name=null,this.extent=4096,this.length=0,this._pbf=p,this._keys=[],this._values=[],this._features=[],p.readFields(u,this,_),this.length=this._features.length}function u(p,_,m){p===15?_.version=m.readVarint():p===1?_.name=m.readString():p===5?_.extent=m.readVarint():p===2?_._features.push(m.pos):p===3?_._keys.push(m.readString()):p===4&&_._values.push(function(w){for(var j=null,k=w.readVarint()+w.pos;w.pos<k;){var H=w.readVarint()>>3;j=H===1?w.readString():H===2?w.readFloat():H===3?w.readDouble():H===4?w.readVarint64():H===5?w.readVarint():H===6?w.readSVarint():H===7?w.readBoolean():null}return j}(m))}return wb=o,o.prototype.feature=function(p){if(p<0||p>=this._features.length)throw new Error("feature index out of bounds");this._pbf.pos=this._features[p];var _=this._pbf.readVarint()+this._pbf.pos;return new h(this._pbf,_,this.extent,this._keys,this._values)},wb}function Sm(){return kE||(kE=1,fd.VectorTile=function(){if(PE)return bb;PE=1;var h=ME();function o(u,p,_){if(u===3){var m=new h(_,_.readVarint()+_.pos);m.length&&(p[m.name]=m)}}return bb=function(u,p){this.layers=u.readFields(o,{},p)},bb}(),fd.VectorTileFeature=LE(),fd.VectorTileLayer=ME()),fd}var ts=Sm();class Fg extends Dt{constructor(o,u,p){super(o,u),this.z=p}}class Lu extends Fg{constructor(o,u,p,_){super(o,u,p),this.w=_}}function Pa(h,o,u,p){const _=[],m=p===0?(w,j,k,H,E,M)=>{w.push(new Dt(M,k+(M-j)/(H-j)*(E-k)))}:(w,j,k,H,E,M)=>{w.push(new Dt(j+(M-k)/(E-k)*(H-j),M))};for(const w of h){const j=[];for(const k of w){if(k.length<=2)continue;const H=[];for(let O=0;O<k.length-1;O++){const P=k[O].x,R=k[O].y,$=k[O+1].x,te=k[O+1].y,ie=p===0?P:R,de=p===0?$:te;ie<o?de>o&&m(H,P,R,$,te,o):ie>u?de<u&&m(H,P,R,$,te,u):H.push(k[O]),de<o&&ie>=o&&m(H,P,R,$,te,o),de>u&&ie<=u&&m(H,P,R,$,te,u)}let E=k[k.length-1];const M=p===0?E.x:E.y;M>=o&&M<=u&&H.push(E),H.length&&(E=H[H.length-1],H[0].x===E.x&&H[0].y===E.y||H.push(H[0]),j.push(H))}j.length&&_.push(j)}return _}function NE(h,o,u,p){const _=u==="x"?"y":"x",m=(p-h[u])/(o[u]-h[u]);h[_]=h[_]+(o[_]-h[_])*m,h[u]=p,h.hasOwnProperty("z")&&(h.z=Ur(h.z,o.z,m)),h.hasOwnProperty("w")&&(h.w=Ur(h.w,o.w,m))}function mA(h,o,u,p){const _=u,m=p;for(const w of["x","y"]){let j=h,k=o;j[w]>=k[w]&&(j=o,k=h),j[w]<_&&k[w]>_&&NE(j,k,w,_),j[w]<m&&k[w]>m&&NE(k,j,w,m)}}const __=Number.MAX_SAFE_INTEGER;function RE(h,o,u,p){return h.order<o||h.order===__||!(h.clipMask&u)||function(_,m){return m.length!==0&&m.find(w=>w===_)===void 0}(p,h.clipScope)}function w_(h,o){return h.x-o.x||h.y-o.y}function OE(h,o){return w_(h.min,o.min)===0&&w_(h.max,o.max)===0}function Cb(h,o){return!(h.min.x>o.max.x||h.max.x<o.min.x||h.min.y>o.max.y||h.max.y<o.min.y)}function Bv(h,o){if(h.length!==o.length)return!1;for(let u=0;u<h.length;u++)if(h[u].sourceId!==o[u].sourceId||!OE(h[u],o[u])||h[u].order!==o[u].order||h[u].clipMask!==o[u].clipMask||!hn(h[u].clipScope,o[u].clipScope))return!1;return!0}function DE(h,o,u){const p=1/Wn,_=1/(1<<u.canonical.z),m=(o.x*p+u.canonical.x)*_+u.wrap,w=(o.y*p+u.canonical.y)*_;return{min:new Dt((h.x*p+u.canonical.x)*_+u.wrap,(h.y*p+u.canonical.y)*_),max:new Dt(m,w)}}function gA(h,o,u){const p=1<<u.canonical.z,_=((o.x-u.wrap)*p-u.canonical.x)*Wn,m=(o.y*p-u.canonical.y)*Wn;return{min:new Dt(((h.x-u.wrap)*p-u.canonical.x)*Wn,(h.y*p-u.canonical.y)*Wn),max:new Dt(_,m)}}function Sb(h,o,u,p,_,m,w){const j=h.indices,k=h.vertices,H=[];for(let E=p;E<p+_;E+=3){const M=o[u[E+0]+m],O=o[u[E+1]+m],P=o[u[E+2]+m],R=Math.min(M.x,O.x,P.x),$=Math.max(M.x,O.x,P.x),te=Math.min(M.y,O.y,P.y),ie=Math.max(M.y,O.y,P.y);H.length=0,h.grid.query(new Dt(R,te),new Dt($,ie),H);for(let de=0;de<H.length;de++){const fe=H[de];if(Rt(k[j[3*fe+0]],k[j[3*fe+1]],k[j[3*fe+2]],M,O,P,w))return!0}}return!1}function Ev(h,o,u,p){if(!h||!u)return!1;let _=h.vertices;if(!o.canonical.equals(p.canonical)||o.wrap!==p.wrap){if(u.vertices.length<h.vertices.length)return Ev(u,p,h,o);const m=o.canonical,w=p.canonical,j=Math.pow(2,w.z-m.z);_=h.vertices.map(k=>new Dt((k.x+m.x*Wn)*j-w.x*Wn,(k.y+m.y*Wn)*j-w.y*Wn))}return Sb(u,_,h.indices,0,h.indices.length,0,0)}function ka(h,o,u,p){const _=Math.pow(2,p.z-u.z);return new Dt((h+u.x*Wn)*_-p.x*Wn,(o+u.y*Wn)*_-p.y*Wn)}function Ya(h,o){const u=[];o.grid.queryPoint(h,u);const p=o.indices,_=o.vertices;for(let m=0;m<u.length;m++){const w=u[m];if(Bt([_[p[3*w+0]],_[p[3*w+1]],_[p[3*w+2]]],h))return!0}return!1}const b_=[new Dt(0,0),new Dt(Wn,0),new Dt(Wn,Wn),new Dt(0,Wn)];function UE(h,o){const u=[];let p=[];if(!o||h.length<2)return[h];if(h.length===2)return tn(h[0],h[1],b_)?[h]:[];for(let _=0;_<h.length+2;_++){const m=h[_%h.length],w=h[(_+1)%h.length],j=tn(_===0?h[h.length-1]:h[(_-1)%h.length],m,b_),k=tn(m,w,b_),H=j||k;H&&p.push(m),H&&k||p.length>0&&(p.length>1&&u.push(p),p=[])}return p.length>1&&u.push(p),u}const Bb=ts.VectorTileFeature.types,Ek=["fill-extrusion-base","fill-extrusion-height","fill-extrusion-color","fill-extrusion-pattern","fill-extrusion-flood-light-wall-radius","fill-extrusion-line-width","fill-extrusion-emissive-strength"],Tk=["fill-extrusion-flood-light-ground-radius"],Ik=Math.pow(2,13),jk=Math.pow(2,15)-1,Eb=new Dt(0,1),Uh=2147483648;function Pg(h,o,u,p,_,m,w,j){h.emplaceBack((o<<1)+w,(u<<1)+m,(Math.floor(p*Ik)<<1)+_,Math.round(j))}function Tv(h,o,u){h.emplaceBack(o.x*Wn,o.y*Wn,u?1:0)}function Iv(h,o,u,p,_,m){h.emplaceBack(o.x,o.y,(u.x<<1)+p,(u.y<<1)+_,m)}function Bm(h,o,u){h.emplaceBack(o.x,o.y,o.z,u[0]*16384,u[1]*16384,u[2]*16384)}class pd{constructor(){this.vertexOffset=0,this.vertexCount=0,this.indexOffset=0,this.indexCount=0}}class kg{constructor(){this.centroidXY=new Dt(0,0),this.vertexArrayOffset=0,this.vertexCount=0,this.groundVertexArrayOffset=0,this.groundVertexCount=0,this.flags=0,this.footprintSegIdx=-1,this.footprintSegLen=0,this.polygonSegIdx=-1,this.polygonSegLen=0,this.min=new Dt(Number.MAX_VALUE,Number.MAX_VALUE),this.max=new Dt(-Number.MAX_VALUE,-Number.MAX_VALUE),this.height=0}span(){return new Dt(this.max.x-this.min.x,this.max.y-this.min.y)}}class zE{constructor(){this.acc=new Dt(0,0),this.accCount=0,this.centroidDataIndex=0}startRing(o,u){o.min.x===Number.MAX_VALUE&&(o.min.x=o.max.x=u.x,o.min.y=o.max.y=u.y)}appendEdge(o,u,p){this.accCount++,this.acc._add(u);let _=!!this.borders;u.x<o.min.x?(o.min.x=u.x,_=!0):u.x>o.max.x&&(o.max.x=u.x,_=!0),u.y<o.min.y?(o.min.y=u.y,_=!0):u.y>o.max.y&&(o.max.y=u.y,_=!0),((u.x===0||u.x===Wn)&&u.x===p.x)!=((u.y===0||u.y===Wn)&&u.y===p.y)&&this.processBorderOverlap(u,p),_&&this.checkBorderIntersection(u,p)}checkBorderIntersection(o,u){u.x<0!=o.x<0&&this.addBorderIntersection(0,Ur(u.y,o.y,(0-u.x)/(o.x-u.x))),u.x>Wn!=o.x>Wn&&this.addBorderIntersection(1,Ur(u.y,o.y,(Wn-u.x)/(o.x-u.x))),u.y<0!=o.y<0&&this.addBorderIntersection(2,Ur(u.x,o.x,(0-u.y)/(o.y-u.y))),u.y>Wn!=o.y>Wn&&this.addBorderIntersection(3,Ur(u.x,o.x,(Wn-u.y)/(o.y-u.y)))}addBorderIntersection(o,u){this.borders||(this.borders=[[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE],[Number.MAX_VALUE,-Number.MAX_VALUE]]);const p=this.borders[o];u<p[0]&&(p[0]=u),u>p[1]&&(p[1]=u)}processBorderOverlap(o,u){if(o.x===u.x){if(o.y===u.y)return;const p=o.x===0?0:1;this.addBorderIntersection(p,u.y),this.addBorderIntersection(p,o.y)}else{const p=o.y===0?2:3;this.addBorderIntersection(p,u.x),this.addBorderIntersection(p,o.x)}}centroid(){return this.accCount===0?new Dt(0,0):new Dt(Math.floor(Math.max(0,this.acc.x)/this.accCount),Math.floor(Math.max(0,this.acc.y)/this.accCount))}intersectsCount(){return this.borders?this.borders.reduce((o,u)=>o+ +(u[0]!==Number.MAX_VALUE),0):0}}function QE(h,o){const u=h.add(o)._unit(),p=Gt(h.x*u.x+h.y*u.y,-1,1);var _,m,w;return w=Math.acos(p),Math.min(4,Math.max(-4,Math.tan(w)))/4*jk*((_=h).x*(m=o).y-_.y*m.x<0?-1:1)}const Fk=[h=>h.x<0,h=>h.x>Wn,h=>h.y<0,h=>h.y>Wn];function Pk(h,o,u,p){const _=[4];if(p===0)return _;u._mult(p);const m=h.sub(u),w=o.sub(u),j=[h,o,m,w];for(let k=0;k<4;k++)for(const H of j)if(Fk[k](H)){_.push(k);break}return _}class HE{constructor(o){this.vertexArray=new jc,this.indexArray=new $a,this.programConfigurations=new Ff(o.layers,{zoom:o.zoom,lut:o.lut},u=>Tk.includes(u)),this._segments=new po,this.hiddenByLandmarkVertexArray=new $c,this._segmentToGroundQuads={},this._segmentToGroundQuads[0]=[],this._segmentToRegionTriCounts={},this._segmentToRegionTriCounts[0]=[0,0,0,0,0],this.regionSegments={},this.regionSegments[4]=new po}getDefaultSegment(){return this.regionSegments[4]}hasData(){return this.vertexArray.length!==0}addData(o,u,p,_=!1){const m=o.length;if(m>2){let w=Math.max(0,this._segments.get().length-1);const j=this._segments._prepareSegment(4*m,this.vertexArray.length,2*this._segmentToGroundQuads[w].length);let k;w!==this._segments.get().length-1&&(w++,this._segmentToGroundQuads[w]=[],this._segmentToRegionTriCounts[w]=[0,0,0,0,0]);{const H=o[0],E=o[1];k=QE(H.sub(o[m-1])._perp()._unit(),E.sub(H)._perp()._unit())}for(let H=0;H<m;H++){const E=H===m-1?0:H+1,M=o[H],O=o[E],P=o[E===m-1?0:E+1],R=O.sub(M)._perp()._unit(),$=QE(R,P.sub(O)._perp()._unit()),te=k,ie=$;if(Ad(M,O,u)||_&&Ib(M,u)&&Ib(O,u)){k=$;continue}const de=j.vertexLength;Iv(this.vertexArray,M,O,1,1,te),Iv(this.vertexArray,M,O,1,0,te),Iv(this.vertexArray,M,O,0,1,ie),Iv(this.vertexArray,M,O,0,0,ie),j.vertexLength+=4;const fe=Pk(M,O,R,p);for(const ae of fe)this._segmentToGroundQuads[w].push({id:de,region:ae}),this._segmentToRegionTriCounts[w][ae]+=2,j.primitiveLength+=2;k=$}}}prepareBorderSegments(){if(!this.hasData())return;const o=this._segments.get(),u=o.length;for(let p=0;p<u;p++)this._segmentToGroundQuads[p].sort((_,m)=>_.region-m.region);for(let p=0;p<u;p++){const _=this._segmentToGroundQuads[p],m=o[p],w=this._segmentToRegionTriCounts[p];w.reduce((k,H)=>k+H,0);let j=0;for(let k=0;k<=4;k++){const H=w[k];if(H!==0){let E=this.regionSegments[k];E||(E=this.regionSegments[k]=new po);const M={vertexOffset:m.vertexOffset,primitiveOffset:m.primitiveOffset+j,vertexLength:m.vertexLength,primitiveLength:H};E.get().push(M)}j+=H}for(let k=0;k<_.length;k++){const H=_[k].id;this.indexArray.emplaceBack(H,H+1,H+3),this.indexArray.emplaceBack(H,H+3,H+2)}}this._segmentToGroundQuads=null,this._segmentToRegionTriCounts=null,this._segments.destroy(),this._segments=null}addPaintPropertiesData(o,u,p,_,m,w){this.hasData()&&this.programConfigurations.populatePaintArrays(this.vertexArray.length,o,u,p,_,m,w)}upload(o){this.hasData()&&(this.vertexBuffer=o.createVertexBuffer(this.vertexArray,IE.members),this.indexBuffer=o.createIndexBuffer(this.indexArray))}uploadPaintProperties(o){this.hasData()&&this.programConfigurations.upload(o)}update(o,u,p,_,m,w,j){this.hasData()&&this.programConfigurations.updatePaintArrays(o,u,p,_,m,w,j)}updateHiddenByLandmark(o){if(!this.hasData())return;const u=o.groundVertexCount+o.groundVertexArrayOffset;if(o.groundVertexCount===0)return;const p=o.flags&Uh?1:0;for(let _=o.groundVertexArrayOffset;_<u;++_)this.hiddenByLandmarkVertexArray.emplace(_,p);this._needsHiddenByLandmarkUpdate=!0}uploadHiddenByLandmark(o){this.hasData()&&this._needsHiddenByLandmarkUpdate&&(!this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexArray.length>0?this.hiddenByLandmarkVertexBuffer=o.createVertexBuffer(this.hiddenByLandmarkVertexArray,Ck.members,!0):this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.updateData(this.hiddenByLandmarkVertexArray),this._needsHiddenByLandmarkUpdate=!1)}destroy(){if(this.vertexBuffer){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.hiddenByLandmarkVertexBuffer&&this.hiddenByLandmarkVertexBuffer.destroy(),this._segments&&this._segments.destroy(),this.programConfigurations.destroy();for(let o=0;o<=4;o++){const u=this.regionSegments[o];u&&u.destroy()}}}}class jv{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.hasPattern=!1,this.edgeRadius=0,this.projection=o.projection,this.activeReplacements=[],this.replacementUpdateTime=0,this.centroidData=[],this.footprintIndices=new $a,this.footprintVertices=new Iu,this.footprintSegments=[],this.layoutVertexArray=new eh,this.centroidVertexArray=new hv,this.wallVertexArray=new rh,this.indexArray=new $a,this.programConfigurations=new Ff(o.layers,{zoom:o.zoom,lut:o.lut},u=>Ek.includes(u)),this.segments=new po,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.groundEffect=new HE(o),this.maxHeight=0,this.partLookup={},this.triangleSubSegments=[],this.polygonSegments=[]}updateFootprints(o,u){}populate(o,u,p,_){this.features=[],this.hasPattern=y_("fill-extrusion",this.layers,u),this.featuresOnBorder=[],this.borderFeatureIndices=[[],[],[],[]],this.borderDoneWithNeighborZ=[-1,-1,-1,-1],this.selfDEMTileTimestamp=Number.MAX_VALUE,this.borderDEMTileTimestamp=[Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE],this.tileToMeter=x(p),this.edgeRadius=this.layers[0].layout.get("fill-extrusion-edge-radius")/this.tileToMeter,this.wallMode=this.layers[0].paint.get("fill-extrusion-line-width").constantOr(1)!==0;for(const{feature:m,id:w,index:j,sourceLayerIndex:k}of o){const H=this.layers[0]._featureFilter.needGeometry,E=ue(m,H);if(!this.layers[0]._featureFilter.filter(new qr(this.zoom),E,p))continue;const M={id:w,sourceLayerIndex:k,index:j,geometry:H?E.geometry:se(m,p,_),properties:m.properties,type:m.type,patterns:{}},O=this.layoutVertexArray.length,P=Bb[M.type]==="Polygon";if(this.hasPattern)this.features.push(v_("fill-extrusion",this.layers,M,this.zoom,u));else if(this.wallMode)for(const R of M.geometry)for(const $ of UE(R,P))this.addFeature(M,[$],j,p,{},u.availableImages,_,u.brightness);else this.addFeature(M,M.geometry,j,p,{},u.availableImages,_,u.brightness);u.featureIndex.insert(m,M.geometry,j,k,this.index,O)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles(),this.groundEffect.prepareBorderSegments(),this.polygonSegments.length=0}addFeatures(o,u,p,_,m,w){for(const j of this.features){const k=Bb[j.type]==="Polygon",{geometry:H}=j;if(this.wallMode)for(const E of H)for(const M of UE(E,k))this.addFeature(j,[M],j.index,u,p,_,m,w);else this.addFeature(j,H,j.index,u,p,_,m,w)}this.sortBorders(),this.projection.name==="mercator"&&this.splitToSubtiles()}update(o,u,p,_,m,w,j){this.programConfigurations.updatePaintArrays(o,u,m,p,_,w,j),this.groundEffect.update(o,u,m,p,_,w,j)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload||this.groundEffect.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Bk),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.wallVertexBuffer=o.createVertexBuffer(this.wallVertexArray,bk.members),this.layoutVertexExtArray&&(this.layoutVertexExtBuffer=o.createVertexBuffer(this.layoutVertexExtArray,Sk.members,!0)),this.groundEffect.upload(o)),this.groundEffect.uploadPaintProperties(o),this.programConfigurations.upload(o),this.uploaded=!0}uploadCentroid(o){this.groundEffect.uploadHiddenByLandmark(o),this.needsCentroidUpdate&&(!this.centroidVertexBuffer&&this.centroidVertexArray.length>0?this.centroidVertexBuffer=o.createVertexBuffer(this.centroidVertexArray,wk.members,!0):this.centroidVertexBuffer&&this.centroidVertexBuffer.updateData(this.centroidVertexArray),this.needsCentroidUpdate=!1)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.centroidVertexBuffer&&this.centroidVertexBuffer.destroy(),this.layoutVertexExtBuffer&&this.layoutVertexExtBuffer.destroy(),this.groundEffect.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}addFeature(o,u,p,_,m,w,j,k){const H=this.layers[0].paint.get("fill-extrusion-flood-light-ground-radius").evaluate(o,{})/this.tileToMeter,E=[new Dt(0,0),new Dt(Wn,Wn)],M=j.projection,O=M.name==="globe",P=this.wallMode||Bb[o.type]==="Polygon",R=new zE;R.centroidDataIndex=this.centroidData.length;const $=new kg,te=this.layers[0].paint.get("fill-extrusion-base").evaluate(o,{},_)<=0,ie=this.layers[0].paint.get("fill-extrusion-height").evaluate(o,{},_);let de;if($.height=ie,$.vertexArrayOffset=this.layoutVertexArray.length,$.groundVertexArrayOffset=this.groundEffect.vertexArray.length,O&&!this.layoutVertexExtArray&&(this.layoutVertexExtArray=new Bf),this.wallMode){if(O)return void Vn("Non zero fill-extrusion-line-width is not yet supported on globe.");if(u.length!==1)return;de=function(We){const At=We[0].x===We[We.length-1].x&&We[0].y===We[We.length-1].y;(function(ir){let Bn=0;const Br=ir.length;for(let Zn=0;Zn<Br;Zn++)Bn+=(ir[(Zn+1)%Br].x-ir[Zn].x)*(ir[(Zn+1)%Br].y+ir[Zn].y);return Bn>=0})(We)||(We=We.reverse());const yt={geometry:[],joinNormals:[],indices:[]},bt=[],_t=[],Et=[];let Ut=We.length;for(;Ut>=2&&We[Ut-1].equals(We[Ut-2]);)Ut--;if(Ut<(At?3:2))return yt;let Wt,Pt,mn,Nn,vn,qn=0;for(;qn<Ut-1&&We[qn].equals(We[qn+1]);)qn++;At&&(Wt=We[Ut-2],vn=We[qn].sub(Wt)._unit()._perp());for(let ir=qn;ir<Ut;ir++){if(mn=ir===Ut-1?At?We[qn+1]:void 0:We[ir+1],mn&&We[ir].equals(mn))continue;vn&&(Nn=vn),Wt&&(Pt=Wt),Wt=We[ir],vn=mn?mn.sub(Wt)._unit()._perp():Nn,Nn=Nn||vn;let Bn=Nn.add(vn);Bn.x===0&&Bn.y===0||Bn._unit();const Br=Bn.x*vn.x+Bn.y*vn.y,Zn=Br!==0?1/Br:1/0,vr=Nn.x*vn.y-Nn.y*vn.x>0;let Qr="miter";const fi=2;Qr==="miter"&&Zn>fi&&(Qr="bevel"),Qr==="bevel"&&(Zn>100&&(Qr="flipbevel"),Zn<fi&&(Qr="miter"));const xi=(Ei,_i,Mi,qs)=>{const Fs=new Dt(Ei.x,Ei.y),ni=new Dt(Ei.x,Ei.y);Fs.x+=_i.x*qs,Fs.y+=_i.y*qs,ni.x-=_i.x*Math.max(Mi,1),ni.y-=_i.y*Math.max(Mi,1),Et.push(_i),bt.push(Fs),_t.push(ni)};if(Qr==="miter")Bn._mult(Zn),xi(Wt,Bn,0,0);else if(Qr==="flipbevel")Bn=vn.mult(-1),xi(Wt,Bn,0,0),xi(Wt,Bn.mult(-1),0,0);else{const Ei=-Math.sqrt(Zn*Zn-1),_i=vr?Ei:0,Mi=vr?0:Ei;Pt&&xi(Wt,Nn,_i,Mi),mn&&xi(Wt,vn,_i,Mi)}}yt.geometry=[...bt,..._t.reverse(),bt[0]],yt.joinNormals=[...Et,...Et.reverse(),Et[Et.length-1]];const Kn=yt.geometry.length-1;for(let ir=0;ir<Kn/2;ir++)if(ir+1<Kn/2){let Bn=ir,Br=ir+1,Zn=Kn-1-ir,vr=Kn-2-ir;Bn=Bn===0?Kn-1:Bn-1,Br=Br===0?Kn-1:Br-1,Zn=Zn===0?Kn-1:Zn-1,vr=vr===0?Kn-1:vr-1,yt.indices.push(Zn),yt.indices.push(Br),yt.indices.push(Bn),yt.indices.push(Zn),yt.indices.push(vr),yt.indices.push(Br)}return yt}(u[0]),u=[de.geometry]}const fe=(We,At)=>We<(At.length-1)/2||We===At.length-1,ae=this.wallMode?[u]:Cv(u,500);for(let We=ae.length-1;We>=0;We--){const At=ae[We];(At.length===0||(ge=At[0]).every(nt=>nt.x<=0)||ge.every(nt=>nt.x>=Wn)||ge.every(nt=>nt.y<=0)||ge.every(nt=>nt.y>=Wn))&&ae.splice(We,1)}var ge;let Be;if(O)Be=jb(ae,E,_);else{Be=[];for(const We of ae)Be.push({polygon:We,bounds:E})}const ke=P?this.edgeRadius:0,Ye=ke>0&&this.zoom<17,Xe=(We,At)=>{if(We.length===0)return!1;const nt=We[We.length-1];return At.x===nt.x&&At.y===nt.y};for(const{polygon:We,bounds:At}of Be){let nt=0,yt=0;for(const Ut of We)P&&!Ut[0].equals(Ut[Ut.length-1])&&Ut.push(Ut[0]),yt+=P?Ut.length-1:Ut.length;const bt=this.segments.prepareSegment((P?5:4)*yt,this.layoutVertexArray,this.indexArray);$.footprintSegIdx<0&&($.footprintSegIdx=this.footprintSegments.length),$.polygonSegIdx<0&&($.polygonSegIdx=this.polygonSegments.length);const _t={triangleArrayOffset:this.indexArray.length,triangleCount:0,triangleSegIdx:this.segments.segments.length-1},Et=new pd;if(Et.vertexOffset=this.footprintVertices.length,Et.indexOffset=3*this.footprintIndices.length,Et.ringIndices=[],P){const Ut=[],Wt=[];nt=bt.vertexLength;for(let mn=0;mn<We.length;mn++){const Nn=We[mn];Nn.length&&mn!==0&&Wt.push(Ut.length/2);const vn=[];let qn,Kn;qn=Nn[1].sub(Nn[0])._perp()._unit(),Et.ringIndices.push(Nn.length-1);for(let ir=1;ir<Nn.length;ir++){const Bn=Nn[ir],Br=Nn[ir===Nn.length-1?1:ir+1],Zn=Bn.clone();if(ke){Kn=Br.sub(Bn)._perp()._unit();const vr=qn.add(Kn)._unit(),Qr=ke*Math.min(4,1/(qn.x*vr.x+qn.y*vr.y));Zn.x+=Qr*vr.x,Zn.y+=Qr*vr.y,Zn.x=Math.round(Zn.x),Zn.y=Math.round(Zn.y),qn=Kn}if(!te||ke!==0&&!Ye||Xe(vn,Zn)||vn.push(Zn),Pg(this.layoutVertexArray,Zn.x,Zn.y,0,0,1,1,0),this.wallMode){const vr=fe(ir,Nn);Tv(this.wallVertexArray,de.joinNormals[ir],!vr)}bt.vertexLength++,this.footprintVertices.emplaceBack(Bn.x,Bn.y),Ut.push(Bn.x,Bn.y),O&&Bm(this.layoutVertexExtArray,M.projectTilePoint(Zn.x,Zn.y,_),M.upVector(_,Zn.x,Zn.y))}te&&(ke===0||Ye)&&(vn.length!==0&&Xe(vn,vn[0])&&vn.pop(),this.groundEffect.addData(vn,At,H))}const Pt=this.wallMode?de.indices:vv(Ut,Wt);for(let mn=0;mn<Pt.length;mn+=3)this.footprintIndices.emplaceBack(Et.vertexOffset+Pt[mn+0],Et.vertexOffset+Pt[mn+1],Et.vertexOffset+Pt[mn+2]),this.indexArray.emplaceBack(nt+Pt[mn],nt+Pt[mn+2],nt+Pt[mn+1]),bt.primitiveLength++;Et.indexCount+=Pt.length,Et.vertexCount+=this.footprintVertices.length-Et.vertexOffset}for(let Ut=0;Ut<We.length;Ut++){const Wt=We[Ut];R.startRing($,Wt[0]);let Pt=Wt.length>4&&VE(Wt[Wt.length-2],Wt[0],Wt[1]),mn=ke?gs(Wt[Wt.length-2],Wt[0],Wt[1],ke):0;const Nn=[];let vn,qn,Kn;qn=Wt[1].sub(Wt[0])._perp()._unit();let ir=!0;for(let Bn=1,Br=0;Bn<Wt.length;Bn++){let Zn=Wt[Bn-1],vr=Wt[Bn];const Qr=Wt[Bn===Wt.length-1?1:Bn+1];if(R.appendEdge($,vr,Zn),Ad(vr,Zn,At)){ke&&(qn=Qr.sub(vr)._perp()._unit(),ir=!ir);continue}const fi=vr.sub(Zn)._perp(),xi=fi.x/(Math.abs(fi.x)+Math.abs(fi.y)),Ei=fi.y>0?1:0,_i=Zn.dist(vr);if(Br+_i>32768&&(Br=0),ke){Kn=Qr.sub(vr)._perp()._unit();let ni=Tb(Zn,vr,Qr,Ep(qn,Kn),ke);isNaN(ni)&&(ni=0);const Ps=vr.sub(Zn)._unit();Zn=Zn.add(Ps.mult(mn))._round(),vr=vr.add(Ps.mult(-ni))._round(),mn=ni,qn=Kn,te&&this.zoom>=17&&(Xe(Nn,Zn)||Nn.push(Zn),Xe(Nn,vr)||Nn.push(vr))}const Mi=bt.vertexLength,qs=Wt.length>4&&VE(Zn,vr,Qr);let Fs=jo(Br,Pt,ir);if(Pg(this.layoutVertexArray,Zn.x,Zn.y,xi,Ei,0,0,Fs),Pg(this.layoutVertexArray,Zn.x,Zn.y,xi,Ei,0,1,Fs),this.wallMode){const ni=fe(Bn-1,Wt),Ps=de.joinNormals[Bn-1];Tv(this.wallVertexArray,Ps,ni),Tv(this.wallVertexArray,Ps,ni)}if(Br+=_i,Fs=jo(Br,qs,!ir),Pt=qs,Pg(this.layoutVertexArray,vr.x,vr.y,xi,Ei,0,0,Fs),Pg(this.layoutVertexArray,vr.x,vr.y,xi,Ei,0,1,Fs),this.wallMode){const ni=fe(Bn,Wt),Ps=de.joinNormals[Bn];Tv(this.wallVertexArray,Ps,ni),Tv(this.wallVertexArray,Ps,ni)}if(bt.vertexLength+=4,this.indexArray.emplaceBack(Mi+0,Mi+1,Mi+2),this.indexArray.emplaceBack(Mi+1,Mi+3,Mi+2),bt.primitiveLength+=2,ke){const ni=nt+(Bn===1?Wt.length-2:Bn-2),Ps=Bn===1?nt:ni+1;if(this.indexArray.emplaceBack(Mi+1,ni,Mi+3),this.indexArray.emplaceBack(ni,Ps,Mi+3),bt.primitiveLength+=2,vn===void 0&&(vn=Mi),!Ad(Qr,Wt[Bn],At)){const ws=Bn===Wt.length-1?vn:bt.vertexLength;this.indexArray.emplaceBack(Mi+2,Mi+3,ws),this.indexArray.emplaceBack(Mi+3,ws+1,ws),this.indexArray.emplaceBack(Mi+3,Ps,ws+1),bt.primitiveLength+=3}ir=!ir}if(O){const ni=this.layoutVertexExtArray,Ps=M.projectTilePoint(Zn.x,Zn.y,_),ws=M.projectTilePoint(vr.x,vr.y,_),Zs=M.upVector(_,Zn.x,Zn.y),el=M.upVector(_,vr.x,vr.y);Bm(ni,Ps,Zs),Bm(ni,Ps,Zs),Bm(ni,ws,el),Bm(ni,ws,el)}}P&&(nt+=Wt.length-1),te&&ke&&this.zoom>=17&&(Nn.length!==0&&Xe(Nn,Nn[0])&&Nn.pop(),this.groundEffect.addData(Nn,At,H,ke>0))}this.footprintSegments.push(Et),_t.triangleCount=this.indexArray.length-_t.triangleArrayOffset,this.polygonSegments.push(_t),++$.footprintSegLen,++$.polygonSegLen}if($.vertexCount=this.layoutVertexArray.length-$.vertexArrayOffset,$.groundVertexCount=this.groundEffect.vertexArray.length-$.groundVertexArrayOffset,$.vertexCount!==0){if($.centroidXY=R.borders?Eb:this.encodeCentroid(R,$),this.centroidData.push($),R.borders){this.featuresOnBorder.push(R);const We=this.featuresOnBorder.length-1;for(let At=0;At<R.borders.length;At++)R.borders[At][0]!==Number.MAX_VALUE&&this.borderFeatureIndices[At].push(We)}this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,m,w,_,k),this.groundEffect.addPaintPropertiesData(o,p,m,w,_,k),this.maxHeight=Math.max(this.maxHeight,ie)}}sortBorders(){for(let o=0;o<this.borderFeatureIndices.length;o++)this.borderFeatureIndices[o].sort((u,p)=>this.featuresOnBorder[u].borders[o][0]-this.featuresOnBorder[p].borders[o][0])}splitToSubtiles(){const o=[];for(let j=0;j<this.centroidData.length;j++){const k=this.centroidData[j],H=+(k.min.y+k.max.y>Wn),E=2*H+(+(k.min.x+k.max.x>Wn)^H);for(let M=0;M<k.polygonSegLen;M++){const O=k.polygonSegIdx+M;o.push({centroidIdx:j,subtile:E,polygonSegmentIdx:O,triangleSegmentIdx:this.polygonSegments[O].triangleSegIdx})}}const u=new $a;o.sort((j,k)=>j.triangleSegmentIdx===k.triangleSegmentIdx?j.subtile-k.subtile:j.triangleSegmentIdx-k.triangleSegmentIdx);let p=0,_=0,m=0;for(const j of o){if(j.triangleSegmentIdx!==p)break;m++}const w=o.length;for(;_!==o.length;){p=o[_].triangleSegmentIdx;let j=0,k=_,H=_;for(let E=k;E<m&&o[E].subtile===j;E++)H++;for(;k!==m;){const E=o[k];j=E.subtile;const M=this.centroidData[E.centroidIdx].min.clone(),O=this.centroidData[E.centroidIdx].max.clone(),P={vertexOffset:this.segments.segments[p].vertexOffset,primitiveOffset:u.length,vertexLength:this.segments.segments[p].vertexLength,primitiveLength:0,sortKey:void 0,vaos:{}};for(let R=k;R<H;R++){const $=o[R],te=this.polygonSegments[$.polygonSegmentIdx],ie=this.centroidData[$.centroidIdx].min,de=this.centroidData[$.centroidIdx].max,fe=this.indexArray.uint16;for(let ae=te.triangleArrayOffset;ae<te.triangleArrayOffset+te.triangleCount;ae++)u.emplaceBack(fe[3*ae],fe[3*ae+1],fe[3*ae+2]);P.primitiveLength+=te.triangleCount,M.x=Math.min(M.x,ie.x),M.y=Math.min(M.y,ie.y),O.x=Math.max(O.x,de.x),O.y=Math.max(O.y,de.y)}P.primitiveLength>0&&this.triangleSubSegments.push({segment:P,min:M,max:O}),k=H;for(let R=k;R<m&&o[R].subtile===o[k].subtile;R++)H++}_=m;for(let E=_;E<w&&o[E].triangleSegmentIdx===o[_].triangleSegmentIdx;E++)m++}u._trim(),this.indexArray=u}getVisibleSegments(o,u,p){const _=new po;if(this.wallMode){for(const $ of this.triangleSubSegments)_.segments.push($.segment);return _}let m=0,w=0;const j=1<<o.canonical.z;if(u){const $=u.getMinMaxForTile(o);$&&(m=$.min,w=$.max)}w+=this.maxHeight;const k=o.toUnwrapped();let H;const E=[k.canonical.x/j+k.wrap,k.canonical.y/j],M=[(k.canonical.x+1)/j+k.wrap,(k.canonical.y+1)/j],O=($,te,ie)=>[$[0]*(1-ie[0])+te[0]*ie[0],$[1]*(1-ie[1])+te[1]*ie[1]],P=[],R=[];for(const $ of this.triangleSubSegments){P[0]=$.min.x/Wn,P[1]=$.min.y/Wn,R[0]=$.max.x/Wn,R[1]=$.max.y/Wn;const te=O(E,M,P),ie=O(E,M,R);if(new $r([te[0],te[1],m],[ie[0],ie[1],w]).intersectsPrecise(p)===0){H&&(_.segments.push(H),H=void 0);continue}const de=$.segment;H&&H.vertexOffset!==de.vertexOffset&&(_.segments.push(H),H=void 0),H?(H.vertexLength+=de.vertexLength,H.primitiveLength+=de.primitiveLength):H={vertexOffset:de.vertexOffset,primitiveLength:de.primitiveLength,vertexLength:de.vertexLength,primitiveOffset:de.primitiveOffset,sortKey:void 0,vaos:{}}}return H&&_.segments.push(H),_}encodeCentroid(o,u){const p=o.centroid(),_=u.span(),m=Math.min(7,Math.round(_.x*this.tileToMeter/10)),w=Math.min(7,Math.round(_.y*this.tileToMeter/10));return new Dt(Gt(p.x,1,Wn-1)<<3|m,Gt(p.y,1,Wn-1)<<3|w)}encodeBorderCentroid(o){if(!o.borders)return new Dt(0,0);const u=o.borders,p=Number.MAX_VALUE;if(u[0][0]!==p||u[1][0]!==p){const _=u[0][0]!==p?0:1;return new Dt(6|(u[0][0]!==p?0:65528),(u[_][0]+u[_][1])/2<<3|6)}{const _=u[2][0]!==p?2:3;return new Dt((u[_][0]+u[_][1])/2<<3|6,6|(u[2][0]!==p?0:65528))}}showCentroid(o){const u=this.centroidData[o.centroidDataIndex];u.flags&=Uh,u.centroidXY.x=0,u.centroidXY.y=0,this.writeCentroidToBuffer(u)}writeCentroidToBuffer(o){this.groundEffect.updateHiddenByLandmark(o);const u=o.vertexArrayOffset,p=o.vertexCount+o.vertexArrayOffset,_=o.flags&Uh?Eb:o.centroidXY,m=this.centroidVertexArray.geta_centroid_pos0(u);if(this.centroidVertexArray.geta_centroid_pos1(u)!==_.y||m!==_.x){for(let w=u;w<p;++w)this.centroidVertexArray.emplace(w,_.x,_.y);this.needsCentroidUpdate=!0}}createCentroidsBuffer(){this.centroidVertexArray.resize(this.layoutVertexArray.length),this.groundEffect.hiddenByLandmarkVertexArray.resize(this.groundEffect.vertexArray.length);for(const o of this.centroidData)this.writeCentroidToBuffer(o)}updateReplacement(o,u,p){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const _=u.getReplacementRegionsForTile(o.toUnwrapped());if(Bv(this.activeReplacements,_))return;if(this.activeReplacements=_,this.centroidVertexArray.length===0)this.createCentroidsBuffer();else for(const w of this.centroidData)w.flags&=2147483647;const m=[];for(const w of this.activeReplacements){if(w.order<p)continue;const j=Math.max(1,Math.pow(2,w.footprintTileId.canonical.z-o.canonical.z));for(const k of this.centroidData)if(!(k.flags&Uh||w.min.x>k.max.x||k.min.x>w.max.x||w.min.y>k.max.y||k.min.y>w.max.y))for(let H=0;H<k.footprintSegLen;H++){const E=this.footprintSegments[k.footprintSegIdx+H];if(m.length=0,C_(this.footprintVertices,E.vertexOffset,E.vertexCount,w.footprintTileId.canonical,o.canonical,m),Sb(w.footprint,m,this.footprintIndices.uint16,E.indexOffset,E.indexCount,-E.vertexOffset,-j)){k.flags|=Uh;break}}}for(const w of this.centroidData)this.writeCentroidToBuffer(w);this.borderDoneWithNeighborZ=[-1,-1,-1,-1]}footprintContainsPoint(o,u,p){let _=!1;for(let m=0;m<p.footprintSegLen;m++){const w=this.footprintSegments[p.footprintSegIdx+m];let j=0;for(const k of w.ringIndices){for(let H=j,E=k+j-1;H<k+j;E=H++){const M=this.footprintVertices.int16[2*(H+w.vertexOffset)+0],O=this.footprintVertices.int16[2*(H+w.vertexOffset)+1],P=this.footprintVertices.int16[2*(E+w.vertexOffset)+1];O>u!=P>u&&o<(this.footprintVertices.int16[2*(E+w.vertexOffset)+0]-M)*(u-O)/(P-O)+M&&(_=!_)}j=k}}return _}getHeightAtTileCoord(o,u){let p=Number.NEGATIVE_INFINITY,_=!0;const m=4*(o+Wn)*Wn+(u+Wn);if(this.partLookup.hasOwnProperty(m)){const w=this.partLookup[m];return w?{height:w.height,hidden:!!(w.flags&Uh)}:void 0}for(const w of this.centroidData)o>w.max.x||w.min.x>o||u>w.max.y||w.min.y>u||this.footprintContainsPoint(o,u,w)&&w&&w.height>p&&(p=w.height,this.partLookup[m]=w,_=!!(w.flags&Uh));if(p!==Number.NEGATIVE_INFINITY)return{height:p,hidden:_};this.partLookup[m]=void 0}}function Ep(h,o){const u=h.add(o)._unit();return h.x*u.x+h.y*u.y}function gs(h,o,u,p){const _=o.sub(h)._perp()._unit(),m=u.sub(o)._perp()._unit();return Tb(h,o,u,Ep(_,m),p)}function Tb(h,o,u,p,_){const m=Math.sqrt(1-p*p);return Math.min(h.dist(o)/3,o.dist(u)/3,_*m/p)}function Ad(h,o,u){return h.x<u[0].x&&o.x<u[0].x||h.x>u[1].x&&o.x>u[1].x||h.y<u[0].y&&o.y<u[0].y||h.y>u[1].y&&o.y>u[1].y}function Ib(h,o){return h.x<o[0].x||h.x>o[1].x||h.y<o[0].y||h.y>o[1].y}function VE(h,o,u){if(h.x<0||h.x>=Wn||o.x<0||o.x>=Wn||u.x<0||u.x>=Wn)return!1;const p=u.sub(o),_=p.perp(),m=h.sub(o);return(p.x*m.x+p.y*m.y)/Math.sqrt((p.x*p.x+p.y*p.y)*(m.x*m.x+m.y*m.y))>-.866&&_.x*m.x+_.y*m.y<0}function jo(h,o,u){const p=o?2|h:-3&h;return u?1|p:-2&p}function $E(){const h=Math.PI/32,o=Math.tan(h),u=Ka;return u*Math.sqrt(1+2*o*o)-u}function jb(h,o,u){const p=1<<u.z,_=Ro(u.x/p),m=Ro((u.x+1)/p),w=Wa(u.y/p),j=Wa((u.y+1)/p);return function(k,H,E,M,O=0,P){const R=[];if(!k.length||!E||!M)return R;const $=(Be,ke)=>{for(const Ye of Be)R.push({polygon:Ye,bounds:ke})},te=Math.ceil(Math.log2(E)),ie=Math.ceil(Math.log2(M)),de=te-ie,fe=[];for(let Be=0;Be<Math.abs(de);Be++)fe.push(de>0?0:1);for(let Be=0;Be<Math.min(te,ie);Be++)fe.push(0),fe.push(1);let ae=k;if(ae=Pa(ae,H[0].y-O,H[1].y+O,1),ae=Pa(ae,H[0].x-O,H[1].x+O,0),!ae.length)return R;const ge=[];for(fe.length?ge.push({polygons:ae,bounds:H,depth:0}):$(ae,H);ge.length;){const Be=ge.pop(),ke=Be.depth,Ye=fe[ke],Xe=Be.bounds[0],We=Be.bounds[1],At=Ye===0?Xe.x:Xe.y,nt=Ye===0?We.x:We.y,yt=P?P(Ye,At,nt):.5*(At+nt),bt=Pa(Be.polygons,At-O,yt+O,Ye),_t=Pa(Be.polygons,yt-O,nt+O,Ye);if(bt.length){const Et=[Xe,new Dt(Ye===0?yt:We.x,Ye===1?yt:We.y)];fe.length>ke+1?ge.push({polygons:bt,bounds:Et,depth:ke+1}):$(bt,Et)}if(_t.length){const Et=[new Dt(Ye===0?yt:Xe.x,Ye===1?yt:Xe.y),We];fe.length>ke+1?ge.push({polygons:_t,bounds:Et,depth:ke+1}):$(_t,Et)}}return R}(h,o,Math.ceil((m-_)/11.25),Math.ceil((w-j)/11.25),1,(k,H,E)=>{if(k===0)return .5*(H+E);{const M=Wa((u.y+H/Wn)/p);return(Mf(.5*(Wa((u.y+E/Wn)/p)+M))*p-u.y)*Wn}})}function C_(h,o,u,p,_,m){const w=Math.pow(2,p.z-_.z);for(let j=0;j<u;j++){let k=h.int16[2*(j+o)+0],H=h.int16[2*(j+o)+1];k=(k+_.x*Wn)*w-p.x*Wn,H=(H+_.y*Wn)*w-p.y*Wn,m.push(new Dt(k,H))}}let GE,KE;function Fv(h,o){return h.x*o.x+h.y*o.y}function WE(h,o){if(h.length===1){let u=0;const p=o[u++];let _;for(;!_||p.equals(_);)if(_=o[u++],!_)return 1/0;for(;u<o.length;u++){const m=o[u],w=h[0],j=_.sub(p),k=m.sub(p),H=w.sub(p),E=Fv(j,j),M=Fv(j,k),O=Fv(k,k),P=Fv(H,j),R=Fv(H,k),$=E*O-M*M,te=(O*P-M*R)/$,ie=(E*R-M*P)/$,de=p.z*(1-te-ie)+_.z*te+m.z*ie;if(isFinite(de))return de}return 1/0}{let u=1/0;for(const p of o)u=Math.min(u,p.z);return u}}function qE(h,o,u,p,_,m,w,j){const k=w*_.getElevationAt(h,o,!0,!0),H=m[0]!==0,E=H?m[1]===0?w*(m[0]/7-450):w*function(M,O,P){const R=Math.floor(O[0]/8),$=Math.floor(O[1]/8),te=10*(O[0]-8*R),ie=10*(O[1]-8*$),de=M.getElevationAt(R,$,!0,!0),fe=M.getMeterToDEM(P),ae=Math.floor(.5*(te*fe-1)),ge=Math.floor(.5*(ie*fe-1)),Be=M.tileCoordToPixel(R,$),ke=2*ae+1,Ye=2*ge+1,Xe=function(_t,Et,Ut,Wt,Pt){return[_t.getElevationAtPixel(Et,Ut,!0),_t.getElevationAtPixel(Et+Pt,Ut,!0),_t.getElevationAtPixel(Et,Ut+Pt,!0),_t.getElevationAtPixel(Et+Wt,Ut+Pt,!0)]}(M,Be.x-ae,Be.y-ge,ke,Ye),We=Math.abs(Xe[0]-Xe[1]),At=Math.abs(Xe[2]-Xe[3]),nt=Math.abs(Xe[0]-Xe[2])+Math.abs(Xe[1]-Xe[3]),yt=Math.min(.25,.5*fe*(We+At)/ke),bt=Math.min(.25,.5*fe*nt/Ye);return de+Math.max(yt*te,bt*ie)}(_,m,j):k;return{base:k+(u===0?-1:u),top:H?Math.max(E+p,k+u+2):k+p}}He(jv,"FillExtrusionBucket",{omit:["layers","features"]}),He(kg,"PartData"),He(pd,"FootprintSegment"),He(zE,"BorderCentroidData"),He(HE,"GroundEffect");const kk=$i([{name:"a_pos_normal",components:2,type:"Int16"},{name:"a_data",components:4,type:"Uint8"},{name:"a_linesofar",components:1,type:"Float32"}],4),Lk=$i([{name:"a_z_offset_width",components:2,type:"Float32"}],4),{members:Mk}=kk,Nk=$i([{name:"a_packed",components:4,type:"Float32"}]),{members:Rk}=Nk,Ok=$i([{name:"a_pattern_data",components:3,type:"Float32"}]),{members:Dk}=Ok;class ZE{constructor(o,u){this.width=o,this.height=u,this.nextRow=0,this.image=new Cm({width:o,height:u}),this.positions={},this.uploaded=!1}getDash(o,u){const p=this.getKey(o,u);return this.positions[p]}trim(){const o=this.width,u=this.height=cn(this.nextRow);this.image.resize({width:o,height:u})}getKey(o,u){return o.join(",")+u}getDashRanges(o,u,p){const _=[];let m=o.length%2==1?-o[o.length-1]*p:0,w=o[0]*p,j=!0;_.push({left:m,right:w,isDash:j,zeroLength:o[0]===0});let k=o[0];for(let H=1;H<o.length;H++){j=!j;const E=o[H];m=k*p,k+=E,w=k*p,_.push({left:m,right:w,isDash:j,zeroLength:E===0})}return _}addRoundDash(o,u,p){const _=u/2;for(let m=-p;m<=p;m++){const w=this.width*(this.nextRow+p+m);let j=0,k=o[j];for(let H=0;H<this.width;H++){H/k.right>1&&(k=o[++j]);const E=Math.abs(H-k.left),M=Math.abs(H-k.right),O=Math.min(E,M);let P;const R=m/p*(_+1);if(k.isDash){const $=_-Math.abs(R);P=Math.sqrt(O*O+$*$)}else P=_-Math.sqrt(O*O+R*R);this.image.data[w+H]=Math.max(0,Math.min(255,P+128))}}}addRegularDash(o,u){for(let k=o.length-1;k>=0;--k){const H=o[k],E=o[k+1];H.zeroLength?o.splice(k,1):E&&E.isDash===H.isDash&&(E.left=H.left,o.splice(k,1))}const p=o[0],_=o[o.length-1];p.isDash===_.isDash&&(p.left=_.left-this.width,_.right=p.right+this.width);const m=this.width*this.nextRow;let w=0,j=o[w];for(let k=0;k<this.width;k++){k/j.right>1&&(j=o[++w]);const H=Math.abs(k-j.left),E=Math.abs(k-j.right),M=Math.min(H,E);this.image.data[m+k]=Math.max(0,Math.min(255,(j.isDash?M:-M)+u+128))}}addDash(o,u){const p=this.getKey(o,u);if(this.positions[p])return this.positions[p];const _=u==="round",m=_?7:0,w=2*m+1;if(this.nextRow+w>this.height)return Vn("LineAtlas out of space"),null;o.length===0&&o.push(1);let j=0;for(let E=0;E<o.length;E++)o[E]<0&&(Vn("Negative value is found in line dasharray, replacing values with 0"),o[E]=0),j+=o[E];if(j!==0){const E=this.width/j,M=this.getDashRanges(o,this.width,E);_?this.addRoundDash(M,E,m):this.addRegularDash(M,u==="square"?.5*E:0)}const k=this.nextRow+m;this.nextRow+=w;const H={tl:[k,m],br:[j,0]};return this.positions[p]=H,H}}He(ZE,"LineAtlas");const Fb=ts.VectorTileFeature.types,Uk=Math.cos(Math.PI/180*37.5),Pb=Math.cos(Math.PI/180*5);class kb{constructor(o){this.evaluationGlobals={zoom:0,lineProgress:void 0},this.zoom=o.zoom,this.evaluationGlobals.zoom=this.zoom,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.index=o.index,this.projection=o.projection,this.hasPattern=!1,this.hasZOffset=!1,this.hasCrossSlope=!1,this.patternFeatures=[],this.lineClipsArray=[],this.gradients={},this.layers.forEach(u=>{this.gradients[u.id]={}}),this.layoutVertexArray=new Lh,this.layoutVertexArray2=new ju,this.patternVertexArray=new Fc,this.indexArray=new $a,this.programConfigurations=new Ff(o.layers,{zoom:o.zoom,lut:o.lut}),this.segments=new po,this.maxLineLength=0,this.zOffsetVertexArray=new Ga,this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.tessellationStep=o.tessellationStep?o.tessellationStep:Wn/64}updateFootprints(o,u){}populate(o,u,p,_){this.hasPattern=y_("line",this.layers,u);const m=this.layers[0].layout.get("line-sort-key");this.tileToMeter=x(p),this.hasZOffset=!this.layers[0].isDraped();const w=this.layers[0].layout.get("line-elevation-reference");this.hasZOffset&&w==="none"&&Vn(`line-elevation-reference: ground is used for the layer ${this.layerIds[0]} because non-zero line-z-offset value was found.`);const j=this.layers[0].layout.get("line-cross-slope");this.hasCrossSlope=this.hasZOffset&&j!==void 0;const k=[];for(const{feature:O,id:P,index:R,sourceLayerIndex:$}of o){const te=this.layers[0]._featureFilter.needGeometry,ie=ue(O,te);if(!this.layers[0]._featureFilter.filter(new qr(this.zoom),ie,p))continue;const de=m?m.evaluate(ie,{},p):void 0,fe={id:P,properties:O.properties,type:O.type,sourceLayerIndex:$,index:R,geometry:te?ie.geometry:se(O,p,_),patterns:{},sortKey:de};k.push(fe)}m&&k.sort((O,P)=>O.sortKey-P.sortKey);const{lineAtlas:H,featureIndex:E}=u,M=this.addConstantDashes(H);for(const O of k){const{geometry:P,index:R,sourceLayerIndex:$}=O;if(M&&this.addFeatureDashes(O,H),this.hasPattern){const te=v_("line",this.layers,O,this.zoom,u);this.patternFeatures.push(te)}else this.addFeature(O,P,R,p,H.positions,u.availableImages,u.brightness);E.insert(o[R].feature,P,R,$,this.index)}}addConstantDashes(o){let u=!1;for(const p of this.layers){const _=p.paint.get("line-dasharray").value,m=p.layout.get("line-cap").value;if(_.kind!=="constant"||m.kind!=="constant")u=!0;else{const w=m.value,j=_.value;if(!j)continue;o.addDash(j,w)}}return u}addFeatureDashes(o,u){const p=this.zoom;for(const _ of this.layers){const m=_.paint.get("line-dasharray").value,w=_.layout.get("line-cap").value;if(m.kind==="constant"&&w.kind==="constant")continue;let j,k;if(m.kind==="constant"){if(j=m.value,!j)continue}else j=m.evaluate({zoom:p},o);k=w.kind==="constant"?w.value:w.evaluate({zoom:p},o),u.addDash(j,k),o.patterns[_.id]=u.getKey(j,k)}}update(o,u,p,_,m,w,j){this.programConfigurations.updatePaintArrays(o,u,m,p,_,w,j)}addFeatures(o,u,p,_,m,w){for(const j of this.patternFeatures)this.addFeature(j,j.geometry,j.index,u,p,_,w)}isEmpty(){return this.layoutVertexArray.length===0}uploadPending(){return!this.uploaded||this.programConfigurations.needsUpload}upload(o){this.uploaded||(this.layoutVertexArray2.length!==0&&(this.layoutVertexBuffer2=o.createVertexBuffer(this.layoutVertexArray2,Rk)),this.patternVertexArray.length!==0&&(this.patternVertexBuffer=o.createVertexBuffer(this.patternVertexArray,Dk)),!this.zOffsetVertexBuffer&&this.zOffsetVertexArray.length>0&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,Lk.members,!0)),this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,Mk),this.indexBuffer=o.createIndexBuffer(this.indexArray)),this.programConfigurations.upload(o),this.uploaded=!0}destroy(){this.layoutVertexBuffer&&(this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy(),this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy())}lineFeatureClips(o){if(o.properties&&o.properties.hasOwnProperty("mapbox_clip_start")&&o.properties.hasOwnProperty("mapbox_clip_end"))return{start:+o.properties.mapbox_clip_start,end:+o.properties.mapbox_clip_end}}addFeature(o,u,p,_,m,w,j){const k=this.layers[0].layout,H=k.get("line-join").evaluate(o,{}),E=k.get("line-cap").evaluate(o,{}),M=k.get("line-miter-limit"),O=k.get("line-round-limit");this.lineClips=this.lineFeatureClips(o),this.lineFeature=o,this.zOffsetValue=k.get("line-z-offset").value;const P=this.layers[0].paint.get("line-width").value;P.kind!=="constant"&&P.isLineProgressConstant===!1&&(this.variableWidthValue=P);for(const R of u)this.addLine(R,o,_,H,E,M,O);this.programConfigurations.populatePaintArrays(this.layoutVertexArray.length,o,p,m,w,_,j)}addLine(o,u,p,_,m,w,j){this.distance=0,this.prevDistance=0,this.scaledDistance=0,this.totalDistance=0,this.totalFeatureLength=0,this.lineSoFar=0,this.currentVertex=void 0;const k=_==="none";if(this.patternJoinNone=this.hasPattern&&k,this.segmentStart=0,this.segmentStartf32=0,this.segmentPoints=[],this.lineClips){this.lineClipsArray.push(this.lineClips);for(let fe=0;fe<o.length-1;fe++)this.totalDistance+=o[fe].dist(o[fe+1]);this.totalFeatureLength=this.totalDistance/(this.lineClips.end-this.lineClips.start),this.updateScaledDistance(),this.maxLineLength=Math.max(this.maxLineLength,this.totalDistance)}const H=Fb[u.type]==="Polygon";let E=o.length;for(;E>=2&&o[E-1].equals(o[E-2]);)E--;let M=0;for(;M<E-1&&o[M].equals(o[M+1]);)M++;if(E<(H?3:2))return;_==="bevel"&&(w=1.05);const O=this.segments.prepareSegment(10*E,this.layoutVertexArray,this.indexArray);let P,R,$,te,ie,de;this.e1=this.e2=-1,H&&(P=o[E-2],ie=o[M].sub(P)._unit()._perp());for(let fe=M;fe<E;fe++){if($=fe===E-1?H?o[M+1]:void 0:o[fe+1],$&&o[fe].equals($))continue;ie&&(te=ie),P&&(R=P),P=o[fe],de=this.evaluateLineProgressFeatures(R?R.dist(P):0),ie=$?$.sub(P)._unit()._perp():te,te=te||ie;const ae=R&&$;let ge=ae?_:H||k?"butt":m;const Be=te.x*ie.x+te.y*ie.y;if(k){const bt=function(_t){if(_t.patternJoinNone){const Et=_t.segmentPoints.length/2,Ut=_t.lineSoFar-_t.segmentStart;for(let Wt=0;Wt<Et;++Wt){const Pt=_t.segmentPoints[2*Wt+1],mn=Math.round(_t.segmentPoints[2*Wt])+.5+.25*Pt;_t.patternVertexArray.emplaceBack(mn,Ut,_t.segmentStart),_t.patternVertexArray.emplaceBack(mn,Ut,_t.segmentStart)}_t.segmentPoints.length=0}_t.e1=_t.e2=-1};if(ae&&Be<Pb){this.updateDistance(R,P),this.addCurrentVertex(P,te,1,1,O,de),bt(this),this.addCurrentVertex(P,ie,-1,-1,O,de);continue}if(R){if(!$){this.updateDistance(R,P),this.addCurrentVertex(P,te,1,1,O,de),bt(this);continue}ge="miter"}}let ke=te.add(ie);ke.x===0&&ke.y===0||ke._unit();const Ye=ke.x*ie.x+ke.y*ie.y,Xe=Ye!==0?1/Ye:1/0,We=2*Math.sqrt(2-2*Ye),At=Ye<Uk&&R&&$,nt=te.x*ie.y-te.y*ie.x>0,yt=this.overscaling<=16?15*Wn/(512*this.overscaling):0;if(ae&&ge==="round"){if(Xe<j)ge="miter";else if(Xe<=2){const bt=Lb(P,-10,Wn+10);ge=this.hasZOffset&&(bt||this.hasCrossSlope)?"miter":"fakeround"}}if(ge==="miter"&&Xe>w&&(ge="bevel"),ge==="bevel"&&(Xe>2&&(ge="flipbevel"),Xe<w&&(ge="miter")),R&&!(ge==="miter"&&At)&&this.updateDistance(R,P),ge==="miter")if(At){const bt=P.dist(R);if(bt>2*yt){const Et=P.sub(P.sub(R)._mult(yt/bt)._round());this.updateDistance(R,Et),this.addCurrentVertex(Et,te,0,0,O,de),R=Et}this.updateDistance(R,P),ke._mult(Xe),this.addCurrentVertex(P,ke,0,0,O,de);const _t=P.dist($);if(_t>2*yt){const Et=P.add($.sub(P)._mult(yt/_t)._round());this.updateDistance(P,Et),this.addCurrentVertex(Et,ie,0,0,O,de),P=Et}}else ke._mult(Xe),this.addCurrentVertex(P,ke,0,0,O,de);else if(ge==="flipbevel"){if(Xe>100)ke=ie.mult(-1);else{const bt=Xe*te.add(ie).mag()/te.sub(ie).mag();ke._perp()._mult(bt*(nt?-1:1))}this.addCurrentVertex(P,ke,0,0,O,de),this.addCurrentVertex(P,ke.mult(-1),0,0,O,de)}else if(ge==="bevel"||ge==="fakeround"){de!=null&&R&&this.addCurrentVertex(P,te,-1,-1,O,de);const bt=P.dist(R)<=2*yt&&ge!=="bevel",_t=ke.mult(nt?1:-1);_t._mult(Xe);const Et=ie.mult(nt?-1:1),Ut=te.mult(nt?-1:1),Wt=this.evaluateLineProgressFeatures(this.distance);if(de==null&&(this.addHalfVertex(P,_t.x,_t.y,!1,!nt,0,O,Wt),bt||this.addHalfVertex(P,_t.x+2*Ut.x,_t.y+2*Ut.y,!1,nt,0,O,Wt)),ge==="fakeround"){const Pt=Math.round(180*We/Math.PI/20);this.addHalfVertex(P,Ut.x,Ut.y,!1,nt,0,O,Wt);for(let mn=0;mn<Pt;mn++){let Nn=mn/Pt;if(Nn!==.5){const qn=Nn-.5;Nn+=Nn*qn*(Nn-1)*((1.0904+Be*(Be*(3.55645-1.43519*Be)-3.2452))*qn*qn+(.848013+Be*(.215638*Be-1.06021)))}const vn=Et.sub(Ut)._mult(Nn)._add(Ut)._unit();this.addHalfVertex(P,vn.x,vn.y,!1,nt,0,O,Wt)}this.addHalfVertex(P,Et.x,Et.y,!1,nt,0,O,Wt)}bt||de!=null||this.addHalfVertex(P,_t.x+2*Et.x,_t.y+2*Et.y,!1,nt,0,O,Wt),de!=null&&$&&this.addCurrentVertex(P,ie,1,1,O,de)}else ge==="butt"?this.addCurrentVertex(P,ke,0,0,O,de):ge==="square"?(R||this.addCurrentVertex(P,ke,-1,-1,O,de),this.addCurrentVertex(P,ke,0,0,O,de),R&&this.addCurrentVertex(P,ke,1,1,O,de)):ge==="round"&&(R&&(this.addCurrentVertex(P,te,0,0,O,de),this.addCurrentVertex(P,te,1,1,O,de,!0)),$&&(this.addCurrentVertex(P,ie,-1,-1,O,de,!0),this.addCurrentVertex(P,ie,0,0,O,de)))}}addVerticesTo(o,u,p,_,m,w,j,k,H,E){const M=(u.w-o.w)/this.tessellationStep|0;let O=0;const P=this.scaledDistance;if(M>1){this.lineSoFar=o.w;const $=(u.x-o.x)/M,te=(u.y-o.y)/M,ie=(u.z-o.z)/M,de=(u.w-o.w)/M;for(let fe=1;fe<M;++fe){o.x+=$,o.y+=te,o.z+=ie,this.lineSoFar+=de,O+=de;const ae=this.evaluateLineProgressFeatures(this.prevDistance+O);this.scaledDistance=(this.prevDistance+O)/this.totalDistance,this.addHalfVertex(o,p,_,E,!1,j,H,ae),this.addHalfVertex(o,m,w,E,!0,-k,H,ae)}}this.lineSoFar=u.w,this.scaledDistance=P;const R=this.evaluateLineProgressFeatures(this.distance);this.addHalfVertex(u,p,_,E,!1,j,H,R),this.addHalfVertex(u,m,w,E,!0,-k,H,R)}evaluateLineProgressFeatures(o){if(!this.variableWidthValue&&!this.hasZOffset)return null;this.evaluationGlobals.lineProgress=0,this.lineClips?this.evaluationGlobals.lineProgress=Math.min(1,(this.totalFeatureLength*this.lineClips.start+o)/this.totalFeatureLength):Vn(`line-progress evaluation for ${this.layerIds[0]} requires enabling 'lineMetrics' for the source.`);let u=0;return this.variableWidthValue&&this.variableWidthValue.kind!=="constant"&&(u=this.variableWidthValue.evaluate(this.evaluationGlobals,this.lineFeature)||0),this.hasZOffset?this.zOffsetValue.kind==="constant"?{zOffset:this.zOffsetValue.value,variableWidth:u}:{zOffset:this.zOffsetValue.evaluate(this.evaluationGlobals,this.lineFeature)||0,variableWidth:u}:{zOffset:0,variableWidth:u}}addCurrentVertex(o,u,p,_,m,w,j=!1){const k=u.x+u.y*p,H=u.y-u.x*p,E=u.y*_-u.x,M=-u.y-u.x*_;if(w!=null){const O=this.hasZOffset,P=-10,R=Wn+10,$=w.zOffset,te=new Lu(o.x,o.y,$,this.lineSoFar),ie=!!O&&Lb(o,P,R),de=this.lineSoFar,fe=this.distance;if(this.currentVertex)if(ie){const ae=this.currentVertexIsOutside,ge=this.currentVertex,Be=new Lu(o.x,o.y,$,this.lineSoFar);if(mA(ge,Be,P,R),!Lb(Be,P,R)){if(ae){this.e1=this.e2=-1,this.distance-=ge.dist(te),this.lineSoFar=ge.w;const ke=this.evaluateLineProgressFeatures(ge.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ge,k,H,j,!1,p,m,ke),this.addHalfVertex(ge,E,M,j,!0,-_,m,ke),this.prevDistance=this.distance}this.distance=this.prevDistance+ge.dist(Be),this.scaledDistance=this.distance/this.totalDistance,this.addVerticesTo(ge,Be,k,H,E,M,p,_,m,j),this.distance=fe,this.scaledDistance=this.distance/this.totalDistance}}else{const ae=this.currentVertex;if(this.currentVertexIsOutside){mA(ae,te,P,R),this.e1=this.e2=-1,this.distance-=ae.dist(te),this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=ae.w;const ge=this.evaluateLineProgressFeatures(ae.w-this.totalFeatureLength*(this.lineClips?this.lineClips.start:0));this.addHalfVertex(ae,k,H,j,!1,p,m,ge),this.addHalfVertex(ae,E,M,j,!0,-_,m,ge),this.prevDistance=this.distance,this.distance=fe,this.scaledDistance=this.distance/this.totalDistance}this.addVerticesTo(ae,te,k,H,E,M,p,_,m,j)}else ie||(this.addHalfVertex(o,k,H,j,!1,p,m,w),this.addHalfVertex(o,E,M,j,!0,-_,m,w));this.currentVertex=te,this.currentVertexIsOutside=ie,this.lineSoFar=de}else this.addHalfVertex(o,k,H,j,!1,p,m,w),this.addHalfVertex(o,E,M,j,!0,-_,m,w)}addHalfVertex({x:o,y:u},p,_,m,w,j,k,H){this.patternJoinNone&&(this.segmentPoints.length===0&&(this.segmentStart=this.lineSoFar,this.segmentStartf32=Math.fround(this.lineSoFar)),w||this.segmentPoints.push(this.lineSoFar-this.segmentStart,j)),this.layoutVertexArray.emplaceBack((o<<1)+(m?1:0),(u<<1)+(w?1:0),Math.round(63*p)+128,Math.round(63*_)+128,1+(j===0?0:j<0?-1:1),0,this.lineSoFar-this.segmentStartf32),this.lineClips&&this.layoutVertexArray2.emplaceBack(this.scaledDistance,this.lineClipsArray.length,this.lineClips.start,this.lineClips.end);const E=k.vertexLength++;this.e1>=0&&this.e2>=0&&(this.indexArray.emplaceBack(this.e1,this.e2,E),k.primitiveLength++),w?this.e2=E:this.e1=E,H!=null&&this.zOffsetVertexArray.emplaceBack(H.zOffset,H.variableWidth)}updateScaledDistance(){this.lineClips?(this.scaledDistance=this.distance/this.totalDistance,this.lineSoFar=this.totalFeatureLength*this.lineClips.start+this.distance):this.lineSoFar=this.distance}updateDistance(o,u){this.prevDistance=this.distance,this.distance+=o.dist(u),this.updateScaledDistance()}}function Lb(h,o,u){return h.x<o||h.x>u||h.y<o||h.y>u}let XE,uc;function Mu(h,o,u){return o*(Wn/(h.tileSize*Math.pow(2,u-h.tileID.overscaledZ)))}He(kb,"LineBucket",{omit:["layers","patternFeatures","currentVertex","currentVertexIsOutside"]});const YE=(h,o,u)=>(1-u)*h+u*o;function JE(h,o){return 1/Mu(h,1,o.tileZoom)}function e4(h,o,u,p){return h.translatePosMatrix(p||o.tileID.projMatrix,o,u.paint.get("line-translate"),u.paint.get("line-translate-anchor"))}const Mb=h=>{const o=[];t4(h)&&o.push("RENDER_LINE_DASH"),h.paint.get("line-gradient")&&o.push("RENDER_LINE_GRADIENT");const u=h.paint.get("line-trim-offset");u[0]===0&&u[1]===0||o.push("RENDER_LINE_TRIM_OFFSET"),h.paint.get("line-border-width").constantOr(1)!==0&&o.push("RENDER_LINE_BORDER");const p=h.layout.get("line-join").constantOr("miter")==="none",_=!!h.paint.get("line-pattern").constantOr(1);return p&&_&&o.push("LINE_JOIN_NONE"),o};function t4(h){const o=h.paint.get("line-dasharray").value;return o.value||o.kind!=="constant"}let Nb;const n4=()=>Nb||(Nb={layout:XE||(XE=new ks({"line-cap":new Gn(en.layout_line["line-cap"]),"line-join":new Gn(en.layout_line["line-join"]),"line-miter-limit":new Mn(en.layout_line["line-miter-limit"]),"line-round-limit":new Mn(en.layout_line["line-round-limit"]),"line-sort-key":new Gn(en.layout_line["line-sort-key"]),"line-z-offset":new Gn(en.layout_line["line-z-offset"]),"line-elevation-reference":new Mn(en.layout_line["line-elevation-reference"]),"line-cross-slope":new Mn(en.layout_line["line-cross-slope"]),visibility:new Mn(en.layout_line.visibility),"line-width-unit":new Mn(en.layout_line["line-width-unit"])})),paint:uc||(uc=new ks({"line-opacity":new Gn(en.paint_line["line-opacity"]),"line-color":new Gn(en.paint_line["line-color"]),"line-translate":new Mn(en.paint_line["line-translate"]),"line-translate-anchor":new Mn(en.paint_line["line-translate-anchor"]),"line-width":new Gn(en.paint_line["line-width"]),"line-gap-width":new Gn(en.paint_line["line-gap-width"]),"line-offset":new Gn(en.paint_line["line-offset"]),"line-blur":new Gn(en.paint_line["line-blur"]),"line-dasharray":new Gn(en.paint_line["line-dasharray"]),"line-pattern":new Gn(en.paint_line["line-pattern"]),"line-gradient":new Ic(en.paint_line["line-gradient"]),"line-trim-offset":new Mn(en.paint_line["line-trim-offset"]),"line-trim-fade-range":new Mn(en.paint_line["line-trim-fade-range"]),"line-trim-color":new Mn(en.paint_line["line-trim-color"]),"line-emissive-strength":new Mn(en.paint_line["line-emissive-strength"]),"line-border-width":new Gn(en.paint_line["line-border-width"]),"line-border-color":new Gn(en.paint_line["line-border-color"]),"line-occlusion-opacity":new Mn(en.paint_line["line-occlusion-opacity"]),"line-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"line-gradient-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"line-trim-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"line-border-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},Nb);class r4 extends Gn{possiblyEvaluate(o,u){return u=new qr(Math.floor(u.zoom),{now:u.now,fadeDuration:u.fadeDuration,transition:u.transition}),super.possiblyEvaluate(o,u)}evaluate(o,u,p,_){return u=fn({},u,{zoom:Math.floor(u.zoom)}),super.evaluate(o,u,p,_)}}let Pv;function i4(h,o){return o>0?o+2*h:h}const zk=$i([{name:"a_pos_offset",components:4,type:"Int16"},{name:"a_tex_size",components:4,type:"Uint16"},{name:"a_pixeloffset",components:4,type:"Int16"}],4),s4=$i([{name:"a_globe_anchor",components:3,type:"Int16"},{name:"a_globe_normal",components:3,type:"Float32"}],4),o4=$i([{name:"a_projected_pos",components:4,type:"Float32"}],4);$i([{name:"a_fade_opacity",components:1,type:"Uint32"}],4);const Qk=$i([{name:"a_auto_z_offset",components:1,type:"Float32"}],4),Hk=$i([{name:"a_texb",components:2,type:"Uint16"}]),Vk=$i([{name:"a_placed",components:2,type:"Uint8"},{name:"a_shift",components:2,type:"Float32"},{name:"a_elevation_from_sea",components:2,type:"Float32"}]),$k=$i([{name:"a_size_scale",components:1,type:"Float32"},{name:"a_padding",components:2,type:"Float32"},{name:"a_auto_z_offset",components:1,type:"Float32"}]);$i([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"tileAnchorX"},{type:"Int16",name:"tileAnchorY"},{type:"Float32",name:"x1"},{type:"Float32",name:"y1"},{type:"Float32",name:"x2"},{type:"Float32",name:"y2"},{type:"Int16",name:"padding"},{type:"Uint32",name:"featureIndex"},{type:"Uint16",name:"sourceLayerIndex"},{type:"Uint16",name:"bucketIndex"}]);const Lg=$i([{name:"a_pos",components:3,type:"Int16"},{name:"a_anchor_pos",components:2,type:"Int16"},{name:"a_extrude",components:2,type:"Int16"}],4),Gk=$i([{name:"a_pos_2f",components:2,type:"Float32"},{name:"a_radius",components:1,type:"Float32"},{name:"a_flags",components:2,type:"Int16"}],4);$i([{name:"triangle",components:3,type:"Uint16"}]),$i([{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Uint16",name:"glyphStartIndex"},{type:"Uint16",name:"numGlyphs"},{type:"Uint32",name:"vertexStartIndex"},{type:"Uint32",name:"lineStartIndex"},{type:"Uint32",name:"lineLength"},{type:"Uint16",name:"segment"},{type:"Uint16",name:"lowerSize"},{type:"Uint16",name:"upperSize"},{type:"Float32",name:"lineOffsetX"},{type:"Float32",name:"lineOffsetY"},{type:"Uint8",name:"writingMode"},{type:"Uint8",name:"placedOrientation"},{type:"Uint8",name:"hidden"},{type:"Uint32",name:"crossTileID"},{type:"Int16",name:"associatedIconIndex"},{type:"Uint8",name:"flipState"}]),$i([{type:"Float32",name:"tileAnchorX"},{type:"Float32",name:"tileAnchorY"},{type:"Int16",name:"projectedAnchorX"},{type:"Int16",name:"projectedAnchorY"},{type:"Int16",name:"projectedAnchorZ"},{type:"Int16",name:"rightJustifiedTextSymbolIndex"},{type:"Int16",name:"centerJustifiedTextSymbolIndex"},{type:"Int16",name:"leftJustifiedTextSymbolIndex"},{type:"Int16",name:"verticalPlacedTextSymbolIndex"},{type:"Int16",name:"placedIconSymbolIndex"},{type:"Int16",name:"verticalPlacedIconSymbolIndex"},{type:"Uint16",name:"key"},{type:"Uint16",name:"textBoxStartIndex"},{type:"Uint16",name:"textBoxEndIndex"},{type:"Uint16",name:"verticalTextBoxStartIndex"},{type:"Uint16",name:"verticalTextBoxEndIndex"},{type:"Uint16",name:"iconBoxStartIndex"},{type:"Uint16",name:"iconBoxEndIndex"},{type:"Uint16",name:"verticalIconBoxStartIndex"},{type:"Uint16",name:"verticalIconBoxEndIndex"},{type:"Uint16",name:"featureIndex"},{type:"Uint16",name:"numHorizontalGlyphVertices"},{type:"Uint16",name:"numVerticalGlyphVertices"},{type:"Uint16",name:"numIconVertices"},{type:"Uint16",name:"numVerticalIconVertices"},{type:"Uint16",name:"useRuntimeCollisionCircles"},{type:"Uint32",name:"crossTileID"},{type:"Float32",components:2,name:"textOffset"},{type:"Float32",name:"collisionCircleDiameter"},{type:"Float32",name:"zOffset"},{type:"Uint8",name:"hasIconTextFit"}]),$i([{type:"Float32",name:"offsetX"}]),$i([{type:"Int16",name:"x"},{type:"Int16",name:"y"}]);var dc=24;const Rf=128;function S_(h,o,u,p,_){if(h.kind==="camera")return h.maxSize;if(h.kind==="composite"){const m=o.possiblyEvaluate(new qr(h.maxZoom),u).evaluate(_,{},u),w=o.possiblyEvaluate(new qr(h.minZoom),u).evaluate(_,{},u);return Math.max(m,w)}return o.possiblyEvaluate(new qr(p)).evaluate(_,{},u)}function Rb(h,o){const{expression:u}=o;if(u.kind==="constant")return{kind:"constant",layoutSize:u.evaluate(new qr(h+1))};if(u.kind==="source")return{kind:"source"};{const{zoomStops:p,interpolationType:_}=u;let m=0;for(;m<p.length&&p[m]<=h;)m++;m=Math.max(0,m-1);let w=m;for(;w<p.length&&p[w]<h+1;)w++;w=Math.min(p.length-1,w);const j=p[m],k=p[w];return u.kind==="composite"?{kind:"composite",minZoom:j,maxZoom:k,interpolationType:_}:{kind:"camera",minZoom:j,maxZoom:k,minSize:u.evaluate(new qr(j)),maxSize:u.evaluate(new qr(k)),interpolationType:_}}}function kv(h,{uSize:o,uSizeT:u},{lowerSize:p,upperSize:_}){return h.kind==="source"?p/Rf:h.kind==="composite"?Ur(p/Rf,_/Rf,u):o}function Mg(h,o,u=1){let p=0,_=0;if(h.kind==="constant")_=h.layoutSize*u;else if(h.kind!=="source"){const{interpolationType:m,minZoom:w,maxZoom:j}=h,k=m?Gt(ic.interpolationFactor(m,o,w,j),0,1):0;h.kind==="camera"?_=Ur(h.minSize,h.maxSize,k)*u:p=k*u}return{uSizeT:p,uSize:_}}var Kk=Object.freeze({__proto__:null,SIZE_PACK_FACTOR:Rf,evaluateSizeForFeature:kv,evaluateSizeForZoom:Mg,getRasterizedIconSize:S_,getSizeData:Rb});function Wk(h,o,u){return h.sections.forEach(p=>{p.text=function(_,m,w){const j=m.layout.get("text-transform").evaluate(w,{});return j==="uppercase"?_=_.toLocaleUpperCase():j==="lowercase"&&(_=_.toLocaleLowerCase()),wo.applyArabicShaping&&(_=wo.applyArabicShaping(_)),_}(p.text,o,u)}),h}const Lv={"!":"︕","#":"＃",$:"＄","%":"％","&":"＆","(":"︵",")":"︶","*":"＊","+":"＋",",":"︐","-":"︲",".":"・","/":"／",":":"︓",";":"︔","<":"︿","=":"＝",">":"﹀","?":"︖","@":"＠","[":"﹇","\\":"＼","]":"﹈","^":"＾",_:"︳","`":"｀","{":"︷","|":"―","}":"︸","~":"～","¢":"￠","£":"￡","¥":"￥","¦":"￤","¬":"￢","¯":"￣","–":"︲","—":"︱","‘":"﹃","’":"﹄","“":"﹁","”":"﹂","…":"︙","‧":"・","₩":"￦","、":"︑","。":"︒","〈":"︿","〉":"﹀","《":"︽","》":"︾","「":"﹁","」":"﹂","『":"﹃","』":"﹄","【":"︻","】":"︼","〔":"︹","〕":"︺","〖":"︗","〗":"︘","！":"︕","（":"︵","）":"︶","，":"︐","－":"︲","．":"・","：":"︓","；":"︔","＜":"︿","＞":"﹀","？":"︖","［":"﹇","］":"﹈","＿":"︳","｛":"︷","｜":"―","｝":"︸","｟":"︵","｠":"︶","｡":"︒","｢":"﹁","｣":"﹂","←":"↑","→":"↓"};function qk(h){return h==="︶"||h==="﹈"||h==="︸"||h==="﹄"||h==="﹂"||h==="︾"||h==="︼"||h==="︺"||h==="︘"||h==="﹀"||h==="︐"||h==="︓"||h==="︔"||h==="｀"||h==="￣"||h==="︑"||h==="︒"}function Zk(h){return h==="︵"||h==="﹇"||h==="︷"||h==="﹃"||h==="﹁"||h==="︽"||h==="︻"||h==="︹"||h==="︗"||h==="︿"}var a4,Ob,l4,Db={};/*! ieee754. BSD-3-Clause License. Feross Aboukhadijeh <https://feross.org/opensource> */function Xk(){return a4||(a4=1,Db.read=function(h,o,u,p,_){var m,w,j=8*_-p-1,k=(1<<j)-1,H=k>>1,E=-7,M=u?_-1:0,O=u?-1:1,P=h[o+M];for(M+=O,m=P&(1<<-E)-1,P>>=-E,E+=j;E>0;m=256*m+h[o+M],M+=O,E-=8);for(w=m&(1<<-E)-1,m>>=-E,E+=p;E>0;w=256*w+h[o+M],M+=O,E-=8);if(m===0)m=1-H;else{if(m===k)return w?NaN:1/0*(P?-1:1);w+=Math.pow(2,p),m-=H}return(P?-1:1)*w*Math.pow(2,m-p)},Db.write=function(h,o,u,p,_,m){var w,j,k,H=8*m-_-1,E=(1<<H)-1,M=E>>1,O=_===23?Math.pow(2,-24)-Math.pow(2,-77):0,P=p?0:m-1,R=p?1:-1,$=o<0||o===0&&1/o<0?1:0;for(o=Math.abs(o),isNaN(o)||o===1/0?(j=isNaN(o)?1:0,w=E):(w=Math.floor(Math.log(o)/Math.LN2),o*(k=Math.pow(2,-w))<1&&(w--,k*=2),(o+=w+M>=1?O/k:O*Math.pow(2,1-M))*k>=2&&(w++,k/=2),w+M>=E?(j=0,w=E):w+M>=1?(j=(o*k-1)*Math.pow(2,_),w+=M):(j=o*Math.pow(2,M-1)*Math.pow(2,_),w=0));_>=8;h[u+P]=255&j,P+=R,j/=256,_-=8);for(w=w<<_|j,H+=_;H>0;h[u+P]=255&w,P+=R,w/=256,H-=8);h[u+P-R]|=128*$}),Db}function c4(){if(l4)return Ob;l4=1,Ob=o;var h=Xk();function o(ae){this.buf=ArrayBuffer.isView&&ArrayBuffer.isView(ae)?ae:new Uint8Array(ae||0),this.pos=0,this.type=0,this.length=this.buf.length}o.Varint=0,o.Fixed64=1,o.Bytes=2,o.Fixed32=5;var u=4294967296,p=1/u,_=typeof TextDecoder>"u"?null:new TextDecoder("utf8");function m(ae){return ae.type===o.Bytes?ae.readVarint()+ae.pos:ae.pos+1}function w(ae,ge,Be){return Be?4294967296*ge+(ae>>>0):4294967296*(ge>>>0)+(ae>>>0)}function j(ae,ge,Be){var ke=ge<=16383?1:ge<=2097151?2:ge<=268435455?3:Math.floor(Math.log(ge)/(7*Math.LN2));Be.realloc(ke);for(var Ye=Be.pos-1;Ye>=ae;Ye--)Be.buf[Ye+ke]=Be.buf[Ye]}function k(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeVarint(ae[Be])}function H(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeSVarint(ae[Be])}function E(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeFloat(ae[Be])}function M(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeDouble(ae[Be])}function O(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeBoolean(ae[Be])}function P(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeFixed32(ae[Be])}function R(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeSFixed32(ae[Be])}function $(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeFixed64(ae[Be])}function te(ae,ge){for(var Be=0;Be<ae.length;Be++)ge.writeSFixed64(ae[Be])}function ie(ae,ge){return(ae[ge]|ae[ge+1]<<8|ae[ge+2]<<16)+16777216*ae[ge+3]}function de(ae,ge,Be){ae[Be]=ge,ae[Be+1]=ge>>>8,ae[Be+2]=ge>>>16,ae[Be+3]=ge>>>24}function fe(ae,ge){return(ae[ge]|ae[ge+1]<<8|ae[ge+2]<<16)+(ae[ge+3]<<24)}return o.prototype={destroy:function(){this.buf=null},readFields:function(ae,ge,Be){for(Be=Be||this.length;this.pos<Be;){var ke=this.readVarint(),Ye=ke>>3,Xe=this.pos;this.type=7&ke,ae(Ye,ge,this),this.pos===Xe&&this.skip(ke)}return ge},readMessage:function(ae,ge){return this.readFields(ae,ge,this.readVarint()+this.pos)},readFixed32:function(){var ae=ie(this.buf,this.pos);return this.pos+=4,ae},readSFixed32:function(){var ae=fe(this.buf,this.pos);return this.pos+=4,ae},readFixed64:function(){var ae=ie(this.buf,this.pos)+ie(this.buf,this.pos+4)*u;return this.pos+=8,ae},readSFixed64:function(){var ae=ie(this.buf,this.pos)+fe(this.buf,this.pos+4)*u;return this.pos+=8,ae},readFloat:function(){var ae=h.read(this.buf,this.pos,!0,23,4);return this.pos+=4,ae},readDouble:function(){var ae=h.read(this.buf,this.pos,!0,52,8);return this.pos+=8,ae},readVarint:function(ae){var ge,Be,ke=this.buf;return ge=127&(Be=ke[this.pos++]),Be<128?ge:(ge|=(127&(Be=ke[this.pos++]))<<7,Be<128?ge:(ge|=(127&(Be=ke[this.pos++]))<<14,Be<128?ge:(ge|=(127&(Be=ke[this.pos++]))<<21,Be<128?ge:function(Ye,Xe,We){var At,nt,yt=We.buf;if(At=(112&(nt=yt[We.pos++]))>>4,nt<128||(At|=(127&(nt=yt[We.pos++]))<<3,nt<128)||(At|=(127&(nt=yt[We.pos++]))<<10,nt<128)||(At|=(127&(nt=yt[We.pos++]))<<17,nt<128)||(At|=(127&(nt=yt[We.pos++]))<<24,nt<128)||(At|=(1&(nt=yt[We.pos++]))<<31,nt<128))return w(Ye,At,Xe);throw new Error("Expected varint not more than 10 bytes")}(ge|=(15&(Be=ke[this.pos]))<<28,ae,this))))},readVarint64:function(){return this.readVarint(!0)},readSVarint:function(){var ae=this.readVarint();return ae%2==1?(ae+1)/-2:ae/2},readBoolean:function(){return!!this.readVarint()},readString:function(){var ae=this.readVarint()+this.pos,ge=this.pos;return this.pos=ae,ae-ge>=12&&_?function(Be,ke,Ye){return _.decode(Be.subarray(ke,Ye))}(this.buf,ge,ae):function(Be,ke,Ye){for(var Xe="",We=ke;We<Ye;){var At,nt,yt,bt=Be[We],_t=null,Et=bt>239?4:bt>223?3:bt>191?2:1;if(We+Et>Ye)break;Et===1?bt<128&&(_t=bt):Et===2?(192&(At=Be[We+1]))==128&&(_t=(31&bt)<<6|63&At)<=127&&(_t=null):Et===3?(nt=Be[We+2],(192&(At=Be[We+1]))==128&&(192&nt)==128&&((_t=(15&bt)<<12|(63&At)<<6|63&nt)<=2047||_t>=55296&&_t<=57343)&&(_t=null)):Et===4&&(nt=Be[We+2],yt=Be[We+3],(192&(At=Be[We+1]))==128&&(192&nt)==128&&(192&yt)==128&&((_t=(15&bt)<<18|(63&At)<<12|(63&nt)<<6|63&yt)<=65535||_t>=1114112)&&(_t=null)),_t===null?(_t=65533,Et=1):_t>65535&&(_t-=65536,Xe+=String.fromCharCode(_t>>>10&1023|55296),_t=56320|1023&_t),Xe+=String.fromCharCode(_t),We+=Et}return Xe}(this.buf,ge,ae)},readBytes:function(){var ae=this.readVarint()+this.pos,ge=this.buf.subarray(this.pos,ae);return this.pos=ae,ge},readPackedVarint:function(ae,ge){if(this.type!==o.Bytes)return ae.push(this.readVarint(ge));var Be=m(this);for(ae=ae||[];this.pos<Be;)ae.push(this.readVarint(ge));return ae},readPackedSVarint:function(ae){if(this.type!==o.Bytes)return ae.push(this.readSVarint());var ge=m(this);for(ae=ae||[];this.pos<ge;)ae.push(this.readSVarint());return ae},readPackedBoolean:function(ae){if(this.type!==o.Bytes)return ae.push(this.readBoolean());var ge=m(this);for(ae=ae||[];this.pos<ge;)ae.push(this.readBoolean());return ae},readPackedFloat:function(ae){if(this.type!==o.Bytes)return ae.push(this.readFloat());var ge=m(this);for(ae=ae||[];this.pos<ge;)ae.push(this.readFloat());return ae},readPackedDouble:function(ae){if(this.type!==o.Bytes)return ae.push(this.readDouble());var ge=m(this);for(ae=ae||[];this.pos<ge;)ae.push(this.readDouble());return ae},readPackedFixed32:function(ae){if(this.type!==o.Bytes)return ae.push(this.readFixed32());var ge=m(this);for(ae=ae||[];this.pos<ge;)ae.push(this.readFixed32());return ae},readPackedSFixed32:function(ae){if(this.type!==o.Bytes)return ae.push(this.readSFixed32());var ge=m(this);for(ae=ae||[];this.pos<ge;)ae.push(this.readSFixed32());return ae},readPackedFixed64:function(ae){if(this.type!==o.Bytes)return ae.push(this.readFixed64());var ge=m(this);for(ae=ae||[];this.pos<ge;)ae.push(this.readFixed64());return ae},readPackedSFixed64:function(ae){if(this.type!==o.Bytes)return ae.push(this.readSFixed64());var ge=m(this);for(ae=ae||[];this.pos<ge;)ae.push(this.readSFixed64());return ae},skip:function(ae){var ge=7&ae;if(ge===o.Varint)for(;this.buf[this.pos++]>127;);else if(ge===o.Bytes)this.pos=this.readVarint()+this.pos;else if(ge===o.Fixed32)this.pos+=4;else{if(ge!==o.Fixed64)throw new Error("Unimplemented type: "+ge);this.pos+=8}},writeTag:function(ae,ge){this.writeVarint(ae<<3|ge)},realloc:function(ae){for(var ge=this.length||16;ge<this.pos+ae;)ge*=2;if(ge!==this.length){var Be=new Uint8Array(ge);Be.set(this.buf),this.buf=Be,this.length=ge}},finish:function(){return this.length=this.pos,this.pos=0,this.buf.subarray(0,this.length)},writeFixed32:function(ae){this.realloc(4),de(this.buf,ae,this.pos),this.pos+=4},writeSFixed32:function(ae){this.realloc(4),de(this.buf,ae,this.pos),this.pos+=4},writeFixed64:function(ae){this.realloc(8),de(this.buf,-1&ae,this.pos),de(this.buf,Math.floor(ae*p),this.pos+4),this.pos+=8},writeSFixed64:function(ae){this.realloc(8),de(this.buf,-1&ae,this.pos),de(this.buf,Math.floor(ae*p),this.pos+4),this.pos+=8},writeVarint:function(ae){(ae=+ae||0)>268435455||ae<0?function(ge,Be){var ke,Ye;if(ge>=0?(ke=ge%4294967296|0,Ye=ge/4294967296|0):(Ye=~(-ge/4294967296),4294967295^(ke=~(-ge%4294967296))?ke=ke+1|0:(ke=0,Ye=Ye+1|0)),ge>=18446744073709552e3||ge<-18446744073709552e3)throw new Error("Given varint doesn't fit into 10 bytes");Be.realloc(10),function(Xe,We,At){At.buf[At.pos++]=127&Xe|128,Xe>>>=7,At.buf[At.pos++]=127&Xe|128,Xe>>>=7,At.buf[At.pos++]=127&Xe|128,Xe>>>=7,At.buf[At.pos++]=127&Xe|128,At.buf[At.pos]=127&(Xe>>>=7)}(ke,0,Be),function(Xe,We){var At=(7&Xe)<<4;We.buf[We.pos++]|=At|((Xe>>>=3)?128:0),Xe&&(We.buf[We.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(We.buf[We.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(We.buf[We.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(We.buf[We.pos++]=127&Xe|((Xe>>>=7)?128:0),Xe&&(We.buf[We.pos++]=127&Xe)))))}(Ye,Be)}(ae,this):(this.realloc(4),this.buf[this.pos++]=127&ae|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=127&(ae>>>=7)|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=127&(ae>>>=7)|(ae>127?128:0),ae<=127||(this.buf[this.pos++]=ae>>>7&127))))},writeSVarint:function(ae){this.writeVarint(ae<0?2*-ae-1:2*ae)},writeBoolean:function(ae){this.writeVarint(!!ae)},writeString:function(ae){ae=String(ae),this.realloc(4*ae.length),this.pos++;var ge=this.pos;this.pos=function(ke,Ye,Xe){for(var We,At,nt=0;nt<Ye.length;nt++){if((We=Ye.charCodeAt(nt))>55295&&We<57344){if(!At){We>56319||nt+1===Ye.length?(ke[Xe++]=239,ke[Xe++]=191,ke[Xe++]=189):At=We;continue}if(We<56320){ke[Xe++]=239,ke[Xe++]=191,ke[Xe++]=189,At=We;continue}We=At-55296<<10|We-56320|65536,At=null}else At&&(ke[Xe++]=239,ke[Xe++]=191,ke[Xe++]=189,At=null);We<128?ke[Xe++]=We:(We<2048?ke[Xe++]=We>>6|192:(We<65536?ke[Xe++]=We>>12|224:(ke[Xe++]=We>>18|240,ke[Xe++]=We>>12&63|128),ke[Xe++]=We>>6&63|128),ke[Xe++]=63&We|128)}return Xe}(this.buf,ae,this.pos);var Be=this.pos-ge;Be>=128&&j(ge,Be,this),this.pos=ge-1,this.writeVarint(Be),this.pos+=Be},writeFloat:function(ae){this.realloc(4),h.write(this.buf,ae,this.pos,!0,23,4),this.pos+=4},writeDouble:function(ae){this.realloc(8),h.write(this.buf,ae,this.pos,!0,52,8),this.pos+=8},writeBytes:function(ae){var ge=ae.length;this.writeVarint(ge),this.realloc(ge);for(var Be=0;Be<ge;Be++)this.buf[this.pos++]=ae[Be]},writeRawMessage:function(ae,ge){this.pos++;var Be=this.pos;ae(ge,this);var ke=this.pos-Be;ke>=128&&j(Be,ke,this),this.pos=Be-1,this.writeVarint(ke),this.pos+=ke},writeMessage:function(ae,ge,Be){this.writeTag(ae,o.Bytes),this.writeRawMessage(ge,Be)},writePackedVarint:function(ae,ge){ge.length&&this.writeMessage(ae,k,ge)},writePackedSVarint:function(ae,ge){ge.length&&this.writeMessage(ae,H,ge)},writePackedBoolean:function(ae,ge){ge.length&&this.writeMessage(ae,O,ge)},writePackedFloat:function(ae,ge){ge.length&&this.writeMessage(ae,E,ge)},writePackedDouble:function(ae,ge){ge.length&&this.writeMessage(ae,M,ge)},writePackedFixed32:function(ae,ge){ge.length&&this.writeMessage(ae,P,ge)},writePackedSFixed32:function(ae,ge){ge.length&&this.writeMessage(ae,R,ge)},writePackedFixed64:function(ae,ge){ge.length&&this.writeMessage(ae,$,ge)},writePackedSFixed64:function(ae,ge){ge.length&&this.writeMessage(ae,te,ge)},writeBytesField:function(ae,ge){this.writeTag(ae,o.Bytes),this.writeBytes(ge)},writeFixed32Field:function(ae,ge){this.writeTag(ae,o.Fixed32),this.writeFixed32(ge)},writeSFixed32Field:function(ae,ge){this.writeTag(ae,o.Fixed32),this.writeSFixed32(ge)},writeFixed64Field:function(ae,ge){this.writeTag(ae,o.Fixed64),this.writeFixed64(ge)},writeSFixed64Field:function(ae,ge){this.writeTag(ae,o.Fixed64),this.writeSFixed64(ge)},writeVarintField:function(ae,ge){this.writeTag(ae,o.Varint),this.writeVarint(ge)},writeSVarintField:function(ae,ge){this.writeTag(ae,o.Varint),this.writeSVarint(ge)},writeStringField:function(ae,ge){this.writeTag(ae,o.Bytes),this.writeString(ge)},writeFloatField:function(ae,ge){this.writeTag(ae,o.Fixed32),this.writeFloat(ge)},writeDoubleField:function(ae,ge){this.writeTag(ae,o.Fixed64),this.writeDouble(ge)},writeBooleanField:function(ae,ge){this.writeVarintField(ae,!!ge)}},Ob}var B_=f(c4());const Ub=3;function Yk(h,o,u){o.glyphs=[],h===1&&u.readMessage(Jk,o)}function Jk(h,o,u){if(h===3){const{id:p,bitmap:_,width:m,height:w,left:j,top:k,advance:H}=u.readMessage(eL,{});o.glyphs.push({id:p,bitmap:new Cm({width:m+2*Ub,height:w+2*Ub},_),metrics:{width:m,height:w,left:j,top:k,advance:H}})}else h===4?o.ascender=u.readSVarint():h===5&&(o.descender=u.readSVarint())}function eL(h,o,u){h===1?o.id=u.readVarint():h===2?o.bitmap=u.readBytes():h===3?o.width=u.readVarint():h===4?o.height=u.readVarint():h===5?o.left=u.readSVarint():h===6?o.top=u.readSVarint():h===7&&(o.advance=u.readVarint())}const u4=Ub,oh={horizontal:1,vertical:2,horizontalOnly:3};class Mv{constructor(){this.scale=1,this.fontStack="",this.image=null}static forText(o,u){const p=new Mv;return p.scale=o||1,p.fontStack=u,p}static forImage(o){const u=new Mv;return u.image=o,u}}class N0{constructor(){this.text="",this.sectionIndex=[],this.sections=[],this.imageSectionID=null}static fromFeature(o,u){const p=new N0;for(let _=0;_<o.sections.length;_++){const m=o.sections[_];m.image?p.addImageSection(m):p.addTextSection(m,u)}return p}length(){return this.text.length}getSection(o){return this.sections[this.sectionIndex[o]]}getSections(){return this.sections}getSectionIndex(o){return this.sectionIndex[o]}getCodePoint(o){return this.text.codePointAt(o)}verticalizePunctuation(o){this.text=function(u,p){let _="";for(let m=0;m<u.length;m++){const w=u.charCodeAt(m+1)||null,j=u.charCodeAt(m-1)||null;_+=!p&&(w&&Jn(w)&&!Lv[u[m+1]]||j&&Jn(j)&&!Lv[u[m-1]])||!Lv[u[m]]?u[m]:Lv[u[m]]}return _}(this.text,o)}trim(){let o=0;for(let p=0;p<this.text.length&&E_[this.text.charCodeAt(p)];p++)o++;let u=this.text.length;for(let p=this.text.length-1;p>=0&&p>=o&&E_[this.text.charCodeAt(p)];p--)u--;this.text=this.text.substring(o,u),this.sectionIndex=this.sectionIndex.slice(o,u)}substring(o,u){const p=new N0;return p.text=this.text.substring(o,u),p.sectionIndex=this.sectionIndex.slice(o,u),p.sections=this.sections,p}toString(){return this.text}getMaxScale(){return this.sectionIndex.reduce((o,u)=>Math.max(o,this.sections[u].scale),0)}addTextSection(o,u){this.text+=o.text,this.sections.push(Mv.forText(o.scale,o.fontStack||u));const p=this.sections.length-1;for(let _=0;_<o.text.length;++_)this.sectionIndex.push(p)}addImageSection(o){const u=o.image&&o.image.namePrimary?o.image.getPrimary():null;if(!u)return void Vn("Can't add FormattedSection with an empty image.");const p=this.getNextImageSectionCharCode();p?(this.text+=String.fromCodePoint(p),this.sections.push(Mv.forImage(u)),this.sectionIndex.push(this.sections.length-1)):Vn("Reached maximum number of images 6401")}getNextImageSectionCharCode(){return this.imageSectionID?this.imageSectionID>=63743?null:++this.imageSectionID:(this.imageSectionID=57344,this.imageSectionID)}}function zb(h,o,u,p,_,m,w,j,k,H,E,M,O,P,R){const $=N0.fromFeature(h,_);M===oh.vertical&&$.verticalizePunctuation(O);let te=[];const ie=function(Be,ke,Ye,Xe,We,At){if(!Be)return[];const nt=[],yt=function(Ut,Wt,Pt,mn,Nn,vn){let qn=0;for(let Kn=0;Kn<Ut.length();Kn++){const ir=Ut.getSection(Kn);qn+=d4(Ut.getCodePoint(Kn),ir,mn,Nn,Wt,vn)}return qn/Math.max(1,Math.ceil(qn/Pt))}(Be,ke,Ye,Xe,We,At),bt=Be.text.indexOf("​")>=0;let _t=0;for(let Ut=0;Ut<Be.length();Ut++){const Wt=Be.getSection(Ut),Pt=Be.getCodePoint(Ut);if(E_[Pt]||(_t+=d4(Pt,Wt,Xe,We,ke,At)),Ut<Be.length()-1){const mn=!((Et=Pt)<11904||!(It["Bopomofo Extended"](Et)||It.Bopomofo(Et)||It["CJK Compatibility Forms"](Et)||It["CJK Compatibility Ideographs"](Et)||It["CJK Compatibility"](Et)||It["CJK Radicals Supplement"](Et)||It["CJK Strokes"](Et)||It["CJK Symbols and Punctuation"](Et)||It["CJK Unified Ideographs Extension A"](Et)||It["CJK Unified Ideographs"](Et)||It["Enclosed CJK Letters and Months"](Et)||It["Halfwidth and Fullwidth Forms"](Et)||It.Hiragana(Et)||It["Ideographic Description Characters"](Et)||It["Kangxi Radicals"](Et)||It["Katakana Phonetic Extensions"](Et)||It.Katakana(Et)||It["Vertical Forms"](Et)||It["Yi Radicals"](Et)||It["Yi Syllables"](Et)));(tL[Pt]||mn||Wt.image)&&nt.push(Hb(Ut+1,_t,yt,nt,Qb(Pt,Be.getCodePoint(Ut+1),mn&&bt),!1))}}var Et;return Vb(Hb(Be.length(),_t,yt,nt,0,!0))}($,H,m,o,p,P),{processBidirectionalText:de,processStyledBidirectionalText:fe}=wo;if(de&&$.sections.length===1){const Be=de($.toString(),ie);for(const ke of Be){const Ye=new N0;Ye.text=ke,Ye.sections=$.sections;for(let Xe=0;Xe<ke.length;Xe++)Ye.sectionIndex.push(0);te.push(Ye)}}else if(fe){const Be=fe($.text,$.sectionIndex,ie);for(const ke of Be){const Ye=new N0;Ye.text=ke[0],Ye.sectionIndex=ke[1],Ye.sections=$.sections,te.push(Ye)}}else te=function(Be,ke){const Ye=[],Xe=Be.text;let We=0;for(const At of ke)Ye.push(Be.substring(We,At)),We=At;return We<Xe.length&&Ye.push(Be.substring(We,Xe.length)),Ye}($,ie);const ae=[],ge={positionedLines:ae,text:$.toString(),top:E[1],bottom:E[1],left:E[0],right:E[0],writingMode:M,iconsInText:!1,verticalizable:!1,hasBaseline:!1};return function(Be,ke,Ye,Xe,We,At,nt,yt,bt,_t,Et,Ut){let Wt=0,Pt=0,mn=0;const Nn=yt==="right"?1:yt==="left"?0:.5;let vn=!1;for(const Zn of We){const vr=Zn.getSections();for(const Qr of vr){if(Qr.image)continue;const fi=ke[Qr.fontStack];if(fi&&(vn=fi.ascender!==void 0&&fi.descender!==void 0,!vn))break}if(!vn)break}let qn=0;for(const Zn of We){Zn.trim();const vr=Zn.getMaxScale(),Qr=(vr-1)*dc,fi={positionedGlyphs:[],lineOffset:0};Be.positionedLines[qn]=fi;const xi=fi.positionedGlyphs;let Ei=0;if(!Zn.length()){Pt+=At,++qn;continue}let _i=0,Mi=0;for(let Fs=0;Fs<Zn.length();Fs++){const ni=Zn.getSection(Fs),Ps=Zn.getSectionIndex(Fs),ws=Zn.getCodePoint(Fs);let Zs=ni.scale,el=null,tl=null,ba=null,md=dc,Fo=0;const Do=!(bt===oh.horizontal||!Et&&!An(ws)||Et&&(E_[ws]||(Kn=ws,It.Arabic(Kn)||It["Arabic Supplement"](Kn)||It["Arabic Extended-A"](Kn)||It["Arabic Presentation Forms-A"](Kn)||It["Arabic Presentation Forms-B"](Kn))));if(ni.image){const Ru=Xe[ni.image.serialize()];if(!Ru)continue;ba=ni.image.id,Be.iconsInText=Be.iconsInText||!0,tl=Ru.paddedRect;const nl=Ru.displaySize;Zs=Zs*dc/Ut,el={width:nl[0],height:nl[1],left:0,top:-u4,advance:Do?nl[1]:nl[0],localGlyph:!1},Fo=vn?-el.height*Zs:vr*dc-17-nl[1]*Zs,md=el.advance;const ch=(Do?nl[0]:nl[1])*Zs-dc*vr;ch>0&&ch>Ei&&(Ei=ch)}else{const Ru=Ye[ni.fontStack];if(!Ru)continue;Ru[ws]&&(tl=Ru[ws]);const nl=ke[ni.fontStack];if(!nl)continue;const ch=nl.glyphs[ws];if(!ch)continue;if(el=ch.metrics,md=ws!==8203?dc:0,vn){const Sl=nl.ascender!==void 0?Math.abs(nl.ascender):0,Im=nl.descender!==void 0?Math.abs(nl.descender):0,z0=(Sl+Im)*Zs;_i<z0&&(_i=z0,Mi=(Sl-Im)/2*Zs),Fo=-Sl*Zs}else Fo=(vr-Zs)*dc-17}Do?(Be.verticalizable=!0,xi.push({glyph:ws,imageName:ba,x:Wt,y:Pt+Fo,vertical:Do,scale:Zs,localGlyph:el.localGlyph,fontStack:ni.fontStack,sectionIndex:Ps,metrics:el,rect:tl}),Wt+=md*Zs+_t):(xi.push({glyph:ws,imageName:ba,x:Wt,y:Pt+Fo,vertical:Do,scale:Zs,localGlyph:el.localGlyph,fontStack:ni.fontStack,sectionIndex:Ps,metrics:el,rect:tl}),Wt+=el.advance*Zs+_t)}xi.length!==0&&(mn=Math.max(Wt-_t,mn),vn?f4(xi,Nn,Ei,Mi,At*vr/2):f4(xi,Nn,Ei,0,At/2)),Wt=0;const qs=At*vr+Ei;fi.lineOffset=Math.max(Ei,Qr),Pt+=qs,++qn}var Kn;const ir=Pt,{horizontalAlign:Bn,verticalAlign:Br}=$b(nt);(function(Zn,vr,Qr,fi,xi,Ei){const _i=(vr-Qr)*xi,Mi=-Ei*fi;for(const qs of Zn)for(const Fs of qs.positionedGlyphs)Fs.x+=_i,Fs.y+=Mi})(Be.positionedLines,Nn,Bn,Br,mn,ir),Be.top+=-Br*ir,Be.bottom=Be.top+ir,Be.left+=-Bn*mn,Be.right=Be.left+mn,Be.hasBaseline=vn}(ge,o,u,p,te,w,j,k,M,H,O,R),!function(Be){for(const ke of Be)if(ke.positionedGlyphs.length!==0)return!1;return!0}(ae)&&ge}const E_={9:!0,10:!0,11:!0,12:!0,13:!0,32:!0},tL={10:!0,32:!0,38:!0,40:!0,41:!0,43:!0,45:!0,47:!0,173:!0,183:!0,8203:!0,8208:!0,8211:!0,8231:!0};function d4(h,o,u,p,_,m){if(o.image){const w=p[o.image.serialize()];return w?w.displaySize[0]*o.scale*dc/m+_:0}{const w=u[o.fontStack],j=w&&w.glyphs[h];return j?j.metrics.advance*o.scale+_:0}}function h4(h,o,u,p){const _=Math.pow(h-o,2);return p?h<o?_/2:2*_:_+Math.abs(u)*u}function Qb(h,o,u){let p=0;return h===10&&(p-=1e4),u&&(p+=150),h!==40&&h!==65288||(p+=50),o!==41&&o!==65289||(p+=50),p}function Hb(h,o,u,p,_,m){let w=null,j=h4(o,u,_,m);for(const k of p){const H=h4(o-k.x,u,_,m)+k.badness;H<=j&&(w=k,j=H)}return{index:h,x:o,priorBreak:w,badness:j}}function Vb(h){return h?Vb(h.priorBreak).concat(h.index):[]}function $b(h){let o=.5,u=.5;switch(h){case"right":case"top-right":case"bottom-right":o=1;break;case"left":case"top-left":case"bottom-left":o=0}switch(h){case"bottom":case"bottom-right":case"bottom-left":u=1;break;case"top":case"top-right":case"top-left":u=0}return{horizontalAlign:o,verticalAlign:u}}function f4(h,o,u,p,_){if(!(o||u||p||_))return;const m=h.length-1,w=h[m],j=(w.x+w.metrics.advance*w.scale)*o;for(let k=0;k<=m;k++)h[k].x-=j,h[k].y+=u+p+_}function nL(h,o,u,p){const{horizontalAlign:_,verticalAlign:m}=$b(p),w=u[0]-h.displaySize[0]*_,j=u[1]-h.displaySize[1]*m;return{imagePrimary:h,imageSecondary:o,top:j,bottom:j+h.displaySize[1],left:w,right:w+h.displaySize[0]}}function T_(h,o,u,p,_,m){const w=h.imagePrimary;let j;if(w.content){const te=w.content,ie=w.pixelRatio||1;j=[te[0]/ie,te[1]/ie,w.displaySize[0]-te[2]/ie,w.displaySize[1]-te[3]/ie]}const k=o.left*m,H=o.right*m;let E,M,O,P;u==="width"||u==="both"?(P=_[0]+k-p[3],M=_[0]+H+p[1]):(P=_[0]+(k+H-w.displaySize[0])/2,M=P+w.displaySize[0]);const R=o.top*m,$=o.bottom*m;return u==="height"||u==="both"?(E=_[1]+R-p[0],O=_[1]+$+p[2]):(E=_[1]+(R+$-w.displaySize[1])/2,O=E+w.displaySize[1]),{imagePrimary:w,imageSecondary:void 0,top:E,right:M,bottom:O,left:P,collisionPadding:j}}class yA extends Dt{constructor(o,u,p,_,m){super(o,u),this.angle=_,this.z=p,m!==void 0&&(this.segment=m)}clone(){return new yA(this.x,this.y,this.z,this.angle,this.segment)}}function p4(h,o,u,p,_){if(o.segment===void 0)return!0;let m=o,w=o.segment+1,j=0;for(;j>-u/2;){if(w--,w<0)return!1;j-=h[w].dist(m),m=h[w]}j+=h[w].dist(h[w+1]),w++;const k=[];let H=0;for(;j<u/2;){const E=h[w],M=h[w+1];if(!M)return!1;let O=h[w-1].angleTo(E)-E.angleTo(M);for(O=Math.abs((O+3*Math.PI)%(2*Math.PI)-Math.PI),k.push({distance:j,angleDelta:O}),H+=O;j-k[0].distance>p;)H-=k.shift().angleDelta;if(H>_)return!1;w++,j+=E.dist(M)}return!0}function A4(h){let o=0;for(let u=0;u<h.length-1;u++)o+=h[u].dist(h[u+1]);return o}function Nu(h,o,u){return h?.6*o*u:0}function I_(h,o){return Math.max(h?h.right-h.left:0,o?o.right-o.left:0)}function rL(h,o,u,p,_,m){const w=Nu(u,_,m),j=I_(u,p)*m;let k=0;const H=A4(h)/2;for(let E=0;E<h.length-1;E++){const M=h[E],O=h[E+1],P=M.dist(O);if(k+P>H){const R=(H-k)/P,$=Ur(M.x,O.x,R),te=Ur(M.y,O.y,R),ie=new yA($,te,0,O.angleTo(M),E);return!w||p4(h,ie,j,w,o)?ie:void 0}k+=P}}function iL(h,o,u,p,_,m,w,j,k){const H=Nu(p,m,w),E=I_(p,_),M=E*w,O=h[0].x===0||h[0].x===k||h[0].y===0||h[0].y===k;return o-M<o/4&&(o=M+o/4),m4(h,O?o/2*j%o:(E/2+2*m)*w*j%o,o,H,u,M,O,!1,k)}function m4(h,o,u,p,_,m,w,j,k){const H=m/2,E=A4(h);let M=0,O=o-u,P=[];for(let R=0;R<h.length-1;R++){const $=h[R],te=h[R+1],ie=$.dist(te),de=te.angleTo($);for(;O+u<M+ie;){O+=u;const fe=(O-M)/ie,ae=Ur($.x,te.x,fe),ge=Ur($.y,te.y,fe);if(ae>=0&&ae<k&&ge>=0&&ge<k&&O-H>=0&&O+H<=E){const Be=new yA(ae,ge,0,de,R);p&&!p4(h,Be,m,p,_)||P.push(Be)}}M+=ie}return j||P.length||w||(P=m4(h,M/2,u,p,_,m,w,!0,k)),P}function g4(h,o,u,p,_){const m=[];for(let w=0;w<h.length;w++){const j=h[w];let k;for(let H=0;H<j.length-1;H++){let E=j[H],M=j[H+1];E.x<o&&M.x<o||(E.x<o?E=new Dt(o,E.y+(o-E.x)/(M.x-E.x)*(M.y-E.y))._round():M.x<o&&(M=new Dt(o,E.y+(o-E.x)/(M.x-E.x)*(M.y-E.y))._round()),E.y<u&&M.y<u||(E.y<u?E=new Dt(E.x+(u-E.y)/(M.y-E.y)*(M.x-E.x),u)._round():M.y<u&&(M=new Dt(E.x+(u-E.y)/(M.y-E.y)*(M.x-E.x),u)._round()),E.x>=p&&M.x>=p||(E.x>=p?E=new Dt(p,E.y+(p-E.x)/(M.x-E.x)*(M.y-E.y))._round():M.x>=p&&(M=new Dt(p,E.y+(p-E.x)/(M.x-E.x)*(M.y-E.y))._round()),E.y>=_&&M.y>=_||(E.y>=_?E=new Dt(E.x+(_-E.y)/(M.y-E.y)*(M.x-E.x),_)._round():M.y>=_&&(M=new Dt(E.x+(_-E.y)/(M.y-E.y)*(M.x-E.x),_)._round()),k&&E.equals(k[k.length-1])||(k=[E],m.push(k)),k.push(M)))))}}return m}function j_(h){let o=0,u=0;for(const w of h)o+=w.w*w.h,u=Math.max(u,w.w);h.sort((w,j)=>j.h-w.h);const p=[{x:0,y:0,w:Math.max(Math.ceil(Math.sqrt(o/.95)),u),h:1/0}];let _=0,m=0;for(const w of h)for(let j=p.length-1;j>=0;j--){const k=p[j];if(!(w.w>k.w||w.h>k.h)){if(w.x=k.x,w.y=k.y,m=Math.max(m,w.y+w.h),_=Math.max(_,w.x+w.w),w.w===k.w&&w.h===k.h){const H=p.pop();j<p.length&&(p[j]=H)}else w.h===k.h?(k.x+=w.w,k.w-=w.w):w.w===k.w?(k.y+=w.h,k.h-=w.h):(p.push({x:k.x+w.w,y:k.y,w:k.w-w.w,h:w.h}),k.y+=w.h,k.h-=w.h);break}}return{w:_,h:m,fill:o/(_*m)||0}}He(yA,"Anchor");const Nv=1;class Rv{constructor(o,{pixelRatio:u,version:p,stretchX:_,stretchY:m,content:w},j){this.paddedRect=o,this.pixelRatio=u,this.stretchX=_,this.stretchY=m,this.content=w,this.version=p,this.padding=j}get tl(){return[this.paddedRect.x+this.padding,this.paddedRect.y+this.padding]}get br(){return[this.paddedRect.x+this.paddedRect.w-this.padding,this.paddedRect.y+this.paddedRect.h-this.padding]}get displaySize(){return[(this.paddedRect.w-2*this.padding)/this.pixelRatio,(this.paddedRect.h-2*this.padding)/this.pixelRatio]}}class y4{constructor(o,u,p){const _={},m={};this.haveRenderCallbacks=[];const w=[];this.addImages(o,_,Nv,w),this.addImages(u,m,2,w);const{w:j,h:k}=j_(w),H=new Pc({width:j||1,height:k||1});for(const E in o){const M=o[E],O=_[E].paddedRect;Pc.copy(M.data,H,{x:0,y:0},{x:O.x+Nv,y:O.y+Nv},M.data,p,M.sdf)}for(const E in u){const M=u[E],O=m[E].paddedRect;let P=m[E].padding;const R=O.x+P,$=O.y+P,te=M.data.width,ie=M.data.height;P=P>1?P-1:P,Pc.copy(M.data,H,{x:0,y:0},{x:R,y:$},M.data,p),Pc.copy(M.data,H,{x:0,y:ie-P},{x:R,y:$-P},{width:te,height:P},p),Pc.copy(M.data,H,{x:0,y:0},{x:R,y:$+ie},{width:te,height:P},p),Pc.copy(M.data,H,{x:te-P,y:0},{x:R-P,y:$},{width:P,height:ie},p),Pc.copy(M.data,H,{x:0,y:0},{x:R+te,y:$},{width:P,height:ie},p),Pc.copy(M.data,H,{x:te-P,y:ie-P},{x:R-P,y:$-P},{width:P,height:P},p),Pc.copy(M.data,H,{x:0,y:ie-P},{x:R+te,y:$-P},{width:P,height:P},p),Pc.copy(M.data,H,{x:0,y:0},{x:R+te,y:$+ie},{width:P,height:P},p),Pc.copy(M.data,H,{x:te-P,y:0},{x:R-P,y:$+ie},{width:P,height:P},p)}this.image=H,this.iconPositions=_,this.patternPositions=m}addImages(o,u,p,_){for(const m in o){const w=o[m],j={x:0,y:0,w:w.data.width+2*p,h:w.data.height+2*p};_.push(j),u[m]=new Rv(j,w,p),w.hasRenderCallback&&this.haveRenderCallbacks.push(m)}}patchUpdatedImages(o,u,p){this.haveRenderCallbacks=this.haveRenderCallbacks.filter(_=>o.hasImage(_,p)),o.dispatchRenderCallbacks(this.haveRenderCallbacks,p);for(const _ in o.getUpdatedImages(p)){const m=Yo.build(_).getSerializedPrimary();this.patchUpdatedImage(this.iconPositions[m],o.getImage(_,p),u),this.patchUpdatedImage(this.patternPositions[m],o.getImage(_,p),u)}}patchUpdatedImage(o,u,p){if(!o||!u||o.version===u.version)return;o.version=u.version;const[_,m]=o.tl;p.update(u.data,{position:{x:_,y:m}})}}He(Rv,"ImagePosition"),He(y4,"ImageAtlas");const Ov=1e20;function v4(h,o,u,p,_,m,w,j,k){for(let H=o;H<o+p;H++)x4(h,u*m+H,m,_,w,j,k);for(let H=u;H<u+_;H++)x4(h,H*m+o,1,p,w,j,k)}function x4(h,o,u,p,_,m,w){m[0]=0,w[0]=-Ov,w[1]=Ov,_[0]=h[o];for(let j=1,k=0,H=0;j<p;j++){_[j]=h[o+j*u];const E=j*j;do{const M=m[k];H=(_[j]-_[M]+E-M*M)/(j-M)/2}while(H<=w[k]&&--k>-1);k++,m[k]=j,w[k]=H,w[k+1]=Ov}for(let j=0,k=0;j<p;j++){for(;w[k+1]<j;)k++;const H=m[k],E=j-H;h[o+j*u]=_[H]+E*E}}const zh=2,Gb={none:0,ideographs:1,all:2};class R0{constructor(o,u,p){this.requestManager=o,this.localGlyphMode=u,this.localFontFamily=p,this.urls={},this.entries={},this.localGlyphs={200:{},400:{},500:{},900:{}}}setURL(o,u){this.urls[u]=o}getGlyphs(o,u,p){const _=[],m=this.urls[u]||ve.GLYPHS_URL;for(const w in o)for(const j of o[w])_.push({stack:w,id:j});qt(_,({stack:w,id:j},k)=>{let H=this.entries[w];H||(H=this.entries[w]={glyphs:{},requests:{},ranges:{},ascender:void 0,descender:void 0});let E=H.glyphs[j];if(E!==void 0)return void k(null,{stack:w,id:j,glyph:E});if(E=this._tinySDF(H,w,j),E)return H.glyphs[j]=E,void k(null,{stack:w,id:j,glyph:E});const M=Math.floor(j/256);if(256*M>65535)return Vn("glyphs > 65535 not supported"),void k(null,{stack:w,id:j,glyph:E});if(H.ranges[M])return void k(null,{stack:w,id:j,glyph:E});let O=H.requests[M];O||(O=H.requests[M]=[],R0.loadGlyphRange(w,M,m,this.requestManager,(P,R)=>{if(R){H.ascender=R.ascender,H.descender=R.descender;for(const $ in R.glyphs)this._doesCharSupportLocalGlyph(+$)||(H.glyphs[+$]=R.glyphs[+$]);H.ranges[M]=!0}for(const $ of O)$(P,R);delete H.requests[M]})),O.push((P,R)=>{P?k(P):R&&k(null,{stack:w,id:j,glyph:R.glyphs[j]||null})})},(w,j)=>{if(w)p(w);else if(j){const k={};for(const{stack:H,id:E,glyph:M}of j)k[H]===void 0&&(k[H]={}),k[H].glyphs===void 0&&(k[H].glyphs={}),k[H].glyphs[E]=M&&{id:M.id,bitmap:M.bitmap.clone(),metrics:M.metrics},k[H].ascender=this.entries[H].ascender,k[H].descender=this.entries[H].descender;p(null,k)}})}_doesCharSupportLocalGlyph(o){return this.localGlyphMode!==Gb.none&&(this.localGlyphMode===Gb.all?!!this.localFontFamily:!!this.localFontFamily&&(It["CJK Unified Ideographs"](o)||It["Hangul Syllables"](o)||It.Hiragana(o)||It.Katakana(o)||It["CJK Symbols and Punctuation"](o)||It["CJK Unified Ideographs Extension A"](o)||It["CJK Unified Ideographs Extension B"](o)||It.Osage(o)))}_tinySDF(o,u,p){const _=this.localFontFamily;if(!_||!this._doesCharSupportLocalGlyph(p))return;let m=o.tinySDF;if(!m){let $="400";/bold/i.test(u)?$="900":/medium/i.test(u)?$="500":/light/i.test(u)&&($="200"),m=o.tinySDF=new R0.TinySDF({fontFamily:_,fontWeight:$,fontSize:24*zh,buffer:3*zh,radius:8*zh}),m.fontWeight=$}if(this.localGlyphs[m.fontWeight][p])return this.localGlyphs[m.fontWeight][p];const w=String.fromCodePoint(p),{data:j,width:k,height:H,glyphWidth:E,glyphHeight:M,glyphLeft:O,glyphTop:P,glyphAdvance:R}=m.draw(w);return this.localGlyphs[m.fontWeight][p]={id:p,bitmap:new Cm({width:k,height:H},j),metrics:{width:E/zh,height:M/zh,left:O/zh,top:P/zh-27,advance:R/zh,localGlyph:!0}}}}R0.loadGlyphRange=function(h,o,u,p,_){const m=256*o,w=m+255,j=p.transformRequest(p.normalizeGlyphsURL(u).replace("{fontstack}",h).replace("{range}",`${m}-${w}`),Yl.Glyphs);Dc(j,(k,H)=>{if(k)_(k);else if(H){const E={},M=function(O){return new B_(O).readFields(Yk,{})}(H);for(const O of M.glyphs)E[O.id]=O;_(null,{glyphs:E,ascender:M.ascender,descender:M.descender})}})},R0.TinySDF=class{constructor({fontSize:h=24,buffer:o=3,radius:u=8,cutoff:p=.25,fontFamily:_="sans-serif",fontWeight:m="normal",fontStyle:w="normal"}={}){this.buffer=o,this.cutoff=p,this.radius=u;const j=this.size=h+4*o,k=this._createCanvas(j),H=this.ctx=k.getContext("2d",{willReadFrequently:!0});H.font=`${w} ${m} ${h}px ${_}`,H.textBaseline="alphabetic",H.textAlign="left",H.fillStyle="black",this.gridOuter=new Float64Array(j*j),this.gridInner=new Float64Array(j*j),this.f=new Float64Array(j),this.z=new Float64Array(j+1),this.v=new Uint16Array(j)}_createCanvas(h){const o=document.createElement("canvas");return o.width=o.height=h,o}draw(h){const{width:o,actualBoundingBoxAscent:u,actualBoundingBoxDescent:p,actualBoundingBoxLeft:_,actualBoundingBoxRight:m}=this.ctx.measureText(h),w=Math.ceil(u),j=Math.max(0,Math.min(this.size-this.buffer,Math.ceil(m-_))),k=Math.min(this.size-this.buffer,w+Math.ceil(p)),H=j+2*this.buffer,E=k+2*this.buffer,M=Math.max(H*E,0),O=new Uint8ClampedArray(M),P={data:O,width:H,height:E,glyphWidth:j,glyphHeight:k,glyphTop:w,glyphLeft:0,glyphAdvance:o};if(j===0||k===0)return P;const{ctx:R,buffer:$,gridInner:te,gridOuter:ie}=this;R.clearRect($,$,j,k),R.fillText(h,$,$+w);const de=R.getImageData($,$,j,k);ie.fill(Ov,0,M),te.fill(0,0,M);for(let fe=0;fe<k;fe++)for(let ae=0;ae<j;ae++){const ge=de.data[4*(fe*j+ae)+3]/255;if(ge===0)continue;const Be=(fe+$)*H+ae+$;if(ge===1)ie[Be]=0,te[Be]=Ov;else{const ke=.5-ge;ie[Be]=ke>0?ke*ke:0,te[Be]=ke<0?ke*ke:0}}v4(ie,0,0,H,E,H,this.f,this.v,this.z),v4(te,$,$,j,k,H,this.f,this.v,this.z);for(let fe=0;fe<M;fe++){const ae=Math.sqrt(ie[fe])-Math.sqrt(te[fe]);O[fe]=Math.round(255-255*(ae/this.radius+this.cutoff))}return P}};const Em=Nv;function F_(h,o){return h+o[1]-o[0]}function P_(h,o,u,p,_=1){const m=[],w=h.imagePrimary,j=w.pixelRatio,k=w.paddedRect.w-2*Em,H=w.paddedRect.h-2*Em,E=(h.right-h.left)*_,M=(h.bottom-h.top)*_,O=w.stretchX||[[0,k]],P=w.stretchY||[[0,H]],R=O.reduce(F_,0),$=P.reduce(F_,0),te=k-R,ie=H-$;let de=0,fe=R,ae=0,ge=$,Be=0,ke=te,Ye=0,Xe=ie;if(w.content&&p){const At=w.content;de=k_(O,0,At[0]),ae=k_(P,0,At[1]),fe=k_(O,At[0],At[2]),ge=k_(P,At[1],At[3]),Be=At[0]-de,Ye=At[1]-ae,ke=At[2]-At[0]-fe,Xe=At[3]-At[1]-ge}const We=(At,nt,yt,bt)=>{const _t=L_(At.stretch-de,fe,E,h.left*_),Et=M_(At.fixed-Be,ke,At.stretch,R),Ut=L_(nt.stretch-ae,ge,M,h.top*_),Wt=M_(nt.fixed-Ye,Xe,nt.stretch,$),Pt=L_(yt.stretch-de,fe,E,h.left*_),mn=M_(yt.fixed-Be,ke,yt.stretch,R),Nn=L_(bt.stretch-ae,ge,M,h.top*_),vn=M_(bt.fixed-Ye,Xe,bt.stretch,$),qn=new Dt(_t,Ut),Kn=new Dt(Pt,Ut),ir=new Dt(Pt,Nn),Bn=new Dt(_t,Nn),Br=new Dt(Et/j,Wt/j),Zn=new Dt(mn/j,vn/j),vr=o*Math.PI/180;if(vr){const Mi=Math.sin(vr),qs=Math.cos(vr),Fs=[qs,-Mi,Mi,qs];qn._matMult(Fs),Kn._matMult(Fs),Bn._matMult(Fs),ir._matMult(Fs)}const Qr=At.stretch+At.fixed,fi=yt.stretch+yt.fixed,xi=nt.stretch+nt.fixed,Ei=bt.stretch+bt.fixed,_i=h.imageSecondary;return{tl:qn,tr:Kn,bl:Bn,br:ir,texPrimary:{x:w.paddedRect.x+Em+Qr,y:w.paddedRect.y+Em+xi,w:fi-Qr,h:Ei-xi},texSecondary:_i?{x:_i.paddedRect.x+Em+Qr,y:_i.paddedRect.y+Em+xi,w:fi-Qr,h:Ei-xi}:void 0,writingMode:void 0,glyphOffset:[0,0],sectionIndex:0,pixelOffsetTL:Br,pixelOffsetBR:Zn,minFontScaleX:ke/j/E,minFontScaleY:Xe/j/M,isSDF:u}};if(p&&(w.stretchX||w.stretchY)){const At=_4(O,te,R),nt=_4(P,ie,$);for(let yt=0;yt<At.length-1;yt++){const bt=At[yt],_t=At[yt+1];for(let Et=0;Et<nt.length-1;Et++)m.push(We(bt,nt[Et],_t,nt[Et+1]))}}else m.push(We({fixed:0,stretch:-1},{fixed:0,stretch:-1},{fixed:0,stretch:k+1},{fixed:0,stretch:H+1}));return m}function k_(h,o,u){let p=0;for(const _ of h)p+=Math.max(o,Math.min(u,_[1]))-Math.max(o,Math.min(u,_[0]));return p}function _4(h,o,u){const p=[{fixed:-Em,stretch:0}];for(const[_,m]of h){const w=p[p.length-1];p.push({fixed:_-w.stretch,stretch:w.stretch}),p.push({fixed:_-w.stretch,stretch:w.stretch+(m-_)})}return p.push({fixed:o+Em,stretch:u}),p}function L_(h,o,u,p){return h/o*u+p}function M_(h,o,u,p){return h-o*u/p}function sL(h,o,u,p){const _=o+h.positionedLines[p].lineOffset;return p===0?u+_/2:u+(_+(o+h.positionedLines[p-1].lineOffset))/2}function oL(h,o=1,u=!1){let p=1/0,_=1/0,m=-1/0,w=-1/0;const j=h[0];for(let P=0;P<j.length;P++){const R=j[P];(!P||R.x<p)&&(p=R.x),(!P||R.y<_)&&(_=R.y),(!P||R.x>m)&&(m=R.x),(!P||R.y>w)&&(w=R.y)}const k=Math.min(m-p,w-_);let H=k/2;const E=new Cc([],aL);if(k===0)return new Dt(p,_);for(let P=p;P<m;P+=k)for(let R=_;R<w;R+=k)E.push(new O0(P+H,R+H,H,h));let M=function(P){let R=0,$=0,te=0;const ie=P[0];for(let de=0,fe=ie.length,ae=fe-1;de<fe;ae=de++){const ge=ie[de],Be=ie[ae],ke=ge.x*Be.y-Be.x*ge.y;$+=(ge.x+Be.x)*ke,te+=(ge.y+Be.y)*ke,R+=3*ke}return new O0($/R,te/R,0,P)}(h),O=E.length;for(;E.length;){const P=E.pop();(P.d>M.d||!M.d)&&(M=P,u&&console.log("found best %d after %d probes",Math.round(1e4*P.d)/1e4,O)),P.max-M.d<=o||(H=P.h/2,E.push(new O0(P.p.x-H,P.p.y-H,H,h)),E.push(new O0(P.p.x+H,P.p.y-H,H,h)),E.push(new O0(P.p.x-H,P.p.y+H,H,h)),E.push(new O0(P.p.x+H,P.p.y+H,H,h)),O+=4)}return u&&(console.log(`num probes: ${O}`),console.log(`best distance: ${M.d}`)),M.p}function aL(h,o){return o.max-h.max}class O0{constructor(o,u,p,_){this.p=new Dt(o,u),this.h=p,this.d=function(m,w){let j=!1,k=1/0;for(let H=0;H<w.length;H++){const E=w[H];for(let M=0,O=E.length,P=O-1;M<O;P=M++){const R=E[M],$=E[P];R.y>m.y!=$.y>m.y&&m.x<($.x-R.x)*(m.y-R.y)/($.y-R.y)+R.x&&(j=!j),k=Math.min(k,ut(m,R,$))}}return(j?1:-1)*Math.sqrt(k)}(this.p,_),this.max=this.d+this.h*Math.SQRT2}}const Kb=Number.POSITIVE_INFINITY,lL=Math.sqrt(2);function w4(h,[o,u]){let p=0,_=0;if(u===Kb){o<0&&(o=0);const m=o/lL;switch(h){case"top-right":case"top-left":_=m-7;break;case"bottom-right":case"bottom-left":_=7-m;break;case"bottom":_=7-o;break;case"top":_=o-7}switch(h){case"top-right":case"bottom-right":p=-m;break;case"top-left":case"bottom-left":p=m;break;case"left":p=o;break;case"right":p=-o}}else{switch(o=Math.abs(o),u=Math.abs(u),h){case"top-right":case"top-left":case"top":_=u-7;break;case"bottom-right":case"bottom-left":case"bottom":_=7-u}switch(h){case"top-right":case"bottom-right":case"right":p=-o;break;case"top-left":case"bottom-left":case"left":p=o}}return[p,_]}function Wb(h){switch(h){case"right":case"top-right":case"bottom-right":return"right";case"left":case"top-left":case"bottom-left":return"left"}return"center"}function cL(h,o,u,p,_,m,w,j,k,H,E,M,O,P,R,$){let te=m.textMaxSize.evaluate(o,{},O);te===void 0?te=w*m.textScaleFactor:te*=m.textScaleFactor;const ie=h.layers[0].layout,de=ie.get("icon-offset").evaluate(o,{},O),fe=C4(u.horizontal)||u.vertical,ae=P.name==="globe",ge=dc,Be=w*m.textScaleFactor/ge,ke=h.tilePixelRatio*te/ge,Ye=(Et=h.overscaling,h.zoom>18&&Et>2&&(Et>>=1),Math.max(Wn/(512*Et),1)*ie.get("symbol-spacing")),Xe=ie.get("text-padding")*h.tilePixelRatio,We=ie.get("icon-padding")*h.tilePixelRatio,At=Vt(ie.get("text-max-angle")),nt=ie.get("text-rotation-alignment")==="map"&&ie.get("symbol-placement")!=="point",yt=ie.get("icon-rotation-alignment")==="map"&&ie.get("symbol-placement")!=="point",bt=ie.get("symbol-placement"),_t=Ye/2;var Et;const Ut=ie.get("icon-text-fit").evaluate(o,{},O),Wt=ie.get("icon-text-fit-padding").evaluate(o,{},O),Pt=Ut!=="none";let mn;h.hasAnyIconTextFit===!1&&Pt&&(h.hasAnyIconTextFit=!0),p&&Pt&&(h.allowVerticalPlacement&&u.vertical&&(mn=T_(p,u.vertical,Ut,Wt,de,Be)),fe&&(p=T_(p,fe,Ut,Wt,de,Be)));const Nn=(vn,qn,Kn)=>{if(qn.x<0||qn.x>=Wn||qn.y<0||qn.y>=Wn)return;let ir=null;if(ae){const{x:Bn,y:Br,z:Zn}=P.projectTilePoint(qn.x,qn.y,Kn);ir={anchor:new yA(Bn,Br,Zn,0,void 0),up:P.upVector(Kn,qn.x,qn.y)}}(function(Bn,Br,Zn,vr,Qr,fi,xi,Ei,_i,Mi,qs,Fs,ni,Ps,ws,Zs,el,tl,ba,md,Fo,Do,Ru,nl,ch,Sl,Im,z0){const Q0=Bn.addToLineVertexArray(Br,vr);let Ng,H0,V0,W4,aH,lH,cH,uH=0,dH=0,hH=0,fH=0,VL=-1,$L=-1;const jm={};let pH=qu("");const $v=Zn?Zn.anchor:Br,GL=_i.layout.get("icon-text-fit").evaluate(Fo,{},Sl)!=="none";let KL=0,WL=0;if(_i._unevaluatedLayout.getValue("text-radial-offset")===void 0?[KL,WL]=_i.layout.get("text-offset").evaluate(Fo,{},Sl).map(Uf=>Uf*dc):(KL=_i.layout.get("text-radial-offset").evaluate(Fo,{},Sl)*dc,WL=Kb),Bn.allowVerticalPlacement&&Qr.vertical){const Uf=Qr.vertical;if(ws)lH=qb(Uf),Ei&&(cH=qb(Ei));else{const Qh=_i.layout.get("text-rotate").evaluate(Fo,{},Sl)+90;V0=N_(Mi,$v,Br,qs,Fs,ni,Uf,Ps,Qh,Zs),Ei&&(W4=N_(Mi,$v,Br,qs,Fs,ni,Ei,tl,Qh))}}if(fi){const Uf=Bn.iconSizeData,Qh=nl?S_(Bn.iconSizeData,Bn.layers[0]._unevaluatedLayout._values["icon-size"],Sl,Bn.zoom,Fo):1,G_=_i.layout.get("icon-rotate").evaluate(Fo,{},Sl),AH=P_(fi,G_,Ru,GL,nl?1/Qh:Do.iconScaleFactor),ZL=Ei?P_(Ei,G_,Ru,GL,Do.iconScaleFactor):void 0;H0=N_(Mi,$v,Br,qs,Fs,ni,fi,tl,G_,null,nl?Do.iconScaleFactor*Qh:1),uH=4*AH.length;let Gv=null;Uf.kind==="source"?(Gv=[Rf*_i.layout.get("icon-size").evaluate(Fo,{},Sl)*Do.iconScaleFactor],Gv[0]>Tm&&Vn(`${Bn.layerIds[0]}: Value for "icon-size" is >= ${Dv}. Reduce your "icon-size".`)):Uf.kind==="composite"&&(Gv=[Rf*Do.compositeIconSizes[0].evaluate(Fo,{},Sl)*Do.iconScaleFactor,Rf*Do.compositeIconSizes[1].evaluate(Fo,{},Sl)*Do.iconScaleFactor],(Gv[0]>Tm||Gv[1]>Tm)&&Vn(`${Bn.layerIds[0]}: Value for "icon-size" is >= ${Dv}. Reduce your "icon-size".`)),Bn.addSymbols(Bn.icon,AH,Gv,md,ba,Fo,!1,Zn,Br,Q0.lineStartIndex,Q0.lineLength,-1,ch,Sl,Im,z0),VL=Bn.icon.placedSymbolArray.length-1,ZL&&(dH=4*ZL.length,Bn.addSymbols(Bn.icon,ZL,Gv,md,ba,Fo,oh.vertical,Zn,Br,Q0.lineStartIndex,Q0.lineLength,-1,ch,Sl,Im,z0),$L=Bn.icon.placedSymbolArray.length-1)}for(const Uf in Qr.horizontal){const Qh=Qr.horizontal[Uf];Ng||(pH=qu(Qh.text),ws?aH=qb(Qh):Ng=N_(Mi,$v,Br,qs,Fs,ni,Qh,Ps,_i.layout.get("text-rotate").evaluate(Fo,{},Sl),Zs));const G_=Qh.positionedLines.length===1;if(hH+=b4(Bn,Zn,Br,Qh,xi,_i,ws,Fo,Zs,Q0,Qr.vertical?oh.horizontal:oh.horizontalOnly,G_?Object.keys(Qr.horizontal):[Uf],jm,VL,Do,ch,Sl,Im),G_)break}Qr.vertical&&(fH+=b4(Bn,Zn,Br,Qr.vertical,xi,_i,ws,Fo,Zs,Q0,oh.vertical,["vertical"],jm,$L,Do,ch,Sl,Im));let $0=-1;const qL=(Uf,Qh)=>Uf?Math.max(Uf,Qh):Qh;$0=qL(aH,$0),$0=qL(lH,$0),$0=qL(cH,$0);const Vpe=$0>-1?1:0;Bn.glyphOffsetArray.length>=65535&&Vn("Too many glyphs being rendered in a tile. See https://github.com/mapbox/mapbox-gl-js/issues/2907"),Fo.sortKey!==void 0&&Bn.addToSortKeyRanges(Bn.symbolInstances.length,Fo.sortKey),Bn.symbolInstances.emplaceBack(Br.x,Br.y,$v.x,$v.y,$v.z,jm.right>=0?jm.right:-1,jm.center>=0?jm.center:-1,jm.left>=0?jm.left:-1,jm.vertical>=0?jm.vertical:-1,VL,$L,pH,Ng!==void 0?Ng:Bn.collisionBoxArray.length,Ng!==void 0?Ng+1:Bn.collisionBoxArray.length,V0!==void 0?V0:Bn.collisionBoxArray.length,V0!==void 0?V0+1:Bn.collisionBoxArray.length,H0!==void 0?H0:Bn.collisionBoxArray.length,H0!==void 0?H0+1:Bn.collisionBoxArray.length,W4||Bn.collisionBoxArray.length,W4?W4+1:Bn.collisionBoxArray.length,qs,hH,fH,uH,dH,Vpe,0,KL,WL,$0,0,GL?1:0)})(h,qn,ir,vn,u,p,_,mn,h.layers[0],h.collisionBoxArray,o.index,o.sourceLayerIndex,h.index,Xe,nt,k,0,We,yt,de,o,m,H,E,M,O,R,$)};if(bt==="line")for(const vn of g4(o.geometry,0,0,Wn,Wn)){const qn=iL(vn,Ye,At,u.vertical||fe,p,ge,ke,h.overscaling,Wn);for(const Kn of qn)fe&&uL(h,fe.text,_t,Kn)||Nn(vn,Kn,O)}else if(bt==="line-center"){for(const vn of o.geometry)if(vn.length>1){const qn=rL(vn,At,u.vertical||fe,p,ge,ke);qn&&Nn(vn,qn,O)}}else if(o.type==="Polygon")for(const vn of Cv(o.geometry,0)){const qn=oL(vn,16);Nn(vn[0],new yA(qn.x,qn.y,0,0,void 0),O)}else if(o.type==="LineString")for(const vn of o.geometry)Nn(vn,new yA(vn[0].x,vn[0].y,0,0,void 0),O);else if(o.type==="Point")for(const vn of o.geometry)for(const qn of vn)Nn([qn],new yA(qn.x,qn.y,0,0,void 0),O)}const Dv=255,Tm=Dv*Rf;function b4(h,o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te,ie){const de=function(ge,Be,ke,Ye,Xe,We,At,nt){const yt=[];if(Be.positionedLines.length===0)return yt;const bt=Ye.layout.get("text-rotate").evaluate(We,{})*Math.PI/180,_t=function(mn){const Nn=mn[0],vn=mn[1],qn=Nn*vn;return qn>0?[Nn,-vn]:qn<0?[-Nn,vn]:Nn===0?[vn,Nn]:[vn,-Nn]}(ke);let Et=Math.abs(Be.top-Be.bottom);for(const mn of Be.positionedLines)Et-=mn.lineOffset;const Ut=Be.positionedLines.length,Wt=Et/Ut;let Pt=Be.top-ke[1];for(let mn=0;mn<Ut;++mn){const Nn=Be.positionedLines[mn];Pt=sL(Be,Wt,Pt,mn);for(const vn of Nn.positionedGlyphs){if(!vn.rect)continue;const qn=vn.rect||{};let Kn=u4+1,ir=!0,Bn=1,Br=0;if(vn.imageName){const ba=At[Yo.build(vn.imageName).getSerializedPrimary()];if(!ba)continue;if(ba.sdf){Vn("SDF images are not supported in formatted text and will be ignored.");continue}ir=!1,Bn=ba.pixelRatio,Kn=Nv/Bn}const Zn=(Xe||nt)&&vn.vertical,vr=vn.metrics.advance*vn.scale/2,Qr=vn.metrics,fi=vn.rect;if(fi===null)continue;nt&&Be.verticalizable&&(Br=vn.imageName?vr-vn.metrics.width*vn.scale/2:0);const xi=Xe?[vn.x+vr,vn.y]:[0,0];let Ei=[0,0],_i=[0,0],Mi=!1;Xe||(Zn?(_i=[vn.x+vr+_t[0],vn.y+_t[1]-Br],Mi=!0):Ei=[vn.x+vr+ke[0],vn.y+ke[1]-Br]);const qs=fi.w*vn.scale/(Bn*(vn.localGlyph?zh:1)),Fs=fi.h*vn.scale/(Bn*(vn.localGlyph?zh:1));let ni,Ps,ws,Zs;if(Zn){const ba=vn.y-Pt,md=new Dt(-vr,vr-ba),Fo=-Math.PI/2,Do=new Dt(..._i);ni=new Dt(-vr+Ei[0],Ei[1]),ni._rotateAround(Fo,md)._add(Do),ni.x+=-ba+vr,ni.y-=(Qr.left-Kn)*vn.scale;const Ru=vn.imageName?Qr.advance*vn.scale:dc*vn.scale,nl=String.fromCodePoint(vn.glyph);qk(nl)?ni.x+=(1-Kn)*vn.scale:Zk(nl)?ni.x+=Ru-Qr.height*vn.scale+(-Kn-1)*vn.scale:ni.x+=vn.imageName||Qr.width+2*Kn===fi.w&&Qr.height+2*Kn===fi.h?(Ru-Fs)/2:(Ru-(Qr.height+2*Kn)*vn.scale)/2,Ps=new Dt(ni.x,ni.y-qs),ws=new Dt(ni.x+Fs,ni.y),Zs=new Dt(ni.x+Fs,ni.y-qs)}else{const ba=(Qr.left-Kn)*vn.scale-vr+Ei[0],md=(-Qr.top-Kn)*vn.scale+Ei[1],Fo=ba+qs,Do=md+Fs;ni=new Dt(ba,md),Ps=new Dt(Fo,md),ws=new Dt(ba,Do),Zs=new Dt(Fo,Do)}if(bt){let ba;ba=Xe?new Dt(0,0):Mi?new Dt(_t[0],_t[1]):new Dt(ke[0],ke[1]),ni._rotateAround(bt,ba),Ps._rotateAround(bt,ba),ws._rotateAround(bt,ba),Zs._rotateAround(bt,ba)}const el=new Dt(0,0),tl=new Dt(0,0);yt.push({tl:ni,tr:Ps,bl:ws,br:Zs,texPrimary:qn,texSecondary:void 0,writingMode:Be.writingMode,glyphOffset:xi,sectionIndex:vn.sectionIndex,isSDF:ir,pixelOffsetTL:el,pixelOffsetBR:tl,minFontScaleX:0,minFontScaleY:0})}}return yt}(0,p,k,m,w,j,_,h.allowVerticalPlacement),fe=h.textSizeData;let ae=null;fe.kind==="source"?(ae=[Rf*m.layout.get("text-size").evaluate(j,{},te)*R.textScaleFactor],ae[0]>Tm&&Vn(`${h.layerIds[0]}: Value for "text-size" is >= ${Dv}. Reduce your "text-size".`)):fe.kind==="composite"&&(ae=[Rf*R.compositeTextSizes[0].evaluate(j,{},te)*R.textScaleFactor,Rf*R.compositeTextSizes[1].evaluate(j,{},te)*R.textScaleFactor],(ae[0]>Tm||ae[1]>Tm)&&Vn(`${h.layerIds[0]}: Value for "text-size" is >= ${Dv}. Reduce your "text-size".`)),h.addSymbols(h.text,de,ae,k,w,j,E,o,u,H.lineStartIndex,H.lineLength,P,$,te,ie,!1);for(const ge of M)O[ge]=h.text.placedSymbolArray.length-1;return 4*de.length}function C4(h){for(const o in h)return h[o];return null}function N_(h,o,u,p,_,m,w,j,k,H,E=1){let M=w.top/E,O=w.bottom/E,P=w.left/E,R=w.right/E;const $=w.collisionPadding;if($&&(P-=$[0],M-=$[1],R+=$[2],O+=$[3]),k){const te=new Dt(P,M),ie=new Dt(R,M),de=new Dt(P,O),fe=new Dt(R,O),ae=Vt(k);let ge=new Dt(0,0);H&&(ge=new Dt(H[0],H[1])),te._rotateAround(ae,ge),ie._rotateAround(ae,ge),de._rotateAround(ae,ge),fe._rotateAround(ae,ge),P=Math.min(te.x,ie.x,de.x,fe.x),R=Math.max(te.x,ie.x,de.x,fe.x),M=Math.min(te.y,ie.y,de.y,fe.y),O=Math.max(te.y,ie.y,de.y,fe.y)}return h.emplaceBack(o.x,o.y,o.z,u.x,u.y,P,M,R,O,j,p,_,m),h.length-1}function qb(h){h.collisionPadding&&(h.top-=h.collisionPadding[1],h.bottom+=h.collisionPadding[3]);const o=h.bottom-h.top;return o>0?Math.max(10,o):null}function uL(h,o,u,p){const _=h.compareText;if(o in _){const m=_[o];for(let w=m.length-1;w>=0;w--)if(p.dist(m[w])<u)return!0}else _[o]=[];return _[o].push(p),!1}function S4(h,o){const u=h.fovAboveCenter,p=h.elevation?h.elevation.getMinElevationBelowMSL()*o:0,_=(h._camera.position[2]*h.worldSize-p)/Math.cos(h._pitch),m=Math.sin(u)*_/Math.sin(Math.max(Math.PI/2-h._pitch-u,.01));let w=Math.sin(h._pitch)*m+_;const j=_*(1/h._horizonShift);return h.elevation&&h.elevation.exaggeration()!==0||(w*=1+Math.max(h.zoom-17,0)),Math.min(1.01*w,j)}function I(h,o){if(!o.isReprojectedInTileSpace)return{scale:1<<h.z,x:h.x,y:h.y,x2:h.x+1,y2:h.y+1,projection:o};const u=Math.pow(2,-h.z),p=h.x*u,_=(h.x+1)*u,m=h.y*u,w=(h.y+1)*u,j=Ro(p),k=Ro(_),H=Wa(m),E=Wa(w),M=o.project(j,H),O=o.project(k,H),P=o.project(k,E),R=o.project(j,E);let $=Math.min(M.x,O.x,P.x,R.x),te=Math.min(M.y,O.y,P.y,R.y),ie=Math.max(M.x,O.x,P.x,R.x),de=Math.max(M.y,O.y,P.y,R.y);const fe=u/16;function ae(Be,ke,Ye,Xe,We,At){const nt=(Ye+We)/2,yt=(Xe+At)/2,bt=o.project(Ro(nt),Wa(yt)),_t=Math.max(0,$-bt.x,te-bt.y,bt.x-ie,bt.y-de);$=Math.min($,bt.x),ie=Math.max(ie,bt.x),te=Math.min(te,bt.y),de=Math.max(de,bt.y),_t>fe&&(ae(Be,bt,Ye,Xe,nt,yt),ae(bt,ke,nt,yt,We,At))}ae(M,O,p,m,_,m),ae(O,P,_,m,_,w),ae(P,R,_,w,p,w),ae(R,M,p,w,p,m),$-=fe,te-=fe,ie+=fe,de+=fe;const ge=1/Math.max(ie-$,de-te);return{scale:ge,x:$*ge,y:te*ge,x2:ie*ge,y2:de*ge,projection:o}}function D(h,{x:o,y:u},p=0){return new Dt(((o-p)*h.scale-h.x)*Wn,(u*h.scale-h.y)*Wn)}const re=Me.mat4.identity(new Float32Array(16));class Ce{constructor(o){this.spec=o,this.name=o.name,this.wrap=!1,this.requiresDraping=!1,this.supportsWorldCopies=!1,this.supportsTerrain=!1,this.supportsFog=!1,this.supportsFreeCamera=!1,this.zAxisUnit="meters",this.isReprojectedInTileSpace=!0,this.unsupportedLayers=["custom"],this.center=[0,0],this.range=[3.5,7]}project(o,u){return{x:0,y:0,z:0}}unproject(o,u){return new es(0,0)}projectTilePoint(o,u,p){return{x:o,y:u,z:0}}locationPoint(o,u,p=!0){return o._coordinatePoint(o.locationCoordinate(u),p)}pixelsPerMeter(o,u){return ua(1,o)*u}pixelSpaceConversion(o,u,p){return 1}farthestPixelDistance(o){return S4(o,o.pixelsPerMeter)}pointCoordinate(o,u,p,_){const m=o.horizonLineFromTop(!1),w=new Dt(u,Math.max(m,p));return o.rayIntersectionCoordinate(o.pointRayIntersection(w,_))}pointCoordinate3D(o,u,p){const _=new Dt(u,p);if(o.elevation)return o.elevation.pointCoordinate(_);{const m=this.pointCoordinate(o,_.x,_.y,0);return[m.x,m.y,m.z]}}isPointAboveHorizon(o,u){if(o.elevation&&o.elevation.visibleDemTiles.length)return!this.pointCoordinate3D(o,u.x,u.y);const p=o.horizonLineFromTop();return u.y<p}createInversionMatrix(o,u){return re}createTileMatrix(o,u,p){let _,m,w;const j=p.canonical,k=Me.mat4.identity(new Float64Array(16));if(this.isReprojectedInTileSpace){const H=I(j,this);_=1,m=H.x+p.wrap*H.scale,w=H.y,Me.mat4.scale(k,k,[_/H.scale,_/H.scale,o.pixelsPerMeter/u])}else _=u/o.zoomScale(j.z),m=(j.x+Math.pow(2,j.z)*p.wrap)*_,w=j.y*_;return Me.mat4.translate(k,k,[m,w,0]),Me.mat4.scale(k,k,[_/Wn,_/Wn,1]),k}upVector(o,u,p){return[0,0,1]}upVectorScale(o,u,p){return{metersToTile:1}}}class qe extends Ce{constructor(o){super(o),this.range=[4,7],this.center=o.center||[-96,37.5];const[u,p]=this.parallels=o.parallels||[29.5,45.5],_=Math.sin(Vt(u));this.n=(_+Math.sin(Vt(p)))/2,this.c=1+_*(2*this.n-_),this.r0=Math.sqrt(this.c)/this.n}project(o,u){const{n:p,c:_,r0:m}=this,w=Vt(o-this.center[0]),j=Vt(u),k=Math.sqrt(_-2*p*Math.sin(j))/p;return{x:k*Math.sin(w*p),y:k*Math.cos(w*p)-m,z:0}}unproject(o,u){const{n:p,c:_,r0:m}=this,w=m+u;let j=Math.atan2(o,Math.abs(w))*Math.sign(w);w*p<0&&(j-=Math.PI*Math.sign(o)*Math.sign(w));const k=Vt(this.center[0])*p;j=wt(j,-Math.PI-k,Math.PI-k);const H=Gt($t(j/p)+this.center[0],-180,180),E=Math.asin(Gt((_-(o*o+w*w)*p*p)/(2*p),-1,1)),M=Gt($t(E),-$o,$o);return new es(H,M)}}const mt=1.340264,Kt=-.081106,ln=893e-6,Cn=.003796,or=Math.sqrt(3)/2;class ar extends Ce{project(o,u){u=u/180*Math.PI,o=o/180*Math.PI;const p=Math.asin(or*Math.sin(u)),_=p*p,m=_*_*_;return{x:.5*(o*Math.cos(p)/(or*(mt+3*Kt*_+m*(7*ln+9*Cn*_)))/Math.PI+.5),y:1-.5*(p*(mt+Kt*_+m*(ln+Cn*_))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,_=p*p,m=_*_*_;for(let E,M,O,P=0;P<12&&(M=p*(mt+Kt*_+m*(ln+Cn*_))-u,O=mt+3*Kt*_+m*(7*ln+9*Cn*_),E=M/O,p=Gt(p-E,-Math.PI/3,Math.PI/3),_=p*p,m=_*_*_,!(Math.abs(E)<1e-12));++P);const w=or*o*(mt+3*Kt*_+m*(7*ln+9*Cn*_))/Math.cos(p),j=Math.asin(Math.sin(p)/or),k=Gt(180*w/Math.PI,-180,180),H=Gt(180*j/Math.PI,-$o,$o);return new es(k,H)}}class yr extends Ce{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){return{x:.5+o/360,y:.5-u/360,z:0}}unproject(o,u){const p=360*(o-.5),_=Gt(360*(.5-u),-$o,$o);return new es(p,_)}}const Dr=Math.PI/2;function hi(h){return Math.tan((Dr+h)/2)}class Ki extends Ce{constructor(o){super(o),this.center=o.center||[0,30];const[u,p]=this.parallels=o.parallels||[30,30];let _=Vt(u),m=Vt(p);this.southernCenter=_+m<0,this.southernCenter&&(_=-_,m=-m);const w=Math.cos(_),j=hi(_);this.n=_===m?Math.sin(_):Math.log(w/Math.cos(m))/Math.log(hi(m)/j),this.f=w*Math.pow(hi(_),this.n)/this.n}project(o,u){u=Vt(u),this.southernCenter&&(u=-u),o=Vt(o-this.center[0]);const p=1e-6,{n:_,f:m}=this;m>0?u<-Dr+p&&(u=-Dr+p):u>Dr-p&&(u=Dr-p);const w=m/Math.pow(hi(u),_);let j=w*Math.sin(_*o),k=m-w*Math.cos(_*o);return j=.5*(j/Math.PI+.5),k=.5*(k/Math.PI+.5),{x:j,y:this.southernCenter?k:1-k,z:0}}unproject(o,u){o=(2*o-.5)*Math.PI,this.southernCenter&&(u=1-u),u=(2*(1-u)-.5)*Math.PI;const{n:p,f:_}=this,m=_-u,w=Math.sign(m),j=Math.sign(p)*Math.sqrt(o*o+m*m);let k=Math.atan2(o,Math.abs(m))*w;m*p<0&&(k-=Math.PI*Math.sign(o)*w);const H=Gt($t(k/p)+this.center[0],-180,180),E=Gt($t(2*Math.atan(Math.pow(_/j,1/p))-Dr),-$o,$o);return new es(H,this.southernCenter?-E:E)}}class ys extends Ce{constructor(o){super(o),this.wrap=!0,this.supportsWorldCopies=!0,this.supportsTerrain=!0,this.supportsFog=!0,this.supportsFreeCamera=!0,this.isReprojectedInTileSpace=!1,this.unsupportedLayers=[],this.range=null}project(o,u){return{x:Sp(o),y:Mf(u),z:0}}unproject(o,u){const p=Ro(o),_=Wa(u);return new es(p,_)}}const Qi=Vt($o);class Hs extends Ce{project(o,u){const p=(u=Vt(u))*u,_=p*p;return{x:.5*((o=Vt(o))*(.8707-.131979*p+_*(_*(.003971*p-.001529*_)-.013791))/Math.PI+.5),y:1-.5*(u*(1.007226+p*(.015085+_*(.028874*p-.044475-.005916*_)))/Math.PI+1),z:0}}unproject(o,u){o=(2*o-.5)*Math.PI;let p=u=(2*(1-u)-1)*Math.PI,_=25,m=0,w=p*p;do{w=p*p;const H=w*w;m=(p*(1.007226+w*(.015085+H*(.028874*w-.044475-.005916*H)))-u)/(1.007226+w*(.045255+H*(.259866*w-.311325-.005916*11*H))),p=Gt(p-m,-Qi,Qi)}while(Math.abs(m)>1e-6&&--_>0);w=p*p;const j=Gt($t(o/(.8707+w*(w*(w*w*w*(.003971-.001529*w)-.013791)-.131979))),-180,180),k=$t(p);return new es(j,k)}}const Ws=Vt($o);class ah extends Ce{project(o,u){u=Vt(u),o=Vt(o);const p=Math.cos(u),_=2/Math.PI,m=Math.acos(p*Math.cos(o/2)),w=Math.sin(m)/m,j=.5*(o*_+2*p*Math.sin(o/2)/w)||0,k=.5*(u+Math.sin(u)/w)||0;return{x:.5*(j/Math.PI+.5),y:1-.5*(k/Math.PI+1),z:0}}unproject(o,u){let p=o=(2*o-.5)*Math.PI,_=u=(2*(1-u)-1)*Math.PI,m=25;const w=1e-6;let j=0,k=0;do{const H=Math.cos(_),E=Math.sin(_),M=2*E*H,O=E*E,P=H*H,R=Math.cos(p/2),$=Math.sin(p/2),te=2*R*$,ie=$*$,de=1-P*R*R,fe=de?1/de:0,ae=de?Math.acos(H*R)*Math.sqrt(1/de):0,ge=.5*(2*ae*H*$+2*p/Math.PI)-o,Be=.5*(ae*E+_)-u,ke=.5*fe*(P*ie+ae*H*R*O)+1/Math.PI,Ye=fe*(te*M/4-ae*E*$),Xe=.125*fe*(M*$-ae*E*P*te),We=.5*fe*(O*R+ae*ie*H)+.5,At=Ye*Xe-We*ke;j=(Be*Ye-ge*We)/At,k=(ge*Xe-Be*ke)/At,p=Gt(p-j,-Math.PI,Math.PI),_=Gt(_-k,-Ws,Ws)}while((Math.abs(j)>w||Math.abs(k)>w)&&--m>0);return new es($t(p),$t(_))}}class pu extends Ce{constructor(o){super(o),this.center=o.center||[0,0],this.parallels=o.parallels||[0,0],this.cosPhi=Math.max(.01,Math.cos(Vt(this.parallels[0]))),this.scale=1/(2*Math.max(Math.PI*this.cosPhi,1/this.cosPhi)),this.wrap=!0,this.supportsWorldCopies=!0}project(o,u){const{scale:p,cosPhi:_}=this;return{x:Vt(o)*_*p+.5,y:-Math.sin(Vt(u))/_*p+.5,z:0}}unproject(o,u){const{scale:p,cosPhi:_}=this,m=-(u-.5)/p,w=Gt($t((o-.5)/p)/_,-180,180),j=Math.asin(Gt(m*_,-1,1)),k=Gt($t(j),-$o,$o);return new es(w,k)}}class lh extends ys{constructor(o){super(o),this.requiresDraping=!0,this.supportsWorldCopies=!1,this.supportsFog=!0,this.zAxisUnit="pixels",this.unsupportedLayers=["debug"],this.range=[3,5]}projectTilePoint(o,u,p){const _=Oo(o,u,p),m=$l(qa(p));return Me.vec3.transformMat4(_,_,m),{x:_[0],y:_[1],z:_[2]}}locationPoint(o,u){const p=Cp(u.lat,u.lng),_=Me.vec3.normalize([],p),m=o.elevation?o.elevation.getAtPointOrZero(o.locationCoordinate(u),o._centerAltitude):o._centerAltitude,w=ua(1,0)*Wn*m;Me.vec3.scaleAndAdd(p,p,_,w);const j=Me.mat4.identity(new Float64Array(16));return Me.mat4.multiply(j,o.pixelMatrix,o.globeMatrix),Me.vec3.transformMat4(p,p,j),new Dt(p[0],p[1])}pixelsPerMeter(o,u){return ua(1,0)*u}pixelSpaceConversion(o,u,p){const _=ua(1,o)*u,m=Ur(ua(1,45)*u,_,p);return this.pixelsPerMeter(o,u)/m}createTileMatrix(o,u,p){const _=Pu(qa(p.canonical));return Me.mat4.multiply(new Float64Array(16),o.globeMatrix,_)}createInversionMatrix(o,u){const{center:p}=o,_=$l(qa(u));return Me.mat4.rotateY(_,_,Vt(p.lng)),Me.mat4.rotateX(_,_,Vt(p.lat)),Me.mat4.scale(_,_,[o._pixelsPerMercatorPixel,o._pixelsPerMercatorPixel,1]),Float32Array.from(_)}pointCoordinate(o,u,p,_){return hl(o,u,p,!0)||new C(0,0)}pointCoordinate3D(o,u,p){const _=this.pointCoordinate(o,u,p,0);return[_.x,_.y,_.z]}isPointAboveHorizon(o,u){return!hl(o,u.x,u.y,!1)}farthestPixelDistance(o){const u=function(_,m){const w=_.cameraToCenterDistance,j=_._centerAltitude*m,k=_._camera,H=_._camera.forward(),E=Me.vec3.add([],Me.vec3.scale([],H,-w),[0,0,j]),M=_.worldSize/(2*Math.PI),O=[0,0,-M],P=_.width/_.height,R=Math.tan(_.fovAboveCenter),$=Me.vec3.scale([],k.up(),R),te=Me.vec3.scale([],k.right(),R*P),ie=Me.vec3.normalize([],Me.vec3.add([],Me.vec3.add([],H,$),te)),de=[];let fe;if(new gi(E,ie).closestPointOnSphere(O,M,de)){const ae=Me.vec3.add([],de,O),ge=Me.vec3.sub([],ae,E);fe=Math.cos(_.fovAboveCenter)*Me.vec3.length(ge)}else{const ae=Me.vec3.sub([],E,O),ge=Me.vec3.sub([],O,E);Me.vec3.normalize(ge,ge);const Be=Me.vec3.length(ae)-M;fe=Math.sqrt(Be*(Be+2*M));const ke=Math.acos(fe/(M+Be))-Math.acos(Me.vec3.dot(H,ge));fe*=Math.cos(ke)}return 1.01*fe}(o,this.pixelsPerMeter(o.center.lat,o.worldSize)),p=cc(o.zoom);if(p>0){const _=S4(o,ua(1,o.center.lat)*o.worldSize),m=o.worldSize/(2*Math.PI),w=Math.max(o.width,o.height)/o.worldSize*Math.PI;return Ur(u,_+m*(1-Math.cos(w)),Math.pow(p,10))}return u}upVector(o,u,p){return Oo(u,p,o,1)}upVectorScale(o){return{metersToTile:Xi(Za(qa(o)))}}}function fl(h){const o=h.parallels,u=!!o&&Math.abs(o[0]+o[1])<.01;switch(h.name){case"mercator":return new ys(h);case"equirectangular":return new yr(h);case"naturalEarth":return new Hs(h);case"equalEarth":return new ar(h);case"winkelTripel":return new ah(h);case"albers":return u?new pu(h):new qe(h);case"lambertConformalConic":return u?new pu(h):new Ki(h);case"globe":return new lh(h)}throw new Error(`Invalid projection name: ${h.name}`)}const Of=ts.VectorTileFeature.types,vA=[{name:"a_fade_opacity",components:1,type:"Uint8",offset:0}];function Uv(h,o,u,p,_,m,w,j,k,H,E,M,O){const P=j?Math.min(Tm,Math.round(j[0])):0,R=j?Math.min(Tm,Math.round(j[1])):0;h.emplaceBack(o,u,Math.round(32*p),Math.round(32*_),m,w,(P<<1)+(k?1:0),R,16*H,16*E,256*M,256*O)}function B4(h,o,u){h.emplaceBack(o,u)}function E4(h,o,u,p,_,m,w){h.emplaceBack(o,u,p,_,m,w)}function T4(h,o,u,p,_){h.emplaceBack(o,u,p,_),h.emplaceBack(o,u,p,_),h.emplaceBack(o,u,p,_),h.emplaceBack(o,u,p,_)}function bfe(h){for(const o of h.sections)if(Vr(o.text))return!0;return!1}class dL{constructor(o){this.layoutVertexArray=new Mh,this.indexArray=new $a,this.programConfigurations=o,this.segments=new po,this.dynamicLayoutVertexArray=new ju,this.opacityVertexArray=new ad,this.placedSymbolArray=new l_,this.iconTransitioningVertexArray=new th,this.globeExtVertexArray=new vp,this.zOffsetVertexArray=new Fa}isEmpty(){return this.layoutVertexArray.length===0&&this.indexArray.length===0&&this.dynamicLayoutVertexArray.length===0&&this.opacityVertexArray.length===0&&this.iconTransitioningVertexArray.length===0}upload(o,u,p,_,m){this.isEmpty()||(p&&(this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,zk.members),this.indexBuffer=o.createIndexBuffer(this.indexArray,u),this.dynamicLayoutVertexBuffer=o.createVertexBuffer(this.dynamicLayoutVertexArray,o4.members,!0),this.opacityVertexBuffer=o.createVertexBuffer(this.opacityVertexArray,vA,!0),this.iconTransitioningVertexArray.length>0&&(this.iconTransitioningVertexBuffer=o.createVertexBuffer(this.iconTransitioningVertexArray,Hk.members,!0)),this.globeExtVertexArray.length>0&&(this.globeExtVertexBuffer=o.createVertexBuffer(this.globeExtVertexArray,s4.members,!0)),!this.zOffsetVertexBuffer&&(this.zOffsetVertexArray.length>0||m)&&(this.zOffsetVertexBuffer=o.createVertexBuffer(this.zOffsetVertexArray,Qk.members,!0)),this.opacityVertexBuffer.itemSize=1),(p||_)&&this.programConfigurations.upload(o))}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.programConfigurations.destroy(),this.segments.destroy(),this.dynamicLayoutVertexBuffer.destroy(),this.opacityVertexBuffer.destroy(),this.iconTransitioningVertexBuffer&&this.iconTransitioningVertexBuffer.destroy(),this.globeExtVertexBuffer&&this.globeExtVertexBuffer.destroy(),this.zOffsetVertexBuffer&&this.zOffsetVertexBuffer.destroy())}}He(dL,"SymbolBuffers");class hL{constructor(o,u,p){this.layoutVertexArray=new o,this.layoutAttributes=u,this.indexArray=new p,this.segments=new po,this.collisionVertexArray=new ld,this.collisionVertexArrayExt=new ju}upload(o){this.layoutVertexBuffer=o.createVertexBuffer(this.layoutVertexArray,this.layoutAttributes),this.indexBuffer=o.createIndexBuffer(this.indexArray),this.collisionVertexBuffer=o.createVertexBuffer(this.collisionVertexArray,Vk.members,!0),this.collisionVertexBufferExt=o.createVertexBuffer(this.collisionVertexArrayExt,$k.members,!0)}destroy(){this.layoutVertexBuffer&&(this.layoutVertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy(),this.collisionVertexBuffer.destroy(),this.collisionVertexBufferExt.destroy())}}He(hL,"CollisionBuffers");class I4{constructor(o){this.collisionBoxArray=o.collisionBoxArray,this.zoom=o.zoom,this.lut=o.lut,this.overscaling=o.overscaling,this.layers=o.layers,this.layerIds=this.layers.map(w=>w.fqid),this.index=o.index,this.pixelRatio=o.pixelRatio,this.sourceLayerIndex=o.sourceLayerIndex,this.hasPattern=!1,this.hasRTLText=!1,this.fullyClipped=!1,this.hasAnyIconTextFit=!1,this.sortKeyRanges=[],this.collisionCircleArray=[],this.placementInvProjMatrix=Me.mat4.identity([]),this.placementViewportMatrix=Me.mat4.identity([]);const u=this.layers[0]._unevaluatedLayout._values;this.textSizeData=Rb(this.zoom,u["text-size"]),this.iconSizeData=Rb(this.zoom,u["icon-size"]);const p=this.layers[0].layout,_=p.get("symbol-sort-key"),m=p.get("symbol-z-order");this.canOverlap=p.get("text-allow-overlap")||p.get("icon-allow-overlap")||p.get("text-ignore-placement")||p.get("icon-ignore-placement"),this.sortFeaturesByKey=m!=="viewport-y"&&_.constantOr(1)!==void 0,this.sortFeaturesByY=(m==="viewport-y"||m==="auto"&&!this.sortFeaturesByKey)&&this.canOverlap,this.writingModes=p.get("text-writing-mode").map(w=>oh[w]),this.stateDependentLayerIds=this.layers.filter(w=>w.isStateDependent()).map(w=>w.id),this.sourceID=o.sourceID,this.projection=o.projection,this.hasAnyZOffset=!1,this.zOffsetSortDirty=!1,this.zOffsetBuffersNeedUpload=p.get("symbol-z-elevate"),this.activeReplacements=[],this.replacementUpdateTime=0}createArrays(){this.text=new dL(new Ff(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("text")||o.startsWith("symbol"))),this.icon=new dL(new Ff(this.layers,{zoom:this.zoom,lut:this.lut},o=>o.startsWith("icon")||o.startsWith("symbol"))),this.glyphOffsetArray=new vm,this.lineVertexArray=new Gc,this.symbolInstances=new xg}calculateGlyphDependencies(o,u,p,_,m){for(const w of o){const j=w.codePointAt(0);if(j===void 0)break;if(u[j]=!0,_&&m&&j<=65535){const k=Lv[w];k&&(u[k.charCodeAt(0)]=!0)}}}updateFootprints(o,u){}updateReplacement(o,u){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const p=u.getReplacementRegionsForTile(o.toUnwrapped(),!0);return!Bv(this.activeReplacements,p)&&(this.activeReplacements=p,!0)}populate(o,u,p,_){const m=this.layers[0],w=m.layout,j=this.projection.name==="globe",k=w.get("text-font"),H=w.get("text-field"),E=w.get("icon-image"),[M,O]=w.get("icon-size-scale-range"),P=Gt(u.scaleFactor||1,M,O),R=(H.value.kind!=="constant"||H.value.value instanceof yo&&!H.value.value.isEmpty()||H.value.value.toString().length>0)&&(k.value.kind!=="constant"||k.value.value.length>0),$=E.value.kind!=="constant"||!!E.value.value||Object.keys(E.parameters).length>0,te=w.get("symbol-sort-key");if(this.features=[],!R&&!$)return;const ie=u.iconDependencies,de=u.glyphDependencies,fe=u.availableImages,ae=new qr(this.zoom);for(const{feature:ge,id:Be,index:ke,sourceLayerIndex:Ye}of o){const Xe=m._featureFilter.needGeometry,We=ue(ge,Xe);if(!m._featureFilter.filter(ae,We,p))continue;if(Xe||(We.geometry=se(ge,p,_)),j&&ge.type!==1&&p.z<=5){const _t=We.geometry,Et=.98078528056,Ut=(Wt,Pt)=>{const mn=Oo(Wt.x,Wt.y,p,1),Nn=Oo(Pt.x,Pt.y,p,1);return Me.vec3.dot(mn,Nn)<Et};for(let Wt=0;Wt<_t.length;Wt++)_t[Wt]=K(_t[Wt],Ut)}let At,nt;if(R){const _t=m.getValueAndResolveTokens("text-field",We,p,fe),Et=yo.factory(_t);bfe(Et)&&(this.hasRTLText=!0),(!this.hasRTLText||Di()==="unavailable"||this.hasRTLText&&wo.isParsed())&&(At=Wk(Et,m,We))}if($){const _t=m.getValueAndResolveTokens("icon-image",We,p,fe);nt=_t instanceof Yo?_t:Yo.build(_t)}if(!At&&!nt)continue;const yt=this.sortFeaturesByKey?te.evaluate(We,{},p):void 0,bt={id:Be,text:At,icon:nt,index:ke,sourceLayerIndex:Ye,geometry:We.geometry,properties:ge.properties,type:Of[ge.type],sortKey:yt};if(this.features.push(bt),nt){const _t=S_(this.iconSizeData,this.layers[0]._unevaluatedLayout._values["icon-size"],p,this.zoom,bt)*P*this.pixelRatio,Et=nt.getPrimary().scaleSelf(_t);if(ie[Et.id]=ie[Et.id]||[],ie[Et.id].push(Et),nt.nameSecondary){const Ut=nt.getSecondary().scaleSelf(_t);ie[Ut.id]=ie[Ut.id]||[],ie[Ut.id].push(Ut)}}if(At){const _t=k.evaluate(We,{},p).join(","),Et=w.get("text-rotation-alignment")==="map"&&w.get("symbol-placement")!=="point";this.allowVerticalPlacement=this.writingModes&&this.writingModes.indexOf(oh.vertical)>=0;for(const Ut of At.sections)if(Ut.image){const Wt=Ut.image.getPrimary().scaleSelf(this.pixelRatio);ie[Wt.id]=ie[Wt.id]||[],ie[Wt.id].push(Wt)}else{const Wt=er(At.toString()),Pt=Ut.fontStack||_t,mn=de[Pt]=de[Pt]||{};this.calculateGlyphDependencies(Ut.text,mn,Et,this.allowVerticalPlacement,Wt)}}}w.get("symbol-placement")==="line"&&(this.features=function(ge){const Be={},ke={},Ye=[];let Xe=0;function We(bt){Ye.push(ge[bt]),Xe++}function At(bt,_t,Et){const Ut=ke[bt];return delete ke[bt],ke[_t]=Ut,Ye[Ut].geometry[0].pop(),Ye[Ut].geometry[0]=Ye[Ut].geometry[0].concat(Et[0]),Ut}function nt(bt,_t,Et){const Ut=Be[_t];return delete Be[_t],Be[bt]=Ut,Ye[Ut].geometry[0].shift(),Ye[Ut].geometry[0]=Et[0].concat(Ye[Ut].geometry[0]),Ut}function yt(bt,_t,Et){const Ut=Et?_t[0][_t[0].length-1]:_t[0][0];return`${bt}:${Ut.x}:${Ut.y}`}for(let bt=0;bt<ge.length;bt++){const _t=ge[bt],Et=_t.geometry,Ut=_t.text?_t.text.toString():null;if(!Ut){We(bt);continue}const Wt=yt(Ut,Et),Pt=yt(Ut,Et,!0);if(Wt in ke&&Pt in Be&&ke[Wt]!==Be[Pt]){const mn=nt(Wt,Pt,Et),Nn=At(Wt,Pt,Ye[mn].geometry);delete Be[Wt],delete ke[Pt],ke[yt(Ut,Ye[Nn].geometry,!0)]=Nn,Ye[mn].geometry=null}else Wt in ke?At(Wt,Pt,Et):Pt in Be?nt(Wt,Pt,Et):(We(bt),Be[Wt]=Xe-1,ke[Pt]=Xe-1)}return Ye.filter(bt=>bt.geometry)}(this.features)),this.sortFeaturesByKey&&this.features.sort((ge,Be)=>ge.sortKey-Be.sortKey)}update(o,u,p,_,m,w,j){this.text.programConfigurations.updatePaintArrays(o,u,m,p,_,w,j),this.icon.programConfigurations.updatePaintArrays(o,u,m,p,_,w,j)}updateZOffset(){const o=(m,w,j)=>{p+=w,p>m.length&&m.resize(p);for(let k=-w;k<0;k++)m.emplace(k+p,j)},u=(m,w,j)=>{_+=w,_>m.length&&m.resize(_);for(let k=-w;k<0;k++)m.emplace(k+_,j)};if(!this.zOffsetBuffersNeedUpload)return;this.zOffsetBuffersNeedUpload=!1;let p=0,_=0;for(let m=0;m<this.symbolInstances.length;m++){const w=this.symbolInstances.get(m),{numHorizontalGlyphVertices:j,numVerticalGlyphVertices:k,numIconVertices:H}=w,E=w.zOffset,M=H>0;if((j>0||k>0)&&(o(this.text.zOffsetVertexArray,j,E),o(this.text.zOffsetVertexArray,k,E)),M){const{placedIconSymbolIndex:O,verticalPlacedIconSymbolIndex:P}=w;O>=0&&u(this.icon.zOffsetVertexArray,H,E),P>=0&&u(this.icon.zOffsetVertexArray,w.numVerticalIconVertices,E)}}this.text.zOffsetVertexBuffer&&this.text.zOffsetVertexBuffer.updateData(this.text.zOffsetVertexArray),this.icon.zOffsetVertexBuffer&&this.icon.zOffsetVertexBuffer.updateData(this.icon.zOffsetVertexArray)}isEmpty(){return this.symbolInstances.length===0&&!this.hasRTLText}uploadPending(){return!this.uploaded||this.text.programConfigurations.needsUpload||this.icon.programConfigurations.needsUpload}upload(o){!this.uploaded&&this.hasDebugData()&&(this.textCollisionBox.upload(o),this.iconCollisionBox.upload(o)),this.text.upload(o,this.sortFeaturesByY,!this.uploaded,this.text.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.icon.upload(o,this.sortFeaturesByY,!this.uploaded,this.icon.programConfigurations.needsUpload,this.zOffsetBuffersNeedUpload),this.uploaded=!0}destroyDebugData(){this.textCollisionBox.destroy(),this.iconCollisionBox.destroy()}getProjection(){return this.projectionInstance||(this.projectionInstance=fl(this.projection)),this.projectionInstance}destroy(){this.text.destroy(),this.icon.destroy(),this.hasDebugData()&&this.destroyDebugData()}addToLineVertexArray(o,u){const p=this.lineVertexArray.length;if(o.segment!==void 0)for(const{x:_,y:m}of u)this.lineVertexArray.emplaceBack(_,m);return{lineStartIndex:p,lineLength:this.lineVertexArray.length-p}}addSymbols(o,u,p,_,m,w,j,k,H,E,M,O,P,R,$,te){const ie=o.indexArray,de=o.layoutVertexArray,fe=o.globeExtVertexArray,ae=o.segments.prepareSegment(4*u.length,de,ie,this.canOverlap?w.sortKey:void 0),ge=this.glyphOffsetArray.length,Be=ae.vertexLength,ke=this.allowVerticalPlacement&&j===oh.vertical?Math.PI/2:0,Ye=w.text&&w.text.sections;for(let We=0;We<u.length;We++){const{tl:At,tr:nt,bl:yt,br:bt,texPrimary:_t,texSecondary:Et,pixelOffsetTL:Ut,pixelOffsetBR:Wt,minFontScaleX:Pt,minFontScaleY:mn,glyphOffset:Nn,isSDF:vn,sectionIndex:qn}=u[We],Kn=ae.vertexLength,ir=Nn[1];if(Uv(de,H.x,H.y,At.x,ir+At.y,_t.x,_t.y,p,vn,Ut.x,Ut.y,Pt,mn),Uv(de,H.x,H.y,nt.x,ir+nt.y,_t.x+_t.w,_t.y,p,vn,Wt.x,Ut.y,Pt,mn),Uv(de,H.x,H.y,yt.x,ir+yt.y,_t.x,_t.y+_t.h,p,vn,Ut.x,Wt.y,Pt,mn),Uv(de,H.x,H.y,bt.x,ir+bt.y,_t.x+_t.w,_t.y+_t.h,p,vn,Wt.x,Wt.y,Pt,mn),k){const{x:Bn,y:Br,z:Zn}=k.anchor,[vr,Qr,fi]=k.up;E4(fe,Bn,Br,Zn,vr,Qr,fi),E4(fe,Bn,Br,Zn,vr,Qr,fi),E4(fe,Bn,Br,Zn,vr,Qr,fi),E4(fe,Bn,Br,Zn,vr,Qr,fi),T4(o.dynamicLayoutVertexArray,Bn,Br,Zn,ke)}else T4(o.dynamicLayoutVertexArray,H.x,H.y,H.z,ke);if(te){const Bn=Et||_t;B4(o.iconTransitioningVertexArray,Bn.x,Bn.y),B4(o.iconTransitioningVertexArray,Bn.x+Bn.w,Bn.y),B4(o.iconTransitioningVertexArray,Bn.x,Bn.y+Bn.h),B4(o.iconTransitioningVertexArray,Bn.x+Bn.w,Bn.y+Bn.h)}ie.emplaceBack(Kn,Kn+1,Kn+2),ie.emplaceBack(Kn+1,Kn+2,Kn+3),ae.vertexLength+=4,ae.primitiveLength+=2,this.glyphOffsetArray.emplaceBack(Nn[0]),We!==u.length-1&&qn===u[We+1].sectionIndex||o.programConfigurations.populatePaintArrays(de.length,w,w.index,{},P,R,$,Ye&&Ye[qn])}const Xe=k?k.anchor:H;o.placedSymbolArray.emplaceBack(Xe.x,Xe.y,Xe.z,H.x,H.y,ge,this.glyphOffsetArray.length-ge,Be,E,M,H.segment,p?p[0]:0,p?p[1]:0,_[0],_[1],j,0,!1,0,O,0)}_commitLayoutVertex(o,u,p,_,m,w,j){o.emplaceBack(u,p,_,m,w,Math.round(j.x),Math.round(j.y))}_addCollisionDebugVertices(o,u,p,_,m,w,j){const k=p.segments.prepareSegment(4,p.layoutVertexArray,p.indexArray),H=k.vertexLength,E=j.tileAnchorX,M=j.tileAnchorY;for(let P=0;P<4;P++)p.collisionVertexArray.emplaceBack(0,0,0,0,0,0);this._commitDebugCollisionVertexUpdate(p.collisionVertexArrayExt,u,o.padding,j.zOffset),this._commitLayoutVertex(p.layoutVertexArray,_,m,w,E,M,new Dt(o.x1,o.y1)),this._commitLayoutVertex(p.layoutVertexArray,_,m,w,E,M,new Dt(o.x2,o.y1)),this._commitLayoutVertex(p.layoutVertexArray,_,m,w,E,M,new Dt(o.x2,o.y2)),this._commitLayoutVertex(p.layoutVertexArray,_,m,w,E,M,new Dt(o.x1,o.y2)),k.vertexLength+=4;const O=p.indexArray;O.emplaceBack(H,H+1),O.emplaceBack(H+1,H+2),O.emplaceBack(H+2,H+3),O.emplaceBack(H+3,H),k.primitiveLength+=4}_addTextDebugCollisionBoxes(o,u,p,_,m,w){for(let j=_;j<m;j++){const k=p.get(j),H=this.getSymbolInstanceTextSize(o,w,u,j);this._addCollisionDebugVertices(k,H,this.textCollisionBox,k.projectedAnchorX,k.projectedAnchorY,k.projectedAnchorZ,w)}}_addIconDebugCollisionBoxes(o,u,p,_,m,w){for(let j=_;j<m;j++){const k=p.get(j),H=this.getSymbolInstanceIconSize(o,u,w.placedIconSymbolIndex);this._addCollisionDebugVertices(k,H,this.iconCollisionBox,k.projectedAnchorX,k.projectedAnchorY,k.projectedAnchorZ,w)}}generateCollisionDebugBuffers(o,u,p){this.hasDebugData()&&this.destroyDebugData(),this.textCollisionBox=new hL(aA,Lg.members,th),this.iconCollisionBox=new hL(aA,Lg.members,th);const _=Mg(this.iconSizeData,o),m=Mg(this.textSizeData,o,p);for(let w=0;w<this.symbolInstances.length;w++){const j=this.symbolInstances.get(w);this._addTextDebugCollisionBoxes(m,o,u,j.textBoxStartIndex,j.textBoxEndIndex,j),this._addTextDebugCollisionBoxes(m,o,u,j.verticalTextBoxStartIndex,j.verticalTextBoxEndIndex,j),this._addIconDebugCollisionBoxes(_,o,u,j.iconBoxStartIndex,j.iconBoxEndIndex,j),this._addIconDebugCollisionBoxes(_,o,u,j.verticalIconBoxStartIndex,j.verticalIconBoxEndIndex,j)}}getSymbolInstanceTextSize(o,u,p,_){const m=this.text.placedSymbolArray.get(u.rightJustifiedTextSymbolIndex>=0?u.rightJustifiedTextSymbolIndex:u.centerJustifiedTextSymbolIndex>=0?u.centerJustifiedTextSymbolIndex:u.leftJustifiedTextSymbolIndex>=0?u.leftJustifiedTextSymbolIndex:u.verticalPlacedTextSymbolIndex>=0?u.verticalPlacedTextSymbolIndex:_),w=kv(this.textSizeData,o,m)/dc;return this.tilePixelRatio*w}getSymbolInstanceIconSize(o,u,p){const _=this.icon.placedSymbolArray.get(p),m=kv(this.iconSizeData,o,_);return this.tilePixelRatio*m}_commitDebugCollisionVertexUpdate(o,u,p,_){o.emplaceBack(u,-p,-p,_),o.emplaceBack(u,p,-p,_),o.emplaceBack(u,p,p,_),o.emplaceBack(u,-p,p,_)}_updateTextDebugCollisionBoxes(o,u,p,_,m,w,j){for(let k=_;k<m;k++){const H=p.get(k),E=this.getSymbolInstanceTextSize(o,w,u,k);this._commitDebugCollisionVertexUpdate(this.textCollisionBox.collisionVertexArrayExt,E,H.padding,w.zOffset)}}_updateIconDebugCollisionBoxes(o,u,p,_,m,w,j){for(let k=_;k<m;k++){const H=p.get(k),E=this.getSymbolInstanceIconSize(o,u,w.placedIconSymbolIndex);this._commitDebugCollisionVertexUpdate(this.iconCollisionBox.collisionVertexArrayExt,E,H.padding,w.zOffset)}}updateCollisionDebugBuffers(o,u,p,_){if(!this.hasDebugData())return;this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexArrayExt.clear(),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexArrayExt.clear();const m=Mg(this.iconSizeData,o,_),w=Mg(this.textSizeData,o,p);for(let j=0;j<this.symbolInstances.length;j++){const k=this.symbolInstances.get(j);this._updateTextDebugCollisionBoxes(w,o,u,k.textBoxStartIndex,k.textBoxEndIndex,k,p),this._updateTextDebugCollisionBoxes(w,o,u,k.verticalTextBoxStartIndex,k.verticalTextBoxEndIndex,k,p),this._updateIconDebugCollisionBoxes(m,o,u,k.iconBoxStartIndex,k.iconBoxEndIndex,k,_),this._updateIconDebugCollisionBoxes(m,o,u,k.verticalIconBoxStartIndex,k.verticalIconBoxEndIndex,k,_)}this.hasTextCollisionBoxData()&&this.textCollisionBox.collisionVertexBufferExt&&this.textCollisionBox.collisionVertexBufferExt.updateData(this.textCollisionBox.collisionVertexArrayExt),this.hasIconCollisionBoxData()&&this.iconCollisionBox.collisionVertexBufferExt&&this.iconCollisionBox.collisionVertexBufferExt.updateData(this.iconCollisionBox.collisionVertexArrayExt)}_deserializeCollisionBoxesForSymbol(o,u,p,_,m,w,j,k,H){const E={};if(u<p){const{x1:M,y1:O,x2:P,y2:R,padding:$,projectedAnchorX:te,projectedAnchorY:ie,projectedAnchorZ:de,tileAnchorX:fe,tileAnchorY:ae,featureIndex:ge}=o.get(u);E.textBox={x1:M,y1:O,x2:P,y2:R,padding:$,projectedAnchorX:te,projectedAnchorY:ie,projectedAnchorZ:de,tileAnchorX:fe,tileAnchorY:ae},E.textFeatureIndex=ge}if(_<m){const{x1:M,y1:O,x2:P,y2:R,padding:$,projectedAnchorX:te,projectedAnchorY:ie,projectedAnchorZ:de,tileAnchorX:fe,tileAnchorY:ae,featureIndex:ge}=o.get(_);E.verticalTextBox={x1:M,y1:O,x2:P,y2:R,padding:$,projectedAnchorX:te,projectedAnchorY:ie,projectedAnchorZ:de,tileAnchorX:fe,tileAnchorY:ae},E.verticalTextFeatureIndex=ge}if(w<j){const{x1:M,y1:O,x2:P,y2:R,padding:$,projectedAnchorX:te,projectedAnchorY:ie,projectedAnchorZ:de,tileAnchorX:fe,tileAnchorY:ae,featureIndex:ge}=o.get(w);E.iconBox={x1:M,y1:O,x2:P,y2:R,padding:$,projectedAnchorX:te,projectedAnchorY:ie,projectedAnchorZ:de,tileAnchorX:fe,tileAnchorY:ae},E.iconFeatureIndex=ge}if(k<H){const{x1:M,y1:O,x2:P,y2:R,padding:$,projectedAnchorX:te,projectedAnchorY:ie,projectedAnchorZ:de,tileAnchorX:fe,tileAnchorY:ae,featureIndex:ge}=o.get(k);E.verticalIconBox={x1:M,y1:O,x2:P,y2:R,padding:$,projectedAnchorX:te,projectedAnchorY:ie,projectedAnchorZ:de,tileAnchorX:fe,tileAnchorY:ae},E.verticalIconFeatureIndex=ge}return E}deserializeCollisionBoxes(o){this.collisionArrays=[];for(let u=0;u<this.symbolInstances.length;u++){const p=this.symbolInstances.get(u);this.collisionArrays.push(this._deserializeCollisionBoxesForSymbol(o,p.textBoxStartIndex,p.textBoxEndIndex,p.verticalTextBoxStartIndex,p.verticalTextBoxEndIndex,p.iconBoxStartIndex,p.iconBoxEndIndex,p.verticalIconBoxStartIndex,p.verticalIconBoxEndIndex))}}hasTextData(){return this.text.segments.get().length>0}hasIconData(){return this.icon.segments.get().length>0}hasDebugData(){return this.textCollisionBox&&this.iconCollisionBox}hasTextCollisionBoxData(){return this.hasDebugData()&&this.textCollisionBox.segments.get().length>0}hasIconCollisionBoxData(){return this.hasDebugData()&&this.iconCollisionBox.segments.get().length>0}hasIconTextFit(){return this.hasAnyIconTextFit}addIndicesForPlacedSymbol(o,u){const p=o.placedSymbolArray.get(u),_=p.vertexStartIndex+4*p.numGlyphs;for(let m=p.vertexStartIndex;m<_;m+=4)o.indexArray.emplaceBack(m,m+1,m+2),o.indexArray.emplaceBack(m+1,m+2,m+3)}getSortedSymbolIndexes(o){if(this.sortedAngle===o&&this.symbolInstanceIndexes!==void 0)return this.symbolInstanceIndexes;const u=Math.sin(o),p=Math.cos(o),_=[],m=[],w=[];for(let j=0;j<this.symbolInstances.length;++j){w.push(j);const k=this.symbolInstances.get(j);_.push(0|Math.round(u*k.tileAnchorX+p*k.tileAnchorY)),m.push(k.featureIndex)}return w.sort((j,k)=>_[j]-_[k]||m[k]-m[j]),w}getSortedIndexesByZOffset(){if(!this.zOffsetSortDirty)return this.symbolInstanceIndexesSortedZOffset;if(!this.symbolInstanceIndexesSortedZOffset){this.symbolInstanceIndexesSortedZOffset=[];for(let o=0;o<this.symbolInstances.length;++o)this.symbolInstanceIndexesSortedZOffset.push(o)}return this.zOffsetSortDirty=!1,this.symbolInstanceIndexesSortedZOffset.sort((o,u)=>this.symbolInstances.get(u).zOffset-this.symbolInstances.get(o).zOffset)}addToSortKeyRanges(o,u){const p=this.sortKeyRanges[this.sortKeyRanges.length-1];p&&p.sortKey===u?p.symbolInstanceEnd=o+1:this.sortKeyRanges.push({sortKey:u,symbolInstanceStart:o,symbolInstanceEnd:o+1})}sortFeatures(o){if(this.sortFeaturesByY&&this.sortedAngle!==o&&!(this.text.segments.get().length>1||this.icon.segments.get().length>1)){this.symbolInstanceIndexes=this.getSortedSymbolIndexes(o),this.sortedAngle=o,this.text.indexArray.clear(),this.icon.indexArray.clear(),this.featureSortOrder=[];for(const u of this.symbolInstanceIndexes){const p=this.symbolInstances.get(u);this.featureSortOrder.push(p.featureIndex);const{rightJustifiedTextSymbolIndex:_,centerJustifiedTextSymbolIndex:m,leftJustifiedTextSymbolIndex:w,verticalPlacedTextSymbolIndex:j,placedIconSymbolIndex:k,verticalPlacedIconSymbolIndex:H}=p;_>=0&&this.addIndicesForPlacedSymbol(this.text,_),m>=0&&m!==_&&this.addIndicesForPlacedSymbol(this.text,m),w>=0&&w!==m&&w!==_&&this.addIndicesForPlacedSymbol(this.text,w),j>=0&&this.addIndicesForPlacedSymbol(this.text,j),k>=0&&this.addIndicesForPlacedSymbol(this.icon,k),H>=0&&this.addIndicesForPlacedSymbol(this.icon,H)}this.text.indexBuffer&&this.text.indexBuffer.updateData(this.text.indexArray),this.icon.indexBuffer&&this.icon.indexBuffer.updateData(this.icon.indexArray)}}}let RQ,OQ,fL;He(I4,"SymbolBucket",{omit:["layers","collisionBoxArray","features","compareText"]}),I4.addDynamicAttributes=T4;class DQ{constructor(o){this.type=o.property.overrides?o.property.overrides.runtimeType:Od,this.defaultValue=o}evaluate(o){if(o.formattedSection){const u=this.defaultValue.property.overrides;if(u&&u.hasOverride(o.formattedSection))return u.getOverride(o.formattedSection)}return o.feature&&o.featureState?this.defaultValue.evaluate(o.feature,o.featureState):this.defaultValue.property.specification.default}eachChild(o){this.defaultValue.isConstant()||o(this.defaultValue.value._styleExpression.expression)}outputDefined(){return!1}serialize(){return null}}He(DQ,"FormatSectionOverride",{omit:["defaultValue"]});const pL=()=>fL||(fL={layout:RQ||(RQ=new ks({"symbol-placement":new Mn(en.layout_symbol["symbol-placement"]),"symbol-spacing":new Mn(en.layout_symbol["symbol-spacing"]),"symbol-avoid-edges":new Mn(en.layout_symbol["symbol-avoid-edges"]),"symbol-sort-key":new Gn(en.layout_symbol["symbol-sort-key"]),"symbol-z-order":new Mn(en.layout_symbol["symbol-z-order"]),"symbol-z-elevate":new Mn(en.layout_symbol["symbol-z-elevate"]),"symbol-elevation-reference":new Mn(en.layout_symbol["symbol-elevation-reference"]),"icon-allow-overlap":new Mn(en.layout_symbol["icon-allow-overlap"]),"icon-ignore-placement":new Mn(en.layout_symbol["icon-ignore-placement"]),"icon-optional":new Mn(en.layout_symbol["icon-optional"]),"icon-rotation-alignment":new Mn(en.layout_symbol["icon-rotation-alignment"]),"icon-size":new Gn(en.layout_symbol["icon-size"]),"icon-size-scale-range":new Mn(en.layout_symbol["icon-size-scale-range"]),"icon-text-fit":new Gn(en.layout_symbol["icon-text-fit"]),"icon-text-fit-padding":new Gn(en.layout_symbol["icon-text-fit-padding"]),"icon-image":new Gn(en.layout_symbol["icon-image"]),"icon-rotate":new Gn(en.layout_symbol["icon-rotate"]),"icon-padding":new Mn(en.layout_symbol["icon-padding"]),"icon-keep-upright":new Mn(en.layout_symbol["icon-keep-upright"]),"icon-offset":new Gn(en.layout_symbol["icon-offset"]),"icon-anchor":new Gn(en.layout_symbol["icon-anchor"]),"icon-pitch-alignment":new Mn(en.layout_symbol["icon-pitch-alignment"]),"text-pitch-alignment":new Mn(en.layout_symbol["text-pitch-alignment"]),"text-rotation-alignment":new Mn(en.layout_symbol["text-rotation-alignment"]),"text-field":new Gn(en.layout_symbol["text-field"]),"text-font":new Gn(en.layout_symbol["text-font"]),"text-size":new Gn(en.layout_symbol["text-size"]),"text-size-scale-range":new Mn(en.layout_symbol["text-size-scale-range"]),"text-max-width":new Gn(en.layout_symbol["text-max-width"]),"text-line-height":new Gn(en.layout_symbol["text-line-height"]),"text-letter-spacing":new Gn(en.layout_symbol["text-letter-spacing"]),"text-justify":new Gn(en.layout_symbol["text-justify"]),"text-radial-offset":new Gn(en.layout_symbol["text-radial-offset"]),"text-variable-anchor":new Mn(en.layout_symbol["text-variable-anchor"]),"text-anchor":new Gn(en.layout_symbol["text-anchor"]),"text-max-angle":new Mn(en.layout_symbol["text-max-angle"]),"text-writing-mode":new Mn(en.layout_symbol["text-writing-mode"]),"text-rotate":new Gn(en.layout_symbol["text-rotate"]),"text-padding":new Mn(en.layout_symbol["text-padding"]),"text-keep-upright":new Mn(en.layout_symbol["text-keep-upright"]),"text-transform":new Gn(en.layout_symbol["text-transform"]),"text-offset":new Gn(en.layout_symbol["text-offset"]),"text-allow-overlap":new Mn(en.layout_symbol["text-allow-overlap"]),"text-ignore-placement":new Mn(en.layout_symbol["text-ignore-placement"]),"text-optional":new Mn(en.layout_symbol["text-optional"]),visibility:new Mn(en.layout_symbol.visibility)})),paint:OQ||(OQ=new ks({"icon-opacity":new Gn(en.paint_symbol["icon-opacity"]),"icon-occlusion-opacity":new Gn(en.paint_symbol["icon-occlusion-opacity"]),"icon-emissive-strength":new Gn(en.paint_symbol["icon-emissive-strength"]),"text-emissive-strength":new Gn(en.paint_symbol["text-emissive-strength"]),"icon-color":new Gn(en.paint_symbol["icon-color"]),"icon-halo-color":new Gn(en.paint_symbol["icon-halo-color"]),"icon-halo-width":new Gn(en.paint_symbol["icon-halo-width"]),"icon-halo-blur":new Gn(en.paint_symbol["icon-halo-blur"]),"icon-translate":new Mn(en.paint_symbol["icon-translate"]),"icon-translate-anchor":new Mn(en.paint_symbol["icon-translate-anchor"]),"icon-image-cross-fade":new Gn(en.paint_symbol["icon-image-cross-fade"]),"text-opacity":new Gn(en.paint_symbol["text-opacity"]),"text-occlusion-opacity":new Gn(en.paint_symbol["text-occlusion-opacity"]),"text-color":new Gn(en.paint_symbol["text-color"],{runtimeType:Nl,getOverride:h=>h.textColor,hasOverride:h=>!!h.textColor}),"text-halo-color":new Gn(en.paint_symbol["text-halo-color"]),"text-halo-width":new Gn(en.paint_symbol["text-halo-width"]),"text-halo-blur":new Gn(en.paint_symbol["text-halo-blur"]),"text-translate":new Mn(en.paint_symbol["text-translate"]),"text-translate-anchor":new Mn(en.paint_symbol["text-translate-anchor"]),"icon-color-saturation":new Mn(en.paint_symbol["icon-color-saturation"]),"icon-color-contrast":new Mn(en.paint_symbol["icon-color-contrast"]),"icon-color-brightness-min":new Mn(en.paint_symbol["icon-color-brightness-min"]),"icon-color-brightness-max":new Mn(en.paint_symbol["icon-color-brightness-max"]),"symbol-z-offset":new Gn(en.paint_symbol["symbol-z-offset"]),"icon-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"icon-halo-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"text-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"text-halo-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},fL);class j4 extends Ql{constructor(o,u,p,_){super(o,pL(),u,p,_),this._colorAdjustmentMatrix=Me.mat4.identity([]),this.hasInitialOcclusionOpacityProperties=o.paint!==void 0&&("icon-occlusion-opacity"in o.paint||"text-occlusion-opacity"in o.paint)}recalculate(o,u){super.recalculate(o,u),this.layout.get("icon-rotation-alignment")==="auto"&&(this.layout._values["icon-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-rotation-alignment")==="auto"&&(this.layout._values["text-rotation-alignment"]=this.layout.get("symbol-placement")!=="point"?"map":"viewport"),this.layout.get("text-pitch-alignment")==="auto"&&(this.layout._values["text-pitch-alignment"]=this.layout.get("text-rotation-alignment")),this.layout.get("icon-pitch-alignment")==="auto"&&(this.layout._values["icon-pitch-alignment"]=this.layout.get("icon-rotation-alignment"));const p=this.layout.get("text-writing-mode");if(p){const _=[];for(const m of p)_.indexOf(m)<0&&_.push(m);this.layout._values["text-writing-mode"]=_}else this.layout._values["text-writing-mode"]=this.layout.get("symbol-placement")==="point"?["horizontal"]:["horizontal","vertical"];this._setPaintOverrides()}getColorAdjustmentMatrix(o,u,p,_){return this._saturation===o&&this._contrast===u&&this._brightnessMin===p&&this._brightnessMax===_||(this._colorAdjustmentMatrix=function(m,w,j,k){m=De(m),w=je(w);const H=Me.mat4.create(),E=m/3,M=1-2*E,O=[M,E,E,0,E,M,E,0,E,E,M,0,0,0,0,1],P=.5-.5*w,R=k-j;return Me.mat4.multiply(H,[R,0,0,0,0,R,0,0,0,0,R,0,j,j,j,1],[w,0,0,0,0,w,0,0,0,0,w,0,P,P,P,1]),Me.mat4.multiply(H,H,O),H}(o,u,p,_),this._saturation=o,this._contrast=u,this._brightnessMin=p,this._brightnessMax=_),this._colorAdjustmentMatrix}getValueAndResolveTokens(o,u,p,_){const m=this.layout.get(o).evaluate(u,{},p,_),w=this._unevaluatedLayout._values[o];return w.isDataDriven()||mp(w.value)||!m?m:function(j,k){return k.replace(/{([^{}]+)}/g,(H,E)=>E in j?String(j[E]):"")}(u.properties,m)}createBucket(o){return new I4(o)}queryRadius(){return 0}queryIntersectsFeature(){return!1}_setPaintOverrides(){for(const o of pL().paint.overridableProperties){if(!j4.hasPaintOverride(this.layout,o))continue;const u=this.paint.get(o),p=new DQ(u),_=new Hc(p,u.property.specification,this.scope,this.options);let m=null;m=u.value.kind==="constant"||u.value.kind==="source"?new Am("source",_):new wf("composite",_,u.value.zoomStops,u.value._interpolationType),this.paint._values[o]=new wa(u.property,m,u.parameters)}}_handleOverridablePaintPropertyUpdate(o,u,p){return!(!this.layout||u.isDataDriven()||p.isDataDriven())&&j4.hasPaintOverride(this.layout,o)}static hasPaintOverride(o,u){const p=o.get("text-field"),_=pL().paint.properties[u];let m=!1;const w=j=>{for(const k of j)if(_.overrides&&_.overrides.hasOverride(k))return void(m=!0)};if(p.value.kind==="constant"&&p.value.value instanceof yo)w(p.value.value.sections);else if(p.value.kind==="source"){const j=H=>{m||(H instanceof tc&&xs(H.value)===us?w(H.value.sections):H instanceof Qo?w(H.sections):H.eachChild(j))},k=p.value;k._styleExpression&&j(k._styleExpression.expression)}return m}getProgramIds(){return["symbol"]}getDefaultProgramParams(o,u,p){return{config:new pA(this,{zoom:u,lut:p}),overrideFog:!1}}}let UQ,zQ,QQ,HQ;var AL=$i([{name:"a_pos",type:"Int16",components:2},{name:"a_texture_pos",type:"Int16",components:2}]);function mL(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.RGBA;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.DEPTH_COMPONENT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.DEPTH_STENCIL;case WebGL2RenderingContext.R8:case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.RED}}function gL(h){switch(h){case WebGL2RenderingContext.RGBA8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.DEPTH_COMPONENT16:return WebGL2RenderingContext.UNSIGNED_SHORT;case WebGL2RenderingContext.DEPTH24_STENCIL8:return WebGL2RenderingContext.UNSIGNED_INT_24_8;case WebGL2RenderingContext.R8:return WebGL2RenderingContext.UNSIGNED_BYTE;case WebGL2RenderingContext.R32F:return WebGL2RenderingContext.FLOAT}}class yL{constructor(o,u,p,_){this.context=o,this.format=p,this.useMipmap=_&&_.useMipmap,this.texture=o.gl.createTexture(),this.update(u,{premultiply:_&&_.premultiply})}update(o,u){const p=o&&o instanceof HTMLVideoElement&&o.width===0?o.videoWidth:o.width,_=o&&o instanceof HTMLVideoElement&&o.height===0?o.videoHeight:o.height,{context:m}=this,{gl:w}=m,{x:j,y:k}=u&&u.position?u.position:{x:0,y:0},H=Math.max(j+p,this.size?this.size[0]:0),E=Math.max(k+_,this.size?this.size[1]:0);!this.size||this.size[0]===H&&this.size[1]===E||(w.bindTexture(w.TEXTURE_2D,null),w.deleteTexture(this.texture),this.texture=w.createTexture(),this.size=null),w.bindTexture(w.TEXTURE_2D,this.texture),m.pixelStoreUnpackFlipY.set(!1),m.pixelStoreUnpack.set(1),m.pixelStoreUnpackPremultiplyAlpha.set(this.format===w.RGBA8&&(!u||u.premultiply!==!1));const M=o instanceof HTMLImageElement||o instanceof HTMLCanvasElement||o instanceof HTMLVideoElement||o instanceof ImageData||ImageBitmap&&o instanceof ImageBitmap;if(!this.size&&H>0&&E>0){const O=this.useMipmap?Math.floor(Math.log2(Math.max(H,E)))+1:1;w.texStorage2D(w.TEXTURE_2D,O,this.format,H,E),this.size=[H,E]}if(this.size)if(M)w.texSubImage2D(w.TEXTURE_2D,0,j,k,mL(this.format),gL(this.format),o);else{const O=o.data;O&&w.texSubImage2D(w.TEXTURE_2D,0,j,k,p,_,mL(this.format),gL(this.format),O)}this.useMipmap&&w.generateMipmap(w.TEXTURE_2D)}bind(o,u,p=!1){const{context:_}=this,{gl:m}=_;m.bindTexture(m.TEXTURE_2D,this.texture),o!==this.minFilter&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MAG_FILTER,o),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_MIN_FILTER,this.useMipmap&&!p?o===m.NEAREST?m.NEAREST_MIPMAP_NEAREST:m.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),u!==this.wrapS&&(m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_S,u),m.texParameteri(m.TEXTURE_2D,m.TEXTURE_WRAP_T,u),this.wrapS=u)}bindExtraParam(o,u,p,_){const{context:m}=this,{gl:w}=m;w.bindTexture(w.TEXTURE_2D,this.texture),u!==this.magFilter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MAG_FILTER,u),this.magFilter=u),o!==this.minFilter&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_MIN_FILTER,this.useMipmap?o===w.NEAREST?w.NEAREST_MIPMAP_NEAREST:w.LINEAR_MIPMAP_LINEAR:o),this.minFilter=o),p!==this.wrapS&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_S,p),this.wrapS=p),_!==this.wrapT&&(w.texParameteri(w.TEXTURE_2D,w.TEXTURE_WRAP_T,_),this.wrapT=_)}destroy(){const{gl:o}=this.context;o.deleteTexture(this.texture),this.texture=null}}class F4{constructor(o,u){this.context=o,this.texture=u}bind(o,u){const{context:p}=this,{gl:_}=p;_.bindTexture(_.TEXTURE_2D,this.texture),o!==this.minFilter&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MAG_FILTER,o),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_MIN_FILTER,o),this.minFilter=o),u!==this.wrapS&&(_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_S,u),_.texParameteri(_.TEXTURE_2D,_.TEXTURE_WRAP_T,u),this.wrapS=u)}}function P4(h,o,u,p,_,m,w,j){const k=[h,o,1,u,p,1,_,m,1],H=[w,j,1],E=Me.mat3.adjoint([],k),[M,O,P]=Me.vec3.transformMat3(H,H,E);return Me.mat3.multiply(k,k,[M,0,0,0,O,0,0,0,P])}function VQ(h,o,u,p,_,m,w,j){const k=function(H,E,M,O,P,R,$,te){const ie=P4(0,0,1,0,1,1,0,1),de=P4(H,E,M,O,P,R,$,te),fe=Me.mat3.adjoint([],ie);return Me.mat3.multiply(de,de,fe)}(h,o,u,p,_,m,w,j);return[k[2]/k[8]/Wn,k[5]/k[8]/Wn]}function k4(h){return[h[0],Math.min(Math.max(h[1],-$o),$o)]}class $Q extends Ch{constructor(o,u,p,_){super(),this.id=o,this.dispatcher=p,this.coordinates=u.coordinates,this.type="image",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this.tiles={},this._loaded=!1,this.onNorthPole=!1,this.onSouthPole=!1,this.setEventedParent(_),this.options=u,this._dirty=!1}load(o,u){if(this._loaded=u||!1,this.fire(new su("dataloading",{dataType:"source"})),this.url=this.options.url,!this.url)return o&&(this.coordinates=o),this._loaded=!0,void this._finishLoading();this._imageRequest=vl(this.map._requestManager.transformRequest(this.url,Yl.Image),(p,_)=>{this._imageRequest=null,this._loaded=!0,p?this.fire(new xl(p)):_&&(this.image=_ instanceof HTMLImageElement?_n.getImageData(_):_,this._dirty=!0,this.width=this.image.width,this.height=this.image.height,o&&(this.coordinates=o),this._finishLoading())})}loaded(){return this._loaded}updateImage(o){return o.url?(this._imageRequest&&o.url!==this.options.url&&(this._imageRequest.cancel(),this._imageRequest=null),this.options.url=o.url,this.load(o.coordinates,this._loaded),this):this}setTexture(o){if(!(o.handle instanceof WebGLTexture))throw new Error("The provided handle is not a WebGLTexture instance");return this.texture=new F4(this.map.painter.context,o.handle),this.width=o.dimensions[0],this.height=o.dimensions[1],this._dirty=!1,this._loaded=!0,this._finishLoading(),this}_finishLoading(){this.map&&(this.setCoordinates(this.coordinates),this.fire(new su("data",{dataType:"source",sourceDataType:"metadata"})))}onAdd(o){this.map=o,this.load()}onRemove(o){this._imageRequest&&(this._imageRequest.cancel(),this._imageRequest=null),!this.texture||this.texture instanceof F4||this.texture.destroy(),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy())}setCoordinates(o){if(this.coordinates=o,this._boundsArray=void 0,this._unsupportedCoords=!1,!o.length)return this;this.onNorthPole=!1,this.onSouthPole=!1;let u=o[0][1],p=o[0][1];for(const m of o)m[1]>p&&(p=m[1]),m[1]<u&&(u=m[1]);const _=(p+u)/2;if(_>$o?this.onNorthPole=!0:_<-$o&&(this.onSouthPole=!0),!this.onNorthPole&&!this.onSouthPole){const m=o.map(C.fromLngLat);this.tileID=function(w){let j=1/0,k=1/0,H=-1/0,E=-1/0;for(const $ of w)j=Math.min(j,$.x),k=Math.min(k,$.y),H=Math.max(H,$.x),E=Math.max(E,$.y);const M=Math.max(H-j,E-k),O=Math.max(0,Math.floor(-Math.log(M)/Math.LN2)),P=Math.pow(2,O);let R=Math.floor((j+H)/2*P);return R>1&&(R-=1),new tr(O,R,Math.floor((k+E)/2*P))}(m),this.minzoom=this.maxzoom=this.tileID.z}return this.fire(new su("data",{dataType:"source",sourceDataType:"content"})),this}_clear(){this._boundsArray=void 0,this._unsupportedCoords=!1}_prepareData(o){for(const ie in this.tiles){const de=this.tiles[ie];de.state!=="loaded"&&(de.state="loaded",de.texture=this.texture)}if(this._boundsArray||this.onNorthPole||this.onSouthPole||this._unsupportedCoords)return;const u=I(new tr(0,0,0),this.map.transform.projection),p=[u.projection.project(this.coordinates[0][0],this.coordinates[0][1]),u.projection.project(this.coordinates[1][0],this.coordinates[1][1]),u.projection.project(this.coordinates[2][0],this.coordinates[2][1]),u.projection.project(this.coordinates[3][0],this.coordinates[3][1])];if(!function(ie){const de=ie[1].x-ie[0].x,fe=ie[1].y-ie[0].y,ae=ie[2].x-ie[1].x,ge=ie[2].y-ie[1].y,Be=ie[3].x-ie[2].x,ke=ie[3].y-ie[2].y,Ye=ie[0].x-ie[3].x,Xe=ie[0].y-ie[3].y,We=de*ge-ae*fe,At=ae*ke-Be*ge,nt=Be*Xe-Ye*ke,yt=Ye*fe-de*Xe;return We>0&&At>0&&nt>0&&yt>0||We<0&&At<0&&nt<0&&yt<0}(p))return console.warn("Image source coordinates are defining non-convex area in the Mercator projection"),void(this._unsupportedCoords=!0);const _=I(this.tileID,this.map.transform.projection),[m,w,j,k]=this.coordinates.map(ie=>{const de=_.projection.project(ie[0],ie[1]);return D(_,de)._round()});this.perspectiveTransform=VQ(m.x,m.y,w.x,w.y,j.x,j.y,k.x,k.y);const H=this._boundsArray=new eh;H.emplaceBack(m.x,m.y,0,0),H.emplaceBack(w.x,w.y,Wn,0),H.emplaceBack(k.x,k.y,0,Wn),H.emplaceBack(j.x,j.y,Wn,Wn),this.boundsBuffer&&(this.boundsBuffer.destroy(),this.elevatedGlobeVertexBuffer&&this.elevatedGlobeVertexBuffer.destroy(),this.elevatedGlobeIndexBuffer&&this.elevatedGlobeIndexBuffer.destroy()),this.boundsBuffer=o.createVertexBuffer(H,AL.members),this.boundsSegments=po.simpleSegment(0,0,4,2);const E=[],M=[k4((O=this.coordinates)[0]),k4(O[1]),k4(O[2]),k4(O[3])];var O;const[P,R,$,te]=function(ie){let de=ie[0][0],fe=de,ae=ie[0][1],ge=ae;for(let Be=1;Be<ie.length;Be++)ie[Be][0]<de?de=ie[Be][0]:ie[Be][0]>fe&&(fe=ie[Be][0]),ie[Be][1]<ae?ae=ie[Be][1]:ie[Be][1]>ge&&(ge=ie[Be][1]);return[de,ae,fe-de,ge-ae]}(M);{const ie=new eh,[de,fe,ae,ge]=function(Ut){let Wt=Ut[0].x,Pt=Wt,mn=Ut[0].y,Nn=mn;for(let vn=1;vn<Ut.length;vn++)Ut[vn].x<Wt?Wt=Ut[vn].x:Ut[vn].x>Pt&&(Pt=Ut[vn].x),Ut[vn].y<mn?mn=Ut[vn].y:Ut[vn].y>Nn&&(Nn=Ut[vn].y);return[Wt,mn,Pt-Wt,Nn-mn]}(p),Be=Ut=>[(Ut.x-de)/ae,(Ut.y-fe)/ge],[ke,Ye,Xe,We]=p.map(Be),At=function(Ut,Wt,Pt,mn,Nn,vn,qn,Kn){const ir=P4(0,0,1,0,1,1,0,1),Bn=P4(Ut,Wt,Pt,mn,Nn,vn,qn,Kn),Br=Me.mat3.adjoint([],Bn);return Me.mat3.multiply(ir,ir,Br)}(ke[0],ke[1],Ye[0],Ye[1],Xe[0],Xe[1],We[0],We[1]);this.elevatedGlobePerspectiveTransform=VQ(ke[0],ke[1],Ye[0],Ye[1],Xe[0],Xe[1],We[0],We[1]);const nt=(Ut,Wt)=>{E.push(Ut.lng);const Pt=Math.round((Ut.lng-P)/$*Wn),mn=Math.round((Ut.lat-R)/te*Wn),Nn=Be(Wt),vn=Me.vec3.transformMat3([],[Nn[0],Nn[1],1],At),qn=Math.round(vn[0]/vn[2]*Wn),Kn=Math.round(vn[1]/vn[2]*Wn);ie.emplaceBack(Pt,mn,qn,Kn)},yt=p[3].x-p[0].x,bt=p[3].y-p[0].y,_t=p[2].x-p[1].x,Et=p[2].y-p[1].y;for(let Ut=0;Ut<65;Ut++){const Wt=Ut/64,Pt=[p[0].x+Wt*yt,p[0].y+Wt*bt],mn=[p[1].x+Wt*_t,p[1].y+Wt*Et],Nn=mn[0]-Pt[0],vn=mn[1]-Pt[1];for(let qn=0;qn<65;qn++){const Kn=qn/64,ir={x:Pt[0]+Nn*Kn,y:Pt[1]+vn*Kn,z:0};nt(u.projection.unproject(ir.x,ir.y),ir)}}this.elevatedGlobeVertexBuffer=o.createVertexBuffer(ie,AL.members)}{this.maxLongitudeTriangleSize=0;let ie=[],de=new $a;const fe=(ae,ge,Be)=>{de.emplaceBack(ae,ge,Be);const ke=E[ae],Ye=E[ge],Xe=E[Be],We=Math.min(Math.min(ke,Ye),Xe),At=Math.max(Math.max(ke,Ye),Xe)-We;At>this.maxLongitudeTriangleSize&&(this.maxLongitudeTriangleSize=At),ie.push(We+At/2)};for(let ae=0;ae<64;ae++)for(let ge=0;ge<64;ge++){const Be=65*ae+ge,ke=Be+1,Ye=Be+65,Xe=Ye+1;fe(Be,Ye,ke),fe(ke,Ye,Xe)}[ie,de]=function(ae,ge){const Be=Array.from({length:ae.length},(Xe,We)=>We);Be.sort((Xe,We)=>ae[Xe]-ae[We]);const ke=[],Ye=new $a;for(let Xe=0;Xe<Be.length;Xe++){const We=Be[Xe];ke.push(ae[We]);const At=3*We,nt=At+1;Ye.emplaceBack(ge.uint16[At],ge.uint16[nt],ge.uint16[nt+1])}return[ke,Ye]}(ie,de),this.elevatedGlobeTrianglesCenterLongitudes=ie,this.elevatedGlobeIndexBuffer=o.createIndexBuffer(de)}this.elevatedGlobeSegments=po.simpleSegment(0,0,4225,8192),this.elevatedGlobeGridMatrix=new Float32Array([0,$/Wn,0,te/Wn,0,0,R,P,0])}prepare(){const o=Object.keys(this.tiles).length!==0;if(this.tileID&&!o)return;const u=this.map.painter.context,p=u.gl;!this._dirty||this.texture instanceof F4||(this.texture?this.texture.update(this.image):(this.texture=new yL(u,this.image,p.RGBA8),this.texture.bind(p.LINEAR,p.CLAMP_TO_EDGE)),this._dirty=!1),o&&this._prepareData(u)}loadTile(o,u){this.tileID&&this.tileID.equals(o.tileID.canonical)?(this.tiles[String(o.tileID.wrap)]=o,o.buckets={},u(null)):(o.state="errored",u(null))}serialize(){return{type:"image",url:this.options.url,coordinates:this.coordinates}}hasTransition(){return!1}getSegmentsForLongitude(o){const u=this.elevatedGlobeSegments;if(!this.elevatedGlobeTrianglesCenterLongitudes||!u)return null;const p=this.elevatedGlobeTrianglesCenterLongitudes;let _=(m=o+180)+360*Math.round((p[0]-m)/360);var m;const w=new po,j=(M,O)=>{w.segments.push({vertexOffset:0,primitiveOffset:M,vertexLength:u.segments[0].vertexLength,primitiveLength:O,sortKey:void 0,vaos:{}})},k=.51*this.maxLongitudeTriangleSize;if(Math.abs(p[0]-_)<=k){const M=Mt(p,0,p.length,_+k);return M===p.length||j(M,Kr(p,M+1,p.length,_+360-k)-M),w}_<p[0]&&(_+=360);const H=Kr(p,0,p.length,_-k);if(H===p.length)return j(0,p.length),w;j(0,H-0);const E=Mt(p,H+1,p.length,_+k);return E!==p.length&&j(E,p.length-E),w}}const Cfe=(Math.pow(256,2)-1)/16907520;class GQ extends Ql{constructor(o,u,p,_){super(o,{layout:QQ||(QQ=new ks({visibility:new Mn(en.layout_raster.visibility)})),paint:HQ||(HQ=new ks({"raster-opacity":new Mn(en.paint_raster["raster-opacity"]),"raster-color":new Ic(en.paint_raster["raster-color"]),"raster-color-mix":new Mn(en.paint_raster["raster-color-mix"]),"raster-color-range":new Mn(en.paint_raster["raster-color-range"]),"raster-hue-rotate":new Mn(en.paint_raster["raster-hue-rotate"]),"raster-brightness-min":new Mn(en.paint_raster["raster-brightness-min"]),"raster-brightness-max":new Mn(en.paint_raster["raster-brightness-max"]),"raster-saturation":new Mn(en.paint_raster["raster-saturation"]),"raster-contrast":new Mn(en.paint_raster["raster-contrast"]),"raster-resampling":new Mn(en.paint_raster["raster-resampling"]),"raster-fade-duration":new Mn(en.paint_raster["raster-fade-duration"]),"raster-emissive-strength":new Mn(en.paint_raster["raster-emissive-strength"]),"raster-array-band":new Mn(en.paint_raster["raster-array-band"]),"raster-elevation":new Mn(en.paint_raster["raster-elevation"]),"raster-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},u,p,_),this.updateColorRamp(),this._curRampRange=[NaN,NaN]}getProgramIds(){return["raster"]}hasColorMap(){return!!this._transitionablePaint._values["raster-color"].value.value}tileCoverLift(){return this.paint.get("raster-elevation")}isDraped(o){return!(o&&o._source instanceof $Q&&(o._source.onNorthPole||o._source.onSouthPole))&&this.paint.get("raster-elevation")===0}_handleSpecialPaintPropertyUpdate(o){o!=="raster-color"&&o!=="raster-color-range"||(this._curRampRange=[NaN,NaN],this.updateColorRamp())}updateColorRamp(o){if(!this.hasColorMap()||!this._curRampRange)return;const u=this._transitionablePaint._values["raster-color"].value.expression,[p,_]=o||this._transitionablePaint._values["raster-color-range"].value.expression.evaluate({zoom:0})||[NaN,NaN];isNaN(p)&&isNaN(_)||p===this._curRampRange[0]&&_===this._curRampRange[1]||(this.colorRamp=yv({expression:u,evaluationKey:"rasterValue",image:this.colorRamp,clips:[{start:p,end:_}],resolution:256}),this.colorRampTexture=null,this._curRampRange=[p,_])}}let KQ,WQ,qQ,ZQ,XQ;class YQ extends Ql{constructor(o,u,p,_){super(o,{layout:KQ||(KQ=new ks({visibility:new Mn(en["layout_raster-particle"].visibility)})),paint:WQ||(WQ=new ks({"raster-particle-array-band":new Mn(en["paint_raster-particle"]["raster-particle-array-band"]),"raster-particle-count":new Mn(en["paint_raster-particle"]["raster-particle-count"]),"raster-particle-color":new Ic(en["paint_raster-particle"]["raster-particle-color"]),"raster-particle-max-speed":new Mn(en["paint_raster-particle"]["raster-particle-max-speed"]),"raster-particle-speed-factor":new Mn(en["paint_raster-particle"]["raster-particle-speed-factor"]),"raster-particle-fade-opacity-factor":new Mn(en["paint_raster-particle"]["raster-particle-fade-opacity-factor"]),"raster-particle-reset-rate-factor":new Mn(en["paint_raster-particle"]["raster-particle-reset-rate-factor"]),"raster-particle-elevation":new Mn(en["paint_raster-particle"]["raster-particle-elevation"]),"raster-particle-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},u,p,_),this._updateColorRamp(),this.lastInvalidatedAt=_n.now()}onRemove(o){this.colorRampTexture&&this.colorRampTexture.destroy(),this.tileFramebuffer&&this.tileFramebuffer.destroy(),this.particleFramebuffer&&this.particleFramebuffer.destroy()}hasColorMap(){return!!this._transitionablePaint._values["raster-particle-color"].value.value}getProgramIds(){return["rasterParticle"]}hasOffscreenPass(){return this.visibility!=="none"}isDraped(o){return!1}_handleSpecialPaintPropertyUpdate(o){o!=="raster-particle-color"&&o!=="raster-particle-max-speed"||(this._updateColorRamp(),this._invalidateAnimationState()),o==="raster-particle-count"&&this._invalidateAnimationState()}_updateColorRamp(){if(!this.hasColorMap())return;const o=this._transitionablePaint._values["raster-particle-color"].value.expression,u=this._transitionablePaint._values["raster-particle-max-speed"].value.expression.evaluate({zoom:0});this.colorRamp=yv({expression:o,evaluationKey:"rasterParticleSpeed",image:this.colorRamp,clips:[{start:0,end:u}],resolution:256}),this.colorRampTexture=null}_invalidateAnimationState(){this.lastInvalidatedAt=_n.now()}tileCoverLift(){return this.paint.get("raster-particle-elevation")}}class Sfe extends Ql{constructor(o,u){super(o,{},u,null),this.implementation=o,o.slot&&(this.slot=o.slot)}is3D(){return this.implementation.renderingMode==="3d"}hasOffscreenPass(){return this.implementation.prerender!==void 0}isDraped(o){return this.implementation.renderToTile!==void 0}shouldRedrape(){return!!this.implementation.shouldRerenderTiles&&this.implementation.shouldRerenderTiles()}recalculate(){}updateTransitions(){}hasTransition(){return!1}serialize(){}onAdd(o){this.implementation.onAdd&&this.implementation.onAdd(o,o.painter.context.gl)}onRemove(o){this.implementation.onRemove&&this.implementation.onRemove(o,o.painter.context.gl)}}function vL(h,o,u){const p=[0,0,1],_=Me.quat.identity([]);return Me.quat.rotateY(_,_,u?-Vt(h)+Math.PI:Vt(h)),Me.quat.rotateX(_,_,-Vt(o)),Me.vec3.transformQuat(p,p,_),Me.vec3.normalize(p,p)}function JQ(h,o){const u=L4(h.projection,h.zoom,h.width,h.height),p=function(m,w,j,k,H){const E=new es(j.lng-180*D0,j.lat),M=new es(j.lng+180*D0,j.lat),O=m.project(E.lng,E.lat),P=m.project(M.lng,M.lat),R=-Math.atan2(P.y-O.y,P.x-O.x),$=C.fromLngLat(j);$.y=Gt($.y,-1+D0,1-D0);const te=$.toLngLat(),ie=m.project(te.lng,te.lat),de=C.fromLngLat(te);de.x+=D0;const fe=de.toLngLat(),ae=m.project(fe.lng,fe.lat),ge=t9(ae.x-ie.x,ae.y-ie.y,R),Be=C.fromLngLat(te);Be.y+=D0;const ke=Be.toLngLat(),Ye=m.project(ke.lng,ke.lat),Xe=t9(Ye.x-ie.x,Ye.y-ie.y,R),We=Math.abs(ge.x)/Math.abs(Xe.y),At=Me.mat4.identity([]);Me.mat4.rotateZ(At,At,-R*(1-(H?0:k)));const nt=Me.mat4.identity([]);return Me.mat4.scale(nt,nt,[1,1-(1-We)*k,1]),nt[4]=-Xe.x/Xe.y*k,Me.mat4.rotateZ(nt,nt,R),Me.mat4.multiply(nt,At,nt),nt}(h.projection,0,h.center,u,o),_=e9(h);return Me.mat4.scale(p,p,[_,_,1]),p}function e9(h){const o=h.projection,u=L4(h.projection,h.zoom,h.width,h.height),p=xL(o,h.center),_=xL(o,es.convert(o.center));return Math.pow(2,p*u+(1-u)*_)}function L4(h,o,u,p,_=1/0){const m=h.range;if(!m)return 0;const w=Math.min(_,Math.max(u,p)),j=Math.log(w/1024)/Math.LN2;return Rn(m[0]+j,m[1]+j,o)}const D0=1/4e4;function xL(h,o){const u=Gt(o.lat,-$o,$o),p=new es(o.lng-180*D0,u),_=new es(o.lng+180*D0,u),m=h.project(p.lng,u),w=h.project(_.lng,u),j=C.fromLngLat(p),k=C.fromLngLat(_),H=w.x-m.x,E=w.y-m.y,M=k.x-j.x,O=k.y-j.y,P=Math.sqrt((M*M+O*O)/(H*H+E*E));return Math.log(P)/Math.LN2}function t9(h,o,u){const p=Math.cos(u),_=Math.sin(u);return{x:h*p-o*_,y:h*_+o*p}}function n9(h,o,u){Me.mat4.identity(h),Me.mat4.rotateZ(h,h,Vt(o[2])),Me.mat4.rotateX(h,h,Vt(o[0])),Me.mat4.rotateY(h,h,Vt(o[1])),Me.mat4.scale(h,h,u),Me.mat4.multiply(h,h,[1,0,0,0,0,0,1,0,0,1,0,0,0,0,0,1])}function M4(h,o,u,p,_,m,w,j){const k=[u[0]-o[0],u[1]-o[1],0],H=[p[0]-o[0],p[1]-o[1],0];if(Me.vec3.length(k)<1e-12||Me.vec3.length(H)<1e-12)return Me.quat.identity(h);const E=Me.vec3.cross([],k,H);Me.vec3.normalize(E,E),Me.vec3.subtract(H,p,o),k[2]=(m-_)*j,H[2]=(w-_)*j;const M=k;return Me.vec3.cross(M,k,H),Me.vec3.normalize(M,M),Me.quat.rotationTo(h,E,M)}function _L(h,o,u=!1){const p=cc(o.zoom),_=function(m,w,j){const k=w.worldSize,H=[m[12],m[13],m[14]],E=Wa(H[1]/k),M=Ro(H[0]/k),O=Me.mat4.identity([]),P=ua(1,E)*k,R=ua(1,0)*k*l(E,w.zoom),$=1/Wc(k);let te=R*$;if(j){const ae=L4(w.projection,w.zoom,w.width,w.height,1024);te=$*w.projection.pixelSpaceConversion(w.center.lat,k,ae)}const ie=Cp(E,M);Me.vec3.add(ie,ie,Me.vec3.scale([],Me.vec3.normalize([],ie),P*te*H[2]));const de=function(ae){const ge=[ae[0],ae[1],ae[2]];let Be=[0,1,0];const ke=Me.vec3.cross([],Be,ge);return Me.vec3.cross(Be,ge,ke),Me.vec3.squaredLength(Be)===0&&(Be=[0,1,0],Me.vec3.cross(ke,ge,Be)),Me.vec3.normalize(ke,ke),Me.vec3.normalize(Be,Be),Me.vec3.normalize(ge,ge),[ke[0],ke[1],ke[2],0,Be[0],Be[1],Be[2],0,ge[0],ge[1],ge[2],0,ae[0],ae[1],ae[2],1]}(ie);Me.mat4.scale(O,O,[te,te,te*P]),Me.mat4.translate(O,O,[-H[0],-H[1],-H[2]]);const fe=Me.mat4.multiply([],w.globeMatrix,de);return Me.mat4.multiply(fe,fe,O),Me.mat4.multiply(fe,fe,m),fe}(h,o,u);if(p>0){const m=function(w,j){const k=j.worldSize,H=ua(1,0)*k*l(j.center.lat,j.zoom)/Wc(k),E=ua(1,j.center.lat)*k,M=Me.mat4.identity([]);return Me.mat4.rotateY(M,M,Vt(j.center.lng)),Me.mat4.rotateX(M,M,Vt(j.center.lat)),Me.mat4.translate(M,M,[0,0,Cl]),Me.mat4.scale(M,M,[H,H,H*E]),Me.mat4.translate(M,M,[j.point.x-.5*k,j.point.y-.5*k,0]),Me.mat4.multiply(M,M,w),Me.mat4.multiply(M,j.globeMatrix,M)}(h,o);return function(w,j,k){const H=(R,$,te)=>{const ie=Me.vec3.length(R),de=Me.vec3.length($),fe=da(R,$,te);return Me.vec3.scale(fe,fe,1/Me.vec3.length(fe)*Ur(ie,de,te))},E=H([w[0],w[1],w[2]],[j[0],j[1],j[2]],k),M=H([w[4],w[5],w[6]],[j[4],j[5],j[6]],k),O=H([w[8],w[9],w[10]],[j[8],j[9],j[10]],k),P=da([w[12],w[13],w[14]],[j[12],j[13],j[14]],k);return[E[0],E[1],E[2],0,M[0],M[1],M[2],0,O[0],O[1],O[2],0,P[0],P[1],P[2],1]}(_,m,p)}return _}function r9(h,o,u,p){const _=$r.projectAabbCorners(p,u);let m=Number.MAX_VALUE,w=-1;for(let H=0;H<_.length;++H){const E=_[H];E[0]=(.5*E[0]+.5)*o.width,E[1]=(.5-.5*E[1])*o.height,E[2]<m&&(w=H,m=E[2])}const j=H=>new Dt(_[H][0],_[H][1]);let k;switch(w){case 0:case 6:k=[j(1),j(5),j(4),j(7),j(3),j(2),j(1)];break;case 1:case 7:k=[j(0),j(4),j(5),j(6),j(2),j(3),j(0)];break;case 3:case 5:k=[j(1),j(0),j(4),j(7),j(6),j(2),j(1)];break;default:k=[j(1),j(5),j(6),j(7),j(3),j(0),j(1)]}if(Le(h,k))return m}const Bfe=$i([{name:"a_pos_3f",components:3,type:"Float32"}]),Efe=$i([{name:"a_color_3f",components:3,type:"Float32"}]),Tfe=$i([{name:"a_color_4f",components:4,type:"Float32"}]),Ife=$i([{name:"a_uv_2f",components:2,type:"Float32"}]),jfe=$i([{name:"a_normal_3f",components:3,type:"Float32"}]),Ffe=$i([{name:"a_normal_matrix0",components:4,type:"Float32"},{name:"a_normal_matrix1",components:4,type:"Float32"},{name:"a_normal_matrix2",components:4,type:"Float32"},{name:"a_normal_matrix3",components:4,type:"Float32"}]),Pfe=$i([{name:"a_pbr",components:4,type:"Uint16"},{name:"a_heightBasedEmissiveStrength",components:3,type:"Float32"}]),i9={None:0,Model:1,Symbol:2,FillExtrusion:4,All:7};class N4{constructor(o,u,p,_){this.message=(o?`${o}: `:"")+p,_&&(this.identifier=_),u!=null&&u.__line__&&(this.line=u.__line__)}}function s9(h,o){const u=h.indexOf("://")===-1;try{return new URL(h,u&&o?"http://example.com":void 0),!0}catch{return!1}}class o9{constructor(o,u){this.feature=o,this.instancedDataOffset=u,this.instancedDataCount=0,this.rotation=[0,0,0],this.scale=[1,1,1],this.translation=[0,0,0]}}class a9{constructor(){this.instancedDataArray=new nh,this.instancesEvaluatedElevation=[],this.features=[],this.idToFeaturesIndex={}}}class wL{constructor(o){this.zoom=o.zoom,this.canonical=o.canonical,this.layers=o.layers,this.layerIds=this.layers.map(u=>u.fqid),this.projection=o.projection,this.index=o.index,this.hasZoomDependentProperties=this.layers[0].isZoomDependent(),this.stateDependentLayerIds=this.layers.filter(u=>u.isStateDependent()).map(u=>u.id),this.hasPattern=!1,this.instancesPerModel={},this.validForExaggeration=0,this.maxVerticalOffset=0,this.maxScale=0,this.maxHeight=0,this.lookupDim=this.zoom>this.canonical.z?256:this.zoom>15?75:100,this.instanceCount=0,this.terrainElevationMin=0,this.terrainElevationMax=0,this.validForDEMTile={id:null,timestamp:0},this.modelUris=[],this.modelsRequested=!1,this.activeReplacements=[],this.replacementUpdateTime=0}updateFootprints(o,u){}populate(o,u,p,_){this.tileToMeter=x(p);const m=this.layers[0]._featureFilter.needGeometry;this.lookup=new Uint8Array(this.lookupDim*this.lookupDim);for(const{feature:w,id:j,index:k,sourceLayerIndex:H}of o){const E=j??(w.properties&&w.properties.hasOwnProperty("id")?w.properties.id:void 0),M=ue(w,m);if(!this.layers[0]._featureFilter.filter(new qr(this.zoom),M,p))continue;const O={id:E,sourceLayerIndex:H,index:k,geometry:m?M.geometry:se(w,p,_),properties:w.properties,type:w.type,patterns:{}},P=this.addFeature(O,O.geometry,M);P&&u.featureIndex.insert(w,O.geometry,k,H,this.index,this.instancesPerModel[P].instancedDataArray.length,Wn/32)}this.lookup=null}update(o,u,p,_){for(const m in this.instancesPerModel){const w=this.instancesPerModel[m];for(const j in o)w.idToFeaturesIndex.hasOwnProperty(j)&&(this.evaluate(w.features[w.idToFeaturesIndex[j]],o[j],w,!0),this.uploaded=!1)}this.maxHeight=0}updateZoomBasedPaintProperties(){if(!this.hasZoomDependentProperties)return!1;let o=!1;for(const u in this.instancesPerModel){const p=this.instancesPerModel[u];for(const _ of p.features){const m=this.layers[0],w=_.feature,j=this.canonical,k=m.paint.get("model-rotation").evaluate(w,{},j),H=m.paint.get("model-scale").evaluate(w,{},j),E=m.paint.get("model-translation").evaluate(w,{},j);Me.vec3.exactEquals(_.rotation,k)&&Me.vec3.exactEquals(_.scale,H)&&Me.vec3.exactEquals(_.translation,E)||(this.evaluate(_,_.featureStates,p,!0),o=!0)}}return o}updateReplacement(o,u,p,_){if(u.updateTime===this.replacementUpdateTime)return!1;this.replacementUpdateTime=u.updateTime;const m=u.getReplacementRegionsForTile(o.toUnwrapped(),!0);if(Bv(this.activeReplacements,m))return!1;this.activeReplacements=m;let w=!1;for(const j in this.instancesPerModel){const k=this.instancesPerModel[j],H=k.instancedDataArray;for(const E of k.features){const M=E.instancedDataOffset,O=E.instancedDataCount;for(let P=0;P<O;P++){const R=16*(P+M);let $=H.float32[R+0];const te=$>Wn;$=te?$-Wn:$;const ie=Math.floor($),de=H.float32[R+1];let fe=!1;for(const ae of this.activeReplacements)if(!RE(ae,p,i9.Model,_)&&!(ae.min.x>ie||ie>ae.max.x||ae.min.y>de||de>ae.max.y)&&(fe=Ya(ka(ie,de,o.canonical,ae.footprintTileId.canonical),ae.footprint),fe))break;H.float32[R]=fe?$+Wn:$,w=w||fe!==te}}}return w}isEmpty(){for(const o in this.instancesPerModel)if(this.instancesPerModel[o].instancedDataArray.length!==0)return!1;return!0}uploadPending(){return!this.uploaded}upload(o){if(!this.uploaded)for(const u in this.instancesPerModel){const p=this.instancesPerModel[u];p.instancedDataArray.length<0||p.instancedDataArray.length===0||(p.instancedDataBuffer?p.instancedDataBuffer.updateData(p.instancedDataArray):p.instancedDataBuffer=o.createVertexBuffer(p.instancedDataArray,Ffe.members,!0,void 0,this.instanceCount))}this.uploaded=!0}destroy(){for(const u in this.instancesPerModel){const p=this.instancesPerModel[u];p.instancedDataArray.length!==0&&p.instancedDataBuffer&&p.instancedDataBuffer.destroy()}const o=this.layers[0].modelManager;if(o&&this.modelUris)for(const u of this.modelUris)o.removeModel(u,"")}addFeature(o,u,p){const _=this.layers[0],m=_.layout.get("model-id").evaluate(p,{},this.canonical);if(!m)return Vn(`modelId is not evaluated for layer ${_.id} and it is not going to get rendered.`),m;s9(m,!1)&&(this.modelUris.includes(m)||this.modelUris.push(m)),this.instancesPerModel[m]||(this.instancesPerModel[m]=new a9);const w=this.instancesPerModel[m],j=w.instancedDataArray,k=new o9(p,j.length);for(const H of u)for(const E of H){if(E.x<0||E.x>=Wn||E.y<0||E.y>=Wn)continue;const M=(this.lookupDim-1)/Wn,O=this.lookupDim*(E.y*M|0)+E.x*M|0;if(this.lookup){if(this.lookup[O]!==0)continue;this.lookup[O]=1}this.instanceCount++;const P=j.length;j.resize(P+1),w.instancesEvaluatedElevation.push(0),j.float32[16*P]=E.x,j.float32[16*P+1]=E.y}return k.instancedDataCount=w.instancedDataArray.length-k.instancedDataOffset,k.instancedDataCount>0&&(o.id&&(w.idToFeaturesIndex[o.id]=w.features.length),w.features.push(k),this.evaluate(k,{},w,!1)),m}getModelUris(){return this.modelUris}evaluate(o,u,p,_){const m=this.layers[0],w=o.feature,j=this.canonical,k=o.rotation=m.paint.get("model-rotation").evaluate(w,u,j),H=o.scale=m.paint.get("model-scale").evaluate(w,u,j),E=o.translation=m.paint.get("model-translation").evaluate(w,u,j),M=m.paint.get("model-color").evaluate(w,u,j);M.a=m.paint.get("model-color-mix-intensity").evaluate(w,u,j);const O=[];this.maxVerticalOffset<E[2]&&(this.maxVerticalOffset=E[2]),this.maxScale=Math.max(Math.max(this.maxScale,H[0]),Math.max(H[1],H[2])),n9(O,k,H);const P=Math.round(100*M.a)+M.b/1.05;for(let R=0;R<o.instancedDataCount;++R){const $=o.instancedDataOffset+R,te=16*$,ie=p.instancedDataArray.float32;let de=0;_&&(de=ie[te+6]-p.instancesEvaluatedElevation[$]);const fe=0|ie[te+1];ie[te]=(0|ie[te])+M.r/1.05,ie[te+1]=fe+M.g/1.05,ie[te+2]=P,ie[te+3]=1/(j.z>10?this.tileToMeter:x(j,fe)),ie[te+4]=E[0],ie[te+5]=E[1],ie[te+6]=E[2]+de,ie[te+7]=O[0],ie[te+8]=O[1],ie[te+9]=O[2],ie[te+10]=O[4],ie[te+11]=O[5],ie[te+12]=O[6],ie[te+13]=O[8],ie[te+14]=O[9],ie[te+15]=O[10],p.instancesEvaluatedElevation[$]=E[2]}}}let l9,c9;He(wL,"ModelBucket",{omit:["layers"]}),He(a9,"PerModelAttributes"),He(o9,"ModelFeature");const zv=64,R_={CoordinateSpaceTile:1,CoordinateSpaceYUp:2,HasMapboxMeshFeatures:4,HasMeshoptCompression:8};function u9(h,o,u,p,_,m,w,j,k,H=!1){const E=u.zoom,M=u.project(p),O=l(p.lat,E),P=1/O;Me.mat4.identity(h),Me.mat4.translate(h,h,[M.x+w[0]*P,M.y+w[1]*P,w[2]]);let R=1,$=1;const te=u.worldSize;if(H){if(u.projection.name==="mercator"){let ae=0;u.elevation&&(ae=u.elevation.getAtPointOrZero(new C(M.x/te,M.y/te),0));const ge=Me.vec4.transformMat4([],[M.x,M.y,ae,1],u.projMatrix)[3]/u.cameraToCenterDistance;R=ge,$=ge*l(u.center.lat,E)}else if(u.projection.name==="globe"){const ae=_L(h,u),ge=Me.mat4.multiply([],u.projMatrix,ae),Be=[0,0,0,1];Me.vec4.transformMat4(Be,Be,ge);const ke=Be[3]/u.cameraToCenterDistance,Ye=cc(E),Xe=u.projection.pixelsPerMeter(p.lat,te)*l(p.lat,E),We=u.projection.pixelsPerMeter(u.center.lat,te)*l(u.center.lat,E);R=ke/Ur(Xe,v(u.center.lat),Ye),$=ke*O/Xe,R*=We,$*=We}}else R=P;Me.mat4.scale(h,h,[R,R,$]);const ie=[...h],de=o.orientation,fe=[];if(n9(fe,[de[0]+_[0],de[1]+_[1],de[2]+_[2]],m),Me.mat4.multiply(h,ie,fe),j&&u.elevation){let ae=0;const ge=[];if(k&&u.elevation){ae=function(Ye,Xe,We,At,nt){const yt=Xe.elevation;if(!yt)return 0;const bt=$r.projectAabbCorners(We,At),_t=ua(1,nt.lat)*Xe.worldSize,Et=function(Br,Zn){const vr=[0,0,1],Qr=[{corners:[0,1,3,2],dotProductWithUp:0},{corners:[1,5,2,6],dotProductWithUp:0},{corners:[0,4,1,5],dotProductWithUp:0},{corners:[2,6,3,7],dotProductWithUp:0},{corners:[4,7,5,6],dotProductWithUp:0},{corners:[0,3,4,7],dotProductWithUp:0}];for(const fi of Qr){const xi=Br[fi.corners[0]],Ei=Br[fi.corners[1]],_i=Br[fi.corners[2]],Mi=[Ei[0]-xi[0],Ei[1]-xi[1],Zn*(Ei[2]-xi[2])],qs=Me.vec3.cross(Mi,Mi,[_i[0]-xi[0],_i[1]-xi[1],Zn*(_i[2]-xi[2])]);Me.vec3.normalize(qs,qs),fi.dotProductWithUp=Me.vec3.dot(qs,vr)}return Qr.sort((fi,xi)=>fi.dotProductWithUp-xi.dotProductWithUp),Qr[0].corners}(bt,_t),Ut=bt[Et[0]],Wt=bt[Et[1]],Pt=bt[Et[2]],mn=bt[Et[3]],Nn=yt.getAtPointOrZero(new C(Ut[0]/Xe.worldSize,Ut[1]/Xe.worldSize),0),vn=yt.getAtPointOrZero(new C(Wt[0]/Xe.worldSize,Wt[1]/Xe.worldSize),0),qn=yt.getAtPointOrZero(new C(Pt[0]/Xe.worldSize,Pt[1]/Xe.worldSize),0),Kn=yt.getAtPointOrZero(new C(mn[0]/Xe.worldSize,mn[1]/Xe.worldSize),0),ir=(Nn+Kn)/2,Bn=(vn+qn)/2;return ir>Bn?vn<qn?M4(Ye,Wt,mn,Ut,vn,Kn,Nn,_t):M4(Ye,Pt,Ut,mn,qn,Nn,Kn,_t):Nn<Kn?M4(Ye,Ut,Wt,Pt,Nn,vn,qn,_t):M4(Ye,mn,Pt,Wt,Kn,qn,vn,_t),Math.max(ir,Bn)}(ge,u,o.aabb,h,p);const Be=Me.mat4.fromQuat([],ge),ke=Me.mat4.multiply([],Be,fe);Me.mat4.multiply(h,ie,ke)}else ae=u.elevation.getAtPointOrZero(new C(M.x/te,M.y/te),0);ae!==0&&(h[14]+=ae)}}function Zb(h,o,u=!1){h.uploaded||(h.gfxTexture=new yL(o,h.image,u?o.gl.R8:o.gl.RGBA8,{useMipmap:h.sampler.minFilter>=o.gl.NEAREST_MIPMAP_NEAREST}),h.uploaded=!0,h.image=null)}function kfe(h,o,u){h.indexBuffer=o.createIndexBuffer(h.indexArray,!1,!0),h.vertexBuffer=o.createVertexBuffer(h.vertexArray,Bfe.members,!1,!0),h.normalArray&&(h.normalBuffer=o.createVertexBuffer(h.normalArray,jfe.members,!1,!0)),h.texcoordArray&&(h.texcoordBuffer=o.createVertexBuffer(h.texcoordArray,Ife.members,!1,!0)),h.colorArray&&(h.colorBuffer=o.createVertexBuffer(h.colorArray,(h.colorArray.bytesPerElement===12?Efe:Tfe).members,!1,!0)),h.featureArray&&(h.pbrBuffer=o.createVertexBuffer(h.featureArray,Pfe.members,!0)),h.segments=po.simpleSegment(0,0,h.vertexArray.length,h.indexArray.length);const p=h.material;p.pbrMetallicRoughness.baseColorTexture&&Zb(p.pbrMetallicRoughness.baseColorTexture,o),p.pbrMetallicRoughness.metallicRoughnessTexture&&Zb(p.pbrMetallicRoughness.metallicRoughnessTexture,o),p.normalTexture&&Zb(p.normalTexture,o),p.occlusionTexture&&Zb(p.occlusionTexture,o,u),p.emissionTexture&&Zb(p.emissionTexture,o)}function bL(h,o,u){if(h.meshes)for(const p of h.meshes)kfe(p,o,u);if(h.children)for(const p of h.children)bL(p,o,u)}function R4(h){if(h.meshes)for(const o of h.meshes)o.indexArray.destroy(),o.vertexArray.destroy(),o.colorArray&&o.colorArray.destroy(),o.normalArray&&o.normalArray.destroy(),o.texcoordArray&&o.texcoordArray.destroy(),o.featureArray&&o.featureArray.destroy();if(h.children)for(const o of h.children)R4(o)}function CL(h){if(h.meshes)for(const u of h.meshes)u.vertexBuffer&&(u.vertexBuffer.destroy(),u.indexBuffer.destroy(),u.normalBuffer&&u.normalBuffer.destroy(),u.texcoordBuffer&&u.texcoordBuffer.destroy(),u.colorBuffer&&u.colorBuffer.destroy(),u.pbrBuffer&&u.pbrBuffer.destroy(),u.segments.destroy(),u.material&&((o=u.material).pbrMetallicRoughness.baseColorTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture&&o.pbrMetallicRoughness.baseColorTexture.gfxTexture.destroy(),o.pbrMetallicRoughness.metallicRoughnessTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture&&o.pbrMetallicRoughness.metallicRoughnessTexture.gfxTexture.destroy(),o.normalTexture&&o.normalTexture.gfxTexture&&o.normalTexture.gfxTexture.destroy(),o.emissionTexture&&o.emissionTexture.gfxTexture&&o.emissionTexture.gfxTexture.destroy(),o.occlusionTexture&&o.occlusionTexture.gfxTexture&&o.occlusionTexture.gfxTexture.destroy()));var o;if(h.children)for(const u of h.children)CL(u)}class O_{constructor(o,u,p){this._demTile=o,this._dem=this._demTile.dem,this._scale=u,this._offset=p}static create(o,u,p){const _=p||o.findDEMTileFor(u);if(!_||!_.dem)return;const m=_.dem,w=_.tileID,j=1<<u.canonical.z-w.canonical.z;return new O_(_,m.dim/Wn/j,[(u.canonical.x/j-w.canonical.x)*m.dim,(u.canonical.y/j-w.canonical.y)*m.dim])}tileCoordToPixel(o,u){const p=u*this._scale+this._offset[1],_=Math.floor(o*this._scale+this._offset[0]),m=Math.floor(p);return new Dt(_,m)}getElevationAt(o,u,p,_){const m=o*this._scale+this._offset[0],w=u*this._scale+this._offset[1],j=Math.floor(m),k=Math.floor(w),H=this._dem;return _=!!_,p?Ur(Ur(H.get(j,k,_),H.get(j,k+1,_),w-k),Ur(H.get(j+1,k,_),H.get(j+1,k+1,_),w-k),m-j):H.get(j,k,_)}getElevationAtPixel(o,u,p){return this._dem.get(o,u,!!p)}getMeterToDEM(o){return(1<<this._demTile.tileID.canonical.z)*ua(1,o)*this._dem.stride}}const SL=new Float32Array(262144),Qv=new Uint8Array(262144);function d9(h){let o=0;if(h.meshes)for(const u of h.meshes)o=Math.max(o,u.aabb.max[2]);if(h.children)for(const u of h.children)o=Math.max(o,d9(u));return o}function h9(h,o,u){if(h.meshes)for(const p of h.meshes){if(p.aabb.min[0]===1/0)continue;const _=$r.applyTransform(p.aabb,h.matrix);u.insert(o,_.min[0],_.min[1],_.max[0],_.max[1])}if(h.children)for(const p of h.children)h9(p,o,u)}const f9=["","wall","door","roof","window","lamp","logo"];class p9{constructor(o){this.node=o,this.evaluatedRMEA=[[1,0,0,1],[1,0,0,1],[1,0,0,1],[1,0,0,1],[.4,1,0,1],[1,0,0,1],[1,0,0,1]],this.hiddenByReplacement=!1,this.evaluatedScale=[1,1,1],this.evaluatedColor=[],this.emissionHeightBasedParams=[],this.cameraCollisionOpacity=1,this.feature={type:"Point",id:o.id,geometry:[],properties:{height:d9(o)}},this.aabb=this._getLocalBounds(),this.state=null}_getLocalBounds(){if(!this.node.meshes)return new $r([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);if(!this.aabb){let o=0;const u=new $r([1/0,1/0,1/0],[-1/0,-1/0,-1/0]);for(const p of this.node.meshes)this.node.lightMeshIndex!==o&&(p.transformedAabb=$r.applyTransformFast(p.aabb,this.node.matrix),u.encapsulate(p.transformedAabb)),o++;this.aabb=u}return this.aabb}}class O4{constructor(o,u,p,_,m,w,j){this.id=p,this.layers=o,this.layerIds=this.layers.map(k=>k.fqid),this.stateDependentLayerIds=this.layers.filter(k=>k.isStateDependent()).map(k=>k.id),this.modelTraits|=R_.CoordinateSpaceTile,this.uploaded=!1,this.hasPattern=!1,_&&(this.modelTraits|=R_.HasMapboxMeshFeatures),m&&(this.modelTraits|=R_.HasMeshoptCompression),this.zoom=-1,this.terrainExaggeration=1,this.projection={name:"mercator"},this.replacementUpdateTime=0,this.elevationReadFromZ=255,this.brightness=w,this.dirty=!0,this.needsUpload=!1,this.nodesInfo=[];for(const k of u)this.nodesInfo.push(new p9(k)),h9(k,j.featureIndexArray.length,j.grid),j.featureIndexArray.emplaceBack(this.nodesInfo.length-1,0,j.bucketLayerIDs.length-1,0);this.states={}}updateFootprints(o,u){for(const p of this.getNodesInfo()){const _=p.node;_.footprint&&u.push({footprint:_.footprint,id:o})}}update(o){const u=Object.keys(o).length!==0;if(u&&!this.stateDependentLayers.length)return;const p=u?this.stateDependentLayers:this.layers;if(!hn(o,this.states))for(const _ of p)this.evaluate(_,o);this.states=structuredClone(o)}populate(){console.log("populate 3D model bucket")}uploadPending(){return!this.uploaded||this.needsUpload}upload(o){if(!this.needsUpload)return;const u=this.getNodesInfo();for(const p of u){const _=p.node;this.uploaded?this.updatePbrBuffer(_):bL(_,o,!0)}for(const p of u)R4(p.node);this.uploaded=!0,this.needsUpload=!1}updatePbrBuffer(o){let u=!1;if(!o.meshes)return u;for(const p of o.meshes)p.pbrBuffer&&(p.pbrBuffer.updateData(p.featureArray),u=!0);return u}needsReEvaluation(o,u,p){const _=o.transform.projectionOptions,m=o.style.getBrightness(),w=this.brightness!==m;if(!this.uploaded||this.dirty||_.name!==this.projection.name||Xb(p.paint.get("model-color").value,w)||Xb(p.paint.get("model-color-mix-intensity").value,w)||Xb(p.paint.get("model-roughness").value,w)||Xb(p.paint.get("model-emissive-strength").value,w)||Xb(p.paint.get("model-height-based-emissive-strength-multiplier").value,w)){this.projection=_,this.brightness=m;const j=this.getNodesInfo();for(const k of j)k.state=null;return!0}return!1}evaluateScale(o,u){if(o.transform.zoom===this.zoom)return;this.zoom=o.transform.zoom;const p=this.getNodesInfo(),_=this.id.canonical;for(const m of p){const w=m.feature;m.evaluatedScale=u.paint.get("model-scale").evaluate(w,{},_)}}evaluate(o,u){const p=this.getNodesInfo();for(const _ of p){if(!_.node.meshes)continue;const m=_.feature,w=u&&u[m.id];if(hn(w,_.state))continue;_.state=structuredClone(w);const j=_.node.meshes&&_.node.meshes[0].featureData,k=_.evaluatedColor[2],H=_.evaluatedRMEA[2],E=this.id.canonical;if(_.hasTranslucentParts=!1,j){for(let M=0;M<f9.length;M++){const O=f9[M];O.length&&(m.properties.part=O);const P=o.paint.get("model-color").evaluate(m,w,E).toRenderColor(null),R=o.paint.get("model-color-mix-intensity").evaluate(m,w,E);_.evaluatedColor[M]=[P.r,P.g,P.b,R],_.evaluatedRMEA[M][0]=o.paint.get("model-roughness").evaluate(m,w,E),_.evaluatedRMEA[M][2]=o.paint.get("model-emissive-strength").evaluate(m,w,E),_.evaluatedRMEA[M][3]=P.a,_.emissionHeightBasedParams[M]=o.paint.get("model-height-based-emissive-strength-multiplier").evaluate(m,w,E),!_.hasTranslucentParts&&P.a<1&&(_.hasTranslucentParts=!0)}delete m.properties.part,Mfe(_,k!==_.evaluatedColor[2]||H!==_.evaluatedRMEA[2],this.modelTraits)}else _.evaluatedRMEA[0][2]=o.paint.get("model-emissive-strength").evaluate(m,w,E);_.evaluatedScale=o.paint.get("model-scale").evaluate(m,w,E),this.updatePbrBuffer(_.node)||(this.needsUpload=!0)}this.dirty=!1}elevationUpdate(o,u,p,_){const m=o.findDEMTileFor(p);if(m&&(m.tileID.canonical!==this.terrainTile||u!==this.terrainExaggeration)){if(m.dem&&m.tileID.overscaledZ!==this.elevationReadFromZ){this.elevationReadFromZ=m.tileID.overscaledZ;const w=O_.create(o,p,m);if(!w)return;this.modelTraits&R_.HasMapboxMeshFeatures&&this.updateDEM(o,w,p,_);for(const j of this.getNodesInfo()){const k=j.node;if(!k.footprint||!k.footprint.vertices||!k.footprint.vertices.length)continue;const H=k.footprint.vertices;let E=w.getElevationAt(H[0].x,H[0].y,!0,!0);for(let M=1;M<H.length;M++)E=Math.min(E,w.getElevationAt(H[M].x,H[M].y,!0,!0));k.elevation=E}}this.terrainTile=m.tileID.canonical,this.terrainExaggeration=u}}updateDEM(o,u,p,_){let m=u._dem._modifiedForSources[_];if(m===void 0&&(u._dem._modifiedForSources[_]=[],m=u._dem._modifiedForSources[_]),m.includes(p.canonical))return;const w=u._dem.dim;m.push(p.canonical);let j=!1;for(const k of this.getNodesInfo()){const H=k.node;if(!H.footprint||!H.footprint.grid)continue;const E=H.footprint.grid,M=u.tileCoordToPixel(E.min.x,E.min.y),O=u.tileCoordToPixel(E.max.x,E.max.y),P=Math.min(Math.min(w-O.y,M.x),Math.min(M.y,w-O.x));if(P<0)continue;const R=Gt(P,2,5);let $=Math.max(0,M.x-R),te=Math.max(0,M.y-R),ie=Math.min(O.x+R,w-1),de=Math.min(O.y+R,w-1);for(let Be=te;Be<=de;++Be)for(let ke=$;ke<=ie;++ke)Qv[Be*w+ke]=255;let fe=0,ae=0;for(let Be=0;Be<E.cellsY;++Be)for(let ke=0;ke<E.cellsX;++ke){if(!E.cells[Be*E.cellsX+ke])continue;const Ye=u.tileCoordToPixel(E.min.x+ke/E.xScale,E.min.y+Be/E.yScale),Xe=u.tileCoordToPixel(E.min.x+(ke+1)/E.xScale,E.min.y+(Be+1)/E.yScale);for(let We=Ye.y;We<=Math.min(Xe.y+1,w-1);++We)for(let At=Ye.x;At<=Math.min(Xe.x+1,w-1);++At)Qv[We*w+At]===255&&(Qv[We*w+At]=0,fe+=u.getElevationAtPixel(At,We),ae++)}const ge=fe/ae;$=Math.max(1,M.x-R),te=Math.max(1,M.y-R),ie=Math.min(O.x+R,w-2),de=Math.min(O.y+R,w-2),j=!0;for(let Be=te;Be<=de;++Be)for(let ke=$;ke<=ie;++ke)Qv[Be*w+ke]===0&&(SL[Be*w+ke]=u._dem.set(ke,Be,ge));for(let Be=1;Be<R;++Be){$=Math.max(1,M.x-Be),te=Math.max(1,M.y-Be),ie=Math.min(O.x+Be,w-2),de=Math.min(O.y+Be,w-2);for(let ke=te;ke<=de;++ke)for(let Ye=$;Ye<=ie;++Ye){const Xe=ke*w+Ye;if(Qv[Xe]===255){let We=0,At=0,nt=-1,yt=-1;for(let bt=-1;bt<=1;++bt)for(let _t=-1;_t<=1;++_t){const Et=(ke+bt)*w+Ye+_t;if(Qv[Et]>=Be)continue;const Ut=SL[Et],Wt=Math.abs(Ut);Wt>At&&(We=Ut,At=Wt,nt=_t,yt=bt)}if(At>.1){const bt=1-(Be+.5*Math.abs(nt*yt))/R;let _t=u._dem.get(Ye,ke)+We*bt;const Et=u._dem.get(Ye+nt,ke+yt),Ut=u._dem.get(Ye-nt,ke-yt,!0);(_t-Et)*(_t-Ut)>0&&(_t=(Et+Ut)/2),SL[Xe]=u._dem.set(Ye,ke,_t),Qv[Xe]=Be}}}}}j&&(u._demTile.needsDEMTextureUpload=!0,u._dem._timestamp=_n.now())}getNodesInfo(){return this.nodesInfo}destroy(){const o=this.getNodesInfo();for(const u of o)R4(u.node),CL(u.node)}isEmpty(){return!this.nodesInfo.length}updateReplacement(o,u){if(u.updateTime===this.replacementUpdateTime)return;this.replacementUpdateTime=u.updateTime;const p=u.getReplacementRegionsForTile(o.toUnwrapped()),_=this.getNodesInfo();for(let m=0;m<this.nodesInfo.length;m++){const w=_[m].node;_[m].hiddenByReplacement=!!w.footprint&&!p.find(j=>j.footprint===w.footprint)}}getHeightAtTileCoord(o,u){const p=this.getNodesInfo(),_=[],m=[0,0,0],w=Me.mat4.identity([]);for(let j=0;j<this.nodesInfo.length;j++){const k=p[j],H=k.node.meshes[0],E=H.transformedAabb;if(o<E.min[0]||u<E.min[1]||o>E.max[0]||u>E.max[1])continue;if(k.node.hidden===!0)return{height:1/0,maxHeight:k.feature.properties.height,hidden:!1,verticalScale:k.evaluatedScale[2]};Me.mat4.invert(w,k.node.matrix),m[0]=o,m[1]=u,Me.vec3.transformMat4(m,m,w);const M=(m[0]-H.aabb.min[0])/(H.aabb.max[0]-H.aabb.min[0])*zv|0,O=Math.min(63,(m[1]-H.aabb.min[1])/(H.aabb.max[1]-H.aabb.min[1])*zv|0)*zv+Math.min(63,M),P=H.heightmap[O];if(!(P<0&&k.node.footprint))return k.hiddenByReplacement?void 0:{height:P,maxHeight:k.feature.properties.height,hidden:!1,verticalScale:k.evaluatedScale[2]};if(k.node.footprint.grid.query(new Dt(o,u),new Dt(o,u),_),_.length>0)return{height:void 0,maxHeight:k.feature.properties.height,hidden:k.hiddenByReplacement,verticalScale:k.evaluatedScale[2]}}}}function Xb(h,o){return!h.isLightConstant&&o}function Lfe(h,o,u,p,_,m,w,j){let k=(61440&o|(61440&o)>>4)>>8,H=(3840&o|(3840&o)>>4)>>4,E=240&o|(240&o)>>4;u[3]>0&&(k=Ur(k,255*u[0],u[3]),H=Ur(H,255*u[1],u[3]),E=Ur(E,255*u[2],u[3]));const M=k<<8|H,O=E<<8|Math.floor(255*p[3]),P=function(Be){const ke=Gt(Be,0,2);return Math.min(Math.round(.5*ke*255),255)}(p[2])<<8|15*p[0]<<4|15*p[1],R=Gt(_[0],0,1),$=Gt(_[1],0,1),te=Gt(_[2],0,1),ie=Gt(_[3],0,1);let de,fe,ae,ge;if(R!==$&&w!==m&&$!==R){const Be=w-m;fe=1/(Be*($-R)),ae=-(m+Be*R)/(Be*($-R));const ke=Gt(_[4],-1,1);ge=Math.pow(10,ke),de=255*te<<8|255*ie}else de=65535,fe=0,ae=1,ge=1;if(h.emplaceBack(M,O,P,de,fe,ae,ge),j){const Be=j.length;j.clear();for(let ke=0;ke<Be;ke++)j.emplaceBack(M,O,P,de,fe,ae,ge)}}function Mfe(h,o,u){const p=h.node;let _=0;const m=u&R_.HasMeshoptCompression;for(const w of p.meshes){if(p.lights&&p.lightMeshIndex===_||!w.featureData)continue;w.featureArray=new Vc,w.featureArray.reserve(w.featureData.length);let j=o;for(const k of w.featureData){const H=m?65535&k:k>>16&65535,E=m?k>>16&65535:65535&k,M=(15&E)<8?15&E:0,O=h.evaluatedRMEA[M],P=h.evaluatedColor[M],R=h.emissionHeightBasedParams[M];let $;if(j&&M===2&&p.lights&&($=new Vc,$.resize(10*p.lights.length)),Lfe(w.featureArray,H,P,O,R,w.aabb.min[2],w.aabb.max[2],$),$&&j){j=!1;const te=p.meshes[p.lightMeshIndex];te.featureArray=$,te.featureArray._trim()}}w.featureArray._trim(),_++}}function A9(h,o,u,p){const _=1<<h.z;o.lat=Wa((p/Wn+h.y)/_),o.lng=Ro((u/Wn+h.x)/_)}He(O4,"Tiled3dModelBucket",{omit:["layers"]}),He(p9,"Tiled3dModelFeature");const Nfe={circle:class extends Ql{constructor(h,o,u,p){super(h,{layout:In||(In=new ks({"circle-sort-key":new Gn(en.layout_circle["circle-sort-key"]),visibility:new Mn(en.layout_circle.visibility)})),paint:dn||(dn=new ks({"circle-radius":new Gn(en.paint_circle["circle-radius"]),"circle-color":new Gn(en.paint_circle["circle-color"]),"circle-blur":new Gn(en.paint_circle["circle-blur"]),"circle-opacity":new Gn(en.paint_circle["circle-opacity"]),"circle-translate":new Mn(en.paint_circle["circle-translate"]),"circle-translate-anchor":new Mn(en.paint_circle["circle-translate-anchor"]),"circle-pitch-scale":new Mn(en.paint_circle["circle-pitch-scale"]),"circle-pitch-alignment":new Mn(en.paint_circle["circle-pitch-alignment"]),"circle-stroke-width":new Gn(en.paint_circle["circle-stroke-width"]),"circle-stroke-color":new Gn(en.paint_circle["circle-stroke-color"]),"circle-stroke-opacity":new Gn(en.paint_circle["circle-stroke-opacity"]),"circle-emissive-strength":new Mn(en.paint_circle["circle-emissive-strength"]),"circle-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"circle-stroke-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},o,u,p)}createBucket(h){return new Pe(h)}queryRadius(h){const o=h;return wn("circle-radius",this,o)+wn("circle-stroke-width",this,o)+kn(this.paint.get("circle-translate"))}queryIntersectsFeature(h,o,u,p,_,m,w,j){const k=Jt(this.paint.get("circle-translate"),this.paint.get("circle-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),H=this.paint.get("circle-radius").evaluate(o,u)+this.paint.get("circle-stroke-width").evaluate(o,u);return uE(h,p,m,w,j,this.paint.get("circle-pitch-alignment")==="map",this.paint.get("circle-pitch-scale")==="map",k,H)}getProgramIds(){return["circle"]}getDefaultProgramParams(h,o,u){const p=k0(this);return{config:new pA(this,{zoom:o,lut:u}),defines:p,overrideFog:!1}}},heatmap:class extends Ql{createBucket(h){return new fE(h)}constructor(h,o,u,p){super(h,{layout:gv||(gv=new ks({visibility:new Mn(en.layout_heatmap.visibility)})),paint:pE||(pE=new ks({"heatmap-radius":new Gn(en.paint_heatmap["heatmap-radius"]),"heatmap-weight":new Gn(en.paint_heatmap["heatmap-weight"]),"heatmap-intensity":new Mn(en.paint_heatmap["heatmap-intensity"]),"heatmap-color":new Ic(en.paint_heatmap["heatmap-color"]),"heatmap-opacity":new Mn(en.paint_heatmap["heatmap-opacity"]),"heatmap-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},o,u,p),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="heatmap-color"&&this._updateColorRamp()}_updateColorRamp(){this.colorRamp=yv({expression:this._transitionablePaint._values["heatmap-color"].value.expression,evaluationKey:"heatmapDensity",image:this.colorRamp}),this.colorRampTexture=null}resize(){this.heatmapFbo&&(this.heatmapFbo.destroy(),this.heatmapFbo=null)}queryRadius(h){return wn("heatmap-radius",this,h)}queryIntersectsFeature(h,o,u,p,_,m,w,j){const k=this.paint.get("heatmap-radius").evaluate(o,u);return uE(h,p,m,w,j,!0,!0,new Dt(0,0),k)}hasOffscreenPass(){return this.paint.get("heatmap-opacity")!==0&&this.visibility!=="none"}getProgramIds(){return["heatmap","heatmapTexture"]}getDefaultProgramParams(h,o,u){return h==="heatmap"?{config:new pA(this,{zoom:o,lut:u}),overrideFog:!1}:{}}},hillshade:class extends Ql{constructor(h,o,u,p){super(h,{layout:AE||(AE=new ks({visibility:new Mn(en.layout_hillshade.visibility)})),paint:mE||(mE=new ks({"hillshade-illumination-direction":new Mn(en.paint_hillshade["hillshade-illumination-direction"]),"hillshade-illumination-anchor":new Mn(en.paint_hillshade["hillshade-illumination-anchor"]),"hillshade-exaggeration":new Mn(en.paint_hillshade["hillshade-exaggeration"]),"hillshade-shadow-color":new Mn(en.paint_hillshade["hillshade-shadow-color"]),"hillshade-highlight-color":new Mn(en.paint_hillshade["hillshade-highlight-color"]),"hillshade-accent-color":new Mn(en.paint_hillshade["hillshade-accent-color"]),"hillshade-emissive-strength":new Mn(en.paint_hillshade["hillshade-emissive-strength"]),"hillshade-shadow-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-highlight-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"hillshade-accent-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},o,u,p)}shouldRedrape(){return this.hasOffscreenPass()&&this.paint.get("hillshade-illumination-anchor")==="viewport"}hasOffscreenPass(){return this.paint.get("hillshade-exaggeration")!==0&&this.visibility!=="none"}getProgramIds(){return["hillshade","hillshadePrepare"]}getDefaultProgramParams(h,o,u){return{overrideFog:!1}}},fill:class extends Ql{constructor(h,o,u,p){super(h,{layout:SE||(SE=new ks({"fill-sort-key":new Gn(en.layout_fill["fill-sort-key"]),visibility:new Mn(en.layout_fill.visibility),"fill-elevation-reference":new Mn(en.layout_fill["fill-elevation-reference"])})),paint:BE||(BE=new ks({"fill-antialias":new Mn(en.paint_fill["fill-antialias"]),"fill-opacity":new Gn(en.paint_fill["fill-opacity"]),"fill-color":new Gn(en.paint_fill["fill-color"]),"fill-outline-color":new Gn(en.paint_fill["fill-outline-color"]),"fill-translate":new Mn(en.paint_fill["fill-translate"]),"fill-translate-anchor":new Mn(en.paint_fill["fill-translate-anchor"]),"fill-pattern":new Gn(en.paint_fill["fill-pattern"]),"fill-emissive-strength":new Mn(en.paint_fill["fill-emissive-strength"]),"fill-z-offset":new Gn(en.paint_fill["fill-z-offset"]),"fill-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"fill-outline-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},o,u,p)}getProgramIds(){const h=this.paint.get("fill-pattern"),o=h&&h.constantOr(1),u=[o?"fillPattern":"fill"];return this.paint.get("fill-antialias")&&u.push(o&&!this.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline"),u}getDefaultProgramParams(h,o,u){return{config:new pA(this,{zoom:o,lut:u}),overrideFog:!1}}recalculate(h,o){super.recalculate(h,o);const u=this.paint._values["fill-outline-color"];u.value.kind==="constant"&&u.value.value===void 0&&(this.paint._values["fill-outline-color"]=this.paint._values["fill-color"])}createBucket(h){return new x_(h)}queryRadius(){return kn(this.paint.get("fill-translate"))}queryIntersectsFeature(h,o,u,p,_,m){return!h.queryGeometry.isAboveHorizon&&rt(Qn(h.tilespaceGeometry,this.paint.get("fill-translate"),this.paint.get("fill-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),p)}isTileClipped(){return!0}is3D(){return this.paint.get("fill-z-offset").constantOr(1)!==0}},"fill-extrusion":class extends Ql{constructor(h,o,u,p){super(h,{layout:GE||(GE=new ks({visibility:new Mn(en["layout_fill-extrusion"].visibility),"fill-extrusion-edge-radius":new Mn(en["layout_fill-extrusion"]["fill-extrusion-edge-radius"])})),paint:KE||(KE=new ks({"fill-extrusion-opacity":new Mn(en["paint_fill-extrusion"]["fill-extrusion-opacity"]),"fill-extrusion-color":new Gn(en["paint_fill-extrusion"]["fill-extrusion-color"]),"fill-extrusion-translate":new Mn(en["paint_fill-extrusion"]["fill-extrusion-translate"]),"fill-extrusion-translate-anchor":new Mn(en["paint_fill-extrusion"]["fill-extrusion-translate-anchor"]),"fill-extrusion-pattern":new Gn(en["paint_fill-extrusion"]["fill-extrusion-pattern"]),"fill-extrusion-height":new Gn(en["paint_fill-extrusion"]["fill-extrusion-height"]),"fill-extrusion-base":new Gn(en["paint_fill-extrusion"]["fill-extrusion-base"]),"fill-extrusion-height-alignment":new Mn(en["paint_fill-extrusion"]["fill-extrusion-height-alignment"]),"fill-extrusion-base-alignment":new Mn(en["paint_fill-extrusion"]["fill-extrusion-base-alignment"]),"fill-extrusion-vertical-gradient":new Mn(en["paint_fill-extrusion"]["fill-extrusion-vertical-gradient"]),"fill-extrusion-ambient-occlusion-intensity":new Mn(en["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-intensity"]),"fill-extrusion-ambient-occlusion-radius":new Mn(en["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-radius"]),"fill-extrusion-ambient-occlusion-wall-radius":new Mn(en["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-wall-radius"]),"fill-extrusion-ambient-occlusion-ground-radius":new Mn(en["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-radius"]),"fill-extrusion-ambient-occlusion-ground-attenuation":new Mn(en["paint_fill-extrusion"]["fill-extrusion-ambient-occlusion-ground-attenuation"]),"fill-extrusion-flood-light-color":new Mn(en["paint_fill-extrusion"]["fill-extrusion-flood-light-color"]),"fill-extrusion-flood-light-intensity":new Mn(en["paint_fill-extrusion"]["fill-extrusion-flood-light-intensity"]),"fill-extrusion-flood-light-wall-radius":new Gn(en["paint_fill-extrusion"]["fill-extrusion-flood-light-wall-radius"]),"fill-extrusion-flood-light-ground-radius":new Gn(en["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-radius"]),"fill-extrusion-flood-light-ground-attenuation":new Mn(en["paint_fill-extrusion"]["fill-extrusion-flood-light-ground-attenuation"]),"fill-extrusion-vertical-scale":new Mn(en["paint_fill-extrusion"]["fill-extrusion-vertical-scale"]),"fill-extrusion-rounded-roof":new Mn(en["paint_fill-extrusion"]["fill-extrusion-rounded-roof"]),"fill-extrusion-cutoff-fade-range":new Mn(en["paint_fill-extrusion"]["fill-extrusion-cutoff-fade-range"]),"fill-extrusion-emissive-strength":new Gn(en["paint_fill-extrusion"]["fill-extrusion-emissive-strength"]),"fill-extrusion-line-width":new Gn(en["paint_fill-extrusion"]["fill-extrusion-line-width"]),"fill-extrusion-cast-shadows":new Mn(en["paint_fill-extrusion"]["fill-extrusion-cast-shadows"]),"fill-extrusion-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"fill-extrusion-flood-light-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},o,u,p),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new jv(h)}queryRadius(){return kn(this.paint.get("fill-extrusion-translate"))}is3D(){return!0}hasShadowPass(){return this.paint.get("fill-extrusion-cast-shadows")}cutoffRange(){return this.paint.get("fill-extrusion-cutoff-fade-range")}canCastShadows(){return!0}getProgramIds(){return[this.paint.get("fill-extrusion-pattern").constantOr(1)?"fillExtrusionPattern":"fillExtrusion"]}queryIntersectsFeature(h,o,u,p,_,m,w,j,k){const H=Jt(this.paint.get("fill-extrusion-translate"),this.paint.get("fill-extrusion-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),E=this.paint.get("fill-extrusion-height").evaluate(o,u),M=this.paint.get("fill-extrusion-base").evaluate(o,u),O=[0,0],P=j&&m.elevation,R=m.elevation?m.elevation.exaggeration():1,$=h.tile.getBucket(this);if(P&&$ instanceof jv){const ae=$.centroidVertexArray,ge=k+1;ge<ae.length&&(O[0]=ae.geta_centroid_pos0(ge),O[1]=ae.geta_centroid_pos1(ge))}if(O[0]===0&&O[1]===1)return!1;m.projection.name==="globe"&&(p=jb([p],[new Dt(0,0),new Dt(Wn,Wn)],h.tileID.canonical).map(ae=>ae.polygon).flat());const te=P?j:null,[ie,de]=function(ae,ge,Be,ke,Ye,Xe,We,At,nt,yt,bt){return ae.projection.name==="globe"?function(_t,Et,Ut,Wt,Pt,mn,Nn,vn,qn,Kn,ir){const Bn=[],Br=[],Zn=_t.projection.upVectorScale(ir,_t.center.lat,_t.worldSize).metersToTile,vr=[0,0,0,1],Qr=[0,0,0,1],fi=(Ei,_i,Mi,qs)=>{Ei[0]=_i,Ei[1]=Mi,Ei[2]=qs,Ei[3]=1},xi=$E();Ut>0&&(Ut+=xi),Wt+=xi;for(const Ei of Et){const _i=[],Mi=[];for(const qs of Ei){const Fs=qs.x+Pt.x,ni=qs.y+Pt.y,Ps=_t.projection.projectTilePoint(Fs,ni,ir),ws=_t.projection.upVector(ir,qs.x,qs.y);let Zs=Ut,el=Wt;if(Nn){const tl=qE(Fs,ni,Ut,Wt,Nn,vn,qn,Kn);Zs+=tl.base,el+=tl.top}Ut!==0?fi(vr,Ps.x+ws[0]*Zn*Zs,Ps.y+ws[1]*Zn*Zs,Ps.z+ws[2]*Zn*Zs):fi(vr,Ps.x,Ps.y,Ps.z),fi(Qr,Ps.x+ws[0]*Zn*el,Ps.y+ws[1]*Zn*el,Ps.z+ws[2]*Zn*el),Me.vec3.transformMat4(vr,vr,mn),Me.vec3.transformMat4(Qr,Qr,mn),_i.push(new Fg(vr[0],vr[1],vr[2])),Mi.push(new Fg(Qr[0],Qr[1],Qr[2]))}Bn.push(_i),Br.push(Mi)}return[Bn,Br]}(ae,ge,Be,ke,Ye,Xe,We,At,nt,yt,bt):We?function(_t,Et,Ut,Wt,Pt,mn,Nn,vn,qn){const Kn=[],ir=[],Bn=[0,0,0,1];for(const Br of _t){const Zn=[],vr=[];for(const Qr of Br){const fi=Qr.x+Wt.x,xi=Qr.y+Wt.y,Ei=qE(fi,xi,Et,Ut,mn,Nn,vn,qn);Bn[0]=fi,Bn[1]=xi,Bn[2]=Ei.base,Bn[3]=1,Me.vec4.transformMat4(Bn,Bn,Pt),Bn[3]=Math.max(Bn[3],1e-5);const _i=new Fg(Bn[0]/Bn[3],Bn[1]/Bn[3],Bn[2]/Bn[3]);Bn[0]=fi,Bn[1]=xi,Bn[2]=Ei.top,Bn[3]=1,Me.vec4.transformMat4(Bn,Bn,Pt),Bn[3]=Math.max(Bn[3],1e-5);const Mi=new Fg(Bn[0]/Bn[3],Bn[1]/Bn[3],Bn[2]/Bn[3]);Zn.push(_i),vr.push(Mi)}Kn.push(Zn),ir.push(vr)}return[Kn,ir]}(ge,Be,ke,Ye,Xe,We,At,nt,yt):function(_t,Et,Ut,Wt,Pt){const mn=[],Nn=[],vn=Pt[8]*Et,qn=Pt[9]*Et,Kn=Pt[10]*Et,ir=Pt[11]*Et,Bn=Pt[8]*Ut,Br=Pt[9]*Ut,Zn=Pt[10]*Ut,vr=Pt[11]*Ut;for(const Qr of _t){const fi=[],xi=[];for(const Ei of Qr){const _i=Ei.x+Wt.x,Mi=Ei.y+Wt.y,qs=Pt[0]*_i+Pt[4]*Mi+Pt[12],Fs=Pt[1]*_i+Pt[5]*Mi+Pt[13],ni=Pt[2]*_i+Pt[6]*Mi+Pt[14],Ps=Pt[3]*_i+Pt[7]*Mi+Pt[15],ws=qs+vn,Zs=Fs+qn,el=ni+Kn,tl=Math.max(Ps+ir,1e-5),ba=qs+Bn,md=Fs+Br,Fo=ni+Zn,Do=Math.max(Ps+vr,1e-5);fi.push(new Fg(ws/tl,Zs/tl,el/tl)),xi.push(new Fg(ba/Do,md/Do,Fo/Do))}mn.push(fi),Nn.push(xi)}return[mn,Nn]}(ge,Be,ke,Ye,Xe)}(m,p,M,E,H,w,te,O,R,m.center.lat,h.tileID.canonical),fe=h.queryGeometry;return function(ae,ge,Be){let ke=1/0;rt(Be,ge)&&(ke=WE(Be,ge[0]));for(let Ye=0;Ye<ge.length;Ye++){const Xe=ge[Ye],We=ae[Ye];for(let At=0;At<Xe.length-1;At++){const nt=Xe[At],yt=[nt,Xe[At+1],We[At+1],We[At],nt];Le(Be,yt)&&(ke=Math.min(ke,WE(Be,yt)))}}return ke!==1/0&&ke}(ie,de,fe.isPointQuery()?fe.screenBounds:fe.screenGeometry)}},line:class extends Ql{constructor(h,o,u,p){const _=n4();super(h,_,o,u,p),_.layout&&(this.layout=new eo(_.layout)),this.gradientVersion=0}_handleSpecialPaintPropertyUpdate(h){if(h==="line-gradient"){const o=this._transitionablePaint._values["line-gradient"].value.expression;this.stepInterpolant=o._styleExpression&&o._styleExpression.expression instanceof zc,this.gradientVersion=(this.gradientVersion+1)%Number.MAX_SAFE_INTEGER}}gradientExpression(){return this._transitionablePaint._values["line-gradient"].value.expression}widthExpression(){return this._transitionablePaint._values["line-width"].value.expression}recalculate(h,o){super.recalculate(h,o),this.paint._values["line-floorwidth"]=(()=>{if(Pv)return Pv;const u=n4();return Pv=new r4(u.paint.properties["line-width"].specification),Pv.useIntegerZoom=!0,Pv})().possiblyEvaluate(this._transitioningPaint._values["line-width"].value,h)}createBucket(h){return new kb(h)}getProgramIds(){return[this.paint.get("line-pattern").constantOr(1)?"linePattern":"line"]}getDefaultProgramParams(h,o,u){const p=Mb(this);return{config:new pA(this,{zoom:o,lut:u}),defines:p,overrideFog:!1}}queryRadius(h){const o=h,u=i4(wn("line-width",this,o),wn("line-gap-width",this,o)),p=wn("line-offset",this,o);return u/2+Math.abs(p)+kn(this.paint.get("line-translate"))}queryIntersectsFeature(h,o,u,p,_,m){if(h.queryGeometry.isAboveHorizon)return!1;const w=Qn(h.tilespaceGeometry,this.paint.get("line-translate"),this.paint.get("line-translate-anchor"),m.angle,h.pixelToTileUnitsFactor),j=h.pixelToTileUnitsFactor/2*i4(this.paint.get("line-width").evaluate(o,u),this.paint.get("line-gap-width").evaluate(o,u)),k=this.paint.get("line-offset").evaluate(o,u);return k&&(p=function(H,E){const M=[],O=new Dt(0,0);for(let P=0;P<H.length;P++){const R=H[P],$=[];for(let te=0;te<R.length;te++){const ie=R[te],de=R[te+1],fe=te===0?O:ie.sub(R[te-1])._unit()._perp(),ae=te===R.length-1?O:de.sub(ie)._unit()._perp(),ge=fe._add(ae)._unit();ge._mult(1/(ge.x*ae.x+ge.y*ae.y)),$.push(ge._mult(E)._add(ie))}M.push($)}return M}(p,k*h.pixelToTileUnitsFactor)),function(H,E,M){for(let O=0;O<E.length;O++){const P=E[O];if(H.length>=3){for(let R=0;R<P.length;R++)if(Bt(H,P[R]))return!0}if(et(H,P,M))return!0}return!1}(w,p,j)}isTileClipped(){return!0}isDraped(h){const o=this.layout.get("line-z-offset"),u=o.isConstant()&&!o.constantOr(0),p=this.layout.get("line-elevation-reference");return!(p==="sea"||p==="ground")&&(u||p!=="none")}},symbol:j4,background:class extends Ql{constructor(h,o,u,p){super(h,{layout:UQ||(UQ=new ks({visibility:new Mn(en.layout_background.visibility)})),paint:zQ||(zQ=new ks({"background-pitch-alignment":new Mn(en.paint_background["background-pitch-alignment"]),"background-color":new Mn(en.paint_background["background-color"]),"background-pattern":new Mn(en.paint_background["background-pattern"]),"background-opacity":new Mn(en.paint_background["background-opacity"]),"background-emissive-strength":new Mn(en.paint_background["background-emissive-strength"]),"background-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},o,u,p)}getProgramIds(){return[this.paint.get("background-pattern")?"backgroundPattern":"background"]}getDefaultProgramParams(h,o,u){return{overrideFog:!1}}is3D(){return this.paint.get("background-pitch-alignment")==="viewport"}},raster:GQ,"raster-particle":YQ,sky:class extends Ql{constructor(h,o,u,p){super(h,{layout:qQ||(qQ=new ks({visibility:new Mn(en.layout_sky.visibility)})),paint:ZQ||(ZQ=new ks({"sky-type":new Mn(en.paint_sky["sky-type"]),"sky-atmosphere-sun":new Mn(en.paint_sky["sky-atmosphere-sun"]),"sky-atmosphere-sun-intensity":new Mn(en.paint_sky["sky-atmosphere-sun-intensity"]),"sky-gradient-center":new Mn(en.paint_sky["sky-gradient-center"]),"sky-gradient-radius":new Mn(en.paint_sky["sky-gradient-radius"]),"sky-gradient":new Ic(en.paint_sky["sky-gradient"]),"sky-atmosphere-halo-color":new Mn(en.paint_sky["sky-atmosphere-halo-color"]),"sky-atmosphere-color":new Mn(en.paint_sky["sky-atmosphere-color"]),"sky-opacity":new Mn(en.paint_sky["sky-opacity"]),"sky-gradient-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-halo-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"}),"sky-atmosphere-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},o,u,p),this._updateColorRamp()}_handleSpecialPaintPropertyUpdate(h){h==="sky-gradient"?this._updateColorRamp():h!=="sky-atmosphere-sun"&&h!=="sky-atmosphere-halo-color"&&h!=="sky-atmosphere-color"&&h!=="sky-atmosphere-sun-intensity"||(this._skyboxInvalidated=!0)}_updateColorRamp(){this.colorRamp=yv({expression:this._transitionablePaint._values["sky-gradient"].value.expression,evaluationKey:"skyRadialProgress"}),this.colorRampTexture&&(this.colorRampTexture.destroy(),this.colorRampTexture=null)}needsSkyboxCapture(h){if(this._skyboxInvalidated||!this.skyboxTexture||!this.skyboxGeometry)return!0;if(!this.paint.get("sky-atmosphere-sun")){const o=h.style.light.properties.get("position");return this._lightPosition.azimuthal!==o.azimuthal||this._lightPosition.polar!==o.polar}return!1}getCenter(h,o){if(this.paint.get("sky-type")==="atmosphere"){const p=this.paint.get("sky-atmosphere-sun"),_=!p,m=h.style.light,w=m.properties.get("position");return _&&m.properties.get("anchor")==="viewport"&&Vn("The sun direction is attached to a light with viewport anchor, lighting may behave unexpectedly."),_?vL(w.azimuthal,90-w.polar,o):vL(p[0],90-p[1],o)}const u=this.paint.get("sky-gradient-center");return vL(u[0],90-u[1],o)}isSky(){return!0}markSkyboxValid(h){this._skyboxInvalidated=!1,this._lightPosition=h.style.light.properties.get("position")}hasOffscreenPass(){return!0}getProgramIds(){const h=this.paint.get("sky-type");return h==="atmosphere"?["skyboxCapture","skybox"]:h==="gradient"?["skyboxGradient"]:null}},slot:class extends Ql{constructor(h,o,u,p){super(h,{paint:XQ||(XQ=new ks({}))},o,null)}},model:class extends Ql{constructor(h,o,u,p){super(h,{layout:l9||(l9=new ks({visibility:new Mn(en.layout_model.visibility),"model-id":new Gn(en.layout_model["model-id"])})),paint:c9||(c9=new ks({"model-opacity":new Gn(en.paint_model["model-opacity"]),"model-rotation":new Gn(en.paint_model["model-rotation"]),"model-scale":new Gn(en.paint_model["model-scale"]),"model-translation":new Gn(en.paint_model["model-translation"]),"model-color":new Gn(en.paint_model["model-color"]),"model-color-mix-intensity":new Gn(en.paint_model["model-color-mix-intensity"]),"model-type":new Mn(en.paint_model["model-type"]),"model-cast-shadows":new Mn(en.paint_model["model-cast-shadows"]),"model-receive-shadows":new Mn(en.paint_model["model-receive-shadows"]),"model-ambient-occlusion-intensity":new Mn(en.paint_model["model-ambient-occlusion-intensity"]),"model-emissive-strength":new Gn(en.paint_model["model-emissive-strength"]),"model-roughness":new Gn(en.paint_model["model-roughness"]),"model-height-based-emissive-strength-multiplier":new Gn(en.paint_model["model-height-based-emissive-strength-multiplier"]),"model-cutoff-fade-range":new Mn(en.paint_model["model-cutoff-fade-range"]),"model-front-cutoff":new Mn(en.paint_model["model-front-cutoff"]),"model-color-use-theme":new Gn({type:"string",default:"default","property-type":"data-driven"})}))},o,u,p),this._stats={numRenderedVerticesInShadowPass:0,numRenderedVerticesInTransparentPass:0}}createBucket(h){return new wL(h)}getProgramIds(){return["model"]}is3D(){return!0}hasShadowPass(){return!0}canCastShadows(){return!0}hasLightBeamPass(){return!0}cutoffRange(){return this.paint.get("model-cutoff-fade-range")}queryRadius(h){return h instanceof O4?Wn-1:0}queryIntersectsFeature(h,o,u,p,_,m){if(!this.modelManager)return!1;const w=this.modelManager,j=h.tile.getBucket(this);if(!(j&&j instanceof wL))return!1;for(const k in j.instancesPerModel){const H=j.instancesPerModel[k],E=o.id!==void 0?o.id:o.properties&&o.properties.hasOwnProperty("id")?o.properties.id:void 0;if(H.idToFeaturesIndex.hasOwnProperty(E)){const M=H.features[H.idToFeaturesIndex[E]],O=w.getModel(k,this.scope);if(!O)return!1;let P=Me.mat4.create();const R=new es(0,0),$=j.canonical;let te=Number.MAX_VALUE;for(let ie=0;ie<M.instancedDataCount;++ie){const de=16*(M.instancedDataOffset+ie),fe=H.instancedDataArray.float32,ae=[fe[de+4],fe[de+5],fe[de+6]];A9($,R,fe[de],0|fe[de+1]),u9(P,O,m,R,M.rotation,M.scale,ae,!1,!1,!1),m.projection.name==="globe"&&(P=_L(P,m));const ge=Me.mat4.multiply([],m.projMatrix,P),Be=h.queryGeometry,ke=r9(Be.isPointQuery()?Be.screenBounds:Be.screenGeometry,m,ge,O.aabb);ke!=null&&(te=Math.min(ke,te))}return te!==Number.MAX_VALUE&&te}}return!1}_handleOverridablePaintPropertyUpdate(h,o,u){return!(!this.layout||o.isDataDriven()||u.isDataDriven()||h!=="model-color"&&h!=="model-color-mix-intensity"&&h!=="model-rotation"&&h!=="model-scale"&&h!=="model-translation"&&h!=="model-emissive-strength")}_isPropertyZoomDependent(h){const o=this._transitionablePaint._values[h];return o!=null&&o.value!=null&&o.value.expression!=null&&o.value.expression instanceof wf}isZoomDependent(){return this._isPropertyZoomDependent("model-scale")||this._isPropertyZoomDependent("model-rotation")||this._isPropertyZoomDependent("model-translation")}},clip:class extends Ql{constructor(h,o,u,p){super(h,{layout:EE||(EE=new ks({"clip-layer-types":new Mn(en.layout_clip["clip-layer-types"]),"clip-layer-scope":new Mn(en.layout_clip["clip-layer-scope"])})),paint:Sv||(Sv=new ks({}))},o,u,p)}recalculate(h,o){super.recalculate(h,o)}createBucket(h){return new TE(h)}isTileClipped(){return!0}is3D(){return!0}}};class Rfe{constructor(o){this._callback=o,this._triggered=!1,typeof MessageChannel<"u"&&(this._channel=new MessageChannel,this._channel.port2.onmessage=()=>{this._triggered=!1,this._callback()})}trigger(){this._triggered||(this._triggered=!0,this._channel?this._channel.port1.postMessage(!0):setTimeout(()=>{this._triggered=!1,this._callback()},0))}remove(){this._channel=void 0,this._callback=()=>{}}}class Ofe{constructor(){this.tasks={},this.taskQueue=[],Ln(["process"],this),this.invoker=new Rfe(this.process),this.nextId=0}add(o,u){const p=this.nextId++,_=function({type:m,isSymbolTile:w,zoom:j}){return j=j||0,m==="message"?0:m!=="maybePrepare"||w?m!=="parseTile"||w?m==="parseTile"&&w?300-j:m==="maybePrepare"&&w?400-j:500:200-j:100-j}(u);if(_===0){try{o()}finally{}return null}return this.tasks[p]={fn:o,metadata:u,priority:_,id:p},this.taskQueue.push(p),this.invoker.trigger(),{cancel:()=>{delete this.tasks[p]}}}process(){try{if(this.taskQueue=this.taskQueue.filter(p=>!!this.tasks[p]),!this.taskQueue.length)return;const o=this.pick();if(o===null)return;const u=this.tasks[o];if(delete this.tasks[o],this.taskQueue.length&&this.invoker.trigger(),!u)return;u.fn()}finally{}}pick(){let o=null,u=1/0;for(let _=0;_<this.taskQueue.length;_++){const m=this.tasks[this.taskQueue[_]];m.priority<u&&(u=m.priority,o=_)}if(o===null)return null;const p=this.taskQueue[o];return this.taskQueue.splice(o,1),p}remove(){this.invoker.remove()}}class m9{constructor(o,u,p){this.target=o,this.parent=u,this.mapId=p,this.callbacks={},this.cancelCallbacks={},Ln(["receive"],this),this.target.addEventListener("message",this.receive,!1),this.scheduler=new Ofe}send(o,u,p,_,m=!1,w){const j=Math.round(1e18*Math.random()).toString(36).substring(0,10);p&&(p.metadata=w,this.callbacks[j]=p);const k=new Set;return this.target.postMessage({id:j,type:o,hasCallback:!!p,targetMapId:_,mustQueue:m,sourceMapId:this.mapId,data:En(u,k)},k),{cancel:()=>{p&&delete this.callbacks[j],this.target.postMessage({id:j,type:"<cancel>",targetMapId:_,sourceMapId:this.mapId})}}}receive(o){const u=o.data,p=u.id;if(p&&(!u.targetMapId||this.mapId===u.targetMapId))if(u.type==="<cancel>"){const _=this.cancelCallbacks[p];delete this.cancelCallbacks[p],_&&_.cancel()}else if(u.mustQueue||mi()){const _=this.callbacks[p],m=this.scheduler.add(()=>this.processTask(p,u),_&&_.metadata||{type:"message"});m&&(this.cancelCallbacks[p]=m)}else this.processTask(p,u)}processTask(o,u){if(delete this.cancelCallbacks[o],u.type==="<response>"){const p=this.callbacks[o];delete this.callbacks[o],p&&(u.error?p(Tn(u.error)):p(null,Tn(u.data)))}else{const p=new Set,_=u.hasCallback?(w,j)=>{this.target.postMessage({id:o,type:"<response>",sourceMapId:this.mapId,error:w?En(w):null,data:En(j,p)},p)}:()=>{},m=Tn(u.data);if(this.parent[u.type])this.parent[u.type](u.sourceMapId,m,_);else if(this.parent.getWorkerSource){const w=u.type.split(".");this.parent.getWorkerSource(u.sourceMapId,w[0],m.source,m.scope)[w[1]](m,_)}else _(new Error(`Could not find function ${u.type}`))}}remove(){this.scheduler.remove(),this.target.removeEventListener("message",this.receive,!1)}}var Yb={workerUrl:"",workerClass:null,workerParams:void 0};const BL="mapboxgl_preloaded_worker_pool";class Hv{constructor(){this.active={}}acquire(o,u=Hv.workerCount){if(!this.workers)for(this.workers=[];this.workers.length<u;)this.workers.push(Yb.workerClass!=null?new Yb.workerClass:new self.Worker(Yb.workerUrl,Yb.workerParams));return this.active[o]=!0,this.workers.slice()}release(o){delete this.active[o],this.workers&&this.numActive()===0&&(this.workers.forEach(u=>{u.terminate()}),this.workers=null)}isPreloaded(){return!!this.active[BL]}numActive(){return Object.keys(this.active).length}}Hv.workerCount=2;class D_{constructor(o,u,p="Worker",_=Hv.workerCount){this.workerPool=o,this.actors=[],this.currentActor=0,this.id=Yt();const m=this.workerPool.acquire(this.id,_);for(let w=0;w<m.length;w++){const j=new D_.Actor(m[w],u,this.id);j.name=`${p} ${w}`,this.actors.push(j)}this.ready=!1,this.broadcast("checkIfReady",null,()=>{this.ready=!0})}broadcast(o,u,p){qt(this.actors,(_,m)=>{_.send(o,u,m)},p=p||function(){})}getActor(){return this.currentActor=(this.currentActor+1)%this.actors.length,this.actors[this.currentActor]}remove(){this.actors.forEach(o=>{o.remove()}),this.actors=[],this.workerPool.release(this.id)}}let Jb,EL;function D4(){return Jb||(Jb=new Hv),Jb}D_.Actor=m9;const TL=new ji(0,0,0);var U4=(h=>(h[h.PATH_RULE_UNSPECIFIED=0]="PATH_RULE_UNSPECIFIED",h[h.PATH_RULE_NON_ZERO=1]="PATH_RULE_NON_ZERO",h[h.PATH_RULE_EVEN_ODD=2]="PATH_RULE_EVEN_ODD",h))(U4||{}),z4=(h=>(h[h.LINE_CAP_UNSPECIFIED=0]="LINE_CAP_UNSPECIFIED",h[h.LINE_CAP_BUTT=1]="LINE_CAP_BUTT",h[h.LINE_CAP_ROUND=2]="LINE_CAP_ROUND",h[h.LINE_CAP_SQUARE=3]="LINE_CAP_SQUARE",h))(z4||{}),e2=(h=>(h[h.LINE_JOIN_UNSPECIFIED=0]="LINE_JOIN_UNSPECIFIED",h[h.LINE_JOIN_MITER=1]="LINE_JOIN_MITER",h[h.LINE_JOIN_MITER_CLIP=2]="LINE_JOIN_MITER_CLIP",h[h.LINE_JOIN_ROUND=3]="LINE_JOIN_ROUND",h[h.LINE_JOIN_BEVEL=4]="LINE_JOIN_BEVEL",h))(e2||{}),g9=(h=>(h[h.PAINT_ORDER_UNSPECIFIED=0]="PAINT_ORDER_UNSPECIFIED",h[h.PAINT_ORDER_FILL_AND_STROKE=1]="PAINT_ORDER_FILL_AND_STROKE",h[h.PAINT_ORDER_STROKE_AND_FILL=2]="PAINT_ORDER_STROKE_AND_FILL",h))(g9||{}),U_=(h=>(h[h.PATH_COMMAND_UNSPECIFIED=0]="PATH_COMMAND_UNSPECIFIED",h[h.PATH_COMMAND_MOVE=1]="PATH_COMMAND_MOVE",h[h.PATH_COMMAND_LINE=2]="PATH_COMMAND_LINE",h[h.PATH_COMMAND_QUAD=3]="PATH_COMMAND_QUAD",h[h.PATH_COMMAND_CUBIC=4]="PATH_COMMAND_CUBIC",h[h.PATH_COMMAND_CLOSE=5]="PATH_COMMAND_CLOSE",h))(U_||{}),y9=(h=>(h[h.MASK_TYPE_UNSPECIFIED=0]="MASK_TYPE_UNSPECIFIED",h[h.MASK_TYPE_LUMINANCE=1]="MASK_TYPE_LUMINANCE",h[h.MASK_TYPE_ALPHA=2]="MASK_TYPE_ALPHA",h))(y9||{});function Dfe(h,o,u){h===1&&o.icons.push(function(p,_){return function(m){if(m.usvg_tree.height||(m.usvg_tree.height=m.usvg_tree.width),!m.metadata)return m;const{metadata:w}=m;if(w.content_area){const{content_area:j}=w;j.top==null&&(j.top=j.left),j.width==null&&(j.width=m.usvg_tree.width),j.height==null&&(j.height=j.width)}return w.stretch_x&&w.stretch_x.length&&v9(w,"x"),w.stretch_y&&w.stretch_y.length&&v9(w,"y"),m}(p.readFields(Ufe,{name:void 0},_))}(u,u.readVarint()+u.pos))}function v9(h,o){const u=[],p=h[`stretch_${o}`];let _=null;for(let m=0;m<p.length;m++)_===null?_=u.length===0?p[0]:u[u.length-1][1]+p[m]:(u.push([_,_+p[m]]),_=null);h[`stretch_${o}_areas`]=u}function Ufe(h,o,u){h===1?o.name=u.readString():h===2?o.metadata=function(p,_){return p.readFields(zfe,{stretch_x:null,stretch_y:null,stretch_x_areas:null,stretch_y_areas:null,variables:[]},_)}(u,u.readVarint()+u.pos):h===3&&(o.usvg_tree=function(p,_){return p.readFields(Vfe,{width:20,children:[],linear_gradients:[],radial_gradients:[],clip_paths:[],masks:[]},_)}(u,u.readVarint()+u.pos),o.data="usvg_tree")}function zfe(h,o,u){h===1?o.stretch_x=u.readPackedVarint():h===2?o.stretch_y=u.readPackedVarint():h===3?o.content_area=function(p,_){return p.readFields(Qfe,{left:0},_)}(u,u.readVarint()+u.pos):h===4&&o.variables.push(function(p,_){return p.readFields(Hfe,{name:void 0},_)}(u,u.readVarint()+u.pos))}function Qfe(h,o,u){h===1?o.left=u.readVarint():h===2?o.width=u.readVarint():h===3?o.top=u.readVarint():h===4&&(o.height=u.readVarint())}function Hfe(h,o,u){h===1?o.name=u.readString():h===2&&(o.rgb_color=V4(u.readVarint()),o.value="rgb_color")}function Vfe(h,o,u){h===1?o.width=o.height=u.readVarint():h===2?o.height=u.readVarint():h===3?o.children.push(Q4(u,u.readVarint()+u.pos)):h===4?o.linear_gradients.push(function(p,_){return p.readFields(Xfe,{spread_method:1,stops:[],x1:0,y1:0,x2:1,y2:0},_)}(u,u.readVarint()+u.pos)):h===5?o.radial_gradients.push(function(p,_){return p.readFields(Jfe,{spread_method:1,stops:[],cx:.5,cy:.5,r:.5,fx:.5,fy:.5,fr:0},_)}(u,u.readVarint()+u.pos)):h===7?o.clip_paths.push(function(p,_){return p.readFields(epe,{children:[]},_)}(u,u.readVarint()+u.pos)):h===8&&o.masks.push(function(p,_){const m=p.readFields(tpe,{left:0,width:20,mask_type:1,children:[]},_);return m.height==null&&(m.height=m.width),m.top==null&&(m.top=m.left),m}(u,u.readVarint()+u.pos))}function Q4(h,o){return h.readFields($fe,{},o)}function $fe(h,o,u){h===1?(o.group=function(p,_){return p.readFields(Gfe,{opacity:255,children:[]},_)}(u,u.readVarint()+u.pos),o.node="group"):h===2&&(o.path=function(p,_){return p.readFields(Wfe,{paint_order:1,commands:[],step:1,diffs:[],rule:1},_)}(u,u.readVarint()+u.pos),o.node="path")}function Gfe(h,o,u){h===1?o.transform=H4(u,u.readVarint()+u.pos):h===2?o.opacity=u.readVarint():h===5?o.clip_path_idx=u.readVarint():h===6?o.mask_idx=u.readVarint():h===7&&o.children.push(Q4(u,u.readVarint()+u.pos))}function H4(h,o){return h.readFields(Kfe,{sx:1,ky:0,kx:0,sy:1,tx:0,ty:0},o)}function Kfe(h,o,u){h===1?o.sx=u.readFloat():h===2?o.ky=u.readFloat():h===3?o.kx=u.readFloat():h===4?o.sy=u.readFloat():h===5?o.tx=u.readFloat():h===6&&(o.ty=u.readFloat())}function Wfe(h,o,u){h===1?o.fill=function(p,_){return p.readFields(qfe,{rgb_color:TL,paint:"rgb_color",opacity:255},_)}(u,u.readVarint()+u.pos):h===2?o.stroke=function(p,_){return p.readFields(Zfe,{rgb_color:TL,paint:"rgb_color",dasharray:[],dashoffset:0,miterlimit:4,opacity:255,width:1,linecap:1,linejoin:1},_)}(u,u.readVarint()+u.pos):h===3?o.paint_order=u.readVarint():h===5?u.readPackedVarint(o.commands):h===6?o.step=u.readFloat():h===7?u.readPackedSVarint(o.diffs):h===8&&(o.rule=u.readVarint())}function qfe(h,o,u){h===1?(o.rgb_color=V4(u.readVarint()),o.paint="rgb_color"):h===2?(o.linear_gradient_idx=u.readVarint(),o.paint="linear_gradient_idx"):h===3?(o.radial_gradient_idx=u.readVarint(),o.paint="radial_gradient_idx"):h===5&&(o.opacity=u.readVarint())}function V4(h){return new ji((h>>16&255)/255,(h>>8&255)/255,(255&h)/255,1)}function Zfe(h,o,u){h===1?(o.rgb_color=V4(u.readVarint()),o.paint="rgb_color"):h===2?(o.linear_gradient_idx=u.readVarint(),o.paint="linear_gradient_idx"):h===3?(o.radial_gradient_idx=u.readVarint(),o.paint="radial_gradient_idx"):h===5?u.readPackedFloat(o.dasharray):h===6?o.dashoffset=u.readFloat():h===7?o.miterlimit=u.readFloat():h===8?o.opacity=u.readVarint():h===9?o.width=u.readFloat():h===10?o.linecap=u.readVarint():h===11&&(o.linejoin=u.readVarint())}function Xfe(h,o,u){h===1?o.transform=H4(u,u.readVarint()+u.pos):h===2?o.spread_method=u.readVarint():h===3?o.stops.push(x9(u,u.readVarint()+u.pos)):h===4?o.x1=u.readFloat():h===5?o.y1=u.readFloat():h===6?o.x2=u.readFloat():h===7&&(o.y2=u.readFloat())}function x9(h,o){return h.readFields(Yfe,{offset:0,opacity:255,rgb_color:TL},o)}function Yfe(h,o,u){h===1?o.offset=u.readFloat():h===2?o.opacity=u.readVarint():h===3&&(o.rgb_color=V4(u.readVarint()))}function Jfe(h,o,u){h===1?o.transform=H4(u,u.readVarint()+u.pos):h===2?o.spread_method=u.readVarint():h===3?o.stops.push(x9(u,u.readVarint()+u.pos)):h===4?o.cx=u.readFloat():h===5?o.cy=u.readFloat():h===6?o.r=u.readFloat():h===7?o.fx=u.readFloat():h===8?o.fy=u.readFloat():h===9&&(o.fr=u.readFloat())}function epe(h,o,u){h===1?o.transform=H4(u,u.readVarint()+u.pos):h===2?o.clip_path_idx=u.readVarint():h===3&&o.children.push(Q4(u,u.readVarint()+u.pos))}function tpe(h,o,u){h===1?o.left=o.top=u.readFloat():h===2?o.width=o.height=u.readFloat():h===3?o.top=u.readFloat():h===4?o.height=u.readFloat():h===5?o.mask_type=u.readVarint():h===6?o.mask_idx=u.readVarint():h===7&&o.children.push(Q4(u,u.readVarint()+u.pos))}class npe{static calculate(o,u){const p=new Map,_=new Map;if(Object.keys(o).length===0)return p;u.forEach(m=>{_.set(m.name,m.rgb_color||new ji(0,0,0))});for(const[m,w]of Object.entries(o))_.has(m)?p.set(_.get(m).toStringPremultipliedAlpha(),w):console.warn(`Ignoring unknown image variable "${m}"`);return p}}function z_(h,o=255,u){const p=o/255,_=h.toStringPremultipliedAlpha(),m=u.has(_)?u.get(_).clone():h.clone();return m.a=p,m.toString()}function IL(h,o){if(!rn()){const u=document.createElement("canvas");return u.width=h,u.height=o,u}return new OffscreenCanvas(h,o)}function rpe(h,o){const u=npe.calculate(o.params,h.metadata?h.metadata.variables:[]),p=h.usvg_tree,_=p.width,m=p.height,w=o.transform?o.transform:new DOMMatrix,j=Math.max(1,Math.round(_*w.a)),k=Math.max(1,Math.round(m*w.d)),H=new DOMMatrix([j/_,0,0,k/m,0,0]),E=IL(j,k).getContext("2d");return jL(E,H,p,p,u),E.getImageData(0,0,j,k)}function jL(h,o,u,p,_){for(const m of p.children)_9(h,o,u,m,_)}function _9(h,o,u,p,_){p.group?(h.save(),function(m,w,j,k,H){const E=k.mask_idx!=null?j.masks[k.mask_idx]:null,M=k.clip_path_idx!=null?j.clip_paths[k.clip_path_idx]:null;if(k.transform&&(w=t2(k.transform).preMultiplySelf(w)),!function(R,$,te){return R.opacity!==255||$||te}(k,M!=null,E!=null))return void jL(m,w,j,k,H);const O=IL(m.canvas.width,m.canvas.height),P=O.getContext("2d");M&&B9(P,w,j,M),jL(P,w,j,k,H),E&&E9(P,w,j,E,H),m.globalAlpha=k.opacity/255,m.drawImage(O,0,0)}(h,o,u,p.group,_),h.restore()):p.path&&(h.save(),function(m,w,j,k,H){const E=T9(k);m.setTransform(w),k.paint_order===g9.PAINT_ORDER_FILL_AND_STROKE?(w9(m,j,k,E,H),b9(m,j,k,E,H)):(b9(m,j,k,E,H),w9(m,j,k,E,H))}(h,o,u,p.path,_),h.restore())}function w9(h,o,u,p,_){const m=u.fill;if(!m)return;const w=m.opacity/255;switch(m.paint){case"rgb_color":h.fillStyle=z_(m.rgb_color,m.opacity,_);break;case"linear_gradient_idx":h.fillStyle=C9(h,o.linear_gradients[m.linear_gradient_idx],w,_);break;case"radial_gradient_idx":h.fillStyle=S9(h,o.radial_gradients[m.radial_gradient_idx],w,_)}let j;switch(u.rule){case U4.PATH_RULE_NON_ZERO:j="nonzero";break;case U4.PATH_RULE_EVEN_ODD:j="evenodd"}h.fill(p,j)}function b9(h,o,u,p,_){const m=u.stroke;if(!m)return;h.lineWidth=m.width,h.miterLimit=m.miterlimit,h.setLineDash(m.dasharray),h.lineDashOffset=m.dashoffset;const w=m.opacity/255;switch(m.paint){case"rgb_color":h.strokeStyle=z_(m.rgb_color,m.opacity,_);break;case"linear_gradient_idx":h.strokeStyle=C9(h,o.linear_gradients[m.linear_gradient_idx],w,_);break;case"radial_gradient_idx":h.strokeStyle=S9(h,o.radial_gradients[m.radial_gradient_idx],w,_)}switch(m.linejoin){case e2.LINE_JOIN_MITER_CLIP:case e2.LINE_JOIN_MITER:h.lineJoin="miter";break;case e2.LINE_JOIN_ROUND:h.lineJoin="round";break;case e2.LINE_JOIN_BEVEL:h.lineJoin="bevel"}switch(m.linecap){case z4.LINE_CAP_BUTT:h.lineCap="butt";break;case z4.LINE_CAP_ROUND:h.lineCap="round";break;case z4.LINE_CAP_SQUARE:h.lineCap="square"}h.stroke(p)}function C9(h,o,u,p){if(o.stops.length===1){const O=o.stops[0];return z_(O.rgb_color,O.opacity*u,p)}const _=t2(o.transform),{x1:m,y1:w,x2:j,y2:k}=o,H=_.transformPoint(new DOMPoint(m,w)),E=_.transformPoint(new DOMPoint(j,k)),M=h.createLinearGradient(H.x,H.y,E.x,E.y);for(const O of o.stops)M.addColorStop(O.offset,z_(O.rgb_color,O.opacity*u,p));return M}function S9(h,o,u,p){if(o.stops.length===1){const O=o.stops[0];return z_(O.rgb_color,O.opacity*u,p)}const _=t2(o.transform),{fx:m,fy:w,cx:j,cy:k}=o,H=_.transformPoint(new DOMPoint(m,w)),E=_.transformPoint(new DOMPoint(j,k)),M=h.createRadialGradient(H.x,H.y,0,E.x,E.y,o.r*((_.a+_.d)/2));for(const O of o.stops)M.addColorStop(O.offset,z_(O.rgb_color,O.opacity*u,p));return M}function B9(h,o,u,p){const _=t2(p.transform).preMultiplySelf(o),m=p.clip_path_idx!=null?u.clip_paths[p.clip_path_idx]:null;m&&B9(h,_,u,m);const w=new Path2D;let j;function k(H,E){if(H.path){const M=H.path;w.addPath(T9(M),E),M.rule===U4.PATH_RULE_EVEN_ODD&&(j="evenodd")}else if(H.group){const M=H.group.transform?t2(H.group.transform).preMultiplySelf(E):E;for(const O of H.group.children)k(O,M)}}for(const H of p.children)k(H,_);h.clip(w,j)}function E9(h,o,u,p,_){if(p.children.length===0)return;const m=p.mask_idx!=null?u.masks[p.mask_idx]:null;m&&E9(h,o,u,m,_);const w=h.canvas.width,j=h.canvas.height,k=IL(w,j),H=k.getContext("2d"),E=p.width,M=p.height,O=p.left,P=p.top,R=new Path2D,$=new Path2D;$.rect(O,P,E,M),R.addPath($,o),H.clip(R);for(const de of p.children)_9(H,o,u,de,_);const te=H.getImageData(0,0,w,j),ie=te.data;if(p.mask_type===y9.MASK_TYPE_LUMINANCE)for(let de=0;de<ie.length;de+=4)ie[de+3]=ie[de+3]/255*(.2126*ie[de]+.7152*ie[de+1]+.0722*ie[de+2]);H.putImageData(te,0,0),h.globalCompositeOperation="destination-in",h.drawImage(k,0,0)}function t2(h){return h?new DOMMatrix([h.sx,h.ky,h.kx,h.sy,h.tx,h.ty]):new DOMMatrix}function T9(h){const o=new Path2D,u=h.step;let p=h.diffs[0]*u,_=h.diffs[1]*u;o.moveTo(p,_);for(let m=0,w=2;m<h.commands.length;m++)switch(h.commands[m]){case U_.PATH_COMMAND_MOVE:p+=h.diffs[w++]*u,_+=h.diffs[w++]*u,o.moveTo(p,_);break;case U_.PATH_COMMAND_LINE:p+=h.diffs[w++]*u,_+=h.diffs[w++]*u,o.lineTo(p,_);break;case U_.PATH_COMMAND_QUAD:{const j=p+h.diffs[w++]*u,k=_+h.diffs[w++]*u;p=j+h.diffs[w++]*u,_=k+h.diffs[w++]*u,o.quadraticCurveTo(j,k,p,_);break}case U_.PATH_COMMAND_CUBIC:{const j=p+h.diffs[w++]*u,k=_+h.diffs[w++]*u,H=j+h.diffs[w++]*u,E=k+h.diffs[w++]*u;p=H+h.diffs[w++]*u,_=E+h.diffs[w++]*u,o.bezierCurveTo(j,k,H,E,p,_);break}case U_.PATH_COMMAND_CLOSE:o.closePath()}return o}class FL{constructor(o){this.capacity=o,this.cache=new Map}get(o){if(!this.cache.has(o))return;const u=this.cache.get(o);return this.cache.delete(o),this.cache.set(o,u),u}put(o,u){this.cache.has(o)?this.cache.delete(o):this.cache.size===this.capacity&&this.cache.delete(this.cache.keys().next().value),this.cache.set(o,u)}delete(o){this.cache.delete(o)}}class PL{constructor(){this.cacheMap=new Map,this.cacheDependenciesMap=new Map}static _getImage(o){return new Pc(o,o.data)}getFromCache(o,u,p){return this.cacheMap.has(p)||this.cacheMap.set(p,new FL(150)),this.cacheMap.get(p).get(ja(o.serialize(),u))}setInCache(o,u,p,_){this.cacheDependenciesMap.has(_)||this.cacheDependenciesMap.set(_,new Map),this.cacheMap.has(_)||this.cacheMap.set(_,new FL(150));const m=this.cacheDependenciesMap.get(_);m.get(ja(o.id,p))||m.set(ja(o.id,p),new Set);const w=this.cacheMap.get(_),j=o.serialize();m.get(ja(o.id,p)).add(j),w.put(ja(o.serialize(),p),u)}removeImagesFromCacheByIds(o,u,p=""){if(!this.cacheMap.has(p)||!this.cacheDependenciesMap.has(p))return;const _=this.cacheMap.get(p),m=this.cacheDependenciesMap.get(p);for(const w of o)if(m.has(ja(w,u))){for(const j of m.get(ja(w,u)))_.delete(j);m.delete(ja(w,u))}}rasterize(o,u,p,_,m=rpe){const w=this.getFromCache(o,p,_);if(w)return w.clone();const j=m(u.icon,o.options),k=PL._getImage(j);return this.setInCache(o,k,p,_),k.clone()}}class I9{constructor(o){this.size=o,this.minimums=[],this.maximums=[],this.leaves=[]}getElevation(o,u){const p=this.toIdx(o,u);return{min:this.minimums[p],max:this.maximums[p]}}isLeaf(o,u){return this.leaves[this.toIdx(o,u)]}toIdx(o,u){return u*this.size+o}}function j9(h,o,u,p){let _=0,m=Number.MAX_VALUE;for(let w=0;w<3;w++)if(Math.abs(p[w])<1e-15){if(u[w]<h[w]||u[w]>o[w])return null}else{const j=1/p[w];let k=(h[w]-u[w])*j,H=(o[w]-u[w])*j;if(k>H){const E=k;k=H,H=E}if(k>_&&(_=k),H<m&&(m=H),_>m)return null}return _}function F9(h,o,u,p,_,m,w,j,k,H,E){const M=p-h,O=_-o,P=m-u,R=w-h,$=j-o,te=k-u,ie=E[1]*te-E[2]*$,de=E[2]*R-E[0]*te,fe=E[0]*$-E[1]*R,ae=M*ie+O*de+P*fe;if(Math.abs(ae)<1e-15)return null;const ge=1/ae,Be=H[0]-h,ke=H[1]-o,Ye=H[2]-u,Xe=(Be*ie+ke*de+Ye*fe)*ge;if(Xe<0||Xe>1)return null;const We=ke*P-Ye*O,At=Ye*M-Be*P,nt=Be*O-ke*M,yt=(E[0]*We+E[1]*At+E[2]*nt)*ge;return yt<0||Xe+yt>1?null:(R*We+$*At+te*nt)*ge}function P9(h,o,u){return(h-o)/(u-o)}function k9(h,o,u,p,_,m,w,j,k){const H=1<<u,E=m-p,M=w-_,O=(h+1)/H*E+p,P=(o+0)/H*M+_,R=(o+1)/H*M+_;j[0]=(h+0)/H*E+p,j[1]=P,k[0]=O,k[1]=R}class L9{constructor(o){if(this.maximums=[],this.minimums=[],this.leaves=[],this.childOffsets=[],this.nodeCount=0,this.dem=o,this._siblingOffset=[[0,0],[1,0],[0,1],[1,1]],!this.dem)return;const u=function(m){const w=Math.ceil(Math.log2(m.dim/8)),j=[];let k=Math.ceil(Math.pow(2,w));const H=1/k,E=(P,R,$,te,ie)=>{const de=te?1:0,fe=(P+1)*$-de,ae=R*$,ge=(R+1)*$-de;ie[0]=P*$,ie[1]=ae,ie[2]=fe,ie[3]=ge};let M=new I9(k);const O=[];for(let P=0;P<k*k;P++){E(P%k,Math.floor(P/k),H,!1,O);const R=U0(O[0],O[1],m),$=U0(O[2],O[1],m),te=U0(O[2],O[3],m),ie=U0(O[0],O[3],m);M.minimums.push(Math.min(R,$,te,ie)),M.maximums.push(Math.max(R,$,te,ie)),M.leaves.push(1)}for(j.push(M),k/=2;k>=1;k/=2){const P=j[j.length-1];M=new I9(k);for(let R=0;R<k*k;R++){E(R%k,Math.floor(R/k),2,!0,O);const $=P.getElevation(O[0],O[1]),te=P.getElevation(O[2],O[1]),ie=P.getElevation(O[2],O[3]),de=P.getElevation(O[0],O[3]),fe=P.isLeaf(O[0],O[1]),ae=P.isLeaf(O[2],O[1]),ge=P.isLeaf(O[2],O[3]),Be=P.isLeaf(O[0],O[3]),ke=Math.min($.min,te.min,ie.min,de.min),Ye=Math.max($.max,te.max,ie.max,de.max),Xe=fe&&ae&&ge&&Be;M.maximums.push(Ye),M.minimums.push(ke),M.leaves.push(Ye-ke<=5&&Xe?1:0)}j.push(M)}return j}(this.dem),p=u.length-1,_=u[p];this._addNode(_.minimums[0],_.maximums[0],_.leaves[0]),this._construct(u,0,0,p,0)}raycastRoot(o,u,p,_,m,w,j=1){return j9([o,u,-100],[p,_,this.maximums[0]*j],m,w)}raycast(o,u,p,_,m,w,j=1){if(!this.nodeCount)return null;const k=this.raycastRoot(o,u,p,_,m,w,j);if(k==null)return null;const H=[],E=[],M=[],O=[],P=[{idx:0,t:k,nodex:0,nodey:0,depth:0}];for(;P.length>0;){const{idx:R,t:$,nodex:te,nodey:ie,depth:de}=P.pop();if(this.leaves[R]){k9(te,ie,de,o,u,p,_,M,O);const ae=1<<de,ge=(te+0)/ae,Be=(te+1)/ae,ke=(ie+0)/ae,Ye=(ie+1)/ae,Xe=U0(ge,ke,this.dem)*j,We=U0(Be,ke,this.dem)*j,At=U0(Be,Ye,this.dem)*j,nt=U0(ge,Ye,this.dem)*j,yt=F9(M[0],M[1],Xe,O[0],M[1],We,O[0],O[1],At,m,w),bt=F9(O[0],O[1],At,M[0],O[1],nt,M[0],M[1],Xe,m,w),_t=Math.min(yt!==null?yt:Number.MAX_VALUE,bt!==null?bt:Number.MAX_VALUE);if(_t!==Number.MAX_VALUE)return _t;{const Et=Me.vec3.scaleAndAdd([],m,w,$);if(M9(Xe,We,nt,At,P9(Et[0],M[0],O[0]),P9(Et[1],M[1],O[1]))>=Et[2])return $}continue}let fe=0;for(let ae=0;ae<this._siblingOffset.length;ae++){k9((te<<1)+this._siblingOffset[ae][0],(ie<<1)+this._siblingOffset[ae][1],de+1,o,u,p,_,M,O),M[2]=-100,O[2]=this.maximums[this.childOffsets[R]+ae]*j;const ge=j9(M,O,m,w);if(ge!=null){const Be=ge;H[ae]=Be;let ke=!1;for(let Ye=0;Ye<fe&&!ke;Ye++)Be>=H[E[Ye]]&&(E.splice(Ye,0,ae),ke=!0);ke||(E[fe]=ae),fe++}}for(let ae=0;ae<fe;ae++){const ge=E[ae];P.push({idx:this.childOffsets[R]+ge,t:H[ge],nodex:(te<<1)+this._siblingOffset[ge][0],nodey:(ie<<1)+this._siblingOffset[ge][1],depth:de+1})}}return null}_addNode(o,u,p){return this.minimums.push(o),this.maximums.push(u),this.leaves.push(p),this.childOffsets.push(0),this.nodeCount++}_construct(o,u,p,_,m){if(o[_].isLeaf(u,p)===1)return;this.childOffsets[m]||(this.childOffsets[m]=this.nodeCount);const w=_-1,j=o[w];let k=0,H=0;for(let E=0;E<this._siblingOffset.length;E++){const M=2*u+this._siblingOffset[E][0],O=2*p+this._siblingOffset[E][1],P=j.getElevation(M,O),R=j.isLeaf(M,O),$=this._addNode(P.min,P.max,R);R&&(k|=1<<E),H||(H=$)}for(let E=0;E<this._siblingOffset.length;E++)k&1<<E||this._construct(o,2*u+this._siblingOffset[E][0],2*p+this._siblingOffset[E][1],w,H+E)}}function M9(h,o,u,p,_,m){return Ur(Ur(h,u,m),Ur(o,p,m),_)}function U0(h,o,u){const p=u.dim,_=Gt(h*p-.5,0,p-1),m=Gt(o*p-.5,0,p-1),w=Math.floor(_),j=Math.floor(m),k=Math.min(w+1,p-1),H=Math.min(j+1,p-1);return M9(u.get(w,j),u.get(k,j),u.get(w,H),u.get(k,H),_-w,m-j)}const ipe={mapbox:[6553.6,25.6,.1,1e4],terrarium:[256,1,1/256,32768]};function spe(h,o,u){return(256*h*256+256*o+u)/10-1e4}function ope(h,o,u){return 256*h+o+u/256-32768}class $4{get tree(){return this._tree||this._buildQuadTree(),this._tree}constructor(o,u,p,_=!1){if(this.uid=o,u.height!==u.width)throw new RangeError("DEM tiles must be square");if(p&&p!=="mapbox"&&p!=="terrarium")return void Vn(`"${p}" is not a valid encoding type. Valid types include "mapbox" and "terrarium".`);this.stride=u.height;const m=this.dim=u.height-2,w=new Uint32Array(u.data.buffer);if(this.pixels=new Uint8Array(u.data.buffer),this.floatView=new Float32Array(u.data.buffer),this.borderReady=_,this._modifiedForSources={},!_){for(let k=0;k<m;k++)w[this._idx(-1,k)]=w[this._idx(0,k)],w[this._idx(m,k)]=w[this._idx(m-1,k)],w[this._idx(k,-1)]=w[this._idx(k,0)],w[this._idx(k,m)]=w[this._idx(k,m-1)];w[this._idx(-1,-1)]=w[this._idx(0,0)],w[this._idx(m,-1)]=w[this._idx(m-1,0)],w[this._idx(-1,m)]=w[this._idx(0,m-1)],w[this._idx(m,m)]=w[this._idx(m-1,m-1)]}const j=p==="terrarium"?ope:spe;for(let k=0;k<w.length;++k){const H=4*k;this.floatView[k]=j(this.pixels[H],this.pixels[H+1],this.pixels[H+2])}this._timestamp=_n.now()}_buildQuadTree(){this._tree=new L9(this)}get(o,u,p=!1){p&&(o=Gt(o,-1,this.dim),u=Gt(u,-1,this.dim));const _=this._idx(o,u);return this.floatView[_]}set(o,u,p){const _=this._idx(o,u),m=this.floatView[_];return this.floatView[_]=p,p-m}static getUnpackVector(o){return ipe[o]}_idx(o,u){if(o<-1||o>=this.dim+1||u<-1||u>=this.dim+1)throw new RangeError("out of range source coordinates for DEM data");return(u+1)*this.stride+(o+1)}static pack(o,u){const p=[0,0,0,0],_=$4.getUnpackVector(u);let m=Math.floor((o+_[3])/_[2]);return p[2]=m%256,m=Math.floor(m/256),p[1]=m%256,m=Math.floor(m/256),p[0]=m,p}getPixels(){return new vE({width:this.stride,height:this.stride},this.pixels)}backfillBorder(o,u,p){if(this.dim!==o.dim)throw new Error("dem dimension mismatch");let _=u*this.dim,m=u*this.dim+this.dim,w=p*this.dim,j=p*this.dim+this.dim;switch(u){case-1:_=m-1;break;case 1:m=_+1}switch(p){case-1:w=j-1;break;case 1:j=w+1}const k=-u*this.dim,H=-p*this.dim;for(let E=w;E<j;E++)for(let M=_;M<m;M++){const O=4*this._idx(M,E),P=4*this._idx(M+k,E+H);this.pixels[O+0]=o.pixels[P+0],this.pixels[O+1]=o.pixels[P+1],this.pixels[O+2]=o.pixels[P+2],this.pixels[O+3]=o.pixels[P+3]}}onDeserialize(){this._tree&&(this._tree.dem=this)}}function ape(h,o,u){h===1?o.headerLength=u.readFixed32():h===2?o.x=u.readVarint():h===3?o.y=u.readVarint():h===4?o.z=u.readVarint():h===5&&o.layers.push(function(p,_){return p.readFields(hpe,{version:0,name:"",units:"",tileSize:0,buffer:0,pixelFormat:0,dataIndex:[]},_)}(u,u.readVarint()+u.pos))}function lpe(h,o,u){h===1?(o.delta_filter=function(p,_){return p.readFields(cpe,{blockSize:0},_)}(u,u.readVarint()+u.pos),o.filter="delta_filter"):h===2?(u.readVarint(),o.filter="zigzag_filter"):h===3?(u.readVarint(),o.filter="bitshuffle_filter"):h===4&&(u.readVarint(),o.filter="byteshuffle_filter")}function cpe(h,o,u){h===1&&(o.blockSize=u.readVarint())}function upe(h,o,u){h===1?(u.readVarint(),o.codec="gzip_data"):h===2?(u.readVarint(),o.codec="jpeg_image"):h===3?(u.readVarint(),o.codec="webp_image"):h===4&&(u.readVarint(),o.codec="png_image")}function dpe(h,o,u){let p=0,_=0;h===1?o.firstByte=u.readFixed64():h===2?o.lastByte=u.readFixed64():h===3?o.filters.push(function(m,w){return m.readFields(lpe,{},w)}(u,u.readVarint()+u.pos)):h===4?o.codec=function(m,w){return m.readFields(upe,{},w)}(u,u.readVarint()+u.pos):h===5?_=u.readFloat():h===6?p=u.readFloat():h===7?o.bands.push(u.readString()):h===8?o.offset=u.readDouble():h===9&&(o.scale=u.readDouble()),o.offset===0&&(o.offset=_),o.scale===0&&(o.scale=p)}function hpe(h,o,u){h===1?o.version=u.readVarint():h===2?o.name=u.readString():h===3?o.units=u.readString():h===4?o.tileSize=u.readVarint():h===5?o.buffer=u.readVarint():h===6?o.pixelFormat=u.readVarint():h===7&&o.dataIndex.push(function(p,_){return p.readFields(dpe,{firstByte:0,lastByte:0,filters:[],codec:null,offset:0,scale:0,bands:[]},_)}(u,u.readVarint()+u.pos))}function fpe(h,o,u){if(h===2)(function(p,_,m){p.readFields(ppe,m,_)})(u,u.readVarint()+u.pos,o);else if(h===3)throw new Error("Not implemented")}function ppe(h,o,u){if(h===1){let p=0;const _=u.readVarint()+u.pos;for(;u.pos<_;)o[p++]=u.readVarint()}}function Ape(h,o){if(o.length!==4)throw new Error(`Expected data of dimension 4 but got ${o.length}.`);let u=o[3];for(let p=2;p>=1;p--){const _=p===1?1:0,m=p===2?1:0;for(let w=0;w<o[0];w++){const j=o[1]*w;for(let k=_;k<o[1];k++){const H=o[2]*(k+j);for(let E=m;E<o[2];E++){const M=o[3]*(E+H);for(let O=0;O<o[3];O++){const P=M+O;h[P]+=h[P-u]}}}}u*=o[p]}return h}function mpe(h){for(let o=0,u=h.length;o<u;o++)h[o]=h[o]>>>1^-(1&h[o]);return h}function gpe(h,o){switch(o){case"uint32":return h;case"uint16":for(let u=0;u<h.length;u+=2){const p=h[u],_=h[u+1];h[u]=(240&p)>>4|(61440&p)>>8|(240&_)<<4|61440&_,h[u+1]=15&p|(3840&p)>>4|(15&_)<<8|(3840&_)<<4}return h;case"uint8":for(let u=0;u<h.length;u+=4){const p=h[u],_=h[u+1],m=h[u+2],w=h[u+3];h[u+0]=(192&p)>>6|(192&_)>>4|(192&m)>>2|192&w,h[u+1]=(48&p)>>4|(48&_)>>2|48&m|(48&w)<<2,h[u+2]=(12&p)>>2|12&_|(12&m)<<2|(12&w)<<4,h[u+3]=3&p|(3&_)<<2|(3&m)<<4|(3&w)<<6}return h;default:throw new Error(`Invalid pixel format, "${o}"`)}}He($4,"DEMData"),He(L9,"DemMinMaxQuadTree",{omit:["dem"]});var Df=Uint8Array,n2=Uint16Array,ype=Int32Array,N9=new Df([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),R9=new Df([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),vpe=new Df([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),O9=function(h,o){for(var u=new n2(31),p=0;p<31;++p)u[p]=o+=1<<h[p-1];var _=new ype(u[30]);for(p=1;p<30;++p)for(var m=u[p];m<u[p+1];++m)_[m]=m-u[p]<<5|p;return{b:u,r:_}},D9=O9(N9,2),U9=D9.b,xpe=D9.r;U9[28]=258,xpe[258]=28;for(var _pe=O9(R9,0).b,z9=new n2(32768),Ja=0;Ja<32768;++Ja){var Q_=(43690&Ja)>>1|(21845&Ja)<<1;z9[Ja]=((65280&(Q_=(61680&(Q_=(52428&Q_)>>2|(13107&Q_)<<2))>>4|(3855&Q_)<<4))>>8|(255&Q_)<<8)>>1}var r2=function(h,o,u){for(var p=h.length,_=0,m=new n2(o);_<p;++_)h[_]&&++m[h[_]-1];var w,j=new n2(o);for(_=1;_<o;++_)j[_]=j[_-1]+m[_-1]<<1;w=new n2(1<<o);var k=15-o;for(_=0;_<p;++_)if(h[_])for(var H=_<<4|h[_],E=o-h[_],M=j[h[_]-1]++<<E,O=M|(1<<E)-1;M<=O;++M)w[z9[M]>>k]=H;return w},i2=new Df(288);for(Ja=0;Ja<144;++Ja)i2[Ja]=8;for(Ja=144;Ja<256;++Ja)i2[Ja]=9;for(Ja=256;Ja<280;++Ja)i2[Ja]=7;for(Ja=280;Ja<288;++Ja)i2[Ja]=8;var Q9=new Df(32);for(Ja=0;Ja<32;++Ja)Q9[Ja]=5;var wpe=r2(i2,9),bpe=r2(Q9,5),kL=function(h){for(var o=h[0],u=1;u<h.length;++u)h[u]>o&&(o=h[u]);return o},xA=function(h,o,u){var p=o/8|0;return(h[p]|h[p+1]<<8)>>(7&o)&u},LL=function(h,o){var u=o/8|0;return(h[u]|h[u+1]<<8|h[u+2]<<16)>>(7&o)},Cpe=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],_A=function(h,o,u){var p=new Error(o||Cpe[h]);if(p.code=h,Error.captureStackTrace&&Error.captureStackTrace(p,_A),!u)throw p;return p},Spe=new Df(0),Bpe=typeof TextDecoder<"u"&&new TextDecoder;try{Bpe.decode(Spe,{stream:!0})}catch{}const Epe={gzip_data:"gzip"};class Tp extends Error{constructor(o){super(o),this.name="MRTError"}}const Tpe={0:"uint32",1:"uint32",2:"uint16",3:"uint8"},H9={uint32:1,uint16:2,uint8:4},Ipe={uint32:Uint32Array,uint16:Uint16Array,uint8:Uint8Array};let ML;class NL{constructor(o=5){this.x=NaN,this.y=NaN,this.z=NaN,this.layers={},this._cacheSize=o}getLayer(o){const u=this.layers[o];if(!u)throw new Tp(`Layer '${o}' not found`);return u}getHeaderLength(o){const u=new Uint8Array(o),p=new DataView(o);if(u[0]!==13)throw new Tp("File is not a valid MRT.");return p.getUint32(1,!0)}parseHeader(o){const u=new Uint8Array(o),p=this.getHeaderLength(o);if(u.length<p)throw new Tp(`Expected header with length >= ${p} but got buffer of length ${u.length}`);const _=function(m,w){return m.readFields(ape,{headerLength:0,x:0,y:0,z:0,layers:[]},void 0)}(new ML(u.subarray(0,p)));if(!isNaN(this.x)&&(this.x!==_.x||this.y!==_.y||this.z!==_.z))throw new Tp(`Invalid attempt to parse header ${_.z}/${_.x}/${_.y} for tile ${this.z}/${this.x}/${this.y}`);this.x=_.x,this.y=_.y,this.z=_.z;for(const m of _.layers)this.layers[m.name]=new jpe(m,{cacheSize:this._cacheSize});return this}createDecodingTask(o){const u=[],p=this.getLayer(o.layerName);for(let _ of o.blockIndices){const m=p.dataIndex[_],w=m.firstByte-o.firstByte,j=m.lastByte-o.firstByte;if(p._blocksInProgress.has(_))continue;const k={layerName:p.name,firstByte:w,lastByte:j,pixelFormat:p.pixelFormat,blockIndex:_,blockShape:[m.bands.length].concat(p.bandShape),buffer:p.buffer,codec:m.codec.codec,filters:m.filters.map(H=>H.filter)};p._blocksInProgress.add(_),u.push(k)}return new V9(u,()=>{u.forEach(_=>p._blocksInProgress.delete(_.blockIndex))},(_,m)=>{if(u.forEach(w=>p._blocksInProgress.delete(w.blockIndex)),_)throw _;m.forEach(w=>{this.getLayer(w.layerName).processDecodedData(w)})})}}class jpe{constructor({version:o,name:u,units:p,tileSize:_,pixelFormat:m,buffer:w,dataIndex:j},k){if(this.version=o,this.version!==1)throw new Tp(`Cannot parse raster layer encoded with MRT version ${o}`);this.name=u,this.units=p,this.tileSize=_,this.buffer=w,this.pixelFormat=Tpe[m],this.dataIndex=j,this.bandShape=[_+2*w,_+2*w,H9[this.pixelFormat]],this._decodedBlocks=new FL(k?k.cacheSize:5),this._blocksInProgress=new Set}get dimension(){return H9[this.pixelFormat]}get cacheSize(){return this._decodedBlocks.capacity}getBandList(){return this.dataIndex.map(({bands:o})=>o).flat()}processDecodedData(o){const u=o.blockIndex.toString();this._decodedBlocks.get(u)||this._decodedBlocks.put(u,o.data)}getBlockForBand(o){let u=0;switch(typeof o){case"string":for(const[p,_]of this.dataIndex.entries()){for(const[m,w]of _.bands.entries())if(w===o)return{bandIndex:u+m,blockIndex:p,blockBandIndex:m};u+=_.bands.length}break;case"number":for(const[p,_]of this.dataIndex.entries()){if(o>=u&&o<u+_.bands.length)return{bandIndex:o,blockIndex:p,blockBandIndex:o-u};u+=_.bands.length}break;default:throw new Tp(`Invalid band \`${JSON.stringify(o)}\`. Expected string or integer.`)}throw new Tp(`Band not found: ${JSON.stringify(o)}`)}getDataRange(o){let u=1/0,p=-1/0;const _=[],m=new Set;for(const w of o){const{blockIndex:j}=this.getBlockForBand(w);if(j<0)throw new Tp(`Invalid band: ${JSON.stringify(w)}`);const k=this.dataIndex[j];_.includes(j)||_.push(j),m.add(j),u=Math.min(u,k.firstByte),p=Math.max(p,k.lastByte)}if(m.size>this.cacheSize)throw new Tp(`Number of blocks to decode (${m.size}) exceeds cache size (${this.cacheSize}).`);return{layerName:this.name,firstByte:u,lastByte:p,blockIndices:_}}hasBand(o){const{blockIndex:u}=this.getBlockForBand(o);return u>=0}hasDataForBand(o){const{blockIndex:u}=this.getBlockForBand(o);return u>=0&&!!this._decodedBlocks.get(u.toString())}getBandView(o){const{blockIndex:u,blockBandIndex:p}=this.getBlockForBand(o),_=this._decodedBlocks.get(u.toString());if(!_)throw new Tp(`Data for band ${JSON.stringify(o)} of layer "${this.name}" not decoded.`);const m=this.dataIndex[u],w=this.bandShape.reduce((H,E)=>H*E,1),j=p*w,k=_.subarray(j,j+w);return{data:k,bytes:new Uint8Array(k.buffer).subarray(k.byteOffset,k.byteOffset+k.byteLength),tileSize:this.tileSize,buffer:this.buffer,pixelFormat:this.pixelFormat,dimension:this.dimension,offset:m.offset,scale:m.scale}}}NL.setPbf=function(h){ML=h};class V9{constructor(o,u,p){this.tasks=o,this._onCancel=u,this._onComplete=p,this._finalized=!1}cancel(){this._finalized||(this._onCancel(),this._finalized=!0)}complete(o,u){this._finalized||(this._onComplete(o,u),this._finalized=!0)}}NL.performDecoding=function(h,o){const u=new Uint8Array(h);return Promise.all(o.tasks.map(p=>{const{layerName:_,firstByte:m,lastByte:w,pixelFormat:j,blockShape:k,blockIndex:H,filters:E,codec:M}=p,O=u.subarray(m,w+1),P=new Uint32Array(k[0]*k[1]*k[2]);let R;if(M!=="gzip_data")throw new Tp(`Unhandled codec: ${M}`);return R=function($,te){if(!globalThis.DecompressionStream&&te==="gzip_data")return Promise.resolve(((ae=function(ke){ke[0]==31&&ke[1]==139&&ke[2]==8||_A(6,"invalid gzip data");var Ye=ke[3],Xe=10;4&Ye&&(Xe+=2+(ke[10]|ke[11]<<8));for(var We=(Ye>>3&1)+(Ye>>4&1);We>0;We-=!ke[Xe++]);return Xe+(2&Ye)}(fe=$))+8>fe.length&&_A(6,"invalid gzip data"),function(ke,Ye,Xe,We){var At=ke.length;if(!At||Ye.f&&!Ye.l)return Xe||new Df(0);var nt=!Xe,yt=nt||Ye.i!=2,bt=Ye.i;nt&&(Xe=new Df(3*At));var _t,Et,Ut=function(Ng){var H0=Xe.length;if(Ng>H0){var V0=new Df(Math.max(2*H0,Ng));V0.set(Xe),Xe=V0}},Wt=Ye.f||0,Pt=Ye.p||0,mn=Ye.b||0,Nn=Ye.l,vn=Ye.d,qn=Ye.m,Kn=Ye.n,ir=8*At;do{if(!Nn){Wt=xA(ke,Pt,1);var Bn=xA(ke,Pt+1,3);if(Pt+=3,!Bn){var Br=ke[(ni=4+((Pt+7)/8|0))-4]|ke[ni-3]<<8,Zn=ni+Br;if(Zn>At){bt&&_A(0);break}yt&&Ut(mn+Br),Xe.set(ke.subarray(ni,Zn),mn),Ye.b=mn+=Br,Ye.p=Pt=8*Zn,Ye.f=Wt;continue}if(Bn==1)Nn=wpe,vn=bpe,qn=9,Kn=5;else if(Bn==2){var vr=xA(ke,Pt,31)+257,Qr=xA(ke,Pt+10,15)+4,fi=vr+xA(ke,Pt+5,31)+1;Pt+=14;for(var xi=new Df(fi),Ei=new Df(19),_i=0;_i<Qr;++_i)Ei[vpe[_i]]=xA(ke,Pt+3*_i,7);Pt+=3*Qr;var Mi=kL(Ei),qs=(1<<Mi)-1,Fs=r2(Ei,Mi);for(_i=0;_i<fi;){var ni,Ps=Fs[xA(ke,Pt,qs)];if(Pt+=15&Ps,(ni=Ps>>4)<16)xi[_i++]=ni;else{var ws=0,Zs=0;for(ni==16?(Zs=3+xA(ke,Pt,3),Pt+=2,ws=xi[_i-1]):ni==17?(Zs=3+xA(ke,Pt,7),Pt+=3):ni==18&&(Zs=11+xA(ke,Pt,127),Pt+=7);Zs--;)xi[_i++]=ws}}var el=xi.subarray(0,vr),tl=xi.subarray(vr);qn=kL(el),Kn=kL(tl),Nn=r2(el,qn),vn=r2(tl,Kn)}else _A(1);if(Pt>ir){bt&&_A(0);break}}yt&&Ut(mn+131072);for(var ba=(1<<qn)-1,md=(1<<Kn)-1,Fo=Pt;;Fo=Pt){var Do=(ws=Nn[LL(ke,Pt)&ba])>>4;if((Pt+=15&ws)>ir){bt&&_A(0);break}if(ws||_A(2),Do<256)Xe[mn++]=Do;else{if(Do==256){Fo=Pt,Nn=null;break}var Ru=Do-254;Do>264&&(Ru=xA(ke,Pt,(1<<(Sl=N9[_i=Do-257]))-1)+U9[_i],Pt+=Sl);var nl=vn[LL(ke,Pt)&md],ch=nl>>4;if(nl||_A(3),Pt+=15&nl,tl=_pe[ch],ch>3){var Sl=R9[ch];tl+=LL(ke,Pt)&(1<<Sl)-1,Pt+=Sl}if(Pt>ir){bt&&_A(0);break}yt&&Ut(mn+131072);var Im=mn+Ru;if(mn<tl){var z0=0-tl,Q0=Math.min(tl,Im);for(z0+mn<0&&_A(3);mn<Q0;++mn)Xe[mn]=(void 0)[z0+mn]}for(;mn<Im;++mn)Xe[mn]=Xe[mn-tl]}}Ye.l=Nn,Ye.p=Fo,Ye.b=mn,Ye.f=Wt,Nn&&(Wt=1,Ye.m=qn,Ye.d=vn,Ye.n=Kn)}while(!Wt);return mn!=Xe.length&&nt?(_t=Xe,((Et=mn)==null||Et>_t.length)&&(Et=_t.length),new Df(_t.subarray(0,Et))):Xe.subarray(0,mn)}(fe.subarray(ae,-8),{i:2},new Df(((ie=fe)[(de=ie.length)-4]|ie[de-3]<<8|ie[de-2]<<16|ie[de-1]<<24)>>>0))));var ie,de,fe,ae;const ge=Epe[te];if(!ge)throw new Error(`Unhandled codec: ${te}`);const Be=new globalThis.DecompressionStream(ge);return new Response(new Blob([$]).stream().pipeThrough(Be)).arrayBuffer().then(ke=>new Uint8Array(ke))}(O,M).then($=>(function(te,ie){te.readFields(fpe,ie)}(new ML($),P),new Ipe[j](P.buffer))),R.then($=>{for(let te=E.length-1;te>=0;te--)switch(E[te]){case"delta_filter":Ape($,k);break;case"zigzag_filter":mpe($);break;case"bitshuffle_filter":gpe($,j);break;default:throw new Tp(`Unhandled filter "${E[te]}"`)}return{layerName:_,blockIndex:H,data:$}}).catch($=>{throw $})}))},He(V9,"MRTDecodingBatch",{omit:["_onCancel","_onComplete"]});let s2,RL,wA,H_,OL,V_=null;function $9(){return mi()&&self.worker&&self.worker.dracoUrl?self.worker.dracoUrl:RL||ve.DRACO_URL}function G9(){if(mi()&&self.worker&&self.worker.meshoptUrl)return self.worker.meshoptUrl;if(H_)return H_;const h=new Uint8Array([0,97,115,109,1,0,0,0,1,4,1,96,0,0,3,3,2,0,0,5,3,1,0,1,12,1,0,10,22,2,12,0,65,0,65,0,65,0,252,10,0,0,11,7,0,65,0,253,15,26,11]);if(typeof WebAssembly!="object")throw new Error("WebAssembly not supported, cannot instantiate meshoptimizer");return H_=WebAssembly.validate(h)?ve.MESHOPT_SIMD_URL:ve.MESHOPT_URL,H_}const G4={5120:Int8Array,5121:Uint8Array,5122:Int16Array,5123:Uint16Array,5125:Uint32Array,5126:Float32Array},Fpe={5120:"DT_INT8",5121:"DT_UINT8",5122:"DT_INT16",5123:"DT_UINT16",5125:"DT_UINT32",5126:"DT_FLOAT32"},o2={SCALAR:1,VEC2:2,VEC3:3,VEC4:4,MAT2:4,MAT3:9,MAT4:16};function K9(h,o,u){const p=u.json.bufferViews.length,_=u.buffers.length;o.bufferView=p,u.json.bufferViews[p]={buffer:_,byteLength:h.byteLength},u.buffers[_]=h}const DL="KHR_draco_mesh_compression";function Ppe(h,o){const u=h.extensions&&h.extensions[DL];if(!u)return;const p=new wA.Decoder,_=X9(o,u.bufferView),m=new wA.Mesh;if(!p.DecodeArrayToMesh(_,_.byteLength,m))throw new Error("Failed to decode Draco mesh");const w=o.json.accessors[h.indices],j=G4[w.componentType],k=w.count*j.BYTES_PER_ELEMENT,H=wA._malloc(k);j===Uint16Array?p.GetTrianglesUInt16Array(m,k,H):p.GetTrianglesUInt32Array(m,k,H),K9(wA.memory.buffer.slice(H,H+k),w,o),wA._free(H);for(const E of Object.keys(u.attributes)){const M=p.GetAttributeByUniqueId(m,u.attributes[E]),O=o.json.accessors[h.attributes[E]],P=Fpe[O.componentType],R=O.count*o2[O.type]*G4[O.componentType].BYTES_PER_ELEMENT,$=wA._malloc(R);p.GetAttributeDataArrayForAllPoints(m,M,wA[P],R,$),K9(wA.memory.buffer.slice($,$+R),O,o),wA._free($)}p.destroy(),m.destroy(),delete h.extensions[DL]}const K4="EXT_meshopt_compression";function kpe(h,o){if(!h.extensions||!h.extensions[K4])return;const u=h.extensions[K4],p=new Uint8Array(o.buffers[u.buffer],u.byteOffset||0,u.byteLength||0),_=new Uint8Array(u.count*u.byteStride);OL.decodeGltfBuffer(_,u.count,u.byteStride,p,u.mode,u.filter),h.buffer=o.buffers.length,h.byteOffset=0,o.buffers[h.buffer]=_.buffer,delete h.extensions[K4]}const W9=1179937895,q9=new TextDecoder("utf8");function Z9(h,o){return new URL(h,o).href}function Lpe(h,o,u,p){return fetch(Z9(h.uri,p)).then(_=>_.arrayBuffer()).then(_=>{o.buffers[u]=_})}function X9(h,o){const u=h.json.bufferViews[o];return new Uint8Array(h.buffers[u.buffer],u.byteOffset||0,u.byteLength)}function Mpe(h,o,u,p){if(h.uri){const _=Z9(h.uri,p);return fetch(_).then(m=>m.blob()).then(m=>createImageBitmap(m)).then(m=>{o.images[u]=m})}if(h.bufferView!==void 0){const _=X9(o,h.bufferView),m=new Blob([_],{type:h.mimeType});return createImageBitmap(m).then(w=>{o.images[u]=w})}}function Y9(h,o=0,u){const p={json:null,images:[],buffers:[]};if(new Uint32Array(h,o,1)[0]===W9){const E=new Uint32Array(h,o);let M=2;const O=(E[M++]>>2)-3,P=E[M++]>>2;if(M++,p.json=JSON.parse(q9.decode(E.subarray(M,M+P))),M+=P,M<O){const R=E[M++];M++;const $=o+(M<<2);p.buffers[0]=h.slice($,$+R)}}else p.json=JSON.parse(q9.decode(new Uint8Array(h,o)));const{buffers:_,images:m,meshes:w,extensionsUsed:j,bufferViews:k}=p.json;let H=Promise.resolve();if(_){const E=[];for(let M=0;M<_.length;M++){const O=_[M];O.uri?E.push(Lpe(O,p,M,u)):p.buffers[M]||(p.buffers[M]=null)}H=Promise.all(E)}return H.then(()=>{const E=[],M=j&&j.includes(DL),O=j&&j.includes(K4);if(M&&E.push(function(){if(!wA)return s2??(s2=function(P){let R,$=null;function te(){R=new Uint8Array($.buffer)}function ie(){throw new Error("Unexpected Draco error.")}const de={a:{a:ie,d:function(fe,ae,ge){return R.copyWithin(fe,ae,ae+ge)},c:function(fe){const ae=R.length,ge=Math.max(fe>>>0,Math.ceil(1.2*ae)),Be=Math.ceil((ge-ae)/65536);try{return $.grow(Be),te(),!0}catch{return!1}},b:ie}};return(WebAssembly.instantiateStreaming?WebAssembly.instantiateStreaming(P,de):P.then(fe=>fe.arrayBuffer()).then(fe=>WebAssembly.instantiate(fe,de))).then(fe=>{const{Rb:ae,Qb:ge,P:Be,T:ke,X:Ye,Ja:Xe,La:We,Qa:At,Va:nt,Wa:yt,eb:bt,jb:_t,f:Et,e:Ut,yb:Wt,zb:Pt,Ab:mn,Bb:Nn,Db:vn,Gb:qn}=fe.instance.exports;$=Ut;const Kn=(()=>{let ir=0,Bn=0,Br=0,Zn=0;return vr=>{Br&&(ae(Zn),ae(ir),Bn+=Br,Br=ir=0),ir||(Bn+=128,ir=ge(Bn));const Qr=vr.length+7&-8;let fi=ir;Qr>=Bn&&(Br=Qr,fi=Zn=ge(Qr));for(let xi=0;xi<vr.length;xi++)R[fi+xi]=vr[xi];return fi}})();return te(),Et(),{memory:Ut,_free:ae,_malloc:ge,Mesh:class{constructor(){this.ptr=Be()}destroy(){ke(this.ptr)}},Decoder:class{constructor(){this.ptr=Xe()}destroy(){_t(this.ptr)}DecodeArrayToMesh(ir,Bn,Br){const Zn=Kn(ir),vr=We(this.ptr,Zn,Bn,Br.ptr);return!!Ye(vr)}GetAttributeByUniqueId(ir,Bn){return{ptr:At(this.ptr,ir.ptr,Bn)}}GetTrianglesUInt16Array(ir,Bn,Br){nt(this.ptr,ir.ptr,Bn,Br)}GetTrianglesUInt32Array(ir,Bn,Br){yt(this.ptr,ir.ptr,Bn,Br)}GetAttributeDataArrayForAllPoints(ir,Bn,Br,Zn,vr){bt(this.ptr,ir.ptr,Bn.ptr,Br,Zn,vr)}},DT_INT8:Wt(),DT_UINT8:Pt(),DT_INT16:mn(),DT_UINT16:Nn(),DT_UINT32:vn(),DT_FLOAT32:qn()}})}(fetch($9())),s2.then(P=>{wA=P,s2=void 0}))}()),O&&E.push(function(){if(OL)return;const P=function(R){let $;const te=WebAssembly.instantiateStreaming(R,{}).then(fe=>{$=fe.instance,$.exports.__wasm_call_ctors()}),ie={NONE:"",OCTAHEDRAL:"meshopt_decodeFilterOct",QUATERNION:"meshopt_decodeFilterQuat",EXPONENTIAL:"meshopt_decodeFilterExp"},de={ATTRIBUTES:"meshopt_decodeVertexBuffer",TRIANGLES:"meshopt_decodeIndexBuffer",INDICES:"meshopt_decodeIndexSequence"};return{ready:te,supported:!0,decodeGltfBuffer(fe,ae,ge,Be,ke,Ye){(function(Xe,We,At,nt,yt,bt,_t){const Et=Xe.exports.sbrk,Ut=nt+3&-4,Wt=Et(Ut*yt),Pt=Et(bt.length),mn=new Uint8Array(Xe.exports.memory.buffer);mn.set(bt,Pt);const Nn=We(Wt,nt,yt,Pt,bt.length);if(Nn===0&&_t&&_t(Wt,Ut,yt),At.set(mn.subarray(Wt,Wt+nt*yt)),Et(Wt-Et(0)),Nn!==0)throw new Error(`Malformed buffer data: ${Nn}`)})($,$.exports[de[ke]],fe,ae,ge,Be,$.exports[ie[Ye]])}}}(fetch(G9()));return P.ready.then(()=>{OL=P})}()),m)for(let P=0;P<m.length;P++)E.push(Mpe(m[P],p,P,u));return(E.length?Promise.all(E):Promise.resolve()).then(()=>{if(M&&w)for(const{primitives:P}of w)for(const R of P)Ppe(R,p);if(O&&w&&k)for(const P of k)kpe(P,p);return p})})}function Vv(h,o){const u=h.json.bufferViews[o.bufferView],p=G4[o.componentType];return new p(h.buffers[u.buffer],(o.byteOffset||0)+(u.byteOffset||0),o.count*(u.byteStride&&u.byteStride!==o2[o.type]*p.BYTES_PER_ELEMENT?u.byteStride/p.BYTES_PER_ELEMENT:o2[o.type]))}function UL(h,o,u,p){const _=G4[o.componentType],m=function(E){switch(E){case Int8Array:return 1/127;case Uint8Array:return 1/255;case Int16Array:return 1/32767;case Uint16Array:return 1/65535;default:return 1}}(_),w=h.json.bufferViews[o.bufferView],j=w.byteStride?w.byteStride/_.BYTES_PER_ELEMENT:o2[o.type],k=u.float32,H=k.length/u.capacity;for(let E=0,M=0;E<o.count*j;E+=j,M+=H)for(let O=0;O<H;O++)k[M+O]=p[E+O]*m;u._trim()}function Npe(h,o,u){const p=h.indices,_=h.attributes,m={};m.indexArray=new $a;const w=o.json.accessors[p],j=w.count/3;m.indexArray.reserve(j);const k=Vv(o,w);for(let O=0;O<j;O++)m.indexArray.emplaceBack(k[3*O],k[3*O+1],k[3*O+2]);m.indexArray._trim(),m.vertexArray=new Fc;const H=o.json.accessors[_.POSITION];m.vertexArray.reserve(H.count);const E=Vv(o,H);for(let O=0;O<H.count;O++)m.vertexArray.emplaceBack(E[3*O],E[3*O+1],E[3*O+2]);if(m.vertexArray._trim(),m.aabb=new $r(H.min,H.max),m.centroid=function(O,P){const R=[0,0,0],$=O.length;if($>0){for(let te=0;te<$;te++){const ie=3*O[te];R[0]+=P[ie],R[1]+=P[ie+1],R[2]+=P[ie+2]}R[0]/=$,R[1]/=$,R[2]/=$}return R}(k,E),_.COLOR_0!==void 0){const O=o.json.accessors[_.COLOR_0],P=o2[O.type],R=Vv(o,O);m.colorArray=P===3?new Fc:new ju,m.colorArray.resize(O.count),UL(o,O,m.colorArray,R)}if(_.NORMAL!==void 0){m.normalArray=new Fc;const O=o.json.accessors[_.NORMAL];m.normalArray.resize(O.count);const P=Vv(o,O);UL(o,O,m.normalArray,P)}if(_.TEXCOORD_0!==void 0&&u.length>0){m.texcoordArray=new Ga;const O=o.json.accessors[_.TEXCOORD_0];m.texcoordArray.resize(O.count);const P=Vv(o,O);UL(o,O,m.texcoordArray,P)}if(_._FEATURE_ID_RGBA4444!==void 0){const O=o.json.accessors[_._FEATURE_ID_RGBA4444];o.json.extensionsUsed&&o.json.extensionsUsed.includes("EXT_meshopt_compression")&&(m.featureData=Vv(o,O))}_._FEATURE_RGBA4444!==void 0&&(m.featureData=new Uint32Array(Vv(o,o.json.accessors[_._FEATURE_RGBA4444]).buffer));const M=h.material;return m.material=function(O,P){const{emissiveFactor:R=[0,0,0],alphaMode:$="OPAQUE",alphaCutoff:te=.5,normalTexture:ie,occlusionTexture:de,emissiveTexture:fe,doubleSided:ae}=O,{baseColorFactor:ge=[1,1,1,1],metallicFactor:Be=1,roughnessFactor:ke=1,baseColorTexture:Ye,metallicRoughnessTexture:Xe}=O.pbrMetallicRoughness||{},We=de?P[de.index]:void 0;if(de&&de.extensions&&de.extensions.KHR_texture_transform&&We){const At=de.extensions.KHR_texture_transform;We.offsetScale=[At.offset[0],At.offset[1],At.scale[0],At.scale[1]]}return{pbrMetallicRoughness:{baseColorFactor:new ji(...ge),metallicFactor:Be,roughnessFactor:ke,baseColorTexture:Ye?P[Ye.index]:void 0,metallicRoughnessTexture:Xe?P[Xe.index]:void 0},doubleSided:ae,emissiveFactor:R,alphaMode:$,alphaCutoff:te,normalTexture:ie?P[ie.index]:void 0,occlusionTexture:We,emissionTexture:fe?P[fe.index]:void 0,defined:O.defined===void 0}}(M!==void 0?o.json.materials[M]:{defined:!1},u),m}function J9(h,o,u){const{matrix:p,rotation:_,translation:m,scale:w,mesh:j,extras:k,children:H}=h,E={};if(E.matrix=p||Me.mat4.fromRotationTranslationScale([],_||[0,0,0,1],m||[0,0,0],w||[1,1,1]),j!==void 0){E.meshes=u[j];const M=E.anchor=[0,0];for(const O of E.meshes){const{min:P,max:R}=O.aabb;M[0]+=P[0]+R[0],M[1]+=P[1]+R[1]}M[0]=Math.floor(M[0]/E.meshes.length/2),M[1]=Math.floor(M[1]/E.meshes.length/2)}if(k&&(k.id&&(E.id=k.id),k.lights&&(E.lights=function(M){if(!M.length)return[];const O=function(ie){const de=atob(ie),fe=new Uint8Array(de.length);for(let ae=0;ae<de.length;ae++)fe[ae]=de.codePointAt(ae);return fe}(M),P=[],R=O.length/24,$=new Uint16Array(O.buffer),te=new Float32Array(O.buffer);for(let ie=0;ie<R;ie++){const de=$[2*ie*6]/30,fe=$[2*ie*6+1]/30,ae=$[2*ie*6+10]/100,ge=te[6*ie+1],Be=te[6*ie+2],ke=te[6*ie+3],Ye=te[6*ie+4],Xe=ke-ge,We=Ye-Be,At=Math.hypot(Xe,We);P.push({pos:[ge+.5*Xe,Be+.5*We,fe],normal:[We/At,-Xe/At,0],width:At,height:de,depth:ae,points:[ge,Be,ke,Ye]})}return P}(k.lights))),H){const M=[];for(const O of H)M.push(J9(o.json.nodes[O],o,u));E.children=M}return E}function Rpe(h){if(h.vertices.length===0||h.indices.length===0)return null;const o=new M0(h.vertices,h.indices,8,256),[u,p]=[o.min.clone(),o.max.clone()];return{vertices:h.vertices,indices:h.indices,grid:o,min:u,max:p}}function Ope(h){if(!h.extras||!h.extras.ground)return null;const o=h.extras.ground;if(!o||!Array.isArray(o)||o.length===0)return null;const u=o[0];if(!u||!Array.isArray(u)||u.length===0)return null;const p=[];for(const w of u){if(!Array.isArray(w)||w.length!==2)continue;const j=w[0],k=w[1];typeof j=="number"&&typeof k=="number"&&p.push(new Dt(j,k))}if(p.length<3)return null;p.length>1&&p[p.length-1].equals(p[0])&&p.pop();let _=0;for(let w=0;w<p.length;w++){const j=p[w],k=p[(w+1)%p.length],H=p[(w+2)%p.length];_+=(j.x-k.x)*(H.y-k.y)-(H.x-k.x)*(j.y-k.y)}_>0&&p.reverse();const m=vv(p.flatMap(w=>[w.x,w.y]),[]);return m.length===0?null:{vertices:p,indices:m}}function Dpe(h,o){const u=[],p=[];let _=0;const m=[];for(const w of h){_=u.length;const j=w.vertexArray.float32,k=w.indexArray.uint16;for(let H=0;H<w.vertexArray.length;H++)m[0]=j[3*H+0],m[1]=j[3*H+1],m[2]=j[3*H+2],Me.vec3.transformMat4(m,m,o),u.push(new Dt(m[0],m[1]));for(let H=0;H<3*w.indexArray.length;H++)p.push(k[H]+_)}if(p.length%3!=0)return null;for(let w=0;w<p.length;w+=3){const j=u[p[w+0]],k=u[p[w+1]],H=u[p[w+2]];(j.x-k.x)*(H.y-k.y)-(H.x-k.x)*(j.y-k.y)>0&&([p[w+1],p[w+2]]=[p[w+2],p[w+1]])}return{vertices:u,indices:p}}function eH(h){const o=function(k,H){const E=[],M=WebGL2RenderingContext;if(k.json.textures)for(const O of k.json.textures){const P={magFilter:M.LINEAR,minFilter:M.NEAREST,wrapS:M.REPEAT,wrapT:M.REPEAT};O.sampler!==void 0&&Object.assign(P,k.json.samplers[O.sampler]),E.push({image:H[O.source],sampler:P,uploaded:!1})}return E}(h,h.images),u=function(k,H){const E=[];for(const M of k.json.meshes){const O=[];for(const P of M.primitives)O.push(Npe(P,k,H));E.push(O)}return E}(h,o),{scenes:p,scene:_,nodes:m}=h.json,w=p?p[_||0].nodes:m,j=[];for(const k of w)j.push(J9(m[k],h,u));return function(k,H,E){const M={},O=new Set;for(let P=0;P<k.length;P++){const R=E[H[P]];if(!R.extras)continue;const $=R.extras["mapbox:footprint:version"],te=R.extras["mapbox:footprint:id"];($||te)&&O.add(P),$==="1.0.0"&&te&&(M[te]=P)}for(let P=0;P<k.length;P++){if(O.has(P))continue;const R=k[P],$=E[H[P]];if(!$.extras)continue;let te=null;R.id in M&&(te=Dpe(k[M[R.id]].meshes,R.matrix)),te||(te=Ope($)),te&&(R.footprint=Rpe(te))}if(O.size>0){const P=Array.from(O.values()).sort((R,$)=>R-$);for(let R=P.length-1;R>=0;R--)k.splice(P[R],1)}}(j,w,h.json.nodes),j}function Upe(h){h.heightmap=new Float32Array(4096),h.heightmap.fill(-1);const o=h.vertexArray.float32,u=h.aabb.min[0]-1,p=h.aabb.min[1]-1,_=zv/(h.aabb.max[0]-u+2),m=zv/(h.aabb.max[1]-p+2);for(let w=0;w<o.length;w+=3){const j=o[w+2],k=(o[w+0]-u)*_|0,H=(o[w+1]-p)*m|0;j>h.heightmap[H*zv+k]&&(h.heightmap[H*zv+k]=j)}}function zpe(h,o){const u={};u.indexArray=new $a,u.indexArray.reserve(4*h.length),u.vertexArray=new Fc,u.vertexArray.reserve(10*h.length),u.colorArray=new ju,u.vertexArray.reserve(10*h.length);let p=0;for(const w of h){const j=Math.min(10,Math.max(4,1.3*w.height))*o,k=[-w.normal[1],w.normal[0],0],H=Math.min(.29,.1*w.width/w.depth),E=w.width-2*w.depth*o*(H+.01),M=Me.vec3.scaleAndAdd([],w.pos,k,E/2),O=Me.vec3.scaleAndAdd([],w.pos,k,-E/2),P=[M[0],M[1],M[2]+w.height],R=[O[0],O[1],O[2]+w.height],$=Me.vec3.scaleAndAdd([],w.normal,k,H);Me.vec3.scale($,$,j);const te=Me.vec3.scaleAndAdd([],w.normal,k,-H);Me.vec3.scale(te,te,j),Me.vec3.add($,M,$),Me.vec3.add(te,O,te),M[2]+=.1,O[2]+=.1,u.vertexArray.emplaceBack($[0],$[1],$[2]),u.vertexArray.emplaceBack(te[0],te[1],te[2]),u.vertexArray.emplaceBack(M[0],M[1],M[2]),u.vertexArray.emplaceBack(O[0],O[1],O[2]),u.vertexArray.emplaceBack(P[0],P[1],P[2]),u.vertexArray.emplaceBack(R[0],R[1],R[2]),u.vertexArray.emplaceBack(M[0],M[1],M[2]),u.vertexArray.emplaceBack(O[0],O[1],O[2]),u.vertexArray.emplaceBack($[0],$[1],$[2]),u.vertexArray.emplaceBack(te[0],te[1],te[2]);const ie=E/j/2;u.colorArray.emplaceBack(-ie-H,-1,ie,.8),u.colorArray.emplaceBack(ie+H,-1,ie,.8),u.colorArray.emplaceBack(-ie,0,ie,1.3),u.colorArray.emplaceBack(ie,0,ie,1.3),u.colorArray.emplaceBack(ie+H,-.8,ie,.7),u.colorArray.emplaceBack(ie+H,-.8,ie,.7),u.colorArray.emplaceBack(0,0,ie,1.3),u.colorArray.emplaceBack(0,0,ie,1.3),u.colorArray.emplaceBack(ie+H,-1.2,ie,.8),u.colorArray.emplaceBack(ie+H,-1.2,ie,.8),u.indexArray.emplaceBack(6+p,4+p,8+p),u.indexArray.emplaceBack(7+p,9+p,5+p),u.indexArray.emplaceBack(0+p,1+p,2+p),u.indexArray.emplaceBack(1+p,3+p,2+p),p+=10}const _={defined:!0,emissiveFactor:[0,0,0]},m={};return m.baseColorFactor=ji.white,_.pbrMetallicRoughness=m,u.material=_,u.aabb=new $r([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),u}class tH{constructor(o){this._stringToNumber={},this._numberToString=[];for(let u=0;u<o.length;u++){const p=o[u];this._stringToNumber[p]=u,this._numberToString[u]=p}}encode(o){return this._stringToNumber[o]}decode(o){return this._numberToString[o]}}const Qpe=["id","tile","layer","source","sourceLayer","state"];class $_{constructor(o,u,p,_,m){this.type="Feature",this._vectorTileFeature=o,this._z=u,this._x=p,this._y=_,this.properties=o.properties,this.id=m}clone(){const o=new $_(this._vectorTileFeature,this._z,this._x,this._y,this.id);return this.state&&(o.state={...this.state}),this.layer&&(o.layer={...this.layer}),this.source&&(o.source=this.source),this.sourceLayer&&(o.sourceLayer=this.sourceLayer),o}get geometry(){return this._geometry===void 0&&(this._geometry=this._vectorTileFeature.toGeoJSON(this._x,this._y,this._z).geometry),this._geometry}set geometry(o){this._geometry=o}toJSON(){const o={type:"Feature",state:void 0,geometry:this.geometry,properties:this.properties};for(const u of Qpe)this[u]!==void 0&&(o[u]=this[u]);return o}}class nH{constructor(o,u){this.tileID=o,this.x=o.canonical.x,this.y=o.canonical.y,this.z=o.canonical.z,this.grid=new st(Wn,16,0),this.featureIndexArray=new dv,this.promoteId=u,this.is3DTile=!1,this.serializedLayersCache=new Map}insert(o,u,p,_,m,w=0,j=0){const k=this.featureIndexArray.length;this.featureIndexArray.emplaceBack(p,_,m,w);const H=this.grid;for(let E=0;E<u.length;E++){const M=u[E],O=[1/0,1/0,-1/0,-1/0];for(let P=0;P<M.length;P++){const R=M[P];O[0]=Math.min(O[0],R.x),O[1]=Math.min(O[1],R.y),O[2]=Math.max(O[2],R.x),O[3]=Math.max(O[3],R.y)}j!==0&&(O[0]-=j,O[1]-=j,O[2]+=j,O[3]+=j),O[0]<Wn&&O[1]<Wn&&O[2]>=0&&O[3]>=0&&H.insert(k,O[0],O[1],O[2],O[3])}}loadVTLayers(){if(!this.vtLayers){this.vtLayers=new ts.VectorTile(new B_(this.rawTileData)).layers,this.sourceLayerCoder=new tH(this.vtLayers?Object.keys(this.vtLayers).sort():["_geojsonTileLayer"]),this.vtFeatures={};for(const o in this.vtLayers)this.vtFeatures[o]=[]}return this.vtLayers}query(o,u){const{tilespaceGeometry:p,transform:_,tileTransform:m,pixelPosMatrix:w,availableImages:j}=u;this.loadVTLayers(),this.serializedLayersCache.clear();const k=p.bufferedTilespaceBounds,H=this.grid.query(k.min.x,k.min.y,k.max.x,k.max.y,(P,R,$,te)=>an(p.bufferedTilespaceGeometry,P,R,$,te));H.sort(Hpe);let E=null;_.elevation&&H.length>0&&(E=O_.create(_.elevation,this.tileID));const M={};let O;for(let P=0;P<H.length;P++){const R=H[P];if(R===O)continue;O=R;const $=this.featureIndexArray.get(R);let te=null;this.is3DTile?this.loadMatchingModelFeature(M,$,o,p,_):this.loadMatchingFeature(M,$,o,j,(ie,de,fe,ae=0)=>(te||(te=se(ie,this.tileID.canonical,m)),de.queryIntersectsFeature(p,ie,fe,te,this.z,_,w,E,ae)))}return M}loadMatchingFeature(o,u,p,_,m){const{featureIndex:w,bucketIndex:j,sourceLayerIndex:k,layoutVertexArrayOffset:H}=u,E=this.bucketLayerIDs[j],M=p.layers,O=Object.keys(M);if(O.length&&!function(ie,de){for(let fe=0;fe<ie.length;fe++)if(de.indexOf(ie[fe])>=0)return!0;return!1}(O,E))return;const P=p.sourceCache,R=this.sourceLayerCoder.decode(k),$=this.vtLayers[R].feature(w),te=this.getId($,R);for(let ie=0;ie<E.length;ie++){const de=E[ie];if(!M[de])continue;const{styleLayer:fe,targets:ae}=M[de];let ge={};te!==void 0&&(ge=P.getFeatureState(fe.sourceLayer,te));const Be=!m||m($,fe,ge,H);if(!Be)continue;const ke=new $_($,this.z,this.x,this.y,te);ke.tile=this.tileID.canonical,ke.state=ge;let Ye=this.serializedLayersCache.get(de);Ye||(Ye=fe.serialize(),Ye.id=de,this.serializedLayersCache.set(de,Ye)),ke.source=Ye.source,ke.sourceLayer=Ye["source-layer"],ke.layer=fn({},Ye),ke.layer.paint=rH(Ye.paint,fe.paint,$,ge,_),ke.layer.layout=rH(Ye.layout,fe.layout,$,ge,_);let Xe=!1;for(const We of ae){this.updateFeatureProperties(ke,We);const{filter:At}=We;if(At){if($.properties=ke.properties,At.needGeometry){const nt=ue($,!0);if(!At.filter(new qr(this.tileID.overscaledZ),nt,this.tileID.canonical))continue}else if(!At.filter(new qr(this.tileID.overscaledZ),$))continue}Xe=!0,We.targetId&&this.addFeatureVariant(ke,We)}Xe&&this.appendToResult(o,de,w,ke,Be)}}loadMatchingModelFeature(o,u,p,_,m){const w=this.bucketLayerIDs[0][0],j=p.layers;if(!j[w])return;const{styleLayer:k,targets:H}=j[w];if(k.type!=="model")return;const E=_.tile,M=u.featureIndex,O=E.getBucket(k);if(!(O&&O instanceof O4))return;const P=function(Ye,Xe,We,At){const nt=Ye.getNodesInfo()[Xe];if(nt.hiddenByReplacement||!nt.node.meshes)return;let yt=Number.MAX_VALUE;const bt=nt.node,_t=We.tile,Et=At.calculatePosMatrix(_t.tileID.toUnwrapped(),At.worldSize),Ut=nt.evaluatedScale;let Wt=0;At.elevation&&bt.elevation&&(Wt=bt.elevation*At.elevation.exaggeration()),Me.mat4.translate(Et,Et,[(bt.anchor?bt.anchor[0]:0)*(Ut[0]-1),(bt.anchor?bt.anchor[1]:0)*(Ut[1]-1),Wt]),Me.mat4.scale(Et,Et,Ut);const Pt=We.queryGeometry,mn=Pt.isPointQuery()?Pt.screenBounds:Pt.screenGeometry,Nn=function(qn){const Kn=Me.mat4.multiply([],Et,qn.matrix);Me.mat4.multiply(Kn,At.expandedFarZProjMatrix,Kn);for(let ir=0;ir<qn.meshes.length;++ir){const Bn=qn.meshes[ir];if(ir===qn.lightMeshIndex)continue;const Br=r9(mn,At,Kn,Bn.aabb);Br!=null&&(yt=Math.min(Br,yt))}if(qn.children)for(const ir of qn.children)Nn(ir)};if(Nn(bt),yt===Number.MAX_VALUE)return;const vn=new es(0,0);return A9(_t.tileID.canonical,vn,nt.node.anchor[0],nt.node.anchor[1]),{intersectionZ:yt,position:vn,feature:nt.feature}}(O,M,_,m);if(!P)return;const{z:R,x:$,y:te}=E.tileID.canonical,{feature:ie,intersectionZ:de,position:fe}=P;let ae={};ie.id!==void 0&&(ae=p.sourceCache.getFeatureState(k.sourceLayer,ie.id));const ge=new $_({},R,$,te,ie.id);ge.tile=this.tileID.canonical,ge.state=ae,ge.properties=ie.properties,ge.geometry={type:"Point",coordinates:[fe.lng,fe.lat]};let Be=this.serializedLayersCache.get(w);Be||(Be=k.serialize(),Be.id=w,this.serializedLayersCache.set(w,Be)),ge.source=Be.source,ge.sourceLayer=Be["source-layer"],ge.layer=fn({},Be);let ke=!1;for(const Ye of H){this.updateFeatureProperties(ge,Ye);const{filter:Xe}=Ye;if(Xe){if(ie.properties=ge.properties,Xe.needGeometry){if(!Xe.filter(new qr(this.tileID.overscaledZ),ie,this.tileID.canonical))continue}else if(!Xe.filter(new qr(this.tileID.overscaledZ),ie))continue}ke=!0,Ye.targetId&&this.addFeatureVariant(ge,Ye)}ke&&this.appendToResult(o,w,M,ge,de)}updateFeatureProperties(o,u,p){if(u.properties){const _={};for(const m in u.properties){const w=u.properties[m].evaluate({zoom:this.z},o._vectorTileFeature,o.state,o.tile,p);w!=null&&(_[m]=w)}o.properties=_}}addFeatureVariant(o,u,p){const _={target:u.target,namespace:u.namespace};u.properties&&(_.properties=o.properties),o.variants=o.variants||{},o.variants[u.targetId]=o.variants[u.targetId]||[],o.variants[u.targetId].push(_)}appendToResult(o,u,p,_,m){let w=o[u];w===void 0&&(w=o[u]=[]),w.push({featureIndex:p,feature:_,intersectionZ:m})}lookupSymbolFeatures(o,u,p,_,m){const w={};this.loadVTLayers();for(const j of o)this.loadMatchingFeature(w,{bucketIndex:u,sourceLayerIndex:p,featureIndex:j,layoutVertexArrayOffset:0},_,m);return w}loadFeature(o){const{featureIndex:u,sourceLayerIndex:p}=o;this.loadVTLayers();const _=this.sourceLayerCoder.decode(p),m=this.vtFeatures[_];if(m[u])return m[u];const w=this.vtLayers[_].feature(u);return m[u]=w,w}hasLayer(o){for(const u of this.bucketLayerIDs)for(const p of u)if(o===p)return!0;return!1}getId(o,u){let p=o.id;if(this.promoteId){const _=typeof this.promoteId=="string"?this.promoteId:this.promoteId[u];_!=null&&(p=o.properties[_]),typeof p=="boolean"&&(p=Number(p))}return p}}function rH(h,o,u,p,_){return _r(h,(m,w)=>{const j=o instanceof eo?o.get(w):null;return j&&j.evaluate?j.evaluate(u,p,_):j})}function Hpe(h,o){return o-h}He(nH,"FeatureIndex",{omit:["rawTileData","sourceLayerCoder"]});const iH=[Int8Array,Uint8Array,Uint8ClampedArray,Int16Array,Uint16Array,Int32Array,Uint32Array,Float32Array,Float64Array];class zL{static from(o){if(!(o instanceof ArrayBuffer))throw new Error("Data must be an instance of ArrayBuffer.");const[u,p]=new Uint8Array(o,0,2);if(u!==219)throw new Error("Data does not appear to be in a KDBush format.");const _=p>>4;if(_!==1)throw new Error(`Got v${_} data when expected v1.`);const m=iH[15&p];if(!m)throw new Error("Unrecognized array type.");const[w]=new Uint16Array(o,2,1),[j]=new Uint32Array(o,4,1);return new zL(j,w,m,o)}constructor(o,u=64,p=Float64Array,_){if(isNaN(o)||o<0)throw new Error(`Unpexpected numItems value: ${o}.`);this.numItems=+o,this.nodeSize=Math.min(Math.max(+u,2),65535),this.ArrayType=p,this.IndexArrayType=o<65536?Uint16Array:Uint32Array;const m=iH.indexOf(this.ArrayType),w=2*o*this.ArrayType.BYTES_PER_ELEMENT,j=o*this.IndexArrayType.BYTES_PER_ELEMENT,k=(8-j%8)%8;if(m<0)throw new Error(`Unexpected typed array class: ${p}.`);_&&_ instanceof ArrayBuffer?(this.data=_,this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+j+k,2*o),this._pos=2*o,this._finished=!0):(this.data=new ArrayBuffer(8+w+j+k),this.ids=new this.IndexArrayType(this.data,8,o),this.coords=new this.ArrayType(this.data,8+j+k,2*o),this._pos=0,this._finished=!1,new Uint8Array(this.data,0,2).set([219,16+m]),new Uint16Array(this.data,2,1)[0]=u,new Uint32Array(this.data,4,1)[0]=o)}add(o,u){const p=this._pos>>1;return this.ids[p]=p,this.coords[this._pos++]=o,this.coords[this._pos++]=u,p}finish(){const o=this._pos>>1;if(o!==this.numItems)throw new Error(`Added ${o} items when expected ${this.numItems}.`);return QL(this.ids,this.coords,this.nodeSize,0,this.numItems-1,0),this._finished=!0,this}range(o,u,p,_){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:m,coords:w,nodeSize:j}=this,k=[0,m.length-1,0],H=[];for(;k.length;){const E=k.pop()||0,M=k.pop()||0,O=k.pop()||0;if(M-O<=j){for(let te=O;te<=M;te++){const ie=w[2*te],de=w[2*te+1];ie>=o&&ie<=p&&de>=u&&de<=_&&H.push(m[te])}continue}const P=O+M>>1,R=w[2*P],$=w[2*P+1];R>=o&&R<=p&&$>=u&&$<=_&&H.push(m[P]),(E===0?o<=R:u<=$)&&(k.push(O),k.push(P-1),k.push(1-E)),(E===0?p>=R:_>=$)&&(k.push(P+1),k.push(M),k.push(1-E))}return H}within(o,u,p){if(!this._finished)throw new Error("Data not yet indexed - call index.finish().");const{ids:_,coords:m,nodeSize:w}=this,j=[0,_.length-1,0],k=[],H=p*p;for(;j.length;){const E=j.pop()||0,M=j.pop()||0,O=j.pop()||0;if(M-O<=w){for(let te=O;te<=M;te++)oH(m[2*te],m[2*te+1],o,u)<=H&&k.push(_[te]);continue}const P=O+M>>1,R=m[2*P],$=m[2*P+1];oH(R,$,o,u)<=H&&k.push(_[P]),(E===0?o-p<=R:u-p<=$)&&(j.push(O),j.push(P-1),j.push(1-E)),(E===0?o+p>=R:u+p>=$)&&(j.push(P+1),j.push(M),j.push(1-E))}return k}}function QL(h,o,u,p,_,m){if(_-p<=u)return;const w=p+_>>1;sH(h,o,w,p,_,m),QL(h,o,u,p,w-1,1-m),QL(h,o,u,w+1,_,1-m)}function sH(h,o,u,p,_,m){for(;_>p;){if(_-p>600){const H=_-p+1,E=u-p+1,M=Math.log(H),O=.5*Math.exp(2*M/3),P=.5*Math.sqrt(M*O*(H-O)/H)*(E-H/2<0?-1:1);sH(h,o,u,Math.max(p,Math.floor(u-E*O/H+P)),Math.min(_,Math.floor(u+(H-E)*O/H+P)),m)}const w=o[2*u+m];let j=p,k=_;for(a2(h,o,p,u),o[2*_+m]>w&&a2(h,o,p,_);j<k;){for(a2(h,o,j,k),j++,k--;o[2*j+m]<w;)j++;for(;o[2*k+m]>w;)k--}o[2*p+m]===w?a2(h,o,p,k):(k++,a2(h,o,k,_)),k<=u&&(p=k+1),u<=k&&(_=k-1)}}function a2(h,o,u,p){HL(h,u,p),HL(o,2*u,2*p),HL(o,2*u+1,2*p+1)}function HL(h,o,u){const p=h[o];h[o]=h[u],h[u]=p}function oH(h,o,u,p){const _=h-u,m=o-p;return _*_+m*m}i.$=gp,i.A=Yo,i.B=2,i.C=j_,i.D=D_,i.E=Ch,i.F=Rv,i.G=class extends N4{},i.H=ta,i.I=PL,i.J=op,i.K=Zd,i.L=tA,i.M=sc,i.N=fm,i.O=mp,i.P=Dt,i.Q=fo,i.R=Yl,i.S=G,i.T=yL,i.U=iA,i.V=N4,i.W=cl,i.X=As,i.Y=fs,i.Z=ga,i._=Xu,i.a=function(h){return ve.API_CDN_URL_REGEX.test(h)},i.a$=$_,i.a0=pm,i.a1=Ap,i.a2=function(h){const o=h.value;let u=[];if(!o)return u;const p=ta(o);return p!=="string"?(u=u.concat([new N4(h.key,o,`string expected, "${p}" found`)]),u):(s9(o,!0)||(u=u.concat([new N4(h.key,o,`invalid url "${o}"`)])),u)},i.a3=en,i.a4=bo,i.a5=ks,i.a6=Mn,i.a7=class{constructor(h){this.specification=h}possiblyEvaluate(h,o){return hs(h.expression.evaluate(o))}interpolate(h,o,u){return{x:Ur(h.x,o.x,u),y:Ur(h.y,o.y,u),z:Ur(h.z,o.z,u),azimuthal:Ur(h.azimuthal,o.azimuthal,u),polar:Ur(h.polar,o.polar,u)}}},i.a8=qr,i.a9=wf,i.aA=Mf,i.aB=class{constructor(h){this.entries={},this.scheduler=h}request(h,o,u,p){const _=this.entries[h]=this.entries[h]||{callbacks:[]};if(_.result){const[m,w]=_.result;return this.scheduler?this.scheduler.add(()=>{p(m,w)},o):p(m,w),()=>{}}return _.callbacks.push(p),_.cancel||(_.cancel=u((m,w)=>{_.result=[m,w];for(const j of _.callbacks)this.scheduler?this.scheduler.add(()=>{j(m,w)},o):j(m,w);setTimeout(()=>delete this.entries[h],3e3)})),()=>{_.result||(_.callbacks=_.callbacks.filter(m=>m!==p),_.callbacks.length||(_.cancel(),delete this.entries[h]))}}},i.aC=ja,i.aD=function(h,o,u){const p=JSON.stringify(h.request);return h.data&&(this.deduped.entries[p]={result:[null,h.data]}),this.deduped.request(p,{type:"parseTile",isSymbolTile:h.isSymbolTile,zoom:h.tileZoom},_=>{const m=Dc(h.request,(w,j,k,H)=>{w?_(w):j&&_(null,{vectorTile:u?void 0:new ts.VectorTile(new B_(j)),rawData:j,cacheControl:k,expires:H})});return()=>{m.cancel(),_()}},o)},i.aE=function(h){Vs++,Vs>pr&&(h.getActor().send("enforceCacheSizeLimit",Ar),Vs=0)},i.aF=function(h){return h<=1?1:Math.pow(2,Math.floor(Math.log(h)/Math.LN2))},i.aG=Yn,i.aH=GQ,i.aI=YQ,i.aJ=$Q,i.aK=function(h,o){const u=document.createElement("video");u.muted=!0,u.onloadstart=function(){o(null,u)};for(let p=0;p<h.length;p++){const _=document.createElement("source");of(h[p])||(u.crossOrigin="Anonymous"),_.src=h[p],u.appendChild(_)}return{cancel:()=>{}}},i.aL=F4,i.aM=function(h){return fetch(h).then(o=>o.arrayBuffer()).then(o=>Y9(o,0,h))},i.aN=eH,i.aO=class{constructor(h,o,u,p){this.id=h,this.position=o!=null?new es(o[0],o[1]):new es(0,0),this.orientation=u??[0,0,0],this.nodes=p,this.uploaded=!1,this.aabb=new $r([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),this.matrix=[]}_applyTransformations(h,o){if(Me.mat4.multiply(h.matrix,o,h.matrix),h.meshes)for(const u of h.meshes){const p=$r.applyTransformFast(u.aabb,h.matrix);this.aabb.encapsulate(p)}if(h.children)for(const u of h.children)this._applyTransformations(u,h.matrix)}computeBoundsAndApplyParent(){const h=Me.mat4.identity([]);for(const o of this.nodes)this._applyTransformations(o,h)}computeModelMatrix(h,o,u,p,_,m,w=!1){u9(this.matrix,this,h.transform,this.position,o,u,p,_,m,w)}upload(h){if(!this.uploaded){for(const o of this.nodes)bL(o,h);for(const o of this.nodes)R4(o);this.uploaded=!0}}destroy(){for(const h of this.nodes)CL(h)}},i.aP=Ln,i.aQ=I,i.aR=Ro,i.aS=Wa,i.aT=eh,i.aU=$a,i.aV=Yt,i.aW=uA,i.aX=I4,i.aY=function(){wo.isLoading()||wo.isLoaded()||Di()!=="deferred"||_a()},i.aZ=yg,i.a_=ue,i.aa=C,i.ab=Me,i.ac=Rn,i.ad=eo,i.ae=cc,i.af=Ur,i.ag=Wn,i.ah=sp,i.ai=Vt,i.aj=ji,i.ak=class{constructor(h){this.specification=h}possiblyEvaluate(h,o){return function([u,p]){const _=hs([1,u,p]);return{x:_.x,y:_.y,z:_.z}}(h.expression.evaluate(o))}interpolate(h,o,u){return{x:Ur(h.x,o.x,u),y:Ur(h.y,o.y,u),z:Ur(h.z,o.z,u)}}},i.al=function(h,o,u=0,p=!0){const _=new Dt(u,u),m=h.sub(_),w=o.add(_),j=[m,new Dt(w.x,m.y),w,new Dt(m.x,w.y)];return p&&j.push(m.clone()),j},i.am=function(h,o){const u=[];for(let p=0;p<h.length;p++){const _=wt(p-1,-1,h.length-1),m=wt(p+1,-1,h.length-1),w=h[p],j=h[m],k=h[_].sub(w).unit(),H=j.sub(w).unit(),E=H.angleWithSep(k.x,k.y),M=k.add(H).unit().mult(-1*o/Math.sin(E/2));u.push(w.add(M))}return u},i.an=D,i.ao=an,i.ap=function(h,o,u=0){return Me.vec3.fromValues(((o.x-u)*h.scale-h.x)*Wn,(o.y*h.scale-h.y)*Wn,Av(o.z,o.y))},i.aq=gi,i.ar=Mu,i.as=function(h){let o=1/0,u=1/0,p=-1/0,_=-1/0;for(const m of h)o=Math.min(o,m.x),u=Math.min(u,m.y),p=Math.max(p,m.x),_=Math.max(_,m.y);return{min:new Dt(o,u),max:new Dt(p,_)}},i.at=Sp,i.au=Bt,i.av=F,i.aw=Gt,i.ax=Cl,i.ay=function(h,o){const u={};for(let p=0;p<o.length;p++){const _=o[p];_ in h&&(u[_]=h[_])}return u},i.az=Lf,i.b=function(h){return ve.API_FONTS_REGEX.test(h)},i.b$=L4,i.b0=br,i.b1=kb,i.b2=x_,i.b3=se,i.b4=Iu,i.b5=hu,i.b6=di,i.b7=po,i.b8=vv,i.b9=AL,i.bA=Ya,i.bB=Wb,i.bC=w4,i.bD=$b,i.bE=zL,i.bF=wt,i.bG=Ir,i.bH=ua,i.bI=function(h,o,u){h[4*o+0]=u[0],h[4*o+1]=u[1],h[4*o+2]=u[2],h[4*o+3]=u[3]},i.bJ=Cg,i.bK=Fu,i.bL=bg,i.bM=Vo,i.bN=wp,i.bO=es,i.bP=fl,i.bQ=nr,i.bR=zi,i.bS=e9,i.bT=tr,i.bU=Ks,i.bV=function(h,o,u,p,_,m,w,j,k){if(k.name==="globe")return Ks(h,o,new tr(u,p,_),!1);const H=I({z:u,x:p,y:_},k);return new $r([(m+H.x/H.scale)*o,o*(H.y/H.scale),w],[(m+H.x2/H.scale)*o,o*(H.y2/H.scale),j])},i.bW=function(h,o,u){let p=0;for(let _=0;_<2;++_)h[_]>0&&(p+=(h[_]-0)*(h[_]-0)),o[_]<0&&(p+=(0-o[_])*(0-o[_]));return p},i.bX=$o,i.bY=bp,i.bZ=function(h){const o=Me.mat4.identity(new Float64Array(16));Me.mat4.multiply(o,h.pixelMatrix,h.globeMatrix);const u=[0,Vl,0],p=[0,dd,0];return Me.vec3.transformMat4(u,u,o),Me.vec3.transformMat4(p,p,o),[u[0]>0&&u[0]<=h.width&&u[1]>0&&u[1]<=h.height&&!sh(h,new es(h.center.lat,90)),p[0]>0&&p[0]<=h.width&&p[1]>0&&p[1]<=h.height&&!sh(h,new es(h.center.lat,-90))]},i.b_=function(h,o){const{scale:u}=h.tileTransform,p=u*Wn/(h.tileSize*Math.pow(2,o.zoom-h.tileID.overscaledZ+h.tileID.canonical.z));return Me.mat2.scale(new Float32Array(4),o.inverseAdjustmentMatrix,[p,p])},i.ba=function(h,o){const u=cc(o.zoom);if(u===0)return qa(h);const p=Ls(h),_=Gi(p),m=Sp(p.getWest())*o.worldSize,w=Sp(p.getEast())*o.worldSize,j=Mf(p.getNorth())*o.worldSize,k=Mf(p.getSouth())*o.worldSize,H=[m,j,0],E=[w,j,0],M=[m,k,0],O=[w,k,0],P=Me.mat4.invert([],o.globeMatrix);return Me.vec3.transformMat4(H,H,P),Me.vec3.transformMat4(E,E,P),Me.vec3.transformMat4(M,M,P),Me.vec3.transformMat4(O,O,P),_[0]=da(_[0],M,u),_[1]=da(_[1],O,u),_[2]=da(_[2],E,u),_[3]=da(_[3],H,u),$r.fromPoints(_)},i.bb=$l,i.bc=Oo,i.bd=da,i.be=Jd,i.bf=Xr,i.bg=NL,i.bh=B_,i.bi=Dc,i.bj=function(h){const o=[];for(const u in h)o.push(h[u]);return o},i.bk=function(h,o){const u=[];for(const p in h)p in o||u.push(p);return u},i.bl=qt,i.bm=["type","source","source-layer","minzoom","maxzoom","filter","layout"],i.bn=hn,i.bo=function(h,o){const{x:u,y:p}=h.point,_=Dh(u,p,h.worldSize/h._pixelsPerMercatorPixel,0,0);return Me.mat4.multiply(_,_,Pu(qa(o)))},i.bp=Mg,i.bq=oh,i.br=kv,i.bs=function(h,o,u,p,_){const m=5*o+2;h.float32[m+0]=u,h.float32[m+1]=p,h.float32[m+2]=_},i.bt=T4,i.bu=g4,i.bv=Le,i.bw=dc,i.bx=RE,i.by=i9,i.bz=ka,i.c=ze,i.c$=(h,o,u,p,_,m,w,j)=>{const k=h.transform,H=k.pitch<15?YE(.07,.7,Gt((14-k.zoom)/5,0,1)):.07,E=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none";return{u_matrix:e4(h,o,u,p),u_texsize:o.imageAtlasTexture?o.imageAtlasTexture.size:[0,0],u_pixels_to_tile_units:k.calculatePixelsToTileUnitsMatrix(o),u_device_pixel_ratio:_,u_width_scale:m,u_floor_width_scale:w,u_image:0,u_tile_units_to_pixels:JE(o,k),u_units_to_pixels:[1/k.pixelsToGLUnits[0],1/k.pixelsToGLUnits[1]],u_alpha_discard_threshold:0,u_trim_offset:j,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(E?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:H,u_tile_to_meter:x(o.tileID.canonical,0)}},i.c0=JQ,i.c1=function(h){const o=JQ(h,!0);return Me.mat2.invert([],[o[0],o[1],o[4],o[5]])},i.c2=to,i.c3=function(h){const{x:o,y:u}=h.point,{lng:p,lat:_}=h._center;return Dh(o,u,h.worldSize,p,_)},i.c4=$t,i.c5=hr,i.c6=bm,i.c7=function(h){const o=Math.round((h+45+360)%360/90)%4;return xn[o]},i.c8=45,i.c9=Tg,i.cA=class extends ih{constructor(h){super(h),this.current=d_}set(h,o,u){if(this.fetchUniformLocation(h,o)){for(let p=0;p<9;p++)if(u[p]!==this.current[p]){this.current=u,this.gl.uniformMatrix3fv(this.location,!1,u);break}}}},i.cB=Xt,i.cC=function(h,o,u){const p=cc(u.zoom),_=h.style.map._antialias,m=o.options.extStandardDerivativesForceOff||h.terrain&&h.terrain.exaggeration()>0;return p===0&&!_&&!m},i.cD=function(h){const o=h.pixelsPerMeter,u=o/ua(1,h.center.lat),p=Me.mat4.identity(new Float64Array(16));return Me.mat4.translate(p,p,[h.point.x,h.point.y,0]),Me.mat4.scale(p,p,[u,u,o]),Float32Array.from(p)},i.cE=Ls,i.cF=function(h){const o=$o-5;h=Gt(h,-o,o)/o*90;const u=Math.pow(Math.abs(Math.sin(Vt(h))),3);return Math.round(u*(Eg.length-1))},i.cG=function(h,o,u,p){const _=o.getNorth(),m=o.getSouth(),w=o.getWest(),j=o.getEast(),k=1<<h.z,H=j-w,E=_-m,M=H/Oh,O=-E/Eg[u],P=[0,M,0,O,0,0,_,w,0];if(h.z>0){const R=180/p;Me.mat3.multiply(P,P,[R/H+1,0,0,0,R/E+1,0,-.5*R/M,.5*R/O,1])}return P[2]=k,P[5]=h.x,P[8]=h.y,P},i.cH=qa,i.cI=function(h,o,u){const p=Me.mat4.identity(new Float64Array(16)),_=(o/(1<<h)-.5)*Math.PI*2;return Me.mat4.rotateY(p,u.globeMatrix,_),Float32Array.from(p)},i.cJ=class{isDataAvailableAtPoint(h){const o=this._source();if(this.isUsingMockSource()||!o||h.y<0||h.y>1)return!1;const u=o.getSource().maxzoom,p=1<<u,_=Math.floor(h.x),m=Math.floor((h.x-_)*p),w=Math.floor(h.y*p),j=this.findDEMTileFor(new Yn(u,_,u,m,w));return!(!j||!j.dem)}getAtPointOrZero(h,o=0){return this.getAtPoint(h,o)||0}getAtPoint(h,o,u=!0){if(this.isUsingMockSource())return null;o==null&&(o=null);const p=this._source();if(!p||h.y<0||h.y>1)return o;const _=p.getSource().maxzoom,m=1<<_,w=Math.floor(h.x),j=h.x-w,k=new Yn(_,w,_,Math.floor(j*m),Math.floor(h.y*m)),H=this.findDEMTileFor(k);if(!H||!H.dem)return o;const E=H.dem,M=1<<H.tileID.canonical.z,O=(j*M-H.tileID.canonical.x)*E.dim,P=(h.y*M-H.tileID.canonical.y)*E.dim,R=Math.floor(O),$=Math.floor(P);return(u?this.exaggeration():1)*Ur(Ur(E.get(R,$),E.get(R,$+1),P-$),Ur(E.get(R+1,$),E.get(R+1,$+1),P-$),O-R)}getAtTileOffset(h,o,u){const p=1<<h.canonical.z;return this.getAtPointOrZero(new C(h.wrap+(h.canonical.x+o/Wn)/p,(h.canonical.y+u/Wn)/p))}getAtTileOffsetFunc(h,o,u,p){return _=>{const m=this.getAtTileOffset(h,_.x,_.y),w=p.upVector(h.canonical,_.x,_.y),j=p.upVectorScale(h.canonical,o,u).metersToTile;return Me.vec3.scale(w,w,m*j),w}}getForTilePoints(h,o,u,p){if(this.isUsingMockSource())return!1;const _=O_.create(this,h,p);return!!_&&(o.forEach(m=>{m[2]=this.exaggeration()*_.getElevationAt(m[0],m[1],u)}),!0)}getMinMaxForTile(h){if(this.isUsingMockSource())return null;const o=this.findDEMTileFor(h);if(!o||!o.dem)return null;const u=o.dem.tree,p=o.tileID,_=1<<h.canonical.z-p.canonical.z;let m=h.canonical.x/_-p.canonical.x,w=h.canonical.y/_-p.canonical.y,j=0;for(let k=0;k<h.canonical.z-p.canonical.z&&!u.leaves[j];k++){m*=2,w*=2;const H=2*Math.floor(w)+Math.floor(m);j=u.childOffsets[j]+H,m%=1,w%=1}return{min:this.exaggeration()*u.minimums[j],max:this.exaggeration()*u.maximums[j]}}getMinElevationBelowMSL(){throw new Error("Pure virtual method called.")}raycast(h,o,u){throw new Error("Pure virtual method called.")}pointCoordinate(h){throw new Error("Pure virtual method called.")}_source(){throw new Error("Pure virtual method called.")}isUsingMockSource(){throw new Error("Pure virtual method called.")}exaggeration(){throw new Error("Pure virtual method called.")}findDEMTileFor(h){throw new Error("Pure virtual method called.")}get visibleDemTiles(){throw new Error("Getter must be implemented in subclass.")}getMinMaxForVisibleTiles(){const h=this.visibleDemTiles;if(h.length===0)return null;let o=!1,u=Number.MAX_VALUE,p=Number.MIN_VALUE;for(const _ of h){const m=this.getMinMaxForTile(_.tileID);m&&(u=Math.min(u,m.min),p=Math.max(p,m.max),o=!0)}return o?{min:u,max:p}:null}},i.cK=vE,i.cL=Xi,i.cM=function(h,o){return[Math.pow(h[0],2.2)*o,Math.pow(h[1],2.2)*o,Math.pow(h[2],2.2)*o]},i.cN=Nf,i.cO=De,i.cP=je,i.cQ=256,i.cR=function(h,o){const u=[0,0,0],p=$l(qa(o.canonical));return Me.vec3.transformMat4(u,u,p),Me.vec3.transformMat4(u,u,h),u},i.cS=h=>({u_camera_to_center_distance:new Vo(h),u_extrude_scale:new Sg(h),u_device_pixel_ratio:new Vo(h),u_matrix:new Cg(h),u_inv_rot_matrix:new Cg(h),u_merc_center:new Fu(h),u_tile_id:new bg(h),u_zoom_transition:new Vo(h),u_up_dir:new bg(h),u_emissive_strength:new Vo(h)}),i.cT=h=>({u_matrix:new Cg(h),u_pixels_to_tile_units:new Sg(h),u_device_pixel_ratio:new Vo(h),u_width_scale:new Vo(h),u_floor_width_scale:new Vo(h),u_units_to_pixels:new Fu(h),u_dash_image:new wp(h),u_gradient_image:new wp(h),u_image_height:new Vo(h),u_texsize:new Fu(h),u_tile_units_to_pixels:new Vo(h),u_alpha_discard_threshold:new Vo(h),u_trim_offset:new Fu(h),u_trim_fade_range:new Fu(h),u_trim_color:new hA(h),u_emissive_strength:new Vo(h),u_zbias_factor:new Vo(h),u_tile_to_meter:new Vo(h)}),i.cU=h=>({u_matrix:new Cg(h),u_texsize:new Fu(h),u_pixels_to_tile_units:new Sg(h),u_device_pixel_ratio:new Vo(h),u_width_scale:new Vo(h),u_floor_width_scale:new Vo(h),u_image:new wp(h),u_units_to_pixels:new Fu(h),u_tile_units_to_pixels:new Vo(h),u_alpha_discard_threshold:new Vo(h),u_trim_offset:new Fu(h),u_trim_fade_range:new Fu(h),u_trim_color:new hA(h),u_emissive_strength:new Vo(h),u_zbias_factor:new Vo(h),u_tile_to_meter:new Vo(h)}),i.cV=Ef,i.cW=Gk,i.cX=Kk,i.cY=k0,i.cZ=(h,o,u,p,_,m)=>{const w=h.transform,j=w.projection.name==="globe";let k;if(m.paint.get("circle-pitch-alignment")==="map")if(j){const E=Nf(w.zoom,o.canonical)*w._pixelsPerMercatorPixel;k=Float32Array.from([E,0,0,E])}else k=w.calculatePixelsToTileUnitsMatrix(u);else k=new Float32Array([w.pixelsToGLUnits[0],0,0,w.pixelsToGLUnits[1]]);const H={u_camera_to_center_distance:h.transform.getCameraToCenterDistance(w.projection),u_matrix:h.translatePosMatrix(o.projMatrix,u,m.paint.get("circle-translate"),m.paint.get("circle-translate-anchor")),u_device_pixel_ratio:_n.devicePixelRatio,u_extrude_scale:k,u_inv_rot_matrix:mv,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0],u_emissive_strength:m.paint.get("circle-emissive-strength")};if(j){H.u_inv_rot_matrix=p,H.u_merc_center=_,H.u_tile_id=[o.canonical.x,o.canonical.y,1<<o.canonical.z],H.u_zoom_transition=cc(w.zoom);const E=_[0]*Wn,M=_[1]*Wn;H.u_up_dir=w.projection.upVector(new tr(0,0,0),E,M)}return H},i.c_=Mb,i.ca=hA,i.cb=function(h,o,u){const p=Math.sqrt(h*h+o*o+u*u),_=p>0?Math.acos(u/p)*nn:0;let m=h!==0||o!==0?Math.atan2(-o,-h)*nn+90:0;return m<0&&(m+=360),[p,m,_]},i.cc=x,i.cd=$r,i.ce=hs,i.cf=function(h){return[Math.pow(h[0],1/2.2),Math.pow(h[1],1/2.2),Math.pow(h[2],1/2.2)]},i.cg=function(h,o){return h.readFields(Dfe,{icons:[]},o)},i.ch=function(h){return h({pluginStatus:rs,pluginURL:Oi}),Js.on("pluginStateChange",h),h},i.ci=D4,i.cj=R0,i.ck=Gb,i.cl=Jl,i.cm=Zi,i.cn=sr,i.co=qu,i.cp=xr,i.cq=function(h){const o=h.indexOf(Cf);return o>=0?h.slice(0,o):h},i.cr=function(h){return h.indexOf(Cf)>=0},i.cs=function(h){const o=h.indexOf(Cf);return o>=0?h.slice(o+1):""},i.ct=function(h){const o=[],u=h.id;return u===void 0&&o.push({message:`layers.${u}: missing required property "id"`}),h.render===void 0&&o.push({message:`layers.${u}: missing required method "render"`}),h.renderingMode&&h.renderingMode!=="2d"&&h.renderingMode!=="3d"&&o.push({message:`layers.${u}: property "renderingMode" must be either "2d" or "3d"`}),o},i.cu=function(h,o,u,p){return h.type==="custom"?new Sfe(h,o):new Nfe[h.type](h,o,u,p)},i.cv=fr,i.cw=class extends $_{constructor(h,o){super(h._vectorTileFeature,h._z,h._x,h._y,h.id),h.state&&(this.state={...h.state}),this.target=o.target,this.namespace=o.namespace,o.properties&&(this.properties=o.properties),this.target&&("featuresetId"in this.target&&!this.target.importId||"layerId"in this.target)&&(this.source=h.source,this.sourceLayer=h.sourceLayer,this.layer=h.layer)}toJSON(){const h=super.toJSON();return h.target=this.target,h.namespace=this.namespace,h}},i.cx=Js,i.cy=Os,i.cz=xm,i.d=function(h){return ve.API_TILEJSON_REGEX.test(h)},i.d$=_r,i.d0=(h,o,u,p,_,m,w,j,k)=>{const H=h.transform,E=H.calculatePixelsToTileUnitsMatrix(o),M=u.paint.get("line-trim-color-use-theme").constantOr("default")==="none",O=H.pitch<15?YE(.07,.7,Gt((14-H.zoom)/5,0,1)):.07;return{u_matrix:e4(h,o,u,p),u_pixels_to_tile_units:E,u_device_pixel_ratio:m,u_width_scale:w,u_floor_width_scale:j,u_units_to_pixels:[1/H.pixelsToGLUnits[0],1/H.pixelsToGLUnits[1]],u_dash_image:0,u_gradient_image:1,u_image_height:_,u_texsize:t4(u)&&o.lineAtlasTexture?o.lineAtlasTexture.size:[0,0],u_tile_units_to_pixels:JE(o,h.transform),u_alpha_discard_threshold:0,u_trim_offset:k,u_trim_fade_range:u.paint.get("line-trim-fade-range"),u_trim_color:u.paint.get("line-trim-color").toRenderColor(M?null:u.lut).toArray01(),u_emissive_strength:u.paint.get("line-emissive-strength"),u_zbias_factor:O,u_tile_to_meter:x(o.tileID.canonical,0)}},i.d1=cn,i.d2=yv,i.d3=$E,i.d4=Zr,i.d5=jv,i.d6=Uh,i.d7=450,i.d8=7,i.d9=Cfe,i.dA=rr,i.dB=d,i.dC=Cp,i.dD=function([h,o,u]){const p=Math.hypot(h,o,u),_=Math.atan2(h,u),m=.5*Math.PI-Math.acos(-o/p);return new es($t(_),$t(m))},i.dE=xL,i.dF=function(h){const o=h.navigator?h.navigator.userAgent:null;return!!function(u){if(gr==null){const p=u.navigator?u.navigator.userAgent:null;gr=!!u.safari||!(!p||!(/\b(iPad|iPhone|iPod)\b/.test(p)||p.match("Safari")&&!p.match("Chrome")))}return gr}(h)&&o&&(o.match("Version/15.4")||o.match("Version/15.5")||o.match(/CPU (OS|iPhone OS) (15_4|15_5) like Mac OS X/))},i.dG=function(h,o){Ar=h,pr=o},i.dH=sh,i.dI=ku,i.dJ=function(h){const o=[0,0,0],u=Me.mat4.identity(new Float64Array(16));return Me.mat4.multiply(u,h.pixelMatrix,h.globeMatrix),Me.vec3.transformMat4(o,o,u),new Dt(o[0],o[1])},i.dK=function(h,o,u=!1){if(rs===wr||rs===ei||rs===Nr)throw new Error("setRTLTextPlugin cannot be called multiple times.");Oi=_n.resolveURL(h),rs=wr,Ts=o,Us(),u||_a()},i.dL=Di,i.dM=function(){D4().acquire(BL)},i.dN=function(){const h=Jb;h&&(h.isPreloaded()&&h.numActive()===1?(h.release(BL),Jb=null):console.warn("Could not clear WebWorkers since there are active Map instances that still reference it. The pre-warmed WebWorker pool can only be cleared when all map instances have been removed with map.remove()"))},i.dO=Hv,i.dP=function(h){const o=Ai();if(!o)return;const u=o.delete(Cr);h&&u.catch(h).then(()=>h())},i.dQ=Yb,i.dR=$9,i.dS=function(h){RL=_n.resolveURL(h),V_||(V_=new D_(D4(),new Ch)),V_.broadcast("setDracoUrl",RL)},i.dT=G9,i.dU=function(h){H_=_n.resolveURL(h),V_||(V_=new D_(D4(),new Ch)),V_.broadcast("setMeshoptUrl",H_)},i.dV=He,i.dW=Cm,i.dX=zh,i.dY=tH,i.dZ=nH,i.d_=ZE,i.da=$i,i.db=lA,i.dc=256,i.dd=Pu,i.de=Fc,i.df=cd,i.dg=Nh,i.dh=function(h,o,u,p,_){return Gt((h-o)/(u-o)*(_-p)+p,p,_)},i.di=Qc,i.dj=l,i.dk=class{constructor(h,o,u,p){this.context=h,this.format=p,this.size=u,this.texture=h.gl.createTexture();const[_,m,w]=this.size,{gl:j}=h;j.bindTexture(j.TEXTURE_3D,this.texture),h.pixelStoreUnpackFlipY.set(!1),h.pixelStoreUnpack.set(1),h.pixelStoreUnpackPremultiplyAlpha.set(!1),j.texImage3D(j.TEXTURE_3D,0,this.format,_,m,w,0,mL(this.format),gL(this.format),o.data)}bind(h,o){const{context:u}=this,{gl:p}=u;p.bindTexture(p.TEXTURE_3D,this.texture),h!==this.minFilter&&(p.texParameteri(p.TEXTURE_3D,p.TEXTURE_MAG_FILTER,h),p.texParameteri(p.TEXTURE_3D,p.TEXTURE_MIN_FILTER,h),this.minFilter=h),o!==this.wrapS&&(p.texParameteri(p.TEXTURE_3D,p.TEXTURE_WRAP_S,o),p.texParameteri(p.TEXTURE_3D,p.TEXTURE_WRAP_T,o),this.wrapS=o)}destroy(){const{gl:h}=this.context;h.deleteTexture(this.texture),this.texture=null}},i.dl=_L,i.dm=[1,1,1],i.dn=O_,i.dp=R_,i.dq=th,i.dr=Ga,i.ds=Ka,i.dt=Tf,i.du=Rh,i.dv=class{constructor(){this._updateTime=0,this._sourceIds=[],this._activeRegions=[],this._prevRegions=[],this._globalClipBounds={min:new Dt(1/0,1/0),max:new Dt(-1/0,-1/0)}}clear(){this._activeRegions.length>0&&++this._updateTime,this._activeRegions=[],this._prevRegions=[]}get updateTime(){return this._updateTime}getReplacementRegionsForTile(h,o=!1){const u=DE(new Dt(0,0),new Dt(Wn,Wn),h),p=[];if(o&&!Cb(u,this._globalClipBounds))return p;for(const _ of this._activeRegions){if(_.hiddenByOverlap||!Cb(u,_))continue;const m=gA(_.min,_.max,h);p.push({min:m.min,max:m.max,sourceId:this._sourceIds[_.priority],footprint:_.footprint,footprintTileId:_.tileId,order:_.order,clipMask:_.clipMask,clipScope:_.clipScope})}return p}setSources(h){this._setSources(h.map(o=>({getSourceId:()=>o.cache.id,getFootprints:()=>{const u=[];for(const p of o.cache.getVisibleCoordinates()){const _=o.cache.getTile(p).buckets[o.layer];_&&_.updateFootprints(p.toUnwrapped(),u)}return u},getOrder:()=>o.order,getClipMask:()=>o.clipMask,getClipScope:()=>o.clipScope})))}_addSource(h){const o=h.getFootprints();if(o.length===0)return;const u=h.getOrder(),p=h.getClipMask(),_=h.getClipScope();for(const m of o){if(!m.footprint)continue;const w=DE(m.footprint.min,m.footprint.max,m.id);this._activeRegions.push({min:w.min,max:w.max,hiddenByOverlap:!1,priority:this._sourceIds.length,tileId:m.id,footprint:m.footprint,order:u,clipMask:p,clipScope:_})}this._sourceIds.push(h.getSourceId())}_computeReplacement(){this._activeRegions.sort((o,u)=>o.priority-u.priority||w_(o.min,u.min)||w_(o.max,u.max)||o.order-u.order||o.clipMask-u.clipMask||function(p,_){const m=(w,j)=>w+j;return p.length-_.length||p.reduce(m,"").localeCompare(_.reduce(m,""))}(o.clipScope,u.clipScope));let h=this._activeRegions.length!==this._prevRegions.length;if(!h){let o=0;for(;!h&&o!==this._activeRegions.length;){const u=this._activeRegions[o],p=this._prevRegions[o];h=u.priority!==p.priority||!OE(u,p)||u.order!==p.order||u.clipMask!==p.clipMask||!hn(u.clipScope,p.clipScope),++o}}if(h){++this._updateTime;for(const u of this._activeRegions)u.order!==__&&(this._globalClipBounds.min.x=Math.min(this._globalClipBounds.min.x,u.min.x),this._globalClipBounds.min.y=Math.min(this._globalClipBounds.min.y,u.min.y),this._globalClipBounds.max.x=Math.max(this._globalClipBounds.max.x,u.max.x),this._globalClipBounds.max.y=Math.max(this._globalClipBounds.max.y,u.max.y));const o=u=>{const p=this._activeRegions;if(u>=p.length)return u;const _=p[u].priority;for(;u<p.length&&p[u].priority===_;)++u;return u};if(this._sourceIds.length>1){let u=0,p=o(u);for(;u!==p;){let _=u;const m=u;for(;_!==p;){const w=this._activeRegions[_];w.hiddenByOverlap=!1;for(let j=0;j<m;j++){const k=this._activeRegions[j];if(!k.hiddenByOverlap&&w.order===__&&Cb(w,k)&&(w.hiddenByOverlap=Ev(w.footprint,w.tileId,k.footprint,k.tileId),w.hiddenByOverlap))break}++_}u=p,p=o(u)}}}}_setSources(h){[this._prevRegions,this._activeRegions]=[this._activeRegions,[]],this._sourceIds=[];for(let o=h.length-1;o>=0;o--)this._addSource(h[o]);this._computeReplacement()}},i.dw=class{constructor(h){this._createGrid(h),this._createPoles(h)}destroy(){this._poleIndexBuffer.destroy(),this._gridBuffer.destroy(),this._gridIndexBuffer.destroy(),this._poleNorthVertexBuffer.destroy(),this._poleSouthVertexBuffer.destroy();for(const h of this._poleSegments)h.destroy();for(const h of this._gridSegments)h.withSkirts.destroy(),h.withoutSkirts.destroy()}_fillGridMeshWithLods(h,o){const u=new Iu,p=new $a,_=[],m=h+1+2,w=o[0]+1,j=o[0]+1+(1+o.length),k=(H,E,M)=>{let O=H===m-1?H-2:H===0?H:H-1;return O+=M?24575:0,[O,E]};for(let H=0;H<m;++H)u.emplaceBack(...k(H,0,!0));for(let H=0;H<w;++H)for(let E=0;E<m;++E)u.emplaceBack(...k(E,H,(E===0||E===m-1)&&!0));for(let H=0;H<o.length;++H){const E=o[H];for(let M=0;M<m;++M)u.emplaceBack(...k(M,E,!0))}for(let H=0;H<o.length;++H){const E=p.length,M=o[H]+1+2,O=new $a;for(let $=0;$<M-1;$++){const te=$===M-2,ie=te?m*(j-o.length+H-$):m;for(let de=0;de<m-1;de++){const fe=$*m+de;$===0||te||de===0||de===m-2?(O.emplaceBack(fe+1,fe,fe+ie),O.emplaceBack(fe+ie,fe+ie+1,fe+1)):(p.emplaceBack(fe+1,fe,fe+ie),p.emplaceBack(fe+ie,fe+ie+1,fe+1))}}const P=po.simpleSegment(0,E,u.length,p.length-E);for(let $=0;$<O.uint16.length;$+=3)p.emplaceBack(O.uint16[$],O.uint16[$+1],O.uint16[$+2]);const R=po.simpleSegment(0,E,u.length,p.length-E);_.push({withoutSkirts:P,withSkirts:R})}return{vertices:u,indices:p,segments:_}}_createGrid(h){const o=this._fillGridMeshWithLods(Oh,Eg);this._gridSegments=o.segments,this._gridBuffer=h.createVertexBuffer(o.vertices,di.members),this._gridIndexBuffer=h.createIndexBuffer(o.indices,!0)}_createPoles(h){const o=new $a;for(let w=0;w<=Oh;w++)o.emplaceBack(0,w+1,w+2);this._poleIndexBuffer=h.createIndexBuffer(o,!0);const u=new cd,p=new cd,_=new cd,m=new cd;this._poleSegments=[];for(let w=0,j=0;w<bm;w++){const k=360/(1<<w);u.emplaceBack(0,-Cl,0,.5,0),p.emplaceBack(0,-Cl,0,.5,1),_.emplaceBack(0,-Cl,0,.5,.5),m.emplaceBack(0,-Cl,0,.5,.5);for(let H=0;H<=Oh;H++){let E=H/Oh,M=0;const O=Ur(0,k,E),[P,R,$]=kf(AA,Ig,O,Cl);u.emplaceBack(P,R,$,E,M),p.emplaceBack(P,R,$,E,1-M);const te=Vt(O);E=.5+.5*Math.sin(te),M=.5+.5*Math.cos(te),_.emplaceBack(P,R,$,E,M),m.emplaceBack(P,R,$,E,1-M)}this._poleSegments.push(po.simpleSegment(j,0,66,64)),j+=66}this._poleNorthVertexBuffer=h.createVertexBuffer(u,Fr,!1),this._poleSouthVertexBuffer=h.createVertexBuffer(p,Fr,!1),this._texturedPoleNorthVertexBuffer=h.createVertexBuffer(_,Fr,!1),this._texturedPoleSouthVertexBuffer=h.createVertexBuffer(m,Fr,!1)}getGridBuffers(h,o){return[this._gridBuffer,this._gridIndexBuffer,o?this._gridSegments[h].withSkirts:this._gridSegments[h].withoutSkirts]}getPoleBuffers(h,o){return[o?this._texturedPoleNorthVertexBuffer:this._poleNorthVertexBuffer,o?this._texturedPoleSouthVertexBuffer:this._poleSouthVertexBuffer,this._poleIndexBuffer,this._poleSegments[h]]}},i.dx=__,i.dy=gn,i.dz=function(){return!!document.fullscreenElement||!!document.webkitFullscreenElement},i.e=ve,i.e0=ma,i.e1=y4,i.e2=function(h,o,u,p,_,m,w,j,k,H,E=1,M,O){h.createArrays(),h.tilePixelRatio=Wn/(512*h.overscaling),h.compareText={},h.iconsNeedLinear=!1;const P=h.layers[0].layout,R=h.layers[0]._unevaluatedLayout._values,$={};$.scaleFactor=E,$.textSizeScaleRange=P.get("text-size-scale-range"),$.iconSizeScaleRange=P.get("icon-size-scale-range");const[te,ie]=$.textSizeScaleRange,[de,fe]=$.iconSizeScaleRange;if($.textScaleFactor=Gt($.scaleFactor,te,ie),$.iconScaleFactor=Gt($.scaleFactor,de,fe),h.textSizeData.kind==="composite"){const{minZoom:ke,maxZoom:Ye}=h.textSizeData;$.compositeTextSizes=[R["text-size"].possiblyEvaluate(new qr(ke),j),R["text-size"].possiblyEvaluate(new qr(Ye),j)]}if(h.iconSizeData.kind==="composite"){const{minZoom:ke,maxZoom:Ye}=h.iconSizeData;$.compositeIconSizes=[R["icon-size"].possiblyEvaluate(new qr(ke),j),R["icon-size"].possiblyEvaluate(new qr(Ye),j)]}$.layoutTextSize=R["text-size"].possiblyEvaluate(new qr(k+1),j),$.layoutIconSize=R["icon-size"].possiblyEvaluate(new qr(k+1),j),$.textMaxSize=R["text-size"].possiblyEvaluate(new qr(18),j);const ae=P.get("text-rotation-alignment")==="map"&&P.get("symbol-placement")!=="point",ge=P.get("text-size");let Be=!1;for(const ke of h.features)if(ke.icon&&ke.icon.nameSecondary){Be=!0;break}for(const ke of h.features){const Ye=P.get("text-font").evaluate(ke,{},j).join(","),Xe=ge.evaluate(ke,{},j)*$.textScaleFactor,We=$.layoutTextSize.evaluate(ke,{},j)*$.textScaleFactor,At=($.layoutIconSize.evaluate(ke,{},j),{horizontal:{},vertical:void 0}),nt=ke.text;let yt,bt=[0,0];if(nt){const Wt=nt.toString(),Pt=P.get("text-letter-spacing").evaluate(ke,{},j)*dc,mn=P.get("text-line-height").evaluate(ke,{},j)*dc,Nn=zn(Wt)?Pt:0,vn=P.get("text-anchor").evaluate(ke,{},j),qn=P.get("text-variable-anchor");if(!qn){const Zn=P.get("text-radial-offset").evaluate(ke,{},j);bt=Zn?w4(vn,[Zn*dc,Kb]):P.get("text-offset").evaluate(ke,{},j).map(vr=>vr*dc)}let Kn=ae?"center":P.get("text-justify").evaluate(ke,{},j);const ir=P.get("symbol-placement")==="point",Bn=ir?P.get("text-max-width").evaluate(ke,{},j)*dc:1/0,Br=Zn=>{h.allowVerticalPlacement&&er(Wt)&&(At.vertical=zb(nt,o,u,_,Ye,Bn,mn,vn,Zn,Nn,bt,oh.vertical,!0,We,Xe))};if(!ae&&qn){const Zn=Kn==="auto"?qn.map(Qr=>Wb(Qr)):[Kn];let vr=!1;for(let Qr=0;Qr<Zn.length;Qr++){const fi=Zn[Qr];if(!At.horizontal[fi])if(vr)At.horizontal[fi]=At.horizontal[0];else{const xi=zb(nt,o,u,_,Ye,Bn,mn,"center",fi,Nn,bt,oh.horizontal,!1,We,Xe);xi&&(At.horizontal[fi]=xi,vr=xi.positionedLines.length===1)}}Br("left")}else{if(Kn==="auto"&&(Kn=Wb(vn)),ir||P.get("text-writing-mode").indexOf("horizontal")>=0||!er(Wt)){const Zn=zb(nt,o,u,_,Ye,Bn,mn,vn,Kn,Nn,bt,oh.horizontal,!1,We,Xe);Zn&&(At.horizontal[Kn]=Zn)}Br(ir?"left":Kn)}}let _t=!1,Et=!1;if(ke.icon&&ke.icon.namePrimary){const Wt=S_(h.iconSizeData,R["icon-size"],j,h.zoom,ke)*$.iconScaleFactor*M,Pt=ke.icon.getPrimary().scaleSelf(Wt).serialize(),mn=p[Pt];mn&&(yt=nL(_[Pt],ke.icon.nameSecondary?_[ke.icon.getSecondary().scaleSelf(Wt).serialize()]:void 0,P.get("icon-offset").evaluate(ke,{},j),P.get("icon-anchor").evaluate(ke,{},j)),_t=mn.sdf,Et=mn.usvg,h.sdfIcons===void 0?h.sdfIcons=mn.sdf:h.sdfIcons!==mn.sdf&&Vn("Style sheet warning: Cannot mix SDF and non-SDF icons in one buffer"),(mn.pixelRatio!==h.pixelRatio||P.get("icon-rotate").constantOr(1)!==0)&&(h.iconsNeedLinear=!0))}const Ut=C4(At.horizontal)||At.vertical;h.iconsInText||(h.iconsInText=!!Ut&&Ut.iconsInText),(Ut||yt)&&cL(h,ke,At,yt,p,$,We,0,bt,_t,Et,w,j,H,O,Be)}m&&h.generateCollisionDebugBuffers(k,h.collisionBoxArray,$.textScaleFactor)},i.e3=ts,i.e4=$4,i.e5=pn,i.e6=Sm,i.e7=c4,i.e8=f,i.e9=function(h){let o=0;if(new Uint32Array(h,0,1)[0]!==W9){const u=new Uint32Array(h,0,7),[,,p,_,m,w]=u;o=u.byteLength+_+m+w+m,(p!==h.byteLength||o>=h.byteLength)&&Vn("Invalid b3dm header information.")}return Y9(h,o)},i.ea=function(h,o){const u=eH(h);for(const p of u){for(const _ of p.meshes)Upe(_);p.lights&&(p.lightMeshIndex=p.meshes.length,p.meshes.push(zpe(p.lights,o)))}return u},i.eb=O4,i.ec=m9,i.ed=wo,i.ee=function(h){Ci(),vi!=null&&vi.then(o=>{o.keys().then(u=>{for(let p=0;p<u.length-h;p++)o.delete(u[p])})})},i.f=function(h){return h.indexOf("mapbox:")===0},i.g=function(h,o){return Os(fn(h,{method:"GET"}),o)},i.h=Re,i.i=function(h){return ve.API_STYLE_REGEX.test(h)&&!ze(h)},i.j=function(h){return decodeURIComponent(atob(h).split("").map(o=>"%"+("00"+o.charCodeAt(0).toString(16)).slice(-2)).join(""))},i.k=function(h){return btoa(encodeURIComponent(h).replace(/%([0-9A-F]{2})/g,(o,u)=>String.fromCharCode(+("0x"+u))))},i.l=fn,i.m=Zo,i.n=function(h,o){return Os(fn(h,{type:"json"}),o)},i.o=vl,i.p=function(h,o){return Os(fn(h,{method:"POST"}),o)},i.q=_n,i.r=Pc,i.s=function(h){try{const o=self[h];return o.setItem("_mapbox_test_",1),o.removeItem("_mapbox_test_"),!0}catch{return!1}},i.t=rn,i.u=function(){return function h(o){return o?(o^Math.random()*(16>>o/4)).toString(16):([1e7]+-[1e3]+-4e3+-8e3+-1e11).replace(/[018]/g,h)}()},i.v=function(h){return!!h&&/^[0-9a-f]{8}-[0-9a-f]{4}-[4][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i.test(h)},i.w=Vn,i.x=function(){return EL||(EL=new Hv),EL},i.y=xl,i.z=su}),a(["./shared"],function(i){function f(Mt){const je=Mt?Mt.url.toString():void 0;return je?performance.getEntriesByName(je):[]}function g(Mt){if(typeof Mt=="number"||typeof Mt=="boolean"||typeof Mt=="string"||Mt==null)return JSON.stringify(Mt);if(Array.isArray(Mt)){let De="[";for(const ve of Mt)De+=`${g(ve)},`;return`${De}]`}let je="{";for(const De of Object.keys(Mt).sort())je+=`${De}:${g(Mt[De])},`;return`${je}}`}function y(Mt){let je="";for(const De of i.bm)je+=`/${g(Mt[De])}`;return je}class b{constructor(je){this.keyCache={},this._layers={},this._layerConfigs={},je&&this.replace(je)}replace(je,De){this._layerConfigs={},this._layers={},this.update(je,[],De)}update(je,De,ve){this._options=ve;for(const ze of je)this._layerConfigs[ze.id]=ze,(this._layers[ze.id]=i.cu(ze,this.scope,null,this._options)).compileFilter(ve),this.keyCache[ze.id]&&delete this.keyCache[ze.id];for(const ze of De)delete this.keyCache[ze],delete this._layerConfigs[ze],delete this._layers[ze];this.familiesBySource={};const Re=function(ze,tt){const gt={};for(let Lt=0;Lt<ze.length;Lt++){const jt=ze[Lt];let Nt=tt&&tt[jt.id];!Nt&&(Nt=y(jt),jt.type==="line"&&jt.paint)&&function _n(Pn){return typeof Pn=="string"&&Pn==="line-progress"||(Array.isArray(Pn)?Pn.some(_n):!(!Pn||typeof Pn!="object")&&Object.values(Pn).some(_n))}(jt.paint["line-width"])&&(Nt+=`/${g(jt.paint["line-width"])}`),tt&&(tt[jt.id]=Nt);let rn=gt[Nt];rn||(rn=gt[Nt]=[]),rn.push(jt)}const pt=[];for(const Lt in gt)pt.push(gt[Lt]);return pt}(i.bj(this._layerConfigs),this.keyCache);for(const ze of Re){const tt=ze.map(rn=>this._layers[rn.id]),gt=tt[0];if(gt.visibility==="none")continue;const pt=gt.source||"";let Lt=this.familiesBySource[pt];Lt||(Lt=this.familiesBySource[pt]={});const jt=gt.sourceLayer||"_geojsonTileLayer";let Nt=Lt[jt];Nt||(Nt=Lt[jt]=[]),Nt.push(tt)}}}const T=1*i.dX;class S{constructor(je){const De={},ve=[];for(const gt in je){const pt=je[gt],Lt=De[gt]={};for(const jt in pt.glyphs){const Nt=pt.glyphs[+jt];if(!Nt||Nt.bitmap.width===0||Nt.bitmap.height===0)continue;const rn=Nt.metrics.localGlyph?T:1,_n={x:0,y:0,w:Nt.bitmap.width+2*rn,h:Nt.bitmap.height+2*rn};ve.push(_n),Lt[jt]=_n}}const{w:Re,h:ze}=i.C(ve),tt=new i.dW({width:Re||1,height:ze||1});for(const gt in je){const pt=je[gt];for(const Lt in pt.glyphs){const jt=pt.glyphs[+Lt];if(!jt||jt.bitmap.width===0||jt.bitmap.height===0)continue;const Nt=De[gt][Lt],rn=jt.metrics.localGlyph?T:1;i.dW.copy(jt.bitmap,tt,{x:0,y:0},{x:Nt.x+rn,y:Nt.y+rn},jt.bitmap)}}this.image=tt,this.positions=De}}i.dV(S,"GlyphAtlas");class U{constructor(je){this.tileID=new i.aG(je.tileID.overscaledZ,je.tileID.wrap,je.tileID.canonical.z,je.tileID.canonical.x,je.tileID.canonical.y),this.tileZoom=je.tileZoom,this.uid=je.uid,this.zoom=je.zoom,this.lut=je.lut,this.canonical=je.tileID.canonical,this.pixelRatio=je.pixelRatio,this.tileSize=je.tileSize,this.source=je.source,this.scope=je.scope,this.overscaling=this.tileID.overscaleFactor(),this.showCollisionBoxes=je.showCollisionBoxes,this.collectResourceTiming=!!je.request&&je.request.collectResourceTiming,this.promoteId=je.promoteId,this.isSymbolTile=je.isSymbolTile,this.tileTransform=i.aQ(je.tileID.canonical,je.projection),this.projection=je.projection,this.worldview=je.worldview,this.localizableLayerIds=je.localizableLayerIds,this.brightness=je.brightness,this.extraShadowCaster=!!je.extraShadowCaster,this.tessellationStep=je.tessellationStep,this.scaleFactor=je.scaleFactor}parse(je,De,ve,Re,ze){this.status="parsing",this.data=je,this.collisionBoxArray=new i.aW;const tt=new i.dY(Object.keys(je.layers).sort()),gt=new i.dZ(this.tileID,this.promoteId);gt.bucketLayerIDs=[];const pt={},Lt=new i.d_(256,256),jt={featureIndex:gt,iconDependencies:{},patternDependencies:{},glyphDependencies:{},lineAtlas:Lt,availableImages:ve,brightness:this.brightness,scaleFactor:this.scaleFactor},Nt=De.familiesBySource[this.source];for(const pr in Nt){const Wr=je.layers[pr];if(!Wr)continue;let vi=!1,ti=!1,Ai=!1;for(const Zo of Nt[pr])Zo[0].type==="symbol"?vi=!0:ti=!0,Zo[0].is3D()&&Zo[0].type!=="model"&&(Ai=!0);if(this.extraShadowCaster&&!Ai||this.isSymbolTile===!0&&!vi||this.isSymbolTile===!1&&!ti)continue;Wr.version===1&&i.w(`Vector tile source "${this.source}" layer "${pr}" does not use vector tile spec v2 and therefore may have some rendering errors.`);const Ci=tt.encode(pr),Vs=[];for(let Zo=0,Rs=0;Zo<Wr.length;Zo++){const Eo=Wr.feature(Zo),Xl=gt.getId(Eo,pr);if(this.localizableLayerIds&&this.localizableLayerIds.has(pr)){const Li=Eo.properties?Eo.properties.worldview:null;if(this.worldview&&typeof Li=="string")if(Li==="all")Eo.properties.$localized=!0;else{if(!Li.split(",").includes(this.worldview))continue;Eo.properties.$localized=!0,Eo.properties.worldview=this.worldview}}Vs.push({feature:Eo,id:Xl,index:Rs,sourceLayerIndex:Ci}),Rs++}for(const Zo of Nt[pr]){const Rs=Zo[0];(!this.extraShadowCaster||Rs.is3D()&&Rs.type!=="model")&&(this.isSymbolTile!==void 0&&Rs.type==="symbol"!==this.isSymbolTile||Rs.minzoom&&this.zoom<Math.floor(Rs.minzoom)||Rs.maxzoom&&this.zoom>=Rs.maxzoom||Rs.visibility!=="none"&&(N(Zo,this.zoom,jt.brightness,ve),(pt[Rs.id]=Rs.createBucket({index:gt.bucketLayerIDs.length,layers:Zo,zoom:this.zoom,lut:this.lut,canonical:this.canonical,pixelRatio:this.pixelRatio,overscaling:this.overscaling,collisionBoxArray:this.collisionBoxArray,sourceLayerIndex:Ci,sourceID:this.source,projection:this.projection.spec,tessellationStep:this.tessellationStep})).populate(Vs,jt,this.tileID.canonical,this.tileTransform),gt.bucketLayerIDs.push(Zo.map(Eo=>i.aC(Eo.id,Eo.scope)))))}}let rn,_n,Pn,sr;Lt.trim();const Cr={type:"maybePrepare",isSymbolTile:this.isSymbolTile,zoom:this.zoom},Ar=()=>{if(rn)return this.status="done",ze(rn);if(this.extraShadowCaster)this.status="done",ze(null,{buckets:i.bj(pt).filter(pr=>!pr.isEmpty()),featureIndex:gt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:jt.brightness,glyphMap:null,iconMap:null,glyphPositions:null});else if(_n&&Pn&&sr){const pr=new S(_n),Wr=new i.e1(Pn,sr,this.lut);for(const vi in pt){const ti=pt[vi];ti instanceof i.aX?(N(ti.layers,this.zoom,jt.brightness,ve),i.e2(ti,_n,pr.positions,Pn,Wr.iconPositions,this.showCollisionBoxes,ve,this.tileID.canonical,this.tileZoom,this.projection,this.scaleFactor,this.pixelRatio,this.brightness)):ti.hasPattern&&(ti instanceof i.b1||ti instanceof i.b2||ti instanceof i.d5)&&(N(ti.layers,this.zoom,jt.brightness,ve),ti.addFeatures(jt,this.tileID.canonical,Wr.patternPositions,ve,this.tileTransform,this.brightness))}this.status="done",ze(null,{buckets:i.bj(pt).filter(vi=>!vi.isEmpty()),featureIndex:gt,collisionBoxArray:this.collisionBoxArray,glyphAtlasImage:pr.image,lineAtlas:Lt,imageAtlas:Wr,brightness:jt.brightness})}};if(!this.extraShadowCaster){const pr=i.d$(jt.glyphDependencies,ti=>Object.keys(ti).map(Number));Object.keys(pr).length?Re.send("getGlyphs",{uid:this.uid,stacks:pr,scope:this.scope},(ti,Ai)=>{rn||(rn=ti,_n=Ai,Ar())},void 0,!1,Cr):_n={};const Wr=Object.keys(jt.iconDependencies);Wr.length?Re.send("getImages",{icons:Wr,source:this.source,scope:this.scope,tileID:this.tileID,type:"icons"},(ti,Ai)=>{if(rn)return;rn=ti;const Ci={};Object.values(Ai).some(Vs=>Vs.usvg)?this.rasterize(Re,Ci,Ai,jt.iconDependencies,()=>{Pn=Ci,Ar()}):(this.fillImageMap(Ci,jt.iconDependencies,Ai),Pn=Ci,Ar())},void 0,!1,Cr):Pn={};const vi=Object.keys(jt.patternDependencies);vi.length?Re.send("getImages",{icons:vi,source:this.source,scope:this.scope,tileID:this.tileID,type:"patterns"},(ti,Ai)=>{if(!rn){rn=ti;const Ci={};Object.values(Ai).some(Vs=>Vs.usvg)?this.rasterize(Re,Ci,Ai,jt.patternDependencies,()=>{sr=Ci,Ar()}):(this.fillImageMap(Ci,jt.patternDependencies,Ai),sr=Ci,Ar())}},void 0,!1,Cr):sr={}}Ar()}fillImageMap(je,De,ve){for(const Re in ve){const ze=De[Re]||[];for(const tt of ze)ve[tt.id].usvg||(je[tt.serialize()]=ve[tt.id])}}getImageTaskQueue(je,De,ve){const Re={};for(const ze in De){const tt=ve[ze]||[];for(const gt of tt){const pt=gt.serialize();De[gt.id].usvg?Re[pt]||(Re[pt]=gt):je[pt]=De[gt.id]}}return Re}rasterize(je,De,ve,Re,ze){const tt=this.getImageTaskQueue(De,ve,Re);this.rasterizeTask=je.send("rasterizeImages",{scope:this.scope,imageTasks:tt},(gt,pt)=>{if(!gt)for(const Lt in pt){const{id:jt}=i.e0.deserializeFromString(Lt);De[Lt]={...ve[jt],data:pt[Lt]}}ze()})}cancelRasterize(){this.rasterizeTask&&this.rasterizeTask.cancel()}}function N(Mt,je,De,ve){const Re=new i.a8(je,{brightness:De});for(const ze of Mt)ze.recalculate(Re,ve)}class W extends i.E{constructor(je,De,ve,Re,ze,tt){super(),this.actor=je,this.layerIndex=De,this.availableImages=ve,this.loadVectorData=ze||i.aD,this.loading={},this.loaded={},this.deduped=new i.aB(je.scheduler),this.isSpriteLoaded=Re,this.scheduler=je.scheduler,this.brightness=tt}loadTile(je,De){const ve=je.uid,Re=je&&je.request,ze=Re&&Re.collectResourceTiming,tt=this.loading[ve]=new U(je);tt.abort=this.loadVectorData(je,(gt,pt)=>{const Lt=!this.loading[ve];if(delete this.loading[ve],tt.cancelRasterize(),Lt||gt||!pt)return tt.status="done",Lt||(this.loaded[ve]=tt),De(gt);const jt=pt.rawData,Nt={};pt.expires&&(Nt.expires=pt.expires),pt.cacheControl&&(Nt.cacheControl=pt.cacheControl),tt.vectorTile=pt.vectorTile||new i.e3.VectorTile(new i.bh(jt));const rn=()=>{tt.parse(tt.vectorTile,this.layerIndex,this.availableImages,this.actor,(_n,Pn)=>{if(_n||!Pn)return De(_n);const sr={};if(ze){const Cr=f(Re);Cr.length>0&&(sr.resourceTiming=JSON.parse(JSON.stringify(Cr)))}De(null,i.l({rawTileData:jt.slice(0)},Pn,Nt,sr))})};this.isSpriteLoaded?rn():this.once("isSpriteLoaded",()=>{this.scheduler?this.scheduler.add(rn,{type:"parseTile",isSymbolTile:je.isSymbolTile,zoom:je.tileZoom}):rn()}),this.loaded=this.loaded||{},this.loaded[ve]=tt})}reloadTile(je,De){const ve=this.loaded,Re=je.uid;if(ve&&ve[Re]){const ze=ve[Re];ze.scaleFactor=je.scaleFactor,ze.showCollisionBoxes=je.showCollisionBoxes,ze.projection=je.projection,ze.brightness=je.brightness,ze.tileTransform=i.aQ(je.tileID.canonical,je.projection),ze.extraShadowCaster=je.extraShadowCaster,ze.lut=je.lut;const tt=(gt,pt)=>{const Lt=ze.reloadCallback;Lt&&(delete ze.reloadCallback,ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,Lt)),De(gt,pt)};ze.status==="parsing"?ze.reloadCallback=tt:ze.status==="done"&&(ze.vectorTile?ze.parse(ze.vectorTile,this.layerIndex,this.availableImages,this.actor,tt):tt())}else De(null,void 0)}abortTile(je,De){const ve=je.uid,Re=this.loading[ve];Re&&(Re.abort&&Re.abort(),delete this.loading[ve]),De()}removeTile(je,De){const ve=this.loaded,Re=je.uid;ve&&ve[Re]&&delete ve[Re],De()}}class L{loadTile(je,De){const{uid:ve,encoding:Re,rawImageData:ze,padding:tt}=je,gt=ImageBitmap&&ze instanceof ImageBitmap?this.getImageData(ze,tt):ze;De(null,new i.e4(ve,gt,Re,tt<1))}getImageData(je,De){this.offscreenCanvas&&this.offscreenCanvasContext||(this.offscreenCanvas=new OffscreenCanvas(je.width,je.height),this.offscreenCanvasContext=this.offscreenCanvas.getContext("2d",{willReadFrequently:!0})),this.offscreenCanvas.width=je.width,this.offscreenCanvas.height=je.height,this.offscreenCanvasContext.drawImage(je,0,0,je.width,je.height);const ve=this.offscreenCanvasContext.getImageData(-De,-De,je.width+2*De,je.height+2*De);return this.offscreenCanvasContext.clearRect(0,0,this.offscreenCanvas.width,this.offscreenCanvas.height),ve}}i.bg.setPbf(i.bh);class Q{decodeRasterArray({task:je,buffer:De},ve){i.bg.performDecoding(De,je).then(Re=>{ve(null,Re)},Re=>{ve(Re)})}}const V=i.e3.VectorTileFeature.prototype.toGeoJSON;class Z{constructor(je){this._feature=je,this.extent=i.ag,this.type=je.type,this.properties=je.tags,"id"in je&&!isNaN(je.id)&&(this.id=parseInt(je.id,10))}loadGeometry(){if(this._feature.type===1){const je=[];for(const De of this._feature.geometry)je.push([new i.P(De[0],De[1])]);return je}{const je=[];for(const De of this._feature.geometry){const ve=[];for(const Re of De)ve.push(new i.P(Re[0],Re[1]));je.push(ve)}return je}}toGeoJSON(je,De,ve){return V.call(this,je,De,ve)}}class ne{constructor(je){this.layers={_geojsonTileLayer:this},this.name="_geojsonTileLayer",this.extent=i.ag,this.length=je.length,this._features=je}feature(je){return new Z(this._features[je])}}const Y=64/4096,le=128;class pe{constructor(){this.features=new Map}clear(){this.features.clear()}load(je=[],De){for(const ve of je){const Re=ve.id;if(Re==null)continue;let ze=this.features.get(Re);ze&&this.updateCache(ze,De),ve.geometry?(ze=ye(ve),this.updateCache(ze,De),this.features.set(Re,ze)):this.features.delete(Re),this.updateCache(ze,De)}}updateCache(je,De){for(const{canonical:ve,uid:Re}of Object.values(De)){const{z:ze,x:tt,y:gt}=ve;_e(je,Math.pow(2,ze),tt,gt)&&delete De[Re]}}getTile(je,De,ve){const Re=Math.pow(2,je),ze=[];for(const tt of this.features.values())_e(tt,Re,De,ve)&&ze.push(Ee(tt,Re,De,ve));return{features:ze}}getFeatures(){return[...this.features.values()]}}function _e({minX:Mt,minY:je,maxX:De,maxY:ve},Re,ze,tt){return Mt<(ze+1+Y)/Re&&je<(tt+1+Y)/Re&&De>(ze-Y)/Re&&ve>(tt-Y)/Re}function ye(Mt){const{id:je,geometry:De,properties:ve}=Mt;if(!De)return;if(De.type==="GeometryCollection")throw new Error("GeometryCollection not supported in dynamic mode.");const{type:Re,coordinates:ze}=De,tt={id:je,type:1,geometry:[],tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0},gt=tt.geometry;if(Re==="Point")he(ze,gt,tt);else if(Re==="MultiPoint")for(const pt of ze)he(pt,gt,tt);else if(Re==="LineString")tt.type=2,be(ze,gt,tt);else if(Re==="MultiLineString")tt.type=2,Te(ze,gt,tt);else if(Re==="Polygon")tt.type=3,Te(ze,gt,tt,!0);else{if(Re!=="MultiPolygon")throw new Error("Input data is not a valid GeoJSON object.");tt.type=3;for(const pt of ze)Te(pt,gt,tt,!0)}return tt}function he([Mt,je],De,ve){const Re=i.at(Mt);let ze=i.aA(je);ze=ze<0?0:ze>1?1:ze,De.push(Re,ze),ve.minX=Math.min(ve.minX,Re),ve.minY=Math.min(ve.minY,ze),ve.maxX=Math.max(ve.maxX,Re),ve.maxY=Math.max(ve.maxY,ze)}function be(Mt,je,De,ve=!1,Re=!1){const ze=[];for(const tt of Mt)he(tt,ze,De);je.push(ze),ve&&function(tt,gt){let pt=0;for(let Lt=0,jt=tt.length,Nt=jt-2;Lt<jt;Nt=Lt,Lt+=2)pt+=(tt[Lt]-tt[Nt])*(tt[Lt+1]+tt[Nt+1]);if(pt>0===gt)for(let Lt=0,jt=tt.length;Lt<jt/2;Lt+=2){const Nt=tt[Lt],rn=tt[Lt+1];tt[Lt]=tt[jt-2-Lt],tt[Lt+1]=tt[jt-1-Lt],tt[jt-2-Lt]=Nt,tt[jt-1-Lt]=rn}}(ze,Re)}function Te(Mt,je,De,ve=!1){for(let Re=0;Re<Mt.length;Re++)be(Mt[Re],je,De,ve,Re===0)}function Ee(Mt,je,De,ve){const{id:Re,type:ze,geometry:tt,tags:gt}=Mt,pt=[];if(ze===1)(function(Lt,jt,Nt,rn,_n){for(let Pn=0;Pn<Lt.length;Pn+=2){const sr=Math.round(i.ag*(Lt[Pn+0]*jt-Nt)),Cr=Math.round(i.ag*(Lt[Pn+1]*jt-rn));_n.push([sr,Cr])}})(tt,je,De,ve,pt);else for(const Lt of tt)Ne(Lt,je,De,ve,pt);return{id:Re,type:ze,geometry:pt,tags:gt}}function Ne(Mt,je,De,ve,Re){const ze=-le,tt=i.ag+le;let gt;for(let pt=0;pt<Mt.length-2;pt+=2){let Lt=Math.round(i.ag*(Mt[pt+0]*je-De)),jt=Math.round(i.ag*(Mt[pt+1]*je-ve)),Nt=Math.round(i.ag*(Mt[pt+2]*je-De)),rn=Math.round(i.ag*(Mt[pt+3]*je-ve));const _n=Nt-Lt,Pn=rn-jt;Lt<ze&&Nt<ze||(Lt<ze?(jt+=Math.round(Pn*((ze-Lt)/_n)),Lt=ze):Nt<ze&&(rn=jt+Math.round(Pn*((ze-Lt)/_n)),Nt=ze),jt<ze&&rn<ze||(jt<ze?(Lt+=Math.round(_n*((ze-jt)/Pn)),jt=ze):rn<ze&&(Nt=Lt+Math.round(_n*((ze-jt)/Pn)),rn=ze),Lt>=tt&&Nt>=tt||(Lt>=tt?(jt+=Math.round(Pn*((tt-Lt)/_n)),Lt=tt):Nt>=tt&&(rn=jt+Math.round(Pn*((tt-Lt)/_n)),Nt=tt),jt>=tt&&rn>=tt||(jt>=tt?(Lt+=Math.round(_n*((tt-jt)/Pn)),jt=tt):rn>=tt&&(Nt=Lt+Math.round(_n*((tt-jt)/Pn)),rn=tt),gt&&Lt===gt[gt.length-1][0]&&jt===gt[gt.length-1][1]||(gt=[[Lt,jt]],Re.push(gt)),gt.push([Nt,rn])))))}}var Ge,Je,Ue,Qe={exports:{}},xe=function(){if(Ue)return Qe.exports;Ue=1;var Mt=i.e7(),je=function(){if(Je)return Ge;Je=1;var jt=i.e5(),Nt=i.e6().VectorTileFeature;function rn(Pn,sr){this.options=sr||{},this.features=Pn,this.length=Pn.length}function _n(Pn,sr){this.id=typeof Pn.id=="number"?Pn.id:void 0,this.type=Pn.type,this.rawGeometry=Pn.type===1?[Pn.geometry]:Pn.geometry,this.properties=Pn.tags,this.extent=sr||4096}return Ge=rn,rn.prototype.feature=function(Pn){return new _n(this.features[Pn],this.options.extent)},_n.prototype.loadGeometry=function(){var Pn=this.rawGeometry;this.geometry=[];for(var sr=0;sr<Pn.length;sr++){for(var Cr=Pn[sr],Ar=[],pr=0;pr<Cr.length;pr++)Ar.push(new jt(Cr[pr][0],Cr[pr][1]));this.geometry.push(Ar)}return this.geometry},_n.prototype.bbox=function(){this.geometry||this.loadGeometry();for(var Pn=this.geometry,sr=1/0,Cr=-1/0,Ar=1/0,pr=-1/0,Wr=0;Wr<Pn.length;Wr++)for(var vi=Pn[Wr],ti=0;ti<vi.length;ti++){var Ai=vi[ti];sr=Math.min(sr,Ai.x),Cr=Math.max(Cr,Ai.x),Ar=Math.min(Ar,Ai.y),pr=Math.max(pr,Ai.y)}return[sr,Ar,Cr,pr]},_n.prototype.toGeoJSON=Nt.prototype.toGeoJSON,Ge}();function De(jt){var Nt=new Mt;return function(rn,_n){for(var Pn in rn.layers)_n.writeMessage(3,ve,rn.layers[Pn])}(jt,Nt),Nt.finish()}function ve(jt,Nt){var rn;Nt.writeVarintField(15,jt.version||1),Nt.writeStringField(1,jt.name||""),Nt.writeVarintField(5,jt.extent||4096);var _n={keys:[],values:[],keycache:{},valuecache:{}};for(rn=0;rn<jt.length;rn++)_n.feature=jt.feature(rn),Nt.writeMessage(2,Re,_n);var Pn=_n.keys;for(rn=0;rn<Pn.length;rn++)Nt.writeStringField(3,Pn[rn]);var sr=_n.values;for(rn=0;rn<sr.length;rn++)Nt.writeMessage(4,Lt,sr[rn])}function Re(jt,Nt){var rn=jt.feature;rn.id!==void 0&&Nt.writeVarintField(1,rn.id),Nt.writeMessage(2,ze,jt),Nt.writeVarintField(3,rn.type),Nt.writeMessage(4,pt,rn)}function ze(jt,Nt){var rn=jt.feature,_n=jt.keys,Pn=jt.values,sr=jt.keycache,Cr=jt.valuecache;for(var Ar in rn.properties){var pr=rn.properties[Ar],Wr=sr[Ar];if(pr!==null){Wr===void 0&&(_n.push(Ar),sr[Ar]=Wr=_n.length-1),Nt.writeVarint(Wr);var vi=typeof pr;vi!=="string"&&vi!=="boolean"&&vi!=="number"&&(pr=JSON.stringify(pr));var ti=vi+":"+pr,Ai=Cr[ti];Ai===void 0&&(Pn.push(pr),Cr[ti]=Ai=Pn.length-1),Nt.writeVarint(Ai)}}}function tt(jt,Nt){return(Nt<<3)+(7&jt)}function gt(jt){return jt<<1^jt>>31}function pt(jt,Nt){for(var rn=jt.loadGeometry(),_n=jt.type,Pn=0,sr=0,Cr=rn.length,Ar=0;Ar<Cr;Ar++){var pr=rn[Ar],Wr=1;_n===1&&(Wr=pr.length),Nt.writeVarint(tt(1,Wr));for(var vi=_n===3?pr.length-1:pr.length,ti=0;ti<vi;ti++){ti===1&&_n!==1&&Nt.writeVarint(tt(2,vi-1));var Ai=pr[ti].x-Pn,Ci=pr[ti].y-sr;Nt.writeVarint(gt(Ai)),Nt.writeVarint(gt(Ci)),Pn+=Ai,sr+=Ci}_n===3&&Nt.writeVarint(tt(7,1))}}function Lt(jt,Nt){var rn=typeof jt;rn==="string"?Nt.writeStringField(1,jt):rn==="boolean"?Nt.writeBooleanField(7,jt):rn==="number"&&(jt%1!=0?Nt.writeDoubleField(3,jt):jt<0?Nt.writeSVarintField(6,jt):Nt.writeVarintField(5,jt))}return Qe.exports=De,Qe.exports.fromVectorTileJs=De,Qe.exports.fromGeojsonVt=function(jt,Nt){Nt=Nt||{};var rn={};for(var _n in jt)rn[_n]=new je(jt[_n].features,Nt),rn[_n].name=_n,rn[_n].version=Nt.version,rn[_n].extent=Nt.extent;return De({layers:rn})},Qe.exports.GeoJSONWrapper=je,Qe.exports}(),at=i.e8(xe);const we={minZoom:0,maxZoom:16,minPoints:2,radius:40,extent:512,nodeSize:64,log:!1,generateId:!1,reduce:null,map:Mt=>Mt},me=Math.fround||(Ze=new Float32Array(1),Mt=>(Ze[0]=+Mt,Ze[0]));var Ze;const ot=3,vt=5,Qt=6;class Ot{constructor(je){this.options=Object.assign(Object.create(we),je),this.trees=new Array(this.options.maxZoom+1),this.stride=this.options.reduce?7:6,this.clusterProps=[]}load(je){const{log:De,minZoom:ve,maxZoom:Re}=this.options;De&&console.time("total time");const ze=`prepare ${je.length} points`;De&&console.time(ze),this.points=je;const tt=[];for(let pt=0;pt<je.length;pt++){const Lt=je[pt];if(!Lt.geometry)continue;const[jt,Nt]=Lt.geometry.coordinates,rn=me(Ht(jt)),_n=me(Zt(Nt));tt.push(rn,_n,1/0,pt,-1,1),this.options.reduce&&tt.push(0)}let gt=this.trees[Re+1]=this._createTree(tt);De&&console.timeEnd(ze);for(let pt=Re;pt>=ve;pt--){const Lt=+Date.now();gt=this.trees[pt]=this._createTree(this._cluster(gt,pt)),De&&console.log("z%d: %d clusters in %dms",pt,gt.numItems,+Date.now()-Lt)}return De&&console.timeEnd("total time"),this}getClusters(je,De){let ve=((je[0]+180)%360+360)%360-180;const Re=Math.max(-90,Math.min(90,je[1]));let ze=je[2]===180?180:((je[2]+180)%360+360)%360-180;const tt=Math.max(-90,Math.min(90,je[3]));if(je[2]-je[0]>=360)ve=-180,ze=180;else if(ve>ze){const Nt=this.getClusters([ve,Re,180,tt],De),rn=this.getClusters([-180,Re,ze,tt],De);return Nt.concat(rn)}const gt=this.trees[this._limitZoom(De)],pt=gt.range(Ht(ve),Zt(tt),Ht(ze),Zt(Re)),Lt=gt.data,jt=[];for(const Nt of pt){const rn=this.stride*Nt;jt.push(Lt[rn+vt]>1?kt(Lt,rn,this.clusterProps):this.points[Lt[rn+ot]])}return jt}getChildren(je){const De=this._getOriginId(je),ve=this._getOriginZoom(je),Re="No cluster with the specified id.",ze=this.trees[ve];if(!ze)throw new Error(Re);const tt=ze.data;if(De*this.stride>=tt.length)throw new Error(Re);const gt=this.options.radius/(this.options.extent*Math.pow(2,ve-1)),pt=ze.within(tt[De*this.stride],tt[De*this.stride+1],gt),Lt=[];for(const jt of pt){const Nt=jt*this.stride;tt[Nt+4]===je&&Lt.push(tt[Nt+vt]>1?kt(tt,Nt,this.clusterProps):this.points[tt[Nt+ot]])}if(Lt.length===0)throw new Error(Re);return Lt}getLeaves(je,De,ve){const Re=[];return this._appendLeaves(Re,je,De=De||10,ve=ve||0,0),Re}getTile(je,De,ve){const Re=this.trees[this._limitZoom(je)],ze=Math.pow(2,je),{extent:tt,radius:gt}=this.options,pt=gt/tt,Lt=(ve-pt)/ze,jt=(ve+1+pt)/ze,Nt={features:[]};return this._addTileFeatures(Re.range((De-pt)/ze,Lt,(De+1+pt)/ze,jt),Re.data,De,ve,ze,Nt),De===0&&this._addTileFeatures(Re.range(1-pt/ze,Lt,1,jt),Re.data,ze,ve,ze,Nt),De===ze-1&&this._addTileFeatures(Re.range(0,Lt,pt/ze,jt),Re.data,-1,ve,ze,Nt),Nt.features.length?Nt:null}getClusterExpansionZoom(je){let De=this._getOriginZoom(je)-1;for(;De<=this.options.maxZoom;){const ve=this.getChildren(je);if(De++,ve.length!==1)break;je=ve[0].properties.cluster_id}return De}_appendLeaves(je,De,ve,Re,ze){const tt=this.getChildren(De);for(const gt of tt){const pt=gt.properties;if(pt&&pt.cluster?ze+pt.point_count<=Re?ze+=pt.point_count:ze=this._appendLeaves(je,pt.cluster_id,ve,Re,ze):ze<Re?ze++:je.push(gt),je.length===ve)break}return ze}_createTree(je){const De=new i.bE(je.length/this.stride|0,this.options.nodeSize,Float32Array);for(let ve=0;ve<je.length;ve+=this.stride)De.add(je[ve],je[ve+1]);return De.finish(),De.data=je,De}_addTileFeatures(je,De,ve,Re,ze,tt){for(const gt of je){const pt=gt*this.stride,Lt=De[pt+vt]>1;let jt,Nt,rn;if(Lt)jt=Me(De,pt,this.clusterProps),Nt=De[pt],rn=De[pt+1];else{const sr=this.points[De[pt+ot]];jt=sr.properties;const[Cr,Ar]=sr.geometry.coordinates;Nt=Ht(Cr),rn=Zt(Ar)}const _n={type:1,geometry:[[Math.round(this.options.extent*(Nt*ze-ve)),Math.round(this.options.extent*(rn*ze-Re))]],tags:jt};let Pn;Pn=Lt||this.options.generateId?De[pt+ot]:this.points[De[pt+ot]].id,Pn!==void 0&&(_n.id=Pn),tt.features.push(_n)}}_limitZoom(je){return Math.max(this.options.minZoom,Math.min(Math.floor(+je),this.options.maxZoom+1))}_cluster(je,De){const{radius:ve,extent:Re,reduce:ze,minPoints:tt}=this.options,gt=ve/(Re*Math.pow(2,De)),pt=je.data,Lt=[],jt=this.stride;for(let Nt=0;Nt<pt.length;Nt+=jt){if(pt[Nt+2]<=De)continue;pt[Nt+2]=De;const rn=pt[Nt],_n=pt[Nt+1],Pn=je.within(pt[Nt],pt[Nt+1],gt),sr=pt[Nt+vt];let Cr=sr;for(const Ar of Pn){const pr=Ar*jt;pt[pr+2]>De&&(Cr+=pt[pr+vt])}if(Cr>sr&&Cr>=tt){let Ar,pr=rn*sr,Wr=_n*sr,vi=-1;const ti=(Nt/jt<<5)+(De+1)+this.points.length;for(const Ai of Pn){const Ci=Ai*jt;if(pt[Ci+2]<=De)continue;pt[Ci+2]=De;const Vs=pt[Ci+vt];pr+=pt[Ci]*Vs,Wr+=pt[Ci+1]*Vs,pt[Ci+4]=ti,ze&&(Ar||(Ar=this._map(pt,Nt,!0),vi=this.clusterProps.length,this.clusterProps.push(Ar)),ze(Ar,this._map(pt,Ci)))}pt[Nt+4]=ti,Lt.push(pr/Cr,Wr/Cr,1/0,ti,-1,Cr),ze&&Lt.push(vi)}else{for(let Ar=0;Ar<jt;Ar++)Lt.push(pt[Nt+Ar]);if(Cr>1)for(const Ar of Pn){const pr=Ar*jt;if(!(pt[pr+2]<=De)){pt[pr+2]=De;for(let Wr=0;Wr<jt;Wr++)Lt.push(pt[pr+Wr])}}}}return Lt}_getOriginId(je){return je-this.points.length>>5}_getOriginZoom(je){return(je-this.points.length)%32}_map(je,De,ve){if(je[De+vt]>1){const tt=this.clusterProps[je[De+Qt]];return ve?Object.assign({},tt):tt}const Re=this.points[je[De+ot]].properties,ze=this.options.map(Re);return ve&&ze===Re?Object.assign({},ze):ze}}function kt(Mt,je,De){return{type:"Feature",id:Mt[je+ot],properties:Me(Mt,je,De),geometry:{type:"Point",coordinates:[(ve=Mt[je],360*(ve-.5)),pn(Mt[je+1])]}};var ve}function Me(Mt,je,De){const ve=Mt[je+vt],Re=ve>=1e4?`${Math.round(ve/1e3)}k`:ve>=1e3?Math.round(ve/100)/10+"k":ve,ze=Mt[je+Qt],tt=ze===-1?{}:Object.assign({},De[ze]);return Object.assign(tt,{cluster:!0,cluster_id:Mt[je+ot],point_count:ve,point_count_abbreviated:Re})}function Ht(Mt){return Mt/360+.5}function Zt(Mt){const je=Math.sin(Mt*Math.PI/180),De=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return De<0?0:De>1?1:De}function pn(Mt){const je=(180-360*Mt)*Math.PI/180;return 360*Math.atan(Math.exp(je))/Math.PI-90}function Dt(Mt,je,De,ve){let Re=ve;const ze=je+(De-je>>1);let tt,gt=De-je;const pt=Mt[je],Lt=Mt[je+1],jt=Mt[De],Nt=Mt[De+1];for(let rn=je+3;rn<De;rn+=3){const _n=hn(Mt[rn],Mt[rn+1],pt,Lt,jt,Nt);if(_n>Re)tt=rn,Re=_n;else if(_n===Re){const Pn=Math.abs(rn-ze);Pn<gt&&(tt=rn,gt=Pn)}}Re>ve&&(tt-je>3&&Dt(Mt,je,tt,ve),Mt[tt+2]=Re,De-tt>3&&Dt(Mt,tt,De,ve))}function hn(Mt,je,De,ve,Re,ze){let tt=Re-De,gt=ze-ve;if(tt!==0||gt!==0){const pt=((Mt-De)*tt+(je-ve)*gt)/(tt*tt+gt*gt);pt>1?(De=Re,ve=ze):pt>0&&(De+=tt*pt,ve+=gt*pt)}return tt=Mt-De,gt=je-ve,tt*tt+gt*gt}function Oe(Mt,je,De,ve){const Re={id:Mt??null,type:je,geometry:De,tags:ve,minX:1/0,minY:1/0,maxX:-1/0,maxY:-1/0};if(je==="Point"||je==="MultiPoint"||je==="LineString")nn(Re,De);else if(je==="Polygon")nn(Re,De[0]);else if(je==="MultiLineString")for(const ze of De)nn(Re,ze);else if(je==="MultiPolygon")for(const ze of De)nn(Re,ze[0]);return Re}function nn(Mt,je){for(let De=0;De<je.length;De+=3)Mt.minX=Math.min(Mt.minX,je[De]),Mt.minY=Math.min(Mt.minY,je[De+1]),Mt.maxX=Math.max(Mt.maxX,je[De]),Mt.maxY=Math.max(Mt.maxY,je[De+1])}function Vt(Mt,je,De,ve){if(!je.geometry)return;const Re=je.geometry.coordinates;if(Re&&Re.length===0)return;const ze=je.geometry.type,tt=Math.pow(De.tolerance/((1<<De.maxZoom)*De.extent),2);let gt=[],pt=je.id;if(De.promoteId?pt=je.properties[De.promoteId]:De.generateId&&(pt=ve||0),ze==="Point")$t(Re,gt);else if(ze==="MultiPoint")for(const Lt of Re)$t(Lt,gt);else if(ze==="LineString")xn(Re,gt,tt,!1);else if(ze==="MultiLineString"){if(De.lineMetrics){for(const Lt of Re)gt=[],xn(Lt,gt,tt,!1),Mt.push(Oe(pt,"LineString",gt,je.properties));return}Xt(Re,gt,tt,!1)}else if(ze==="Polygon")Xt(Re,gt,tt,!0);else{if(ze!=="MultiPolygon"){if(ze==="GeometryCollection"){for(const Lt of je.geometry.geometries)Vt(Mt,{id:pt,geometry:Lt,properties:je.properties},De,ve);return}throw new Error("Input data is not a valid GeoJSON object.")}for(const Lt of Re){const jt=[];Xt(Lt,jt,tt,!0),gt.push(jt)}}Mt.push(Oe(pt,ze,gt,je.properties))}function $t(Mt,je){je.push(gn(Mt[0]),rr(Mt[1]),0)}function xn(Mt,je,De,ve){let Re,ze,tt=0;for(let pt=0;pt<Mt.length;pt++){const Lt=gn(Mt[pt][0]),jt=rr(Mt[pt][1]);je.push(Lt,jt,0),pt>0&&(tt+=ve?(Re*jt-Lt*ze)/2:Math.sqrt(Math.pow(Lt-Re,2)+Math.pow(jt-ze,2))),Re=Lt,ze=jt}const gt=je.length-3;je[2]=1,Dt(je,0,gt,De),je[gt+2]=1,je.size=Math.abs(tt),je.start=0,je.end=je.size}function Xt(Mt,je,De,ve){for(let Re=0;Re<Mt.length;Re++){const ze=[];xn(Mt[Re],ze,De,ve),je.push(ze)}}function gn(Mt){return Mt/360+.5}function rr(Mt){const je=Math.sin(Mt*Math.PI/180),De=.5-.25*Math.log((1+je)/(1-je))/Math.PI;return De<0?0:De>1?1:De}function Gt(Mt,je,De,ve,Re,ze,tt,gt){if(ve/=je,ze>=(De/=je)&&tt<ve)return Mt;if(tt<De||ze>=ve)return null;const pt=[];for(const Lt of Mt){const jt=Lt.geometry;let Nt=Lt.type;const rn=Re===0?Lt.minX:Lt.minY,_n=Re===0?Lt.maxX:Lt.maxY;if(rn>=De&&_n<ve){pt.push(Lt);continue}if(_n<De||rn>=ve)continue;let Pn=[];if(Nt==="Point"||Nt==="MultiPoint")Rn(jt,Pn,De,ve,Re);else if(Nt==="LineString")wt(jt,Pn,De,ve,Re,!1,gt.lineMetrics);else if(Nt==="MultiLineString")fn(jt,Pn,De,ve,Re,!1);else if(Nt==="Polygon")fn(jt,Pn,De,ve,Re,!0);else if(Nt==="MultiPolygon")for(const sr of jt){const Cr=[];fn(sr,Cr,De,ve,Re,!0),Cr.length&&Pn.push(Cr)}if(Pn.length){if(gt.lineMetrics&&Nt==="LineString"){for(const sr of Pn)pt.push(Oe(Lt.id,Nt,sr,Lt.tags));continue}Nt!=="LineString"&&Nt!=="MultiLineString"||(Pn.length===1?(Nt="LineString",Pn=Pn[0]):Nt="MultiLineString"),Nt!=="Point"&&Nt!=="MultiPoint"||(Nt=Pn.length===3?"Point":"MultiPoint"),pt.push(Oe(Lt.id,Nt,Pn,Lt.tags))}}return pt.length?pt:null}function Rn(Mt,je,De,ve,Re){for(let ze=0;ze<Mt.length;ze+=3){const tt=Mt[ze+Re];tt>=De&&tt<=ve&&Un(je,Mt[ze],Mt[ze+1],Mt[ze+2])}}function wt(Mt,je,De,ve,Re,ze,tt){let gt=qt(Mt);const pt=Re===0?Yt:cn;let Lt,jt,Nt=Mt.start;for(let Cr=0;Cr<Mt.length-3;Cr+=3){const Ar=Mt[Cr],pr=Mt[Cr+1],Wr=Mt[Cr+2],vi=Mt[Cr+3],ti=Mt[Cr+4],Ai=Re===0?Ar:pr,Ci=Re===0?vi:ti;let Vs=!1;tt&&(Lt=Math.sqrt(Math.pow(Ar-vi,2)+Math.pow(pr-ti,2))),Ai<De?Ci>De&&(jt=pt(gt,Ar,pr,vi,ti,De),tt&&(gt.start=Nt+Lt*jt)):Ai>ve?Ci<ve&&(jt=pt(gt,Ar,pr,vi,ti,ve),tt&&(gt.start=Nt+Lt*jt)):Un(gt,Ar,pr,Wr),Ci<De&&Ai>=De&&(jt=pt(gt,Ar,pr,vi,ti,De),Vs=!0),Ci>ve&&Ai<=ve&&(jt=pt(gt,Ar,pr,vi,ti,ve),Vs=!0),!ze&&Vs&&(tt&&(gt.end=Nt+Lt*jt),je.push(gt),gt=qt(Mt)),tt&&(Nt+=Lt)}let rn=Mt.length-3;const _n=Mt[rn],Pn=Mt[rn+1],sr=Re===0?_n:Pn;sr>=De&&sr<=ve&&Un(gt,_n,Pn,Mt[rn+2]),rn=gt.length-3,ze&&rn>=3&&(gt[rn]!==gt[0]||gt[rn+1]!==gt[1])&&Un(gt,gt[0],gt[1],gt[2]),gt.length&&je.push(gt)}function qt(Mt){const je=[];return je.size=Mt.size,je.start=Mt.start,je.end=Mt.end,je}function fn(Mt,je,De,ve,Re,ze){for(const tt of Mt)wt(tt,je,De,ve,Re,ze,!1)}function Un(Mt,je,De,ve){Mt.push(je,De,ve)}function Yt(Mt,je,De,ve,Re,ze){const tt=(ze-je)/(ve-je);return Un(Mt,ze,De+(Re-De)*tt,1),tt}function cn(Mt,je,De,ve,Re,ze){const tt=(ze-De)/(Re-De);return Un(Mt,je+(ve-je)*tt,ze,1),tt}function Ln(Mt,je){const De=[];for(let ve=0;ve<Mt.length;ve++){const Re=Mt[ve],ze=Re.type;let tt;if(ze==="Point"||ze==="MultiPoint"||ze==="LineString")tt=Hn(Re.geometry,je);else if(ze==="MultiLineString"||ze==="Polygon"){tt=[];for(const gt of Re.geometry)tt.push(Hn(gt,je))}else if(ze==="MultiPolygon"){tt=[];for(const gt of Re.geometry){const pt=[];for(const Lt of gt)pt.push(Hn(Lt,je));tt.push(pt)}}De.push(Oe(Re.id,ze,tt,Re.tags))}return De}function Hn(Mt,je){const De=[];De.size=Mt.size,Mt.start!==void 0&&(De.start=Mt.start,De.end=Mt.end);for(let ve=0;ve<Mt.length;ve+=3)De.push(Mt[ve]+je,Mt[ve+1],Mt[ve+2]);return De}function _r(Mt,je){if(Mt.transformed)return Mt;const De=1<<Mt.z,ve=Mt.x,Re=Mt.y;for(const ze of Mt.features){const tt=ze.geometry,gt=ze.type;if(ze.geometry=[],gt===1)for(let pt=0;pt<tt.length;pt+=2)ze.geometry.push(fr(tt[pt],tt[pt+1],je,De,ve,Re));else for(let pt=0;pt<tt.length;pt++){const Lt=[];for(let jt=0;jt<tt[pt].length;jt+=2)Lt.push(fr(tt[pt][jt],tt[pt][jt+1],je,De,ve,Re));ze.geometry.push(Lt)}}return Mt.transformed=!0,Mt}function fr(Mt,je,De,ve,Re,ze){return[Math.round(De*(Mt*ve-Re)),Math.round(De*(je*ve-ze))]}function xr(Mt,je,De,ve,Re){const ze=je===Re.maxZoom?0:Re.tolerance/((1<<je)*Re.extent),tt={features:[],numPoints:0,numSimplified:0,numFeatures:Mt.length,source:null,x:De,y:ve,z:je,transformed:!1,minX:2,minY:1,maxX:-1,maxY:0};for(const gt of Mt)bi(tt,gt,ze,Re);return tt}function bi(Mt,je,De,ve){const Re=je.geometry,ze=je.type,tt=[];if(Mt.minX=Math.min(Mt.minX,je.minX),Mt.minY=Math.min(Mt.minY,je.minY),Mt.maxX=Math.max(Mt.maxX,je.maxX),Mt.maxY=Math.max(Mt.maxY,je.maxY),ze==="Point"||ze==="MultiPoint")for(let gt=0;gt<Re.length;gt+=3)tt.push(Re[gt],Re[gt+1]),Mt.numPoints++,Mt.numSimplified++;else if(ze==="LineString")Vn(tt,Re,Mt,De,!1,!1);else if(ze==="MultiLineString"||ze==="Polygon")for(let gt=0;gt<Re.length;gt++)Vn(tt,Re[gt],Mt,De,ze==="Polygon",gt===0);else if(ze==="MultiPolygon")for(let gt=0;gt<Re.length;gt++){const pt=Re[gt];for(let Lt=0;Lt<pt.length;Lt++)Vn(tt,pt[Lt],Mt,De,!0,Lt===0)}if(tt.length){let gt=je.tags||null;if(ze==="LineString"&&ve.lineMetrics){gt={};for(const Lt in je.tags)gt[Lt]=je.tags[Lt];gt.mapbox_clip_start=Re.start/Re.size,gt.mapbox_clip_end=Re.end/Re.size}const pt={geometry:tt,type:ze==="Polygon"||ze==="MultiPolygon"?3:ze==="LineString"||ze==="MultiLineString"?2:1,tags:gt};je.id!==null&&(pt.id=je.id),Mt.features.push(pt)}}function Vn(Mt,je,De,ve,Re,ze){const tt=ve*ve;if(ve>0&&je.size<(Re?tt:ve))return void(De.numPoints+=je.length/3);const gt=[];for(let pt=0;pt<je.length;pt+=3)(ve===0||je[pt+2]>tt)&&(De.numSimplified++,gt.push(je[pt],je[pt+1])),De.numPoints++;Re&&function(pt,Lt){let jt=0;for(let Nt=0,rn=pt.length,_n=rn-2;Nt<rn;_n=Nt,Nt+=2)jt+=(pt[Nt]-pt[_n])*(pt[Nt+1]+pt[_n+1]);if(jt>0===Lt)for(let Nt=0,rn=pt.length;Nt<rn/2;Nt+=2){const _n=pt[Nt],Pn=pt[Nt+1];pt[Nt]=pt[rn-2-Nt],pt[Nt+1]=pt[rn-1-Nt],pt[rn-2-Nt]=_n,pt[rn-1-Nt]=Pn}}(gt,ze),Mt.push(gt)}const Es={maxZoom:14,indexMaxZoom:5,indexMaxPoints:1e5,tolerance:3,extent:4096,buffer:64,lineMetrics:!1,promoteId:null,generateId:!1,debug:0};class ki{constructor(je,De){const ve=(De=this.options=function(ze,tt){for(const gt in tt)ze[gt]=tt[gt];return ze}(Object.create(Es),De)).debug;if(ve&&console.time("preprocess data"),De.maxZoom<0||De.maxZoom>24)throw new Error("maxZoom should be in the 0-24 range");if(De.promoteId&&De.generateId)throw new Error("promoteId and generateId cannot be used together.");let Re=function(ze,tt){const gt=[];if(ze.type==="FeatureCollection")for(let pt=0;pt<ze.features.length;pt++)Vt(gt,ze.features[pt],tt,pt);else Vt(gt,ze.type==="Feature"?ze:{geometry:ze},tt);return gt}(je,De);this.tiles={},this.tileCoords=[],ve&&(console.timeEnd("preprocess data"),console.log("index: maxZoom: %d, maxPoints: %d",De.indexMaxZoom,De.indexMaxPoints),console.time("generate tiles"),this.stats={},this.total=0),Re=function(ze,tt){const gt=tt.buffer/tt.extent;let pt=ze;const Lt=Gt(ze,1,-1-gt,gt,0,-1,2,tt),jt=Gt(ze,1,1-gt,2+gt,0,-1,2,tt);return(Lt||jt)&&(pt=Gt(ze,1,-gt,1+gt,0,-1,2,tt)||[],Lt&&(pt=Ln(Lt,1).concat(pt)),jt&&(pt=pt.concat(Ln(jt,-1)))),pt}(Re,De),Re.length&&this.splitTile(Re,0,0,0),ve&&(Re.length&&console.log("features: %d, points: %d",this.tiles[0].numFeatures,this.tiles[0].numPoints),console.timeEnd("generate tiles"),console.log("tiles generated:",this.total,JSON.stringify(this.stats)))}splitTile(je,De,ve,Re,ze,tt,gt){const pt=[je,De,ve,Re],Lt=this.options,jt=Lt.debug;for(;pt.length;){Re=pt.pop(),ve=pt.pop(),De=pt.pop(),je=pt.pop();const Nt=1<<De,rn=hs(De,ve,Re);let _n=this.tiles[rn];if(!_n&&(jt>1&&console.time("creation"),_n=this.tiles[rn]=xr(je,De,ve,Re,Lt),this.tileCoords.push({z:De,x:ve,y:Re}),jt)){jt>1&&(console.log("tile z%d-%d-%d (features: %d, points: %d, simplified: %d)",De,ve,Re,_n.numFeatures,_n.numPoints,_n.numSimplified),console.timeEnd("creation"));const Vs=`z${De}`;this.stats[Vs]=(this.stats[Vs]||0)+1,this.total++}if(_n.source=je,ze==null){if(De===Lt.indexMaxZoom||_n.numPoints<=Lt.indexMaxPoints)continue}else{if(De===Lt.maxZoom||De===ze)continue;if(ze!=null){const Vs=ze-De;if(ve!==tt>>Vs||Re!==gt>>Vs)continue}}if(_n.source=null,je.length===0)continue;jt>1&&console.time("clipping");const Pn=.5*Lt.buffer/Lt.extent,sr=.5-Pn,Cr=.5+Pn,Ar=1+Pn;let pr=null,Wr=null,vi=null,ti=null,Ai=Gt(je,Nt,ve-Pn,ve+Cr,0,_n.minX,_n.maxX,Lt),Ci=Gt(je,Nt,ve+sr,ve+Ar,0,_n.minX,_n.maxX,Lt);je=null,Ai&&(pr=Gt(Ai,Nt,Re-Pn,Re+Cr,1,_n.minY,_n.maxY,Lt),Wr=Gt(Ai,Nt,Re+sr,Re+Ar,1,_n.minY,_n.maxY,Lt),Ai=null),Ci&&(vi=Gt(Ci,Nt,Re-Pn,Re+Cr,1,_n.minY,_n.maxY,Lt),ti=Gt(Ci,Nt,Re+sr,Re+Ar,1,_n.minY,_n.maxY,Lt),Ci=null),jt>1&&console.timeEnd("clipping"),pt.push(pr||[],De+1,2*ve,2*Re),pt.push(Wr||[],De+1,2*ve,2*Re+1),pt.push(vi||[],De+1,2*ve+1,2*Re),pt.push(ti||[],De+1,2*ve+1,2*Re+1)}}getTile(je,De,ve){je=+je,De=+De,ve=+ve;const Re=this.options,{extent:ze,debug:tt}=Re;if(je<0||je>24)return null;const gt=1<<je,pt=hs(je,De=De+gt&gt-1,ve);if(this.tiles[pt])return _r(this.tiles[pt],ze);tt>1&&console.log("drilling down to z%d-%d-%d",je,De,ve);let Lt,jt=je,Nt=De,rn=ve;for(;!Lt&&jt>0;)jt--,Nt>>=1,rn>>=1,Lt=this.tiles[hs(jt,Nt,rn)];return Lt&&Lt.source?(tt>1&&(console.log("found parent tile z%d-%d-%d",jt,Nt,rn),console.time("drilling down")),this.splitTile(Lt.source,jt,Nt,rn,je,De,ve),tt>1&&console.timeEnd("drilling down"),this.tiles[pt]?_r(this.tiles[pt],ze):null):null}}function hs(Mt,je,De){return 32*((1<<Mt)*De+je)+Mt}function mi(Mt,je){const De=Mt.tileID.canonical;if(!this._geoJSONIndex)return void je(null,null);const ve=this._geoJSONIndex.getTile(De.z,De.x,De.y);if(!ve)return void je(null,null);const Re=new ne(ve.features);let ze=at(Re);ze.byteOffset===0&&ze.byteLength===ze.buffer.byteLength||(ze=new Uint8Array(ze)),je(null,{vectorTile:Re,rawData:ze.buffer})}class br extends W{constructor(je,De,ve,Re,ze,tt){super(je,De,ve,Re,mi,tt),ze&&(this.loadGeoJSON=ze),this._dynamicIndex=new pe}loadData(je,De){const ve=je&&je.request,Re=ve&&ve.collectResourceTiming;this.loadGeoJSON(je,(ze,tt)=>{if(ze||!tt)return De(ze);if(typeof tt!="object")return De(new Error(`Input data given to '${je.source}' is not a valid GeoJSON object.`));{try{if(je.filter){const pt=i.U(je.filter,{type:"boolean","property-type":"data-driven",overridable:!1,transition:!1});if(pt.result==="error")throw new Error(pt.value.map(Lt=>`${Lt.key}: ${Lt.message}`).join(", "));tt.features=tt.features.filter(Lt=>pt.value.evaluate({zoom:0},Lt))}je.dynamic?(tt.type==="Feature"&&(tt={type:"FeatureCollection",features:[tt]}),je.append||(this._dynamicIndex.clear(),this.loaded={}),this._dynamicIndex.load(tt.features,this.loaded),je.cluster&&(tt.features=this._dynamicIndex.getFeatures())):this.loaded={},this._geoJSONIndex=je.cluster?new Ot(function({superclusterOptions:pt,clusterProperties:Lt}){if(!Lt||!pt)return pt;const jt={},Nt={},rn={accumulated:null,zoom:0},_n={properties:null},Pn=Object.keys(Lt);for(const sr of Pn){const[Cr,Ar]=Lt[sr],pr=i.U(Ar),Wr=i.U(typeof Cr=="string"?[Cr,["accumulated"],["get",sr]]:Cr);jt[sr]=pr.value,Nt[sr]=Wr.value}return pt.map=sr=>{_n.properties=sr;const Cr={};for(const Ar of Pn)Cr[Ar]=jt[Ar].evaluate(rn,_n);return Cr},pt.reduce=(sr,Cr)=>{_n.properties=Cr;for(const Ar of Pn)rn.accumulated=sr[Ar],sr[Ar]=Nt[Ar].evaluate(rn,_n)},pt}(je)).load(tt.features):je.dynamic?this._dynamicIndex:function(pt,Lt){return new ki(pt,Lt)}(tt,je.geojsonVtOptions)}catch(pt){return De(pt)}const gt={};if(Re){const pt=f(ve);pt&&(gt.resourceTiming={},gt.resourceTiming[je.source]=JSON.parse(JSON.stringify(pt)))}De(null,gt)}})}reloadTile(je,De){const ve=this.loaded;return ve&&ve[je.uid]?je.partial?De(null,void 0):super.reloadTile(je,De):this.loadTile(je,De)}loadGeoJSON(je,De){if(je.request)i.n(je.request,De);else{if(typeof je.data!="string")return De(new Error(`Input data given to '${je.source}' is not a valid GeoJSON object.`));try{return De(null,JSON.parse(je.data))}catch{return De(new Error(`Input data given to '${je.source}' is not a valid GeoJSON object.`))}}}getClusterExpansionZoom(je,De){try{De(null,this._geoJSONIndex.getClusterExpansionZoom(je.clusterId))}catch(ve){De(ve)}}getClusterChildren(je,De){try{De(null,this._geoJSONIndex.getChildren(je.clusterId))}catch(ve){De(ve)}}getClusterLeaves(je,De){try{De(null,this._geoJSONIndex.getLeaves(je.clusterId,je.limit,je.offset))}catch(ve){De(ve)}}}class gr{constructor(je,De){this.tileID=new i.aG(je.tileID.overscaledZ,je.tileID.wrap,je.tileID.canonical.z,je.tileID.canonical.x,je.tileID.canonical.y),this.tileZoom=je.tileZoom,this.uid=je.uid,this.zoom=je.zoom,this.canonical=je.tileID.canonical,this.pixelRatio=je.pixelRatio,this.tileSize=je.tileSize,this.source=je.source,this.overscaling=this.tileID.overscaleFactor(),this.projection=je.projection,this.brightness=De}parse(je,De,ve,Re){this.status="parsing";const ze=new i.aG(ve.tileID.overscaledZ,ve.tileID.wrap,ve.tileID.canonical.z,ve.tileID.canonical.x,ve.tileID.canonical.y),tt=[],gt=De.familiesBySource[ve.source],pt=new i.dZ(ze,ve.promoteId);return pt.bucketLayerIDs=[],pt.is3DTile=!0,i.e9(je).then(Lt=>{if(!Lt)return Re(new Error("Could not parse tile"));const jt=i.ea(Lt,1/i.cc(ve.tileID.canonical)),Nt=Lt.json.extensionsUsed&&Lt.json.extensionsUsed.includes("MAPBOX_mesh_features")||Lt.json.asset.extras&&Lt.json.asset.extras.MAPBOX_mesh_features,rn=Lt.json.extensionsUsed&&Lt.json.extensionsUsed.includes("EXT_meshopt_compression"),_n=new i.a8(this.zoom,{brightness:this.brightness});for(const Pn in gt)for(const sr of gt[Pn]){const Cr=sr[0];pt.bucketLayerIDs.push(sr.map(pr=>i.aC(pr.id,pr.scope))),Cr.recalculate(_n,[]);const Ar=new i.eb(sr,jt,ze,Nt,rn,this.brightness,pt);Nt||(Ar.needsUpload=!0),tt.push(Ar),Ar.evaluate(Cr)}this.status="done",Re(null,{buckets:tt,featureIndex:pt,collisionBoxArray:null,glyphAtlasImage:null,lineAtlas:null,imageAtlas:null,brightness:null})}).catch(Lt=>Re(new Error(Lt.message)))}}class Ir{constructor(je,De,ve,Re,ze,tt){this.actor=je,this.layerIndex=De,this.availableImages=ve,this.brightness=tt,this.loading={},this.loaded={}}loadTile(je,De){const ve=je.uid,Re=this.loading[ve]=new gr(je,this.brightness);i.bi(je.request,(ze,tt)=>{const gt=!this.loading[ve];return delete this.loading[ve],gt||ze?(Re.status="done",gt||(this.loaded[ve]=Re),De(ze)):tt&&tt.byteLength!==0?void Re.parse(tt,this.layerIndex,je,(pt,Lt)=>{Re.status="done",this.loaded=this.loaded||{},this.loaded[ve]=Re,pt||!Lt?De(pt):De(null,Lt)}):(Re.status="done",this.loaded[ve]=Re,De())})}reloadTile(je,De){const ve=this.loaded,Re=je.uid;if(ve&&ve[Re]){const ze=ve[Re];ze.projection=je.projection,ze.brightness=je.brightness;const tt=(gt,pt)=>{ze.reloadCallback&&(delete ze.reloadCallback,this.loadTile(je,De)),De(gt,pt)};ze.status==="parsing"?ze.reloadCallback=tt:ze.status==="done"&&this.loadTile(je,De)}}abortTile(je,De){const ve=je.uid;this.loading[ve]&&delete this.loading[ve],De()}removeTile(je,De){const ve=this.loaded,Re=je.uid;ve&&ve[Re]&&delete ve[Re],De()}}class Kr{constructor(je){this.self=je,this.actor=new i.ec(je,this),this.layerIndexes={},this.availableImages={},this.isSpriteLoaded={},this.imageRasterizer=new i.I,this.projections={},this.defaultProjection=i.bP({name:"mercator"}),this.workerSourceTypes={vector:W,geojson:br,"batched-model":Ir},this.workerSources={},this.demWorkerSources={},this.self.registerWorkerSource=(De,ve)=>{if(this.workerSourceTypes[De])throw new Error(`Worker source with name "${De}" already registered.`);this.workerSourceTypes[De]=ve},this.self.registerRTLTextPlugin=De=>{if(i.ed.isParsed())throw new Error("RTL text plugin already registered.");i.ed.applyArabicShaping=De.applyArabicShaping,i.ed.processBidirectionalText=De.processBidirectionalText,i.ed.processStyledBidirectionalText=De.processStyledBidirectionalText}}clearCaches(je,De,ve){delete this.layerIndexes[je],delete this.availableImages[je],delete this.workerSources[je],delete this.demWorkerSources[je],delete this.rasterArrayWorkerSource,ve()}checkIfReady(je,De,ve){ve()}setReferrer(je,De){this.referrer=De}spriteLoaded(je,{scope:De,isLoaded:ve}){if(this.isSpriteLoaded[je]||(this.isSpriteLoaded[je]={}),this.isSpriteLoaded[je][De]=ve,this.workerSources[je]&&this.workerSources[je][De])for(const Re in this.workerSources[je][De]){const ze=this.workerSources[je][De][Re];for(const tt in ze){const gt=ze[tt];gt instanceof W&&(gt.isSpriteLoaded=ve,gt.fire(new i.z("isSpriteLoaded")))}}}setImages(je,{scope:De,images:ve},Re){if(this.availableImages[je]||(this.availableImages[je]={}),this.availableImages[je][De]=ve,this.workerSources[je]&&this.workerSources[je][De]){for(const ze in this.workerSources[je][De]){const tt=this.workerSources[je][De][ze];for(const gt in tt)tt[gt].availableImages=ve}Re()}else Re()}setProjection(je,De){this.projections[je]=i.bP(De)}setBrightness(je,De,ve){this.brightness=De,ve()}setLayers(je,De,ve){this.getLayerIndex(je,De.scope).replace(De.layers,De.options),ve()}updateLayers(je,De,ve){this.getLayerIndex(je,De.scope).update(De.layers,De.removedIds,De.options),ve()}loadTile(je,De,ve){De.projection=this.projections[je]||this.defaultProjection,this.getWorkerSource(je,De.type,De.source,De.scope).loadTile(De,ve)}loadDEMTile(je,De,ve){this.getDEMWorkerSource(je,De.source,De.scope).loadTile(De,ve)}decodeRasterArray(je,De,ve){this.getRasterArrayWorkerSource().decodeRasterArray(De,ve)}reloadTile(je,De,ve){De.projection=this.projections[je]||this.defaultProjection,this.getWorkerSource(je,De.type,De.source,De.scope).reloadTile(De,ve)}abortTile(je,De,ve){this.getWorkerSource(je,De.type,De.source,De.scope).abortTile(De,ve)}removeTile(je,De,ve){this.getWorkerSource(je,De.type,De.source,De.scope).removeTile(De,ve)}removeSource(je,De,ve){if(!(this.workerSources[je]&&this.workerSources[je][De.scope]&&this.workerSources[je][De.scope][De.type]&&this.workerSources[je][De.scope][De.type][De.source]))return;const Re=this.workerSources[je][De.scope][De.type][De.source];delete this.workerSources[je][De.scope][De.type][De.source],Re.removeSource!==void 0?Re.removeSource(De,ve):ve()}loadWorkerSource(je,De,ve){try{this.self.importScripts(De.url),ve()}catch(Re){ve(Re.toString())}}syncRTLPluginState(je,De,ve){try{i.ed.setState(De);const Re=i.ed.getPluginURL();if(i.ed.isLoaded()&&!i.ed.isParsed()&&Re!=null){this.self.importScripts(Re);const ze=i.ed.isParsed();ve(ze?void 0:new Error(`RTL Text Plugin failed to import scripts from ${Re}`),ze)}}catch(Re){ve(Re.toString())}}setDracoUrl(je,De){this.dracoUrl=De}getAvailableImages(je,De){this.availableImages[je]||(this.availableImages[je]={});let ve=this.availableImages[je][De];return ve||(ve=[]),ve}getLayerIndex(je,De){this.layerIndexes[je]||(this.layerIndexes[je]={});let ve=this.layerIndexes[je][De];return ve||(ve=this.layerIndexes[je][De]=new b,ve.scope=De),ve}getWorkerSource(je,De,ve,Re){return this.workerSources[je]||(this.workerSources[je]={}),this.workerSources[je][Re]||(this.workerSources[je][Re]={}),this.workerSources[je][Re][De]||(this.workerSources[je][Re][De]={}),this.isSpriteLoaded[je]||(this.isSpriteLoaded[je]={}),this.workerSources[je][Re][De][ve]||(this.workerSources[je][Re][De][ve]=new this.workerSourceTypes[De]({send:(ze,tt,gt,pt,Lt,jt)=>{this.actor.send(ze,tt,gt,je,Lt,jt)},scheduler:this.actor.scheduler},this.getLayerIndex(je,Re),this.getAvailableImages(je,Re),this.isSpriteLoaded[je][Re],void 0,this.brightness)),this.workerSources[je][Re][De][ve]}rasterizeImages(je,De,ve){const{imageTasks:Re,scope:ze}=De,tt={};for(const gt in Re){const{image:pt,imageIdWithOptions:Lt}=Re[gt];tt[gt]=this.imageRasterizer.rasterize(Lt,pt,ze,je)}ve(void 0,tt)}removeRasterizedImages(je,De,ve){const{imageIds:Re,scope:ze}=De;this.imageRasterizer.removeImagesFromCacheByIds(Re,ze,je),ve()}getDEMWorkerSource(je,De,ve){return this.demWorkerSources[je]||(this.demWorkerSources[je]={}),this.demWorkerSources[je][ve]||(this.demWorkerSources[je][ve]={}),this.demWorkerSources[je][ve][De]||(this.demWorkerSources[je][ve][De]=new L),this.demWorkerSources[je][ve][De]}getRasterArrayWorkerSource(){return this.rasterArrayWorkerSource||(this.rasterArrayWorkerSource=new Q),this.rasterArrayWorkerSource}enforceCacheSizeLimit(je,De){i.ee(De)}getWorkerPerformanceMetrics(je,De,ve){ve(void 0,void 0)}}return typeof WorkerGlobalScope<"u"&&typeof self<"u"&&self instanceof WorkerGlobalScope&&(self.worker=new Kr(self)),Kr}),a(["./shared"],function(i){var f="3.9.1";const g={create:"create",load:"load",fullLoad:"fullLoad"},y={mark(v){performance.mark(v)},measure(v,l,d){performance.measure(v,l,d)}};function b(v){const l=v.name.split("?")[0];return i.a(l)&&l.includes("mapbox-gl.js")?"javascript":i.a(l)&&l.includes("mapbox-gl.css")?"css":i.b(l)?"fontRange":i.c(l)?"sprite":i.i(l)?"style":i.d(l)?"tilejson":"other"}var T,S={},U=function(){if(T)return S;function v(x){return!l(x)}function l(x){return typeof window>"u"||typeof document>"u"?"not a browser":function(){if(!("Worker"in window&&"Blob"in window&&"URL"in window))return!1;var B,F,z=new Blob([""],{type:"text/javascript"}),K=URL.createObjectURL(z);try{F=new Worker(K),B=!0}catch{B=!1}return F&&F.terminate(),URL.revokeObjectURL(K),B}()?function(){var B=document.createElement("canvas");B.width=B.height=1;var F=B.getContext("2d");if(!F)return!1;var z=F.getImageData(0,0,1,1);return z&&z.width===B.width}()?(d[C=x&&x.failIfMajorPerformanceCaveat]===void 0&&(d[C]=function(B){var F,z=function(K){var X=document.createElement("canvas"),J=Object.create(v.webGLContextAttributes);return J.failIfMajorPerformanceCaveat=K,X.getContext("webgl2",J)}(B);if(!z)return!1;try{F=z.createShader(z.VERTEX_SHADER)}catch{return!1}return!(!F||z.isContextLost())&&(z.shaderSource(F,"void main() {}"),z.compileShader(F),z.getShaderParameter(F,z.COMPILE_STATUS)===!0)}(C)),d[C]?document.documentMode?"insufficient ECMAScript 6 support":void 0:"insufficient WebGL2 support"):"insufficient Canvas/getImageData support":"insufficient worker support";var C}T=1,S.supported=v,S.notSupportedReason=l;var d={};return v.webGLContextAttributes={antialias:!1,alpha:!0,stencil:!0,depth:!0},S}();function N(v,l,d){const x=document.createElement(v);return l!=null&&(x.className=l),d&&d.appendChild(x),x}function W(v,l,d){const x=document.createElementNS("http://www.w3.org/2000/svg",v);for(const C of Object.keys(l))x.setAttributeNS(null,C,String(l[C]));return d&&d.appendChild(x),x}const L=typeof document<"u"?document.documentElement&&document.documentElement.style:null,Q=L&&L.userSelect!==void 0?"userSelect":"WebkitUserSelect";let V;function Z(){L&&Q&&(V=L[Q],L[Q]="none")}function ne(){L&&Q&&(L[Q]=V)}function Y(v){v.preventDefault(),v.stopPropagation(),window.removeEventListener("click",Y,!0)}function le(){window.addEventListener("click",Y,!0),window.setTimeout(()=>{window.removeEventListener("click",Y,!0)},0)}function pe(v,l){const d=v.getBoundingClientRect();return he(v,d,l)}function _e(v,l){const d=v.getBoundingClientRect(),x=[];for(let C=0;C<l.length;C++)x.push(he(v,d,l[C]));return x}function ye(v){return window.InstallTrigger!==void 0&&v.button===2&&v.ctrlKey&&window.navigator.platform.toUpperCase().indexOf("MAC")>=0?0:v.button}function he(v,l,d){const x=v.offsetWidth===l.width?1:v.offsetWidth/l.width;return new i.P((d.clientX-l.left)*x,(d.clientY-l.top)*x)}const be="01",Te="NO_ACCESS_TOKEN";class Ee{constructor(l,d,x){this._transformRequestFn=l,this._customAccessToken=d,this._silenceAuthErrors=!!x,this._createSkuToken()}_createSkuToken(){const l=function(){let d="";for(let x=0;x<10;x++)d+="0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ"[Math.floor(62*Math.random())];return{token:["1",be,d].join(""),tokenExpiresAt:Date.now()+432e5}}();this._skuToken=l.token,this._skuTokenExpiresAt=l.tokenExpiresAt}_isSkuTokenExpired(){return Date.now()>this._skuTokenExpiresAt}transformRequest(l,d){return this._transformRequestFn&&this._transformRequestFn(l,d)||{url:l}}normalizeStyleURL(l,d){if(!i.f(l))return l;const x=Ge(l);return x.params.push(`sdk=js-${f}`),x.path=`/styles/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||d)}normalizeGlyphsURL(l,d){if(!i.f(l))return l;const x=Ge(l);return x.path=`/fonts/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||d)}normalizeModelURL(l,d){if(!i.f(l))return l;const x=Ge(l);return x.path=`/models/v1${x.path}`,this._makeAPIURL(x,this._customAccessToken||d)}normalizeSourceURL(l,d,x,C){if(!i.f(l))return l;const B=Ge(l);return B.path=`/v4/${B.authority}.json`,B.params.push("secure"),x&&B.params.push(`language=${x}`),C&&B.params.push(`worldview=${C}`),this._makeAPIURL(B,this._customAccessToken||d)}normalizeIconsetURL(l,d){const x=Ge(l);return i.f(l)?(x.path=`/styles/v1${x.path}/iconset.pbf`,this._makeAPIURL(x,this._customAccessToken||d)):Je(x)}normalizeSpriteURL(l,d,x,C){const B=Ge(l);return i.f(l)?(B.path=`/styles/v1${B.path}/sprite${d}${x}`,this._makeAPIURL(B,this._customAccessToken||C)):(B.path+=`${d}${x}`,Je(B))}normalizeTileURL(l,d,x){if(this._isSkuTokenExpired()&&this._createSkuToken(),l&&!i.f(l))return l;const C=Ge(l);C.path=C.path.replace(/(\.(png|jpg)\d*)(?=$)/,`${d||x&&C.authority!=="raster"&&x===512?"@2x":""}${i.m.supported?".webp":"$1"}`),C.authority==="raster"?C.path=`/${i.e.RASTER_URL_PREFIX}${C.path}`:C.authority==="rasterarrays"?C.path=`/${i.e.RASTERARRAYS_URL_PREFIX}${C.path}`:C.authority==="3dtiles"?C.path=`/${i.e.TILES3D_URL_PREFIX}${C.path}`:(C.path=C.path.replace(/^.+\/v4\//,"/"),C.path=`/${i.e.TILE_URL_VERSION}${C.path}`);const B=this._customAccessToken||function(F){for(const z of F){const K=z.match(/^access_token=(.*)$/);if(K)return K[1]}return null}(C.params)||i.e.ACCESS_TOKEN;return i.e.REQUIRE_ACCESS_TOKEN&&B&&this._skuToken&&C.params.push(`sku=${this._skuToken}`),this._makeAPIURL(C,B)}canonicalizeTileURL(l,d){const x=Ge(l);if(!x.path.match(/^(\/v4\/|\/(raster|rasterarrays)\/v1\/)/)||!x.path.match(/\.[\w]+$/))return l;let C="mapbox://";x.path.match(/^\/raster\/v1\//)?C+=`raster/${x.path.replace(`/${i.e.RASTER_URL_PREFIX}/`,"")}`:x.path.match(/^\/rasterarrays\/v1\//)?C+=`rasterarrays/${x.path.replace(`/${i.e.RASTERARRAYS_URL_PREFIX}/`,"")}`:C+=`tiles/${x.path.replace(`/${i.e.TILE_URL_VERSION}/`,"")}`;let B=x.params;return d&&(B=B.filter(F=>!F.match(/^access_token=/))),B.length&&(C+=`?${B.join("&")}`),C}canonicalizeTileset(l,d){const x=!!d&&i.f(d),C=[];for(const B of l.tiles||[])i.h(B)?C.push(this.canonicalizeTileURL(B,x)):C.push(B);return C}_makeAPIURL(l,d){const x="See https://docs.mapbox.com/api/overview/#access-tokens-and-token-scopes",C=Ge(i.e.API_URL);if(l.protocol=C.protocol,l.authority=C.authority,l.protocol==="http"){const B=l.params.indexOf("secure");B>=0&&l.params.splice(B,1)}if(C.path!=="/"&&(l.path=`${C.path}${l.path}`),!i.e.REQUIRE_ACCESS_TOKEN)return Je(l);if(d=d||i.e.ACCESS_TOKEN,!this._silenceAuthErrors){if(!d)throw new Error(`An API access token is required to use Mapbox GL. ${x}`);if(d[0]==="s")throw new Error(`Use a public access token (pk.*) with Mapbox GL, not a secret access token (sk.*). ${x}`)}return l.params=l.params.filter(B=>B.indexOf("access_token")===-1),l.params.push(`access_token=${d||""}`),Je(l)}}const Ne=/^(\w+):\/\/([^/?]*)(\/[^?]+)?\??(.+)?/;function Ge(v){const l=v.match(Ne);if(!l)throw new Error("Unable to parse URL object");return{protocol:l[1],authority:l[2],path:l[3]||"/",params:l[4]?l[4].split("&"):[]}}function Je(v){const l=v.params.length?`?${v.params.join("&")}`:"";return`${v.protocol}://${v.authority}${v.path}${l}`}const Ue="mapbox.eventData";function Qe(v){if(!v)return null;const l=v.split(".");if(!l||l.length!==3)return null;try{return JSON.parse(i.j(l[1]))}catch{return null}}class xe{constructor(l){this.type=l,this.anonId=null,this.eventData={},this.queue=[],this.pendingRequest=null}getStorageKey(l){const d=Qe(i.e.ACCESS_TOKEN);let x="";return x=d&&d.u?i.k(d.u):i.e.ACCESS_TOKEN||"",l?`${Ue}.${l}:${x}`:`${Ue}:${x}`}fetchEventData(){const l=i.s("localStorage"),d=this.getStorageKey(),x=this.getStorageKey("uuid");if(l)try{const C=localStorage.getItem(d);C&&(this.eventData=JSON.parse(C));const B=localStorage.getItem(x);B&&(this.anonId=B)}catch{i.w("Unable to read from LocalStorage")}}saveEventData(){const l=i.s("localStorage"),d=this.getStorageKey(),x=this.getStorageKey("uuid"),C=this.anonId;if(l&&C)try{localStorage.setItem(x,C),Object.keys(this.eventData).length>=1&&localStorage.setItem(d,JSON.stringify(this.eventData))}catch{i.w("Unable to write to LocalStorage")}}processRequests(l){}postEvent(l,d,x,C){if(!i.e.EVENTS_URL)return;const B=Ge(i.e.EVENTS_URL);B.params.push(`access_token=${C||i.e.ACCESS_TOKEN||""}`);const F={event:this.type,created:new Date(l).toISOString()},z=d?i.l(F,d):F,K={url:Je(B),headers:{"Content-Type":"text/plain"},body:JSON.stringify([z])};this.pendingRequest=i.p(K,X=>{this.pendingRequest=null,x(X),this.saveEventData(),this.processRequests(C)})}queueRequest(l,d){this.queue.push(l),this.processRequests(d)}}const at=new class extends xe{constructor(v){super("appUserTurnstile"),this._customAccessToken=v}postTurnstileEvent(v,l){i.e.EVENTS_URL&&i.e.ACCESS_TOKEN&&Array.isArray(v)&&v.some(d=>i.f(d)||i.h(d))&&this.queueRequest(Date.now(),l)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;this.anonId&&this.eventData.lastSuccess&&this.eventData.tokenU||this.fetchEventData();const l=Qe(i.e.ACCESS_TOKEN),d=l?l.u:i.e.ACCESS_TOKEN;let x=d!==this.eventData.tokenU;i.v(this.anonId)||(this.anonId=i.u(),x=!0);const C=this.queue.shift();if(this.eventData.lastSuccess){const B=new Date(this.eventData.lastSuccess),F=new Date(C),z=(C-this.eventData.lastSuccess)/864e5;x=x||z>=1||z<-1||B.getDate()!==F.getDate()}else x=!0;x?this.postEvent(C,{sdkIdentifier:"mapbox-gl-js",sdkVersion:f,skuId:be,"enabled.telemetry":!1,userId:this.anonId},B=>{B||(this.eventData.lastSuccess=C,this.eventData.tokenU=d)},v):this.processRequests()}},we=at.postTurnstileEvent.bind(at),me=new class extends xe{constructor(){super("map.load"),this.success={},this.skuToken=""}postMapLoadEvent(v,l,d,x){this.skuToken=l,this.errorCb=x,i.e.EVENTS_URL&&(d||i.e.ACCESS_TOKEN?this.queueRequest({id:v,timestamp:Date.now()},d):this.errorCb(new Error(Te)))}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||(this.anonId||this.fetchEventData(),i.v(this.anonId)||(this.anonId=i.u()),this.postEvent(d,{sdkIdentifier:"mapbox-gl-js",sdkVersion:f,skuId:be,skuToken:this.skuToken,userId:this.anonId},x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},v))}remove(){this.errorCb=null}},Ze=me.postMapLoadEvent.bind(me),ot=new class extends xe{constructor(){super("style.load"),this.eventIdPerMapInstanceMap=new Map,this.mapInstanceIdMap=new WeakMap}getMapInstanceId(v){let l=this.mapInstanceIdMap.get(v);return l||(l=i.u(),this.mapInstanceIdMap.set(v,l)),l}getEventId(v){const l=this.eventIdPerMapInstanceMap.get(v)||0;return this.eventIdPerMapInstanceMap.set(v,l+1),l}postStyleLoadEvent(v,l){const{map:d,style:x,importedStyles:C}=l;if(!i.e.EVENTS_URL||!v&&!i.e.ACCESS_TOKEN)return;const B=this.getMapInstanceId(d),F={mapInstanceId:B,eventId:this.getEventId(B),style:x};C.length&&(F.importedStyles=C),this.queueRequest({timestamp:Date.now(),payload:F},v)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,payload:d}=this.queue.shift();this.postEvent(l,d,()=>{},v)}},vt=ot.postStyleLoadEvent.bind(ot),Qt=new class extends xe{constructor(){super("gljs.performance")}postPerformanceEvent(v,l){i.e.EVENTS_URL&&(v||i.e.ACCESS_TOKEN)&&this.queueRequest({timestamp:Date.now(),performanceData:l},v)}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{timestamp:l,performanceData:d}=this.queue.shift(),x=function(C){const B=performance.getEntriesByType("resource"),F=performance.getEntriesByType("mark"),z=function(ue){const Ie={};if(ue){for(const Se in ue)if(Se!=="other")for(const Pe of ue[Se]){const Le=`${Se}ResolveRangeMin`,$e=`${Se}ResolveRangeMax`,rt=`${Se}RequestCount`,et=`${Se}RequestCachedCount`;Ie[Le]=Math.min(Ie[Le]||1/0,Pe.startTime),Ie[$e]=Math.max(Ie[$e]||-1/0,Pe.responseEnd);const ft=dt=>{Ie[dt]===void 0&&(Ie[dt]=0),++Ie[dt]};Pe.transferSize!==void 0&&Pe.transferSize===0&&ft(et),ft(rt)}}return Ie}(function(ue,Ie){const Se={};if(ue)for(const Pe of ue){const Le=Ie(Pe);Se[Le]===void 0&&(Se[Le]=[]),Se[Le].push(Pe)}return Se}(B,b)),K=window.devicePixelRatio,X=navigator.connection||navigator.mozConnection||navigator.webkitConnection,J=X?X.effectiveType:void 0,oe={counters:[],metadata:[],attributes:[]},se=(ue,Ie,Se)=>{Se!=null&&ue.push({name:Ie,value:Se.toString()})};for(const ue in z)se(oe.counters,ue,z[ue]);if(C.interactionRange[0]!==1/0&&C.interactionRange[1]!==-1/0&&(se(oe.counters,"interactionRangeMin",C.interactionRange[0]),se(oe.counters,"interactionRangeMax",C.interactionRange[1])),F)for(const ue of Object.keys(g)){const Ie=g[ue],Se=F.find(Pe=>Pe.name===Ie);Se&&se(oe.counters,Ie,Se.startTime)}return se(oe.counters,"visibilityHidden",C.visibilityHidden),se(oe.attributes,"style",function(ue){if(ue)for(const Ie of ue){const Se=Ie.name.split("?")[0];if(i.i(Se)){const Pe=Se.split("/").slice(-2);if(Pe.length===2)return`mapbox://styles/${Pe[0]}/${Pe[1]}`}}}(B)),se(oe.attributes,"terrainEnabled",C.terrainEnabled?"true":"false"),se(oe.attributes,"fogEnabled",C.fogEnabled?"true":"false"),se(oe.attributes,"projection",C.projection),se(oe.attributes,"zoom",C.zoom),se(oe.metadata,"devicePixelRatio",K),se(oe.metadata,"connectionEffectiveType",J),se(oe.metadata,"navigatorUserAgent",navigator.userAgent),se(oe.metadata,"screenWidth",window.screen.width),se(oe.metadata,"screenHeight",window.screen.height),se(oe.metadata,"windowWidth",window.innerWidth),se(oe.metadata,"windowHeight",window.innerHeight),se(oe.metadata,"mapWidth",C.width/K),se(oe.metadata,"mapHeight",C.height/K),se(oe.metadata,"webglRenderer",C.renderer),se(oe.metadata,"webglVendor",C.vendor),se(oe.metadata,"sdkVersion",f),se(oe.metadata,"sdkIdentifier","mapbox-gl-js"),oe}(d);for(const C of x.metadata);for(const C of x.counters);for(const C of x.attributes);this.postEvent(l,x,()=>{},v)}},Ot=Qt.postPerformanceEvent.bind(Qt),kt=new class extends xe{constructor(){super("map.auth"),this.success={},this.skuToken=""}getSession(v,l,d,x){if(!i.e.API_URL||!i.e.SESSION_PATH)return;const C=Ge(i.e.API_URL+i.e.SESSION_PATH);C.params.push(`sku=${l||""}`),C.params.push(`access_token=${x||i.e.ACCESS_TOKEN||""}`);const B={url:Je(C),headers:{"Content-Type":"text/plain"}};this.pendingRequest=i.g(B,F=>{this.pendingRequest=null,d(F),this.saveEventData(),this.processRequests(x)})}getSessionAPI(v,l,d,x){this.skuToken=l,this.errorCb=x,i.e.SESSION_PATH&&i.e.API_URL&&(d||i.e.ACCESS_TOKEN?this.queueRequest({id:v,timestamp:Date.now()},d):this.errorCb(new Error(Te)))}processRequests(v){if(this.pendingRequest||this.queue.length===0)return;const{id:l,timestamp:d}=this.queue.shift();l&&this.success[l]||this.getSession(d,this.skuToken,x=>{x?this.errorCb(x):l&&(this.success[l]=!0)},v)}remove(){this.errorCb=null}},Me=kt.getSessionAPI.bind(kt),Ht=new Set;function Zt(v,l){l?Ht.add(v):Ht.delete(v)}class pn{constructor(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps=new Set,this._updatedImages=new Set}isDirty(){return this._changed}setDirty(){this._changed=!0}getUpdatedSourceCaches(){return this._updatedSourceCaches}updateSourceCache(l,d){this._updatedSourceCaches[l]=d,this.setDirty()}discardSourceCacheUpdate(l){delete this._updatedSourceCaches[l]}updateLayer(l){const d=l.scope;this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._updatedLayers[d].add(l.id),this.setDirty()}removeLayer(l){const d=l.scope;this._removedLayers[d]=this._removedLayers[d]||{},this._updatedLayers[d]=this._updatedLayers[d]||new Set,this._removedLayers[d][l.id]=l,this._updatedLayers[d].delete(l.id),this._updatedPaintProps.delete(l.fqid),this.setDirty()}getRemovedLayer(l){return this._removedLayers[l.scope]?this._removedLayers[l.scope][l.id]:null}discardLayerRemoval(l){this._removedLayers[l.scope]&&delete this._removedLayers[l.scope][l.id]}getLayerUpdatesByScope(){const l={};for(const d in this._updatedLayers)l[d]=l[d]||{},l[d].updatedIds=Array.from(this._updatedLayers[d].values());for(const d in this._removedLayers)l[d]=l[d]||{},l[d].removedIds=Object.keys(this._removedLayers[d]);return l}getUpdatedPaintProperties(){return this._updatedPaintProps}updatePaintProperties(l){this._updatedPaintProps.add(l.fqid),this.setDirty()}getUpdatedImages(){return Array.from(this._updatedImages.values())}updateImage(l){this._updatedImages.add(l),this.setDirty()}resetUpdatedImages(){this._updatedImages.clear()}reset(){this._changed=!1,this._updatedLayers={},this._removedLayers={},this._updatedSourceCaches={},this._updatedPaintProps.clear(),this._updatedImages.clear()}}function Dt(v){const{userImage:l}=v;return!!(l&&l.render&&l.render())&&(v.data.replace(new Uint8Array(l.data.buffer)),!0)}class hn extends i.E{constructor(l){super(),this.images={},this.updatedImages={},this.callbackDispatchedThisFrame={},this.loaded={},this.requestors=[],this.patterns={},this.atlasImage={},this.atlasTexture={},this.dirty=!0,this.spriteFormat=l,l!=="raster"&&i.t()&&(this.imageRasterizerDispatcher=new i.D(i.x(),this,"Image Rasterizer Worker",1))}get imageRasterizer(){return this._imageRasterizer||(this._imageRasterizer=new i.I),this._imageRasterizer}createScope(l){this.images[l]={},this.loaded[l]=!1,this.updatedImages[l]={},this.patterns[l]={},this.callbackDispatchedThisFrame[l]={},this.atlasImage[l]=new i.r({width:1,height:1})}isLoaded(){for(const l in this.loaded)if(!this.loaded[l])return!1;return!0}setLoaded(l,d){if(this.loaded[d]!==l&&(this.loaded[d]=l,l)){for(const{ids:x,callback:C}of this.requestors)this._notify(x,d,C);this.requestors=[]}}hasImage(l,d){return!!this.getImage(l,d)}getImage(l,d){return this.images[d][l]}addImage(l,d,x){this._validate(l,x)&&(this.images[d][l]=x)}_validate(l,d){let x=!0;return this._validateStretch(d.stretchX,d.data&&d.data.width)||(this.fire(new i.y(new Error(`Image "${l}" has invalid "stretchX" value`))),x=!1),this._validateStretch(d.stretchY,d.data&&d.data.height)||(this.fire(new i.y(new Error(`Image "${l}" has invalid "stretchY" value`))),x=!1),this._validateContent(d.content,d)||(this.fire(new i.y(new Error(`Image "${l}" has invalid "content" value`))),x=!1),x}_validateStretch(l,d){if(!l)return!0;let x=0;for(const C of l){if(C[0]<x||C[1]<C[0]||d<C[1])return!1;x=C[1]}return!0}_validateContent(l,d){return l?l.length!==4||!d.usvg&&(l[0]<0||d.data.width<l[0]||l[1]<0||d.data.height<l[1]||l[2]<0||d.data.width<l[2]||l[3]<0||d.data.height<l[3])?!1:!(l[2]<l[0]||l[3]<l[1]):!0}updateImage(l,d,x){x.version=this.images[d][l].version+1,this.images[d][l]=x,this.updatedImages[d][l]=!0,this.removeFromImageRasterizerCache(l,d)}removeFromImageRasterizerCache(l,d){this.spriteFormat!=="raster"&&(i.t()?this.imageRasterizerDispatcher.getActor().send("removeRasterizedImages",{imageIds:[l],scope:d}):this.imageRasterizer.removeImagesFromCacheByIds([l],d))}removeImage(l,d){const x=this.images[d][l];delete this.images[d][l],delete this.patterns[d][l],this.removeFromImageRasterizerCache(l,d),x.userImage&&x.userImage.onRemove&&x.userImage.onRemove()}listImages(l){return Object.keys(this.images[l])}getImages(l,d,x){let C=!0;const B=!!this.loaded[d];if(!B)for(const F of l)this.images[d][F]||(C=!1);B||C?this._notify(l,d,x):this.requestors.push({ids:l,scope:d,callback:x})}rasterizeImages({scope:l,imageTasks:d},x){const C={};for(const B in d){const F=d[B],z=this.getImage(F.id,l);z&&(C[B]={image:z,imageIdWithOptions:F})}i.t()?this.imageRasterizerDispatcher.getActor().send("rasterizeImages",{imageTasks:C,scope:l},x):this.rasterizeImagesInMainThread({imageTasks:C,scope:l},x)}rasterizeImagesInMainThread(l,d){const{imageTasks:x,scope:C}=l,B={};for(const F in x){const{image:z,imageIdWithOptions:K}=x[F];B[F]=this.imageRasterizer.rasterize(K,z,C,"")}d(void 0,B)}getUpdatedImages(l){return this.updatedImages[l]}_notify(l,d,x){const C={};for(const B of l){this.images[d][B]||this.fire(new i.z("styleimagemissing",{id:B}));const F=this.images[d][B];F?C[B]={data:F.usvg?null:F.data.clone(),pixelRatio:F.pixelRatio,sdf:F.sdf,usvg:F.usvg,version:F.version,stretchX:F.stretchX,stretchY:F.stretchY,content:F.content,hasRenderCallback:!!(F.userImage&&F.userImage.render)}:i.w(`Image "${B}" could not be loaded. Please make sure you have added the image with map.addImage() or a "sprite" property in your style. You can provide missing images by listening for the "styleimagemissing" map event.`)}x(null,C)}getPixelSize(l){const{width:d,height:x}=this.atlasImage[l];return{width:d,height:x}}getPattern(l,d,x){const C=this.patterns[d][l],B=this.getImage(l,d);if(!B)return null;if(C&&C.position.version===B.version)return C.position;if(C)C.position.version=B.version;else{B.usvg&&!B.data&&(B.data=this.imageRasterizer.rasterize(i.A.from(l).getPrimary(),B,d,""));const F={w:B.data.width+2*i.B,h:B.data.height+2*i.B,x:0,y:0},z=new i.F(F,B,i.B);this.patterns[d][l]={bin:F,position:z}}return this._updatePatternAtlas(d,x),this.patterns[d][l].position}bind(l,d){const x=l.gl;let C=this.atlasTexture[d];C?this.dirty&&(C.update(this.atlasImage[d]),this.dirty=!1):(C=new i.T(l,this.atlasImage[d],x.RGBA8),this.atlasTexture[d]=C),C.bind(x.LINEAR,x.CLAMP_TO_EDGE)}_updatePatternAtlas(l,d){const x=[];for(const z in this.patterns[l])x.push(this.patterns[l][z].bin);const{w:C,h:B}=i.C(x),F=this.atlasImage[l];F.resize({width:C||1,height:B||1});for(const z in this.patterns[l]){const{bin:K,position:X}=this.patterns[l][z];let J=X.padding;const oe=K.x+J,se=K.y+J,ue=this.images[l][z].data,Ie=ue.width,Se=ue.height;J=J>1?J-1:J,i.r.copy(ue,F,{x:0,y:0},{x:oe,y:se},{width:Ie,height:Se},d),i.r.copy(ue,F,{x:0,y:Se-J},{x:oe,y:se-J},{width:Ie,height:J},d),i.r.copy(ue,F,{x:0,y:0},{x:oe,y:se+Se},{width:Ie,height:J},d),i.r.copy(ue,F,{x:Ie-J,y:0},{x:oe-J,y:se},{width:J,height:Se},d),i.r.copy(ue,F,{x:0,y:0},{x:oe+Ie,y:se},{width:J,height:Se},d),i.r.copy(ue,F,{x:Ie-J,y:Se-J},{x:oe-J,y:se-J},{width:J,height:J},d),i.r.copy(ue,F,{x:0,y:Se-J},{x:oe+Ie,y:se-J},{width:J,height:J},d),i.r.copy(ue,F,{x:0,y:0},{x:oe+Ie,y:se+Se},{width:J,height:J},d),i.r.copy(ue,F,{x:Ie-J,y:0},{x:oe-J,y:se+Se},{width:J,height:J},d)}this.dirty=!0}beginFrame(){for(const l in this.images)this.callbackDispatchedThisFrame[l]={}}dispatchRenderCallbacks(l,d){for(const x of l){if(this.callbackDispatchedThisFrame[d][x])continue;this.callbackDispatchedThisFrame[d][x]=!0;const C=this.images[d][x];Dt(C)&&this.updateImage(x,d,C)}}}function Oe(v){const l=v.key,d=v.value,x=v.valueSpec||{},C=v.objectElementValidators||{},B=v.style,F=v.styleSpec;let z=[];const K=i.H(d);if(K!=="object")return[new i.V(l,d,`object expected, ${K} found`)];for(const X in d){const J=X.split(".")[0];let oe;C[J]?oe=C[J]:x[J]?oe=Vn:C["*"]?oe=C["*"]:x["*"]&&(oe=Vn),oe?z=z.concat(oe({key:(l&&`${l}.`)+X,value:d[X],valueSpec:x[J]||x["*"],style:B,styleSpec:F,object:d,objectKey:X},d)):z.push(new i.G(l,d[X],`unknown property "${X}"`))}for(const X in x)C[X]||x[X].required&&x[X].default===void 0&&d[X]===void 0&&z.push(new i.V(l,d,`missing required property "${X}"`));return z}function nn(v){const l=v.value,d=v.valueSpec,x=v.style,C=v.styleSpec,B=v.key,F=v.arrayElementValidator||Vn;if(i.H(l)!=="array")return[new i.V(B,l,`array expected, ${i.H(l)} found`)];if(d.length&&l.length!==d.length)return[new i.V(B,l,`array length ${d.length} expected, length ${l.length} found`)];if(d["min-length"]&&l.length<d["min-length"])return[new i.V(B,l,`array length at least ${d["min-length"]} expected, length ${l.length} found`)];let z={type:d.value,values:d.values,minimum:d.minimum,maximum:d.maximum,function:void 0};C.$version<7&&(z.function=d.function),i.H(d.value)==="object"&&(z=d.value);let K=[];for(let X=0;X<l.length;X++)K=K.concat(F({array:l,arrayIndex:X,value:l[X],valueSpec:z,style:x,styleSpec:C,key:`${B}[${X}]`},!0));return K}function Vt(v){const l=v.key,d=v.value,x=v.valueSpec;let C=i.H(d);if(C==="number"&&d!=d&&(C="NaN"),C!=="number")return[new i.V(l,d,`number expected, ${C} found`)];if("minimum"in x){let B=x.minimum;if(i.H(x.minimum)==="array"&&(B=x.minimum[v.arrayIndex]),d<B)return[new i.V(l,d,`${d} is less than the minimum value ${B}`)]}if("maximum"in x){let B=x.maximum;if(i.H(x.maximum)==="array"&&(B=x.maximum[v.arrayIndex]),d>B)return[new i.V(l,d,`${d} is greater than the maximum value ${B}`)]}return[]}function $t(v){const l=v.valueSpec,d=i.K(v.value.type);let x,C,B,F={};const z=d!=="categorical"&&v.value.property===void 0,K=!z,X=i.H(v.value.stops)==="array"&&i.H(v.value.stops[0])==="array"&&i.H(v.value.stops[0][0])==="object",J=Oe({key:v.key,value:v.value,valueSpec:v.styleSpec.function,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{stops:function(ue){if(d==="identity")return[new i.V(ue.key,ue.value,'identity function may not have a "stops" property')];let Ie=[];const Se=ue.value;return Ie=Ie.concat(nn({key:ue.key,value:Se,valueSpec:ue.valueSpec,style:ue.style,styleSpec:ue.styleSpec,arrayElementValidator:oe})),i.H(Se)==="array"&&Se.length===0&&Ie.push(new i.V(ue.key,Se,"array must have at least one stop")),Ie},default:function(ue){return Vn({key:ue.key,value:ue.value,valueSpec:l,style:ue.style,styleSpec:ue.styleSpec})}}});return d==="identity"&&z&&J.push(new i.V(v.key,v.value,'missing required property "property"')),d==="identity"||v.value.stops||J.push(new i.V(v.key,v.value,'missing required property "stops"')),d==="exponential"&&v.valueSpec.expression&&!i.L(v.valueSpec)&&J.push(new i.V(v.key,v.value,"exponential functions not supported")),v.styleSpec.$version>=8&&(K&&!i.M(v.valueSpec)?J.push(new i.V(v.key,v.value,"property functions not supported")):z&&!i.N(v.valueSpec)&&J.push(new i.V(v.key,v.value,"zoom functions not supported"))),d!=="categorical"&&!X||v.value.property!==void 0||J.push(new i.V(v.key,v.value,'"property" property is required')),J;function oe(ue){let Ie=[];const Se=ue.value,Pe=ue.key;if(i.H(Se)!=="array")return[new i.V(Pe,Se,`array expected, ${i.H(Se)} found`)];if(Se.length!==2)return[new i.V(Pe,Se,`array length 2 expected, length ${Se.length} found`)];if(X){if(i.H(Se[0])!=="object")return[new i.V(Pe,Se,`object expected, ${i.H(Se[0])} found`)];if(Se[0].zoom===void 0)return[new i.V(Pe,Se,"object stop key must have zoom")];if(Se[0].value===void 0)return[new i.V(Pe,Se,"object stop key must have value")];const Le=i.K(Se[0].zoom);if(typeof Le!="number")return[new i.V(Pe,Se[0].zoom,"stop zoom values must be numbers")];if(B&&B>Le)return[new i.V(Pe,Se[0].zoom,"stop zoom values must appear in ascending order")];Le!==B&&(B=Le,C=void 0,F={}),Ie=Ie.concat(Oe({key:`${Pe}[0]`,value:Se[0],valueSpec:{zoom:{}},style:ue.style,styleSpec:ue.styleSpec,objectElementValidators:{zoom:Vt,value:se}}))}else Ie=Ie.concat(se({key:`${Pe}[0]`,value:Se[0],valueSpec:{},style:ue.style,styleSpec:ue.styleSpec},Se));return i.O(i.Q(Se[1]))?Ie.concat([new i.V(`${Pe}[1]`,Se[1],"expressions are not allowed in function stops.")]):Ie.concat(Vn({key:`${Pe}[1]`,value:Se[1],valueSpec:l,style:ue.style,styleSpec:ue.styleSpec}))}function se(ue,Ie){const Se=i.H(ue.value),Pe=i.K(ue.value),Le=ue.value!==null?ue.value:Ie;if(x){if(Se!==x)return[new i.V(ue.key,Le,`${Se} stop domain type must match previous stop domain type ${x}`)]}else x=Se;if(Se!=="number"&&Se!=="string"&&Se!=="boolean"&&typeof Pe!="number"&&typeof Pe!="string"&&typeof Pe!="boolean")return[new i.V(ue.key,Le,"stop domain value must be a number, string, or boolean")];if(Se!=="number"&&d!=="categorical"){let $e=`number expected, ${Se} found`;return i.M(l)&&d===void 0&&($e+='\nIf you intended to use a categorical function, specify `"type": "categorical"`.'),[new i.V(ue.key,Le,$e)]}return d!=="categorical"||Se!=="number"||typeof Pe=="number"&&isFinite(Pe)&&Math.floor(Pe)===Pe?d!=="categorical"&&Se==="number"&&typeof Pe=="number"&&typeof C=="number"&&C!==void 0&&Pe<C?[new i.V(ue.key,Le,"stop domain values must appear in ascending order")]:(C=Pe,d==="categorical"&&Pe in F?[new i.V(ue.key,Le,"stop domain values must be unique")]:(F[Pe]=!0,[])):[new i.V(ue.key,Le,`integer expected, found ${String(Pe)}`)]}}function xn(v){const l=(v.expressionContext==="property"?i.S:i.U)(i.Q(v.value),v.valueSpec);if(l.result==="error")return l.value.map(x=>new i.V(`${v.key}${x.key}`,v.value,x.message));const d=l.value.expression||l.value._styleExpression.expression;if(v.expressionContext==="property"&&v.propertyKey==="text-font"&&!d.outputDefined())return[new i.V(v.key,v.value,`Invalid data expression for "${v.propertyKey}". Output values must be contained as literals within the expression.`)];if(v.expressionContext==="property"&&v.propertyType==="layout"&&!i.W(d))return[new i.V(v.key,v.value,'"feature-state" data expressions are not supported with layout properties.')];if(v.expressionContext==="filter")return Xt(d,v);if(v.expressionContext&&v.expressionContext.indexOf("cluster")===0){if(!i.X(d,["zoom","feature-state"]))return[new i.V(v.key,v.value,'"zoom" and "feature-state" expressions are not supported with cluster properties.')];if(v.expressionContext==="cluster-initial"&&!i.Y(d))return[new i.V(v.key,v.value,"Feature data expressions are not supported with initial expression part of cluster properties.")]}return[]}function Xt(v,l){const d=new Set(["zoom","feature-state","pitch","distance-from-center"]);if(l.valueSpec&&l.valueSpec.expression)for(const C of l.valueSpec.expression.parameters)d.delete(C);if(d.size===0)return[];const x=[];return v instanceof i.Z&&d.has(v.name)?[new i.V(l.key,l.value,`["${v.name}"] expression is not supported in a filter for a ${l.object.type} layer with id: ${l.object.id}`)]:(v.eachChild(C=>{x.push(...Xt(C,l))}),x)}function gn(v){const l=v.key,d=v.value,x=v.valueSpec,C=[];return Array.isArray(x.values)?x.values.indexOf(i.K(d))===-1&&C.push(new i.V(l,d,`expected one of [${x.values.join(", ")}], ${JSON.stringify(d)} found`)):Object.keys(x.values).indexOf(i.K(d))===-1&&C.push(new i.V(l,d,`expected one of [${Object.keys(x.values).join(", ")}], ${JSON.stringify(d)} found`)),C}function rr(v){return i.$(i.Q(v.value))?xn(i.J({},v,{expressionContext:"filter",valueSpec:v.styleSpec[`filter_${v.layerType||"fill"}`]})):Gt(v)}function Gt(v){const l=v.value,d=v.key;if(i.H(l)!=="array")return[new i.V(d,l,`array expected, ${i.H(l)} found`)];const x=v.styleSpec;let C,B=[];if(l.length<1)return[new i.V(d,l,"filter array must have at least 1 element")];switch(B=B.concat(gn({key:`${d}[0]`,value:l[0],valueSpec:x.filter_operator,style:v.style,styleSpec:v.styleSpec})),i.K(l[0])){case"<":case"<=":case">":case">=":l.length>=2&&i.K(l[1])==="$type"&&B.push(new i.V(d,l,`"$type" cannot be use with operator "${l[0]}"`));case"==":case"!=":l.length!==3&&B.push(new i.V(d,l,`filter array for operator "${l[0]}" must have 3 elements`));case"in":case"!in":l.length>=2&&(C=i.H(l[1]),C!=="string"&&B.push(new i.V(`${d}[1]`,l[1],`string expected, ${C} found`)));for(let F=2;F<l.length;F++)C=i.H(l[F]),i.K(l[1])==="$type"?B=B.concat(gn({key:`${d}[${F}]`,value:l[F],valueSpec:x.geometry_type,style:v.style,styleSpec:v.styleSpec})):C!=="string"&&C!=="number"&&C!=="boolean"&&B.push(new i.V(`${d}[${F}]`,l[F],`string, number, or boolean expected, ${C} found`));break;case"any":case"all":case"none":for(let F=1;F<l.length;F++)B=B.concat(Gt({key:`${d}[${F}]`,value:l[F],style:v.style,styleSpec:v.styleSpec}));break;case"has":case"!has":C=i.H(l[1]),l.length!==2?B.push(new i.V(d,l,`filter array for "${l[0]}" operator must have 2 elements`)):C!=="string"&&B.push(new i.V(`${d}[1]`,l[1],`string expected, ${C} found`))}return B}function Rn(v,l){const d=v.key,x=v.style,C=v.layer,B=v.styleSpec,F=v.value,z=v.objectKey,K=B[`${l}_${v.layerType}`];if(!K)return[];const X=z.match(/^(.*)-use-theme$/);if(l==="paint"&&X&&K[X[1]])return Vn({key:d,value:F,valueSpec:{type:"string"},style:x,styleSpec:B});const J=z.match(/^(.*)-transition$/);if(l==="paint"&&J&&K[J[1]]&&K[J[1]].transition)return Vn({key:d,value:F,valueSpec:B.transition,style:x,styleSpec:B});const oe=v.valueSpec||K[z];if(!oe)return[new i.G(d,F,`unknown property "${z}"`)];let se;if(i.H(F)==="string"&&i.M(oe)&&!oe.tokens&&(se=/^{([^}]+)}$/.exec(F))){const Ie=`\`{ "type": "identity", "property": ${se?JSON.stringify(se[1]):'"_"'} }\``;return[new i.V(d,F,`"${z}" does not support interpolation syntax
Use an identity property function instead: ${Ie}.`)]}const ue=[];if(v.layerType==="symbol")z!=="text-field"||!x||x.glyphs||x.imports||ue.push(new i.V(d,F,'use of "text-field" requires a style "glyphs" property')),z==="text-font"&&i.a0(i.Q(F))&&i.K(F.type)==="identity"&&ue.push(new i.V(d,F,'"text-font" does not support identity functions'));else if(v.layerType==="model"&&l==="paint"&&C&&C.layout&&C.layout.hasOwnProperty("model-id")&&i.M(oe)&&(i.a1(oe)||i.N(oe))){const Ie=i.S(i.Q(F),oe),Se=Ie.value.expression||Ie.value._styleExpression.expression;Se&&!i.X(Se,["measure-light"])&&(z==="model-emissive-strength"&&i.Y(Se)&&i.W(Se)||ue.push(new i.V(d,F,`${z} does not support measure-light expressions when the model layer source is vector tile or GeoJSON.`)))}return ue.concat(Vn({key:v.key,value:F,valueSpec:oe,style:x,styleSpec:B,expressionContext:"property",propertyType:l,propertyKey:z}))}function wt(v){return Rn(v,"paint")}function qt(v){return Rn(v,"layout")}function fn(v){let l=[];const d=v.value,x=v.key,C=v.style,B=v.styleSpec;d.type||d.ref||l.push(new i.V(x,d,'either "type" or "ref" is required'));let F=i.K(d.type);const z=i.K(d.ref);if(d.id){const K=i.K(d.id);for(let X=0;X<v.arrayIndex;X++){const J=C.layers[X];i.K(J.id)===K&&l.push(new i.V(x,d.id,`duplicate layer id "${d.id}", previously used at line ${J.id.__line__}`))}}if("ref"in d){let K;["type","source","source-layer","filter","layout"].forEach(X=>{X in d&&l.push(new i.V(x,d[X],`"${X}" is prohibited for ref layers`))}),C.layers.forEach(X=>{i.K(X.id)===z&&(K=X)}),K?K.ref?l.push(new i.V(x,d.ref,"ref cannot reference another ref layer")):F=i.K(K.type):typeof z=="string"&&l.push(new i.V(x,d.ref,`ref layer "${z}" not found`))}else if(F!=="background"&&F!=="sky"&&F!=="slot")if(d.source){const K=C.sources&&C.sources[d.source],X=K&&i.K(K.type);K?X==="vector"&&F==="raster"?l.push(new i.V(x,d.source,`layer "${d.id}" requires a raster source`)):X==="raster"&&F!=="raster"?l.push(new i.V(x,d.source,`layer "${d.id}" requires a vector source`)):X!=="vector"||d["source-layer"]?X==="raster-dem"&&F!=="hillshade"?l.push(new i.V(x,d.source,"raster-dem source can only be used with layer type 'hillshade'.")):X!=="raster-array"||["raster","raster-particle"].includes(F)?F!=="line"||!d.paint||!d.paint["line-gradient"]&&!d.paint["line-trim-offset"]||X==="geojson"&&K.lineMetrics?F==="raster-particle"&&X!=="raster-array"&&l.push(new i.V(x,d.source,`layer "${d.id}" requires a 'raster-array' source.`)):l.push(new i.V(x,d,`layer "${d.id}" specifies a line-gradient, which requires a GeoJSON source with \`lineMetrics\` enabled.`)):l.push(new i.V(x,d.source,"raster-array source can only be used with layer type 'raster'.")):l.push(new i.V(x,d,`layer "${d.id}" must specify a "source-layer"`)):l.push(new i.V(x,d.source,`source "${d.source}" not found`))}else l.push(new i.V(x,d,'missing required property "source"'));return l=l.concat(Oe({key:x,value:d,valueSpec:B.layer,style:v.style,styleSpec:v.styleSpec,objectElementValidators:{"*":()=>[],type:()=>Vn({key:`${x}.type`,value:d.type,valueSpec:B.layer.type,style:v.style,styleSpec:v.styleSpec,object:d,objectKey:"type"}),filter:K=>rr(i.J({layerType:F},K)),layout:K=>Oe({layer:d,key:K.key,value:K.value,valueSpec:{},style:K.style,styleSpec:K.styleSpec,objectElementValidators:{"*":X=>qt(i.J({layerType:F},X))}}),paint:K=>Oe({layer:d,key:K.key,value:K.value,valueSpec:{},style:K.style,styleSpec:K.styleSpec,objectElementValidators:{"*":X=>wt(i.J({layerType:F,layer:d},X))}})}})),l}function Un(v){const l=v.value,d=v.key,x=i.H(l);return x!=="string"?[new i.V(d,l,`string expected, ${x} found`)]:[]}const Yt={promoteId:function({key:v,value:l}){if(i.H(l)==="string")return Un({key:v,value:l});{const d=[];for(const x in l)d.push(...Un({key:`${v}.${x}`,value:l[x]}));return d}}};function cn(v){const l=v.value,d=v.key,x=v.styleSpec,C=v.style;if(!l.type)return[new i.V(d,l,'"type" is required')];const B=i.K(l.type);let F=[];switch(["vector","raster","raster-dem","raster-array"].includes(B)&&(l.url||l.tiles||F.push(new i.G(d,l,'Either "url" or "tiles" is required.'))),B){case"vector":case"raster":case"raster-dem":case"raster-array":return F=F.concat(Oe({key:d,value:l,valueSpec:x[`source_${B.replace("-","_")}`],style:v.style,styleSpec:x,objectElementValidators:Yt})),F;case"geojson":if(F=Oe({key:d,value:l,valueSpec:x.source_geojson,style:C,styleSpec:x,objectElementValidators:Yt}),l.cluster)for(const z in l.clusterProperties){const[K,X]=l.clusterProperties[z],J=typeof K=="string"?[K,["accumulated"],["get",z]]:K;F.push(...xn({key:`${d}.${z}.map`,value:X,expressionContext:"cluster-map"})),F.push(...xn({key:`${d}.${z}.reduce`,value:J,expressionContext:"cluster-reduce"}))}return F;case"video":return Oe({key:d,value:l,valueSpec:x.source_video,style:C,styleSpec:x});case"image":return Oe({key:d,value:l,valueSpec:x.source_image,style:C,styleSpec:x});case"canvas":return[new i.V(d,null,"Please use runtime APIs to add canvas sources, rather than including them in stylesheets.","source.canvas")];default:return gn({key:`${d}.type`,value:l.type,valueSpec:{values:Ln(x)},style:C,styleSpec:x})}}function Ln(v){return v.source.reduce((l,d)=>{const x=v[d];return x.type.type==="enum"&&(l=l.concat(Object.keys(x.type.values))),l},[])}function Hn(v){const l=v.value,d=v.styleSpec,x=d.light,C=v.style;let B=[];const F=i.H(l);if(l===void 0)return B;if(F!=="object")return B=B.concat([new i.V("light",l,`object expected, ${F} found`)]),B;for(const z in l){const K=z.match(/^(.*)-transition$/),X=z.match(/^(.*)-use-theme$/);B=B.concat(X&&x[X[1]]?Vn({key:z,value:l[z],valueSpec:{type:"string"},style:C,styleSpec:d}):K&&x[K[1]]&&x[K[1]].transition?Vn({key:z,value:l[z],valueSpec:d.transition,style:C,styleSpec:d}):x[z]?Vn({key:z,value:l[z],valueSpec:x[z],style:C,styleSpec:d}):[new i.V(z,l[z],`unknown property "${z}"`)])}return B}function _r(v){const l=v.value;let d=[];if(!l)return d;const x=i.H(l);if(x!=="object")return d=d.concat([new i.V("light-3d",l,`object expected, ${x} found`)]),d;const C=v.styleSpec,B=C["light-3d"],F=v.key,z=v.style,K=v.style.lights;for(const oe of["type","id"])if(!(oe in l))return d=d.concat([new i.V("light-3d",l,`missing property ${oe} on light`)]),d;if(l.type&&K)for(let oe=0;oe<v.arrayIndex;oe++){const se=i.K(l.type),ue=K[oe];i.K(ue.type)===se&&d.push(new i.V(F,l.id,`duplicate light type "${l.type}", previously defined at line ${ue.id.__line__}`))}const X=`properties_light_${l.type}`;if(!(X in C))return d=d.concat([new i.V("light-3d",l,`Invalid light type ${l.type}`)]),d;const J=C[X];for(const oe in l)if(oe==="properties"){const se=l[oe],ue=i.H(se);if(ue!=="object")return d=d.concat([new i.V("properties",se,`object expected, ${ue} found`)]),d;for(const Ie in se)d=d.concat(J[Ie]?Vn({key:Ie,value:se[Ie],valueSpec:J[Ie],style:z,styleSpec:C}):[new i.G(v.key,se[Ie],`unknown property "${Ie}"`)])}else{const se=oe.match(/^(.*)-transition$/),ue=oe.match(/^(.*)-use-theme$/);d=d.concat(ue&&B[ue[1]]?Vn({key:oe,value:l[oe],valueSpec:{type:"string"},style:z,styleSpec:C}):se&&B[se[1]]&&B[se[1]].transition?Vn({key:oe,value:l[oe],valueSpec:C.transition,style:z,styleSpec:C}):B[oe]?Vn({key:oe,value:l[oe],valueSpec:B[oe],style:z,styleSpec:C}):[new i.G(oe,l[oe],`unknown property "${oe}"`)])}return d}function fr(v){const l=v.value,d=v.key,x=v.style,C=v.styleSpec,B=C.terrain;let F=[];const z=i.H(l);if(l===void 0||z==="null")return F;if(z!=="object")return F=F.concat([new i.V("terrain",l,`object expected, ${z} found`)]),F;for(const K in l){const X=K.match(/^(.*)-transition$/),J=K.match(/^(.*)-use-theme$/);F=F.concat(J&&B[J[1]]?Vn({key:K,value:l[K],valueSpec:{type:"string"},style:x,styleSpec:C}):X&&B[X[1]]&&B[X[1]].transition?Vn({key:K,value:l[K],valueSpec:C.transition,style:x,styleSpec:C}):B[K]?Vn({key:K,value:l[K],valueSpec:B[K],style:x,styleSpec:C}):[new i.G(K,l[K],`unknown property "${K}"`)])}if(l.source){const K=x.sources&&x.sources[l.source],X=K&&i.K(K.type);K?X!=="raster-dem"&&F.push(new i.V(d,l.source,`terrain cannot be used with a source of type ${String(X)}, it only be used with a "raster-dem" source type`)):F.push(new i.V(d,l.source,`source "${l.source}" not found`))}else F.push(new i.V(d,l,'terrain is missing required property "source"'));return F}function xr(v){const l=v.value,d=v.style,x=v.styleSpec,C=x.fog;let B=[];const F=i.H(l);if(l===void 0)return B;if(F!=="object")return B=B.concat([new i.V("fog",l,`object expected, ${F} found`)]),B;for(const z in l){const K=z.match(/^(.*)-transition$/),X=z.match(/^(.*)-use-theme$/);B=B.concat(X&&C[X[1]]?Vn({key:z,value:l[z],valueSpec:{type:"string"},style:d,styleSpec:x}):K&&C[K[1]]&&C[K[1]].transition?Vn({key:z,value:l[z],valueSpec:x.transition,style:d,styleSpec:x}):C[z]?Vn({key:z,value:l[z],valueSpec:C[z],style:d,styleSpec:x}):[new i.G(z,l[z],`unknown property "${z}"`)])}return B}const bi={"*":()=>[],array:nn,boolean:function(v){const l=v.value,d=v.key,x=i.H(l);return x!=="boolean"?[new i.V(d,l,`boolean expected, ${x} found`)]:[]},number:Vt,color:function(v){const l=v.key,d=v.value,x=i.H(d);return x!=="string"?[new i.V(l,d,`color expected, ${x} found`)]:i._.parseCSSColor(d)===null?[new i.V(l,d,`color expected, "${d}" found`)]:[]},enum:gn,filter:rr,function:$t,layer:fn,object:Oe,source:cn,model:i.a2,light:Hn,"light-3d":_r,terrain:fr,fog:xr,string:Un,formatted:function(v){return Un(v).length===0?[]:xn(v)},resolvedImage:function(v){return Un(v).length===0?[]:xn(v)},projection:function(v){const l=v.value,d=v.styleSpec,x=d.projection,C=v.style;let B=[];const F=i.H(l);if(F==="object")for(const z in l)B=B.concat(Vn({key:z,value:l[z],valueSpec:x[z],style:C,styleSpec:d}));else F!=="string"&&(B=B.concat([new i.V("projection",l,`object or string expected, ${F} found`)]));return B},import:function(v){const{value:l,styleSpec:d}=v,{data:x,...C}=l;Object.defineProperty(C,"__line__",{value:l.__line__,enumerable:!1});let B=Oe(i.J({},v,{value:C,valueSpec:d.import}));return i.K(C.id)===""&&B.push(new i.V(`${v.key}.id`,C,"import id can't be an empty string")),x&&(B=B.concat(ki(x,d,{key:`${v.key}.data`}))),B}};function Vn(v,l=!1){const d=v.value,x=v.valueSpec,C=v.styleSpec;if(x.expression&&i.a0(i.K(d)))return $t(v);if(x.expression&&i.O(i.Q(d)))return xn(v);if(x.type&&bi[x.type]){const B=bi[x.type](v);return l===!0&&B.length>0&&i.H(v.value)==="array"?xn(v):B}return Oe(i.J({},v,{valueSpec:x.type?C[x.type]:x}))}function Es(v){const l=v.value,d=v.key,x=Un(v);return x.length||(l.indexOf("{fontstack}")===-1&&x.push(new i.V(d,l,'"glyphs" url must include a "{fontstack}" token')),l.indexOf("{range}")===-1&&x.push(new i.V(d,l,'"glyphs" url must include a "{range}" token'))),x}function ki(v,l=i.a3,d={}){return Vn({key:d.key||"",value:v,valueSpec:l.$root,styleSpec:l,style:v,objectElementValidators:{glyphs:Es,"*":()=>[]}})}function hs(v,l=i.a3){return gt(ki(v,l))}const mi=v=>gt(cn(v)),br=v=>gt(Hn(v)),gr=v=>gt(_r(v)),Ir=v=>gt(fr(v)),Kr=v=>gt(xr(v)),Mt=v=>gt(function(l){const d=l.value,x=l.style,C=l.styleSpec,B=C.snow;let F=[];const z=i.H(d);if(d===void 0)return F;if(z!=="object")return F=F.concat([new i.V("snow",d,`object expected, ${z} found`)]),F;for(const K in d){const X=K.match(/^(.*)-transition$/);F=F.concat(X&&B[X[1]]&&B[X[1]].transition?Vn({key:K,value:d[K],valueSpec:C.transition,style:x,styleSpec:C}):B[K]?Vn({key:K,value:d[K],valueSpec:B[K],style:x,styleSpec:C}):[new i.G(K,d[K],`unknown property "${K}"`)])}return F}(v)),je=v=>gt(function(l){const d=l.value,x=l.style,C=l.styleSpec,B=C.rain;let F=[];const z=i.H(d);if(d===void 0)return F;if(z!=="object")return F=F.concat([new i.V("rain",d,`object expected, ${z} found`)]),F;for(const K in d){const X=K.match(/^(.*)-transition$/);F=F.concat(X&&B[X[1]]&&B[X[1]].transition?Vn({key:K,value:d[K],valueSpec:C.transition,style:x,styleSpec:C}):B[K]?Vn({key:K,value:d[K],valueSpec:B[K],style:x,styleSpec:C}):[new i.G(K,d[K],`unknown property "${K}"`)])}return F}(v)),De=v=>gt(fn(v)),ve=v=>gt(rr(v)),Re=v=>gt(wt(v)),ze=v=>gt(qt(v)),tt=v=>gt(i.a2(v));function gt(v){return v.slice().sort((l,d)=>l.line&&d.line?l.line-d.line:0)}function pt(v,l){let d=!1;if(l&&l.length)for(const x of l)x instanceof i.G?i.w(x.message):(v.fire(new i.y(new Error(x.message))),d=!0);return d}let Lt;class jt extends i.E{constructor(l,d="flat"){super(),this._transitionable=new i.a4(Lt||(Lt=new i.a5({anchor:new i.a6(i.a3.light.anchor),position:new i.a7(i.a3.light.position),color:new i.a6(i.a3.light.color),intensity:new i.a6(i.a3.light.intensity)}))),this.setLight(l,d),this._transitioning=this._transitionable.untransitioned()}getLight(){return this._transitionable.serialize()}setLight(l,d,x={}){this._validate(br,l,x)||(this._transitionable.setTransitionOrValue(l),this.id=d)}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,x){return(!x||x.validate!==!1)&&pt(this,l.call(hs,i.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.a3})))}}let Nt=class extends i.E{constructor(v,l,d,x){super(),this.scope=d,this._transitionable=new i.a4(new i.a5({source:new i.a6(i.a3.terrain.source),exaggeration:new i.a6(i.a3.terrain.exaggeration)}),d,x),this._transitionable.setTransitionOrValue(v,x),this._transitioning=this._transitionable.untransitioned(),this.drapeRenderMode=l}get(){return this._transitionable.serialize()}set(v,l){this._transitionable.setTransitionOrValue(v,l)}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}getExaggeration(v){return this._transitioning.possiblyEvaluate(new i.a8(v)).get("exaggeration")}getAttenuationRange(){if(!this.isZoomDependent())return null;const v=this._transitionable._values.exaggeration;if(!v)return null;const l=v.value.expression;if(!l)return null;let d=-1,x=-1,C=1;for(const B of l.zoomStops)C=l.evaluate(new i.a8(B)),C>.01?(d=B,x=-1):x=B;return C<.01&&d>0&&x>d?[d,x]:null}isZoomDependent(){const v=this._transitionable._values.exaggeration;return v!=null&&v.value!=null&&v.value.expression!=null&&v.value.expression instanceof i.a9}};const rn=45,_n=65,Pn=.05;function sr(v,l,d,x){const C=i.ac(rn,_n,d),[B,F]=Cr(v,x);let z=1-Math.min(1,Math.exp((l-B)/(F-B)*-6));return z*=z*z,z=Math.min(1,1.00747*z),z*C*v.alpha}function Cr(v,l){const d=.5/Math.tan(.5*l);return[v.range[0]+d,v.range[1]+d]}function Ar(v,l,d,x,C){const B=i.ab.vec3.transformMat4([],[l,d,x],C.mercatorFogMatrix);return sr(v,i.ab.vec3.length(B),C.pitch,C._fov)}function pr(v,l,d,x,C,B,F){const z=[[d,x,0],[C,x,0],[C,B,0],[d,B,0]];let K=Number.MAX_VALUE,X=-Number.MAX_VALUE;for(const J of z){const oe=i.ab.vec3.transformMat4([],J,l),se=i.ab.vec3.length(oe);K=Math.min(K,se),X=Math.max(X,se)}return[sr(v,K,F.pitch,F._fov),sr(v,X,F.pitch,F._fov)]}class Wr extends i.E{constructor(l,d,x,C){super();const B=new i.a5({range:new i.a6(i.a3.fog.range),color:new i.a6(i.a3.fog.color),"color-use-theme":new i.a6({type:"string","property-type":"data-constant",default:"default"}),"high-color":new i.a6(i.a3.fog["high-color"]),"high-color-use-theme":new i.a6({type:"string","property-type":"data-constant",default:"default"}),"space-color":new i.a6(i.a3.fog["space-color"]),"space-color-use-theme":new i.a6({type:"string","property-type":"data-constant",default:"default"}),"horizon-blend":new i.a6(i.a3.fog["horizon-blend"]),"star-intensity":new i.a6(i.a3.fog["star-intensity"]),"vertical-range":new i.a6(i.a3.fog["vertical-range"])});this._transitionable=new i.a4(B,x,new Map(C)),this.set(l,C),this._transitioning=this._transitionable.untransitioned(),this._transform=d,this.properties=new i.ad(B),this.scope=x}get state(){const l=this._transform,d=l.projection.name==="globe",x=i.ae(l.zoom),C=this.properties.get("range"),B=[.5,3];return{range:d?[i.af(B[0],C[0],x),i.af(B[1],C[1],x)]:C,horizonBlend:this.properties.get("horizon-blend"),alpha:this.properties.get("color").a}}get(){return this._transitionable.serialize()}set(l,d,x={}){if(this._validate(Kr,l,x))return;const C=i.l({},l);for(const B of Object.keys(i.a3.fog))C[B]===void 0&&(C[B]=i.a3.fog[B].default);this._options=C,this._transitionable.setTransitionOrValue(this._options,d)}getOpacity(l){if(!this._transform.projection.supportsFog)return 0;const d=this.properties&&this.properties.get("color")||1;return(this._transform.projection.name==="globe"?1:i.ac(rn,_n,l))*d.a}getOpacityAtLatLng(l,d){return this._transform.projection.supportsFog?function(x,C,B){const F=i.aa.fromLngLat(C),z=B.elevation?B.elevation.getAtPointOrZero(F):0;return Ar(x,F.x,F.y,z,B)}(this.state,l,d):0}getOpacityForTile(l){if(!this._transform.projection.supportsFog)return[1,1];const d=this._transform.calculateFogTileMatrix(l.toUnwrapped());return pr(this.state,d,0,0,i.ag,i.ag,this._transform)}getOpacityForBounds(l,d,x,C,B){return this._transform.projection.supportsFog?pr(this.state,l,d,x,C,B,this._transform):[1,1]}getFovAdjustedRange(l){return this._transform.projection.supportsFog?Cr(this.state,l):[0,1]}isVisibleOnFrustum(l){if(!this._transform.projection.supportsFog)return!1;const d=[4,5,6,7];for(const x of d){const C=l.points[x];let B;if(C[2]>=0)B=C;else{const F=l.points[x-4];B=i.ah(F,C,F[2]/(F[2]-C[2]))}if(Ar(this.state,B[0],B[1],0,this._transform)>=Pn)return!0}return!1}updateConfig(l){this._transitionable.setTransitionOrValue(this._options,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}_validate(l,d,x){return(!x||x.validate!==!1)&&pt(this,l.call(hs,i.l({value:d,style:{glyphs:!0,sprite:!0},styleSpec:i.a3})))}}let vi,ti,Ai,Ci,Vs=class extends i.E{constructor(v,l,d,x){super();const C=vi||(vi=new i.a5({density:new i.a6(i.a3.snow.density),intensity:new i.a6(i.a3.snow.intensity),color:new i.a6(i.a3.snow.color),opacity:new i.a6(i.a3.snow.opacity),vignette:new i.a6(i.a3.snow.vignette),"vignette-color":new i.a6(i.a3.snow["vignette-color"]),"center-thinning":new i.a6(i.a3.snow["center-thinning"]),direction:new i.a6(i.a3.snow.direction),"flake-size":new i.a6(i.a3.snow["flake-size"])}));this._transitionable=new i.a4(C,d,new Map(x)),this.set(v,x),this._transitioning=this._transitionable.untransitioned(),this.properties=new i.ad(C),this.scope=d}get state(){const v=this.properties.get("opacity"),l=this.properties.get("color"),d=this.properties.get("direction"),x=i.ai(d[0]),C=-Math.max(i.ai(d[1]),.01),B=[Math.cos(x)*Math.cos(C),Math.sin(x)*Math.cos(C),Math.sin(C)],F=this.properties.get("vignette"),z=this.properties.get("vignette-color");return z.a=F,{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new i.aj(l.r,l.g,l.b,l.a*v),direction:B,centerThinning:this.properties.get("center-thinning"),flakeSize:this.properties.get("flake-size"),vignetteColor:z}}get(){return this._transitionable.serialize()}set(v,l,d={}){if(this._validate(Mt,v,d))return;const x=i.l({},v);for(const C of Object.keys(i.a3.snow))x[C]===void 0&&(x[C]=i.a3.snow[C].default);this._options=x,this._transitionable.setTransitionOrValue(this._options,l)}updateConfig(v){this._transitionable.setTransitionOrValue(this._options,new Map(v))}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}_validate(v,l,d){return(!d||d.validate!==!1)&&pt(this,v.call(hs,i.l({value:l,style:{glyphs:!0,sprite:!0},styleSpec:i.a3})))}},Zo=class extends i.E{constructor(v,l,d,x){super();const C=ti||(ti=new i.a5({density:new i.a6(i.a3.rain.density),intensity:new i.a6(i.a3.rain.intensity),color:new i.a6(i.a3.rain.color),opacity:new i.a6(i.a3.rain.opacity),vignette:new i.a6(i.a3.rain.vignette),"vignette-color":new i.a6(i.a3.rain["vignette-color"]),"center-thinning":new i.a6(i.a3.rain["center-thinning"]),direction:new i.a6(i.a3.rain.direction),"droplet-size":new i.a6(i.a3.rain["droplet-size"]),"distortion-strength":new i.a6(i.a3.rain["distortion-strength"])}));this._transitionable=new i.a4(C,d,new Map(x)),this.set(v,x),this._transitioning=this._transitionable.untransitioned(),this.properties=new i.ad(C),this.scope=d}get state(){const v=this.properties.get("opacity"),l=this.properties.get("color"),d=this.properties.get("direction"),x=i.ai(d[0]),C=-Math.max(i.ai(d[1]),.01),B=[Math.cos(x)*Math.cos(C),Math.sin(x)*Math.cos(C),Math.sin(C)],F=this.properties.get("vignette-color");return F.a=this.properties.get("vignette"),{density:this.properties.get("density"),intensity:this.properties.get("intensity"),color:new i.aj(l.r,l.g,l.b,l.a*v),direction:B,centerThinning:this.properties.get("center-thinning"),dropletSize:this.properties.get("droplet-size"),distortionStrength:this.properties.get("distortion-strength"),vignetteColor:F}}get(){return this._transitionable.serialize()}set(v,l,d={}){if(this._validate(je,v,d))return;const x=i.l({},v);for(const C of Object.keys(i.a3.rain))x[C]===void 0&&(x[C]=i.a3.rain[C].default);this._options=x,this._transitionable.setTransitionOrValue(this._options,l)}updateConfig(v){this._transitionable.setTransitionOrValue(this._options,new Map(v))}updateTransitions(v){this._transitioning=this._transitionable.transitioned(v,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(v){this.properties=this._transitioning.possiblyEvaluate(v)}_validate(v,l,d){return(!d||d.validate!==!1)&&pt(this,v.call(hs,i.l({value:l,style:{glyphs:!0,sprite:!0},styleSpec:i.a3})))}};class Rs extends i.E{constructor(l,d,x,C){super(),this.scope=x,this._options=l,this.properties=new i.ad(d),this._transitionable=new i.a4(d,x,new Map(C)),this._transitionable.setTransitionOrValue(l.properties),this._transitioning=this._transitionable.untransitioned()}updateConfig(l){this._transitionable.setTransitionOrValue(this._options.properties,new Map(l))}updateTransitions(l){this._transitioning=this._transitionable.transitioned(l,this._transitioning)}hasTransition(){return this._transitioning.hasTransition()}recalculate(l){this.properties=this._transitioning.possiblyEvaluate(l)}get(){return this._options.properties=this._transitionable.serialize(),this._options}set(l,d){this._options=l,this._transitionable.setTransitionOrValue(l.properties,d)}shadowsEnabled(){return!!this.properties&&this.properties.get("cast-shadows")===!0}}class Eo{constructor(l,d,x,C){this.screenBounds=l,this.cameraPoint=d,this._screenRaycastCache={},this._cameraRaycastCache={},this.isAboveHorizon=x,this.screenGeometry=this.bufferedScreenGeometry(0),this.screenGeometryMercator=this._bufferedScreenMercator(0,C)}static createFromScreenPoints(l,d){let x,C;if(l instanceof i.P||typeof l[0]=="number"){const B=i.P.convert(l);x=[B],C=d.isPointAboveHorizon(B)}else{const B=i.P.convert(l[0]),F=i.P.convert(l[1]);x=[B,F],C=i.al(B,F).every(z=>d.isPointAboveHorizon(z))}return new Eo(x,d.getCameraPoint(),C,d)}isPointQuery(){return this.screenBounds.length===1}bufferedScreenGeometry(l){return i.al(this.screenBounds[0],this.screenBounds.length===1?this.screenBounds[0]:this.screenBounds[1],l)}bufferedCameraGeometry(l){const d=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],C=i.al(d,x,0,!1);return this.cameraPoint.y>x.y&&(this.cameraPoint.x>d.x&&this.cameraPoint.x<x.x?C.splice(3,0,this.cameraPoint):this.cameraPoint.x>=x.x?C[2]=this.cameraPoint:this.cameraPoint.x<=d.x&&(C[3]=this.cameraPoint)),i.am(C,l)}bufferedCameraGeometryGlobe(l){const d=this.screenBounds[0],x=this.screenBounds.length===1?this.screenBounds[0].add(new i.P(1,1)):this.screenBounds[1],C=i.al(d,x,l),B=this.cameraPoint.clone();switch(3*((B.y>d.y)+(B.y>x.y))+((B.x>d.x)+(B.x>x.x))){case 0:C[0]=B,C[4]=B.clone();break;case 1:C.splice(1,0,B);break;case 2:C[1]=B;break;case 3:C.splice(4,0,B);break;case 5:C.splice(2,0,B);break;case 6:C[3]=B;break;case 7:C.splice(3,0,B);break;case 8:C[2]=B}return C}containsTile(l,d,x,C=0){const B=l.queryPadding/d._pixelsPerMercatorPixel+1,F=x?this._bufferedCameraMercator(B,d):this._bufferedScreenMercator(B,d);let z=l.tileID.wrap+(F.unwrapped?C:0);const K=F.polygon.map(Pe=>i.an(l.tileTransform,Pe,z));if(!i.ao(K,0,0,i.ag,i.ag))return;z=l.tileID.wrap+(this.screenGeometryMercator.unwrapped?C:0);const X=this.screenGeometryMercator.polygon.map(Pe=>i.ap(l.tileTransform,Pe,z)),J=X.map(Pe=>new i.P(Pe[0],Pe[1])),oe=d.getFreeCameraOptions().position||new i.aa(0,0,0),se=i.ap(l.tileTransform,oe,z),ue=X.map(Pe=>{const Le=i.ab.vec3.sub(Pe,Pe,se);return i.ab.vec3.normalize(Le,Le),new i.aq(se,Le)}),Ie=i.ar(l,1,d.zoom)*d._pixelsPerMercatorPixel;return{queryGeometry:this,tilespaceGeometry:J,tilespaceRays:ue,bufferedTilespaceGeometry:K,bufferedTilespaceBounds:(Se=i.as(K),Se.min.x=i.aw(Se.min.x,0,i.ag),Se.min.y=i.aw(Se.min.y,0,i.ag),Se.max.x=i.aw(Se.max.x,0,i.ag),Se.max.y=i.aw(Se.max.y,0,i.ag),Se),tile:l,tileID:l.tileID,pixelToTileUnitsFactor:Ie};var Se}_bufferedScreenMercator(l,d){const x=ho(l);if(this._screenRaycastCache[x])return this._screenRaycastCache[x];{let C;return C=d.projection.name==="globe"?this._projectAndResample(this.bufferedScreenGeometry(l),d):{polygon:this.bufferedScreenGeometry(l).map(B=>d.pointCoordinate3D(B)),unwrapped:!0},this._screenRaycastCache[x]=C,C}}_bufferedCameraMercator(l,d){const x=ho(l);if(this._cameraRaycastCache[x])return this._cameraRaycastCache[x];{let C;return C=d.projection.name==="globe"?this._projectAndResample(this.bufferedCameraGeometryGlobe(l),d):{polygon:this.bufferedCameraGeometry(l).map(B=>d.pointCoordinate3D(B)),unwrapped:!0},this._cameraRaycastCache[x]=C,C}}_projectAndResample(l,d){const x=function(B,F){const z=i.ab.mat4.multiply([],F.pixelMatrix,F.globeMatrix),K=[0,-i.ax,0,1],X=[0,i.ax,0,1],J=[0,0,0,1];i.ab.vec4.transformMat4(K,K,z),i.ab.vec4.transformMat4(X,X,z),i.ab.vec4.transformMat4(J,J,z);const oe=new i.P(K[0]/K[3],K[1]/K[3]),se=new i.P(X[0]/X[3],X[1]/X[3]),ue=i.au(B,oe)&&K[3]<J[3],Ie=i.au(B,se)&&X[3]<J[3];if(!ue&&!Ie)return null;const Se=function(ht,ut,xt){for(let Bt=1;Bt<ht.length;Bt++){const an=Li(ut.pointCoordinate3D(ht[Bt-1]).x),tn=Li(ut.pointCoordinate3D(ht[Bt]).x);if(xt<0){if(an<tn)return{idx:Bt,t:-an/(tn-1-an)}}else if(tn<an)return{idx:Bt,t:(1-an)/(tn+1-an)}}return null}(B,F,ue?-1:1);if(!Se)return null;const{idx:Pe,t:Le}=Se;let $e=Pe>1?Xl(B.slice(0,Pe),F):[],rt=Pe<B.length?Xl(B.slice(Pe),F):[];$e=$e.map(ht=>new i.P(Li(ht.x),ht.y)),rt=rt.map(ht=>new i.P(Li(ht.x),ht.y));const et=[...$e];et.length===0&&et.push(rt[rt.length-1]);const ft=i.af(et[et.length-1].y,(rt.length===0?$e[0]:rt[0]).y,Le);let dt;return dt=ue?[new i.P(0,ft),new i.P(0,0),new i.P(1,0),new i.P(1,ft)]:[new i.P(1,ft),new i.P(1,1),new i.P(0,1),new i.P(0,ft)],et.push(...dt),rt.length===0?et.push($e[0]):et.push(...rt),{polygon:et.map(ht=>new i.aa(ht.x,ht.y)),unwrapped:!1}}(l,d);if(x)return x;const C=function(B,F){let z=!1,K=-1/0,X=0;for(let oe=0;oe<B.length-1;oe++)B[oe].x>K&&(K=B[oe].x,X=oe);for(let oe=0;oe<B.length-1;oe++){const se=(X+oe)%(B.length-1),ue=B[se],Ie=B[se+1];Math.abs(ue.x-Ie.x)>.5&&(ue.x<Ie.x?(ue.x+=1,se===0&&(B[B.length-1].x+=1)):(Ie.x+=1,se+1===B.length-1&&(B[0].x+=1)),z=!0)}const J=i.at(F.center.lng);return z&&J<Math.abs(J-1)&&B.forEach(oe=>{oe.x-=1}),{polygon:B,unwrapped:z}}(Xl(l,d).map(B=>new i.P(Li(B.x),B.y)),d);return{polygon:C.polygon.map(B=>new i.aa(B.x,B.y)),unwrapped:C.unwrapped}}}function Xl(v,l){return i.av(v,d=>{const x=l.pointCoordinate3D(d);d.x=x.x,d.y=x.y},1/256)}function Li(v){return v<0?1+v%1:v%1}function ho(v){return 100*v|0}function xc(v,l,d,x,C){const B=function(z,K){if(z)return C(z);if(K){if(v.url&&K.tiles&&v.tiles&&delete v.tiles,K.variants){if(!Array.isArray(K.variants))return C(new Error("variants must be an array"));for(const J of K.variants){if(J==null||typeof J!="object"||J.constructor!==Object)return C(new Error("variant must be an object"));if(!Array.isArray(J.capabilities))return C(new Error("capabilities must be an array"));if(J.capabilities.length===1&&J.capabilities[0]==="meshopt"){K=i.l(K,J);break}}}const X=i.ay(i.l({},K,v),["tilejson","tiles","minzoom","maxzoom","attribution","mapbox_logo","bounds","scheme","tileSize","encoding","vector_layers","raster_layers","worldview_options","worldview_default","worldview"]);X.tiles=l.canonicalizeTileset(X,v.url),C(null,X)}},F=function(z,K,X){if(!z)return null;if(!K&&!X)return z;X=X||z.worldview_default;const J=Object.values(z.language||{});if(J.length===0)return null;const oe=Object.values(z.worldview||{});if(oe.length===0)return null;const se=J.every(Ie=>Ie===K),ue=oe.every(Ie=>Ie===X);return se&&ue?z:K in(z.language_options||{})||X in(z.worldview_options||{})?null:z.language_options&&z.worldview_options?z:null}(v.data,d,x);return F?i.q.frame(()=>B(null,F)):v.url?i.n(l.transformRequest(l.normalizeSourceURL(v.url,null,d,x),i.R.Source),B):i.q.frame(()=>{const{data:z,...K}=v;B(null,K)})}class Yl{constructor(l,d,x){this.bounds=i.az.convert(this.validateBounds(l)),this.minzoom=d||0,this.maxzoom=x||24}validateBounds(l){return Array.isArray(l)&&l.length===4?[Math.max(-180,l[0]),Math.max(-90,l[1]),Math.min(180,l[2]),Math.min(90,l[3])]:[-180,-90,180,90]}contains(l){const d=Math.pow(2,l.z),x=Math.floor(i.at(this.bounds.getWest())*d),C=Math.floor(i.aA(this.bounds.getNorth())*d),B=Math.ceil(i.at(this.bounds.getEast())*d),F=Math.ceil(i.aA(this.bounds.getSouth())*d);return l.x>=x&&l.x<B&&l.y>=C&&l.y<F}}class so extends i.E{constructor(l,d,x,C){if(super(),this.id=l,this.dispatcher=x,this.type="vector",this.minzoom=0,this.maxzoom=22,this.scheme="xyz",this.tileSize=512,this.reparseOverscaled=!0,this.isTileClipped=!0,this._loaded=!1,i.l(this,i.ay(d,["url","scheme","tileSize","promoteId"])),this._options=i.l({type:"vector"},d),this._collectResourceTiming=!!d.collectResourceTiming,this.tileSize!==512)throw new Error("vector tile sources must have a tileSize of 512");this.setEventedParent(C),this._tileWorkers={},this._deduped=new i.aB}load(l){this._loaded=!1,this.fire(new i.z("dataloading",{dataType:"source"}));const d=Array.isArray(this.map._language)?this.map._language.join():this.map._language,x=this.map.getWorldview();this._tileJSONRequest=xc(this._options,this.map._requestManager,d,x,(C,B)=>{if(this._tileJSONRequest=null,this._loaded=!0,C)d&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${d}`),x&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${x}`),this.fire(new i.y(C));else if(B){if(i.l(this,B),this.hasWorldviews=!!B.worldview_options,B.worldview_default&&(this.worldviewDefault=B.worldview_default),B.vector_layers){this.vectorLayers=B.vector_layers,this.vectorLayerIds=[],this.localizableLayerIds=new Set;for(const F of B.vector_layers)this.vectorLayerIds.push(F.id),B.worldview&&B.worldview[F.source]&&this.localizableLayerIds.add(F.id)}B.bounds&&(this.tileBounds=new Yl(B.bounds,this.minzoom,this.maxzoom)),we(B.tiles,this.map._requestManager._customAccessToken),this.fire(new i.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.z("data",{dataType:"source",sourceDataType:"content"}))}l&&l(C)})}loaded(){return this._loaded}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=i.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}loadTile(l,d){const x=l.tileID.canonical.url(this.tiles,this.scheme),C=this.map._requestManager.normalizeTileURL(x),B=this.map._requestManager.transformRequest(C,i.R.Tile),F=this.map.style?this.map.style.getLut(this.scope):null,z=F?{image:F.image.clone()}:null,K={request:B,data:void 0,uid:l.uid,tileID:l.tileID,tileZoom:l.tileZoom,zoom:l.tileID.overscaledZ,maxZoom:this.maxzoom,lut:z,tileSize:this.tileSize*l.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,isSymbolTile:l.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,extraShadowCaster:l.isExtraShadowCaster,tessellationStep:this.map._tessellationStep,scaleFactor:this.map.getScaleFactor()};if(this.hasWorldviews&&i.f(x)&&(K.worldview=this.map.getWorldview()||this.worldviewDefault,K.localizableLayerIds=this.localizableLayerIds),K.request.collectResourceTiming=this._collectResourceTiming,l.actor&&l.state!=="expired")l.state==="loading"?l.reloadCallback=d:l.request=l.actor.send("reloadTile",K,X.bind(this));else if(l.actor=this._tileWorkers[C]=this._tileWorkers[C]||this.dispatcher.getActor(),this.dispatcher.ready)l.request=l.actor.send("loadTile",K,X.bind(this),void 0,!0);else{const J=i.aD.call({deduped:this._deduped},K,(oe,se)=>{oe||!se?X.call(this,oe):(K.data={cacheControl:se.cacheControl,expires:se.expires,rawData:se.rawData.slice(0)},l.actor&&l.actor.send("loadTile",K,X.bind(this),void 0,!0))},!0);l.request={cancel:J}}function X(J,oe){return delete l.request,l.aborted?d(null):J&&J.status!==404?d(J):(oe&&oe.resourceTiming&&(l.resourceTiming=oe.resourceTiming),this.map._refreshExpiredTiles&&oe&&l.setExpiryData(oe),l.loadVectorData(oe,this.map.painter),i.aE(this.dispatcher),d(null),void(l.reloadCallback&&(this.loadTile(l,l.reloadCallback),l.reloadCallback=null)))}}abortTile(l){l.request&&(l.request.cancel(),delete l.request),l.actor&&l.actor.send("abortTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope})}unloadTile(l,d){l.actor&&l.actor.send("removeTile",{uid:l.uid,type:this.type,source:this.id,scope:this.scope}),l.destroy()}hasTransition(){return!1}afterUpdate(){this._tileWorkers={}}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Jl extends i.E{constructor(l,d,x,C){super(),this.id=l,this.dispatcher=x,this.setEventedParent(C),this.type="raster",this.minzoom=0,this.maxzoom=22,this.roundZoom=!0,this.scheme="xyz",this.tileSize=512,this._loaded=!1,this._options=i.l({type:"raster"},d),i.l(this,i.ay(d,["url","scheme","tileSize"]))}load(l){this._loaded=!1,this.fire(new i.z("dataloading",{dataType:"source"})),this._tileJSONRequest=xc(this._options,this.map._requestManager,null,null,(d,x)=>{this._tileJSONRequest=null,this._loaded=!0,d?this.fire(new i.y(d)):x&&(i.l(this,x),x.raster_layers&&(this.rasterLayers=x.raster_layers,this.rasterLayerIds=this.rasterLayers.map(C=>C.id)),x.bounds&&(this.tileBounds=new Yl(x.bounds,this.minzoom,this.maxzoom)),we(x.tiles),this.fire(new i.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.z("data",{dataType:"source",sourceDataType:"content"}))),l&&l(d)})}loaded(){return this._loaded}onAdd(l){this.map=l,this.load()}reload(){this.cancelTileJSONRequest();const l=i.aC(this.id,this.scope);this.load(()=>this.map.style.clearSource(l))}setTiles(l){return this._options.tiles=l,this.reload(),this}setUrl(l){return this.url=l,this._options.url=l,this.reload(),this}onRemove(l){this.cancelTileJSONRequest()}serialize(){return i.l({},this._options)}hasTile(l){return!this.tileBounds||this.tileBounds.contains(l.canonical)}loadTile(l,d){const x=i.q.devicePixelRatio>=2,C=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),x,this.tileSize);l.request=i.o(this.map._requestManager.transformRequest(C,i.R.Tile),(B,F,z,K)=>(delete l.request,l.aborted?(l.state="unloaded",d(null)):B?(l.state="errored",d(B)):F?(this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:z,expires:K}),l.setTexture(F,this.map.painter),l.state="loaded",i.aE(this.dispatcher),void d(null)):d(null)))}abortTile(l,d){l.request&&(l.request.cancel(),delete l.request),d&&d()}unloadTile(l,d){l.texture&&l.texture instanceof i.T?(l.destroy(!0),l.texture&&l.texture instanceof i.T&&this.map.painter.saveTileTexture(l.texture)):l.destroy(),d&&d()}hasTransition(){return!1}cancelTileJSONRequest(){this._tileJSONRequest&&(this._tileJSONRequest.cancel(),this._tileJSONRequest=null)}}class Os extends Jl{constructor(l,d,x,C){super(l,d,x,C),this.type="raster-array",this.maxzoom=22,this._options=i.l({type:"raster-array"},d)}triggerRepaint(l){const d=this.map.painter._terrain,x=this.map.style.getSourceCache(this.id);d&&d.enabled&&x&&d._clearRenderCacheForTile(x.id,l.tileID),this.map.triggerRepaint()}loadTile(l,d){const x=this.map._requestManager.normalizeTileURL(l.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize),C=this.map._requestManager.transformRequest(x,i.R.Tile);l.requestParams=C,l.actor||(l.actor=this.dispatcher.getActor()),l.request=l.fetchHeader(void 0,(B,F,z,K)=>{if(delete l.request,l.aborted)return l.state="unloaded",d(null);if(B)return B.code===20?void 0:(l.state="errored",d(B));this.map._refreshExpiredTiles&&l.setExpiryData({cacheControl:z,expires:K}),l.state="empty",d(null)})}unloadTile(l,d){const x=l.texture;x&&x instanceof i.T?(l.destroy(!0),this.map.painter.saveTileTexture(x)):(l.destroy(),l.flushQueues(),l._isHeaderLoaded=!1,delete l._mrt,delete l.textureDescriptor),l.fbo&&(l.fbo.destroy(),delete l.fbo),delete l.request,delete l.requestParams,delete l.neighboringTiles,l.state="unloaded"}prepareTile(l,d,x){l._isHeaderLoaded&&(l.state!=="empty"&&(l.state="reloading"),l.fetchBand(d,x,(C,B)=>{if(C)return l.state="errored",this.fire(new i.y(C)),void this.triggerRepaint(l);B&&(l.setTexture(B,this.map.painter),l.state="loaded",this.triggerRepaint(l))}))}getInitialBand(l){if(!this.rasterLayers)return 0;const d=this.rasterLayers.find(({id:B})=>B===l),x=d&&d.fields,C=x&&x.bands&&x.bands;return C?C[0]:0}getTextureDescriptor(l,d,x){if(!l)return;const C=d.sourceLayer||this.rasterLayerIds&&this.rasterLayerIds[0];if(!C)return;let B=null;d instanceof i.aH?B=d.paint.get("raster-array-band"):d instanceof i.aI&&(B=d.paint.get("raster-particle-array-band"));const F=B||this.getInitialBand(C);if(F!=null)if(l.textureDescriptor){if(!l.updateNeeded(C,F)||x)return Object.assign({},l.textureDescriptor,{texture:l.texture})}else this.prepareTile(l,C,F)}}const Dc={vector:so,raster:Jl,"raster-dem":class extends Jl{constructor(v,l,d,x){super(v,l,d,x),this.type="raster-dem",this.maxzoom=22,this._options=i.l({type:"raster-dem"},l),this.encoding=l.encoding||"mapbox"}loadTile(v,l){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme),!1,this.tileSize);function x(C,B){C&&(v.state="errored",l(C)),B&&(v.dem=B,v.dem.onDeserialize(),v.needsHillshadePrepare=!0,v.needsDEMTextureUpload=!0,v.state="loaded",l(null))}v.request=i.o(this.map._requestManager.transformRequest(d,i.R.Tile),(function(C,B,F,z){if(delete v.request,v.aborted)v.state="unloaded",l(null);else if(C)v.state="errored",l(C);else if(B){this.map._refreshExpiredTiles&&v.setExpiryData({cacheControl:F,expires:z});const K=ImageBitmap&&B instanceof ImageBitmap&&i.t(),X=1-(B.width-i.aF(B.width))/2;X<1||v.neighboringTiles||(v.neighboringTiles=this._getNeighboringTiles(v.tileID));const J=K?B:i.q.getImageData(B,X),oe={uid:v.uid,coord:v.tileID,source:this.id,scope:this.scope,rawImageData:J,encoding:this.encoding,padding:X};v.actor&&v.state!=="expired"||(v.actor=this.dispatcher.getActor(),v.actor.send("loadDEMTile",oe,x.bind(this),void 0,!0))}}).bind(this))}_getNeighboringTiles(v){const l=v.canonical,d=Math.pow(2,l.z),x=(l.x-1+d)%d,C=l.x===0?v.wrap-1:v.wrap,B=(l.x+1+d)%d,F=l.x+1===d?v.wrap+1:v.wrap,z={};return z[new i.aG(v.overscaledZ,C,l.z,x,l.y).key]={backfilled:!1},z[new i.aG(v.overscaledZ,F,l.z,B,l.y).key]={backfilled:!1},l.y>0&&(z[new i.aG(v.overscaledZ,C,l.z,x,l.y-1).key]={backfilled:!1},z[new i.aG(v.overscaledZ,v.wrap,l.z,l.x,l.y-1).key]={backfilled:!1},z[new i.aG(v.overscaledZ,F,l.z,B,l.y-1).key]={backfilled:!1}),l.y+1<d&&(z[new i.aG(v.overscaledZ,C,l.z,x,l.y+1).key]={backfilled:!1},z[new i.aG(v.overscaledZ,v.wrap,l.z,l.x,l.y+1).key]={backfilled:!1},z[new i.aG(v.overscaledZ,F,l.z,B,l.y+1).key]={backfilled:!1}),z}},"raster-array":Os,geojson:class extends i.E{constructor(v,l,d,x){super(),this.id=v,this.type="geojson",this.minzoom=0,this.maxzoom=18,this.tileSize=512,this.isTileClipped=!0,this.reparseOverscaled=!0,this._loaded=!1,this.actor=d.getActor(),this.setEventedParent(x),this._data=l.data,this._options=i.l({},l),this._collectResourceTiming=l.collectResourceTiming,l.maxzoom!==void 0&&(this.maxzoom=l.maxzoom),l.minzoom!==void 0&&(this.minzoom=l.minzoom),l.type&&(this.type=l.type),l.attribution&&(this.attribution=l.attribution),this.promoteId=l.promoteId;const C=i.ag/this.tileSize;this.workerOptions=i.l({source:this.id,scope:this.scope,cluster:l.cluster||!1,geojsonVtOptions:{buffer:(l.buffer!==void 0?l.buffer:128)*C,tolerance:(l.tolerance!==void 0?l.tolerance:.375)*C,extent:i.ag,maxZoom:this.maxzoom,lineMetrics:l.lineMetrics||!1,generateId:l.generateId||!1},superclusterOptions:{maxZoom:l.clusterMaxZoom!==void 0?l.clusterMaxZoom:this.maxzoom-1,minPoints:Math.max(2,l.clusterMinPoints||2),extent:i.ag,radius:(l.clusterRadius!==void 0?l.clusterRadius:50)*C,log:!1,generateId:l.generateId||!1},clusterProperties:l.clusterProperties,filter:l.filter,dynamic:l.dynamic},l.workerOptions)}onAdd(v){this.map=v,this.setData(this._data)}setData(v){return this._data=v,this._updateWorkerData(),this}updateData(v){if(!this._options.dynamic)return this.fire(new i.y(new Error("Can't call updateData on a GeoJSON source with dynamic set to false.")));if(typeof v!="string"&&(v.type==="Feature"&&(v={type:"FeatureCollection",features:[v]}),v.type!=="FeatureCollection"))return this.fire(new i.y(new Error("Data to update should be a feature or a feature collection.")));if(this._coalesce&&typeof v!="string"&&typeof this._data!="string"&&this._data.type==="FeatureCollection"){const l=new Map;for(const d of this._data.features)l.set(d.id,d);for(const d of v.features)l.set(d.id,d);this._data.features=[...l.values()]}else this._data=v;return this._updateWorkerData(!0),this}getClusterExpansionZoom(v,l){return this.actor.send("geojson.getClusterExpansionZoom",{clusterId:v,source:this.id,scope:this.scope},l),this}getClusterChildren(v,l){return this.actor.send("geojson.getClusterChildren",{clusterId:v,source:this.id,scope:this.scope},l),this}getClusterLeaves(v,l,d,x){return this.actor.send("geojson.getClusterLeaves",{source:this.id,scope:this.scope,clusterId:v,limit:l,offset:d},x),this}_updateWorkerData(v=!1){if(this._pendingLoad)return void(this._coalesce=!0);this.fire(new i.z("dataloading",{dataType:"source"})),this._loaded=!1;const l=i.l({append:v},this.workerOptions);l.scope=this.scope;const d=this._data;typeof d=="string"?(l.request=this.map._requestManager.transformRequest(i.q.resolveURL(d),i.R.Source),l.request.collectResourceTiming=this._collectResourceTiming):l.data=JSON.stringify(d),this._pendingLoad=this.actor.send(`${this.type}.loadData`,l,(x,C)=>{if(this._loaded=!0,this._pendingLoad=null,x)this.fire(new i.y(x));else{const B={dataType:"source",sourceDataType:this._metadataFired?"content":"metadata"};this._collectResourceTiming&&C&&C.resourceTiming&&C.resourceTiming[this.id]&&(B.resourceTiming=C.resourceTiming[this.id]),v&&(this._partialReload=!0),this.fire(new i.z("data",B)),this._partialReload=!1,this._metadataFired=!0}this._coalesce&&(this._updateWorkerData(v),this._coalesce=!1)})}loaded(){return this._loaded}loadTile(v,l){const d=v.actor?"reloadTile":"loadTile";v.actor=this.actor;const x=this.map.style?this.map.style.getLut(this.scope):null,C=x?{image:x.image.clone()}:null,B=this._partialReload,F={type:this.type,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,maxZoom:this.maxzoom,tileSize:this.tileSize,source:this.id,lut:C,scope:this.scope,pixelRatio:i.q.devicePixelRatio,showCollisionBoxes:this.map.showCollisionBoxes,promoteId:this.promoteId,brightness:this.map.style&&this.map.style.getBrightness()||0,scaleFactor:this.map.getScaleFactor(),partial:B};v.request=this.actor.send(d,F,(z,K)=>B&&!K?(v.state="loaded",l(null)):(delete v.request,v.destroy(),v.aborted?l(null):z?l(z):(v.loadVectorData(K,this.map.painter,d==="reloadTile"),l(null))),void 0,d==="loadTile")}abortTile(v){v.request&&(v.request.cancel(),delete v.request),v.aborted=!0}unloadTile(v,l){this.actor.send("removeTile",{uid:v.uid,type:this.type,source:this.id,scope:this.scope}),v.destroy()}onRemove(v){this._pendingLoad&&this._pendingLoad.cancel()}serialize(){return i.l({},this._options,{type:this.type,data:this._data})}hasTransition(){return!1}},video:class extends i.aJ{constructor(v,l,d,x){super(v,l,d,x),this.roundZoom=!0,this.type="video",this.options=l}load(){this._loaded=!1;const v=this.options;this.urls=[];for(const l of v.urls)this.urls.push(this.map._requestManager.transformRequest(l,i.R.Source).url);i.aK(this.urls,(l,d)=>{this._loaded=!0,l?this.fire(new i.y(l)):d&&(this.video=d,this.video.loop=!0,this.video.setAttribute("playsinline",""),this.video.addEventListener("playing",()=>{this.map.triggerRepaint()}),this.map&&this.video.play(),this._finishLoading())})}pause(){this.video&&this.video.pause()}play(){this.video&&this.video.play()}seek(v){if(this.video){const l=this.video.seekable;v<l.start(0)||v>l.end(0)?this.fire(new i.y(new i.V(`sources.${this.id}`,null,`Playback for this video can be set only between the ${l.start(0)} and ${l.end(0)}-second mark.`))):this.video.currentTime=v}}getVideo(){return this.video}onAdd(v){this.map||(this.map=v,this.load(),this.video&&(this.video.play(),this.setCoordinates(this.coordinates)))}prepare(){if(Object.keys(this.tiles).length===0||this.video.readyState<2)return;const v=this.map.painter.context,l=v.gl;this.texture?this.video.paused||(this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),l.texSubImage2D(l.TEXTURE_2D,0,0,0,l.RGBA,l.UNSIGNED_BYTE,this.video)):(this.texture=new i.T(v,this.video,l.RGBA8),this.texture.bind(l.LINEAR,l.CLAMP_TO_EDGE),this.width=this.video.videoWidth,this.height=this.video.videoHeight),this._prepareData(v)}serialize(){return{type:"video",urls:this.urls,coordinates:this.coordinates}}hasTransition(){return this.video&&!this.video.paused}},image:i.aJ,model:class extends i.E{constructor(v,l,d,x){super(),this.id=v,this.type="model",this.models=[],this._loaded=!1,this._options=l}load(){const v=[];for(const l in this._options.models){const d=this._options.models[l],x=i.aM(this.map._requestManager.transformRequest(d.uri,i.R.Model).url).then(C=>{if(!C)return;const B=i.aN(C),F=new i.aO(l,d.position,d.orientation,B);F.computeBoundsAndApplyParent(),this.models.push(F)}).catch(C=>{this.fire(new i.y(new Error(`Could not load model ${l} from ${d.uri}: ${C.message}`)))});v.push(x)}return Promise.allSettled(v).then(()=>{this._loaded=!0,this.fire(new i.z("data",{dataType:"source",sourceDataType:"metadata"}))}).catch(l=>{this.fire(new i.y(new Error(`Could not load models: ${l.message}`)))})}onAdd(v){this.map=v,this.load()}hasTransition(){return!1}loaded(){return this._loaded}getModels(){return this.models}loadTile(v,l){}serialize(){return{type:"model"}}},"batched-model":class extends i.E{constructor(v,l,d,x){super(),this.type="batched-model",this.id=v,this.tileSize=512,this._options=l,this.tiles=this._options.tiles,this.maxzoom=l.maxzoom||19,this.minzoom=l.minzoom||0,this.roundZoom=!0,this.usedInConflation=!0,this.dispatcher=d,this.reparseOverscaled=!1,this.scheme="xyz",this._loaded=!1,this.setEventedParent(x)}onAdd(v){this.map=v,this.load()}load(v){this._loaded=!1,this.fire(new i.z("dataloading",{dataType:"source"}));const l=Array.isArray(this.map._language)?this.map._language.join():this.map._language,d=this.map.getWorldview();this._tileJSONRequest=xc(this._options,this.map._requestManager,l,d,(x,C)=>{this._tileJSONRequest=null,this._loaded=!0,x?(l&&console.warn(`Ensure that your requested language string is a valid BCP-47 code or list of codes. Found: ${l}`),d&&d.length!==2&&console.warn(`Requested worldview strings must be a valid ISO alpha-2 code. Found: ${d}`),this.fire(new i.y(x))):C&&(i.l(this,C),C.bounds&&(this.tileBounds=new Yl(C.bounds,this.minzoom,this.maxzoom)),we(C.tiles,this.map._requestManager._customAccessToken),this.fire(new i.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.z("data",{dataType:"source",sourceDataType:"content"}))),v&&v(x)})}hasTransition(){return!1}hasTile(v){return!this.tileBounds||this.tileBounds.contains(v.canonical)}loaded(){return this._loaded}loadTile(v,l){const d=this.map._requestManager.normalizeTileURL(v.tileID.canonical.url(this.tiles,this.scheme)),x={request:this.map._requestManager.transformRequest(d,i.R.Tile),data:void 0,uid:v.uid,tileID:v.tileID,tileZoom:v.tileZoom,zoom:v.tileID.overscaledZ,tileSize:this.tileSize*v.tileID.overscaleFactor(),type:this.type,source:this.id,scope:this.scope,showCollisionBoxes:this.map.showCollisionBoxes,isSymbolTile:v.isSymbolTile,brightness:this.map.style&&this.map.style.getBrightness()||0,lut:null,maxZoom:null,promoteId:null,pixelRatio:null,scaleFactor:null};if(v.actor&&v.state!=="expired")if(v.state==="loading")v.reloadCallback=l;else{if(v.buckets){const B=Object.values(v.buckets);for(const F of B)F.dirty=!0;return void(v.state="loaded")}v.request=v.actor.send("reloadTile",x,C.bind(this))}else v.actor=this.dispatcher.getActor(),v.request=v.actor.send("loadTile",x,C.bind(this),void 0,!0);function C(B,F){return v.aborted?l(null):B&&B.status!==404?l(B):(this.map._refreshExpiredTiles&&F&&v.setExpiryData(F),v.loadModelData(F,this.map.painter),v.state="loaded",void l(null))}}serialize(){return i.l({},this._options)}},canvas:class extends i.aJ{constructor(v,l,d,x){super(v,l,d,x),l.coordinates?Array.isArray(l.coordinates)&&l.coordinates.length===4&&!l.coordinates.some(C=>!Array.isArray(C)||C.length!==2||C.some(B=>typeof B!="number"))||this.fire(new i.y(new i.V(`sources.${v}`,null,'"coordinates" property must be an array of 4 longitude/latitude array pairs'))):this.fire(new i.y(new i.V(`sources.${v}`,null,'missing required property "coordinates"'))),l.animate&&typeof l.animate!="boolean"&&this.fire(new i.y(new i.V(`sources.${v}`,null,'optional "animate" property must be a boolean value'))),l.canvas?typeof l.canvas=="string"||l.canvas instanceof HTMLCanvasElement||this.fire(new i.y(new i.V(`sources.${v}`,null,'"canvas" must be either a string representing the ID of the canvas element from which to read, or an HTMLCanvasElement instance'))):this.fire(new i.y(new i.V(`sources.${v}`,null,'missing required property "canvas"'))),this.options=l,this.animate=l.animate===void 0||l.animate}load(){this._loaded=!0,this.canvas||(this.canvas=this.options.canvas instanceof HTMLCanvasElement?this.options.canvas:document.getElementById(this.options.canvas)),this.width=this.canvas.width,this.height=this.canvas.height,this._hasInvalidDimensions()?this.fire(new i.y(new Error("Canvas dimensions cannot be less than or equal to zero."))):(this.play=function(){this._playing=!0,this.map.triggerRepaint()},this.pause=function(){this._playing&&(this.prepare(),this._playing=!1)},this._finishLoading())}getCanvas(){return this.canvas}onAdd(v){this.map=v,this.load(),this.canvas&&this.animate&&this.play()}onRemove(v){this.pause()}prepare(){let v=!1;if(this.canvas.width!==this.width&&(this.width=this.canvas.width,v=!0),this.canvas.height!==this.height&&(this.height=this.canvas.height,v=!0),this._hasInvalidDimensions()||Object.keys(this.tiles).length===0)return;const l=this.map.painter.context;this.texture?!v&&!this._playing||this.texture instanceof i.aL||this.texture.update(this.canvas,{premultiply:!0}):this.texture=new i.T(l,this.canvas,l.gl.RGBA8,{premultiply:!0}),this._prepareData(l)}serialize(){return{type:"canvas",coordinates:this.coordinates}}hasTransition(){return this._playing}_hasInvalidDimensions(){for(const v of[this.canvas.width,this.canvas.height])if(isNaN(v)||v<=0)return!0;return!1}},custom:class extends i.E{constructor(v,l,d,x){super(),this.id=v,this.type="custom",this._dataType="raster",this._dispatcher=d,this._implementation=l,this.setEventedParent(x),this.scheme="xyz",this.minzoom=0,this.maxzoom=22,this.tileSize=512,this._loaded=!1,this.roundZoom=!0,this._implementation||this.fire(new i.y(new Error(`Missing implementation for ${this.id} custom source`))),this._implementation.loadTile||this.fire(new i.y(new Error(`Missing loadTile implementation for ${this.id} custom source`))),this._implementation.bounds&&(this.tileBounds=new Yl(this._implementation.bounds,this.minzoom,this.maxzoom)),l.update=this._update.bind(this),l.clearTiles=this._clearTiles.bind(this),l.coveringTiles=this._coveringTiles.bind(this),i.l(this,i.ay(l,["dataType","scheme","minzoom","maxzoom","tileSize","attribution","minTileCacheSize","maxTileCacheSize"]))}serialize(){return i.ay(this,["type","scheme","minzoom","maxzoom","tileSize","attribution"])}load(){this._loaded=!0,this.fire(new i.z("data",{dataType:"source",sourceDataType:"metadata"})),this.fire(new i.z("data",{dataType:"source",sourceDataType:"content"}))}loaded(){return this._loaded}onAdd(v){this.map=v,this._loaded=!1,this.fire(new i.z("dataloading",{dataType:"source"})),this._implementation.onAdd&&this._implementation.onAdd(v),this.load()}onRemove(v){this._implementation.onRemove&&this._implementation.onRemove(v)}hasTile(v){if(this._implementation.hasTile){const{x:l,y:d,z:x}=v.canonical;return this._implementation.hasTile({x:l,y:d,z:x})}return!this.tileBounds||this.tileBounds.contains(v.canonical)}loadTile(v,l){const{x:d,y:x,z:C}=v.tileID.canonical,B=new AbortController;v.request=Promise.resolve(this._implementation.loadTile({x:d,y:x,z:C},{signal:B.signal})).then((function(F){return delete v.request,v.aborted?(v.state="unloaded",l(null)):F===void 0?(v.state="errored",l(null)):F===null?(this.loadTileData(v,{width:this.tileSize,height:this.tileSize,data:null}),v.state="loaded",l(null)):function(z){return z instanceof ImageData||z instanceof HTMLCanvasElement||z instanceof ImageBitmap||z instanceof HTMLImageElement}(F)?(this.loadTileData(v,F),v.state="loaded",void l(null)):(v.state="errored",l(new Error(`Can't infer data type for ${this.id}, only raster data supported at the moment`)))}).bind(this)).catch(F=>{F.code!==20&&(v.state="errored",l(F))}),v.request.cancel=()=>B.abort()}loadTileData(v,l){v.setTexture(l,this.map.painter)}unloadTile(v,l){if(v.texture&&v.texture instanceof i.T?(v.destroy(!0),v.texture&&v.texture instanceof i.T&&this.map.painter.saveTileTexture(v.texture)):v.destroy(),this._implementation.unloadTile){const{x:d,y:x,z:C}=v.tileID.canonical;this._implementation.unloadTile({x:d,y:x,z:C})}l&&l()}abortTile(v,l){v.request&&v.request.cancel&&(v.request.cancel(),delete v.request),l&&l()}hasTransition(){return!1}_coveringTiles(){return this.map.transform.coveringTiles({tileSize:this.tileSize,minzoom:this.minzoom,maxzoom:this.maxzoom,roundZoom:this.roundZoom}).map(v=>({x:v.canonical.x,y:v.canonical.y,z:v.canonical.z}))}_clearTiles(){const v=i.aC(this.id,this.scope);this.map.style.clearSource(v)}_update(){this.fire(new i.z("data",{dataType:"source",sourceDataType:"content"}))}}},of=function(v,l,d,x){const C=new Dc[l.type](v,l,d,x);if(C.id!==v)throw new Error(`Expected Source id to be ${v} instead of ${C.id}`);return i.aP(["load","abort","unload","serialize","prepare"],C),C};function af(v,l,d,x,C=!1){const B=l.sourceCache.transform,F=l.sourceCache.tilesIn(v,l.has3DLayers,C);F.sort(vl);const z=[];for(const K of F){const X=K.tile.queryRenderedFeatures(l,K,d,x,B,C);Object.keys(X).length&&z.push({wrappedTileID:K.tile.tileID.wrapped().key,queryResults:X})}return z.length===0?{}:function(K){const X={},J={};for(const oe of K){const se=oe.queryResults,ue=oe.wrappedTileID,Ie=J[ue]=J[ue]||{};for(const Se in se){const Pe=se[Se],Le=Ie[Se]=Ie[Se]||{},$e=X[Se]=X[Se]||[];for(const rt of Pe)Le[rt.featureIndex]||(Le[rt.featureIndex]=!0,$e.push(rt))}}return X}(z)}function wh(v,l,d,x,C){const B={},F=x.queryRenderedSymbols(v),z=[];for(const K of Object.keys(F).map(Number))z.push(C[K]);z.sort(vl);for(const K of z){const X=K.featureIndex.lookupSymbolFeatures(F[K.bucketInstanceId],K.bucketIndex,K.sourceLayerIndex,l,d);for(const J in X){const oe=B[J]=B[J]||[],se=X[J];se.sort((ue,Ie)=>{const Se=K.featureSortOrder;if(Se){const Pe=Se.indexOf(ue.featureIndex);return Se.indexOf(Ie.featureIndex)-Pe}return Ie.featureIndex-ue.featureIndex});for(const ue of se)oe.push(ue)}}return B}function bh(v,l){const d=v.getRenderableIds().map(B=>v.getTileByID(B)),x=[],C={};for(let B=0;B<d.length;B++){const F=d[B],z=F.tileID.canonical.key;C[z]||(C[z]=!0,F.querySourceFeatures(x,l))}return x}function vl(v,l){const d=v.tileID,x=l.tileID;return d.overscaledZ-x.overscaledZ||d.canonical.y-x.canonical.y||d.wrap-x.wrap||d.canonical.x-x.canonical.x}function Rd(v,l){const d={};if(!l)return d;for(const x of v){const C=x.layerIds.map(B=>l.getLayer(B)).filter(Boolean);if(C.length!==0){x.layers=C,x.stateDependentLayerIds&&(x.stateDependentLayers=x.stateDependentLayerIds.map(B=>C.filter(F=>F.id===B)[0]));for(const B of C)d[B.fqid]=x}}return d}const No=32,kl=33,Ll=new Uint16Array(8184);for(let v=0;v<2046;v++){let l=v+2,d=0,x=0,C=0,B=0,F=0,z=0;for(1&l?C=B=F=No:d=x=z=No;(l>>=1)>1;){const X=d+C>>1,J=x+B>>1;1&l?(C=d,B=x,d=F,x=z):(d=C,x=B,C=F,B=z),F=X,z=J}const K=4*v;Ll[K+0]=d,Ll[K+1]=x,Ll[K+2]=C,Ll[K+3]=B}const ec=new Uint16Array(2178),iu=new Uint8Array(1089),lf=new Uint16Array(1089);function qu(v){return v===0?-.03125:v===32?.03125:0}const su={type:2,extent:i.ag,loadGeometry:()=>[[new i.P(0,0),new i.P(i.ag+1,0),new i.P(i.ag+1,i.ag+1),new i.P(0,i.ag+1),new i.P(0,0)]]};class xl{constructor(l,d,x,C,B){this.tileID=l,this.uid=i.aV(),this.uses=0,this.tileSize=d,this.tileZoom=x,this.buckets={},this.expirationTime=null,this.queryPadding=0,this.hasSymbolBuckets=!1,this.hasRTLText=!1,this.dependencies={},this.isRaster=B,C&&C.style&&(this._lastUpdatedBrightness=C.style.getBrightness()),this.expiredRequestCount=0,this.state="loading",C&&C.transform&&(this.projection=C.transform.projection)}registerFadeDuration(l){const d=l+this.timeAdded;d<i.q.now()||this.fadeEndTime&&d<this.fadeEndTime||(this.fadeEndTime=d)}wasRequested(){return this.state==="errored"||this.state==="loaded"||this.state==="reloading"}get tileTransform(){return this._tileTransform||(this._tileTransform=i.aQ(this.tileID.canonical,this.projection)),this._tileTransform}loadVectorData(l,d,x){if(this.unloadVectorData(),this.state="loaded",l){l.featureIndex&&(this.latestFeatureIndex=l.featureIndex,l.rawTileData?(this.latestRawTileData=l.rawTileData,this.latestFeatureIndex.rawTileData=l.rawTileData):this.latestRawTileData&&(this.latestFeatureIndex.rawTileData=this.latestRawTileData)),this.collisionBoxArray=l.collisionBoxArray,this.buckets=Rd(l.buckets,d.style),this.hasSymbolBuckets=!1;for(const C in this.buckets){const B=this.buckets[C];if(B instanceof i.aX){if(this.hasSymbolBuckets=!0,!x)break;B.justReloaded=!0}}if(this.hasRTLText=!1,this.hasSymbolBuckets)for(const C in this.buckets){const B=this.buckets[C];if(B instanceof i.aX&&B.hasRTLText){this.hasRTLText=!0,i.aY();break}}this.queryPadding=0;for(const C in this.buckets){const B=this.buckets[C],F=d.style.getOwnLayer(C);if(!F)continue;const z=F.queryRadius(B);this.queryPadding=Math.max(this.queryPadding,z)}l.imageAtlas&&(this.imageAtlas=l.imageAtlas),l.glyphAtlasImage&&(this.glyphAtlasImage=l.glyphAtlasImage),l.lineAtlas&&(this.lineAtlas=l.lineAtlas),this._lastUpdatedBrightness=l.brightness}else this.collisionBoxArray=new i.aW}unloadVectorData(){if(this.hasData()){for(const l in this.buckets)this.buckets[l].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&this.imageAtlasTexture.destroy(),this.glyphAtlasTexture&&this.glyphAtlasTexture.destroy(),this.lineAtlasTexture&&this.lineAtlasTexture.destroy(),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),this.latestFeatureIndex=null,this.state="unloaded"}}loadModelData(l,d,x){l&&(l.resourceTiming&&(this.resourceTiming=l.resourceTiming),this.buckets={...this.buckets,...Rd(l.buckets,d.style)},l.featureIndex&&(this.latestFeatureIndex=l.featureIndex))}getBucket(l){return this.buckets[l.fqid]}upload(l){for(const C in this.buckets){const B=this.buckets[C];B.uploadPending()&&B.upload(l)}const d=l.gl,x=this.imageAtlas;if(x&&!x.uploaded){const C=!!Object.keys(x.patternPositions).length;this.imageAtlasTexture=new i.T(l,x.image,d.RGBA8,{useMipmap:C}),this.imageAtlas.uploaded=!0}this.glyphAtlasImage&&(this.glyphAtlasTexture=new i.T(l,this.glyphAtlasImage,d.R8),this.glyphAtlasImage=null),this.lineAtlas&&!this.lineAtlas.uploaded&&(this.lineAtlasTexture=new i.T(l,this.lineAtlas.image,d.R8),this.lineAtlas.uploaded=!0)}prepare(l,d,x){if(this.imageAtlas&&this.imageAtlasTexture&&this.imageAtlas.patchUpdatedImages(l,this.imageAtlasTexture,x),!d||!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData)return;const C=d.style.getBrightness();(this._lastUpdatedBrightness||C)&&(this._lastUpdatedBrightness&&C&&Math.abs(this._lastUpdatedBrightness-C)<.001||(this.updateBuckets(d,this._lastUpdatedBrightness!==C),this._lastUpdatedBrightness=C))}queryRenderedFeatures(l,d,x,C,B,F){if(!this.latestFeatureIndex||!this.latestFeatureIndex.rawTileData&&!this.latestFeatureIndex.is3DTile)return{};const z=function(K,X){const J=i.ab.mat4.fromScaling([],[.5*K.width,.5*-K.height,1]);return i.ab.mat4.translate(J,J,[1,-1,0]),i.ab.mat4.multiply(J,J,K.calculateProjMatrix(X.toUnwrapped())),Float32Array.from(J)}(B,this.tileID);return this.latestFeatureIndex.query(l,{tilespaceGeometry:d,pixelPosMatrix:z,transform:C,availableImages:x,tileTransform:this.tileTransform})}querySourceFeatures(l,d){const x=this.latestFeatureIndex;if(!x||!x.rawTileData)return;const C=x.loadVTLayers(),B=d?d.sourceLayer:"",F=C._geojsonTileLayer||C[B];if(!F)return;const z=i.aZ(d&&d.filter),{z:K,x:X,y:J}=this.tileID.canonical,oe={z:K,x:X,y:J};for(let se=0;se<F.length;se++){const ue=F.feature(se);if(z.needGeometry){const Pe=i.a_(ue,!0);if(!z.filter(new i.a8(this.tileID.overscaledZ),Pe,this.tileID.canonical))continue}else if(!z.filter(new i.a8(this.tileID.overscaledZ),ue))continue;const Ie=x.getId(ue,B),Se=new i.a$(ue,K,X,J,Ie);Se.tile=oe,l.push(Se)}}hasData(){return this.state==="loaded"||this.state==="reloading"||this.state==="expired"}patternsLoaded(){return!!this.imageAtlas&&!!Object.keys(this.imageAtlas.patternPositions).length}setExpiryData(l){const d=this.expirationTime;if(l.cacheControl){const x=i.b0(l.cacheControl);x["max-age"]&&(this.expirationTime=Date.now()+1e3*x["max-age"])}else l.expires&&(this.expirationTime=new Date(l.expires).getTime());if(this.expirationTime){const x=Date.now();let C=!1;if(this.expirationTime>x)C=!1;else if(d)if(this.expirationTime<d)C=!0;else{const B=this.expirationTime-d;B?this.expirationTime=x+Math.max(B,3e4):C=!0}else C=!0;C?(this.expiredRequestCount++,this.state="expired"):this.expiredRequestCount=0}}getExpiryTimeout(){if(this.expirationTime)return this.expiredRequestCount?1e3*(1<<Math.min(this.expiredRequestCount-1,31)):Math.min(this.expirationTime-new Date().getTime(),Math.pow(2,31)-1)}refreshFeatureState(l){this.latestFeatureIndex&&(this.latestFeatureIndex.rawTileData||this.latestFeatureIndex.is3DTile)&&l&&this.updateBuckets(l)}updateBuckets(l,d){if(!this.latestFeatureIndex)return;const x=this.latestFeatureIndex.loadVTLayers(),C=l.style.listImages(),B=l.style.getBrightness();for(const F in this.buckets){if(!l.style.hasLayer(F))continue;const z=this.buckets[F],K=z.layers[0],X=K.sourceLayer||"_geojsonTileLayer",J=x[X],oe=l.style.getSourceCache(K.source,K.scope);let se={};oe&&(se=oe._state.getState(X,void 0));const ue=this.imageAtlas&&this.imageAtlas.patternPositions||{},Ie=Object.keys(se).length>0&&!d;(Ie&&z.stateDependentLayers.length!==0||d)&&z.update(se,J,C,ue,Ie?z.stateDependentLayers:z.layers,d,B),(z instanceof i.b1||z instanceof i.b2)&&l._terrain&&l._terrain.enabled&&oe&&z.programConfigurations.needsUpload&&l._terrain._clearRenderCacheForTile(oe.id,this.tileID);const Se=l&&l.style&&l.style.getOwnLayer(F);Se&&(this.queryPadding=Math.max(this.queryPadding,Se.queryRadius(z)))}}holdingForFade(){return this.symbolFadeHoldUntil!==void 0}symbolFadeFinished(){return!this.symbolFadeHoldUntil||this.symbolFadeHoldUntil<i.q.now()}clearFadeHold(){this.symbolFadeHoldUntil=void 0}setHoldDuration(l){this.symbolFadeHoldUntil=i.q.now()+l}setTexture(l,d){const x=d.context,C=x.gl;this.texture=this.texture||d.getTileTexture(l.width),this.texture&&this.texture instanceof i.T?this.texture.update(l):(this.texture=new i.T(x,l,C.RGBA8,{useMipmap:!0}),this.texture.bind(C.LINEAR,C.CLAMP_TO_EDGE))}setDependencies(l,d){const x={};for(const C of d)x[C]=!0;this.dependencies[l]=x}hasDependency(l,d){for(const x of l){const C=this.dependencies[x];if(C){for(const B of d)if(C[B])return!0}}return!1}clearQueryDebugViz(){}_makeDebugTileBoundsBuffers(l,d){if(!d||d.name==="mercator"||this._tileDebugBuffer)return;const x=i.b3(su,this.tileID.canonical,this.tileTransform)[0],C=new i.b4,B=new i.b5;for(let F=0;F<x.length;F++){const{x:z,y:K}=x[F];C.emplaceBack(z,K),B.emplaceBack(F)}B.emplaceBack(0),this._tileDebugIndexBuffer=l.createIndexBuffer(B),this._tileDebugBuffer=l.createVertexBuffer(C,i.b6.members),this._tileDebugSegments=i.b7.simpleSegment(0,0,C.length,B.length)}_makeTileBoundsBuffers(l,d){if(this._tileBoundsBuffer||!d||d.name==="mercator")return;const x=i.b3(su,this.tileID.canonical,this.tileTransform)[0];let C,B;if(this.isRaster){const F=function(z,K){const X=i.aQ(z,K),J=Math.pow(2,z.z);for(let Pe=0;Pe<kl;Pe++)for(let Le=0;Le<kl;Le++){const $e=i.aR((z.x+(Le+qu(Le))/No)/J),rt=i.aS((z.y+(Pe+qu(Pe))/No)/J),et=K.project($e,rt),ft=Pe*kl+Le;ec[2*ft+0]=Math.round((et.x*X.scale-X.x)*i.ag),ec[2*ft+1]=Math.round((et.y*X.scale-X.y)*i.ag)}iu.fill(0),lf.fill(0);for(let Pe=2045;Pe>=0;Pe--){const Le=4*Pe,$e=Ll[Le+0],rt=Ll[Le+1],et=Ll[Le+2],ft=Ll[Le+3],dt=$e+et>>1,ht=rt+ft>>1,ut=dt+ht-rt,xt=ht+$e-dt,Bt=rt*kl+$e,an=ft*kl+et,tn=ht*kl+dt,Ct=Math.hypot((ec[2*Bt+0]+ec[2*an+0])/2-ec[2*tn+0],(ec[2*Bt+1]+ec[2*an+1])/2-ec[2*tn+1])>=16;iu[tn]=iu[tn]||(Ct?1:0),Pe<1022&&(iu[tn]=iu[tn]||iu[(rt+xt>>1)*kl+($e+ut>>1)]||iu[(ft+xt>>1)*kl+(et+ut>>1)])}const oe=new i.aT,se=new i.aU;let ue=0;function Ie(Pe,Le){const $e=Le*kl+Pe;return lf[$e]===0&&(oe.emplaceBack(ec[2*$e+0],ec[2*$e+1],Pe*i.ag/No,Le*i.ag/No),lf[$e]=++ue),lf[$e]-1}function Se(Pe,Le,$e,rt,et,ft){const dt=Pe+$e>>1,ht=Le+rt>>1;if(Math.abs(Pe-et)+Math.abs(Le-ft)>1&&iu[ht*kl+dt])Se(et,ft,Pe,Le,dt,ht),Se($e,rt,et,ft,dt,ht);else{const ut=Ie(Pe,Le),xt=Ie($e,rt),Bt=Ie(et,ft);se.emplaceBack(ut,xt,Bt)}}return Se(0,0,No,No,No,0),Se(No,No,0,0,0,No),{vertices:oe,indices:se}}(this.tileID.canonical,d);C=F.vertices,B=F.indices}else{C=new i.aT,B=new i.aU;for(const{x:z,y:K}of x)C.emplaceBack(z,K,0,0);const F=i.b8(C.int16,void 0,4);for(let z=0;z<F.length;z+=3)B.emplaceBack(F[z],F[z+1],F[z+2])}this._tileBoundsBuffer=l.createVertexBuffer(C,i.b9.members),this._tileBoundsIndexBuffer=l.createIndexBuffer(B),this._tileBoundsSegments=i.b7.simpleSegment(0,0,C.length,B.length)}_makeGlobeTileDebugBuffers(l,d){const x=d.projection;if(!x||x.name!=="globe"||d.freezeTileCoverage)return;const C=this.tileID.canonical,B=i.ba(C,d),F=i.bb(B),z=i.ae(d.zoom);let K;z>0&&(K=i.ab.mat4.invert(new Float64Array(16),d.globeMatrix)),this._makeGlobeTileDebugBorderBuffer(l,C,d,F,K,z),this._makeGlobeTileDebugTextBuffer(l,C,d,F,K,z)}_globePoint(l,d,x,C,B,F,z){let K=i.bc(l,d,x);if(F){const X=1<<x.z,J=i.at(C.center.lng),oe=i.aA(C.center.lat),se=(x.x+.5)/X-J;let ue=0;se>.5?ue=-1:se<-.5&&(ue=1);let Ie=(l/i.ag+x.x)/X+ue,Se=(d/i.ag+x.y)/X;Ie=(Ie-J)*C._pixelsPerMercatorPixel+J,Se=(Se-oe)*C._pixelsPerMercatorPixel+oe;const Pe=[Ie*C.worldSize,Se*C.worldSize,0];i.ab.vec3.transformMat4(Pe,Pe,F),K=i.bd(K,Pe,z)}return i.ab.vec3.transformMat4(K,K,B)}_makeGlobeTileDebugBorderBuffer(l,d,x,C,B,F){const z=new i.b4,K=new i.b5,X=new i.be,J=(se,ue,Ie,Se,Pe)=>{const Le=(Ie-se)/(Pe-1),$e=(Se-ue)/(Pe-1),rt=z.length;for(let et=0;et<Pe;et++){const ft=se+et*Le,dt=ue+et*$e;z.emplaceBack(ft,dt);const ht=this._globePoint(ft,dt,d,x,C,B,F);X.emplaceBack(ht[0],ht[1],ht[2]),K.emplaceBack(rt+et)}},oe=i.ag;J(0,0,oe,0,16),J(oe,0,oe,oe,16),J(oe,oe,0,oe,16),J(0,oe,0,0,16),this._tileDebugIndexBuffer=l.createIndexBuffer(K),this._tileDebugBuffer=l.createVertexBuffer(z,i.b6.members),this._globeTileDebugBorderBuffer=l.createVertexBuffer(X,i.bf.members),this._tileDebugSegments=i.b7.simpleSegment(0,0,z.length,K.length)}_makeGlobeTileDebugTextBuffer(l,d,x,C,B,F){const z=i.ag/4,K=new i.b4,X=new i.aU,J=new i.be,oe=25;X.reserve(32),K.reserve(oe),J.reserve(oe);const se=(ue,Ie)=>oe*ue+Ie;for(let ue=0;ue<oe;ue++){const Ie=ue*z;for(let Se=0;Se<oe;Se++){const Pe=Se*z;K.emplaceBack(Pe,Ie);const Le=this._globePoint(Pe,Ie,d,x,C,B,F);J.emplaceBack(Le[0],Le[1],Le[2])}}for(let ue=0;ue<4;ue++)for(let Ie=0;Ie<4;Ie++){const Se=se(ue,Ie),Pe=se(ue,Ie+1),Le=se(ue+1,Ie),$e=se(ue+1,Ie+1);X.emplaceBack(Se,Pe,Le),X.emplaceBack(Le,Pe,$e)}this._tileDebugTextIndexBuffer=l.createIndexBuffer(X),this._tileDebugTextBuffer=l.createVertexBuffer(K,i.b6.members),this._globeTileDebugTextBuffer=l.createVertexBuffer(J,i.bf.members),this._tileDebugTextSegments=i.b7.simpleSegment(0,0,oe,32)}destroy(l=!1){for(const d in this.buckets)this.buckets[d].destroy();this.buckets={},this.imageAtlas&&(this.imageAtlas=null),this.lineAtlas&&(this.lineAtlas=null),this.imageAtlasTexture&&(this.imageAtlasTexture.destroy(),delete this.imageAtlasTexture),this.glyphAtlasTexture&&(this.glyphAtlasTexture.destroy(),delete this.glyphAtlasTexture),this.lineAtlasTexture&&(this.lineAtlasTexture.destroy(),delete this.lineAtlasTexture),this._tileBoundsBuffer&&(this._tileBoundsBuffer.destroy(),this._tileBoundsIndexBuffer.destroy(),this._tileBoundsSegments.destroy(),this._tileBoundsBuffer=null),this._tileDebugBuffer&&(this._tileDebugBuffer.destroy(),this._tileDebugSegments.destroy(),this._tileDebugBuffer=null),this._tileDebugIndexBuffer&&(this._tileDebugIndexBuffer.destroy(),this._tileDebugIndexBuffer=null),this._globeTileDebugBorderBuffer&&(this._globeTileDebugBorderBuffer.destroy(),this._globeTileDebugBorderBuffer=null),this._tileDebugTextBuffer&&(this._tileDebugTextBuffer.destroy(),this._tileDebugTextSegments.destroy(),this._tileDebugTextIndexBuffer.destroy(),this._tileDebugTextBuffer=null),this._globeTileDebugTextBuffer&&(this._globeTileDebugTextBuffer.destroy(),this._globeTileDebugTextBuffer=null),!l&&this.texture&&this.texture instanceof i.T&&(this.texture.destroy(),delete this.texture),this.hillshadeFBO&&(this.hillshadeFBO.destroy(),delete this.hillshadeFBO),this.dem&&delete this.dem,this.neighboringTiles&&delete this.neighboringTiles,this.demTexture&&(this.demTexture.destroy(),delete this.demTexture),this.rasterParticleState&&(this.rasterParticleState.destroy(),delete this.rasterParticleState),this.latestFeatureIndex=null,this.state="unloaded"}}i.bg.setPbf(i.bh);class cf extends xl{constructor(l,d,x,C,B){super(l,d,x,C,B),this._workQueue=[],this._fetchQueue=[],this._isHeaderLoaded=!1}setTexture(l,d){const x=d.context,C=x.gl;this.texture=this.texture||d.getTileTexture(l.width),this.texture&&this.texture instanceof i.T?this.texture.update(l,{premultiply:!1}):this.texture=new i.T(x,l,C.RGBA8,{premultiply:!1})}flushQueues(){for(;this._workQueue.length;)this._workQueue.pop()();for(;this._fetchQueue.length;)this._fetchQueue.pop()()}fetchHeader(l=16384,d){const x=this._mrt=new i.bg(30),C=Object.assign({},this.requestParams,{headers:{Range:"bytes=0-"+(l-1)}});return this.entireBuffer=null,this.request=i.bi(C,(B,F,z,K)=>{if(B)d(B);else try{const X=x.getHeaderLength(F);if(X>l)return void(this.request=this.fetchHeader(X,d));x.parseHeader(F),this._isHeaderLoaded=!0;let J=0;for(const oe of Object.values(x.layers))J=Math.max(J,oe.dataIndex[oe.dataIndex.length-1].last_byte);F.byteLength>=J&&(this.entireBuffer=F),d(null,this.entireBuffer||F,z,K)}catch(X){d(X)}}),this.request}fetchBand(l,d,x){const C=this._mrt;if(!this._isHeaderLoaded||!C)return void x(new Error("Tile header is not ready"));const B=this.actor;if(!B)return void x(new Error("Can't fetch tile band without an actor"));let F;const z=(oe,se)=>{F.complete(oe,se),oe?x(oe):(this.updateTextureDescriptor(l,d),x(null,this.textureDescriptor&&this.textureDescriptor.img))},K=(oe,se)=>{if(oe)return x(oe);const ue=B.send("decodeRasterArray",{buffer:se,task:F},z,void 0,!0);this._workQueue.push(()=>{ue&&ue.cancel(),F.cancel()})},X=C.getLayer(l);if(!X)return void x(new Error(`Unknown sourceLayer "${l}"`));if(X.hasDataForBand(d))return this.updateTextureDescriptor(l,d),void x(null,this.textureDescriptor?this.textureDescriptor.img:null);const J=X.getDataRange([d]);if(F=C.createDecodingTask(J),!F||F.tasks.length)if(this.flushQueues(),this.entireBuffer)K(null,this.entireBuffer.slice(J.firstByte,J.lastByte+1));else{const oe=Object.assign({},this.requestParams,{headers:{Range:`bytes=${J.firstByte}-${J.lastByte}`}}),se=i.bi(oe,K);this._fetchQueue.push(()=>{se.cancel(),F.cancel()})}else x(null)}updateNeeded(l,d){return(!this.textureDescriptor||this.textureDescriptor.band!==d||this.textureDescriptor.layer!==l)&&this.state!=="errored"}updateTextureDescriptor(l,d){if(!this._mrt)return;const x=this._mrt.getLayer(l);if(!x||!x.hasBand(d)||!x.hasDataForBand(d))return;const{bytes:C,tileSize:B,buffer:F,offset:z,scale:K}=x.getBandView(d),X=B+2*F,J={data:C,width:X,height:X},oe=this.texture;oe&&oe instanceof i.T&&oe.update(J,{premultiply:!1}),this.textureDescriptor={layer:l,band:d,img:J,buffer:F,offset:z,tileSize:B,format:x.pixelFormat,mix:[K,256*K,65536*K,16777216*K]}}}class ip{constructor(l,d){this.max=l,this.onRemove=d,this.reset()}reset(){for(const l in this.data)for(const d of this.data[l])d.timeout&&clearTimeout(d.timeout),this.onRemove(d.value);return this.data={},this.order=[],this}add(l,d,x){const C=l.wrapped().key;this.data[C]===void 0&&(this.data[C]=[]);const B={value:d,timeout:void 0};if(x!==void 0&&(B.timeout=setTimeout(()=>{this.remove(l,B)},x)),this.data[C].push(B),this.order.push(C),this.order.length>this.max){const F=this._getAndRemoveByKey(this.order[0]);F&&this.onRemove(F)}return this}has(l){return l.wrapped().key in this.data}getAndRemove(l){return this.has(l)?this._getAndRemoveByKey(l.wrapped().key):null}_getAndRemoveByKey(l){const d=this.data[l].shift();return d.timeout&&clearTimeout(d.timeout),this.data[l].length===0&&delete this.data[l],this.order.splice(this.order.indexOf(l),1),d.value}getByKey(l){const d=this.data[l];return d?d[0].value:null}get(l){return this.has(l)?this.data[l.wrapped().key][0].value:null}remove(l,d){if(!this.has(l))return this;const x=l.wrapped().key,C=d===void 0?0:this.data[x].indexOf(d),B=this.data[x][C];return this.data[x].splice(C,1),B.timeout&&clearTimeout(B.timeout),this.data[x].length===0&&delete this.data[x],this.onRemove(B.value),this.order.splice(this.order.indexOf(x),1),this}setMaxSize(l){for(this.max=l;this.order.length>this.max;){const d=this._getAndRemoveByKey(this.order[0]);d&&this.onRemove(d)}return this}filter(l){const d=[];for(const x in this.data)for(const C of this.data[x])l(C.value)||d.push(C);for(const x of d)this.remove(x.value.tileID,x)}}class Ch{constructor(){this.state={},this.stateChanges={},this.deletedStates={}}updateState(l,d,x){const C=String(d);if(this.stateChanges[l]=this.stateChanges[l]||{},this.stateChanges[l][C]=this.stateChanges[l][C]||{},i.l(this.stateChanges[l][C],x),this.deletedStates[l]===null){this.deletedStates[l]={};for(const B in this.state[l])B!==C&&(this.deletedStates[l][B]=null)}else if(this.deletedStates[l]&&this.deletedStates[l][C]===null){this.deletedStates[l][C]={};for(const B in this.state[l][C])x[B]||(this.deletedStates[l][C][B]=null)}else for(const B in x)this.deletedStates[l]&&this.deletedStates[l][C]&&this.deletedStates[l][C][B]===null&&delete this.deletedStates[l][C][B]}removeFeatureState(l,d,x){if(this.deletedStates[l]===null)return;const C=String(d);if(this.deletedStates[l]=this.deletedStates[l]||{},x&&d!==void 0)this.deletedStates[l][C]!==null&&(this.deletedStates[l][C]=this.deletedStates[l][C]||{},this.deletedStates[l][C][x]=null);else if(d!==void 0)if(this.stateChanges[l]&&this.stateChanges[l][C])for(x in this.deletedStates[l][C]={},this.stateChanges[l][C])this.deletedStates[l][C][x]=null;else this.deletedStates[l][C]=null;else this.deletedStates[l]=null}getState(l,d){const x=this.state[l]||{},C=this.stateChanges[l]||{},B=this.deletedStates[l];if(B===null)return{};if(d!==void 0){const z=String(d),K=i.l({},x[z],C[z]);if(B){const X=B[d];if(X===null)return{};for(const J in X)delete K[J]}return K}const F=i.l({},x,C);if(B)for(const z in B)delete F[z];return F}initializeTileState(l,d){l.refreshFeatureState(d)}coalesceChanges(l,d){const x={};for(const C in this.stateChanges){this.state[C]=this.state[C]||{};const B={};for(const F in this.stateChanges[C])this.state[C][F]||(this.state[C][F]={}),i.l(this.state[C][F],this.stateChanges[C][F]),B[F]=this.state[C][F];x[C]=B}for(const C in this.deletedStates){this.state[C]=this.state[C]||{};const B={};if(this.deletedStates[C]===null)for(const F in this.state[C])B[F]={},this.state[C][F]={};else for(const F in this.deletedStates[C]){if(this.deletedStates[C][F]===null)this.state[C][F]={};else if(this.state[C][F])for(const z of Object.keys(this.deletedStates[C][F]))delete this.state[C][F][z];B[F]=this.state[C][F]}x[C]=x[C]||{},i.l(x[C],B)}if(this.stateChanges={},this.deletedStates={},Object.keys(x).length!==0)for(const C in l)l[C].refreshFeatureState(d)}}class Aa extends i.E{constructor(l,d,x){super(),this.id=l,this._onlySymbols=x,d.on("data",C=>{C.dataType==="source"&&C.sourceDataType==="metadata"&&(this._sourceLoaded=!0),this._sourceLoaded&&!this._paused&&C.dataType==="source"&&C.sourceDataType==="content"&&(this.reload(),this.transform&&this.update(this.transform))}),d.on("error",()=>{this._sourceErrored=!0}),this._source=d,this._tiles={},this._cache=new ip(0,this._unloadTile.bind(this)),this._timers={},this._cacheTimers={},this._minTileCacheSize=d.minTileCacheSize,this._maxTileCacheSize=d.maxTileCacheSize,this._loadedParentTiles={},this.castsShadows=!1,this.tileCoverLift=0,this._coveredTiles={},this._shadowCasterTiles={},this._state=new Ch,this._isRaster=this._source.type==="raster"||this._source.type==="raster-dem"||this._source.type==="raster-array"||this._source.type==="custom"&&this._source._dataType==="raster"}onAdd(l){this.map=l,this._minTileCacheSize=this._minTileCacheSize===void 0&&l?l._minTileCacheSize:this._minTileCacheSize,this._maxTileCacheSize=this._maxTileCacheSize===void 0&&l?l._maxTileCacheSize:this._maxTileCacheSize}loaded(){if(this._sourceErrored)return!0;if(!this._sourceLoaded||!this._source.loaded())return!1;for(const l in this._tiles){const d=this._tiles[l];if(d.state!=="loaded"&&d.state!=="errored")return!1}return!0}getSource(){return this._source}pause(){this._paused=!0}resume(){if(!this._paused)return;const l=this._shouldReloadOnResume;this._paused=!1,this._shouldReloadOnResume=!1,l&&this.reload(),this.transform&&this.update(this.transform)}_loadTile(l,d){return l.isSymbolTile=this._onlySymbols,l.isExtraShadowCaster=this._shadowCasterTiles[l.tileID.key],this._source.loadTile(l,d)}_unloadTile(l){if(this._source.unloadTile)return this._source.unloadTile(l)}_abortTile(l){if(this._source.abortTile)return this._source.abortTile(l)}serialize(){return this._source.serialize()}prepare(l){this._source.prepare&&this._source.prepare(),this._state.coalesceChanges(this._tiles,this.map?this.map.painter:null);for(const d in this._tiles){const x=this._tiles[d];x.upload(l),x.prepare(this.map.style.imageManager,this.map?this.map.painter:null,this._source.scope)}}getIds(){return i.bj(this._tiles).map(l=>l.tileID).sort(Zu).map(l=>l.key)}getRenderableIds(l,d){const x=[];for(const C in this._tiles)this._isIdRenderable(+C,l,d)&&x.push(this._tiles[C]);return l?x.sort((C,B)=>{const F=C.tileID,z=B.tileID,K=new i.P(F.canonical.x,F.canonical.y)._rotate(this.transform.angle),X=new i.P(z.canonical.x,z.canonical.y)._rotate(this.transform.angle);return F.overscaledZ-z.overscaledZ||X.y-K.y||X.x-K.x}).map(C=>C.tileID.key):x.map(C=>C.tileID).sort(Zu).map(C=>C.key)}hasRenderableParent(l){const d=this.findLoadedParent(l,0);return!!d&&this._isIdRenderable(d.tileID.key)}_isIdRenderable(l,d,x){return this._tiles[l]&&this._tiles[l].hasData()&&!this._coveredTiles[l]&&(d||!this._tiles[l].holdingForFade())&&(x||!this._shadowCasterTiles[l])}reload(){if(this._paused)this._shouldReloadOnResume=!0;else{this._cache.reset();for(const l in this._tiles)this._tiles[l].state!=="errored"&&this._reloadTile(+l,"reloading")}}_reloadTile(l,d){const x=this._tiles[l];x&&(x.state!=="loading"&&(x.state=d),this._loadTile(x,this._tileLoaded.bind(this,x,l,d)))}_tileLoaded(l,d,x,C){if(C)if(l.state="errored",C.status!==404)this._source.fire(new i.y(C,{tile:l}));else{if(this._source.fire(new i.z("data",{dataType:"source",sourceDataType:"error",sourceId:this._source.id,tile:l})),!(l.tileID.key in this._loadedParentTiles))return;if(this._source.type==="raster-dem"&&this.usedForTerrain&&this.map.painter.terrain){const B=this.map.painter.terrain;this.update(this.transform,B.getScaledDemTileSize(),!0),B.resetTileLookupCache(this.id)}else this.update(this.transform)}else l.timeAdded=i.q.now(),x==="expired"&&(l.refreshedUponExpiration=!0),this._setTileReloadTimer(d,l),this._source.type==="raster-dem"&&l.dem&&this._backfillDEM(l),this._state.initializeTileState(l,this.map?this.map.painter:null),this._source.fire(new i.z("data",{dataType:"source",tile:l,coord:l.tileID,sourceCacheId:this.id}))}_backfillDEM(l){const d=this.getRenderableIds();for(let C=0;C<d.length;C++){const B=d[C];if(l.neighboringTiles&&l.neighboringTiles[B]){const F=this.getTileByID(B);x(l,F),x(F,l)}}function x(C,B){if(!C.dem||C.dem.borderReady)return;C.needsHillshadePrepare=!0,C.needsDEMTextureUpload=!0;let F=B.tileID.canonical.x-C.tileID.canonical.x;const z=B.tileID.canonical.y-C.tileID.canonical.y,K=Math.pow(2,C.tileID.canonical.z),X=B.tileID.key;F===0&&z===0||Math.abs(z)>1||(Math.abs(F)>1&&(Math.abs(F+K)===1?F+=K:Math.abs(F-K)===1&&(F-=K)),B.dem&&C.dem&&(C.dem.backfillBorder(B.dem,F,z),C.neighboringTiles&&C.neighboringTiles[X]&&(C.neighboringTiles[X].backfilled=!0)))}}getTile(l){return this.getTileByID(l.key)}getTileByID(l){return this._tiles[l]}_retainLoadedChildren(l,d,x,C){for(const B in this._tiles){let F=this._tiles[B];if(C[B]||!F.hasData()||F.tileID.overscaledZ<=d||F.tileID.overscaledZ>x)continue;let z=F.tileID;for(;F&&F.tileID.overscaledZ>d+1;){const X=F.tileID.scaledTo(F.tileID.overscaledZ-1);F=this._tiles[X.key],F&&F.hasData()&&(z=X)}let K=z;for(;K.overscaledZ>d;)if(K=K.scaledTo(K.overscaledZ-1),l[K.key]){C[z.key]=z;break}}}findLoadedParent(l,d){if(l.key in this._loadedParentTiles){const x=this._loadedParentTiles[l.key];return x&&x.tileID.overscaledZ>=d?x:null}for(let x=l.overscaledZ-1;x>=d;x--){const C=l.scaledTo(x),B=this._getLoadedTile(C);if(B)return B}}_getLoadedTile(l){const d=this._tiles[l.key];return d&&d.hasData()?d:this._cache.getByKey(this._source.reparseOverscaled?l.wrapped().key:l.canonical.key)}updateCacheSize(l,d){d=d||this._source.tileSize;const x=Math.ceil(l.width/d)+1,C=Math.ceil(l.height/d)+1,B=Math.floor(x*C*5),F=typeof this._minTileCacheSize=="number"?Math.max(this._minTileCacheSize,B):B,z=typeof this._maxTileCacheSize=="number"?Math.min(this._maxTileCacheSize,F):F;this._cache.setMaxSize(z)}handleWrapJump(l){const d=Math.round((l-(this._prevLng===void 0?l:this._prevLng))/360);if(this._prevLng=l,d){const x={};for(const C in this._tiles){const B=this._tiles[C];B.tileID=B.tileID.unwrapTo(B.tileID.wrap+d),x[B.tileID.key]=B}this._tiles=x;for(const C in this._timers)clearTimeout(this._timers[C]),delete this._timers[C];for(const C in this._tiles)this._setTileReloadTimer(+C,this._tiles[C])}}update(l,d,x,C){if(this.transform=l,!this._sourceLoaded||this._paused||this.transform.freezeTileCoverage||this.usedForTerrain&&!x)return;this.updateCacheSize(l,d),this.transform.projection.name!=="globe"&&this.handleWrapJump(this.transform.center.lng),this._shadowCasterTiles={},this._coveredTiles={};const B=this._source.type==="batched-model";let F,z=this._source.maxzoom;const K=this.map&&this.map.painter?this.map.painter._terrain:null;if(K&&K.sourceCache===this&&K.attenuationRange()){const oe=K.attenuationRange()[0],se=Math.floor(oe)-Math.log2(K.getDemUpscale());z>se&&(z=se)}if(this.used||this.usedForTerrain){if(this._source.tileID)F=l.getVisibleUnwrappedCoordinates(this._source.tileID).map(oe=>new i.aG(oe.canonical.z,oe.wrap,oe.canonical.z,oe.canonical.x,oe.canonical.y));else if(this.tileCoverLift!==0){const oe=l.clone();oe.tileCoverLift=this.tileCoverLift,F=oe.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:z,roundZoom:this._source.roundZoom&&!x,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:B}),this._source.minzoom<=1&&l.projection.name==="globe"&&(F.push(new i.aG(1,0,1,0,0)),F.push(new i.aG(1,0,1,1,0)),F.push(new i.aG(1,0,1,0,1)),F.push(new i.aG(1,0,1,1,1)))}else if(F=l.coveringTiles({tileSize:d||this._source.tileSize,minzoom:this._source.minzoom,maxzoom:z,roundZoom:this._source.roundZoom&&!x,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain,calculateQuadrantVisibility:B}),this._source.hasTile){const oe=this._source.hasTile.bind(this._source);F=F.filter(se=>oe(se))}}else F=[];if(F.length>0&&this.castsShadows&&C&&this.transform.projection.name!=="globe"&&!this.usedForTerrain&&!Xu(this._source.type)){const oe=l.coveringZoomLevel({tileSize:d||this._source.tileSize,roundZoom:this._source.roundZoom&&!x}),se=Math.min(oe,this._source.maxzoom);if(B){const ue=l.extendTileCover(F,se);for(const Ie of ue)F.push(Ie)}else{const ue=l.extendTileCover(F,se,C);for(const Ie of ue)this._shadowCasterTiles[Ie.key]=!0,F.push(Ie)}}const X=this._updateRetainedTiles(F);if(Xu(this._source.type)&&F.length!==0){const oe={},se={},ue=Object.keys(X);for(const Se of ue){const Pe=X[Se],Le=this._tiles[Se];if(!Le||Le.fadeEndTime&&Le.fadeEndTime<=i.q.now())continue;const $e=this.findLoadedParent(Pe,Math.max(Pe.overscaledZ-Aa.maxOverzooming,this._source.minzoom));$e&&(this._addTile($e.tileID),oe[$e.tileID.key]=$e.tileID),se[Se]=Pe}const Ie=F[F.length-1].overscaledZ;for(const Se in this._tiles){const Pe=this._tiles[Se];if(X[Se]||!Pe.hasData())continue;let Le=Pe.tileID;for(;Le.overscaledZ>Ie;){Le=Le.scaledTo(Le.overscaledZ-1);const $e=this._tiles[Le.key];if($e&&$e.hasData()&&se[Le.key]){X[Se]=Pe.tileID;break}}}for(const Se in oe)X[Se]||(this._coveredTiles[Se]=!0,X[Se]=oe[Se])}for(const oe in X)this._tiles[oe].clearFadeHold();const J=i.bk(this._tiles,X);for(const oe of J){const se=this._tiles[oe];se.hasSymbolBuckets&&!se.holdingForFade()?se.setHoldDuration(this.map._fadeDuration):se.hasSymbolBuckets&&!se.symbolFadeFinished()||this._removeTile(+oe)}this._updateLoadedParentTileCache(),this._onlySymbols&&this._source.afterUpdate&&this._source.afterUpdate()}releaseSymbolFadeTiles(){for(const l in this._tiles)this._tiles[l].holdingForFade()&&this._removeTile(+l)}_updateRetainedTiles(l){const d={};if(l.length===0)return d;const x={},C=l.reduce((X,J)=>Math.min(X,J.overscaledZ),1/0),B=l[0].overscaledZ,F=Math.max(B-Aa.maxOverzooming,this._source.minzoom),z=Math.max(B+Aa.maxUnderzooming,this._source.minzoom),K={};for(const X of l){const J=this._addTile(X);d[X.key]=X,J.hasData()||C<this._source.maxzoom&&(K[X.key]=X)}this._retainLoadedChildren(K,C,z,d);for(const X of l){let J=this._tiles[X.key];if(J.hasData())continue;if(X.canonical.z>=this._source.maxzoom){const se=X.children(this._source.maxzoom)[0],ue=this.getTile(se);if(ue&&ue.hasData()){d[se.key]=se;continue}}else{const se=X.children(this._source.maxzoom);if(d[se[0].key]&&d[se[1].key]&&d[se[2].key]&&d[se[3].key])continue}let oe=J.wasRequested();for(let se=X.overscaledZ-1;se>=F;--se){const ue=X.scaledTo(se);if(x[ue.key]||(x[ue.key]=!0,J=this.getTile(ue),!J&&oe&&(J=this._addTile(ue)),J&&(d[ue.key]=ue,oe=J.wasRequested(),J.hasData())))break}}return d}_updateLoadedParentTileCache(){this._loadedParentTiles={};for(const l in this._tiles){const d=[];let x,C=this._tiles[l].tileID;for(;C.overscaledZ>0;){if(C.key in this._loadedParentTiles){x=this._loadedParentTiles[C.key];break}d.push(C.key);const B=C.scaledTo(C.overscaledZ-1);if(x=this._getLoadedTile(B),x)break;C=B}for(const B of d)this._loadedParentTiles[B]=x}}_addTile(l){let d=this._tiles[l.key];if(d)return d.isExtraShadowCaster!==!0||this._shadowCasterTiles[l.key]||this._reloadTile(l.key,"reloading"),d;d=this._cache.getAndRemove(l),d&&(this._setTileReloadTimer(l.key,d),d.tileID=l,this._state.initializeTileState(d,this.map?this.map.painter:null),this._cacheTimers[l.key]&&(clearTimeout(this._cacheTimers[l.key]),delete this._cacheTimers[l.key],this._setTileReloadTimer(l.key,d)));const x=!!d;if(!x){const C=this.map?this.map.painter:null,B=this._source.tileSize*l.overscaleFactor();d=this._source.type==="raster-array"?new cf(l,B,this.transform.tileZoom,C,this._isRaster):new xl(l,B,this.transform.tileZoom,C,this._isRaster),this._loadTile(d,this._tileLoaded.bind(this,d,l.key,d.state))}return d?(d.uses++,this._tiles[l.key]=d,x||this._source.fire(new i.z("dataloading",{tile:d,coord:d.tileID,dataType:"source"})),d):null}_setTileReloadTimer(l,d){l in this._timers&&(clearTimeout(this._timers[l]),delete this._timers[l]);const x=d.getExpiryTimeout();x&&(this._timers[l]=setTimeout(()=>{this._reloadTile(l,"expired"),delete this._timers[l]},x))}_removeTile(l){const d=this._tiles[l];d&&(d.uses--,delete this._tiles[l],this._timers[l]&&(clearTimeout(this._timers[l]),delete this._timers[l]),d.uses>0||(d.hasData()&&d.state!=="reloading"||d.state==="empty"?this._cache.add(d.tileID,d,d.getExpiryTimeout()):(d.aborted=!0,this._abortTile(d),this._unloadTile(d))))}clearTiles(){this._shouldReloadOnResume=!1,this._paused=!1;for(const l in this._tiles)this._removeTile(+l);this._source._clear&&this._source._clear(),this._cache.reset(),this.map&&this.usedForTerrain&&this.map.painter.terrain&&this.map.painter.terrain.resetTileLookupCache(this.id)}tilesIn(l,d,x){const C=[],B=this.transform;if(!B)return C;const F=B.projection.name==="globe",z=i.at(B.center.lng);for(const K in this._tiles){const X=this._tiles[K];if(x&&X.clearQueryDebugViz(),X.holdingForFade())continue;let J;if(F){const oe=X.tileID.canonical;if(oe.z===0){const se=[Math.abs(i.aw(z,...ji(oe,-1))-z),Math.abs(i.aw(z,...ji(oe,1))-z)];J=[0,2*se.indexOf(Math.min(...se))-1]}else{const se=[Math.abs(i.aw(z,...ji(oe,-1))-z),Math.abs(i.aw(z,...ji(oe,0))-z),Math.abs(i.aw(z,...ji(oe,1))-z)];J=[se.indexOf(Math.min(...se))-1]}}else J=[0];for(const oe of J){const se=l.containsTile(X,B,d,oe);se&&C.push(se)}}return C}getShadowCasterCoordinates(){return this._getRenderableCoordinates(!1,!0)}getVisibleCoordinates(l){return this._getRenderableCoordinates(l)}_getRenderableCoordinates(l,d){const x=this.getRenderableIds(l,d).map(B=>this._tiles[B].tileID),C=this.transform.projection.name==="globe";for(const B of x)B.projMatrix=this.transform.calculateProjMatrix(B.toUnwrapped()),B.expandedProjMatrix=C?this.transform.calculateProjMatrix(B.toUnwrapped(),!1,!0):B.projMatrix;return x}sortCoordinatesByDistance(l){const d=l.slice(),x=this.transform._camera.position,C=this.transform._camera.forward(),B={};for(const F of d){const z=1/(1<<F.canonical.z);B[F.key]=((F.canonical.x+.5)*z+F.wrap-x[0])*C[0]+((F.canonical.y+.5)*z-x[1])*C[1]-x[2]*C[2]}return d.sort((F,z)=>B[F.key]-B[z.key]),d}hasTransition(){if(this._source.hasTransition())return!0;if(Xu(this._source.type))for(const l in this._tiles){const d=this._tiles[l];if(d.fadeEndTime!==void 0&&d.fadeEndTime>=i.q.now())return!0}return!1}setFeatureState(l,d,x){this._state.updateState(l=l||"_geojsonTileLayer",d,x)}removeFeatureState(l,d,x){this._state.removeFeatureState(l=l||"_geojsonTileLayer",d,x)}getFeatureState(l,d){return this._state.getState(l=l||"_geojsonTileLayer",d)}setDependencies(l,d,x){const C=this._tiles[l];C&&C.setDependencies(d,x)}reloadTilesForDependencies(l,d){for(const x in this._tiles)this._tiles[x].hasDependency(l,d)&&this._reloadTile(+x,"reloading");this._cache.filter(x=>!x.hasDependency(l,d))}_preloadTiles(l,d){if(!this._sourceLoaded){const K=()=>{this._sourceLoaded&&(this._source.off("data",K),this._preloadTiles(l,d))};return void this._source.on("data",K)}const x=new Map,C=Array.isArray(l)?l:[l],B=this.map.painter.terrain,F=this.usedForTerrain&&B?B.getScaledDemTileSize():this._source.tileSize;for(const K of C){const X=K.coveringTiles({tileSize:F,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom&&!this.usedForTerrain,reparseOverscaled:this._source.reparseOverscaled,isTerrainDEM:this.usedForTerrain});for(const J of X)x.set(J.key,J);this.usedForTerrain&&K.updateElevation(!1)}const z=Array.from(x.values());i.bl(z,(K,X)=>{const J=new xl(K,this._source.tileSize*K.overscaleFactor(),this.transform.tileZoom,this.map.painter,this._isRaster);this._loadTile(J,oe=>{this._source.type==="raster-dem"&&J.dem&&this._backfillDEM(J),X(oe,J)})},d)}}function Zu(v,l){const d=Math.abs(2*v.wrap)-+(v.wrap<0),x=Math.abs(2*l.wrap)-+(l.wrap<0);return v.overscaledZ-l.overscaledZ||x-d||l.canonical.y-v.canonical.y||l.canonical.x-v.canonical.x}function Xu(v){return v==="raster"||v==="image"||v==="video"||v==="custom"}function ji(v,l){const d=1<<v.z;return[v.x/d+l,(v.x+1)/d+l]}Aa.maxOverzooming=10,Aa.maxUnderzooming=3;class Ml{constructor(l){this.style=l,this.layersGotHidden=!1,this.layers=[]}processLayersChanged(){this.layers=[];const l=!1,d=!1;for(const x in this.style._mergedLayers){const C=this.style._mergedLayers[x];if(C.type==="fill-extrusion")this.layers.push({layer:C,visible:l,visibilityChanged:d});else if(C.type==="model"){const B=this.style.getLayerSource(C);B&&B.type==="batched-model"&&this.layers.push({layer:C,visible:l,visibilityChanged:d})}}}onNewFrame(l){this.layersGotHidden=!1;for(const d of this.layers){const x=d.layer;let C=!1;x.type==="fill-extrusion"?C=!x.isHidden(l)&&x.paint.get("fill-extrusion-opacity")>0:x.type==="model"&&(C=!x.isHidden(l)&&x.paint.get("model-opacity").constantOr(1)>0),this.layersGotHidden=this.layersGotHidden||!C&&d.visible,d.visible=C}}updateZOffset(l,d){this.currentBuildingBuckets=[];for(const C of this.layers){const B=C.layer,F=this.style.getLayerSourceCache(B);let z=1;B.type==="fill-extrusion"&&(z=C.visible?B.paint.get("fill-extrusion-vertical-scale"):0);let K=F?F.getTile(d):null;if(!K&&F&&d.canonical.z>F.getSource().minzoom){let X=d.scaledTo(Math.min(F.getSource().maxzoom,d.overscaledZ-1));for(;X.overscaledZ>=F.getSource().minzoom&&(K=F.getTile(X),!K&&X.overscaledZ!==0);)X=X.scaledTo(X.overscaledZ-1)}this.currentBuildingBuckets.push({bucket:K?K.getBucket(B):null,tileID:K?K.tileID:d,verticalScale:z})}l.hasAnyZOffset=!1;let x=!1;for(let C=0;C<l.symbolInstances.length;C++){const B=l.symbolInstances.get(C),F=B.zOffset,z=this._getHeightAtTileOffset(d,B.tileAnchorX,B.tileAnchorY);B.zOffset=z!==Number.NEGATIVE_INFINITY?z:F,x||F===B.zOffset||(x=!0),l.hasAnyZOffset||B.zOffset===0||(l.hasAnyZOffset=!0)}x&&(l.zOffsetBuffersNeedUpload=!0,l.zOffsetSortDirty=!0)}_mapCoordToOverlappingTile(l,d,x,C){let B=d,F=x;if(l.canonical.z!==C.canonical.z){const z=C.canonical,K=1/(1<<l.canonical.z-z.z);B=(d+l.canonical.x*i.ag)*K-z.x*i.ag|0,F=(x+l.canonical.y*i.ag)*K-z.y*i.ag|0}return{tileX:B,tileY:F}}_getHeightAtTileOffset(l,d,x){let C,B;for(let F=0;F<this.layers.length;++F){if(this.layers[F].layer.type!=="fill-extrusion")continue;const{bucket:z,tileID:K,verticalScale:X}=this.currentBuildingBuckets[F];if(!z)continue;const{tileX:J,tileY:oe}=this._mapCoordToOverlappingTile(l,d,x,K),se=z.getHeightAtTileCoord(J,oe);se&&se.height!==void 0&&(se.hidden?C=se.height:B=Math.max(se.height*X,B||0))}if(B!==void 0)return B;for(let F=0;F<this.layers.length;++F){const z=this.layers[F];if(z.layer.type!=="model"||!z.visible)continue;const{bucket:K,tileID:X}=this.currentBuildingBuckets[F];if(!K)continue;const{tileX:J,tileY:oe}=this._mapCoordToOverlappingTile(l,d,x,X),se=K.getHeightAtTileCoord(J,oe);if(se&&!se.hidden)return se.height===void 0&&C!==void 0?Math.min(se.maxHeight,C)*se.verticalScale:se.height?se.height*se.verticalScale:Number.NEGATIVE_INFINITY}return this.layersGotHidden?0:Number.NEGATIVE_INFINITY}}function Ur(v,l){const d={};for(const x in v)x!=="ref"&&(d[x]=v[x]);return i.bm.forEach(x=>{x in l&&(d[x]=l[x])}),d}function sp(v){v=v.slice();const l=Object.create(null);for(let d=0;d<v.length;d++)l[v[d].id]=v[d];for(let d=0;d<v.length;d++)"ref"in v[d]&&(v[d]=Ur(v[d],l[v[d].ref]));return v}const Sr={setStyle:"setStyle",addLayer:"addLayer",removeLayer:"removeLayer",setPaintProperty:"setPaintProperty",setLayoutProperty:"setLayoutProperty",setSlot:"setSlot",setFilter:"setFilter",addSource:"addSource",removeSource:"removeSource",setGeoJSONSourceData:"setGeoJSONSourceData",setLayerZoomRange:"setLayerZoomRange",setLayerProperty:"setLayerProperty",setCenter:"setCenter",setZoom:"setZoom",setBearing:"setBearing",setPitch:"setPitch",setSprite:"setSprite",setGlyphs:"setGlyphs",setTransition:"setTransition",setLight:"setLight",setTerrain:"setTerrain",setFog:"setFog",setSnow:"setSnow",setRain:"setRain",setCamera:"setCamera",setLights:"setLights",setProjection:"setProjection",addImport:"addImport",removeImport:"removeImport",updateImport:"updateImport"};function op(v,l,d){d.push({command:Sr.addSource,args:[v,l[v]]})}function _c(v,l,d){l.push({command:Sr.removeSource,args:[v]}),d[v]=!0}function ou(v,l,d,x){_c(v,d,x),op(v,l,d)}function Od(v,l,d){let x;for(x in v[d])if(v[d].hasOwnProperty(x)&&x!=="data"&&!i.bn(v[d][x],l[d][x]))return!1;for(x in l[d])if(l[d].hasOwnProperty(x)&&x!=="data"&&!i.bn(v[d][x],l[d][x]))return!1;return!0}function cr(v,l,d,x,C,B){let F;for(F in l=l||{},v=v||{})v.hasOwnProperty(F)&&(i.bn(v[F],l[F])||d.push({command:B,args:[x,F,l[F],C]}));for(F in l)l.hasOwnProperty(F)&&!v.hasOwnProperty(F)&&(i.bn(v[F],l[F])||d.push({command:B,args:[x,F,l[F],C]}))}function Pi(v){return v.id}function Ii(v,l){return v[l.id]=l,v}class Nl{constructor(l,d){this.reset(l,d)}reset(l,d){this.points=l||[],this._distances=[0];for(let x=1;x<this.points.length;x++)this._distances[x]=this._distances[x-1]+this.points[x].dist(this.points[x-1]);this.length=this._distances[this._distances.length-1],this.padding=Math.min(d||0,.5*this.length),this.paddedLength=this.length-2*this.padding}lerp(l){if(this.points.length===1)return this.points[0];l=i.aw(l,0,1);let d=1,x=this._distances[d];const C=l*this.paddedLength+this.padding;for(;x<C&&d<this._distances.length;)x=this._distances[++d];const B=d-1,F=this._distances[B],z=x-F,K=z>0?(C-F)/z:0;return this.points[B].mult(1-K).add(this.points[d].mult(K))}}class Dd{constructor(l,d,x){const C=this.boxCells=[],B=this.circleCells=[];this.xCellCount=Math.ceil(l/x),this.yCellCount=Math.ceil(d/x);for(let F=0;F<this.xCellCount*this.yCellCount;F++)C.push([]),B.push([]);this.circleKeys=[],this.boxKeys=[],this.bboxes=[],this.circles=[],this.width=l,this.height=d,this.xScale=this.xCellCount/l,this.yScale=this.yCellCount/d,this.boxUid=0,this.circleUid=0}keysLength(){return this.boxKeys.length+this.circleKeys.length}insert(l,d,x,C,B){this._forEachCell(d,x,C,B,this._insertBoxCell,this.boxUid++),this.boxKeys.push(l),this.bboxes.push(d),this.bboxes.push(x),this.bboxes.push(C),this.bboxes.push(B)}insertCircle(l,d,x,C){this._forEachCell(d-C,x-C,d+C,x+C,this._insertCircleCell,this.circleUid++),this.circleKeys.push(l),this.circles.push(d),this.circles.push(x),this.circles.push(C)}_insertBoxCell(l,d,x,C,B,F){this.boxCells[B].push(F)}_insertCircleCell(l,d,x,C,B,F){this.circleCells[B].push(F)}_query(l,d,x,C,B,F){if(x<0||l>this.width||C<0||d>this.height)return!B&&[];const z=[];if(l<=0&&d<=0&&this.width<=x&&this.height<=C){if(B)return!0;for(let K=0;K<this.boxKeys.length;K++)z.push({key:this.boxKeys[K],x1:this.bboxes[4*K],y1:this.bboxes[4*K+1],x2:this.bboxes[4*K+2],y2:this.bboxes[4*K+3]});for(let K=0;K<this.circleKeys.length;K++){const X=this.circles[3*K],J=this.circles[3*K+1],oe=this.circles[3*K+2];z.push({key:this.circleKeys[K],x1:X-oe,y1:J-oe,x2:X+oe,y2:J+oe})}return F?z.filter(F):z}return this._forEachCell(l,d,x,C,this._queryCell,z,{hitTest:B,seenUids:{box:{},circle:{}}},F),B?z.length>0:z}_queryCircle(l,d,x,C,B){const F=l-x,z=l+x,K=d-x,X=d+x;if(z<0||F>this.width||X<0||K>this.height)return!C&&[];const J=[];return this._forEachCell(F,K,z,X,this._queryCellCircle,J,{hitTest:C,circle:{x:l,y:d,radius:x},seenUids:{box:{},circle:{}}},B),C?J.length>0:J}query(l,d,x,C,B){return this._query(l,d,x,C,!1,B)}hitTest(l,d,x,C,B){return this._query(l,d,x,C,!0,B)}hitTestCircle(l,d,x,C){return this._queryCircle(l,d,x,!0,C)}_queryCell(l,d,x,C,B,F,z,K){const X=z.seenUids,J=this.boxCells[B];if(J!==null){const se=this.bboxes;for(const ue of J)if(!X.box[ue]){X.box[ue]=!0;const Ie=4*ue;if(l<=se[Ie+2]&&d<=se[Ie+3]&&x>=se[Ie+0]&&C>=se[Ie+1]&&(!K||K(this.boxKeys[ue]))){if(z.hitTest)return F.push(!0),!0;F.push({key:this.boxKeys[ue],x1:se[Ie],y1:se[Ie+1],x2:se[Ie+2],y2:se[Ie+3]})}}}const oe=this.circleCells[B];if(oe!==null){const se=this.circles;for(const ue of oe)if(!X.circle[ue]){X.circle[ue]=!0;const Ie=3*ue;if(this._circleAndRectCollide(se[Ie],se[Ie+1],se[Ie+2],l,d,x,C)&&(!K||K(this.circleKeys[ue]))){if(z.hitTest)return F.push(!0),!0;{const Se=se[Ie],Pe=se[Ie+1],Le=se[Ie+2];F.push({key:this.circleKeys[ue],x1:Se-Le,y1:Pe-Le,x2:Se+Le,y2:Pe+Le})}}}}}_queryCellCircle(l,d,x,C,B,F,z,K){const X=z.circle,J=z.seenUids,oe=this.boxCells[B];if(oe!==null){const ue=this.bboxes;for(const Ie of oe)if(!J.box[Ie]){J.box[Ie]=!0;const Se=4*Ie;if(this._circleAndRectCollide(X.x,X.y,X.radius,ue[Se+0],ue[Se+1],ue[Se+2],ue[Se+3])&&(!K||K(this.boxKeys[Ie])))return F.push(!0),!0}}const se=this.circleCells[B];if(se!==null){const ue=this.circles;for(const Ie of se)if(!J.circle[Ie]){J.circle[Ie]=!0;const Se=3*Ie;if(this._circlesCollide(ue[Se],ue[Se+1],ue[Se+2],X.x,X.y,X.radius)&&(!K||K(this.circleKeys[Ie])))return F.push(!0),!0}}}_forEachCell(l,d,x,C,B,F,z,K){const X=this._convertToXCellCoord(l),J=this._convertToYCellCoord(d),oe=this._convertToXCellCoord(x),se=this._convertToYCellCoord(C);for(let ue=X;ue<=oe;ue++)for(let Ie=J;Ie<=se;Ie++)if(B.call(this,l,d,x,C,this.xCellCount*Ie+ue,F,z,K))return}_convertToXCellCoord(l){return Math.max(0,Math.min(this.xCellCount-1,Math.floor(l*this.xScale)))}_convertToYCellCoord(l){return Math.max(0,Math.min(this.yCellCount-1,Math.floor(l*this.yScale)))}_circlesCollide(l,d,x,C,B,F){const z=C-l,K=B-d,X=x+F;return X*X>z*z+K*K}_circleAndRectCollide(l,d,x,C,B,F,z){const K=(F-C)/2,X=Math.abs(l-(C+K));if(X>K+x)return!1;const J=(z-B)/2,oe=Math.abs(d-(B+J));if(oe>J+x)return!1;if(X<=K||oe<=J)return!0;const se=X-K,ue=oe-J;return se*se+ue*ue<=x*x}}const Si={unknown:0,flipRequired:1,flipNotRequired:2},$s=Math.tan(85*Math.PI/180);function us(v,l,d,x,C,B,F){const z=i.ab.mat4.create();if(d)if(B.name==="globe"){const K=i.bo(C,l);i.ab.mat4.multiply(z,z,K)}else{const K=i.ab.mat2.invert([],F);z[0]=K[0],z[1]=K[1],z[4]=K[2],z[5]=K[3],x||i.ab.mat4.rotateZ(z,z,C.angle)}else i.ab.mat4.multiply(z,C.labelPlaneMatrix,v);return z}function wc(v,l,d,x,C,B,F){const z=us(v,l,d,x,C,B,F);return B.name==="globe"&&d||(z[2]=z[6]=z[10]=z[14]=0),z}function Da(v,l,d,x,C,B,F){if(d){if(B.name==="globe"){const z=us(v,l,d,x,C,B,F);return i.ab.mat4.invert(z,z),i.ab.mat4.multiply(z,v,z),z}{const z=i.ab.mat4.clone(v),K=i.ab.mat4.identity([]);return K[0]=F[0],K[1]=F[1],K[4]=F[2],K[5]=F[3],i.ab.mat4.multiply(z,z,K),x||i.ab.mat4.rotateZ(z,z,-C.angle),z}}return C.glCoordMatrix}function ds(v,l,d,x){const C=[v,l,d,1];d?i.ab.vec4.transformMat4(C,C,x):vo(C,C,x);const B=C[3];return C[0]/=B,C[1]/=B,C[2]/=B,C}function ap(v,l){return Math.min(.5+v/l*.5,1.5)}function Yu(v,l){const d=v[0]/v[3],x=v[1]/v[3];return d>=-l[0]&&d<=l[0]&&x>=-l[1]&&x<=l[1]}function uf(v,l,d,x,C,B,F,z,K,X){const J=d.transform,oe=x?v.textSizeData:v.iconSizeData,se=i.bp(oe,d.transform.zoom),ue=J.projection.name==="globe",Ie=[256/d.width*2+1,256/d.height*2+1],Se=x?v.text.dynamicLayoutVertexArray:v.icon.dynamicLayoutVertexArray;Se.clear();let Pe=null;ue&&(Pe=x?v.text.globeExtVertexArray:v.icon.globeExtVertexArray);const Le=v.lineVertexArray,$e=x?v.text.placedSymbolArray:v.icon.placedSymbolArray,rt=d.transform.width/d.transform.height;let et,ft=!1;for(let dt=0;dt<$e.length;dt++){const ht=$e.get(dt),{numGlyphs:ut,writingMode:xt}=ht;if(xt!==i.bq.vertical||ft||et===i.bq.horizontal||(ft=!0),et=xt,(ht.hidden||xt===i.bq.vertical)&&!ft){Rl(ut,Se);continue}ft=!1;const Bt=new i.P(ht.tileAnchorX,ht.tileAnchorY);let{x:an,y:tn,z:Ct}=J.projection.projectTilePoint(Bt.x,Bt.y,X.canonical);if(K){const[bn,tr,nr]=K(Bt);an+=bn,tn+=tr,Ct+=nr}const Rt=[an,tn,Ct,1];if(i.ab.vec4.transformMat4(Rt,Rt,l),!Yu(Rt,Ie)){Rl(ut,Se);continue}const wn=Rt[3],kn=ap(d.transform.getCameraToCenterDistance(J.projection),wn),Qn=i.br(oe,se,ht),Jt=F?Qn/kn:Qn*kn,In=ds(an,tn,Ct,C);if(In[3]<=0){Rl(ut,Se);continue}let dn={};const Dn=F?null:K,Fn=Xo(ht,Jt,!1,z,l,C,B,v.glyphOffsetArray,Le,Se,Pe,In,Bt,dn,rt,Dn,J.projection,X,F);ft=Fn.useVertical,Dn&&Fn.needsFlipping&&(dn={}),(Fn.notEnoughRoom||ft||Fn.needsFlipping&&Xo(ht,Jt,!0,z,l,C,B,v.glyphOffsetArray,Le,Se,Pe,In,Bt,dn,rt,Dn,J.projection,X,F).notEnoughRoom)&&Rl(ut,Se)}x?(v.text.dynamicLayoutVertexBuffer.updateData(Se),Pe&&v.text.globeExtVertexBuffer&&v.text.globeExtVertexBuffer.updateData(Pe)):(v.icon.dynamicLayoutVertexBuffer.updateData(Se),Pe&&v.icon.globeExtVertexBuffer&&v.icon.globeExtVertexBuffer.updateData(Pe))}function Ju(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se){const{lineStartIndex:Pe,glyphStartIndex:Le,segment:$e}=z,rt=Le+z.numGlyphs,et=Pe+z.lineLength,ft=l.getoffsetX(Le),dt=l.getoffsetX(rt-1),ht=Yo(v*ft,d,x,C,B,F,$e,Pe,et,K,X,J,oe,se,!0,ue,Ie,Se);if(!ht)return null;const ut=Yo(v*dt,d,x,C,B,F,$e,Pe,et,K,X,J,oe,se,!0,ue,Ie,Se);return ut?{first:ht,last:ut}:null}function df(v,l,d,x){return v===i.bq.horizontal&&Math.abs(x)>Math.abs(d)?{useVertical:!0}:v===i.bq.vertical?x>0?{needsFlipping:!0}:null:l!==Si.unknown&&function(C,B){return C===0||Math.abs(B/C)>$s}(d,x)?l===Si.flipRequired?{needsFlipping:!0}:null:d<0?{needsFlipping:!0}:null}function Xo(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe,Le,$e){const rt=l/24,et=v.lineOffsetX*rt,ft=v.lineOffsetY*rt,{lineStartIndex:dt,glyphStartIndex:ht,numGlyphs:ut,segment:xt,writingMode:Bt,flipState:an}=v,tn=dt+v.lineLength,Ct=Rt=>{if(J){const[Jt,In,dn]=Rt.up,Dn=X.length;i.bs(J,Dn+0,Jt,In,dn),i.bs(J,Dn+1,Jt,In,dn),i.bs(J,Dn+2,Jt,In,dn),i.bs(J,Dn+3,Jt,In,dn)}const[wn,kn,Qn]=Rt.point;i.bt(X,wn,kn,Qn,Rt.angle)};if(ut>1){const Rt=Ju(rt,z,et,ft,d,oe,se,v,K,B,ue,Se,!1,Pe,Le,$e);if(!Rt)return{notEnoughRoom:!0};if(x&&!d){let[wn,kn,Qn]=Rt.first.point,[Jt,In,dn]=Rt.last.point;[wn,kn]=ds(wn,kn,Qn,F),[Jt,In]=ds(Jt,In,dn,F);const Dn=df(Bt,an,(Jt-wn)*Ie,In-kn);if(v.flipState=Dn&&Dn.needsFlipping?Si.flipRequired:Si.flipNotRequired,Dn)return Dn}Ct(Rt.first);for(let wn=ht+1;wn<ht+ut-1;wn++){const kn=Yo(rt*z.getoffsetX(wn),et,ft,d,oe,se,xt,dt,tn,K,B,ue,Se,!1,!1,Pe,Le,$e);if(!kn)return X.length-=4*(wn-ht),{notEnoughRoom:!0};Ct(kn)}Ct(Rt.last)}else{if(x&&!d){const wn=ds(se.x,se.y,0,C),kn=dt+xt+1,Qn=new i.P(K.getx(kn),K.gety(kn)),Jt=ds(Qn.x,Qn.y,0,C),In=Jt[3]>0?Jt:ma(se,Qn,wn,1,C,void 0,Pe,Le.canonical),dn=df(Bt,an,(In[0]-wn[0])*Ie,In[1]-wn[1]);if(v.flipState=dn&&dn.needsFlipping?Si.flipRequired:Si.flipNotRequired,dn)return dn}const Rt=Yo(rt*z.getoffsetX(ht),et,ft,d,oe,se,xt,dt,tn,K,B,ue,Se,!1,!1,Pe,Le,$e);if(!Rt)return{notEnoughRoom:!0};Ct(Rt)}return{}}function yo(v,l,d,x,C){const{x:B,y:F,z}=x.projectTilePoint(v.x,v.y,l);if(!C)return ds(B,F,z,d);const[K,X,J]=C(v);return ds(B+K,F+X,z+J,d)}function ma(v,l,d,x,C,B,F,z){const K=yo(v.sub(l)._unit()._add(v),z,C,F,B);return i.ab.vec3.sub(K,d,K),i.ab.vec3.normalize(K,K),i.ab.vec3.scaleAndAdd(K,d,K,x)}function Yo(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe,Le){const $e=x?v-l:v+l;let rt=$e>0?1:-1,et=0;x&&(rt*=-1,et=Math.PI),rt<0&&(et+=Math.PI);let ft=z+F+(rt>0?0:1)|0,dt=C,ht=C,ut=0,xt=0;const Bt=Math.abs($e),an=[],tn=[];let Ct=B,Rt=Ct;const wn=()=>ma(Rt,Ct,ht,Bt-ut+1,J,se,Se,Pe.canonical);for(;ut+xt<=Bt;){if(ft+=rt,ft<z||ft>=K)return null;if(ht=dt,Rt=Ct,an.push(ht),ue&&tn.push(Rt),Ct=new i.P(X.getx(ft),X.gety(ft)),dt=oe[ft],!dt){const tr=yo(Ct,Pe.canonical,J,Se,se);dt=tr[3]>0?oe[ft]=tr:wn()}ut+=xt,xt=i.ab.vec3.distance(ht,dt)}Ie&&se&&(oe[ft]&&(dt=wn(),xt=i.ab.vec3.distance(ht,dt)),oe[ft]=dt);const kn=(Bt-ut)/xt,Qn=Ct.sub(Rt)._mult(kn)._add(Rt),Jt=i.ab.vec3.sub([],dt,ht),In=i.ab.vec3.scaleAndAdd([],ht,Jt,kn);let dn=[0,0,1],Dn=Jt[0],Fn=Jt[1];if(Le&&(dn=Se.upVector(Pe.canonical,Qn.x,Qn.y),dn[0]!==0||dn[1]!==0||dn[2]!==1)){const tr=[dn[2],0,-dn[0]],nr=i.ab.vec3.cross([],dn,tr);i.ab.vec3.normalize(tr,tr),i.ab.vec3.normalize(nr,nr),Dn=i.ab.vec3.dot(Jt,tr),Fn=i.ab.vec3.dot(Jt,nr)}if(d){const tr=i.ab.vec3.cross([],dn,Jt);i.ab.vec3.normalize(tr,tr),i.ab.vec3.scaleAndAdd(In,In,tr,d*rt)}const bn=et+Math.atan2(Fn,Dn);return an.push(In),ue&&tn.push(Qn),{point:In,angle:bn,path:an,tilePath:tn,up:dn}}function Rl(v,l){const d=l.length,x=d+4*v;l.resize(x),l.float32.fill(-1/0,4*d,4*x)}function vo(v,l,d){const x=l[0],C=l[1];return v[0]=d[0]*x+d[4]*C+d[12],v[1]=d[1]*x+d[5]*C+d[13],v[3]=d[3]*x+d[7]*C+d[15],v}const xs=100;class ll{constructor(l,d,x=new Dd(l.width+200,l.height+200,25),C=new Dd(l.width+200,l.height+200,25)){this.transform=l,this.grid=x,this.ignoredGrid=C,this.pitchfactor=Math.cos(l._pitch)*l.cameraToCenterDistance,this.screenRightBoundary=l.width+xs,this.screenBottomBoundary=l.height+xs,this.gridRightBoundary=l.width+200,this.gridBottomBoundary=l.height+200,this.fogState=d}placeCollisionBox(l,d,x,C,B,F,z,K){let X=x.projectedAnchorX,J=x.projectedAnchorY,oe=x.projectedAnchorZ;const se=x.elevation,ue=x.tileID,Ie=l.getProjection();if(se&&ue){const[dt,ht,ut]=Ie.upVector(ue.canonical,x.tileAnchorX,x.tileAnchorY),xt=Ie.upVectorScale(ue.canonical,this.transform.center.lat,this.transform.worldSize).metersToTile;X+=dt*se*xt,J+=ht*se*xt,oe+=ut*se*xt}const Se=this.projectAndGetPerspectiveRatio(z,X,J,oe,x.tileID,Ie.name==="globe"||!!se||this.transform.pitch>0,Ie),Pe=F*Se.perspectiveRatio,Le=(x.x1*d+C.x-x.padding)*Pe+Se.point.x,$e=(x.y1*d+C.y-x.padding)*Pe+Se.point.y,rt=(x.x2*d+C.x+x.padding)*Pe+Se.point.x,et=(x.y2*d+C.y+x.padding)*Pe+Se.point.y,ft=Se.perspectiveRatio<=.55||Se.occluded;return!this.isInsideGrid(Le,$e,rt,et)||!B&&this.grid.hitTest(Le,$e,rt,et,K)||ft?{box:[],offscreen:!1,occluded:Se.occluded}:{box:[Le,$e,rt,et],offscreen:this.isOffscreen(Le,$e,rt,et),occluded:!1}}placeCollisionCircles(l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se){const Pe=[],Le=this.transform.elevation,$e=l.getProjection(),rt=Le?Le.getAtTileOffsetFunc(Se,this.transform.center.lat,this.transform.worldSize,$e):null,et=new i.P(x.tileAnchorX,x.tileAnchorY);let{x:ft,y:dt,z:ht}=$e.projectTilePoint(et.x,et.y,Se.canonical);if(rt){const[Qn,Jt,In]=rt(et);ft+=Qn,dt+=Jt,ht+=In}const ut=$e.name==="globe",xt=this.projectAndGetPerspectiveRatio(z,ft,dt,ht,Se,ut||!!Le||this.transform.pitch>0,$e),{perspectiveRatio:Bt}=xt,an=(oe?F/Bt:F*Bt)/i.bw,tn=ds(ft,dt,ht,K),Ct=xt.signedDistanceFromCamera>0?Ju(an,B,x.lineOffsetX*an,x.lineOffsetY*an,!1,tn,et,x,C,K,{},Le&&!oe?rt:null,oe&&!!Le,$e,Se,oe):null;let Rt=!1,wn=!1,kn=!0;if(Ct&&!xt.occluded){const Qn=.5*ue*Bt+Ie,Jt=new i.P(-100,-100),In=new i.P(this.screenRightBoundary,this.screenBottomBoundary),dn=new Nl,{first:Dn,last:Fn}=Ct,bn=Dn.path.length;let tr=[];for(let hr=bn-1;hr>=1;hr--)tr.push(Dn.path[hr]);for(let hr=1;hr<Fn.path.length;hr++)tr.push(Fn.path[hr]);const nr=2.5*Qn;X&&(tr=tr.map(([hr,Zr,kr],Fr)=>(rt&&!ut&&(kr=rt(Fr<bn-1?Dn.tilePath[bn-1-Fr]:Fn.tilePath[Fr-bn+2])[2]),ds(hr,Zr,kr,X))),tr.some(hr=>hr[3]<=0)&&(tr=[]));let Yn=[];if(tr.length>0){let hr=1/0,Zr=-1/0,kr=1/0,Fr=-1/0;for(const Xr of tr)hr=Math.min(hr,Xr[0]),kr=Math.min(kr,Xr[1]),Zr=Math.max(Zr,Xr[0]),Fr=Math.max(Fr,Xr[1]);Zr>=Jt.x&&hr<=In.x&&Fr>=Jt.y&&kr<=In.y&&(Yn=[tr.map(Xr=>new i.P(Xr[0],Xr[1]))],(hr<Jt.x||Zr>In.x||kr<Jt.y||Fr>In.y)&&(Yn=i.bu(Yn,Jt.x,Jt.y,In.x,In.y)))}for(const hr of Yn){dn.reset(hr,.25*Qn);let Zr=0;Zr=dn.length<=.5*Qn?1:Math.ceil(dn.paddedLength/nr)+1;for(let kr=0;kr<Zr;kr++){const Fr=kr/Math.max(Zr-1,1),Xr=dn.lerp(Fr),di=Xr.x+xs,gi=Xr.y+xs;Pe.push(di,gi,Qn,0);const to=di-Qn,zs=gi-Qn,ls=di+Qn,ms=gi+Qn;if(kn=kn&&this.isOffscreen(to,zs,ls,ms),wn=wn||this.isInsideGrid(to,zs,ls,ms),!d&&this.grid.hitTestCircle(di,gi,Qn,se)&&(Rt=!0,!J))return{circles:[],offscreen:!1,collisionDetected:Rt,occluded:!1}}}}return{circles:!J&&Rt||!wn?[]:Pe,offscreen:kn,collisionDetected:Rt,occluded:xt.occluded}}queryRenderedSymbols(l){if(l.length===0||this.grid.keysLength()===0&&this.ignoredGrid.keysLength()===0)return{};const d=[];let x=1/0,C=1/0,B=-1/0,F=-1/0;for(const J of l){const oe=new i.P(J.x+xs,J.y+xs);x=Math.min(x,oe.x),C=Math.min(C,oe.y),B=Math.max(B,oe.x),F=Math.max(F,oe.y),d.push(oe)}const z=this.grid.query(x,C,B,F).concat(this.ignoredGrid.query(x,C,B,F)),K={},X={};for(const J of z){const oe=J.key;if(K[oe.bucketInstanceId]===void 0&&(K[oe.bucketInstanceId]={}),K[oe.bucketInstanceId][oe.featureIndex])continue;const se=[new i.P(J.x1,J.y1),new i.P(J.x2,J.y1),new i.P(J.x2,J.y2),new i.P(J.x1,J.y2)];i.bv(d,se)&&(K[oe.bucketInstanceId][oe.featureIndex]=!0,X[oe.bucketInstanceId]===void 0&&(X[oe.bucketInstanceId]=[]),X[oe.bucketInstanceId].push(oe.featureIndex))}return X}insertCollisionBox(l,d,x,C,B){(d?this.ignoredGrid:this.grid).insert({bucketInstanceId:x,featureIndex:C,collisionGroupID:B},l[0],l[1],l[2],l[3])}insertCollisionCircles(l,d,x,C,B){const F=d?this.ignoredGrid:this.grid,z={bucketInstanceId:x,featureIndex:C,collisionGroupID:B};for(let K=0;K<l.length;K+=4)F.insertCircle(z,l[K],l[K+1],l[K+2])}projectAndGetPerspectiveRatio(l,d,x,C,B,F,z){const K=[d,x,C,1];let X=!1;C||this.transform.pitch>0?(i.ab.vec4.transformMat4(K,K,l),this.fogState&&B&&z.name!=="globe"&&(X=function(se,ue,Ie,Se,Pe,Le){const $e=Le.calculateFogTileMatrix(Pe),rt=[ue,Ie,Se];return i.ab.vec3.transformMat4(rt,rt,$e),sr(se,i.ab.vec3.length(rt),Le.pitch,Le._fov)}(this.fogState,d,x,C,B.toUnwrapped(),this.transform)>.9)):vo(K,K,l);const J=K[3];return{point:new i.P((K[0]/J+1)/2*this.transform.width+xs,(-K[1]/J+1)/2*this.transform.height+xs),perspectiveRatio:Math.min(.5+this.transform.getCameraToCenterDistance(z)/J*.5,1.5),signedDistanceFromCamera:J,occluded:F&&K[2]>J||X}}isOffscreen(l,d,x,C){return x<xs||l>=this.screenRightBoundary||C<xs||d>this.screenBottomBoundary}isInsideGrid(l,d,x,C){return x>=0&&l<this.gridRightBoundary&&C>=0&&d<this.gridBottomBoundary}getViewportMatrix(){const l=i.ab.mat4.identity([]);return i.ab.mat4.translate(l,l,[-100,-100,0]),l}}function tc(v,l,d){const x=l.createTileMatrix(v,v.worldSize,d.toUnwrapped());return i.ab.mat4.multiply(new Float32Array(16),v.projMatrix,x)}function oo(v,l,d){if(l.projection.name===d.projection.name)return v.projMatrix;const x=d.clone();return x.setProjection(l.projection),tc(x,l.getProjection(),v)}function Sh(v,l,d){return l.name===d.projection.name?v.projMatrix:tc(d,l,v)}class _l{constructor(l,d,x,C){this.opacity=l?Math.max(0,Math.min(1,l.opacity+(l.placed?d:-d))):C&&x?1:0,this.placed=x}isHidden(){return this.opacity===0&&!this.placed}}class Qo{constructor(l,d,x,C,B,F=!1){this.text=new _l(l?l.text:null,d,x,B),this.icon=new _l(l?l.icon:null,d,C,B),this.clipped=F}isHidden(){return this.text.isHidden()&&this.icon.isHidden()}}class Ud{constructor(l,d,x,C=!1){this.text=l,this.icon=d,this.skipFade=x,this.clipped=C}}class ta{constructor(){this.invProjMatrix=i.ab.mat4.create(),this.viewportMatrix=i.ab.mat4.create(),this.circles=[]}}class Yp{constructor(l,d,x,C,B){this.bucketInstanceId=l,this.featureIndex=d,this.sourceLayerIndex=x,this.bucketIndex=C,this.tileID=B}}class bc{constructor(l){this.crossSourceCollisions=l,this.maxGroupID=0,this.collisionGroups={}}get(l){if(this.crossSourceCollisions)return{ID:0,predicate:null};if(!this.collisionGroups[l]){const d=++this.maxGroupID;this.collisionGroups[l]={ID:d,predicate:x=>x.collisionGroupID===d}}return this.collisionGroups[l]}}function au(v,l,d,x,C){const{horizontalAlign:B,verticalAlign:F}=i.bD(v),z=-(B-.5)*l,K=-(F-.5)*d,X=i.bC(v,x);return new i.P(z+X[0]*C,K+X[1]*C)}function zd(v,l,d,x,C){const B=new i.P(v,l);return d&&B._rotate(x?C:-C),B}class ga{constructor(l,d,x,C,B,F){this.transform=l.clone(),this.projection=l.projection.name,this.collisionIndex=new ll(this.transform,B),this.buildingIndex=F,this.placements={},this.opacities={},this.variableOffsets={},this.stale=!1,this.commitTime=0,this.fadeDuration=d,this.retainedQueryData={},this.collisionGroups=new bc(x),this.collisionCircleArrays={},this.prevPlacement=C,C&&(C.prevPlacement=void 0),this.placedOrientations={}}getBucketParts(l,d,x,C,B=1){const F=x.getBucket(d),z=x.latestFeatureIndex;if(!F||!z||d.fqid!==F.layerIds[0])return;const K=F.layers[0].layout,X=F.layers[0].paint,J=x.collisionBoxArray,oe=Math.pow(2,this.transform.zoom-x.tileID.overscaledZ),se=x.tileSize/i.ag,ue=x.tileID.toUnwrapped();this.transform.setProjection(F.projection);const Ie=(Se=x.tileID,Pe=F.getProjection(),Le=this.transform,Pe.name===this.projection?Le.calculateProjMatrix(Se.toUnwrapped()):tc(Le,Pe,Se));var Se,Pe,Le;const $e=K.get("text-pitch-alignment")==="map",rt=K.get("text-rotation-alignment")==="map";d.compileFilter(d.options);const et=d.dynamicFilter(),ft=d.dynamicFilterNeedsFeature(),dt=this.transform.calculatePixelsToTileUnitsMatrix(x),ht=wc(Ie,x.tileID.canonical,$e,rt,this.transform,F.getProjection(),dt);let ut=null;if($e){const Qn=Da(Ie,x.tileID.canonical,$e,rt,this.transform,F.getProjection(),dt);ut=i.ab.mat4.multiply([],this.transform.labelPlaneMatrix,Qn)}let xt=null;et&&x.latestFeatureIndex&&(xt={unwrappedTileID:ue,dynamicFilter:et,dynamicFilterNeedsFeature:ft}),this.retainedQueryData[F.bucketInstanceId]=new Yp(F.bucketInstanceId,z,F.sourceLayerIndex,F.index,x.tileID);const[Bt,an]=F.layers[0].layout.get("text-size-scale-range"),tn=i.aw(B,Bt,an),[Ct,Rt]=K.get("icon-size-scale-range"),wn=i.aw(B,Ct,Rt),kn={bucket:F,layout:K,paint:X,posMatrix:Ie,textLabelPlaneMatrix:ht,labelToScreenMatrix:ut,clippingData:xt,scale:oe,textPixelRatio:se,holdingForFade:x.holdingForFade(),collisionBoxArray:J,partiallyEvaluatedTextSize:i.bp(F.textSizeData,this.transform.zoom,tn),partiallyEvaluatedIconSize:i.bp(F.iconSizeData,this.transform.zoom,wn),collisionGroup:this.collisionGroups.get(F.sourceID),latestFeatureIndex:x.latestFeatureIndex};if(C)for(const Qn of F.sortKeyRanges){const{sortKey:Jt,symbolInstanceStart:In,symbolInstanceEnd:dn}=Qn;l.push({sortKey:Jt,symbolInstanceStart:In,symbolInstanceEnd:dn,parameters:kn})}else l.push({symbolInstanceStart:0,symbolInstanceEnd:F.symbolInstances.length,parameters:kn})}attemptAnchorPlacement(l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe,Le,$e){const{textOffset0:rt,textOffset1:et,crossTileID:ft}=se,dt=[rt,et],ht=au(l,x,C,dt,B),ut=this.collisionIndex.placeCollisionBox(Ie,B,d,zd(ht.x,ht.y,F,z,this.transform.angle),oe,K,X,J.predicate);if(Pe){const xt=Ie.getSymbolInstanceIconSize($e,this.transform.zoom,se.placedIconSymbolIndex);if(this.collisionIndex.placeCollisionBox(Ie,xt,Pe,zd(ht.x,ht.y,F,z,this.transform.angle),oe,K,X,J.predicate).box.length===0)return}if(ut.box.length>0){let xt;return this.prevPlacement&&this.prevPlacement.variableOffsets[ft]&&this.prevPlacement.placements[ft]&&this.prevPlacement.placements[ft].text&&(xt=this.prevPlacement.variableOffsets[ft].anchor),this.variableOffsets[ft]={textOffset:dt,width:x,height:C,anchor:l,textScale:B,prevAnchor:xt},this.markUsedJustification(Ie,l,se,Se),Ie.allowVerticalPlacement&&(this.markUsedOrientation(Ie,Se,se),this.placedOrientations[ft]=Se),{shift:ht,placedGlyphBoxes:ut}}}placeLayerBucketPart(l,d,x,C,B=1){const{bucket:F,layout:z,paint:K,posMatrix:X,textLabelPlaneMatrix:J,labelToScreenMatrix:oe,clippingData:se,textPixelRatio:ue,holdingForFade:Ie,collisionBoxArray:Se,partiallyEvaluatedTextSize:Pe,partiallyEvaluatedIconSize:Le,collisionGroup:$e,latestFeatureIndex:rt}=l.parameters,et=z.get("text-optional"),ft=z.get("icon-optional"),dt=z.get("text-allow-overlap"),ht=z.get("icon-allow-overlap"),ut=z.get("text-rotation-alignment")==="map",xt=z.get("text-pitch-alignment")==="map",Bt=z.get("symbol-z-elevate"),an=K.get("symbol-z-offset"),tn=z.get("symbol-elevation-reference")==="sea",[Ct,Rt]=z.get("text-size-scale-range"),[wn,kn]=z.get("icon-size-scale-range"),Qn=i.aw(B,Ct,Rt),Jt=i.aw(B,wn,kn);this.transform.setProjection(F.projection);let In=dt&&(ht||!F.hasIconData()||ft),dn=ht&&(dt||!F.hasTextData()||et);const Dn=!an.isConstant();!F.collisionArrays&&Se&&F.deserializeCollisionBoxes(Se),x&&C&&F.updateCollisionDebugBuffers(this.transform.zoom,Se,Qn,Jt);const Fn=(bn,tr,nr)=>{const{crossTileID:Yn,numVerticalGlyphVertices:hr}=bn;let Zr=null;if(se&&se.dynamicFilterNeedsFeature||Dn){const Ks=this.retainedQueryData[F.bucketInstanceId];Zr=rt.loadFeature({featureIndex:bn.featureIndex,bucketIndex:Ks.bucketIndex,sourceLayerIndex:Ks.sourceLayerIndex,layoutVertexArrayOffset:0})}if(se&&!(0,se.dynamicFilter)({zoom:this.transform.zoom,pitch:this.transform.pitch},Zr,this.retainedQueryData[F.bucketInstanceId].tileID.canonical,new i.P(bn.tileAnchorX,bn.tileAnchorY),this.transform.calculateDistanceTileData(se.unwrappedTileID)))return this.placements[Yn]=new Ud(!1,!1,!1,!0),void d.add(Yn);const kr=an.evaluate(Zr,{});if(d.has(Yn))return;if(Ie)return void(this.placements[Yn]=new Ud(!1,!1,!1));let Fr=!1,Xr=!1,di=!0,gi=!1,to=!1,zs=null,ls={box:null,offscreen:null,occluded:null},ms={box:null,offscreen:null,occluded:null},yi=null,zi=null,$r=null,Xi=0,Io=0,hl=0;nr.textFeatureIndex?Xi=nr.textFeatureIndex:bn.useRuntimeCollisionCircles&&(Xi=bn.featureIndex),nr.verticalTextFeatureIndex&&(Io=nr.verticalTextFeatureIndex);const fu=Ks=>{Ks.tileID=this.retainedQueryData[F.bucketInstanceId].tileID;const Ls=this.transform.elevation;Ks.elevation=tn?kr:kr+(Ls?Ls.getAtTileOffset(Ks.tileID,Ks.tileAnchorX,Ks.tileAnchorY):0),Ks.elevation+=bn.zOffset},lc=nr.textBox;if(lc){fu(lc);const Ks=Gi=>{let Oo=i.bq.horizontal;if(F.allowVerticalPlacement&&!Gi&&this.prevPlacement){const Za=this.prevPlacement.placedOrientations[Yn];Za&&(this.placedOrientations[Yn]=Za,Oo=Za,this.markUsedOrientation(F,Oo,bn))}return Oo},Ls=(Gi,Oo)=>{if(F.allowVerticalPlacement&&hr>0&&nr.verticalTextBox){for(const Za of F.writingModes)if(Za===i.bq.vertical?(ls=Oo(),ms=ls):ls=Gi(),ls&&ls.box&&ls.box.length)break}else ls=Gi()};if(z.get("text-variable-anchor")){let Gi=z.get("text-variable-anchor");if(this.prevPlacement&&this.prevPlacement.variableOffsets[Yn]){const Qs=this.prevPlacement.variableOffsets[Yn];Gi.indexOf(Qs.anchor)>0&&(Gi=Gi.filter($l=>$l!==Qs.anchor),Gi.unshift(Qs.anchor))}const Oo=(Qs,$l,Pu)=>{const Wc=F.getSymbolInstanceTextSize(Pe,bn,this.transform.zoom,tr),Nf=(Qs.x2-Qs.x1)*Wc+2*Qs.padding,Dh=(Qs.y2-Qs.y1)*Wc+2*Qs.padding,cc=bn.hasIconTextFit&&!ht?$l:null;cc&&fu(cc);let ku={box:[],offscreen:!1,occluded:!1};const sh=dt?2*Gi.length:Gi.length;for(let hd=0;hd<sh;++hd){const AA=this.attemptAnchorPlacement(Gi[hd%Gi.length],Qs,Nf,Dh,Wc,ut,xt,ue,X,$e,hd>=Gi.length,bn,tr,F,Pu,cc,Pe,Le);if(AA&&(ku=AA.placedGlyphBoxes,ku&&ku.box&&ku.box.length)){Fr=!0,zs=AA.shift;break}}return ku};Ls(()=>Oo(lc,nr.iconBox,i.bq.horizontal),()=>{const Qs=nr.verticalTextBox;return Qs&&fu(Qs),F.allowVerticalPlacement&&!(ls&&ls.box&&ls.box.length)&&hr>0&&Qs?Oo(Qs,nr.verticalIconBox,i.bq.vertical):{box:null,offscreen:null,occluded:null}}),ls&&(Fr=ls.box,di=ls.offscreen,gi=ls.occluded);const Za=Ks(!(!ls||!ls.box));if(!Fr&&this.prevPlacement){const Qs=this.prevPlacement.variableOffsets[Yn];Qs&&(this.variableOffsets[Yn]=Qs,this.markUsedJustification(F,Qs.anchor,bn,Za))}}else{const Gi=(Oo,Za)=>{const Qs=F.getSymbolInstanceTextSize(Pe,bn,this.transform.zoom,tr,B),$l=this.collisionIndex.placeCollisionBox(F,Qs,Oo,new i.P(0,0),dt,ue,X,$e.predicate);return $l&&$l.box&&$l.box.length&&(this.markUsedOrientation(F,Za,bn),this.placedOrientations[Yn]=Za),$l};Ls(()=>Gi(lc,i.bq.horizontal),()=>{const Oo=nr.verticalTextBox;return F.allowVerticalPlacement&&hr>0&&Oo?(fu(Oo),Gi(Oo,i.bq.vertical)):{box:null,offscreen:null,occluded:null}}),Ks(!!(ls&&ls.box&&ls.box.length))}}if(yi=ls,Fr=yi&&yi.box&&yi.box.length>0,di=yi&&yi.offscreen,gi=yi&&yi.occluded,bn.useRuntimeCollisionCircles){const Ks=F.text.placedSymbolArray.get(bn.centerJustifiedTextSymbolIndex>=0?bn.centerJustifiedTextSymbolIndex:bn.verticalPlacedTextSymbolIndex),Ls=i.br(F.textSizeData,Pe,Ks),Gi=z.get("text-padding");zi=this.collisionIndex.placeCollisionCircles(F,dt,Ks,F.lineVertexArray,F.glyphOffsetArray,Ls,X,J,oe,x,xt,$e.predicate,bn.collisionCircleDiameter*Ls/i.bw,Gi,this.retainedQueryData[F.bucketInstanceId].tileID),Fr=dt||zi.circles.length>0&&!zi.collisionDetected,di=di&&zi.offscreen,gi=zi.occluded}if(nr.iconFeatureIndex&&(hl=nr.iconFeatureIndex),nr.iconBox){const Ks=Ls=>{fu(Ls);const Gi=bn.hasIconTextFit&&zs?zd(zs.x,zs.y,ut,xt,this.transform.angle):new i.P(0,0),Oo=F.getSymbolInstanceIconSize(Le,this.transform.zoom,bn.placedIconSymbolIndex);return this.collisionIndex.placeCollisionBox(F,Oo,Ls,Gi,ht,ue,X,$e.predicate)};ms&&ms.box&&ms.box.length&&nr.verticalIconBox?($r=Ks(nr.verticalIconBox),Xr=$r.box.length>0):($r=Ks(nr.iconBox),Xr=$r.box.length>0),di=di&&$r.offscreen,to=$r.occluded}const qa=et||bn.numHorizontalGlyphVertices===0&&hr===0,da=ft||bn.numIconVertices===0;if(qa||da?da?qa||(Xr=Xr&&Fr):Fr=Xr&&Fr:Xr=Fr=Xr&&Fr,Fr&&yi&&yi.box&&this.collisionIndex.insertCollisionBox(yi.box,z.get("text-ignore-placement"),F.bucketInstanceId,ms&&ms.box&&Io?Io:Xi,$e.ID),Xr&&$r&&this.collisionIndex.insertCollisionBox($r.box,z.get("icon-ignore-placement"),F.bucketInstanceId,hl,$e.ID),zi&&(Fr&&this.collisionIndex.insertCollisionCircles(zi.circles,z.get("text-ignore-placement"),F.bucketInstanceId,Xi,$e.ID),x)){const Ks=F.bucketInstanceId;let Ls=this.collisionCircleArrays[Ks];Ls===void 0&&(Ls=this.collisionCircleArrays[Ks]=new ta);for(let Gi=0;Gi<zi.circles.length;Gi+=4)Ls.circles.push(zi.circles[Gi+0]),Ls.circles.push(zi.circles[Gi+1]),Ls.circles.push(zi.circles[Gi+2]),Ls.circles.push(zi.collisionDetected?1:0)}const Go=F.projection.name!=="globe";In=In&&(Go||!gi),dn=dn&&(Go||!to),this.placements[Yn]=new Ud(Fr||In,Xr||dn,di||F.justReloaded),d.add(Yn)};if(Bt&&this.buildingIndex&&(this.buildingIndex.updateZOffset(F,this.retainedQueryData[F.bucketInstanceId].tileID),F.updateZOffset()),F.sortFeaturesByY){const bn=F.getSortedSymbolIndexes(this.transform.angle);for(let tr=bn.length-1;tr>=0;--tr){const nr=bn[tr];Fn(F.symbolInstances.get(nr),nr,F.collisionArrays[nr])}F.hasAnyZOffset&&i.w(`${F.layerIds[0]} layer symbol-z-elevate: symbols are not sorted by elevation if symbol-z-order is evaluated to viewport-y`)}else if(F.hasAnyZOffset){const bn=F.getSortedIndexesByZOffset();for(let tr=0;tr<bn.length;++tr){const nr=bn[tr];Fn(F.symbolInstances.get(nr),nr,F.collisionArrays[nr])}}else for(let bn=l.symbolInstanceStart;bn<l.symbolInstanceEnd;bn++)Fn(F.symbolInstances.get(bn),bn,F.collisionArrays[bn]);if(x&&F.bucketInstanceId in this.collisionCircleArrays){const bn=this.collisionCircleArrays[F.bucketInstanceId];i.ab.mat4.invert(bn.invProjMatrix,X),bn.viewportMatrix=this.collisionIndex.getViewportMatrix()}F.justReloaded=!1}markUsedJustification(l,d,x,C){const{leftJustifiedTextSymbolIndex:B,centerJustifiedTextSymbolIndex:F,rightJustifiedTextSymbolIndex:z,verticalPlacedTextSymbolIndex:K,crossTileID:X}=x,J=i.bB(d),oe=C===i.bq.vertical?K:J==="left"?B:J==="center"?F:J==="right"?z:-1;B>=0&&(l.text.placedSymbolArray.get(B).crossTileID=oe>=0&&B!==oe?0:X),F>=0&&(l.text.placedSymbolArray.get(F).crossTileID=oe>=0&&F!==oe?0:X),z>=0&&(l.text.placedSymbolArray.get(z).crossTileID=oe>=0&&z!==oe?0:X),K>=0&&(l.text.placedSymbolArray.get(K).crossTileID=oe>=0&&K!==oe?0:X)}markUsedOrientation(l,d,x){const C=d===i.bq.horizontal||d===i.bq.horizontalOnly?d:0,B=d===i.bq.vertical?d:0,{leftJustifiedTextSymbolIndex:F,centerJustifiedTextSymbolIndex:z,rightJustifiedTextSymbolIndex:K,verticalPlacedTextSymbolIndex:X}=x,J=l.text.placedSymbolArray;F>=0&&(J.get(F).placedOrientation=C),z>=0&&(J.get(z).placedOrientation=C),K>=0&&(J.get(K).placedOrientation=C),X>=0&&(J.get(X).placedOrientation=B)}commit(l){this.commitTime=l,this.zoomAtLastRecencyCheck=this.transform.zoom;const d=this.prevPlacement;let x=!1;this.prevZoomAdjustment=d?d.zoomAdjustment(this.transform.zoom):0;const C=d?d.symbolFadeChange(l):1,B=d?d.opacities:{},F=d?d.variableOffsets:{},z=d?d.placedOrientations:{};for(const K in this.placements){const X=this.placements[K],J=B[K];J?(this.opacities[K]=new Qo(J,C,X.text,X.icon,null,X.clipped),x=x||X.text!==J.text.placed||X.icon!==J.icon.placed):(this.opacities[K]=new Qo(null,C,X.text,X.icon,X.skipFade,X.clipped),x=x||X.text||X.icon)}for(const K in B){const X=B[K];if(!this.opacities[K]){const J=new Qo(X,C,!1,!1);J.isHidden()||(this.opacities[K]=J,x=x||X.text.placed||X.icon.placed)}}for(const K in F)this.variableOffsets[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.variableOffsets[K]=F[K]);for(const K in z)this.placedOrientations[K]||!this.opacities[K]||this.opacities[K].isHidden()||(this.placedOrientations[K]=z[K]);x?this.lastPlacementChangeTime=l:typeof this.lastPlacementChangeTime!="number"&&(this.lastPlacementChangeTime=d?d.lastPlacementChangeTime:l)}updateLayerOpacities(l,d,x,C){const B=new Set;for(const F of d){const z=F.getBucket(l);z&&F.latestFeatureIndex&&l.fqid===z.layerIds[0]&&(this.updateBucketOpacities(z,B,F,F.collisionBoxArray,x,C,F.tileID,l.scope),z.layers[0].layout.get("symbol-z-elevate")&&this.buildingIndex&&(this.buildingIndex.updateZOffset(z,F.tileID),z.updateZOffset()))}}updateBucketOpacities(l,d,x,C,B,F,z,K){l.hasTextData()&&l.text.opacityVertexArray.clear(),l.hasIconData()&&l.icon.opacityVertexArray.clear(),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexArray.clear(),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexArray.clear();const X=l.layers[0].layout,J=l.layers[0].paint,oe=!!l.layers[0].dynamicFilter(),se=new Qo(null,0,!1,!1,!0),ue=X.get("text-allow-overlap"),Ie=X.get("icon-allow-overlap"),Se=X.get("text-variable-anchor"),Pe=X.get("text-rotation-alignment")==="map",Le=X.get("text-pitch-alignment")==="map",$e=J.get("symbol-z-offset"),rt=X.get("symbol-elevation-reference")==="sea",et=!$e.isConstant(),ft=new Qo(null,0,ue&&(Ie||!l.hasIconData()||X.get("icon-optional")),Ie&&(ue||!l.hasTextData()||X.get("text-optional")),!0);!l.collisionArrays&&C&&(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData())&&l.deserializeCollisionBoxes(C);const dt=(ut,xt,Bt)=>{for(let an=0;an<xt/4;an++)ut.opacityVertexArray.emplaceBack(Bt)};let ht=0;F&&l.updateReplacement(z,F);for(let ut=0;ut<l.symbolInstances.length;ut++){const xt=l.symbolInstances.get(ut),{numHorizontalGlyphVertices:Bt,numVerticalGlyphVertices:an,crossTileID:tn,numIconVertices:Ct,tileAnchorX:Rt,tileAnchorY:wn}=xt;let kn=null;const Qn=this.retainedQueryData[l.bucketInstanceId];et&&xt&&Qn&&(kn=x.latestFeatureIndex.loadFeature({featureIndex:xt.featureIndex,bucketIndex:Qn.bucketIndex,sourceLayerIndex:Qn.sourceLayerIndex,layoutVertexArrayOffset:0}));const Jt=$e.evaluate(kn,{}),In=d.has(tn);let dn=this.opacities[tn];In?dn=se:dn||(dn=ft,this.opacities[tn]=dn),d.add(tn);const Dn=Bt>0||an>0,Fn=Ct>0,bn=this.placedOrientations[tn],tr=bn===i.bq.vertical,nr=bn===i.bq.horizontal||bn===i.bq.horizontalOnly;!Dn&&!Fn||dn.isHidden()||ht++;let Yn=!1;if((Dn||Fn)&&F)for(const hr of l.activeReplacements){if(i.bx(hr,B,i.by.Symbol,K)||hr.min.x>Rt||Rt>hr.max.x||hr.min.y>wn||wn>hr.max.y)continue;const Zr=i.bz(Rt,wn,z.canonical,hr.footprintTileId.canonical);if(Yn=i.bA(Zr,hr.footprint),Yn)break}if(Dn){const hr=Yn?On:Sn(dn.text);dt(l.text,Bt,tr?On:hr),dt(l.text,an,nr?On:hr);const Zr=dn.text.isHidden(),{leftJustifiedTextSymbolIndex:kr,centerJustifiedTextSymbolIndex:Fr,rightJustifiedTextSymbolIndex:Xr,verticalPlacedTextSymbolIndex:di}=xt,gi=l.text.placedSymbolArray,to=Zr||tr?1:0;kr>=0&&(gi.get(kr).hidden=to),Fr>=0&&(gi.get(Fr).hidden=to),Xr>=0&&(gi.get(Xr).hidden=to),di>=0&&(gi.get(di).hidden=Zr||nr?1:0);const zs=this.variableOffsets[tn];zs&&this.markUsedJustification(l,zs.anchor,xt,bn);const ls=this.placedOrientations[tn];ls&&(this.markUsedJustification(l,"left",xt,ls),this.markUsedOrientation(l,ls,xt))}if(Fn){const hr=Yn?On:Sn(dn.icon),{placedIconSymbolIndex:Zr,verticalPlacedIconSymbolIndex:kr}=xt,Fr=l.icon.placedSymbolArray,Xr=dn.icon.isHidden()?1:0;Zr>=0&&(dt(l.icon,Ct,tr?On:hr),Fr.get(Zr).hidden=Xr),kr>=0&&(dt(l.icon,xt.numVerticalIconVertices,nr?On:hr),Fr.get(kr).hidden=Xr)}if(l.hasIconCollisionBoxData()||l.hasTextCollisionBoxData()){const hr=l.collisionArrays[ut];if(hr){let Zr=new i.P(0,0),kr=!0;if(hr.textBox||hr.verticalTextBox){if(Se){const Xr=this.variableOffsets[tn];Xr?(Zr=au(Xr.anchor,Xr.width,Xr.height,Xr.textOffset,Xr.textScale),Pe&&Zr._rotate(Le?this.transform.angle:-this.transform.angle)):kr=!1}oe&&(kr=!dn.clipped),hr.textBox&&Ds(l.textCollisionBox.collisionVertexArray,dn.text.placed,!kr||tr,Jt,rt,Zr.x,Zr.y),hr.verticalTextBox&&Ds(l.textCollisionBox.collisionVertexArray,dn.text.placed,!kr||nr,Jt,rt,Zr.x,Zr.y)}const Fr=kr&&!!(!nr&&hr.verticalIconBox);hr.iconBox&&Ds(l.iconCollisionBox.collisionVertexArray,dn.icon.placed,Fr,Jt,rt,xt.hasIconTextFit?Zr.x:0,xt.hasIconTextFit?Zr.y:0),hr.verticalIconBox&&Ds(l.iconCollisionBox.collisionVertexArray,dn.icon.placed,!Fr,Jt,rt,xt.hasIconTextFit?Zr.x:0,xt.hasIconTextFit?Zr.y:0)}}}if(l.fullyClipped=ht===0,l.sortFeatures(this.transform.angle),this.retainedQueryData[l.bucketInstanceId]&&(this.retainedQueryData[l.bucketInstanceId].featureSortOrder=l.featureSortOrder),l.hasTextData()&&l.text.opacityVertexBuffer&&l.text.opacityVertexBuffer.updateData(l.text.opacityVertexArray),l.hasIconData()&&l.icon.opacityVertexBuffer&&l.icon.opacityVertexBuffer.updateData(l.icon.opacityVertexArray),l.hasIconCollisionBoxData()&&l.iconCollisionBox.collisionVertexBuffer&&l.iconCollisionBox.collisionVertexBuffer.updateData(l.iconCollisionBox.collisionVertexArray),l.hasTextCollisionBoxData()&&l.textCollisionBox.collisionVertexBuffer&&l.textCollisionBox.collisionVertexBuffer.updateData(l.textCollisionBox.collisionVertexArray),l.bucketInstanceId in this.collisionCircleArrays){const ut=this.collisionCircleArrays[l.bucketInstanceId];l.placementInvProjMatrix=ut.invProjMatrix,l.placementViewportMatrix=ut.viewportMatrix,l.collisionCircleArray=ut.circles,delete this.collisionCircleArrays[l.bucketInstanceId]}}symbolFadeChange(l){return this.fadeDuration===0?1:(l-this.commitTime)/this.fadeDuration+this.prevZoomAdjustment}zoomAdjustment(l){return Math.max(0,(this.transform.zoom-l)/1.5)}hasTransitions(l){return this.stale||l-this.lastPlacementChangeTime<this.fadeDuration}stillRecent(l,d){const x=this.zoomAtLastRecencyCheck===d?1-this.zoomAdjustment(d):1;return this.zoomAtLastRecencyCheck=d,this.commitTime+this.fadeDuration*x>l}setStale(){this.stale=!0}}function Ds(v,l,d,x,C,B,F){v.emplaceBack(l?1:0,d?1:0,B||0,F||0,x,C?1:0),v.emplaceBack(l?1:0,d?1:0,B||0,F||0,x,C?1:0),v.emplaceBack(l?1:0,d?1:0,B||0,F||0,x,C?1:0),v.emplaceBack(l?1:0,d?1:0,B||0,F||0,x,C?1:0)}const nc=Math.pow(2,25),wu=Math.pow(2,24),Qd=Math.pow(2,17),ce=Math.pow(2,16),Ke=Math.pow(2,9),Ft=Math.pow(2,8),sn=Math.pow(2,1);function Sn(v){if(v.opacity===0&&!v.placed)return 0;if(v.opacity===1&&v.placed)return 4294967295;const l=v.placed?1:0,d=Math.floor(127*v.opacity);return d*nc+l*wu+d*Qd+l*ce+d*Ke+l*Ft+d*sn+l}const On=0;class dr{constructor(l){this._sortAcrossTiles=l.layout.get("symbol-z-order")!=="viewport-y"&&l.layout.get("symbol-sort-key").constantOr(1)!==void 0,this._currentTileIndex=0,this._currentPartIndex=0,this._seenCrossTileIDs=new Set,this._bucketParts=[]}continuePlacement(l,d,x,C,B,F){const z=this._bucketParts;for(;this._currentTileIndex<l.length;)if(d.getBucketParts(z,C,l[this._currentTileIndex],this._sortAcrossTiles,F),this._currentTileIndex++,B())return!0;for(this._sortAcrossTiles&&(this._sortAcrossTiles=!1,z.sort((K,X)=>K.sortKey-X.sortKey));this._currentPartIndex<z.length;){const K=z[this._currentPartIndex];if(d.placeLayerBucketPart(K,this._seenCrossTileIDs,x,K.symbolInstanceStart===0,F),this._currentPartIndex++,B())return!0}return!1}}class zr{constructor(l,d,x,C,B,F,z,K,X){this.placement=new ga(l,B,F,z,K,X),this._currentPlacementIndex=d.length-1,this._forceFullPlacement=x,this._showCollisionBoxes=C,this._done=!1}isDone(){return this._done}continuePlacement(l,d,x,C,B){const F=i.q.now(),z=()=>{const K=i.q.now()-F;return!this._forceFullPlacement&&K>2};for(;this._currentPlacementIndex>=0;){const K=d[l[this._currentPlacementIndex]],X=this.placement.collisionIndex.transform.zoom;if(K.type==="symbol"&&(!K.minzoom||K.minzoom<=X)&&(!K.maxzoom||K.maxzoom>X)){const J=K,oe=J.layout.get("symbol-z-elevate"),se=J.layout.get("symbol-sort-key").constantOr(1)!==void 0,ue=J.layout.get("symbol-z-order"),Ie=ue==="viewport-y"||ue==="auto"&&!(ue!=="viewport-y"&&se),Se=J.layout.get("text-allow-overlap")||J.layout.get("icon-allow-overlap")||J.layout.get("text-ignore-placement")||J.layout.get("icon-ignore-placement"),Pe=Ie&&Se,Le=this._inProgressLayer=this._inProgressLayer||new dr(J),$e=i.aC(K.source,K.scope);if(Le.continuePlacement(oe||Pe?C[$e]:x[$e],this.placement,this._showCollisionBoxes,K,z,B))return;delete this._inProgressLayer}this._currentPlacementIndex--}this._done=!0}commit(l){return this.placement.commit(l),this.placement}}const Jr=512/i.ag/2;class Yi{constructor(l,d,x){this.tileID=l,this.bucketInstanceId=x,this.index=new i.bE(d.length,16,Int32Array),this.keys=[],this.crossTileIDs=[];const C=l.canonical.x*i.ag,B=l.canonical.y*i.ag;for(let F=0;F<d.length;F++){const{key:z,crossTileID:K,tileAnchorX:X,tileAnchorY:J}=d.get(F),oe=Math.floor((C+X)*Jr),se=Math.floor((B+J)*Jr);this.index.add(oe,se),this.keys.push(z),this.crossTileIDs.push(K)}this.index.finish()}findMatches(l,d,x){const C=this.tileID.canonical.z<d.canonical.z?1:Math.pow(2,this.tileID.canonical.z-d.canonical.z),B=Jr/Math.pow(2,d.canonical.z-this.tileID.canonical.z),F=d.canonical.x*i.ag,z=d.canonical.y*i.ag;for(let K=0;K<l.length;K++){const X=l.get(K);if(X.crossTileID)continue;const{key:J,tileAnchorX:oe,tileAnchorY:se}=X,ue=Math.floor((F+oe)*B),Ie=Math.floor((z+se)*B),Se=this.index.range(ue-C,Ie-C,ue+C,Ie+C);for(const Pe of Se){const Le=this.crossTileIDs[Pe];if(this.keys[Pe]===J&&!x.has(Le)){x.add(Le),X.crossTileID=Le;break}}}}}class Vi{constructor(){this.maxCrossTileID=0}generate(){return++this.maxCrossTileID}}class _s{constructor(){this.indexes={},this.usedCrossTileIDs={},this.lng=0}handleWrapJump(l){const d=Math.round((l-this.lng)/360);if(d!==0)for(const x in this.indexes){const C=this.indexes[x],B={};for(const F in C){const z=C[F];z.tileID=z.tileID.unwrapTo(z.tileID.wrap+d),B[z.tileID.key]=z}this.indexes[x]=B}this.lng=l}addBucket(l,d,x){if(this.indexes[l.overscaledZ]&&this.indexes[l.overscaledZ][l.key]){if(this.indexes[l.overscaledZ][l.key].bucketInstanceId===d.bucketInstanceId)return!1;this.removeBucketCrossTileIDs(l.overscaledZ,this.indexes[l.overscaledZ][l.key])}for(let B=0;B<d.symbolInstances.length;B++)d.symbolInstances.get(B).crossTileID=0;this.usedCrossTileIDs[l.overscaledZ]||(this.usedCrossTileIDs[l.overscaledZ]=new Set);const C=this.usedCrossTileIDs[l.overscaledZ];for(const B in this.indexes){const F=this.indexes[B];if(Number(B)>l.overscaledZ)for(const z in F){const K=F[z];K.tileID.isChildOf(l)&&K.findMatches(d.symbolInstances,l,C)}else{const z=F[l.scaledTo(Number(B)).key];z&&z.findMatches(d.symbolInstances,l,C)}}for(let B=0;B<d.symbolInstances.length;B++){const F=d.symbolInstances.get(B);F.crossTileID||(F.crossTileID=x.generate(),C.add(F.crossTileID))}return this.indexes[l.overscaledZ]===void 0&&(this.indexes[l.overscaledZ]={}),this.indexes[l.overscaledZ][l.key]=new Yi(l,d.symbolInstances,d.bucketInstanceId),!0}removeBucketCrossTileIDs(l,d){for(const x of d.crossTileIDs)this.usedCrossTileIDs[l].delete(x)}removeStaleBuckets(l){let d=!1;for(const x in this.indexes){const C=this.indexes[x];for(const B in C)l[C[B].bucketInstanceId]||(this.removeBucketCrossTileIDs(x,C[B]),delete C[B],d=!0)}return d}}class Ho{constructor(){this.layerIndexes={},this.crossTileIDs=new Vi,this.maxBucketInstanceId=0,this.bucketsInCurrentPlacement={}}addLayer(l,d,x,C){let B=this.layerIndexes[l.fqid];B===void 0&&(B=this.layerIndexes[l.fqid]=new _s);let F=!1;const z={};C.name!=="globe"&&B.handleWrapJump(x);for(const K of d){const X=K.getBucket(l);X&&l.fqid===X.layerIds[0]&&(X.bucketInstanceId||(X.bucketInstanceId=++this.maxBucketInstanceId),B.addBucket(K.tileID,X,this.crossTileIDs)&&(F=!0),z[X.bucketInstanceId]=!0)}return B.removeStaleBuckets(z)&&(F=!0),F}pruneUnusedLayers(l){const d={};l.forEach(x=>{d[x]=!0});for(const x in this.layerIndexes)d[x]||delete this.layerIndexes[x]}}const To=771;class Mr{constructor(l,d,x,C){this.blendFunction=l,this.blendColor=d,this.mask=x,this.blendEquation=C}}Mr.Replace=[1,0,1,0],Mr.disabled=new Mr(Mr.Replace,i.aj.transparent,[!1,!1,!1,!1]),Mr.unblended=new Mr(Mr.Replace,i.aj.transparent,[!0,!0,!0,!0]),Mr.alphaBlended=new Mr([1,To,1,To],i.aj.transparent,[!0,!0,!0,!0]),Mr.alphaBlendedNonPremultiplied=new Mr([770,To,770,To],i.aj.transparent,[!0,!0,!0,!0]),Mr.multiply=new Mr([774,0,774,0],i.aj.transparent,[!0,!0,!0,!0]);class mr{constructor(l,d,x){this.func=l,this.mask=d,this.range=x}}mr.ReadOnly=!1,mr.ReadWrite=!0,mr.disabled=new mr(519,mr.ReadOnly,[0,1]);const ya=7680;class Rr{constructor(l,d,x,C,B,F){this.test=l,this.ref=d,this.mask=x,this.fail=C,this.depthFail=B,this.pass=F}}Rr.disabled=new Rr({func:519,mask:0},0,0,ya,ya,ya);const xo=1029,Ea=2305;class Lr{constructor(l,d,x){this.enable=l,this.mode=d,this.frontFace=x}}function Bh(v,l){const d=i.bG(v,3);i.ab.mat4.fromQuat(v,l),i.bI(v,3,d)}function Hd(v,l){const d=i.ab.quat.identity([]);return i.ab.quat.rotateZ(d,d,-l),i.ab.quat.rotateX(d,d,-v),d}function bu(v,l){const d=[v[0],v[1],0],x=[l[0],l[1],0];if(i.ab.vec3.length(d)>=1e-15){const F=i.ab.vec3.normalize([],d);i.ab.vec3.scale(x,F,i.ab.vec3.dot(x,F)),l[0]=x[0],l[1]=x[1]}const C=i.ab.vec3.cross([],l,v);if(i.ab.vec3.len(C)<1e-15)return null;const B=Math.atan2(-C[1],C[0]);return Hd(Math.atan2(Math.sqrt(v[0]*v[0]+v[1]*v[1]),-v[2]),B)}Lr.disabled=new Lr(!1,xo,Ea),Lr.backCCW=new Lr(!0,xo,Ea),Lr.backCW=new Lr(!0,xo,2304),Lr.frontCW=new Lr(!0,1028,2304),Lr.frontCCW=new Lr(!0,1028,Ea);class ed{constructor(l,d){this.position=l,this.orientation=d}get position(){return this._position}set position(l){if(l){const d=l instanceof i.aa?l:new i.aa(l[0],l[1],l[2]);this._renderWorldCopies&&(d.x=i.bF(d.x,0,1)),this._position=d}else this._position=null}lookAtPoint(l,d){if(this.orientation=null,!this.position)return;const x=this.position,C=this._elevation?this._elevation.getAtPointOrZero(i.aa.fromLngLat(l)):0,B=i.aa.fromLngLat(l,C),F=[B.x-x.x,B.y-x.y,B.z-x.z];d||(d=[0,0,1]),d[2]=Math.abs(d[2]),this.orientation=bu(F,d)}setPitchBearing(l,d){this.orientation=Hd(i.ai(l),i.ai(-d))}}class Vd{constructor(l,d){this._transform=i.ab.mat4.identity([]),this.orientation=d,this.position=l}get mercatorPosition(){const l=this.position;return new i.aa(l[0],l[1],l[2])}get position(){const l=i.bG(this._transform,3);return[l[0],l[1],l[2]]}set position(l){var d;l&&i.bI(this._transform,3,[(d=l)[0],d[1],d[2],1])}get orientation(){return this._orientation}set orientation(l){this._orientation=l||i.ab.quat.identity([]),l&&Bh(this._transform,this._orientation)}getPitchBearing(){const l=this.forward(),d=this.right();return{bearing:Math.atan2(-d[1],d[0]),pitch:Math.atan2(Math.sqrt(l[0]*l[0]+l[1]*l[1]),-l[2])}}setPitchBearing(l,d){this._orientation=Hd(l,d),Bh(this._transform,this._orientation)}forward(){const l=i.bG(this._transform,2);return[-l[0],-l[1],-l[2]]}up(){const l=i.bG(this._transform,1);return[-l[0],-l[1],-l[2]]}right(){const l=i.bG(this._transform,0);return[l[0],l[1],l[2]]}getCameraToWorld(l,d){const x=new Float64Array(16);return i.ab.mat4.invert(x,this.getWorldToCamera(l,d)),x}getCameraToWorldMercator(){return this._transform}getWorldToCameraPosition(l,d,x){const C=this.position;i.ab.vec3.scale(C,C,-l);const B=new Float64Array(16);return i.ab.mat4.fromScaling(B,[x,x,x]),i.ab.mat4.translate(B,B,C),B[10]*=d,B}getWorldToCamera(l,d){const x=new Float64Array(16),C=new Float64Array(4),B=this.position;return i.ab.quat.conjugate(C,this._orientation),i.ab.vec3.scale(B,B,-l),i.ab.mat4.fromQuat(x,C),i.ab.mat4.translate(x,x,B),x[1]*=-1,x[5]*=-1,x[9]*=-1,x[13]*=-1,x[8]*=d,x[9]*=d,x[10]*=d,x[11]*=d,x}getCameraToClipPerspective(l,d,x,C){const B=new Float64Array(16);return i.ab.mat4.perspective(B,l,d,x,C),B}getCameraToClipOrthographic(l,d,x,C,B,F){const z=new Float64Array(16);return i.ab.mat4.ortho(z,l,d,x,C,B,F),z}getDistanceToElevation(l,d=!1){const x=l===0?0:i.bH(l,d?i.aS(this.position[1]):this.position[1]),C=this.forward();return(x-this.position[2])/C[2]}clone(){return new Vd([...this.position],[...this.orientation])}}const na={BaseColor:5,MetallicRoughness:6,Normal:7,Occlusion:8,Emission:9,LUT:10,ShadowMap0:11};class ao{constructor(l=0,d=0,x=0,C=0){if(isNaN(l)||l<0||isNaN(d)||d<0||isNaN(x)||x<0||isNaN(C)||C<0)throw new Error("Invalid value for edge-insets, top, bottom, left and right must all be numbers");this.top=l,this.bottom=d,this.left=x,this.right=C}interpolate(l,d,x){return d.top!=null&&l.top!=null&&(this.top=i.af(l.top,d.top,x)),d.bottom!=null&&l.bottom!=null&&(this.bottom=i.af(l.bottom,d.bottom,x)),d.left!=null&&l.left!=null&&(this.left=i.af(l.left,d.left,x)),d.right!=null&&l.right!=null&&(this.right=i.af(l.right,d.right,x)),this}getCenter(l,d){const x=i.aw((this.left+l-this.right)/2,0,l),C=i.aw((this.top+d-this.bottom)/2,0,d);return new i.P(x,C)}equals(l){return this.top===l.top&&this.bottom===l.bottom&&this.left===l.left&&this.right===l.right}clone(){return new ao(this.top,this.bottom,this.left,this.right)}toJSON(){return{top:this.top,bottom:this.bottom,left:this.left,right:this.right}}}const Cc=(v,l,d)=>(1-d)*v+d*l,Wn=v=>v*v*v*v*v;class $d{constructor(l,d,x,C,B,F,z){this.tileSize=512,this._renderWorldCopies=B===void 0||B,this._minZoom=l||0,this._maxZoom=d||22,this._minPitch=x??0,this._maxPitch=C??60,this.setProjection(F),this.setMaxBounds(z),this.width=0,this.height=0,this._center=new i.bO(0,0),this.zoom=0,this.angle=0,this._fov=.6435011087932844,this._pitch=0,this._nearZ=0,this._farZ=0,this._unmodified=!0,this._edgeInsets=new ao,this._projMatrixCache={},this._alignedProjMatrixCache={},this._fogTileMatrixCache={},this._expandedProjMatrixCache={},this._distanceTileDataCache={},this._camera=new Vd,this._centerAltitude=0,this._averageElevation=0,this.cameraElevationReference="ground",this._pixelsPerMercatorPixel=1,this.globeRadius=0,this.globeCenterInViewSpace=[0,0,0],this._tileCoverLift=0,this.freezeTileCoverage=!1,this._horizonShift=.1,this._orthographicProjectionAtLowPitch=!1}clone(){const l=new $d(this._minZoom,this._maxZoom,this._minPitch,this.maxPitch,this._renderWorldCopies,this.getProjection());return l._elevation=this._elevation,l._centerAltitude=this._centerAltitude,l._centerAltitudeValidForExaggeration=this._centerAltitudeValidForExaggeration,l.tileSize=this.tileSize,l.mercatorFromTransition=this.mercatorFromTransition,l.width=this.width,l.height=this.height,l.cameraElevationReference=this.cameraElevationReference,l._center=this._center,l._setZoom(this.zoom),l._seaLevelZoom=this._seaLevelZoom,l.angle=this.angle,l._fov=this._fov,l._pitch=this._pitch,l._nearZ=this._nearZ,l._farZ=this._farZ,l._averageElevation=this._averageElevation,l._orthographicProjectionAtLowPitch=this._orthographicProjectionAtLowPitch,l._unmodified=this._unmodified,l._edgeInsets=this._edgeInsets.clone(),l._camera=this._camera.clone(),l._calcMatrices(),l.freezeTileCoverage=this.freezeTileCoverage,l.frustumCorners=this.frustumCorners,l}get isOrthographic(){return this.projection.name!=="globe"&&this._orthographicProjectionAtLowPitch&&this.pitch<15}get elevation(){return this._elevation}set elevation(l){this._elevation!==l&&(this._elevation=l,this._updateCameraOnTerrain(),this._calcMatrices())}get depthOcclusionForSymbolsAndCircles(){return this.projection.name!=="globe"&&!this.isOrthographic}updateElevation(l,d=!1){const x=this._elevation&&this._elevation.exaggeration()!==this._centerAltitudeValidForExaggeration;(this._seaLevelZoom==null||x)&&this._updateCameraOnTerrain(),(l||x)&&this._constrainCamera(d),this._calcMatrices()}getProjection(){return i.ay(this.projection,["name","center","parallels"])}setProjection(l){this.projectionOptions=l||{name:"mercator"};const d=this.projection?this.getProjection():void 0;this.projection=i.bP(this.projectionOptions);const x=this.getProjection(),C=!i.bn(d,x);return C&&this._calcMatrices(),this.mercatorFromTransition=!1,C}setOrthographicProjectionAtLowPitch(l){return this._orthographicProjectionAtLowPitch!==l&&(this._orthographicProjectionAtLowPitch=l,this._calcMatrices(),!0)}setMercatorFromTransition(){const l=this.projection.name;this.mercatorFromTransition=!0,this.projectionOptions={name:"mercator"},this.projection=i.bP({name:"mercator"});const d=l!==this.projection.name;return d&&this._calcMatrices(),d}get minZoom(){return this._minZoom}set minZoom(l){this._minZoom!==l&&(this._minZoom=l,this.zoom=Math.max(this.zoom,l))}get maxZoom(){return this._maxZoom}set maxZoom(l){this._maxZoom!==l&&(this._maxZoom=l,this.zoom=Math.min(this.zoom,l))}get minPitch(){return this._minPitch}set minPitch(l){this._minPitch!==l&&(this._minPitch=l,this.pitch=Math.max(this.pitch,l))}get maxPitch(){return this._maxPitch}set maxPitch(l){this._maxPitch!==l&&(this._maxPitch=l,this.pitch=Math.min(this.pitch,l))}get renderWorldCopies(){return this._renderWorldCopies&&this.projection.supportsWorldCopies===!0}set renderWorldCopies(l){l===void 0?l=!0:l===null&&(l=!1),this._renderWorldCopies=l}get worldSize(){return this.tileSize*this.scale}get cameraWorldSizeForFog(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get cameraWorldSize(){const l=Math.max(this._camera.getDistanceToElevation(this._averageElevation,!0),Number.EPSILON);return this._worldSizeFromZoom(this._zoomFromMercatorZ(l))}get pixelsPerMeter(){return this.projection.pixelsPerMeter(this.center.lat,this.worldSize)}get cameraPixelsPerMeter(){return i.bH(1,this.center.lat)*this.cameraWorldSizeForFog}get centerOffset(){return this.centerPoint._sub(this.size._div(2))}get size(){return new i.P(this.width,this.height)}get bearing(){return i.bF(this.rotation,-180,180)}set bearing(l){this.rotation=l}get rotation(){return-this.angle/Math.PI*180}set rotation(l){const d=-l*Math.PI/180;this.angle!==d&&(this._unmodified=!1,this.angle=d,this._calcMatrices(),this.rotationMatrix=i.ab.mat2.create(),i.ab.mat2.rotate(this.rotationMatrix,this.rotationMatrix,this.angle))}get pitch(){return this._pitch/Math.PI*180}set pitch(l){const d=i.aw(l,this.minPitch,this.maxPitch)/180*Math.PI;this._pitch!==d&&(this._unmodified=!1,this._pitch=d,this._calcMatrices())}get aspect(){return this.width/this.height}get fov(){return this._fov/Math.PI*180}get fovX(){return this._fov}get fovY(){const l=1/Math.tan(.5*this.fovX);return 2*Math.atan(1/this.aspect/l)}set fov(l){l=Math.max(.01,Math.min(60,l)),this._fov!==l&&(this._unmodified=!1,this._fov=i.ai(l),this._calcMatrices())}get averageElevation(){return this._averageElevation}set averageElevation(l){this._averageElevation=l,this._calcFogMatrices(),this._distanceTileDataCache={}}get zoom(){return this._zoom}set zoom(l){const d=Math.min(Math.max(l,this.minZoom),this.maxZoom);this._zoom!==d&&(this._unmodified=!1,this._setZoom(d),this._updateSeaLevelZoom(),this._constrain(),this._calcMatrices())}_setZoom(l){this._zoom=l,this.scale=this.zoomScale(l),this.tileZoom=Math.floor(l),this.zoomFraction=l-this.tileZoom}get tileCoverLift(){return this._tileCoverLift}set tileCoverLift(l){this._tileCoverLift!==l&&(this._tileCoverLift=l)}_updateCameraOnTerrain(){const l=this.elevation?this.elevation.getAtPoint(this.locationCoordinate(this.center),Number.NEGATIVE_INFINITY):Number.NEGATIVE_INFINITY,d=this.elevation&&l===Number.NEGATIVE_INFINITY&&this.elevation.visibleDemTiles.length>0&&this.elevation.exaggeration()>0&&this._centerAltitudeValidForExaggeration;if(!this._elevation||l===Number.NEGATIVE_INFINITY&&(!d||!this._centerAltitude))return this._centerAltitude=0,this._seaLevelZoom=null,void(this._centerAltitudeValidForExaggeration=void 0);const x=this._elevation;d||this._centerAltitude&&this._centerAltitudeValidForExaggeration&&x.exaggeration()&&this._centerAltitudeValidForExaggeration!==x.exaggeration()?(this._centerAltitude=this._centerAltitude/this._centerAltitudeValidForExaggeration*x.exaggeration(),this._centerAltitudeValidForExaggeration=x.exaggeration()):(this._centerAltitude=l||0,this._centerAltitudeValidForExaggeration=x.exaggeration()),this._updateSeaLevelZoom()}_updateSeaLevelZoom(){this._centerAltitudeValidForExaggeration!==void 0&&(this._seaLevelZoom=this._zoomFromMercatorZ((this.pixelsPerMeter*this._centerAltitude+this.cameraToCenterDistance)/this.worldSize))}sampleAverageElevation(){if(!this._elevation)return 0;const l=this._elevation,d=[[.5,.2],[.3,.5],[.5,.5],[.7,.5],[.5,.8]],x=this.horizonLineFromTop();let C=0,B=0;for(let F=0;F<d.length;F++){const z=new i.P(d[F][0]*this.width,x+d[F][1]*(this.height-x)),K=l.pointCoordinate(z);if(!K)continue;const X=1/Math.hypot(K[0]-this._camera.position[0],K[1]-this._camera.position[1]);C+=K[3]*X,B+=X}return B===0?NaN:C/B}get center(){return this._center}set center(l){l.lat===this._center.lat&&l.lng===this._center.lng||(this._unmodified=!1,this._center=l,this._terrainEnabled()&&(this.cameraElevationReference==="ground"?this._updateCameraOnTerrain():this._updateZoomFromElevation()),this._constrain(),this._calcMatrices())}_updateZoomFromElevation(){if(this._seaLevelZoom==null||!this._elevation)return;const l=this._seaLevelZoom,d=this._elevation.getAtPointOrZero(this.locationCoordinate(this.center)),x=this.pixelsPerMeter/this.worldSize*d,C=this._mercatorZfromZoom(l),B=this._mercatorZfromZoom(this._maxZoom),F=Math.max(C-x,B);this._setZoom(this._zoomFromMercatorZ(F))}get padding(){return this._edgeInsets.toJSON()}set padding(l){this._edgeInsets.equals(l)||(this._unmodified=!1,this._edgeInsets.interpolate(this._edgeInsets,l,1),this._calcMatrices())}computeZoomRelativeTo(l){const d=this.rayIntersectionCoordinate(this.pointRayIntersection(this.centerPoint,l.toAltitude()));let x;x=l.z<this._camera.position[2]?[d.x,d.y,d.z]:[l.x,l.y,l.z];const C=i.ab.vec3.length(i.ab.vec3.sub([],this._camera.position,x));return i.aw(this._zoomFromMercatorZ(C),this._minZoom,this._maxZoom)}setFreeCameraOptions(l){if(!this.height||!l.position&&!l.orientation)return;this._updateCameraState();let d=!1;if(l.orientation&&!i.ab.quat.exactEquals(l.orientation,this._camera.orientation)&&(d=this._setCameraOrientation(l.orientation)),l.position){const x=[l.position.x,l.position.y,l.position.z];i.ab.vec3.exactEquals(x,this._camera.position)||(this._setCameraPosition(x),d=!0)}d&&(this._updateStateFromCamera(),this.recenterOnTerrain())}getFreeCameraOptions(){this._updateCameraState();const l=this._camera.position,d=new ed;return d.position=new i.aa(l[0],l[1],l[2]),d.orientation=this._camera.orientation,d._elevation=this.elevation,d._renderWorldCopies=this.renderWorldCopies,d}_setCameraOrientation(l){if(!i.ab.quat.length(l))return!1;i.ab.quat.normalize(l,l);const d=i.ab.vec3.transformQuat([],[0,0,-1],l),x=i.ab.vec3.transformQuat([],[0,-1,0],l);if(x[2]<0)return!1;const C=bu(d,x);return!!C&&(this._camera.orientation=C,!0)}_setCameraPosition(l){const d=this.zoomScale(this.minZoom)*this.tileSize,x=this.zoomScale(this.maxZoom)*this.tileSize,C=this.cameraToCenterDistance;l[2]=i.aw(l[2],C/x,C/d),this._camera.position=l}get centerPoint(){return this._edgeInsets.getCenter(this.width,this.height)}get fovAboveCenter(){return this._fov*(.5+this.centerOffset.y/this.height)}isPaddingEqual(l){return this._edgeInsets.equals(l)}interpolatePadding(l,d,x){this._unmodified=!1,this._edgeInsets.interpolate(l,d,x),this._constrain(),this._calcMatrices()}coveringZoomLevel(l){const d=(l.roundZoom?Math.round:Math.floor)(this.zoom+this.scaleZoom(this.tileSize/l.tileSize));return Math.max(0,d)}getVisibleUnwrappedCoordinates(l){const d=[new i.bQ(0,l)];if(this.renderWorldCopies){const x=this.pointCoordinate(new i.P(0,0)),C=this.pointCoordinate(new i.P(this.width,0)),B=this.pointCoordinate(new i.P(this.width,this.height)),F=this.pointCoordinate(new i.P(0,this.height)),z=Math.floor(Math.min(x.x,C.x,B.x,F.x)),K=Math.floor(Math.max(x.x,C.x,B.x,F.x)),X=1;for(let J=z-X;J<=K+X;J++)J!==0&&d.push(new i.bQ(J,l))}return d}isLODDisabled(l){return(!l||this.pitch<=60)&&this._edgeInsets.top<=this._edgeInsets.bottom&&!this._elevation&&!this.projection.isReprojectedInTileSpace}extendTileCover(l,d,x){let C=[];const B=x!==void 0,F=!B;if(F&&this.zoom<d||B&&x[0]===0&&x[1]===0)return C;const z=new Set,K=(J,oe,se,ue,Ie)=>{const Se=i.c5(oe,J,se,ue,Ie);z.has(Se)||(C.push(new i.aG(J,oe,se,ue,Ie)),z.add(Se))};for(let J=0;J<l.length;J++){const oe=l[J];if(F&&oe.canonical.z!==d)continue;const se=oe.canonical,ue=oe.overscaledZ,Ie=oe.wrap,Se=1<<se.z,Pe=se.x+1<Se,Le=se.x>0,$e=se.y+1<Se,rt=se.y>0,et=oe.wrap-(Le?0:1),ft=oe.wrap+(Pe?0:1),dt=Le?se.x-1:Se-1,ht=Pe?se.x+1:0;if(B)x[0]<0?(K(ue,ft,se.z,ht,se.y),x[1]<0&&$e&&(K(ue,Ie,se.z,se.x,se.y+1),K(ue,ft,se.z,ht,se.y+1)),x[1]>0&&rt&&(K(ue,Ie,se.z,se.x,se.y-1),K(ue,ft,se.z,ht,se.y-1))):x[0]>0?(K(ue,et,se.z,dt,se.y),x[1]<0&&$e&&(K(ue,Ie,se.z,se.x,se.y+1),K(ue,et,se.z,dt,se.y+1)),x[1]>0&&rt&&(K(ue,Ie,se.z,se.x,se.y-1),K(ue,et,se.z,dt,se.y-1))):x[1]<0&&$e?K(ue,Ie,se.z,se.x,se.y+1):rt&&K(ue,Ie,se.z,se.x,se.y-1);else{const ut=oe.visibleQuadrants;1&ut&&(K(ue,et,se.z,dt,se.y),rt&&(K(ue,Ie,se.z,se.x,se.y-1),K(ue,et,se.z,dt,se.y-1))),2&ut&&(K(ue,ft,se.z,ht,se.y),rt&&(K(ue,Ie,se.z,se.x,se.y-1),K(ue,ft,se.z,ht,se.y-1))),4&ut&&(K(ue,et,se.z,dt,se.y),$e&&(K(ue,Ie,se.z,se.x,se.y+1),K(ue,et,se.z,dt,se.y+1))),8&ut&&(K(ue,ft,se.z,ht,se.y),$e&&(K(ue,Ie,se.z,se.x,se.y+1),K(ue,ft,se.z,ht,se.y+1)))}}const X=[];for(const J of C)C.some(oe=>J.isChildOf(oe))||X.push(J);if(C=X.filter(J=>!l.some(oe=>!!(J.overscaledZ<d&&oe.isChildOf(J))||J.equals(oe)||J.isChildOf(oe))),F){const J=1<<d,oe=this.projection.name==="globe"?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),se=[J*oe.x,J*oe.y],ue=4,Ie=ue*ue;C=C.filter(Se=>{const Pe=Se.canonical.x+.5-se[0],Le=Se.canonical.y+.5-se[1];return Pe*Pe+Le*Le<Ie})}return C}coveringTiles(l){let d=this.coveringZoomLevel(l);const x=d,C=this.elevation&&this.elevation.exaggeration(),B=C&&!l.isTerrainDEM,F=this.projection.name==="mercator";if(l.minzoom!==void 0&&d<l.minzoom)return[];l.maxzoom!==void 0&&d>l.maxzoom&&(d=l.maxzoom);const z=this.locationCoordinate(this.center),K=this.center.lat,X=1<<d,J=[X*z.x,X*z.y,0],oe=this.projection.name==="globe",se=!oe,ue=i.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,d,se),Ie=oe?this._camera.mercatorPosition:this.pointCoordinate(this.getCameraPoint()),Se=X*i.bH(1,this.center.lat),Pe=this._camera.position[2]/i.bH(1,this.center.lat),Le=[X*Ie.x,X*Ie.y,Pe*(se?1:Se)],$e=oe||C,rt=this.cameraToCenterDistance/l.tileSize*(l.roundZoom?1:.502),et=this.isLODDisabled(!0)?d:0;let ft;if(this._elevation&&l.isTerrainDEM)ft=1e4*this._elevation.exaggeration();else if(this._elevation){const Jt=this._elevation.getMinMaxForVisibleTiles();ft=Jt?Jt.max:this._centerAltitude}else ft=this._centerAltitude;const dt=l.isTerrainDEM?-ft:this._elevation?this._elevation.getMinElevationBelowMSL():0,ht=this.projection.isReprojectedInTileSpace?i.bS(this):1,ut=Jt=>{const dn=new i.aa(Jt.x+25e-6,Jt.y,Jt.z),Dn=new i.aa(Jt.x,Jt.y+25e-6,Jt.z),Fn=Jt.toLngLat(),bn=dn.toLngLat(),tr=Dn.toLngLat(),nr=this.locationCoordinate(Fn),Yn=this.locationCoordinate(bn),hr=this.locationCoordinate(tr),Zr=Math.hypot(Yn.x-nr.x,Yn.y-nr.y),kr=Math.hypot(hr.x-nr.x,hr.y-nr.y);return Math.sqrt(Zr*kr)*ht/25e-6},xt=Jt=>{const In=ft,dn=dt;return{aabb:i.bV(this,X,0,0,0,Jt,dn,In,this.projection),zoom:0,x:0,y:0,minZ:dn,maxZ:In,wrap:Jt,fullyVisible:!1}},Bt=[];let an=[];const tn=d,Ct=l.reparseOverscaled?x:d,Rt=(Pe-this._centerAltitude)*Se,wn=Jt=>{if(!this._elevation||!Jt.tileID||!F)return;const In=this._elevation.getMinMaxForTile(Jt.tileID),dn=Jt.aabb;In?(dn.min[2]=In.min,dn.max[2]=In.max,dn.center[2]=(dn.min[2]+dn.max[2])/2):(Jt.shouldSplit=Qn(Jt),Jt.shouldSplit||(dn.min[2]=dn.max[2]=dn.center[2]=this._centerAltitude))},kn=(Jt,In)=>{if(.707*In<Jt)return 1;const dn=In/Jt;return dn/(1.4144271570014144+(Math.pow(1.1,dn-1.4144271570014144+1)-1)/(1.1-1)-1)},Qn=Jt=>{if(Jt.zoom<et)return!0;if(Jt.zoom===tn)return!1;if(Jt.shouldSplit!=null)return Jt.shouldSplit;const In=Jt.aabb.distanceX(Le),dn=Jt.aabb.distanceY(Le);let Dn=Rt,Fn=1;if(oe){Dn=Jt.aabb.distanceZ(Le);const kr=Math.pow(2,Jt.zoom),Fr=i.aS((Jt.y+1)/kr),Xr=i.aS(Jt.y/kr),di=Math.min(Math.max(K,Fr),Xr),gi=i.c9(di)/i.c9(K);if(Fn=di===K?1/Math.max(1,this._mercatorScaleRatio-.3):Math.min(1,gi/this._mercatorScaleRatio),this.zoom<=i.c6&&Jt.zoom===tn-1&&gi>=.9)return!0}else if(B&&(Dn=Jt.aabb.distanceZ(Le)*Se),this.projection.isReprojectedInTileSpace&&x<=5){const kr=Math.pow(2,Jt.zoom),Fr=ut(new i.aa((Jt.x+.5)/kr,(Jt.y+.5)/kr));Fn=Fr>.85?1:Fr}if(!F){const kr=Math.sqrt(In*In+dn*dn+Dn*Dn);let Fr=(1<<tn-Jt.zoom)*rt*Fn;return Fr*=kn(Math.max(Dn,Rt),kr),kr<Fr}let bn=Number.MAX_VALUE,tr=0;const nr=Jt.aabb.getCorners(),Yn=[];for(const kr of nr){i.ab.vec3.sub(Yn,kr,Le),oe||(B?Yn[2]*=Se:Yn[2]=Rt);const Fr=i.ab.vec3.dot(Yn,this._camera.forward());Fr<bn&&(bn=Fr,tr=Math.abs(Yn[2]))}let hr=(1<<tn-Jt.zoom)*rt*Fn;if(hr*=kn(Math.max(tr,Rt),bn),bn<hr)return!0;const Zr=Jt.aabb.closestPoint(J);return Zr[0]===J[0]&&Zr[1]===J[1]};if(this.renderWorldCopies)for(let Jt=1;Jt<=3;Jt++)Bt.push(xt(-Jt)),Bt.push(xt(Jt));for(Bt.push(xt(0));Bt.length>0;){const Jt=Bt.pop(),In=Jt.x,dn=Jt.y;let Dn=Jt.fullyVisible;const Fn=()=>this.projection.name==="globe"&&(Jt.y===0||Jt.y===(1<<Jt.zoom)-1);if(!Dn){let bn=$e?Jt.aabb.intersects(ue):Jt.aabb.intersectsFlat(ue);if(bn===0&&Fn()){const tr=new i.bT(Jt.zoom,In,dn);bn=i.bU(this,X,tr,!0).intersects(ue)}if(bn===0)continue;Dn=bn===2}if(Jt.zoom!==tn&&Qn(Jt))for(let bn=0;bn<4;bn++){const tr=(In<<1)+bn%2,nr=(dn<<1)+(bn>>1),Yn={aabb:F?Jt.aabb.quadrant(bn):i.bV(this,X,Jt.zoom+1,tr,nr,Jt.wrap,Jt.minZ,Jt.maxZ,this.projection),zoom:Jt.zoom+1,x:tr,y:nr,wrap:Jt.wrap,fullyVisible:Dn,tileID:void 0,shouldSplit:void 0,minZ:Jt.minZ,maxZ:Jt.maxZ};B&&!oe&&(Yn.tileID=new i.aG(Jt.zoom+1===tn?Ct:Jt.zoom+1,Jt.wrap,Jt.zoom+1,tr,nr),wn(Yn)),Bt.push(Yn)}else{const bn=Jt.zoom===tn?Ct:Jt.zoom;if(l.minzoom&&l.minzoom>bn)continue;let tr=0;if(!Dn){let Zr=$e?Jt.aabb.intersectsPrecise(ue):Jt.aabb.intersectsPreciseFlat(ue);if(Zr===0&&Fn()){const kr=new i.bT(Jt.zoom,In,dn);Zr=i.bU(this,X,kr,!0).intersectsPrecise(ue)}if(Zr===0)continue;if(l.calculateQuadrantVisibility)if(ue.containsPoint(Jt.aabb.center))tr=15;else for(let kr=0;kr<4;kr++)Jt.aabb.quadrant(kr).intersects(ue)!==0&&(tr|=1<<kr)}const nr=J[0]-(.5+In+(Jt.wrap<<Jt.zoom))*(1<<d-Jt.zoom),Yn=J[1]-.5-dn,hr=Jt.tileID?Jt.tileID:new i.aG(bn,Jt.wrap,Jt.zoom,In,dn);l.calculateQuadrantVisibility&&(hr.visibleQuadrants=tr),an.push({tileID:hr,distanceSq:nr*nr+Yn*Yn})}}if(this.fogCullDistSq){const Jt=this.fogCullDistSq,In=this.horizonLineFromTop();an=an.filter(dn=>{const Dn=[0,0,0,1],Fn=[i.ag,i.ag,0,1],bn=this.calculateFogTileMatrix(dn.tileID.toUnwrapped());i.ab.vec4.transformMat4(Dn,Dn,bn),i.ab.vec4.transformMat4(Fn,Fn,bn);const tr=i.ab.vec4.min([],Dn,Fn),nr=i.ab.vec4.max([],Dn,Fn),Yn=i.bW(tr,nr);if(Yn===0)return!0;let hr=!1;const Zr=this._elevation;if(Zr&&Yn>Jt&&In!==0){const kr=this.calculateProjMatrix(dn.tileID.toUnwrapped());let Fr;l.isTerrainDEM||(Fr=Zr.getMinMaxForTile(dn.tileID)),Fr||(Fr={min:dt,max:ft});const Xr=i.c7(this.rotation),di=[Xr[0]*i.ag,Xr[1]*i.ag,Fr.max];i.ab.vec3.transformMat4(di,di,kr),hr=(1-di[1])*this.height*.5<In}return Yn<Jt||hr})}return an.sort((Jt,In)=>Jt.distanceSq-In.distanceSq).map(Jt=>Jt.tileID)}resize(l,d){this.width=l,this.height=d,this.pixelsToGLUnits=[2/l,-2/d],this._constrain(),this._calcMatrices()}get unmodified(){return this._unmodified}zoomScale(l){return Math.pow(2,l)}scaleZoom(l){return Math.log(l)/Math.LN2}project(l){const d=i.aw(l.lat,-i.bX,i.bX),x=this.projection.project(l.lng,d);return new i.P(x.x*this.worldSize,x.y*this.worldSize)}unproject(l){return this.projection.unproject(l.x/this.worldSize,l.y/this.worldSize)}get point(){return this.project(this.center)}get pointMerc(){return this.point._div(this.worldSize)}get pixelsPerMeterRatio(){return this.pixelsPerMeter/i.bH(1,this.center.lat)/this.worldSize}setLocationAtPoint(l,d){let x,C;const B=this.centerPoint;if(this.projection.name==="globe"){const z=this.worldSize;x=(d.x-B.x)/z,C=(d.y-B.y)/z}else{const z=this.pointCoordinate(d),K=this.pointCoordinate(B);x=z.x-K.x,C=z.y-K.y}const F=this.locationCoordinate(l);this.setLocation(new i.aa(F.x-x,F.y-C))}setLocation(l){this.center=this.coordinateLocation(l),this.projection.wrap&&(this.center=this.center.wrap())}locationPoint(l){return this.projection.locationPoint(this,l)}locationPoint3D(l){return this.projection.locationPoint(this,l,!0)}pointLocation(l){return this.coordinateLocation(this.pointCoordinate(l))}pointLocation3D(l){return this.coordinateLocation(this.pointCoordinate3D(l))}locationCoordinate(l,d){const x=d?i.bH(d,l.lat):void 0,C=this.projection.project(l.lng,l.lat);return new i.aa(C.x,C.y,x)}coordinateLocation(l){return this.projection.unproject(l.x,l.y)}pointRayIntersection(l,d){const x=d??this._centerAltitude,C=[l.x,l.y,0,1],B=[l.x,l.y,1,1];i.ab.vec4.transformMat4(C,C,this.pixelMatrixInverse),i.ab.vec4.transformMat4(B,B,this.pixelMatrixInverse);const F=B[3];i.ab.vec4.scale(C,C,1/C[3]),i.ab.vec4.scale(B,B,1/F);const z=C[2],K=B[2];return{p0:C,p1:B,t:z===K?0:(x-z)/(K-z)}}screenPointToMercatorRay(l){const d=[l.x,l.y,0,1],x=[l.x,l.y,1,1];return i.ab.vec4.transformMat4(d,d,this.pixelMatrixInverse),i.ab.vec4.transformMat4(x,x,this.pixelMatrixInverse),i.ab.vec4.scale(d,d,1/d[3]),i.ab.vec4.scale(x,x,1/x[3]),d[2]=i.bH(d[2],this._center.lat)*this.worldSize,x[2]=i.bH(x[2],this._center.lat)*this.worldSize,i.ab.vec4.scale(d,d,1/this.worldSize),i.ab.vec4.scale(x,x,1/this.worldSize),new i.aq([d[0],d[1],d[2]],i.ab.vec3.normalize([],i.ab.vec3.sub([],x,d)))}rayIntersectionCoordinate(l){const{p0:d,p1:x,t:C}=l,B=i.bH(d[2],this._center.lat),F=i.bH(x[2],this._center.lat);return new i.aa(i.af(d[0],x[0],C)/this.worldSize,i.af(d[1],x[1],C)/this.worldSize,i.af(B,F,C))}pointCoordinate(l,d=this._centerAltitude){return this.projection.pointCoordinate(this,l.x,l.y,d)}pointCoordinate3D(l){if(!this.elevation)return this.pointCoordinate(l);let d=this.projection.pointCoordinate3D(this,l.x,l.y);if(d)return new i.aa(d[0],d[1],d[2]);let x=0,C=this.horizonLineFromTop();if(l.y>C)return this.pointCoordinate(l);const B=.02*C,F=l.clone();for(let z=0;z<10&&C-x>B;z++){F.y=i.af(x,C,.66);const K=this.projection.pointCoordinate3D(this,F.x,F.y);K?(C=F.y,d=K):x=F.y}return d?new i.aa(d[0],d[1],d[2]):this.pointCoordinate(l)}isPointAboveHorizon(l){return this.projection.isPointAboveHorizon(this,l)}isPointOnSurface(l){if(l.y<0||l.y>this.height||l.x<0||l.x>this.width)return!1;if(this.elevation||this.zoom>=i.bY)return!this.isPointAboveHorizon(l);const d=this.pointCoordinate(l);return d.y>=0&&d.y<=1}_coordinatePoint(l,d){const x=d&&this.elevation?this.elevation.getAtPointOrZero(l,this._centerAltitude):this._centerAltitude,C=[l.x*this.worldSize,l.y*this.worldSize,x+l.toAltitude(),1];return i.ab.vec4.transformMat4(C,C,this.pixelMatrix),C[3]>0?new i.P(C[0]/C[3],C[1]/C[3]):new i.P(Number.MAX_VALUE,Number.MAX_VALUE)}_getBoundsNonRectangular(){const{top:l,left:d}=this._edgeInsets,x=this.height-this._edgeInsets.bottom,C=this.width-this._edgeInsets.right,B=this.pointLocation3D(new i.P(d,l)),F=this.pointLocation3D(new i.P(C,l)),z=this.pointLocation3D(new i.P(C,x)),K=this.pointLocation3D(new i.P(d,x));let X=Math.min(B.lng,F.lng,z.lng,K.lng),J=Math.max(B.lng,F.lng,z.lng,K.lng),oe=Math.min(B.lat,F.lat,z.lat,K.lat),se=Math.max(B.lat,F.lat,z.lat,K.lat);const ue=Math.pow(2,-this.zoom)/16*270,Ie=this.projection.name==="globe"?1:4,Se=(Pe,Le,$e,rt,et)=>{const ft=(Pe+$e)/2,dt=(Le+rt)/2,ht=new i.P(ft,dt),{lng:ut,lat:xt}=this.pointLocation3D(ht),Bt=Math.max(0,X-ut,oe-xt,ut-J,xt-se);X=Math.min(X,ut),J=Math.max(J,ut),oe=Math.min(oe,xt),se=Math.max(se,xt),(et<Ie||Bt>ue)&&(Se(Pe,Le,ft,dt,et+1),Se(ft,dt,$e,rt,et+1))};if(Se(d,l,C,l,1),Se(C,l,C,x,1),Se(C,x,d,x,1),Se(d,x,d,l,1),this.projection.name==="globe"){const[Pe,Le]=i.bZ(this);Pe?(se=90,J=180,X=-180):Le&&(oe=-90,J=180,X=-180)}return new i.az(new i.bO(X,oe),new i.bO(J,se))}_getBoundsRectangular(l,d){const{top:x,left:C}=this._edgeInsets,B=this.height-this._edgeInsets.bottom,F=this.width-this._edgeInsets.right,z=new i.P(C,x),K=new i.P(F,x),X=new i.P(F,B),J=new i.P(C,B);let oe=this.pointCoordinate(z,l),se=this.pointCoordinate(K,l);const ue=this.pointCoordinate(X,d),Ie=this.pointCoordinate(J,d),Se=(Pe,Le)=>(Le.y-Pe.y)/(Le.x-Pe.x);return oe.y>1&&se.y>=0?oe=new i.aa((1-Ie.y)/Se(Ie,oe)+Ie.x,1):oe.y<0&&se.y<=1&&(oe=new i.aa(-Ie.y/Se(Ie,oe)+Ie.x,0)),se.y>1&&oe.y>=0?se=new i.aa((1-ue.y)/Se(ue,se)+ue.x,1):se.y<0&&oe.y<=1&&(se=new i.aa(-ue.y/Se(ue,se)+ue.x,0)),new i.az().extend(this.coordinateLocation(oe)).extend(this.coordinateLocation(se)).extend(this.coordinateLocation(Ie)).extend(this.coordinateLocation(ue))}_getBoundsRectangularTerrain(){const l=this.elevation;if(!l.visibleDemTiles.length||l.isUsingMockSource())return this._getBoundsRectangular(0,0);const d=l.visibleDemTiles.reduce((x,C)=>{if(C.dem){const B=C.dem.tree;x.min=Math.min(x.min,B.minimums[0]),x.max=Math.max(x.max,B.maximums[0])}return x},{min:Number.MAX_VALUE,max:0});return this._getBoundsRectangular(d.min*l.exaggeration(),d.max*l.exaggeration())}getBounds(){return this.projection.name==="mercator"||this.projection.name==="equirectangular"?this._terrainEnabled()?this._getBoundsRectangularTerrain():this._getBoundsRectangular(0,0):this._getBoundsNonRectangular()}horizonLineFromTop(l=!0){const d=this.height/2/Math.tan(this._fov/2)/Math.tan(Math.max(this._pitch,.1))-this.centerOffset.y,x=this.height/2-d*(1-this._horizonShift);return l?Math.max(0,x):x}getMaxBounds(){return this.maxBounds}setMaxBounds(l){this.maxBounds=l,this.minLat=-i.bX,this.maxLat=i.bX,this.minLng=-180,this.maxLng=180,l&&(this.minLat=l.getSouth(),this.maxLat=l.getNorth(),this.minLng=l.getWest(),this.maxLng=l.getEast(),this.maxLng<this.minLng&&(this.maxLng+=360)),this.worldMinX=i.at(this.minLng)*this.tileSize,this.worldMaxX=i.at(this.maxLng)*this.tileSize,this.worldMinY=i.aA(this.maxLat)*this.tileSize,this.worldMaxY=i.aA(this.minLat)*this.tileSize,this._constrain()}calculatePosMatrix(l,d){return this.projection.createTileMatrix(this,d,l)}calculateDistanceTileData(l){const d=l.key,x=this._distanceTileDataCache;if(x[d])return x[d];const C=l.canonical,B=1/this.height,F=this.cameraWorldSize,z=F/this.zoomScale(C.z),K=(C.x+Math.pow(2,C.z)*l.wrap)*z,X=C.y*z,J=this.point;J.x*=F/this.worldSize,J.y*=F/this.worldSize;const oe=this.angle,se=Math.sin(-oe),ue=-Math.cos(-oe);return x[d]={bearing:[se,ue],center:[(J.x-K)*B,(J.y-X)*B],scale:z/i.ag*B},x[d]}calculateFogTileMatrix(l){const d=l.key,x=this._fogTileMatrixCache;if(x[d])return x[d];const C=this.projection.createTileMatrix(this,this.cameraWorldSizeForFog,l);return i.ab.mat4.multiply(C,this.worldToFogMatrix,C),x[d]=new Float32Array(C),x[d]}calculateProjMatrix(l,d=!1,x=!1){const C=l.key;let B;if(B=x?this._expandedProjMatrixCache:d?this._alignedProjMatrixCache:this._projMatrixCache,B[C])return B[C];const F=this.calculatePosMatrix(l,this.worldSize);let z;return z=this.projection.isReprojectedInTileSpace?this.mercatorMatrix:x?this.expandedFarZProjMatrix:d?this.alignedProjMatrix:this.projMatrix,i.ab.mat4.multiply(F,z,F),B[C]=new Float32Array(F),B[C]}calculatePixelsToTileUnitsMatrix(l){const d=l.tileID.key,x=this._pixelsToTileUnitsCache;if(x[d])return x[d];const C=i.b_(l,this);return x[d]=C,x[d]}customLayerMatrix(){return this.mercatorMatrix.slice()}globeToMercatorMatrix(){if(this.projection.name==="globe"){const l=1/this.worldSize,d=i.ab.mat4.fromScaling([],[l,l,l]);return i.ab.mat4.multiply(d,d,this.globeMatrix),d}}recenterOnTerrain(){if(!this._elevation||this.projection.name==="globe")return;const l=this._elevation;this._updateCameraState();const d=i.bH(1,this._center.lat)*this.worldSize,x=this._computeCameraPosition(d),C=this._camera.forward(),B=i.bH(1,this._center.lat);x[2]/=B,C[2]/=B,i.ab.vec3.normalize(C,C);const F=l.raycast(x,C,l.exaggeration());if(F){const z=i.ab.vec3.scaleAndAdd([],x,C,F),K=new i.aa(z[0],z[1],i.bH(z[2],i.aS(z[1]))),X=(K.z+i.ab.vec3.length([K.x-x[0],K.y-x[1],K.z-x[2]*B]))*this._pixelsPerMercatorPixel;this._seaLevelZoom=this._zoomFromMercatorZ(X),this._centerAltitude=K.toAltitude(),this._center=this.coordinateLocation(K),this._updateZoomFromElevation(),this._constrain(),this._calcMatrices()}}_constrainCamera(l=!1){if(!this._elevation)return;const d=this._elevation,x=i.bH(1,this._center.lat)*this.worldSize,C=this._computeCameraPosition(x),B=d.getAtPointOrZero(new i.aa(...C)),F=this.pixelsPerMeter/this.worldSize*B,z=this._minimumHeightOverTerrain(),K=C[2]-F;if(K<=z)if(K<0||l){const X=this.locationCoordinate(this._center,this._centerAltitude),J=[C[0],C[1],X.z-C[2]],oe=i.ab.vec3.length(J);J[2]-=(z-K)/this._pixelsPerMercatorPixel;const se=i.ab.vec3.length(J);if(se===0)return;i.ab.vec3.scale(J,J,oe/se*this._pixelsPerMercatorPixel),this._camera.position=[C[0],C[1],X.z*this._pixelsPerMercatorPixel-J[2]],this._updateStateFromCamera()}else this._isCameraConstrained=!0}_constrain(){if(!this.center||!this.width||!this.height||this._constraining)return;this._constraining=!0;const l=this.projection.name==="globe"||this.mercatorFromTransition;if(this.projection.isReprojectedInTileSpace||l){const se=this.center;return se.lat=i.aw(se.lat,this.minLat,this.maxLat),(this.maxBounds||!this.renderWorldCopies&&!l)&&(se.lng=i.aw(se.lng,this.minLng,this.maxLng)),this.center=se,void(this._constraining=!1)}const d=this._unmodified,{x,y:C}=this.point;let B=0,F=x,z=C;const K=this.width/2,X=this.height/2,J=this.worldMinY*this.scale,oe=this.worldMaxY*this.scale;if(C-X<J&&(z=J+X),C+X>oe&&(z=oe-X),oe-J<this.height&&(B=Math.max(B,this.height/(oe-J)),z=(oe+J)/2),this.maxBounds||!this._renderWorldCopies||!this.projection.wrap){const se=this.worldMinX*this.scale,ue=this.worldMaxX*this.scale,Ie=this.worldSize/2-(se+ue)/2;F=(x+Ie+this.worldSize)%this.worldSize-Ie,F-K<se&&(F=se+K),F+K>ue&&(F=ue-K),ue-se<this.width&&(B=Math.max(B,this.width/(ue-se)),F=(ue+se)/2)}F===x&&z===C||(this.center=this.unproject(new i.P(F,z))),B&&(this.zoom+=this.scaleZoom(B)),this._constrainCamera(),this._unmodified=d,this._constraining=!1}_minZoomForBounds(){let l=Math.max(0,this.scaleZoom(this.height/(this.worldMaxY-this.worldMinY)));return this.maxBounds&&(l=Math.max(l,this.scaleZoom(this.width/(this.worldMaxX-this.worldMinX)))),l}_maxCameraBoundsDistance(){return this._mercatorZfromZoom(this._minZoomForBounds())}_calcMatrices(){if(!this.height)return;const l=this.centerOffset,d=this.projection.name==="globe",x=this.pixelsPerMeter;this.projection.name==="globe"&&(this._mercatorScaleRatio=i.bH(1,this.center.lat)/i.bH(1,i.c8));const C=i.b$(this.projection,this.zoom,this.width,this.height,1024);this._pixelsPerMercatorPixel=this.projection.pixelSpaceConversion(this.center.lat,this.worldSize,C),this.cameraToCenterDistance=.5/Math.tan(.5*this._fov)*this.height*this._pixelsPerMercatorPixel,this._updateCameraState(),this._farZ=this.projection.farthestPixelDistance(this),this._nearZ=this.height/50;const B=this.projection.zAxisUnit==="meters"?x:1,F=this._camera.getWorldToCamera(this.worldSize,B);let z;const K=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,this._farZ);if(K[8]=2*-l.x/this.width,K[9]=2*l.y/this.height,this.isOrthographic){let xt=.5*this.height/Math.tan(this._fov/2)*1*Math.tan(.5*this._fov),Bt=xt*this.aspect,an=-Bt,tn=-xt;Bt-=l.x,an-=l.x,xt+=l.y,tn+=l.y,z=this._camera.getCameraToClipOrthographic(an,Bt,tn,xt,this._nearZ,this._farZ),((Ct,Rt,wn,kn)=>{for(let Qn=0;Qn<16;Qn++)Ct[Qn]=Cc(Rt[Qn],wn[Qn],kn)})(z,z,K,Wn(this.pitch>=15?1:this.pitch/15))}else z=K;const X=i.ab.mat4.mul([],K,F);let J=i.ab.mat4.mul([],z,F);if(this.projection.isReprojectedInTileSpace){const xt=this.locationCoordinate(this.center),Bt=i.ab.mat4.identity([]);i.ab.mat4.translate(Bt,Bt,[xt.x*this.worldSize,xt.y*this.worldSize,0]),i.ab.mat4.multiply(Bt,Bt,i.c0(this)),i.ab.mat4.translate(Bt,Bt,[-xt.x*this.worldSize,-xt.y*this.worldSize,0]),i.ab.mat4.multiply(J,J,Bt),i.ab.mat4.multiply(X,X,Bt),this.inverseAdjustmentMatrix=i.c1(this)}else this.inverseAdjustmentMatrix=[1,0,0,1];if(this.mercatorMatrix=i.ab.mat4.scale([],J,[this.worldSize,this.worldSize,this.worldSize/B,1]),this.projMatrix=J,this.invProjMatrix=i.ab.mat4.invert(new Float64Array(16),this.projMatrix),d){const xt=this._camera.getCameraToClipPerspective(this._fov,this.width/this.height,this._nearZ,1/0);xt[8]=2*-l.x/this.width,xt[9]=2*l.y/this.height,this.expandedFarZProjMatrix=i.ab.mat4.mul([],xt,F)}else this.expandedFarZProjMatrix=this.projMatrix;const oe=i.ab.mat4.invert([],z);this.frustumCorners=i.c2.fromInvProjectionMatrix(oe,this.horizonLineFromTop(),this.height),this.cameraFrustum=i.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,0,!d);const se=new Float32Array(16);i.ab.mat4.identity(se),i.ab.mat4.scale(se,se,[1,-1,1]),i.ab.mat4.rotateX(se,se,this._pitch),i.ab.mat4.rotateZ(se,se,this.angle);const ue=i.ab.mat4.perspective(new Float32Array(16),this._fov,this.width/this.height,this._nearZ,this._farZ);this.starsProjMatrix=i.ab.mat4.clone(ue);const Ie=(Math.PI/2-this._pitch)*(this.height/this._fov)*this._horizonShift;ue[8]=2*-l.x/this.width,ue[9]=2*(l.y+Ie)/this.height,this.skyboxMatrix=i.ab.mat4.multiply(se,ue,se);const Se=this.point,Pe=Se.x,Le=Se.y,$e=this.width%2/2,rt=this.height%2/2,et=Math.cos(this.angle),ft=Math.sin(this.angle),dt=Pe-Math.round(Pe)+et*$e+ft*rt,ht=Le-Math.round(Le)+et*rt+ft*$e,ut=new Float64Array(J);if(i.ab.mat4.translate(ut,ut,[dt>.5?dt-1:dt,ht>.5?ht-1:ht,0]),this.alignedProjMatrix=ut,J=i.ab.mat4.create(),i.ab.mat4.scale(J,J,[this.width/2,-this.height/2,1]),i.ab.mat4.translate(J,J,[1,-1,0]),this.labelPlaneMatrix=J,J=i.ab.mat4.create(),i.ab.mat4.scale(J,J,[1,-1,1]),i.ab.mat4.translate(J,J,[-1,-1,0]),i.ab.mat4.scale(J,J,[2/this.width,2/this.height,1]),this.glCoordMatrix=J,this.pixelMatrix=i.ab.mat4.multiply(new Float64Array(16),this.labelPlaneMatrix,X),this._calcFogMatrices(),this._distanceTileDataCache={},J=i.ab.mat4.invert(new Float64Array(16),this.pixelMatrix),!J)throw new Error("failed to invert matrix");if(this.pixelMatrixInverse=J,this.projection.name==="globe"||this.mercatorFromTransition){this.globeMatrix=i.c3(this);const xt=[this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]];this.globeCenterInViewSpace=i.ab.vec3.transformMat4(xt,xt,F),this.globeRadius=this.worldSize/2/Math.PI-1}else this.globeMatrix=J;this._projMatrixCache={},this._alignedProjMatrixCache={},this._pixelsToTileUnitsCache={},this._expandedProjMatrixCache={}}_calcFogMatrices(){this._fogTileMatrixCache={};const l=this.cameraWorldSizeForFog,d=this.cameraPixelsPerMeter,x=this._camera.position,C=1/this.height/this._pixelsPerMercatorPixel,B=[l,l,d];i.ab.vec3.scale(B,B,C),i.ab.vec3.scale(x,x,-1),i.ab.vec3.multiply(x,x,B);const F=i.ab.mat4.create();i.ab.mat4.translate(F,F,x),i.ab.mat4.scale(F,F,B),this.mercatorFogMatrix=F,this.worldToFogMatrix=this._camera.getWorldToCameraPosition(l,d,C)}_computeCameraPosition(l){const d=(l=l||this.pixelsPerMeter)/this.pixelsPerMeter,x=this._camera.forward(),C=this.point,B=this._mercatorZfromZoom(this._seaLevelZoom?this._seaLevelZoom:this._zoom)*d-l/this.worldSize*this._centerAltitude;return[C.x/this.worldSize-x[0]*B,C.y/this.worldSize-x[1]*B,l/this.worldSize*this._centerAltitude-x[2]*B]}_updateCameraState(){this.height&&(this._camera.setPitchBearing(this._pitch,this.angle),this._camera.position=this._computeCameraPosition())}_translateCameraConstrained(l){const d=this._maxCameraBoundsDistance()*Math.cos(this._pitch),x=this._camera.position[2],C=l[2];let B=1;this.projection.wrap&&(this.center=this.center.wrap()),C>0&&(B=Math.min((d-x)/C,1)),this._camera.position=i.ab.vec3.scaleAndAdd([],this._camera.position,l,B),this._updateStateFromCamera()}_updateStateFromCamera(){const l=this._camera.position,d=this._camera.forward(),{pitch:x,bearing:C}=this._camera.getPitchBearing(),B=i.bH(this._centerAltitude,this.center.lat)*this._pixelsPerMercatorPixel,F=this._mercatorZfromZoom(this._maxZoom)*Math.cos(i.ai(this._maxPitch)),z=Math.max((l[2]-B)/Math.cos(x),F),K=this._zoomFromMercatorZ(z);i.ab.vec3.scaleAndAdd(l,l,d,z),this._pitch=i.aw(x,i.ai(this.minPitch),i.ai(this.maxPitch)),this.angle=i.bF(C,-Math.PI,Math.PI),this._setZoom(i.aw(K,this._minZoom,this._maxZoom)),this._updateSeaLevelZoom(),this._center=this.coordinateLocation(new i.aa(l[0],l[1],l[2])),this._unmodified=!1,this._constrain(),this._calcMatrices()}_worldSizeFromZoom(l){return Math.pow(2,l)*this.tileSize}_mercatorZfromZoom(l){return this.cameraToCenterDistance/this._worldSizeFromZoom(l)}_minimumHeightOverTerrain(){const l=Math.min(this._seaLevelZoom!=null?this._seaLevelZoom:this._zoom,this._maxZoom)+4;return this._mercatorZfromZoom(l)}_zoomFromMercatorZ(l){return this.scaleZoom(this.cameraToCenterDistance/(l*this.tileSize))}zoomFromMercatorZAdjusted(l){let d=0,x=i.bY,C=0,B=1/0;for(;x-d>1e-6&&x>d;){const F=d+.5*(x-d),z=this.tileSize*Math.pow(2,F),K=this.getCameraToCenterDistance(this.projection,F,z),X=this.scaleZoom(K/(l*this.tileSize)),J=Math.abs(F-X);J<B&&(B=J,C=F),F<X?d=F:x=F}return C}_terrainEnabled(){return!(!this._elevation||!this.projection.supportsTerrain&&(i.w("Terrain is not yet supported with alternate projections. Use mercator or globe to enable terrain."),1))}anyCornerOffEdge(l,d){const x=Math.min(l.x,d.x),C=Math.max(l.x,d.x),B=Math.min(l.y,d.y),F=Math.max(l.y,d.y);if(B<this.horizonLineFromTop(!1))return!0;if(this.projection.name!=="mercator")return!1;const z=[new i.P(x,B),new i.P(C,F),new i.P(x,F),new i.P(C,B)],K=this.renderWorldCopies?-3:0,X=this.renderWorldCopies?4:1;for(const J of z){const oe=this.pointRayIntersection(J);if(oe.t<0)return!0;const se=this.rayIntersectionCoordinate(oe);if(se.x<K||se.y<0||se.x>X||se.y>1)return!0}return!1}isHorizonVisible(){return this.pitch+i.c4(this.fovAboveCenter)>88||this.anyCornerOffEdge(new i.P(0,0),new i.P(this.width,this.height))}zoomDeltaToMovement(l,d){const x=i.ab.vec3.length(i.ab.vec3.sub([],this._camera.position,l)),C=this._zoomFromMercatorZ(x)+d;return x-this._mercatorZfromZoom(C)}getCameraPoint(){if(this.projection.name==="globe"){const l=function([d,x,C],B){const F=[d,x,C,1];i.ab.vec4.transformMat4(F,F,B);const z=F[3]=Math.max(F[3],1e-6);return F[0]/=z,F[1]/=z,F[2]/=z,F}([this.globeMatrix[12],this.globeMatrix[13],this.globeMatrix[14]],this.pixelMatrix);return new i.P(l[0],l[1])}{const l=Math.tan(this._pitch)*(this.cameraToCenterDistance||1);return this.centerPoint.add(new i.P(0,l))}}getCameraToCenterDistance(l,d=this.zoom,x=this.worldSize){const C=i.b$(l,d,this.width,this.height,1024),B=l.pixelSpaceConversion(this.center.lat,x,C);let F=.5/Math.tan(.5*this._fov)*this.height*B;return this.isOrthographic&&(F=Cc(1,F,Wn(this.pitch>=15?1:this.pitch/15))),F}getWorldToCameraMatrix(){const l=this._camera.getWorldToCamera(this.worldSize,this.projection.zAxisUnit==="meters"?this.pixelsPerMeter:1);return this.projection.name==="globe"&&i.ab.mat4.multiply(l,l,this.globeMatrix),l}getFrustum(l){return i.bR.fromInvProjectionMatrix(this.invProjMatrix,this.worldSize,l,this.projection.zAxisUnit==="meters")}}const rc=(v,l)=>{if(l>0&&v.terrain&&i.w("Cutoff is currently disabled on terrain"),l<=0||v.terrain)return{shouldRenderCutoff:!1,uniformValues:{u_cutoff_params:[0,0,0,1]}};const d=v.transform,x=Math.max(Math.abs(d._zoom-(v.minCutoffZoom-1)),1),C=d.isLODDisabled(!1)?i.ac(60,45,d.pitch):i.ac(30,15,d.pitch),B=d._farZ-d._nearZ,F=l*d.height,z=((1-(K=C))*d.cameraToCenterDistance+K*(d._farZ+F))*x;var K;return{shouldRenderCutoff:C<1,uniformValues:{u_cutoff_params:[d._nearZ,d._farZ,(z-d._nearZ)/B,(z-F-d._nearZ)/B]}}},Gs={cascadeCount:2,normalOffset:3,shadowMapResolution:2048};class Cu{constructor(l,d){this.aabb=l,this.lastCascade=d}}class Su{add(l,d){const x=this.receivers[l.key];x!==void 0?(x.aabb.min[0]=Math.min(x.aabb.min[0],d.min[0]),x.aabb.min[1]=Math.min(x.aabb.min[1],d.min[1]),x.aabb.min[2]=Math.min(x.aabb.min[2],d.min[2]),x.aabb.max[0]=Math.max(x.aabb.max[0],d.max[0]),x.aabb.max[1]=Math.max(x.aabb.max[1],d.max[1]),x.aabb.max[2]=Math.max(x.aabb.max[2],d.max[2])):this.receivers[l.key]=new Cu(d,null)}clear(){this.receivers={}}get(l){return this.receivers[l.key]}computeRequiredCascades(l,d,x){const C=i.cd.fromPoints(l.points);let B=0;for(const F in this.receivers){const z=this.receivers[F];if(!z||!C.intersectsAabb(z.aabb))continue;z.aabb.min=C.closestPoint(z.aabb.min),z.aabb.max=C.closestPoint(z.aabb.max);const K=z.aabb.getCorners();for(let X=0;X<x.length;X++){let J=!0;for(const oe of K){const se=[oe[0]*d,oe[1]*d,oe[2]];if(i.ab.vec3.transformMat4(se,se,x[X].matrix),se[0]<-1||se[0]>1||se[1]<-1||se[1]>1){J=!1;break}}if(z.lastCascade=X,B=Math.max(B,X),J)break}}return B+1}}class lu{constructor(l){this.painter=l,this._enabled=!1,this._shadowLayerCount=0,this._numCascadesToRender=0,this._cascades=[],this._groundShadowTiles=[],this._receivers=new Su,this._depthMode=new mr(l.context.gl.LEQUAL,mr.ReadWrite,[0,1]),this._uniformValues={u_light_matrix_0:new Float32Array(16),u_light_matrix_1:new Float32Array(16),u_shadow_intensity:0,u_fade_range:[0,0],u_shadow_normal_offset:[1,1,1],u_shadow_texel_size:1,u_shadow_map_resolution:1,u_shadow_direction:[0,0,1],u_shadow_bias:[36e-5,.0012,.012],u_shadowmap_0:0,u_shadowmap_1:0},this._forceDisable=!1,this.useNormalOffset=!1,l.tp.registerParameter(this,["Shadows"],"_forceDisable",{label:"forceDisable"},()=>{this.painter.style.map.triggerRepaint()}),l.tp.registerParameter(Gs,["Shadows"],"cascadeCount",{min:1,max:2,step:1}),l.tp.registerParameter(Gs,["Shadows"],"normalOffset",{min:0,max:10,step:.05}),l.tp.registerParameter(Gs,["Shadows"],"shadowMapResolution",{min:32,max:2048,step:32}),l.tp.registerBinding(this,["Shadows"],"_numCascadesToRender",{readonly:!0,label:"numCascadesToRender"})}destroy(){for(const l of this._cascades)l.texture.destroy(),l.framebuffer.destroy();this._cascades=[]}updateShadowParameters(l,d){const x=this.painter;if(this._enabled=!1,this._shadowLayerCount=0,this._receivers.clear(),!d||!d.properties)return;const C=d.properties.get("shadow-intensity");if(!d.shadowsEnabled()||C<=0||(this._shadowLayerCount=x.style.order.reduce((Ie,Se)=>{const Pe=x.style._mergedLayers[Se];return Ie+(Pe.hasShadowPass()&&!Pe.isHidden(l.zoom)?1:0)},0),this._enabled=this._shadowLayerCount>0,!this.enabled))return;const B=x.context,F=Gs.shadowMapResolution,z=Gs.shadowMapResolution;if(this._cascades.length===0||Gs.shadowMapResolution!==this._cascades[0].texture.size[0]){this._cascades=[];for(let Ie=0;Ie<Gs.cascadeCount;++Ie){const Se=x._shadowMapDebug,Pe=B.gl,Le=B.createFramebuffer(F,z,Se,"texture"),$e=new i.T(B,{width:F,height:z,data:null},Pe.DEPTH_COMPONENT16);if(Le.depthAttachment.set($e.texture),Se){const rt=new i.T(B,{width:F,height:z,data:null},Pe.RGBA8);Le.colorAttachment.set(rt.texture)}this._cascades.push({framebuffer:Le,texture:$e,matrix:[],far:0,boundingSphereRadius:0,frustum:new i.bR,scale:0})}}this.shadowDirection=Uc(d);let K=0;if(l.elevation){const Ie=l.elevation,Se=[1e4,-1e4];Ie.visibleDemTiles.filter(Pe=>Pe.dem).forEach(Pe=>{const Le=Pe.dem.tree;Se[0]=Math.min(Se[0],Le.minimums[0]),Se[1]=Math.max(Se[1],Le.maximums[0])}),Se[0]!==1e4&&(K=(Se[1]-Se[0])*Ie.exaggeration())}const X=1.5*l.cameraToCenterDistance,J=3*X,oe=new Float64Array(16);for(let Ie=0;Ie<this._cascades.length;++Ie){const Se=this._cascades[Ie];let Pe=l.height/50,Le=1;Gs.cascadeCount===1?Le=J:Ie===0?Le=X:(Pe=X,Le=J);const[$e,rt]=Ua(l,this.shadowDirection,Pe,Le,Gs.shadowMapResolution,K);Se.scale=l.scale,Se.matrix=$e,Se.boundingSphereRadius=rt,i.ab.mat4.invert(oe,Se.matrix),Se.frustum=i.bR.fromInvProjectionMatrix(oe,1,0,!0),Se.far=Le}const se=this._cascades.length-1;this._uniformValues.u_fade_range=[.75*this._cascades[se].far,this._cascades[se].far],this._uniformValues.u_shadow_intensity=C,this._uniformValues.u_shadow_direction=[this.shadowDirection[0],this.shadowDirection[1],this.shadowDirection[2]],this._uniformValues.u_shadow_texel_size=1/Gs.shadowMapResolution,this._uniformValues.u_shadow_map_resolution=Gs.shadowMapResolution,this._uniformValues.u_shadowmap_0=na.ShadowMap0,this._uniformValues.u_shadowmap_1=na.ShadowMap0+1,this._groundShadowTiles=x.transform.coveringTiles({tileSize:512,renderWorldCopies:!0});const ue=x.transform.elevation;for(const Ie of this._groundShadowTiles){let Se={min:0,max:0};if(ue){const Pe=ue.getMinMaxForTile(Ie);Pe&&(Se=Pe)}this.addShadowReceiver(Ie.toUnwrapped(),Se.min,Se.max)}}get enabled(){return this._enabled&&!this._forceDisable}set enabled(l){this._enabled=l}drawShadowPass(l,d){if(!this.enabled)return;const x=this.painter,C=x.context;this._numCascadesToRender=this._receivers.computeRequiredCascades(x.transform.getFrustum(0),x.transform.worldSize,this._cascades),C.viewport.set([0,0,Gs.shadowMapResolution,Gs.shadowMapResolution]);for(let B=0;B<this._numCascadesToRender;++B){x.currentShadowCascade=B,C.bindFramebuffer.set(this._cascades[B].framebuffer.framebuffer),C.clear({color:i.aj.white,depth:1});for(const F of l.order){const z=l._mergedLayers[F];if(!z.hasShadowPass()||z.isHidden(x.transform.zoom))continue;const K=l.getLayerSourceCache(z),X=K?d[K.id]:void 0;(z.type==="model"||X&&X.length)&&x.renderLayer(x,K,z,X)}}x.currentShadowCascade=0}drawGroundShadows(){if(!this.enabled)return;const l=this.painter,d=l.style,x=l.context,C=d.directionalLight,B=d.ambientLight;if(!C||!B)return;const F=[],z=rc(l,l.longestCutoffRange);z.shouldRenderCutoff&&F.push("RENDER_CUTOFF"),F.push("RENDER_SHADOWS","DEPTH_TEXTURE"),this.useNormalOffset&&F.push("NORMAL_OFFSET");const K=Sc(d,C,B),X=new mr(x.gl.LEQUAL,mr.ReadOnly,l.depthRangeFor3D);for(const J of this._groundShadowTiles){const oe=J.toUnwrapped(),se=l.isTileAffectedByFog(J),ue=l.getOrCreateProgram("groundShadow",{defines:F,overrideFog:se});this.setupShadows(oe,ue),l.uploadCommonUniforms(x,ue,oe,null,z);const Ie={u_matrix:l.transform.calculateProjMatrix(oe),u_ground_shadow_factor:K};ue.draw(l,x.gl.TRIANGLES,X,Rr.disabled,Mr.multiply,Lr.disabled,Ie,"ground_shadow",l.tileExtentBuffer,l.quadTriangleIndexBuffer,l.tileExtentSegments,{},l.transform.zoom,null,null)}}getShadowPassColorMode(){return this.painter._shadowMapDebug?Mr.unblended:Mr.disabled}getShadowPassDepthMode(){return this._depthMode}getShadowCastingLayerCount(){return this._shadowLayerCount}calculateShadowPassMatrixFromTile(l){const d=this.painter.transform,x=d.calculatePosMatrix(l,d.worldSize);return i.ab.mat4.multiply(x,this._cascades[this.painter.currentShadowCascade].matrix,x),Float32Array.from(x)}calculateShadowPassMatrixFromMatrix(l){return i.ab.mat4.multiply(l,this._cascades[this.painter.currentShadowCascade].matrix,l),Float32Array.from(l)}setupShadows(l,d,x,C=0){if(!this.enabled)return;const B=this.painter.transform,F=this.painter.context,z=F.gl,K=this._uniformValues,X=new Float64Array(16),J=B.calculatePosMatrix(l,B.worldSize);for(let oe=0;oe<this._cascades.length;oe++)i.ab.mat4.multiply(X,this._cascades[oe].matrix,J),K[oe===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(X),F.activeTexture.set(z.TEXTURE0+na.ShadowMap0+oe),this._cascades[oe].texture.bind(z.NEAREST,z.CLAMP_TO_EDGE);if(this.useNormalOffset=!!x,this.useNormalOffset){const oe=i.cc(l.canonical),se=2/B.tileSize*i.ag/Gs.shadowMapResolution,ue=se*this._cascades[0].boundingSphereRadius,Ie=se*this._cascades[this._cascades.length-1].boundingSphereRadius,Se=(x==="vector-tile"?1:3)/Math.pow(2,C-l.canonical.z-(1-B.zoom+Math.floor(B.zoom)));K.u_shadow_normal_offset=[oe,ue*Se,Ie*Se],K.u_shadow_bias=[6e-5,.0012,.012]}else K.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(F,K)}setupShadowsFromMatrix(l,d,x=!1){if(!this.enabled)return;const C=this.painter.context,B=C.gl,F=this._uniformValues,z=new Float64Array(16);for(let K=0;K<Gs.cascadeCount;K++)i.ab.mat4.multiply(z,this._cascades[K].matrix,l),F[K===0?"u_light_matrix_0":"u_light_matrix_1"]=Float32Array.from(z),C.activeTexture.set(B.TEXTURE0+na.ShadowMap0+K),this._cascades[K].texture.bind(B.NEAREST,B.CLAMP_TO_EDGE);if(this.useNormalOffset=x,x){const K=Gs.normalOffset;F.u_shadow_normal_offset=[1,K,K],F.u_shadow_bias=[6e-5,.0012,.012]}else F.u_shadow_bias=[36e-5,.0012,.012];d.setShadowUniformValues(C,F)}getShadowUniformValues(){return this._uniformValues}getCurrentCascadeFrustum(){return this._cascades[this.painter.currentShadowCascade].frustum}computeSimplifiedTileShadowVolume(l,d,x,C){if(C[2]>=0)return{};const B=function(K,X,J){const oe=J/(1<<K.canonical.z);return new i.cd([K.canonical.x*oe+K.wrap*J,K.canonical.y*oe+K.wrap*J,0],[(K.canonical.x+1)*oe+K.wrap*J,(K.canonical.y+1)*oe+K.wrap*J,X])}(l,d,x).getCorners(),F=d/-C[2];C[0]<0?(i.ab.vec3.add(B[0],B[0],[C[0]*F,0,0]),i.ab.vec3.add(B[3],B[3],[C[0]*F,0,0])):C[0]>0&&(i.ab.vec3.add(B[1],B[1],[C[0]*F,0,0]),i.ab.vec3.add(B[2],B[2],[C[0]*F,0,0])),C[1]<0?(i.ab.vec3.add(B[0],B[0],[0,C[1]*F,0]),i.ab.vec3.add(B[1],B[1],[0,C[1]*F,0])):C[1]>0&&(i.ab.vec3.add(B[2],B[2],[0,C[1]*F,0]),i.ab.vec3.add(B[3],B[3],[0,C[1]*F,0]));const z={};return z.vertices=B,z.planes=[wl(B[1],B[0],B[4]),wl(B[2],B[1],B[5]),wl(B[3],B[2],B[6]),wl(B[0],B[3],B[7])],z}addShadowReceiver(l,d,x){this._receivers.add(l,i.cd.fromTileIdAndHeight(l,d,x))}getMaxCascadeForTile(l){const d=this._receivers.get(l);return d&&d.lastCascade?d.lastCascade:0}}function wl(v,l,d){const x=i.ab.vec3.sub([],d,l),C=i.ab.vec3.sub([],v,l),B=i.ab.vec3.cross([],x,C),F=i.ab.vec3.length(B);return F===0?[0,0,1,0]:(i.ab.vec3.scale(B,B,1/F),[B[0],B[1],B[2],-i.ab.vec3.dot(B,l)])}function Uc(v){const l=v.properties.get("direction"),d=i.cb(l.x,l.y,l.z);d[2]=i.aw(d[2],0,75);const x=i.ce([d[0],d[1],d[2]]);return i.ab.vec3.fromValues(x.x,x.y,x.z)}function Sc(v,l,d){const x=l.properties.get("color-use-theme")==="none",C=l.properties.get("color"),B=l.properties.get("intensity"),F=l.properties.get("direction"),z=[F.x,F.y,F.z],K=d.properties.get("color-use-theme")==="none",X=d.properties.get("color"),J=d.properties.get("intensity"),oe=Math.max(i.ab.vec3.dot([0,0,1],z),0),se=[0,0,0];i.ab.vec3.scale(se,X.toRenderColor(K?null:v.getLut(l.scope)).toArray01Linear().slice(0,3),J);const ue=[0,0,0];return i.ab.vec3.scale(ue,C.toRenderColor(x?null:v.getLut(d.scope)).toArray01Linear().slice(0,3),oe*B),i.cf([se[0]>0?se[0]/(se[0]+ue[0]):0,se[1]>0?se[1]/(se[1]+ue[1]):0,se[2]>0?se[2]/(se[2]+ue[2]):0])}function Ua(v,l,d,x,C,B){const F=v.zoom,z=v.scale,K=v.worldSize,X=1/K,J=v.aspect,oe=Math.sqrt(1+J*J)*Math.tan(.5*v.fovX),se=oe*oe,ue=x-d,Ie=x+d;let Se,Pe;se>ue/Ie?(Se=x,Pe=x*oe):(Se=.5*Ie*(1+se),Pe=.5*Math.sqrt(ue*ue+2*(x*x+d*d)*se+Ie*Ie*se*se));const Le=v.projection.pixelsPerMeter(v.center.lat,K),$e=v._camera.getCameraToWorldMercator(),rt=[0,0,-Se*X];i.ab.vec3.transformMat4(rt,rt,$e);let et=Pe*X;const ft=v._edgeInsets;if(!(ft.left===0&&ft.top===0&&ft.right===0&&ft.bottom===0||ft.left===ft.right&&ft.top===ft.bottom)){const Dn=v._camera.getWorldToCamera(v.worldSize,v.projection.zAxisUnit==="meters"?Le:1),Fn=v._camera.getCameraToClipPerspective(v._fov,v.width/v.height,d,x);Fn[8]=2*-v.centerOffset.x/v.width,Fn[9]=2*v.centerOffset.y/v.height;const bn=new Float64Array(16);i.ab.mat4.mul(bn,Fn,Dn);const tr=new Float64Array(16);i.ab.mat4.invert(tr,bn);const nr=i.bR.fromInvProjectionMatrix(tr,K,F,!0);for(const Yn of nr.points){const hr=((dt=Yn)[0]/=z,dt[1]/=z,dt[2]=i.bH(dt[2],v._center.lat),dt);et=Math.max(et,i.ab.vec3.len(i.ab.vec3.subtract([],rt,hr)))}}var dt;et*=C/(C-1);const ht=Math.acos(l[2]),ut=Math.atan2(-l[0],-l[1]),xt=new Vd;xt.position=rt,xt.setPitchBearing(ht,ut);const Bt=xt.getWorldToCamera(K,Le),an=et*K,tn=Math.min(v._mercatorZfromZoom(17)*K*-2,-2*an),Ct=xt.getCameraToClipOrthographic(-an,an,-an,an,tn,(an+B*Le)/l[2]),Rt=new Float64Array(16);i.ab.mat4.multiply(Rt,Ct,Bt);const wn=i.ab.vec3.fromValues(Math.floor(1e6*rt[0])/1e6*K,Math.floor(1e6*rt[1])/1e6*K,0),kn=.5*C,Qn=[0,0,0];i.ab.vec3.transformMat4(Qn,wn,Rt),i.ab.vec3.scale(Qn,Qn,kn);const Jt=[Math.floor(Qn[0]),Math.floor(Qn[1]),Math.floor(Qn[2])],In=[0,0,0];i.ab.vec3.sub(In,Qn,Jt),i.ab.vec3.scale(In,In,-1/kn);const dn=new Float64Array(16);return i.ab.mat4.identity(dn),i.ab.mat4.translate(dn,dn,In),i.ab.mat4.multiply(Rt,dn,Rt),[Rt,an]}class Gd extends i.E{constructor(l){super(),this.requestManager=l,this.models={"":{}},this.numModelsLoading={}}loadModel(l,d){return i.aM(this.requestManager.transformRequest(d,i.R.Model).url).then(x=>{if(!x)return;const C=i.aN(x),B=new i.aO(l,void 0,void 0,C);return B.computeBoundsAndApplyParent(),B}).catch(x=>{if(x&&x.status===404)return null;this.fire(new i.y(new Error(`Could not load model ${l} from ${d}: ${x.message}`)))})}load(l,d){this.models[d]||(this.models[d]={});const x=Object.keys(l);this.numModelsLoading[d]=(this.numModelsLoading[d]||0)+x.length;const C=[];for(const B of x)C.push(this.loadModel(B,l[B]));Promise.allSettled(C).then(B=>{for(let F=0;F<B.length;F++){const{status:z,value:K}=B[F];z==="fulfilled"&&K&&(this.models[d][x[F]]={model:K,numReferences:1})}this.numModelsLoading[d]-=x.length,this.fire(new i.z("data",{dataType:"style"}))}).catch(B=>{this.fire(new i.y(new Error(`Could not load models: ${B.message}`)))})}isLoaded(){for(const l in this.numModelsLoading)if(this.numModelsLoading[l]>0)return!1;return!0}hasModel(l,d){return!!this.getModel(l,d)}getModel(l,d){return this.models[d]||(this.models[d]={}),this.models[d][l]?this.models[d][l].model:void 0}addModel(l,d,x){this.models[x]||(this.models[x]={}),this.hasModel(l,x)&&this.models[x][l].numReferences++,this.load({[l]:this.requestManager.normalizeModelURL(d)},x)}addModels(l,d){this.models[d]||(this.models[d]={});const x={};for(const C in l)this.models[d][C]={},x[C]=this.requestManager.normalizeModelURL(l[C]);this.load(x,d)}addModelsFromBucket(l,d){this.models[d]||(this.models[d]={});const x={};for(const C of l)this.hasModel(C,d)?this.models[d][C].numReferences++:x[C]=this.requestManager.normalizeModelURL(C);this.load(x,d)}removeModel(l,d){if(this.models[d]&&this.models[d][l]&&(this.models[d][l].numReferences--,this.models[d][l].numReferences===0)){const x=this.models[d][l].model;delete this.models[d][l],x.destroy()}}listModels(l){return this.models[l]||(this.models[l]={}),Object.keys(this.models[l])}upload(l,d){this.models[d]||(this.models[d]={});for(const x in this.models[d])this.models[d][x].model&&this.models[d][x].model.upload(l.context)}}const hf=new i.a5({data:new i.a6(i.a3.colorTheme.data)}),Ol={"mbx-indoor-active-floorplans":{default:["literal",[]]},"mbx-indoor-underground":{default:["literal",!1]},"mbx-indoor-loaded-levels":{default:["literal",[]]},"mbx-indoor-level-height":{default:["literal",{}]},"mbx-indoor-level-base":{default:["literal",{}]},"mbx-indoor-level-selected":{default:["literal",{}]},"mbx-indoor-level-overlapped":{default:["literal",{}]}};function Dl(v){return v=v||{},Object.assign(v,Ol)}class Kd extends i.E{constructor(l){super(),this.mergeFloors=!0,this._scope=void 0,this._queryFeatureSetId=void 0,this._buildingEntryFeatureSetId=void 0,this._selectedFloorplan=void 0,this._indoorData=void 0,this._selectedLevel=void 0,this._floorplanStates={},i.aP(["_onLoad","_onMove","_checkFloorplanVisible"],this),this._map=l,this._checkFloorplanVisible(!0),this._map.on("load",this._onLoad),this._map.on("move",this._onMove)}destroy(){this._map.indoor.off("load",this._onLoad),this._map.indoor.off("move",this._onMove),this._map=void 0}_onLoad(){this._map.style.forEachFragmentStyle(l=>{l.stylesheet.indoor&&(this._queryFeatureSetId?this.fire(new i.y(new Error("Multiple indoor map styles detected, simultaneous usage is not allowed currently."))):(this._queryFeatureSetId=l.stylesheet.indoor.floorplanFeaturesetId,this._buildingEntryFeatureSetId=l.stylesheet.indoor.buildingFeaturesetId,this._scope=l.scope))}),this._queryFeatureSetId&&this._buildingEntryFeatureSetId&&this._map.addInteraction("mbx-indoor-buildingclick",{type:"click",target:{featuresetId:this._buildingEntryFeatureSetId,importId:this._scope},handler:l=>(l.feature&&l.feature.properties.floorplan&&this.selectFloorplan(l.feature.properties.floorplan),!0)}),this._checkFloorplanVisible(!0)}_onMove(){this._checkFloorplanVisible(!1)}_checkFloorplanVisible(l){if(!this._queryFeatureSetId||!this._map.isStyleLoaded()||this._map.transform.zoom<13)return;this._indoorData&&!function(F,z){const[K,X]=F,{center:J,radius:oe}=z,[se,ue]=J,Ie=Math.abs(K-se);return Math.sqrt((Ie>180?360-Ie:Ie)**2+(X-ue)**2)<=oe}([this._map.getCenter().lng,this._map.getCenter().lat],this._indoorData.circumCircle)&&(this._indoorData=void 0,this._selectedFloorplan=void 0,this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",["literal",[]]),this.fire(new i.z("floorplangone")));const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},x=new i.P(this._map.transform.width/2,this._map.transform.height/2),C=[new i.P(0,0),new i.P(this._map.transform.width,this._map.transform.height)],B=this._map.queryRenderedFeatures(l?C:x,d);B.length>0&&(this._selectedFloorplan&&B[0].properties.id===this._selectedFloorplan.properties.id||(this._selectedFloorplan=B[0],this._floorplanSelected(!1)))}_floorplanSelected(l){this._indoorData=JSON.parse(this._selectedFloorplan.properties["indoor-data"]),this._indoorData.id=this._selectedFloorplan.properties.id,this._indoorData.circumCircle=function(B){const[[F,z],[K,X]]=B,J=(K-F+360)%360,oe=J>180?360-J:J;return{center:[(F+oe/2+360)%360,(z+X)/2],radius:Math.sqrt(oe**2+(X-z)**2)/2}}(this._indoorData.extent),this._floorplanStates[this._indoorData.id]||(this._floorplanStates[this._indoorData.id]={});const d=this._floorplanStates[this._indoorData.id].selectedBuilding,x=this._floorplanStates[this._indoorData.id].selectedLevel;let C;if(this._map.setConfigProperty(this._scope,"mbx-indoor-active-floorplans",this._indoorData.floorplanIDs),this._selectedLevel)for(const B of this._indoorData.levels)B.id===this._selectedLevel.id&&(C=B.id);if(this.fire(new i.z("floorplanselected",{buildings:this._indoorData.buildings,levels:this._indoorData.levels,selectedLevelId:C})),d){const B=this._indoorData.buildings.find(F=>F.id===d);this._buildingSelected(B,!1)}else this._indoorData.buildings.length>0&&this._buildingSelected(this._indoorData.buildings[0],!1);if(x){const B=this._indoorData.levels.find(F=>F.id===x);this._updateLevels(B,l)}else l&&this._indoorData["default-levels"].length>0&&this.selectLevel(this._indoorData["default-levels"][0])}_buildingSelected(l,d){d&&l&&l.extent&&this._map.fitBounds(l.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),this._floorplanStates[this._indoorData.id].selectedBuilding=l?l.id:void 0;const x=this._indoorData.levels.filter(C=>l.levels.includes(C.id));this.fire(new i.z("buildingselected",{buildingId:l.id,levels:x}))}_levelSelected(l){if(l==="overview")this._updateLevels(void 0,!0);else{const d=this._indoorData.levels.find(x=>x.id===l);this._updateLevels(d,!0)}this.fire(new i.z("levelselected",{levelId:l==="overview"?void 0:l}))}_updateLevels(l,d){if(!l)return this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",[]]),this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!1),this._floorplanStates[this._indoorData.id].selectedLevel=void 0,void(d&&this._indoorData.extent&&this._map.fitBounds(this._indoorData.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}));function x(X){const J=X.indexOf("/floor/");if(J===-1)return X;const oe=J+7,se=X.indexOf("/",oe);return se===-1?X.slice(oe):X.slice(oe,se)}this._selectedLevel=l,this._floorplanStates[this._indoorData.id].selectedLevel=l?l.id:void 0;const C=[],B={},F={},z={},K={};for(const X of this._indoorData.levels)if(C.push(X.id),B[X.id]=X.height,F[X.id]=X.base,l){if(this.mergeFloors){const J=x(l.id),oe=x(X.id);z[X.id]=oe===J?"true":"false"}else z[X.id]=X.id===l.id?"true":"false";K[X.id]=X.base<l.base?"true":"false"}else K[X.id]=!0;if(this._map.setConfigProperty(this._scope,"mbx-indoor-loaded-levels",["literal",C]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-height",["literal",B]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-base",["literal",F]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-selected",["literal",z]),this._map.setConfigProperty(this._scope,"mbx-indoor-level-overlapped",["literal",K]),l&&(this._map.setConfigProperty(this._scope,"mbx-indoor-underground",!!l.isUnderground),d&&l.extent)){const X=this._map.cameraForBounds(l.extent,{pitch:this._map.getPitch(),bearing:this._map.getBearing()}),J=this._map.getZoom(),oe=X.zoom?Math.abs(J-X.zoom):0;this._map.fitBounds(l.extent,oe>=1?{pitch:this._map.getPitch(),bearing:this._map.getBearing()}:{pitch:this._map.getPitch(),bearing:this._map.getBearing(),zoom:J})}}selectFloorplan(l){const d={target:{featuresetId:this._queryFeatureSetId,importId:this._scope}},x=[new i.P(0,0),new i.P(this._map.transform.width,this._map.transform.height)],C=this._map.queryRenderedFeatures(x,d);if(C.length>0){for(const B of C)if(JSON.parse(B.properties["indoor-data"]).floorplanIDs.includes(l)){this._selectedFloorplan=B,this._floorplanSelected(!0);break}}}selectBuilding(l){const d=this._indoorData.buildings.find(x=>x.id===l);this._buildingSelected(d,!0)}selectLevel(l){this._levelSelected(l)}}function td(v){if(!v.metadata||!v.metadata.content_area)return;const{left:l,top:d,width:x,height:C}=v.metadata.content_area;return[l,d,l+x,d+C]}const aa=(v,l)=>pt(v,l&&l.filter(d=>d.identifier!=="source.canvas")),yn=i.ay(Sr,["addLayer","removeLayer","setLights","setPaintProperty","setLayoutProperty","setSlot","setFilter","addSource","removeSource","setLayerZoomRange","setLight","setTransition","setGeoJSONSourceData","setTerrain","setFog","setSnow","setRain","setProjection","setCamera","addImport","removeImport","updateImport"]),$n=i.ay(Sr,["setCenter","setZoom","setBearing","setPitch"]),jn=new Set(["background","sky","slot","custom"]),Hr={version:8,layers:[],sources:{}},ci={duration:300,delay:0};class Bi extends i.E{constructor(l,d={}){super(),this.map=l,this.scope=d.scope||"",this.globalId=null,this.fragments=[],this.importDepth=d.importDepth||0,this.importsCache=d.importsCache||new Map,this.resolvedImports=d.resolvedImports||new Set,this.transition=i.l({},ci),this._buildingIndex=new Ml(this),this.crossTileSymbolIndex=new Ho,this._mergedOrder=[],this._drapedFirstOrder=[],this._mergedLayers={},this._mergedSourceCaches={},this._mergedOtherSourceCaches={},this._mergedSymbolSourceCaches={},this._clipLayerPresent=!1,this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this._changes=d.styleChanges||new pn,this.dispatcher=d.dispatcher?d.dispatcher:new i.D(i.ci(),this),d.imageManager?this.imageManager=d.imageManager:(this.imageManager=new hn(this.map._spriteFormat),this.imageManager.setEventedParent(this)),this.imageManager.createScope(this.scope),this.glyphManager=d.glyphManager?d.glyphManager:new i.cj(l._requestManager,d.localFontFamily?i.ck.all:d.localIdeographFontFamily?i.ck.ideographs:i.ck.none,d.localFontFamily||d.localIdeographFontFamily),d.modelManager?this.modelManager=d.modelManager:(this.modelManager=new Gd(l._requestManager),this.modelManager.setEventedParent(this)),this._layers={},this._sourceCaches={},this._otherSourceCaches={},this._symbolSourceCaches={},this._loaded=!1,this._precompileDone=!1,this._shouldPrecompile=!1,this._availableImages=[],this._order=[],this._markersNeedUpdate=!1,this.options=d.configOptions?d.configOptions:new Map,this._configDependentLayers=d.configDependentLayers?d.configDependentLayers:new Set,this._config=d.config,this._styleColorTheme={lut:null,lutLoading:!1,lutLoadingCorrelationID:0,colorTheme:null,colorThemeOverride:d.colorThemeOverride},this._styleColorThemeForScope={},this._initialConfig=d.initialConfig,this.dispatcher.broadcast("setReferrer",i.cl());const x=this;this._rtlTextPluginCallback=Bi.registerForPluginStateChange(C=>{x.dispatcher.broadcast("syncRTLPluginState",{pluginStatus:C.pluginStatus,pluginURL:C.pluginURL},(B,F)=>{if(i.cm(B),F&&F.every(z=>z))for(const z in x._sourceCaches){const K=x._sourceCaches[z],X=K.getSource().type;X!=="vector"&&X!=="geojson"||K.reload()}})}),this.on("data",C=>{if(C.dataType!=="source"||C.sourceDataType!=="metadata")return;const B=this.getOwnSource(C.sourceId);if(B&&B.vectorLayerIds)for(const F in this._layers){const z=this._layers[F];z.source===B.id&&this._validateLayer(z)}})}load(l){return l?(typeof l=="string"?this.loadURL(l):this.loadJSON(l),this):this}_getGlobalId(l){if(!l)return null;if(typeof l=="string"){if(i.f(l))return l;const d=i.cn(l);if(!d.startsWith("http"))try{return new URL(d,location.href).toString()}catch{return d}return d}return`json://${i.co(JSON.stringify(l))}`}_diffStyle(l,d,x){this.globalId=this._getGlobalId(l);const C=(B,F)=>{try{F(null,this.setState(B,x))}catch(z){F(z,!1)}};if(typeof l=="string"){const B=this.map._requestManager.normalizeStyleURL(l),F=this.map._requestManager.transformRequest(B,i.R.Style);i.n(F,(z,K)=>{z?this.fire(new i.y(z)):K&&C(K,d)})}else typeof l=="object"&&C(l,d)}loadURL(l,d={}){this.fire(new i.z("dataloading",{dataType:"style"}));const x=typeof d.validate=="boolean"?d.validate:!i.f(l);this.globalId=this._getGlobalId(l),l=this.map._requestManager.normalizeStyleURL(l,d.accessToken),this.resolvedImports.add(l);const C=this.importsCache.get(l);if(C)return this._load(C,x);const B=this.map._requestManager.transformRequest(l,i.R.Style);this._request=i.n(B,(F,z)=>{if(this._request=null,F)this.fire(new i.y(F));else if(z)return this.importsCache.set(l,z),this._load(z,x)})}loadJSON(l,d={}){this.fire(new i.z("dataloading",{dataType:"style"})),this.globalId=this._getGlobalId(l),this._request=i.q.frame(()=>{this._request=null,this._load(l,d.validate!==!1)})}loadEmpty(){this.fire(new i.z("dataloading",{dataType:"style"})),this._load(Hr,!1)}_loadImports(l,d,x){if(this.importDepth>=4)return i.w("Style doesn't support nesting deeper than 5"),Promise.resolve();const C=[];for(const B of l){const F=this._createFragmentStyle(B),z=new Promise(J=>{F.once("style.import.load",J),F.once("error",J)}).then(()=>this.mergeAll());if(C.push(z),this.resolvedImports.has(B.url)){F.loadEmpty();continue}const K=B.data||this.importsCache.get(B.url);K?(F.loadJSON(K,{validate:d}),this._isInternalStyle(K)&&(F.globalId=null)):B.url?F.loadURL(B.url,{validate:d}):F.loadEmpty();const X={style:F,id:B.id,config:B.config};if(x){const J=this.fragments.findIndex(({id:oe})=>oe===x);this.fragments=this.fragments.slice(0,J).concat(X).concat(this.fragments.slice(J))}else this.fragments.push(X)}return Promise.allSettled(C)}getImportGlobalIds(l=this,d=new Set){for(const x of l.fragments)x.style.globalId&&d.add(x.style.globalId),this.getImportGlobalIds(x.style,d);return[...d.values()]}_createFragmentStyle(l){const d=this.scope?i.aC(l.id,this.scope):l.id;let x;const C=this._initialConfig&&this._initialConfig[d];(l.config||C)&&(x=i.l({},l.config,C));const B=new Bi(this.map,{scope:d,styleChanges:this._changes,importDepth:this.importDepth+1,importsCache:this.importsCache,resolvedImports:new Set(this.resolvedImports),dispatcher:this.dispatcher,imageManager:this.imageManager,glyphManager:this.glyphManager,modelManager:this.modelManager,config:x,configOptions:this.options,colorThemeOverride:l["color-theme"],configDependentLayers:this._configDependentLayers});return B.setEventedParent(this.map,{style:B}),B}_reloadImports(){this.mergeAll(),this._updateMapProjection(),this.updateConfigDependencies(),this.map._triggerCameraUpdate(this.camera),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),this._shouldPrecompile=this.map._precompilePrograms&&this.isRootStyle()}_isInternalStyle(l){return this.isRootStyle()&&(l.fragment||!!l.schema&&l.fragment!==!1)}_load(l,d){const x=l.indoor?Dl(l.schema):l.schema;if(this._isInternalStyle(l)){const F=i.l({},Hr,{imports:[{id:"basemap",data:l,url:""}]});return void this._load(F,d)}if(this.updateConfig(this._config,x),d&&aa(this,hs(l)))return;this._loaded=!0,this.stylesheet=i.cp(l);const C=()=>{for(const X in l.sources)this.addSource(X,l.sources[X],{validate:!1,isInitialLoad:!0});l.sprite?this._loadIconset(l.sprite):(this.imageManager.setLoaded(!0,this.scope),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0})),this.glyphManager.setURL(l.glyphs,this.scope);const F=sp(this.stylesheet.layers);if(this._order=F.map(X=>X.id),this.stylesheet.light&&i.w("The `light` root property is deprecated, prefer using `lights` with `flat` light type instead."),this.stylesheet.lights)if(this.stylesheet.lights.length===1&&this.stylesheet.lights[0].type==="flat"){const X=this.stylesheet.lights[0];this.light=new jt(X.properties,X.id)}else this.setLights(this.stylesheet.lights);this.light||(this.light=new jt(this.stylesheet.light)),this._layers={};for(const X of F){const J=i.cu(X,this.scope,this._styleColorTheme.lut,this.options);J.configDependencies.size!==0&&this._configDependentLayers.add(J.fqid),J.setEventedParent(this,{layer:{id:J.id}}),this._layers[J.id]=J;const oe=this.getOwnLayerSourceCache(J),se=!!this.directionalLight&&this.directionalLight.shadowsEnabled();oe&&J.canCastShadows()&&se&&(oe.castsShadows=!0)}this.stylesheet.featuresets&&this.setFeaturesetSelectors(this.stylesheet.featuresets),this.stylesheet.models&&this.modelManager.addModels(this.stylesheet.models,this.scope);const z=this.stylesheet.terrain;z&&(this.checkCanvasFingerprintNoise(),this.disableElevatedTerrain||this.terrainSetForDrapingOnly()||this._createTerrain(z,1)),this.stylesheet.fog&&this._createFog(this.stylesheet.fog),this.stylesheet.snow&&this._createSnow(this.stylesheet.snow),this.stylesheet.rain&&this._createRain(this.stylesheet.rain),this.stylesheet.transition&&this.setTransition(this.stylesheet.transition),this.fire(new i.z("data",{dataType:"style"}));const K=this.isRootStyle();l.imports?this._loadImports(l.imports,d).then(()=>{this._reloadImports(),this.fire(new i.z(K?"style.load":"style.import.load"))}):(this._reloadImports(),this.fire(new i.z(K?"style.load":"style.import.load")))};this._styleColorTheme.colorTheme=this.stylesheet["color-theme"];const B=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(B){const F=this._evaluateColorThemeData(B);this._loadColorTheme(F).then(()=>{C()}).catch(z=>{i.w(`Couldn't load color theme from the stylesheet: ${z}`),C()})}else this._styleColorTheme.lut=null,C()}isRootStyle(){return this.importDepth===0}mergeAll(){let l,d,x,C,B,F,z,K,X,J;const oe={};this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(se=>{if(se.stylesheet){if(se.light!=null&&(l=se.light),se.stylesheet.lights)for(const ue of se.stylesheet.lights)ue.type==="ambient"&&se.ambientLight!=null&&(d=se.ambientLight),ue.type==="directional"&&se.directionalLight!=null&&(x=se.directionalLight);C=this._prioritizeTerrain(C,se.terrain,se.stylesheet.terrain),se.stylesheet.fog&&se.fog!=null&&(B=se.fog),se.stylesheet.snow&&se.snow!=null&&(F=se.snow),se.stylesheet.rain&&se.rain!=null&&(z=se.rain),se.stylesheet.camera!=null&&(J=se.stylesheet.camera),se.stylesheet.projection!=null&&(K=se.stylesheet.projection),se.stylesheet.transition!=null&&(X=se.stylesheet.transition),oe[se.scope]=se._styleColorTheme}}),this.light=l,this.ambientLight=d,this.directionalLight=x,this.fog=B,this.snow=F,this.rain=z,this._styleColorThemeForScope=oe,C===null?delete this.terrain:this.terrain=C,this.camera=J||{"camera-projection":"perspective"},this.projection=K||{name:"mercator"},this.transition=i.l({},ci,X),this.mergeSources(),this.mergeLayers()}forEachFragmentStyle(l){const d=x=>{for(const C of x.fragments)d(C.style);l(x)};d(this)}_prioritizeTerrain(l,d,x){const C=l&&l.drapeRenderMode===0;return x===null?d&&d.drapeRenderMode===0?d:C?l:null:d!=null&&(!l||C||d&&d.drapeRenderMode===1)?d:l}mergeTerrain(){let l;this.terrain&&this.terrain.scope!==this.scope&&delete this.terrain,this.forEachFragmentStyle(d=>{l=this._prioritizeTerrain(l,d.terrain,d.stylesheet.terrain)}),l===null?delete this.terrain:this.terrain=l}mergeProjection(){let l;this.forEachFragmentStyle(d=>{d.stylesheet.projection!=null&&(l=d.stylesheet.projection)}),this.projection=l||{name:"mercator"}}mergeSources(){const l={},d={},x={};this.forEachFragmentStyle(C=>{for(const B in C._sourceCaches){const F=i.aC(B,C.scope);l[F]=C._sourceCaches[B]}for(const B in C._otherSourceCaches){const F=i.aC(B,C.scope);d[F]=C._otherSourceCaches[B]}for(const B in C._symbolSourceCaches){const F=i.aC(B,C.scope);x[F]=C._symbolSourceCaches[B]}}),this._mergedSourceCaches=l,this._mergedOtherSourceCaches=d,this._mergedSymbolSourceCaches=x}mergeLayers(){const l={},d=[],x={};this._mergedSlots=[],this._has3DLayers=!1,this._hasCircleLayers=!1,this._hasSymbolLayers=!1,this.forEachFragmentStyle(B=>{for(const F of B._order){const z=B._layers[F];if(z.type==="slot"){const K=i.cq(F);if(l[K])continue;l[K]=[]}z.slot&&l[z.slot]?l[z.slot].push(z):d.push(z)}}),this._mergedOrder=[];const C=(B=[])=>{for(const F of B)if(F.type==="slot"){const z=i.cq(F.id);l[z]&&C(l[z]),this._mergedSlots.push(z)}else{const z=i.aC(F.id,F.scope);this._mergedOrder.push(z),x[z]=F,F.is3D()&&(this._has3DLayers=!0),F.type==="circle"&&(this._hasCircleLayers=!0),F.type==="symbol"&&(this._hasSymbolLayers=!0),F.type==="clip"&&(this._clipLayerPresent=!0)}};C(d),this._mergedOrder.sort((B,F)=>{const z=x[B],K=x[F];return z.hasInitialOcclusionOpacityProperties?K.is3D()?1:0:z.is3D()&&K.hasInitialOcclusionOpacityProperties?-1:0}),this._mergedLayers=x,this.updateDrapeFirstLayers(),this._buildingIndex.processLayersChanged()}terrainSetForDrapingOnly(){return!!this.terrain&&this.terrain.drapeRenderMode===0}getCamera(){return this.stylesheet.camera}setCamera(l){return this.stylesheet.camera=i.l({},this.stylesheet.camera,l),this.camera=this.stylesheet.camera,this}_evaluateColorThemeData(l){return l.data?function(d,x,C){const B=i.l({},x);for(const z of Object.keys(i.a3.colorTheme))B[z]===void 0&&(B[z]=i.a3.colorTheme[z].default);const F=new i.a4(hf,d,new Map(C));return F.setTransitionOrValue(B,C),F.untransitioned().possiblyEvaluate(new i.a8(0))}(this.scope,l,this.options).get("data"):null}_loadColorTheme(l){this._styleColorTheme.lutLoading=!0,this._styleColorTheme.lutLoadingCorrelationID+=1;const d=this._styleColorTheme.lutLoadingCorrelationID;return new Promise((x,C)=>{const B="data:image/png;base64,";if(!l||l.length===0)return this._styleColorTheme.lut=null,this._styleColorTheme.lutLoading=!1,void x();let F=l;F.startsWith(B)||(F=B+F);const z="mapbox-reserved-lut",K=new Image;K.src=F,K.onerror=()=>{this._styleColorTheme.lutLoading=!1,C(new Error("Failed to load image data"))},K.onload=()=>{if(this._styleColorTheme.lutLoadingCorrelationID!==d)return void x();this._styleColorTheme.lutLoading=!1;const{width:X,height:J,data:oe}=i.q.getImageData(K);if(J>32)return void C(new Error("The height of the image must be less than or equal to 32 pixels."));if(X!==J*J)return void C(new Error("The width of the image must be equal to the height squared."));this.getImage(z)&&this.removeImage(z),this.addImage(z,{data:new i.r({width:X,height:J},oe),pixelRatio:1,sdf:!1,usvg:!1,version:0});const se=this.imageManager.getImage(z,this.scope);se?(this._styleColorTheme.lut={image:se.data,data:l},x()):C(new Error("Missing LUT image."))}})}getLut(l){const d=this._styleColorThemeForScope[l];return d?d.lut:null}setProjection(l){l?this.stylesheet.projection=l:delete this.stylesheet.projection,this.mergeProjection(),this._updateMapProjection()}applyProjectionUpdate(){this._loaded&&(this.dispatcher.broadcast("setProjection",this.map.transform.projectionOptions),this.map.transform.projection.requiresDraping?(this.getTerrain()||this.stylesheet.terrain)&&!this.disableElevatedTerrain||this.setTerrainForDraping():this.terrainSetForDrapingOnly()&&this.setTerrain(null,0))}_updateMapProjection(){this.isRootStyle()&&(this.map._useExplicitProjection?this.applyProjectionUpdate():this.map._prioritizeAndUpdateProjection(null,this.projection))}_loadSprite(l){this._spriteRequest=function(d,x,C){let B,F,z;const K=i.q.devicePixelRatio>1?"@2x":"";let X=i.n(x.transformRequest(x.normalizeSpriteURL(d,K,".json"),i.R.SpriteJSON),(se,ue)=>{X=null,z||(z=se,B=ue,oe())}),J=i.o(x.transformRequest(x.normalizeSpriteURL(d,K,".png"),i.R.SpriteImage),(se,ue)=>{J=null,z||(z=se,F=ue,oe())});function oe(){if(z)C(z);else if(B&&F){const se=i.q.getImageData(F),ue={};for(const Ie in B){const{width:Se,height:Pe,x:Le,y:$e,sdf:rt,pixelRatio:et,stretchX:ft,stretchY:dt,content:ht}=B[Ie],ut=new i.r({width:Se,height:Pe});i.r.copy(se,ut,{x:Le,y:$e},{x:0,y:0},{width:Se,height:Pe},null),ue[Ie]={data:ut,pixelRatio:et,sdf:rt,stretchX:ft,stretchY:dt,content:ht,usvg:!1}}C(null,ue)}}return{cancel(){X&&(X.cancel(),X=null),J&&(J.cancel(),J=null)}}}(l,this.map._requestManager,(d,x)=>{if(this._spriteRequest=null,d)this.fire(new i.y(d));else if(x)for(const C in x)this.imageManager.addImage(C,this.scope,x[C]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.z("data",{dataType:"style"}))})}_loadIconset(l){if(!i.f(l)&&this.map._spriteFormat!=="icon_set"||this.map._spriteFormat==="raster")return void this._loadSprite(l);const d=this.map._spriteFormat==="auto";var x,C;this._spriteRequest=(C=(B,F)=>{if(this._spriteRequest=null,B)d?this._loadSprite(l):this.fire(new i.y(B));else if(F)for(const z in F)this.imageManager.addImage(z,this.scope,F[z]);this.imageManager.setLoaded(!0,this.scope),this._availableImages=this.imageManager.listImages(this.scope),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.dispatcher.broadcast("spriteLoaded",{scope:this.scope,isLoaded:!0}),this.fire(new i.z("data",{dataType:"style"}))},i.bi((x=this.map._requestManager).transformRequest(x.normalizeIconsetURL(l),i.R.Iconset),(B,F)=>{if(B)return void C(B);const z={},K=i.cg(new i.bh(F));for(const X of K.icons){const J={version:1,pixelRatio:i.q.devicePixelRatio,content:td(X),stretchX:X.metadata?X.metadata.stretch_x_areas:void 0,stretchY:X.metadata?X.metadata.stretch_y_areas:void 0,sdf:!1,usvg:!0,icon:X};z[X.name]=J}C(null,z)}))}_validateLayer(l){const d=this.getOwnSource(l.source);if(!d)return;const x=l.sourceLayer;x&&(d.type==="geojson"||d.vectorLayerIds&&d.vectorLayerIds.indexOf(x)===-1)&&this.fire(new i.y(new Error(`Source layer "${x}" does not exist on source "${d.id}" as specified by style layer "${l.id}"`)))}loaded(){if(!this._loaded||Object.keys(this._changes.getUpdatedSourceCaches()).length)return!1;for(const l in this._sourceCaches)if(!this._sourceCaches[l].loaded())return!1;if(!this.imageManager.isLoaded()||!this.modelManager.isLoaded()||this._styleColorTheme.lutLoading)return!1;for(const{style:l}of this.fragments)if(!l.loaded())return!1;return!0}_serializeImports(){if(this.stylesheet.imports)return this.stylesheet.imports.map((l,d)=>{const x=this.fragments[d];return x&&x.style&&(l.data=x.style.serialize()),l})}_serializeSources(){const l={};for(const d in this._sourceCaches){const x=this._sourceCaches[d].getSource();l[x.id]||(l[x.id]=x.serialize())}return l}_serializeLayers(l){const d=[];for(const x of l){const C=this._layers[x];C&&C.type!=="custom"&&d.push(C.serialize())}return d}hasLightTransitions(){return!(!this.light||!this.light.hasTransition())||!(!this.ambientLight||!this.ambientLight.hasTransition())||!(!this.directionalLight||!this.directionalLight.hasTransition())}hasFogTransition(){return!!this.fog&&this.fog.hasTransition()}hasSnowTransition(){return!!this.snow&&this.snow.hasTransition()}hasRainTransition(){return!!this.rain&&this.rain.hasTransition()}hasTransitions(){if(this.hasLightTransitions()||this.hasFogTransition()||this.hasSnowTransition()||this.hasRainTransition())return!0;for(const l in this._sourceCaches)if(this._sourceCaches[l].hasTransition())return!0;for(const l in this._layers)if(this._layers[l].hasTransition())return!0;return!1}get order(){return this.terrain?this._drapedFirstOrder:this._mergedOrder}_getOrder(l){return l?this.order:this._mergedOrder}isLayerDraped(l){return!!this.terrain&&l.isDraped(this.getLayerSourceCache(l))}_checkLoaded(){if(!this._loaded)throw new Error("Style is not done loading")}_checkLayer(l){const d=this.getOwnLayer(l);if(d)return d;this.fire(new i.y(new Error(`The layer '${l}' does not exist in the map's style.`)))}_checkSource(l){const d=this.getOwnSource(l);if(d)return d;this.fire(new i.y(new Error(`The source '${l}' does not exist in the map's style.`)))}precompilePrograms(l,d){const x=this.map.painter;if(x)for(let C=l.minzoom||0;C<(l.maxzoom||25.5);C++){const B=l.getProgramIds();if(B)for(const F of B){const z=l.getDefaultProgramParams(F,d.zoom,this._styleColorTheme.lut);z&&(x.style=this,this.fog&&(x._fogVisible=!0,z.overrideFog=!0,x.getOrCreateProgram(F,z)),x._fogVisible=!1,z.overrideFog=!1,x.getOrCreateProgram(F,z),(this.stylesheet.terrain||this.stylesheet.projection&&this.stylesheet.projection.name==="globe")&&(z.overrideRtt=!0,x.getOrCreateProgram(F,z)))}}}update(l){if(!this._loaded)return;this.ambientLight&&this.ambientLight.recalculate(l),this.directionalLight&&this.directionalLight.recalculate(l);const d=this.calculateLightsBrightness();l.brightness=d||0,d!==this._brightness&&(this._brightness=d,this.dispatcher.broadcast("setBrightness",d));const x=this._changes.isDirty();let C=!1;if(this._changes.isDirty()){const F=this._changes.getLayerUpdatesByScope();for(const z in F){const{updatedIds:K,removedIds:X}=F[z];(K||X)&&(this._updateWorkerLayers(z,K,X),C=!0)}this.updateSourceCaches(),this._updateTilesForChangedImages(),this.updateLayers(l),this.light&&this.light.updateTransitions(l),this.ambientLight&&this.ambientLight.updateTransitions(l),this.directionalLight&&this.directionalLight.updateTransitions(l),this.fog&&this.fog.updateTransitions(l),this.snow&&this.snow.updateTransitions(l),this.rain&&this.rain.updateTransitions(l),this._changes.reset()}const B={};for(const F in this._mergedSourceCaches){const z=this._mergedSourceCaches[F];B[F]=z.used,z.used=!1,z.tileCoverLift=0}for(const F of this._mergedOrder){const z=this._mergedLayers[F];if(z.recalculate(l,this._availableImages),!z.isHidden(l.zoom)){const K=this.getLayerSourceCache(z);K&&(K.used=!0,K.tileCoverLift=Math.max(K.tileCoverLift,z.tileCoverLift()))}!this._precompileDone&&this._shouldPrecompile&&("requestIdleCallback"in window?requestIdleCallback(()=>{this.precompilePrograms(z,l)}):this.precompilePrograms(z,l))}this._shouldPrecompile&&(this._precompileDone=!0),this.terrain&&C&&this.mergeLayers();for(const F in B){const z=this._mergedSourceCaches[F];B[F]!==z.used&&z.getSource().fire(new i.z("data",{sourceDataType:"visibility",dataType:"source",sourceId:z.getSource().id}))}this.light&&this.light.recalculate(l),this.terrain&&this.terrain.recalculate(l),this.fog&&this.fog.recalculate(l),this.snow&&this.snow.recalculate(l),this.rain&&this.rain.recalculate(l),this.z=l.zoom,this._markersNeedUpdate&&(this._updateMarkersOpacity(),this._markersNeedUpdate=!1),x&&this.fire(new i.z("data",{dataType:"style"}))}_updateTilesForChangedImages(){const l=this._changes.getUpdatedImages();if(l.length){for(const d in this._sourceCaches)this._sourceCaches[d].reloadTilesForDependencies(["icons","patterns"],l);this._changes.resetUpdatedImages()}}_updateWorkerLayers(l,d,x){const C=this.getFragmentStyle(l);C&&this.dispatcher.broadcast("updateLayers",{layers:d?C._serializeLayers(d):[],scope:l,removedIds:x||[],options:C.options})}setState(l,d){if(this._checkLoaded(),aa(this,hs(l)))return!1;(l=i.cp(l)).layers=sp(l.layers);const x=function(F,z){if(!F)return[{command:Sr.setStyle,args:[z]}];let K=[];try{if(!i.bn(F.version,z.version))return[{command:Sr.setStyle,args:[z]}];if(i.bn(F.center,z.center)||K.push({command:Sr.setCenter,args:[z.center]}),i.bn(F.zoom,z.zoom)||K.push({command:Sr.setZoom,args:[z.zoom]}),i.bn(F.bearing,z.bearing)||K.push({command:Sr.setBearing,args:[z.bearing]}),i.bn(F.pitch,z.pitch)||K.push({command:Sr.setPitch,args:[z.pitch]}),i.bn(F.sprite,z.sprite)||K.push({command:Sr.setSprite,args:[z.sprite]}),i.bn(F.glyphs,z.glyphs)||K.push({command:Sr.setGlyphs,args:[z.glyphs]}),i.bn(F.imports,z.imports)||function(ue=[],Ie=[],Se){Ie=Ie||[];const Pe=(ue=ue||[]).map(Pi),Le=Ie.map(Pi),$e=ue.reduce(Ii,{}),rt=Ie.reduce(Ii,{}),et=Pe.slice();let ft,dt,ht,ut;for(ft=0,dt=0;ft<Pe.length;ft++)ht=Pe[ft],rt.hasOwnProperty(ht)?dt++:(Se.push({command:Sr.removeImport,args:[ht]}),et.splice(et.indexOf(ht,dt),1));for(ft=0,dt=0;ft<Le.length;ft++)ht=Le[Le.length-1-ft],et[et.length-1-ft]!==ht&&($e.hasOwnProperty(ht)?(Se.push({command:Sr.removeImport,args:[ht]}),et.splice(et.lastIndexOf(ht,et.length-dt),1)):dt++,ut=et[et.length-ft],Se.push({command:Sr.addImport,args:[rt[ht],ut]}),et.splice(et.length-ft,0,ht));for(const xt of Ie){const Bt=$e[xt.id];Bt&&!i.bn(Bt,xt)&&Se.push({command:Sr.updateImport,args:[xt.id,xt]})}}(F.imports,z.imports,K),i.bn(F.transition,z.transition)||K.push({command:Sr.setTransition,args:[z.transition]}),i.bn(F.light,z.light)||K.push({command:Sr.setLight,args:[z.light]}),i.bn(F.fog,z.fog)||K.push({command:Sr.setFog,args:[z.fog]}),i.bn(F.snow,z.snow)||K.push({command:Sr.setSnow,args:[z.snow]}),i.bn(F.rain,z.rain)||K.push({command:Sr.setRain,args:[z.rain]}),i.bn(F.projection,z.projection)||K.push({command:Sr.setProjection,args:[z.projection]}),i.bn(F.lights,z.lights)||K.push({command:Sr.setLights,args:[z.lights]}),i.bn(F.camera,z.camera)||K.push({command:Sr.setCamera,args:[z.camera]}),!i.bn(F["color-theme"],z["color-theme"]))return[{command:Sr.setStyle,args:[z]}];const X={},J=[];(function(ue,Ie,Se,Pe){let Le;for(Le in Ie=Ie||{},ue=ue||{})ue.hasOwnProperty(Le)&&(Ie.hasOwnProperty(Le)||_c(Le,Se,Pe));for(Le in Ie){if(!Ie.hasOwnProperty(Le))continue;const $e=Ie[Le];ue.hasOwnProperty(Le)?i.bn(ue[Le],$e)||(ue[Le].type==="geojson"&&$e.type==="geojson"&&Od(ue,Ie,Le)?Se.push({command:Sr.setGeoJSONSourceData,args:[Le,$e.data]}):ou(Le,Ie,Se,Pe)):op(Le,Ie,Se)}})(F.sources,z.sources,J,X);const oe=[];F.layers&&F.layers.forEach(ue=>{ue.source&&X[ue.source]?K.push({command:Sr.removeLayer,args:[ue.id]}):oe.push(ue)});let se=F.terrain;se&&X[se.source]&&(K.push({command:Sr.setTerrain,args:[void 0]}),se=void 0),K=K.concat(J),i.bn(se,z.terrain)||K.push({command:Sr.setTerrain,args:[z.terrain]}),function(ue,Ie,Se){Ie=Ie||[];const Pe=(ue=ue||[]).map(Pi),Le=Ie.map(Pi),$e=ue.reduce(Ii,{}),rt=Ie.reduce(Ii,{}),et=Pe.slice(),ft=Object.create(null);let dt,ht,ut,xt,Bt,an,tn;for(dt=0,ht=0;dt<Pe.length;dt++)ut=Pe[dt],rt.hasOwnProperty(ut)?ht++:(Se.push({command:Sr.removeLayer,args:[ut]}),et.splice(et.indexOf(ut,ht),1));for(dt=0,ht=0;dt<Le.length;dt++)ut=Le[Le.length-1-dt],et[et.length-1-dt]!==ut&&($e.hasOwnProperty(ut)?(Se.push({command:Sr.removeLayer,args:[ut]}),et.splice(et.lastIndexOf(ut,et.length-ht),1)):ht++,an=et[et.length-dt],Se.push({command:Sr.addLayer,args:[rt[ut],an]}),et.splice(et.length-dt,0,ut),ft[ut]=!0);for(dt=0;dt<Le.length;dt++)if(ut=Le[dt],xt=$e[ut],Bt=rt[ut],!ft[ut]&&!i.bn(xt,Bt))if(i.bn(xt.source,Bt.source)&&i.bn(xt["source-layer"],Bt["source-layer"])&&i.bn(xt.type,Bt.type)){for(tn in cr(xt.layout,Bt.layout,Se,ut,null,Sr.setLayoutProperty),cr(xt.paint,Bt.paint,Se,ut,null,Sr.setPaintProperty),i.bn(xt.slot,Bt.slot)||Se.push({command:Sr.setSlot,args:[ut,Bt.slot]}),i.bn(xt.filter,Bt.filter)||Se.push({command:Sr.setFilter,args:[ut,Bt.filter]}),i.bn(xt.minzoom,Bt.minzoom)&&i.bn(xt.maxzoom,Bt.maxzoom)||Se.push({command:Sr.setLayerZoomRange,args:[ut,Bt.minzoom,Bt.maxzoom]}),xt)xt.hasOwnProperty(tn)&&tn!=="layout"&&tn!=="paint"&&tn!=="filter"&&tn!=="metadata"&&tn!=="minzoom"&&tn!=="maxzoom"&&tn!=="slot"&&(tn.indexOf("paint.")===0?cr(xt[tn],Bt[tn],Se,ut,tn.slice(6),Sr.setPaintProperty):i.bn(xt[tn],Bt[tn])||Se.push({command:Sr.setLayerProperty,args:[ut,tn,Bt[tn]]}));for(tn in Bt)Bt.hasOwnProperty(tn)&&!xt.hasOwnProperty(tn)&&tn!=="layout"&&tn!=="paint"&&tn!=="filter"&&tn!=="metadata"&&tn!=="minzoom"&&tn!=="maxzoom"&&tn!=="slot"&&(tn.indexOf("paint.")===0?cr(xt[tn],Bt[tn],Se,ut,tn.slice(6),Sr.setPaintProperty):i.bn(xt[tn],Bt[tn])||Se.push({command:Sr.setLayerProperty,args:[ut,tn,Bt[tn]]}))}else Se.push({command:Sr.removeLayer,args:[ut]}),an=et[et.lastIndexOf(ut)+1],Se.push({command:Sr.addLayer,args:[Bt,an]})}(oe,z.layers,K)}catch(X){console.warn("Unable to compute style diff:",X),K=[{command:Sr.setStyle,args:[z]}]}return K}(this.serialize(),l).filter(F=>!(F.command in $n));if(x.length===0)return!1;const C=x.filter(F=>!(F.command in yn));if(C.length>0)throw new Error(`Unimplemented: ${C.map(F=>F.command).join(", ")}.`);const B=[];return x.forEach(F=>{B.push(this[F.command].apply(this,F.args))}),d&&Promise.all(B).then(d),this.stylesheet=l,this.mergeAll(),this.dispatcher.broadcast("setLayers",{layers:this._serializeLayers(this._order),scope:this.scope,options:this.options}),!0}addImage(l,d){return this.getImage(l)?this.fire(new i.y(new Error("An image with this name already exists."))):(this.imageManager.addImage(l,this.scope,d),this._afterImageUpdated(l),this)}updateImage(l,d,x=!1){this.imageManager.updateImage(l,this.scope,d),x&&this._afterImageUpdated(l)}getImage(l){return this.imageManager.getImage(l,this.scope)}removeImage(l){return this.getImage(l)?(this.imageManager.removeImage(l,this.scope),this._afterImageUpdated(l),this):this.fire(new i.y(new Error("No image with this name exists.")))}_afterImageUpdated(l){this._availableImages=this.imageManager.listImages(this.scope),this._changes.updateImage(l),this.dispatcher.broadcast("setImages",{scope:this.scope,images:this._availableImages}),this.fire(new i.z("data",{dataType:"style"}))}listImages(){return this._checkLoaded(),this._availableImages.slice()}addModel(l,d,x={}){return this._checkLoaded(),this._validate(tt,`models.${l}`,d,null,x)||(this.modelManager.addModel(l,d,this.scope),this._changes.setDirty()),this}hasModel(l){return this.modelManager.hasModel(l,this.scope)}removeModel(l){return this.hasModel(l)?(this.modelManager.removeModel(l,this.scope),this):this.fire(new i.y(new Error("No model with this ID exists.")))}listModels(){return this._checkLoaded(),this.modelManager.listModels(this.scope)}addSource(l,d,x={}){if(this._checkLoaded(),this.getOwnSource(l)!==void 0)throw new Error(`There is already a source with ID "${l}".`);if(!d.type)throw new Error(`The type property must be defined, but only the following properties were given: ${Object.keys(d).join(", ")}.`);if(["vector","raster","geojson","video","image"].indexOf(d.type)>=0&&this._validate(mi,`sources.${l}`,d,null,x))return;this.map&&this.map._collectResourceTiming&&(d.collectResourceTiming=!0);const C=of(l,d,this.dispatcher,this);C.scope=this.scope,C.setEventedParent(this,()=>({isSourceLoaded:this._isSourceCacheLoaded(C.id),source:C.serialize(),sourceId:C.id}));const B=F=>{const z=(F?"symbol:":"other:")+C.id,K=i.aC(z,this.scope),X=this._sourceCaches[z]=new Aa(K,C,F);(F?this._symbolSourceCaches:this._otherSourceCaches)[C.id]=X,X.onAdd(this.map)};B(!1),d.type!=="vector"&&d.type!=="geojson"||B(!0),C.onAdd&&C.onAdd(this.map),x.isInitialLoad||(this.mergeSources(),this._changes.setDirty())}removeSource(l){this._checkLoaded();const d=this.getOwnSource(l);if(!d)throw new Error("There is no source with this ID");for(const C in this._layers)if(this._layers[C].source===l)return this.fire(new i.y(new Error(`Source "${l}" cannot be removed while layer "${C}" is using it.`)));if(this.terrain&&this.terrain.scope===this.scope&&this.terrain.get().source===l)return this.fire(new i.y(new Error(`Source "${l}" cannot be removed while terrain is using it.`)));const x=this.getOwnSourceCaches(l);for(const C of x){const B=i.cq(C.id);delete this._sourceCaches[B],this._changes.discardSourceCacheUpdate(C.id),C.fire(new i.z("data",{sourceDataType:"metadata",dataType:"source",sourceId:C.getSource().id})),C.setEventedParent(null),C.clearTiles()}return delete this._otherSourceCaches[l],delete this._symbolSourceCaches[l],this.mergeSources(),d.setEventedParent(null),d.onRemove&&d.onRemove(this.map),this._changes.setDirty(),this}setGeoJSONSourceData(l,d){this._checkLoaded(),this.getOwnSource(l).setData(d),this._changes.setDirty()}getOwnSource(l){const d=this.getOwnSourceCache(l);return d&&d.getSource()}getOwnSources(){const l=[];for(const d in this._otherSourceCaches){const x=this.getOwnSourceCache(d);x&&l.push(x.getSource())}return l}areTilesLoaded(){const l=this._mergedSourceCaches;for(const d in l){const x=l[d]._tiles;for(const C in x){const B=x[C];if(B.state!=="loaded"&&B.state!=="errored")return!1}}return!0}setLights(l){if(this._checkLoaded(),!l)return delete this.ambientLight,void delete this.directionalLight;const d=this._getTransitionParameters();for(const C of l){if(this._validate(gr,"lights",C))return;switch(C.type){case"ambient":if(this.ambientLight){const B=this.ambientLight;B.set(C),B.updateTransitions(d)}else this.ambientLight=new Rs(C,Ai||(Ai=new i.a5({color:new i.a6(i.a3.properties_light_ambient.color),"color-use-theme":new i.a6({type:"string",default:"default","property-type":"data-constant"}),intensity:new i.a6(i.a3.properties_light_ambient.intensity)})),this.scope,this.options);break;case"directional":if(this.directionalLight){const B=this.directionalLight;B.set(C),B.updateTransitions(d)}else this.directionalLight=new Rs(C,Ci||(Ci=new i.a5({direction:new i.ak(i.a3.properties_light_directional.direction),color:new i.a6(i.a3.properties_light_directional.color),"color-use-theme":new i.a6({type:"string",default:"default","property-type":"data-constant"}),intensity:new i.a6(i.a3.properties_light_directional.intensity),"cast-shadows":new i.a6(i.a3.properties_light_directional["cast-shadows"]),"shadow-quality":new i.a6(i.a3.properties_light_directional["shadow-quality"]),"shadow-intensity":new i.a6(i.a3.properties_light_directional["shadow-intensity"])})),this.scope,this.options)}}const x=new i.a8(this.z||0,d);this.ambientLight&&this.ambientLight.recalculate(x),this.directionalLight&&this.directionalLight.recalculate(x),this._brightness=this.calculateLightsBrightness(),this.dispatcher.broadcast("setBrightness",this._brightness)}calculateLightsBrightness(){const l=this.directionalLight,d=this.ambientLight;if(!l||!d)return;const x=se=>.2126*(se[0]<=.03928?se[0]/12.92:Math.pow((se[0]+.055)/1.055,2.4))+.7152*(se[1]<=.03928?se[1]/12.92:Math.pow((se[1]+.055)/1.055,2.4))+.0722*(se[2]<=.03928?se[2]/12.92:Math.pow((se[2]+.055)/1.055,2.4)),C=l.properties.get("color").toRenderColor(null).toArray01(),B=l.properties.get("intensity"),F=l.properties.get("direction"),z=1-i.cb(F.x,F.y,F.z)[2]/90,K=x(C)*B*z,X=d.properties.get("color").toRenderColor(null).toArray01(),J=d.properties.get("intensity"),oe=x(X)*J;return Number(((K+oe)/2).toFixed(6))}getBrightness(){return this._brightness}getLights(){if(!this.enable3dLights())return null;const l=[];return this.directionalLight&&l.push(this.directionalLight.get()),this.ambientLight&&l.push(this.ambientLight.get()),l}enable3dLights(){return!!this.ambientLight&&!!this.directionalLight}getFragmentStyle(l){if(!l)return this;if(i.cr(l)){const d=i.cs(l),x=this.fragments.find(({id:B})=>B===d);if(!x)throw new Error(`Style import '${l}' not found`);const C=i.cq(l);return x.style.getFragmentStyle(C)}{const d=this.fragments.find(({id:x})=>x===l);if(!d)throw new Error(`Style import '${l}' not found`);return d.style}}setFeaturesetSelectors(l){if(!l)return;const d={},x=(C,B="")=>`${C}::${B}`;this.featuresetSelectors={};for(const C in l){const B=this.featuresetSelectors[C]=[];for(const F of l[C].selectors){if(F.featureNamespace){const K=this.getOwnLayer(F.layer);if(!K){i.w(`Layer is undefined for selector: ${F.layer}`);continue}const X=x(K.source,K.sourceLayer);if(X in d&&d[X]!==F.featureNamespace){i.w(`"featureNamespace ${F.featureNamespace} of featureset ${C}'s selector is not associated to the same source, skip this selector`);continue}d[X]=F.featureNamespace}let z;if(F.properties)for(const K in F.properties){const X=i.U(F.properties[K]);X.result==="success"&&(z=z||{},z[K]=X.value)}B.push({layerId:F.layer,namespace:F.featureNamespace,properties:z})}}}getFeaturesetDescriptors(l){const d=this.getFragmentStyle(l);if(!d||!d.stylesheet.featuresets)return[];const x=[];for(const C in d.stylesheet.featuresets)x.push({featuresetId:C,importId:d.scope?d.scope:void 0});return x}getFeaturesetLayers(l,d){const x=this.getFragmentStyle(d),C=x.stylesheet.featuresets;if(!C||!C[l])return this.fire(new i.y(new Error(`The featureset '${l}' does not exist in the map's style and cannot be queried.`))),[];const B=[];for(const F of C[l].selectors){const z=x.getOwnLayer(F.layer);z&&B.push(z)}return B}getConfigProperty(l,d){const x=this.getFragmentStyle(l);if(!x)return null;const C=i.aC(d,x.scope),B=x.options.get(C),F=B?B.value||B.default:null;return F?F.serialize():null}setConfigProperty(l,d,x){const C=this.getFragmentStyle(l);if(!C)return;const B=C.stylesheet.indoor?Dl(C.stylesheet.schema):C.stylesheet.schema;if(!B||!B[d])return;const F=i.U(x);if(F.result!=="success")return void aa(this,F.value);const z=F.value.expression,K=i.aC(d,C.scope),X=C.options.get(K);if(!X)return;let J;const{minValue:oe,maxValue:se,stepValue:ue,type:Ie,values:Se}=B[d],Pe=i.U(B[d].default);Pe.result==="success"&&(J=Pe.value.expression),J?(this.options.set(K,{...X,value:z,default:J,minValue:oe,maxValue:se,stepValue:ue,type:Ie,values:Se}),this.updateConfigDependencies(d)):this.fire(new i.y(new Error(`No schema defined for the config option "${d}" in the "${l}" fragment.`)))}getConfig(l){const d=this.getFragmentStyle(l);if(!d)return null;const x=d.stylesheet.schema;if(!x)return null;const C={};for(const B in x){const F=i.aC(B,d.scope),z=d.options.get(F),K=z?z.value||z.default:null;C[B]=K?K.serialize():null}return C}setConfig(l,d){const x=this.getFragmentStyle(l);x&&(x.updateConfig(d,x.stylesheet.schema),this.updateConfigDependencies())}getSchema(l){const d=this.getFragmentStyle(l);return d?d.stylesheet.schema:null}setSchema(l,d){const x=this.getFragmentStyle(l);x&&(x.stylesheet.schema=d,x.updateConfig(x._config,d),this.updateConfigDependencies())}updateConfig(l,d){if(this._config=l,l||d)if(d)for(const x in d){let C,B;const F=i.U(d[x].default);if(F.result==="success"&&(C=F.value.expression),l&&l[x]!==void 0){const se=i.U(l[x]);se.result==="success"&&(B=se.value.expression)}const{minValue:z,maxValue:K,stepValue:X,type:J,values:oe}=d[x];if(C){const se=i.aC(x,this.scope);this.options.set(se,{default:C,value:B,minValue:z,maxValue:K,stepValue:X,type:J,values:oe})}else this.fire(new i.y(new Error(`No schema defined for config option "${x}".`)))}else this.fire(new i.y(new Error("Attempting to set config for a style without schema.")))}updateConfigDependencies(l){for(const d of this._configDependentLayers){const x=this.getLayer(d);if(x){if(l&&!x.configDependencies.has(l))continue;x.possiblyEvaluateVisibility(),this._updateLayer(x)}}this.ambientLight&&this.ambientLight.updateConfig(this.options),this.directionalLight&&this.directionalLight.updateConfig(this.options),this.fog&&this.fog.updateConfig(this.options),this.snow&&this.snow.updateConfig(this.options),this.rain&&this.rain.updateConfig(this.options),this.forEachFragmentStyle(d=>{const x=d._styleColorTheme.colorThemeOverride?d._styleColorTheme.colorThemeOverride:d._styleColorTheme.colorTheme;if(x){const C=d._evaluateColorThemeData(x);(!d._styleColorTheme.lut&&C!==""||d._styleColorTheme.lut&&C!==d._styleColorTheme.lut.data)&&d.setColorTheme(x)}}),this._changes.setDirty()}addLayer(l,d,x={}){this._checkLoaded();const C=l.id;if(this._layers[C])return void this.fire(new i.y(new Error(`Layer with id "${C}" already exists on this map`)));let B;if(l.type==="custom"){if(aa(this,i.ct(l)))return;B=i.cu(l,this.scope,this._styleColorTheme.lut,this.options)}else{if(typeof l.source=="object"&&(this.addSource(C,l.source),l=i.cp(l),l=i.l(l,{source:C})),this._validate(De,`layers.${C}`,l,{arrayIndex:-1},x))return;B=i.cu(l,this.scope,this._styleColorTheme.lut,this.options),this._validateLayer(B),B.setEventedParent(this,{layer:{id:C}})}B.configDependencies.size!==0&&this._configDependentLayers.add(B.fqid);let F=this._order.length;if(d){const J=this._order.indexOf(d);if(J===-1)return void this.fire(new i.y(new Error(`Layer with id "${d}" does not exist on this map.`)));B.slot===this._layers[d].slot?F=J:i.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(F,0,C),this._layerOrderChanged=!0,this._layers[C]=B;const z=this.getOwnLayerSourceCache(B),K=!!this.directionalLight&&this.directionalLight.shadowsEnabled();z&&B.canCastShadows()&&K&&(z.castsShadows=!0);const X=this._changes.getRemovedLayer(B);if(X&&B.source&&z&&B.type!=="custom"){this._changes.discardLayerRemoval(B);const J=i.aC(B.source,B.scope);X.type!==B.type?this._changes.updateSourceCache(J,"clear"):(this._changes.updateSourceCache(J,"reload"),z.pause())}this._updateLayer(B),B.onAdd&&B.onAdd(this.map),B.scope=this.scope,this.mergeLayers()}moveLayer(l,d){this._checkLoaded();const x=this._checkLayer(l);if(!x||l===d)return;const C=this._order.indexOf(l);this._order.splice(C,1);let B=this._order.length;if(d){const F=this._order.indexOf(d);if(F===-1)return void this.fire(new i.y(new Error(`Layer with id "${d}" does not exist on this map.`)));x.slot===this._layers[d].slot?B=F:i.w(`Layer with id "${d}" has a different slot. Layers can only be rearranged within the same slot.`)}this._order.splice(B,0,l),this._changes.setDirty(),this._layerOrderChanged=!0,this.mergeLayers()}removeLayer(l){this._checkLoaded();const d=this._checkLayer(l);if(!d)return;d.setEventedParent(null);const x=this._order.indexOf(l);this._order.splice(x,1),delete this._layers[l],this._changes.setDirty(),this._layerOrderChanged=!0,this._configDependentLayers.delete(d.fqid),this._changes.removeLayer(d);const C=this.getOwnLayerSourceCache(d);if(C&&C.castsShadows){let B=!1;for(const F in this._layers)if(this._layers[F].source===d.source&&this._layers[F].canCastShadows()){B=!0;break}C.castsShadows=B}d.onRemove&&d.onRemove(this.map),this.mergeLayers()}getOwnLayer(l){return this._layers[l]}hasLayer(l){return l in this._mergedLayers}hasLayerType(l){for(const d in this._layers)if(this._layers[d].type===l)return!0;return!1}setLayerZoomRange(l,d,x){this._checkLoaded();const C=this._checkLayer(l);C&&(C.minzoom===d&&C.maxzoom===x||(d!=null&&(C.minzoom=d),x!=null&&(C.maxzoom=x),this._updateLayer(C)))}getSlots(){return this._checkLoaded(),this._mergedSlots}setSlot(l,d){this._checkLoaded();const x=this._checkLayer(l);x&&x.slot!==d&&(x.slot=d,this._updateLayer(x))}setFilter(l,d,x={}){this._checkLoaded();const C=this._checkLayer(l);if(C&&!i.bn(C.filter,d))return d==null?(C.filter=void 0,void this._updateLayer(C)):void(this._validate(ve,`layers.${C.id}.filter`,d,{layerType:C.type},x)||(C.filter=i.cp(d),this._updateLayer(C)))}getFilter(l){const d=this._checkLayer(l);if(d)return i.cp(d.filter)}setLayoutProperty(l,d,x,C={}){this._checkLoaded();const B=this._checkLayer(l);if(B&&!i.bn(B.getLayoutProperty(d),x)){if(x!=null&&(!C||C.validate!==!1)&&aa(B,ze.call(hs,{key:`layers.${l}.layout.${d}`,layerType:B.type,objectKey:d,value:x,styleSpec:i.a3,style:{glyphs:!0,sprite:!0}})))return;B.setLayoutProperty(d,x),B.configDependencies.size!==0&&this._configDependentLayers.add(B.fqid),this._updateLayer(B)}}getLayoutProperty(l,d){const x=this._checkLayer(l);if(x)return x.getLayoutProperty(d)}setPaintProperty(l,d,x,C={}){this._checkLoaded();const B=this._checkLayer(l);if(!B||i.bn(B.getPaintProperty(d),x)||x!=null&&(!C||C.validate!==!1)&&aa(B,Re.call(hs,{key:`layers.${l}.paint.${d}`,layerType:B.type,objectKey:d,value:x,styleSpec:i.a3})))return;const F=B.setPaintProperty(d,x);B.configDependencies.size!==0&&this._configDependentLayers.add(B.fqid),F&&this._updateLayer(B),this._changes.updatePaintProperties(B)}getPaintProperty(l,d){const x=this._checkLayer(l);if(x)return x.getPaintProperty(d)}setFeatureState(l,d){if(this._checkLoaded(),"target"in l){if("featuresetId"in l.target){const{featuresetId:K,importId:X}=l.target,J=this.getFragmentStyle(X),oe=J.getFeaturesetLayers(K);for(const{source:se,sourceLayer:ue}of oe)J.setFeatureState({id:l.id,source:se,sourceLayer:ue},d)}else if("layerId"in l.target){const{layerId:K}=l.target,X=this.getLayer(K);this.setFeatureState({id:l.id,source:X.source,sourceLayer:X.sourceLayer},d)}return}const x=l.source,C=l.sourceLayer,B=this._checkSource(x);if(!B)return;const F=B.type;if(F==="geojson"&&C)return void this.fire(new i.y(new Error("GeoJSON sources cannot have a sourceLayer parameter.")));if(F==="vector"&&!C)return void this.fire(new i.y(new Error("The sourceLayer parameter must be provided for vector source types.")));l.id===void 0&&this.fire(new i.y(new Error("The feature id parameter must be provided.")));const z=this.getOwnSourceCaches(x);for(const K of z)K.setFeatureState(C,l.id,d)}removeFeatureState(l,d){if(this._checkLoaded(),"target"in l){if("featuresetId"in l.target){const{featuresetId:K,importId:X}=l.target,J=this.getFragmentStyle(X),oe=J.getFeaturesetLayers(K);for(const{source:se,sourceLayer:ue}of oe)J.removeFeatureState({id:l.id,source:se,sourceLayer:ue},d)}else if("layerId"in l.target){const{layerId:K}=l.target,X=this.getLayer(K);this.removeFeatureState({id:l.id,source:X.source,sourceLayer:X.sourceLayer},d)}return}const x=l.source,C=this._checkSource(x);if(!C)return;const B=C.type,F=B==="vector"?l.sourceLayer:void 0;if(B==="vector"&&!F)return void this.fire(new i.y(new Error("The sourceLayer parameter must be provided for vector source types.")));if(d&&typeof l.id!="string"&&typeof l.id!="number")return void this.fire(new i.y(new Error("A feature id is required to remove its specific state property.")));const z=this.getOwnSourceCaches(x);for(const K of z)K.removeFeatureState(F,l.id,d)}getFeatureState(l){if(this._checkLoaded(),"target"in l){let B;if("featuresetId"in l.target){const{featuresetId:F,importId:z}=l.target,K=this.getFragmentStyle(z),X=K.getFeaturesetLayers(F);for(const{source:J,sourceLayer:oe}of X){const se=K.getFeatureState({id:l.id,source:J,sourceLayer:oe});if(se&&!B)B=se;else if(!i.bn(B,se))return void this.fire(new i.y(new Error("The same feature id exists in multiple sources in the featureset, but their feature states are not consistent through the sources.")))}}else if("layerId"in l.target){const{layerId:F}=l.target,z=this.getLayer(F);B=this.getFeatureState({id:l.id,source:z.source,sourceLayer:z.sourceLayer})}return B}const d=l.source,x=l.sourceLayer,C=this._checkSource(d);if(C){if(C.type!=="vector"||x)return l.id===void 0&&this.fire(new i.y(new Error("The feature id parameter must be provided."))),this.getOwnSourceCaches(d)[0].getFeatureState(x,l.id);this.fire(new i.y(new Error("The sourceLayer parameter must be provided for vector source types.")))}}setTransition(l){return this.stylesheet.transition=i.l({},this.stylesheet.transition,l),this.transition=this.stylesheet.transition,this}getTransition(){return i.l({},this.stylesheet.transition)}serialize(){this._checkLoaded();const l=this.getTerrain(),d=l&&this.terrain&&this.terrain.scope===this.scope?l:this.stylesheet.terrain;return i.cv({version:this.stylesheet.version,name:this.stylesheet.name,metadata:this.stylesheet.metadata,fragment:this.stylesheet.fragment,imports:this._serializeImports(),schema:this.stylesheet.schema,camera:this.stylesheet.camera,light:this.stylesheet.light,lights:this.stylesheet.lights,terrain:d,fog:this.stylesheet.fog,snow:this.stylesheet.snow,rain:this.stylesheet.rain,center:this.stylesheet.center,"color-theme":this.stylesheet["color-theme"],zoom:this.stylesheet.zoom,bearing:this.stylesheet.bearing,pitch:this.stylesheet.pitch,sprite:this.stylesheet.sprite,glyphs:this.stylesheet.glyphs,transition:this.stylesheet.transition,projection:this.stylesheet.projection,sources:this._serializeSources(),layers:this._serializeLayers(this._order)},x=>x!==void 0)}_updateFilteredLayers(l){for(const d of Object.values(this._mergedLayers))l(d)&&this._updateLayer(d)}_updateLayer(l){this._changes.updateLayer(l);const d=this.getLayerSourceCache(l),x=i.aC(l.source,l.scope),C=this._changes.getUpdatedSourceCaches();l.source&&!C[x]&&d&&d.getSource().type!=="raster"&&(this._changes.updateSourceCache(x,"reload"),d.pause()),l.invalidateCompiledFilter()}_flattenAndSortRenderedFeatures(l){const d=z=>this._mergedLayers[z].is3D(),x=this.order,C={},B=[];for(let z=x.length-1;z>=0;z--){const K=x[z];if(d(K)){C[K]=z;for(const X of l){const J=X[K];if(J)for(const oe of J)B.push(oe)}}}B.sort((z,K)=>K.intersectionZ-z.intersectionZ);const F=[];for(let z=x.length-1;z>=0;z--){const K=x[z];if(d(K))for(let X=B.length-1;X>=0;X--){const J=B[X].feature;if(J.layer&&C[J.layer.id]<z)break;F.push(J),B.pop()}else for(const X of l){const J=X[K];if(J)for(const oe of J)F.push(oe.feature)}}return F}queryRenderedFeatures(l,d,x){let C;d&&!Array.isArray(d)&&d.filter&&(this._validate(ve,"queryRenderedFeatures.filter",d.filter,null,d),C=i.aZ(d.filter));const B={},F=J=>{if(jn.has(J.type))return;const oe=this.getOwnLayerSourceCache(J),se=B[oe.id]=B[oe.id]||{sourceCache:oe,layers:{},has3DLayers:!1};J.is3D()&&(se.has3DLayers=!0),se.layers[J.fqid]=se.layers[J.fqid]||{styleLayer:J,targets:[]},se.layers[J.fqid].targets.push({filter:C})};if(d&&d.layers){if(!Array.isArray(d.layers))return this.fire(new i.y(new Error("parameters.layers must be an Array."))),[];for(const J of d.layers){const oe=this._layers[J];if(!oe)return this.fire(new i.y(new Error(`The layer '${J}' does not exist in the map's style and cannot be queried for features.`))),[];F(oe)}}else for(const J in this._layers)F(this._layers[J]);const z=this._queryRenderedFeatures(l,B,x),K=this._flattenAndSortRenderedFeatures(z),X=[];for(const J of K)i.cs(J.layer.id)===this.scope&&X.push(J);return X}queryRenderedFeatureset(l,d,x){let C;d&&!Array.isArray(d)&&d.filter&&(this._validate(ve,"queryRenderedFeatures.filter",d.filter,null,d),C=i.aZ(d.filter));const B="mock",F=[];if(d&&d.target)F.push({...d,targetId:B,filter:C});else{const X=this.getFeaturesetDescriptors();for(const J of X)F.push({targetId:B,filter:C,target:J});for(const{style:J}of this.fragments){const oe=J.getFeaturesetDescriptors();for(const se of oe)F.push({targetId:B,filter:C,target:se})}}const z=this.queryRenderedTargets(l,F,x),K=[];for(const X of z)for(const J of X.variants[B])K.push(new i.cw(X,J));return K}queryRenderedTargets(l,d,x){const C={},B=(z,K,X,J)=>{const oe=C[K.id]=C[K.id]||{sourceCache:K,layers:{},has3DLayers:!1};oe.layers[z.fqid]=oe.layers[z.fqid]||{styleLayer:z,targets:[]},z.is3D()&&(oe.has3DLayers=!0),oe.layers[z.fqid].targets.push(J?{...X,namespace:J.namespace,properties:J.properties}:X)};for(const z of d)if("featuresetId"in z.target){const{featuresetId:K,importId:X}=z.target,J=this.getFragmentStyle(X),oe=J.featuresetSelectors[K];if(!oe){this.fire(new i.y(new Error(`The featureset '${K}' does not exist in the map's style and cannot be queried for features.`)));continue}for(const se of oe){const ue=J.getOwnLayer(se.layerId);ue&&!jn.has(ue.type)&&B(ue,J.getOwnLayerSourceCache(ue),z,se)}}else if("layerId"in z.target){const{layerId:K}=z.target,X=this.getLayer(K);if(!X||jn.has(X.type))continue;B(X,this.getLayerSourceCache(X),z)}const F=this._queryRenderedFeatures(l,C,x);return this._flattenAndSortRenderedFeatures(F)}_queryRenderedFeatures(l,d,x){const C=[],B=!!this.map._showQueryGeometry,F=Eo.createFromScreenPoints(l,x);for(const z in d){const K=af(F,d[z],this._availableImages,x,B);Object.keys(K).length&&C.push(K)}if(this.placement)for(const z in d){if(!d[z].sourceCache._onlySymbols)continue;const K=wh(F.screenGeometry,d[z],this._availableImages,this.placement.collisionIndex,this.placement.retainedQueryData);Object.keys(K).length&&C.push(K)}return C}querySourceFeatures(l,d){const x=d&&d.filter;x&&this._validate(ve,"querySourceFeatures.filter",x,null,d);let C=[];const B=this.getOwnSourceCaches(l);for(const F of B)C=C.concat(bh(F,d));return C}addSourceType(l,d,x){return Bi.getSourceType(l)?x(new Error(`A source type called "${l}" already exists.`)):(Bi.setSourceType(l,d),d.workerSourceURL?void this.dispatcher.broadcast("loadWorkerSource",{name:l,url:d.workerSourceURL},x):x(null,null))}getFlatLight(){return this.light.getLight()}setFlatLight(l,d,x={}){this._checkLoaded();const C=this.light.getLight();let B=!1;for(const z in l)if(!i.bn(l[z],C[z])){B=!0;break}if(!B)return;const F=this._getTransitionParameters();this.light.setLight(l,d,x),this.light.updateTransitions(F)}getTerrain(){return this.terrain&&this.terrain.drapeRenderMode===1?this.terrain.get():null}setTerrainForDraping(){this.setTerrain({source:"",exaggeration:0},0)}checkCanvasFingerprintNoise(){this.disableElevatedTerrain===void 0&&(this.disableElevatedTerrain=i.q.hasCanvasFingerprintNoise(),this.disableElevatedTerrain&&i.w("Terrain and hillshade are disabled because of Canvas2D limitations when fingerprinting protection is enabled (e.g. in private browsing mode)."))}setTerrain(l,d=1){if(this._checkLoaded(),!l)return this.terrainSetForDrapingOnly()||(delete this.terrain,this.map.transform.projection.requiresDraping&&this.setTerrainForDraping()),d===0&&delete this.terrain,l===null?this.stylesheet.terrain=null:delete this.stylesheet.terrain,this._force3DLayerUpdate(),void(this._markersNeedUpdate=!0);this.checkCanvasFingerprintNoise();let x=l;const C=l.source==null;if(d===1){if(this.disableElevatedTerrain)return;if(typeof x.source=="object"){const z="terrain-dem-src";this.addSource(z,x.source),x=i.cp(x),x=i.l(x,{source:z})}const B=i.l({},x),F={};if(this.terrain&&C){B.source=this.terrain.get().source;const z=this.terrain?this.getFragmentStyle(this.terrain.scope):null;z&&(F.style=z.serialize())}if(this._validate(Ir,"terrain",B,F))return}if(!this.terrain||this.terrain.scope!==this.scope&&!C||this.terrain&&d!==this.terrain.drapeRenderMode){if(!x)return;this._createTerrain(x,d),this.fire(new i.z("data",{dataType:"style"}))}else{const B=this.terrain,F=B.get();for(const z of Object.keys(i.a3.terrain))!x.hasOwnProperty(z)&&i.a3.terrain[z].default&&(x[z]=i.a3.terrain[z].default);for(const z in l)if(!i.bn(l[z],F[z])){B.set(l,this.options),this.stylesheet.terrain=l;const K=this._getTransitionParameters({duration:0});B.updateTransitions(K),this.fire(new i.z("data",{dataType:"style"}));break}}this.mergeTerrain(),this.updateDrapeFirstLayers(),this._markersNeedUpdate=!0}_createFog(l){const d=this.fog=new Wr(l,this.map.transform,this.scope,this.options);this.stylesheet.fog=d.get();const x=this._getTransitionParameters({duration:0});d.updateTransitions(x)}_createSnow(l){const d=this.snow=new Vs(l,this.map.transform,this.scope,this.options);this.stylesheet.snow=d.get();const x=this._getTransitionParameters({duration:0});d.updateTransitions(x)}_createRain(l){const d=this.rain=new Zo(l,this.map.transform,this.scope,this.options);this.stylesheet.rain=d.get();const x=this._getTransitionParameters({duration:0});d.updateTransitions(x)}_updateMarkersOpacity(){this.map._markers.length!==0&&this.map._requestDomTask(()=>{for(const l of this.map._markers)l._evaluateOpacity()})}getFog(){return this.fog?this.fog.get():null}setFog(l){if(this._checkLoaded(),!l)return delete this.fog,delete this.stylesheet.fog,void(this._markersNeedUpdate=!0);if(this.fog){const d=this.fog;if(!i.bn(d.get(),l)){d.set(l,this.options),this.stylesheet.fog=d.get();const x=this._getTransitionParameters({duration:0});d.updateTransitions(x)}}else this._createFog(l);this._markersNeedUpdate=!0}getSnow(){return this.snow?this.snow.get():null}setSnow(l){if(this._checkLoaded(),!l)return delete this.snow,void delete this.stylesheet.snow;if(this.snow){const d=this.snow;if(!i.bn(d.get(),l)){d.set(l,this.options),this.stylesheet.snow=d.get();const x=this._getTransitionParameters({duration:0});d.updateTransitions(x)}}else this._createSnow(l);this._markersNeedUpdate=!0}getRain(){return this.rain?this.rain.get():null}setRain(l){if(this._checkLoaded(),!l)return delete this.rain,void delete this.stylesheet.rain;if(this.rain){const d=this.rain;if(!i.bn(d.get(),l)){d.set(l,this.options),this.stylesheet.rain=d.get();const x=this._getTransitionParameters({duration:0});d.updateTransitions(x)}}else this._createRain(l);this._markersNeedUpdate=!0}_reloadColorTheme(){const l=()=>{for(const C in this._layers)this._layers[C].lut=this._styleColorTheme.lut;for(const C in this._sourceCaches)this._sourceCaches[C].clearTiles()},d=this._styleColorTheme.colorThemeOverride?this._styleColorTheme.colorThemeOverride:this._styleColorTheme.colorTheme;if(!d)return this._styleColorTheme.lut=null,void l();const x=this._evaluateColorThemeData(d);this._loadColorTheme(x).then(()=>{this.fire(new i.z("colorthemeset")),l()}).catch(C=>{i.w(`Couldn't set color theme: ${C}`)})}setColorTheme(l){this._checkLoaded(),this._styleColorTheme.colorThemeOverride&&i.w("Note: setColorTheme is called on a style with a color-theme override, the passed color-theme won't be visible."),this._styleColorTheme.colorTheme=l,this._reloadColorTheme()}setImportColorTheme(l,d){const x=this.getFragmentStyle(l);x&&(x._styleColorTheme.colorThemeOverride=d,x._reloadColorTheme())}_getTransitionParameters(l){return{now:i.q.now(),transition:i.l(this.transition,l)}}updateDrapeFirstLayers(){if(!this.terrain)return;const l=[],d=[];for(const x of this._mergedOrder)this.isLayerDraped(this._mergedLayers[x])?l.push(x):d.push(x);this._drapedFirstOrder=[],this._drapedFirstOrder.push(...l),this._drapedFirstOrder.push(...d)}_createTerrain(l,d){const x=this.terrain=new Nt(l,d,this.scope,this.options);d===1&&(this.stylesheet.terrain=l),this.mergeTerrain(),this.updateDrapeFirstLayers(),this._force3DLayerUpdate();const C=this._getTransitionParameters({duration:0});x.updateTransitions(C)}_force3DLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="fill-extrusion"&&this._updateLayer(d)}}_forceSymbolLayerUpdate(){for(const l in this._layers){const d=this._layers[l];d.type==="symbol"&&this._updateLayer(d)}}_validate(l,d,x,C,B={}){if(B&&B.validate===!1)return!1;const F=i.l({},this.serialize());return aa(this,l.call(hs,i.l({key:d,style:F,value:x,styleSpec:i.a3},C)))}_remove(){this._request&&(this._request.cancel(),this._request=null),this._spriteRequest&&(this._spriteRequest.cancel(),this._spriteRequest=null),i.cx.off("pluginStateChange",this._rtlTextPluginCallback);for(const l in this._mergedLayers)this._mergedLayers[l].setEventedParent(null);for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles(),this._mergedSourceCaches[l].setEventedParent(null);this.setEventedParent(null),delete this.fog,delete this.snow,delete this.rain,delete this.terrain,delete this.ambientLight,delete this.directionalLight,this.isRootStyle()&&(this.imageManager.setEventedParent(null),this.modelManager.setEventedParent(null),this.dispatcher.remove())}clearSource(l){const d=this.getSourceCaches(l);for(const x of d)x.clearTiles()}clearSources(){for(const l in this._mergedSourceCaches)this._mergedSourceCaches[l].clearTiles()}reloadSource(l){const d=this.getSourceCaches(l);for(const x of d)x.resume(),x.reload()}reloadSources(){for(const l of this.getSources())l.reload&&l.reload()}updateSources(l){let d;this.directionalLight&&(d=Uc(this.directionalLight));for(const x in this._mergedSourceCaches)this._mergedSourceCaches[x].update(l,void 0,void 0,d)}_generateCollisionBoxes(){for(const l in this._sourceCaches){const d=this._sourceCaches[l];d.resume(),d.reload()}}_updatePlacement(l,d,x,C,B,F,z=!1){let K=!1,X=!1;const J={},oe={};for(const se of this._mergedOrder){const ue=this._mergedLayers[se];if(ue.type!=="symbol")continue;const Ie=i.aC(ue.source,ue.scope);let Se=J[Ie];if(!Se){const Le=this.getLayerSourceCache(ue);if(!Le)continue;const $e=Le.getRenderableIds(!0).map(rt=>Le.getTileByID(rt));oe[Ie]=$e.slice(),Se=J[Ie]=$e.sort((rt,et)=>et.tileID.overscaledZ-rt.tileID.overscaledZ||(rt.tileID.isLessThan(et.tileID)?-1:1))}const Pe=this.crossTileSymbolIndex.addLayer(ue,Se,d.center.lng,d.projection);K=K||Pe}if(this.crossTileSymbolIndex.pruneUnusedLayers(this._mergedOrder),z=z||this._layerOrderChanged||C===0,this._layerOrderChanged&&this.fire(new i.z("neworder")),(z||!this.pauseablePlacement||this.pauseablePlacement.isDone()&&!this.placement.stillRecent(i.q.now(),d.zoom))&&(this.pauseablePlacement=new zr(d,this._mergedOrder,z,x,C,B,this.placement,this.fog&&d.projection.supportsFog?this.fog.state:null,this._buildingIndex),this._layerOrderChanged=!1),this.pauseablePlacement.isDone()?this.placement.setStale():(this.pauseablePlacement.continuePlacement(this._mergedOrder,this._mergedLayers,J,oe,this.map.painter.scaleFactor),this.pauseablePlacement.isDone()&&(this.placement=this.pauseablePlacement.commit(i.q.now()),X=!0),K&&this.pauseablePlacement.placement.setStale()),X||K){this._buildingIndex.onNewFrame(d.zoom);for(let se=0;se<this._mergedOrder.length;se++){const ue=this._mergedLayers[this._mergedOrder[se]];if(ue.type!=="symbol")continue;const Ie=this.isLayerClipped(ue);this.placement.updateLayerOpacities(ue,J[i.aC(ue.source,ue.scope)],se,Ie?F:null)}}return{needsRerender:!this.pauseablePlacement.isDone()||this.placement.hasTransitions(i.q.now())}}_releaseSymbolFadeTiles(){for(const l in this._sourceCaches)this._sourceCaches[l].releaseSymbolFadeTiles()}addImport(l,d){this._checkLoaded();const x=this.stylesheet.imports=this.stylesheet.imports||[];if(x.findIndex(({id:B})=>B===l.id)!==-1)return void this.fire(new i.y(new Error(`Import with id '${l.id}' already exists in the map's style.`)));if(!d)return x.push(l),this._loadImports([l],!0);const C=x.findIndex(({id:B})=>B===d);return C===-1&&this.fire(new i.y(new Error(`Import with id "${d}" does not exist on this map.`))),this.stylesheet.imports=x.slice(0,C).concat(l).concat(x.slice(C)),this._loadImports([l],!0,d)}updateImport(l,d){this._checkLoaded();const x=this.stylesheet.imports||[],C=this.getImportIndex(l);return C===-1?this:typeof d=="string"?(this.setImportUrl(l,d),this):(d.url&&d.url!==x[C].url&&this.setImportUrl(l,d.url),i.bn(d.config,x[C].config)||this.setImportConfig(l,d.config),i.bn(d.data,x[C].data)||this.setImportData(l,d.data),this)}moveImport(l,d){this._checkLoaded();let x=this.stylesheet.imports||[];const C=this.getImportIndex(l);if(C===-1)return this;const B=this.getImportIndex(d);if(B===-1)return this;const F=x[C],z=this.fragments[C];return x=x.filter(({id:K})=>K!==l),this.fragments=this.fragments.filter(({id:K})=>K!==l),this.stylesheet.imports=x.slice(0,B).concat(F).concat(x.slice(B)),this.fragments=this.fragments.slice(0,B).concat(z).concat(this.fragments.slice(B)),this.mergeLayers(),this}setImportUrl(l,d){this._checkLoaded();const x=this.stylesheet.imports||[],C=this.getImportIndex(l);if(C===-1)return this;x[C].url=d;const B=this.fragments[C];return B.style=this._createFragmentStyle(x[C]),B.style.on("style.import.load",()=>this.mergeAll()),B.style.loadURL(d),this}setImportData(l,d){this._checkLoaded();const x=this.getImportIndex(l),C=this.stylesheet.imports||[];return x===-1?this:d?(this.fragments[x].style.setState(d),this._reloadImports(),this):(delete C[x].data,this.setImportUrl(l,C[x].url))}setImportConfig(l,d){this._checkLoaded();const x=this.getImportIndex(l),C=this.stylesheet.imports||[];if(x===-1)return this;d?C[x].config=d:delete C[x].config;const B=this.fragments[x],F=B.style.stylesheet&&B.style.stylesheet.schema;return B.config=d,B.style.updateConfig(d,F),this.updateConfigDependencies(),this}removeImport(l){this._checkLoaded();const d=this.stylesheet.imports||[],x=this.getImportIndex(l);x!==-1&&(d.splice(x,1),this.fragments[x].style._remove(),this.fragments.splice(x,1),this._reloadImports())}getImportIndex(l){const d=(this.stylesheet.imports||[]).findIndex(x=>x.id===l);return d===-1&&this.fire(new i.y(new Error(`Import '${l}' does not exist in the map's style and cannot be updated.`))),d}getLayer(l){return this._mergedLayers[l]}getSources(){const l=[];for(const d in this._mergedOtherSourceCaches){const x=this._mergedOtherSourceCaches[d];x&&l.push(x.getSource())}return l}getSource(l,d){const x=this.getSourceCache(l,d);return x&&x.getSource()}getLayerSource(l){const d=this.getLayerSourceCache(l);return d&&d.getSource()}getSourceCache(l,d){const x=i.aC(l,d);return this._mergedOtherSourceCaches[x]}getLayerSourceCache(l){const d=i.aC(l.source,l.scope);return l.type==="symbol"?this._mergedSymbolSourceCaches[d]:this._mergedOtherSourceCaches[d]}getSourceCaches(l){if(l==null)return Object.values(this._mergedSourceCaches);const d=[];return this._mergedOtherSourceCaches[l]&&d.push(this._mergedOtherSourceCaches[l]),this._mergedSymbolSourceCaches[l]&&d.push(this._mergedSymbolSourceCaches[l]),d}updateSourceCaches(){const l=this._changes.getUpdatedSourceCaches();for(const d in l){const x=l[d];x==="reload"?this.reloadSource(d):x==="clear"&&this.clearSource(d)}}updateLayers(l){const d=this._changes.getUpdatedPaintProperties();for(const x of d){const C=this.getLayer(x);C&&C.updateTransitions(l)}}getImages(l,d,x){this.imageManager.getImages(d.icons,d.scope,x),this._updateTilesForChangedImages();const C=B=>{B&&B.setDependencies(d.tileID.key,d.type,d.icons)};C(this._otherSourceCaches[d.source]),C(this._symbolSourceCaches[d.source])}rasterizeImages(l,d,x){this.imageManager.rasterizeImages(d,x)}getGlyphs(l,d,x){this.glyphManager.getGlyphs(d.stacks,d.scope,x)}getResource(l,d,x){return i.cy(d,x)}getOwnSourceCache(l){return this._otherSourceCaches[l]}getOwnLayerSourceCache(l){return l.type==="symbol"?this._symbolSourceCaches[l.source]:this._otherSourceCaches[l.source]}getOwnSourceCaches(l){const d=[];return this._otherSourceCaches[l]&&d.push(this._otherSourceCaches[l]),this._symbolSourceCaches[l]&&d.push(this._symbolSourceCaches[l]),d}_isSourceCacheLoaded(l){const d=this.getOwnSourceCaches(l);return d.length===0?(this.fire(new i.y(new Error(`There is no source with ID '${l}'`))),!1):d.every(x=>x.loaded())}has3DLayers(){return this._has3DLayers}hasSymbolLayers(){return this._hasSymbolLayers}hasCircleLayers(){return this._hasCircleLayers}isLayerClipped(l,d){if(!this._clipLayerPresent&&l.type!=="fill-extrusion")return!1;const x=l.type==="fill-extrusion"&&l.sourceLayer==="building";if(l.is3D()){if(x||d&&d.type==="batched-model"||l.type==="model")return!0}else if(l.type==="symbol")return!0;return!1}_clearWorkerCaches(){this.dispatcher.broadcast("clearCaches")}destroy(){this._clearWorkerCaches(),this.fragments.forEach(l=>{l.style._remove()}),this.terrainSetForDrapingOnly()&&(delete this.terrain,delete this.stylesheet.terrain)}}Bi.getSourceType=function(v){return Dc[v]},Bi.setSourceType=function(v,l){Dc[v]=l},Bi.registerForPluginStateChange=i.ch;var _o=`
#define EPSILON 0.0000001
#define PI 3.141592653589793
#ifdef RENDER_CUTOFF
float cutoff_opacity(vec4 cutoff_params,float depth) {float near=cutoff_params.x;float far=cutoff_params.y;float cutoffStart=cutoff_params.z;float cutoffEnd=cutoff_params.w;float linearDepth=(depth-near)/(far-near);return clamp((linearDepth-cutoffStart)/(cutoffEnd-cutoffStart),0.0,1.0);}
#endif`,Ys=`
out vec4 glFragColor;highp float unpack_depth(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}highp vec4 pack_depth(highp float ndc_z) {highp float depth=ndc_z*0.5+0.5;const highp vec4 bit_shift=vec4(255.0*255.0*255.0,255.0*255.0,255.0,1.0);const highp vec4 bit_mask =vec4(0.0,1.0/255.0,1.0/255.0,1.0/255.0);highp vec4 res=fract(depth*bit_shift);res-=res.xxyz*bit_mask;return res;}
#ifdef INDICATOR_CUTOUT
uniform vec3 u_indicator_cutout_centers;uniform vec4 u_indicator_cutout_params;
#endif
vec4 applyCutout(vec4 color,float height) {
#ifdef INDICATOR_CUTOUT
float verticalFadeRange=u_indicator_cutout_centers.z*0.25;float holeMinOpacity=mix(1.0,u_indicator_cutout_params.x,smoothstep(u_indicator_cutout_centers.z,u_indicator_cutout_centers.z+verticalFadeRange,height));float holeRadius=max(u_indicator_cutout_params.y,0.0);float holeAspectRatio=u_indicator_cutout_params.z;float fadeStart=u_indicator_cutout_params.w;float distA=distance(vec2(gl_FragCoord.x,gl_FragCoord.y*holeAspectRatio),vec2(u_indicator_cutout_centers[0],u_indicator_cutout_centers[1]*holeAspectRatio));return color*min(smoothstep(fadeStart,holeRadius,distA)+holeMinOpacity,1.0);
#else
return color;
#endif
}
#ifdef DEBUG_WIREFRAME
#define HANDLE_WIREFRAME_DEBUG \\
glFragColor=vec4(0.7,0.0,0.0,0.7); \\
gl_FragDepth=gl_FragCoord.z-0.0001;
#else
#define HANDLE_WIREFRAME_DEBUG
#endif
#ifdef RENDER_CUTOFF
uniform highp vec4 u_cutoff_params;in float v_cutoff_opacity;
#endif
vec4 textureLodCustom(sampler2D image,highp vec2 pos,highp vec2 lod_coord) {highp vec2 size=vec2(textureSize(image,0));highp vec2 dx=dFdx(lod_coord.xy*size);highp vec2 dy=dFdy(lod_coord.xy*size);highp float delta_max_sqr=max(dot(dx,dx),dot(dy,dy));highp float lod=0.5*log2(delta_max_sqr);return textureLod(image,pos,lod);}vec4 applyLUT(highp sampler3D lut,vec4 col) {vec3 size=vec3(textureSize(lut,0));vec3 uvw=(col.rbg*float(size-1.0)+0.5)/size;return vec4(texture(lut,uvw).rgb,col.a);}vec3 applyLUT(highp sampler3D lut,vec3 col) {return applyLUT(lut,vec4(col,1.0)).rgb;}`,Wd=`
#define EXTENT 8192.0
#define RAD_TO_DEG 180.0/PI
#define DEG_TO_RAD PI/180.0
#define GLOBE_RADIUS EXTENT/PI/2.0
float wrap(float n,float min,float max) {float d=max-min;float w=mod(mod(n-min,d)+d,d)+min;return (w==min) ? max : w;}
#ifdef PROJECTION_GLOBE_VIEW
vec3 mercator_tile_position(mat4 matrix,vec2 tile_anchor,vec3 tile_id,vec2 mercator_center) {
#ifndef PROJECTED_POS_ON_VIEWPORT
float tiles=tile_id.z;vec2 mercator=(tile_anchor/EXTENT+tile_id.xy)/tiles;mercator-=mercator_center;mercator.x=wrap(mercator.x,-0.5,0.5);vec4 mercator_tile=vec4(mercator.xy*EXTENT,EXTENT/(2.0*PI),1.0);mercator_tile=matrix*mercator_tile;return mercator_tile.xyz;
#else
return vec3(0.0);
#endif
}vec3 mix_globe_mercator(vec3 globe,vec3 mercator,float t) {return mix(globe,mercator,t);}mat3 globe_mercator_surface_vectors(vec3 pos_normal,vec3 up_dir,float zoom_transition) {vec3 normal=zoom_transition==0.0 ? pos_normal : normalize(mix(pos_normal,up_dir,zoom_transition));vec3 xAxis=normalize(vec3(normal.z,0.0,-normal.x));vec3 yAxis=normalize(cross(normal,xAxis));return mat3(xAxis,yAxis,normal);}
#endif
vec2 unpack_float(const float packedValue) {int packedIntValue=int(packedValue);int v0=packedIntValue/256;return vec2(v0,packedIntValue-v0*256);}vec2 unpack_opacity(const float packedOpacity) {int intOpacity=int(packedOpacity)/2;return vec2(float(intOpacity)/127.0,mod(packedOpacity,2.0));}vec4 decode_color(const vec2 encodedColor) {return vec4(
unpack_float(encodedColor[0])/255.0,unpack_float(encodedColor[1])/255.0
);}float unpack_mix_vec2(const vec2 packedValue,const float t) {return mix(packedValue[0],packedValue[1],t);}vec4 unpack_mix_color(const vec4 packedColors,const float t) {vec4 minColor=decode_color(vec2(packedColors[0],packedColors[1]));vec4 maxColor=decode_color(vec2(packedColors[2],packedColors[3]));return mix(minColor,maxColor,t);}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const vec2 units_to_pixels,const vec2 pos) {vec2 offset=mod(mod(mod(pixel_coord_upper,pattern_size)*256.0,pattern_size)*256.0+pixel_coord_lower,pattern_size);return (units_to_pixels*pos+offset)/pattern_size;}vec2 get_pattern_pos(const vec2 pixel_coord_upper,const vec2 pixel_coord_lower,const vec2 pattern_size,const float tile_units_to_pixels,const vec2 pos) {return get_pattern_pos(pixel_coord_upper,pixel_coord_lower,pattern_size,vec2(tile_units_to_pixels),pos);}float mercatorXfromLng(float lng) {return (180.0+lng)/360.0;}float mercatorYfromLat(float lat) {return (180.0-(RAD_TO_DEG*log(tan(PI/4.0+lat/2.0*DEG_TO_RAD))))/360.0;}vec3 latLngToECEF(vec2 latLng) {latLng=DEG_TO_RAD*latLng;float cosLat=cos(latLng[0]);float sinLat=sin(latLng[0]);float cosLng=cos(latLng[1]);float sinLng=sin(latLng[1]);float sx=cosLat*sinLng*GLOBE_RADIUS;float sy=-sinLat*GLOBE_RADIUS;float sz=cosLat*cosLng*GLOBE_RADIUS;return vec3(sx,sy,sz);}
#ifdef RENDER_CUTOFF
uniform vec4 u_cutoff_params;out float v_cutoff_opacity;
#endif
const vec4 AWAY=vec4(-1000.0,-1000.0,-1000.0,1);const float skirtOffset=24575.0;vec3 decomposeToPosAndSkirt(vec2 posWithComposedSkirt)
{float skirt=float(posWithComposedSkirt.x >=skirtOffset);vec2 pos=posWithComposedSkirt-vec2(skirt*skirtOffset,0.0);return vec3(pos,skirt);}`,nd="in highp vec3 a_pos_3f;uniform lowp mat4 u_matrix;out highp vec3 v_uv;void main() {const mat3 half_neg_pi_around_x=mat3(1.0,0.0, 0.0,0.0,0.0,-1.0,0.0,1.0, 0.0);v_uv=half_neg_pi_around_x*a_pos_3f;vec4 pos=u_matrix*vec4(a_pos_3f,1.0);gl_Position=pos.xyww;}",la=`
#define ELEVATION_SCALE 7.0
#define ELEVATION_OFFSET 450.0
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_tl_up;uniform vec3 u_tile_tr_up;uniform vec3 u_tile_br_up;uniform vec3 u_tile_bl_up;uniform float u_tile_up_scale;vec3 elevationVector(vec2 pos) {vec2 uv=pos/EXTENT;vec3 up=normalize(mix(
mix(u_tile_tl_up,u_tile_tr_up,uv.xxx),mix(u_tile_bl_up,u_tile_br_up,uv.xxx),uv.yyy));return up*u_tile_up_scale;}
#else
vec3 elevationVector(vec2 pos) { return vec3(0,0,1); }
#endif
#ifdef TERRAIN
uniform highp sampler2D u_dem;uniform highp sampler2D u_dem_prev;uniform vec2 u_dem_tl;uniform vec2 u_dem_tl_prev;uniform float u_dem_scale;uniform float u_dem_scale_prev;uniform float u_dem_size;uniform float u_dem_lerp;uniform float u_exaggeration;uniform float u_meter_to_dem;uniform mat4 u_label_plane_matrix_inv;vec4 tileUvToDemSample(vec2 uv,float dem_size,float dem_scale,vec2 dem_tl) {vec2 pos=dem_size*(uv*dem_scale+dem_tl)+1.0;vec2 f=fract(pos);return vec4((pos-f+0.5)/(dem_size+2.0),f);}float currentElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale+u_dem_tl)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale,u_dem_tl);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(dd,0)).r;float bl=texture(u_dem,pos+vec2(0,dd)).r;float br=texture(u_dem,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}float prevElevation(vec2 apos) {
#ifdef TERRAIN_DEM_FLOAT_FORMAT
vec2 pos=(u_dem_size*(apos/8192.0*u_dem_scale_prev+u_dem_tl_prev)+1.5)/(u_dem_size+2.0);return u_exaggeration*texture(u_dem_prev,pos).r;
#else
float dd=1.0/(u_dem_size+2.0);vec4 r=tileUvToDemSample(apos/8192.0,u_dem_size,u_dem_scale_prev,u_dem_tl_prev);vec2 pos=r.xy;vec2 f=r.zw;float tl=texture(u_dem_prev,pos).r;float tr=texture(u_dem_prev,pos+vec2(dd,0)).r;float bl=texture(u_dem_prev,pos+vec2(0,dd)).r;float br=texture(u_dem_prev,pos+vec2(dd,dd)).r;return u_exaggeration*mix(mix(tl,tr,f.x),mix(bl,br,f.x),f.y);
#endif
}
#ifdef TERRAIN_VERTEX_MORPHING
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
float nextElevation=currentElevation(apos);float prevElevation=prevElevation(apos);return mix(prevElevation,nextElevation,u_dem_lerp);}
#else
float elevation(vec2 apos) {
#ifdef ZERO_EXAGGERATION
return 0.0;
#endif
return currentElevation(apos);}
#endif
vec4 fourSample(vec2 pos,vec2 off) {float tl=texture(u_dem,pos).r;float tr=texture(u_dem,pos+vec2(off.x,0.0)).r;float bl=texture(u_dem,pos+vec2(0.0,off.y)).r;float br=texture(u_dem,pos+off).r;return vec4(tl,tr,bl,br);}float flatElevation(vec2 pack) {vec2 apos=floor(pack/8.0);vec2 span=10.0*(pack-apos*8.0);vec2 uvTex=(apos-vec2(1.0,1.0))/8190.0;float size=u_dem_size+2.0;float dd=1.0/size;vec2 pos=u_dem_size*(uvTex*u_dem_scale+u_dem_tl)+1.0;vec2 f=fract(pos);pos=(pos-f+0.5)*dd;vec4 h=fourSample(pos,vec2(dd));float z=mix(mix(h.x,h.y,f.x),mix(h.z,h.w,f.x),f.y);vec2 w=floor(0.5*(span*u_meter_to_dem-1.0));vec2 d=dd*w;h=fourSample(pos-d,2.0*d+vec2(dd));vec4 diff=abs(h.xzxy-h.ywzw);vec2 slope=min(vec2(0.25),u_meter_to_dem*0.5*(diff.xz+diff.yw)/(2.0*w+vec2(1.0)));vec2 fix=slope*span;float base=z+max(fix.x,fix.y);return u_exaggeration*base;}float elevationFromUint16(float word) {return u_exaggeration*(word/ELEVATION_SCALE-ELEVATION_OFFSET);}
#else
float elevation(vec2 pos) { return 0.0; }
#endif
#ifdef DEPTH_OCCLUSION
uniform highp sampler2D u_depth;uniform highp vec2 u_depth_size_inv;uniform highp vec2 u_depth_range_unpack;uniform highp float u_occluder_half_size;uniform highp float u_occlusion_depth_offset;
#ifdef DEPTH_D24
float unpack_depth(float depth) {return depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}vec4 unpack_depth4(vec4 depth) {return depth*u_depth_range_unpack.x+vec4(u_depth_range_unpack.y);}
#else
highp float unpack_depth_rgba(vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded(vec4 frag) {vec3 coord=frag.xyz/frag.w;
#ifdef DEPTH_D24
float depth=unpack_depth(texture(u_depth,(coord.xy+1.0)*0.5).r);
#else
float depth=unpack_depth_rgba(texture(u_depth,(coord.xy+1.0)*0.5));
#endif
return coord.z+u_occlusion_depth_offset > depth;}highp vec4 getCornerDepths(vec2 coord) {highp vec3 df=vec3(u_occluder_half_size*u_depth_size_inv,0.0);highp vec2 uv=0.5*coord.xy+0.5;
#ifdef DEPTH_D24
highp vec4 depth=vec4(
texture(u_depth,uv-df.xz).r,texture(u_depth,uv+df.xz).r,texture(u_depth,uv-df.zy).r,texture(u_depth,uv+df.zy).r
);depth=unpack_depth4(depth);
#else
highp vec4 depth=vec4(
unpack_depth_rgba(texture(u_depth,uv-df.xz)),unpack_depth_rgba(texture(u_depth,uv+df.xz)),unpack_depth_rgba(texture(u_depth,uv-df.zy)),unpack_depth_rgba(texture(u_depth,uv+df.zy))
);
#endif
return depth;}highp float occlusionFadeMultiSample(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec2 uv=0.5*coord.xy+0.5;int NX=3;int NY=4;highp vec2 df=u_occluder_half_size*u_depth_size_inv;highp vec2 oneStep=2.0*u_occluder_half_size*u_depth_size_inv/vec2(NX-1,NY-1);highp float res=0.0;for (int y=0; y < NY;++y) {for (int x=0; x < NX;++x) {
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depth,uv-df+vec2(float(x)*oneStep.x,float(y)*oneStep.y)));
#endif
res+=1.0-clamp(300.0*(coord.z+u_occlusion_depth_offset-depth),0.0,1.0);}}res=clamp(2.0*res/float(NX*NY)-0.5,0.0,1.0);return res;}highp float occlusionFade(vec4 frag) {highp vec3 coord=frag.xyz/frag.w;highp vec4 depth=getCornerDepths(coord.xy);return dot(vec4(0.25),vec4(1.0)-clamp(300.0*(vec4(coord.z+u_occlusion_depth_offset)-depth),0.0,1.0));}
#else
bool isOccluded(vec4 frag) { return false; }highp float occlusionFade(vec4 frag) { return 1.0; }highp float occlusionFadeMultiSample(vec4 frag) { return 1.0; }
#endif//DEPTH_OCCLUSION`,Bc=`#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump mat4 u_fog_matrix;out vec3 v_fog_pos;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}vec3 fog_position(vec3 pos) {return (u_fog_matrix*vec4(pos,1.0)).xyz;}vec3 fog_position(vec2 pos) {return fog_position(vec3(pos,0.0));}float fog(vec3 pos) {float depth=length(pos);float opacity=fog_opacity(fog_range(depth));return opacity*fog_horizon_blending(pos/depth);}
#endif`,Ec=`highp vec3 hash(highp vec2 p) {highp vec3 p3=fract(p.xyx*vec3(443.8975,397.2973,491.1871));p3+=dot(p3,p3.yxz+19.19);return fract((p3.xxy+p3.yzz)*p3.zyx);}vec3 dither(vec3 color,highp vec2 seed) {vec3 rnd=hash(seed)+hash(seed+0.59374)-0.5;return color+rnd/255.0;}
#ifdef FOG
uniform mediump vec4 u_fog_color;uniform mediump vec2 u_fog_range;uniform mediump float u_fog_horizon_blend;uniform mediump vec2 u_fog_vertical_limit;uniform mediump float u_fog_temporal_offset;in vec3 v_fog_pos;uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform highp vec2 u_viewport;uniform float u_globe_transition;uniform int u_is_globe;float fog_range(float depth) {return (depth-u_fog_range[0])/(u_fog_range[1]-u_fog_range[0]);}float fog_horizon_blending(vec3 camera_dir) {float t=max(0.0,camera_dir.z/u_fog_horizon_blend);return u_fog_color.a*exp(-3.0*t*t);}float fog_opacity(float t) {const float decay=6.0;float falloff=1.0-min(1.0,exp(-decay*t));falloff*=falloff*falloff;return u_fog_color.a*min(1.0,1.00747*falloff);}float globe_glow_progress() {highp vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);highp vec3 dir=normalize(ray_dir);highp vec3 closest_point=dot(u_globe_pos,dir)*dir;highp float sdf=length(closest_point-u_globe_pos)/u_globe_radius;return sdf+PI*0.5;}float fog_opacity(vec3 pos) {float depth=length(pos);return fog_opacity(fog_range(depth));}vec3 fog_apply(vec3 color,vec3 pos,float opacity_limit) {float depth=length(pos);float opacity;if (u_is_globe==1) {float glow_progress=globe_glow_progress();float t=mix(glow_progress,depth,u_globe_transition);opacity=fog_opacity(fog_range(t));} else {opacity=fog_opacity(fog_range(depth));opacity*=fog_horizon_blending(pos/depth);}return mix(color,u_fog_color.rgb,min(opacity,opacity_limit));}vec3 fog_apply(vec3 color,vec3 pos) {return fog_apply(color,pos,1.0);}vec4 fog_apply_from_vert(vec4 color,float fog_opac) {float alpha=EPSILON+color.a;color.rgb=mix(color.rgb/alpha,u_fog_color.rgb,fog_opac)*alpha;return color;}vec3 fog_apply_sky_gradient(vec3 camera_ray,vec3 sky_color) {float horizon_blend=fog_horizon_blending(normalize(camera_ray));return mix(sky_color,u_fog_color.rgb,horizon_blend);}vec4 fog_apply_premultiplied(vec4 color,vec3 pos) {float alpha=EPSILON+color.a;color.rgb=fog_apply(color.rgb/alpha,pos)*alpha;return color;}vec4 fog_apply_premultiplied(vec4 color,vec3 pos,float heightMeters) {float verticalProgress=(u_fog_vertical_limit.x > 0.0 || u_fog_vertical_limit.y > 0.0) ? smoothstep(u_fog_vertical_limit.x,u_fog_vertical_limit.y,heightMeters) : 0.0;float opacityLimit=1.0-smoothstep(0.9,1.0,fog_opacity(pos));return mix(fog_apply_premultiplied(color,pos),color,min(verticalProgress,opacityLimit));}vec3 fog_dither(vec3 color) {
#ifdef FOG_DITHERING
vec2 dither_seed=gl_FragCoord.xy+u_fog_temporal_offset;return dither(color,dither_seed);
#else
return color;
#endif
}vec4 fog_dither(vec4 color) {return vec4(fog_dither(color.rgb),color.a);}
#endif`,Tc=`#ifdef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;const vec4 NODATA=vec4(1);ivec4 _raTexLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}vec2 _raTexLinearMix(highp vec2 fxy,highp vec4 colorMix,highp float colorOffset,highp vec4 t00,highp vec4 t10,highp vec4 t01,highp vec4 t11) {vec2 c00=t00==NODATA ? vec2(0) : vec2(colorOffset+dot(t00,colorMix),1);vec2 c10=t10==NODATA ? vec2(0) : vec2(colorOffset+dot(t10,colorMix),1);vec2 c01=t01==NODATA ? vec2(0) : vec2(colorOffset+dot(t01,colorMix),1);vec2 c11=t11==NODATA ? vec2(0) : vec2(colorOffset+dot(t11,colorMix),1);return mix(mix(c01,c11,fxy.x),mix(c00,c10,fxy.x),fxy.y);}vec2 raTexture2D_image0_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image0,c.yz,0),texelFetch(u_image0,c.xz,0),texelFetch(u_image0,c.yw,0),texelFetch(u_image0,c.xw,0)
);}vec2 raTexture2D_image1_linear(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec2 fxy;ivec4 c=_raTexLinearCoord(texCoord,texResolution,fxy);return _raTexLinearMix(fxy,colorMix,colorOffset,texelFetch(u_image1,c.yz,0),texelFetch(u_image1,c.xz,0),texelFetch(u_image1,c.yw,0),texelFetch(u_image1,c.xw,0)
);}vec2 raTexture2D_image0_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image0,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}vec2 raTexture2D_image1_nearest(highp vec2 texCoord,highp vec2 texResolution,highp vec4 colorMix,highp float colorOffset) {vec4 t=texelFetch(u_image1,ivec2(texCoord*texResolution),0);return t==NODATA ? vec2(0) : vec2(colorOffset+dot(t,colorMix),1);}
#endif`,cu=`#ifdef RASTER_ARRAY
uniform sampler2D u_velocity;uniform mediump vec2 u_velocity_res;uniform mediump float u_max_speed;const vec4 NO_DATA=vec4(1);const vec2 INVALID_VELOCITY=vec2(-1);uniform highp vec2 u_uv_offset;uniform highp float u_data_offset;uniform highp vec2 u_data_scale;ivec4 rasterArrayLinearCoord(highp vec2 texCoord,highp vec2 texResolution,out highp vec2 fxy) {texCoord=texCoord*texResolution-0.5;fxy=fract(texCoord);texCoord-=fxy;return ivec4(texCoord.xxyy+vec2(1.5,0.5).xyxy);}highp vec2 lookup_velocity(highp vec2 uv) {uv=u_uv_offset.x+u_uv_offset.y*uv;highp vec2 fxy;ivec4 c=rasterArrayLinearCoord(uv,u_velocity_res,fxy);highp vec4 tl=texelFetch(u_velocity,c.yz,0);highp vec4 tr=texelFetch(u_velocity,c.xz,0);highp vec4 bl=texelFetch(u_velocity,c.yw,0);highp vec4 br=texelFetch(u_velocity,c.xw,0);if (tl==NO_DATA) {return INVALID_VELOCITY;}if (tr==NO_DATA) {return INVALID_VELOCITY;}if (bl==NO_DATA) {return INVALID_VELOCITY;}if (br==NO_DATA) {return INVALID_VELOCITY;}highp vec4 t=mix(mix(bl,br,fxy.x),mix(tl,tr,fxy.x),fxy.y);highp vec2 velocity=u_data_offset+vec2(dot(t.rg,u_data_scale),dot(t.ba,u_data_scale));velocity.y=-velocity.y;velocity/=max(u_max_speed,length(velocity));return velocity;}
#endif
uniform highp float u_particle_pos_scale;uniform highp vec2 u_particle_pos_offset;highp vec4 pack_pos_to_rgba(highp vec2 p) {highp vec2 v=(p+u_particle_pos_offset)/u_particle_pos_scale;highp vec4 r=vec4(v.x,fract(v.x*255.0),v.y,fract(v.y*255.0));return vec4(r.x-r.y/255.0,r.y,r.z-r.w/255.0,r.w);}highp vec2 unpack_pos_from_rgba(highp vec4 v) {v=floor(v*255.0+0.5)/255.0;highp vec2 p=vec2(v.x+(v.y/255.0),v.z+(v.w/255.0));return u_particle_pos_scale*p-u_particle_pos_offset;}`,bl=`#ifdef RENDER_SHADOWS
uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_normal_offset;vec3 shadow_normal_offset(vec3 normal) {float tileInMeters=u_shadow_normal_offset[0];vec3 n=vec3(-normal.xy,tileInMeters*normal.z);float dotScale=min(1.0-dot(normal,u_shadow_direction),1.0)*0.5+0.5;return n*dotScale;}vec3 shadow_normal_offset_model(vec3 normal) {vec3 transformed_normal=vec3(-normal.xy,normal.z);float NDotL=dot(normalize(transformed_normal),u_shadow_direction);float dotScale=min(1.0-NDotL,1.0)*0.5+0.5;return normal*dotScale;}float shadow_normal_offset_multiplier0() {return u_shadow_normal_offset[1];}float shadow_normal_offset_multiplier1() {return u_shadow_normal_offset[2];}
#endif//RENDER_SHADOWS`,fs=`#ifdef RENDER_SHADOWS
#ifdef DEPTH_TEXTURE
uniform highp sampler2D u_shadowmap_0;uniform highp sampler2D u_shadowmap_1;
#else
uniform sampler2D u_shadowmap_0;uniform sampler2D u_shadowmap_1;
#endif
uniform float u_shadow_intensity;uniform float u_shadow_map_resolution;uniform float u_shadow_texel_size;uniform highp vec3 u_shadow_normal_offset;uniform vec2 u_fade_range;uniform mediump vec3 u_shadow_direction;uniform highp vec3 u_shadow_bias;highp float shadow_sample_1(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_1,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_1,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}highp float shadow_sample_0(highp vec2 uv,highp float compare) {highp float shadow_depth;
#ifdef DEPTH_TEXTURE
shadow_depth=texture(u_shadowmap_0,uv).r;
#else
shadow_depth=unpack_depth(texture(u_shadowmap_0,uv))*0.5+0.5;
#endif
return step(shadow_depth,compare);}float shadow_occlusion_1(highp vec4 pos,highp float bias) {highp vec2 uv=pos.xy;return shadow_sample_1(uv,pos.z-bias);}float shadow_occlusion_0(highp vec4 pos,highp float bias) {highp float compare0=pos.z-bias;
#ifdef TEXTURE_GATHER
highp vec2 uv=pos.xy;highp vec4 samples=textureGather(u_shadowmap_0,uv,0);lowp vec4 stepSamples=step(samples,vec4(compare0));
#else
highp vec2 uv00=pos.xy-vec2(0.5*u_shadow_texel_size);highp vec2 uv10=uv00+vec2(u_shadow_texel_size,0.0);highp vec2 uv01=uv00+vec2(0.0,u_shadow_texel_size);highp vec2 uv11=uv01+vec2(u_shadow_texel_size,0.0);lowp vec4 stepSamples=vec4(
shadow_sample_0(uv01,compare0),shadow_sample_0(uv11,compare0),shadow_sample_0(uv10,compare0),shadow_sample_0(uv00,compare0)
);
#endif
vec2 f=fract(pos.xy*u_shadow_map_resolution-vec2(0.5));lowp vec2 lerpx=mix(stepSamples.wx,stepSamples.zy,f.xx);return mix(lerpx.x,lerpx.y,f.y);}float shadow_occlusion(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,highp float bias) {
#ifdef SHADOWS_SINGLE_CASCADE
light_view_pos0.xyz/=light_view_pos0.w;vec2 abs_bounds=abs(light_view_pos0.xy);if (abs_bounds.x >=1.0 || abs_bounds.y >=1.0) {return 0.0;}light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);
#else
light_view_pos0.xyz/=light_view_pos0.w;light_view_pos1.xyz/=light_view_pos1.w;vec4 uv=vec4(light_view_pos0.xy,light_view_pos1.xy);vec4 abs_bounds=abs(uv);if (abs_bounds.x < 1.0 && abs_bounds.y < 1.0) {light_view_pos0.xyz=light_view_pos0.xyz*0.5+0.5;return shadow_occlusion_0(light_view_pos0,bias);}if (abs_bounds.z >=1.0 || abs_bounds.w >=1.0) {return 0.0;}light_view_pos1.xyz=light_view_pos1.xyz*0.5+0.5;float occlusion1=shadow_occlusion_1(light_view_pos1,bias);return mix(occlusion1,0.0,smoothstep(u_fade_range.x,u_fade_range.y,view_depth));
#endif
}highp float calculate_shadow_bias(float NDotL) {
#ifdef NORMAL_OFFSET
return 0.5*u_shadow_bias.x;
#else
return 0.5*(u_shadow_bias.x+clamp(u_shadow_bias.y*tan(acos(NDotL)),0.0,u_shadow_bias.z));
#endif
}float shadowed_light_factor_normal(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_opacity(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth,float shadow_opacity) {float NDotL=dot(N,u_shadow_direction);float bias=calculate_shadow_bias(NDotL);float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias)*shadow_opacity;return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}float shadowed_light_factor_normal_unbiased(vec3 N,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float NDotL=dot(N,u_shadow_direction);float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return mix(0.0,(1.0-(u_shadow_intensity*occlusion))*NDotL,step(0.0,NDotL));}highp vec2 compute_receiver_plane_depth_bias(highp vec3 pos_dx,highp vec3 pos_dy)
{highp vec2 biasUV=vec2(
pos_dy.y*pos_dx.z-pos_dx.y*pos_dy.z,pos_dx.x*pos_dy.z-pos_dy.x*pos_dx.z);biasUV*=1.0/((pos_dx.x*pos_dy.y)-(pos_dx.y*pos_dy.x));return biasUV;}float shadowed_light_factor_plane_bias(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {highp vec3 light_view_pos0_xyz=light_view_pos0.xyz/light_view_pos0.w*0.5+0.5;highp vec3 light_view_pos0_ddx=dFdx(light_view_pos0_xyz);highp vec3 light_view_pos0_ddy=dFdy(light_view_pos0_xyz);highp vec2 plane_depth_bias=compute_receiver_plane_depth_bias(light_view_pos0_ddx,light_view_pos0_ddy);highp float bias=dot(vec2(u_shadow_texel_size,u_shadow_texel_size),plane_depth_bias)+0.0001;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadowed_light_factor(highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=0.0;float occlusion=shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);return 1.0-(u_shadow_intensity*occlusion);}float shadow_occlusion(float ndotl,highp vec4 light_view_pos0,highp vec4 light_view_pos1,float view_depth) {float bias=calculate_shadow_bias(ndotl);return shadow_occlusion(light_view_pos0,light_view_pos1,view_depth,bias);}
#endif`;const cl=[];Qa(_o,cl),Qa(Wd,cl),Qa(Ys,cl);const za={"_prelude_fog.vertex.glsl":Bc,"_prelude_terrain.vertex.glsl":la,"_prelude_shadow.vertex.glsl":bl,"_prelude_fog.fragment.glsl":Ec,"_prelude_shadow.fragment.glsl":fs,"_prelude_lighting.glsl":`
#ifdef LIGHTING_3D_MODE
uniform mediump vec3 u_lighting_ambient_color;uniform mediump vec3 u_lighting_directional_dir;uniform mediump vec3 u_lighting_directional_color;uniform mediump vec3 u_ground_radiance;float calculate_ambient_directional_factor(vec3 normal) {float NdotL=dot(normal,u_lighting_directional_dir);const float factor_reduction_max=0.3;float dir_luminance=dot(u_lighting_directional_color,vec3(0.2126,0.7152,0.0722));float directional_factor_min=1.0-factor_reduction_max*min(dir_luminance,1.0);float ambient_directional_factor=mix(directional_factor_min,1.0,min((NdotL+1.0),1.0));const float vertical_factor_min=0.92;float vertical_factor=mix(vertical_factor_min,1.0,normal.z*0.5+0.5);return vertical_factor*ambient_directional_factor;}vec3 linearProduct(vec3 srgbIn,vec3 k) {return srgbIn*pow(k,vec3(1./2.2));}vec3 apply_lighting(vec3 color,vec3 normal,float dir_factor) {float ambient_directional_factor=calculate_ambient_directional_factor(normal);vec3 ambient_contrib=ambient_directional_factor*u_lighting_ambient_color;vec3 directional_contrib=u_lighting_directional_color*dir_factor;return linearProduct(color,ambient_contrib+directional_contrib);}vec4 apply_lighting(vec4 color,vec3 normal,float dir_factor) {return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting(vec3 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return apply_lighting(color.rgb,normal,dir_factor);}vec4 apply_lighting(vec4 color,vec3 normal) {float dir_factor=max(dot(normal,u_lighting_directional_dir),0.0);return vec4(apply_lighting(color.rgb,normal,dir_factor),color.a);}vec3 apply_lighting_ground(vec3 color) {return color*u_ground_radiance;}vec4 apply_lighting_ground(vec4 color) {return vec4(apply_lighting_ground(color.rgb),color.a);}float calculate_NdotL(vec3 normal) {const float ext=0.70710678118;return (clamp(dot(normal,u_lighting_directional_dir),-ext,1.0)+ext)/(1.0+ext);}vec4 apply_lighting_with_emission_ground(vec4 color,float emissive_strength) {return mix(apply_lighting_ground(color),color,emissive_strength);}vec3 compute_flood_lighting(vec3 flood_light_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=flood_light_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);float occlusion_ramp=smoothstep(0.0,0.2,1.0-occlusion);return mix(fully_occluded_color,flood_light_color,occlusion_ramp);}vec3 compute_emissive_draped(vec3 unlit_color,float fully_occluded_factor,float occlusion,vec3 ground_shadow_factor) {vec3 fully_occluded_color=unlit_color*mix(ground_shadow_factor,vec3(1.0),fully_occluded_factor);return mix(fully_occluded_color,unlit_color,1.0-occlusion);}
#endif//LIGHTING_3D_MODE`,"_prelude_raster_array.glsl":Tc,"_prelude_raster_particle.glsl":cu},As={};oi("",la),oi(Ec,Bc),oi(fs,bl),oi(Tc,""),oi(cu,"");const lo=oi(Ys,Wd),Jo=_o;var va={background:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec4 u_color;uniform float u_opacity;
#ifdef LIGHTING_3D_MODE
in vec4 v_color;
#endif
void main() {vec4 out_color;
#ifdef LIGHTING_3D_MODE
out_color=v_color;
#else
out_color=u_color;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_lighting.glsl"
in vec2 a_pos;uniform mat4 u_matrix;
#ifdef LIGHTING_3D_MODE
uniform mediump vec4 u_color;out vec4 v_color;uniform float u_emissive_strength;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0,1);
#ifdef LIGHTING_3D_MODE
v_color=apply_lighting_with_emission_ground(u_color,u_emissive_strength);
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),backgroundPattern:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_pattern_tl;uniform vec2 u_pattern_br;uniform vec2 u_texsize;uniform float u_opacity;uniform float u_emissive_strength;uniform sampler2D u_image;in highp vec2 v_pos;void main() {highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(u_pattern_tl/u_texsize,u_pattern_br/u_texsize,imagecoord);vec4 out_color=textureLodCustom(u_image,pos,v_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pattern_size;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform vec2 u_pattern_units_to_pixels;in vec2 a_pos;out highp vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,u_pattern_size,u_pattern_units_to_pixels,a_pos);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),circle:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec3 v_data;in float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
uniform float u_emissive_strength;void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=v_data.xy;float blur_positive=blur < 0.0 ? 0.0 : 1.0;lowp float antialiasblur=v_data.z;float extrude_length=length(extrude)+antialiasblur*(1.0-blur_positive);float antialiased_blur=-max(abs(blur),antialiasblur);float opacity_t=smoothstep((1.0-blur_positive)*antialiased_blur,blur_positive*antialiased_blur,extrude_length-1.0)-smoothstep(0.0,antialiasblur,extrude_length-1.0);float color_t=stroke_width < 0.01 ? 0.0 : smoothstep(
antialiased_blur,0.0,extrude_length-radius/(radius+stroke_width)
);vec4 out_color=mix(color*opacity,stroke_color*stroke_opacity,color_t);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#endif
#ifdef FOG
out_color=fog_apply_premultiplied(out_color,v_fog_pos);
#endif
glFragColor=out_color*(v_visibility*opacity_t);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define NUM_VISIBILITY_RINGS 2
#define INV_SQRT2 0.70710678
#define ELEVATION_BIAS 0.0001
#define NUM_SAMPLES_PER_RING 16
uniform mat4 u_matrix;uniform mat2 u_extrude_scale;uniform lowp float u_device_pixel_ratio;uniform highp float u_camera_to_center_distance;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec3 v_data;out float v_visibility;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump float radius
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp vec4 stroke_color
#pragma mapbox: define mediump float stroke_width
#pragma mapbox: define lowp float stroke_opacity
vec2 calc_offset(vec2 extrusion,float radius,float stroke_width, float view_scale) {return extrusion*(radius+stroke_width)*u_extrude_scale*view_scale;}float cantilevered_elevation(vec2 pos,float radius,float stroke_width,float view_scale) {vec2 c1=pos+calc_offset(vec2(-1,-1),radius,stroke_width,view_scale);vec2 c2=pos+calc_offset(vec2(1,-1),radius,stroke_width,view_scale);vec2 c3=pos+calc_offset(vec2(1,1),radius,stroke_width,view_scale);vec2 c4=pos+calc_offset(vec2(-1,1),radius,stroke_width,view_scale);float h1=elevation(c1)+ELEVATION_BIAS;float h2=elevation(c2)+ELEVATION_BIAS;float h3=elevation(c3)+ELEVATION_BIAS;float h4=elevation(c4)+ELEVATION_BIAS;return max(h4,max(h3,max(h1,h2)));}float circle_elevation(vec2 pos) {
#if defined(TERRAIN)
return elevation(pos)+ELEVATION_BIAS;
#else
return 0.0;
#endif
}vec4 project_vertex(vec2 extrusion,vec4 world_center,vec4 projected_center,float radius,float stroke_width, float view_scale,mat3 surface_vectors) {vec2 sample_offset=calc_offset(extrusion,radius,stroke_width,view_scale);
#ifdef PITCH_WITH_MAP
#ifdef PROJECTION_GLOBE_VIEW
return u_matrix*( world_center+vec4(sample_offset.x*surface_vectors[0]+sample_offset.y*surface_vectors[1],0) );
#else
return u_matrix*( world_center+vec4(sample_offset,0,0) );
#endif
#else
return projected_center+vec4(sample_offset,0,0);
#endif
}float get_sample_step() {
#ifdef PITCH_WITH_MAP
return 2.0*PI/float(NUM_SAMPLES_PER_RING);
#else
return PI/float(NUM_SAMPLES_PER_RING);
#endif
}void main(void) {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump float radius
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp vec4 stroke_color
#pragma mapbox: initialize mediump float stroke_width
#pragma mapbox: initialize lowp float stroke_opacity
vec2 extrude=vec2(mod(a_pos,2.0)*2.0-1.0);vec2 circle_center=floor(a_pos*0.5);vec4 world_center;mat3 surface_vectors;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(circle_center)*circle_elevation(circle_center);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*circle_elevation(circle_center);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,circle_center,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;vec3 pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);world_center=vec4(pos,1);
#else 
surface_vectors=mat3(1.0);float height=circle_elevation(circle_center);world_center=vec4(circle_center,height,1);
#endif
vec4 projected_center=u_matrix*world_center;float view_scale=0.0;
#ifdef PITCH_WITH_MAP
#ifdef SCALE_WITH_MAP
view_scale=1.0;
#else
view_scale=projected_center.w/u_camera_to_center_distance;
#endif
#else
#ifdef SCALE_WITH_MAP
view_scale=u_camera_to_center_distance;
#else
view_scale=projected_center.w;
#endif
#endif
gl_Position=project_vertex(extrude,world_center,projected_center,radius,stroke_width,view_scale,surface_vectors);float visibility=0.0;
#ifdef TERRAIN
float step=get_sample_step();vec4 occlusion_world_center;vec4 occlusion_projected_center;
#ifdef PITCH_WITH_MAP
float cantilevered_height=cantilevered_elevation(circle_center,radius,stroke_width,view_scale);occlusion_world_center=vec4(circle_center,cantilevered_height,1);occlusion_projected_center=u_matrix*occlusion_world_center;
#else
occlusion_world_center=world_center;occlusion_projected_center=projected_center;
#endif
for(int ring=0; ring < NUM_VISIBILITY_RINGS; ring++) {float scale=(float(ring)+1.0)/float(NUM_VISIBILITY_RINGS);for(int i=0; i < NUM_SAMPLES_PER_RING; i++) {vec2 extrusion=vec2(cos(step*float(i)),-sin(step*float(i)))*scale;vec4 frag_pos=project_vertex(extrusion,occlusion_world_center,occlusion_projected_center,radius,stroke_width,view_scale,surface_vectors);visibility+=float(!isOccluded(frag_pos));}}visibility/=float(NUM_VISIBILITY_RINGS)*float(NUM_SAMPLES_PER_RING);
#else
visibility=1.0;
#endif
#ifdef PROJECTION_GLOBE_VIEW
visibility=1.0;
#endif
v_visibility=visibility;lowp float antialiasblur=1.0/u_device_pixel_ratio/(radius+stroke_width);v_data=vec3(extrude.x,extrude.y,antialiasblur);
#ifdef FOG
v_fog_pos=fog_position(world_center.xyz);
#endif
}`),clippingMask:oi("void main() {glFragColor=vec4(1.0);}","in vec2 a_pos;uniform mat4 u_matrix;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);}"),heatmap:oi(`#include "_prelude_fog.fragment.glsl"
uniform highp float u_intensity;in vec2 v_extrude;
#pragma mapbox: define highp float weight
#define GAUSS_COEF 0.3989422804014327
void main() {
#pragma mapbox: initialize highp float weight
float d=-0.5*3.0*3.0*dot(v_extrude,v_extrude);float val=weight*u_intensity*GAUSS_COEF*exp(d);glFragColor=vec4(val,1.0,1.0,1.0);
#ifdef FOG
if (u_is_globe==0) {glFragColor.r*=pow(1.0-fog_opacity(v_fog_pos),2.0);}
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform float u_extrude_scale;uniform float u_opacity;uniform float u_intensity;in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;
#endif
out vec2 v_extrude;
#pragma mapbox: define highp float weight
#pragma mapbox: define mediump float radius
const highp float ZERO=1.0/255.0/16.0;
#define GAUSS_COEF 0.3989422804014327
void main(void) {
#pragma mapbox: initialize highp float weight
#pragma mapbox: initialize mediump float radius
vec2 unscaled_extrude=vec2(mod(a_pos,2.0)*2.0-1.0);float S=sqrt(-2.0*log(ZERO/weight/u_intensity/GAUSS_COEF))/3.0;v_extrude=S*unscaled_extrude;vec2 extrude=v_extrude*radius*u_extrude_scale;vec2 tilePos=floor(a_pos*0.5);vec3 pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 pos_normal_3=a_pos_normal_3/16384.0;mat3 surface_vectors=globe_mercator_surface_vectors(pos_normal_3,u_up_dir,u_zoom_transition);vec3 surface_extrusion=extrude.x*surface_vectors[0]+extrude.y*surface_vectors[1];vec3 globe_elevation=elevationVector(tilePos)*elevation(tilePos);vec3 globe_pos=a_pos_3+surface_extrusion+globe_elevation;vec3 mercator_elevation=u_up_dir*u_tile_up_scale*elevation(tilePos);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,tilePos,u_tile_id,u_merc_center)+surface_extrusion+mercator_elevation;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#else
pos=vec3(tilePos+extrude,elevation(tilePos));
#endif
gl_Position=u_matrix*vec4(pos,1);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),heatmapTexture:oi(`uniform sampler2D u_image;uniform sampler2D u_color_ramp;uniform float u_opacity;in vec2 v_pos;void main() {float t=texture(u_image,v_pos).r;vec4 color=texture(u_color_ramp,vec2(t,0.5));glFragColor=color*u_opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(0.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,"in vec2 a_pos;out vec2 v_pos;void main() {gl_Position=vec4(a_pos,0,1);v_pos=a_pos*0.5+0.5;}"),collisionBox:oi("in float v_placed;in float v_notUsed;void main() {vec4 red =vec4(1.0,0.0,0.0,1.0);vec4 blue=vec4(0.0,0.0,1.0,0.5);glFragColor =mix(red,blue,step(0.5,v_placed))*0.5;glFragColor*=mix(1.0,0.1,step(0.5,v_notUsed));}",`#include "_prelude_terrain.vertex.glsl"
in vec3 a_pos;in vec2 a_anchor_pos;in vec2 a_extrude;in vec2 a_placed;in vec2 a_shift;in vec2 a_elevation_from_sea;in float a_size_scale;in vec2 a_padding;in float a_auto_z_offset;uniform mat4 u_matrix;uniform vec2 u_extrude_scale;uniform float u_camera_to_center_distance;out float v_placed;out float v_notUsed;void main() {float feature_elevation=a_elevation_from_sea.x+a_auto_z_offset;float terrain_elevation=(a_elevation_from_sea.y==1.0 ? 0.0 : elevation(a_anchor_pos));vec4 projectedPoint=u_matrix*vec4(a_pos+elevationVector(a_anchor_pos)*(feature_elevation+terrain_elevation),1);highp float camera_to_anchor_distance=projectedPoint.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,1.5);gl_Position=projectedPoint;gl_Position.xy+=(a_extrude*a_size_scale+a_shift+a_padding)*u_extrude_scale*gl_Position.w*collision_perspective_ratio;v_placed=a_placed.x;v_notUsed=a_placed.y;}`),collisionCircle:oi("in float v_radius;in vec2 v_extrude;in float v_perspective_ratio;in float v_collision;void main() {float alpha=0.5*min(v_perspective_ratio,1.0);float stroke_radius=0.9*max(v_perspective_ratio,1.0);float distance_to_center=length(v_extrude);float distance_to_edge=abs(distance_to_center-v_radius);float opacity_t=smoothstep(-stroke_radius,0.0,-distance_to_edge);vec4 color=mix(vec4(0.0,0.0,1.0,0.5),vec4(1.0,0.0,0.0,1.0),v_collision);glFragColor=color*alpha*opacity_t;}",`in vec2 a_pos_2f;in float a_radius;in vec2 a_flags;uniform mat4 u_matrix;uniform mat4 u_inv_matrix;uniform vec2 u_viewport_size;uniform float u_camera_to_center_distance;out float v_radius;out vec2 v_extrude;out float v_perspective_ratio;out float v_collision;vec3 toTilePosition(vec2 screenPos) {vec4 rayStart=u_inv_matrix*vec4(screenPos,-1.0,1.0);vec4 rayEnd  =u_inv_matrix*vec4(screenPos, 1.0,1.0);rayStart.xyz/=rayStart.w;rayEnd.xyz  /=rayEnd.w;highp float t=(0.0-rayStart.z)/(rayEnd.z-rayStart.z);return mix(rayStart.xyz,rayEnd.xyz,t);}void main() {vec2 quadCenterPos=a_pos_2f;float radius=a_radius;float collision=a_flags.x;float vertexIdx=a_flags.y;vec2 quadVertexOffset=vec2(
mix(-1.0,1.0,float(vertexIdx >=2.0)),mix(-1.0,1.0,float(vertexIdx >=1.0 && vertexIdx <=2.0)));vec2 quadVertexExtent=quadVertexOffset*radius;vec3 tilePos=toTilePosition(quadCenterPos);vec4 clipPos=u_matrix*vec4(tilePos,1.0);highp float camera_to_anchor_distance=clipPos.w;highp float collision_perspective_ratio=clamp(
0.5+0.5*(u_camera_to_center_distance/camera_to_anchor_distance),0.0,4.0);float padding_factor=1.2;v_radius=radius;v_extrude=quadVertexExtent*padding_factor;v_perspective_ratio=collision_perspective_ratio;v_collision=collision;gl_Position=vec4(clipPos.xyz/clipPos.w,1.0)+vec4(quadVertexExtent*padding_factor/u_viewport_size*2.0,0.0,0.0);}`),debug:oi("uniform highp vec4 u_color;uniform sampler2D u_overlay;in vec2 v_uv;void main() {vec4 overlay_color=texture(u_overlay,v_uv);glFragColor=mix(u_color,overlay_color,overlay_color.a);}",`#include "_prelude_terrain.vertex.glsl"
in vec2 a_pos;
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;
#endif
out vec2 v_uv;uniform mat4 u_matrix;uniform float u_overlay_scale;void main() {float h=elevation(a_pos);v_uv=a_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
gl_Position=u_matrix*vec4(a_pos_3+elevationVector(a_pos)*h,1);
#else
gl_Position=u_matrix*vec4(a_pos*u_overlay_scale,h,1);
#endif
}`),fill:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
vec4 out_color=color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=opacity;
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=z_offset;
#endif
}`),fillOutline:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
float dist=length(v_pos-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=outline_color;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
uniform mat4 u_matrix;uniform vec2 u_world;out highp vec2 v_pos;
#pragma mapbox: define highp vec4 outline_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 outline_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize highp float z_offset
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillOutlinePattern:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
in highp vec2 v_pos;in highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);float dist=length(v_pos_world-gl_FragCoord.xy);float alpha=1.0-smoothstep(0.0,1.0,dist);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*(alpha*opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_world;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;out highp vec2 v_pos_world;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);v_pos_world=(gl_Position.xy/gl_Position.w+1.0)/2.0*u_world;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillPattern:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;in highp vec2 v_pos;uniform float u_emissive_strength;
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
glFragColor=out_color*opacity;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_tile_units_to_pixels;in vec2 a_pos;
#ifdef ELEVATED_ROADS
in float a_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
out highp vec2 v_pos;
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp vec4 pattern
#pragma mapbox: define lowp float pixel_ratio
#pragma mapbox: define highp float z_offset
void main() {
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize lowp float pixel_ratio
#pragma mapbox: initialize highp float z_offset
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;
#ifdef ELEVATED_ROADS
z_offset+=a_road_z_offset;
#endif
float hidden=float(opacity==0.0);gl_Position=mix(u_matrix*vec4(a_pos,z_offset,1),AWAY,hidden);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,a_pos);
#ifdef RENDER_SHADOWS
vec3 shd_pos0=vec3(a_pos,z_offset);vec3 shd_pos1=vec3(a_pos,z_offset);
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),fillExtrusion:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
in vec4 v_color;in vec4 v_flat;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;
#endif
uniform lowp float u_opacity;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec2 v_ao;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
in vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
in highp vec3 v_normal;
#endif
uniform vec3 u_flood_light_color;uniform highp float u_vertical_scale;uniform float u_flood_light_intensity;uniform vec3 u_ground_shadow_factor;
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
in float v_flood_radius;in float v_has_floodlight;
#endif
in float v_height;
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float emissive_strength
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
vec3 normal=normalize(v_normal);
#endif
float z;vec4 color=v_color;
#ifdef ZERO_ROOF_RADIUS
z=float(normal.z > 0.00001);
#ifdef LIGHTING_3D_MODE
normal=mix(normal,vec3(0.0,0.0,1.0),z);
#else
color=mix(v_color,v_roof_color,z);
#endif
#endif
float h=max(0.0,v_height);float ao_shade=1.0;
#ifdef FAUX_AO
float intensity=u_ao[0];float h_floors=h/(u_ao[1]*u_vertical_scale);float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);ao_shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;
#ifdef ZERO_ROOF_RADIUS
concave*=(1.0-z);
#endif
float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);ao_shade*=mix(1.0,x_shade*x_shade*x_shade,concave);
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
color.rgb*=mix(ao_shade,1.0,v_has_floodlight);
#else
color.rgb*=ao_shade;
#endif
#else
color.rgb*=ao_shade;
#endif
#endif
#ifdef LIGHTING_3D_MODE
float flood_radiance=0.0;
#ifdef FLOOD_LIGHT
flood_radiance=(1.0-min(h/v_flood_radius,1.0))*u_flood_light_intensity*v_has_floodlight;
#endif
#ifdef RENDER_SHADOWS
#ifdef FLOOD_LIGHT
float ndotl_unclamped=dot(normal,u_shadow_direction);float ndotl=max(0.0,ndotl_unclamped);float occlusion=ndotl_unclamped < 0.0 ? 1.0 : shadow_occlusion(ndotl,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 litColor=apply_lighting(color.rgb,normal,(1.0-u_shadow_intensity*occlusion)*ndotl);vec3 floodLitColor=compute_flood_lighting(u_flood_light_color*u_opacity,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=mix(litColor,floodLitColor,flood_radiance);
#else
float shadowed_lighting_factor;
#ifdef RENDER_CUTOFF
shadowed_lighting_factor=shadowed_light_factor_normal_opacity(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,v_cutoff_opacity);if (v_cutoff_opacity==0.0) {discard;}
#else
shadowed_lighting_factor=shadowed_light_factor_normal(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);
#endif
color.rgb=apply_lighting(color.rgb,normal,shadowed_lighting_factor);
#endif
#else
color.rgb=apply_lighting(color.rgb,normal);
#ifdef FLOOD_LIGHT
color.rgb=mix(color.rgb,u_flood_light_color*u_opacity,flood_radiance);
#endif
#endif
color.rgb=mix(color.rgb,v_flat.rgb,emissive_strength);color*=u_opacity;
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos,h));
#endif
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,h);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_edge_radius;uniform float u_width_scale;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
uniform highp float u_vertical_scale;out vec4 v_color;out vec4 v_flat;
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
out vec4 v_roof_color;
#endif
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
out highp vec3 v_normal;
#endif
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec2 v_ao;
#endif
#if defined(LIGHTING_3D_MODE) && defined(FLOOD_LIGHT)
out float v_flood_radius;out float v_has_floodlight;
#endif
out float v_height;vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define highp float flood_light_wall_radius
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp float emissive_strength
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize highp float flood_light_wall_radius
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp float emissive_strength
base*=u_vertical_scale;height*=u_vertical_scale;vec4 pos_nx=floor(a_pos_normal_ed*0.5);vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));
#if defined(ZERO_ROOF_RADIUS) || defined(RENDER_SHADOWS) || defined(LIGHTING_3D_MODE)
v_normal=normal;
#endif
base=max(0.0,base);float attr_height=height;height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=0.0;float c_ele=0.0;vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
h=t > 0.0 ? height : base;pos=vec3(pos_nx.xy,h);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*h);vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,pos.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*pos.z;pos=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
float cutoff=1.0;vec3 scaled_pos=pos;
#ifdef RENDER_CUTOFF
vec3 centroid_random=vec3(centroid_pos.xy,centroid_pos.x+centroid_pos.y+1.0);vec3 ground_pos=centroid_pos.x==0.0 ? pos.xyz : (centroid_random/8.0);vec4 ground=u_matrix*vec4(ground_pos.xy,ele,1.0);cutoff=cutoff_opacity(u_cutoff_params,ground.z);if (centroid_pos.y !=0.0 && centroid_pos.x !=0.0) {vec3 g=floor(ground_pos);vec3 mod_=centroid_random-g*8.0;float seed=min(1.0,0.1*(min(3.5,max(mod_.x+mod_.y,0.2*attr_height))*0.35+mod_.z));if (cutoff < 0.8-seed) {cutoff=0.0;}}float cutoff_scale=cutoff;v_cutoff_opacity=cutoff;scaled_pos.z=mix(c_ele,h,cutoff_scale);
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (cutoff==0.0 && centroid_pos.x !=0.0) || (color.a==0.0));
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);scaled_pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;scaled_pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
gl_Position=mix(u_matrix*vec4(scaled_pos,1),AWAY,hidden);h=h-ele;v_height=h;
#ifdef RENDER_SHADOWS
vec3 shd_pos0=pos;vec3 shd_pos1=pos;
#ifdef NORMAL_OFFSET
vec3 offset=shadow_normal_offset(normal);shd_pos0+=offset*shadow_normal_offset_multiplier0();shd_pos1+=offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);
#endif
float NdotL=0.0;float colorvalue=0.0;
#ifndef LIGHTING_3D_MODE
colorvalue=color.r*0.2126+color.g*0.7152+color.b*0.0722;vec4 ambientlight=vec4(0.03,0.03,0.03,1.0);color+=ambientlight;NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),NdotL);if (normal.y !=0.0) {float r=0.84;r=mix(0.7,0.98,1.0-u_lightintensity);NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#endif
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec2(mix(concave,-concave,start),y_ground);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
#ifdef FLOOD_LIGHT
float is_wall=1.0-float(t > 0.0 && top_up_ny.y > 0.0);v_has_floodlight=float(flood_light_wall_radius > 0.0 && is_wall > 0.0);v_flood_radius=flood_light_wall_radius*u_vertical_scale;
#endif
v_color=vec4(color.rgb,1.0);float ndotl=calculate_NdotL(normal);v_flat.rgb=sRGBToLinear(color.rgb);v_flat.rgb=v_flat.rgb*(ndotl+(1.0-min(ndotl*57.29,1.0))*emissive_strength);v_flat=vec4(linearTosRGB(v_flat.rgb),1.0);
#else
v_color=vec4(0.0,0.0,0.0,1.0);v_color.rgb+=clamp(color.rgb*NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_color*=u_opacity;
#endif
#if defined(ZERO_ROOF_RADIUS) && !defined(LIGHTING_3D_MODE)
float roofNdotL=clamp(u_lightpos.z,0.0,1.0);roofNdotL=mix((1.0-u_lightintensity),max((1.0-colorvalue+u_lightintensity),1.0),roofNdotL);v_roof_color=vec4(0.0,0.0,0.0,1.0);v_roof_color.rgb+=clamp(color.rgb*roofNdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_roof_color*=u_opacity;
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
}`),fillExtrusionDepth:oi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_edge_radius;uniform float u_width_scale;uniform float u_vertical_scale;
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp float line_width
#pragma mapbox: define highp vec4 color
out highp float v_depth;void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp float line_width
#pragma mapbox: initialize highp vec4 color
base*=u_vertical_scale;height*=u_vertical_scale;vec3 pos_nx=floor(a_pos_normal_ed.xyz*0.5);mediump vec3 top_up_ny=a_pos_normal_ed.xyz-2.0*pos_nx;base=max(0.0,base);height=max(0.0,top_up_ny.y==0.0 && top_up_ny.x==1.0 ? height-u_edge_radius : height);float t=top_up_ny.x;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
vec3 pos;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;float ele=elevation(pos_nx.xy);float c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);float h=t > 0.0 ? max(h_base,h_height) : h_base;pos=vec3(pos_nx.xy,h);
#else
pos=vec3(pos_nx.xy,t > 0.0 ? height : base);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);pos.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;pos.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(pos,1),AWAY,hidden);v_depth=gl_Position.z/gl_Position.w;}`),fillExtrusionPattern:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform vec2 u_texsize;uniform sampler2D u_image;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;in vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
in vec3 v_normal;
#endif
in highp vec2 v_pos;in vec4 v_lighting;uniform lowp float u_opacity;
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;highp vec2 imagecoord=mod(v_pos,1.0);highp vec2 pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,imagecoord);highp vec2 lod_pos=mix(pattern_tl/u_texsize,pattern_br/u_texsize,v_pos);vec4 out_color=textureLodCustom(u_image,pos,lod_pos);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting(out_color,normalize(v_normal))*u_opacity;
#else
out_color=out_color*v_lighting;
#endif
#ifdef FAUX_AO
float intensity=u_ao[0];float h=max(0.0,v_ao.z);float h_floors=h/u_ao[1];float y_shade=1.0-0.9*intensity*min(v_ao.y,1.0);float shade=(1.0-0.08*intensity)*(y_shade+(1.0-y_shade)*(1.0-pow(1.0-min(h_floors/16.0,1.0),16.0)))+0.08*intensity*min(h_floors/160.0,1.0);float concave=v_ao.x*v_ao.x;float x_shade=mix(1.0,mix(0.6,0.75,min(h_floors/30.0,1.0)),intensity)+0.1*intensity*min(h,1.0);shade*=mix(1.0,x_shade*x_shade*x_shade,concave);out_color.rgb=out_color.rgb*shade;
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,height);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#include "_prelude_lighting.glsl"
uniform mat4 u_matrix;uniform vec2 u_pixel_coord_upper;uniform vec2 u_pixel_coord_lower;uniform float u_height_factor;uniform float u_tile_units_to_pixels;uniform float u_vertical_gradient;uniform lowp float u_opacity;uniform float u_width_scale;uniform vec3 u_lightcolor;uniform lowp vec3 u_lightpos;uniform lowp float u_lightintensity;in vec4 a_pos_normal_ed;in vec2 a_centroid_pos;
#ifdef RENDER_WALL_MODE
in vec3 a_join_normal_inside;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_pos_3;in vec3 a_pos_normal_3;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_tile_id;uniform float u_zoom_transition;uniform vec3 u_up_dir;uniform float u_height_lift;
#endif
#ifdef TERRAIN
uniform int u_height_type;uniform int u_base_type;
#endif
out highp vec2 v_pos;out vec4 v_lighting;
#ifdef FAUX_AO
uniform lowp vec2 u_ao;out vec3 v_ao;
#endif
#ifdef LIGHTING_3D_MODE
out vec3 v_normal;
#endif
#pragma mapbox: define highp float base
#pragma mapbox: define highp float height
#pragma mapbox: define highp vec4 color
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define highp float pixel_ratio
#pragma mapbox: define highp float line_width
void main() {
#pragma mapbox: initialize highp float base
#pragma mapbox: initialize highp float height
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize highp float pixel_ratio
#pragma mapbox: initialize highp float line_width
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec4 pos_nx=floor(a_pos_normal_ed*0.5);mediump vec4 top_up_ny_start=a_pos_normal_ed-2.0*pos_nx;mediump vec3 top_up_ny=top_up_ny_start.xyz;float x_normal=pos_nx.z/8192.0;vec3 normal=top_up_ny.y==1.0 ? vec3(0.0,0.0,1.0) : normalize(vec3(x_normal,(2.0*top_up_ny.z-1.0)*(1.0-abs(x_normal)),0.0));float edgedistance=a_pos_normal_ed.w;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;base=max(0.0,base);height=max(0.0,height);float t=top_up_ny.x;float z=t > 0.0 ? height : base;vec2 centroid_pos=vec2(0.0);
#if defined(HAS_CENTROID) || defined(TERRAIN)
centroid_pos=a_centroid_pos;
#endif
float ele=0.0;float h=z;vec3 p;float c_ele;
#ifdef TERRAIN
bool is_flat_height=centroid_pos.x !=0.0 && u_height_type==1;bool is_flat_base=centroid_pos.x !=0.0 && u_base_type==1;ele=elevation(pos_nx.xy);c_ele=is_flat_height || is_flat_base ? (centroid_pos.y==0.0 ? elevationFromUint16(centroid_pos.x) : flatElevation(centroid_pos)) : ele;float h_height=is_flat_height ? max(c_ele+height,ele+base+2.0) : ele+height;float h_base=is_flat_base ? max(c_ele+base,ele+base) : ele+(base==0.0 ?-5.0 : base);h=t > 0.0 ? max(h_base,h_height) : h_base;p=vec3(pos_nx.xy,h);
#else
p=vec3(pos_nx.xy,z);
#endif
#ifdef PROJECTION_GLOBE_VIEW
float lift=float((t+base) > 0.0)*u_height_lift;h+=lift;vec3 globe_normal=normalize(mix(a_pos_normal_3/16384.0,u_up_dir,u_zoom_transition));vec3 globe_pos=a_pos_3+globe_normal*(u_tile_up_scale*(p.z+lift));vec3 merc_pos=mercator_tile_position(u_inv_rot_matrix,p.xy,u_tile_id,u_merc_center)+u_up_dir*u_tile_up_scale*p.z;p=mix_globe_mercator(globe_pos,merc_pos,u_zoom_transition);
#endif
#ifdef RENDER_WALL_MODE
vec2 wall_offset=u_width_scale*line_width*(a_join_normal_inside.xy/EXTENT);p.xy+=(1.0-a_join_normal_inside.z)*wall_offset*0.5;p.xy-=a_join_normal_inside.z*wall_offset*0.5;
#endif
float hidden=float((centroid_pos.x==0.0 && centroid_pos.y==1.0) || (color.a==0.0));gl_Position=mix(u_matrix*vec4(p,1),AWAY,hidden);vec2 pos=normal.z==1.0
? pos_nx.xy
: vec2(edgedistance,z*u_height_factor);v_pos=get_pattern_pos(u_pixel_coord_upper,u_pixel_coord_lower,display_size,u_tile_units_to_pixels,pos);v_lighting=vec4(0.0,0.0,0.0,1.0);float NdotL=0.0;
#ifdef LIGHTING_3D_MODE
NdotL=calculate_NdotL(normal);
#else
NdotL=clamp(dot(normal,u_lightpos),0.0,1.0);NdotL=mix((1.0-u_lightintensity),max((0.5+u_lightintensity),1.0),NdotL);
#endif
if (normal.y !=0.0) {float r=0.84;
#ifndef LIGHTING_3D_MODE
r=mix(0.7,0.98,1.0-u_lightintensity);
#endif
NdotL*=(
(1.0-u_vertical_gradient)+(u_vertical_gradient*clamp((t+base)*pow(height/150.0,0.5),r,1.0)));}
#ifdef FAUX_AO
float concave=pos_nx.w-floor(pos_nx.w*0.5)*2.0;float start=top_up_ny_start.w;float y_ground=1.0-clamp(t+base,0.0,1.0);float top_height=height;
#ifdef TERRAIN
top_height=mix(max(c_ele+height,ele+base+2.0),ele+height,float(centroid_pos.x==0.0))-ele;y_ground+=y_ground*5.0/max(3.0,top_height);
#endif
v_ao=vec3(mix(concave,-concave,start),y_ground,h-ele);NdotL*=(1.0+0.05*(1.0-top_up_ny.y)*u_ao[0]);
#ifdef PROJECTION_GLOBE_VIEW
top_height+=u_height_lift;
#endif
gl_Position.z-=(0.0000006*(min(top_height,500.)+2.0*min(base,500.0)+60.0*concave+3.0*start))*gl_Position.w;
#endif
#ifdef LIGHTING_3D_MODE
v_normal=normal;
#else
v_lighting.rgb+=clamp(NdotL*u_lightcolor,mix(vec3(0.0),vec3(0.3),1.0-u_lightcolor),vec3(1.0));v_lighting*=u_opacity;
#endif 
#ifdef FOG
v_fog_pos=fog_position(p);
#endif
}`),groundShadow:oi(`#include "_prelude_shadow.fragment.glsl"
precision highp float;uniform vec3 u_ground_shadow_factor;in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#ifdef FOG
in float v_fog_opacity;
#endif
void main() {float light=shadowed_light_factor_plane_bias(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);vec3 shadow=mix(u_ground_shadow_factor,vec3(1.0),light);
#ifdef RENDER_CUTOFF
shadow=mix(vec3(1.0),shadow,cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w));
#endif
#ifdef FOG
shadow=mix(shadow,vec3(1.0),v_fog_opacity);
#endif
#ifdef INDICATOR_CUTOUT
shadow=mix(shadow,vec3(1.0),1.0-applyCutout(vec4(1.0),0.0).r);
#endif
glFragColor=vec4(shadow,1.0);}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;in vec2 a_pos;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;
#ifdef FOG
out float v_fog_opacity;
#endif
void main() {gl_Position=u_matrix*vec4(a_pos,0.0,1.0);v_pos_light_view_0=u_light_matrix_0*vec4(a_pos,0.0,1.0);v_pos_light_view_1=u_light_matrix_1*vec4(a_pos,0.0,1.0);
#ifdef FOG
v_fog_pos=fog_position(a_pos);v_fog_opacity=fog(v_fog_pos);
#endif
}`),fillExtrusionGroundEffect:oi(`uniform highp float u_ao_pass;uniform highp float u_opacity;uniform highp float u_flood_light_intensity;uniform highp vec3 u_flood_light_color;uniform highp float u_attenuation;uniform sampler2D u_fb;uniform float u_fb_size;
#ifdef SDF_SUBPASS
in highp vec2 v_pos;in highp vec4 v_line_segment;in highp float v_flood_light_radius_tile;in highp vec2 v_ao;float line_df(highp vec2 a,highp vec2 b,highp vec2 p) {highp vec2 ba=b-a;highp vec2 pa=p-a;highp float r=clamp(dot(pa,ba)/dot(ba,ba),0.0,1.0);return length(pa-r*ba);}
#ifdef FOG
in highp float v_fog;
#endif
#endif
void main() {
#ifdef CLEAR_SUBPASS
vec4 color=vec4(1.0);
#ifdef CLEAR_FROM_TEXTURE
color=texture(u_fb,gl_FragCoord.xy/vec2(u_fb_size));
#endif
glFragColor=color;
#else
#ifdef SDF_SUBPASS
highp float d=line_df(v_line_segment.xy,v_line_segment.zw,v_pos);highp float effect_radius=mix(v_flood_light_radius_tile,v_ao.y,u_ao_pass);d/=effect_radius;d=min(d,1.0);d=1.0-pow(1.0-d,u_attenuation);highp float effect_intensity=mix(u_flood_light_intensity,v_ao.x,u_ao_pass);highp float fog=1.0;
#ifdef FOG
fog=v_fog;
#endif
#ifdef RENDER_CUTOFF
fog*=v_cutoff_opacity;
#endif
glFragColor=vec4(vec3(0.0),mix(1.0,d,effect_intensity*u_opacity*fog));
#else
vec4 color=mix(vec4(u_flood_light_color,1.0),vec4(vec3(0.0),1.0),u_ao_pass);
#ifdef OVERDRAW_INSPECTOR
color=vec4(1.0);
#endif
glFragColor=color;
#endif
HANDLE_WIREFRAME_DEBUG;
#endif
}`,`#include "_prelude_fog.vertex.glsl"
in highp vec4 a_pos_end;in highp float a_angular_offset_factor;in highp float a_hidden_by_landmark;
#ifdef SDF_SUBPASS
out highp vec2 v_pos;out highp vec4 v_line_segment;out highp float v_flood_light_radius_tile;out highp vec2 v_ao;
#ifdef FOG
out highp float v_fog;
#endif
#endif
uniform highp float u_flood_light_intensity;uniform highp mat4 u_matrix;uniform highp float u_ao_pass;uniform highp float u_meter_to_tile;uniform highp float u_edge_radius;uniform highp float u_dynamic_offset;uniform highp vec2 u_ao;
#pragma mapbox: define highp float flood_light_ground_radius
const float TANGENT_CUTOFF=4.0;const float NORM=32767.0;void main() {
#pragma mapbox: initialize highp float flood_light_ground_radius
vec2 p=a_pos_end.xy;vec2 q=floor(a_pos_end.zw*0.5);vec2 start_bottom=a_pos_end.zw-q*2.0;float fl_ground_radius=flood_light_ground_radius;fl_ground_radius=abs(flood_light_ground_radius);float direction=flood_light_ground_radius < 0.0 ?-1.0 : 1.0;float flood_radius_tile=fl_ground_radius*u_meter_to_tile;vec2 v=normalize(q-p);float ao_radius=u_ao.y/3.5;float effect_radius=mix(flood_radius_tile,ao_radius,u_ao_pass)+u_edge_radius;float angular_offset_factor=a_angular_offset_factor/NORM*TANGENT_CUTOFF;float angular_offset=direction*angular_offset_factor*effect_radius;float top=1.0-start_bottom.y;float side=(0.5-start_bottom.x)*2.0;vec2 extrusion_parallel=v*side*mix(u_dynamic_offset,angular_offset,top);vec2 perp=vec2(v.y,-v.x);vec2 extrusion_perp=direction*perp*effect_radius*top;vec3 pos=vec3(mix(q,p,start_bottom.x),0.0);pos.xy+=extrusion_parallel+extrusion_perp;
#ifdef SDF_SUBPASS
v_pos=pos.xy;v_line_segment=vec4(p,q)+perp.xyxy*u_edge_radius;v_flood_light_radius_tile=flood_radius_tile;v_ao=vec2(u_ao.x,ao_radius);
#ifdef FOG
v_fog_pos=fog_position(pos);v_fog=1.0-fog(v_fog_pos);
#endif
#endif
float hidden_by_landmark=0.0;
#ifdef HAS_CENTROID
hidden_by_landmark=a_hidden_by_landmark;
#endif
float isFloodlit=float(fl_ground_radius > 0.0 && u_flood_light_intensity > 0.0);float hidden=mix(1.0-isFloodlit,isFloodlit,u_ao_pass);hidden+=hidden_by_landmark;gl_Position=mix(u_matrix*vec4(pos,1.0),AWAY,float(hidden > 0.0));
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
}`),hillshadePrepare:oi(`precision highp float;uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_dimension;uniform float u_zoom;float getElevation(vec2 coord) {return texture(u_image,coord).r/4.0;}void main() {vec2 epsilon=1.0/u_dimension;float a=getElevation(v_pos+vec2(-epsilon.x,-epsilon.y));float b=getElevation(v_pos+vec2(0,-epsilon.y));float c=getElevation(v_pos+vec2(epsilon.x,-epsilon.y));float d=getElevation(v_pos+vec2(-epsilon.x,0));float e=getElevation(v_pos+vec2(epsilon.x,0));float f=getElevation(v_pos+vec2(-epsilon.x,epsilon.y));float g=getElevation(v_pos+vec2(0,epsilon.y));float h=getElevation(v_pos+vec2(epsilon.x,epsilon.y));float exaggerationFactor=u_zoom < 2.0 ? 0.4 : u_zoom < 4.5 ? 0.35 : 0.3;float exaggeration=u_zoom < 15.0 ? (u_zoom-15.0)*exaggerationFactor : 0.0;vec2 deriv=vec2(
(c+e+e+h)-(a+d+d+f),(f+g+g+h)-(a+b+b+c)
)/pow(2.0,exaggeration+(19.2562-u_zoom));glFragColor=clamp(vec4(
deriv.x/2.0+0.5,deriv.y/2.0+0.5,1.0,1.0),0.0,1.0);}`,"uniform mat4 u_matrix;uniform vec2 u_dimension;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);highp vec2 epsilon=1.0/u_dimension;float scale=(u_dimension.x-2.0)/u_dimension.x;v_pos=(a_texture_pos/8192.0)*scale+epsilon;}"),hillshade:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image;in vec2 v_pos;uniform vec2 u_latrange;uniform vec2 u_light;uniform vec4 u_shadow;uniform vec4 u_highlight;uniform vec4 u_accent;uniform float u_emissive_strength;void main() {vec4 pixel=texture(u_image,v_pos);vec2 deriv=((pixel.rg*2.0)-1.0);float scaleFactor=cos(radians((u_latrange[0]-u_latrange[1])*(1.0-v_pos.y)+u_latrange[1]));float slope=atan(1.25*length(deriv)/scaleFactor);float aspect=deriv.x !=0.0 ? atan(deriv.y,-deriv.x) : PI/2.0*(deriv.y > 0.0 ? 1.0 :-1.0);float intensity=u_light.x;float azimuth=u_light.y+PI;float base=1.875-intensity*1.75;float maxValue=0.5*PI;float scaledSlope=intensity !=0.5 ? ((pow(base,slope)-1.0)/(pow(base,maxValue)-1.0))*maxValue : slope;float accent=cos(scaledSlope);vec4 accent_color=(1.0-accent)*u_accent*clamp(intensity*2.0,0.0,1.0);float shade=abs(mod((aspect+azimuth)/PI+0.5,2.0)-1.0);vec4 shade_color=mix(u_shadow,u_highlight,shade)*sin(scaledSlope)*clamp(intensity*2.0,0.0,1.0);glFragColor=accent_color*(1.0-shade_color.a)+shade_color;
#ifdef LIGHTING_3D_MODE
glFragColor=apply_lighting_with_emission_ground(glFragColor,u_emissive_strength);
#endif
#ifdef FOG
glFragColor=fog_dither(fog_apply_premultiplied(glFragColor,v_fog_pos));
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos;void main() {gl_Position=u_matrix*vec4(a_pos,0,1);v_pos=a_texture_pos/8192.0;
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
}`),line:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform lowp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_floor_width_scale;uniform float u_alpha_discard_threshold;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;in vec2 v_width2;in vec2 v_normal;in float v_gamma_scale;in highp vec4 v_uv;
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform sampler2D u_dash_image;in vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform sampler2D u_gradient_image;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
float luminance(vec3 c) {return (c.r+c.r+c.b+c.g+c.g+c.g)*0.1667;}uniform float u_emissive_strength;
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
float linearstep(float edge0,float edge1,float x) {return  clamp((x-edge0)/(edge1-edge0),0.0,1.0);}void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);
#ifdef RENDER_LINE_DASH
float sdfdist=texture(u_dash_image,v_tex).r;float sdfgamma=1.0/(2.0*u_device_pixel_ratio)/dash.z;float scaled_floorwidth=(floorwidth*u_floor_width_scale);alpha*=linearstep(0.5-sdfgamma/scaled_floorwidth,0.5+sdfgamma/scaled_floorwidth,sdfdist);
#endif
highp vec4 out_color;
#ifdef RENDER_LINE_GRADIENT
out_color=texture(u_gradient_image,v_uv.xy);
#else
out_color=color;
#endif
float trim_alpha=1.0;
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);out_color=mix(out_color,u_trim_color,transition_factor);trim_alpha=1.0-transition_factor;}
#endif
if (u_alpha_discard_threshold !=0.0) {if (alpha < u_alpha_discard_threshold) {discard;}}
#ifdef RENDER_LINE_BORDER
float edgeBlur=((border_width*u_width_scale)+1.0/u_device_pixel_ratio);float alpha2=clamp(min(dist-(v_width2.t-edgeBlur),v_width2.s-dist)/edgeBlur,0.0,1.0);if (alpha2 < 1.) {float smoothAlpha=smoothstep(0.6,1.0,alpha2);if (border_color.a==0.0) {float Y=(out_color.a > 0.01) ? luminance(out_color.rgb/out_color.a) : 1.;float adjustment=(Y > 0.) ? 0.5/Y : 0.45;if (out_color.a > 0.25 && Y < 0.25) {vec3 borderColor=(Y > 0.) ? out_color.rgb : vec3(1,1,1)*out_color.a;out_color.rgb=out_color.rgb+borderColor*(adjustment*(1.0-smoothAlpha));} else {out_color.rgb*=(0.6 +0.4*smoothAlpha);}} else {out_color=mix(border_color*trim_alpha,out_color,smoothAlpha);}}
#endif
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
out_color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
out_color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
out_color=fog_dither(fog_apply_premultiplied(out_color,v_fog_pos));
#endif
out_color*=(alpha*opacity);
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define EXTRUDE_SCALE 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS) || defined(VARIABLE_LINE_WIDTH)
in vec2 a_z_offset_width;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
in highp vec4 a_packed;
#endif
#ifdef RENDER_LINE_DASH
in float a_linesofar;
#endif
uniform mat4 u_matrix;uniform mat2 u_pixels_to_tile_units;uniform vec2 u_units_to_pixels;uniform lowp float u_device_pixel_ratio;uniform float u_width_scale;uniform highp float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out float v_gamma_scale;out highp vec4 v_uv;
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_LINE_DASH
uniform vec2 u_texsize;uniform float u_tile_units_to_pixels;out vec2 v_tex;
#endif
#ifdef RENDER_LINE_GRADIENT
uniform float u_image_height;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define highp vec4 color
#pragma mapbox: define lowp float floorwidth
#pragma mapbox: define lowp vec4 dash
#pragma mapbox: define lowp float blur
#pragma mapbox: define lowp float opacity
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define lowp float offset
#pragma mapbox: define mediump float width
#pragma mapbox: define lowp float border_width
#pragma mapbox: define lowp vec4 border_color
void main() {
#pragma mapbox: initialize highp vec4 color
#pragma mapbox: initialize lowp float floorwidth
#pragma mapbox: initialize lowp vec4 dash
#pragma mapbox: initialize lowp float blur
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize lowp float offset
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize lowp float border_width
#pragma mapbox: initialize lowp vec4 border_color
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);mediump vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth;
#ifdef VARIABLE_LINE_WIDTH
halfwidth=(u_width_scale*a_z_offset_width.y)/2.0;
#else
halfwidth=(u_width_scale*width)/2.0;
#endif
offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);mediump vec2 dist=outset*a_extrude*EXTRUDE_SCALE;mediump float u=0.5*a_direction;mediump float t=1.0-abs(u);mediump vec2 offset2=offset*a_extrude*EXTRUDE_SCALE*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#if defined(RENDER_LINE_GRADIENT) || defined(RENDER_LINE_TRIM_OFFSET)
float a_uv_x=a_packed[0];float a_split_index=a_packed[1];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];
#ifdef RENDER_LINE_GRADIENT
highp float texel_height=1.0/u_image_height;highp float half_texel_height=0.5*texel_height;v_uv=vec4(a_uv_x,a_split_index*texel_height-half_texel_height,a_clip_start,a_clip_end);
#else
v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
#endif
#ifdef RENDER_LINE_DASH
float scale=dash.z==0.0 ? 0.0 : u_tile_units_to_pixels/dash.z;float height=dash.y;v_tex=vec2(a_linesofar*scale/(floorwidth*u_floor_width_scale),(-normal.y*height+dash.x+0.5)/u_texsize.y);
#endif
v_width2=vec2(outset,inset);
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),linePattern:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_shadow.fragment.glsl"
uniform highp float u_device_pixel_ratio;uniform highp float u_width_scale;uniform highp float u_alpha_discard_threshold;uniform highp vec2 u_texsize;uniform highp float u_tile_units_to_pixels;uniform highp vec2 u_trim_offset;uniform highp vec2 u_trim_fade_range;uniform lowp vec4 u_trim_color;uniform sampler2D u_image;in vec2 v_normal;in vec2 v_width2;in highp float v_linesofar;in float v_gamma_scale;in float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 v_uv;
#endif
#ifdef ELEVATED_ROADS
in highp float v_road_z_offset;
#endif
#ifdef LINE_JOIN_NONE
in vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform vec3 u_ground_shadow_factor;in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in highp float v_depth;
#endif
uniform float u_emissive_strength;
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
void main() {
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
vec2 pattern_tl=pattern.xy;vec2 pattern_br=pattern.zw;vec2 display_size=(pattern_br-pattern_tl)/pixel_ratio;highp float pattern_size=display_size.x/u_tile_units_to_pixels;float aspect=display_size.y/v_width;float dist=length(v_normal)*v_width2.s;float blur2=(u_width_scale*blur+1.0/u_device_pixel_ratio)*v_gamma_scale;float alpha=clamp(min(dist-(v_width2.t-blur2),v_width2.s-dist)/blur2,0.0,1.0);highp float pattern_x=v_linesofar/pattern_size*aspect;highp float x=mod(pattern_x,1.0);highp float y=0.5*v_normal.y+0.5;vec2 texel_size=1.0/u_texsize;highp vec2 pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(x,y));highp vec2 lod_pos=mix(pattern_tl*texel_size-texel_size,pattern_br*texel_size+texel_size,vec2(pattern_x,y));vec4 color=textureLodCustom(u_image,pos,lod_pos);
#ifdef RENDER_LINE_TRIM_OFFSET
highp float start=v_uv[2];highp float end=v_uv[3];highp float trim_start=u_trim_offset[0];highp float trim_end=u_trim_offset[1];highp float line_progress=(start+(v_uv.x)*(end-start));if (trim_end > trim_start) {highp float start_transition=max(0.0,min(1.0,(line_progress-trim_start)/max(u_trim_fade_range[0],1.0e-9)));highp float end_transition=max(0.0,min(1.0,(trim_end-line_progress)/max(u_trim_fade_range[1],1.0e-9)));highp float transition_factor=min(start_transition,end_transition);color=mix(color,color.a*u_trim_color,transition_factor);}
#endif
#ifdef LINE_JOIN_NONE
highp float pattern_len=pattern_size/aspect;highp float segment_phase=pattern_len-mod(v_linesofar-v_pattern_data.x+pattern_len,pattern_len);highp float visible_start=segment_phase-step(pattern_len*0.5,segment_phase)*pattern_len;highp float visible_end=floor((v_pattern_data.y-segment_phase)/pattern_len)*pattern_len+segment_phase;visible_end+=step(pattern_len*0.5,v_pattern_data.y-visible_end)*pattern_len;if (v_pattern_data.x < visible_start || v_pattern_data.x >=visible_end) {color=vec4(0.0);}
#endif
#ifdef LIGHTING_3D_MODE
color=apply_lighting_with_emission_ground(color,u_emissive_strength);
#ifdef RENDER_SHADOWS
float light=shadowed_light_factor(v_pos_light_view_0,v_pos_light_view_1,v_depth);
#ifdef ELEVATED_ROADS
color.rgb*=mix(v_road_z_offset > 0.0 ? u_ground_shadow_factor : vec3(1.0),vec3(1.0),light);
#else
color.rgb*=mix(u_ground_shadow_factor,vec3(1.0),light);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=(alpha*opacity);if (u_alpha_discard_threshold !=0.0) {if (color.a < u_alpha_discard_threshold) {discard;}}
#ifdef INDICATOR_CUTOUT
color=applyCutout(color,v_z_offset);
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
#define scale 0.015873016
in vec2 a_pos_normal;in vec4 a_data;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
in vec2 a_z_offset_width;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
in highp vec4 a_packed;
#endif
in highp float a_linesofar;
#ifdef LINE_JOIN_NONE
in highp vec3 a_pattern_data;out vec2 v_pattern_data;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform mat4 u_matrix;uniform float u_tile_units_to_pixels;uniform vec2 u_units_to_pixels;uniform mat2 u_pixels_to_tile_units;uniform float u_device_pixel_ratio;uniform float u_width_scale;uniform float u_floor_width_scale;
#ifdef ELEVATED
uniform lowp float u_zbias_factor;uniform lowp float u_tile_to_meter;float sample_elevation(vec2 apos) {
#ifdef ELEVATION_REFERENCE_SEA
return 0.0;
#else
return elevation(apos);
#endif
}
#endif
out vec2 v_normal;out vec2 v_width2;out highp float v_linesofar;out float v_gamma_scale;out float v_width;
#ifdef RENDER_LINE_TRIM_OFFSET
out highp vec4 v_uv;
#endif
#ifdef ELEVATED_ROADS
out highp float v_road_z_offset;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out highp float v_depth;
#endif
#pragma mapbox: define mediump float blur
#pragma mapbox: define mediump float opacity
#pragma mapbox: define mediump float offset
#pragma mapbox: define mediump float gapwidth
#pragma mapbox: define mediump float width
#pragma mapbox: define mediump float floorwidth
#pragma mapbox: define mediump vec4 pattern
#pragma mapbox: define mediump float pixel_ratio
void main() {
#pragma mapbox: initialize mediump float blur
#pragma mapbox: initialize mediump float opacity
#pragma mapbox: initialize mediump float offset
#pragma mapbox: initialize mediump float gapwidth
#pragma mapbox: initialize mediump float width
#pragma mapbox: initialize mediump float floorwidth
#pragma mapbox: initialize mediump vec4 pattern
#pragma mapbox: initialize mediump float pixel_ratio
float a_z_offset;
#if defined(ELEVATED) || defined(ELEVATED_ROADS)
a_z_offset=a_z_offset_width.x;
#endif
float ANTIALIASING=1.0/u_device_pixel_ratio/2.0;vec2 a_extrude=a_data.xy-128.0;float a_direction=mod(a_data.z,4.0)-1.0;vec2 pos=floor(a_pos_normal*0.5);vec2 normal=a_pos_normal-2.0*pos;normal.y=normal.y*2.0-1.0;v_normal=normal;gapwidth=gapwidth/2.0;float halfwidth=(u_width_scale*width)/2.0;offset=-1.0*offset*u_width_scale;float inset=gapwidth+(gapwidth > 0.0 ? ANTIALIASING : 0.0);float outset=gapwidth+halfwidth*(gapwidth > 0.0 ? 2.0 : 1.0)+(halfwidth==0.0 ? 0.0 : ANTIALIASING);vec2 dist=outset*a_extrude*scale;float u=0.5*a_direction;float t=1.0-abs(u);vec2 offset2=offset*a_extrude*scale*normal.y*mat2(t,-u,u,t);float hidden=float(opacity==0.0);vec2 extrude=dist*u_pixels_to_tile_units;vec4 projected_extrude=u_matrix*vec4(extrude,0.0,0.0);vec2 projected_extrude_xy=projected_extrude.xy;
#ifdef ELEVATED_ROADS
v_road_z_offset=a_z_offset;gl_Position=u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,a_z_offset+0.01*step(0.01,a_z_offset),1.0)+projected_extrude;
#else
#ifdef ELEVATED
vec2 offsetTile=offset2*u_pixels_to_tile_units;vec2 offset_pos=pos+offsetTile;float ele=0.0;
#ifdef CROSS_SLOPE_VERTICAL
float top=a_pos_normal.y-2.0*floor(a_pos_normal.y*0.5);float line_height=2.0*u_tile_to_meter*outset*top*u_pixels_to_tile_units[1][1]+a_z_offset;ele=sample_elevation(offset_pos)+line_height;projected_extrude=vec4(0);
#else
#ifdef CROSS_SLOPE_HORIZONTAL
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,max(ele1,ele2));ele=ele_max+a_z_offset;
#else
float ele0=sample_elevation(offset_pos);float ele1=max(sample_elevation(offset_pos+extrude),sample_elevation(offset_pos+extrude/2.0));float ele2=max(sample_elevation(offset_pos-extrude),sample_elevation(offset_pos-extrude/2.0));float ele_max=max(ele0,0.5*(ele1+ele2));ele=ele_max-ele0+ele1+a_z_offset;
#endif
#endif
gl_Position=u_matrix*vec4(offset_pos,ele,1.0)+projected_extrude;float z=clamp(gl_Position.z/gl_Position.w,0.5,1.0);float zbias=max(0.00005,(pow(z,0.8)-z)*u_zbias_factor*u_exaggeration);gl_Position.z-=(gl_Position.w*zbias);gl_Position=mix(gl_Position,AWAY,hidden);
#else
gl_Position=mix(u_matrix*vec4(pos+offset2*u_pixels_to_tile_units,0.0,1.0)+projected_extrude,AWAY,hidden);
#endif
#endif
#ifdef ELEVATED_ROADS
#ifdef RENDER_SHADOWS
vec3 shd_pos=vec3(pos+(offset2+dist)*u_pixels_to_tile_units,a_z_offset);vec3 shd_pos0=shd_pos;vec3 shd_pos1=shd_pos;
#ifdef NORMAL_OFFSET
vec3 shd_pos_offset=shadow_normal_offset(vec3(0.0,0.0,1.0));shd_pos0+=shd_pos_offset*shadow_normal_offset_multiplier0();shd_pos1+=shd_pos_offset*shadow_normal_offset_multiplier1();
#endif
v_pos_light_view_0=u_light_matrix_0*vec4(shd_pos0,1);v_pos_light_view_1=u_light_matrix_1*vec4(shd_pos1,1);v_depth=gl_Position.w;
#endif
#endif
#ifndef RENDER_TO_TEXTURE
float extrude_length_without_perspective=length(dist);float extrude_length_with_perspective=length(projected_extrude_xy/gl_Position.w*u_units_to_pixels);v_gamma_scale=mix(extrude_length_without_perspective/extrude_length_with_perspective,1.0,step(0.01,blur));
#else
v_gamma_scale=1.0;
#endif
#ifdef RENDER_LINE_TRIM_OFFSET
float a_uv_x=a_packed[0];highp float a_clip_start=a_packed[2];highp float a_clip_end=a_packed[3];v_uv=vec4(a_uv_x,0.0,a_clip_start,a_clip_end);
#endif
v_linesofar=a_linesofar;v_width2=vec2(outset,inset);v_width=(floorwidth*u_floor_width_scale);
#ifdef LINE_JOIN_NONE
v_width=(floorwidth*u_floor_width_scale)+ANTIALIASING;mediump float pixels_to_tile_units=1.0/u_tile_units_to_pixels;mediump float pixel_ratio_inverse=1.0/pixel_ratio;mediump float aspect=v_width/((pattern.w-pattern.y)*pixel_ratio_inverse);highp float subt_multiple=(pattern.z-pattern.x)*pixel_ratio_inverse*pixels_to_tile_units*aspect*32.0;highp float subt=floor(a_pattern_data.z/subt_multiple)*subt_multiple;float offset_sign=(fract(a_pattern_data.x)-0.5)*4.0;float line_progress_offset=offset_sign*v_width*0.5*pixels_to_tile_units;v_linesofar=(a_pattern_data.z-subt)+a_linesofar+line_progress_offset;v_pattern_data=vec2(a_pattern_data.x+line_progress_offset,a_pattern_data.y);
#endif
#ifdef FOG
v_fog_pos=fog_position(pos);
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=a_z_offset;
#endif
}`),raster:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
#include "_prelude_raster_array.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;uniform highp float u_zoom_transition;in vec2 v_pos0;in vec2 v_pos1;in float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
in float v_split_fade;
#endif
uniform float u_brightness_low;uniform float u_brightness_high;uniform float u_saturation_factor;uniform float u_contrast_factor;uniform vec3 u_spin_weights;uniform float u_emissive_strength;
#ifndef RASTER_ARRAY
uniform highp sampler2D u_image0;uniform sampler2D u_image1;
#endif
#ifdef RASTER_COLOR
uniform sampler2D u_color_ramp;uniform highp vec4 u_colorization_mix;uniform highp float u_colorization_offset;uniform vec2 u_texture_res;
#endif
void main() {vec4 color0,color1,color;vec2 value;
#ifdef RASTER_COLOR
#ifdef RASTER_ARRAY
#ifdef RASTER_ARRAY_LINEAR
value=mix(
raTexture2D_image0_linear(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_linear(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#else
value=mix(
raTexture2D_image0_nearest(v_pos0,u_texture_res,u_colorization_mix,u_colorization_offset),raTexture2D_image1_nearest(v_pos1,u_texture_res,u_colorization_mix,u_colorization_offset),u_fade_t
);
#endif
if (value.y > 0.0) value.x/=value.y;
#else
color=mix(texture(u_image0,v_pos0),texture(u_image1,v_pos1),u_fade_t);value=vec2(u_colorization_offset+dot(color.rgb,u_colorization_mix.rgb),color.a);
#endif
color=texture(u_color_ramp,vec2(value.x,0.5));if (color.a > 0.0) color.rgb/=color.a;color.a*=value.y;
#else
color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);
#endif
color.a*=u_opacity;
#ifdef GLOBE_POLES
color.a*=1.0-smoothstep(0.0,0.05,u_zoom_transition);
#endif
vec3 rgb=color.rgb;rgb=vec3(
dot(rgb,u_spin_weights.xyz),dot(rgb,u_spin_weights.zxy),dot(rgb,u_spin_weights.yzx));float average=(color.r+color.g+color.b)/3.0;rgb+=(average-rgb)*u_saturation_factor;rgb=(rgb-0.5)*u_contrast_factor+0.5;vec3 u_high_vec=vec3(u_brightness_low,u_brightness_low,u_brightness_low);vec3 u_low_vec=vec3(u_brightness_high,u_brightness_high,u_brightness_high);vec3 out_color=mix(u_high_vec,u_low_vec,rgb);
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),u_emissive_strength).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef PROJECTION_GLOBE_VIEW
glFragColor*=mix(1.0,1.0-smoothstep(0.0,0.05,u_zoom_transition),smoothstep(0.8,0.9,v_split_fade));
#endif
#ifdef RENDER_CUTOFF
glFragColor=glFragColor*cutoff_opacity(u_cutoff_params,v_depth);
#endif
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform vec2 u_perspective_transform;uniform vec2 u_texture_offset;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;in vec2 a_texture_pos;
#endif
out vec2 v_pos0;out vec2 v_pos1;out float v_depth;
#ifdef PROJECTION_GLOBE_VIEW
out float v_split_fade;
#endif
void main() {vec2 uv;
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;gl_Position=u_matrix*u_globe_matrix*vec4(globe_pos   ,1.0);uv=a_uv;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(a_globe_pos,1.0)).xyz);
#endif
#else
float w=1.0+dot(a_texture_pos,u_perspective_transform);uv=a_texture_pos/8192.0;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);    
v_split_fade=0.0;if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;float opposite_merc_center=mod(u_merc_center.x+0.5,1.0);float dist_from_poles=(abs(mercatorY-0.5)*2.0);float range=0.1;v_split_fade=abs(opposite_merc_center-mercatorX);v_split_fade=clamp(1.0-v_split_fade,0.0,1.0);v_split_fade=max(smoothstep(1.0-range,1.0,dist_from_poles),max(smoothstep(1.0-range,1.0,v_split_fade),smoothstep(1.0-range,1.0,1.0-v_split_fade)));}float tiles=u_grid_matrix[0][2];if (tiles > 0.0) {float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvY=mercatorY*tiles-idy;float uvX=mercatorX*tiles-idx;uv=vec2(uvX,uvY);}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;v_pos0=u_texture_offset.x+u_texture_offset.y*v_pos0;v_pos1=u_texture_offset.x+u_texture_offset.y*v_pos1;
#ifdef RENDER_CUTOFF
v_depth=gl_Position.z;
#endif
}`),rasterParticle:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_fade_t;uniform float u_opacity;uniform highp float u_raster_elevation;in vec2 v_pos0;in vec2 v_pos1;uniform sampler2D u_image0;uniform sampler2D u_image1;void main() {vec4 color0,color1,color;color0=texture(u_image0,v_pos0);color1=texture(u_image1,v_pos1);if (color0.a > 0.0) color0.rgb/=color0.a;if (color1.a > 0.0) color1.rgb/=color1.a;color=mix(color0,color1,u_fade_t);color.a*=u_opacity;vec3 out_color=color.rgb;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(vec4(out_color,1.0),0.0).rgb;
#endif
#ifdef FOG
highp float fog_limit_high_meters=1000000.0;highp float fog_limit_low_meters=600000.0;float fog_limit=1.0-smoothstep(fog_limit_low_meters,fog_limit_high_meters,u_raster_elevation);out_color=fog_dither(fog_apply(out_color,v_fog_pos,fog_limit));
#endif
glFragColor=vec4(out_color*color.a,color.a);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
uniform mat4 u_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform mat3 u_grid_matrix;uniform vec2 u_tl_parent;uniform float u_scale_parent;uniform float u_raster_elevation;uniform float u_zoom_transition;uniform vec2 u_merc_center;
#define GLOBE_UPSCALE GLOBE_RADIUS/6371008.8
in vec2 a_pos;in vec2 a_texture_pos;out vec2 v_pos0;out vec2 v_pos1;void main() {float w=1.0;vec2 uv;
#ifdef PROJECTION_GLOBE_VIEW
vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float mercatorX=mercatorXfromLng(latLng[1]);float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];float uvX=mercatorX*tiles-idx;float uvY=mercatorY*tiles-idy;uv=vec2(uvX,uvY);vec3 globe_pos=latLngToECEF(latLng.xy);globe_pos+=normalize(globe_pos)*u_raster_elevation*GLOBE_UPSCALE;vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {vec2 merc_pos=vec2(mercatorX,mercatorY);merc_world_pos=vec4(merc_pos,u_raster_elevation,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition)*w,w);gl_Position=u_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
#else
uv=a_texture_pos/8192.0;gl_Position=u_matrix*vec4(a_pos*w,u_raster_elevation*w,w);
#ifdef FOG
v_fog_pos=fog_position(a_pos);
#endif
#endif
v_pos0=uv;v_pos1=(v_pos0*u_scale_parent)+u_tl_parent;}`),rasterParticleDraw:oi("uniform sampler2D u_color_ramp;in float v_particle_speed;void main() {glFragColor=texture(u_color_ramp,vec2(v_particle_speed,0.5));}",`#include "_prelude_raster_particle.glsl"
in float a_index;uniform sampler2D u_particle_texture;uniform float u_particle_texture_side_len;uniform vec2 u_tile_offset;out float v_particle_speed;void main() {ivec2 pixel_coord=ivec2(
mod(a_index,u_particle_texture_side_len),a_index/u_particle_texture_side_len);vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);vec2 pos=unpack_pos_from_rgba(pixel)+u_tile_offset;vec2 tex_coord=fract(pos);vec2 velocity=lookup_velocity(tex_coord);if (velocity==INVALID_VELOCITY) {gl_Position=AWAY;v_particle_speed=0.0;} else {gl_Position=vec4(2.0*pos-1.0,0,1);v_particle_speed=length(velocity);}gl_PointSize=1.0;}`),rasterParticleTexture:oi("uniform sampler2D u_texture;uniform float u_opacity;in vec2 v_tex_pos;void main() {vec4 color=texture(u_texture,v_tex_pos);glFragColor=vec4(floor(255.0*color*u_opacity)/255.0);}","in vec2 a_pos;out vec2 v_tex_pos;void main() {vec2 uv=0.5*a_pos+vec2(0.5);v_tex_pos=uv;gl_Position=vec4(a_pos,0.0,1.0);}"),rasterParticleUpdate:oi(`#include "_prelude_raster_particle.glsl"
uniform sampler2D u_particle_texture;uniform mediump float u_particle_texture_side_len;uniform mediump float u_speed_factor;uniform highp float u_reset_rate;uniform highp float u_rand_seed;in highp vec2 v_tex_coord;vec2 linearstep(vec2 edge0,vec2 edge1,vec2 x) {return  clamp((x-edge0)/(edge1-edge0),vec2(0),vec2(1));}const highp vec3 rand_constants=vec3(12.9898,78.233,4375.85453);highp float rand(const highp vec2 co) {highp float t=dot(rand_constants.xy,co);return fract(sin(t)*(rand_constants.z+t));}void main() {ivec2 pixel_coord=ivec2(v_tex_coord*u_particle_texture_side_len);highp vec4 pixel=texelFetch(u_particle_texture,pixel_coord,0);highp vec2 pos=unpack_pos_from_rgba(pixel);highp vec2 velocity=lookup_velocity(clamp(pos,0.0,1.0));highp vec2 dp=velocity==INVALID_VELOCITY ? vec2(0) : velocity*u_speed_factor;pos=pos+dp;highp vec2 seed=(pos+v_tex_coord)*u_rand_seed;highp vec2 random_pos=vec2(rand(seed+1.3),rand(seed+2.1));highp vec2 persist_rate=pow(
linearstep(vec2(-u_particle_pos_offset),vec2(0),pos)*linearstep(vec2(1.0+u_particle_pos_offset),vec2(1),pos),vec2(4)
);highp vec2 per_frame_persist=pow(persist_rate,abs(dp)/u_particle_pos_offset);highp float drop_rate=1.0-per_frame_persist.x*per_frame_persist.y;drop_rate=any(greaterThanEqual(abs(pos-0.5),vec2(0.5+u_particle_pos_offset))) ? 1.0 : drop_rate;highp float drop=step(1.0-drop_rate-u_reset_rate,rand(seed));highp vec2 next_pos=mix(pos,random_pos,drop);glFragColor=pack_pos_to_rgba(next_pos);}`,"in vec2 a_pos;out vec2 v_tex_coord;void main() {v_tex_coord=0.5*(a_pos+vec2(1.0));gl_Position=vec4(a_pos,0.0,1.0);}"),symbol:oi(`#include "_prelude_lighting.glsl"
#define SDF_PX 8.0
#define SDF 1.0
#define ICON 0.0
uniform sampler2D u_texture;uniform sampler2D u_texture_icon;uniform highp float u_gamma_scale;uniform lowp float u_device_pixel_ratio;uniform bool u_is_text;uniform bool u_is_halo;uniform lowp float u_scale_factor;
#ifdef ICON_TRANSITION
uniform float u_icon_transition;
#endif
#ifdef COLOR_ADJUSTMENT
uniform mat4 u_color_adj_mat;
#endif
#ifdef INDICATOR_CUTOUT
in highp float v_z_offset;
#endif
in vec2 v_tex_a;
#ifdef ICON_TRANSITION
in vec2 v_tex_b;
#endif
in float v_draw_halo;in vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
in float is_sdf;in vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
vec4 out_color;float fade_opacity=v_gamma_scale_size_fade_opacity[2];
#ifdef RENDER_TEXT_AND_SYMBOL
if (is_sdf==ICON) {vec2 tex_icon=v_tex_a_icon;lowp float alpha=opacity*fade_opacity;glFragColor=texture(u_texture_icon,tex_icon)*alpha;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
return;}
#endif
#ifdef RENDER_SDF
float EDGE_GAMMA=0.105/u_device_pixel_ratio;float gamma_scale=v_gamma_scale_size_fade_opacity.x;float size=v_gamma_scale_size_fade_opacity.y;float fontScale=u_is_text ? size/24.0 : size;out_color=fill_color;highp float gamma=EDGE_GAMMA/(fontScale*u_gamma_scale);lowp float buff=(256.0-64.0)/256.0;bool draw_halo=v_draw_halo > 0.0;if (draw_halo) {out_color=halo_color;gamma=(halo_blur*u_scale_factor*1.19/SDF_PX+EDGE_GAMMA)/(fontScale*u_gamma_scale);buff=(6.0-halo_width*u_scale_factor/fontScale)/SDF_PX;}lowp float dist=texture(u_texture,v_tex_a).r;highp float gamma_scaled=gamma*gamma_scale;highp float alpha=smoothstep(buff-gamma_scaled,buff+gamma_scaled,dist);out_color*=alpha;
#else
#ifdef ICON_TRANSITION
vec4 a=texture(u_texture,v_tex_a)*(1.0-u_icon_transition);vec4 b=texture(u_texture,v_tex_b)*u_icon_transition;out_color=(a+b);
#else
out_color=texture(u_texture,v_tex_a);
#endif
#ifdef COLOR_ADJUSTMENT
out_color=u_color_adj_mat*out_color;
#endif
#endif
out_color*=opacity*fade_opacity;
#ifdef LIGHTING_3D_MODE
out_color=apply_lighting_with_emission_ground(out_color,emissive_strength);
#endif
#ifdef INDICATOR_CUTOUT
out_color=applyCutout(out_color,v_z_offset);
#endif
glFragColor=out_color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_terrain.vertex.glsl"
in vec4 a_pos_offset;in vec4 a_tex_size;in vec4 a_pixeloffset;in vec4 a_projected_pos;in float a_fade_opacity;
#ifdef Z_OFFSET
in float a_auto_z_offset;
#endif
#ifdef PROJECTION_GLOBE_VIEW
in vec3 a_globe_anchor;in vec3 a_globe_normal;
#endif
#ifdef ICON_TRANSITION
in vec2 a_texb;
#endif
#ifdef OCCLUSION_QUERIES
in float a_occlusion_query_opacity;
#endif
#ifdef INDICATOR_CUTOUT
out highp float v_z_offset;
#endif
uniform bool u_is_size_zoom_constant;uniform bool u_is_size_feature_constant;uniform highp float u_size_t;uniform highp float u_size;uniform mat4 u_matrix;uniform mat4 u_label_plane_matrix;uniform mat4 u_coord_matrix;uniform bool u_is_text;uniform bool u_elevation_from_sea;uniform bool u_pitch_with_map;uniform bool u_rotate_symbol;uniform highp float u_aspect_ratio;uniform highp float u_camera_to_center_distance;uniform float u_fade_change;uniform vec2 u_texsize;uniform vec3 u_up_vector;uniform vec2 u_texsize_icon;uniform bool u_is_halo;
#ifdef PROJECTION_GLOBE_VIEW
uniform vec3 u_tile_id;uniform mat4 u_inv_rot_matrix;uniform vec2 u_merc_center;uniform vec3 u_camera_forward;uniform float u_zoom_transition;uniform vec3 u_ecef_origin;uniform mat4 u_tile_matrix;
#endif
out vec2 v_tex_a;
#ifdef ICON_TRANSITION
out vec2 v_tex_b;
#endif
out float v_draw_halo;out vec3 v_gamma_scale_size_fade_opacity;
#ifdef RENDER_TEXT_AND_SYMBOL
out float is_sdf;out vec2 v_tex_a_icon;
#endif
#pragma mapbox: define highp vec4 fill_color
#pragma mapbox: define highp vec4 halo_color
#pragma mapbox: define lowp float opacity
#pragma mapbox: define lowp float halo_width
#pragma mapbox: define lowp float halo_blur
#pragma mapbox: define lowp float emissive_strength
#pragma mapbox: define lowp float occlusion_opacity
#pragma mapbox: define lowp float z_offset
void main() {
#pragma mapbox: initialize highp vec4 fill_color
#pragma mapbox: initialize highp vec4 halo_color
#pragma mapbox: initialize lowp float opacity
#pragma mapbox: initialize lowp float halo_width
#pragma mapbox: initialize lowp float halo_blur
#pragma mapbox: initialize lowp float emissive_strength
#pragma mapbox: initialize lowp float occlusion_opacity
#pragma mapbox: initialize lowp float z_offset
vec2 a_pos=a_pos_offset.xy;vec2 a_offset=a_pos_offset.zw;vec2 a_tex=a_tex_size.xy;vec2 a_size=a_tex_size.zw;float a_size_min=floor(a_size[0]*0.5);vec2 a_pxoffset=a_pixeloffset.xy;vec2 a_min_font_scale=a_pixeloffset.zw/256.0;highp float segment_angle=-a_projected_pos[3];float size;if (!u_is_size_zoom_constant && !u_is_size_feature_constant) {size=mix(a_size_min,a_size[1],u_size_t)/128.0;} else if (u_is_size_zoom_constant && !u_is_size_feature_constant) {size=a_size_min/128.0;} else {size=u_size;}vec2 tile_anchor=a_pos;float e=u_elevation_from_sea ? z_offset : z_offset+elevation(tile_anchor);
#ifdef Z_OFFSET
e+=a_auto_z_offset;
#endif
vec3 h=elevationVector(tile_anchor)*e;float globe_occlusion_fade;vec3 world_pos;vec3 mercator_pos;vec3 world_pos_globe;
#ifdef PROJECTION_GLOBE_VIEW
mercator_pos=mercator_tile_position(u_inv_rot_matrix,tile_anchor,u_tile_id,u_merc_center);world_pos_globe=a_globe_anchor+h;world_pos=mix_globe_mercator(world_pos_globe,mercator_pos,u_zoom_transition);vec4 ecef_point=u_tile_matrix*vec4(world_pos,1.0);vec3 origin_to_point=ecef_point.xyz-u_ecef_origin;globe_occlusion_fade=dot(origin_to_point,u_camera_forward) >=0.0 ? 0.0 : 1.0;
#else
world_pos=vec3(tile_anchor,0)+h;globe_occlusion_fade=1.0;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1);highp float camera_to_anchor_distance=projected_point.w;highp float distance_ratio=u_pitch_with_map ?
camera_to_anchor_distance/u_camera_to_center_distance :
u_camera_to_center_distance/camera_to_anchor_distance;highp float perspective_ratio=clamp(
0.5+0.5*distance_ratio,0.0,1.5);size*=perspective_ratio;float font_scale=u_is_text ? size/24.0 : size;highp float symbol_rotation=0.0;if (u_rotate_symbol) {vec4 offsetprojected_point;vec2 a;
#ifdef PROJECTION_GLOBE_VIEW
vec3 displacement=vec3(a_globe_normal.z,0,-a_globe_normal.x);offsetprojected_point=u_matrix*vec4(a_globe_anchor+displacement,1);vec4 projected_point_globe=u_matrix*vec4(world_pos_globe,1);a=projected_point_globe.xy/projected_point_globe.w;
#else
offsetprojected_point=u_matrix*vec4(tile_anchor+vec2(1,0),0,1);a=projected_point.xy/projected_point.w;
#endif
vec2 b=offsetprojected_point.xy/offsetprojected_point.w;symbol_rotation=atan((b.y-a.y)/u_aspect_ratio,b.x-a.x);}vec4 projected_pos;
#ifdef PROJECTION_GLOBE_VIEW
vec3 proj_pos=mix_globe_mercator(a_projected_pos.xyz+h,mercator_pos,u_zoom_transition);projected_pos=u_label_plane_matrix*vec4(proj_pos,1.0);
#else
projected_pos=u_label_plane_matrix*vec4(a_projected_pos.xy,h.z,1.0);
#endif
highp float angle_sin=sin(segment_angle+symbol_rotation);highp float angle_cos=cos(segment_angle+symbol_rotation);mat2 rotation_matrix=mat2(angle_cos,-1.0*angle_sin,angle_sin,angle_cos);float z=0.0;vec2 offset=rotation_matrix*(a_offset/32.0*max(a_min_font_scale,font_scale)+a_pxoffset/16.0);
#ifdef TERRAIN
#ifdef PITCH_WITH_MAP_TERRAIN
vec4 tile_pos=u_label_plane_matrix_inv*vec4(a_projected_pos.xy+offset,0.0,1.0);z=elevation(tile_pos.xy);
#endif
#endif
#ifdef Z_OFFSET
z+=u_pitch_with_map ? a_auto_z_offset+(u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#else
z+=u_pitch_with_map ? (u_elevation_from_sea ? z_offset : z_offset) : 0.0;
#endif
float occlusion_fade=globe_occlusion_fade;float projection_transition_fade=1.0;
#if defined(PROJECTED_POS_ON_VIEWPORT) && defined(PROJECTION_GLOBE_VIEW)
projection_transition_fade=1.0-step(EPSILON,u_zoom_transition);
#endif
vec2 fade_opacity=unpack_opacity(a_fade_opacity);float fade_change=fade_opacity[1] > 0.5 ? u_fade_change :-u_fade_change;float interpolated_fade_opacity=max(0.0,min(occlusion_fade,fade_opacity[0]+fade_change));float out_fade_opacity=interpolated_fade_opacity*projection_transition_fade;
#ifdef DEPTH_OCCLUSION
float depth_occlusion=occlusionFadeMultiSample(projected_point);float depth_occlusion_multplier=mix(occlusion_opacity,1.0,depth_occlusion);out_fade_opacity*=depth_occlusion_multplier;
#endif
#ifdef OCCLUSION_QUERIES
float occludedFadeMultiplier=mix(occlusion_opacity,1.0,a_occlusion_query_opacity);out_fade_opacity*=occludedFadeMultiplier;
#endif
float alpha=opacity*out_fade_opacity;float hidden=float(alpha==0.0 || projected_point.w <=0.0 || occlusion_fade==0.0);
#ifdef PROJECTION_GLOBE_VIEW
vec3 xAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,u_up_vector)) : vec3(1,0,0);vec3 yAxis=u_pitch_with_map ? normalize(cross(a_globe_normal,xAxis)) : vec3(0,1,0);gl_Position=mix(u_coord_matrix*vec4(projected_pos.xyz/projected_pos.w+xAxis*offset.x+yAxis*offset.y,1.0),AWAY,hidden);
#else
gl_Position=mix(u_coord_matrix*vec4(projected_pos.xy/projected_pos.w+offset,z,1.0),AWAY,hidden);
#endif
float gamma_scale=gl_Position.w;v_draw_halo=(u_is_halo && float(gl_InstanceID)==0.0) ? 1.0 : 0.0;v_gamma_scale_size_fade_opacity=vec3(gamma_scale,size,out_fade_opacity);v_tex_a=a_tex/u_texsize;
#ifdef RENDER_TEXT_AND_SYMBOL
is_sdf=a_size[0]-2.0*a_size_min;v_tex_a_icon=a_tex/u_texsize_icon;
#endif
#ifdef ICON_TRANSITION
v_tex_b=a_texb/u_texsize;
#endif
#ifdef INDICATOR_CUTOUT
v_z_offset=e;
#endif
}`),terrainRaster:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;in vec2 v_pos0;
#ifdef FOG
in float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
in vec4 v_pos_light_view_0;in vec4 v_pos_light_view_1;
#endif
uniform vec3 u_ground_shadow_factor;void main() {vec4 image_color=texture(u_image0,v_pos0);vec4 color;
#ifdef LIGHTING_3D_MODE
const vec3 normal=vec3(0.0,0.0,1.0);
#ifdef RENDER_SHADOWS
float cutoffOpacity=1.0;
#ifdef RENDER_CUTOFF
cutoffOpacity=cutoff_opacity(u_cutoff_params,1.0/gl_FragCoord.w);
#endif
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
vec3 unlit_base=image_color.rgb*(1.0-image_color.a);vec3 emissive_base=image_color.rgb*image_color.a;float ndotl=u_shadow_direction.z;float occlusion=ndotl < 0.0 ? 1.0 : shadow_occlusion(v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w,0.0);ndotl=max(0.0,ndotl);vec3 lit=apply_lighting(unlit_base,normal,mix(1.0,(1.0-(u_shadow_intensity*occlusion))*ndotl,cutoffOpacity));vec3 emissive=compute_emissive_draped(emissive_base,1.0-u_shadow_intensity,occlusion,u_ground_shadow_factor);color.rgb=lit+emissive;color.a=1.0;
#else
float lighting_factor=shadowed_light_factor_normal_unbiased(normal,v_pos_light_view_0,v_pos_light_view_1,1.0/gl_FragCoord.w);color=apply_lighting(image_color,normal,mix(1.0,lighting_factor,cutoffOpacity));
#endif
#else
float lighting_factor=u_lighting_directional_dir.z;color=apply_lighting(image_color,normal,lighting_factor);
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color.rgb=mix(color.rgb,image_color.rgb,image_color.a);color.a=1.0;
#endif
#endif
#else
color=image_color;
#endif
#ifdef FOG
#ifdef ZERO_EXAGGERATION
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#else
color=fog_dither(fog_apply_from_vert(color,v_fog_opacity));
#endif
#endif
glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;uniform float u_skirt_height;in vec2 a_pos;out vec2 v_pos0;
#ifdef FOG
out float v_fog_opacity;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out vec4 v_pos_light_view_0;out vec4 v_pos_light_view_1;out float v_depth;
#endif
void main() {vec3 decomposedPosAndSkirt=decomposeToPosAndSkirt(a_pos);float skirt=decomposedPosAndSkirt.z;vec2 decodedPos=decomposedPosAndSkirt.xy;float elevation=elevation(decodedPos)-skirt*u_skirt_height;v_pos0=decodedPos/8192.0;gl_Position=u_matrix*vec4(decodedPos,elevation,1.0);
#ifdef FOG
#ifdef ZERO_EXAGGERATION
v_fog_pos=fog_position(decodedPos);
#else
v_fog_opacity=fog(fog_position(vec3(decodedPos,elevation)));
#endif
#endif
#ifdef RENDER_SHADOWS
vec3 pos=vec3(decodedPos,elevation);v_pos_light_view_0=u_light_matrix_0*vec4(pos,1.);v_pos_light_view_1=u_light_matrix_1*vec4(pos,1.);
#endif
}`),terrainDepth:oi("precision highp float;in float v_depth;void main() {glFragColor=pack_depth(v_depth);}",`#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_matrix;in vec2 a_pos;out float v_depth;void main() {float elevation=elevation(a_pos);gl_Position=u_matrix*vec4(a_pos,elevation,1.0);v_depth=gl_Position.z/gl_Position.w;}`),skybox:oi(`#include "_prelude_fog.fragment.glsl"
in lowp vec3 v_uv;uniform lowp samplerCube u_cubemap;uniform lowp float u_opacity;uniform highp float u_temporal_offset;uniform highp vec3 u_sun_direction;float sun_disk(highp vec3 ray_direction,highp vec3 sun_direction) {highp float cos_angle=dot(normalize(ray_direction),sun_direction);const highp float cos_sun_angular_diameter=0.99996192306;const highp float smoothstep_delta=1e-5;return smoothstep(
cos_sun_angular_diameter-smoothstep_delta,cos_sun_angular_diameter+smoothstep_delta,cos_angle);}float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec3 uv=v_uv;const float y_bias=0.015;uv.y+=y_bias;uv.y=pow(abs(uv.y),1.0/5.0);uv.y=map(uv.y,0.0,1.0,-1.0,1.0);vec3 sky_color=texture(u_cubemap,uv).rgb;
#ifdef FOG
sky_color=fog_apply_sky_gradient(v_uv.xzy,sky_color);
#endif
sky_color.rgb=dither(sky_color.rgb,gl_FragCoord.xy+u_temporal_offset);sky_color+=0.1*sun_disk(v_uv,u_sun_direction);glFragColor=vec4(sky_color*u_opacity,u_opacity);
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,nd),skyboxGradient:oi(`#include "_prelude_fog.fragment.glsl"
in highp vec3 v_uv;uniform lowp sampler2D u_color_ramp;uniform highp vec3 u_center_direction;uniform lowp float u_radius;uniform lowp float u_opacity;uniform highp float u_temporal_offset;void main() {float progress=acos(dot(normalize(v_uv),u_center_direction))/u_radius;vec4 color=texture(u_color_ramp,vec2(progress,0.5));
#ifdef FOG
color.rgb=fog_apply_sky_gradient(v_uv.xzy,color.rgb/color.a)*color.a;
#endif
color*=u_opacity;color.rgb=dither(color.rgb,gl_FragCoord.xy+u_temporal_offset);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
}`,nd),skyboxCapture:oi(`
in highp vec3 v_position;uniform highp float u_sun_intensity;uniform highp float u_luminance;uniform lowp vec3 u_sun_direction;uniform highp vec4 u_color_tint_r;uniform highp vec4 u_color_tint_m;precision highp float;
#define BETA_R                  vec3(5.5e-6,13.0e-6,22.4e-6)
#define BETA_M                  vec3(21e-6,21e-6,21e-6)
#define MIE_G                   0.76
#define DENSITY_HEIGHT_SCALE_R  8000.0
#define DENSITY_HEIGHT_SCALE_M  1200.0
#define PLANET_RADIUS           6360e3
#define ATMOSPHERE_RADIUS       6420e3
#define SAMPLE_STEPS            10
#define DENSITY_STEPS           4
float ray_sphere_exit(vec3 orig,vec3 dir,float radius) {float a=dot(dir,dir);float b=2.0*dot(dir,orig);float c=dot(orig,orig)-radius*radius;float d=sqrt(b*b-4.0*a*c);return (-b+d)/(2.0*a);}vec3 extinction(vec2 density) {return exp(-vec3(BETA_R*u_color_tint_r.a*density.x+BETA_M*u_color_tint_m.a*density.y));}vec2 local_density(vec3 point) {float height=max(length(point)-PLANET_RADIUS,0.0);float exp_r=exp(-height/DENSITY_HEIGHT_SCALE_R);float exp_m=exp(-height/DENSITY_HEIGHT_SCALE_M);return vec2(exp_r,exp_m);}float phase_ray(float cos_angle) {return (3.0/(16.0*PI))*(1.0+cos_angle*cos_angle);}float phase_mie(float cos_angle) {return (3.0/(8.0*PI))*((1.0-MIE_G*MIE_G)*(1.0+cos_angle*cos_angle))/((2.0+MIE_G*MIE_G)*pow(1.0+MIE_G*MIE_G-2.0*MIE_G*cos_angle,1.5));}vec2 density_to_atmosphere(vec3 point,vec3 light_dir) {float ray_len=ray_sphere_exit(point,light_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(DENSITY_STEPS);vec2 density_point_to_atmosphere=vec2(0.0);for (int i=0; i < DENSITY_STEPS;++i) {vec3 point_on_ray=point+light_dir*((float(i)+0.5)*step_len);density_point_to_atmosphere+=local_density(point_on_ray)*step_len;;}return density_point_to_atmosphere;}vec3 atmosphere(vec3 ray_dir,vec3 sun_direction,float sun_intensity) {vec2 density_orig_to_point=vec2(0.0);vec3 scatter_r=vec3(0.0);vec3 scatter_m=vec3(0.0);vec3 origin=vec3(0.0,PLANET_RADIUS,0.0);float ray_len=ray_sphere_exit(origin,ray_dir,ATMOSPHERE_RADIUS);float step_len=ray_len/float(SAMPLE_STEPS);for (int i=0; i < SAMPLE_STEPS;++i) {vec3 point_on_ray=origin+ray_dir*((float(i)+0.5)*step_len);vec2 density=local_density(point_on_ray)*step_len;density_orig_to_point+=density;vec2 density_point_to_atmosphere=density_to_atmosphere(point_on_ray,sun_direction);vec2 density_orig_to_atmosphere=density_orig_to_point+density_point_to_atmosphere;vec3 extinction=extinction(density_orig_to_atmosphere);scatter_r+=density.x*extinction;scatter_m+=density.y*extinction;}float cos_angle=dot(ray_dir,sun_direction);float phase_r=phase_ray(cos_angle);float phase_m=phase_mie(cos_angle);vec3 beta_r=BETA_R*u_color_tint_r.rgb*u_color_tint_r.a;vec3 beta_m=BETA_M*u_color_tint_m.rgb*u_color_tint_m.a;return (scatter_r*phase_r*beta_r+scatter_m*phase_m*beta_m)*sun_intensity;}const float A=0.15;const float B=0.50;const float C=0.10;const float D=0.20;const float E=0.02;const float F=0.30;vec3 uncharted2_tonemap(vec3 x) {return ((x*(A*x+C*B)+D*E)/(x*(A*x+B)+D*F))-E/F;}void main() {vec3 ray_direction=v_position;ray_direction.y=pow(ray_direction.y,5.0);const float y_bias=0.015;ray_direction.y+=y_bias;vec3 color=atmosphere(normalize(ray_direction),u_sun_direction,u_sun_intensity);float white_scale=1.0748724675633854;color=uncharted2_tonemap((log2(2.0/pow(u_luminance,4.0)))*color)*white_scale;glFragColor=vec4(color,1.0);}`,"in highp vec3 a_pos_3f;uniform mat3 u_matrix_3f;out highp vec3 v_position;float map(float value,float start,float end,float new_start,float new_end) {return ((value-start)*(new_end-new_start))/(end-start)+new_start;}void main() {vec4 pos=vec4(u_matrix_3f*a_pos_3f,1.0);v_position=pos.xyz;v_position.y*=-1.0;v_position.y=map(v_position.y,-1.0,1.0,0.0,1.0);gl_Position=vec4(a_pos_3f.xy,0.0,1.0);}"),globeRaster:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform sampler2D u_image0;uniform float u_far_z_cutoff;in vec2 v_pos0;
#ifndef FOG
uniform highp vec3 u_frustum_tl;uniform highp vec3 u_frustum_tr;uniform highp vec3 u_frustum_br;uniform highp vec3 u_frustum_bl;uniform highp vec3 u_globe_pos;uniform highp float u_globe_radius;uniform vec2 u_viewport;
#endif
void main() {vec4 color;
#ifdef CUSTOM_ANTIALIASING
vec2 uv=gl_FragCoord.xy/u_viewport;highp vec3 ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,uv.x),mix(u_frustum_bl,u_frustum_br,uv.x),1.0-uv.y);vec3 dir=normalize(ray_dir);vec3 closest_point=dot(u_globe_pos,dir)*dir;float norm_dist_from_center=1.0-length(closest_point-u_globe_pos)/u_globe_radius;const float antialias_pixel=2.0;float antialias_factor=antialias_pixel*fwidth(norm_dist_from_center);float antialias=smoothstep(0.0,antialias_factor,norm_dist_from_center);vec4 raster=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
raster=apply_lighting_with_emission_ground(raster,raster.a);color=vec4(raster.rgb*antialias,antialias);
#else
raster=apply_lighting_ground(raster);color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=vec4(raster.rgb*antialias,raster.a*antialias);
#endif
#else
color=texture(u_image0,v_pos0);
#ifdef LIGHTING_3D_MODE
#ifdef LIGHTING_3D_ALPHA_EMISSIVENESS
color=apply_lighting_with_emission_ground(color,color.a);color.a=1.0;
#else
color=apply_lighting_ground(color);
#endif
#endif
#endif
#ifdef FOG
color=fog_dither(fog_apply_premultiplied(color,v_fog_pos));
#endif
color*=1.0-step(u_far_z_cutoff,1.0/gl_FragCoord.w);glFragColor=color;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_terrain.vertex.glsl"
uniform mat4 u_proj_matrix;uniform mat4 u_normalize_matrix;uniform mat4 u_globe_matrix;uniform mat4 u_merc_matrix;uniform float u_zoom_transition;uniform vec2 u_merc_center;uniform mat3 u_grid_matrix;uniform float u_skirt_height;
#ifdef GLOBE_POLES
in vec3 a_globe_pos;in vec2 a_uv;
#else
in vec2 a_pos;
#endif
out vec2 v_pos0;void main() {
#ifdef GLOBE_POLES
vec3 globe_pos=a_globe_pos;vec2 uv=a_uv;
#else
float tiles=u_grid_matrix[0][2];float idx=u_grid_matrix[1][2];float idy=u_grid_matrix[2][2];vec3 decomposed_pos_and_skirt=decomposeToPosAndSkirt(a_pos);vec3 latLng=u_grid_matrix*vec3(decomposed_pos_and_skirt.xy,1.0);float mercatorY=mercatorYfromLat(latLng[0]);float uvY=mercatorY*tiles-idy;float mercatorX=mercatorXfromLng(latLng[1]);float uvX=mercatorX*tiles-idx;vec3 globe_pos=latLngToECEF(latLng.xy);vec2 merc_pos=vec2(mercatorX,mercatorY);vec2 uv=vec2(uvX,uvY);
#endif
v_pos0=uv;vec2 tile_pos=uv*EXTENT;vec3 globe_derived_up_vector=normalize(globe_pos)*u_tile_up_scale;
#ifdef GLOBE_POLES
vec3 up_vector=globe_derived_up_vector;
#else
vec3 up_vector=elevationVector(tile_pos);
#endif
float height=elevation(tile_pos);globe_pos+=up_vector*height;
#ifndef GLOBE_POLES
globe_pos-=globe_derived_up_vector*u_skirt_height*decomposed_pos_and_skirt.z;
#endif
#ifdef GLOBE_POLES
vec4 interpolated_pos=u_globe_matrix*vec4(globe_pos,1.0);
#else
vec4 globe_world_pos=u_globe_matrix*vec4(globe_pos,1.0);vec4 merc_world_pos=vec4(0.0);if (u_zoom_transition > 0.0) {merc_world_pos=vec4(merc_pos,height-u_skirt_height*decomposed_pos_and_skirt.z,1.0);merc_world_pos.xy-=u_merc_center;merc_world_pos.x=wrap(merc_world_pos.x,-0.5,0.5);merc_world_pos=u_merc_matrix*merc_world_pos;}vec4 interpolated_pos=vec4(mix(globe_world_pos.xyz,merc_world_pos.xyz,u_zoom_transition),1.0);
#endif
gl_Position=u_proj_matrix*interpolated_pos;
#ifdef FOG
v_fog_pos=fog_position((u_normalize_matrix*vec4(globe_pos,1.0)).xyz);
#endif
}`),globeAtmosphere:oi(`#include "_prelude_fog.fragment.glsl"
uniform float u_transition;uniform highp float u_fadeout_range;uniform highp float u_temporal_offset;uniform vec4 u_color;uniform vec4 u_high_color;uniform vec4 u_space_color;uniform float u_horizon_angle;in highp vec3 v_ray_dir;in highp vec3 v_horizon_dir;void main() {highp vec3 dir=normalize(v_ray_dir);float globe_pos_dot_dir;
#ifdef PROJECTION_GLOBE_VIEW
globe_pos_dot_dir=dot(u_globe_pos,dir);highp vec3 closest_point_forward=abs(globe_pos_dot_dir)*dir;float norm_dist_from_center=length(closest_point_forward-u_globe_pos)/u_globe_radius;if (norm_dist_from_center < 0.98) {
#ifdef ALPHA_PASS
glFragColor=vec4(0,0,0,0);return;
#else
#ifdef NATIVE
glFragColor=vec4(1,1,1,1);
#else
glFragColor=vec4(0,0,0,1);
#endif
return;
#endif
}
#endif
highp vec3 horizon_dir=normalize(v_horizon_dir);float horizon_angle_mercator=dir.y < horizon_dir.y ?
0.0 : max(acos(clamp(dot(dir,horizon_dir),-1.0,1.0)),0.0);float horizon_angle;
#ifdef PROJECTION_GLOBE_VIEW
highp vec3 closest_point=globe_pos_dot_dir*dir;highp float closest_point_to_center=length(closest_point-u_globe_pos);highp float theta=asin(clamp(closest_point_to_center/length(u_globe_pos),-1.0,1.0));horizon_angle=globe_pos_dot_dir < 0.0 ?
PI-theta-u_horizon_angle : theta-u_horizon_angle;float angle_t=pow(u_transition,10.0);horizon_angle=mix(horizon_angle,horizon_angle_mercator,angle_t);
#else
horizon_angle=horizon_angle_mercator;
#endif
horizon_angle/=PI;float t=exp(-horizon_angle/u_fadeout_range);float alpha_0=u_color.a;float alpha_1=u_high_color.a;float alpha_2=u_space_color.a;vec3 color_stop_0=u_color.rgb;vec3 color_stop_1=u_high_color.rgb;vec3 color_stop_2=u_space_color.rgb;
#ifdef ALPHA_PASS
float a0=mix(alpha_2,1.0,alpha_1);float a1=mix(a0,1.0,alpha_0);float a2=mix(a0,a1,t);float a =mix(alpha_2,a2,t);glFragColor=vec4(1.0,1.0,1.0,a);
#else
vec3 c0=mix(color_stop_2,color_stop_1,alpha_1);vec3 c1=mix(c0,color_stop_0,alpha_0);vec3 c2=mix(c0,c1,t);vec3 c=c2;
#ifndef NATIVE
c=dither(c,gl_FragCoord.xy+u_temporal_offset);
#endif
glFragColor=vec4(c*t,t);
#endif
}`,`in vec3 a_pos;in vec2 a_uv;uniform vec3 u_frustum_tl;uniform vec3 u_frustum_tr;uniform vec3 u_frustum_br;uniform vec3 u_frustum_bl;uniform float u_horizon;out highp vec3 v_ray_dir;out highp vec3 v_horizon_dir;void main() {v_ray_dir=mix(
mix(u_frustum_tl,u_frustum_tr,a_uv.x),mix(u_frustum_bl,u_frustum_br,a_uv.x),a_uv.y);v_horizon_dir=mix(
mix(u_frustum_tl,u_frustum_bl,u_horizon),mix(u_frustum_tr,u_frustum_br,u_horizon),a_uv.x);gl_Position=vec4(a_pos,1.0);}`),model:oi(`#include "_prelude_fog.fragment.glsl"
#include "_prelude_shadow.fragment.glsl"
#include "_prelude_lighting.glsl"
uniform float u_opacity;uniform vec3 u_lightcolor;uniform vec3 u_lightpos;uniform float u_lightintensity;uniform vec4 u_baseColorFactor;uniform vec4 u_emissiveFactor;uniform float u_metallicFactor;uniform float u_roughnessFactor;uniform float u_emissive_strength;in highp vec4 v_position_height;in lowp vec4 v_color_mix;
#ifdef RENDER_SHADOWS
in highp vec4 v_pos_light_view_0;in highp vec4 v_pos_light_view_1;in float v_depth_shadows;
#endif
#ifdef OCCLUSION_TEXTURE_TRANSFORM
uniform vec4 u_occlusionTextureTransform;
#endif
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#ifdef HAS_ATTRIBUTE_a_pbr
in lowp vec4 v_roughness_metallic_emissive_alpha;in mediump vec4 v_height_based_emission_params;
#endif
#ifdef HAS_TEXTURE_u_baseColorTexture
uniform sampler2D u_baseColorTexture;uniform bool u_baseTextureIsAlpha;uniform bool u_alphaMask;uniform float u_alphaCutoff;
#endif
#ifdef HAS_TEXTURE_u_metallicRoughnessTexture
uniform sampler2D u_metallicRoughnessTexture;
#endif
#ifdef HAS_TEXTURE_u_occlusionTexture
uniform sampler2D u_occlusionTexture;uniform float u_aoIntensity;
#endif
#ifdef HAS_TEXTURE_u_normalTexture
uniform sampler2D u_normalTexture;
#endif
#ifdef HAS_TEXTURE_u_emissionTexture
uniform sampler2D u_emissionTexture;
#endif
#ifdef APPLY_LUT_ON_GPU
uniform highp sampler3D u_lutTexture;
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
in highp float v_depth;uniform highp sampler2D u_depthTexture;uniform highp vec2 u_inv_depth_size;uniform highp vec2 u_depth_range_unpack;
#ifdef DEPTH_D24
highp float unpack_depth(highp float depth) {return  depth*u_depth_range_unpack.x+u_depth_range_unpack.y;}
#else
highp float unpack_depth_rgba(highp vec4 rgba_depth)
{const highp vec4 bit_shift=vec4(1.0/(255.0*255.0*255.0),1.0/(255.0*255.0),1.0/255.0,1.0);return dot(rgba_depth,bit_shift)*2.0-1.0;}
#endif
bool isOccluded() {highp vec2 coord=gl_FragCoord.xy*u_inv_depth_size;
#ifdef DEPTH_D24
highp float depth=unpack_depth(texture(u_depthTexture,coord).r);
#else
highp float depth=unpack_depth_rgba(texture(u_depthTexture,coord));
#endif
return v_depth > depth+0.0005;}
#endif
#define saturate(_x) clamp(_x,0.,1.)
vec3 linearTosRGB(vec3 color) {return pow(color,vec3(1./2.2));}vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}float calculate_NdotL(vec3 normal,vec3 lightDir) {const float ext=0.70710678118;return (clamp(dot(normal,lightDir),-ext,1.0)+ext)/(1.0+ext);}vec3 getDiffuseShadedColor(vec3 albedo,vec3 normal,vec3 lightDir,vec3 lightColor)
{
#ifdef LIGHTING_3D_MODE
vec3 transformed_normal=vec3(-normal.xy,normal.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=saturate(dot(transformed_normal,u_lighting_directional_dir));
#endif
return apply_lighting(albedo,transformed_normal,lighting_factor);
#else
vec3 n=normal;float colorvalue=((albedo.x*0.2126)+(albedo.y*0.7152))+(albedo.z*0.0722);vec3 c=vec3(0.03,0.03,0.03);float directional=clamp(dot(n,vec3(lightDir)),0.0,1.0);directional=mix(1.0-u_lightintensity,max((1.0-colorvalue)+u_lightintensity,1.0),directional);vec3 c3=c+clamp((albedo*directional)*lightColor,mix(vec3(0.0),vec3(0.3),vec3(1.0)-lightColor),vec3(1.0));return c3;
#endif
}vec4 getBaseColor() {vec4 albedo=u_baseColorFactor;
#ifdef HAS_ATTRIBUTE_a_color_3f
albedo*=vec4(color_3f,1.0);
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#else
#ifdef HAS_ATTRIBUTE_a_color_4f
albedo*=color_4f;
#endif
#endif
#if defined (HAS_TEXTURE_u_baseColorTexture) && defined (HAS_ATTRIBUTE_a_uv_2f)
vec4 texColor=texture(u_baseColorTexture,uv_2f);if(u_alphaMask) {if (texColor.w < u_alphaCutoff) {discard;}}
#ifdef UNPREMULT_TEXTURE_IN_SHADER
if(texColor.w > 0.0) {texColor.rgb/=texColor.w;}texColor.w=1.0;
#endif
if(u_baseTextureIsAlpha) {if (texColor.r < 0.5) {discard;}} else {texColor.rgb=sRGBToLinear(texColor.rgb);albedo*=texColor;}
#endif
vec4 color=vec4(mix(albedo.rgb,v_color_mix.rgb,v_color_mix.a),albedo.a);
#ifdef APPLY_LUT_ON_GPU
color=applyLUT(u_lutTexture,color);
#endif
return color;}highp mat3 cotangentFrame(highp vec3 N,highp vec3 p,highp vec2 uv ) {
#ifdef HAS_TEXTURE_u_normalTexture
highp vec3 dp1=vec3(dFdx(p.x),dFdx(p.y),dFdx(p.z));highp vec3 dp2=vec3(dFdy(p.x),dFdy(p.y),dFdy(p.z));highp vec2 duv1=vec2(dFdx(uv.x),dFdx(uv.y));highp vec2 duv2=vec2(dFdy(uv.x),dFdy(uv.y));highp vec3 dp2perp=cross( dp2,N );highp vec3 dp1perp=cross( N,dp1 );highp vec3 T=dp2perp*duv1.x+dp1perp*duv2.x;highp vec3 B=dp2perp*duv1.y+dp1perp*duv2.y;highp float lengthT=dot(T,T);highp float lengthB=dot(B,B);highp float maxLength=max(lengthT,lengthB);highp float invmax=inversesqrt( maxLength );highp mat3 res=mat3( T*invmax,B*invmax,N );return res;
#else
return mat3(1.0);
#endif
}highp vec3 getNormal(){highp vec3 n;
#ifdef HAS_ATTRIBUTE_a_normal_3f
n=normalize(normal_3f);
#else
highp vec3 fdx=vec3(dFdx(v_position_height.x),dFdx(v_position_height.y),dFdx(v_position_height.z));highp vec3 fdy=vec3(dFdy(v_position_height.x),dFdy(v_position_height.y),dFdy(v_position_height.z));n=normalize(cross(fdx,fdy))*-1.0;
#endif
#if defined(HAS_TEXTURE_u_normalTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
vec3 nMap=texture( u_normalTexture,uv_2f).xyz;nMap=normalize(2.0*nMap-vec3(1.0));highp vec3 v=normalize(-v_position_height.xyz);highp mat3 TBN=cotangentFrame(n,v,uv_2f);n=normalize(TBN*nMap);
#endif
return n;}struct Material {float perceptualRoughness;float alphaRoughness;float metallic;vec3 f90;vec4 baseColor;vec3 diffuseColor;vec3 specularColor;highp vec3 normal;};Material getPBRMaterial() {Material mat;mat.baseColor=getBaseColor();mat.perceptualRoughness=u_roughnessFactor;mat.metallic=u_metallicFactor;
#ifdef HAS_ATTRIBUTE_a_pbr
mat.perceptualRoughness=v_roughness_metallic_emissive_alpha.x;mat.metallic=v_roughness_metallic_emissive_alpha.y;mat.baseColor.w*=v_roughness_metallic_emissive_alpha.w;
#endif
#if defined(HAS_TEXTURE_u_metallicRoughnessTexture) && defined(HAS_ATTRIBUTE_a_uv_2f) 
vec4 mrSample=texture(u_metallicRoughnessTexture,uv_2f);mat.perceptualRoughness*=mrSample.g;mat.metallic*=mrSample.b;
#endif
const float c_minRoughness=0.04;mat.perceptualRoughness=clamp(mat.perceptualRoughness,c_minRoughness,1.0);mat.metallic=saturate(mat.metallic);mat.alphaRoughness=mat.perceptualRoughness*mat.perceptualRoughness;const vec3 f0=vec3(0.04);mat.diffuseColor=mat.baseColor.rgb*(vec3(1.0)-f0);mat.diffuseColor*=1.0-mat.metallic;mat.specularColor=mix(f0,mat.baseColor.rgb,mat.metallic);highp float reflectance=max(max(mat.specularColor.r,mat.specularColor.g),mat.specularColor.b);highp float reflectance90=saturate(reflectance*25.0);mat.f90=vec3(reflectance90);mat.normal=getNormal();return mat;}float V_GGX(float NdotL,float NdotV,float roughness)
{float a2=roughness*roughness;float GGXV=NdotL*sqrt(NdotV*NdotV*(1.0-a2)+a2);float GGXL=NdotV*sqrt(NdotL*NdotL*(1.0-a2)+a2);return 0.5/(GGXV+GGXL);}float V_GGXFast(float NdotL,float NdotV,float roughness) {float a=roughness;float GGXV=NdotL*(NdotV*(1.0-a)+a);float GGXL=NdotV*(NdotL*(1.0-a)+a);return 0.5/(GGXV+GGXL);}vec3 F_Schlick(vec3 specularColor,vec3 f90,float VdotH)
{return specularColor+(f90-specularColor)*pow(clamp(1.0-VdotH,0.0,1.0),5.0);}vec3 F_SchlickFast(vec3 specularColor,float VdotH)
{float x=1.0-VdotH;float x4=x*x*x*x;return specularColor+(1.0-specularColor)*x4*x;}float D_GGX(highp float NdotH,float alphaRoughness)
{highp float a4=alphaRoughness*alphaRoughness;highp float f=(NdotH*a4-NdotH)*NdotH+1.0;return a4/(PI*f*f);}vec3 diffuseBurley(Material mat,float LdotH,float NdotL,float NdotV)
{float f90=2.0*LdotH*LdotH*mat.alphaRoughness-0.5;return (mat.diffuseColor/PI)*(1.0+f90*pow((1.0-NdotL),5.0))*(1.0+f90*pow((1.0-NdotV),5.0));}vec3 diffuseLambertian(Material mat)
{
#ifdef LIGHTING_3D_MODE
return mat.diffuseColor;
#else
return mat.diffuseColor/PI;
#endif
}vec3 EnvBRDFApprox(vec3 specularColor,float roughness,highp float NdotV)
{vec4 c0=vec4(-1,-0.0275,-0.572,0.022);vec4 c1=vec4(1,0.0425,1.04,-0.04);highp vec4 r=roughness*c0+c1;highp float a004=min(r.x*r.x,exp2(-9.28*NdotV))*r.x+r.y;vec2 AB=vec2(-1.04,1.04)*a004+r.zw;return specularColor*AB.x+AB.y;}vec3 computeIndirectLightContribution(Material mat,float NdotV,vec3 normal)
{vec3 env_light=vec3(0.65,0.65,0.65);
#ifdef LIGHTING_3D_MODE
float ambient_factor=calculate_ambient_directional_factor(normal);env_light=u_lighting_ambient_color*ambient_factor;
#endif
vec3 envBRDF=EnvBRDFApprox(mat.specularColor,mat.perceptualRoughness,NdotV);vec3 indirectSpecular= envBRDF*env_light;vec3 indirectDiffuse=mat.diffuseColor*env_light;return indirectSpecular+indirectDiffuse;}vec3 computeLightContribution(Material mat,vec3 lightPosition,vec3 lightColor)
{highp vec3 n=mat.normal;highp vec3 v=normalize(-v_position_height.xyz);highp vec3 l=normalize(lightPosition);highp vec3 h=normalize(v+l);float NdotV=clamp(abs(dot(n,v)),0.001,1.0);float NdotL=saturate(dot(n,l));highp float NdotH=saturate(dot(n,h));float VdotH=saturate(dot(v,h));vec3 f=F_SchlickFast(mat.specularColor,VdotH);float g=V_GGXFast(NdotL,NdotV,mat.alphaRoughness);float d=D_GGX(NdotH,mat.alphaRoughness);vec3 diffuseTerm=(1.0-f)*diffuseLambertian(mat);vec3 specularTerm=f*g*d;vec3 transformed_normal=vec3(-n.xy,n.z);float lighting_factor;
#ifdef RENDER_SHADOWS
lighting_factor=shadowed_light_factor_normal(transformed_normal,v_pos_light_view_0,v_pos_light_view_1,v_depth_shadows);
#else
lighting_factor=NdotL;
#endif
vec3 directLightColor=(specularTerm+diffuseTerm)*lighting_factor*lightColor;vec3 indirectLightColor=computeIndirectLightContribution(mat,NdotV,transformed_normal);vec3 color=(saturate(directLightColor)+indirectLightColor);float intensityFactor=1.0;
#if !defined(LIGHTING_3D_MODE)
const vec3 luminosityFactor=vec3(0.2126,0.7152,0.0722);float luminance=dot(diffuseTerm,luminosityFactor);intensityFactor=mix((1.0-u_lightintensity),max((1.0-luminance+u_lightintensity),1.0),NdotL);
#endif
color*=intensityFactor;return color;}void main() {
#ifdef TERRAIN_FRAGMENT_OCCLUSION
if (isOccluded()) {discard;}
#endif
vec3 lightDir=u_lightpos;vec3 lightColor=u_lightcolor;
#ifdef LIGHTING_3D_MODE
lightDir=u_lighting_directional_dir;lightDir.xy=-lightDir.xy;lightColor=u_lighting_directional_color;
#endif
vec4 finalColor;
#ifdef DIFFUSE_SHADED
vec3 N=getNormal();vec3 baseColor=getBaseColor().rgb;vec3 diffuse=getDiffuseShadedColor(baseColor,N,lightDir,lightColor);
#ifdef HAS_TEXTURE_u_occlusionTexture
float ao=(texture(u_occlusionTexture,uv_2f).r-1.0)*u_aoIntensity+1.0;diffuse*=ao;
#endif
finalColor=vec4(mix(diffuse,baseColor,u_emissive_strength),1.0)*u_opacity;
#else
Material mat=getPBRMaterial();vec3 color=computeLightContribution(mat,lightDir,lightColor);float ao=1.0;
#if defined (HAS_TEXTURE_u_occlusionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
#ifdef OCCLUSION_TEXTURE_TRANSFORM
vec2 uv=uv_2f.xy*u_occlusionTextureTransform.zw+u_occlusionTextureTransform.xy;
#else
vec2 uv=uv_2f;
#endif
ao=(texture(u_occlusionTexture,uv).x-1.0)*u_aoIntensity+1.0;color*=ao;
#endif
vec4 emissive=u_emissiveFactor;
#if defined(HAS_TEXTURE_u_emissionTexture) && defined(HAS_ATTRIBUTE_a_uv_2f)
emissive.rgb*=sRGBToLinear(texture(u_emissionTexture,uv_2f).rgb);
#endif
#ifdef APPLY_LUT_ON_GPU
float emissiveFactorLength=max(length(u_emissiveFactor.rgb),0.001);emissive.rgb=sRGBToLinear(applyLUT(u_lutTexture,linearTosRGB(emissive.rgb/emissiveFactorLength).rbg))*emissiveFactorLength;
#endif
color+=emissive.rgb;float opacity=mat.baseColor.w*u_opacity;
#ifdef HAS_ATTRIBUTE_a_pbr
float resEmission=v_roughness_metallic_emissive_alpha.z;resEmission*=v_height_based_emission_params.z+v_height_based_emission_params.w*pow(clamp(v_height_based_emission_params.x,0.0,1.0),v_height_based_emission_params.y);vec3 color_mix=v_color_mix.rgb;
#ifdef APPLY_LUT_ON_GPU
color_mix=applyLUT(u_lutTexture,color_mix);
#endif
color=mix(color,color_mix,min(1.0,resEmission));
#ifdef HAS_ATTRIBUTE_a_color_4f
float distance=length(vec2(1.3*max(0.0,abs(color_4f.x)-color_4f.z),color_4f.y));distance+= mix(0.5,0.0,clamp(resEmission-1.0,0.0,1.0));opacity*=v_roughness_metallic_emissive_alpha.w*saturate(1.0-distance*distance);
#endif
#endif
vec3 unlitColor=mat.baseColor.rgb*ao+emissive.rgb;color=mix(color,unlitColor,u_emissive_strength);color=linearTosRGB(color);color*=opacity;finalColor=vec4(color,opacity);
#endif
#ifdef FOG
finalColor=fog_dither(fog_apply_premultiplied(finalColor,v_fog_pos,v_position_height.w));
#endif
#ifdef RENDER_CUTOFF
finalColor*=v_cutoff_opacity;
#endif
#ifdef INDICATOR_CUTOUT
finalColor=applyCutout(finalColor,v_position_height.w);
#endif
glFragColor=finalColor;
#ifdef OVERDRAW_INSPECTOR
glFragColor=vec4(1.0);
#endif
HANDLE_WIREFRAME_DEBUG;}`,`#include "_prelude_fog.vertex.glsl"
#include "_prelude_shadow.vertex.glsl"
in vec3 a_pos_3f;
#pragma mapbox: define-attribute highp vec3 normal_3f
#pragma mapbox: define-attribute highp vec2 uv_2f
#pragma mapbox: define-attribute highp vec3 color_3f
#pragma mapbox: define-attribute highp vec4 color_4f
#pragma mapbox: define-attribute-vertex-shader-only highp vec4 pbr
#pragma mapbox: define-attribute-vertex-shader-only highp vec3 heightBasedEmissiveStrength
uniform mat4 u_matrix;uniform mat4 u_node_matrix;uniform mat4 u_lighting_matrix;uniform vec3 u_camera_pos;uniform vec4 u_color_mix;
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_normal_matrix;
#endif
#ifdef RENDER_SHADOWS
uniform mat4 u_light_matrix_0;uniform mat4 u_light_matrix_1;out highp vec4 v_pos_light_view_0;out highp vec4 v_pos_light_view_1;out float v_depth_shadows;
#endif
out vec4 v_position_height;out lowp vec4 v_color_mix;
#ifdef TERRAIN_FRAGMENT_OCCLUSION
out highp float v_depth;
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
out lowp vec4 v_roughness_metallic_emissive_alpha;out mediump vec4 v_height_based_emission_params;
#endif
vec3 sRGBToLinear(vec3 srgbIn) {return pow(srgbIn,vec3(2.2));}void main() {
#pragma mapbox: initialize-attribute highp vec3 normal_3f
#pragma mapbox: initialize-attribute highp vec2 uv_2f
#pragma mapbox: initialize-attribute highp vec3 color_3f
#pragma mapbox: initialize-attribute highp vec4 color_4f
#pragma mapbox: initialize-attribute-custom highp vec4 pbr
#pragma mapbox: initialize-attribute-custom highp vec3 heightBasedEmissiveStrength
highp mat4 normal_matrix;
#ifdef INSTANCED_ARRAYS
normal_matrix=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
normal_matrix=u_normal_matrix;
#endif
vec3 local_pos;mat3 rs;
#ifdef MODEL_POSITION_ON_GPU
vec3 pos_color=normal_matrix[0].xyz;vec4 translate=normal_matrix[1];vec3 pos_a=floor(pos_color);vec3 rgb=1.05*(pos_color-pos_a);float hidden=float(pos_a.x > EXTENT);float color_mix=pos_a.z/100.0;v_color_mix=vec4(sRGBToLinear(rgb),color_mix);float meter_to_tile=normal_matrix[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);rs[0].x=normal_matrix[1].w;rs[0].yz=normal_matrix[2].xy;rs[1].xy=normal_matrix[2].zw;rs[1].z=normal_matrix[3].x;rs[2].xyz=normal_matrix[3].yzw;vec4 pos_node=u_lighting_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;local_pos=pos.xyz;gl_Position=mix(u_matrix*pos,AWAY,hidden);pos.z*=meter_to_tile;v_position_height.xyz=pos.xyz-u_camera_pos;
#else
local_pos=a_pos_3f;gl_Position=u_matrix*vec4(a_pos_3f,1);v_position_height.xyz=vec3(u_lighting_matrix*vec4(a_pos_3f,1));v_color_mix=vec4(sRGBToLinear(u_color_mix.rgb),u_color_mix.a);
#endif
v_position_height.w=a_pos_3f.z;
#ifdef HAS_ATTRIBUTE_a_pbr
vec4 albedo_c=decode_color(pbr.xy);vec2 e_r_m=unpack_float(pbr.z);vec2 r_m= unpack_float(e_r_m.y*16.0);r_m.r=r_m.r*16.0;v_color_mix=vec4(albedo_c.rgb,1.0);v_roughness_metallic_emissive_alpha=vec4(vec3(r_m,e_r_m.x)/255.0,albedo_c.a);v_roughness_metallic_emissive_alpha.z*=2.0;float heightBasedRelativeIntepolation=a_pos_3f.z*heightBasedEmissiveStrength.x+heightBasedEmissiveStrength.y;v_height_based_emission_params.x=heightBasedRelativeIntepolation;v_height_based_emission_params.y=heightBasedEmissiveStrength.z;vec2 emissionMultiplierValues=unpack_float(pbr.w)/256.0;v_height_based_emission_params.z=emissionMultiplierValues.x;v_height_based_emission_params.w=emissionMultiplierValues.y-emissionMultiplierValues.x;
#endif
#ifdef FOG
v_fog_pos=fog_position(local_pos);
#endif
#ifdef RENDER_CUTOFF
v_cutoff_opacity=cutoff_opacity(u_cutoff_params,gl_Position.z);
#endif
#ifdef TERRAIN_FRAGMENT_OCCLUSION
v_depth=gl_Position.z/gl_Position.w;
#endif
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
float x_squared_scale=dot(rs[0],rs[0]);float y_squared_scale=dot(rs[1],rs[1]);float z_squared_scale=dot(rs[2],rs[2]);vec3 squared_scale=vec3(x_squared_scale,y_squared_scale,z_squared_scale);normal_3f=rs*((u_lighting_matrix*vec4(normal_3f,0.0)).xyz/squared_scale);normal_3f=normalize(normal_3f);
#else
normal_3f=vec3(normal_matrix*vec4(normal_3f,0));
#endif
#endif
#ifdef HAS_ATTRIBUTE_a_pbr
#ifdef HAS_ATTRIBUTE_a_color_4f
v_roughness_metallic_emissive_alpha.w=clamp(color_4f.a*v_roughness_metallic_emissive_alpha.w*(v_roughness_metallic_emissive_alpha.z-1.0),0.0,1.0);
#endif
#endif
#ifdef RENDER_SHADOWS
vec4 shadow_pos=u_node_matrix*vec4(local_pos,1.0);
#ifdef NORMAL_OFFSET
#ifdef HAS_ATTRIBUTE_a_normal_3f
#ifdef MODEL_POSITION_ON_GPU
vec3 offset=shadow_normal_offset(vec3(-normal_3f.xy,normal_3f.z));shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#else
vec3 offset=shadow_normal_offset_model(normal_3f);shadow_pos.xyz+=offset*shadow_normal_offset_multiplier0();
#endif
#endif
#endif
v_pos_light_view_0=u_light_matrix_0*shadow_pos;v_pos_light_view_1=u_light_matrix_1*shadow_pos;v_depth_shadows=gl_Position.w;
#endif
}`),modelDepth:oi(`in highp float v_depth;void main() {
#ifndef DEPTH_TEXTURE
glFragColor=pack_depth(v_depth);
#endif
}`,`in vec3 a_pos_3f;uniform mat4 u_matrix;out highp float v_depth;
#ifdef MODEL_POSITION_ON_GPU
#ifdef INSTANCED_ARRAYS
in vec4 a_normal_matrix0;in vec4 a_normal_matrix1;in vec4 a_normal_matrix2;in vec4 a_normal_matrix3;
#else
uniform highp mat4 u_instance;
#endif
uniform highp mat4 u_node_matrix;
#endif
void main() {
#ifdef MODEL_POSITION_ON_GPU
highp mat4 instance;
#ifdef INSTANCED_ARRAYS
instance=mat4(a_normal_matrix0,a_normal_matrix1,a_normal_matrix2,a_normal_matrix3);
#else
instance=u_instance;
#endif
vec3 pos_color=instance[0].xyz;vec4 translate=instance[1];vec3 pos_a=floor(pos_color);float hidden=float(pos_a.x > EXTENT);float meter_to_tile=instance[0].w;vec4 pos=vec4(pos_a.xy,translate.z,1.0);mat3 rs;rs[0].x=instance[1].w;rs[0].yz=instance[2].xy;rs[1].xy=instance[2].zw;rs[1].z=instance[3].x;rs[2].xyz=instance[3].yzw;vec4 pos_node=u_node_matrix*vec4(a_pos_3f,1.0);vec3 rotated_pos_node=rs*pos_node.xyz;vec3 pos_model_tile=(rotated_pos_node+vec3(translate.xy,0.0))*vec3(meter_to_tile,meter_to_tile,1.0);pos.xyz+=pos_model_tile;gl_Position=mix(u_matrix*pos,AWAY,hidden);
#else
gl_Position=u_matrix*vec4(a_pos_3f,1);
#endif
v_depth=gl_Position.z/gl_Position.w;}`),stars:oi(`in highp vec2 v_uv;in mediump float v_intensity;float shapeCircle(in vec2 uv)
{float beginFade=0.6;float lengthFromCenter=length(v_uv);return 1.0-clamp((lengthFromCenter-beginFade)/(1.0-beginFade),0.0,1.0);}void main() {float alpha=shapeCircle(v_uv);vec3 color=vec3(1.0,1.0,1.0);alpha*=v_intensity;glFragColor=vec4(color*alpha,alpha);HANDLE_WIREFRAME_DEBUG;}`,`
in vec3 a_pos_3f;in vec2 a_uv;in float a_size_scale;in float a_fade_opacity;uniform mat4 u_matrix;uniform vec3 u_up;uniform vec3 u_right;uniform float u_intensity_multiplier;out highp vec2 v_uv;out mediump float v_intensity;void main() {v_uv=a_uv;v_intensity=a_fade_opacity*u_intensity_multiplier;vec3 pos=a_pos_3f;pos+=a_uv.x*u_right*a_size_scale;pos+=a_uv.y*u_up*a_size_scale;gl_Position=u_matrix*vec4(pos,1.0);}`),snowParticle:oi("in highp vec2 uv;in highp float alphaMultiplier;uniform vec4 u_particleColor;uniform vec2 u_simpleShapeParameters;void main() {float t=clamp((length(uv)-u_simpleShapeParameters.x)/(1.0-u_simpleShapeParameters.x),0.0,1.0);float alpha=1.0-pow(t,pow(10.0,u_simpleShapeParameters.y));alpha*=alphaMultiplier;alpha*=u_particleColor.a;vec3 color=u_particleColor.rgb*alpha;glFragColor=vec4(color,alpha) ;HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_snowParticleData;in highp vec4 a_snowParticleDataHorizontalOscillation;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform vec2 u_screenSize;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity;uniform vec3 u_direction;uniform float u_horizontalOscillationRadius; 
uniform float u_horizontalOscillationRate; 
uniform float u_billboardSize;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;out highp vec2 uv;out highp float alphaMultiplier;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos.xyz*=halfBoxSize;pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_snowParticleData.z;float coneAngleHeadingRad=a_snowParticleData.w*radians(360.0);vec3 localZ=normalize(u_direction);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 direction;direction.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);direction.z=cos(coneAnglePichRad);direction=normalize(direction);vec3 simPosLocal=vec3(0,0,0);float velocityScale=(1.0+3.0*a_snowParticleData.y)*u_velocity;simPosLocal+=direction*velocityScale*u_time;float horizontalOscillationRadius=u_horizontalOscillationRadius*a_snowParticleDataHorizontalOscillation.x;float horizontalOscillationAngle=u_horizontalOscillationRate*u_time*(-1.0+2.0*a_snowParticleDataHorizontalOscillation.y);simPosLocal.xy+=horizontalOscillationRadius*vec2(cos(horizontalOscillationAngle),sin(horizontalOscillationAngle));vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);float clipZ=-u_cam_pos.z+pos.z;vec4 posView=u_modelview*vec4(pos,1.0);float size=u_billboardSize;alphaMultiplier=1.0;vec4 posScreen=u_projection*posView;posScreen/=posScreen.w;posScreen.xy=vec2(0.5)+posScreen.xy*0.5;posScreen.xy*=u_screenSize;vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=u_screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-posScreen.xy)/(0.5*u_screenSize));screenDist+=a_snowParticleData.x*u_thinningParticleOffset;float scaleFactorMode=0.0;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);if (a_snowParticleData.x < u_thinningAffectedRatio) {scaleFactorMode=1.0-thinningFadeRatio;alphaMultiplier=thinningFadeRatio;}}vec4 posScreen1=u_projection*vec4(posView.x-size,posView.yzw);posScreen1/=posScreen1.w;vec4 posScreen2=u_projection*vec4(posView.x+size,posView.yzw);posScreen2/=posScreen2.w;posScreen1.xy=vec2(0.5)+posScreen1.xy*0.5;posScreen1.xy*=u_screenSize;posScreen2.xy=vec2(0.5)+posScreen2.xy*0.5;posScreen2.xy*=u_screenSize;float screenLength=length(posScreen1.xy-posScreen2.xy);float screenEpsilon=3.0;float scaleFactor=1.0;if (screenLength < screenEpsilon) {scaleFactor=screenEpsilon/max(screenLength,0.01);scaleFactor=mix(scaleFactor,1.0,scaleFactorMode);}float screenEpsilon2=15.0;if (screenLength > screenEpsilon2) {scaleFactor=screenEpsilon2/max(screenLength,0.01);}size*=scaleFactor;vec2 right=size*vec2(1,0);vec2 up=size*vec2(0,1);posView.xy+=right*a_uv.x;posView.xy+=up*a_uv.y;uv=a_uv;gl_Position=u_projection*posView;}`),rainParticle:oi("in highp vec2 uv;in highp float particleRandomValue;uniform sampler2D u_texScreen;uniform float u_distortionStrength;uniform vec4 u_color;uniform vec2 u_thinningCenterPos;uniform vec3 u_thinningShape;uniform float u_thinningAffectedRatio;uniform float u_thinningParticleOffset;uniform float u_shapeDirectionalPower;uniform float u_mode;void main() {vec2 st=uv*0.5+vec2(0.5);vec2 uvm=uv;uvm.y=-1.0+2.0*pow(st.y,u_shapeDirectionalPower);float shape=clamp(1.0-length(uvm),0.0,1.0);float alpha=abs(shape)*u_color.a;vec2 screenSize=vec2(textureSize(u_texScreen,0));vec2 thinningCenterPos=u_thinningCenterPos.xy;thinningCenterPos.y=screenSize.y-thinningCenterPos.y;float screenDist=length((thinningCenterPos-gl_FragCoord.xy)/(0.5*screenSize));screenDist+=(0.5+0.5*particleRandomValue)*u_thinningParticleOffset;float thinningShapeDist=u_thinningShape.x+u_thinningShape.y;float thinningAlpha=1.0;if (screenDist < thinningShapeDist) {float thinningFadeRatio=clamp((screenDist-u_thinningShape.x)/u_thinningShape.y,0.0,1.0);thinningFadeRatio=pow(thinningFadeRatio,u_thinningShape.z);thinningAlpha*=thinningFadeRatio;}vec2 offsetXY=normalize(uvm)*abs(shape);vec2 stScreen=(gl_FragCoord.xy+offsetXY*u_distortionStrength*thinningAlpha)/screenSize;vec3 colorScreen=texture(u_texScreen,stScreen).rgb;alpha*=thinningAlpha;glFragColor=mix(vec4(colorScreen,1.0),vec4(u_color.rgb*alpha,alpha),u_mode);HANDLE_WIREFRAME_DEBUG;}",`
in highp vec3 a_pos_3f;in highp vec2 a_uv;in highp vec4 a_rainParticleData;uniform mat4 u_modelview;uniform mat4 u_projection;uniform vec3 u_cam_pos;uniform float u_time;uniform float u_boxSize;uniform float u_velocityConeAperture; 
uniform float u_velocity; 
uniform vec2 u_rainDropletSize;uniform vec3 u_rainDirection;out highp vec2 uv;out highp float particleRandomValue;void main() {vec3 pos=a_pos_3f;float halfBoxSize=0.5*u_boxSize;pos*=halfBoxSize; 
pos+=u_cam_pos;float velocityConeApertureRad=radians(u_velocityConeAperture*0.5);float coneAnglePichRad=velocityConeApertureRad*a_rainParticleData.z;float coneAngleHeadingRad=a_rainParticleData.w*radians(360.0);vec3 localZ=normalize(u_rainDirection);vec3 localX=normalize(cross(localZ,vec3(1,0,0)));vec3 localY=normalize(cross(localZ,localX));vec3 directionLocal;directionLocal.x=cos(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.y=sin(coneAngleHeadingRad)*sin(coneAnglePichRad);directionLocal.z=cos(coneAnglePichRad);directionLocal=normalize(directionLocal);vec3 directionWorld=localX*directionLocal.x+localY*directionLocal.y+localZ*directionLocal.z;float velocityScale=(1.0+3.0*a_rainParticleData.y)*u_velocity;vec3 simPosLocal=vec3(0,0,0);simPosLocal+=directionLocal*velocityScale*u_time;vec3 simPos=localX*simPosLocal.x+
localY*simPosLocal.y+localZ*simPosLocal.z;pos+=simPos;pos=fract((pos+vec3(halfBoxSize))/vec3(u_boxSize))*u_boxSize-vec3(halfBoxSize);vec4 posView=u_modelview*vec4(pos,1.0);vec3 directionView=normalize((u_modelview*vec4(directionWorld,0.0)).xyz);vec3 side=cross(directionView,normalize(posView.xyz));posView.xyz+=side*a_uv.x*u_rainDropletSize.x;posView.xyz+=directionView*a_uv.y*u_rainDropletSize.y;uv=a_uv;particleRandomValue=a_rainParticleData.x;gl_Position=u_projection*posView;}`),vignette:oi("uniform vec3 u_vignetteShape;uniform vec4 u_vignetteColor;in vec2 st;void main() {float screenDist=length(st);float alpha=clamp((screenDist-u_vignetteShape.x)/u_vignetteShape.y,0.0,1.0);alpha=pow(alpha,u_vignetteShape.z)*u_vignetteColor.a;vec3 color=u_vignetteColor.rgb;glFragColor=vec4(color*alpha,alpha) ;}","in vec2 a_pos_2f;out vec2 st;void main() {st=a_pos_2f;gl_Position=vec4(a_pos_2f,0,1);}"),occlusion:oi("uniform vec4 u_color;void main() {glFragColor=u_color;}",`#include "_prelude_terrain.vertex.glsl"
in highp vec2 a_offset_xy;uniform highp vec3 u_anchorPos;uniform mat4 u_matrix;uniform vec2 u_screenSizePx;uniform vec2 u_occluderSizePx;void main() {vec3 world_pos=u_anchorPos;
#ifdef TERRAIN
float e=elevation(world_pos.xy);world_pos.z+=e;
#endif
vec4 projected_point=u_matrix*vec4(world_pos,1.0);projected_point.xy+=projected_point.w*a_offset_xy*0.5*u_occluderSizePx/u_screenSizePx;gl_Position=projected_point;}`)};function Qa(v,l){const d=v.replace(/\s*\/\/[^\n]*\n/g,`
`).split(`
`);for(let x of d)if(x=x.trim(),x[0]==="#"&&x.includes("if")&&!x.includes("endif")){x=x.replace("#","").replace(/ifdef|ifndef|elif|if/g,"").replace(/!|defined|\(|\)|\|\||&&/g,"").replace(/\s+/g," ").trim();const C=x.split(" ");for(const B of C)l.includes(B)||l.push(B)}}function oi(v,l){const d=/#include\s+"([^"]+)"/g,x=/#pragma mapbox: ([\w\-]+) ([\w]+) ([\w]+) ([\w]+)/g;let C=l.match(/(attribute(\S*)|(^\s*|;)in) (highp |mediump |lowp )?([\w]+) ([\w]+)/gm);C&&(C=C.map(X=>{const J=X.split(" ");return J[J.length-1]}),C=[...new Set(C)]);const B={},F=[],z=[];if(v=v.replace(d,(X,J)=>(z.push(J),"")),(l=l.replace(d,(X,J)=>(F.push(J),""))).includes("flat out"))return void console.error('The usage of "flat" qualifier is disallowed, see: https://bugs.webkit.org/show_bug.cgi?id=268071');let K=[...cl];Qa(v,K),Qa(l,K);for(const X of[...F,...z])za[X]||console.error(`Undefined include: ${X}`),As[X]||(As[X]=[],Qa(za[X],As[X])),K=[...K,...As[X]];return{fragmentSource:v=v.replace(x,(X,J,oe,se,ue)=>(B[ue]=!0,J==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
in ${oe} ${se} ${ue};
#else
uniform ${oe} ${se} u_${ue};
#endif
`:J==="initialize"?`
#ifdef HAS_UNIFORM_u_${ue}
    ${oe} ${se} ${ue} = u_${ue};
#endif
`:J==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ue}
    in ${oe} ${se} ${ue};
#endif
`:J==="initialize-attribute"?"":void 0)),vertexSource:l=l.replace(x,(X,J,oe,se,ue)=>{const Ie=se==="float"?"vec2":se,Se=ue.match(/color/)?"color":Ie;return J==="define-attribute-vertex-shader-only"?`
#ifdef HAS_ATTRIBUTE_a_${ue}
in ${oe} ${se} a_${ue};
#endif
`:B[ue]?J==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
uniform lowp float u_${ue}_t;
in ${oe} ${Ie} a_${ue};
out ${oe} ${se} ${ue};
#else
uniform ${oe} ${se} u_${ue};
#endif
`:J==="initialize"?Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${ue}
    ${ue} = a_${ue};
#else
    ${oe} ${se} ${ue} = u_${ue};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ue}
    ${ue} = unpack_mix_${Se}(a_${ue}, u_${ue}_t);
#else
    ${oe} ${se} ${ue} = u_${ue};
#endif
`:J==="define-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ue}
    in ${oe} ${se} a_${ue};
    out ${oe} ${se} ${ue};
#endif
`:J==="initialize-attribute"?`
#ifdef HAS_ATTRIBUTE_a_${ue}
    ${ue} = a_${ue};
#endif
`:void 0:J==="define"?`
#ifndef HAS_UNIFORM_u_${ue}
uniform lowp float u_${ue}_t;
in ${oe} ${Ie} a_${ue};
#else
uniform ${oe} ${se} u_${ue};
#endif
`:J==="define-instanced"?Se==="mat4"?`
#ifdef INSTANCED_ARRAYS
in vec4 a_${ue}0;
in vec4 a_${ue}1;
in vec4 a_${ue}2;
in vec4 a_${ue}3;
#else
uniform ${oe} ${se} u_${ue};
#endif
`:`
#ifdef INSTANCED_ARRAYS
in ${oe} ${Ie} a_${ue};
#else
uniform ${oe} ${se} u_${ue};
#endif
`:J==="initialize-attribute-custom"?`
#ifdef HAS_ATTRIBUTE_a_${ue}
    ${oe} ${se} ${ue} = a_${ue};
#endif
`:Se==="vec4"?`
#ifndef HAS_UNIFORM_u_${ue}
    ${oe} ${se} ${ue} = a_${ue};
#else
    ${oe} ${se} ${ue} = u_${ue};
#endif
`:`
#ifndef HAS_UNIFORM_u_${ue}
    ${oe} ${se} ${ue} = unpack_mix_${Se}(a_${ue}, u_${ue}_t);
#else
    ${oe} ${se} ${ue} = u_${ue};
#endif
`}),staticAttributes:C,usedDefines:K,vertexIncludes:F,fragmentIncludes:z}}class zc{constructor(){this.boundProgram=null,this.boundLayoutVertexBuffer=null,this.boundPaintVertexBuffers=[],this.boundIndexBuffer=null,this.boundVertexOffset=null,this.boundDynamicVertexBuffers=[],this.vao=null}bind(l,d,x,C,B,F,z,K){this.context=l;let X=this.boundPaintVertexBuffers.length!==C.length;for(let oe=0;!X&&oe<C.length;oe++)this.boundPaintVertexBuffers[oe]!==C[oe]&&(X=!0);let J=this.boundDynamicVertexBuffers.length!==z.length;for(let oe=0;!J&&oe<z.length;oe++)this.boundDynamicVertexBuffers[oe]!==z[oe]&&(J=!0);if(!this.vao||this.boundProgram!==d||this.boundLayoutVertexBuffer!==x||X||J||this.boundIndexBuffer!==B||this.boundVertexOffset!==F)this.freshBind(d,x,C,B,F,z,K);else{l.bindVertexArrayOES.set(this.vao);for(const oe of z)oe&&(oe.bind(),K&&oe.instanceCount&&oe.setVertexAttribDivisor(l.gl,d,K));B&&B.dynamicDraw&&B.bind()}}freshBind(l,d,x,C,B,F,z){const K=l.numAttributes,X=this.context,J=X.gl;this.vao&&this.destroy(),this.vao=X.gl.createVertexArray(),X.bindVertexArrayOES.set(this.vao),this.boundProgram=l,this.boundLayoutVertexBuffer=d,this.boundPaintVertexBuffers=x,this.boundIndexBuffer=C,this.boundVertexOffset=B,this.boundDynamicVertexBuffers=F,d.enableAttributes(J,l),d.bind(),d.setVertexAttribPointers(J,l,B);for(const oe of x)oe.enableAttributes(J,l),oe.bind(),oe.setVertexAttribPointers(J,l,B);for(const oe of F)oe&&(oe.enableAttributes(J,l),oe.bind(),oe.setVertexAttribPointers(J,l,B),z&&oe.instanceCount&&oe.setVertexAttribDivisor(J,l,z));C&&C.bind(),X.currentNumAttributes=K}destroy(){this.vao&&(this.context.gl.deleteVertexArray(this.vao),this.vao=null)}}function lp(v,l){const d=Math.pow(2,l.canonical.z),x=l.canonical.y;return[new i.aa(0,x/d).toLngLat().lat,new i.aa(0,(x+1)/d).toLngLat().lat]}function ff(v,l,d,x,C,B,F){const z=v.context,K=z.gl,X=d.hillshadeFBO;if(!X)return;v.prepareDrawTile();const J=v.isTileAffectedByFog(l),oe=v.getOrCreateProgram("hillshade",{overrideFog:J});z.activeTexture.set(K.TEXTURE0),K.bindTexture(K.TEXTURE_2D,X.colorAttachment.get());const se=((Pe,Le,$e,rt)=>{const et=$e.paint.get("hillshade-shadow-color"),ft=$e.paint.get("hillshade-shadow-color-use-theme").constantOr("default")==="none",dt=$e.paint.get("hillshade-highlight-color"),ht=$e.paint.get("hillshade-highlight-color-use-theme").constantOr("default")==="none",ut=$e.paint.get("hillshade-accent-color"),xt=$e.paint.get("hillshade-accent-color-use-theme").constantOr("default")==="none",Bt=$e.paint.get("hillshade-emissive-strength");let an=i.ai($e.paint.get("hillshade-illumination-direction"));if($e.paint.get("hillshade-illumination-anchor")==="viewport")an-=Pe.transform.angle;else if(Pe.style&&Pe.style.enable3dLights()&&Pe.style.directionalLight){const Ct=Pe.style.directionalLight.properties.get("direction"),Rt=i.cb(Ct.x,Ct.y,Ct.z);an=i.ai(Rt[1])}const tn=!Pe.options.moving;return{u_matrix:rt||Pe.transform.calculateProjMatrix(Le.tileID.toUnwrapped(),tn),u_image:0,u_latrange:lp(0,Le.tileID),u_light:[$e.paint.get("hillshade-exaggeration"),an],u_shadow:et.toRenderColor(ft?null:$e.lut),u_highlight:dt.toRenderColor(ht?null:$e.lut),u_emissive_strength:Bt,u_accent:ut.toRenderColor(xt?null:$e.lut)}})(v,d,x,v.terrain?l.projMatrix:null);v.uploadCommonUniforms(z,oe,l.toUnwrapped());const{tileBoundsBuffer:ue,tileBoundsIndexBuffer:Ie,tileBoundsSegments:Se}=v.getTileBoundsBuffers(d);oe.draw(v,K.TRIANGLES,C,B,F,Lr.disabled,se,x.id,ue,Ie,Se)}function pf(v,l,d){if(!l.needsDEMTextureUpload)return;const x=v.context,C=x.gl;x.pixelStoreUnpackPremultiplyAlpha.set(!1),l.demTexture=l.demTexture||v.getTileTexture(d.stride);const B=d.getPixels();l.demTexture?l.demTexture.update(B,{premultiply:!1}):l.demTexture=new i.T(x,B,C.R32F,{premultiply:!1}),l.needsDEMTextureUpload=!1}function Ha(v,l,d){const x=v.context,C=x.gl;if(!l.dem)return;const B=l.dem;if(x.activeTexture.set(C.TEXTURE1),pf(v,l,B),!l.demTexture)return;l.demTexture.bind(C.NEAREST,C.CLAMP_TO_EDGE);const F=B.dim;x.activeTexture.set(C.TEXTURE0);let z=l.hillshadeFBO;if(!z){const se=new i.T(x,{width:F,height:F,data:null},C.RGBA8);se.bind(C.LINEAR,C.CLAMP_TO_EDGE),z=l.hillshadeFBO=x.createFramebuffer(F,F,!0,"renderbuffer"),z.colorAttachment.set(se.texture)}x.bindFramebuffer.set(z.framebuffer),x.viewport.set([0,0,F,F]);const{tileBoundsBuffer:K,tileBoundsIndexBuffer:X,tileBoundsSegments:J}=v.getMercatorTileBoundsBuffers(),oe=[];v.linearFloatFilteringSupported()&&oe.push("TERRAIN_DEM_FLOAT_FORMAT"),v.getOrCreateProgram("hillshadePrepare",{defines:oe}).draw(v,C.TRIANGLES,mr.disabled,Rr.disabled,Mr.unblended,Lr.disabled,((se,ue)=>{const Ie=ue.stride,Se=i.ab.mat4.create();return i.ab.mat4.ortho(Se,0,i.ag,-i.ag,0,0,1),i.ab.mat4.translate(Se,Se,[0,-i.ag,0]),{u_matrix:Se,u_image:1,u_dimension:[Ie,Ie],u_zoom:se.overscaledZ}})(l.tileID,B),d.id,K,X,J),l.needsHillshadePrepare=!1}class Ri{constructor(l){this.gl=l.gl,this.default=this.getDefault(),this.current=this.default,this.dirty=!1}get(){return this.current}set(l){}getDefault(){return this.default}setDefault(){this.set(this.default)}}class Jp extends Ri{getDefault(){return i.aj.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.clearColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Eh extends Ri{getDefault(){return 1}set(l){(l!==this.current||this.dirty)&&(this.gl.clearDepth(l),this.current=l,this.dirty=!1)}}class Th extends Ri{getDefault(){return 0}set(l){(l!==this.current||this.dirty)&&(this.gl.clearStencil(l),this.current=l,this.dirty=!1)}}class qd extends Ri{getDefault(){return[!0,!0,!0,!0]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.colorMask(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class cp extends Ri{getDefault(){return!0}set(l){(l!==this.current||this.dirty)&&(this.gl.depthMask(l),this.current=l,this.dirty=!1)}}class eA extends Ri{getDefault(){return 255}set(l){(l!==this.current||this.dirty)&&(this.gl.stencilMask(l),this.current=l,this.dirty=!1)}}class lm extends Ri{getDefault(){return{func:this.gl.ALWAYS,ref:0,mask:255}}set(l){const d=this.current;(l.func!==d.func||l.ref!==d.ref||l.mask!==d.mask||this.dirty)&&(this.gl.stencilFunc(l.func,l.ref,l.mask),this.current=l,this.dirty=!1)}}class Af extends Ri{getDefault(){const l=this.gl;return[l.KEEP,l.KEEP,l.KEEP]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||this.dirty)&&(this.gl.stencilOp(l[0],l[1],l[2]),this.current=l,this.dirty=!1)}}class mf extends Ri{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.STENCIL_TEST):d.disable(d.STENCIL_TEST),this.current=l,this.dirty=!1}}class up extends Ri{getDefault(){return[0,1]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||this.dirty)&&(this.gl.depthRange(l[0],l[1]),this.current=l,this.dirty=!1)}}class gf extends Ri{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.DEPTH_TEST):d.disable(d.DEPTH_TEST),this.current=l,this.dirty=!1}}class dp extends Ri{getDefault(){return this.gl.LESS}set(l){(l!==this.current||this.dirty)&&(this.gl.depthFunc(l),this.current=l,this.dirty=!1)}}class x0 extends Ri{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.BLEND):d.disable(d.BLEND),this.current=l,this.dirty=!1}}class ic extends Ri{getDefault(){const l=this.gl;return[l.ONE,l.ZERO,l.ONE,l.ZERO]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.blendFuncSeparate(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class xa extends Ri{getDefault(){return i.aj.transparent}set(l){const d=this.current;(l.r!==d.r||l.g!==d.g||l.b!==d.b||l.a!==d.a||this.dirty)&&(this.gl.blendColor(l.r,l.g,l.b,l.a),this.current=l,this.dirty=!1)}}class Va extends Ri{getDefault(){return this.gl.FUNC_ADD}set(l){(l!==this.current||this.dirty)&&(this.gl.blendEquationSeparate(l,l),this.current=l,this.dirty=!1)}}class cm extends Ri{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;l?d.enable(d.CULL_FACE):d.disable(d.CULL_FACE),this.current=l,this.dirty=!1}}class mg extends Ri{getDefault(){return this.gl.BACK}set(l){(l!==this.current||this.dirty)&&(this.gl.cullFace(l),this.current=l,this.dirty=!1)}}class um extends Ri{getDefault(){return this.gl.CCW}set(l){(l!==this.current||this.dirty)&&(this.gl.frontFace(l),this.current=l,this.dirty=!1)}}let hp=class extends Ri{getDefault(){return null}set(v){(v!==this.current||this.dirty)&&(this.gl.useProgram(v),this.current=v,this.dirty=!1)}};class yf extends Ri{getDefault(){return this.gl.TEXTURE0}set(l){(l!==this.current||this.dirty)&&(this.gl.activeTexture(l),this.current=l,this.dirty=!1)}}class Bu extends Ri{getDefault(){const l=this.gl;return[0,0,l.drawingBufferWidth,l.drawingBufferHeight]}set(l){const d=this.current;(l[0]!==d[0]||l[1]!==d[1]||l[2]!==d[2]||l[3]!==d[3]||this.dirty)&&(this.gl.viewport(l[0],l[1],l[2],l[3]),this.current=l,this.dirty=!1)}}class fp extends Ri{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindFramebuffer(d.FRAMEBUFFER,l),this.current=l,this.dirty=!1}}class vf extends Ri{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindRenderbuffer(d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class xf extends Ri{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindTexture(d.TEXTURE_2D,l),this.current=l,this.dirty=!1}}class rd extends Ri{getDefault(){return null}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.bindBuffer(d.ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class dm extends Ri{getDefault(){return null}set(l){const d=this.gl;d.bindBuffer(d.ELEMENT_ARRAY_BUFFER,l),this.current=l,this.dirty=!1}}class pp extends Ri{getDefault(){return null}set(l){this.gl&&(l!==this.current||this.dirty)&&(this.gl.bindVertexArray(l),this.current=l,this.dirty=!1)}}class cv extends Ri{getDefault(){return 4}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_ALIGNMENT,l),this.current=l,this.dirty=!1}}class Ih extends Ri{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_PREMULTIPLY_ALPHA_WEBGL,l),this.current=l,this.dirty=!1}}class Eu extends Ri{getDefault(){return!1}set(l){if(l===this.current&&!this.dirty)return;const d=this.gl;d.pixelStorei(d.UNPACK_FLIP_Y_WEBGL,l),this.current=l,this.dirty=!1}}class Tu extends Ri{constructor(l,d){super(l),this.context=l,this.parent=d}getDefault(){return null}}class gg extends Tu{setDirty(){this.dirty=!0}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class jh extends Tu{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferRenderbuffer(d.FRAMEBUFFER,this.attachment(),d.RENDERBUFFER,l),this.current=l,this.dirty=!1}}class Qc extends Tu{attachment(){return this.gl.DEPTH_ATTACHMENT}set(l){if(l===this.current&&!this.dirty)return;this.context.bindFramebuffer.set(this.parent);const d=this.gl;d.framebufferTexture2D(d.FRAMEBUFFER,this.attachment(),d.TEXTURE_2D,l,0),this.current=l,this.dirty=!1}}class ul extends jh{attachment(){return this.gl.DEPTH_STENCIL_ATTACHMENT}}const ct=(v,l,d)=>({u_matrix:v,u_image0:0,u_skirt_height:l,u_ground_shadow_factor:d}),Fh=(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se)=>({u_proj_matrix:Float32Array.from(v),u_globe_matrix:l,u_normalize_matrix:Float32Array.from(x),u_merc_matrix:d,u_zoom_transition:C,u_merc_center:B,u_image0:0,u_frustum_tl:F,u_frustum_tr:z,u_frustum_br:K,u_frustum_bl:X,u_globe_pos:J,u_globe_radius:oe,u_viewport:se,u_grid_matrix:Se?Float32Array.from(Se):new Float32Array(9),u_skirt_height:ue,u_far_z_cutoff:Ie});function _f(v,l){return v!=null&&l!=null&&!(!v.hasData()||!l.hasData())&&v.demTexture!=null&&l.demTexture!=null&&v.tileID.key!==l.tileID.key}const Ta=new class{constructor(){this.operations={}}newMorphing(v,l,d,x,C){if(v in this.operations){const B=this.operations[v];B.to.tileID.key!==d.tileID.key&&(B.queued=d)}else this.operations[v]={startTime:x,phase:0,duration:C,from:l,to:d,queued:null}}getMorphValuesForProxy(v){if(!(v in this.operations))return null;const l=this.operations[v];return{from:l.from,to:l.to,phase:l.phase}}update(v){for(const l in this.operations){const d=this.operations[l];for(d.phase=(v-d.startTime)/d.duration;d.phase>=1||!this._validOp(d);)if(!this._nextOp(d,v)){delete this.operations[l];break}}}_nextOp(v,l){return!!v.queued&&(v.from=v.to,v.to=v.queued,v.queued=null,v.phase=0,v.startTime=l,!0)}_validOp(v){return v.from.hasData()&&v.to.hasData()}},Ji={0:null,1:"TERRAIN_VERTEX_MORPHING"};function hm(v,l,d){if(l===0)return 0;const x=l<1&&d===514?.25/l:1;return 6*Math.pow(1.5,22-v)*Math.max(l,1)*x}function Ph(v,l){const d=1<<v.z;return!l&&(v.x===0||v.x===d-1)||v.y===0||v.y===d-1}const kh=v=>({u_matrix:v});function sc(v,l,d,x,C){if(C>0){const B=i.q.now(),F=(B-v.timeAdded)/C,z=l?(B-l.timeAdded)/C:-1,K=d.getSource(),X=x.coveringZoomLevel({tileSize:K.tileSize,roundZoom:K.roundZoom}),J=!l||Math.abs(l.tileID.overscaledZ-X)>Math.abs(v.tileID.overscaledZ-X),oe=J&&v.refreshedUponExpiration?1:i.aw(J?F:1-z,0,1);return v.refreshedUponExpiration&&F>=1&&(v.refreshedUponExpiration=!1),l?{opacity:1,mix:1-oe}:{opacity:oe,mix:0}}return{opacity:1,mix:0}}class Ap extends Aa{constructor(l){const d={type:"raster-dem",maxzoom:l.transform.maxZoom},x=new i.D(i.ci(),null),C=of("mock-dem",d,x,l.style);super("mock-dem",C,!1),C.setEventedParent(this),this._sourceLoaded=!0}_loadTile(l,d){l.state="loaded",d(null)}}class fm extends Aa{constructor(l){const d=of("proxy",{type:"geojson",maxzoom:l.transform.maxZoom},new i.D(i.ci(),null),l.style);super("proxy",d,!1),d.setEventedParent(this),this.map=this.getSource().map=l,this.used=this._sourceLoaded=!0,this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}update(l,d,x){if(l.freezeTileCoverage)return;this.transform=l;const C=l.coveringTiles({tileSize:this._source.tileSize,minzoom:this._source.minzoom,maxzoom:this._source.maxzoom,roundZoom:this._source.roundZoom,reparseOverscaled:this._source.reparseOverscaled}).reduce((B,F)=>{if(B[F.key]="",!this._tiles[F.key]){const z=new xl(F,this._source.tileSize*F.overscaleFactor(),l.tileZoom);z.state="loaded",this._tiles[F.key]=z}return B},{});for(const B in this._tiles)B in C||(this.freeFBO(B),this._tiles[B].unloadVectorData(),delete this._tiles[B])}freeFBO(l){const d=this.proxyCachedFBO[l];if(d!==void 0){const x=Object.values(d);this.renderCachePool.push(...x),delete this.proxyCachedFBO[l]}}deallocRenderCache(){this.renderCache.forEach(l=>l.fb.destroy()),this.renderCache=[],this.renderCachePool=[],this.proxyCachedFBO={}}}class tA extends i.aG{constructor(l,d,x){super(l.overscaledZ,l.wrap,l.canonical.z,l.canonical.x,l.canonical.y),this.proxyTileKey=d,this.projMatrix=x}}class pm extends i.cJ{constructor(l,d){super(),this._debugParams={sortTilesHiZFirst:!0,disableRenderCache:!1},l.tp.registerParameter(this._debugParams,["Terrain"],"sortTilesHiZFirst",{},()=>{this._style.map.triggerRepaint()}),l.tp.registerParameter(this._debugParams,["Terrain"],"disableRenderCache",{},()=>{this._style.map.triggerRepaint()}),l.tp.registerButton(["Terrain"],"Invalidate Render Cache",()=>{this.invalidateRenderCache=!0,this._style.map.triggerRepaint()}),this.painter=l,this.terrainTileForTile={},this.prevTerrainTileForTile={};const[x,C,B]=function(K){const X=new i.b4,J=new i.aU,oe=131;X.reserve(17161),J.reserve(33800);const se=i.ag/128,ue=i.ag+se/2,Ie=ue+se;for(let Pe=-se;Pe<Ie;Pe+=se)for(let Le=-se;Le<Ie;Le+=se){const $e=Le<0||Le>ue||Pe<0||Pe>ue?24575:0,rt=i.aw(Math.round(Le),0,i.ag),et=i.aw(Math.round(Pe),0,i.ag);X.emplaceBack(rt+$e,et)}const Se=(Pe,Le)=>{const $e=Le*oe+Pe;J.emplaceBack($e+1,$e,$e+oe),J.emplaceBack($e+oe,$e+oe+1,$e+1)};for(let Pe=1;Pe<129;Pe++)for(let Le=1;Le<129;Le++)Se(Le,Pe);return[0,129].forEach(Pe=>{for(let Le=0;Le<130;Le++)Se(Le,Pe),Se(Pe,Le)}),[X,J,32768]}(),F=l.context;this.gridBuffer=F.createVertexBuffer(x,i.b6.members),this.gridIndexBuffer=F.createIndexBuffer(C),this.gridSegments=i.b7.simpleSegment(0,0,x.length,C.length),this.gridNoSkirtSegments=i.b7.simpleSegment(0,0,x.length,B),this.proxyCoords=[],this.proxiedCoords={},this._visibleDemTiles=[],this._drapedRenderBatches=[],this._sourceTilesOverlap={},this.proxySourceCache=new fm(d.map),this.orthoMatrix=i.ab.mat4.create(),i.ab.mat4.ortho(this.orthoMatrix,this.painter.transform.projection.name==="globe"?.015:0,i.ag,0,i.ag,0,1);const z=F.gl;this._overlapStencilMode=new Rr({func:z.GEQUAL,mask:255},0,255,z.KEEP,z.KEEP,z.REPLACE),this._previousZoom=l.transform.zoom,this.pool=[],this._findCoveringTileCache={},this._tilesDirty={},this.style=d,this._useVertexMorphing=!0,this._exaggeration=1,this._mockSourceCache=new Ap(d.map),this._pendingGroundEffectLayers=[]}set style(l){l.on("data",this._onStyleDataEvent.bind(this)),this._style=l,this._style.map.on("moveend",()=>{this._clearLineLayersFromRenderCache()})}update(l,d,x){if(l&&l.terrain){this._style!==l&&(this.style=l,this._evaluationZoom=void 0);const C=l.terrain.properties,B=l.terrain.drapeRenderMode===0,F=l.terrain.isZoomDependent();this._previousUpdateTimestamp=this.enabled?this._updateTimestamp:void 0,this._updateTimestamp=i.q.now();const z=l.terrain&&l.terrain.scope,K=C.get("source"),X=B?this._mockSourceCache:l.getSourceCache(K,z);if(!X)return void i.w(`Couldn't find terrain source "${K}".`);if(this.sourceCache=X,this._attenuationRange=l.terrain.getAttenuationRange(),this._exaggeration=F?this.calculateExaggeration(d):C.get("exaggeration"),!d.projection.requiresDraping&&F&&this._exaggeration===0)return void this._disable();this.enabled=!0;const J=()=>{this.sourceCache.used&&i.w(`Raster DEM source '${this.sourceCache.id}' is used both for terrain and as layer source.
This leads to lower resolution of hillshade. For full hillshade resolution but higher memory consumption, define another raster DEM source.`);const oe=this.getScaledDemTileSize();this.sourceCache.update(d,oe,!0),this.resetTileLookupCache(this.sourceCache.id)};this.sourceCache.usedForTerrain||(this.resetTileLookupCache(this.sourceCache.id),this.sourceCache.usedForTerrain=!0,J(),this._initializing=!0),J(),d.updateElevation(!0,x),this.resetTileLookupCache(this.proxySourceCache.id),this.proxySourceCache.update(d),this._emptyDEMTextureDirty=!0,this._previousZoom=d.zoom}else this._disable()}calculateExaggeration(l){if(this._attenuationRange&&l.zoom>=Math.ceil(this._attenuationRange[1]))return this._style.terrain.getExaggeration(l.zoom);const d=this._previousCameraAltitude,x=l.getFreeCameraOptions().position.z/l.pixelsPerMeter*l.worldSize;this._previousCameraAltitude=x;const C=d!=null?x-d:Number.MAX_VALUE;if(Math.abs(C)<2)return this._exaggeration;const B=l.zoom,F=this._style.terrain;if(!this._previousUpdateTimestamp)return F.getExaggeration(B);let z=B-this._previousZoom;const K=this._previousUpdateTimestamp;let X=B;this._evaluationZoom!=null&&(X=this._evaluationZoom,Math.abs(B-X)>.5&&(z=.5*(B-X+z)),z*C<0&&(X+=z)),this._evaluationZoom=X;const J=F.getExaggeration(X),oe=J===F.getExaggeration(Math.max(0,X-.1));if(oe&&Math.abs(J-this._exaggeration)<.01)return J;let se=Math.min(.1,.00375*(this._updateTimestamp-K));return(oe||J<.1||Math.abs(z)<1e-4)&&(se=Math.min(.2,4*se)),i.af(this._exaggeration,J,se)}resetTileLookupCache(l){this._findCoveringTileCache[l]={}}attenuationRange(){return this._attenuationRange}getDemUpscale(){return this.proxySourceCache.getSource().tileSize/128}getScaledDemTileSize(){return this.sourceCache.getSource().tileSize/128*this.proxySourceCache.getSource().tileSize}_onStyleDataEvent(l){l.coord&&l.dataType==="source"?this._clearRenderCacheForTile(l.sourceCacheId,l.coord):l.dataType==="style"&&(this.invalidateRenderCache=!0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this._previousCameraAltitude=void 0)}_disable(){if(this.enabled&&(this.enabled=!1,this._emptyDEMTextureDirty=!0,this._sharedDepthStencil=void 0,this._evaluationZoom=void 0,this._previousUpdateTimestamp=void 0,this.proxySourceCache.deallocRenderCache(),this._style))for(const l in this._style._mergedSourceCaches)this._style._mergedSourceCaches[l].usedForTerrain=!1}destroy(){this._disable(),this._emptyDEMTexture&&this._emptyDEMTexture.destroy(),this.pool.forEach(l=>l.fb.destroy()),this.pool=[],this.framebufferCopyTexture&&this.framebufferCopyTexture.destroy()}_source(){return this.enabled?this.sourceCache:null}isUsingMockSource(){return this.sourceCache===this._mockSourceCache}exaggeration(){return this.enabled?this._exaggeration:0}get visibleDemTiles(){return this._visibleDemTiles}get drapeBufferSize(){const l=2*this.proxySourceCache.getSource().tileSize;return[l,l]}set useVertexMorphing(l){this._useVertexMorphing=l}updateTileBinding(l){if(!this.enabled)return;this.prevTerrainTileForTile=this.terrainTileForTile;const d=this.proxySourceCache,x=this.painter.transform;this._initializing&&(this._initializing=x._centerAltitude===0&&this.getAtPointOrZero(i.aa.fromLngLat(x.center),-1)===-1,this._emptyDEMTextureDirty=!this._initializing);const C=this.proxyCoords=d.getIds().map(K=>{const X=d.getTileByID(K).tileID;return X.projMatrix=x.calculateProjMatrix(X.toUnwrapped()),X});(function(K,X){const J=X.transform.pointCoordinate(X.transform.getCameraPoint()),oe=new i.P(J.x,J.y);K.sort((se,ue)=>{if(ue.overscaledZ-se.overscaledZ)return ue.overscaledZ-se.overscaledZ;const Ie=new i.P(se.canonical.x+(1<<se.canonical.z)*se.wrap,se.canonical.y),Se=new i.P(ue.canonical.x+(1<<ue.canonical.z)*ue.wrap,ue.canonical.y),Pe=oe.mult(1<<se.canonical.z);return Pe.x-=.5,Pe.y-=.5,Pe.distSqr(Ie)-Pe.distSqr(Se)})})(C,this.painter);const B=this.proxyToSource||{};this.proxyToSource={},C.forEach(K=>{this.proxyToSource[K.key]={}}),this.terrainTileForTile={};const F=this._style._mergedSourceCaches;for(const K in F){const X=F[K];if(!X.used||(X!==this.sourceCache&&this.resetTileLookupCache(X.id),this._setupProxiedCoordsForOrtho(X,l[K],B),X.usedForTerrain))continue;const J=l[K];X.getSource().reparseOverscaled&&this._assignTerrainTiles(J)}this.proxiedCoords[d.id]=C.map(K=>new tA(K,K.key,this.orthoMatrix)),this._assignTerrainTiles(C),this._prepareDEMTextures(),this._setupDrapedRenderBatches(),this._initFBOPool(),this._setupRenderCache(B),this.renderingToTexture=!1;const z={};this._visibleDemTiles=[];for(const K of this.proxyCoords){const X=this.terrainTileForTile[K.key];if(!X)continue;const J=X.tileID.key;J in z||(this._visibleDemTiles.push(X),z[J]=J)}}_assignTerrainTiles(l){this._initializing||l.forEach(d=>{if(this.terrainTileForTile[d.key])return;const x=this._findTileCoveringTileID(d,this.sourceCache);x&&(this.terrainTileForTile[d.key]=x)})}_prepareDEMTextures(){const l=this.painter.context,d=l.gl;for(const x in this.terrainTileForTile){const C=this.terrainTileForTile[x],B=C.dem;!B||C.demTexture&&!C.needsDEMTextureUpload||(l.activeTexture.set(d.TEXTURE1),pf(this.painter,C,B))}}_prepareDemTileUniforms(l,d,x,C){if(!d||d.demTexture==null)return!1;const B=l.tileID.canonical,F=Math.pow(2,d.tileID.canonical.z-B.z),z=C||"";return x[`u_dem_tl${z}`]=[B.x*F%1,B.y*F%1],x[`u_dem_scale${z}`]=F,!0}get emptyDEMTexture(){return!this._emptyDEMTextureDirty&&this._emptyDEMTexture?this._emptyDEMTexture:this._updateEmptyDEMTexture()}_getLoadedAreaMinimum(){if(!this.enabled)return 0;let l=0;const d=this._visibleDemTiles.reduce((x,C)=>{if(!C.dem)return x;const B=C.dem.tree.minimums[0];return B>0&&l++,x+B},0);return l?d/l:0}_updateEmptyDEMTexture(){const l=this.painter.context,d=l.gl;l.activeTexture.set(d.TEXTURE2);const x=this._getLoadedAreaMinimum(),C=new i.cK({width:1,height:1},new Float32Array([x]));this._emptyDEMTextureDirty=!1;let B=this._emptyDEMTexture;return B?B.update(C,{premultiply:!1}):B=this._emptyDEMTexture=new i.T(l,C,d.R32F,{premultiply:!1}),B}setupElevationDraw(l,d,x){const C=this.painter.context,B=C.gl,F={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0};F.u_exaggeration=this.exaggeration();let z=null,K=null,X=1;if(x&&x.morphing&&this._useVertexMorphing){const ue=x.morphing.srcDemTile,Ie=x.morphing.dstDemTile;X=x.morphing.phase,ue&&Ie&&(this._prepareDemTileUniforms(l,ue,F,"_prev")&&(K=ue),this._prepareDemTileUniforms(l,Ie,F)&&(z=Ie))}const J=ue=>ue&&ue.demTexture&&this.painter.linearFloatFilteringSupported()?B.LINEAR:B.NEAREST;let oe=null;var se;if(this.enabled?K&&z?(oe=z.demTexture,C.activeTexture.set(B.TEXTURE4),K.demTexture.bind(J(K),B.CLAMP_TO_EDGE),F.u_dem_lerp=X):(z=this.terrainTileForTile[l.tileID.key],oe=this._prepareDemTileUniforms(l,z,F)?z.demTexture:this.emptyDEMTexture):oe=this.emptyDEMTexture,C.activeTexture.set(B.TEXTURE2),oe&&(F.u_dem_size=(se=oe).size[0]===1?1:se.size[0]-2,oe.bind(J(z),B.CLAMP_TO_EDGE)),this.painter.setupDepthForOcclusion(x&&x.useDepthForOcclusion,d,F),x&&x.useMeterToDem&&z){const ue=(1<<z.tileID.canonical.z)*i.bH(1,this.painter.transform.center.lat)*this.sourceCache.getSource().tileSize;F.u_meter_to_dem=ue}if(x&&x.labelPlaneMatrixInv&&(F.u_label_plane_matrix_inv=x.labelPlaneMatrixInv),d.setTerrainUniformValues(C,F),this.painter.transform.projection.name==="globe"){const ue=this.globeUniformValues(this.painter.transform,l.tileID.canonical,x&&x.useDenormalizedUpVectorScale);d.setGlobeUniformValues(C,ue)}}globeUniformValues(l,d,x){const C=l.projection;return{u_tile_tl_up:C.upVector(d,0,0),u_tile_tr_up:C.upVector(d,i.ag,0),u_tile_br_up:C.upVector(d,i.ag,i.ag),u_tile_bl_up:C.upVector(d,0,i.ag),u_tile_up_scale:x?i.cL(1):C.upVectorScale(d,l.center.lat,l.worldSize).metersToTile}}renderToBackBuffer(l){const d=this.painter,x=this.painter.context;l.length!==0&&(x.bindFramebuffer.set(null),x.viewport.set([0,0,d.width,d.height]),d.gpuTimingDeferredRenderStart(),this.renderingToTexture=!1,function(C,B,F,z,K){if(C.transform.projection.name==="globe")(function(X,J,oe,se,ue){const Ie=X.context,Se=Ie.gl;let Pe,Le;const $e=X.transform,rt=i.cC(X,Ie,$e),et=(Ct,Rt)=>{if(Le===Rt)return;const wn=[Ji[Rt],"PROJECTION_GLOBE_VIEW"];rt&&wn.push("CUSTOM_ANTIALIASING");const kn=X.isTileAffectedByFog(Ct);Pe=X.getOrCreateProgram("globeRaster",{defines:wn,overrideFog:kn}),Le=Rt},ft=X.colorModeForRenderPass(),dt=new mr(Se.LEQUAL,mr.ReadWrite,X.depthRangeFor3D);Ta.update(ue);const ht=i.cD($e),ut=[i.at($e.center.lng),i.aA($e.center.lat)],xt=X.globeSharedBuffers,Bt=[$e.width*i.q.devicePixelRatio,$e.height*i.q.devicePixelRatio],an=Float32Array.from($e.globeMatrix),tn={useDenormalizedUpVectorScale:!0};{const Ct=X.transform,Rt=hm(Ct.zoom,J.exaggeration(),J.sourceCache._source.tileSize);Le=-1;const wn=Se.TRIANGLES;for(const kn of se){const Qn=oe.getTile(kn),Jt=Rr.disabled,In=J.prevTerrainTileForTile[kn.key],dn=J.terrainTileForTile[kn.key];_f(In,dn)&&Ta.newMorphing(kn.key,In,dn,ue,250),Ie.activeTexture.set(Se.TEXTURE0),Qn.texture&&Qn.texture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);const Dn=Ta.getMorphValuesForProxy(kn.key),Fn=Dn?1:0;Dn&&i.J(tn,{morphing:{srcDemTile:Dn.from,dstDemTile:Dn.to,phase:i.cB(Dn.phase)}});const bn=i.cE(kn.canonical),tr=i.cF(bn.getCenter().lat),nr=i.cG(kn.canonical,bn,tr,Ct.worldSize/Ct._pixelsPerMercatorPixel),Yn=i.bb(i.cH(kn.canonical)),hr=Fh(Ct.expandedFarZProjMatrix,an,ht,Yn,i.ae(Ct.zoom),ut,Ct.frustumCorners.TL,Ct.frustumCorners.TR,Ct.frustumCorners.BR,Ct.frustumCorners.BL,Ct.globeCenterInViewSpace,Ct.globeRadius,Bt,Rt,Ct._farZ,nr);if(et(kn,Fn),Pe&&(J.setupElevationDraw(Qn,Pe,tn),X.uploadCommonUniforms(Ie,Pe,kn.toUnwrapped()),xt)){const[Zr,kr,Fr]=xt.getGridBuffers(tr,Rt!==0);Pe.draw(X,wn,dt,Jt,ft,Lr.backCCW,hr,"globe_raster",Zr,kr,Fr)}}}if(xt&&(X.renderDefaultNorthPole||X.renderDefaultSouthPole)){const Ct=["GLOBE_POLES","PROJECTION_GLOBE_VIEW"];rt&&Ct.push("CUSTOM_ANTIALIASING"),Pe=X.getOrCreateProgram("globeRaster",{defines:Ct});for(const Rt of se){const{x:wn,y:kn,z:Qn}=Rt.canonical,Jt=kn===0,In=kn===(1<<Qn)-1,[dn,Dn,Fn,bn]=xt.getPoleBuffers(Qn,!1);if(bn&&(Jt||In)){const tr=oe.getTile(Rt);Ie.activeTexture.set(Se.TEXTURE0),tr.texture&&tr.texture.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);let nr=i.cI(Qn,wn,$e);const Yn=i.bb(i.cH(Rt.canonical)),hr=(Zr,kr)=>Zr.draw(X,Se.TRIANGLES,dt,Rr.disabled,ft,Lr.disabled,Fh($e.expandedFarZProjMatrix,nr,nr,Yn,0,ut,$e.frustumCorners.TL,$e.frustumCorners.TR,$e.frustumCorners.BR,$e.frustumCorners.BL,$e.globeCenterInViewSpace,$e.globeRadius,Bt,0,$e._farZ),"globe_pole_raster",kr,Fn,bn);J.setupElevationDraw(tr,Pe,tn),X.uploadCommonUniforms(Ie,Pe,Rt.toUnwrapped()),Jt&&X.renderDefaultNorthPole&&hr(Pe,dn),In&&X.renderDefaultSouthPole&&(nr=i.ab.mat4.scale(i.ab.mat4.create(),nr,[1,-1,1]),hr(Pe,Dn))}}}})(C,B,F,z,K);else{const X=C.context,J=X.gl;let oe,se;const ue=C.shadowRenderer,Ie=rc(C,C.longestCutoffRange),Se=ft=>{if(se===ft)return;const dt=[];dt.push(Ji[ft]),Ie.shouldRenderCutoff&&dt.push("RENDER_CUTOFF"),ue&&(dt.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ue.useNormalOffset&&dt.push("NORMAL_OFFSET")),oe=C.getOrCreateProgram("terrainRaster",{defines:dt}),se=ft},Pe=C.colorModeForRenderPass(),Le=new mr(J.LEQUAL,mr.ReadWrite,C.depthRangeFor3D);Ta.update(K);const $e=C.transform,rt=hm($e.zoom,B.exaggeration(),B.sourceCache._source.tileSize);let et=[0,0,0];if(ue){const ft=C.style.directionalLight,dt=C.style.ambientLight;ft&&dt&&(et=Sc(C.style,ft,dt))}{se=-1;const ft=J.TRIANGLES,[dt,ht]=[B.gridIndexBuffer,B.gridSegments];for(const ut of z){const xt=F.getTile(ut),Bt=Rr.disabled,an=B.prevTerrainTileForTile[ut.key],tn=B.terrainTileForTile[ut.key];_f(an,tn)&&Ta.newMorphing(ut.key,an,tn,K,250),X.activeTexture.set(J.TEXTURE0),xt.texture&&xt.texture.bind(J.LINEAR,J.CLAMP_TO_EDGE);const Ct=Ta.getMorphValuesForProxy(ut.key),Rt=Ct?1:0;let wn;Ct&&(wn={morphing:{srcDemTile:Ct.from,dstDemTile:Ct.to,phase:i.cB(Ct.phase)}});const kn=ct(ut.projMatrix,Ph(ut.canonical,$e.renderWorldCopies)?rt/10:rt,et);if(Se(Rt),!oe)continue;B.setupElevationDraw(xt,oe,wn);const Qn=ut.toUnwrapped();ue&&ue.setupShadows(Qn,oe),C.uploadCommonUniforms(X,oe,Qn,null,Ie),oe.draw(C,ft,Le,Bt,Pe,Lr.backCCW,kn,"terrain_raster",B.gridBuffer,dt,ht)}}}}(d,this,this.proxySourceCache,l,this._updateTimestamp),this.renderingToTexture=!0,d.gpuTimingDeferredRenderEnd(),l.splice(0,l.length))}renderBatch(l){if(this._drapedRenderBatches.length===0)return l+1;this.renderingToTexture=!0;const d=this.painter,x=this.painter.context,C=this.proxySourceCache,B=this.proxiedCoords[C.id],F=this._drapedRenderBatches.shift(),z=d.style.order,K=[];let X=0;for(const J of B){const oe=C.getTileByID(J.proxyTileKey),se=C.proxyCachedFBO[J.key]?C.proxyCachedFBO[J.key][l]:void 0,ue=se!==void 0?C.renderCache[se]:this.pool[X++],Ie=se!==void 0;if(oe.texture=ue.tex,Ie&&!ue.dirty){K.push(oe.tileID);continue}let Se;x.bindFramebuffer.set(ue.fb.framebuffer),this.renderedToTile=!1,ue.dirty&&(x.clear({color:i.aj.transparent,stencil:0}),ue.dirty=!1);for(let Pe=F.start;Pe<=F.end;++Pe){const Le=d.style._mergedLayers[z[Pe]];if(Le.isHidden(d.transform.zoom))continue;const $e=d.style.getLayerSourceCache(Le),rt=$e?this.proxyToSource[J.key][$e.id]:[J];if(!rt)continue;const et=rt;x.viewport.set([0,0,ue.fb.width,ue.fb.height]),Se!==($e?$e.id:null)&&(this._setupStencil(ue,rt,Le,$e),Se=$e?$e.id:null),d.renderLayer(d,$e,Le,et)}if(this._drapedRenderBatches.length===0)for(const Pe of this._pendingGroundEffectLayers){const Le=d.style._mergedLayers[z[Pe]];if(Le.isHidden(d.transform.zoom))continue;const $e=d.style.getLayerSourceCache(Le),rt=$e?this.proxyToSource[J.key][$e.id]:[J];if(!rt)continue;const et=rt;x.viewport.set([0,0,ue.fb.width,ue.fb.height]),Se!==($e?$e.id:null)&&(this._setupStencil(ue,rt,Le,$e),Se=$e?$e.id:null),d.renderLayer(d,$e,Le,et)}this.renderedToTile?(ue.dirty=!0,K.push(oe.tileID)):Ie||--X,X===5&&(X=0,this.renderToBackBuffer(K))}return this.renderToBackBuffer(K),this.renderingToTexture=!1,x.bindFramebuffer.set(null),x.viewport.set([0,0,d.width,d.height]),F.end+1}postRender(){}isLayerOrderingCorrect(l){const d=l.order.length;let x=-1,C=d;for(let B=0;B<d;++B)this._style.isLayerDraped(l._mergedLayers[l.order[B]])?x=Math.max(x,B):C=Math.min(C,B);return C>x}getMinElevationBelowMSL(){let l=0;return this._visibleDemTiles.filter(d=>d.dem).forEach(d=>{l=Math.min(l,d.dem.tree.minimums[0])}),l===0?l:(l-30)*this._exaggeration}raycast(l,d,x){if(!this._visibleDemTiles)return null;const C=this._visibleDemTiles.filter(B=>B.dem).map(B=>{const F=B.tileID,z=1<<F.overscaledZ,{x:K,y:X}=F.canonical,J=K/z,oe=(K+1)/z,se=X/z,ue=(X+1)/z;return{minx:J,miny:se,maxx:oe,maxy:ue,t:B.dem.tree.raycastRoot(J,se,oe,ue,l,d,x),tile:B}});C.sort((B,F)=>(B.t!==null?B.t:Number.MAX_VALUE)-(F.t!==null?F.t:Number.MAX_VALUE));for(const B of C){if(B.t==null)return null;const F=B.tile.dem.tree.raycast(B.minx,B.miny,B.maxx,B.maxy,l,d,x);if(F!=null)return F}return null}_createFBO(){const l=this.painter.context,d=l.gl,x=this.drapeBufferSize;l.activeTexture.set(d.TEXTURE0);const C=new i.T(l,{width:x[0],height:x[1],data:null},d.RGBA8);C.bind(d.LINEAR,d.CLAMP_TO_EDGE);const B=l.createFramebuffer(x[0],x[1],!0,null);return B.colorAttachment.set(C.texture),B.depthAttachment=new ul(l,B.framebuffer),this._sharedDepthStencil===void 0?(this._sharedDepthStencil=l.createRenderbuffer(l.gl.DEPTH_STENCIL,x[0],x[1]),this._stencilRef=0,B.depthAttachment.set(this._sharedDepthStencil),l.clear({stencil:0})):B.depthAttachment.set(this._sharedDepthStencil),l.extTextureFilterAnisotropic&&d.texParameterf(d.TEXTURE_2D,l.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,l.extTextureFilterAnisotropicMax),{fb:B,tex:C,dirty:!1}}_initFBOPool(){for(;this.pool.length<Math.min(5,this.proxyCoords.length);)this.pool.push(this._createFBO())}_shouldDisableRenderCache(){if(this._debugParams.disableRenderCache||this._style.hasLightTransitions())return!0;for(const l in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[l].hasTransition())return!0;return this._style.order.some(l=>{const d=this._style._mergedLayers[l],x=d.isHidden(this.painter.transform.zoom);return d.type==="hillshade"||d.type==="custom"?!x&&d.shouldRedrape():!x&&d.hasTransition()})}_clearLineLayersFromRenderCache(){let l=!1;for(const x of this._style.getSources())if(x instanceof so){l=!0;break}if(!l)return;const d={};for(let x=0;x<this._style.order.length;++x){const C=this._style._mergedLayers[this._style.order[x]],B=this._style.getLayerSourceCache(C);if(B&&!d[B.id]&&!C.isHidden(this.painter.transform.zoom)&&C.type==="line"&&C.widthExpression()instanceof i.a9){d[B.id]=!0;for(const F of this.proxyCoords){const z=this.proxyToSource[F.key][B.id];if(z)for(const K of z)this._clearRenderCacheForTile(B.id,K)}}}}_clearRasterLayersFromRenderCache(){let l=!1;for(const x in this._style._mergedSourceCaches)if(this._style._mergedSourceCaches[x]._source instanceof Jl){l=!0;break}if(!l)return;const d={};for(let x=0;x<this._style.order.length;++x){const C=this._style._mergedLayers[this._style.order[x]],B=this._style.getLayerSourceCache(C);if(!B||d[B.id]||C.isHidden(this.painter.transform.zoom)||C.type!=="raster")continue;const F=C.paint.get("raster-fade-duration");for(const z of this.proxyCoords){const K=this.proxyToSource[z.key][B.id];if(K)for(const X of K){const J=sc(B.getTile(X),B.findLoadedParent(X,0),B,this.painter.transform,F);(J.opacity!==1||J.mix!==0)&&this._clearRenderCacheForTile(B.id,X)}}}}_setupDrapedRenderBatches(){this._style.updateDrapeFirstLayers();const l=this._style.order,d=l.length;if(d===0)return;const x=[];this._pendingGroundEffectLayers=[];let C,B=0,F=this._style._mergedLayers[l[B]];for(;!this._style.isLayerDraped(F)&&F.isHidden(this.painter.transform.zoom)&&++B<d;)F=this._style._mergedLayers[l[B]];for(;B<d;++B){const z=this._style._mergedLayers[l[B]];z.isHidden(this.painter.transform.zoom)||(this._style.isLayerDraped(z)?C===void 0&&(C=B):(z.type==="fill-extrusion"&&this._pendingGroundEffectLayers.push(B),C!==void 0&&(x.push({start:C,end:B-1}),C=void 0)))}if(C!==void 0&&x.push({start:C,end:B-1}),x.length!==0){const z=x[x.length-1];this._pendingGroundEffectLayers.every(K=>K>z.end)||i.w("fill-extrusion with flood lighting and/or ground ambient occlusion should be moved to be on top of all draped layers.")}this._drapedRenderBatches=x}_setupRenderCache(l){const d=this.proxySourceCache;if(this._shouldDisableRenderCache()||this.invalidateRenderCache){if(this.invalidateRenderCache=!1,d.renderCache.length>d.renderCachePool.length){const F=Object.values(d.proxyCachedFBO);d.proxyCachedFBO={};for(let z=0;z<F.length;++z){const K=Object.values(F[z]);d.renderCachePool.push(...K)}}return}this._clearRasterLayersFromRenderCache();const x=this.proxyCoords,C=this._tilesDirty;for(let F=x.length-1;F>=0;F--){const z=x[F];if(d.getTileByID(z.key),d.proxyCachedFBO[z.key]!==void 0){const K=l[z.key],X=this.proxyToSource[z.key];let J=0;for(const oe in X){const se=X[oe],ue=K[oe];if(!ue||ue.length!==se.length||se.some((Ie,Se)=>Ie!==ue[Se]||C[oe]&&C[oe].hasOwnProperty(Ie.key))){J=-1;break}++J}for(const oe in d.proxyCachedFBO[z.key])d.renderCache[d.proxyCachedFBO[z.key][oe]].dirty=J<0||J!==Object.values(K).length}}const B=[...this._drapedRenderBatches];B.sort((F,z)=>z.end-z.start-(F.end-F.start));for(const F of B)for(const z of x){if(d.proxyCachedFBO[z.key])continue;let K=d.renderCachePool.pop();K===void 0&&d.renderCache.length<50&&(K=d.renderCache.length,d.renderCache.push(this._createFBO())),K!==void 0&&(d.proxyCachedFBO[z.key]={},d.proxyCachedFBO[z.key][F.start]=K,d.renderCache[K].dirty=!0)}this._tilesDirty={}}_setupStencil(l,d,x,C){if(!C||!this._sourceTilesOverlap[C.id])return void(this._overlapStencilType&&(this._overlapStencilType=!1));const B=this.painter.context,F=B.gl;if(d.length<=1)return void(this._overlapStencilType=!1);let z;if(x.isTileClipped())z=d.length,this._overlapStencilMode.test={func:F.EQUAL,mask:255},this._overlapStencilType="Clip";else{if(!(d[0].overscaledZ>d[d.length-1].overscaledZ))return void(this._overlapStencilType=!1);z=1,this._overlapStencilMode.test={func:F.GREATER,mask:255},this._overlapStencilType="Mask"}this._stencilRef+z>255&&(B.clear({stencil:0}),this._stencilRef=0),this._stencilRef+=z,this._overlapStencilMode.ref=this._stencilRef,x.isTileClipped()&&this._renderTileClippingMasks(d,this._overlapStencilMode.ref)}clipOrMaskOverlapStencilType(){return this._overlapStencilType==="Clip"||this._overlapStencilType==="Mask"}stencilModeForRTTOverlap(l){return this.renderingToTexture&&this._overlapStencilType?(this._overlapStencilType==="Clip"&&(this._overlapStencilMode.ref=this.painter._tileClippingMaskIDs[l.key]),this._overlapStencilMode):Rr.disabled}_renderTileClippingMasks(l,d){const x=this.painter,C=this.painter.context,B=C.gl;x._tileClippingMaskIDs={},C.setColorMode(Mr.disabled),C.setDepthMode(mr.disabled);const F=x.getOrCreateProgram("clippingMask");for(const z of l){const K=x._tileClippingMaskIDs[z.key]=--d;F.draw(x,B.TRIANGLES,mr.disabled,new Rr({func:B.ALWAYS,mask:0},K,255,B.KEEP,B.KEEP,B.REPLACE),Mr.disabled,Lr.disabled,kh(z.projMatrix),"$clipping",x.tileExtentBuffer,x.quadTriangleIndexBuffer,x.tileExtentSegments)}}pointCoordinate(l){const d=this.painter.transform;if(l.x<0||l.x>d.width||l.y<0||l.y>d.height)return null;const x=[l.x,l.y,1,1];i.ab.vec4.transformMat4(x,x,d.pixelMatrixInverse),i.ab.vec4.scale(x,x,1/x[3]),x[0]/=d.worldSize,x[1]/=d.worldSize;const C=d._camera.position,B=i.bH(1,d.center.lat),F=[C[0],C[1],C[2]/B,0],z=i.ab.vec3.subtract([],x.slice(0,3),F);i.ab.vec3.normalize(z,z);const K=this.raycast(F,z,this._exaggeration);return K!==null&&K?(i.ab.vec3.scaleAndAdd(F,F,z,K),F[3]=F[2],F[2]*=B,F):null}_setupProxiedCoordsForOrtho(l,d,x){if(l.getSource()instanceof i.aJ)return this._setupProxiedCoordsForImageSource(l,d,x);this._findCoveringTileCache[l.id]=this._findCoveringTileCache[l.id]||{};const C=this.proxiedCoords[l.id]=[],B=this.proxyCoords;for(let K=0;K<B.length;K++){const X=B[K],J=this._findTileCoveringTileID(X,l);if(J){const oe=this._createProxiedId(X,J,x[X.key]&&x[X.key][l.id]);C.push(oe),this.proxyToSource[X.key][l.id]=[oe]}}let F=!1;const z=new Set;for(let K=0;K<d.length;K++){const X=l.getTile(d[K]);if(!X||!X.hasData())continue;const J=this._findTileCoveringTileID(X.tileID,this.proxySourceCache);if(J&&J.tileID.canonical.z!==X.tileID.canonical.z){const oe=this.proxyToSource[J.tileID.key][l.id],se=this._createProxiedId(J.tileID,X,x[J.tileID.key]&&x[J.tileID.key][l.id]);oe?oe.splice(oe.length-1,0,se):this.proxyToSource[J.tileID.key][l.id]=[se];const ue=this.proxyToSource[J.tileID.key][l.id];z.has(ue)||z.add(ue),C.push(se),F=!0}}if(this._sourceTilesOverlap[l.id]=F,F&&this._debugParams.sortTilesHiZFirst)for(const K of z)K.sort((X,J)=>J.overscaledZ-X.overscaledZ)}_setupProxiedCoordsForImageSource(l,d,x){if(!l.getSource().loaded())return;const C=this.proxiedCoords[l.id]=[],B=this.proxyCoords,F=l.getSource(),z=F.tileID;if(!z)return;const K=new i.P(z.x,z.y)._div(1<<z.z),X=F.coordinates.map(i.aa.fromLngLat).reduce((oe,se)=>(oe.min.x=Math.min(oe.min.x,se.x-K.x),oe.min.y=Math.min(oe.min.y,se.y-K.y),oe.max.x=Math.max(oe.max.x,se.x-K.x),oe.max.y=Math.max(oe.max.y,se.y-K.y),oe),{min:new i.P(Number.MAX_VALUE,Number.MAX_VALUE),max:new i.P(-Number.MAX_VALUE,-Number.MAX_VALUE)}),J=(oe,se)=>{const ue=oe.wrap+oe.canonical.x/(1<<oe.canonical.z),Ie=oe.canonical.y/(1<<oe.canonical.z),Se=i.ag/(1<<oe.canonical.z),Pe=se.wrap+se.canonical.x/(1<<se.canonical.z),Le=se.canonical.y/(1<<se.canonical.z);return ue+Se<Pe+X.min.x||ue>Pe+X.max.x||Ie+Se<Le+X.min.y||Ie>Le+X.max.y};for(let oe=0;oe<B.length;oe++){const se=B[oe];for(let ue=0;ue<d.length;ue++){const Ie=l.getTile(d[ue]);if(!Ie||!Ie.hasData()||J(se,Ie.tileID))continue;const Se=this._createProxiedId(se,Ie,x[se.key]&&x[se.key][l.id]),Pe=this.proxyToSource[se.key][l.id];Pe?Pe.push(Se):this.proxyToSource[se.key][l.id]=[Se],C.push(Se)}}}_createProxiedId(l,d,x){let C=this.orthoMatrix;if(x){const B=x.find(F=>F.key===d.tileID.key);if(B)return B}if(d.tileID.key!==l.key){const B=l.canonical.z-d.tileID.canonical.z;let F,z,K;C=i.ab.mat4.create();const X=d.tileID.wrap-l.wrap<<l.overscaledZ;B>0?(F=i.ag>>B,z=F*((d.tileID.canonical.x<<B)-l.canonical.x+X),K=F*((d.tileID.canonical.y<<B)-l.canonical.y)):(F=i.ag<<-B,z=i.ag*(d.tileID.canonical.x-(l.canonical.x+X<<-B)),K=i.ag*(d.tileID.canonical.y-(l.canonical.y<<-B))),i.ab.mat4.ortho(C,0,F,0,F,0,1),i.ab.mat4.translate(C,C,[z,K,0])}return new tA(d.tileID,l.key,C)}_findTileCoveringTileID(l,d){let x=d.getTile(l);if(x&&x.hasData())return x;const C=this._findCoveringTileCache[d.id],B=C[l.key];if(x=B?d.getTileByID(B):null,x&&x.hasData()||B===null)return x;let F=x?x.tileID:l,z=F.overscaledZ;const K=d.getSource().minzoom,X=[];if(!B){const oe=d.getSource().maxzoom;if(l.canonical.z>=oe){const se=l.canonical.z-oe;d.getSource().reparseOverscaled?(z=Math.max(l.canonical.z+2,d.transform.tileZoom),F=new i.aG(z,l.wrap,oe,l.canonical.x>>se,l.canonical.y>>se)):se!==0&&(z=oe,F=new i.aG(z,l.wrap,oe,l.canonical.x>>se,l.canonical.y>>se))}F.key!==l.key&&(X.push(F.key),x=d.getTile(F))}const J=oe=>{X.forEach(se=>{C[se]=oe}),X.length=0};for(z-=1;z>=K&&(!x||!x.hasData());z--){x&&J(x.tileID.key);const oe=F.calculateScaledKey(z);if(x=d.getTileByID(oe),x&&x.hasData())break;const se=C[oe];if(se===null)break;se===void 0?X.push(oe):x=d.getTileByID(se)}return J(x?x.tileID.key:null),x&&x.hasData()?x:null}findDEMTileFor(l){return this.enabled?this._findTileCoveringTileID(l,this.sourceCache):null}prepareDrawTile(){this.renderedToTile=!0}_clearRenderCacheForTile(l,d){let x=this._tilesDirty[l];x||(x=this._tilesDirty[l]={}),x[d.key]=!0}}function _0(v,l,d){const x=function(z,K,X){const J=i.ab.vec3.dot(K,z),oe=i.ab.vec3.dot(X,[.2126,.7152,.0722]),se=(Ie,Se,Pe)=>(1-Pe)*Ie+Pe*Se,ue=se(1-.3*Math.min(oe,1),1,Math.min(J+1,1));return se(.92,1,Math.asin(i.aw(K[2],-1,1))/Math.PI+.5)*ue}(v,[0,0,1],l),C=[0,0,0];i.ab.vec3.scale(C,d.slice(0,3),x);const B=[0,0,0];i.ab.vec3.scale(B,l.slice(0,3),v[2]);const F=[0,0,0];return i.ab.vec3.add(F,C,B),i.cf(F)}const id=["fill","fillOutline","fillPattern","line","linePattern","background","backgroundPattern","hillshade","raster"],nA=["stars","rainParticle","snowParticle","fillExtrusion","fillExtrusionGroundEffect","model","symbol"];class w0{static cacheKey(l,d,x,C){let B=`${d}${C?C.cacheKey:""}`;for(const F of x)l.usedDefines.includes(F)&&(B+=`/${F}`);return B}constructor(l,d,x,C,B,F){const z=l.gl;this.program=z.createProgram(),this.configuration=C,this.name=d,this.fixedDefines=[...F];const K=C?C.getBinderAttributes():[],X=(x.staticAttributes||[]).concat(K);let J=C?C.defines():[];J=J.concat(F.map(Pe=>`#define ${Pe}`));const oe=`#version 300 es
`;let se=oe+J.concat("precision mediump float;",Jo,lo.fragmentSource).join(`
`);for(const Pe of x.fragmentIncludes)se+=`
${za[Pe]}`;se+=`
${x.fragmentSource}`;let ue=oe+J.concat("precision highp float;",Jo,lo.vertexSource).join(`
`);for(const Pe of x.vertexIncludes)ue+=`
${za[Pe]}`;this.forceManualRenderingForInstanceIDShaders=l.forceManualRenderingForInstanceIDShaders&&x.vertexSource.indexOf("gl_InstanceID")!==-1,this.forceManualRenderingForInstanceIDShaders&&(ue+=`
uniform int u_instanceID;
`),ue+=`
${x.vertexSource}`,this.forceManualRenderingForInstanceIDShaders&&(ue=ue.replaceAll("gl_InstanceID","u_instanceID"));const Ie=z.createShader(z.FRAGMENT_SHADER);if(z.isContextLost())return void(this.failedToCreate=!0);z.shaderSource(Ie,se),z.compileShader(Ie),z.attachShader(this.program,Ie);const Se=z.createShader(z.VERTEX_SHADER);if(z.isContextLost())this.failedToCreate=!0;else{z.shaderSource(Se,ue),z.compileShader(Se),z.attachShader(this.program,Se),this.attributes={},this.numAttributes=X.length;for(let Pe=0;Pe<this.numAttributes;Pe++)if(X[Pe]){const Le=X[Pe].startsWith("a_")?X[Pe]:`a_${X[Pe]}`;z.bindAttribLocation(this.program,Pe,Le),this.attributes[Le]=Pe}z.linkProgram(this.program),z.deleteShader(Se),z.deleteShader(Ie),this.fixedUniforms=B(l),this.binderUniforms=C?C.getUniforms(l):[],this.forceManualRenderingForInstanceIDShaders&&(this.instancingUniforms=(Pe=>({u_instanceID:new i.bN(Pe)}))(l)),(F.includes("TERRAIN")||d.indexOf("symbol")!==-1||d.indexOf("circle")!==-1)&&(this.terrainUniforms=(Pe=>({u_dem:new i.bN(Pe),u_dem_prev:new i.bN(Pe),u_dem_tl:new i.bK(Pe),u_dem_scale:new i.bM(Pe),u_dem_tl_prev:new i.bK(Pe),u_dem_scale_prev:new i.bM(Pe),u_dem_size:new i.bM(Pe),u_dem_lerp:new i.bM(Pe),u_exaggeration:new i.bM(Pe),u_depth:new i.bN(Pe),u_depth_size_inv:new i.bK(Pe),u_depth_range_unpack:new i.bK(Pe),u_occluder_half_size:new i.bM(Pe),u_occlusion_depth_offset:new i.bM(Pe),u_meter_to_dem:new i.bM(Pe),u_label_plane_matrix_inv:new i.bJ(Pe)}))(l)),F.includes("GLOBE")&&(this.globeUniforms=(Pe=>({u_tile_tl_up:new i.bL(Pe),u_tile_tr_up:new i.bL(Pe),u_tile_br_up:new i.bL(Pe),u_tile_bl_up:new i.bL(Pe),u_tile_up_scale:new i.bM(Pe)}))(l)),F.includes("FOG")&&(this.fogUniforms=(Pe=>({u_fog_matrix:new i.bJ(Pe),u_fog_range:new i.bK(Pe),u_fog_color:new i.ca(Pe),u_fog_horizon_blend:new i.bM(Pe),u_fog_vertical_limit:new i.bK(Pe),u_fog_temporal_offset:new i.bM(Pe),u_frustum_tl:new i.bL(Pe),u_frustum_tr:new i.bL(Pe),u_frustum_br:new i.bL(Pe),u_frustum_bl:new i.bL(Pe),u_globe_pos:new i.bL(Pe),u_globe_radius:new i.bM(Pe),u_globe_transition:new i.bM(Pe),u_is_globe:new i.bN(Pe),u_viewport:new i.bK(Pe)}))(l)),F.includes("RENDER_CUTOFF")&&(this.cutoffUniforms=(Pe=>({u_cutoff_params:new i.ca(Pe)}))(l)),F.includes("LIGHTING_3D_MODE")&&(this.lightsUniforms=(Pe=>({u_lighting_ambient_color:new i.bL(Pe),u_lighting_directional_dir:new i.bL(Pe),u_lighting_directional_color:new i.bL(Pe),u_ground_radiance:new i.bL(Pe)}))(l)),F.includes("RENDER_SHADOWS")&&(this.shadowUniforms=(Pe=>({u_light_matrix_0:new i.bJ(Pe),u_light_matrix_1:new i.bJ(Pe),u_fade_range:new i.bK(Pe),u_shadow_normal_offset:new i.bL(Pe),u_shadow_intensity:new i.bM(Pe),u_shadow_texel_size:new i.bM(Pe),u_shadow_map_resolution:new i.bM(Pe),u_shadow_direction:new i.bL(Pe),u_shadow_bias:new i.bL(Pe),u_shadowmap_0:new i.bN(Pe),u_shadowmap_1:new i.bN(Pe)}))(l))}}setTerrainUniformValues(l,d){if(!this.terrainUniforms)return;const x=this.terrainUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const C in d)x[C]&&x[C].set(this.program,C,d[C])}}setGlobeUniformValues(l,d){if(!this.globeUniforms)return;const x=this.globeUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const C in d)x[C]&&x[C].set(this.program,C,d[C])}}setFogUniformValues(l,d){if(!this.fogUniforms)return;const x=this.fogUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const C in d)x[C].set(this.program,C,d[C])}}setCutoffUniformValues(l,d){if(!this.cutoffUniforms)return;const x=this.cutoffUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const C in d)x[C].set(this.program,C,d[C])}}setLightsUniformValues(l,d){if(!this.lightsUniforms)return;const x=this.lightsUniforms;if(!this.failedToCreate){l.program.set(this.program);for(const C in d)x[C].set(this.program,C,d[C])}}setShadowUniformValues(l,d){if(this.failedToCreate||!this.shadowUniforms)return;const x=this.shadowUniforms;l.program.set(this.program);for(const C in d)x[C].set(this.program,C,d[C])}_drawDebugWireframe(l,d,x,C,B,F,z,K,X,J){const oe=l.options.wireframe;if(oe.terrain===!1&&oe.layers2D===!1&&oe.layers3D===!1)return;const se=l.context;if(!(!(!oe.terrain||this.name!=="terrainRaster"&&this.name!=="globeRaster")||!(!oe.layers2D||l._terrain&&l._terrain.renderingToTexture||!id.includes(this.name))||!(!oe.layers3D||!nA.includes(this.name))))return;const ue=se.gl,Ie=l.wireframeDebugCache.getLinesFromTrianglesBuffer(l.frameCounter,B,se);if(!Ie)return;const Se=[...this.fixedDefines];Se.push("DEBUG_WIREFRAME");const Pe=l.getOrCreateProgram(this.name,{config:this.configuration,defines:Se});se.program.set(Pe.program);const Le=(et,ft,dt)=>{if(ft[et]&&dt[et])for(const ht in ft[et])dt[et][ht]&&dt[et][ht].set(dt.program,ht,ft[et][ht].current)};X&&X.setUniforms(Pe.program,se,Pe.binderUniforms,z,{zoom:K}),Le("fixedUniforms",this,Pe),Le("terrainUniforms",this,Pe),Le("globeUniforms",this,Pe),Le("fogUniforms",this,Pe),Le("lightsUniforms",this,Pe),Le("shadowUniforms",this,Pe),Ie.bind(),se.setColorMode(new Mr([ue.ONE,ue.ONE_MINUS_SRC_ALPHA,ue.ZERO,ue.ONE],i.aj.transparent,[!0,!0,!0,!1])),se.setDepthMode(new mr(d.func===ue.LESS?ue.LEQUAL:d.func,mr.ReadOnly,d.range)),se.setStencilMode(Rr.disabled);const $e=3*F.primitiveLength*2,rt=3*F.primitiveOffset*2*2;if(this.forceManualRenderingForInstanceIDShaders){const et=J||1;for(let ft=0;ft<et;++ft)Pe.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",ft),ue.drawElements(ue.LINES,$e,ue.UNSIGNED_SHORT,rt)}else J&&J>1?ue.drawElementsInstanced(ue.LINES,$e,ue.UNSIGNED_SHORT,rt,J):ue.drawElements(ue.LINES,$e,ue.UNSIGNED_SHORT,rt);B.bind(),se.program.set(this.program),se.setDepthMode(d),se.setStencilMode(x),se.setColorMode(C)}checkUniforms(l,d,x){if(this.fixedDefines.includes(d)){for(const C of Object.keys(x))if(!x[C].initialized)throw new Error(`Program '${this.name}', from draw '${l}': uniform ${C} not set but required by ${d} being defined`)}}draw(l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe){const Le=l.context,$e=Le.gl;if(this.failedToCreate)return;Le.program.set(this.program),Le.setDepthMode(x),Le.setStencilMode(C),Le.setColorMode(B),Le.setCullFace(F);for(const ft of Object.keys(this.fixedUniforms))this.fixedUniforms[ft].set(this.program,ft,z[ft]);Ie&&Ie.setUniforms(this.program,Le,this.binderUniforms,se,{zoom:ue});const rt={[$e.POINTS]:1,[$e.LINES]:2,[$e.TRIANGLES]:3,[$e.LINE_STRIP]:1}[d];this.checkUniforms(K,"RENDER_SHADOWS",this.shadowUniforms);const et=Pe&&Pe>0?1:void 0;for(const ft of oe.get()){const dt=ft.vaos||(ft.vaos={});if((dt[K]||(dt[K]=new zc)).bind(Le,this,X,Ie?Ie.getPaintVertexBuffers():[],J,ft.vertexOffset,Se||[],et),this.forceManualRenderingForInstanceIDShaders){const ht=Pe||1;for(let ut=0;ut<ht;++ut)this.instancingUniforms.u_instanceID.set(this.program,"u_instanceID",ut),J?$e.drawElements(d,ft.primitiveLength*rt,$e.UNSIGNED_SHORT,ft.primitiveOffset*rt*2):$e.drawArrays(d,ft.vertexOffset,ft.vertexLength)}else Pe&&Pe>1?$e.drawElementsInstanced(d,ft.primitiveLength*rt,$e.UNSIGNED_SHORT,ft.primitiveOffset*rt*2,Pe):J?$e.drawElements(d,ft.primitiveLength*rt,$e.UNSIGNED_SHORT,ft.primitiveOffset*rt*2):$e.drawArrays(d,ft.vertexOffset,ft.vertexLength);d===$e.TRIANGLES&&J&&this._drawDebugWireframe(l,x,C,B,J,ft,se,ue,Ie,Pe)}}}function b0(v,l){const d=Math.pow(2,l.tileID.overscaledZ),x=l.tileSize*Math.pow(2,v.transform.tileZoom)/d,C=x*(l.tileID.canonical.x+l.tileID.wrap*d),B=x*l.tileID.canonical.y;return{u_image:0,u_texsize:l.imageAtlasTexture?l.imageAtlasTexture.size:[0,0],u_tile_units_to_pixels:1/i.ar(l,1,v.transform.tileZoom),u_pixel_coord_upper:[C>>16,B>>16],u_pixel_coord_lower:[65535&C,65535&B]}}const rA={terrain:0,flat:1},uv=i.ab.mat4.create(),Hc=(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe,Le)=>{const $e=l.style.light,rt=$e.properties.get("position"),et=[rt.x,rt.y,rt.z],ft=i.ab.mat3.create();$e.properties.get("anchor")==="viewport"&&(i.ab.mat3.fromRotation(ft,-l.transform.angle),i.ab.vec3.transformMat3(et,et,ft));const dt=$e.properties.get("color"),ht=l.transform,ut={u_matrix:v,u_lightpos:et,u_lightintensity:$e.properties.get("intensity"),u_lightcolor:[dt.r,dt.g,dt.b],u_vertical_gradient:+d,u_opacity:x,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:uv,u_merc_center:[0,0],u_up_dir:[0,0,0],u_height_lift:0,u_height_type:rA[X],u_base_type:rA[J],u_ao:C,u_edge_radius:B,u_width_scale:F,u_flood_light_color:Ie,u_vertical_scale:Se,u_flood_light_intensity:Pe,u_ground_shadow_factor:Le};return ht.projection.name==="globe"&&(ut.u_tile_id=[z.canonical.x,z.canonical.y,1<<z.canonical.z],ut.u_zoom_transition=oe,ut.u_inv_rot_matrix=ue,ut.u_merc_center=se,ut.u_up_dir=ht.projection.upVector(new i.bT(0,0,0),se[0]*i.ag,se[1]*i.ag),ut.u_height_lift=K),ut},mp=(v,l,d,x,C,B)=>({u_matrix:v,u_edge_radius:l,u_width_scale:d,u_vertical_scale:x,u_height_type:rA[C],u_base_type:rA[B]}),iA=(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe)=>{const Le=Hc(v,l,d,x,C,B,F,z,X,J,oe,se,ue,Ie,Se,Pe,1,[0,0,0]),$e={u_height_factor:-Math.pow(2,z.overscaledZ)/K.tileSize/8};return i.l(Le,b0(l,K),$e)},Am=(v,l)=>({u_matrix:v,u_emissive_strength:l}),wf=(v,l,d,x)=>i.l(Am(v,l),b0(d,x)),G=(v,l,d)=>({u_matrix:v,u_world:d,u_emissive_strength:l}),ee=(v,l,d,x,C)=>i.l(wf(v,l,d,x),{u_world:C}),Ae=(v,l,d,x)=>{const C=i.ag/d.tileSize;return{u_matrix:v,u_camera_to_center_distance:l.getCameraToCenterDistance(x),u_extrude_scale:[l.pixelsToGLUnits[0]/C,l.pixelsToGLUnits[1]/C]}},Fe=(v,l,d=1)=>({u_matrix:v,u_color:l.toRenderColor(null),u_overlay:0,u_overlay_scale:d}),Ve=i.ab.mat4.create(),it=(v,l,d,x,C,B,F)=>{const z=v.transform,K=z.projection.name==="globe",X=K?i.cN(z.zoom,l.canonical)*z._pixelsPerMercatorPixel:i.ar(d,1,B),J={u_matrix:l.projMatrix,u_extrude_scale:X,u_intensity:F,u_inv_rot_matrix:Ve,u_merc_center:[0,0],u_tile_id:[0,0,0],u_zoom_transition:0,u_up_dir:[0,0,0]};if(K){J.u_inv_rot_matrix=x,J.u_merc_center=C,J.u_tile_id=[l.canonical.x,l.canonical.y,1<<l.canonical.z],J.u_zoom_transition=i.ae(z.zoom);const oe=C[0]*i.ag,se=C[1]*i.ag;J.u_up_dir=z.projection.upVector(new i.bT(0,0,0),oe,se)}return J};function st(v,[l,d,x,C],[B,F]){if(B===F)return[0,0,0,0];const z=255*(v-1)/(v*(F-B));return[l*z,d*z,x*z,C*z]}function lt(v,l,[d,x]){return d===x?0:.5/v+(l-d)*(v-1)/(v*(x-d))}const He=(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe,Le,$e,rt,et)=>({u_matrix:v,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:x,u_grid_matrix:C,u_tl_parent:B,u_scale_parent:X,u_fade_t:J.mix,u_opacity:J.opacity*oe.paint.get("raster-opacity"),u_image0:0,u_image1:1,u_brightness_low:oe.paint.get("raster-brightness-min"),u_brightness_high:oe.paint.get("raster-brightness-max"),u_saturation_factor:i.cO(oe.paint.get("raster-saturation")),u_contrast_factor:i.cP(oe.paint.get("raster-contrast")),u_spin_weights:St(oe.paint.get("raster-hue-rotate")),u_perspective_transform:se,u_raster_elevation:ue,u_zoom_transition:F,u_merc_center:z,u_cutoff_params:K,u_colorization_mix:st(i.cQ,Se,Le),u_colorization_offset:lt(i.cQ,Pe,Le),u_color_ramp:Ie,u_texture_offset:[rt/($e+2*rt),$e/($e+2*rt)],u_texture_res:[$e+2*rt,$e+2*rt],u_emissive_strength:et});function St(v){v*=Math.PI/180;const l=Math.sin(v),d=Math.cos(v);return[(2*d+1)/3,(-Math.sqrt(3)*l-d+1)/3,(Math.sqrt(3)*l-d+1)/3]}const on=.05,En=(v,l,d,x,C,B,F,z,K,X,J,oe)=>({u_matrix:v,u_normalize_matrix:l,u_globe_matrix:d,u_merc_matrix:x,u_grid_matrix:C,u_tl_parent:B,u_scale_parent:X,u_fade_t:J.mix,u_opacity:J.opacity,u_image0:0,u_image1:1,u_raster_elevation:oe,u_zoom_transition:F,u_merc_center:z,u_cutoff_params:K}),Tn=(v,l,d,x,C,B,F,z,K,X)=>({u_particle_texture:v,u_particle_texture_side_len:l,u_tile_offset:d,u_velocity:x,u_color_ramp:B,u_velocity_res:C,u_max_speed:F,u_uv_offset:z,u_data_scale:[255*K[0],255*K[1]],u_data_offset:X,u_particle_pos_scale:1.1,u_particle_pos_offset:[on,on]}),It=(v,l,d,x,C,B,F,z,K,X)=>({u_particle_texture:v,u_particle_texture_side_len:l,u_velocity:d,u_velocity_res:x,u_max_speed:C,u_speed_factor:B,u_reset_rate:F,u_rand_seed:Math.random(),u_uv_offset:z,u_data_scale:[255*K[0],255*K[1]],u_data_offset:X,u_particle_pos_scale:1.1,u_particle_pos_offset:[on,on]}),er=i.ab.mat4.create(),zn=(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe,Le,$e,rt,et,ft)=>{const dt=C.transform,ht={u_is_size_zoom_constant:+(v==="constant"||v==="source"),u_is_size_feature_constant:+(v==="constant"||v==="camera"),u_size_t:l?l.uSizeT:0,u_size:l?l.uSize:0,u_camera_to_center_distance:dt.getCameraToCenterDistance($e),u_rotate_symbol:+d,u_aspect_ratio:dt.width/dt.height,u_fade_change:C.options.fadeDuration?C.symbolFadeChange:1,u_matrix:B,u_label_plane_matrix:F,u_coord_matrix:z,u_is_text:+X,u_elevation_from_sea:K?1:0,u_pitch_with_map:+x,u_texsize:J,u_texsize_icon:oe,u_texture:0,u_texture_icon:1,u_tile_id:[0,0,0],u_zoom_transition:0,u_inv_rot_matrix:er,u_merc_center:[0,0],u_camera_forward:[0,0,0],u_ecef_origin:[0,0,0],u_tile_matrix:er,u_up_vector:[0,-1,0],u_color_adj_mat:rt,u_icon_transition:et||0,u_gamma_scale:x?C.transform.getCameraToCenterDistance($e)*Math.cos(C.terrain?0:C.transform._pitch):1,u_device_pixel_ratio:i.q.devicePixelRatio,u_is_halo:+se,u_scale_factor:ft||1};return $e.name==="globe"&&(ht.u_tile_id=[ue.canonical.x,ue.canonical.y,1<<ue.canonical.z],ht.u_zoom_transition=Ie,ht.u_inv_rot_matrix=Pe,ht.u_merc_center=Se,ht.u_camera_forward=dt._camera.forward(),ht.u_ecef_origin=i.cR(dt.globeMatrix,ue.toUnwrapped()),ht.u_tile_matrix=Float32Array.from(dt.globeMatrix),ht.u_up_vector=Le),ht},un=(v,l,d,x)=>({u_matrix:v,u_emissive_strength:l,u_opacity:d,u_color:x}),An=(v,l,d,x,C,B,F,z,K)=>i.l(function(X,J,oe,se,ue,Ie){const{width:Se,height:Pe}=se.imageManager.getPixelSize(J),Le=Math.pow(2,Ie.tileID.overscaledZ),$e=Ie.tileSize*Math.pow(2,se.transform.tileZoom)/Le,rt=$e*(Ie.tileID.canonical.x+Ie.tileID.wrap*Le),et=$e*Ie.tileID.canonical.y;return{u_image:0,u_pattern_tl:oe.tl,u_pattern_br:oe.br,u_texsize:[Se,Pe],u_pattern_size:oe.displaySize,u_pattern_units_to_pixels:ue?[se.transform.width,-1*se.transform.height]:[1/i.ar(Ie,1,se.transform.tileZoom),1/i.ar(Ie,1,se.transform.tileZoom)],u_pixel_coord_upper:[rt>>16,et>>16],u_pixel_coord_lower:[65535&rt,65535&et]}}(0,B,F,x,z,K),{u_matrix:v,u_emissive_strength:l,u_opacity:d}),Jn=new Float32Array(i.ab.mat4.identity([])),ur=(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue=[0,0,0],Ie)=>{const Se=C.style.light,Pe=Se.properties.get("position"),Le=[-Pe.x,-Pe.y,Pe.z],$e=i.ab.mat3.create();Se.properties.get("anchor")==="viewport"&&(i.ab.mat3.fromRotation($e,-C.transform.angle),i.ab.vec3.transformMat3(Le,Le,$e));const rt=J.alphaMode==="MASK",et=Se.properties.get("color").toRenderColor(null),ft=se.paint.get("model-ambient-occlusion-intensity"),dt=se.paint.get("model-color").constantOr(i.aj.white).toRenderColor(null),ht=se.paint.get("model-color-mix-intensity").constantOr(0);return{u_matrix:v,u_lighting_matrix:l,u_normal_matrix:d,u_node_matrix:x||Jn,u_lightpos:Le,u_lightintensity:Se.properties.get("intensity"),u_lightcolor:[et.r,et.g,et.b],u_camera_pos:ue,u_opacity:B,u_baseTextureIsAlpha:0,u_alphaMask:+rt,u_alphaCutoff:J.alphaCutoff,u_baseColorFactor:[F.r,F.g,F.b,F.a],u_emissiveFactor:[z[0],z[1],z[2],1],u_metallicFactor:K,u_roughnessFactor:X,u_baseColorTexture:na.BaseColor,u_metallicRoughnessTexture:na.MetallicRoughness,u_normalTexture:na.Normal,u_occlusionTexture:na.Occlusion,u_emissionTexture:na.Emission,u_lutTexture:na.LUT,u_color_mix:[dt.r,dt.g,dt.b,ht],u_aoIntensity:ft,u_emissive_strength:oe,u_occlusionTextureTransform:Ie||[0,0,0,0]}},Xn=(v,l=Jn,d=Jn)=>({u_matrix:v,u_instance:l,u_node_matrix:d}),Vr={fillExtrusion:v=>({u_matrix:new i.bJ(v),u_lightpos:new i.bL(v),u_lightintensity:new i.bM(v),u_lightcolor:new i.bL(v),u_vertical_gradient:new i.bM(v),u_opacity:new i.bM(v),u_edge_radius:new i.bM(v),u_width_scale:new i.bM(v),u_ao:new i.bK(v),u_height_type:new i.bN(v),u_base_type:new i.bN(v),u_tile_id:new i.bL(v),u_zoom_transition:new i.bM(v),u_inv_rot_matrix:new i.bJ(v),u_merc_center:new i.bK(v),u_up_dir:new i.bL(v),u_height_lift:new i.bM(v),u_flood_light_color:new i.bL(v),u_vertical_scale:new i.bM(v),u_flood_light_intensity:new i.bM(v),u_ground_shadow_factor:new i.bL(v)}),fillExtrusionDepth:v=>({u_matrix:new i.bJ(v),u_edge_radius:new i.bM(v),u_width_scale:new i.bM(v),u_vertical_scale:new i.bM(v),u_height_type:new i.bN(v),u_base_type:new i.bN(v)}),fillExtrusionPattern:v=>({u_matrix:new i.bJ(v),u_lightpos:new i.bL(v),u_lightintensity:new i.bM(v),u_lightcolor:new i.bL(v),u_vertical_gradient:new i.bM(v),u_height_factor:new i.bM(v),u_edge_radius:new i.bM(v),u_width_scale:new i.bM(v),u_ao:new i.bK(v),u_height_type:new i.bN(v),u_base_type:new i.bN(v),u_tile_id:new i.bL(v),u_zoom_transition:new i.bM(v),u_inv_rot_matrix:new i.bJ(v),u_merc_center:new i.bK(v),u_up_dir:new i.bL(v),u_height_lift:new i.bM(v),u_image:new i.bN(v),u_texsize:new i.bK(v),u_pixel_coord_upper:new i.bK(v),u_pixel_coord_lower:new i.bK(v),u_tile_units_to_pixels:new i.bM(v),u_opacity:new i.bM(v)}),fillExtrusionGroundEffect:v=>({u_matrix:new i.bJ(v),u_opacity:new i.bM(v),u_ao_pass:new i.bM(v),u_meter_to_tile:new i.bM(v),u_ao:new i.bK(v),u_flood_light_intensity:new i.bM(v),u_flood_light_color:new i.bL(v),u_attenuation:new i.bM(v),u_edge_radius:new i.bM(v),u_fb:new i.bN(v),u_fb_size:new i.bM(v),u_dynamic_offset:new i.bM(v)}),fill:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v)}),fillPattern:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_image:new i.bN(v),u_texsize:new i.bK(v),u_pixel_coord_upper:new i.bK(v),u_pixel_coord_lower:new i.bK(v),u_tile_units_to_pixels:new i.bM(v)}),fillOutline:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_world:new i.bK(v)}),fillOutlinePattern:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_world:new i.bK(v),u_image:new i.bN(v),u_texsize:new i.bK(v),u_pixel_coord_upper:new i.bK(v),u_pixel_coord_lower:new i.bK(v),u_tile_units_to_pixels:new i.bM(v)}),circle:i.cS,collisionBox:v=>({u_matrix:new i.bJ(v),u_camera_to_center_distance:new i.bM(v),u_extrude_scale:new i.bK(v)}),collisionCircle:v=>({u_matrix:new i.bJ(v),u_inv_matrix:new i.bJ(v),u_camera_to_center_distance:new i.bM(v),u_viewport_size:new i.bK(v)}),debug:v=>({u_color:new i.cz(v),u_matrix:new i.bJ(v),u_overlay:new i.bN(v),u_overlay_scale:new i.bM(v)}),clippingMask:v=>({u_matrix:new i.bJ(v)}),heatmap:v=>({u_extrude_scale:new i.bM(v),u_intensity:new i.bM(v),u_matrix:new i.bJ(v),u_inv_rot_matrix:new i.bJ(v),u_merc_center:new i.bK(v),u_tile_id:new i.bL(v),u_zoom_transition:new i.bM(v),u_up_dir:new i.bL(v)}),heatmapTexture:v=>({u_image:new i.bN(v),u_color_ramp:new i.bN(v),u_opacity:new i.bM(v)}),hillshade:v=>({u_matrix:new i.bJ(v),u_image:new i.bN(v),u_latrange:new i.bK(v),u_light:new i.bK(v),u_shadow:new i.cz(v),u_highlight:new i.cz(v),u_emissive_strength:new i.bM(v),u_accent:new i.cz(v)}),hillshadePrepare:v=>({u_matrix:new i.bJ(v),u_image:new i.bN(v),u_dimension:new i.bK(v),u_zoom:new i.bM(v)}),line:i.cT,linePattern:i.cU,raster:v=>({u_matrix:new i.bJ(v),u_normalize_matrix:new i.bJ(v),u_globe_matrix:new i.bJ(v),u_merc_matrix:new i.bJ(v),u_grid_matrix:new i.cA(v),u_tl_parent:new i.bK(v),u_scale_parent:new i.bM(v),u_fade_t:new i.bM(v),u_opacity:new i.bM(v),u_image0:new i.bN(v),u_image1:new i.bN(v),u_brightness_low:new i.bM(v),u_brightness_high:new i.bM(v),u_saturation_factor:new i.bM(v),u_contrast_factor:new i.bM(v),u_spin_weights:new i.bL(v),u_perspective_transform:new i.bK(v),u_raster_elevation:new i.bM(v),u_zoom_transition:new i.bM(v),u_merc_center:new i.bK(v),u_cutoff_params:new i.ca(v),u_colorization_mix:new i.ca(v),u_colorization_offset:new i.bM(v),u_color_ramp:new i.bN(v),u_texture_offset:new i.bK(v),u_texture_res:new i.bK(v),u_emissive_strength:new i.bM(v)}),rasterParticle:v=>({u_matrix:new i.bJ(v),u_normalize_matrix:new i.bJ(v),u_globe_matrix:new i.bJ(v),u_merc_matrix:new i.bJ(v),u_grid_matrix:new i.cA(v),u_tl_parent:new i.bK(v),u_scale_parent:new i.bM(v),u_fade_t:new i.bM(v),u_opacity:new i.bM(v),u_image0:new i.bN(v),u_image1:new i.bN(v),u_raster_elevation:new i.bM(v),u_zoom_transition:new i.bM(v),u_merc_center:new i.bK(v),u_cutoff_params:new i.ca(v)}),rasterParticleTexture:v=>({u_texture:new i.bN(v),u_opacity:new i.bM(v)}),rasterParticleDraw:v=>({u_particle_texture:new i.bN(v),u_particle_texture_side_len:new i.bM(v),u_tile_offset:new i.bK(v),u_velocity:new i.bN(v),u_color_ramp:new i.bN(v),u_velocity_res:new i.bK(v),u_max_speed:new i.bM(v),u_uv_offset:new i.bK(v),u_data_scale:new i.bK(v),u_data_offset:new i.bM(v),u_particle_pos_scale:new i.bM(v),u_particle_pos_offset:new i.bK(v)}),rasterParticleUpdate:v=>({u_particle_texture:new i.bN(v),u_particle_texture_side_len:new i.bM(v),u_velocity:new i.bN(v),u_velocity_res:new i.bK(v),u_max_speed:new i.bM(v),u_speed_factor:new i.bM(v),u_reset_rate:new i.bM(v),u_rand_seed:new i.bM(v),u_uv_offset:new i.bK(v),u_data_scale:new i.bK(v),u_data_offset:new i.bM(v),u_particle_pos_scale:new i.bM(v),u_particle_pos_offset:new i.bK(v)}),symbol:v=>({u_is_size_zoom_constant:new i.bN(v),u_is_size_feature_constant:new i.bN(v),u_size_t:new i.bM(v),u_size:new i.bM(v),u_camera_to_center_distance:new i.bM(v),u_rotate_symbol:new i.bN(v),u_aspect_ratio:new i.bM(v),u_fade_change:new i.bM(v),u_matrix:new i.bJ(v),u_label_plane_matrix:new i.bJ(v),u_coord_matrix:new i.bJ(v),u_is_text:new i.bN(v),u_elevation_from_sea:new i.bN(v),u_pitch_with_map:new i.bN(v),u_texsize:new i.bK(v),u_texsize_icon:new i.bK(v),u_texture:new i.bN(v),u_texture_icon:new i.bN(v),u_gamma_scale:new i.bM(v),u_device_pixel_ratio:new i.bM(v),u_tile_id:new i.bL(v),u_zoom_transition:new i.bM(v),u_inv_rot_matrix:new i.bJ(v),u_merc_center:new i.bK(v),u_camera_forward:new i.bL(v),u_tile_matrix:new i.bJ(v),u_up_vector:new i.bL(v),u_ecef_origin:new i.bL(v),u_is_halo:new i.bN(v),u_icon_transition:new i.bM(v),u_color_adj_mat:new i.bJ(v),u_scale_factor:new i.bM(v)}),background:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_opacity:new i.bM(v),u_color:new i.cz(v)}),backgroundPattern:v=>({u_matrix:new i.bJ(v),u_emissive_strength:new i.bM(v),u_opacity:new i.bM(v),u_image:new i.bN(v),u_pattern_tl:new i.bK(v),u_pattern_br:new i.bK(v),u_texsize:new i.bK(v),u_pattern_size:new i.bK(v),u_pixel_coord_upper:new i.bK(v),u_pixel_coord_lower:new i.bK(v),u_pattern_units_to_pixels:new i.bK(v)}),terrainRaster:v=>({u_matrix:new i.bJ(v),u_image0:new i.bN(v),u_skirt_height:new i.bM(v),u_ground_shadow_factor:new i.bL(v)}),skybox:v=>({u_matrix:new i.bJ(v),u_sun_direction:new i.bL(v),u_cubemap:new i.bN(v),u_opacity:new i.bM(v),u_temporal_offset:new i.bM(v)}),skyboxGradient:v=>({u_matrix:new i.bJ(v),u_color_ramp:new i.bN(v),u_center_direction:new i.bL(v),u_radius:new i.bM(v),u_opacity:new i.bM(v),u_temporal_offset:new i.bM(v)}),skyboxCapture:v=>({u_matrix_3f:new i.cA(v),u_sun_direction:new i.bL(v),u_sun_intensity:new i.bM(v),u_color_tint_r:new i.ca(v),u_color_tint_m:new i.ca(v),u_luminance:new i.bM(v)}),globeRaster:v=>({u_proj_matrix:new i.bJ(v),u_globe_matrix:new i.bJ(v),u_normalize_matrix:new i.bJ(v),u_merc_matrix:new i.bJ(v),u_zoom_transition:new i.bM(v),u_merc_center:new i.bK(v),u_image0:new i.bN(v),u_grid_matrix:new i.cA(v),u_skirt_height:new i.bM(v),u_far_z_cutoff:new i.bM(v),u_frustum_tl:new i.bL(v),u_frustum_tr:new i.bL(v),u_frustum_br:new i.bL(v),u_frustum_bl:new i.bL(v),u_globe_pos:new i.bL(v),u_globe_radius:new i.bM(v),u_viewport:new i.bK(v)}),globeAtmosphere:v=>({u_frustum_tl:new i.bL(v),u_frustum_tr:new i.bL(v),u_frustum_br:new i.bL(v),u_frustum_bl:new i.bL(v),u_horizon:new i.bM(v),u_transition:new i.bM(v),u_fadeout_range:new i.bM(v),u_color:new i.ca(v),u_high_color:new i.ca(v),u_space_color:new i.ca(v),u_temporal_offset:new i.bM(v),u_horizon_angle:new i.bM(v)}),model:v=>({u_matrix:new i.bJ(v),u_lighting_matrix:new i.bJ(v),u_normal_matrix:new i.bJ(v),u_node_matrix:new i.bJ(v),u_lightpos:new i.bL(v),u_lightintensity:new i.bM(v),u_lightcolor:new i.bL(v),u_camera_pos:new i.bL(v),u_opacity:new i.bM(v),u_baseColorFactor:new i.ca(v),u_emissiveFactor:new i.ca(v),u_metallicFactor:new i.bM(v),u_roughnessFactor:new i.bM(v),u_baseTextureIsAlpha:new i.bN(v),u_alphaMask:new i.bN(v),u_alphaCutoff:new i.bM(v),u_baseColorTexture:new i.bN(v),u_metallicRoughnessTexture:new i.bN(v),u_normalTexture:new i.bN(v),u_occlusionTexture:new i.bN(v),u_emissionTexture:new i.bN(v),u_lutTexture:new i.bN(v),u_color_mix:new i.ca(v),u_aoIntensity:new i.bM(v),u_emissive_strength:new i.bM(v),u_occlusionTextureTransform:new i.ca(v)}),modelDepth:v=>({u_matrix:new i.bJ(v),u_instance:new i.bJ(v),u_node_matrix:new i.bJ(v)}),groundShadow:v=>({u_matrix:new i.bJ(v),u_ground_shadow_factor:new i.bL(v)}),stars:v=>({u_matrix:new i.bJ(v),u_up:new i.bL(v),u_right:new i.bL(v),u_intensity_multiplier:new i.bM(v)}),snowParticle:v=>({u_modelview:new i.bJ(v),u_projection:new i.bJ(v),u_time:new i.bM(v),u_cam_pos:new i.bL(v),u_velocityConeAperture:new i.bM(v),u_velocity:new i.bM(v),u_horizontalOscillationRadius:new i.bM(v),u_horizontalOscillationRate:new i.bM(v),u_boxSize:new i.bM(v),u_billboardSize:new i.bM(v),u_simpleShapeParameters:new i.bK(v),u_screenSize:new i.bK(v),u_thinningCenterPos:new i.bK(v),u_thinningShape:new i.bL(v),u_thinningAffectedRatio:new i.bM(v),u_thinningParticleOffset:new i.bM(v),u_particleColor:new i.ca(v),u_direction:new i.bL(v)}),rainParticle:v=>({u_modelview:new i.bJ(v),u_projection:new i.bJ(v),u_time:new i.bM(v),u_cam_pos:new i.bL(v),u_texScreen:new i.bN(v),u_velocityConeAperture:new i.bM(v),u_velocity:new i.bM(v),u_boxSize:new i.bM(v),u_rainDropletSize:new i.bK(v),u_distortionStrength:new i.bM(v),u_rainDirection:new i.bL(v),u_color:new i.ca(v),u_screenSize:new i.bK(v),u_thinningCenterPos:new i.bK(v),u_thinningShape:new i.bL(v),u_thinningAffectedRatio:new i.bM(v),u_thinningParticleOffset:new i.bM(v),u_shapeDirectionalPower:new i.bM(v),u_shapeNormalPower:new i.bM(v),u_mode:new i.bM(v)}),vignette:v=>({u_vignetteShape:new i.bL(v),u_vignetteColor:new i.ca(v)}),occlusion:v=>({u_matrix:new i.bJ(v),u_anchorPos:new i.bL(v),u_screenSizePx:new i.bK(v),u_occluderSizePx:new i.bK(v),u_color:new i.ca(v)})};class wr{constructor(l,d,x,C){this.id=wr.uniqueIdxCounter,wr.uniqueIdxCounter++,this.context=l;const B=l.gl;this.buffer=B.createBuffer(),this.dynamicDraw=!!x,this.context.unbindVAO(),l.bindElementBuffer.set(this.buffer),B.bufferData(B.ELEMENT_ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?B.DYNAMIC_DRAW:B.STATIC_DRAW),this.dynamicDraw||C||d.destroy()}bind(){this.context.bindElementBuffer.set(this.buffer)}updateData(l){this.id=wr.uniqueIdxCounter,wr.uniqueIdxCounter++;const d=this.context.gl;this.context.unbindVAO(),this.bind(),d.bufferSubData(d.ELEMENT_ARRAY_BUFFER,0,l.arrayBuffer)}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}wr.uniqueIdxCounter=0;const ei={Int8:"BYTE",Uint8:"UNSIGNED_BYTE",Int16:"SHORT",Uint16:"UNSIGNED_SHORT",Int32:"INT",Uint32:"UNSIGNED_INT",Float32:"FLOAT"};class Nr{constructor(l,d,x,C,B,F){this.length=d.length,this.attributes=x,this.itemSize=d.bytesPerElement,this.dynamicDraw=C,this.instanceCount=F,this.context=l;const z=l.gl;this.buffer=z.createBuffer(),l.bindVertexBuffer.set(this.buffer),z.bufferData(z.ARRAY_BUFFER,d.arrayBuffer,this.dynamicDraw?z.DYNAMIC_DRAW:z.STATIC_DRAW),this.dynamicDraw||B||d.destroy()}bind(){this.context.bindVertexBuffer.set(this.buffer)}updateData(l){const d=this.context.gl;this.bind(),d.bufferSubData(d.ARRAY_BUFFER,0,l.arrayBuffer)}enableAttributes(l,d){for(let x=0;x<this.attributes.length;x++){const C=d.attributes[this.attributes[x].name];C!==void 0&&l.enableVertexAttribArray(C)}}setVertexAttribPointers(l,d,x){for(let C=0;C<this.attributes.length;C++){const B=this.attributes[C],F=d.attributes[B.name];F!==void 0&&l.vertexAttribPointer(F,B.components,l[ei[B.type]],!1,this.itemSize,B.offset+this.itemSize*(x||0))}}setVertexAttribDivisor(l,d,x){for(let C=0;C<this.attributes.length;C++){const B=d.attributes[this.attributes[C].name];B!==void 0&&this.instanceCount&&this.instanceCount>0&&l.vertexAttribDivisor(B,x)}}destroy(){this.buffer&&(this.context.gl.deleteBuffer(this.buffer),delete this.buffer)}}class Ts{constructor(l,d,x,C,B){this.context=l,this.width=d,this.height=x;const F=this.framebuffer=l.gl.createFramebuffer();C&&(this.colorAttachment=new gg(l,F)),B&&(this.depthAttachmentType=B,this.depthAttachment=B==="renderbuffer"?new jh(l,F):new Qc(l,F))}destroy(){const l=this.context.gl;if(this.colorAttachment){const d=this.colorAttachment.get();d&&l.deleteTexture(d)}if(this.depthAttachment&&this.depthAttachmentType)if(this.depthAttachmentType==="renderbuffer"){const d=this.depthAttachment.get();d&&l.deleteRenderbuffer(d)}else{const d=this.depthAttachment.get();d&&l.deleteTexture(d)}l.deleteFramebuffer(this.framebuffer)}}class rs{constructor(l,d){this.gl=l,this.clearColor=new Jp(this),this.clearDepth=new Eh(this),this.clearStencil=new Th(this),this.colorMask=new qd(this),this.depthMask=new cp(this),this.stencilMask=new eA(this),this.stencilFunc=new lm(this),this.stencilOp=new Af(this),this.stencilTest=new mf(this),this.depthRange=new up(this),this.depthTest=new gf(this),this.depthFunc=new dp(this),this.blend=new x0(this),this.blendFunc=new ic(this),this.blendColor=new xa(this),this.blendEquation=new Va(this),this.cullFace=new cm(this),this.cullFaceSide=new mg(this),this.frontFace=new um(this),this.program=new hp(this),this.activeTexture=new yf(this),this.viewport=new Bu(this),this.bindFramebuffer=new fp(this),this.bindRenderbuffer=new vf(this),this.bindTexture=new xf(this),this.bindVertexBuffer=new rd(this),this.bindElementBuffer=new dm(this),this.bindVertexArrayOES=new pp(this),this.pixelStoreUnpack=new cv(this),this.pixelStoreUnpackPremultiplyAlpha=new Ih(this),this.pixelStoreUnpackFlipY=new Eu(this),this.options=d?{...d}:{},this.options.extTextureFilterAnisotropicForceOff||(this.extTextureFilterAnisotropic=l.getExtension("EXT_texture_filter_anisotropic")||l.getExtension("MOZ_EXT_texture_filter_anisotropic")||l.getExtension("WEBKIT_EXT_texture_filter_anisotropic"),this.extTextureFilterAnisotropic&&(this.extTextureFilterAnisotropicMax=l.getParameter(this.extTextureFilterAnisotropic.MAX_TEXTURE_MAX_ANISOTROPY_EXT))),this.extDebugRendererInfo=l.getExtension("WEBGL_debug_renderer_info"),this.extDebugRendererInfo&&(this.renderer=l.getParameter(this.extDebugRendererInfo.UNMASKED_RENDERER_WEBGL),this.vendor=l.getParameter(this.extDebugRendererInfo.UNMASKED_VENDOR_WEBGL)),this.forceManualRenderingForInstanceIDShaders=d&&!!d.forceManualRenderingForInstanceIDShaders||this.renderer&&this.renderer.indexOf("PowerVR")!==-1,this.options.extTextureFloatLinearForceOff||(this.extTextureFloatLinear=l.getExtension("OES_texture_float_linear")),this.extRenderToTextureHalfFloat=l.getExtension("EXT_color_buffer_half_float"),this.extTimerQuery=l.getExtension("EXT_disjoint_timer_query_webgl2"),this.maxTextureSize=l.getParameter(l.MAX_TEXTURE_SIZE),this.maxPointSize=l.getParameter(l.ALIASED_POINT_SIZE_RANGE)[1]}setDefault(){this.unbindVAO(),this.clearColor.setDefault(),this.clearDepth.setDefault(),this.clearStencil.setDefault(),this.colorMask.setDefault(),this.depthMask.setDefault(),this.stencilMask.setDefault(),this.stencilFunc.setDefault(),this.stencilOp.setDefault(),this.stencilTest.setDefault(),this.depthRange.setDefault(),this.depthTest.setDefault(),this.depthFunc.setDefault(),this.blend.setDefault(),this.blendFunc.setDefault(),this.blendColor.setDefault(),this.blendEquation.setDefault(),this.cullFace.setDefault(),this.cullFaceSide.setDefault(),this.frontFace.setDefault(),this.program.setDefault(),this.activeTexture.setDefault(),this.bindFramebuffer.setDefault(),this.pixelStoreUnpack.setDefault(),this.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.pixelStoreUnpackFlipY.setDefault()}setDirty(){this.clearColor.dirty=!0,this.clearDepth.dirty=!0,this.clearStencil.dirty=!0,this.colorMask.dirty=!0,this.depthMask.dirty=!0,this.stencilMask.dirty=!0,this.stencilFunc.dirty=!0,this.stencilOp.dirty=!0,this.stencilTest.dirty=!0,this.depthRange.dirty=!0,this.depthTest.dirty=!0,this.depthFunc.dirty=!0,this.blend.dirty=!0,this.blendFunc.dirty=!0,this.blendColor.dirty=!0,this.blendEquation.dirty=!0,this.cullFace.dirty=!0,this.cullFaceSide.dirty=!0,this.frontFace.dirty=!0,this.program.dirty=!0,this.activeTexture.dirty=!0,this.viewport.dirty=!0,this.bindFramebuffer.dirty=!0,this.bindRenderbuffer.dirty=!0,this.bindTexture.dirty=!0,this.bindVertexBuffer.dirty=!0,this.bindElementBuffer.dirty=!0,this.bindVertexArrayOES.dirty=!0,this.pixelStoreUnpack.dirty=!0,this.pixelStoreUnpackPremultiplyAlpha.dirty=!0,this.pixelStoreUnpackFlipY.dirty=!0}createIndexBuffer(l,d,x){return new wr(this,l,d,x)}createVertexBuffer(l,d,x,C,B){return new Nr(this,l,d,x,C,B)}createRenderbuffer(l,d,x){const C=this.gl,B=C.createRenderbuffer();return this.bindRenderbuffer.set(B),C.renderbufferStorage(C.RENDERBUFFER,l,d,x),this.bindRenderbuffer.set(null),B}createFramebuffer(l,d,x,C){return new Ts(this,l,d,x,C)}clear({color:l,depth:d,stencil:x,colorMask:C}){const B=this.gl;let F=0;l&&(F|=B.COLOR_BUFFER_BIT,this.clearColor.set(l),this.colorMask.set(C||[!0,!0,!0,!0])),d!==void 0&&(F|=B.DEPTH_BUFFER_BIT,this.depthRange.set([0,1]),this.clearDepth.set(d),this.depthMask.set(!0)),x!==void 0&&(F|=B.STENCIL_BUFFER_BIT,this.clearStencil.set(x),this.stencilMask.set(255)),B.clear(F)}setCullFace(l){l.enable===!1?this.cullFace.set(!1):(this.cullFace.set(!0),this.cullFaceSide.set(l.mode),this.frontFace.set(l.frontFace))}setDepthMode(l){l.func!==this.gl.ALWAYS||l.mask?(this.depthTest.set(!0),this.depthFunc.set(l.func),this.depthMask.set(l.mask),this.depthRange.set(l.range)):this.depthTest.set(!1)}setStencilMode(l){l.test.func!==this.gl.ALWAYS||l.mask?(this.stencilTest.set(!0),this.stencilMask.set(l.mask),this.stencilOp.set([l.fail,l.depthFail,l.pass]),this.stencilFunc.set({func:l.test.func,ref:l.ref,mask:l.test.mask})):this.stencilTest.set(!1)}setColorMode(l){i.bn(l.blendFunction,Mr.Replace)?this.blend.set(!1):(this.blend.set(!0),this.blendFunc.set(l.blendFunction),this.blendColor.set(l.blendColor),l.blendEquation?this.blendEquation.set(l.blendEquation):this.blendEquation.setDefault()),this.colorMask.set(l.mask)}unbindVAO(){this.bindVertexArrayOES.set(null)}}let Oi;function Zi(v,l,d,x,C,B,F){const z=v.context,K=z.gl,X=v.transform,J=v.getOrCreateProgram("collisionBox"),oe=[];let se=0,ue=0;for(let et=0;et<x.length;et++){const ft=x[et],dt=l.getTile(ft),ht=dt.getBucket(d);if(!ht)continue;const ut=oo(ft,ht,X);let xt=ut;C[0]===0&&C[1]===0||(xt=v.translatePosMatrix(ut,dt,C,B));const Bt=F?ht.textCollisionBox:ht.iconCollisionBox,an=ht.collisionCircleArray;if(an.length>0){const tn=i.ab.mat4.create(),Ct=xt;i.ab.mat4.mul(tn,ht.placementInvProjMatrix,X.glCoordMatrix),i.ab.mat4.mul(tn,tn,ht.placementViewportMatrix),oe.push({circleArray:an,circleOffset:ue,transform:Ct,invTransform:tn,projection:ht.getProjection()}),se+=an.length/4,ue=se}Bt&&(v.terrain&&v.terrain.setupElevationDraw(dt,J),J.draw(v,K.LINES,mr.disabled,Rr.disabled,v.colorModeForRenderPass(),Lr.disabled,Ae(xt,X,dt,ht.getProjection()),d.id,Bt.layoutVertexBuffer,Bt.indexBuffer,Bt.segments,null,X.zoom,null,[Bt.collisionVertexBuffer,Bt.collisionVertexBufferExt]))}if(!F||!oe.length)return;const Ie=v.getOrCreateProgram("collisionCircle"),Se=new i.cV;Se.resize(4*se),Se._trim();let Pe=0;for(const et of oe)for(let ft=0;ft<et.circleArray.length/4;ft++){const dt=4*ft,ht=et.circleArray[dt+0],ut=et.circleArray[dt+1],xt=et.circleArray[dt+2],Bt=et.circleArray[dt+3];Se.emplace(Pe++,ht,ut,xt,Bt,0),Se.emplace(Pe++,ht,ut,xt,Bt,1),Se.emplace(Pe++,ht,ut,xt,Bt,2),Se.emplace(Pe++,ht,ut,xt,Bt,3)}(!Oi||Oi.length<2*se)&&(Oi=function(et){const ft=2*et,dt=new i.aU;dt.resize(ft),dt._trim();for(let ht=0;ht<ft;ht++){const ut=6*ht;dt.uint16[ut+0]=4*ht+0,dt.uint16[ut+1]=4*ht+1,dt.uint16[ut+2]=4*ht+2,dt.uint16[ut+3]=4*ht+2,dt.uint16[ut+4]=4*ht+3,dt.uint16[ut+5]=4*ht+0}return dt}(se));const Le=z.createIndexBuffer(Oi,!0),$e=z.createVertexBuffer(Se,i.cW.members,!0);for(const et of oe){const ft={u_matrix:et.transform,u_inv_matrix:et.invTransform,u_camera_to_center_distance:(rt=X).getCameraToCenterDistance(et.projection),u_viewport_size:[rt.width,rt.height]};Ie.draw(v,K.TRIANGLES,mr.disabled,Rr.disabled,v.colorModeForRenderPass(),Lr.disabled,ft,d.id,$e,Le,i.b7.simpleSegment(0,2*et.circleOffset,et.circleArray.length,et.circleArray.length/2),null,X.zoom)}var rt;$e.destroy(),Le.destroy()}const Us=i.ab.mat4.create();function Js(v){const l=v._camera.getWorldToCamera(v.worldSize,1),d=i.ab.mat4.multiply([],l,v.globeMatrix);i.ab.mat4.invert(d,d);const x=[0,0,0],C=[0,1,0,0];return i.ab.vec4.transformMat4(C,C,d),x[0]=C[0],x[1]=C[1],x[2]=C[2],i.ab.vec3.normalize(x,x),x}function Di({width:v,height:l,anchor:d,textOffset:x,textScale:C},B){const{horizontalAlign:F,verticalAlign:z}=i.bD(d),K=-(F-.5)*v,X=-(z-.5)*l,J=i.bC(d,x);return new i.P((K/C+J[0])*B,(X/C+J[1])*B)}function _a(v,l,d,x,C,B,F,z,K,X,J){const oe=v.text.placedSymbolArray,se=v.text.dynamicLayoutVertexArray,ue=v.icon.dynamicLayoutVertexArray,Ie={},Se=v.getProjection(),Pe=Sh(z,Se,B),Le=B.elevation,$e=Se.upVectorScale(z.canonical,B.center.lat,B.worldSize).metersToTile;se.clear();for(let rt=0;rt<oe.length;rt++){const et=oe.get(rt),{tileAnchorX:ft,tileAnchorY:dt,numGlyphs:ht}=et,ut=et.hidden||!et.crossTileID||v.allowVerticalPlacement&&!et.placedOrientation?null:x[et.crossTileID];if(ut){let xt=0,Bt=0,an=0;if(Le){const dn=Le?Le.getAtTileOffset(z,ft,dt):0,[Dn,Fn,bn]=Se.upVector(z.canonical,ft,dt);xt=dn*Dn*$e,Bt=dn*Fn*$e,an=dn*bn*$e}let[tn,Ct,Rt,wn]=ds(et.projectedAnchorX+xt,et.projectedAnchorY+Bt,et.projectedAnchorZ+an,d?Pe:F);const kn=ap(B.getCameraToCenterDistance(Se),wn);let Qn=C.evaluateSizeForFeature(v.textSizeData,X,et)*kn/i.bw;d&&(Qn*=v.tilePixelRatio/K);const Jt=Di(ut,Qn);d?({x:tn,y:Ct,z:Rt}=Se.projectTilePoint(ft+Jt.x,dt+Jt.y,z.canonical),[tn,Ct,Rt]=ds(tn+xt,Ct+Bt,Rt+an,F)):(l&&Jt._rotate(-B.angle),tn+=Jt.x,Ct+=Jt.y,Rt=0);const In=v.allowVerticalPlacement&&et.placedOrientation===i.bq.vertical?Math.PI/2:0;for(let dn=0;dn<ht;dn++)i.bt(se,tn,Ct,Rt,In);J&&et.associatedIconIndex>=0&&(Ie[et.associatedIconIndex]={x:tn,y:Ct,z:Rt,angle:In})}else Rl(ht,se)}if(J){ue.clear();const rt=v.icon.placedSymbolArray;for(let et=0;et<rt.length;et++){const ft=rt.get(et),{numGlyphs:dt}=ft,ht=Ie[et];if(ft.hidden||!ht)Rl(dt,ue);else{const{x:ut,y:xt,z:Bt,angle:an}=ht;for(let tn=0;tn<dt;tn++)i.bt(ue,ut,xt,Bt,an)}}v.icon.dynamicLayoutVertexBuffer.updateData(ue)}v.text.dynamicLayoutVertexBuffer.updateData(se)}function wo(v,l,d,x,C,B,F={}){const z=d.paint.get("icon-translate"),K=d.paint.get("text-translate"),X=d.paint.get("icon-translate-anchor"),J=d.paint.get("text-translate-anchor"),oe=d.layout.get("icon-rotation-alignment"),se=d.layout.get("text-rotation-alignment"),ue=d.layout.get("icon-pitch-alignment"),Ie=d.layout.get("text-pitch-alignment"),Se=d.layout.get("icon-keep-upright"),Pe=d.layout.get("text-keep-upright"),Le=d.paint.get("icon-color-saturation"),$e=d.paint.get("icon-color-contrast"),rt=d.paint.get("icon-color-brightness-min"),et=d.paint.get("icon-color-brightness-max"),ft=d.layout.get("symbol-elevation-reference")==="sea",dt=v.context,ht=dt.gl,ut=v.transform,xt=oe==="map",Bt=se==="map",an=ue==="map",tn=Ie==="map",Ct=d.layout.get("symbol-sort-key").constantOr(1)!==void 0;let Rt=!1;const wn=v.depthModeForSublayer(0,mr.ReadOnly),kn=[i.at(ut.center.lng),i.aA(ut.center.lat)],Qn=d.layout.get("text-variable-anchor"),Jt=ut.projection.name==="globe",In=[],dn=[0,-1,0];for(const Dn of x){const Fn=l.getTile(Dn),bn=Fn.getBucket(d);if(!bn||bn.projection.name==="mercator"&&Jt||bn.fullyClipped)continue;const tr=bn.projection.name==="globe",nr=tr?i.ae(ut.zoom):0,Yn=Sh(Dn,bn.getProjection(),ut),hr=ut.calculatePixelsToTileUnitsMatrix(Fn),Zr=Qn&&bn.hasTextData(),kr=bn.hasIconTextFit()&&Zr&&bn.hasIconData(),Fr=bn.getProjection().createInversionMatrix(ut,Dn.canonical),Xr=$r=>{ut.depthOcclusionForSymbolsAndCircles&&(d.hasInitialOcclusionOpacityProperties||v.terrain)&&($r.push("DEPTH_D24"),$r.push("DEPTH_OCCLUSION"))},di=()=>{const $r=xt&&d.layout.get("symbol-placement")!=="point",Xi=[];Xr(Xi);const Io=$r||kr,hl=d.paint.get("icon-image-cross-fade").constantOr(0);v.terrainRenderModeElevated()&&an&&Xi.push("PITCH_WITH_MAP_TERRAIN"),tr&&(Xi.push("PROJECTION_GLOBE_VIEW"),Io&&Xi.push("PROJECTED_POS_ON_VIEWPORT")),hl>0&&Xi.push("ICON_TRANSITION"),bn.icon.zOffsetVertexBuffer&&Xi.push("Z_OFFSET"),Le===0&&$e===0&&rt===0&&et===1||Xi.push("COLOR_ADJUSTMENT"),bn.sdfIcons&&Xi.push("RENDER_SDF");const fu=bn.icon.programConfigurations.get(d.id),lc=v.getOrCreateProgram("symbol",{config:fu,defines:Xi}),qa=Fn.imageAtlasTexture?Fn.imageAtlasTexture.size:[0,0],da=bn.iconSizeData,Go=i.bp(da,ut.zoom),Ks=an||ut.pitch!==0,Ls=us(Yn,Fn.tileID.canonical,an,xt,ut,bn.getProjection(),hr),Gi=Da(Yn,Fn.tileID.canonical,an,xt,ut,bn.getProjection(),hr),Oo=v.translatePosMatrix(Gi,Fn,z,X,!0),Za=v.translatePosMatrix(Yn,Fn,z,X),Qs=Io?Us:Ls,$l=xt&&!an&&!$r;let Pu=dn;!Jt&&!ut.mercatorFromTransition||xt||(Pu=Js(ut));const Wc=tr?Pu:dn,Nf=d.getColorAdjustmentMatrix(Le,$e,rt,et),Dh=zn(da.kind,Go,$l,an,v,Za,Qs,Oo,ft,!1,qa,[0,0],!0,Dn,nr,kn,Fr,Wc,bn.getProjection(),Nf,hl),cc=Fn.imageAtlasTexture?Fn.imageAtlasTexture:null,ku=d.layout.get("icon-size").constantOr(0)!==1||bn.iconsNeedLinear,sh=bn.sdfIcons||v.options.rotating||v.options.zooming||ku||Ks?ht.LINEAR:ht.NEAREST,hd=bn.sdfIcons&&d.paint.get("icon-halo-width").constantOr(1)!==0,AA=v.terrain&&an&&$r?i.ab.mat4.invert(i.ab.mat4.create(),Ls):Us;if($r&&bn.icon){const Ig=ut.elevation,mv=Ig?Ig.getAtTileOffsetFunc(Dn,ut.center.lat,ut.worldSize,bn.getProjection()):null,k0=wc(Yn,Fn.tileID.canonical,an,xt,ut,bn.getProjection(),hr);uf(bn,Yn,v,!1,k0,Gi,an,Se,mv,Dn)}return{program:lc,buffers:bn.icon,uniformValues:Dh,atlasTexture:cc,atlasTextureIcon:null,atlasInterpolation:sh,atlasInterpolationIcon:null,isSDF:bn.sdfIcons,hasHalo:hd,tile:Fn,labelPlaneMatrixInv:AA}},gi=()=>{const $r=Bt&&d.layout.get("symbol-placement")!=="point",Xi=[],Io=$r||Qn||kr;v.terrainRenderModeElevated()&&tn&&Xi.push("PITCH_WITH_MAP_TERRAIN"),tr&&(Xi.push("PROJECTION_GLOBE_VIEW"),Io&&Xi.push("PROJECTED_POS_ON_VIEWPORT")),bn.text.zOffsetVertexBuffer&&Xi.push("Z_OFFSET"),bn.iconsInText&&Xi.push("RENDER_TEXT_AND_SYMBOL"),Xi.push("RENDER_SDF"),Xr(Xi);const hl=bn.text.programConfigurations.get(d.id),fu=v.getOrCreateProgram("symbol",{config:hl,defines:Xi});let lc,qa=[0,0],da=null;const Go=bn.textSizeData;bn.iconsInText&&(qa=Fn.imageAtlasTexture?Fn.imageAtlasTexture.size:[0,0],da=Fn.imageAtlasTexture?Fn.imageAtlasTexture:null,lc=tn||ut.pitch!==0||v.options.rotating||v.options.zooming||Go.kind==="composite"||Go.kind==="camera"?ht.LINEAR:ht.NEAREST);const Ks=Fn.glyphAtlasTexture?Fn.glyphAtlasTexture.size:[0,0],Ls=d.layout.get("text-size-scale-range"),Gi=i.aw(v.scaleFactor,Ls[0],Ls[1]),Oo=i.bp(Go,ut.zoom,Gi),Za=us(Yn,Fn.tileID.canonical,tn,Bt,ut,bn.getProjection(),hr),Qs=Da(Yn,Fn.tileID.canonical,tn,Bt,ut,bn.getProjection(),hr),$l=v.translatePosMatrix(Qs,Fn,K,J,!0),Pu=v.translatePosMatrix(Yn,Fn,K,J),Wc=Io?Us:Za,Nf=Bt&&!tn&&!$r;let Dh=dn;!Jt&&!ut.mercatorFromTransition||Bt||(Dh=Js(ut));const cc=zn(Go.kind,Oo,Nf,tn,v,Pu,Wc,$l,ft,!0,Ks,qa,!0,Dn,nr,kn,Fr,tr?Dh:dn,bn.getProjection(),null,null,Gi),ku=Fn.glyphAtlasTexture?Fn.glyphAtlasTexture:null,sh=ht.LINEAR,hd=d.paint.get("text-halo-width").constantOr(1)!==0,AA=v.terrain&&tn&&$r?i.ab.mat4.invert(i.ab.mat4.create(),Za):Us;if($r&&bn.text){const Ig=ut.elevation,mv=Ig?Ig.getAtTileOffsetFunc(Dn,ut.center.lat,ut.worldSize,bn.getProjection()):null,k0=wc(Yn,Fn.tileID.canonical,tn,Bt,ut,bn.getProjection(),hr);uf(bn,Yn,v,!0,k0,Qs,tn,Pe,mv,Dn)}return{program:fu,buffers:bn.text,uniformValues:cc,atlasTexture:ku,atlasTextureIcon:da,atlasInterpolation:sh,atlasInterpolationIcon:lc,isSDF:!0,hasHalo:hd,tile:Fn,labelPlaneMatrixInv:AA}},to=bn.icon.segments.get().length,zs=bn.text.segments.get().length,ls=to&&!F.onlyText?di():null,ms=zs&&!F.onlyIcons?gi():null,yi=d.paint.get("icon-opacity").constantOr(1),zi=d.paint.get("text-opacity").constantOr(1);if(Ct&&bn.canOverlap){Rt=!0;const $r=yi&&!F.onlyText?bn.icon.segments.get():[],Xi=zi&&!F.onlyIcons?bn.text.segments.get():[];for(const Io of $r)In.push({segments:new i.b7([Io]),sortKey:Io.sortKey,state:ls});for(const Io of Xi)In.push({segments:new i.b7([Io]),sortKey:Io.sortKey,state:ms})}else F.onlyText||In.push({segments:yi?bn.icon.segments:new i.b7([]),sortKey:0,state:ls}),F.onlyIcons||In.push({segments:zi?bn.text.segments:new i.b7([]),sortKey:0,state:ms})}Rt&&In.sort((Dn,Fn)=>Dn.sortKey-Fn.sortKey);for(const Dn of In){const Fn=Dn.state;if(Fn)if(v.terrain?v.terrain.setupElevationDraw(Fn.tile,Fn.program,{useDepthForOcclusion:ut.depthOcclusionForSymbolsAndCircles,labelPlaneMatrixInv:Fn.labelPlaneMatrixInv}):v.setupDepthForOcclusion(ut.depthOcclusionForSymbolsAndCircles,Fn.program),dt.activeTexture.set(ht.TEXTURE0),Fn.atlasTexture&&Fn.atlasTexture.bind(Fn.atlasInterpolation,ht.CLAMP_TO_EDGE,!0),Fn.atlasTextureIcon&&(dt.activeTexture.set(ht.TEXTURE1),Fn.atlasTextureIcon&&Fn.atlasTextureIcon.bind(Fn.atlasInterpolationIcon,ht.CLAMP_TO_EDGE,!0)),v.uploadCommonLightUniforms(v.context,Fn.program),Fn.hasHalo){const bn=Fn.uniformValues;bn.u_is_halo=1,qr(Fn.buffers,Dn.segments,d,v,Fn.program,wn,C,B,bn,2),bn.u_is_halo=0}else{if(Fn.isSDF){const bn=Fn.uniformValues;Fn.hasHalo&&(bn.u_is_halo=1,qr(Fn.buffers,Dn.segments,d,v,Fn.program,wn,C,B,bn,1)),bn.u_is_halo=0}qr(Fn.buffers,Dn.segments,d,v,Fn.program,wn,C,B,Fn.uniformValues,1)}}}function qr(v,l,d,x,C,B,F,z,K,X){const J=[v.dynamicLayoutVertexBuffer,v.opacityVertexBuffer,v.iconTransitioningVertexBuffer,v.globeExtVertexBuffer,v.zOffsetVertexBuffer];C.draw(x,x.context.gl.TRIANGLES,B,F,z,Lr.disabled,K,d.id,v.layoutVertexBuffer,v.indexBuffer,l,d.paint,x.transform.zoom,v.programConfigurations.get(d.id),J,X)}function Ia(v,l,d,x,C,B,F){const z=v.context.gl,K=d.paint.get("fill-pattern"),X=d.is3D(),J=X?v.stencilModeFor3D():Rr.disabled,oe=K&&K.constantOr(1);let se,ue,Ie,Se,Pe;F?(ue=oe&&!d.getPaintProperty("fill-outline-color")?"fillOutlinePattern":"fillOutline",se=z.LINES):(ue=oe?"fillPattern":"fill",se=z.TRIANGLES);for(const Le of x){const $e=l.getTile(Le);if(oe&&!$e.patternsLoaded())continue;const rt=$e.getBucket(d);if(!rt)continue;v.prepareDrawTile();const et=rt.programConfigurations.get(d.id),ft=v.isTileAffectedByFog(Le),dt=v.getOrCreateProgram(ue,{config:et,overrideFog:ft});oe&&(v.context.activeTexture.set(z.TEXTURE0),$e.imageAtlasTexture&&$e.imageAtlasTexture.bind(z.LINEAR,z.CLAMP_TO_EDGE),et.updatePaintBuffers());const ht=K.constantOr(null);if(ht&&$e.imageAtlas){const Bt=$e.imageAtlas,an=i.A.from(ht),tn=Bt.patternPositions[an.getSerializedPrimary()];tn&&et.setConstantPatternPositions(tn)}const ut=v.translatePosMatrix(Le.projMatrix,$e,d.paint.get("fill-translate"),d.paint.get("fill-translate-anchor")),xt=d.paint.get("fill-emissive-strength");if(F){Se=rt.indexBuffer2,Pe=rt.segments2;const Bt=v.terrain&&v.terrain.renderingToTexture?v.terrain.drapeBufferSize:[z.drawingBufferWidth,z.drawingBufferHeight];Ie=ue==="fillOutlinePattern"&&oe?ee(ut,xt,v,$e,Bt):G(ut,xt,Bt)}else Se=rt.indexBuffer,Pe=rt.segments,Ie=oe?wf(ut,xt,v,$e):Am(ut,xt);v.uploadCommonUniforms(v.context,dt,Le.toUnwrapped()),dt.draw(v,se,C,X?J:v.stencilModeForClipping(Le),B,Lr.disabled,Ie,d.id,rt.layoutVertexBuffer,Se,Pe,d.paint,v.transform.zoom,et,void 0)}}function Is(v,l,d,x,C,B,F,z){d.resetLayerRenderingStats(v);const K=v.context,X=K.gl,J=v.transform,oe=d.paint.get("fill-extrusion-pattern"),se=oe.constantOr(1),ue=d.paint.get("fill-extrusion-opacity"),Ie=v.style.enable3dLights(),Se=d.paint.get(Ie&&!se?"fill-extrusion-ambient-occlusion-wall-radius":"fill-extrusion-ambient-occlusion-radius"),Pe=[d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Se],Le=d.layout.get("fill-extrusion-edge-radius"),$e=Le>0&&!d.paint.get("fill-extrusion-rounded-roof"),rt=$e?0:Le,et=J.projection.name==="globe"?i.d3():0,ft=J.projection.name==="globe",dt=ft?i.ae(J.zoom):0,ht=[i.at(J.center.lng),i.aA(J.center.lat)],ut=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",xt=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(ut?null:d.lut).toArray01().slice(0,3),Bt=d.paint.get("fill-extrusion-flood-light-intensity"),an=d.paint.get("fill-extrusion-vertical-scale"),tn=d.paint.get("fill-extrusion-line-width").constantOr(1)!==0,Ct=d.paint.get("fill-extrusion-height-alignment"),Rt=d.paint.get("fill-extrusion-base-alignment"),wn=rc(v,d.paint.get("fill-extrusion-cutoff-fade-range")),kn=[];let Qn;ft&&kn.push("PROJECTION_GLOBE_VIEW"),Pe[0]>0&&kn.push("FAUX_AO"),$e&&kn.push("ZERO_ROOF_RADIUS"),z&&kn.push("HAS_CENTROID"),Bt>0&&kn.push("FLOOD_LIGHT"),wn.shouldRenderCutoff&&kn.push("RENDER_CUTOFF"),tn&&kn.push("RENDER_WALL_MODE");const Jt=v.renderPass==="shadow",In=v.shadowRenderer,dn=Jt&&!!In;v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!0);let Dn=[0,0,0];if(In){const tr=v.style.directionalLight,nr=v.style.ambientLight;tr&&nr&&(Dn=Sc(v.style,tr,nr)),Jt||(kn.push("RENDER_SHADOWS","DEPTH_TEXTURE"),In.useNormalOffset&&kn.push("NORMAL_OFFSET")),Qn=kn.concat(["SHADOWS_SINGLE_CASCADE"])}const Fn=dn?"fillExtrusionDepth":se?"fillExtrusionPattern":"fillExtrusion",bn=d.getLayerRenderingStats();for(const tr of x){const nr=l.getTile(tr),Yn=nr.getBucket(d);if(!Yn||Yn.projection.name!==J.projection.name)continue;let hr=!1;In&&(hr=In.getMaxCascadeForTile(tr.toUnwrapped())===0);const Zr=v.isTileAffectedByFog(tr),kr=Yn.programConfigurations.get(d.id),Fr=v.getOrCreateProgram(Fn,{config:kr,defines:hr?Qn:kn,overrideFog:Zr});if(v.terrain&&v.terrain.setupElevationDraw(nr,Fr,{useMeterToDem:!0}),!Yn.centroidVertexBuffer){const ms=Fr.attributes.a_centroid_pos;ms!==void 0&&X.vertexAttrib2f(ms,0,0)}!Jt&&In&&In.setupShadows(nr.tileID.toUnwrapped(),Fr,"vector-tile",nr.tileID.overscaledZ),se&&(v.context.activeTexture.set(X.TEXTURE0),nr.imageAtlasTexture&&nr.imageAtlasTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),kr.updatePaintBuffers());const Xr=oe.constantOr(null);if(Xr&&nr.imageAtlas){const ms=nr.imageAtlas,yi=i.A.from(Xr),zi=ms.patternPositions[yi.getSerializedPrimary()];zi&&kr.setConstantPatternPositions(zi)}const di=d.paint.get("fill-extrusion-vertical-gradient"),gi=1/Yn.tileToMeter;let to;if(Jt&&In){if(eo(nr.tileID,Yn,v))continue;const ms=In.calculateShadowPassMatrixFromTile(nr.tileID.toUnwrapped());to=mp(ms,rt,gi,an,Ct,Rt)}else{const ms=v.translatePosMatrix(tr.expandedProjMatrix,nr,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),yi=J.projection.createInversionMatrix(J,tr.canonical);to=se?iA(ms,v,di,ue,Pe,rt,gi,tr,nr,et,Ct,Rt,dt,ht,yi,xt,an):Hc(ms,v,di,ue,Pe,rt,gi,tr,et,Ct,Rt,dt,ht,yi,xt,an,Bt,Dn)}v.uploadCommonUniforms(K,Fr,tr.toUnwrapped(),null,wn);let zs=Yn.segments;if(J.projection.name==="mercator"&&!Jt&&(zs=Yn.getVisibleSegments(nr.tileID,v.terrain,v.transform.getFrustum(0)),!zs.get().length))continue;if(bn)if(Jt)for(const ms of zs.get())bn.numRenderedVerticesInShadowPass+=ms.primitiveLength;else for(const ms of zs.get())bn.numRenderedVerticesInTransparentPass+=ms.primitiveLength;const ls=[];(v.terrain||z)&&ls.push(Yn.centroidVertexBuffer),ft&&ls.push(Yn.layoutVertexExtBuffer),tn&&ls.push(Yn.wallVertexBuffer),Fr.draw(v,K.gl.TRIANGLES,C,B,F,Lr.backCCW,to,d.id,Yn.layoutVertexBuffer,Yn.indexBuffer,zs,d.paint,v.transform.zoom,kr,ls)}v.shadowRenderer&&(v.shadowRenderer.useNormalOffset=!1)}function bo(v,l,d,x,C,B,F,z,K,X,J,oe,se,ue,Ie,Se,Pe,Le,$e){const rt=v.context,et=rt.gl,ft=v.transform,dt=v.transform.zoom,ht=[],ut=rc(v,d.paint.get("fill-extrusion-cutoff-fade-range"));X==="clear"?(ht.push("CLEAR_SUBPASS"),$e&&(ht.push("CLEAR_FROM_TEXTURE"),rt.activeTexture.set(et.TEXTURE0),$e.bind(et.LINEAR,et.CLAMP_TO_EDGE))):X==="sdf"&&ht.push("SDF_SUBPASS"),Pe&&ht.push("HAS_CENTROID"),ut.shouldRenderCutoff&&ht.push("RENDER_CUTOFF");const xt=d.layout.get("fill-extrusion-edge-radius"),Bt=(an,tn,Ct,Rt,wn)=>{const kn=tn.programConfigurations.get(d.id),Qn=v.isTileAffectedByFog(an),Jt=v.getOrCreateProgram("fillExtrusionGroundEffect",{config:kn,defines:ht,overrideFog:Qn}),In=((Dn,Fn,bn,tr,nr,Yn,hr,Zr,kr,Fr,Xr)=>({u_matrix:Fn,u_opacity:bn,u_ao_pass:tr?1:0,u_meter_to_tile:nr,u_ao:Yn,u_flood_light_intensity:hr,u_flood_light_color:Zr,u_attenuation:kr,u_edge_radius:Fr,u_fb:0,u_fb_size:Xr,u_dynamic_offset:1}))(0,Rt,J,K,wn,[oe,se*wn],ue,Ie,Se,dt>=17?0:xt*wn,$e?$e.size[0]:0),dn=[];Pe&&dn.push(tn.hiddenByLandmarkVertexBuffer),v.uploadCommonUniforms(rt,Jt,an.toUnwrapped(),null,ut),Jt.draw(v,rt.gl.TRIANGLES,C,B,F,z,In,d.id,tn.vertexBuffer,tn.indexBuffer,Ct,d.paint,dt,kn,dn)};for(const an of x){const tn=l.getTile(an),Ct=tn.getBucket(d);if(!Ct||Ct.projection.name!==ft.projection.name||!Ct.groundEffect||Ct.groundEffect&&!Ct.groundEffect.hasData())continue;const Rt=Ct.groundEffect,wn=1/Ct.tileToMeter;{const kn=v.translatePosMatrix(an.projMatrix,tn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),Qn=Rt.getDefaultSegment();Bt(an,Rt,Qn,kn,wn)}if(Le)for(let kn=0;kn<4;kn++){const Qn=i.d4[kn](an),Jt=l.getTile(Qn);if(!Jt)continue;const In=Jt.getBucket(d);if(!In||In.projection.name!==ft.projection.name||!In.groundEffect||In.groundEffect&&!In.groundEffect.hasData())continue;const dn=In.groundEffect;let Dn,Fn;kn===0?(Dn=[-i.ag,0,0],Fn=1):kn===1?(Dn=[i.ag,0,0],Fn=0):kn===2?(Dn=[0,-i.ag,0],Fn=3):(Dn=[0,i.ag,0],Fn=2);const bn=dn.regionSegments[Fn];if(!bn)continue;const tr=new Float32Array(16);i.ab.mat4.translate(tr,an.projMatrix,Dn),Bt(an,dn,bn,v.translatePosMatrix(tr,tn,d.paint.get("fill-extrusion-translate"),d.paint.get("fill-extrusion-translate-anchor")),wn)}}}function Ul(v,l,d,x,C,B,F){x.centroidVertexArray.length===0&&x.createCentroidsBuffer();const z=B?B.findDEMTileFor(d):null;if(!(z&&z.dem||F))return;B&&z&&z.dem&&x.selfDEMTileTimestamp!==z.dem._timestamp&&(x.borderDoneWithNeighborZ=[-1,-1,-1,-1],x.selfDEMTileTimestamp=z.dem._timestamp);const K=Le=>new i.P(Math.ceil((Le+i.d7)*i.d8),0),X=Le=>{const $e=l.getSource().minzoom,rt=ft=>{const dt=l.getTileByID(ft);if(dt&&dt.hasData())return dt.getBucket(C)},et=[0,-1,1];for(const ft of et){if(Le.overscaledZ+ft<$e)continue;const dt=rt(Le.calculateScaledKey(Le.overscaledZ+ft));if(dt)return dt}},J=[0,0,0],oe=(Le,$e)=>(J[0]=Math.min(Le.min.y,$e.min.y),J[1]=Math.max(Le.max.y,$e.max.y),J[2]=i.ag-$e.min.x>Le.max.x?$e.min.x-i.ag:Le.max.x,J),se=(Le,$e)=>(J[0]=Math.min(Le.min.x,$e.min.x),J[1]=Math.max(Le.max.x,$e.max.x),J[2]=i.ag-$e.min.y>Le.max.y?$e.min.y-i.ag:Le.max.y,J),ue=[(Le,$e)=>oe(Le,$e),(Le,$e)=>oe($e,Le),(Le,$e)=>se(Le,$e),(Le,$e)=>se($e,Le)],Ie=(Le,$e,rt,et,ft,dt,ht)=>{if(!B)return 0;const ut=[[dt?rt:Le,dt?Le:rt,0],[dt?rt:$e,dt?$e:rt,0]],xt=ht<0?i.ag+ht:ht,Bt=[dt?xt:(Le+$e)/2,dt?(Le+$e)/2:xt,0];return rt===0&&ht<0||rt!==0&&ht>0?B.getForTilePoints(ft,[Bt],!0,et):ut.push(Bt),B.getForTilePoints(d,ut,!0,z),Math.max(ut[0][2],ut[1][2],Bt[2])/B.exaggeration()};for(let Le=0;Le<4;Le++){const $e=x.borderFeatureIndices[Le];if($e.length===0)continue;const rt=i.d4[Le](d),et=X(rt);if(!(et&&et instanceof i.d5))continue;const ft=B?B.findDEMTileFor(rt):null;if(!(ft&&ft.dem||F)||(B&&ft&&ft.dem&&x.borderDEMTileTimestamp[Le]!==ft.dem._timestamp&&(x.borderDoneWithNeighborZ[Le]=-1,x.borderDEMTileTimestamp[Le]=ft.dem._timestamp),x.borderDoneWithNeighborZ[Le]===et.canonical.z))continue;et.centroidVertexArray.length===0&&et.createCentroidsBuffer();const dt=(Le<2?1:5)-Le,ht=et.borderDoneWithNeighborZ[dt]!==x.canonical.z,ut=et.borderFeatureIndices[dt];let xt=0;if(x.canonical.z!==et.canonical.z){for(const Bt of $e)x.showCentroid(x.featuresOnBorder[Bt]);if(ht)for(const Bt of ut)et.showCentroid(et.featuresOnBorder[Bt]);x.borderDoneWithNeighborZ[Le]=et.canonical.z,et.borderDoneWithNeighborZ[dt]=x.canonical.z}for(const Bt of $e){const an=x.featuresOnBorder[Bt],tn=x.centroidData[an.centroidDataIndex],Ct=an.borders[Le];let Rt;for(;xt<ut.length;){Rt=et.featuresOnBorder[ut[xt]];const wn=Rt.borders[dt];if(wn[1]>Ct[0]+3||wn[0]>Ct[0]-3)break;et.showCentroid(Rt),xt++}if(Rt&&xt<ut.length){const wn=xt;let kn=0;for(;!(Rt.borders[dt][0]>Ct[1]-3)&&(kn++,++xt!==ut.length);)Rt=et.featuresOnBorder[ut[xt]];Rt=et.featuresOnBorder[ut[wn]];let Qn=!1;if(kn>=1){const dn=Rt.borders[dt];Math.abs(Ct[0]-dn[0])<3&&Math.abs(Ct[1]-dn[1])<3&&(kn=1,Qn=!0,xt=wn+1)}else if(kn===0){x.showCentroid(an);continue}const Jt=et.centroidData[Rt.centroidDataIndex];F&&Qn&&(((Se=tn).flags|(Pe=Jt).flags)&i.d6?(Se.flags|=i.d6,Pe.flags|=i.d6):(Se.flags&=~i.d6,Pe.flags&=~i.d6));const In=an.intersectsCount()>1||Rt.intersectsCount()>1;if(kn>1)xt=wn,tn.centroidXY=Jt.centroidXY=new i.P(0,0);else if(ft&&ft.dem&&!In){const dn=ue[Le](tn,Jt),Dn=Le%2?i.ag-1:0,Fn=Ie(dn[0],Math.min(i.ag-1,dn[1]),Dn,ft,rt,Le<2,dn[2]);tn.centroidXY=Jt.centroidXY=K(Fn)}else In?tn.centroidXY=Jt.centroidXY=new i.P(0,0):(tn.centroidXY=x.encodeBorderCentroid(an),Jt.centroidXY=et.encodeBorderCentroid(Rt));x.writeCentroidToBuffer(tn),et.writeCentroidToBuffer(Jt)}else x.showCentroid(an)}x.borderDoneWithNeighborZ[Le]=et.canonical.z,et.borderDoneWithNeighborZ[dt]=x.canonical.z}var Se,Pe;(x.needsCentroidUpdate||!x.centroidVertexBuffer&&x.centroidVertexArray.length!==0)&&x.uploadCentroid(v)}const ca=[1,0,0],ra=[0,1,0],wa=[0,0,1];function eo(v,l,d){const x=d.transform,C=d.shadowRenderer;if(!C)return!0;const B=v.toUnwrapped(),F=x.tileSize*C._cascades[d.currentShadowCascade].scale;let z=l.maxHeight;if(x.elevation){const Se=x.elevation.getMinMaxForTile(v);Se&&(z+=Se.max)}const K=[...C.shadowDirection];K[2]=-K[2];const X=C.computeSimplifiedTileShadowVolume(B,z,F,K);if(!X)return!1;const J=[ca,ra,wa,K,[K[0],0,K[2]],[0,K[1],K[2]]],oe=x.projection.name==="globe",se=x.scaleZoom(F),ue=i.bR.fromInvProjectionMatrix(x.invProjMatrix,x.worldSize,se,!oe),Ie=C.getCurrentCascadeFrustum();return ue.intersectsPrecise(X.vertices,X.planes,J)===0||Ie.intersectsPrecise(X.vertices,X.planes,J)===0}function Mn(v){return[v[0]*i.d9,v[1]*i.d9,v[2]*i.d9,0]}function Gn(v,l,d,x,C,B,F,z,K){const X=x.getSource(),J=d.globeSharedBuffers;if(!J)return;let oe,se,ue;if(l&&(oe=x.getTile(l)),X instanceof i.aJ?(se=X.texture,ue=i.cI(0,0,d.transform)):oe&&l&&(se=oe.texture,ue=i.cI(l.canonical.z,l.canonical.x,d.transform)),!se||!ue)return;v||(ue=i.ab.mat4.scale(i.ab.mat4.create(),ue,[1,-1,1]));const Ie=d.context,Se=Ie.gl,Pe=C.paint.get("raster-resampling")==="nearest"?Se.NEAREST:Se.LINEAR,Le=d.colorModeForDrapableLayerRenderPass(B),$e=F.defines;$e.push("GLOBE_POLES");const rt=new mr(Se.LEQUAL,mr.ReadWrite,d.depthRangeFor3D),et=Float32Array.from(d.transform.expandedFarZProjMatrix),ft=Float32Array.from(i.bb(i.cH(new i.bT(0,0,0))));d.terrain&&d.terrain.prepareDrawTile(),Ie.activeTexture.set(Se.TEXTURE0),se.bind(Pe,Se.CLAMP_TO_EDGE),Ie.activeTexture.set(Se.TEXTURE1),se.bind(Pe,Se.CLAMP_TO_EDGE),se.useMipmap&&Ie.extTextureFilterAnisotropic&&d.transform.pitch>20&&Se.texParameterf(Se.TEXTURE_2D,Ie.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,Ie.extTextureFilterAnisotropicMax);const[dt,ht,ut,xt]=l?J.getPoleBuffers(l.canonical.z,!1):J.getPoleBuffers(0,!0),Bt=C.paint.get("raster-elevation");let an;v?(an=dt,d.renderDefaultNorthPole=Bt!==0):(an=ht,d.renderDefaultSouthPole=Bt!==0);const tn=Mn(F.mix),Ct=((wn,kn,Qn,Jt,In,dn,Dn,Fn,bn,tr,nr,Yn,hr)=>He(wn,kn,Qn,new Float32Array(16),new Float32Array(9),[0,0],Jt,[0,0],[0,0,0,0],1,{opacity:1,mix:0},dn,[0,0],Fn,2,tr,nr,Yn,1,0,hr))(et,ft,ue,i.ae(d.transform.zoom),0,C,0,Bt,0,tn,F.offset,F.range,B),Rt=d.getOrCreateProgram("raster",{defines:$e});d.uploadCommonUniforms(Ie,Rt,null),Rt.draw(d,Se.TRIANGLES,rt,K,Le,z,Ct,C.id,an,ut,xt)}function Ic(v){const l=v._nearZ,d=v.projection.farthestPixelDistance(v),x=d-l,C=.2*v.height,B=l+C;return[l,d,(B-C-l)/x,(B-l)/x]}function ks(v,l,d,x){if(v)return l instanceof Os&&v instanceof cf?l.getTextureDescriptor(v,d,!0):{texture:v.texture,mix:Mn(x.mix),offset:x.offset,buffer:0,tileSize:1}}var en=i.da([{name:"a_index",type:"Int16",components:1}]);class Zd{constructor(l,d,x,C){const B={width:x[0],height:x[1],data:null},F=l.gl;this.targetColorTexture=new i.T(l,B,F.RGBA8,{useMipmap:!1}),this.backgroundColorTexture=new i.T(l,B,F.RGBA8,{useMipmap:!1}),this.context=l,this.updateParticleTexture(d,C),this.lastInvalidatedAt=0}updateParticleTexture(l,d){if(this.particleTextureDimension===d.width)return;(this.particleTexture0||this.particleTexture1||this.particleIndexBuffer||this.particleSegment)&&(this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleIndexBuffer.destroy(),this.particleSegment.destroy());const x=this.context.gl,C=d.width*d.height;this.particleTexture0=new i.T(this.context,d,x.RGBA8,{premultiply:!1,useMipmap:!1}),this.particleTexture1=new i.T(this.context,d,x.RGBA8,{premultiply:!1,useMipmap:!1});const B=new i.db;B.reserve(C);for(let F=0;F<C;F++)B.emplaceBack(F);this.particleIndexBuffer=this.context.createVertexBuffer(B,en.members,!0),this.particleSegment=i.b7.simpleSegment(0,0,this.particleIndexBuffer.length,0),this.particleTextureDimension=d.width}update(l){return!(this.lastInvalidatedAt<l&&(this.lastInvalidatedAt=i.q.now(),1))}destroy(){this.targetColorTexture.destroy(),this.backgroundColorTexture.destroy(),this.particleIndexBuffer.destroy(),this.particleTexture0.destroy(),this.particleTexture1.destroy(),this.particleSegment.destroy()}}function fo(v,l,d){if(!v)return null;const x=l.getTextureDescriptor(v,d,!0);if(!x)return null;let{texture:C,mix:B,offset:F,tileSize:z,buffer:K,format:X}=x;if(!C||!X)return null;let J=!1;return X==="uint32"&&(J=!0,B[3]=0,B=st(i.dc,B,[0,d.paint.get("raster-particle-max-speed")]),F=lt(i.dc,F,[0,d.paint.get("raster-particle-max-speed")])),{texture:C,textureOffset:[K/(z+2*K),z/(z+2*K)],tileSize:z,scalarData:J,scale:B,offset:F,defines:["RASTER_ARRAY",{uint8:"DATA_FORMAT_UINT8",uint16:"DATA_FORMAT_UINT16",uint32:"DATA_FORMAT_UINT32"}[X]]}}function gp(v){const l=v._nearZ,d=v.projection.farthestPixelDistance(v),x=d-l,C=.2*v.height,B=l+C;return[l,d,(B-C-l)/x,(B-l)/x]}const yg=new i.aj(1,0,0,1),vg=new i.aj(0,1,0,1),Xd=new i.aj(0,0,1,1),sd=new i.aj(1,0,1,1),mm=new i.aj(0,1,1,1);function dl(v,l,d,x,C,B,F){const z=v.context,K=v.transform,X=z.gl,J=K.projection.name==="globe",oe=J?["PROJECTION_GLOBE_VIEW"]:[];let se=i.ab.mat4.clone(d.projMatrix);if(J&&i.ae(K.zoom)>0){const tn=i.ba(d.canonical,K),Ct=i.dd(tn);se=i.ab.mat4.multiply(new Float32Array(16),K.globeMatrix,Ct),i.ab.mat4.multiply(se,K.projMatrix,se)}const ue=i.ab.mat4.create();ue[12]+=2*C/(i.q.devicePixelRatio*K.width),ue[13]+=2*B/(i.q.devicePixelRatio*K.height),i.ab.mat4.multiply(se,ue,se);const Ie=v.getOrCreateProgram("debug",{defines:oe}),Se=l.getTileByID(d.key);v.terrain&&v.terrain.setupElevationDraw(Se,Ie);const Pe=mr.disabled,Le=Rr.disabled,$e=v.colorModeForRenderPass(),rt="$debug";z.activeTexture.set(X.TEXTURE0),v.emptyTexture.bind(X.LINEAR,X.CLAMP_TO_EDGE),J?Se._makeGlobeTileDebugBuffers(v.context,K):Se._makeDebugTileBoundsBuffers(v.context,K.projection);const et=Se._tileDebugBuffer||v.debugBuffer,ft=Se._tileDebugIndexBuffer||v.debugIndexBuffer,dt=Se._tileDebugSegments||v.debugSegments;if(Ie.draw(v,X.LINE_STRIP,Pe,Le,$e,Lr.disabled,Fe(se,x),rt,et,ft,dt,null,null,null,[Se._globeTileDebugBorderBuffer]),F){const tn=Se.latestRawTileData,Ct=Math.floor((tn&&tn.byteLength||0)/1024);let Rt=d.canonical.toString();d.overscaledZ!==d.canonical.z&&(Rt+=` => ${d.overscaledZ}`),Rt+=` ${Se.state}`,Rt+=` ${Ct}kb`,function(wn,kn){wn.initDebugOverlayCanvas();const Qn=wn.debugOverlayCanvas,Jt=wn.context.gl,In=wn.debugOverlayCanvas.getContext("2d");In.clearRect(0,0,Qn.width,Qn.height),In.shadowColor="white",In.shadowBlur=2,In.lineWidth=1.5,In.strokeStyle="white",In.textBaseline="top",In.font="bold 36px Open Sans, sans-serif",In.fillText(kn,5,5),In.strokeText(kn,5,5),wn.debugOverlayTexture.update(Qn),wn.debugOverlayTexture.bind(Jt.LINEAR,Jt.CLAMP_TO_EDGE)}(v,Rt)}const ht=l.getTile(d).tileSize,ut=512/Math.min(ht,512)*(d.overscaledZ/K.zoom)*.5,xt=Se._tileDebugTextBuffer||v.debugBuffer,Bt=Se._tileDebugTextIndexBuffer||v.quadTriangleIndexBuffer,an=Se._tileDebugTextSegments||v.debugSegments;Ie.draw(v,X.TRIANGLES,Pe,Le,Mr.alphaBlended,Lr.disabled,Fe(se,i.aj.transparent,ut),rt,xt,Bt,an,null,null,null,[Se._globeTileDebugTextBuffer])}function Yd(v,l,d,x){bf(v,0,l+d/2,v.transform.width,d,x)}function od(v,l,d,x){bf(v,l-d/2,0,d,v.transform.height,x)}function bf(v,l,d,x,C,B){const F=v.context,z=F.gl;z.enable(z.SCISSOR_TEST),z.scissor(l*i.q.devicePixelRatio,d*i.q.devicePixelRatio,x*i.q.devicePixelRatio,C*i.q.devicePixelRatio),F.clear({color:B}),z.disable(z.SCISSOR_TEST)}const sA=i.da([{name:"a_pos_3f",components:3,type:"Float32"}]),{members:gm}=sA;function zl(v,l,d,x){v.emplaceBack(l,d,x)}class Cf{constructor(l){this.vertexArray=new i.de,this.indices=new i.aU,zl(this.vertexArray,-1,-1,1),zl(this.vertexArray,1,-1,1),zl(this.vertexArray,-1,1,1),zl(this.vertexArray,1,1,1),zl(this.vertexArray,-1,-1,-1),zl(this.vertexArray,1,-1,-1),zl(this.vertexArray,-1,1,-1),zl(this.vertexArray,1,1,-1),this.indices.emplaceBack(5,1,3),this.indices.emplaceBack(3,7,5),this.indices.emplaceBack(6,2,0),this.indices.emplaceBack(0,4,6),this.indices.emplaceBack(2,6,7),this.indices.emplaceBack(7,3,2),this.indices.emplaceBack(5,4,0),this.indices.emplaceBack(0,1,5),this.indices.emplaceBack(0,2,3),this.indices.emplaceBack(3,1,0),this.indices.emplaceBack(7,6,4),this.indices.emplaceBack(4,5,7),this.vertexBuffer=l.createVertexBuffer(this.vertexArray,gm),this.indexBuffer=l.createIndexBuffer(this.indices),this.segment=i.b7.simpleSegment(0,0,36,12)}}function ja(v,l,d,x,C,B){const F=v.context.gl,z=l.paint.get("sky-atmosphere-color"),K=l.paint.get("sky-atmosphere-halo-color"),X=l.paint.get("sky-atmosphere-sun-intensity"),J=((oe,se,ue,Ie,Se)=>({u_matrix_3f:oe,u_sun_direction:se,u_sun_intensity:ue,u_color_tint_r:[Ie.r,Ie.g,Ie.b,Ie.a],u_color_tint_m:[Se.r,Se.g,Se.b,Se.a],u_luminance:5e-5}))(i.ab.mat3.fromMat4(i.ab.mat3.create(),x),C,X,z,K);F.framebufferTexture2D(F.FRAMEBUFFER,F.COLOR_ATTACHMENT0,F.TEXTURE_CUBE_MAP_POSITIVE_X+B,l.skyboxTexture,0),d.draw(v,F.TRIANGLES,mr.disabled,Rr.disabled,Mr.unblended,Lr.frontCW,J,"skyboxCapture",l.skyboxGeometry.vertexBuffer,l.skyboxGeometry.indexBuffer,l.skyboxGeometry.segment)}const Sf=i.da([{type:"Float32",name:"a_pos",components:3},{type:"Float32",name:"a_uv",components:2}]);class C0{constructor(l){const d=new i.df;d.emplaceBack(-1,1,1,0,0),d.emplaceBack(1,1,1,1,0),d.emplaceBack(1,-1,1,1,1),d.emplaceBack(-1,-1,1,0,1);const x=new i.aU;x.emplaceBack(0,1,2),x.emplaceBack(2,3,0),this.vertexBuffer=l.createVertexBuffer(d,Sf.members),this.indexBuffer=l.createIndexBuffer(x),this.segments=i.b7.simpleSegment(0,0,4,2)}destroy(){this.vertexBuffer.destroy(),this.indexBuffer.destroy(),this.segments.destroy()}}const Ql=i.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_size_scale",components:1},{type:"Float32",name:"a_fade_opacity",components:1}]);class yp{constructor(){this.starsCount=16e3,this.sizeMultiplier=.15,this.sizeRange=100,this.intensityRange=200}}class uu{constructor(l){this.colorModeAlphaBlendedWriteRGB=new Mr([1,To,1,To],i.aj.transparent,[!0,!0,!0,!1]),this.colorModeWriteAlpha=new Mr([1,0,1,0],i.aj.transparent,[!1,!1,!1,!0]),this.params=new yp,this.updateNeeded=!0,l.tp.registerParameter(this.params,["Stars"],"starsCount",{min:100,max:16e3,step:1},()=>{this.updateNeeded=!0}),l.tp.registerParameter(this.params,["Stars"],"sizeMultiplier",{min:.01,max:2,step:.01}),l.tp.registerParameter(this.params,["Stars"],"sizeRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0}),l.tp.registerParameter(this.params,["Stars"],"intensityRange",{min:0,max:200,step:1},()=>{this.updateNeeded=!0})}update(l){const d=l.context;if(!this.atmosphereBuffer||this.updateNeeded){this.updateNeeded=!1,this.atmosphereBuffer=new C0(d);const x=this.params.sizeRange,C=this.params.intensityRange,B=function(J){const oe=i.di(30),se=[];for(let ue=0;ue<J;++ue){const Ie=2*Math.PI*oe(),Se=Math.acos(1-2*oe())-.5*Math.PI;se.push(i.ab.vec3.fromValues(Math.cos(Se)*Math.cos(Ie),Math.cos(Se)*Math.sin(Ie),Math.sin(Se)))}return se}(this.params.starsCount),F=i.di(300),z=new i.dg,K=new i.aU;let X=0;for(let J=0;J<B.length;++J){const oe=i.ab.vec3.scale([],B[J],200),se=Math.max(0,1+.01*x*(1*F()-.5)),ue=Math.max(0,1+.01*C*(1*F()-.5));z.emplaceBack(oe[0],oe[1],oe[2],-1,-1,se,ue),z.emplaceBack(oe[0],oe[1],oe[2],1,-1,se,ue),z.emplaceBack(oe[0],oe[1],oe[2],1,1,se,ue),z.emplaceBack(oe[0],oe[1],oe[2],-1,1,se,ue),K.emplaceBack(X+0,X+1,X+2),K.emplaceBack(X+0,X+2,X+3),X+=4}this.starsVx=d.createVertexBuffer(z,Ql.members),this.starsIdx=d.createIndexBuffer(K),this.starsSegments=i.b7.simpleSegment(0,0,z.length,K.length)}}destroy(){this.atmosphereBuffer&&this.atmosphereBuffer.destroy(),this.starsVx&&this.starsVx.destroy(),this.starsIdx&&this.starsIdx.destroy()}drawAtmosphereGlow(l,d){const x=l.context,C=x.gl,B=l.transform,F=new mr(C.LEQUAL,mr.ReadOnly,[0,1]),z=i.ae(B.zoom),K=l.style.getLut(d.scope),X=d.properties.get("color-use-theme")==="none",J=d.properties.get("color").toRenderColor(X?null:K).toArray01(),oe=d.properties.get("high-color-use-theme")==="none",se=d.properties.get("high-color").toRenderColor(oe?null:K).toArray01(),ue=d.properties.get("space-color-use-theme")==="none",Ie=d.properties.get("space-color").toRenderColor(ue?null:K).toArray01PremultipliedAlpha(),Se=5e-4,Pe=i.dh(d.properties.get("horizon-blend"),0,1,Se,.25),Le=i.cC(l,x,B)&&Pe===Se?B.worldSize/(2*Math.PI*1.025)-1:B.globeRadius,$e=l.frameCounter/1e3%1,rt=i.ab.vec3.length(B.globeCenterInViewSpace),et=Math.sqrt(Math.pow(rt,2)-Math.pow(Le,2)),ft=Math.acos(et/rt),dt=ht=>{const ut=B.projection.name==="globe"?["PROJECTION_GLOBE_VIEW","FOG"]:["FOG"];ht&&ut.push("ALPHA_PASS");const xt=l.getOrCreateProgram("globeAtmosphere",{defines:ut}),Bt=((tn,Ct,Rt,wn,kn,Qn,Jt,In,dn,Dn,Fn,bn)=>({u_frustum_tl:tn,u_frustum_tr:Ct,u_frustum_br:Rt,u_frustum_bl:wn,u_horizon:kn,u_transition:Qn,u_fadeout_range:Jt,u_color:In,u_high_color:dn,u_space_color:Dn,u_temporal_offset:Fn,u_horizon_angle:bn}))(B.frustumCorners.TL,B.frustumCorners.TR,B.frustumCorners.BR,B.frustumCorners.BL,B.frustumCorners.horizon,z,Pe,J,se,Ie,$e,ft);l.uploadCommonUniforms(x,xt);const an=this.atmosphereBuffer;an&&xt.draw(l,C.TRIANGLES,F,Rr.disabled,ht?this.colorModeWriteAlpha:this.colorModeAlphaBlendedWriteRGB,Lr.backCW,Bt,ht?"atmosphere_glow_alpha":"atmosphere_glow",an.vertexBuffer,an.indexBuffer,an.segments)};dt(!1),dt(!0)}drawStars(l,d){const x=i.aw(d.properties.get("star-intensity"),0,1);if(x===0)return;const C=l.context,B=C.gl,F=l.transform,z=l.getOrCreateProgram("stars"),K=i.ab.quat.identity([]);i.ab.quat.rotateX(K,K,-F._pitch),i.ab.quat.rotateZ(K,K,-F.angle),i.ab.quat.rotateX(K,K,i.ai(F._center.lat)),i.ab.quat.rotateY(K,K,-i.ai(F._center.lng));const X=i.ab.mat4.fromQuat(new Float32Array(16),K),J=i.ab.mat4.multiply([],F.starsProjMatrix,X),oe=i.ab.mat3.fromMat4([],X),se=i.ab.mat3.invert([],oe),ue=[0,1,0];i.ab.vec3.transformMat3(ue,ue,se),i.ab.vec3.scale(ue,ue,this.params.sizeMultiplier);const Ie=[1,0,0];i.ab.vec3.transformMat3(Ie,Ie,se),i.ab.vec3.scale(Ie,Ie,this.params.sizeMultiplier);const Se=(Pe=ue,Le=Ie,$e=x,{u_matrix:Float32Array.from(J),u_up:Pe,u_right:Le,u_intensity_multiplier:$e});var Pe,Le,$e;l.uploadCommonUniforms(C,z),this.starsVx&&this.starsIdx&&z.draw(l,B.TRIANGLES,mr.disabled,Rr.disabled,this.colorModeAlphaBlendedWriteRGB,Lr.disabled,Se,"atmosphere_stars",this.starsVx,this.starsIdx,this.starsSegments)}}function js(v,l){const d=[...v],x=l.cameraWorldSizeForFog/l.worldSize,C=i.ab.mat4.identity([]);return i.ab.mat4.scale(C,C,[x,x,1]),i.ab.mat4.multiply(d,C,d),i.ab.mat4.multiply(d,l.worldToFogMatrix,d),d}function $i(v,l,d,x,C){const B=d.material,F=x.context,{baseColorTexture:z,metallicRoughnessTexture:K}=B.pbrMetallicRoughness,{normalTexture:X,occlusionTexture:J,emissionTexture:oe}=B;function se(Ie,Se,Pe){if(Ie&&(v.push(Se),F.activeTexture.set(F.gl.TEXTURE0+Pe),Ie.gfxTexture)){const{minFilter:Le,magFilter:$e,wrapS:rt,wrapT:et}=Ie.sampler;Ie.gfxTexture.bindExtraParam(Le,$e,rt,et)}}se(z,"HAS_TEXTURE_u_baseColorTexture",na.BaseColor),se(K,"HAS_TEXTURE_u_metallicRoughnessTexture",na.MetallicRoughness),se(X,"HAS_TEXTURE_u_normalTexture",na.Normal),se(J,"HAS_TEXTURE_u_occlusionTexture",na.Occlusion),se(oe,"HAS_TEXTURE_u_emissionTexture",na.Emission),C&&(C.texture||(C.texture=new i.dk(x.context,C.image,[C.image.height,C.image.height,C.image.height],F.gl.RGBA8)),F.activeTexture.set(F.gl.TEXTURE0+na.LUT),C.texture&&C.texture.bind(F.gl.LINEAR,F.gl.CLAMP_TO_EDGE),v.push("APPLY_LUT_ON_GPU")),d.texcoordBuffer&&(v.push("HAS_ATTRIBUTE_a_uv_2f"),l.push(d.texcoordBuffer)),d.colorBuffer&&(v.push(d.colorBuffer.itemSize===12?"HAS_ATTRIBUTE_a_color_3f":"HAS_ATTRIBUTE_a_color_4f"),l.push(d.colorBuffer)),d.normalBuffer&&(v.push("HAS_ATTRIBUTE_a_normal_3f"),l.push(d.normalBuffer)),d.pbrBuffer&&(v.push("HAS_ATTRIBUTE_a_pbr"),v.push("HAS_ATTRIBUTE_a_heightBasedEmissiveStrength"),l.push(d.pbrBuffer)),B.alphaMode!=="OPAQUE"&&B.alphaMode!=="MASK"||v.push("UNPREMULT_TEXTURE_IN_SHADER"),B.defined||v.push("DIFFUSE_SHADED"),v.push("USE_STANDARD_DERIVATIVES");const ue=x.shadowRenderer;ue&&(v.push("RENDER_SHADOWS","DEPTH_TEXTURE"),ue.useNormalOffset&&v.push("NORMAL_OFFSET"))}function oA(v,l,d,x,C,B){const F=d.paint.get("model-opacity").constantOr(1),z=l.context,K=new mr(l.context.gl.LEQUAL,mr.ReadWrite,l.depthRangeFor3D),X=l.transform,J=v.mesh,oe=J.material,se=oe.pbrMetallicRoughness,ue=l.style.fog;let Ie;Ie=l.transform.projection.zAxisUnit==="pixels"?[...v.nodeModelMatrix]:i.ab.mat4.multiply([],x.zScaleMatrix,v.nodeModelMatrix),i.ab.mat4.multiply(Ie,x.negCameraPosMatrix,Ie);const Se=i.ab.mat4.invert([],Ie);i.ab.mat4.transpose(Se,Se);const Pe=d.paint.get("model-color-use-theme").constantOr("default")==="none",Le=d.paint.get("model-emissive-strength").constantOr(0),$e=ur(new Float32Array(v.worldViewProjection),new Float32Array(Ie),new Float32Array(Se),null,l,F,se.baseColorFactor.toRenderColor(null),oe.emissiveFactor,se.metallicFactor,se.roughnessFactor,oe,Le,d),rt={defines:[]},et=[],ft=l.shadowRenderer;ft&&(ft.useNormalOffset=!1),$i(rt.defines,et,J,l,Pe?null:d.lut);let dt=null;if(ue){const xt=js(v.nodeModelMatrix,l.transform);if(dt=new Float32Array(xt),X.projection.name!=="globe"){const Bt=J.aabb.min,an=J.aabb.max,[tn,Ct]=ue.getOpacityForBounds(xt,Bt[0],Bt[1],an[0],an[1]);rt.overrideFog=tn>=Pn||Ct>=Pn}}const ht=rc(l,d.paint.get("model-cutoff-fade-range"));ht.shouldRenderCutoff&&rt.defines.push("RENDER_CUTOFF");const ut=l.getOrCreateProgram("model",rt);l.uploadCommonUniforms(z,ut,null,dt,ht),l.renderPass!=="shadow"&&ft&&ft.setupShadowsFromMatrix(v.nodeModelMatrix,ut),ut.draw(l,z.gl.TRIANGLES,K,C,B,J.material.doubleSided?Lr.disabled:Lr.backCCW,$e,d.id,J.vertexBuffer,J.indexBuffer,J.segments,d.paint,l.transform.zoom,void 0,et)}function Iu(v,l,d,x,C,B,F){let z;z=v.projection.name==="globe"?i.dl(d,v):[...d],i.ab.mat4.multiply(z,z,l.matrix);const K=i.ab.mat4.multiply([],x,z);if(l.meshes)for(const X of l.meshes){if(X.material.alphaMode!=="BLEND"){F.push({mesh:X,depth:0,modelIndex:C,worldViewProjection:K,nodeModelMatrix:z});continue}const J=i.ab.vec3.transformMat4([],X.centroid,K);J[2]>0&&B.push({mesh:X,depth:J[2],modelIndex:C,worldViewProjection:K,nodeModelMatrix:z})}if(l.children)for(const X of l.children)Iu(v,X,d,x,C,B,F)}function Jd(v,l,d,x){const C=d.shadowRenderer;if(!C)return;const B=C.getShadowPassDepthMode(),F=C.getShadowPassColorMode(),z=C.calculateShadowPassMatrixFromMatrix(l),K=Xn(z);d.getOrCreateProgram("modelDepth",{defines:d._shadowMapDebug?[]:["DEPTH_TEXTURE"]}).draw(d,d.context.gl.TRIANGLES,B,Rr.disabled,F,Lr.backCCW,K,x.id,v.vertexBuffer,v.indexBuffer,v.segments,x.paint,d.transform.zoom,void 0,void 0)}function eh(v,l,d){const x=l.updateZoomBasedPaintProperties(),C=function(B,F,z){let K,X,J,oe=B.terrain?B.terrain.exaggeration():0;if(B.terrain&&oe>0){const se=B.terrain,ue=se.findDEMTileFor(z);ue&&ue.dem?K=i.dn.create(se,z,ue):oe=0}if(oe===0&&(F.terrainElevationMin=0,F.terrainElevationMax=0),oe===F.validForExaggeration&&(oe===0||K&&K._demTile&&K._demTile.tileID===F.validForDEMTile.id&&K._dem._timestamp===F.validForDEMTile.timestamp))return!1;for(const se in F.instancesPerModel){const ue=F.instancesPerModel[se];for(let Ie=0;Ie<ue.instancedDataArray.length;++Ie){const Se=(K?oe*K.getElevationAt(0|ue.instancedDataArray.float32[16*Ie],0|ue.instancedDataArray.float32[16*Ie+1],!0,!0):0)+ue.instancesEvaluatedElevation[Ie];ue.instancedDataArray.float32[16*Ie+6]=Se,X=X?Math.min(F.terrainElevationMin,Se):Se,J=J?Math.max(F.terrainElevationMax,Se):Se}}return F.terrainElevationMin=X||0,F.terrainElevationMax=J||0,F.validForExaggeration=oe,F.validForDEMTile=K&&K._demTile?{id:K._demTile.tileID,timestamp:K._dem._timestamp}:{id:void 0,timestamp:0},!0}(v,l,d);(x||C)&&(l.uploaded=!1,l.upload(v.context))}const jc={shadowUniformsInitialized:!1,useSingleShadowCascade:!1,tileMatrix:new Float64Array(16),shadowTileMatrix:new Float32Array(16),aabb:new i.cd([0,0,0],[i.ag,i.ag,0])};function Lh(v,l){const d=1<<v.canonical.z,x=l.getFreeCameraOptions().position,C=l.elevation,B=v.canonical.x/d,F=(v.canonical.x+1)/d,z=v.canonical.y/d,K=(v.canonical.y+1)/d;let X=l._centerAltitude;if(C){const ue=C.getMinMaxForTile(v);ue&&ue.max>X&&(X=ue.max)}const J=i.aw(x.x,B,F)-x.x,oe=i.aw(x.y,z,K)-x.y,se=i.bH(X,l.center.lat)-x.z;return l._zoomFromMercatorZ(Math.sqrt(J*J+oe*oe+se*se))}function ju(v,l,d,x,C,B,F){const z=v.context,K=v.renderPass==="shadow",X=v.shadowRenderer,J=K&&X?X.getShadowPassDepthMode():new mr(z.gl.LEQUAL,mr.ReadWrite,v.depthRangeFor3D),oe=v.isTileAffectedByFog(B);if(d.meshes)for(const se of d.meshes){const ue=["MODEL_POSITION_ON_GPU"],Ie=[];let Se,Pe,Le;x.instancedDataArray.length>20&&ue.push("INSTANCED_ARRAYS");const $e=rc(v,l.paint.get("model-cutoff-fade-range"));if($e.shouldRenderCutoff&&ue.push("RENDER_CUTOFF"),K&&X)Se=v.getOrCreateProgram("modelDepth",{defines:ue}),Pe=Xn(F.shadowTileMatrix,F.shadowTileMatrix,Float32Array.from(d.matrix)),Le=X.getShadowPassColorMode();else{$i(ue,Ie,se,v,l.paint.get("model-color-use-theme").constantOr("default")==="none"?null:l.lut),Se=v.getOrCreateProgram("model",{defines:ue,overrideFog:oe});const et=se.material,ft=et.pbrMetallicRoughness,dt=l.paint.get("model-opacity").constantOr(1),ht=l.paint.get("model-emissive-strength").constantOr(0);Pe=ur(B.expandedProjMatrix,Float32Array.from(d.matrix),new Float32Array(16),null,v,dt,ft.baseColorFactor.toRenderColor(null),et.emissiveFactor,ft.metallicFactor,ft.roughnessFactor,et,ht,l,C),X&&(F.shadowUniformsInitialized?Se.setShadowUniformValues(z,X.getShadowUniformValues()):(X.setupShadows(B.toUnwrapped(),Se,"model-tile",B.overscaledZ),F.shadowUniformsInitialized=!0)),Le=$e.shouldRenderCutoff||dt<1||et.alphaMode!=="OPAQUE"?Mr.alphaBlended:Mr.unblended}v.uploadCommonUniforms(z,Se,B.toUnwrapped(),null,$e);const rt=se.material.doubleSided?Lr.disabled:Lr.backCCW;if(x.instancedDataArray.length>20)Ie.push(x.instancedDataBuffer),Se.draw(v,z.gl.TRIANGLES,J,Rr.disabled,Le,rt,Pe,l.id,se.vertexBuffer,se.indexBuffer,se.segments,l.paint,v.transform.zoom,void 0,Ie,x.instancedDataArray.length);else{const et=K?"u_instance":"u_normal_matrix";for(let ft=0;ft<x.instancedDataArray.length;++ft)Pe[et]=new Float32Array(x.instancedDataArray.arrayBuffer,64*ft,16),Se.draw(v,z.gl.TRIANGLES,J,Rr.disabled,Le,rt,Pe,l.id,se.vertexBuffer,se.indexBuffer,se.segments,l.paint,v.transform.zoom,void 0,Ie)}}if(d.children)for(const se of d.children)ju(v,l,se,x,C,B,F)}const Fc=[1,-1,1];function Ui(v,l,d,x){if(!d.modelManager)return!0;const C=d.modelManager;if(!d.shadowRenderer)return!0;const B=d.shadowRenderer,F=l.aabb;let z=!0,K=v.maxHeight;if(K===0){let J=0;for(const oe in v.instancesPerModel){const se=C.getModel(oe,x);se?J=Math.max(J,Math.max(Math.max(se.aabb.max[0],se.aabb.max[1]),se.aabb.max[2])):z=!1}K=v.maxScale*J*1.41+v.maxVerticalOffset,z&&(v.maxHeight=K)}F.max[2]=K,F.min[2]+=v.terrainElevationMin,F.max[2]+=v.terrainElevationMax,i.ab.vec3.transformMat4(F.min,F.min,l.tileMatrix),i.ab.vec3.transformMat4(F.max,F.max,l.tileMatrix);const X=F.intersects(B.getCurrentCascadeFrustum());return d.currentShadowCascade===0&&(v.isInsideFirstShadowMapFrustum=X===2),X===0}function ym(v,l){const d=v.uniformValues.u_cutoff_params[0],x=v.uniformValues.u_cutoff_params[1],C=v.uniformValues.u_cutoff_params[2],B=v.uniformValues.u_cutoff_params[3];return x===d||B===C?1:i.aw(((l-d)/(x-d)-C)/(B-C),0,1)}function Bf(v,l,d,x){if(l.pitch<20)return 1;const C=l.getWorldToCameraMatrix();i.ab.mat4.multiply(C,C,v);const B=i.ab.vec4.fromValues(d.min[0],d.min[1],d.min[2],1);let F=i.ab.vec4.transformMat4(i.ab.vec4.create(),B,C),z=F,K=F;B[1]=d.max[1],F=i.ab.vec4.transformMat4(i.ab.vec4.create(),B,C),z=F[1]<z[1]?F:z,K=F[1]>K[1]?F:K,B[0]=d.max[0],F=i.ab.vec4.transformMat4(i.ab.vec4.create(),B,C),z=F[1]<z[1]?F:z,K=F[1]>K[1]?F:K,B[1]=d.min[1],F=i.ab.vec4.transformMat4(i.ab.vec4.create(),B,C),z=F[1]<z[1]?F:z,K=F[1]>K[1]?F:K;const X=i.aw(x[0],0,1),J=100*l.pixelsPerMeter*i.aw(x[1],0,1),oe=i.aw(x[2],0,1),se=i.ab.vec4.lerp(i.ab.vec4.create(),z,K,X),ue=Math.tan(.5*l.fovX),Ie=-se[2]*ue;if(J===0)return se[1]<-Math.abs(Ie)?oe:1;const Se=(-Math.abs(Ie)-se[1])/J,Pe=($e,rt,et)=>(1-et)*$e+et*rt,Le=i.aw(Pe(1,oe,Se),oe,1);return Pe(1,Le,i.aw((l.pitch-20)/20,0,1))}class Mh{}class vp{constructor(){this._storage=new Map}getLinesFromTrianglesBuffer(l,d,x){{const oe=this._storage.get(d.id);if(oe)return oe.lastUsedFrameIdx=l,oe.buf}const C=x.gl,B=C.getBufferParameter(C.ELEMENT_ARRAY_BUFFER,C.BUFFER_SIZE),F=new ArrayBuffer(B),z=new Int16Array(F);C.getBufferSubData(C.ELEMENT_ARRAY_BUFFER,0,new Int16Array(F));const K=new i.dq;for(let oe=0;oe<B/2;oe+=3){const se=z[oe],ue=z[oe+1],Ie=z[oe+2];K.emplaceBack(se,ue),K.emplaceBack(ue,Ie),K.emplaceBack(Ie,se)}const X=x.bindVertexArrayOES.current,J=new Mh;return J.buf=new wr(x,K),J.lastUsedFrameIdx=l,this._storage.set(d.id,J),x.bindVertexArrayOES.set(X),J.buf}update(l){for(const[d,x]of this._storage)l-x.lastUsedFrameIdx>30&&(x.buf.destroy(),this._storage.delete(d))}destroy(){for(const[l,d]of this._storage)d.buf.destroy(),this._storage.delete(l)}}class ad{constructor(l){this.occluderSize=30,this.depthOffset=-1e-4,l.registerParameter(this,["Occlusion"],"occluderSize",{min:1,max:100,step:1}),l.registerParameter(this,["Occlusion"],"depthOffset",{min:-.05,max:0,step:1e-5})}}const th=i.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_rainParticleData",components:4}]);class oc{registerParameter(){}registerButton(){}registerBinding(){}refreshUI(){}}class aA{constructor(l,d){this.revealStart=11,this.revealRange=2,l.registerParameter(this,[...d,"Reveal"],"revealStart",{min:0,max:17,step:.05}),l.registerParameter(this,[...d,"Reveal"],"revealRange",{min:.1,max:5.1,step:.05})}}const Ef=i.da([{type:"Float32",name:"a_pos_2f",components:2}]);class ld{destroy(){this.vignetteVx&&this.vignetteVx.destroy(),this.vignetteIdx&&this.vignetteIdx.destroy()}draw(l,d){const x=l.getOrCreateProgram("vignette");if(!this.vignetteVx||!this.vignetteIdx){const F=new i.dr,z=new i.aU;F.emplaceBack(-1,-1),F.emplaceBack(1,-1),F.emplaceBack(1,1),F.emplaceBack(-1,1),z.emplaceBack(0,1,2),z.emplaceBack(0,2,3),this.vignetteVx=l.context.createVertexBuffer(F,Ef.members),this.vignetteIdx=l.context.createIndexBuffer(z)}const C=i.b7.simpleSegment(0,0,4,6);if(this.vignetteVx&&this.vignetteIdx){l.uploadCommonUniforms(l.context,x);const F={u_vignetteShape:(B={vignetteShape:[d.start,d.range,Math.pow(10,d.fadePower)],vignetteColor:[d.color.r,d.color.g,d.color.b,d.color.a*d.strength]}).vignetteShape,u_vignetteColor:B.vignetteColor};x.draw(l,l.context.gl.TRIANGLES,mr.disabled,Rr.disabled,Mr.alphaBlended,Lr.disabled,F,"vignette",this.vignetteVx,this.vignetteIdx,C,{})}var B}}class $a{constructor(){this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0}update(l,d){const x=l.getFreeCameraOptions().position,C=x.toAltitude(),B=x.toLngLat(),F=i.ai(B.lng),z=i.ai(B.lat),K=l.pixelsPerMeter/d,X=F*i.ds,J=i.ds*Math.log(Math.tan(Math.PI/4+z/2));if(this._offsetXPrev===void 0)this._offsetXPrev=0,this._offsetYPrev=0,this._elevationPrev=0,this._accumulatedOffsetX=0,this._accumulatedOffsetY=0,this._accumulatedElevation=0;else{const oe=-this._offsetYPrev+J,se=-this._elevationPrev+C;this._accumulatedOffsetX+=(-this._offsetXPrev+X)*K,this._accumulatedOffsetY+=oe*K,this._accumulatedElevation+=se*K,this._offsetXPrev=X,this._offsetYPrev=J,this._elevationPrev=C}}getPosition(){return[this._accumulatedOffsetX,this._accumulatedOffsetY,this._accumulatedElevation]}}function xp(v,l){return[-(v[0]-Math.floor(v[0]/l)*l),-(v[1]-Math.floor(v[1]/l)*l),-(v[2]-Math.floor(v[2]/l)*l)]}function Hl(v){const l=i.di(1323123451230),d=[];for(let x=0;x<v;++x){const C=2*l()-1,B=2*l()-1,F=2*l()-1;d.push(i.ab.vec3.fromValues(C,B,F))}return d}function Fa(v,l,d,x,C){const B=i.aw((C-d)/(x-d),0,1);return(1-B)*v+B*l}class cd{constructor(l){this._movement=new $a,this._accumulatedTimeFromStart=0,this._prevTime=Date.now()/1e3,this._vignette=new ld,this._ppmScaleFactor=l}destroy(){this.particlesVx&&this.particlesVx.destroy(),this.particlesIdx&&this.particlesIdx.destroy(),this._vignette&&this._vignette.destroy()}updateOnRender(l,d){const x=l.transform;this._movement.update(x,this._ppmScaleFactor);const C=x.starsProjMatrix,B=i.ab.quat.identity([]);i.ab.quat.rotateX(B,B,i.ai(90)-x._pitch),i.ab.quat.rotateZ(B,B,-x.angle);const F=i.ab.mat4.fromQuat(new Float32Array(16),B),z=i.ab.mat4.fromValues(1,0,0,0,0,0,1,0,0,-1,0,0,0,0,0,1),K=i.ab.mat4.transpose([],z),X=i.ab.mat4.multiply([],K,F),J=Date.now()/1e3;return this._accumulatedTimeFromStart+=(J-this._prevTime)*d,this._prevTime=J,{projectionMatrix:C,modelviewMatrix:X}}}class Nh extends cd{constructor(l){super(4.25),this._params={overrideStyleParameters:!1,intensity:.5,timeFactor:1,velocityConeAperture:0,velocity:300,boxSize:2500,dropletSizeX:1,dropletSizeYScale:10,distortionStrength:70,screenThinning:{intensity:.57,start:.46,range:1.17,fadePower:.17,affectedRatio:1,particleOffset:-.2},color:{r:.66,g:.68,b:.74,a:.7},direction:{x:-50,y:-35},shapeDirPower:2,shapeNormalPower:1},this._revealParams=new aA(l.tp,["Precipitation","Rain"]),this._vignetteParams={strength:1,start:.7,range:1,fadePower:.4,color:{r:.27,g:.27,b:.27,a:1}},this.particlesCount=16e3}update(l){const d=l.context;if(!this.particlesVx){const x=Hl(this.particlesCount),C=new i.dt,B=new i.aU;let F=0;const z=i.di(1323123451230);for(let K=0;K<x.length;++K){const X=x[K],J=[2*z()-1,z(),z(),z()];C.emplaceBack(X[0],X[1],X[2],-1,-1,...J),C.emplaceBack(X[0],X[1],X[2],1,-1,...J),C.emplaceBack(X[0],X[1],X[2],1,1,...J),C.emplaceBack(X[0],X[1],X[2],-1,1,...J),B.emplaceBack(F+0,F+1,F+2),B.emplaceBack(F+0,F+2,F+3),F+=4}this.particlesVx=d.createVertexBuffer(C,th.members),this.particlesIdx=d.createIndexBuffer(B)}}draw(l){if(!this._params.overrideStyleParameters&&!l.style.rain)return;const d=this._params.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},x=l.transform.zoom;if(d.revealStart>x)return;const C=Fa(0,1,d.revealStart,d.revealStart+d.revealRange,x);if(!this.particlesVx||!this.particlesIdx)return;const B=structuredClone(this._params);let F=[-B.direction.x,B.direction.y,-100];i.ab.vec3.normalize(F,F);const z=structuredClone(this._vignetteParams);z.strength*=C,B.overrideStyleParameters||(B.intensity=l.style.rain.state.density,B.timeFactor=l.style.rain.state.intensity,B.color=structuredClone(l.style.rain.state.color),F=structuredClone(l.style.rain.state.direction),B.screenThinning.intensity=l.style.rain.state.centerThinning,B.dropletSizeX=l.style.rain.state.dropletSize[0],B.dropletSizeYScale=l.style.rain.state.dropletSize[1]/l.style.rain.state.dropletSize[0],B.distortionStrength=100*l.style.rain.state.distortionStrength,z.strength=1,z.color=structuredClone(l.style.rain.state.vignetteColor));const K=this.updateOnRender(l,B.timeFactor),X=l.context,J=X.gl,oe=l.transform;this.screenTexture&&this.screenTexture.size[0]===l.width&&this.screenTexture.size[1]===l.height||(this.screenTexture=new i.T(X,{width:l.width,height:l.height,data:null},J.RGBA8)),B.distortionStrength>0&&(X.activeTexture.set(J.TEXTURE0),this.screenTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE),J.copyTexSubImage2D(J.TEXTURE_2D,0,0,0,0,0,l.width,l.height));const se=l.getOrCreateProgram("rainParticle");l.uploadCommonUniforms(X,se),X.activeTexture.set(J.TEXTURE0),this.screenTexture.bind(J.LINEAR,J.CLAMP_TO_EDGE);const ue=[B.color.r,B.color.g,B.color.b,B.color.a],Ie=(Se,Pe)=>{const Le=xp(this._movement.getPosition(),Se),$e=B.dropletSizeX,rt=B.dropletSizeX*B.dropletSizeYScale,et=l.width/2,ft=l.height/2,dt=Fa(0,B.screenThinning.start,0,1,B.screenThinning.intensity),ht=Fa(.001,B.screenThinning.range,0,1,B.screenThinning.intensity),ut=Fa(0,B.screenThinning.particleOffset,0,1,B.screenThinning.intensity),xt=(Bt={modelview:K.modelviewMatrix,projection:K.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Le,velocityConeAperture:B.velocityConeAperture,velocity:B.velocity,boxSize:Se,rainDropletSize:[$e,rt],distortionStrength:B.distortionStrength,rainDirection:F,color:ue,screenSize:[oe.width,oe.height],thinningCenterPos:[et,ft],thinningShape:[dt,ht,Math.pow(10,B.screenThinning.fadePower)],thinningAffectedRatio:B.screenThinning.affectedRatio,thinningParticleOffset:ut,shapeDirectionalPower:B.shapeDirPower,shapeNormalPower:B.shapeNormalPower,mode:Pe?0:1},{u_modelview:Float32Array.from(Bt.modelview),u_projection:Float32Array.from(Bt.projection),u_time:Bt.time,u_cam_pos:Bt.camPos,u_texScreen:0,u_velocityConeAperture:Bt.velocityConeAperture,u_velocity:Bt.velocity,u_boxSize:Bt.boxSize,u_rainDropletSize:Bt.rainDropletSize,u_distortionStrength:Bt.distortionStrength,u_rainDirection:Bt.rainDirection,u_color:Bt.color,u_screenSize:Bt.screenSize,u_thinningCenterPos:Bt.thinningCenterPos,u_thinningShape:Bt.thinningShape,u_thinningAffectedRatio:Bt.thinningAffectedRatio,u_thinningParticleOffset:Bt.thinningParticleOffset,u_shapeDirectionalPower:Bt.shapeDirectionalPower,u_shapeNormalPower:Bt.shapeNormalPower,u_mode:Bt.mode});var Bt;const an=Math.round(C*B.intensity*this.particlesCount),tn=i.b7.simpleSegment(0,0,4*an,2*an);se.draw(l,J.TRIANGLES,mr.disabled,Rr.disabled,Mr.alphaBlended,Lr.disabled,xt,"rain_particles",this.particlesVx,this.particlesIdx,tn,{})};B.distortionStrength>0&&Ie(B.boxSize,!0),Ie(B.boxSize,!1),this._vignette.draw(l,z)}}const Rh=i.da([{type:"Float32",name:"a_pos_3f",components:3},{type:"Float32",name:"a_uv",components:2},{type:"Float32",name:"a_snowParticleData",components:4},{type:"Float32",name:"a_snowParticleDataHorizontalOscillation",components:2}]);class Tf extends cd{constructor(l){super(2.25),this._params={overrideStyleParameters:!1,intensity:.85,timeFactor:.75,velocityConeAperture:70,velocity:40,horizontalOscillationRadius:4,horizontalOscillationRate:1.5,boxSize:2e3,billboardSize:2,shapeFadeStart:.27,shapeFadePower:.21,screenThinning:{intensity:.4,start:.15,range:1.4,fadePower:.24,affectedRatio:1,particleOffset:-.2},color:{r:1,g:1,b:1,a:1},direction:{x:-50,y:-35}},this._revealParams=new aA(l.tp,["Precipitation","Snow"]),this._vignetteParams={strength:.3,start:.78,range:.46,fadePower:.2,color:{r:1,g:1,b:1,a:1}},this.particlesCount=16e3}update(l){const d=l.context;if(!this.particlesVx){const x=Hl(this.particlesCount),C=new i.du,B=new i.aU;let F=0;const z=i.di(1323123451230);for(let K=0;K<x.length;++K){const X=x[K],J=z(),oe=z(),se=z(),ue=[K/x.length,J,oe,se],Ie=[z(),z()];C.emplaceBack(X[0],X[1],X[2],-1,-1,...ue,...Ie),C.emplaceBack(X[0],X[1],X[2],1,-1,...ue,...Ie),C.emplaceBack(X[0],X[1],X[2],1,1,...ue,...Ie),C.emplaceBack(X[0],X[1],X[2],-1,1,...ue,...Ie),B.emplaceBack(F+0,F+1,F+2),B.emplaceBack(F+0,F+2,F+3),F+=4}this.particlesVx=d.createVertexBuffer(C,Rh.members),this.particlesIdx=d.createIndexBuffer(B)}}draw(l){if(!this._params.overrideStyleParameters&&!l.style.snow)return;const d=structuredClone(this._params);let x=[-d.direction.x,d.direction.y,-100];i.ab.vec3.normalize(x,x);const C=structuredClone(this._vignetteParams),B=d.overrideStyleParameters?this._revealParams:{revealStart:0,revealRange:.01},F=l.transform.zoom;if(B.revealStart>F)return;const z=Fa(0,1,B.revealStart,B.revealStart+B.revealRange,F);C.strength*=z,d.overrideStyleParameters||(d.intensity=l.style.snow.state.density,d.timeFactor=l.style.snow.state.intensity,d.color=structuredClone(l.style.snow.state.color),x=structuredClone(l.style.snow.state.direction),d.screenThinning.intensity=l.style.snow.state.centerThinning,d.billboardSize=2.79*l.style.snow.state.flakeSize,C.strength=1,C.color=structuredClone(l.style.snow.state.vignetteColor));const K=this.updateOnRender(l,d.timeFactor);if(!this.particlesVx||!this.particlesIdx)return;const X=l.context,J=X.gl,oe=l.transform,se=l.getOrCreateProgram("snowParticle");l.uploadCommonUniforms(X,se),((ue,Ie,Se)=>{const Pe=xp(this._movement.getPosition(),ue),Le=oe.width/2,$e=oe.height/2,rt=Fa(0,Se.screenThinning.start,0,1,Se.screenThinning.intensity),et=Fa(.001,Se.screenThinning.range,0,1,Se.screenThinning.intensity),ft=Fa(0,Se.screenThinning.particleOffset,0,1,Se.screenThinning.intensity),dt=(ht={modelview:K.modelviewMatrix,projection:K.projectionMatrix,time:this._accumulatedTimeFromStart,camPos:Pe,velocityConeAperture:Se.velocityConeAperture,velocity:Se.velocity,horizontalOscillationRadius:Se.horizontalOscillationRadius,horizontalOscillationRate:Se.horizontalOscillationRate,boxSize:ue,billboardSize:1*Se.billboardSize,simpleShapeParameters:[Se.shapeFadeStart,Se.shapeFadePower],screenSize:[oe.width,oe.height],thinningCenterPos:[Le,$e],thinningShape:[rt,et,Math.pow(10,Se.screenThinning.fadePower)],thinningAffectedRatio:Se.screenThinning.affectedRatio,thinningParticleOffset:ft,color:[Se.color.r,Se.color.g,Se.color.b,Se.color.a],direction:x},{u_modelview:Float32Array.from(ht.modelview),u_projection:Float32Array.from(ht.projection),u_time:ht.time,u_cam_pos:ht.camPos,u_velocityConeAperture:ht.velocityConeAperture,u_velocity:ht.velocity,u_horizontalOscillationRadius:ht.horizontalOscillationRadius,u_horizontalOscillationRate:ht.horizontalOscillationRate,u_boxSize:ht.boxSize,u_billboardSize:ht.billboardSize,u_simpleShapeParameters:ht.simpleShapeParameters,u_screenSize:ht.screenSize,u_thinningCenterPos:ht.thinningCenterPos,u_thinningShape:ht.thinningShape,u_thinningAffectedRatio:ht.thinningAffectedRatio,u_thinningParticleOffset:ht.thinningParticleOffset,u_particleColor:ht.color,u_direction:ht.direction});var ht;const ut=Math.round(z*Se.intensity*this.particlesCount),xt=i.b7.simpleSegment(0,0,4*ut,2*ut);this.particlesVx&&this.particlesIdx&&se.draw(l,J.TRIANGLES,mr.disabled,Rr.disabled,Mr.alphaBlended,Lr.disabled,dt,"snow_particles",this.particlesVx,this.particlesIdx,xt,{})})(d.boxSize,0,d),this._vignette.draw(l,C)}}const Ga={symbol:function(v,l,d,x,C){if(v.renderPass!=="translucent")return;const B=Rr.disabled,F=v.colorModeForRenderPass(),z=d.layout.get("text-variable-anchor"),K=d.layout.get("text-size-scale-range"),X=i.aw(v.scaleFactor,K[0],K[1]);z&&function(se,ue,Ie,Se,Pe,Le,$e,rt){const et=ue.transform,ft=Pe==="map",dt=Le==="map";for(const ht of se){const ut=Se.getTile(ht),xt=ut.getBucket(Ie);if(!xt||!xt.text||!xt.text.segments.get().length)continue;const Bt=i.bp(xt.textSizeData,et.zoom,rt),an=Sh(ht,xt.getProjection(),et),tn=et.calculatePixelsToTileUnitsMatrix(ut),Ct=us(an,ut.tileID.canonical,dt,ft,et,xt.getProjection(),tn),Rt=xt.hasIconTextFit()&&xt.hasIconData();if(Bt){const wn=Math.pow(2,et.zoom-ut.tileID.overscaledZ);_a(xt,ft,dt,$e,i.cX,et,Ct,ht,wn,Bt,Rt)}}}(x,v,d,l,d.layout.get("text-rotation-alignment"),d.layout.get("text-pitch-alignment"),C,X);const J=d.paint.get("icon-opacity").constantOr(1)!==0,oe=d.paint.get("text-opacity").constantOr(1)!==0;d.layout.get("symbol-sort-key").constantOr(1)!==void 0&&(J||oe)?wo(v,l,d,x,B,F):(J&&wo(v,l,d,x,B,F,{onlyIcons:!0}),oe&&wo(v,l,d,x,B,F,{onlyText:!0})),l.map.showCollisionBoxes&&(Zi(v,l,d,x,d.paint.get("text-translate"),d.paint.get("text-translate-anchor"),!0),Zi(v,l,d,x,d.paint.get("icon-translate"),d.paint.get("icon-translate-anchor"),!1))},circle:function(v,l,d,x){if(v.renderPass!=="translucent")return;const C=d.paint.get("circle-opacity"),B=d.paint.get("circle-stroke-width"),F=d.paint.get("circle-stroke-opacity"),z=d.layout.get("circle-sort-key").constantOr(1)!==void 0,K=d.paint.get("circle-emissive-strength");if(C.constantOr(1)===0&&(B.constantOr(1)===0||F.constantOr(1)===0))return;const X=v.context,J=X.gl,oe=v.transform,se=v.depthModeForSublayer(0,mr.ReadOnly),ue=Rr.disabled,Ie=v.colorModeForDrapableLayerRenderPass(K),Se=oe.projection.name==="globe",Pe=[i.at(oe.center.lng),i.aA(oe.center.lat)],Le=[];for(let rt=0;rt<x.length;rt++){const et=x[rt],ft=l.getTile(et),dt=ft.getBucket(d);if(!dt||dt.projection.name!==oe.projection.name)continue;const ht=dt.programConfigurations.get(d.id),ut=i.cY(d),xt=v.isTileAffectedByFog(et);Se&&ut.push("PROJECTION_GLOBE_VIEW"),ut.push("DEPTH_D24"),v.terrain&&oe.depthOcclusionForSymbolsAndCircles&&ut.push("DEPTH_OCCLUSION");const Bt=v.getOrCreateProgram("circle",{config:ht,defines:ut,overrideFog:xt}),an=dt.layoutVertexBuffer,tn=dt.globeExtVertexBuffer,Ct=dt.indexBuffer,Rt=oe.projection.createInversionMatrix(oe,et.canonical),wn={programConfiguration:ht,program:Bt,layoutVertexBuffer:an,globeExtVertexBuffer:tn,indexBuffer:Ct,uniformValues:i.cZ(v,et,ft,Rt,Pe,d),tile:ft};if(z){const kn=dt.segments.get();for(const Qn of kn)Le.push({segments:new i.b7([Qn]),sortKey:Qn.sortKey,state:wn})}else Le.push({segments:dt.segments,sortKey:0,state:wn})}z&&Le.sort((rt,et)=>rt.sortKey-et.sortKey);const $e={useDepthForOcclusion:oe.depthOcclusionForSymbolsAndCircles};for(const rt of Le){const{programConfiguration:et,program:ft,layoutVertexBuffer:dt,globeExtVertexBuffer:ht,indexBuffer:ut,uniformValues:xt,tile:Bt}=rt.state,an=rt.segments;v.terrain&&v.terrain.setupElevationDraw(Bt,ft,$e),v.uploadCommonUniforms(X,ft,Bt.tileID.toUnwrapped()),ft.draw(v,J.TRIANGLES,se,ue,Ie,Lr.disabled,xt,d.id,dt,ut,an,d.paint,oe.zoom,et,[ht])}},heatmap:function(v,l,d,x){if(d.paint.get("heatmap-opacity")!==0)if(v.renderPass==="offscreen"){const C=v.context,B=C.gl,F=Rr.disabled,z=new Mr([B.ONE,B.ONE,B.ONE,B.ONE],i.aj.transparent,[!0,!0,!0,!0]);(function(ue,Ie,Se,Pe){const Le=ue.gl,$e=Ie.width*Pe,rt=Ie.height*Pe;ue.activeTexture.set(Le.TEXTURE1),ue.viewport.set([0,0,$e,rt]);let et=Se.heatmapFbo;if(!et||et&&(et.width!==$e||et.height!==rt)){et&&et.destroy();const ft=Le.createTexture();Le.bindTexture(Le.TEXTURE_2D,ft),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_S,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_WRAP_T,Le.CLAMP_TO_EDGE),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MIN_FILTER,Le.LINEAR),Le.texParameteri(Le.TEXTURE_2D,Le.TEXTURE_MAG_FILTER,Le.LINEAR),et=Se.heatmapFbo=ue.createFramebuffer($e,rt,!0,null),function(dt,ht,ut,xt,Bt,an){const tn=dt.gl;tn.texImage2D(tn.TEXTURE_2D,0,dt.extRenderToTextureHalfFloat?tn.RGBA16F:tn.RGBA,Bt,an,0,tn.RGBA,dt.extRenderToTextureHalfFloat?tn.HALF_FLOAT:tn.UNSIGNED_BYTE,null),xt.colorAttachment.set(ut)}(ue,0,ft,et,$e,rt)}else Le.bindTexture(Le.TEXTURE_2D,et.colorAttachment.get()),ue.bindFramebuffer.set(et.framebuffer)})(C,v,d,v.transform.projection.name==="globe"?.5:.25),C.clear({color:i.aj.transparent});const K=v.transform,X=K.projection.name==="globe",J=X?["PROJECTION_GLOBE_VIEW"]:[],oe=X?Lr.frontCCW:Lr.disabled,se=[i.at(K.center.lng),i.aA(K.center.lat)];for(let ue=0;ue<x.length;ue++){const Ie=x[ue];if(l.hasRenderableParent(Ie))continue;const Se=l.getTile(Ie),Pe=Se.getBucket(d);if(!Pe||Pe.projection.name!==K.projection.name)continue;const Le=v.isTileAffectedByFog(Ie),$e=Pe.programConfigurations.get(d.id),rt=v.getOrCreateProgram("heatmap",{config:$e,defines:J,overrideFog:Le}),{zoom:et}=v.transform;v.terrain&&v.terrain.setupElevationDraw(Se,rt),v.uploadCommonUniforms(C,rt,Ie.toUnwrapped());const ft=K.projection.createInversionMatrix(K,Ie.canonical);rt.draw(v,B.TRIANGLES,mr.disabled,F,z,oe,it(v,Ie,Se,ft,se,et,d.paint.get("heatmap-intensity")),d.id,Pe.layoutVertexBuffer,Pe.indexBuffer,Pe.segments,d.paint,v.transform.zoom,$e,X?[Pe.globeExtVertexBuffer]:null)}C.viewport.set([0,0,v.width,v.height])}else v.renderPass==="translucent"&&(v.context.setColorMode(v.colorModeForRenderPass()),function(C,B){const F=C.context,z=F.gl,K=B.heatmapFbo;if(!K)return;F.activeTexture.set(z.TEXTURE0),z.bindTexture(z.TEXTURE_2D,K.colorAttachment.get()),F.activeTexture.set(z.TEXTURE1);let X=B.colorRampTexture;X||(X=B.colorRampTexture=new i.T(F,B.colorRamp,z.RGBA8)),X.bind(z.LINEAR,z.CLAMP_TO_EDGE),C.getOrCreateProgram("heatmapTexture").draw(C,z.TRIANGLES,mr.disabled,Rr.disabled,C.colorModeForRenderPass(),Lr.disabled,((J,oe,se,ue)=>({u_image:0,u_color_ramp:1,u_opacity:oe.paint.get("heatmap-opacity")}))(0,B),B.id,C.viewportBuffer,C.quadTriangleIndexBuffer,C.viewportSegments,B.paint,C.transform.zoom)}(v,d))},line:function(v,l,d,x){if(v.renderPass!=="translucent")return;const C=d.paint.get("line-opacity"),B=d.paint.get("line-width");if(C.constantOr(1)===0||B.constantOr(1)===0)return;const F=d.paint.get("line-emissive-strength"),z=d.paint.get("line-occlusion-opacity"),K=d.layout.get("line-elevation-reference"),X=d.layout.get("line-width-unit")==="meters",J=K==="sea",oe=v.context,se=oe.gl,ue=!d.isDraped();if(ue&&v.transform.projection.name==="globe")return;const Ie=d.layout.get("line-cross-slope"),Se=Ie!==void 0,Pe=Ie<1,Le=ue?new mr(v.depthOcclusion?se.GREATER:se.LEQUAL,mr.ReadOnly,v.depthRangeFor3D):v.depthModeForSublayer(0,mr.ReadOnly),$e=v.colorModeForDrapableLayerRenderPass(F),rt=v.terrain&&v.terrain.renderingToTexture,et=rt?1:i.q.devicePixelRatio,ft=d.paint.get("line-dasharray"),dt=ft.constantOr(1),ht=d.layout.get("line-cap"),ut=ft.constantOr(null),xt=ht.constantOr(null),Bt=d.paint.get("line-pattern"),an=Bt.constantOr(1),tn=Bt.constantOr(null),Ct=d.paint.get("line-opacity").constantOr(1);let Rt=!an&&Ct!==1||v.depthOcclusion&&z>0&&z<1;const wn=d.paint.get("line-gradient"),kn=an?"linePattern":"line",Qn=i.c_(d);let Jt;if(rt&&v.terrain&&v.terrain.clipOrMaskOverlapStencilType()&&(Rt=!1),z!==0&&v.depthOcclusion){const dn=d.paint._values["line-opacity"];dn&&dn.value&&dn.value.kind==="constant"?Jt=dn.value:i.w(`Occlusion opacity for layer ${d.id} is supported only when line-opacity isn't data-driven.`)}if(ue&&(v.forceTerrainMode=!0),!ue&&z!==0&&v.terrain&&!rt)return void i.w(`Occlusion opacity for layer ${d.id} is supported on terrain only if the layer has line-z-offset enabled.`);const In=Rt&&ue?v.stencilModeFor3D():Rr.disabled;ue&&(Qn.push("ELEVATED"),Se&&Qn.push(Pe?"CROSS_SLOPE_HORIZONTAL":"CROSS_SLOPE_VERTICAL"),J&&Qn.push("ELEVATION_REFERENCE_SEA")),B.value.kind!=="constant"&&B.value.isLineProgressConstant===!1&&Qn.push("VARIABLE_LINE_WIDTH");for(const dn of x){const Dn=l.getTile(dn);if(an&&!Dn.patternsLoaded())continue;const Fn=Dn.getBucket(d);if(!Fn)continue;v.prepareDrawTile();const bn=Fn.programConfigurations.get(d.id),tr=v.isTileAffectedByFog(dn),nr=v.getOrCreateProgram(kn,{config:bn,defines:Qn,overrideFog:tr,overrideRtt:!ue&&void 0});if(tn&&Dn.imageAtlas){const gi=i.A.from(tn),to=Dn.imageAtlas.patternPositions[gi.getSerializedPrimary()];to&&bn.setConstantPatternPositions(to)}if(!an&&ut&&xt&&Dn.lineAtlas){const gi=Dn.lineAtlas.getDash(ut,xt);gi&&bn.setConstantPatternPositions(gi)}let[Yn,hr]=d.paint.get("line-trim-offset");(xt==="round"||xt==="square")&&Yn!==hr&&(Yn===0&&(Yn-=1),hr===1&&(hr+=1));const Zr=rt?dn.projMatrix:null,kr=X?1/Fn.tileToMeter/i.ar(Dn,1,v.transform.zoom):1,Fr=X?1/Fn.tileToMeter/i.ar(Dn,1,Math.floor(v.transform.zoom)):1,Xr=an?i.c$(v,Dn,d,Zr,et,kr,Fr,[Yn,hr]):i.d0(v,Dn,d,Zr,Fn.lineClipsArray.length,et,kr,Fr,[Yn,hr]);if(wn){const gi=Fn.gradients[d.id];let to=gi.texture;if(d.gradientVersion!==gi.version){let zs=256;if(d.stepInterpolant){const ls=l.getSource().maxzoom,ms=dn.canonical.z===ls?Math.ceil(1<<v.transform.maxZoom-dn.canonical.z):1;zs=i.aw(i.d1(Fn.maxLineLength/i.ag*1024*ms),256,oe.maxTextureSize)}gi.gradient=i.d2({expression:d.gradientExpression(),evaluationKey:"lineProgress",resolution:zs,image:gi.gradient||void 0,clips:Fn.lineClipsArray}),gi.texture?gi.texture.update(gi.gradient):gi.texture=new i.T(oe,gi.gradient,se.RGBA8),gi.version=d.gradientVersion,to=gi.texture}oe.activeTexture.set(se.TEXTURE1),to.bind(d.stepInterpolant?se.NEAREST:se.LINEAR,se.CLAMP_TO_EDGE)}dt&&(oe.activeTexture.set(se.TEXTURE0),Dn.lineAtlasTexture&&Dn.lineAtlasTexture.bind(se.LINEAR,se.REPEAT),bn.updatePaintBuffers()),an&&(oe.activeTexture.set(se.TEXTURE0),Dn.imageAtlasTexture&&Dn.imageAtlasTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),bn.updatePaintBuffers()),ue&&!J&&v.terrain.setupElevationDraw(Dn,nr),v.uploadCommonUniforms(oe,nr,dn.toUnwrapped());const di=gi=>{Jt!=null&&(Jt.value=Ct*z),nr.draw(v,se.TRIANGLES,Le,gi,$e,Lr.disabled,Xr,d.id,Fn.layoutVertexBuffer,Fn.indexBuffer,Fn.segments,d.paint,v.transform.zoom,bn,[Fn.layoutVertexBuffer2,Fn.patternVertexBuffer,Fn.zOffsetVertexBuffer]),Jt!=null&&(Jt.value=Ct)};if(Rt&&!ue){const gi=v.stencilModeForClipping(dn).ref;gi===0&&rt&&oe.clear({stencil:0});const to={func:se.EQUAL,mask:255};Xr.u_alpha_discard_threshold=.8,di(new Rr(to,gi,255,se.KEEP,se.KEEP,se.INVERT)),Xr.u_alpha_discard_threshold=0,di(new Rr(to,gi,255,se.KEEP,se.KEEP,se.KEEP))}else Rt&&ue&&(Xr.u_alpha_discard_threshold=.001),di(ue?In:v.stencilModeForClipping(dn))}ue&&(v.forceTerrainMode=!1),Rt&&(v.resetStencilClippingMasks(),rt&&oe.clear({stencil:0})),z===0||v.depthOcclusion||rt||v.layersWithOcclusionOpacity.push(v.currentLayer)},fill:function(v,l,d,x){const C=d.paint.get("fill-color"),B=d.paint.get("fill-opacity"),F=d.is3D(),z=new mr(v.context.gl.LEQUAL,mr.ReadWrite,v.depthRangeFor3D);if(B.constantOr(1)===0)return;const K=d.paint.get("fill-emissive-strength"),X=v.colorModeForDrapableLayerRenderPass(K),J=d.paint.get("fill-pattern"),oe=v.opaquePassEnabledForLayer()&&!J.constantOr(1)&&C.constantOr(i.aj.transparent).a===1&&B.constantOr(0)===1?"opaque":"translucent";if(v.renderPass===oe){const se=F?z:v.depthModeForSublayer(1,v.renderPass==="opaque"?mr.ReadWrite:mr.ReadOnly);Ia(v,l,d,x,se,X,!1)}if(!F&&v.renderPass==="translucent"&&d.paint.get("fill-antialias")){const se=F?z:v.depthModeForSublayer(d.getPaintProperty("fill-outline-color")?2:0,mr.ReadOnly);Ia(v,l,d,x,se,X,!0)}},"fill-extrusion":function(v,l,d,x){const C=d.paint.get("fill-extrusion-opacity"),B=v.context,F=B.gl,z=v.terrain,K=z&&z.renderingToTexture;if(C===0)return;const X=v.conflationActive&&v.style.isLayerClipped(d,l.getSource()),J=v.style.order.indexOf(d.fqid);if(X&&function(oe,se,ue,Ie,Se){for(const Pe of Ie){const Le=se.getTile(Pe).getBucket(ue);Le&&(Le.updateReplacement(Pe,oe.replacementSource,Se),Le.uploadCentroid(oe.context))}}(v,l,d,x,J),z||X)for(const oe of x){const se=l.getTile(oe).getBucket(d);se&&Ul(v.context,l,oe,se,d,z,X)}if(v.renderPass==="shadow"&&v.shadowRenderer){const oe=v.shadowRenderer;if(z&&C<.65&&d._transitionablePaint._values["fill-extrusion-opacity"].value.expression instanceof i.a9)return;const se=oe.getShadowPassDepthMode(),ue=oe.getShadowPassColorMode();Is(v,l,d,x,se,Rr.disabled,ue,X)}else if(v.renderPass==="translucent"){const oe=!d.paint.get("fill-extrusion-pattern").constantOr(1),se=d.paint.get("fill-extrusion-color").constantOr(i.aj.white);if(!K&&se.a!==0){const ue=new mr(v.context.gl.LEQUAL,mr.ReadWrite,v.depthRangeFor3D);C===1&&oe?Is(v,l,d,x,ue,Rr.disabled,Mr.unblended,X):(Is(v,l,d,x,ue,Rr.disabled,Mr.disabled,X),Is(v,l,d,x,ue,v.stencilModeFor3D(),v.colorModeForRenderPass(),X),v.resetStencilClippingMasks())}if(v.style.enable3dLights()&&oe&&(!z&&v.transform.projection.name!=="globe"||K)){const ue=d.paint.get("fill-extrusion-opacity"),Ie=d.paint.get("fill-extrusion-ambient-occlusion-intensity"),Se=d.paint.get("fill-extrusion-ambient-occlusion-ground-radius"),Pe=d.paint.get("fill-extrusion-flood-light-intensity"),Le=d.paint.get("fill-extrusion-flood-light-color-use-theme").constantOr("default")==="none",$e=d.paint.get("fill-extrusion-flood-light-color").toRenderColor(Le?null:d.lut).toArray01().slice(0,3),rt=Ie>0&&Se>0,et=Pe>0,ft=(ht,ut,xt)=>(1-xt)*ht+xt*ut,dt=ht=>{const ut=v.depthModeForSublayer(1,mr.ReadOnly,F.LEQUAL,!0),xt=d.paint.get(ht?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Bt=ft(.1,3,xt),an=v._showOverdrawInspector;if(!an){const tn=new Rr({func:F.ALWAYS,mask:255},255,255,F.KEEP,F.KEEP,F.REPLACE),Ct=new Mr([F.ONE,F.ONE,F.ONE,F.ONE],i.aj.transparent,[!1,!1,!1,!0],F.MIN);bo(v,l,d,x,ut,tn,Ct,Lr.disabled,ht,"sdf",ue,Ie,Se,Pe,$e,Bt,X,!1)}{const tn=an?Rr.disabled:new Rr({func:F.EQUAL,mask:255},255,255,F.KEEP,F.DECR,F.DECR),Ct=an?v.colorModeForRenderPass():new Mr([F.ONE_MINUS_DST_ALPHA,F.DST_ALPHA,F.ONE,F.ONE],i.aj.transparent,[!0,!0,!0,!0]);bo(v,l,d,x,ut,tn,Ct,Lr.disabled,ht,"color",ue,Ie,Se,Pe,$e,Bt,X,!1)}};if(K){const ht=(ut,xt,Bt)=>{const an=v.depthModeForSublayer(1,mr.ReadOnly,F.LEQUAL,!1),tn=d.paint.get(ut?"fill-extrusion-ambient-occlusion-ground-attenuation":"fill-extrusion-flood-light-ground-attenuation"),Ct=ft(.1,3,tn);{const Rt=new Mr([F.ONE,F.ONE,F.ONE,F.ONE],i.aj.transparent,[!1,!1,!1,!0]);bo(v,l,d,x,an,Rr.disabled,Rt,Lr.disabled,ut,"clear",ue,Ie,Se,Pe,$e,Ct,X,xt)}{const Rt=new Rr({func:F.ALWAYS,mask:255},255,255,F.KEEP,F.KEEP,F.REPLACE),wn=new Mr([F.ONE,F.ONE,F.ONE,F.ONE],i.aj.transparent,[!1,!1,!1,!0],F.MIN);bo(v,l,d,x,an,Rt,wn,Lr.disabled,ut,"sdf",ue,Ie,Se,Pe,$e,Ct,X,xt)}{const Rt=ut?F.ZERO:F.ONE_MINUS_DST_ALPHA,wn=new Rr({func:F.EQUAL,mask:255},255,255,F.KEEP,F.DECR,F.DECR),kn=new Mr([Rt,F.DST_ALPHA,F.ONE_MINUS_DST_ALPHA,F.ZERO],i.aj.transparent,[!0,!0,!0,!0]);bo(v,l,d,x,an,wn,kn,Lr.disabled,ut,"color",ue,Ie,Se,Pe,$e,Ct,X,xt)}{const Rt=new Mr([F.ONE,F.ONE,F.ONE,ut?F.ZERO:F.ONE],i.aj.transparent,[!1,!1,!1,!0],ut?F.FUNC_ADD:F.MAX);bo(v,l,d,x,an,Rr.disabled,Rt,Lr.disabled,ut,"clear",ue,Ie,Se,Pe,$e,Ct,X,xt,Bt)}};if(rt||et){let ut;if(v.prepareDrawTile(),z){const xt=z.drapeBufferSize[0],Bt=z.drapeBufferSize[1];ut=z.framebufferCopyTexture,ut&&(!ut||ut.size[0]===xt&&ut.size[1]===Bt)||(ut&&ut.destroy(),ut=z.framebufferCopyTexture=new i.T(B,new i.r({width:xt,height:Bt}),F.RGBA8)),ut.bind(F.LINEAR,F.CLAMP_TO_EDGE),F.copyTexSubImage2D(F.TEXTURE_2D,0,0,0,0,0,xt,Bt)}rt&&ht(!0,!1,ut),et&&ht(!1,!0,ut)}}else rt&&dt(!0),et&&dt(!1),(rt||et)&&v.resetStencilClippingMasks()}}},hillshade:function(v,l,d,x){if(v.renderPass!=="offscreen"&&v.renderPass!=="translucent"||v.style.disableElevatedTerrain)return;const C=v.context,B=v.terrain&&v.terrain.renderingToTexture,[F,z]=v.renderPass!=="translucent"||B?[{},x]:v.stencilConfigForOverlap(x);for(const K of z){const X=l.getTile(K);if(X.needsHillshadePrepare&&v.renderPass==="offscreen")Ha(v,X,d);else if(v.renderPass==="translucent"){const J=v.depthModeForSublayer(0,mr.ReadOnly),oe=d.paint.get("hillshade-emissive-strength"),se=v.colorModeForDrapableLayerRenderPass(oe),ue=B&&v.terrain?v.terrain.stencilModeForRTTOverlap(K):F[K.overscaledZ];ff(v,K,X,d,J,ue,se)}}C.viewport.set([0,0,v.width,v.height]),v.resetStencilClippingMasks()},raster:function(v,l,d,x,C,B){if(v.renderPass!=="translucent"||d.paint.get("raster-opacity")===0)return;const F=v.transform.projection.name==="globe",z=d.paint.get("raster-elevation")!==0,K=z&&F;if(v.renderElevatedRasterBackface&&!K)return;const X=v.context,J=X.gl,oe=l.getSource(),se=function(dt,ht,ut,xt){const Bt=ht.paint.get("raster-color"),an=dt.type==="raster-array",tn=[],Ct=ht.paint.get("raster-resampling"),Rt=ht.paint.get("raster-color-mix");let wn=ht.paint.get("raster-color-range");const kn=[Rt[0],Rt[1],Rt[2],0],Qn=Rt[3];let Jt=Ct==="nearest"?xt.NEAREST:xt.LINEAR;if(an&&(tn.push("RASTER_ARRAY"),Bt||tn.push("RASTER_COLOR"),Ct==="linear"&&tn.push("RASTER_ARRAY_LINEAR"),Jt=xt.NEAREST,!wn&&dt.rasterLayers)){const In=dt.rasterLayers.find(({id:dn})=>dn===ht.sourceLayer);In&&In.fields&&In.fields.range&&(wn=In.fields.range)}if(wn=wn||[0,1],Bt){tn.push("RASTER_COLOR"),ut.activeTexture.set(xt.TEXTURE2),ht.updateColorRamp(wn);let In=ht.colorRampTexture;In||(In=ht.colorRampTexture=new i.T(ut,ht.colorRamp,xt.RGBA8)),In.bind(xt.LINEAR,xt.CLAMP_TO_EDGE)}return{mix:kn,range:wn,offset:Qn,defines:tn,resampling:Jt}}(oe,d,X,J);if(oe instanceof i.aJ&&!x.length&&!F)return;const ue=d.paint.get("raster-emissive-strength"),Ie=v.colorModeForDrapableLayerRenderPass(ue),Se=v.terrain&&v.terrain.renderingToTexture,Pe=!v.options.moving,Le=d.paint.get("raster-resampling")==="nearest"?J.NEAREST:J.LINEAR;if(oe instanceof i.aJ&&!x.length&&(oe.onNorthPole||oe.onSouthPole)){const dt=z?v.stencilModeFor3D():Rr.disabled;return void Gn(!!oe.onNorthPole,null,v,l,d,ue,se,Lr.disabled,dt)}if(!x.length)return;const[$e,rt]=oe instanceof i.aJ||Se?[{},x]:v.stencilConfigForOverlap(x),et=rt[rt.length-1].overscaledZ;K&&se.defines.push("PROJECTION_GLOBE_VIEW"),z&&se.defines.push("RENDER_CUTOFF");const ft=(dt,ht,ut)=>{for(const xt of dt){const Bt=xt.toUnwrapped(),an=l.getTile(xt);if(Se&&(!an||!an.hasData()))continue;X.activeTexture.set(J.TEXTURE0);const tn=ks(an,oe,d,se);if(!tn||!tn.texture)continue;const{texture:Ct,mix:Rt,offset:wn,tileSize:kn,buffer:Qn}=tn;let Jt,In;Se?(Jt=mr.disabled,In=xt.projMatrix):z?(Jt=new mr(J.LEQUAL,mr.ReadWrite,v.depthRangeFor3D),In=F?Float32Array.from(v.transform.expandedFarZProjMatrix):v.transform.calculateProjMatrix(Bt,Pe)):(Jt=v.depthModeForSublayer(xt.overscaledZ-et,d.paint.get("raster-opacity")===1?mr.ReadWrite:mr.ReadOnly,J.LESS),In=v.transform.calculateProjMatrix(Bt,Pe));const dn=v.terrain&&Se?v.terrain.stencilModeForRTTOverlap(xt):$e[xt.overscaledZ],Dn=B?0:d.paint.get("raster-fade-duration");an.registerFadeDuration(Dn);const Fn=l.findLoadedParent(xt,0),bn=sc(an,Fn,l,v.transform,Dn);let tr,nr;v.terrain&&v.terrain.prepareDrawTile(),X.activeTexture.set(J.TEXTURE0),Ct.bind(Le,J.CLAMP_TO_EDGE),X.activeTexture.set(J.TEXTURE1),Fn?(Fn.texture&&Fn.texture.bind(Le,J.CLAMP_TO_EDGE),tr=Math.pow(2,Fn.tileID.overscaledZ-an.tileID.overscaledZ),nr=[an.tileID.canonical.x*tr%1,an.tileID.canonical.y*tr%1]):Ct.bind(Le,J.CLAMP_TO_EDGE),Ct.useMipmap&&X.extTextureFilterAnisotropic&&v.transform.pitch>20&&J.texParameterf(J.TEXTURE_2D,X.extTextureFilterAnisotropic.TEXTURE_MAX_ANISOTROPY_EXT,X.extTextureFilterAnisotropicMax);const Yn=v.transform;let hr;const Zr=z?Ic(Yn):[0,0,0,0];let kr,Fr,Xr,di,gi,to=0;if(K&&oe instanceof i.aJ&&oe.coordinates.length>3)kr=Float32Array.from(i.bb(i.cH(new i.bT(0,0,0)))),Fr=Float32Array.from(Yn.globeMatrix),Xr=Float32Array.from(i.cD(Yn)),di=[i.at(Yn.center.lng),i.aA(Yn.center.lat)],hr=oe.elevatedGlobePerspectiveTransform,gi=oe.elevatedGlobeGridMatrix||new Float32Array(9);else if(K){const yi=i.cE(xt.canonical);to=i.cF(yi.getCenter().lat),kr=Float32Array.from(i.bb(i.cH(xt.canonical))),Fr=Float32Array.from(Yn.globeMatrix),Xr=Float32Array.from(i.cD(Yn)),di=[i.at(Yn.center.lng),i.aA(Yn.center.lat)],hr=[0,0],gi=Float32Array.from(i.cG(xt.canonical,yi,to,Yn.worldSize/Yn._pixelsPerMercatorPixel))}else hr=oe instanceof i.aJ?oe.perspectiveTransform:[0,0],kr=new Float32Array(16),Fr=new Float32Array(9),Xr=new Float32Array(16),di=[0,0],gi=new Float32Array(9);const zs=He(In,kr,Fr,Xr,gi,nr||[0,0],i.ae(v.transform.zoom),di,Zr,tr||1,bn,d,hr,z?d.paint.get("raster-elevation"):0,2,Rt,wn,se.range,kn,Qn,ue),ls=v.isTileAffectedByFog(xt),ms=v.getOrCreateProgram("raster",{defines:se.defines,overrideFog:ls});if(v.uploadCommonUniforms(X,ms,Bt),oe instanceof i.aJ){const yi=oe.elevatedGlobeVertexBuffer,zi=oe.elevatedGlobeIndexBuffer;if(Se||!F)oe.boundsBuffer&&oe.boundsSegments&&ms.draw(v,J.TRIANGLES,Jt,Rr.disabled,Ie,Lr.disabled,zs,d.id,oe.boundsBuffer,v.quadTriangleIndexBuffer,oe.boundsSegments);else if(yi&&zi){const $r=Yn.zoom<=i.c6?oe.elevatedGlobeSegments:oe.getSegmentsForLongitude(Yn.center.lng);$r&&ms.draw(v,J.TRIANGLES,Jt,Rr.disabled,Ie,ht,zs,d.id,yi,zi,$r)}}else if(K){Jt=new mr(J.LEQUAL,mr.ReadOnly,v.depthRangeFor3D);const yi=v.globeSharedBuffers;if(yi){const[zi,$r,Xi]=yi.getGridBuffers(to,!1);ms.draw(v,J.TRIANGLES,Jt,ut||dn,v.colorModeForRenderPass(),ht,zs,d.id,zi,$r,Xi)}}else{const{tileBoundsBuffer:yi,tileBoundsIndexBuffer:zi,tileBoundsSegments:$r}=v.getTileBoundsBuffers(an);ms.draw(v,J.TRIANGLES,Jt,dn,Ie,Lr.disabled,zs,d.id,yi,zi,$r)}}if(!(oe instanceof i.aJ)&&K)for(const xt of dt){const Bt=xt.canonical.y===(1<<xt.canonical.z)-1;xt.canonical.y===0&&Gn(!0,xt,v,l,d,ue,se,ht,ut||Rr.disabled),Bt&&Gn(!1,xt,v,l,d,ue,se,ht===Lr.frontCW?Lr.backCW:Lr.frontCW,ut||Rr.disabled)}};K?ft(rt,v.renderElevatedRasterBackface?Lr.backCW:Lr.frontCW,v.stencilModeFor3D()):ft(rt,Lr.disabled,void 0),v.resetStencilClippingMasks()},"raster-particle":function(v,l,d,x,C,B){v.renderPass==="offscreen"&&function(F,z,K,X){if(!X.length)return;const J=F.context,oe=J.gl,se=z.getSource();if(!(se instanceof Os))return;const ue=Math.ceil(Math.sqrt(K.paint.get("raster-particle-count")));let Ie=K.particlePositionRGBAImage;if(!Ie||Ie.width!==ue){const rt=function(et){const ft=et*et,dt=new Uint8Array(4*ft),ht=function(xt){return xt|=0,xt=Math.imul(2747636419^xt,2654435769),xt=Math.imul(xt^xt>>>16,2654435769),((xt=Math.imul(xt^xt>>>16,2654435769))>>>0)/4294967296},ut=1/1.1;for(let xt=0;xt<ft;xt++){const Bt=ut*(ht(2*xt+0)+on),an=ut*(ht(2*xt+1)+on),tn=255*Bt%1,Ct=255*an%1,Rt=tn,wn=an-Ct/255,kn=Ct;dt[4*xt+0]=255*(Bt-tn/255),dt[4*xt+1]=255*Rt,dt[4*xt+2]=255*wn,dt[4*xt+3]=255*kn}return dt}(ue);Ie=K.particlePositionRGBAImage=new i.r({width:ue,height:ue},rt)}let Se=K.particleFramebuffer;Se?Se.width!==ue&&(Se.destroy(),Se=K.particleFramebuffer=J.createFramebuffer(ue,ue,!0,null)):Se=K.particleFramebuffer=J.createFramebuffer(ue,ue,!0,null);const Pe=[];for(const rt of X){const et=z.getTile(rt);if(!(et instanceof cf))continue;const ft=fo(et,se,K);if(!ft)continue;const dt=[et.tileSize,et.tileSize];let ht=K.tileFramebuffer;ht||(ht=K.tileFramebuffer=J.createFramebuffer(dt[0],dt[1],!0,null));let ut=et.rasterParticleState;ut||(ut=et.rasterParticleState=new Zd(J,rt,dt,Ie));const xt=ut.update(K.lastInvalidatedAt);ut.particleTextureDimension!==ue&&ut.updateParticleTexture(rt,Ie);const Bt=ut.targetColorTexture;ut.targetColorTexture=ut.backgroundColorTexture,ut.backgroundColorTexture=Bt;const an=ut.particleTexture0;ut.particleTexture0=ut.particleTexture1,ut.particleTexture1=an,Pe.push([rt,ft,ut,xt])}if(Pe.length===0)return;const Le=i.q.now(),$e=K.previousDrawTimestamp?.001*(Le-K.previousDrawTimestamp):.0167;if(K.previousDrawTimestamp=Le,K.hasColorMap()){J.activeTexture.set(oe.TEXTURE0+2);let rt=K.colorRampTexture;rt||(rt=K.colorRampTexture=new i.T(J,K.colorRamp,oe.RGBA8)),rt.bind(oe.LINEAR,oe.CLAMP_TO_EDGE)}J.bindFramebuffer.set(K.tileFramebuffer.framebuffer),function(rt,et,ft){const dt=rt.context,ht=dt.gl,ut=et.tileFramebuffer;dt.activeTexture.set(ht.TEXTURE0);const xt={u_texture:0,u_opacity:1.05*(an=et.paint.get("raster-particle-fade-opacity-factor"))/(an+.05)},Bt=rt.getOrCreateProgram("rasterParticleTexture",{defines:[],overrideFog:!1});var an;for(const tn of ft){const[,,Ct,Rt]=tn;ut.colorAttachment.set(Ct.targetColorTexture.texture),dt.viewport.set([0,0,ut.width,ut.height]),dt.clear({color:i.aj.transparent}),Rt&&(Ct.backgroundColorTexture.bind(ht.NEAREST,ht.CLAMP_TO_EDGE),Bt.draw(rt,ht.TRIANGLES,mr.disabled,Rr.disabled,Mr.alphaBlended,Lr.disabled,xt,et.id,rt.viewportBuffer,rt.quadTriangleIndexBuffer,rt.viewportSegments))}}(F,K,Pe),function(rt,et,ft,dt){const ht=rt.context,ut=ht.gl,xt=ft.tileFramebuffer,Bt=rt.transform.projection.name==="globe",an=ft.paint.get("raster-particle-max-speed");for(const tn of dt){const[Ct,Rt,wn]=tn;ht.activeTexture.set(ut.TEXTURE0+0),Rt.texture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),xt.colorAttachment.set(wn.targetColorTexture.texture);const kn=rt.getOrCreateProgram("rasterParticleDraw",{defines:Rt.defines,overrideFog:!1});ht.activeTexture.set(ut.TEXTURE0+1);const Qn=Rt.scalarData?[]:[0,1,2,3].map(dn=>i.d4[dn](Ct));Qn.push(Ct);const Jt=Ct.canonical.x,In=Ct.canonical.y;for(const dn of Qn){const Dn=et.getTile(Bt?dn.wrapped():dn);if(!Dn)continue;const Fn=Dn.rasterParticleState;if(!Fn)continue;const bn=dn.canonical.x+(1<<dn.canonical.z)*(dn.wrap-Ct.wrap),tr=dn.canonical.y;Fn.particleTexture0.bind(ut.NEAREST,ut.CLAMP_TO_EDGE);const nr=Tn(1,Fn.particleTexture0.size[0],[bn-Jt,tr-In],0,Rt.texture.size,2,an,Rt.textureOffset,Rt.scale,Rt.offset);kn.draw(rt,ut.POINTS,mr.disabled,Rr.disabled,Mr.alphaBlended,Lr.disabled,nr,ft.id,Fn.particleIndexBuffer,void 0,Fn.particleSegment)}}}(F,z,K,Pe),J.bindFramebuffer.set(K.particleFramebuffer.framebuffer),function(rt,et,ft,dt){const ht=rt.context,ut=ht.gl,xt=et.paint.get("raster-particle-max-speed"),Bt=dt*et.paint.get("raster-particle-speed-factor")*.15,an=function(Ct){return Math.pow(Ct,6)}(.01+1*et.paint.get("raster-particle-reset-rate-factor")),tn=et.particleFramebuffer;ht.viewport.set([0,0,tn.width,tn.height]);for(const Ct of ft){const[,Rt,wn]=Ct;ht.activeTexture.set(ut.TEXTURE0+0),Rt.texture.bind(ut.LINEAR,ut.CLAMP_TO_EDGE),ht.activeTexture.set(ut.TEXTURE0+1);const kn=wn.particleTexture0;kn.bind(ut.NEAREST,ut.CLAMP_TO_EDGE);const Qn=It(1,kn.size[0],0,Rt.texture.size,xt,Bt,an,Rt.textureOffset,Rt.scale,Rt.offset);tn.colorAttachment.set(wn.particleTexture1.texture),ht.clear({color:i.aj.transparent}),rt.getOrCreateProgram("rasterParticleUpdate",{defines:Rt.defines}).draw(rt,ut.TRIANGLES,mr.disabled,Rr.disabled,Mr.unblended,Lr.disabled,Qn,et.id,rt.viewportBuffer,rt.quadTriangleIndexBuffer,rt.viewportSegments)}}(F,K,Pe,$e)}(v,l,d,x),v.renderPass==="translucent"&&(function(F,z,K,X,J){const oe=F.context,se=oe.gl,ue=z.getSource().tileSize,Ie=5*(1-i.ac(i.bY,i.bY+1,F.transform.zoom))*ue+K.paint.get("raster-particle-elevation"),Se=!F.options.moving,Pe=F.transform.projection.name==="globe";if(!X.length)return;const[Le,$e]=F.stencilConfigForOverlap(X),rt=[];Pe&&rt.push("PROJECTION_GLOBE_VIEW");const et=F.stencilModeFor3D();for(const ft of $e){const dt=ft.toUnwrapped(),ht=z.getTile(ft);if(!ht.rasterParticleState)continue;const ut=ht.rasterParticleState,xt=100;ht.registerFadeDuration(xt);const Bt=z.findLoadedParent(ft,0),an=sc(ht,Bt,z,F.transform,xt);let tn,Ct;F.terrain&&F.terrain.prepareDrawTile(),oe.activeTexture.set(se.TEXTURE0),ut.targetColorTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),oe.activeTexture.set(se.TEXTURE1),Bt&&Bt.rasterParticleState?(Bt.rasterParticleState.targetColorTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE),tn=Math.pow(2,Bt.tileID.overscaledZ-ht.tileID.overscaledZ),Ct=[ht.tileID.canonical.x*tn%1,ht.tileID.canonical.y*tn%1]):ut.targetColorTexture.bind(se.LINEAR,se.CLAMP_TO_EDGE);const Rt=Pe?Float32Array.from(F.transform.expandedFarZProjMatrix):F.transform.calculateProjMatrix(dt,Se),wn=F.transform,kn=gp(wn),Qn=i.cE(ft.canonical),Jt=i.cF(Qn.getCenter().lat);let In,dn,Dn,Fn,bn;Pe?(In=Float32Array.from(i.bb(i.cH(ft.canonical))),dn=Float32Array.from(wn.globeMatrix),Dn=Float32Array.from(i.cD(wn)),Fn=[i.at(wn.center.lng),i.aA(wn.center.lat)],bn=Float32Array.from(i.cG(ft.canonical,Qn,Jt,wn.worldSize/wn._pixelsPerMercatorPixel))):(In=new Float32Array(16),dn=new Float32Array(9),Dn=new Float32Array(16),Fn=[0,0],bn=new Float32Array(9));const tr=En(Rt,In,dn,Dn,bn,Ct||[0,0],i.ae(F.transform.zoom),Fn,kn,tn||1,an,Ie),nr=F.isTileAffectedByFog(ft),Yn=F.getOrCreateProgram("rasterParticle",{defines:rt,overrideFog:nr});if(F.uploadCommonUniforms(oe,Yn,dt),Pe){const hr=new mr(se.LEQUAL,mr.ReadOnly,F.depthRangeFor3D),Zr=0,kr=F.globeSharedBuffers;if(kr){const[Fr,Xr,di]=kr.getGridBuffers(Jt,Zr!==0);Yn.draw(F,se.TRIANGLES,hr,et,Mr.alphaBlended,F.renderElevatedRasterBackface?Lr.frontCCW:Lr.backCCW,tr,K.id,Fr,Xr,di)}}else{const hr=F.depthModeForSublayer(0,mr.ReadOnly),Zr=Le[ft.overscaledZ],{tileBoundsBuffer:kr,tileBoundsIndexBuffer:Fr,tileBoundsSegments:Xr}=F.getTileBoundsBuffers(ht);Yn.draw(F,se.TRIANGLES,hr,Zr,Mr.alphaBlended,Lr.disabled,tr,K.id,kr,Fr,Xr)}}F.resetStencilClippingMasks()}(v,l,d,x),v.style.map.triggerRepaint())},background:function(v,l,d,x){const C=d.paint.get("background-color"),B=d.paint.get("background-color-use-theme").constantOr("default")==="none",F=d.paint.get("background-opacity"),z=d.paint.get("background-emissive-strength"),K=d.paint.get("background-pitch-alignment")==="viewport";if(F===0)return;const X=v.context,J=X.gl,oe=v.transform,se=oe.tileSize,ue=d.paint.get("background-pattern");let Ie;if(ue!==void 0&&(ue===null||(Ie=v.imageManager.getPattern(ue.toString(),d.scope,v.style.getLut(d.scope)),!Ie)))return;const Se=!ue&&C.a===1&&F===1&&v.opaquePassEnabledForLayer()?"opaque":"translucent";if(v.renderPass!==Se)return;const Pe=Rr.disabled,Le=v.depthModeForSublayer(0,Se==="opaque"?mr.ReadWrite:mr.ReadOnly),$e=v.colorModeForDrapableLayerRenderPass(z),rt=ue?"backgroundPattern":"background";let et,ft=x;if(ft||(et=v.getBackgroundTiles(),ft=Object.values(et).map(dt=>dt.tileID)),ue&&(X.activeTexture.set(J.TEXTURE0),v.imageManager.bind(v.context,d.scope)),K){const dt=v.getOrCreateProgram(rt,{overrideFog:!1,overrideRtt:!0}),ht=new Float32Array(i.ab.mat4.identity([])),ut=new i.aG(0,0,0,0,0),xt=ue?An(ht,z,F,v,0,d.scope,Ie,K,{tileID:ut,tileSize:se}):un(ht,z,F,C.toRenderColor(B?null:d.lut));dt.draw(v,J.TRIANGLES,Le,Pe,$e,Lr.disabled,xt,d.id,v.viewportBuffer,v.quadTriangleIndexBuffer,v.viewportSegments)}else for(const dt of ft){const ht=v.isTileAffectedByFog(dt),ut=v.getOrCreateProgram(rt,{overrideFog:ht}),xt=dt.toUnwrapped(),Bt=x?dt.projMatrix:v.transform.calculateProjMatrix(xt);v.prepareDrawTile();const an=l?l.getTile(dt):et?et[dt.key]:new xl(dt,se,oe.zoom,v),tn=ue?An(Bt,z,F,v,0,d.scope,Ie,K,{tileID:dt,tileSize:se}):un(Bt,z,F,C.toRenderColor(B?null:d.lut));v.uploadCommonUniforms(X,ut,xt);const{tileBoundsBuffer:Ct,tileBoundsIndexBuffer:Rt,tileBoundsSegments:wn}=v.getTileBoundsBuffers(an);ut.draw(v,J.TRIANGLES,Le,Pe,$e,Lr.disabled,tn,d.id,Ct,Rt,wn)}},sky:function(v,l,d){const x=v._atmosphere?i.ae(v.transform.zoom):1,C=d.paint.get("sky-opacity")*x;if(C===0)return;const B=v.context,F=d.paint.get("sky-type"),z=new mr(B.gl.LEQUAL,mr.ReadOnly,[0,1]),K=v.frameCounter/1e3%1;F==="atmosphere"?v.renderPass==="offscreen"?d.needsSkyboxCapture(v)&&(function(X,J,oe,se){const ue=X.context,Ie=ue.gl;let Se=J.skyboxFbo;if(!Se){Se=J.skyboxFbo=ue.createFramebuffer(32,32,!0,null),J.skyboxGeometry=new Cf(ue),J.skyboxTexture=ue.gl.createTexture(),Ie.bindTexture(Ie.TEXTURE_CUBE_MAP,J.skyboxTexture),Ie.texParameteri(Ie.TEXTURE_CUBE_MAP,Ie.TEXTURE_WRAP_S,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_CUBE_MAP,Ie.TEXTURE_WRAP_T,Ie.CLAMP_TO_EDGE),Ie.texParameteri(Ie.TEXTURE_CUBE_MAP,Ie.TEXTURE_MIN_FILTER,Ie.LINEAR),Ie.texParameteri(Ie.TEXTURE_CUBE_MAP,Ie.TEXTURE_MAG_FILTER,Ie.LINEAR);for(let rt=0;rt<6;++rt)Ie.texImage2D(Ie.TEXTURE_CUBE_MAP_POSITIVE_X+rt,0,Ie.RGBA,32,32,0,Ie.RGBA,Ie.UNSIGNED_BYTE,null)}ue.bindFramebuffer.set(Se.framebuffer),ue.viewport.set([0,0,32,32]);const Pe=J.getCenter(X,!0),Le=X.getOrCreateProgram("skyboxCapture"),$e=new Float64Array(16);i.ab.mat4.identity($e),i.ab.mat4.rotateY($e,$e,.5*-Math.PI),ja(X,J,Le,$e,Pe,0),i.ab.mat4.identity($e),i.ab.mat4.rotateY($e,$e,.5*Math.PI),ja(X,J,Le,$e,Pe,1),i.ab.mat4.identity($e),i.ab.mat4.rotateX($e,$e,.5*-Math.PI),ja(X,J,Le,$e,Pe,2),i.ab.mat4.identity($e),i.ab.mat4.rotateX($e,$e,.5*Math.PI),ja(X,J,Le,$e,Pe,3),i.ab.mat4.identity($e),ja(X,J,Le,$e,Pe,4),i.ab.mat4.identity($e),i.ab.mat4.rotateY($e,$e,Math.PI),ja(X,J,Le,$e,Pe,5),ue.viewport.set([0,0,X.width,X.height])}(v,d),d.markSkyboxValid(v)):v.renderPass==="sky"&&function(X,J,oe,se,ue){const Ie=X.context,Se=Ie.gl,Pe=X.transform,Le=X.getOrCreateProgram("skybox");Ie.activeTexture.set(Se.TEXTURE0),Se.bindTexture(Se.TEXTURE_CUBE_MAP,J.skyboxTexture);const $e=((rt,et,ft,dt,ht)=>({u_matrix:rt,u_sun_direction:et,u_cubemap:0,u_opacity:dt,u_temporal_offset:ht}))(Pe.skyboxMatrix,J.getCenter(X,!1),0,se,ue);X.uploadCommonUniforms(Ie,Le),Le.draw(X,Se.TRIANGLES,oe,Rr.disabled,X.colorModeForRenderPass(),Lr.backCW,$e,"skybox",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(v,d,z,C,K):F==="gradient"&&v.renderPass==="sky"&&function(X,J,oe,se,ue){const Ie=X.context,Se=Ie.gl,Pe=X.transform,Le=X.getOrCreateProgram("skyboxGradient");J.skyboxGeometry||(J.skyboxGeometry=new Cf(Ie)),Ie.activeTexture.set(Se.TEXTURE0);let $e=J.colorRampTexture;$e||($e=J.colorRampTexture=new i.T(Ie,J.colorRamp,Se.RGBA8)),$e.bind(Se.LINEAR,Se.CLAMP_TO_EDGE);const rt=((et,ft,dt,ht,ut)=>({u_matrix:et,u_color_ramp:0,u_center_direction:ft,u_radius:i.ai(dt),u_opacity:ht,u_temporal_offset:ut}))(Pe.skyboxMatrix,J.getCenter(X,!1),J.paint.get("sky-gradient-radius"),se,ue);X.uploadCommonUniforms(Ie,Le),Le.draw(X,Se.TRIANGLES,oe,Rr.disabled,X.colorModeForRenderPass(),Lr.backCW,rt,"skyboxGradient",J.skyboxGeometry.vertexBuffer,J.skyboxGeometry.indexBuffer,J.skyboxGeometry.segment)}(v,d,z,C,K)},debug:function(v,l,d,x,C,B){for(let F=0;F<d.length;F++)if(C){const X=new i.aj(x.r*.8,x.g*.8,x.b*.8,1);dl(v,l,d[F],x,-1,-1,B),dl(v,l,d[F],x,-1,1,B),dl(v,l,d[F],x,1,1,B),dl(v,l,d[F],x,1,-1,B),dl(v,l,d[F],X,0,0,B)}else dl(v,l,d[F],x,0,0,B)},custom:function(v,l,d,x){const C=v.context,B=d.implementation;if(!v.transform.projection.unsupportedLayers||!v.transform.projection.unsupportedLayers.includes("custom")||v.terrain&&(v.terrain.renderingToTexture||v.renderPass==="offscreen")&&d.isDraped(l)){if(v.renderPass==="offscreen"){const F=B.prerender;if(F){if(v.setCustomLayerDefaults(),C.setColorMode(v.colorModeForRenderPass()),v.transform.projection.name==="globe"){const z=v.transform.pointMerc;F.call(B,C.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),i.ae(v.transform.zoom),[z.x,z.y],v.transform.pixelsPerMeterRatio)}else F.call(B,C.gl,v.transform.customLayerMatrix());C.setDirty(),v.setBaseState()}}else if(v.renderPass==="translucent"){if(v.terrain&&v.terrain.renderingToTexture){const z=B.renderToTile;if(z){const K=x[0].canonical,X=new i.aa(K.x+x[0].wrap*(1<<K.z),K.y,K.z);C.setDepthMode(mr.disabled),C.setStencilMode(Rr.disabled),C.setColorMode(v.colorModeForRenderPass()),v.setCustomLayerDefaults(),z.call(B,C.gl,X),C.setDirty(),v.setBaseState()}return}v.setCustomLayerDefaults(),C.setColorMode(v.colorModeForRenderPass()),C.setStencilMode(Rr.disabled);const F=B.renderingMode==="3d"?new mr(v.context.gl.LEQUAL,mr.ReadWrite,v.depthRangeFor3D):v.depthModeForSublayer(0,mr.ReadOnly);if(C.setDepthMode(F),v.transform.projection.name==="globe"){const z=v.transform.pointMerc;B.render(C.gl,v.transform.customLayerMatrix(),v.transform.getProjection(),v.transform.globeToMercatorMatrix(),i.ae(v.transform.zoom),[z.x,z.y],v.transform.pixelsPerMeterRatio)}else B.render(C.gl,v.transform.customLayerMatrix());C.setDirty(),v.setBaseState(),C.bindFramebuffer.set(null)}}else i.w("Custom layers are not yet supported with this projection. Use mercator or globe to enable usage of custom layers.")},model:function(v,l,d,x){if(v.renderPass==="opaque")return;const C=d.paint.get("model-opacity").constantOr(1);if(C===0)return;const B=d.paint.get("model-cast-shadows");if(v.renderPass==="shadow"&&(!B||v.terrain&&C<.65&&d._transitionablePaint._values["model-opacity"].value.expression instanceof i.a9))return;const F=v.shadowRenderer,z=d.paint.get("model-receive-shadows");F&&(F.useNormalOffset=!0,z||(F.enabled=!1));const K=()=>{F&&(F.useNormalOffset=!0,z||(F.enabled=!0))},X=l.getSource();if(v.renderPass==="light-beam"&&X.type!=="batched-model")return;if(X.type==="vector"||X.type==="geojson")return function(Le,$e,rt,et,ft){const dt=Le.transform;if(dt.projection.name!=="mercator")return void i.w(`Drawing 3D models for ${dt.projection.name} projection is not yet implemented`);const ht=dt.getFreeCameraOptions().position;if(!Le.modelManager)return;const ut=Le.modelManager;rt.modelManager=ut;const xt=Le.shadowRenderer;if(!rt._unevaluatedLayout._values.hasOwnProperty("model-id"))return;const Bt=rt._unevaluatedLayout._values["model-id"],an={...rt.layout.get("model-id").parameters},tn=Le.style.order.indexOf(rt.fqid);for(const Ct of et){const Rt=$e.getTile(Ct).getBucket(rt);if(!Rt||Rt.projection.name!==dt.projection.name)continue;const wn=Rt.getModelUris();wn&&!Rt.modelsRequested&&(ut.addModelsFromBucket(wn,ft),Rt.modelsRequested=!0);const kn=Lh(Ct,dt);an.zoom=kn;const Qn=Bt.possiblyEvaluate(an);if(eh(Le,Rt,Ct),jc.shadowUniformsInitialized=!1,jc.useSingleShadowCascade=!!xt&&xt.getMaxCascadeForTile(Ct.toUnwrapped())===0,Le.renderPass==="shadow"&&xt){if(Le.currentShadowCascade===1&&Rt.isInsideFirstShadowMapFrustum)continue;const dn=dt.calculatePosMatrix(Ct.toUnwrapped(),dt.worldSize);if(jc.tileMatrix.set(dn),jc.shadowTileMatrix=Float32Array.from(xt.calculateShadowPassMatrixFromMatrix(dn)),jc.aabb.min.fill(0),jc.aabb.max[0]=jc.aabb.max[1]=i.ag,jc.aabb.max[2]=0,Ui(Rt,jc,Le,rt.scope))continue}const Jt=1<<Ct.canonical.z,In=[((ht.x-Ct.wrap)*Jt-Ct.canonical.x)*i.ag,(ht.y*Jt-Ct.canonical.y)*i.ag,ht.z*Jt*i.ag];Le.conflationActive&&Object.keys(Rt.instancesPerModel).length>0&&Le.style.isLayerClipped(rt,$e.getSource())&&Rt.updateReplacement(Ct,Le.replacementSource,tn,ft)&&(Rt.uploaded=!1,Rt.upload(Le.context));for(let dn in Rt.instancesPerModel){const Dn=Rt.instancesPerModel[dn];Dn.features.length>0&&(dn=Qn.evaluate(Dn.features[0].feature,{}));const Fn=ut.getModel(dn,ft);if(Fn&&Fn.uploaded)for(const bn of Fn.nodes)ju(Le,rt,bn,Dn,In,Ct,jc)}}}(v,l,d,x,X.type==="vector"?d.scope:""),void K();if(!X.loaded())return;if(X.type==="batched-model")return function(Le,$e,rt,et){rt.resetLayerRenderingStats(Le);const ft=Le.context,dt=Le.transform,ht=Le.style.fog,ut=Le.shadowRenderer;if(dt.projection.name!=="mercator")return void i.w(`Drawing 3D landmark models for ${dt.projection.name} projection is not yet implemented`);const xt=Le.transform.getFreeCameraOptions().position,Bt=i.ab.vec3.scale([],[xt.x,xt.y,xt.z],Le.transform.worldSize),an=i.ab.vec3.negate([],Bt),tn=i.ab.mat4.identity([]),Ct=i.dj(dt.center.lat,dt.zoom),Rt=i.ab.mat4.fromScaling([],[1,1,1/Ct]);i.ab.mat4.translate(tn,tn,an);const wn=rt.paint.get("model-opacity").constantOr(1),kn=new mr(ft.gl.LEQUAL,mr.ReadWrite,Le.depthRangeFor3D),Qn=new mr(ft.gl.LEQUAL,mr.ReadOnly,Le.depthRangeFor3D),Jt=new i.cd([1/0,1/0,1/0],[-1/0,-1/0,-1/0]),In=Le.renderPass==="shadow",dn=In&&ut?ut.getCurrentCascadeFrustum():dt.getFrustum(dt.scaleZoom(dt.worldSize)),Dn=rt.paint.get("model-front-cutoff"),Fn=Dn[2]<1,bn=rc(Le,rt.paint.get("model-cutoff-fade-range")),tr=rt.getLayerRenderingStats();(function(nr,Yn,hr,Zr){const kr=nr.terrain?nr.terrain.exaggeration():0,Fr=nr.transform.zoom;for(const Xr of Zr){const di=Yn.getTile(Xr).getBucket(hr);di&&(nr.conflationActive&&di.updateReplacement(Xr,nr.replacementSource),di.evaluateScale(nr,hr),nr.terrain&&kr>0&&di.elevationUpdate(nr.terrain,kr,Xr,hr.source),di.needsReEvaluation(nr,Fr,hr)&&di.evaluate(hr))}})(Le,$e,rt,et),function(){let nr,Yn,hr;Fn?(nr=et.length-1,Yn=-1,hr=-1):(nr=0,Yn=et.length,hr=1);const Zr=new Float64Array(16),kr=i.ab.vec3.create(),Fr=new i.P(0,0);for(let Xr=nr;Xr!==Yn;Xr+=hr){const di=et[Xr],gi=$e.getTile(di).getBucket(rt);if(!gi||!gi.uploaded)continue;let to=!1;ut&&(to=ut.getMaxCascadeForTile(di.toUnwrapped())===0);const zs=dt.calculatePosMatrix(di.toUnwrapped(),dt.worldSize),ls=gi.modelTraits;!In&&Fn&&(i.ab.mat4.invert(Zr,zs),i.ab.vec3.transformMat4(kr,Bt,Zr),Fr.x=kr[0],Fr.y=kr[1]);const ms=[];for(const yi of gi.getNodesInfo()){if(yi.hiddenByReplacement||!yi.node.meshes)continue;const zi=yi.node;let $r=0;Le.terrain&&zi.elevation&&($r=zi.elevation*Le.terrain.exaggeration());const Xi=(()=>{const Gi=yi.aabb;return Jt.min=[...Gi.min],Jt.max=[...Gi.max],Jt.min[2]+=$r,Jt.max[2]+=$r,i.ab.vec3.transformMat4(Jt.min,Jt.min,zs),i.ab.vec3.transformMat4(Jt.max,Jt.max,zs),Jt})(),Io=yi.evaluatedScale;if(Io[0]<=1&&Io[1]<=1&&Io[2]<=1&&Xi.intersects(dn)===0)continue;if(!In&&Fn){const Gi=.16666666666666666;yi.cameraCollisionOpacity=Bt[0]>Xi.min[0]&&Bt[0]<Xi.max[0]&&Bt[1]>Xi.min[1]&&Bt[1]<Xi.max[1]&&Bt[2]*Ct<Xi.max[2]&&zi.footprint&&i.bA(Fr,zi.footprint)?Math.max(yi.cameraCollisionOpacity-Gi,0):Math.min(1,yi.cameraCollisionOpacity+Gi)}const hl=[...zs],fu=zi.anchor?zi.anchor[0]:0,lc=zi.anchor?zi.anchor[1]:0;i.ab.mat4.translate(hl,hl,[fu*(Io[0]-1),lc*(Io[1]-1),$r]),i.ab.vec3.exactEquals(Io,i.dm)||i.ab.mat4.scale(hl,hl,Io);const qa=i.ab.mat4.multiply([],hl,zi.matrix),da=i.ab.mat4.multiply([],dt.expandedFarZProjMatrix,qa),Go=i.ab.mat4.multiply([],dt.expandedFarZProjMatrix,hl),Ks=i.ab.vec4.transformMat4([],[fu,lc,$r,1],da)[2];zi.hidden=!1;let Ls=wn;In||(Fn&&(Ls*=yi.cameraCollisionOpacity,Ls*=Bf(hl,dt,yi.aabb,Dn)),Ls*=ym(bn,Ks)),Ls!==0?ms.push({nodeInfo:yi,depth:Ks,opacity:Ls,wvpForNode:da,wvpForTile:Go,nodeModelMatrix:qa,tileModelMatrix:hl}):zi.hidden=!0}In||ms.sort((yi,zi)=>!Fn||yi.opacity===1&&zi.opacity===1?yi.depth<zi.depth?-1:1:yi.opacity===1?-1:zi.opacity===1?1:yi.depth>zi.depth?-1:1);for(const yi of ms){const zi=yi.nodeInfo,$r=zi.node;let Xi=i.ab.mat4.multiply([],Rt,yi.tileModelMatrix);i.ab.mat4.multiply(Xi,tn,Xi);const Io=i.ab.mat4.invert([],Xi);i.ab.mat4.transpose(Io,Io),i.ab.mat4.scale(Io,Io,Fc),Xi=i.ab.mat4.multiply(Xi,Xi,$r.matrix);const hl=Le.renderPass==="light-beam",fu=rt.paint.get("model-color-use-theme").constantOr("default")==="none",lc=ls&i.dp.HasMapboxMeshFeatures,qa=lc?0:zi.evaluatedRMEA[0][2];for(let da=0;da<$r.meshes.length;++da){const Go=$r.meshes[da],Ks=da===$r.lightMeshIndex;let Ls=yi.wvpForNode;if(Ks){if(!hl&&!Le.terrain&&Le.shadowRenderer){Le.currentLayer<Le.firstLightBeamLayer&&(Le.firstLightBeamLayer=Le.currentLayer);continue}Ls=yi.wvpForTile}else if(hl)continue;const Gi={defines:[]},Oo=[];if(!In&&ut&&(ut.useNormalOffset=!!Go.normalBuffer),$i(Gi.defines,Oo,Go,Le,fu?null:rt.lut),lc||Gi.defines.push("DIFFUSE_SHADED"),to&&Gi.defines.push("SHADOWS_SINGLE_CASCADE"),tr&&(In?tr.numRenderedVerticesInShadowPass+=Go.vertexArray.length:tr.numRenderedVerticesInTransparentPass+=Go.vertexArray.length),In){Jd(Go,yi.nodeModelMatrix,Le,rt);continue}let Za=null;if(ht){const Dh=js(yi.nodeModelMatrix,Le.transform);if(Za=new Float32Array(Dh),dt.projection.name!=="globe"){const cc=Go.aabb.min,ku=Go.aabb.max,[sh,hd]=ht.getOpacityForBounds(Dh,cc[0],cc[1],ku[0],ku[1]);Gi.overrideFog=sh>=Pn||hd>=Pn}}const Qs=Go.material;let $l;Qs.occlusionTexture&&Qs.occlusionTexture.offsetScale&&($l=Qs.occlusionTexture.offsetScale,Gi.defines.push("OCCLUSION_TEXTURE_TRANSFORM"));const Pu=Le.getOrCreateProgram("model",Gi);!In&&ut&&ut.setupShadowsFromMatrix(yi.tileModelMatrix,Pu,ut.useNormalOffset),Le.uploadCommonUniforms(ft,Pu,null,Za);const Wc=Qs.pbrMetallicRoughness;Wc.metallicFactor=.9,Wc.roughnessFactor=.5;const Nf=ur(new Float32Array(Ls),new Float32Array(Xi),new Float32Array(Io),new Float32Array($r.matrix),Le,yi.opacity,Wc.baseColorFactor.toRenderColor(null),Qs.emissiveFactor,Wc.metallicFactor,Wc.roughnessFactor,Qs,qa,rt,[0,0,0],$l);!Ks&&(zi.hasTranslucentParts||yi.opacity<1)&&Pu.draw(Le,ft.gl.TRIANGLES,kn,Rr.disabled,Mr.disabled,Lr.backCCW,Nf,rt.id,Go.vertexBuffer,Go.indexBuffer,Go.segments,rt.paint,Le.transform.zoom,void 0,Oo),Pu.draw(Le,ft.gl.TRIANGLES,Ks?Qn:kn,Rr.disabled,Ks||yi.opacity<1||zi.hasTranslucentParts?Mr.alphaBlended:Mr.unblended,Lr.backCCW,Nf,rt.id,Go.vertexBuffer,Go.indexBuffer,Go.segments,rt.paint,Le.transform.zoom,void 0,Oo)}}}}()}(v,l,d,x),void K();if(X.type!=="model")return;const J=X.getModels(),oe=[],se=v.transform.getFreeCameraOptions().position,ue=i.ab.vec3.scale([],[se.x,se.y,se.z],v.transform.worldSize);i.ab.vec3.negate(ue,ue);const Ie=[],Se=[];let Pe=0;for(const Le of J){const $e=d.paint.get("model-rotation").constantOr(null),rt=d.paint.get("model-scale").constantOr(null),et=d.paint.get("model-translation").constantOr(null);Le.computeModelMatrix(v,$e,rt,et,!0,!0,!1);const ft=i.ab.mat4.identity([]),dt=i.dj(Le.position.lat,v.transform.zoom),ht=i.ab.mat4.fromScaling([],[1,1,1/dt]);i.ab.mat4.translate(ft,ft,ue),oe.push({zScaleMatrix:ht,negCameraPosMatrix:ft});for(const ut of Le.nodes)Iu(v.transform,ut,Le.matrix,v.transform.expandedFarZProjMatrix,Pe,Ie,Se);Pe++}if(Ie.sort((Le,$e)=>$e.depth-Le.depth),v.renderPass!=="shadow"){if(C===1)for(const Le of Se)oA(Le,v,d,oe[Le.modelIndex],Rr.disabled,v.colorModeForRenderPass());else{for(const Le of Se)oA(Le,v,d,oe[Le.modelIndex],Rr.disabled,Mr.disabled);for(const Le of Se)oA(Le,v,d,oe[Le.modelIndex],v.stencilModeFor3D(),v.colorModeForRenderPass());v.resetStencilClippingMasks()}for(const Le of Ie)oA(Le,v,d,oe[Le.modelIndex],Rr.disabled,v.colorModeForRenderPass());K()}else{for(const Le of Se)Jd(Le.mesh,Le.nodeModelMatrix,v,d);for(const Le of Ie)Jd(Le.mesh,Le.nodeModelMatrix,v,d);K()}}},du={model:function(v,l,d){const x=l.getSource();if(!x.loaded())return;if(x.type==="vector"||x.type==="geojson")return void(d.modelManager&&d.modelManager.upload(d,x.type==="vector"?v.scope:""));if(x.type==="batched-model"||x.type!=="model")return;const C=x.getModels();for(const B of C)B.upload(d.context)},raster:function(v,l,d){const x=l.getSource();if(!(x instanceof Os&&x.loaded()))return;const C=v.sourceLayer||x.rasterLayerIds&&x.rasterLayerIds[0];if(!C)return;const B=v.paint.get("raster-array-band")||x.getInitialBand(C);if(B==null)return;const F=l.getIds().map(z=>l.getTileByID(z));for(const z of F)z.updateNeeded(C,B)&&x.prepareTile(z,C,B)},"raster-particle":function(v,l,d){const x=l.getSource();if(!(x instanceof Os&&x.loaded()))return;const C=v.sourceLayer||x.rasterLayerIds&&x.rasterLayerIds[0];if(!C)return;const B=v.paint.get("raster-particle-array-band")||x.getInitialBand(C);if(B==null)return;const F=l.getIds().map(z=>l.getTileByID(z));for(const z of F)z.updateNeeded(C,B)&&x.prepareTile(z,C,B)}};class hu{constructor(l,d,x,C,B){this.context=new rs(l,d),this.transform=x,this._tileTextures={},this.frameCopies=[],this.loadTimeStamps=[],this.tp=B,this._timeStamp=i.q.now(),this._averageFPS=0,this._fpsHistory=[],this._dt=0,this._debugParams={forceEnablePrecipitation:!1,showTerrainProxyTiles:!1,fpsWindow:30,continousRedraw:!1,enabledLayers:{}};const F=["fill","line","symbol","circle","heatmap","fill-extrusion","raster","raster-particle","hillshade","model","background","sky"];for(const K of F)this._debugParams.enabledLayers[K]=!0;B.registerParameter(this._debugParams,["Terrain"],"showTerrainProxyTiles",{},()=>{this.style.map.triggerRepaint()}),B.registerParameter(this._debugParams,["Precipitation"],"forceEnablePrecipitation"),B.registerParameter(this._debugParams,["FPS"],"fpsWindow",{min:1,max:100,step:1}),B.registerBinding(this._debugParams,["FPS"],"continousRedraw",{readonly:!0,label:"continuous redraw"}),B.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"value"}),B.registerBinding(this,["FPS"],"_averageFPS",{readonly:!0,label:"graph",view:"graph",min:0,max:200});for(const K of F)B.registerParameter(this._debugParams.enabledLayers,["Debug","Layers"],K);this.occlusionParams=new ad(B),this.setup(),this.numSublayers=Aa.maxUnderzooming+Aa.maxOverzooming+1,this.depthEpsilon=1/Math.pow(2,16),this.deferredRenderGpuTimeQueries=[],this.gpuTimers={},this.frameCounter=0,this._backgroundTiles={},this.conflationActive=!1,this.replacementSource=new i.dv,this.longestCutoffRange=0,this.minCutoffZoom=0,this._fogVisible=!1,this._cachedTileFogOpacities={},this._shadowRenderer=new lu(this),this._wireframeDebugCache=new vp,this.renderDefaultNorthPole=!0,this.renderDefaultSouthPole=!0,this.layersWithOcclusionOpacity=[];const z=new i.r({width:1,height:1},Uint8Array.of(0,0,0,0));this.emptyDepthTexture=new i.T(this.context,z,l.RGBA8),this._clippingActiveLastFrame=!1,this.scaleFactor=C}updateTerrain(l,d){const x=!!l&&!!l.terrain&&this.transform.projection.supportsTerrain;if(!(x||this._terrain&&this._terrain.enabled))return;this._terrain||(this._terrain=new pm(this,l));const C=this._terrain;this.transform.elevation=x?C:null,C.update(l,this.transform,d),this.transform.elevation&&!C.enabled&&(this.transform.elevation=null)}_updateFog(l){const d=l.fog;if(!d||this.transform.projection.name==="globe"||d.getOpacity(this.transform.pitch)<1||d.properties.get("horizon-blend")<.03)return void(this.transform.fogCullDistSq=null);const[x,C]=d.getFovAdjustedRange(this.transform._fov);if(x>C)return void(this.transform.fogCullDistSq=null);const B=x+.78*(C-x);this.transform.fogCullDistSq=B*B}get terrain(){return this.transform._terrainEnabled()&&this._terrain&&this._terrain.enabled||this._forceTerrainMode?this._terrain:null}get forceTerrainMode(){return this._forceTerrainMode}set forceTerrainMode(l){l&&!this._terrain&&(this._terrain=new pm(this,this.style)),this._forceTerrainMode=l}get shadowRenderer(){return this._shadowRenderer&&this._shadowRenderer.enabled?this._shadowRenderer:null}get wireframeDebugCache(){return this._wireframeDebugCache}resize(l,d){if(this.width=l*i.q.devicePixelRatio,this.height=d*i.q.devicePixelRatio,this.context.viewport.set([0,0,this.width,this.height]),this.style)for(const x of this.style.order)this.style._mergedLayers[x].resize()}setup(){const l=this.context,d=new i.b4;d.emplaceBack(0,0),d.emplaceBack(i.ag,0),d.emplaceBack(0,i.ag),d.emplaceBack(i.ag,i.ag),this.tileExtentBuffer=l.createVertexBuffer(d,i.b6.members),this.tileExtentSegments=i.b7.simpleSegment(0,0,4,2);const x=new i.b4;x.emplaceBack(0,0),x.emplaceBack(i.ag,0),x.emplaceBack(0,i.ag),x.emplaceBack(i.ag,i.ag),this.debugBuffer=l.createVertexBuffer(x,i.b6.members),this.debugSegments=i.b7.simpleSegment(0,0,4,5);const C=new i.b4;C.emplaceBack(-1,-1),C.emplaceBack(1,-1),C.emplaceBack(-1,1),C.emplaceBack(1,1),this.viewportBuffer=l.createVertexBuffer(C,i.b6.members),this.viewportSegments=i.b7.simpleSegment(0,0,4,2);const B=new i.aT;B.emplaceBack(0,0,0,0),B.emplaceBack(i.ag,0,i.ag,0),B.emplaceBack(0,i.ag,0,i.ag),B.emplaceBack(i.ag,i.ag,i.ag,i.ag),this.mercatorBoundsBuffer=l.createVertexBuffer(B,i.b9.members),this.mercatorBoundsSegments=i.b7.simpleSegment(0,0,4,2);const F=new i.aU;F.emplaceBack(0,1,2),F.emplaceBack(2,1,3),this.quadTriangleIndexBuffer=l.createIndexBuffer(F);const z=new i.b5;for(const X of[0,1,3,2,0])z.emplaceBack(X);this.debugIndexBuffer=l.createIndexBuffer(z),this.emptyTexture=new i.T(l,new i.r({width:1,height:1},Uint8Array.of(0,0,0,0)),l.gl.RGBA8),this.identityMat=i.ab.mat4.create();const K=this.context.gl;this.stencilClearMode=new Rr({func:K.ALWAYS,mask:0},0,255,K.ZERO,K.ZERO,K.ZERO),this.loadTimeStamps.push(performance.now())}getMercatorTileBoundsBuffers(){return{tileBoundsBuffer:this.mercatorBoundsBuffer,tileBoundsIndexBuffer:this.quadTriangleIndexBuffer,tileBoundsSegments:this.mercatorBoundsSegments}}getTileBoundsBuffers(l){return l._makeTileBoundsBuffers(this.context,this.transform.projection),l._tileBoundsBuffer?{tileBoundsBuffer:l._tileBoundsBuffer,tileBoundsIndexBuffer:l._tileBoundsIndexBuffer,tileBoundsSegments:l._tileBoundsSegments}:this.getMercatorTileBoundsBuffers()}clearStencil(){const l=this.context.gl;this.nextStencilID=1,this.currentStencilSource=void 0,this._tileClippingMaskIDs={},this.getOrCreateProgram("clippingMask").draw(this,l.TRIANGLES,mr.disabled,this.stencilClearMode,Mr.disabled,Lr.disabled,kh(this.identityMat),"$clipping",this.viewportBuffer,this.quadTriangleIndexBuffer,this.viewportSegments)}resetStencilClippingMasks(){this.terrain||(this.currentStencilSource=void 0,this._tileClippingMaskIDs={})}_renderTileClippingMasks(l,d,x){if(!d||this.currentStencilSource===d.id||!l.isTileClipped()||!x||x.length===0)return;if(this._tileClippingMaskIDs&&!this.terrain){let z=!1;for(const K of x)if(this._tileClippingMaskIDs[K.key]===void 0){z=!0;break}if(!z)return}this.currentStencilSource=d.id;const C=this.context,B=C.gl;this.nextStencilID+x.length>256&&this.clearStencil(),C.setColorMode(Mr.disabled),C.setDepthMode(mr.disabled);const F=this.getOrCreateProgram("clippingMask");this._tileClippingMaskIDs={};for(const z of x){const K=d.getTile(z),X=this._tileClippingMaskIDs[z.key]=this.nextStencilID++,{tileBoundsBuffer:J,tileBoundsIndexBuffer:oe,tileBoundsSegments:se}=this.getTileBoundsBuffers(K);F.draw(this,B.TRIANGLES,mr.disabled,new Rr({func:B.ALWAYS,mask:0},X,255,B.KEEP,B.KEEP,B.REPLACE),Mr.disabled,Lr.disabled,kh(z.projMatrix),"$clipping",J,oe,se)}}stencilModeFor3D(){this.currentStencilSource=void 0,this.nextStencilID+1>256&&this.clearStencil();const l=this.nextStencilID++,d=this.context.gl;return new Rr({func:d.NOTEQUAL,mask:255},l,255,d.KEEP,d.KEEP,d.REPLACE)}stencilModeForClipping(l){if(this.terrain)return this.terrain.stencilModeForRTTOverlap(l);const d=this.context.gl;return new Rr({func:d.EQUAL,mask:255},this._tileClippingMaskIDs[l.key],0,d.KEEP,d.KEEP,d.REPLACE)}stencilConfigForOverlap(l){const d=this.context.gl,x=l.sort((F,z)=>z.overscaledZ-F.overscaledZ),C=x[x.length-1].overscaledZ,B=x[0].overscaledZ-C+1;if(B>1){this.currentStencilSource=void 0,this.nextStencilID+B>256&&this.clearStencil();const F={};for(let z=0;z<B;z++)F[z+C]=new Rr({func:d.GEQUAL,mask:255},z+this.nextStencilID,255,d.KEEP,d.KEEP,d.REPLACE);return this.nextStencilID+=B,[F,x]}return[{[C]:Rr.disabled},x]}colorModeForRenderPass(){const l=this.context.gl;return this._showOverdrawInspector?new Mr([l.CONSTANT_COLOR,l.ONE,l.CONSTANT_COLOR,l.ONE],new i.aj(.125,.125,.125,0),[!0,!0,!0,!0]):this.renderPass==="opaque"?Mr.unblended:Mr.alphaBlended}colorModeForDrapableLayerRenderPass(l){const d=this.context.gl;return this.style&&this.style.enable3dLights()&&this.terrain&&this.terrain.renderingToTexture&&this.renderPass==="translucent"?new Mr([d.ONE,d.ONE_MINUS_SRC_ALPHA,d.CONSTANT_ALPHA,d.ONE_MINUS_SRC_ALPHA],new i.aj(0,0,0,l===void 0?0:l),[!0,!0,!0,!0]):this.colorModeForRenderPass()}depthModeForSublayer(l,d,x,C=!1){if(this.depthOcclusion)return new mr(this.context.gl.GREATER,mr.ReadOnly,this.depthRangeFor3D);if(!this.opaquePassEnabledForLayer()&&!C)return mr.disabled;const B=1-((1+this.currentLayer)*this.numSublayers+l)*this.depthEpsilon;return new mr(x||this.context.gl.LEQUAL,d,[B,B])}opaquePassEnabledForLayer(){return this.currentLayer<this.opaquePassCutoff}blitDepth(){const l=this.context.gl,d=Math.ceil(this.width),x=Math.ceil(this.height),C=this.context.bindFramebuffer.get(),B=l.getParameter(l.TEXTURE_BINDING_2D);this.depthFBO&&this.depthFBO.width===d&&this.depthFBO.height===x||(this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),d!==0&&x!==0&&(this.depthFBO=new Ts(this.context,d,x,!1,"texture"),this.depthTexture=new i.T(this.context,{width:d,height:x,data:null},l.DEPTH24_STENCIL8),this.depthFBO.depthAttachment.set(this.depthTexture.texture))),this.context.bindFramebuffer.set(C),l.bindTexture(l.TEXTURE_2D,B),this.depthFBO&&(l.bindFramebuffer(l.READ_FRAMEBUFFER,null),l.bindFramebuffer(l.DRAW_FRAMEBUFFER,this.depthFBO.framebuffer),l.blitFramebuffer(0,0,d,x,0,0,d,x,l.DEPTH_BUFFER_BIT,l.NEAREST),l.bindFramebuffer(l.FRAMEBUFFER,this.context.bindFramebuffer.current))}updateAverageFPS(){this._fpsHistory.push(this._dt===0?0:1e3/this._dt),this._fpsHistory.length>this._debugParams.fpsWindow&&this._fpsHistory.splice(0,this._fpsHistory.length-this._debugParams.fpsWindow),this._averageFPS=Math.round(this._fpsHistory.reduce((l,d)=>l+d/this._fpsHistory.length,0))}render(l,d){const x=i.q.now();this._dt=x-this._timeStamp,this._timeStamp=x,this._wireframeDebugCache.update(this.frameCounter),this._debugParams.continousRedraw=l.map.repaint,this.style=l,this.options=d;const C=this.style._mergedLayers,B=this.style._getOrder(!(!this.terrain||!this.terrain.enabled)).filter(Ct=>{const Rt=C[Ct];return!(Rt.type in this._debugParams.enabledLayers)||this._debugParams.enabledLayers[Rt.type]});let F=!1,z=!1;for(const Ct of B){const Rt=C[Ct];Rt.type==="circle"&&(F=!0),Rt.type==="symbol"&&(Rt.hasInitialOcclusionOpacityProperties?z=!0:F=!0)}const K=B.map(Ct=>C[Ct]),X=this.style._mergedSourceCaches;this.imageManager=l.imageManager,this.modelManager=l.modelManager,this.symbolFadeChange=l.placement.symbolFadeChange(i.q.now()),this.imageManager.beginFrame();let J=0,oe=!1;for(const Ct in X){const Rt=X[Ct];Rt.used&&(Rt.prepare(this.context),Rt.getSource().usedInConflation&&++J)}let se=!1;for(const Ct of K)Ct.isHidden(this.transform.zoom)||(Ct.type==="clip"&&(se=!0),this.prepareLayer(Ct));const ue={},Ie={},Se={},Pe={},Le={};for(const Ct in X){const Rt=X[Ct];ue[Ct]=Rt.getVisibleCoordinates(),Ie[Ct]=ue[Ct].slice().reverse(),Se[Ct]=Rt.getVisibleCoordinates(!0).reverse(),Pe[Ct]=Rt.getShadowCasterCoordinates(),Le[Ct]=Rt.sortCoordinatesByDistance(ue[Ct])}const $e=Ct=>{const Rt=this.style.getLayerSourceCache(Ct);return Rt&&Rt.used?Rt.getSource():null};if(J||se||this._clippingActiveLastFrame){const Ct=[],Rt=[];let wn=0;for(const kn of K)this.isSourceForClippingOrConflation(kn,$e(kn))&&(Ct.push(kn),Rt.push(wn)),wn++;if(Ct&&(se||Ct.length>1)||this._clippingActiveLastFrame){se=!1;const kn=[];for(let Qn=0;Qn<Ct.length;Qn++){const Jt=Ct[Qn],In=Rt[Qn],dn=this.style.getLayerSourceCache(Jt);if(!dn||!dn.used||!dn.getSource().usedInConflation&&Jt.type!=="clip")continue;let Dn=i.dx,Fn=i.by.None;const bn=[];let tr=!0;if(Jt.type==="clip"){Dn=In;for(const nr of Jt.layout.get("clip-layer-types"))Fn|=nr==="model"?i.by.Model:nr==="symbol"?i.by.Symbol:i.by.FillExtrusion;for(const nr of Jt.layout.get("clip-layer-scope"))bn.push(nr);Jt.isHidden(this.transform.zoom)?tr=!1:se=!0}tr&&kn.push({layer:Jt.fqid,cache:dn,order:Dn,clipMask:Fn,clipScope:bn})}this.replacementSource.setSources(kn),oe=!0}}this._clippingActiveLastFrame=se,oe||this.replacementSource.clear(),this.conflationActive=oe,this.minCutoffZoom=0,this.longestCutoffRange=0,this.opaquePassCutoff=1/0,this._lastOcclusionLayer=-1,this.layersWithOcclusionOpacity=[];for(let Ct=0;Ct<K.length;Ct++){const Rt=K[Ct],wn=Rt.cutoffRange();if(this.longestCutoffRange=Math.max(wn,this.longestCutoffRange),wn>0){const kn=$e(Rt);kn&&(this.minCutoffZoom=Math.max(kn.minzoom,this.minCutoffZoom)),Rt.minzoom&&(this.minCutoffZoom=Math.max(Rt.minzoom,this.minCutoffZoom))}Rt.is3D()&&(this.opaquePassCutoff===1/0&&(this.opaquePassCutoff=Ct),this._lastOcclusionLayer=Ct)}const rt=this.style&&this.style.fog;rt?(this._fogVisible=rt.getOpacity(this.transform.pitch)!==0,this._fogVisible&&this.transform.projection.name!=="globe"&&(this._fogVisible=rt.isVisibleOnFrustum(this.transform.cameraFrustum))):this._fogVisible=!1,this._cachedTileFogOpacities={},this.terrain&&(this.terrain.updateTileBinding(Se),this.opaquePassCutoff=0);const et=this._shadowRenderer;if(et){et.updateShadowParameters(this.transform,this.style.directionalLight);for(const Ct in X)for(const Rt of ue[Ct]){let wn={min:0,max:0};this.terrain&&(wn=this.terrain.getMinMaxForTile(Rt)||wn),et.addShadowReceiver(Rt.toUnwrapped(),wn.min,wn.max)}}this.transform.projection.name!=="globe"||this.globeSharedBuffers||(this.globeSharedBuffers=new i.dw(this.context)),this.style.fog&&this.transform.projection.supportsFog?(this._atmosphere||(this._atmosphere=new uu(this)),this._atmosphere.update(this)):this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0);const ft=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.snow),dt=this._debugParams.forceEnablePrecipitation||!(!this.style||!this.style.rain);if(ft&&!this._snow&&(this._snow=new Tf(this)),!ft&&this._snow&&(this._snow.destroy(),delete this._snow),dt&&!this._rain&&(this._rain=new Nh(this)),!dt&&this._rain&&(this._rain.destroy(),delete this._rain),this._snow&&this._snow.update(this),this._rain&&this._rain.update(this),!Ht.has(this.context.gl))return;this.renderPass="offscreen";for(const Ct of K){const Rt=l.getLayerSourceCache(Ct);if(!Ct.hasOffscreenPass()||Ct.isHidden(this.transform.zoom))continue;const wn=Rt?Ie[Rt.id]:void 0;(Ct.type==="custom"||Ct.type==="raster"||Ct.type==="raster-particle"||Ct.isSky()||wn&&wn.length)&&this.renderLayer(this,Rt,Ct,wn)}this.depthRangeFor3D=[0,1-(K.length+2)*this.numSublayers*this.depthEpsilon],this._shadowRenderer&&(this.renderPass="shadow",this._shadowRenderer.drawShadowPass(this.style,Pe)),this.context.bindFramebuffer.set(null),this.context.viewport.set([0,0,this.width,this.height]);const ht=this.transform.projection.name==="globe"||this.transform.isHorizonVisible(),ut=(()=>{if(d.showOverdrawInspector)return i.aj.black;const Ct=this.style.fog;if(Ct&&this.transform.projection.supportsFog){const Rt=this.style.getLut(Ct.scope);if(!ht){const wn=Ct.properties.get("color-use-theme")==="none",kn=Ct.properties.get("color").toRenderColor(wn?null:Rt).toArray01();return new i.aj(...kn)}if(ht){const wn=Ct.properties.get("space-color-use-theme")==="none",kn=Ct.properties.get("space-color").toRenderColor(wn?null:Rt).toArray01();return new i.aj(...kn)}}return i.aj.transparent})();if(this.context.clear({color:ut,depth:1}),this.clearStencil(),this._showOverdrawInspector=d.showOverdrawInspector,this.renderPass="opaque",this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&ht&&this._atmosphere.drawStars(this,this.style.fog),!this.terrain)for(this.currentLayer=B.length-1;this.currentLayer>=0;this.currentLayer--){const Ct=K[this.currentLayer],Rt=l.getLayerSourceCache(Ct);if(Ct.isSky())continue;const wn=Rt?(Ct.is3D()?Le:Ie)[Rt.id]:void 0;this._renderTileClippingMasks(Ct,Rt,wn),this.renderLayer(this,Rt,Ct,wn)}if(this.style.fog&&this.transform.projection.supportsFog&&this._atmosphere&&!this._showOverdrawInspector&&ht&&this._atmosphere.drawAtmosphereGlow(this,this.style.fog),this.renderPass="sky",(!this._atmosphere||i.ae(this.transform.zoom)>0)&&(this.transform.projection.name==="globe"||this.transform.isHorizonVisible()))for(this.currentLayer=0;this.currentLayer<B.length;this.currentLayer++){const Ct=K[this.currentLayer],Rt=l.getLayerSourceCache(Ct);Ct.isSky()&&this.renderLayer(this,Rt,Ct,Rt?Ie[Rt.id]:void 0)}function xt(Ct,Rt){let wn;return Rt&&(wn=(Ct.type==="symbol"?Se:Ct.is3D()?Le:Ie)[Rt.id]),wn}if(this.renderPass="translucent",this.transform.projection.name==="globe"){for(this.renderElevatedRasterBackface=!0,this.currentLayer=0;this.currentLayer<B.length;){const Ct=K[this.currentLayer];if(Ct.type==="raster"||Ct.type==="raster-particle"){const Rt=l.getLayerSourceCache(Ct);this.renderLayer(this,Rt,Ct,xt(Ct,Rt))}++this.currentLayer}this.renderElevatedRasterBackface=!1}this.currentLayer=0,this.firstLightBeamLayer=Number.MAX_SAFE_INTEGER;let Bt=0;et&&(Bt=et.getShadowCastingLayerCount());let an=!1,tn=-1;for(let Ct=0;Ct<B.length;++Ct){const Rt=K[Ct];Rt.isHidden(this.transform.zoom)||Rt.is3D()&&(tn=Ct)}for(z&&tn===-1&&(F=!0);this.currentLayer<B.length;){const Ct=K[this.currentLayer],Rt=l.getLayerSourceCache(Ct);if(Ct.isSky())++this.currentLayer;else if(this.terrain&&this.style.isLayerDraped(Ct)){if(Ct.isHidden(this.transform.zoom)){++this.currentLayer;continue}this.currentLayer=this.terrain.renderBatch(this.currentLayer),this._lastOcclusionLayer=Math.max(this.currentLayer,this._lastOcclusionLayer)}else{if(F&&!an&&this.terrain&&!this.transform.isOrthographic&&(an=!0,this.blitDepth()),z&&tn!==-1&&this.currentLayer===tn+1&&!this.transform.isOrthographic&&this.blitDepth(),Ct.is3D()||this.terrain||this._renderTileClippingMasks(Ct,Rt,Rt?ue[Rt.id]:void 0),this.renderLayer(this,Rt,Ct,xt(Ct,Rt)),!this.terrain&&et&&Bt>0&&Ct.hasShadowPass()&&--Bt==0&&(et.drawGroundShadows(),this.firstLightBeamLayer<=this.currentLayer)){const wn=this.currentLayer;for(this.renderPass="light-beam",this.currentLayer=this.firstLightBeamLayer;this.currentLayer<=wn;this.currentLayer++){const kn=K[this.currentLayer];if(!kn.hasLightBeamPass())continue;const Qn=l.getLayerSourceCache(kn);this.renderLayer(this,Qn,kn,Qn?Ie[Qn.id]:void 0)}this.currentLayer=wn,this.renderPass="translucent"}if(this.currentLayer>=this._lastOcclusionLayer&&this.layersWithOcclusionOpacity.length>0){const wn=this.currentLayer;this.depthOcclusion=!0;for(const kn of this.layersWithOcclusionOpacity){this.currentLayer=kn;const Qn=K[this.currentLayer],Jt=l.getLayerSourceCache(Qn),In=Jt?Ie[Jt.id]:void 0;Qn.is3D()||this.terrain||this._renderTileClippingMasks(Qn,Jt,Jt?ue[Jt.id]:void 0),this.renderLayer(this,Jt,Qn,In)}this.depthOcclusion=!1,this.currentLayer=wn,this.renderPass="translucent",this.layersWithOcclusionOpacity=[]}++this.currentLayer}}if(this.terrain&&this.terrain.postRender(),this._snow&&this._snow.draw(this),this._rain&&this._rain.draw(this),this.options.showTileBoundaries||this.options.showQueryGeometry||this.options.showTileAABBs){let Ct=null;K.forEach(Rt=>{const wn=l.getLayerSourceCache(Rt);wn&&!Rt.isHidden(this.transform.zoom)&&wn.getVisibleCoordinates().length&&(!Ct||Ct.getSource().maxzoom<wn.getSource().maxzoom)&&(Ct=wn)}),Ct&&this.options.showTileBoundaries&&Ga.debug(this,Ct,Ct.getVisibleCoordinates(),i.aj.red,!1,this.options.showParseStatus)}this.terrain&&this._debugParams.showTerrainProxyTiles&&Ga.debug(this,this.terrain.proxySourceCache,this.terrain.proxyCoords,new i.aj(1,.8,.1,1),!0,this.options.showParseStatus),this.options.showPadding&&function(Ct){const Rt=Ct.transform.padding;Yd(Ct,Ct.transform.height-(Rt.top||0),3,yg),Yd(Ct,Rt.bottom||0,3,vg),od(Ct,Rt.left||0,3,Xd),od(Ct,Ct.transform.width-(Rt.right||0),3,sd);const wn=Ct.transform.centerPoint;(function(kn,Qn,Jt,In){bf(kn,Qn-1,Jt-10,2,20,In),bf(kn,Qn-10,Jt-1,20,2,In)})(Ct,wn.x,Ct.transform.height-wn.y,mm)}(this),this.context.setDefault(),this.frameCounter=(this.frameCounter+1)%Number.MAX_SAFE_INTEGER,this.tileLoaded&&this.options.speedIndexTiming&&(this.loadTimeStamps.push(performance.now()),this.saveCanvasCopy()),oe||(this.conflationActive=!1)}prepareLayer(l){this.gpuTimingStart(l);const{unsupportedLayers:d}=this.transform.projection,x=!d||!d.includes(l.type);if(du[l.type]&&(x||this.terrain&&l.type==="custom")){const C=this.style.getLayerSourceCache(l);du[l.type](l,C,this)}this.gpuTimingEnd()}renderLayer(l,d,x,C){x.isHidden(this.transform.zoom)||(x.type==="background"||x.type==="sky"||x.type==="custom"||x.type==="model"||x.type==="raster"||x.type==="raster-particle"||C&&C.length)&&(this.id=x.id,this.gpuTimingStart(x),l.transform.projection.unsupportedLayers&&l.transform.projection.unsupportedLayers.includes(x.type)&&(!l.terrain||x.type!=="custom")||x.type==="clip"||Ga[x.type](l,d,x,C,this.style.placement.variableOffsets,this.options.isInitialLoad),this.gpuTimingEnd())}gpuTimingStart(l){if(!this.options.gpuTiming)return;const d=this.context.extTimerQuery,x=this.context.gl;let C=this.gpuTimers[l.id];C||(C=this.gpuTimers[l.id]={calls:0,cpuTime:0,query:x.createQuery()}),C.calls++,x.beginQuery(d.TIME_ELAPSED_EXT,C.query)}gpuTimingDeferredRenderStart(){if(this.options.gpuTimingDeferredRender){const l=this.context.extTimerQuery,d=this.context.gl,x=d.createQuery();this.deferredRenderGpuTimeQueries.push(x),d.beginQuery(l.TIME_ELAPSED_EXT,x)}}gpuTimingDeferredRenderEnd(){this.options.gpuTimingDeferredRender&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}gpuTimingEnd(){this.options.gpuTiming&&this.context.gl.endQuery(this.context.extTimerQuery.TIME_ELAPSED_EXT)}collectGpuTimers(){const l=this.gpuTimers;return this.gpuTimers={},l}collectDeferredRenderGpuQueries(){const l=this.deferredRenderGpuTimeQueries;return this.deferredRenderGpuTimeQueries=[],l}queryGpuTimers(l){const d={};for(const x in l){const C=l[x],B=this.context.extTimerQuery,F=B.getQueryParameter(C.query,this.context.gl.QUERY_RESULT)/1e6;B.deleteQueryEXT(C.query),d[x]=F}return d}queryGpuTimeDeferredRender(l){if(!this.options.gpuTimingDeferredRender)return 0;const d=this.context.gl;let x=0;for(const C of l)x+=d.getQueryParameter(C,d.QUERY_RESULT)/1e6,d.deleteQuery(C);return x}translatePosMatrix(l,d,x,C,B){if(!x[0]&&!x[1])return l;const F=B?C==="map"?this.transform.angle:0:C==="viewport"?-this.transform.angle:0;if(F){const X=Math.sin(F),J=Math.cos(F);x=[x[0]*J-x[1]*X,x[0]*X+x[1]*J]}const z=[B?x[0]:i.ar(d,x[0],this.transform.zoom),B?x[1]:i.ar(d,x[1],this.transform.zoom),0],K=new Float32Array(16);return i.ab.mat4.translate(K,l,z),K}saveTileTexture(l){const d=l.size[0],x=this._tileTextures[d];x?x.push(l):this._tileTextures[d]=[l]}getTileTexture(l){const d=this._tileTextures[l];return d&&d.length>0?d.pop():null}terrainRenderModeElevated(){return this.style&&!!this.style.getTerrain()&&!!this.terrain&&!this.terrain.renderingToTexture||this.forceTerrainMode}linearFloatFilteringSupported(){return this.context.extTextureFloatLinear!=null}currentGlobalDefines(l,d,x){const C=x===void 0?this.terrain&&this.terrain.renderingToTexture:x,B=[];return this.style&&this.style.enable3dLights()&&(l==="globeRaster"||l==="terrainRaster"?(B.push("LIGHTING_3D_MODE"),B.push("LIGHTING_3D_ALPHA_EMISSIVENESS")):C||B.push("LIGHTING_3D_MODE")),this.renderPass==="shadow"&&(this._shadowMapDebug||B.push("DEPTH_TEXTURE")),this.terrainRenderModeElevated()&&(B.push("TERRAIN"),this.linearFloatFilteringSupported()&&B.push("TERRAIN_DEM_FLOAT_FORMAT")),this.transform.projection.name==="globe"&&B.push("GLOBE"),!this._fogVisible||C||d!==void 0&&!d||B.push("FOG","FOG_DITHERING"),C&&B.push("RENDER_TO_TEXTURE"),this._showOverdrawInspector&&B.push("OVERDRAW_INSPECTOR"),B}getOrCreateProgram(l,d){this.cache=this.cache||{};const x=d&&d.defines||[],C=d&&d.config,B=this.currentGlobalDefines(l,d&&d.overrideFog,d&&d.overrideRtt).concat(x),F=w0.cacheKey(va[l],l,B,C);return this.cache[F]||(this.cache[F]=new w0(this.context,l,va[l],C,Vr[l],B)),this.cache[F]}setCustomLayerDefaults(){this.context.unbindVAO(),this.context.cullFace.setDefault(),this.context.frontFace.setDefault(),this.context.cullFaceSide.setDefault(),this.context.activeTexture.setDefault(),this.context.pixelStoreUnpack.setDefault(),this.context.pixelStoreUnpackPremultiplyAlpha.setDefault(),this.context.pixelStoreUnpackFlipY.setDefault()}setBaseState(){const l=this.context.gl;this.context.cullFace.set(!1),this.context.viewport.set([0,0,this.width,this.height]),this.context.blendEquation.set(l.FUNC_ADD)}initDebugOverlayCanvas(){this.debugOverlayCanvas==null&&(this.debugOverlayCanvas=document.createElement("canvas"),this.debugOverlayCanvas.width=512,this.debugOverlayCanvas.height=512,this.debugOverlayTexture=new i.T(this.context,this.debugOverlayCanvas,this.context.gl.RGBA8))}destroy(){this._terrain&&this._terrain.destroy(),this._atmosphere&&(this._atmosphere.destroy(),this._atmosphere=void 0),this.globeSharedBuffers&&this.globeSharedBuffers.destroy(),this.emptyTexture.destroy(),this.debugOverlayTexture&&this.debugOverlayTexture.destroy(),this._wireframeDebugCache.destroy(),this.depthFBO&&(this.depthFBO.destroy(),this.depthFBO=void 0,this.depthTexture=void 0),this.emptyDepthTexture&&this.emptyDepthTexture.destroy()}prepareDrawTile(){this.terrain&&this.terrain.prepareDrawTile()}uploadCommonLightUniforms(l,d){if(this.style.enable3dLights()){const x=this.style.directionalLight,C=this.style.ambientLight;if(x&&C){const B=((F,z,K)=>{const X=F.properties.get("direction"),J=F.properties.get("color-use-theme")==="none",oe=F.properties.get("color").toRenderColor(J?null:K.getLut(F.scope)).toArray01(),se=F.properties.get("intensity"),ue=z.properties.get("color-use-theme")==="none",Ie=z.properties.get("color").toRenderColor(ue?null:K.getLut(z.scope)).toArray01(),Se=z.properties.get("intensity"),Pe=[X.x,X.y,X.z],Le=i.cM(Ie,Se),$e=i.cM(oe,se);return{u_lighting_ambient_color:Le,u_lighting_directional_dir:Pe,u_lighting_directional_color:$e,u_ground_radiance:_0(Pe,$e,Le)}})(x,C,this.style);d.setLightsUniformValues(l,B)}}}uploadCommonUniforms(l,d,x,C,B){if(this.uploadCommonLightUniforms(l,d),this.terrain&&this.terrain.renderingToTexture)return;const F=this.style.fog;if(F){const z=F.getOpacity(this.transform.pitch),K=((X,J,oe,se,ue,Ie,Se,Pe,Le,$e,rt,et)=>{const ft=X.transform,dt=J.properties.get("color-use-theme")==="none",ht=J.properties.get("color").toRenderColor(dt?null:X.style.getLut(J.scope)).toArray01();ht[3]=se;const ut=X.frameCounter/1e3%1,[xt,Bt]=J.properties.get("vertical-range");return{u_fog_matrix:oe?ft.calculateFogTileMatrix(oe):et||X.identityMat,u_fog_range:J.getFovAdjustedRange(ft._fov),u_fog_color:ht,u_fog_horizon_blend:J.properties.get("horizon-blend"),u_fog_vertical_limit:[Math.min(xt,Bt),Bt],u_fog_temporal_offset:ut,u_frustum_tl:ue,u_frustum_tr:Ie,u_frustum_br:Se,u_frustum_bl:Pe,u_globe_pos:Le,u_globe_radius:$e,u_viewport:rt,u_globe_transition:i.ae(ft.zoom),u_is_globe:+(ft.projection.name==="globe")}})(this,F,x,z,this.transform.frustumCorners.TL,this.transform.frustumCorners.TR,this.transform.frustumCorners.BR,this.transform.frustumCorners.BL,this.transform.globeCenterInViewSpace,this.transform.globeRadius,[this.transform.width*i.q.devicePixelRatio,this.transform.height*i.q.devicePixelRatio],C);d.setFogUniformValues(l,K)}B&&d.setCutoffUniformValues(l,B.uniformValues)}setTileLoadedFlag(l){this.tileLoaded=l}saveCanvasCopy(){const l=this.canvasCopy();l&&(this.frameCopies.push(l),this.tileLoaded=!1)}canvasCopy(){const l=this.context.gl,d=l.createTexture();return l.bindTexture(l.TEXTURE_2D,d),l.copyTexImage2D(l.TEXTURE_2D,0,l.RGBA,0,0,l.drawingBufferWidth,l.drawingBufferHeight,0),d}getCanvasCopiesAndTimestamps(){return{canvasCopies:this.frameCopies,timeStamps:this.loadTimeStamps}}averageElevationNeedsEasing(){if(!this.transform._elevation)return!1;const l=this.style&&this.style.fog;return!!l&&l.getOpacity(this.transform.pitch)!==0}getBackgroundTiles(){const l=this._backgroundTiles,d=this._backgroundTiles={},x=this.transform.coveringTiles({tileSize:512});for(const C of x)d[C.key]=l[C.key]||new xl(C,512,this.transform.tileZoom,this);return d}clearBackgroundTiles(){this._backgroundTiles={}}isSourceForClippingOrConflation(l,d){return!(!l.is3D()||l.type!=="clip"&&(l.minzoom&&l.minzoom>this.transform.zoom||(this.style._clipLayerPresent||l.sourceLayer!=="building")&&(!d||d.type!=="batched-model")))}isTileAffectedByFog(l){if(!this.style||!this.style.fog)return!1;if(this.transform.projection.name==="globe")return!0;let d=this._cachedTileFogOpacities[l.key];return d||(this._cachedTileFogOpacities[l.key]=d=this.style.fog.getOpacityForTile(l)),d[0]>=Pn||d[1]>=Pn}setupDepthForOcclusion(l,d,x){const C=this.context,B=C.gl,F=!!x;var z;x||(x={u_dem:2,u_dem_prev:4,u_dem_tl:[0,0],u_dem_tl_prev:[0,0],u_dem_scale:0,u_dem_scale_prev:0,u_dem_size:0,u_dem_lerp:1,u_depth:3,u_depth_size_inv:[0,0],u_depth_range_unpack:[0,1],u_occluder_half_size:16,u_occlusion_depth_offset:-1e-4,u_exaggeration:0}),C.activeTexture.set(B.TEXTURE3),l&&this.depthFBO&&this.depthTexture?(this.depthTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),x.u_depth_size_inv=[1/this.depthFBO.width,1/this.depthFBO.height],x.u_depth_range_unpack=[2/((z=this.depthRangeFor3D)[1]-z[0]),-1-2*z[0]/(z[1]-z[0])],x.u_occluder_half_size=.5*this.occlusionParams.occluderSize,x.u_occlusion_depth_offset=this.occlusionParams.depthOffset):this.emptyDepthTexture.bind(B.NEAREST,B.CLAMP_TO_EDGE),C.activeTexture.set(B.TEXTURE0),F||d.setTerrainUniformValues(C,x)}}function nh(v,l){let d=!1,x=null;const C=()=>{x=null,d&&(v(),x=setTimeout(C,l),d=!1)};return()=>(d=!0,x||C(),x)}class Vc{constructor(l){this._hashName=l&&encodeURIComponent(l),i.aP(["_getCurrentHash","_onHashChange","_updateHash"],this),this._updateHash=nh(this._updateHashUnthrottled.bind(this),300)}addTo(l){return this._map=l,window.addEventListener("hashchange",this._onHashChange,!1),l.on("moveend",this._updateHash),this}remove(){return this._map?(this._map.off("moveend",this._updateHash),window.removeEventListener("hashchange",this._onHashChange,!1),clearTimeout(this._updateHash()),this._map=void 0,this):this}getHashString(){const l=this._map;if(!l)return"";const d=lA(l);if(this._hashName){const x=this._hashName;let C=!1;const B=location.hash.slice(1).split("&").map(F=>{const z=F.split("=")[0];return z===x?(C=!0,`${z}=${d}`):F}).filter(F=>F);return C||B.push(`${x}=${d}`),`#${B.join("&")}`}return`#${d}`}_getCurrentHash(){const l=location.hash.replace("#","");if(this._hashName){let d;return l.split("&").map(x=>x.split("=")).forEach(x=>{x[0]===this._hashName&&(d=x)}),(d&&d[1]||"").split("/")}return l.split("/")}_onHashChange(){const l=this._map;if(!l)return!1;const d=this._getCurrentHash();if(d.length>=3&&!d.some(x=>isNaN(x))){const x=l.dragRotate.isEnabled()&&l.touchZoomRotate.isEnabled()?+(d[3]||0):l.getBearing();return l.jumpTo({center:[+d[2],+d[1]],zoom:+d[0],bearing:x,pitch:+(d[4]||0)}),!0}return!1}_updateHashUnthrottled(){history.replaceState(history.state,"",location.href.replace(/(#.+)?$/,this.getHashString()))}}function lA(v,l){const d=v.getCenter(),x=Math.round(100*v.getZoom())/100,C=Math.ceil((x*Math.LN2+Math.log(512/360/.5))/Math.LN10),B=Math.pow(10,C),F=Math.round(d.lng*B)/B,z=Math.round(d.lat*B)/B,K=v.getBearing(),X=v.getPitch();let J=l?`/${F}/${z}/${x}`:`${x}/${z}/${F}`;return(K||X)&&(J+="/"+Math.round(10*K)/10),X&&(J+=`/${Math.round(X)}`),J}const $c={linearity:.3,easing:i.dy(0,0,.3,1)},cA=i.l({deceleration:2500,maxSpeed:1400},$c),uA=i.l({deceleration:20,maxSpeed:1400},$c),S0=i.l({deceleration:1e3,maxSpeed:360},$c),l_=i.l({deceleration:1e3,maxSpeed:90},$c);class c_{constructor(l){this._map=l,this.clear()}clear(){this._inertiaBuffer=[]}record(l){this._drainInertiaBuffer(),this._inertiaBuffer.push({time:i.q.now(),settings:l})}_drainInertiaBuffer(){const l=this._inertiaBuffer,d=i.q.now();for(;l.length>0&&d-l[0].time>160;)l.shift()}_onMoveEnd(l){if(this._map._prefersReducedMotion()||(this._drainInertiaBuffer(),this._inertiaBuffer.length<2))return;const d={zoom:0,bearing:0,pitch:0,pan:new i.P(0,0),pinchAround:void 0,around:void 0};for(const{settings:B}of this._inertiaBuffer)d.zoom+=B.zoomDelta||0,d.bearing+=B.bearingDelta||0,d.pitch+=B.pitchDelta||0,B.panDelta&&d.pan._add(B.panDelta),B.around&&(d.around=B.around),B.pinchAround&&(d.pinchAround=B.pinchAround);const x=this._inertiaBuffer[this._inertiaBuffer.length-1].time-this._inertiaBuffer[0].time,C={};if(d.pan.mag()){const B=vm(d.pan.mag(),x,i.l({},cA,l||{}));C.offset=d.pan.mult(B.amount/d.pan.mag()),C.center=this._map.transform.center,xg(C,B)}if(d.zoom){const B=vm(d.zoom,x,uA);C.zoom=this._map.transform.zoom+B.amount,xg(C,B)}if(d.bearing){const B=vm(d.bearing,x,S0);C.bearing=this._map.transform.bearing+i.aw(B.amount,-179,179),xg(C,B)}if(d.pitch){const B=vm(d.pitch,x,l_);C.pitch=this._map.transform.pitch+B.amount,xg(C,B)}if(C.zoom||C.bearing){const B=d.pinchAround===void 0?d.around:d.pinchAround;C.around=B?this._map.unproject(B):this._map.getCenter()}return this.clear(),C.noMoveStart=!0,C}}function xg(v,l){(!v.duration||v.duration<l.duration)&&(v.duration=l.duration,v.easing=l.easing)}function vm(v,l,d){const{maxSpeed:x,linearity:C,deceleration:B}=d,F=i.aw(v*C/(l/1e3),-x,x),z=Math.abs(F)/(B*C);return{easing:d.easing,duration:1e3*z,amount:F*(z/2)}}class Gc extends i.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,x,C={}){const B=pe(d.getCanvasContainer(),x),F=d.unproject(B);super(l,i.l({point:B,lngLat:F,originalEvent:x},C)),this._defaultPrevented=!1,this.target=d}}class _g extends i.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d,x){const C=l==="touchend"?x.changedTouches:x.touches,B=_e(d.getCanvasContainer(),C),F=B.map(K=>d.unproject(K)),z=B.reduce((K,X,J,oe)=>K.add(X.div(oe.length)),new i.P(0,0));super(l,{points:B,point:z,lngLats:F,lngLat:d.unproject(z),originalEvent:x}),this._defaultPrevented=!1}}class dv extends i.z{preventDefault(){this._defaultPrevented=!0}get defaultPrevented(){return this._defaultPrevented}constructor(l,d){super("wheel",{originalEvent:d}),this._defaultPrevented=!1}}class hv{constructor(l,d){this._map=l,this._clickTolerance=d.clickTolerance}reset(){this._mousedownPos=void 0}wheel(l){return this._firePreventable(new dv(this._map,l))}mousedown(l,d){return this._mousedownPos=d,this._firePreventable(new Gc(l.type,this._map,l))}mouseup(l){this._map.fire(new Gc(l.type,this._map,l))}preclick(l){const d=i.l({},l);d.type="preclick",this._map.fire(new Gc(d.type,this._map,d))}click(l,d){this._mousedownPos&&this._mousedownPos.dist(d)>=this._clickTolerance||(this.preclick(l),this._map.fire(new Gc(l.type,this._map,l)))}dblclick(l){return this._firePreventable(new Gc(l.type,this._map,l))}mouseover(l){this._map.fire(new Gc(l.type,this._map,l))}mouseout(l){this._map.fire(new Gc(l.type,this._map,l))}touchstart(l){return this._firePreventable(new _g(l.type,this._map,l))}touchmove(l){this._map.fire(new _g(l.type,this._map,l))}touchend(l){this._map.fire(new _g(l.type,this._map,l))}touchcancel(l){this._map.fire(new _g(l.type,this._map,l))}_firePreventable(l){if(this._map.fire(l),l.defaultPrevented)return{}}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class Kc{constructor(l){this._map=l}reset(){this._delayContextMenu=!1,this._contextMenuEvent=void 0}mousemove(l){this._map.fire(new Gc(l.type,this._map,l))}mousedown(){this._delayContextMenu=!0}mouseup(){this._delayContextMenu=!1,this._contextMenuEvent&&(this._map.fire(new Gc("contextmenu",this._map,this._contextMenuEvent)),delete this._contextMenuEvent)}contextmenu(l){this._delayContextMenu?this._contextMenuEvent=l:this._map.fire(new Gc(l.type,this._map,l)),this._map.listens("contextmenu")&&l.preventDefault()}isEnabled(){return!0}isActive(){return!1}enable(){}disable(){}}class rh{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._container=l.getContainer(),this._clickTolerance=d.clickTolerance||1}isEnabled(){return!!this._enabled}isActive(){return!!this._active}enable(){this.isEnabled()||(this._enabled=!0)}disable(){this.isEnabled()&&(this._enabled=!1)}mousedown(l,d){this.isEnabled()&&l.shiftKey&&l.button===0&&(Z(),this._startPos=this._lastPos=d,this._active=!0)}mousemoveWindow(l,d){if(!this._active)return;const x=d,C=this._startPos,B=this._lastPos;if(!C||!B||B.equals(x)||!this._box&&x.dist(C)<this._clickTolerance)return;this._lastPos=x,this._box||(this._box=N("div","mapboxgl-boxzoom",this._container),this._container.classList.add("mapboxgl-crosshair"),this._fireEvent("boxzoomstart",l));const F=Math.min(C.x,x.x),z=Math.max(C.x,x.x),K=Math.min(C.y,x.y),X=Math.max(C.y,x.y);this._map._requestDomTask(()=>{this._box&&(this._box.style.transform=`translate(${F}px,${K}px)`,this._box.style.width=z-F+"px",this._box.style.height=X-K+"px")})}mouseupWindow(l,d){if(!this._active)return;const x=this._startPos,C=d;if(x&&l.button===0){if(this.reset(),le(),x.x!==C.x||x.y!==C.y)return this._map.fire(new i.z("boxzoomend",{originalEvent:l})),{cameraAnimation:B=>B.fitScreenCoordinates(x,C,this._map.getBearing(),{linear:!1})};this._fireEvent("boxzoomcancel",l)}}keydown(l){this._active&&l.keyCode===27&&(this.reset(),this._fireEvent("boxzoomcancel",l))}blur(){this.reset()}reset(){this._active=!1,this._container.classList.remove("mapboxgl-crosshair"),this._box&&(this._box.remove(),this._box=null),ne(),delete this._startPos,delete this._lastPos}_fireEvent(l,d){return this._map.fire(new i.z(l,{originalEvent:d}))}}function fv(v,l){const d={};for(let x=0;x<v.length;x++)d[v[x].identifier]=l[x];return d}class pb{constructor(l){this.reset(),this.numTouches=l.numTouches}reset(){this.centroid=void 0,this.startTime=0,this.touches={},this.aborted=!1}touchstart(l,d,x){(this.centroid||x.length>this.numTouches)&&(this.aborted=!0),this.aborted||(this.startTime===0&&(this.startTime=l.timeStamp),x.length===this.numTouches&&(this.centroid=function(C){const B=new i.P(0,0);for(const F of C)B._add(F);return B.div(C.length)}(d),this.touches=fv(x,d)))}touchmove(l,d,x){if(this.aborted||!this.centroid)return;const C=fv(x,d);for(const B in this.touches){const F=C[B];(!F||F.dist(this.touches[B])>30)&&(this.aborted=!0)}}touchend(l,d,x){if((!this.centroid||l.timeStamp-this.startTime>500)&&(this.aborted=!0),x.length===0){const C=!this.aborted&&this.centroid;if(this.reset(),C)return C}}}class po{constructor(l){this.singleTap=new pb(l),this.numTaps=l.numTaps,this.reset()}reset(){this.lastTime=1/0,this.lastTap=void 0,this.count=0,this.singleTap.reset()}touchstart(l,d,x){this.singleTap.touchstart(l,d,x)}touchmove(l,d,x){this.singleTap.touchmove(l,d,x)}touchend(l,d,x){const C=this.singleTap.touchend(l,d,x);if(C){const B=l.timeStamp-this.lastTime<500,F=!this.lastTap||this.lastTap.dist(C)<30;if(B&&F||this.reset(),this.count++,this.lastTime=l.timeStamp,this.lastTap=C,this.count===this.numTaps)return this.reset(),C}}}class dA{constructor(){this._zoomIn=new po({numTouches:1,numTaps:2}),this._zoomOut=new po({numTouches:2,numTaps:1}),this.reset()}reset(){this._active=!1,this._zoomIn.reset(),this._zoomOut.reset()}touchstart(l,d,x){this._zoomIn.touchstart(l,d,x),this._zoomOut.touchstart(l,d,x)}touchmove(l,d,x){this._zoomIn.touchmove(l,d,x),this._zoomOut.touchmove(l,d,x)}touchend(l,d,x){const C=this._zoomIn.touchend(l,d,x),B=this._zoomOut.touchend(l,d,x);return C?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()+1,around:F.unproject(C)},{originalEvent:l})}):B?(this._active=!0,l.preventDefault(),setTimeout(()=>this.reset(),0),{cameraAnimation:F=>F.easeTo({duration:300,zoom:F.getZoom()-1,around:F.unproject(B)},{originalEvent:l})}):void 0}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}const u_={0:1,2:2};class B0{constructor(l){this.reset(),this._clickTolerance=l.clickTolerance||1}blur(){this.reset()}reset(){this._active=!1,this._moved=!1,this._lastPoint=void 0,this._eventButton=void 0}_correctButton(l,d){return!1}_move(l,d){return{}}mousedown(l,d){if(this._lastPoint)return;const x=ye(l);this._correctButton(l,x)&&(this._lastPoint=d,this._eventButton=x)}mousemoveWindow(l,d){const x=this._lastPoint;if(x){if(l.preventDefault(),this._eventButton!=null&&function(C,B){const F=u_[B];return C.buttons===void 0||(C.buttons&F)!==F}(l,this._eventButton))this.reset();else if(this._moved||!(d.dist(x)<this._clickTolerance))return this._moved=!0,this._lastPoint=d,this._move(x,d)}}mouseupWindow(l){this._lastPoint&&ye(l)===this._eventButton&&(this._moved&&le(),this.reset())}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class wg extends B0{mousedown(l,d){super.mousedown(l,d),this._lastPoint&&(this._active=!0)}_correctButton(l,d){return d===0&&!l.ctrlKey}_move(l,d){return{around:d,panDelta:d.sub(l)}}}class E0 extends B0{_correctButton(l,d){return d===0&&l.ctrlKey||d===2}_move(l,d){const x=.8*(d.x-l.x);if(x)return this._active=!0,{bearingDelta:x}}contextmenu(l){l.preventDefault()}}class If extends B0{_correctButton(l,d){return d===0&&l.ctrlKey||d===2}_move(l,d){const x=-.5*(d.y-l.y);if(x)return this._active=!0,{pitchDelta:x}}contextmenu(l){l.preventDefault()}}class _p{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._minTouches=1,this._clickTolerance=d.clickTolerance||1,this.reset(),i.aP(["_addTouchPanBlocker","_showTouchPanBlockerAlert"],this)}reset(){this._active=!1,this._touches={},this._sum=new i.P(0,0)}touchstart(l,d,x){return this._calculateTransform(l,d,x)}touchmove(l,d,x){if(this._active&&!(x.length<this._minTouches)){if(this._map._cooperativeGestures&&!this._map.isMoving()){if(x.length===1&&!i.dz())return void this._showTouchPanBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}return l.cancelable&&l.preventDefault(),this._calculateTransform(l,d,x)}}touchend(l,d,x){this._calculateTransform(l,d,x),this._active&&x.length<this._minTouches&&this.reset()}touchcancel(){this.reset()}_calculateTransform(l,d,x){x.length>0&&(this._active=!0);const C=fv(x,d),B=new i.P(0,0),F=new i.P(0,0);let z=0;for(const X in C){const J=C[X],oe=this._touches[X];oe&&(B._add(J),F._add(J.sub(oe)),z++,C[X]=J)}if(this._touches=C,z<this._minTouches||!F.mag())return;const K=F.div(z);return this._sum._add(K),this._sum.mag()<this._clickTolerance?void 0:{around:B.div(z),panDelta:K}}enable(){this._enabled=!0,this._map._cooperativeGestures&&(this._addTouchPanBlocker(),this._el.classList.add("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page"))}disable(){this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove(),this._el.classList.remove("mapboxgl-touch-pan-blocker-override","mapboxgl-scrollable-page")),this.reset()}isEnabled(){return!!this._enabled}isActive(){return!!this._active}_addTouchPanBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=N("div","mapboxgl-touch-pan-blocker",this._map._container),this._alertContainer.textContent=this._map._getUIString("TouchPanBlocker.Message"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showTouchPanBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-touch-pan-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-touch-pan-blocker-show"),this._alertContainer.removeAttribute("role")},500)}}class ih{constructor(){this.reset()}reset(){this._active=!1,this._firstTwoTouches=void 0}_start(l){}_move(l,d,x){return{}}touchstart(l,d,x){this._firstTwoTouches||x.length<2||(this._firstTwoTouches=[x[0].identifier,x[1].identifier],this._start([d[0],d[1]]))}touchmove(l,d,x){const C=this._firstTwoTouches;if(!C)return;l.preventDefault();const[B,F]=C,z=wp(x,d,B),K=wp(x,d,F);if(!z||!K)return;const X=this._aroundCenter?null:z.add(K).div(2);return this._move([z,K],X,l)}touchend(l,d,x){if(!this._firstTwoTouches)return;const[C,B]=this._firstTwoTouches,F=wp(x,d,C),z=wp(x,d,B);F&&z||(this._active&&le(),this.reset())}touchcancel(){this.reset()}enable(l){this._enabled=!0,this._aroundCenter=!!l&&l.around==="center"}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}function wp(v,l,d){for(let x=0;x<v.length;x++)if(v[x].identifier===d)return l[x]}function Vo(v,l){return Math.log(v/l)/Math.LN2}class Fu extends ih{reset(){super.reset(),this._distance=0,this._startDistance=0}_start(l){this._startDistance=this._distance=l[0].dist(l[1])}_move(l,d){const x=this._distance;if(this._distance=l[0].dist(l[1]),this._active||!(Math.abs(Vo(this._distance,this._startDistance))<.1))return this._active=!0,{zoomDelta:Vo(this._distance,x),pinchAround:d}}}function bg(v,l){return 180*v.angleWith(l)/Math.PI}class hA extends ih{reset(){super.reset(),this._minDiameter=0,this._startVector=void 0,this._vector=void 0}_start(l){this._startVector=this._vector=l[0].sub(l[1]),this._minDiameter=l[0].dist(l[1])}_move(l,d){const x=this._vector;if(this._vector=l[0].sub(l[1]),x&&(this._active||!this._isBelowThreshold(this._vector)))return this._active=!0,{bearingDelta:bg(this._vector,x),pinchAround:d}}_isBelowThreshold(l){this._minDiameter=Math.min(this._minDiameter,l.mag());const d=25/(Math.PI*this._minDiameter)*360,x=this._startVector;if(!x)return!1;const C=bg(l,x);return Math.abs(C)<d}}function xm(v){return Math.abs(v.y)>Math.abs(v.x)}class T0 extends ih{constructor(l){super(),this._map=l}reset(){super.reset(),this._valid=void 0,this._firstMove=void 0,this._lastPoints=void 0}_start(l){this._lastPoints=l,xm(l[0].sub(l[1]))&&(this._valid=!1)}_move(l,d,x){const C=this._lastPoints;if(!C)return;const B=l[0].sub(C[0]),F=l[1].sub(C[1]);return this._map._cooperativeGestures&&!i.dz()&&x.touches.length<3||(this._valid=this.gestureBeginsVertically(B,F,x.timeStamp),!this._valid)?void 0:(this._lastPoints=l,this._active=!0,{pitchDelta:(B.y+F.y)/2*-.5})}gestureBeginsVertically(l,d,x){if(this._valid!==void 0)return this._valid;const C=l.mag()>=2,B=d.mag()>=2;if(!C&&!B)return;if(!C||!B)return this._firstMove==null&&(this._firstMove=x),x-this._firstMove<100&&void 0;const F=l.y>0==d.y>0;return xm(l)&&xm(d)&&F}}const Cg={panStep:100,bearingStep:15,pitchStep:10};class d_{constructor(){const l=Cg;this._panStep=l.panStep,this._bearingStep=l.bearingStep,this._pitchStep=l.pitchStep,this._rotationDisabled=!1}blur(){this.reset()}reset(){this._active=!1}keydown(l){if(l.altKey||l.ctrlKey||l.metaKey)return;let d=0,x=0,C=0,B=0,F=0;switch(l.keyCode){case 61:case 107:case 171:case 187:d=1;break;case 189:case 109:case 173:d=-1;break;case 37:l.shiftKey?x=-1:(l.preventDefault(),B=-1);break;case 39:l.shiftKey?x=1:(l.preventDefault(),B=1);break;case 38:l.shiftKey?C=1:(l.preventDefault(),F=-1);break;case 40:l.shiftKey?C=-1:(l.preventDefault(),F=1);break;default:return}return this._rotationDisabled&&(x=0,C=0),{cameraAnimation:z=>{const K=z.getZoom();z.easeTo({duration:300,easeId:"keyboardHandler",easing:I0,zoom:d?Math.round(K)+d*(l.shiftKey?2:1):K,bearing:z.getBearing()+x*this._bearingStep,pitch:z.getPitch()+C*this._pitchStep,offset:[-B*this._panStep,-F*this._panStep],center:z.getCenter()},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}disableRotation(){this._rotationDisabled=!0}enableRotation(){this._rotationDisabled=!1}}function I0(v){return v*(2-v)}const Sg=4.000244140625,Bg=1/450;class _m{constructor(l,d){this._map=l,this._el=l.getCanvasContainer(),this._handler=d,this._delta=0,this._lastDelta=0,this._defaultZoomRate=.01,this._wheelZoomRate=Bg,i.aP(["_onTimeout","_addScrollZoomBlocker","_showBlockerAlert"],this)}setZoomRate(l){this._defaultZoomRate=l}setWheelZoomRate(l){this._wheelZoomRate=l}isEnabled(){return!!this._enabled}isActive(){return this._active||this._finishTimeout!==void 0}isZooming(){return!!this._zooming}enable(l){this.isEnabled()||(this._enabled=!0,this._aroundCenter=!!l&&l.around==="center",this._map._cooperativeGestures&&this._addScrollZoomBlocker())}disable(){this.isEnabled()&&(this._enabled=!1,this._map._cooperativeGestures&&(clearTimeout(this._alertTimer),this._alertContainer.remove()))}wheel(l){if(!this.isEnabled())return;if(this._map._cooperativeGestures){if(!(l.ctrlKey||l.metaKey||this.isZooming()||i.dz()))return void this._showBlockerAlert();this._alertContainer.style.visibility!=="hidden"&&(this._alertContainer.style.visibility="hidden",clearTimeout(this._alertTimer))}let d=l.deltaMode===WheelEvent.DOM_DELTA_LINE?40*l.deltaY:l.deltaY;const x=i.q.now(),C=x-(this._lastWheelEventTime||0);this._lastWheelEventTime=x,d!==0&&d%Sg==0?this._type="wheel":d!==0&&Math.abs(d)<4?this._type="trackpad":C>400?(this._type=null,this._lastValue=d,this._timeout=window.setTimeout(this._onTimeout,40,l)):this._type||(this._type=Math.abs(C*d)<200?"trackpad":"wheel",this._timeout&&(clearTimeout(this._timeout),this._timeout=null,d+=this._lastValue)),l.shiftKey&&d&&(d/=4),this._type&&(this._lastWheelEvent=l,this._delta-=d,this._active||this._start(l)),l.preventDefault()}_onTimeout(l){this._type="wheel",this._delta-=this._lastValue,this._active||this._start(l)}_start(l){if(!this._delta)return;this._frameId&&(this._frameId=null),this._active=!0,this.isZooming()||(this._zooming=!0),this._finishTimeout&&(clearTimeout(this._finishTimeout),delete this._finishTimeout);const d=pe(this._el,l);this._aroundPoint=this._aroundCenter?this._map.transform.centerPoint:d,this._aroundCoord=this._map.transform.pointCoordinate3D(this._aroundPoint),this._targetZoom=void 0,this._frameId||(this._frameId=!0,this._handler._triggerRenderFrame())}renderFrame(){if(!this._frameId||(this._frameId=null,!this.isActive()))return;const l=this._map.transform;this._type==="wheel"&&l.projection.wrap&&(l._center.lng>=180||l._center.lng<=-180)&&(this._prevEase=null,this._easing=null,this._lastWheelEvent=null,this._lastWheelEventTime=0);const d=()=>l._terrainEnabled()&&this._aroundCoord?l.computeZoomRelativeTo(this._aroundCoord):l.zoom;if(this._delta!==0){const X=this._type==="wheel"&&Math.abs(this._delta)>Sg?this._wheelZoomRate:this._defaultZoomRate;let J=2/(1+Math.exp(-Math.abs(this._delta*X)));this._delta<0&&J!==0&&(J=1/J);const oe=d(),se=Math.pow(2,oe),ue=typeof this._targetZoom=="number"?l.zoomScale(this._targetZoom):se;this._targetZoom=Math.min(l.maxZoom,Math.max(l.minZoom,l.scaleZoom(ue*J))),this._type==="wheel"&&(this._startZoom=oe,this._easing=this._smoothOutEasing(200)),this._lastDelta=this._delta,this._delta=0}const x=typeof this._targetZoom=="number"?this._targetZoom:d(),C=this._startZoom,B=this._easing;let F,z=!1;if(this._type==="wheel"&&C&&B){const X=Math.min((i.q.now()-this._lastWheelEventTime)/200,1),J=B(X);F=i.af(C,x,J),X<1?this._frameId||(this._frameId=!0):z=!0}else F=x,z=!0;this._active=!0,z&&(this._active=!1,this._finishTimeout=window.setTimeout(()=>{this._zooming=!1,this._handler._triggerRenderFrame(),delete this._targetZoom,delete this._finishTimeout},200));let K=F-d();return K*this._lastDelta<0&&(K=0),{noInertia:!0,needsRenderFrame:!z,zoomDelta:K,around:this._aroundPoint,aroundCoord:this._aroundCoord,originalEvent:this._lastWheelEvent}}_smoothOutEasing(l){let d=i.dA;if(this._prevEase){const x=this._prevEase,C=(i.q.now()-x.start)/x.duration,B=x.easing(C+.01)-x.easing(C),F=.27/Math.sqrt(B*B+1e-4)*.01,z=Math.sqrt(.0729-F*F);d=i.dy(F,z,.25,1)}return this._prevEase={start:i.q.now(),duration:l,easing:d},d}blur(){this.reset()}reset(){this._active=!1}_addScrollZoomBlocker(){this._map&&!this._alertContainer&&(this._alertContainer=N("div","mapboxgl-scroll-zoom-blocker",this._map._container),this._alertContainer.textContent=/(Mac|iPad)/i.test(navigator.userAgent)?this._map._getUIString("ScrollZoomBlocker.CmdMessage"):this._map._getUIString("ScrollZoomBlocker.CtrlMessage"),this._alertContainer.style.fontSize=`${Math.max(10,Math.min(24,Math.floor(.05*this._el.clientWidth)))}px`)}_showBlockerAlert(){this._alertContainer.style.visibility="visible",this._alertContainer.classList.add("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.setAttribute("role","alert"),clearTimeout(this._alertTimer),this._alertTimer=window.setTimeout(()=>{this._alertContainer.classList.remove("mapboxgl-scroll-zoom-blocker-show"),this._alertContainer.removeAttribute("role")},200)}}class fA{constructor(l,d){this._clickZoom=l,this._tapZoom=d}enable(){this._clickZoom.enable(),this._tapZoom.enable()}disable(){this._clickZoom.disable(),this._tapZoom.disable()}isEnabled(){return this._clickZoom.isEnabled()&&this._tapZoom.isEnabled()}isActive(){return this._clickZoom.isActive()||this._tapZoom.isActive()}}class ac{constructor(){this.reset()}reset(){this._active=!1}blur(){this.reset()}dblclick(l,d){return l.preventDefault(),{cameraAnimation:x=>{x.easeTo({duration:300,zoom:x.getZoom()+(l.shiftKey?-1:1),around:x.unproject(d)},{originalEvent:l})}}}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class ud{constructor(){this._tap=new po({numTouches:1,numTaps:1}),this.reset()}reset(){this._active=!1,this._swipePoint=void 0,this._swipeTouch=0,this._tapTime=0,this._tap.reset()}touchstart(l,d,x){this._swipePoint||(this._tapTime&&l.timeStamp-this._tapTime>500&&this.reset(),this._tapTime?x.length>0&&(this._swipePoint=d[0],this._swipeTouch=x[0].identifier):this._tap.touchstart(l,d,x))}touchmove(l,d,x){if(this._tapTime){if(this._swipePoint){if(x[0].identifier!==this._swipeTouch)return;const C=d[0],B=C.y-this._swipePoint.y;return this._swipePoint=C,l.preventDefault(),this._active=!0,{zoomDelta:B/128}}}else this._tap.touchmove(l,d,x)}touchend(l,d,x){this._tapTime?this._swipePoint&&x.length===0&&this.reset():this._tap.touchend(l,d,x)&&(this._tapTime=l.timeStamp)}touchcancel(){this.reset()}enable(){this._enabled=!0}disable(){this._enabled=!1,this.reset()}isEnabled(){return this._enabled}isActive(){return this._active}}class jf{constructor(l,d,x){this._el=l,this._mousePan=d,this._touchPan=x}enable(l){this._inertiaOptions=l||{},this._mousePan.enable(),this._touchPan.enable(),this._el.classList.add("mapboxgl-touch-drag-pan")}disable(){this._mousePan.disable(),this._touchPan.disable(),this._el.classList.remove("mapboxgl-touch-drag-pan")}isEnabled(){return this._mousePan.isEnabled()&&this._touchPan.isEnabled()}isActive(){return this._mousePan.isActive()||this._touchPan.isActive()}}class pA{constructor(l,d,x){this._pitchWithRotate=l.pitchWithRotate,this._mouseRotate=d,this._mousePitch=x}enable(){this._mouseRotate.enable(),this._pitchWithRotate&&this._mousePitch.enable()}disable(){this._mouseRotate.disable(),this._mousePitch.disable()}isEnabled(){return this._mouseRotate.isEnabled()&&(!this._pitchWithRotate||this._mousePitch.isEnabled())}isActive(){return this._mouseRotate.isActive()||this._mousePitch.isActive()}}class Ff{constructor(l,d,x,C){this._el=l,this._touchZoom=d,this._touchRotate=x,this._tapDragZoom=C,this._rotationDisabled=!1,this._enabled=!0}enable(l){this._touchZoom.enable(l),this._rotationDisabled||this._touchRotate.enable(l),this._tapDragZoom.enable(),this._el.classList.add("mapboxgl-touch-zoom-rotate")}disable(){this._touchZoom.disable(),this._touchRotate.disable(),this._tapDragZoom.disable(),this._el.classList.remove("mapboxgl-touch-zoom-rotate")}isEnabled(){return this._touchZoom.isEnabled()&&(this._rotationDisabled||this._touchRotate.isEnabled())&&this._tapDragZoom.isEnabled()}isActive(){return this._touchZoom.isActive()||this._touchRotate.isActive()||this._tapDragZoom.isActive()}disableRotation(){this._rotationDisabled=!0,this._touchRotate.disable()}enableRotation(){this._rotationDisabled=!1,this._touchZoom.isEnabled()&&this._touchRotate.enable()}}const j0=v=>v.zoom||v.drag||v.pitch||v.rotate;class Ab extends i.z{}class Pf{constructor(){this.constants=[1,1,.01],this.radius=0}setup(l,d){const x=i.ab.vec3.sub([],d,l);this.radius=i.ab.vec3.length(x[2]<0?i.ab.vec3.div([],x,this.constants):[x[0],x[1],0])}projectRay(l){i.ab.vec3.div(l,l,this.constants),i.ab.vec3.normalize(l,l),i.ab.vec3.mul(l,l,this.constants);const d=i.ab.vec3.scale([],l,this.radius);if(d[2]>0){const x=i.ab.vec3.scale([],[0,0,1],i.ab.vec3.dot(d,[0,0,1])),C=i.ab.vec3.scale([],i.ab.vec3.normalize([],[d[0],d[1],0]),this.radius),B=i.ab.vec3.add([],d,i.ab.vec3.scale([],i.ab.vec3.sub([],i.ab.vec3.add([],C,x),d),2));d[0]=B[0],d[1]=B[1]}return d}}function wm(v){return v.panDelta&&v.panDelta.mag()||v.zoomDelta||v.bearingDelta||v.pitchDelta}class F0{constructor(l,d){this._map=l,this._el=this._map.getCanvasContainer(),this._handlers=[],this._handlersById={},this._changes=[],this._inertia=new c_(l),this._bearingSnap=d.bearingSnap,this._previousActiveHandlers={},this._trackingEllipsoid=new Pf,this._dragOrigin=null,this._eventsInProgress={},this._addDefaultHandlers(d),i.aP(["handleEvent","handleWindowEvent"],this);const x=this._el;this._listeners=[[x,"touchstart",{passive:!0}],[x,"touchmove",{passive:!1}],[x,"touchend",void 0],[x,"touchcancel",void 0],[x,"mousedown",void 0],[x,"mousemove",void 0],[x,"mouseup",void 0],[document,"mousemove",{capture:!0}],[document,"mouseup",void 0],[x,"mouseover",void 0],[x,"mouseout",void 0],[x,"dblclick",void 0],[x,"click",void 0],[x,"keydown",{capture:!1}],[x,"keyup",void 0],[x,"wheel",{passive:!1}],[x,"contextmenu",void 0],[window,"blur",void 0]];for(const[C,B,F]of this._listeners){const z=C===document?this.handleWindowEvent:this.handleEvent;C.addEventListener(B,z,F)}}destroy(){for(const[l,d,x]of this._listeners){const C=l===document?this.handleWindowEvent:this.handleEvent;l.removeEventListener(d,C,x)}}_addDefaultHandlers(l){const d=this._map,x=d.getCanvasContainer();this._add("mapEvent",new hv(d,l));const C=d.boxZoom=new rh(d,l);this._add("boxZoom",C);const B=new dA,F=new ac;d.doubleClickZoom=new fA(F,B),this._add("tapZoom",B),this._add("clickZoom",F);const z=new ud;this._add("tapDragZoom",z);const K=d.touchPitch=new T0(d);this._add("touchPitch",K);const X=new E0(l),J=new If(l);d.dragRotate=new pA(l,X,J),this._add("mouseRotate",X,["mousePitch"]),this._add("mousePitch",J,["mouseRotate"]);const oe=new wg(l),se=new _p(d,l);d.dragPan=new jf(x,oe,se),this._add("mousePan",oe),this._add("touchPan",se,["touchZoom","touchRotate"]);const ue=new hA,Ie=new Fu;d.touchZoomRotate=new Ff(x,Ie,ue,z),this._add("touchRotate",ue,["touchPan","touchZoom"]),this._add("touchZoom",Ie,["touchPan","touchRotate"]),this._add("blockableMapEvent",new Kc(d));const Se=d.scrollZoom=new _m(d,this);this._add("scrollZoom",Se,["mousePan"]);const Pe=d.keyboard=new d_;this._add("keyboard",Pe);for(const Le of["boxZoom","doubleClickZoom","tapDragZoom","touchPitch","dragRotate","dragPan","touchZoomRotate","scrollZoom","keyboard"])l.interactive&&l[Le]&&d[Le].enable(l[Le])}_add(l,d,x){this._handlers.push({handlerName:l,handler:d,allowed:x}),this._handlersById[l]=d}stop(l){if(!this._updatingCamera){for(const{handler:d}of this._handlers)d.reset();this._inertia.clear(),this._fireEvents({},{},l),this._changes=[],this._originalZoom=void 0}}isActive(){for(const{handler:l}of this._handlers)if(l.isActive())return!0;return!1}isZooming(){return!!this._eventsInProgress.zoom||this._map.scrollZoom.isZooming()}isRotating(){return!!this._eventsInProgress.rotate}isMoving(){return!!j0(this._eventsInProgress)||this.isZooming()}_isDragging(){return!!this._eventsInProgress.drag}_blockedByActive(l,d,x){for(const C in l)if(C!==x&&(!d||d.indexOf(C)<0))return!0;return!1}handleWindowEvent(l){this.handleEvent(l,`${l.type}Window`)}_getMapTouches(l){const d=[];for(const x of l)this._el.contains(x.target)&&d.push(x);return d}handleEvent(l,d){this._updatingCamera=!0;const x=l.type==="renderFrame",C=x?void 0:l,B={needsRenderFrame:!1},F={},z={},K=l.touches?this._getMapTouches(l.touches):void 0,X=K?_e(this._el,K):x?void 0:pe(this._el,l);for(const{handlerName:se,handler:ue,allowed:Ie}of this._handlers){if(!ue.isEnabled())continue;let Se;this._blockedByActive(z,Ie,se)?ue.reset():ue[d||l.type]&&(Se=ue[d||l.type](l,X,K),this.mergeHandlerResult(B,F,Se,se,C),Se&&Se.needsRenderFrame&&this._triggerRenderFrame()),(Se||ue.isActive())&&(z[se]=ue)}const J={};for(const se in this._previousActiveHandlers)z[se]||(J[se]=C);this._previousActiveHandlers=z,(Object.keys(J).length||wm(B))&&(this._changes.push([B,F,J]),this._triggerRenderFrame()),(Object.keys(z).length||wm(B))&&this._map._stop(!0),this._updatingCamera=!1;const{cameraAnimation:oe}=B;oe&&(this._inertia.clear(),this._fireEvents({},{},!0),this._changes=[],oe(this._map))}mergeHandlerResult(l,d,x,C,B){if(!x)return;i.l(l,x);const F={handlerName:C,originalEvent:x.originalEvent||B};x.zoomDelta!==void 0&&(d.zoom=F),x.panDelta!==void 0&&(d.drag=F),x.pitchDelta!==void 0&&(d.pitch=F),x.bearingDelta!==void 0&&(d.rotate=F)}_applyChanges(){const l={},d={},x={};for(const[C,B,F]of this._changes)C.panDelta&&(l.panDelta=(l.panDelta||new i.P(0,0))._add(C.panDelta)),C.zoomDelta&&(l.zoomDelta=(l.zoomDelta||0)+C.zoomDelta),C.bearingDelta&&(l.bearingDelta=(l.bearingDelta||0)+C.bearingDelta),C.pitchDelta&&(l.pitchDelta=(l.pitchDelta||0)+C.pitchDelta),C.around!==void 0&&(l.around=C.around),C.aroundCoord!==void 0&&(l.aroundCoord=C.aroundCoord),C.pinchAround!==void 0&&(l.pinchAround=C.pinchAround),C.noInertia&&(l.noInertia=C.noInertia),i.l(d,B),i.l(x,F);this._updateMapTransform(l,d,x),this._changes=[]}_updateMapTransform(l,d,x){const C=this._map,B=C.transform,F=$e=>[$e.x,$e.y,$e.z];if(($e=>{const rt=this._eventsInProgress.drag;return rt&&!this._handlersById[rt.handlerName].isActive()})()&&!wm(l)){const $e=B.zoom;B.cameraElevationReference="sea",this._originalZoom!=null&&B._orthographicProjectionAtLowPitch&&B.projection.name!=="globe"&&B.pitch===0?(B.cameraElevationReference="ground",B.zoom=this._originalZoom):(B.recenterOnTerrain(),B.cameraElevationReference="ground"),$e!==B.zoom&&this._map._update(!0)}if(B._isCameraConstrained&&C._stop(!0),!wm(l))return void this._fireEvents(d,x,!0);let{panDelta:z,zoomDelta:K,bearingDelta:X,pitchDelta:J,around:oe,aroundCoord:se,pinchAround:ue}=l;B._isCameraConstrained&&(K>0&&(K=0),B._isCameraConstrained=!1),ue!==void 0&&(oe=ue),(K||($e=>d[$e]&&!this._eventsInProgress[$e])("drag"))&&oe&&(this._dragOrigin=F(B.pointCoordinate3D(oe)),this._originalZoom=B.zoom,this._trackingEllipsoid.setup(B._camera.position,this._dragOrigin)),B.cameraElevationReference="sea",C._stop(!0),oe=oe||C.transform.centerPoint,X&&(B.bearing+=X),J&&(B.pitch+=J),B._updateCameraState();const Ie=[0,0,0];if(z)if(B.projection.name==="mercator"){const $e=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(oe).dir),rt=this._trackingEllipsoid.projectRay(B.screenPointToMercatorRay(oe.sub(z)).dir);Ie[0]=rt[0]-$e[0],Ie[1]=rt[1]-$e[1]}else{const $e=B.pointCoordinate(oe);if(B.projection.name==="globe"){z=z.rotate(-B.angle);const rt=B._pixelsPerMercatorPixel/B.worldSize;Ie[0]=-z.x*i.dB(i.aS($e.y))*rt,Ie[1]=-z.y*i.dB(B.center.lat)*rt}else{const rt=B.pointCoordinate(oe.sub(z));$e&&rt&&(Ie[0]=rt.x-$e.x,Ie[1]=rt.y-$e.y)}}const Se=B.zoom,Pe=[0,0,0];if(K){const $e=F(se||B.pointCoordinate3D(oe)),rt={dir:i.ab.vec3.normalize([],i.ab.vec3.sub([],$e,B._camera.position))};if(rt.dir[2]<0){const et=B.zoomDeltaToMovement($e,K);i.ab.vec3.scale(Pe,rt.dir,et)}}const Le=i.ab.vec3.add(Ie,Ie,Pe);B._translateCameraConstrained(Le),K&&Math.abs(B.zoom-Se)>1e-4&&B.recenterOnTerrain(),B.cameraElevationReference="ground",this._map._update(),l.noInertia||this._inertia.record(l),this._fireEvents(d,x,!0)}_fireEvents(l,d,x){const C=j0(this._eventsInProgress),B=j0(l),F={};for(const J in l){const{originalEvent:oe}=l[J];this._eventsInProgress[J]||(F[`${J}start`]=oe),this._eventsInProgress[J]=l[J]}!C&&B&&this._fireEvent("movestart",B.originalEvent);for(const J in F)this._fireEvent(J,F[J]);B&&this._fireEvent("move",B.originalEvent);for(const J in l){const{originalEvent:oe}=l[J];this._fireEvent(J,oe)}const z={};let K;for(const J in this._eventsInProgress){const{handlerName:oe,originalEvent:se}=this._eventsInProgress[J];this._handlersById[oe].isActive()||(delete this._eventsInProgress[J],K=d[oe]||se,z[`${J}end`]=K)}for(const J in z)this._fireEvent(J,z[J]);const X=j0(this._eventsInProgress);if(x&&(C||B)&&!X){this._updatingCamera=!0;const J=this._inertia._onMoveEnd(this._map.dragPan._inertiaOptions),oe=se=>se!==0&&-this._bearingSnap<se&&se<this._bearingSnap;J?(oe(J.bearing||this._map.getBearing())&&(J.bearing=0),this._map.easeTo(J,{originalEvent:K})):(this._map.fire(new i.z("moveend",{originalEvent:K})),oe(this._map.getBearing())&&this._map.resetNorth()),this._updatingCamera=!1}}_fireEvent(l,d){this._map.fire(new i.z(l,d?{originalEvent:d}:{}))}_requestFrame(){return this._map.triggerRepaint(),this._map._renderTaskQueue.add(l=>{this._frameId=void 0,this.handleEvent(new Ab("renderFrame",{timeStamp:l})),this._applyChanges()})}_triggerRenderFrame(){this._frameId===void 0&&(this._frameId=this._requestFrame())}}const Cl="map.setFreeCameraOptions(...) and map.getFreeCameraOptions() are not yet supported for non-mercator projections.";class bm extends i.E{constructor(l,d){super(),this._moving=!1,this._zooming=!1,this.transform=l,this._bearingSnap=d.bearingSnap,this._respectPrefersReducedMotion=d.respectPrefersReducedMotion!==!1,i.aP(["_renderFrameCallback"],this)}getCenter(){return new i.bO(this.transform.center.lng,this.transform.center.lat)}setCenter(l,d){return this.jumpTo({center:l},d)}panBy(l,d,x){return l=i.P.convert(l).mult(-1),this.panTo(this.transform.center,i.l({offset:l},d),x)}panTo(l,d,x){return this.easeTo(i.l({center:l},d),x)}getZoom(){return this.transform.zoom}setZoom(l,d){return this.jumpTo({zoom:l},d),this}zoomTo(l,d,x){return this.easeTo(i.l({zoom:l},d),x)}zoomIn(l,d){return this.zoomTo(this.getZoom()+1,l,d),this}zoomOut(l,d){return this.zoomTo(this.getZoom()-1,l,d),this}getBearing(){return this.transform.bearing}setBearing(l,d){return this.jumpTo({bearing:l},d),this}getPadding(){return this.transform.padding}setPadding(l,d){return this.jumpTo({padding:l},d),this}rotateTo(l,d,x){return this.easeTo(i.l({bearing:l},d),x)}resetNorth(l,d){return this.rotateTo(0,i.l({duration:1e3},l),d),this}resetNorthPitch(l,d){return this.easeTo(i.l({bearing:0,pitch:0,duration:1e3},l),d),this}snapToNorth(l,d){return Math.abs(this.getBearing())<this._bearingSnap?this.resetNorth(l,d):this}getPitch(){return this.transform.pitch}setPitch(l,d){return this.jumpTo({pitch:l},d),this}cameraForBounds(l,d){l=i.az.convert(l);const x=d&&d.bearing||0,C=d&&d.pitch||0,B=l.getNorthWest(),F=l.getSouthEast();return this._cameraForBounds(this.transform,B,F,x,C,d)}_extendPadding(l){const d={top:0,right:0,bottom:0,left:0};return l==null?i.l({},d,this.transform.padding):typeof l=="number"?{top:l,bottom:l,right:l,left:l}:i.l({},d,l)}_extendCameraOptions(l){return(l=i.l({offset:[0,0],maxZoom:this.transform.maxZoom},l)).padding=this._extendPadding(l.padding),l}_minimumAABBFrustumDistance(l,d){const x=d.max[0]-d.min[0],C=d.max[1]-d.min[1];return x/C>l.aspect?x/(2*Math.tan(.5*l.fovX)*l.aspect):C/(2*Math.tan(.5*l.fovY)*l.aspect)}_cameraForBoundsOnGlobe(l,d,x,C,B,F){const z=l.clone(),K=this._extendCameraOptions(F);z.bearing=C,z.pitch=B;const X=i.bO.convert(d),J=i.bO.convert(x),oe=.5*(X.lat+J.lat),se=.5*(X.lng+J.lng),ue=i.dC(oe,se),Ie=i.ab.vec3.normalize([],ue),Se=i.ab.vec3.normalize([],i.ab.vec3.cross([],Ie,[0,1,0])),Pe=i.ab.vec3.cross([],Se,Ie),Le=[Se[0],Se[1],Se[2],0,Pe[0],Pe[1],Pe[2],0,Ie[0],Ie[1],Ie[2],0,0,0,0,1],$e=[ue,i.dC(X.lat,X.lng),i.dC(J.lat,X.lng),i.dC(J.lat,J.lng),i.dC(X.lat,J.lng),i.dC(oe,X.lng),i.dC(oe,J.lng),i.dC(X.lat,se),i.dC(J.lat,se)];let rt=i.cd.fromPoints($e.map(dn=>[i.ab.vec3.dot(Se,dn),i.ab.vec3.dot(Pe,dn),i.ab.vec3.dot(Ie,dn)]));const et=i.ab.vec3.transformMat4([],rt.center,Le);i.ab.vec3.squaredLength(et)===0&&i.ab.vec3.set(et,0,0,1),i.ab.vec3.normalize(et,et),i.ab.vec3.scale(et,et,i.ax),z.center=i.dD(et);const ft=z.getWorldToCameraMatrix(),dt=i.ab.mat4.invert(new Float64Array(16),ft);rt=i.cd.applyTransform(rt,i.ab.mat4.multiply([],ft,Le));const ht=this._extendAABB(rt,z,K,C);if(!ht)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");rt=ht,i.ab.vec3.transformMat4(et,et,ft);const ut=.5*(rt.max[2]-rt.min[2]),xt=this._minimumAABBFrustumDistance(z,rt),Bt=i.ab.vec3.scale([],[0,0,1],ut),an=i.ab.vec3.add(Bt,et,Bt),tn=xt+(z.pitch===0?0:i.ab.vec3.distance(et,an)),Ct=z.globeCenterInViewSpace,Rt=i.ab.vec3.sub([],et,[Ct[0],Ct[1],Ct[2]]);i.ab.vec3.normalize(Rt,Rt),i.ab.vec3.scale(Rt,Rt,tn);const wn=i.ab.vec3.add([],et,Rt);i.ab.vec3.transformMat4(wn,wn,dt);const kn=i.ds/i.ax,Qn=i.ab.vec3.length(wn),Jt=i.bH(Math.max(Qn*kn-i.ds,Number.EPSILON),0),In=Math.min(z.zoomFromMercatorZAdjusted(Jt),K.maxZoom);return In>.5*(i.c6+i.bY)?(z.setProjection({name:"mercator"}),z.zoom=In,this._cameraForBounds(z,d,x,C,B,F)):{center:z.center,zoom:In,bearing:C,pitch:B}}_extendAABB(l,d,x,C){const B=.5*((x.padding.left||0)+(x.padding.right||0)),F=.5*((x.padding.top||0)+(x.padding.bottom||0)),z=F,K=B,X=B,J=F,oe=d.width-(K+X),se=d.height-(z+J),ue=i.ab.vec3.sub([],l.max,l.min),Ie=Math.min(oe/ue[0],se/ue[1]),Se=Math.min(d.scaleZoom(d.scale*Ie),x.maxZoom);if(isNaN(Se))return null;const Pe=d.scale/d.zoomScale(Se),Le=new i.cd([l.min[0]-K*Pe,l.min[1]-J*Pe,l.min[2]],[l.max[0]+X*Pe,l.max[1]+z*Pe,l.max[2]]),$e=(typeof x.offset.x=="number"&&typeof x.offset.y=="number"?new i.P(x.offset.x,x.offset.y):i.P.convert(x.offset)).rotate(-i.ai(C));return Le.center[0]-=$e.x*Pe,Le.center[1]+=$e.y*Pe,Le}queryTerrainElevation(l,d){const x=this.transform.elevation;return x?(d=i.l({},{exaggerated:!0},d),x.getAtPoint(i.aa.fromLngLat(l),null,d.exaggerated)):null}_cameraForBounds(l,d,x,C,B,F){if(l.projection.name==="globe")return this._cameraForBoundsOnGlobe(l,d,x,C,B,F);const z=l.clone(),K=this._extendCameraOptions(F);z.bearing=C,z.pitch=B;const X=i.bO.convert(d),J=i.bO.convert(x),oe=new i.bO(X.lng,J.lat),se=new i.bO(J.lng,X.lat),ue=z.project(X),Ie=z.project(J),Se=this.queryTerrainElevation(X),Pe=this.queryTerrainElevation(J),Le=this.queryTerrainElevation(oe),$e=this.queryTerrainElevation(se),rt=[[ue.x,ue.y,Math.min(Se||0,Pe||0,Le||0,$e||0)],[Ie.x,Ie.y,Math.max(Se||0,Pe||0,Le||0,$e||0)]];let et=i.cd.fromPoints(rt);const ft=z.getWorldToCameraMatrix(),dt=i.ab.mat4.invert(new Float64Array(16),ft);et=i.cd.applyTransform(et,ft);const ht=this._extendAABB(et,z,K,C);if(!ht)return void i.w("Map cannot fit within canvas with the given bounds, padding, and/or offset.");et=ht;const ut=.5*i.ab.vec3.sub([],et.max,et.min)[2],xt=this._minimumAABBFrustumDistance(z,et),Bt=[0,0,1,0];i.ab.vec4.transformMat4(Bt,Bt,ft),i.ab.vec4.normalize(Bt,Bt);const an=i.ab.vec3.scale([],Bt,xt+ut),tn=i.ab.vec3.add([],et.center,an);i.ab.vec3.transformMat4(et.center,et.center,dt),i.ab.vec3.transformMat4(tn,tn,dt);const Ct=z.unproject(new i.P(et.center[0],et.center[1])),Rt=i.dE(z.projection,Ct),wn=Math.pow(2,Rt),kn=Math.min(z._zoomFromMercatorZ(tn[2]*z.pixelsPerMeter*wn/z.worldSize),K.maxZoom);return z.mercatorFromTransition&&kn<.5*(i.c6+i.bY)?(z.setProjection({name:"globe"}),z.zoom=kn,this._cameraForBounds(z,d,x,C,B,F)):{center:Ct,zoom:kn,bearing:C,pitch:B}}fitBounds(l,d,x){const C=this.cameraForBounds(l,d);return this._fitInternal(C,d,x)}fitScreenCoordinates(l,d,x,C,B){const F=i.P.convert(l),z=i.P.convert(d),K=new i.P(Math.min(F.x,z.x),Math.min(F.y,z.y)),X=new i.P(Math.max(F.x,z.x),Math.max(F.y,z.y));if(this.transform.projection.name==="mercator"&&this.transform.anyCornerOffEdge(F,z))return this;const J=this.transform.pointLocation3D(K),oe=this.transform.pointLocation3D(X),se=this.transform.pointLocation3D(new i.P(K.x,X.y)),ue=this.transform.pointLocation3D(new i.P(X.x,K.y)),Ie=[Math.min(J.lng,oe.lng,se.lng,ue.lng),Math.min(J.lat,oe.lat,se.lat,ue.lat)],Se=[Math.max(J.lng,oe.lng,se.lng,ue.lng),Math.max(J.lat,oe.lat,se.lat,ue.lat)],Pe=C&&C.pitch?C.pitch:this.getPitch(),Le=this._cameraForBounds(this.transform,Ie,Se,x,Pe,C);return this._fitInternal(Le,C,B)}_fitInternal(l,d,x){return l?(d=i.l(l,d)).linear?this.easeTo(d,x):this.flyTo(d,x):this}jumpTo(l,d){this.stop();const x=l.preloadOnly?this.transform.clone():this.transform;let C=!1,B=!1,F=!1;"zoom"in l&&x.zoom!==+l.zoom&&(C=!0,x.zoom=+l.zoom),l.center!==void 0&&(x.center=i.bO.convert(l.center)),"bearing"in l&&x.bearing!==+l.bearing&&(B=!0,x.bearing=+l.bearing),"pitch"in l&&x.pitch!==+l.pitch&&(F=!0,x.pitch=+l.pitch);const z=typeof l.padding=="number"?this._extendPadding(l.padding):l.padding;if(l.padding!=null&&!x.isPaddingEqual(z))if(l.retainPadding===!1){const K=x.clone();K.padding=z,x.setLocationAtPoint(x.center,K.centerPoint)}else x.padding=z;return l.preloadOnly?(this._preloadTiles(x),this):(this.fire(new i.z("movestart",d)).fire(new i.z("move",d)),C&&this.fire(new i.z("zoomstart",d)).fire(new i.z("zoom",d)).fire(new i.z("zoomend",d)),B&&this.fire(new i.z("rotatestart",d)).fire(new i.z("rotate",d)).fire(new i.z("rotateend",d)),F&&this.fire(new i.z("pitchstart",d)).fire(new i.z("pitch",d)).fire(new i.z("pitchend",d)),this.fire(new i.z("moveend",d)))}getFreeCameraOptions(){return this.transform.projection.supportsFreeCamera||i.w(Cl),this.transform.getFreeCameraOptions()}setFreeCameraOptions(l,d){const x=this.transform;if(!x.projection.supportsFreeCamera)return i.w(Cl),this;this.stop();const C=x.zoom,B=x.pitch,F=x.bearing;x.setFreeCameraOptions(l);const z=C!==x.zoom,K=B!==x.pitch,X=F!==x.bearing;return this.fire(new i.z("movestart",d)).fire(new i.z("move",d)),z&&this.fire(new i.z("zoomstart",d)).fire(new i.z("zoom",d)).fire(new i.z("zoomend",d)),X&&this.fire(new i.z("rotatestart",d)).fire(new i.z("rotate",d)).fire(new i.z("rotateend",d)),K&&this.fire(new i.z("pitchstart",d)).fire(new i.z("pitch",d)).fire(new i.z("pitchend",d)),this.fire(new i.z("moveend",d)),this}easeTo(l,d){this._stop(!1,l.easeId),((l=i.l({offset:[0,0],duration:500,easing:i.dA},l)).animate===!1||this._prefersReducedMotion(l))&&(l.duration=0);const x=this.transform,C=this.getZoom(),B=this.getBearing(),F=this.getPitch(),z=this.getPadding(),K="zoom"in l?+l.zoom:C,X="bearing"in l?this._normalizeBearing(l.bearing,B):B,J="pitch"in l?+l.pitch:F,oe=this._extendPadding(l.padding),se=i.P.convert(l.offset);let ue,Ie,Se;if(x.projection.name==="globe"){const Bt=i.aa.fromLngLat(x.center),an=se.rotate(-x.angle);Bt.x+=an.x/x.worldSize,Bt.y+=an.y/x.worldSize;const tn=Bt.toLngLat(),Ct=i.bO.convert(l.center||tn);this._normalizeCenter(Ct),ue=x.centerPoint.add(an),Ie=new i.P(Bt.x,Bt.y).mult(x.worldSize),Se=new i.P(i.at(Ct.lng),i.aA(Ct.lat)).mult(x.worldSize).sub(Ie)}else{ue=x.centerPoint.add(se);const Bt=x.pointLocation(ue),an=i.bO.convert(l.center||Bt);this._normalizeCenter(an),Ie=x.project(Bt),Se=x.project(an).sub(Ie)}const Pe=x.zoomScale(K-C);let Le,$e;l.around&&(Le=i.bO.convert(l.around),$e=x.locationPoint(Le));const rt=this._zooming||K!==C,et=this._rotating||B!==X,ft=this._pitching||J!==F,dt=!x.isPaddingEqual(oe),ht=l.retainPadding===!1?x.clone():x,ut=Bt=>an=>{if(rt&&(Bt.zoom=i.af(C,K,an)),et&&(Bt.bearing=i.af(B,X,an)),ft&&(Bt.pitch=i.af(F,J,an)),dt&&(ht.interpolatePadding(z,oe,an),ue=ht.centerPoint.add(se)),Le)Bt.setLocationAtPoint(Le,$e);else{const tn=Bt.zoomScale(Bt.zoom-C),Ct=K>C?Math.min(2,Pe):Math.max(.5,Pe),Rt=Math.pow(Ct,1-an),wn=Bt.unproject(Ie.add(Se.mult(an*Rt)).mult(tn));Bt.setLocationAtPoint(Bt.renderWorldCopies?wn.wrap():wn,ue)}return l.preloadOnly||this._fireMoveEvents(d),Bt};if(l.preloadOnly){const Bt=this._emulate(ut,l.duration,x);return this._preloadTiles(Bt),this}const xt={moving:this._moving,zooming:this._zooming,rotating:this._rotating,pitching:this._pitching};return this._zooming=rt,this._rotating=et,this._pitching=ft,this._padding=dt,this._easeId=l.easeId,this._prepareEase(d,l.noMoveStart,xt),this._ease(ut(x),Bt=>{x.cameraElevationReference==="sea"&&x.recenterOnTerrain(),this._afterEase(d,Bt)},l),this}_prepareEase(l,d,x={}){this._moving=!0,this.transform.cameraElevationReference="sea",this.transform._orthographicProjectionAtLowPitch&&this.transform.pitch===0&&this.transform.projection.name!=="globe"&&(this.transform.cameraElevationReference="ground"),d||x.moving||this.fire(new i.z("movestart",l)),this._zooming&&!x.zooming&&this.fire(new i.z("zoomstart",l)),this._rotating&&!x.rotating&&this.fire(new i.z("rotatestart",l)),this._pitching&&!x.pitching&&this.fire(new i.z("pitchstart",l))}_fireMoveEvents(l){this.fire(new i.z("move",l)),this._zooming&&this.fire(new i.z("zoom",l)),this._rotating&&this.fire(new i.z("rotate",l)),this._pitching&&this.fire(new i.z("pitch",l))}_afterEase(l,d){if(this._easeId&&d&&this._easeId===d)return;this._easeId=void 0,this.transform.cameraElevationReference="ground";const x=this._zooming,C=this._rotating,B=this._pitching;this._moving=!1,this._zooming=!1,this._rotating=!1,this._pitching=!1,this._padding=!1,x&&this.fire(new i.z("zoomend",l)),C&&this.fire(new i.z("rotateend",l)),B&&this.fire(new i.z("pitchend",l)),this.fire(new i.z("moveend",l))}flyTo(l,d){if(this._prefersReducedMotion(l)){const dn=i.ay(l,["center","zoom","bearing","pitch","around","padding","retainPadding"]);return this.jumpTo(dn,d)}this.stop(),l=i.l({offset:[0,0],speed:1.2,curve:1.42,easing:i.dA},l);const x=this.transform,C=this.getZoom(),B=this.getBearing(),F=this.getPitch(),z=this.getPadding(),K="zoom"in l?i.aw(+l.zoom,x.minZoom,x.maxZoom):C,X="bearing"in l?this._normalizeBearing(l.bearing,B):B,J="pitch"in l?+l.pitch:F,oe=this._extendPadding(l.padding),se=x.zoomScale(K-C),ue=i.P.convert(l.offset);let Ie=x.centerPoint.add(ue);const Se=x.pointLocation(Ie),Pe=i.bO.convert(l.center||Se);this._normalizeCenter(Pe);const Le=x.project(Se),$e=x.project(Pe).sub(Le);let rt=l.curve;const et=Math.max(x.width,x.height),ft=et/se,dt=$e.mag();if("minZoom"in l){const dn=i.aw(Math.min(l.minZoom,C,K),x.minZoom,x.maxZoom),Dn=et/x.zoomScale(dn-C);rt=Math.sqrt(Dn/dt*2)}const ht=rt*rt;function ut(dn){const Dn=(ft*ft-et*et+(dn?-1:1)*ht*ht*dt*dt)/(2*(dn?ft:et)*ht*dt);return Math.log(Math.sqrt(Dn*Dn+1)-Dn)}function xt(dn){return(Math.exp(dn)-Math.exp(-dn))/2}function Bt(dn){return(Math.exp(dn)+Math.exp(-dn))/2}const an=ut(0);let tn=function(dn){return Bt(an)/Bt(an+rt*dn)},Ct=function(dn){return et*((Bt(an)*(xt(Dn=an+rt*dn)/Bt(Dn))-xt(an))/ht)/dt;var Dn},Rt=(ut(1)-an)/rt;if(Math.abs(dt)<1e-6||!isFinite(Rt)){if(Math.abs(et-ft)<1e-6)return this.easeTo(l,d);const dn=ft<et?-1:1;Rt=Math.abs(Math.log(ft/et))/rt,Ct=function(){return 0},tn=function(Dn){return Math.exp(dn*rt*Dn)}}l.duration="duration"in l?+l.duration:1e3*Rt/("screenSpeed"in l?+l.screenSpeed/rt:+l.speed),l.maxDuration&&l.duration>l.maxDuration&&(l.duration=0);const wn=B!==X,kn=J!==F,Qn=!x.isPaddingEqual(oe),Jt=l.retainPadding===!1?x.clone():x,In=dn=>Dn=>{const Fn=Dn*Rt,bn=1/tn(Fn);dn.zoom=Dn===1?K:C+dn.scaleZoom(bn),wn&&(dn.bearing=i.af(B,X,Dn)),kn&&(dn.pitch=i.af(F,J,Dn)),Qn&&(Jt.interpolatePadding(z,oe,Dn),Ie=Jt.centerPoint.add(ue));const tr=Dn===1?Pe:dn.unproject(Le.add($e.mult(Ct(Fn))).mult(bn));return dn.setLocationAtPoint(dn.renderWorldCopies?tr.wrap():tr,Ie),dn._updateCameraOnTerrain(),l.preloadOnly||this._fireMoveEvents(d),dn};if(l.preloadOnly){const dn=this._emulate(In,l.duration,x);return this._preloadTiles(dn),this}return this._zooming=!0,this._rotating=wn,this._pitching=kn,this._padding=Qn,this._prepareEase(d,!1),this._ease(In(x),()=>this._afterEase(d),l),this}isEasing(){return!!this._easeFrameId}stop(){return this._stop()}_requestRenderFrame(l){}_cancelRenderFrame(l){}_stop(l,d){if(this._easeFrameId&&(this._cancelRenderFrame(this._easeFrameId),this._easeFrameId=void 0,this._onEaseFrame=void 0),this._onEaseEnd){const x=this._onEaseEnd;this._onEaseEnd=void 0,x.call(this,d)}if(!l){const x=this.handlers;x&&x.stop(!1)}return this}_ease(l,d,x){x.animate===!1||x.duration===0?(l(1),d()):(this._easeStart=i.q.now(),this._easeOptions=x,this._onEaseFrame=l,this._onEaseEnd=d,this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback))}_renderFrameCallback(){const l=Math.min((i.q.now()-this._easeStart)/this._easeOptions.duration,1),d=this._onEaseFrame;d&&d(this._easeOptions.easing(l)),l<1?this._easeFrameId=this._requestRenderFrame(this._renderFrameCallback):this.stop()}_normalizeBearing(l,d){l=i.bF(l,-180,180);const x=Math.abs(l-d);return Math.abs(l-360-d)<x&&(l-=360),Math.abs(l+360-d)<x&&(l+=360),l}_normalizeCenter(l){const d=this.transform;if(d.maxBounds||d.projection.name!=="globe"&&!d.renderWorldCopies)return;const x=l.lng-d.center.lng;l.lng+=x>180?-360:x<-180?360:0}_prefersReducedMotion(l){return this._respectPrefersReducedMotion&&i.q.prefersReducedMotion&&!(l&&l.essential)}_emulate(l,d,x){const C=Math.ceil(15*d/1e3),B=[],F=l(x.clone());for(let z=0;z<=C;z++){const K=F(z/C);B.push(K.clone())}return B}_preloadTiles(l,d){}}class bp{constructor(l={}){this.options=l,i.aP(["_toggleAttribution","_updateEditLink","_updateData","_updateCompact"],this)}getDefaultPosition(){return"bottom-right"}onAdd(l){const d=this.options&&this.options.compact,x=l._getUIString("AttributionControl.ToggleAttribution");this._map=l,this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-attrib"),this._compactButton=N("button","mapboxgl-ctrl-attrib-button",this._container),this._compactButton.type="button",this._compactButton.addEventListener("click",this._toggleAttribution),this._compactButton.setAttribute("aria-label",x);const C=N("span","mapboxgl-ctrl-icon",this._compactButton);return C.setAttribute("aria-hidden","true"),C.setAttribute("title",x),this._innerContainer=N("div","mapboxgl-ctrl-attrib-inner",this._container),d&&this._container.classList.add("mapboxgl-compact"),this._updateAttributions(),this._updateEditLink(),this._map.on("styledata",this._updateData),this._map.on("sourcedata",this._updateData),this._map.on("moveend",this._updateEditLink),d===void 0&&(this._map.on("resize",this._updateCompact),this._updateCompact()),this._container}onRemove(){this._container.remove(),this._map.off("styledata",this._updateData),this._map.off("sourcedata",this._updateData),this._map.off("moveend",this._updateEditLink),this._map.off("resize",this._updateCompact),this._map=void 0,this._attribHTML=void 0}_toggleAttribution(){this._container.classList.contains("mapboxgl-compact-show")?(this._container.classList.remove("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","false")):(this._container.classList.add("mapboxgl-compact-show"),this._compactButton.setAttribute("aria-expanded","true"))}_updateEditLink(){let l=this._editLink;l||(l=this._editLink=this._container.querySelector(".mapbox-improve-map"));const d=[{key:"owner",value:this.styleOwner},{key:"id",value:this.styleId},{key:"access_token",value:this._map._requestManager._customAccessToken||i.e.ACCESS_TOKEN}];if(l){const x=d.reduce((C,B,F)=>(B.value&&(C+=`${B.key}=${B.value}${F<d.length-1?"&":""}`),C),"?");l.href=`${i.e.FEEDBACK_URL}/${x}#${lA(this._map,!0)}`,l.rel="noopener nofollow"}}_updateData(l){!l||l.sourceDataType!=="metadata"&&l.sourceDataType!=="visibility"&&l.dataType!=="style"||(this._updateAttributions(),this._updateEditLink())}_updateAttributions(){if(!this._map.style)return;let l=[];if(this._map.style.stylesheet){const C=this._map.style.stylesheet;this.styleOwner=C.owner,this.styleId=C.id}const d=this._map.style._mergedSourceCaches;for(const C in d){const B=d[C];if(B.used){const F=B.getSource();F.attribution&&l.indexOf(F.attribution)<0&&l.push(F.attribution)}}l.sort((C,B)=>C.length-B.length),l=l.filter((C,B)=>{for(let F=B+1;F<l.length;F++)if(l[F].indexOf(C)>=0)return!1;return!0}),this.options.customAttribution&&(Array.isArray(this.options.customAttribution)?l=[...this.options.customAttribution,...l]:l.unshift(this.options.customAttribution));const x=l.join(" | ");x!==this._attribHTML&&(this._attribHTML=x,l.length?(this._innerContainer.innerHTML=x,this._container.classList.remove("mapboxgl-attrib-empty")):this._container.classList.add("mapboxgl-attrib-empty"),this._editLink=null)}_updateCompact(){this._map.getCanvasContainer().offsetWidth<=640?this._container.classList.add("mapboxgl-compact"):this._container.classList.remove("mapboxgl-compact","mapboxgl-compact-show")}}class Fi{constructor(){i.aP(["_updateLogo","_updateCompact"],this)}onAdd(l){this._map=l,this._container=N("div","mapboxgl-ctrl");const d=N("a","mapboxgl-ctrl-logo");return d.target="_blank",d.rel="noopener nofollow",d.href="https://www.mapbox.com/",d.setAttribute("aria-label",this._map._getUIString("LogoControl.Title")),d.setAttribute("rel","noopener nofollow"),this._container.appendChild(d),this._container.style.display="none",this._map.on("sourcedata",this._updateLogo),this._updateLogo(),this._map.on("resize",this._updateCompact),this._updateCompact(),this._container}onRemove(){this._container.remove(),this._map.off("sourcedata",this._updateLogo),this._map.off("resize",this._updateCompact)}getDefaultPosition(){return"bottom-left"}_updateLogo(l){l&&l.sourceDataType!=="metadata"||(this._container.style.display=this._logoRequired()?"block":"none")}_logoRequired(){if(!this._map.style)return!0;const l=this._map.style._sourceCaches;if(Object.entries(l).length===0)return!0;for(const d in l){const x=l[d].getSource();if(x.hasOwnProperty("mapbox_logo")&&!x.mapbox_logo)return!1}return!0}_updateCompact(){const l=this._container.children;if(l.length){const d=l[0];this._map.getCanvasContainer().offsetWidth<250?d.classList.add("mapboxgl-compact"):d.classList.remove("mapboxgl-compact")}}}class Oh{constructor(){this._queue=[],this._id=0,this._cleared=!1,this._currentlyRunning=!1}add(l){const d=++this._id;return this._queue.push({callback:l,id:d,cancelled:!1}),d}remove(l){const d=this._currentlyRunning,x=d?this._queue.concat(d):this._queue;for(const C of x)if(C.id===l)return void(C.cancelled=!0)}run(l=0){const d=this._currentlyRunning=this._queue;this._queue=[];for(const x of d)if(!x.cancelled&&(x.callback(l),this._cleared))break;this._cleared=!1,this._currentlyRunning=!1}clear(){this._currentlyRunning&&(this._cleared=!0),this._queue=[]}}class Eg{constructor(l){this.jumpTo(l)}getValue(l){if(l<=this._startTime)return this._start;if(l>=this._endTime)return this._end;const d=i.cB((l-this._startTime)/(this._endTime-this._startTime));return this._start*(1-d)+this._end*d}isEasing(l){return l>=this._startTime&&l<=this._endTime}jumpTo(l){this._startTime=-1/0,this._endTime=-1/0,this._start=l,this._end=l}easeTo(l,d,x){this._start=this.getValue(d),this._end=l,this._startTime=d,this._endTime=d+x}}const Vl={"AttributionControl.ToggleAttribution":"Toggle attribution","FullscreenControl.Enter":"Enter fullscreen","FullscreenControl.Exit":"Exit fullscreen","GeolocateControl.FindMyLocation":"Find my location","GeolocateControl.LocationNotAvailable":"Location not available","LogoControl.Title":"Mapbox homepage","Map.Title":"Map","NavigationControl.ResetBearing":"Reset bearing to north","NavigationControl.ZoomIn":"Zoom in","NavigationControl.ZoomOut":"Zoom out","ScrollZoomBlocker.CtrlMessage":"Use ctrl + scroll to zoom the map","ScrollZoomBlocker.CmdMessage":"Use ⌘ + scroll to zoom the map","TouchPanBlocker.Message":"Use two fingers to move the map"},dd=["mouseenter","mouseover","mouseleave","mouseout"];class kf extends i.z{constructor(l,d,x,C){const{point:B,lngLat:F,originalEvent:z,target:K}=l;super(l.type,{point:B,lngLat:F,originalEvent:z,target:K}),this.preventDefault=()=>{l.preventDefault()},this.id=d,this.interaction=x,this.feature=C}}class Cp{constructor(l){this.map=l,this.interactionsByType=new Map,this.typeById=new Map,this.filters=new Map,this.delegatedHandlers=new Map,this.handleType=this.handleType.bind(this)}add(l,d){if(this.typeById.has(l))throw new Error(`Interaction id "${l}" already exists.`);const{type:x,filter:C}=d;C&&this.filters.set(l,i.aZ(C));const B=this.interactionsByType.get(x)||new Map;if(B.size===0){if(dd.includes(x)){const{mousemove:F,mouseout:z}=this._createDelegatedHandlers(l,d);this.map.on("mousemove",F),this.map.on("mouseout",z),this.delegatedHandlers.set(l,{mousemove:F,mouseout:z})}else this.map.on(x,this.handleType);this.interactionsByType.set(x,B)}B.set(l,d),this.typeById.set(l,x)}get(l){const d=this.typeById.get(l);if(!d)return;const x=this.interactionsByType.get(d);return x?x.get(l):void 0}remove(l){const d=this.typeById.get(l);if(!d)return;this.typeById.delete(l),this.filters.delete(l);const x=this.interactionsByType.get(d);if(x){if(x.delete(l),this.delegatedHandlers.has(l)){const{mousemove:C,mouseout:B}=this.delegatedHandlers.get(l);this.map.off("mousemove",C),this.map.off("mouseout",B),this.delegatedHandlers.delete(l)}x.size===0&&this.map.off(d,this.handleType)}}queryTargets(l,d){const x=[];for(const[C,B]of d)B.target&&x.push({targetId:C,target:B.target,filter:this.filters.get(C)});return this.map.style.queryRenderedTargets(l,x,this.map.transform)}handleType(l,d){const x=this.interactionsByType.get(l.type),C=Array.from(x).reverse();d=d||this.queryTargets(l.point,C);let B=!1;for(const F of d){for(const[z,K]of C){if(!K.target)continue;const X=F.variants?F.variants[z]:null;if(X){for(const J of X){const oe=new i.cw(F,J);if(K.handler(new kf(l,z,K,oe))!==!1){B=!0;break}}if(B)break}}if(B)break}if(!B)for(const[F,z]of C){const{handler:K,target:X}=z;if(!X&&K(new kf(l,F,z,null))!==!1)break}}_createDelegatedHandlers(l,d){switch(d.type){case"mouseenter":case"mouseover":{let x=!1,C=new Set;return{mousemove:B=>{const F=this.queryTargets(B.point,[[l,d]]),z=new Set;if(!F.length)return x=!1,void C.clear();const K=[];for(const X of F)C.has(X.id)||(z.add(X.id),K.push(X));x&&!K.length||(x=!0,C=z,B.type=d.type,this.handleType(B,K))},mouseout:()=>{x=!1,C.clear()}}}case"mouseleave":case"mouseout":{let x=[];return{mousemove:C=>{const B=this.queryTargets(C.point,[[l,d]]);if(!B.length)return C.type=d.type,this.handleType(C,x),void(x=B);const F=[],z=new Set(B.map(K=>K.id));for(const K of x)z.has(K.id)||F.push(K);F.length&&(C.type=d.type,this.handleType(C,F)),x=B},mouseout:C=>{x.length&&(C.type=d.type,this.handleType(C,x),x=[])}}}}}}function Ka(v,l){if(Array.isArray(v)&&Array.isArray(l)){const d=new Set(v),x=new Set(l);return d.size===x.size&&v.every(C=>x.has(C))}return i.bn(v,l)}const pv={center:[0,0],zoom:0,bearing:0,pitch:0,minZoom:-2,maxZoom:22,minPitch:0,maxPitch:85,interactive:!0,scrollZoom:!0,boxZoom:!0,dragRotate:!0,dragPan:!0,keyboard:!0,doubleClickZoom:!0,touchZoomRotate:!0,touchPitch:!0,cooperativeGestures:!1,performanceMetricsCollection:!0,bearingSnap:7,clickTolerance:3,pitchWithRotate:!0,hash:!1,attributionControl:!0,antialias:!1,failIfMajorPerformanceCaveat:!1,preserveDrawingBuffer:!1,trackResize:!0,renderWorldCopies:!0,refreshExpiredTiles:!0,minTileCacheSize:null,maxTileCacheSize:null,localIdeographFontFamily:"sans-serif",localFontFamily:null,transformRequest:null,accessToken:null,fadeDuration:300,respectPrefersReducedMotion:!0,crossSourceCollisions:!0,collectResourceTiming:!1,testMode:!1,precompilePrograms:!0,scaleFactor:1,spriteFormat:"auto"},es={showCompass:!0,showZoom:!0,visualizePitch:!1};class Lf{constructor(l,d,x=!1){this._clickTolerance=10,this.element=d,this.mouseRotate=new E0({clickTolerance:l.dragRotate._mouseRotate._clickTolerance}),this.map=l,x&&(this.mousePitch=new If({clickTolerance:l.dragRotate._mousePitch._clickTolerance})),i.aP(["mousedown","mousemove","mouseup","touchstart","touchmove","touchend","reset"],this),d.addEventListener("mousedown",this.mousedown),d.addEventListener("touchstart",this.touchstart,{passive:!1}),d.addEventListener("touchmove",this.touchmove),d.addEventListener("touchend",this.touchend),d.addEventListener("touchcancel",this.reset)}down(l,d){this.mouseRotate.mousedown(l,d),this.mousePitch&&this.mousePitch.mousedown(l,d),Z()}move(l,d){const x=this.map,C=this.mouseRotate.mousemoveWindow(l,d),B=C&&C.bearingDelta;if(B&&x.setBearing(x.getBearing()+B),this.mousePitch){const F=this.mousePitch.mousemoveWindow(l,d),z=F&&F.pitchDelta;z&&x.setPitch(x.getPitch()+z)}}off(){const l=this.element;l.removeEventListener("mousedown",this.mousedown),l.removeEventListener("touchstart",this.touchstart,{passive:!1}),l.removeEventListener("touchmove",this.touchmove),l.removeEventListener("touchend",this.touchend),l.removeEventListener("touchcancel",this.reset),this.offTemp()}offTemp(){ne(),window.removeEventListener("mousemove",this.mousemove),window.removeEventListener("mouseup",this.mouseup)}mousedown(l){this.down(i.l({},l,{ctrlKey:!0,preventDefault:()=>l.preventDefault()}),pe(this.element,l)),window.addEventListener("mousemove",this.mousemove),window.addEventListener("mouseup",this.mouseup)}mousemove(l){this.move(l,pe(this.element,l))}mouseup(l){this.mouseRotate.mouseupWindow(l),this.mousePitch&&this.mousePitch.mouseupWindow(l),this.offTemp()}touchstart(l){l.targetTouches.length!==1?this.reset():(this._startPos=this._lastPos=_e(this.element,l.targetTouches)[0],this.down({type:"mousedown",button:0,ctrlKey:!0,preventDefault:()=>l.preventDefault()},this._startPos))}touchmove(l){l.targetTouches.length!==1?this.reset():(this._lastPos=_e(this.element,l.targetTouches)[0],this.move({preventDefault:()=>l.preventDefault()},this._lastPos))}touchend(l){l.targetTouches.length===0&&this._startPos&&this._lastPos&&this._startPos.dist(this._lastPos)<this._clickTolerance&&this.element.click(),this.reset()}reset(){this.mouseRotate.reset(),this.mousePitch&&this.mousePitch.reset(),delete this._startPos,delete this._lastPos,this.offTemp()}}function h_(v,l,d){if(v=new i.bO(v.lng,v.lat),l){const x=new i.bO(v.lng-360,v.lat),C=new i.bO(v.lng+360,v.lat),B=360*Math.ceil(Math.abs(v.lng-d.center.lng)/360),F=d.locationPoint(v).distSqr(l),z=l.x<0||l.y<0||l.x>d.width||l.y>d.height;d.locationPoint(x).distSqr(l)<F&&(z||Math.abs(x.lng-d.center.lng)<B)?v=x:d.locationPoint(C).distSqr(l)<F&&(z||Math.abs(C.lng-d.center.lng)<B)&&(v=C)}for(;Math.abs(v.lng-d.center.lng)>180;){const x=d.locationPoint(v);if(x.x>=0&&x.y>=0&&x.x<=d.width&&x.y<=d.height)break;v.lng>d.center.lng?v.lng-=360:v.lng+=360}return v}const P0={center:"translate(-50%,-50%)",top:"translate(-50%,0)","top-left":"translate(0,0)","top-right":"translate(-100%,0)",bottom:"translate(-50%,-100%)","bottom-left":"translate(0,-100%)","bottom-right":"translate(-100%,-100%)",left:"translate(0,-50%)",right:"translate(-100%,-50%)"};class Tg extends i.E{constructor(l,d){if(super(),(l instanceof HTMLElement||d)&&(l=i.l({element:l},d)),i.aP(["_update","_onMove","_onUp","_addDragHandler","_onMapClick","_onKeyPress","_clearFadeTimer"],this),this._anchor=l&&l.anchor||"center",this._color=l&&l.color||"#3FB1CE",this._scale=l&&l.scale||1,this._draggable=l&&l.draggable||!1,this._clickTolerance=l&&l.clickTolerance||0,this._isDragging=!1,this._state="inactive",this._rotation=l&&l.rotation||0,this._rotationAlignment=l&&l.rotationAlignment||"auto",this._pitchAlignment=l&&l.pitchAlignment&&l.pitchAlignment||"auto",this._updateMoving=()=>this._update(!0),this._occludedOpacity=l&&l.occludedOpacity||.2,l&&l.element)this._element=l.element,this._offset=i.P.convert(l&&l.offset||[0,0]);else{this._defaultMarker=!0,this._element=N("div");const B=41,F=27,z=W("svg",{display:"block",height:B*this._scale+"px",width:F*this._scale+"px",viewBox:`0 0 ${F} ${B}`},this._element),K=W("radialGradient",{id:"shadowGradient"},W("defs",{},z));W("stop",{offset:"10%","stop-opacity":.4},K),W("stop",{offset:"100%","stop-opacity":.05},K),W("ellipse",{cx:13.5,cy:34.8,rx:10.5,ry:5.25,fill:"url(#shadowGradient)"},z),W("path",{fill:this._color,d:"M27,13.5C27,19.07 20.25,27 14.75,34.5C14.02,35.5 12.98,35.5 12.25,34.5C6.75,27 0,19.22 0,13.5C0,6.04 6.04,0 13.5,0C20.96,0 27,6.04 27,13.5Z"},z),W("path",{opacity:.25,d:"M13.5,0C6.04,0 0,6.04 0,13.5C0,19.22 6.75,27 12.25,34.5C13,35.52 14.02,35.5 14.75,34.5C20.25,27 27,19.07 27,13.5C27,6.04 20.96,0 13.5,0ZM13.5,1C20.42,1 26,6.58 26,13.5C26,15.9 24.5,19.18 22.22,22.74C19.95,26.3 16.71,30.14 13.94,33.91C13.74,34.18 13.61,34.32 13.5,34.44C13.39,34.32 13.26,34.18 13.06,33.91C10.28,30.13 7.41,26.31 5.02,22.77C2.62,19.23 1,15.95 1,13.5C1,6.58 6.58,1 13.5,1Z"},z),W("circle",{fill:"white",cx:13.5,cy:13.5,r:5.5},z),this._offset=i.P.convert(l&&l.offset||[0,-14])}this._element.hasAttribute("aria-label")||this._element.setAttribute("aria-label","Map marker"),this._element.hasAttribute("role")||this._element.setAttribute("role","img"),this._element.classList.add("mapboxgl-marker"),this._element.addEventListener("dragstart",B=>{B.preventDefault()}),this._element.addEventListener("mousedown",B=>{B.preventDefault()});const x=this._element.classList;for(const B in P0)x.remove(`mapboxgl-marker-anchor-${B}`);x.add(`mapboxgl-marker-anchor-${this._anchor}`);const C=l&&l.className?l.className.trim().split(/\s+/):[];x.add(...C),this._popup=null}addTo(l){return l===this._map||(this.remove(),this._map=l,l.getCanvasContainer().appendChild(this._element),l.on("move",this._updateMoving),l.on("moveend",this._update),l.on("remove",this._clearFadeTimer),l._addMarker(this),this.setDraggable(this._draggable),this._update(),l.on("click",this._onMapClick)),this}remove(){const l=this._map;return l&&(l.off("click",this._onMapClick),l.off("move",this._updateMoving),l.off("moveend",this._update),l.off("mousedown",this._addDragHandler),l.off("touchstart",this._addDragHandler),l.off("mouseup",this._onUp),l.off("touchend",this._onUp),l.off("mousemove",this._onMove),l.off("touchmove",this._onMove),l.off("remove",this._clearFadeTimer),l._removeMarker(this),this._map=void 0),this._clearFadeTimer(),this._element.remove(),this._popup&&this._popup.remove(),this}getLngLat(){return this._lngLat}setLngLat(l){return this._lngLat=i.bO.convert(l),this._pos=null,this._popup&&this._popup.setLngLat(this._lngLat),this._update(!0),this}getElement(){return this._element}setPopup(l){if(this._popup&&(this._popup.remove(),this._popup=null,this._element.removeAttribute("role"),this._element.removeEventListener("keypress",this._onKeyPress),this._originalTabIndex||this._element.removeAttribute("tabindex")),l){if(!("offset"in l.options)){const C=Math.sqrt(Math.pow(13.5,2)/2);l.options.offset=this._defaultMarker?{top:[0,0],"top-left":[0,0],"top-right":[0,0],bottom:[0,-38.1],"bottom-left":[C,-1*(38.1-13.5+C)],"bottom-right":[-C,-1*(38.1-13.5+C)],left:[13.5,-1*(38.1-13.5)],right:[-13.5,-1*(38.1-13.5)]}:this._offset}this._popup=l,l._marker=this,this._lngLat&&this._popup.setLngLat(this._lngLat),this._element.setAttribute("role","button"),this._originalTabIndex=this._element.getAttribute("tabindex"),this._originalTabIndex||this._element.setAttribute("tabindex","0"),this._element.addEventListener("keypress",this._onKeyPress),this._element.setAttribute("aria-expanded","false")}return this}_onKeyPress(l){const d=l.code,x=l.charCode||l.keyCode;d!=="Space"&&d!=="Enter"&&x!==32&&x!==13||this.togglePopup()}_onMapClick(l){const d=l.originalEvent.target,x=this._element;this._popup&&(d===x||x.contains(d))&&this.togglePopup()}getPopup(){return this._popup}togglePopup(){const l=this._popup;return l?(l.isOpen()?(l.remove(),this._element.setAttribute("aria-expanded","false")):this._map&&(l.addTo(this._map),this._element.setAttribute("aria-expanded","true")),this):this}_behindTerrain(){const l=this._map,d=this._pos;if(!l||!d)return!1;const x=l.unproject(d),C=l.getFreeCameraOptions();if(!C.position)return!1;const B=C.position.toLngLat();return B.distanceTo(x)<.9*B.distanceTo(this._lngLat)}_evaluateOpacity(){const l=this._map;if(!l)return;const d=this._pos;if(!d||d.x<0||d.x>l.transform.width||d.y<0||d.y>l.transform.height)return void this._clearFadeTimer();const x=l.unproject(d);let C;l._showingGlobe()&&i.dH(l.transform,this._lngLat)?C=0:(C=1-l._queryFogOpacity(x),l.transform._terrainEnabled()&&l.getTerrain()&&this._behindTerrain()&&(C*=this._occludedOpacity)),this._element.style.opacity=`${C}`,this._element.style.pointerEvents=C>0?"auto":"none",this._popup&&this._popup._setOpacity(C),this._fadeTimer=null}_clearFadeTimer(){this._fadeTimer&&(clearTimeout(this._fadeTimer),this._fadeTimer=null)}_updateDOM(){const l=this._pos;if(!l||!this._map)return;const d=this._offset.mult(this._scale);this._element.style.transform=`
            translate(${l.x}px,${l.y}px)
            ${P0[this._anchor]}
            ${this._calculateXYTransform()} ${this._calculateZTransform()}
            translate(${d.x}px,${d.y}px)
        `}_calculateXYTransform(){const l=this._pos,d=this._map,x=this.getPitchAlignment();if(!d||!l||x!=="map")return"";if(!d._showingGlobe()){const K=d.getPitch();return K?`rotateX(${K}deg)`:""}const C=i.c4(i.dI(d.transform,this._lngLat)),B=l.sub(i.dJ(d.transform)),F=Math.abs(B.x)+Math.abs(B.y);if(F===0)return"";const z=C/F;return`rotateX(${-B.y*z}deg) rotateY(${B.x*z}deg)`}_calculateZTransform(){const l=this._pos,d=this._map;if(!d||!l)return"";let x=0;const C=this.getRotationAlignment();if(C==="map")if(d._showingGlobe()){const B=d.project(new i.bO(this._lngLat.lng,this._lngLat.lat+.001)),F=d.project(new i.bO(this._lngLat.lng,this._lngLat.lat-.001)).sub(B);x=i.c4(Math.atan2(F.y,F.x))-90}else x=-d.getBearing();else if(C==="horizon"){const B=i.ac(4,6,d.getZoom()),F=i.dJ(d.transform);F.y+=B*d.transform.height;const z=l.sub(F),K=i.c4(Math.atan2(z.y,z.x));x=(K>90?K-270:K+90)*(1-B)}return x+=this._rotation,x?`rotateZ(${x}deg)`:""}_update(l){cancelAnimationFrame(this._updateFrameId);const d=this._map;d&&(d.transform.renderWorldCopies&&(this._lngLat=h_(this._lngLat,this._pos,d.transform)),this._pos=d.project(this._lngLat),l===!0?this._updateFrameId=requestAnimationFrame(()=>{this._element&&this._pos&&this._anchor&&(this._pos=this._pos.round(),this._updateDOM())}):this._pos=this._pos.round(),d._requestDomTask(()=>{this._map&&(this._element&&this._pos&&this._anchor&&this._updateDOM(),(d._showingGlobe()||d.getTerrain()||d.getFog())&&!this._fadeTimer&&(this._fadeTimer=window.setTimeout(this._evaluateOpacity.bind(this),60)))}))}getOffset(){return this._offset}setOffset(l){return this._offset=i.P.convert(l),this._update(),this}addClassName(l){return this._element.classList.add(l),this}removeClassName(l){return this._element.classList.remove(l),this}toggleClassName(l){return this._element.classList.toggle(l)}_onMove(l){const d=this._map;if(!d)return;const x=this._pointerdownPos,C=this._positionDelta;if(x&&C){if(!this._isDragging){const B=this._clickTolerance||d._clickTolerance;if(l.point.dist(x)<B)return;this._isDragging=!0}this._pos=l.point.sub(C),this._lngLat=d.unproject(this._pos),this.setLngLat(this._lngLat),this._element.style.pointerEvents="none",this._state==="pending"&&(this._state="active",this.fire(new i.z("dragstart"))),this.fire(new i.z("drag"))}}_onUp(){this._element.style.pointerEvents="auto",this._positionDelta=null,this._pointerdownPos=null,this._isDragging=!1;const l=this._map;l&&(l.off("mousemove",this._onMove),l.off("touchmove",this._onMove)),this._state==="active"&&this.fire(new i.z("dragend")),this._state="inactive"}_addDragHandler(l){const d=this._map,x=this._pos;d&&x&&this._element.contains(l.originalEvent.target)&&(l.preventDefault(),this._positionDelta=l.point.sub(x),this._pointerdownPos=l.point,this._state="pending",d.on("mousemove",this._onMove),d.on("touchmove",this._onMove),d.once("mouseup",this._onUp),d.once("touchend",this._onUp))}setDraggable(l){this._draggable=!!l;const d=this._map;return d&&(l?(d.on("mousedown",this._addDragHandler),d.on("touchstart",this._addDragHandler)):(d.off("mousedown",this._addDragHandler),d.off("touchstart",this._addDragHandler))),this}isDraggable(){return this._draggable}setRotation(l){return this._rotation=l||0,this._update(),this}getRotation(){return this._rotation}setRotationAlignment(l){return this._rotationAlignment=l||"auto",this._update(),this}getRotationAlignment(){return this._rotationAlignment==="auto"||this._rotationAlignment==="horizon"&&this._map&&!this._map._showingGlobe()?"viewport":this._rotationAlignment}setPitchAlignment(l){return this._pitchAlignment=l||"auto",this._update(),this}getPitchAlignment(){return this._pitchAlignment==="auto"?this.getRotationAlignment():this._pitchAlignment}setOccludedOpacity(l){return this._occludedOpacity=l||.2,this._update(),this}getOccludedOpacity(){return this._occludedOpacity}}const Sp={positionOptions:{enableHighAccuracy:!1,maximumAge:0,timeout:6e3},fitBoundsOptions:{maxZoom:15},trackUserLocation:!1,showAccuracyCircle:!0,showUserLocation:!0,showUserHeading:!1},Mf={maxWidth:100,unit:"metric"},ua={kilometer:"km",meter:"m",mile:"mi",foot:"ft","nautical-mile":"nm"},Ro={closeButton:!0,closeOnClick:!0,focusAfterOpen:!0,className:"",maxWidth:"240px"},Wa=["a[href]","[tabindex]:not([tabindex='-1'])","[contenteditable]:not([contenteditable='false'])","button:not([disabled])","input:not([disabled])","select:not([disabled])","textarea:not([disabled])"].join(", ");function Av(v=new i.P(0,0),l="bottom"){if(typeof v=="number"){const d=Math.round(Math.sqrt(.5*Math.pow(v,2)));switch(l){case"top":return new i.P(0,v);case"top-left":return new i.P(d,d);case"top-right":return new i.P(-d,d);case"bottom":return new i.P(0,-v);case"bottom-left":return new i.P(d,-d);case"bottom-right":return new i.P(-d,-d);case"left":return new i.P(v,0);case"right":return new i.P(-v,0)}return new i.P(0,0)}return v instanceof i.P||Array.isArray(v)?i.P.convert(v):i.P.convert(v[l]||[0,0])}return{version:f,supported:U.supported,setRTLTextPlugin:i.dK,getRTLTextPluginStatus:i.dL,Map:class extends bm{constructor(v){y.mark(g.create);const l=v;if((v=i.l({},pv,v)).minZoom!=null&&v.maxZoom!=null&&v.minZoom>v.maxZoom)throw new Error("maxZoom must be greater than or equal to minZoom");if(v.minPitch!=null&&v.maxPitch!=null&&v.minPitch>v.maxPitch)throw new Error("maxPitch must be greater than or equal to minPitch");if(v.minPitch!=null&&v.minPitch<0)throw new Error("minPitch must be greater than or equal to 0");if(v.maxPitch!=null&&v.maxPitch>85)throw new Error("maxPitch must be less than or equal to 85");if(v.antialias&&i.dF(window)&&(v.antialias=!1,i.w("Antialiasing is disabled for this WebGL context to avoid browser bug: https://github.com/mapbox/mapbox-gl-js/issues/11609")),super(new $d(v.minZoom,v.maxZoom,v.minPitch,v.maxPitch,v.renderWorldCopies),v),this._repaint=!!v.repaint,this._interactive=v.interactive,this._minTileCacheSize=v.minTileCacheSize,this._maxTileCacheSize=v.maxTileCacheSize,this._failIfMajorPerformanceCaveat=v.failIfMajorPerformanceCaveat,this._preserveDrawingBuffer=v.preserveDrawingBuffer,this._antialias=v.antialias,this._trackResize=v.trackResize,this._bearingSnap=v.bearingSnap,this._refreshExpiredTiles=v.refreshExpiredTiles,this._fadeDuration=v.fadeDuration,this._isInitialLoad=!0,this._crossSourceCollisions=v.crossSourceCollisions,this._collectResourceTiming=v.collectResourceTiming,this._language=this._parseLanguage(v.language),this._worldview=v.worldview,this._renderTaskQueue=new Oh,this._domRenderTaskQueue=new Oh,this._controls=[],this._markers=[],this._popups=[],this._mapId=i.aV(),this._locale=i.l({},Vl,v.locale),this._clickTolerance=v.clickTolerance,this._cooperativeGestures=v.cooperativeGestures,this._performanceMetricsCollection=v.performanceMetricsCollection,this._tessellationStep=v.tessellationStep,this._containerWidth=0,this._containerHeight=0,this._showParseStatus=!0,this._precompilePrograms=v.precompilePrograms,this._scaleFactorChanged=!1,this._averageElevationLastSampledAt=-1/0,this._averageElevationExaggeration=0,this._averageElevation=new Eg(0),this._interactionRange=[1/0,-1/0],this._visibilityHidden=0,this._useExplicitProjection=!1,this._frameId=0,this._scaleFactor=v.scaleFactor,this._requestManager=new Ee(v.transformRequest,v.accessToken,v.testMode),this._silenceAuthErrors=!!v.testMode,this._contextCreateOptions=v.contextCreateOptions?{...v.contextCreateOptions}:{},typeof v.container=="string"){const d=document.getElementById(v.container);if(!d)throw new Error(`Container '${v.container.toString()}' not found.`);this._container=d}else{if(!(v.container instanceof HTMLElement))throw new Error("Invalid type: 'container' must be a String or HTMLElement.");this._container=v.container}if(this._container.childNodes.length>0&&i.w("The map container element should be empty, otherwise the map's interactivity will be negatively impacted. If you want to display a message when WebGL is not supported, use the Mapbox GL Supported plugin instead."),v.maxBounds&&this.setMaxBounds(v.maxBounds),this._spriteFormat=v.spriteFormat,i.aP(["_onWindowOnline","_onWindowResize","_onVisibilityChange","_onMapScroll","_contextLost","_contextRestored"],this),this._setupContainer(),this._tp||(this._tp=new oc),this._tp.registerParameter(this,["Debug"],"showOverdrawInspector"),this._tp.registerParameter(this,["Debug"],"showTileBoundaries"),this._tp.registerParameter(this,["Debug"],"showParseStatus"),this._tp.registerParameter(this,["Debug"],"repaint"),this._tp.registerParameter(this,["Debug"],"showTileAABBs"),this._tp.registerParameter(this,["Debug"],"showPadding"),this._tp.registerParameter(this,["Debug"],"showCollisionBoxes",{noSave:!0}),this._tp.registerParameter(this.transform,["Debug"],"freezeTileCoverage",{noSave:!0},()=>{this._update()}),this._tp.registerParameter(this,["Debug","Wireframe"],"showTerrainWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers2DWireframe"),this._tp.registerParameter(this,["Debug","Wireframe"],"showLayers3DWireframe"),this._tp.registerParameter(this,["Scaling"],"_scaleFactor",{min:.1,max:10,step:.1},()=>{this.setScaleFactor(this._scaleFactor)}),this._setupPainter(),this.painter===void 0)throw new Error("Failed to initialize WebGL.");if(this.on("move",()=>this._update(!1)),this.on("moveend",()=>this._update(!1)),this.on("zoom",()=>this._update(!0)),this._fullscreenchangeEvent="onfullscreenchange"in document?"fullscreenchange":"webkitfullscreenchange",window.addEventListener("online",this._onWindowOnline,!1),window.addEventListener("resize",this._onWindowResize,!1),window.addEventListener("orientationchange",this._onWindowResize,!1),window.addEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.addEventListener("visibilitychange",this._onVisibilityChange,!1),this.handlers=new F0(this,v),this._localFontFamily=v.localFontFamily,this._localIdeographFontFamily=v.localIdeographFontFamily,(v.style||!v.testMode)&&this.setStyle(v.style||i.e.DEFAULT_STYLE,{config:v.config,localFontFamily:this._localFontFamily,localIdeographFontFamily:this._localIdeographFontFamily}),v.projection&&this.setProjection(v.projection),this.indoor=new Kd(this),v.hash&&(this._hash=new Vc(typeof v.hash=="string"&&v.hash||void 0).addTo(this)),!this._hash||!this._hash._onHashChange()){l.center==null&&l.zoom==null||(this.transform._unmodified=!1),this.jumpTo({center:v.center,zoom:v.zoom,bearing:v.bearing,pitch:v.pitch});const d=v.bounds;d&&(this.resize(),this.fitBounds(d,i.l({},v.fitBoundsOptions,{duration:0})))}this.resize(),v.attributionControl&&this.addControl(new bp({customAttribution:v.customAttribution})),this._logoControl=new Fi,this.addControl(this._logoControl,v.logoPosition),this.on("style.load",()=>{this.transform.unmodified&&this.jumpTo(this.style.stylesheet),this._postStyleLoadEvent()}),this.on("data",d=>{this._update(d.dataType==="style"),this.fire(new i.z(`${d.dataType}data`,d))}),this.on("dataloading",d=>{this.fire(new i.z(`${d.dataType}dataloading`,d))}),this._interactions=new Cp(this)}_getMapId(){return this._mapId}addControl(v,l){if(l===void 0&&(l=v.getDefaultPosition?v.getDefaultPosition():"top-right"),!v||!v.onAdd)return this.fire(new i.y(new Error("Invalid argument to map.addControl(). Argument must be a control with onAdd and onRemove methods.")));const d=v.onAdd(this);this._controls.push(v);const x=this._controlPositions[l];return l.indexOf("bottom")!==-1?x.insertBefore(d,x.firstChild):x.appendChild(d),this}removeControl(v){if(!v||!v.onRemove)return this.fire(new i.y(new Error("Invalid argument to map.removeControl(). Argument must be a control with onAdd and onRemove methods.")));const l=this._controls.indexOf(v);return l>-1&&this._controls.splice(l,1),v.onRemove(this),this}hasControl(v){return this._controls.indexOf(v)>-1}getContainer(){return this._container}getCanvasContainer(){return this._canvasContainer}getCanvas(){return this._canvas}resize(v){if(this._updateContainerDimensions(),this._containerWidth===this.transform.width&&this._containerHeight===this.transform.height)return this;this._resizeCanvas(this._containerWidth,this._containerHeight),this.transform.resize(this._containerWidth,this._containerHeight),this.painter.resize(Math.ceil(this._containerWidth),Math.ceil(this._containerHeight));const l=!this._moving;return l&&this.fire(new i.z("movestart",v)).fire(new i.z("move",v)),this.fire(new i.z("resize",v)),l&&this.fire(new i.z("moveend",v)),this}getBounds(){return this.transform.getBounds()}getMaxBounds(){return this.transform.getMaxBounds()||null}setMaxBounds(v){return this.transform.setMaxBounds(i.az.convert(v)),this._update()}setMinZoom(v){if((v=v??-2)>=-2&&v<=this.transform.maxZoom)return this.transform.minZoom=v,this._update(),this.getZoom()<v?this.setZoom(v):this.fire(new i.z("zoomstart")).fire(new i.z("zoom")).fire(new i.z("zoomend")),this;throw new Error("minZoom must be between -2 and the current maxZoom, inclusive")}getMinZoom(){return this.transform.minZoom}setMaxZoom(v){if((v=v??22)>=this.transform.minZoom)return this.transform.maxZoom=v,this._update(),this.getZoom()>v?this.setZoom(v):this.fire(new i.z("zoomstart")).fire(new i.z("zoom")).fire(new i.z("zoomend")),this;throw new Error("maxZoom must be greater than the current minZoom")}getMaxZoom(){return this.transform.maxZoom}setMinPitch(v){if((v=v??0)<0)throw new Error("minPitch must be greater than or equal to 0");if(v>=0&&v<=this.transform.maxPitch)return this.transform.minPitch=v,this._update(),this.getPitch()<v?this.setPitch(v):this.fire(new i.z("pitchstart")).fire(new i.z("pitch")).fire(new i.z("pitchend")),this;throw new Error("minPitch must be between 0 and the current maxPitch, inclusive")}getMinPitch(){return this.transform.minPitch}setMaxPitch(v){if((v=v??85)>85)throw new Error("maxPitch must be less than or equal to 85");if(v>=this.transform.minPitch)return this.transform.maxPitch=v,this._update(),this.getPitch()>v?this.setPitch(v):this.fire(new i.z("pitchstart")).fire(new i.z("pitch")).fire(new i.z("pitchend")),this;throw new Error("maxPitch must be greater than or equal to minPitch")}getMaxPitch(){return this.transform.maxPitch}getScaleFactor(){return this._scaleFactor}setScaleFactor(v){return this._scaleFactor=v,this.painter.scaleFactor=v,this._tp.refreshUI(),this._scaleFactorChanged=!0,this.style._updateFilteredLayers(l=>l.type==="symbol"),this._update(!0),this}getRenderWorldCopies(){return this.transform.renderWorldCopies}setRenderWorldCopies(v){return this.transform.renderWorldCopies=v,this.transform.renderWorldCopies||this._forceMarkerAndPopupUpdate(!0),this._update()}getLanguage(){return this._language}_parseLanguage(v){return v==="auto"?navigator.language:Array.isArray(v)?v.length===0?void 0:v.map(l=>l==="auto"?navigator.language:l):v}setLanguage(v){const l=this._parseLanguage(v);if(!this.style||l===this._language)return this;this._language=l,this.style.reloadSources();for(const d of this._controls)d._setLanguage&&d._setLanguage(this._language);return this}getWorldview(){return this._worldview}setWorldview(v){return this.style&&v!==this._worldview?(this._worldview=v,this.style.reloadSources(),this):this}getProjection(){return this.transform.mercatorFromTransition?{name:"globe",center:[0,0]}:this.transform.getProjection()}_showingGlobe(){return this.transform.projection.name==="globe"}setProjection(v){return this._lazyInitEmptyStyle(),v?typeof v=="string"&&(v={name:v}):v=null,this._useExplicitProjection=!!v,this._prioritizeAndUpdateProjection(v,this.style.projection)}_updateProjectionTransition(){if(this.getProjection().name!=="globe")return;const v=this.transform,l=v.projection.name;let d;l==="globe"&&v.zoom>=i.bY?(v.setMercatorFromTransition(),d=!0):l==="mercator"&&v.zoom<i.bY&&(v.setProjection({name:"globe"}),d=!0),d&&(this.style.applyProjectionUpdate(),this.style._forceSymbolLayerUpdate())}_prioritizeAndUpdateProjection(v,l){return this._updateProjection(v||l||{name:"mercator"})}_updateProjection(v){let l;return l=v.name==="globe"&&this.transform.zoom>=i.bY?this.transform.setMercatorFromTransition():this.transform.setProjection(v),this.style.applyProjectionUpdate(),l&&(this.painter.clearBackgroundTiles(),this.style.clearSources(),this._update(!0),this._forceMarkerAndPopupUpdate(!0)),this}project(v){return this.transform.locationPoint3D(i.bO.convert(v))}unproject(v){return this.transform.pointLocation3D(i.P.convert(v))}isMoving(){return this._moving||this.handlers&&this.handlers.isMoving()||!1}isZooming(){return this._zooming||this.handlers&&this.handlers.isZooming()||!1}isRotating(){return this._rotating||this.handlers&&this.handlers.isRotating()||!1}_isDragging(){return this.handlers&&this.handlers._isDragging()||!1}_createDelegatedListener(v,l,d){const x=C=>{let B=[];if(Array.isArray(l)){const F=l.filter(z=>this.getLayer(z));B=F.length?this.queryRenderedFeatures(C,{layers:F}):[]}else B=this.queryRenderedFeatures(C,{target:l});return B};if(v==="mouseenter"||v==="mouseover"){let C=!1;return{listener:d,targets:l,delegates:{mousemove:F=>{const z=x(F.point);z.length?C||(C=!0,d.call(this,new Gc(v,this,F.originalEvent,{features:z}))):C=!1},mouseout:()=>{C=!1}}}}if(v==="mouseleave"||v==="mouseout"){let C=!1;return{listener:d,targets:l,delegates:{mousemove:z=>{x(z.point).length?C=!0:C&&(C=!1,d.call(this,new Gc(v,this,z.originalEvent)))},mouseout:z=>{C&&(C=!1,d.call(this,new Gc(v,this,z.originalEvent)))}}}}{const C=B=>{const F=x(B.point);F.length&&(B.features=F,d.call(this,B),delete B.features)};return{listener:d,targets:l,delegates:{[v]:C}}}}on(v,l,d){if(typeof l=="function"||d===void 0)return super.on(v,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const x=this._createDelegatedListener(v,l,d);this._delegatedListeners=this._delegatedListeners||{},this._delegatedListeners[v]=this._delegatedListeners[v]||[],this._delegatedListeners[v].push(x);for(const C in x.delegates)this.on(C,x.delegates[C]);return this}once(v,l,d){if(typeof l=="function"||d===void 0)return super.once(v,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const x=this._createDelegatedListener(v,l,d);for(const C in x.delegates)this.once(C,x.delegates[C]);return this}off(v,l,d){if(typeof l=="function"||d===void 0)return super.off(v,l);if(typeof l=="string"&&(l=[l]),!this._areTargetsValid(l))return this;const x=this._delegatedListeners?this._delegatedListeners[v]:void 0;return x&&(C=>{for(let B=0;B<C.length;B++){const F=C[B];if(F.listener===d&&Ka(F.targets,l)){for(const z in F.delegates)this.off(z,F.delegates[z]);return C.splice(B,1),this}}})(x),this}queryRenderedFeatures(v,l){if(!this.style)return[];if(v===void 0||v instanceof i.P||Array.isArray(v)||l!==void 0||(l=v,v=void 0),v=v||[[0,0],[this.transform.width,this.transform.height]],!l){const B=this.style.queryRenderedFeatures(v,void 0,this.transform),F=this.style.queryRenderedFeatureset(v,void 0,this.transform);return B.concat(F)}let d=!0;if(l.target&&(d=this._isTargetValid(l.target),d&&!l.layers))return this.style.queryRenderedFeatureset(v,l,this.transform);let x=!0;if(l.layers&&Array.isArray(l.layers)){for(const B of l.layers)if(!this._isValidId(B)){x=!1;break}if(x&&!l.target)return this.style.queryRenderedFeatures(v,l,this.transform)}let C=[];return x&&(C=C.concat(this.style.queryRenderedFeatures(v,l,this.transform))),d&&(C=C.concat(this.style.queryRenderedFeatureset(v,l,this.transform))),C}querySourceFeatures(v,l){return!v||typeof v=="string"&&!this._isValidId(v)?[]:this.style.querySourceFeatures(v,l)}isPointOnSurface(v){const{name:l}=this.transform.projection;return l!=="globe"&&l!=="mercator"&&i.w(`${l} projection does not support isPointOnSurface, this API may behave unexpectedly.`),this.transform.isPointOnSurface(i.P.convert(v))}addInteraction(v,l){return this._interactions.add(v,l),this}removeInteraction(v){return this._interactions.remove(v),this}setStyle(v,l){return l=i.l({},{localIdeographFontFamily:this._localIdeographFontFamily,localFontFamily:this._localFontFamily},l),this.style&&v&&l.diff!==!1&&l.localFontFamily===this._localFontFamily&&l.localIdeographFontFamily===this._localIdeographFontFamily&&!l.config?(this.style._diffStyle(v,(d,x)=>{d?(i.w(`Unable to perform style diff: ${String(d.message||d.error||d)}. Rebuilding the style from scratch.`),this._updateStyle(v,l)):x&&this._update(!0)},()=>{this._postStyleLoadEvent()}),this):(this._localIdeographFontFamily=l.localIdeographFontFamily,this._localFontFamily=l.localFontFamily,this._updateStyle(v,l))}_getUIString(v){const l=this._locale[v];if(l==null)throw new Error(`Missing UI string '${v}'`);return l}_updateStyle(v,l){if(this.style&&(this.style.setEventedParent(null),this.style._remove(),this.style=void 0),v){const d=i.l({},l);l&&l.config&&(d.initialConfig=l.config,delete d.config),this.style=new Bi(this,d).load(v),this.style.setEventedParent(this,{style:this.style})}return this._updateTerrain(),this}_lazyInitEmptyStyle(){this.style||(this.style=new Bi(this,{}),this.style.setEventedParent(this,{style:this.style}),this.style.loadEmpty())}getStyle(){if(this.style)return this.style.serialize()}isStyleLoaded(){return this.style?this.style.loaded():(i.w("There is no style added to the map."),!1)}_isValidId(v){return v==null?(this.fire(new i.y(new Error("IDs can't be empty."))),!1):!i.cr(v)||(this.fire(new i.y(new Error(`IDs can't contain special symbols: "${v}".`))),!1)}_isTargetValid(v){return"featuresetId"in v?this._isValidId("importId"in v?v.importId:v.featuresetId):"layerId"in v&&this._isValidId(v.layerId)}_areTargetsValid(v){if(Array.isArray(v)){for(const l of v)if(!this._isValidId(l))return!1;return!0}return this._isTargetValid(v)}addSource(v,l){return this._isValidId(v)?(this._lazyInitEmptyStyle(),this.style.addSource(v,l),this._update(!0)):this}isSourceLoaded(v){return!!this._isValidId(v)&&!!this.style&&this.style._isSourceCacheLoaded(v)}areTilesLoaded(){return this.style.areTilesLoaded()}addSourceType(v,l,d){this._lazyInitEmptyStyle(),this.style.addSourceType(v,l,d)}removeSource(v){return this._isValidId(v)?(this.style.removeSource(v),this._updateTerrain(),this._update(!0)):this}getSource(v){return this._isValidId(v)?this.style.getOwnSource(v):null}addImage(v,l,{pixelRatio:d=1,sdf:x=!1,stretchX:C,stretchY:B,content:F}={}){if(this._lazyInitEmptyStyle(),l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap){const{width:z,height:K,data:X}=i.q.getImageData(l);this.style.addImage(v,{data:new i.r({width:z,height:K},X),pixelRatio:d,stretchX:C,stretchY:B,content:F,sdf:x,version:0,usvg:!1})}else if(l.width===void 0||l.height===void 0)this.fire(new i.y(new Error("Invalid arguments to map.addImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));else{const{width:z,height:K}=l,X=l;this.style.addImage(v,{data:new i.r({width:z,height:K},new Uint8Array(X.data)),pixelRatio:d,stretchX:C,stretchY:B,content:F,sdf:x,usvg:!1,version:0,userImage:X}),X.onAdd&&X.onAdd(this,v)}}updateImage(v,l){this._lazyInitEmptyStyle();const d=this.style.getImage(v);if(!d)return void this.fire(new i.y(new Error("The map has no image with that id. If you are adding a new image use `map.addImage(...)` instead.")));const x=l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap?i.q.getImageData(l):l,{width:C,height:B,data:F}=x;if(C===void 0||B===void 0)return void this.fire(new i.y(new Error("Invalid arguments to map.updateImage(). The second argument must be an `HTMLImageElement`, `ImageData`, `ImageBitmap`, or object with `width`, `height`, and `data` properties with the same format as `ImageData`")));if(C!==(d.usvg?d.icon.usvg_tree.width:d.data.width)||B!==(d.usvg?d.icon.usvg_tree.height:d.data.height))return void this.fire(new i.y(new Error(`The width and height of the updated image (${C}, ${B})
                must be that same as the previous version of the image
                (${d.data.width}, ${d.data.height})`)));const z=!(l instanceof HTMLImageElement||ImageBitmap&&l instanceof ImageBitmap);let K=!1;d.usvg?(d.data=new i.r({width:C,height:B},new Uint8Array(F)),d.usvg=!1,d.icon=void 0,K=!0):d.data.replace(F,z),this.style.updateImage(v,d,K)}hasImage(v){return v?!!this.style&&!!this.style.getImage(v):(this.fire(new i.y(new Error("Missing required image id"))),!1)}removeImage(v){this.style.removeImage(v)}loadImage(v,l){i.o(this._requestManager.transformRequest(v,i.R.Image),(d,x)=>{l(d,x instanceof HTMLImageElement?i.q.getImageData(x):x)})}listImages(){return this.style.listImages()}addModel(v,l){this._lazyInitEmptyStyle(),this.style.addModel(v,l)}hasModel(v){return v?this.style.hasModel(v):(this.fire(new i.y(new Error("Missing required model id"))),!1)}removeModel(v){this.style.removeModel(v)}listModels(){return this.style.listModels()}addLayer(v,l){return this._isValidId(v.id)?(this._lazyInitEmptyStyle(),this.style.addLayer(v,l),this._update(!0)):this}getSlot(v){const l=this.getLayer(v);return l&&l.slot||null}setSlot(v,l){return this.style.setSlot(v,l),this.style.mergeLayers(),this._update(!0)}addImport(v,l){return this.style.addImport(v,l),this}updateImport(v,l){return typeof l!="string"&&l.id!==v?(this.removeImport(v),this.addImport(l)):(this.style.updateImport(v,l),this._update(!0))}removeImport(v){return this.style.removeImport(v),this}moveImport(v,l){return this.style.moveImport(v,l),this._update(!0)}moveLayer(v,l){return this._isValidId(v)?(this.style.moveLayer(v,l),this._update(!0)):this}removeLayer(v){return this._isValidId(v)?(this.style.removeLayer(v),this._update(!0)):this}getLayer(v){if(!this._isValidId(v))return null;const l=this.style.getOwnLayer(v);return l?l.type==="custom"?l.implementation:l.serialize():void 0}getSlots(){return this.style.getSlots()}setLayerZoomRange(v,l,d){return this._isValidId(v)?(this.style.setLayerZoomRange(v,l,d),this._update(!0)):this}setFilter(v,l,d={}){return this._isValidId(v)?(this.style.setFilter(v,l,d),this._update(!0)):this}getFilter(v){return this._isValidId(v)?this.style.getFilter(v):null}setPaintProperty(v,l,d,x={}){return this._isValidId(v)?(this.style.setPaintProperty(v,l,d,x),this._update(!0)):this}getPaintProperty(v,l){return this._isValidId(v)?this.style.getPaintProperty(v,l):null}setLayoutProperty(v,l,d,x={}){return this._isValidId(v)?(this.style.setLayoutProperty(v,l,d,x),this._update(!0)):this}getLayoutProperty(v,l){return this._isValidId(v)?this.style.getLayoutProperty(v,l):null}getSchema(v){return this.style.getSchema(v)}setSchema(v,l){return this.style.setSchema(v,l),this._update(!0)}getConfig(v){return this.style.getConfig(v)}setConfig(v,l){return this.style.setConfig(v,l),this._update(!0)}getConfigProperty(v,l){return this.style.getConfigProperty(v,l)}setConfigProperty(v,l,d){return this.style.setConfigProperty(v,l,d),this._update(!0)}getFeaturesetDescriptors(v){return this.style.getFeaturesetDescriptors(v)}setLights(v){if(this._lazyInitEmptyStyle(),v&&v.length===1&&v[0].type==="flat"){const l=v[0];l.properties?this.style.setFlatLight(l.properties,l.id,{}):this.style.setFlatLight({},"flat")}else this.style.setLights(v),this.painter.terrain&&(this.painter.terrain.invalidateRenderCache=!0);return this._update(!0)}getLights(){const v=this.style.getLights()||[];return v.length===0&&v.push({id:this.style.light.id,type:"flat",properties:this.style.getFlatLight()}),v}setLight(v,l={}){return console.log("The `map.setLight` function is deprecated, prefer using `map.setLights` with `flat` light type instead."),this.setLights([{id:"flat",type:"flat",properties:v}])}getLight(){return console.log("The `map.getLight` function is deprecated, prefer using `map.getLights` instead."),this.style.getFlatLight()}setTerrain(v){return this._lazyInitEmptyStyle(),!v&&this.transform.projection.requiresDraping?this.style.setTerrainForDraping():this.style.setTerrain(v),this._averageElevationLastSampledAt=-1/0,this._update(!0)}getTerrain(){return this.style?this.style.getTerrain():null}setFog(v){return this._lazyInitEmptyStyle(),this.style.setFog(v),this._update(!0)}getFog(){return this.style?this.style.getFog():null}setSnow(v){return this._lazyInitEmptyStyle(),this.style.setSnow(v),this._update(!0)}getSnow(){return this.style?this.style.getSnow():null}setRain(v){return this._lazyInitEmptyStyle(),this.style.setRain(v),this._update(!0)}getRain(){return this.style?this.style.getRain():null}setColorTheme(v){return this._lazyInitEmptyStyle(),this.style.setColorTheme(v),this._update(!0)}setImportColorTheme(v,l){return this._lazyInitEmptyStyle(),this.style.setImportColorTheme(v,l),this._update(!0)}setCamera(v){return this.style.setCamera(v),this._triggerCameraUpdate(v)}_triggerCameraUpdate(v){return this._update(this.transform.setOrthographicProjectionAtLowPitch(v["camera-projection"]==="orthographic"))}getCamera(){return this.style.camera}_queryFogOpacity(v){return this.style&&this.style.fog?this.style.fog.getOpacityAtLatLng(i.bO.convert(v),this.transform):0}setFeatureState(v,l){return v.source&&!this._isValidId(v.source)?this:(this.style.setFeatureState(v,l),this._update())}removeFeatureState(v,l){return v.source&&!this._isValidId(v.source)?this:(this.style.removeFeatureState(v,l),this._update())}getFeatureState(v){return v.source&&!this._isValidId(v.source)?null:this.style.getFeatureState(v)}_updateContainerDimensions(){if(!this._container)return;const v=this._container.getBoundingClientRect().width||400,l=this._container.getBoundingClientRect().height||300;let d,x,C,B=this._container;for(;B&&(!x||!C);){const F=window.getComputedStyle(B).transform;F&&F!=="none"&&(d=F.match(/matrix.*\((.+)\)/)[1].split(", "),d[0]&&d[0]!=="0"&&d[0]!=="1"&&(x=d[0]),d[3]&&d[3]!=="0"&&d[3]!=="1"&&(C=d[3])),B=B.parentElement}this._containerWidth=x?Math.abs(v/x):v,this._containerHeight=C?Math.abs(l/C):l}_detectMissingCSS(){window.getComputedStyle(this._missingCSSCanary).getPropertyValue("background-color")!=="rgb(250, 128, 114)"&&i.w("This page appears to be missing CSS declarations for Mapbox GL JS, which may cause the map to display incorrectly. Please ensure your page includes mapbox-gl.css, as described in https://www.mapbox.com/mapbox-gl-js/api/.")}_setupContainer(){const v=this._container;v.classList.add("mapboxgl-map"),(this._missingCSSCanary=N("div","mapboxgl-canary",v)).style.visibility="hidden",this._detectMissingCSS();const l=this._canvasContainer=N("div","mapboxgl-canvas-container",v);this._canvas=N("canvas","mapboxgl-canvas",l),this._interactive&&(l.classList.add("mapboxgl-interactive"),this._canvas.setAttribute("tabindex","0")),this._canvas.addEventListener("webglcontextlost",this._contextLost,!1),this._canvas.addEventListener("webglcontextrestored",this._contextRestored,!1),this._canvas.setAttribute("aria-label",this._getUIString("Map.Title")),this._canvas.setAttribute("role","region"),this._updateContainerDimensions(),this._resizeCanvas(this._containerWidth,this._containerHeight);const d=this._controlContainer=N("div","mapboxgl-control-container",v),x=this._controlPositions={};["top-left","top","top-right","right","bottom-right","bottom","bottom-left","left"].forEach(C=>{x[C]=N("div",`mapboxgl-ctrl-${C}`,d)}),this._container.addEventListener("scroll",this._onMapScroll,!1)}_resizeCanvas(v,l){const d=i.q.devicePixelRatio||1;this._canvas.width=d*Math.ceil(v),this._canvas.height=d*Math.ceil(l),this._canvas.style.width=`${v}px`,this._canvas.style.height=`${l}px`}_addMarker(v){this._markers.push(v)}_removeMarker(v){const l=this._markers.indexOf(v);l!==-1&&this._markers.splice(l,1)}_addPopup(v){this._popups.push(v)}_removePopup(v){const l=this._popups.indexOf(v);l!==-1&&this._popups.splice(l,1)}_setupPainter(){const v=i.l({},U.supported.webGLContextAttributes,{failIfMajorPerformanceCaveat:this._failIfMajorPerformanceCaveat,preserveDrawingBuffer:this._preserveDrawingBuffer,antialias:this._antialias||!1}),l=this._canvas.getContext("webgl2",v);l?(Zt(l,!0),this.painter=new hu(l,this._contextCreateOptions,this.transform,this._scaleFactor,this._tp),this.on("data",d=>{d.dataType==="source"&&this.painter.setTileLoadedFlag(!0)}),i.m.testSupport(l)):this.fire(new i.y(new Error("Failed to initialize WebGL")))}_contextLost(v){v.preventDefault(),this._frame&&(this._frame.cancel(),this._frame=null),this.fire(new i.z("webglcontextlost",{originalEvent:v}))}_contextRestored(v){this._setupPainter(),this.resize(),this._update(),this.fire(new i.z("webglcontextrestored",{originalEvent:v}))}_onMapScroll(v){if(v.target===this._container)return this._container.scrollTop=0,this._container.scrollLeft=0,!1}idle(){return!this.isMoving()&&this.loaded()}loaded(){return!this._styleDirty&&!this._sourcesDirty&&!!this.style&&this.style.loaded()}frameReady(){return this.loaded()&&!this._placementDirty}_update(v){return this.style?(this._styleDirty=this._styleDirty||v,this._sourcesDirty=!0,this.triggerRepaint(),this):this}_requestRenderFrame(v){return this._update(),this._renderTaskQueue.add(v)}_cancelRenderFrame(v){this._renderTaskQueue.remove(v)}_requestDomTask(v){!this.loaded()||this.loaded()&&!this.isMoving()?v():this._domRenderTaskQueue.add(v)}_render(v){let l;this.fire(new i.z("renderstart")),++this._frameId;const d=this.painter.context.extTimerQuery,x=i.q.now(),C=this.painter.context.gl;if(this.listens("gpu-timing-frame")&&(l=C.createQuery(),C.beginQuery(d.TIME_ELAPSED_EXT,l)),this.painter.context.setDirty(),this.painter.setBaseState(),(this.isMoving()||this.isRotating()||this.isZooming())&&(this._interactionRange[0]=Math.min(this._interactionRange[0],performance.now()),this._interactionRange[1]=Math.max(this._interactionRange[1],performance.now())),this._renderTaskQueue.run(v),this._domRenderTaskQueue.run(v),this._removed)return;this._updateProjectionTransition();const B=this._isInitialLoad?0:this._fadeDuration;if(this.style&&this._styleDirty){this._styleDirty=!1;const X=this.transform.zoom,J=this.transform.pitch,oe=i.q.now(),se=new i.a8(X,{now:oe,fadeDuration:B,pitch:J,transition:this.style.transition});this.style.update(se)}this.style&&this.style.hasFogTransition()&&(this.style._markersNeedUpdate=!0,this._sourcesDirty=!0);let F=!1;this.style&&this._sourcesDirty?(this._sourcesDirty=!1,this.painter._updateFog(this.style),this._updateTerrain(),F=this._updateAverageElevation(x),this.style.updateSources(this.transform),this._forceMarkerAndPopupUpdate()):F=this._updateAverageElevation(x);const z=this.style&&this.style._updatePlacement(this.painter,this.painter.transform,this.showCollisionBoxes,B,this._crossSourceCollisions,this.painter.replacementSource,this._scaleFactorChanged);if(this._scaleFactorChanged&&(this._scaleFactorChanged=!1),z&&(this._placementDirty=z.needsRerender),this.style&&this.painter.render(this.style,{showTileBoundaries:this.showTileBoundaries,showParseStatus:this.showParseStatus,wireframe:{terrain:this.showTerrainWireframe,layers2D:this.showLayers2DWireframe,layers3D:this.showLayers3DWireframe},showOverdrawInspector:this._showOverdrawInspector,showQueryGeometry:!!this._showQueryGeometry,showTileAABBs:this.showTileAABBs,rotating:this.isRotating(),zooming:this.isZooming(),moving:this.isMoving(),fadeDuration:B,isInitialLoad:this._isInitialLoad,showPadding:this.showPadding,gpuTiming:!!this.listens("gpu-timing-layer"),gpuTimingDeferredRender:!!this.listens("gpu-timing-deferred-render"),speedIndexTiming:this.speedIndexTiming}),this.fire(new i.z("render")),this.loaded()&&!this._loaded&&(this._loaded=!0,y.mark(g.load),this.fire(new i.z("load"))),this.style&&this.style.hasTransitions()&&(this._styleDirty=!0),this.style&&(this.style.snow||this.style.rain)&&(this._styleDirty=!0),this.style&&!this._placementDirty&&this.style._releaseSymbolFadeTiles(),l){const X=i.q.now()-x;C.endQuery(d.TIME_ELAPSED_EXT),setTimeout(()=>{const J=C.getQueryParameter(l,C.QUERY_RESULT)/1e6;C.deleteQuery(l),this.fire(new i.z("gpu-timing-frame",{cpuTime:X,gpuTime:J}))},50)}if(this.listens("gpu-timing-layer")){const X=this.painter.collectGpuTimers();setTimeout(()=>{const J=this.painter.queryGpuTimers(X);this.fire(new i.z("gpu-timing-layer",{layerTimes:J}))},50)}if(this.listens("gpu-timing-deferred-render")){const X=this.painter.collectDeferredRenderGpuQueries();setTimeout(()=>{const J=this.painter.queryGpuTimeDeferredRender(X);this.fire(new i.z("gpu-timing-deferred-render",{gpuTime:J}))},50)}const K=this._sourcesDirty||this._styleDirty||this._placementDirty||F;if(K||this._repaint)this.triggerRepaint();else{const X=this.idle();if(X&&(F=this._updateAverageElevation(x,!0)),F)this.triggerRepaint();else if(this._triggerFrame(!1),X&&(this.fire(new i.z("idle")),this._isInitialLoad=!1,this.speedIndexTiming)){const J=this._calculateSpeedIndex();this.fire(new i.z("speedindexcompleted",{speedIndex:J})),this.speedIndexTiming=!1}}!this._loaded||this._fullyLoaded||K||(this._fullyLoaded=!0,y.mark(g.fullLoad),this._performanceMetricsCollection&&Ot(this._requestManager._customAccessToken,{width:this.painter.width,height:this.painter.height,interactionRange:this._interactionRange,visibilityHidden:this._visibilityHidden,terrainEnabled:!!this.painter.style.getTerrain(),fogEnabled:!!this.painter.style.getFog(),projection:this.getProjection().name,zoom:this.transform.zoom,renderer:this.painter.context.renderer,vendor:this.painter.context.vendor}),this._authenticate())}_forceMarkerAndPopupUpdate(v){for(const l of this._markers)v&&!this.getRenderWorldCopies()&&(l._lngLat=l._lngLat.wrap()),l._update();for(const l of this._popups)!v||this.getRenderWorldCopies()||l._trackPointer||(l._lngLat=l._lngLat.wrap()),l._update()}_updateAverageElevation(v,l=!1){const d=C=>(this.transform.averageElevation=C,this._update(!1),!0);if(!this.painter.averageElevationNeedsEasing())return this.transform.averageElevation!==0&&d(0);const x=this.transform.elevation&&this.transform.elevation.exaggeration()!==this._averageElevationExaggeration;if(x||(l||v-this._averageElevationLastSampledAt>500)&&!this._averageElevation.isEasing(v)){const C=this.transform.averageElevation;let B=this.transform.sampleAverageElevation();this.transform.elevation!=null&&(this._averageElevationExaggeration=this.transform.elevation.exaggeration()),isNaN(B)?B=0:this._averageElevationLastSampledAt=v;const F=Math.abs(C-B);if(F>1){if(this._isInitialLoad||x)return this._averageElevation.jumpTo(B),d(B);this._averageElevation.easeTo(B,v,300)}else if(F>1e-4)return this._averageElevation.jumpTo(B),d(B)}return!!this._averageElevation.isEasing(v)&&d(this._averageElevation.getValue(v))}_authenticate(){Me(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,v=>{if(v&&(v.message===Te||v.status===401)){const l=this.painter.context.gl;Zt(l,!1),this._logoControl instanceof Fi&&this._logoControl._updateLogo(),l&&l.clear(l.DEPTH_BUFFER_BIT|l.COLOR_BUFFER_BIT|l.STENCIL_BUFFER_BIT),this._silenceAuthErrors||this.fire(new i.y(new Error("A valid Mapbox access token is required to use Mapbox GL JS. To create an account or a new access token, visit https://account.mapbox.com/")))}}),Ze(this._getMapId(),this._requestManager._skuToken,this._requestManager._customAccessToken,()=>{})}_postStyleLoadEvent(){this.style.globalId&&vt(this._requestManager._customAccessToken,{map:this,skuToken:this._requestManager._skuToken,style:this.style.globalId,importedStyles:this.style.getImportGlobalIds()})}_updateTerrain(){const v=this._isDragging();this.painter.updateTerrain(this.style,v)}_calculateSpeedIndex(){const v=this.painter.canvasCopy(),l=this.painter.getCanvasCopiesAndTimestamps();l.timeStamps.push(performance.now());const d=this.painter.context.gl,x=d.createFramebuffer();function C(B){d.framebufferTexture2D(d.FRAMEBUFFER,d.COLOR_ATTACHMENT0,d.TEXTURE_2D,B,0);const F=new Uint8Array(d.drawingBufferWidth*d.drawingBufferHeight*4);return d.readPixels(0,0,d.drawingBufferWidth,d.drawingBufferHeight,d.RGBA,d.UNSIGNED_BYTE,F),F}return d.bindFramebuffer(d.FRAMEBUFFER,x),this._canvasPixelComparison(C(v),l.canvasCopies.map(C),l.timeStamps)}_canvasPixelComparison(v,l,d){let x=d[1]-d[0];const C=v.length/4;for(let B=0;B<l.length;B++){const F=l[B];let z=0;for(let K=0;K<F.length;K+=4)F[K]===v[K]&&F[K+1]===v[K+1]&&F[K+2]===v[K+2]&&F[K+3]===v[K+3]&&(z+=1);x+=(d[B+2]-d[B+1])*(1-z/C)}return x}remove(){this._hash&&this._hash.remove();for(const l of this._controls)l.onRemove(this);this._controls=[],this._frame&&(this._frame.cancel(),this._frame=null),this._renderTaskQueue.clear(),this._domRenderTaskQueue.clear(),this.style&&this.style.destroy(),this.indoor.destroy(),this.painter.destroy(),this.handlers&&this.handlers.destroy(),this.handlers=void 0,this.setStyle(null),window.removeEventListener("resize",this._onWindowResize,!1),window.removeEventListener("orientationchange",this._onWindowResize,!1),window.removeEventListener(this._fullscreenchangeEvent,this._onWindowResize,!1),window.removeEventListener("online",this._onWindowOnline,!1),window.removeEventListener("visibilitychange",this._onVisibilityChange,!1);const v=this.painter.context.gl.getExtension("WEBGL_lose_context");v&&v.loseContext(),this._canvas.removeEventListener("webglcontextlost",this._contextLost,!1),this._canvas.removeEventListener("webglcontextrestored",this._contextRestored,!1),this._canvasContainer.remove(),this._controlContainer.remove(),this._missingCSSCanary.remove(),this._canvas=void 0,this._canvasContainer=void 0,this._controlContainer=void 0,this._missingCSSCanary=void 0,this._container.classList.remove("mapboxgl-map"),this._container.removeEventListener("scroll",this._onMapScroll,!1),Ht.delete(this.painter.context.gl),kt.remove(),me.remove(),this._removed=!0,this.fire(new i.z("remove"))}triggerRepaint(){this._triggerFrame(!0)}_triggerFrame(v){this._renderNextFrame=this._renderNextFrame||v,this.style&&!this._frame&&(this._frame=i.q.frame(l=>{const d=!!this._renderNextFrame;this._frame=null,this._renderNextFrame=null,d&&this._render(l)}))}_preloadTiles(v){const l=this.style?this.style.getSourceCaches():[];return i.bl(l,(d,x)=>d._preloadTiles(v,x),()=>{this.triggerRepaint()}),this}_onWindowOnline(){this._update()}_onWindowResize(v){this._trackResize&&this.resize({originalEvent:v})._update()}_onVisibilityChange(){document.visibilityState==="hidden"&&this._visibilityHidden++}get showTileBoundaries(){return!!this._showTileBoundaries}set showTileBoundaries(v){this._showTileBoundaries!==v&&(this._showTileBoundaries=v,this._tp.refreshUI(),this._update())}get showParseStatus(){return!!this._showParseStatus}set showParseStatus(v){this._showParseStatus!==v&&(this._showParseStatus=v,this._tp.refreshUI(),this._update())}get showTerrainWireframe(){return!!this._showTerrainWireframe}set showTerrainWireframe(v){this._showTerrainWireframe!==v&&(this._showTerrainWireframe=v,this._tp.refreshUI(),this._update())}get showLayers2DWireframe(){return!!this._showLayers2DWireframe}set showLayers2DWireframe(v){this._showLayers2DWireframe!==v&&(this._showLayers2DWireframe=v,this._tp.refreshUI(),this._update())}get showLayers3DWireframe(){return!!this._showLayers3DWireframe}set showLayers3DWireframe(v){this._showLayers3DWireframe!==v&&(this._showLayers3DWireframe=v,this._tp.refreshUI(),this._update())}get speedIndexTiming(){return!!this._speedIndexTiming}set speedIndexTiming(v){this._speedIndexTiming!==v&&(this._speedIndexTiming=v,this._update())}get showPadding(){return!!this._showPadding}set showPadding(v){this._showPadding!==v&&(this._showPadding=v,this._tp.refreshUI(),this._update())}get showCollisionBoxes(){return!!this._showCollisionBoxes}set showCollisionBoxes(v){this._showCollisionBoxes!==v&&(this._showCollisionBoxes=v,this._tp.refreshUI(),v?this.style._generateCollisionBoxes():this._update())}get showOverdrawInspector(){return!!this._showOverdrawInspector}set showOverdrawInspector(v){this._showOverdrawInspector!==v&&(this._showOverdrawInspector=v,this._tp.refreshUI(),this._update())}get repaint(){return!!this._repaint}set repaint(v){this._repaint!==v&&(this._repaint=v,this._tp.refreshUI(),this.triggerRepaint())}get vertices(){return!!this._vertices}set vertices(v){this._vertices=v,this._update()}get showTileAABBs(){return!!this._showTileAABBs}set showTileAABBs(v){this._showTileAABBs!==v&&(this._showTileAABBs=v,this._tp.refreshUI(),v&&this._update())}_setCacheLimits(v,l){i.dG(v,l)}get version(){return f}},NavigationControl:class{constructor(v={}){this.options=i.l({},es,v),this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._container.addEventListener("contextmenu",l=>l.preventDefault()),this.options.showZoom&&(i.aP(["_setButtonTitle","_updateZoomButtons"],this),this._zoomInButton=this._createButton("mapboxgl-ctrl-zoom-in",l=>{this._map&&this._map.zoomIn({},{originalEvent:l})}),N("span","mapboxgl-ctrl-icon",this._zoomInButton).setAttribute("aria-hidden","true"),this._zoomOutButton=this._createButton("mapboxgl-ctrl-zoom-out",l=>{this._map&&this._map.zoomOut({},{originalEvent:l})}),N("span","mapboxgl-ctrl-icon",this._zoomOutButton).setAttribute("aria-hidden","true")),this.options.showCompass&&(i.aP(["_rotateCompassArrow"],this),this._compass=this._createButton("mapboxgl-ctrl-compass",l=>{const d=this._map;d&&(this.options.visualizePitch?d.resetNorthPitch({},{originalEvent:l}):d.resetNorth({},{originalEvent:l}))}),this._compassIcon=N("span","mapboxgl-ctrl-icon",this._compass),this._compassIcon.setAttribute("aria-hidden","true"))}_updateZoomButtons(){const v=this._map;if(!v)return;const l=v.getZoom(),d=l===v.getMaxZoom(),x=l===v.getMinZoom();this._zoomInButton.disabled=d,this._zoomOutButton.disabled=x,this._zoomInButton.setAttribute("aria-disabled",d.toString()),this._zoomOutButton.setAttribute("aria-disabled",x.toString())}_rotateCompassArrow(){const v=this._map;if(!v)return;const l=this.options.visualizePitch?`scale(${1/Math.pow(Math.cos(v.transform.pitch*(Math.PI/180)),.5)}) rotateX(${v.transform.pitch}deg) rotateZ(${v.transform.angle*(180/Math.PI)}deg)`:`rotate(${v.transform.angle*(180/Math.PI)}deg)`;v._requestDomTask(()=>{this._compassIcon&&(this._compassIcon.style.transform=l)})}onAdd(v){return this._map=v,this.options.showZoom&&(this._setButtonTitle(this._zoomInButton,"ZoomIn"),this._setButtonTitle(this._zoomOutButton,"ZoomOut"),v.on("zoom",this._updateZoomButtons),this._updateZoomButtons()),this.options.showCompass&&(this._setButtonTitle(this._compass,"ResetBearing"),this.options.visualizePitch&&v.on("pitch",this._rotateCompassArrow),v.on("rotate",this._rotateCompassArrow),this._rotateCompassArrow(),this._handler=new Lf(v,this._compass,this.options.visualizePitch)),this._container}onRemove(){const v=this._map;v&&(this._container.remove(),this.options.showZoom&&v.off("zoom",this._updateZoomButtons),this.options.showCompass&&(this.options.visualizePitch&&v.off("pitch",this._rotateCompassArrow),v.off("rotate",this._rotateCompassArrow),this._handler&&this._handler.off(),this._handler=void 0),this._map=void 0)}_createButton(v,l){const d=N("button",v,this._container);return d.type="button",d.addEventListener("click",l),d}_setButtonTitle(v,l){if(!this._map)return;const d=this._map._getUIString(`NavigationControl.${l}`);v.setAttribute("aria-label",d),v.firstElementChild&&v.firstElementChild.setAttribute("title",d)}},GeolocateControl:class extends i.E{constructor(v={}){super();const l=navigator.geolocation;this.options=i.l({geolocation:l},Sp,v),i.aP(["_onSuccess","_onError","_onZoom","_finish","_setupUI","_updateCamera","_updateMarker","_updateMarkerRotation","_onDeviceOrientation"],this),this._updateMarkerRotationThrottled=nh(this._updateMarkerRotation,20),this._numberOfWatches=0}onAdd(v){return this._map=v,this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkGeolocationSupport(this._setupUI),this._container}onRemove(){this._geolocationWatchID!==void 0&&(this.options.geolocation.clearWatch(this._geolocationWatchID),this._geolocationWatchID=void 0),this.options.showUserLocation&&this._userLocationDotMarker&&this._userLocationDotMarker.remove(),this.options.showAccuracyCircle&&this._accuracyCircleMarker&&this._accuracyCircleMarker.remove(),this._container.remove(),this._map.off("zoom",this._onZoom),this._map=void 0,this._numberOfWatches=0,this._noTimeout=!1}_checkGeolocationSupport(v){const l=(d=!!this.options.geolocation)=>{this._supportsGeolocation=d,v(d)};this._supportsGeolocation!==void 0?v(this._supportsGeolocation):navigator.permissions!==void 0?navigator.permissions.query({name:"geolocation"}).then(d=>l(d.state!=="denied")).catch(()=>l()):l()}_isOutOfMapMaxBounds(v){const l=this._map.getMaxBounds(),d=v.coords;return!!l&&(d.longitude<l.getWest()||d.longitude>l.getEast()||d.latitude<l.getSouth()||d.latitude>l.getNorth())}_setErrorState(){switch(this._watchState){case"WAITING_ACTIVE":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"ACTIVE_LOCK":this._watchState="ACTIVE_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting");break;case"BACKGROUND":this._watchState="BACKGROUND_ERROR",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting")}}_onSuccess(v){if(this._map){if(this._isOutOfMapMaxBounds(v))return this._setErrorState(),this.fire(new i.z("outofmaxbounds",v)),this._updateMarker(),void this._finish();if(this.options.trackUserLocation)switch(this._lastKnownPosition=v,this._watchState){case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"BACKGROUND":case"BACKGROUND_ERROR":this._watchState="BACKGROUND",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background")}this.options.showUserLocation&&this._watchState!=="OFF"&&this._updateMarker(v),this.options.trackUserLocation&&this._watchState!=="ACTIVE_LOCK"||this._updateCamera(v),this.options.showUserLocation&&this._userLocationDotMarker.removeClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.z("geolocate",v)),this._finish()}}_updateCamera(v){const l=new i.bO(v.coords.longitude,v.coords.latitude),d=v.coords.accuracy,x=this._map.getBearing(),C=i.l({bearing:x},this.options.fitBoundsOptions);this._map.fitBounds(l.toBounds(d),C,{geolocateSource:!0})}_updateMarker(v){if(v){const l=new i.bO(v.coords.longitude,v.coords.latitude);this._accuracyCircleMarker.setLngLat(l).addTo(this._map),this._userLocationDotMarker.setLngLat(l).addTo(this._map),this._accuracy=v.coords.accuracy,this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}else this._userLocationDotMarker.remove(),this._accuracyCircleMarker.remove()}_updateCircleRadius(){const v=this._map.transform,l=i.bH(1,v._center.lat)*v.worldSize,d=Math.ceil(2*this._accuracy*l);this._circleElement.style.width=`${d}px`,this._circleElement.style.height=`${d}px`}_onZoom(){this.options.showUserLocation&&this.options.showAccuracyCircle&&this._updateCircleRadius()}_updateMarkerRotation(){this._userLocationDotMarker&&typeof this._heading=="number"?(this._userLocationDotMarker.setRotation(this._heading),this._userLocationDotMarker.addClassName("mapboxgl-user-location-show-heading")):(this._userLocationDotMarker.removeClassName("mapboxgl-user-location-show-heading"),this._userLocationDotMarker.setRotation(0))}_onError(v){if(this._map){if(this.options.trackUserLocation)if(v.code===1){this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this._geolocateButton.disabled=!0;const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l),this._geolocationWatchID!==void 0&&this._clearWatch()}else{if(v.code===3&&this._noTimeout)return;this._setErrorState()}this._watchState!=="OFF"&&this.options.showUserLocation&&this._userLocationDotMarker.addClassName("mapboxgl-user-location-dot-stale"),this.fire(new i.z("error",v)),this._finish()}}_finish(){this._timeoutId&&clearTimeout(this._timeoutId),this._timeoutId=void 0}_setupUI(v){if(this._map!==void 0){if(this._container.addEventListener("contextmenu",l=>l.preventDefault()),this._geolocateButton=N("button","mapboxgl-ctrl-geolocate",this._container),N("span","mapboxgl-ctrl-icon",this._geolocateButton).setAttribute("aria-hidden","true"),this._geolocateButton.type="button",v===!1){i.w("Geolocation support is not available so the GeolocateControl will be disabled.");const l=this._map._getUIString("GeolocateControl.LocationNotAvailable");this._geolocateButton.disabled=!0,this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}else{const l=this._map._getUIString("GeolocateControl.FindMyLocation");this._geolocateButton.setAttribute("aria-label",l),this._geolocateButton.firstElementChild&&this._geolocateButton.firstElementChild.setAttribute("title",l)}this.options.trackUserLocation&&(this._geolocateButton.setAttribute("aria-pressed","false"),this._watchState="OFF"),this.options.showUserLocation&&(this._dotElement=N("div","mapboxgl-user-location"),this._dotElement.appendChild(N("div","mapboxgl-user-location-dot")),this._dotElement.appendChild(N("div","mapboxgl-user-location-heading")),this._userLocationDotMarker=new Tg({element:this._dotElement,rotationAlignment:"map",pitchAlignment:"map"}),this._circleElement=N("div","mapboxgl-user-location-accuracy-circle"),this._accuracyCircleMarker=new Tg({element:this._circleElement,pitchAlignment:"map"}),this.options.trackUserLocation&&(this._watchState="OFF"),this._map.on("zoom",this._onZoom)),this._geolocateButton.addEventListener("click",this.trigger.bind(this)),this._setup=!0,this.options.trackUserLocation&&this._map.on("movestart",l=>{l.geolocateSource||this._watchState!=="ACTIVE_LOCK"||l.originalEvent&&l.originalEvent.type==="resize"||(this._watchState="BACKGROUND",this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this.fire(new i.z("trackuserlocationend")))})}}_onDeviceOrientation(v){this._userLocationDotMarker&&(v.webkitCompassHeading?this._heading=v.webkitCompassHeading:v.absolute===!0&&(this._heading=-1*v.alpha),this._updateMarkerRotationThrottled())}trigger(){if(!this._setup)return i.w("Geolocate control triggered before added to a map"),!1;if(this.options.trackUserLocation){switch(this._watchState){case"OFF":this._watchState="WAITING_ACTIVE",this.fire(new i.z("trackuserlocationstart"));break;case"WAITING_ACTIVE":case"ACTIVE_LOCK":case"ACTIVE_ERROR":case"BACKGROUND_ERROR":this._numberOfWatches--,this._noTimeout=!1,this._watchState="OFF",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-active-error"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background-error"),this.fire(new i.z("trackuserlocationend"));break;case"BACKGROUND":this._watchState="ACTIVE_LOCK",this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-background"),this._lastKnownPosition&&this._updateCamera(this._lastKnownPosition),this.fire(new i.z("trackuserlocationstart"))}switch(this._watchState){case"WAITING_ACTIVE":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_LOCK":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active");break;case"ACTIVE_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-active-error");break;case"BACKGROUND":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background");break;case"BACKGROUND_ERROR":this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-background-error")}if(this._watchState==="OFF"&&this._geolocationWatchID!==void 0)this._clearWatch();else if(this._geolocationWatchID===void 0){let v;this._geolocateButton.classList.add("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","true"),this._numberOfWatches++,this._numberOfWatches>1?(v={maximumAge:6e5,timeout:0},this._noTimeout=!0):(v=this.options.positionOptions,this._noTimeout=!1),this._geolocationWatchID=this.options.geolocation.watchPosition(this._onSuccess,this._onError,v),this.options.showUserHeading&&this._addDeviceOrientationListener()}}else this.options.geolocation.getCurrentPosition(this._onSuccess,this._onError,this.options.positionOptions),this._timeoutId=window.setTimeout(this._finish,1e4);return!0}_addDeviceOrientationListener(){const v=()=>{"ondeviceorientationabsolute"in window?window.addEventListener("deviceorientationabsolute",this._onDeviceOrientation):window.addEventListener("deviceorientation",this._onDeviceOrientation)};typeof DeviceMotionEvent<"u"&&typeof DeviceMotionEvent.requestPermission=="function"?DeviceOrientationEvent.requestPermission().then(l=>{l==="granted"&&v()}).catch(console.error):v()}_clearWatch(){this.options.geolocation.clearWatch(this._geolocationWatchID),window.removeEventListener("deviceorientation",this._onDeviceOrientation),window.removeEventListener("deviceorientationabsolute",this._onDeviceOrientation),this._geolocationWatchID=void 0,this._geolocateButton.classList.remove("mapboxgl-ctrl-geolocate-waiting"),this._geolocateButton.setAttribute("aria-pressed","false"),this.options.showUserLocation&&this._updateMarker(null)}},AttributionControl:bp,ScaleControl:class{constructor(v={}){this.options=i.l({},Mf,v),this._isNumberFormatSupported=function(){try{return new Intl.NumberFormat("en",{style:"unit",unitDisplay:"short",unit:"meter"}),!0}catch{return!1}}(),i.aP(["_update","_setScale","setUnit"],this)}getDefaultPosition(){return"bottom-left"}_update(){const v=this.options.maxWidth||100,l=this._map,d=l._containerHeight/2,x=l._containerWidth/2-v/2,C=l.unproject([x,d]),B=l.unproject([x+v,d]),F=C.distanceTo(B);if(this.options.unit==="imperial"){const z=3.2808*F;z>5280?this._setScale(v,z/5280,"mile"):this._setScale(v,z,"foot")}else this.options.unit==="nautical"?this._setScale(v,F/1852,"nautical-mile"):F>=1e3?this._setScale(v,F/1e3,"kilometer"):this._setScale(v,F,"meter")}_setScale(v,l,d){this._map._requestDomTask(()=>{const x=function(B){const F=Math.pow(10,`${Math.floor(B)}`.length-1);let z=B/F;return z=z>=10?10:z>=5?5:z>=3?3:z>=2?2:z>=1?1:function(K){const X=Math.pow(10,Math.ceil(-Math.log(K)/Math.LN10));return Math.round(K*X)/X}(z),F*z}(l),C=x/l;this._container.innerHTML=this._isNumberFormatSupported&&d!=="nautical-mile"?new Intl.NumberFormat(this._language,{style:"unit",unitDisplay:"short",unit:d}).format(x):`${x}&nbsp;${ua[d]}`,this._container.style.width=v*C+"px"})}onAdd(v){return this._map=v,this._language=v.getLanguage(),this._container=N("div","mapboxgl-ctrl mapboxgl-ctrl-scale",v.getContainer()),this._container.dir="auto",this._map.on("move",this._update),this._update(),this._container}onRemove(){this._container.remove(),this._map.off("move",this._update),this._map=void 0}_setLanguage(v){this._language=v,this._update()}setUnit(v){this.options.unit=v,this._update()}},FullscreenControl:class{constructor(v={}){this._fullscreen=!1,v&&v.container&&(v.container instanceof HTMLElement?this._container=v.container:i.w("Full screen control 'container' must be a DOM element.")),i.aP(["_onClickFullscreen","_changeIcon"],this),"onfullscreenchange"in document?this._fullscreenchange="fullscreenchange":"onwebkitfullscreenchange"in document&&(this._fullscreenchange="webkitfullscreenchange")}onAdd(v){return this._map=v,this._container||(this._container=this._map.getContainer()),this._controlContainer=N("div","mapboxgl-ctrl mapboxgl-ctrl-group"),this._checkFullscreenSupport()?this._setupUI():(this._controlContainer.style.display="none",i.w("This device does not support fullscreen mode.")),this._controlContainer}onRemove(){this._controlContainer.remove(),this._map=null,document.removeEventListener(this._fullscreenchange,this._changeIcon)}_checkFullscreenSupport(){return!(!document.fullscreenEnabled&&!document.webkitFullscreenEnabled)}_setupUI(){const v=this._fullscreenButton=N("button","mapboxgl-ctrl-fullscreen",this._controlContainer);N("span","mapboxgl-ctrl-icon",v).setAttribute("aria-hidden","true"),v.type="button",this._updateTitle(),this._fullscreenButton.addEventListener("click",this._onClickFullscreen),document.addEventListener(this._fullscreenchange,this._changeIcon)}_updateTitle(){const v=this._getTitle();this._fullscreenButton.setAttribute("aria-label",v),this._fullscreenButton.firstElementChild&&this._fullscreenButton.firstElementChild.setAttribute("title",v)}_getTitle(){return this._map._getUIString(this._isFullscreen()?"FullscreenControl.Exit":"FullscreenControl.Enter")}_isFullscreen(){return this._fullscreen}_changeIcon(){(document.fullscreenElement||document.webkitFullscreenElement)===this._container!==this._fullscreen&&(this._fullscreen=!this._fullscreen,this._fullscreenButton.classList.toggle("mapboxgl-ctrl-shrink"),this._fullscreenButton.classList.toggle("mapboxgl-ctrl-fullscreen"),this._updateTitle())}_onClickFullscreen(){this._isFullscreen()?document.exitFullscreen?document.exitFullscreen():document.webkitCancelFullScreen&&document.webkitCancelFullScreen():this._container.requestFullscreen?this._container.requestFullscreen():this._container.webkitRequestFullscreen&&this._container.webkitRequestFullscreen()}},Popup:class extends i.E{constructor(v){super(),this.options=i.l(Object.create(Ro),v),i.aP(["_update","_onClose","remove","_onMouseEvent"],this),this._classList=new Set(v&&v.className?v.className.trim().split(/\s+/):[])}addTo(v){return this._map&&this.remove(),this._map=v,this.options.closeOnClick&&v.on("preclick",this._onClose),this.options.closeOnMove&&v.on("move",this._onClose),v.on("remove",this.remove),this._update(),v._addPopup(this),this._focusFirstElement(),this._trackPointer?(v.on("mousemove",this._onMouseEvent),v.on("mouseup",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")):v.on("move",this._update),this.fire(new i.z("open")),this}isOpen(){return!!this._map}remove(){this._content&&this._content.remove(),this._container&&(this._container.remove(),this._container=void 0);const v=this._map;return v&&(v.off("move",this._update),v.off("move",this._onClose),v.off("preclick",this._onClose),v.off("click",this._onClose),v.off("remove",this.remove),v.off("mousemove",this._onMouseEvent),v.off("mouseup",this._onMouseEvent),v.off("drag",this._onMouseEvent),v._canvasContainer&&v._canvasContainer.classList.remove("mapboxgl-track-pointer"),v._removePopup(this),this._map=void 0),this.fire(new i.z("close")),this}getLngLat(){return this._lngLat}setLngLat(v){this._lngLat=i.bO.convert(v),this._pos=null,this._trackPointer=!1,this._update();const l=this._map;return l&&(l.on("move",this._update),l.off("mousemove",this._onMouseEvent),l._canvasContainer.classList.remove("mapboxgl-track-pointer")),this}trackPointer(){this._trackPointer=!0,this._pos=null,this._update();const v=this._map;return v&&(v.off("move",this._update),v.on("mousemove",this._onMouseEvent),v.on("drag",this._onMouseEvent),v._canvasContainer.classList.add("mapboxgl-track-pointer")),this}getElement(){return this._container}setText(v){return this.setDOMContent(document.createTextNode(v))}setHTML(v){const l=document.createDocumentFragment(),d=document.createElement("body");let x;for(d.innerHTML=v;x=d.firstChild,x;)l.appendChild(x);return this.setDOMContent(l)}getMaxWidth(){return this._container&&this._container.style.maxWidth}setMaxWidth(v){return this.options.maxWidth=v,this._update(),this}setDOMContent(v){let l=this._content;if(l)for(;l.hasChildNodes();)l.firstChild&&l.removeChild(l.firstChild);else l=this._content=N("div","mapboxgl-popup-content",this._container||void 0);if(l.appendChild(v),this.options.closeButton){const d=this._closeButton=N("button","mapboxgl-popup-close-button",l);d.type="button",d.setAttribute("aria-label","Close popup"),d.setAttribute("aria-hidden","true"),d.innerHTML="&#215;",d.addEventListener("click",this._onClose)}return this._update(),this._focusFirstElement(),this}addClassName(v){return this._classList.add(v),this._updateClassList(),this}removeClassName(v){return this._classList.delete(v),this._updateClassList(),this}setOffset(v){return this.options.offset=v,this._update(),this}toggleClassName(v){let l;return this._classList.delete(v)?l=!1:(this._classList.add(v),l=!0),this._updateClassList(),l}_onMouseEvent(v){this._update(v.point)}_getAnchor(v){if(this.options.anchor)return this.options.anchor;const l=this._map,d=this._container,x=this._pos;if(!l||!d||!x)return"bottom";const C=d.offsetWidth,B=d.offsetHeight,F=x.x<C/2,z=x.x>l.transform.width-C/2;if(x.y+v<B)return F?"top-left":z?"top-right":"top";if(x.y>l.transform.height-B){if(F)return"bottom-left";if(z)return"bottom-right"}return F?"left":z?"right":"bottom"}_updateClassList(){const v=this._container;if(!v)return;const l=[...this._classList];l.push("mapboxgl-popup"),this._anchor&&l.push(`mapboxgl-popup-anchor-${this._anchor}`),this._trackPointer&&l.push("mapboxgl-popup-track-pointer"),v.className=l.join(" ")}_update(v){const l=this._map,d=this._content;if(!l||!this._lngLat&&!this._trackPointer||!d)return;let x=this._container;if(x||(x=this._container=N("div","mapboxgl-popup",l.getContainer()),this._tip=N("div","mapboxgl-popup-tip",x),x.appendChild(d)),this.options.maxWidth&&x.style.maxWidth!==this.options.maxWidth&&(x.style.maxWidth=this.options.maxWidth),l.transform.renderWorldCopies&&!this._trackPointer&&(this._lngLat=h_(this._lngLat,this._pos,l.transform)),!this._trackPointer||v){const C=this._pos=this._trackPointer&&v instanceof i.P?v:l.project(this._lngLat),B=Av(this.options.offset),F=this._anchor=this._getAnchor(B.y),z=Av(this.options.offset,F),K=C.add(z).round();l._requestDomTask(()=>{this._container&&F&&(this._container.style.transform=`${P0[F]} translate(${K.x}px,${K.y}px)`)})}if(!this._marker&&l._showingGlobe()){const C=i.dH(l.transform,this._lngLat)?0:1;this._setOpacity(C)}this._updateClassList()}_focusFirstElement(){if(!this.options.focusAfterOpen||!this._container)return;const v=this._container.querySelector(Wa);v&&v.focus()}_onClose(){this.remove()}_setOpacity(v){this._container&&(this._container.style.opacity=`${v}`),this._content&&(this._content.style.pointerEvents=v?"auto":"none")}},Marker:Tg,Style:Bi,LngLat:i.bO,LngLatBounds:i.az,Point:i.P,MercatorCoordinate:i.aa,FreeCameraOptions:ed,Evented:i.E,config:i.e,prewarm:i.dM,clearPrewarmedResources:i.dN,get accessToken(){return i.e.ACCESS_TOKEN},set accessToken(v){i.e.ACCESS_TOKEN=v},get baseApiUrl(){return i.e.API_URL},set baseApiUrl(v){i.e.API_URL=v},get workerCount(){return i.dO.workerCount},set workerCount(v){i.dO.workerCount=v},get maxParallelImageRequests(){return i.e.MAX_PARALLEL_IMAGE_REQUESTS},set maxParallelImageRequests(v){i.e.MAX_PARALLEL_IMAGE_REQUESTS=v},clearStorage(v){i.dP(v)},get workerUrl(){return i.dQ.workerUrl},set workerUrl(v){i.dQ.workerUrl=v},get workerClass(){return i.dQ.workerClass},set workerClass(v){i.dQ.workerClass=v},get workerParams(){return i.dQ.workerParams},set workerParams(v){i.dQ.workerParams=v},get dracoUrl(){return i.dR()},set dracoUrl(v){i.dS(v)},get meshoptUrl(){return i.dT()},set meshoptUrl(v){i.dU(v)},setNow:i.q.setNow,restoreNow:i.q.restoreNow}});var c=s;return c})})(Sde);var Utt=Sde.exports;const il=mF(Utt),sg=Object.create(null);sg.open="0";sg.close="1";sg.ping="2";sg.pong="3";sg.message="4";sg.upgrade="5";sg.noop="6";const pI=Object.create(null);Object.keys(sg).forEach(e=>{pI[sg[e]]=e});const x6={type:"error",data:"parser error"},Ede=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",Tde=typeof ArrayBuffer=="function",Ide=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,hQ=({type:e,data:t},n,r)=>Ede&&t instanceof Blob?n?r(t):lY(t,r):Tde&&(t instanceof ArrayBuffer||Ide(t))?n?r(t):lY(new Blob([t]),r):r(sg[e]+(t||"")),lY=(e,t)=>{const n=new FileReader;return n.onload=function(){const r=n.result.split(",")[1];t("b"+(r||""))},n.readAsDataURL(e)};function cY(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let z5;function ztt(e,t){if(Ede&&e.data instanceof Blob)return e.data.arrayBuffer().then(cY).then(t);if(Tde&&(e.data instanceof ArrayBuffer||Ide(e.data)))return t(cY(e.data));hQ(e,!1,n=>{z5||(z5=new TextEncoder),t(z5.encode(n))})}const uY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",iC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<uY.length;e++)iC[uY.charCodeAt(e)]=e;const Qtt=e=>{let t=e.length*.75,n=e.length,r,s=0,a,c,i,f;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const g=new ArrayBuffer(t),y=new Uint8Array(g);for(r=0;r<n;r+=4)a=iC[e.charCodeAt(r)],c=iC[e.charCodeAt(r+1)],i=iC[e.charCodeAt(r+2)],f=iC[e.charCodeAt(r+3)],y[s++]=a<<2|c>>4,y[s++]=(c&15)<<4|i>>2,y[s++]=(i&3)<<6|f&63;return g},Htt=typeof ArrayBuffer=="function",fQ=(e,t)=>{if(typeof e!="string")return{type:"message",data:jde(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:Vtt(e.substring(1),t)}:pI[n]?e.length>1?{type:pI[n],data:e.substring(1)}:{type:pI[n]}:x6},Vtt=(e,t)=>{if(Htt){const n=Qtt(e);return jde(n,t)}else return{base64:!0,data:e}},jde=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},Fde="",$tt=(e,t)=>{const n=e.length,r=new Array(n);let s=0;e.forEach((a,c)=>{hQ(a,!1,i=>{r[c]=i,++s===n&&t(r.join(Fde))})})},Gtt=(e,t)=>{const n=e.split(Fde),r=[];for(let s=0;s<n.length;s++){const a=fQ(n[s],t);if(r.push(a),a.type==="error")break}return r};function Ktt(){return new TransformStream({transform(e,t){ztt(e,n=>{const r=n.length;let s;if(r<126)s=new Uint8Array(1),new DataView(s.buffer).setUint8(0,r);else if(r<65536){s=new Uint8Array(3);const a=new DataView(s.buffer);a.setUint8(0,126),a.setUint16(1,r)}else{s=new Uint8Array(9);const a=new DataView(s.buffer);a.setUint8(0,127),a.setBigUint64(1,BigInt(r))}e.data&&typeof e.data!="string"&&(s[0]|=128),t.enqueue(s),t.enqueue(n)})}})}let Q5;function G3(e){return e.reduce((t,n)=>t+n.length,0)}function K3(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let r=0;for(let s=0;s<t;s++)n[s]=e[0][r++],r===e[0].length&&(e.shift(),r=0);return e.length&&r<e[0].length&&(e[0]=e[0].slice(r)),n}function Wtt(e,t){Q5||(Q5=new TextDecoder);const n=[];let r=0,s=-1,a=!1;return new TransformStream({transform(c,i){for(n.push(c);;){if(r===0){if(G3(n)<1)break;const f=K3(n,1);a=(f[0]&128)===128,s=f[0]&127,s<126?r=3:s===126?r=1:r=2}else if(r===1){if(G3(n)<2)break;const f=K3(n,2);s=new DataView(f.buffer,f.byteOffset,f.length).getUint16(0),r=3}else if(r===2){if(G3(n)<8)break;const f=K3(n,8),g=new DataView(f.buffer,f.byteOffset,f.length),y=g.getUint32(0);if(y>Math.pow(2,21)-1){i.enqueue(x6);break}s=y*Math.pow(2,32)+g.getUint32(4),r=3}else{if(G3(n)<s)break;const f=K3(n,s);i.enqueue(fQ(a?f:Q5.decode(f),t)),r=0}if(s===0||s>e){i.enqueue(x6);break}}}})}const Pde=4;function Oc(e){if(e)return qtt(e)}function qtt(e){for(var t in Oc.prototype)e[t]=Oc.prototype[t];return e}Oc.prototype.on=Oc.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Oc.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Oc.prototype.off=Oc.prototype.removeListener=Oc.prototype.removeAllListeners=Oc.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var r,s=0;s<n.length;s++)if(r=n[s],r===t||r.fn===t){n.splice(s,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Oc.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],r=1;r<arguments.length;r++)t[r-1]=arguments[r];if(n){n=n.slice(0);for(var r=0,s=n.length;r<s;++r)n[r].apply(this,t)}return this};Oc.prototype.emitReserved=Oc.prototype.emit;Oc.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Oc.prototype.hasListeners=function(e){return!!this.listeners(e).length};const WP=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),Mp=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),Ztt="arraybuffer";function kde(e,...t){return t.reduce((n,r)=>(e.hasOwnProperty(r)&&(n[r]=e[r]),n),{})}const Xtt=Mp.setTimeout,Ytt=Mp.clearTimeout;function qP(e,t){t.useNativeTimers?(e.setTimeoutFn=Xtt.bind(Mp),e.clearTimeoutFn=Ytt.bind(Mp)):(e.setTimeoutFn=Mp.setTimeout.bind(Mp),e.clearTimeoutFn=Mp.clearTimeout.bind(Mp))}const Jtt=1.33;function ent(e){return typeof e=="string"?tnt(e):Math.ceil((e.byteLength||e.size)*Jtt)}function tnt(e){let t=0,n=0;for(let r=0,s=e.length;r<s;r++)t=e.charCodeAt(r),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(r++,n+=4);return n}function Lde(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function nnt(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function rnt(e){let t={},n=e.split("&");for(let r=0,s=n.length;r<s;r++){let a=n[r].split("=");t[decodeURIComponent(a[0])]=decodeURIComponent(a[1])}return t}class int extends Error{constructor(t,n,r){super(t),this.description=n,this.context=r,this.type="TransportError"}}class pQ extends Oc{constructor(t){super(),this.writable=!1,qP(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,r){return super.emitReserved("error",new int(t,n,r)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=fQ(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&+(this.opts.port!==443)||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=nnt(t);return n.length?"?"+n:""}}class snt extends pQ{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let r=0;this._polling&&(r++,this.once("pollComplete",function(){--r||n()})),this.writable||(r++,this.once("drain",function(){--r||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=r=>{if(this.readyState==="opening"&&r.type==="open"&&this.onOpen(),r.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(r)};Gtt(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,$tt(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=Lde()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let Mde=!1;try{Mde=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const ont=Mde;function ant(){}class lnt extends snt{constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let r=location.port;r||(r=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||r!==t.port}}doWrite(t,n){const r=this.request({method:"POST",data:t});r.on("success",n),r.on("error",(s,a)=>{this.onError("xhr post error",s,a)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,r)=>{this.onError("xhr poll error",n,r)}),this.pollXhr=t}}let lw=class AI extends Oc{constructor(t,n,r){super(),this.createRequest=t,qP(this,r),this._opts=r,this._method=r.method||"GET",this._uri=n,this._data=r.data!==void 0?r.data:null,this._create()}_create(){var t;const n=kde(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const r=this._xhr=this.createRequest(n);try{r.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){r.setDisableHeaderCheck&&r.setDisableHeaderCheck(!0);for(let s in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(s)&&r.setRequestHeader(s,this._opts.extraHeaders[s])}}catch{}if(this._method==="POST")try{r.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{r.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(r),"withCredentials"in r&&(r.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(r.timeout=this._opts.requestTimeout),r.onreadystatechange=()=>{var s;r.readyState===3&&((s=this._opts.cookieJar)===null||s===void 0||s.parseCookies(r.getResponseHeader("set-cookie"))),r.readyState===4&&(r.status===200||r.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof r.status=="number"?r.status:0)},0))},r.send(this._data)}catch(s){this.setTimeoutFn(()=>{this._onError(s)},0);return}typeof document<"u"&&(this._index=AI.requestsCount++,AI.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=ant,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete AI.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}};lw.requestsCount=0;lw.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",dY);else if(typeof addEventListener=="function"){const e="onpagehide"in Mp?"pagehide":"unload";addEventListener(e,dY,!1)}}function dY(){for(let e in lw.requests)lw.requests.hasOwnProperty(e)&&lw.requests[e].abort()}const cnt=function(){const e=Nde({xdomain:!1});return e&&e.responseType!==null}();class unt extends lnt{constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=cnt&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new lw(Nde,this.uri(),t)}}function Nde(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||ont))return new XMLHttpRequest}catch{}if(!t)try{return new Mp[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const Rde=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class dnt extends pQ{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,r=Rde?{}:kde(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(r.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,r)}catch(s){return this.emitReserved("error",s)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;hQ(r,this.supportsBinary,a=>{try{this.doWrite(r,a)}catch{}s&&WP(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=Lde()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const H5=Mp.WebSocket||Mp.MozWebSocket;class hnt extends dnt{createSocket(t,n,r){return Rde?new H5(t,n,r):n?new H5(t,n):new H5(t)}doWrite(t,n){this.ws.send(n)}}class fnt extends pQ{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=Wtt(Number.MAX_SAFE_INTEGER,this.socket.binaryType),r=t.readable.pipeThrough(n).getReader(),s=Ktt();s.readable.pipeTo(t.writable),this._writer=s.writable.getWriter();const a=()=>{r.read().then(({done:i,value:f})=>{i||(this.onPacket(f),a())}).catch(i=>{})};a();const c={type:"open"};this.query.sid&&(c.data=`{"sid":"${this.query.sid}"}`),this._writer.write(c).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const r=t[n],s=n===t.length-1;this._writer.write(r).then(()=>{s&&WP(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const pnt={websocket:hnt,webtransport:fnt,polling:unt},Ant=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,mnt=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function _6(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),r=e.indexOf("]");n!=-1&&r!=-1&&(e=e.substring(0,n)+e.substring(n,r).replace(/:/g,";")+e.substring(r,e.length));let s=Ant.exec(e||""),a={},c=14;for(;c--;)a[mnt[c]]=s[c]||"";return n!=-1&&r!=-1&&(a.source=t,a.host=a.host.substring(1,a.host.length-1).replace(/;/g,":"),a.authority=a.authority.replace("[","").replace("]","").replace(/;/g,":"),a.ipv6uri=!0),a.pathNames=gnt(a,a.path),a.queryKey=ynt(a,a.query),a}function gnt(e,t){const n=/\/{2,9}/g,r=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&r.splice(0,1),t.slice(-1)=="/"&&r.splice(r.length-1,1),r}function ynt(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(r,s,a){s&&(n[s]=a)}),n}const w6=typeof addEventListener=="function"&&typeof removeEventListener=="function",mI=[];w6&&addEventListener("offline",()=>{mI.forEach(e=>e())},!1);class Ly extends Oc{constructor(t,n){if(super(),this.binaryType=Ztt,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const r=_6(t);n.hostname=r.host,n.secure=r.protocol==="https"||r.protocol==="wss",n.port=r.port,r.query&&(n.query=r.query)}else n.host&&(n.hostname=_6(n.host).host);qP(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(r=>{const s=r.prototype.name;this.transports.push(s),this._transportsByName[s]=r}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=rnt(this.opts.query)),w6&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},mI.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=Pde,n.transport=t,this.id&&(n.sid=this.id);const r=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](r)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&Ly.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",Ly.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let r=0;r<this.writeBuffer.length;r++){const s=this.writeBuffer[r].data;if(s&&(n+=ent(s)),r>0&&n>this._maxPayload)return this.writeBuffer.slice(0,r);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,WP(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,r){return this._sendPacket("message",t,n,r),this}send(t,n,r){return this._sendPacket("message",t,n,r),this}_sendPacket(t,n,r,s){if(typeof n=="function"&&(s=n,n=void 0),typeof r=="function"&&(s=r,r=null),this.readyState==="closing"||this.readyState==="closed")return;r=r||{},r.compress=r.compress!==!1;const a={type:t,data:n,options:r};this.emitReserved("packetCreate",a),this.writeBuffer.push(a),s&&this.once("flush",s),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},r=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?r():t()}):this.upgrading?r():t()),this}_onError(t){if(Ly.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),w6&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const r=mI.indexOf(this._offlineEventListener);r!==-1&&mI.splice(r,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}Ly.protocol=Pde;class vnt extends Ly{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),r=!1;Ly.priorWebsocketSuccess=!1;const s=()=>{r||(n.send([{type:"ping",data:"probe"}]),n.once("packet",b=>{if(!r)if(b.type==="pong"&&b.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;Ly.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{r||this.readyState!=="closed"&&(y(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const T=new Error("probe error");T.transport=n.name,this.emitReserved("upgradeError",T)}}))};function a(){r||(r=!0,y(),n.close(),n=null)}const c=b=>{const T=new Error("probe error: "+b);T.transport=n.name,a(),this.emitReserved("upgradeError",T)};function i(){c("transport closed")}function f(){c("socket closed")}function g(b){n&&b.name!==n.name&&a()}const y=()=>{n.removeListener("open",s),n.removeListener("error",c),n.removeListener("close",i),this.off("close",f),this.off("upgrading",g)};n.once("open",s),n.once("error",c),n.once("close",i),this.once("close",f),this.once("upgrading",g),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{r||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let r=0;r<t.length;r++)~this.transports.indexOf(t[r])&&n.push(t[r]);return n}}let xnt=class extends vnt{constructor(t,n={}){const r=typeof t=="object"?t:n;(!r.transports||r.transports&&typeof r.transports[0]=="string")&&(r.transports=(r.transports||["polling","websocket","webtransport"]).map(s=>pnt[s]).filter(s=>!!s)),super(t,r)}};function _nt(e,t="",n){let r=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),r=_6(e)),r.port||(/^(http|ws)$/.test(r.protocol)?r.port="80":/^(http|ws)s$/.test(r.protocol)&&(r.port="443")),r.path=r.path||"/";const a=r.host.indexOf(":")!==-1?"["+r.host+"]":r.host;return r.id=r.protocol+"://"+a+":"+r.port+t,r.href=r.protocol+"://"+a+(n&&n.port===r.port?"":":"+r.port),r}const wnt=typeof ArrayBuffer=="function",bnt=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,Ode=Object.prototype.toString,Cnt=typeof Blob=="function"||typeof Blob<"u"&&Ode.call(Blob)==="[object BlobConstructor]",Snt=typeof File=="function"||typeof File<"u"&&Ode.call(File)==="[object FileConstructor]";function AQ(e){return wnt&&(e instanceof ArrayBuffer||bnt(e))||Cnt&&e instanceof Blob||Snt&&e instanceof File}function gI(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,r=e.length;n<r;n++)if(gI(e[n]))return!0;return!1}if(AQ(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return gI(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&gI(e[n]))return!0;return!1}function Bnt(e){const t=[],n=e.data,r=e;return r.data=b6(n,t),r.attachments=t.length,{packet:r,buffers:t}}function b6(e,t){if(!e)return e;if(AQ(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let r=0;r<e.length;r++)n[r]=b6(e[r],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const r in e)Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=b6(e[r],t));return n}return e}function Ent(e,t){return e.data=C6(e.data,t),delete e.attachments,e}function C6(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=C6(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=C6(e[n],t));return e}const Tnt=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],Int=5;var mo;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(mo||(mo={}));class jnt{constructor(t){this.replacer=t}encode(t){return(t.type===mo.EVENT||t.type===mo.ACK)&&gI(t)?this.encodeAsBinary({type:t.type===mo.EVENT?mo.BINARY_EVENT:mo.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===mo.BINARY_EVENT||t.type===mo.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=Bnt(t),r=this.encodeAsString(n.packet),s=n.buffers;return s.unshift(r),s}}function hY(e){return Object.prototype.toString.call(e)==="[object Object]"}class mQ extends Oc{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const r=n.type===mo.BINARY_EVENT;r||n.type===mo.BINARY_ACK?(n.type=r?mo.EVENT:mo.ACK,this.reconstructor=new Fnt(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(AQ(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const r={type:Number(t.charAt(0))};if(mo[r.type]===void 0)throw new Error("unknown packet type "+r.type);if(r.type===mo.BINARY_EVENT||r.type===mo.BINARY_ACK){const a=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const c=t.substring(a,n);if(c!=Number(c)||t.charAt(n)!=="-")throw new Error("Illegal attachments");r.attachments=Number(c)}if(t.charAt(n+1)==="/"){const a=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););r.nsp=t.substring(a,n)}else r.nsp="/";const s=t.charAt(n+1);if(s!==""&&Number(s)==s){const a=n+1;for(;++n;){const c=t.charAt(n);if(c==null||Number(c)!=c){--n;break}if(n===t.length)break}r.id=Number(t.substring(a,n+1))}if(t.charAt(++n)){const a=this.tryParse(t.substr(n));if(mQ.isPayloadValid(r.type,a))r.data=a;else throw new Error("invalid payload")}return r}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case mo.CONNECT:return hY(n);case mo.DISCONNECT:return n===void 0;case mo.CONNECT_ERROR:return typeof n=="string"||hY(n);case mo.EVENT:case mo.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&Tnt.indexOf(n[0])===-1);case mo.ACK:case mo.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class Fnt{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=Ent(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}const Pnt=Object.freeze(Object.defineProperty({__proto__:null,Decoder:mQ,Encoder:jnt,get PacketType(){return mo},protocol:Int},Symbol.toStringTag,{value:"Module"}));function NA(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const knt=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class Dde extends Oc{constructor(t,n,r){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,r&&r.auth&&(this.auth=r.auth),this._opts=Object.assign({},r),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[NA(t,"open",this.onopen.bind(this)),NA(t,"packet",this.onpacket.bind(this)),NA(t,"error",this.onerror.bind(this)),NA(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var r,s,a;if(knt.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const c={type:mo.EVENT,data:n};if(c.options={},c.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const y=this.ids++,b=n.pop();this._registerAckCallback(y,b),c.id=y}const i=(s=(r=this.io.engine)===null||r===void 0?void 0:r.transport)===null||s===void 0?void 0:s.writable,f=this.connected&&!(!((a=this.io.engine)===null||a===void 0)&&a._hasPingExpired());return this.flags.volatile&&!i||(f?(this.notifyOutgoingListeners(c),this.packet(c)):this.sendBuffer.push(c)),this.flags={},this}_registerAckCallback(t,n){var r;const s=(r=this.flags.timeout)!==null&&r!==void 0?r:this._opts.ackTimeout;if(s===void 0){this.acks[t]=n;return}const a=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let i=0;i<this.sendBuffer.length;i++)this.sendBuffer[i].id===t&&this.sendBuffer.splice(i,1);n.call(this,new Error("operation has timed out"))},s),c=(...i)=>{this.io.clearTimeoutFn(a),n.apply(this,i)};c.withError=!0,this.acks[t]=c}emitWithAck(t,...n){return new Promise((r,s)=>{const a=(c,i)=>c?s(c):r(i);a.withError=!0,n.push(a),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const r={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((s,...a)=>r!==this._queue[0]?void 0:(s!==null?r.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(s)):(this._queue.shift(),n&&n(null,...a)),r.pending=!1,this._drainQueue())),this._queue.push(r),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:mo.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(r=>String(r.id)===t)){const r=this.acks[t];delete this.acks[t],r.withError&&r.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case mo.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case mo.EVENT:case mo.BINARY_EVENT:this.onevent(t);break;case mo.ACK:case mo.BINARY_ACK:this.onack(t);break;case mo.DISCONNECT:this.ondisconnect();break;case mo.CONNECT_ERROR:this.destroy();const r=new Error(t.data.message);r.data=t.data.data,this.emitReserved("connect_error",r);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const r of n)r.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let r=!1;return function(...s){r||(r=!0,n.packet({type:mo.ACK,id:t,data:s}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this.emitReserved("connect"),this._drainQueue(!0)}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:mo.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let r=0;r<n.length;r++)if(t===n[r])return n.splice(r,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const r of n)r.apply(this,t.data)}}}function ub(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}ub.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};ub.prototype.reset=function(){this.attempts=0};ub.prototype.setMin=function(e){this.ms=e};ub.prototype.setMax=function(e){this.max=e};ub.prototype.setJitter=function(e){this.jitter=e};class S6 extends Oc{constructor(t,n){var r;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,qP(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((r=n.randomizationFactor)!==null&&r!==void 0?r:.5),this.backoff=new ub({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const s=n.parser||Pnt;this.encoder=new s.Encoder,this.decoder=new s.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new xnt(this.uri,this.opts);const n=this.engine,r=this;this._readyState="opening",this.skipReconnect=!1;const s=NA(n,"open",function(){r.onopen(),t&&t()}),a=i=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",i),t?t(i):this.maybeReconnectOnOpen()},c=NA(n,"error",a);if(this._timeout!==!1){const i=this._timeout,f=this.setTimeoutFn(()=>{s(),a(new Error("timeout")),n.close()},i);this.opts.autoUnref&&f.unref(),this.subs.push(()=>{this.clearTimeoutFn(f)})}return this.subs.push(s),this.subs.push(c),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(NA(t,"ping",this.onping.bind(this)),NA(t,"data",this.ondata.bind(this)),NA(t,"error",this.onerror.bind(this)),NA(t,"close",this.onclose.bind(this)),NA(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){WP(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let r=this.nsps[t];return r?this._autoConnect&&!r.active&&r.connect():(r=new Dde(this,t,n),this.nsps[t]=r),r}_destroy(t){const n=Object.keys(this.nsps);for(const r of n)if(this.nsps[r].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let r=0;r<n.length;r++)this.engine.write(n[r],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var r;this.cleanup(),(r=this.engine)===null||r===void 0||r.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const r=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(s=>{s?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",s)):t.onreconnect()}))},n);this.opts.autoUnref&&r.unref(),this.subs.push(()=>{this.clearTimeoutFn(r)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const N2={};function cw(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=_nt(e,t.path||"/socket.io"),r=n.source,s=n.id,a=n.path,c=N2[s]&&a in N2[s].nsps,i=t.forceNew||t["force new connection"]||t.multiplex===!1||c;let f;return i?f=new S6(r,t):(N2[s]||(N2[s]=new S6(r,t)),f=N2[s]),n.query&&!t.query&&(t.query=n.queryKey),f.socket(n.path,t)}Object.assign(cw,{Manager:S6,Socket:Dde,io:cw,connect:cw});const W3=cw("https://swiftlogix.cc/api",{reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,transports:["websocket"],autoConnect:!1}),Ude=({updateAddress:e,originCityCoords:t,destinationCityCoords:n,inTransit:r,transitShipments:s})=>{const[a,c]=q.useState([0,0]),[i,f]=q.useState("Your Location"),[g,y]=q.useState(null),[b,T]=q.useState(null),[S,U]=q.useState(null),[N,W]=q.useState(null),[L,Q]=q.useState(null),[V,Z]=q.useState(null),[ne,Y]=q.useState(!1),le=5e-4,[pe,_e]=q.useState(!1),ye=()=>{setTimeout(()=>{Y(!ne)},2e3)};q.useEffect(()=>{ye()},[]),q.useEffect(()=>(W3.connect(),()=>{W3.disconnect()}),[]),q.useEffect(()=>{const be=document.createElement("link");be.rel="stylesheet",be.href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css",document.head.appendChild(be),il.accessToken="pk.eyJ1IjoiaXRzcmVobWFuIiwiYSI6ImNtMjkwd3ZzeDAwZ3Myam42bXE4bmE0b3cifQ.M83dkK35hWBso_XVSYfvoQ";const Te=new il.Map({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:a,zoom:7}),Ee=document.createElement("div");Ee.innerHTML=`<img src=${wde} style="width: 35px; height: 35px; border-radius: 50%;">`;const Ne=new il.Marker({element:Ee}).setLngLat(a).setPopup(new il.Popup().setHTML(`<h3>${i}</h3>`)).addTo(Te);if(r&&t&&n){const Je=document.createElement("div");Je.innerHTML=`<img src=${bde} style="width: 35px; height: 35px; border-radius: 50%;">`;const Ue=new il.Marker({element:Je}).setLngLat(t).setPopup(new il.Popup().setHTML(`<h3>${L}</h3>`)).addTo(Te),Qe=document.createElement("div");Qe.innerHTML=`<img src=${Cde} style="width: 35px; height: 35px; border-radius: 50%;">`;const xe=new il.Marker({element:Qe}).setLngLat(n).setPopup(new il.Popup().setHTML(`<h3>${V}</h3>`)).addTo(Te);U(Ue),W(xe)}Te.addControl(new il.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),y(Te),T(Ne);const Ge=async()=>{const Je=`https://api.mapbox.com/directions/v5/mapbox/driving/${t.lng},${t.lat};${n.lng},${n.lat}?geometries=geojson&access_token=${il.accessToken}`;try{const Qe=await(await fetch(Je)).json();if(Qe.routes.length>0){const xe=Qe.routes[0].geometry;Te.getSource("route")&&(Te.removeLayer("route-line"),Te.removeSource("route")),Te.addSource("route",{type:"geojson",data:{type:"Feature",geometry:xe}}),Te.addLayer({id:"route-line",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#009688","line-width":4}})}else console.error("No routes found")}catch(Ue){console.error("Error fetching route:",Ue)}};return r&&t&&n&&Te.on("load",Ge),()=>{document.head.removeChild(be)}},[ne,a]),q.useEffect(()=>{if(g&&b&&(r?(b.setLngLat(a),b.getPopup().setHTML(`<h3>${i}</h3>`),g.flyTo({center:a,zoom:7})):(b.setLngLat(a),b.getPopup().setHTML(`<h3>${i}</h3>`),g.flyTo({center:a,zoom:15})),n)){const[be,Te]=[n.lng,n.lat],[Ee,Ne]=a;Math.abs(Ee-be)<le&&Math.abs(Ne-Te)<le&&_e(!0)}},[a,i,g,b,n]),navigator.geolocation?(navigator.geolocation.getCurrentPosition(be=>{c([be.coords.longitude,be.coords.latitude])},be=>{},{enableHighAccuracy:!0,timeout:1e4,maximumAge:0}),navigator.geolocation.watchPosition(async be=>{var Ne,Ge;const Te=[be.coords.longitude,be.coords.latitude];c(Te),W3.connected&&W3.emit("send-location",{coordinates:Te,transitShipments:s}),il.accessToken="pk.eyJ1IjoiaXRzcmVobWFuIiwiYSI6ImNtMjkwd3ZzeDAwZ3Myam42bXE4bmE0b3cifQ.M83dkK35hWBso_XVSYfvoQ";const Ee=`https://api.mapbox.com/geocoding/v5/mapbox.places/${Te[0]},${Te[1]}.json?access_token=${il.accessToken}`;try{const Ue=await(await fetch(Ee)).json();if(((Ne=Ue.features)==null?void 0:Ne.length)>0){const{place_name:Qe,context:xe}=Ue.features[0];let at=((Ge=xe==null?void 0:xe.find(we=>we==null?void 0:we.id.includes("place")))==null?void 0:Ge.text)||Qe.split(",")[0];f(at),e(at)}}catch(Je){console.error("Error fetching user location:",Je)}},be=>{console.error("Error retrieving live location:",be)},{enableHighAccuracy:!0,maximumAge:0,timeout:1e4})):console.log("Geolocation is not supported by this browser.");const he=async()=>{try{(await(await fetch("https://swiftlogix.cc/api/shipment-completed",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({transitShipments:s})})).json()).success&&(_e(!1),window.location.reload())}catch{}};return A.jsxs("div",{className:"w-full h-screen flex flex-col items-center pt-5",children:[A.jsx("div",{id:"map",className:"w-full sm:w-[90vw] md:w-[80vw] lg:w-[60vw] min-[1226px]:w-[50vw] h-screen sm:h-[400px] md:h-[450px] lg:h-[500px] m-[20px]  border-none shadow-xl rounded-lg overflow-hidden"}),pe&&A.jsx(A.Fragment,{children:A.jsx("div",{className:"w-full flex justify-center items-center fixed inset-0 px-4 sm:px-6 lg:px-8",children:A.jsxs("div",{className:"w-full max-w-md sm:max-w-lg p-5 md:max-w-xl lg:max-w-2xl bg-white rounded-3xl shadow-2xl flex flex-col items-center  relative transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-16 sm:w-20 shadow-2xl rounded-full absolute -top-12"}),A.jsx("p",{className:"text-gray-700 text-center text-xl sm:text-2xl md:text-3xl lg:text-4xl font-semibold",children:"Congratulations, you have successfully reached your destination."}),A.jsx("div",{onClick:he,className:"mt-4 px-6 py-3 bg-[#009688] text-white text-sm sm:text-base font-bold rounded cursor-pointer hover:bg-[#FF7043] transition duration-300",children:"Delivery Completed"})]})})})]})},gQ=({receiverFormData:e,onReceiverFormDataChange:t,onBackStep:n,onNextStep:r})=>{const[s,a]=q.useState(""),[c,i]=q.useState(!1),[f,g]=q.useState({receivername:"",receivercontact:"",receiveremail:"",receivercnic:"",receiverarea:"",receiverhouseno:"",receiveraddress:""}),y=N=>{const{name:W}=N.target;t(N),g({...f,[W]:""})},b=()=>{let N=!0,W={};return e.receivername?/^[a-zA-Z\s]+$/.test(e.receivername)||(W.receivername="Name must contain only alphabets",N=!1):(W.receivername="Name is required",N=!1),e.receivercontact?/^[0-9]+$/.test(e.receivercontact)||(W.receivercontact="Contact number must contain only digits",N=!1):(W.receivercontact="Contact number is required",N=!1),e.receiveremail?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(e.receiveremail)||(W.receiveremail="Please enter a valid email address",N=!1):(W.receiveremail="Email is required",N=!1),e.receivercnic?/^[0-9]{13}$/.test(e.receivercnic)||(W.receivercnic="CNIC must be exactly 13 digits",N=!1):(W.receivercnic="CNIC is required",N=!1),e.receiverarea||(W.receiverarea="Area/Town is required",N=!1),e.receiverhouseno||(W.receiverhouseno="Building/House no is required",N=!1),e.receiveraddress||(W.receiveraddress="Full Address is required",N=!1),g(W),N},T=()=>{b()&&r()},S=()=>{n()},U=N=>{a(N)};return A.jsxs("div",{className:"max-w-3xl mx-auto my-10 p-6 bg-white rounded-lg shadow-lg",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-700 text-center mb-6",children:"Receiver Information"}),A.jsxs("form",{children:[A.jsxs("div",{className:"w-full flex gap-4",children:[A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"receivername",value:e.receivername,onChange:y,placeholder:"Name*",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),f.receivername&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.receivername})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"receivercontact",value:e.receivercontact,onChange:y,placeholder:"Contact No*",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),f.receivercontact&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.receivercontact})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"receiverarea",value:e.receiverarea,onChange:y,placeholder:"Area/Town*",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),f.receiverarea&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.receiverarea})]})]}),A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"email",name:"receiveremail",value:e.receiveremail,onChange:y,placeholder:"Email Address*",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),f.receiveremail&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.receiveremail})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"receivercnic",value:e.receivercnic,onChange:y,placeholder:"CNIC*",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),f.receivercnic&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.receivercnic})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"receiverhouseno",value:e.receiverhouseno,onChange:y,placeholder:"Building/House No*",className:"w-full p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043]  focus:outline-none transition duration-200"}),f.receiverhouseno&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.receiverhouseno})]})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("div",{className:"flex gap-3",children:A.jsx("input",{type:"text",name:"receiveraddress",value:e.receiveraddress||s,onChange:y,placeholder:"Full Address*",className:"w-full p-2 border-2 border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"})}),f.receiveraddress&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.receiveraddress})]}),A.jsxs("div",{className:"flex justify-between mt-6",children:[A.jsx("button",{type:"button",onClick:S,className:"bg-[#FF7043] text-white py-2 px-4 rounded-full hover:bg-[#009688] transition duration-200 ease-in-out",children:"Back"}),A.jsx("button",{type:"button",onClick:T,className:"bg-[#009688] text-white py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out",children:"Next"})]})]}),c===!0&&A.jsx(Ude,{updateAddress:U})]})},yQ=({packageFormData:e,onPackageFormDataChange:t,onBackStep:n,onNextStep:r})=>{const[s,a]=q.useState({originCity:"",destinationCity:"",weight:"",pieces:"",pickupdate:"",pickuptime:"",insurance:"",pickupaddress:"",shipmentType:"",deliveryMethod:"",packageDescription:"",sensitivePackage:"",orignalprice:""}),[c,i]=q.useState("idle"),f=()=>{let S=!0,U={};return e.originCity||(U.originCity="Origin City is required",S=!1),e.destinationCity||(U.destinationCity="Destination City is required",S=!1),e.weight?(isNaN(e.weight)||e.weight<=0)&&(U.weight="Weight must be a positive number",S=!1):(U.weight="Weight is required",S=!1),e.pieces?(isNaN(e.pieces)||e.pieces<=0)&&(U.pieces="Pieces must be a positive number",S=!1):(U.pieces="Number of pieces is required",S=!1),e.shipmentType||(U.shipmentType="Shipment type is required",S=!1),e.deliveryMethod||(U.deliveryMethod="Delivery method is required",S=!1),e.insurance||(U.insurance="Insurance type is required",S=!1),e.sensitivePackage||(U.sensitivePackage="Sensitive Package? is required",S=!1),e.packageDescription||(U.packageDescription="Package Descripton is required",S=!1),e.deliveryMethod==="pickUpRider"&&(e.pickupdate||(U.pickupdate="Pickup date is required",S=!1),e.pickupaddress||(U.pickupaddress="Pickup address is required",S=!1),e.pickuptime||(U.pickuptime="Pickup time is required",S=!1)),/^\d+$/.test(e.orignalprice)||e.insurance==="no"||(U.orignalprice="Shipment price must be entered in digits only (e.g., 1200)",S=!1),!(e.orignalprice>0)&&e.insurance==="yes"&&(U.orignalprice="Orignal Price must be greater than 0",S=!1),a(U),S},g=S=>{const{name:U,value:N}=S.target;U==="pickupdate"&&t({target:{name:"pickuptime",value:""}}),t(S),a({...s,[U]:""})},y=()=>{f()&&(i("processing"),r())},b=()=>{n()},T=()=>{const S=["10:00 AM","11:00 AM","12:00 PM","01:00 PM","02:00 PM","03:00 PM","04:00 PM","05:00 PM"],U=new Date,N=new Date().toISOString().split("T")[0];if(e.pickupdate===N){const W=U.getHours(),L=U.getMinutes(),Q=W*60+L+120;return S.filter(V=>{const[Z,ne]=V.split(":"),Y=parseInt(ne),le=V.includes("PM");let pe=parseInt(Z);return le&&pe!==12&&(pe+=12),!le&&pe===12&&(pe=0),pe*60+Y>=Q})}return S};return q.useEffect(()=>{const S=new Date().toISOString().split("T")[0];t({target:{name:"pickupdate",value:S}})},[]),A.jsxs("div",{className:"max-w-3xl mx-auto my-10 p-6 bg-white rounded-lg shadow-lg",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-700 text-center mb-6",children:"Package Information"}),A.jsxs("form",{children:[A.jsxs("div",{className:"w-full flex gap-4",children:[A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsxs("select",{id:"originCity",name:"originCity",value:e.originCity,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Select Origin City*"}),A.jsx("option",{hidden:e.destinationCity==="Karachi",value:"Karachi",children:"Karachi"}),A.jsx("option",{hidden:e.destinationCity==="Islamabad",value:"Islamabad",children:"Islamabad"}),A.jsx("option",{hidden:e.destinationCity==="Lahore",value:"Lahore",children:"Lahore"}),A.jsx("option",{hidden:e.destinationCity==="Rawalpindi",value:"Rawalpindi",children:"Rawalpindi"}),A.jsx("option",{hidden:e.destinationCity==="Faisalabad",value:"Faisalabad",children:"Faisalabad"}),A.jsx("option",{hidden:e.destinationCity==="Sialkot",value:"Sialkot",children:"Sialkot"}),A.jsx("option",{hidden:e.destinationCity==="Multan",value:"Multan",children:"Multan"}),A.jsx("option",{hidden:e.destinationCity==="Peshawar",value:"Peshawar",children:"Peshawar"}),A.jsx("option",{hidden:e.destinationCity==="Quetta",value:"Quetta",children:"Quetta"}),A.jsx("option",{hidden:e.destinationCity==="Bahawalpur",value:"Bahawalpur",children:"Bahawalpur"}),A.jsx("option",{hidden:e.destinationCity==="Gujranwala",value:"Gujranwala",children:"Gujranwala"}),A.jsx("option",{hidden:e.destinationCity==="Sukkur",value:"Sukkur",children:"Sukkur"}),A.jsx("option",{hidden:e.destinationCity==="Mardan",value:"Mardan",children:"Mardan"}),A.jsx("option",{hidden:e.destinationCity==="Abbottabad",value:"Abbottabad",children:"Abbottabad"}),A.jsx("option",{hidden:e.destinationCity==="Khanpur, Rahim Yar Khan",value:"Khanpur, Rahim Yar Khan",children:"Khanpur"})]}),s.originCity&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.originCity})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"number",id:"weight",name:"weight",value:e.weight,onChange:g,placeholder:"Weight* (in kg)",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),s.weight&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.weight})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"number",id:"pieces",name:"pieces",value:e.pieces,onChange:g,placeholder:"Pieces*",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),s.pieces&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.pieces})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("select",{id:"insurance",name:"insurance",value:e.insurance,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Insurance Type*"}),A.jsx("option",{value:"yes",children:"Yes"}),A.jsx("option",{value:"no",children:"No"})]}),s.insurance&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.insurance})]}),e.insurance==="yes"&&A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",id:"insurance",name:"orignalprice",value:e.orignalprice,onChange:g,placeholder:"Shipment Orignal Price*",className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),s.orignalprice&&A.jsx("p",{className:"text-red-500 text-sm mt-1  ",children:s.orignalprice})]}),e.deliveryMethod==="pickUpRider"&&e.insurance!=="yes"&&A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("label",{htmlFor:"pickupdate",className:"absolute top-[9.5px] left-32",children:"Pickup Date*"}),A.jsx("input",{type:"date",id:"pickupdate",name:"pickupdate",value:e.pickupdate,onChange:g,min:new Date().toISOString().split("T")[0],className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),s.pickupdate&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.pickupdate})]}),e.deliveryMethod==="pickUpRider"&&e.pickupdate&&e.insurance==="yes"&&A.jsxs("div",{className:"mb-4",children:[A.jsxs("select",{id:"pickuptime",name:"pickuptime",value:e.pickuptime,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Pickup Time*"}),T().map(S=>A.jsx("option",{value:S,children:S},S))]}),s.pickuptime&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.pickuptime})]})]}),A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsxs("select",{id:"destinationCity",name:"destinationCity",value:e.destinationCity,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Select Destination City*"}),A.jsx("option",{hidden:e.originCity==="Karachi",value:"Karachi",children:"Karachi"}),A.jsx("option",{hidden:e.originCity==="Islamabad",value:"Islamabad",children:"Islamabad"}),A.jsx("option",{hidden:e.originCity==="Lahore",value:"Lahore",children:"Lahore"}),A.jsx("option",{hidden:e.originCity==="Rawalpindi",value:"Rawalpindi",children:"Rawalpindi"}),A.jsx("option",{hidden:e.originCity==="Faisalabad",value:"Faisalabad",children:"Faisalabad"}),A.jsx("option",{hidden:e.originCity==="Sialkot",value:"Sialkot",children:"Sialkot"}),A.jsx("option",{hidden:e.originCity==="Multan",value:"Multan",children:"Multan"}),A.jsx("option",{hidden:e.originCity==="Peshawar",value:"Peshawar",children:"Peshawar"}),A.jsx("option",{hidden:e.originCity==="Quetta",value:"Quetta",children:"Quetta"}),A.jsx("option",{hidden:e.originCity==="Bahawalpur",value:"Bahawalpur",children:"Bahawalpur"}),A.jsx("option",{hidden:e.originCity==="Gujranwala",value:"Gujranwala",children:"Gujranwala"}),A.jsx("option",{hidden:e.originCity==="Sukkur",value:"Sukkur",children:"Sukkur"}),A.jsx("option",{hidden:e.originCity==="Mardan",value:"Mardan",children:"Mardan"}),A.jsx("option",{hidden:e.originCity==="Abbottabad",value:"Abbottabad",children:"Abbottabad"}),A.jsx("option",{hidden:e.destinationCity==="Khanpur, Rahim Yar Khan",value:"Khanpur, Rahim Yar Khan",children:"Khanpur"})]}),s.destinationCity&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.destinationCity})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("select",{id:"shipmentType",name:"shipmentType",value:e.shipmentType,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Select Shipment Type*"}),A.jsx("option",{value:"Ground",children:"Ground"}),A.jsx("option",{value:"Express",children:"Express"})]}),s.shipmentType&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.shipmentType})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("select",{id:"deliveryMethod",name:"deliveryMethod",value:e.deliveryMethod,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Select Delivery Method*"}),A.jsx("option",{value:"pickUpRider",children:"Pick-Up by Rider"}),A.jsx("option",{value:"dropOffShop",children:"Drop-Off at Shop"})]}),s.deliveryMethod&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.deliveryMethod})]}),A.jsxs("div",{className:"mb-4",children:[A.jsxs("select",{id:"sensitivePackage",name:"sensitivePackage",value:e.sensitivePackage,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Sensitive Package?"}),A.jsx("option",{value:"no",children:"No"}),A.jsx("option",{value:"yes",children:"Yes"})]}),s.sensitivePackage&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.sensitivePackage})]}),e.deliveryMethod==="pickUpRider"&&e.pickupdate&&e.insurance!=="yes"&&A.jsxs("div",{className:"mb-4",children:[A.jsxs("select",{id:"pickuptime",name:"pickuptime",value:e.pickuptime,onChange:g,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Pickup Time*"}),T().map(S=>A.jsx("option",{value:S,children:S},S))]}),s.pickuptime&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.pickuptime})]}),e.deliveryMethod==="pickUpRider"&&e.insurance==="yes"&&A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("label",{htmlFor:"pickupdate",className:"absolute top-[9.5px] left-32",children:"Pickup Date*"}),A.jsx("input",{type:"date",id:"pickupdate",name:"pickupdate",value:e.pickupdate,onChange:g,min:new Date().toISOString().split("T")[0],className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),s.pickupdate&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.pickupdate})]})]})]}),e.deliveryMethod==="pickUpRider"&&A.jsxs("div",{className:"mb-4",children:[A.jsx("input",{type:"text",name:"pickupaddress",value:e.pickupaddress,onChange:g,placeholder:"Pickup Address*",className:"w-full p-2 border-2 border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"}),s.pickupaddress&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.pickupaddress})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("textarea",{id:"packageDescription",name:"packageDescription",placeholder:"Describe your Package...*",onChange:g,value:e.packageDescription,className:"w-full p-2 border-2 border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"}),s.packageDescription&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:s.packageDescription})]}),A.jsxs("div",{className:"flex justify-between mt-6",children:[A.jsx("button",{type:"button",onClick:b,className:"bg-[#FF7043] text-white py-2 px-4 rounded-full hover:bg-[#009688] transition duration-200 ease-in-out",children:"Back"}),A.jsxs("button",{type:"button",onClick:y,className:"relative bg-[#009688] text-white py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out",children:[A.jsx(Vu,{children:c==="success"&&A.jsx(Uo.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{opacity:0},className:"absolute left-[50%]",children:A.jsx(i0,{className:"text-white"})})}),A.jsx(Vu,{children:c==="processing"&&A.jsx(Uo.div,{initial:{opacity:0},animate:{opacity:1,rotate:360},exit:{opacity:0},transition:{repeat:1/0,duration:1,ease:"linear"},className:"absolute right-4 h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),A.jsx("span",{children:c==="processing"?"Processing...":c==="success"?"":"Next"})]})]})]})]})},Lnt=({packagePrice:e})=>A.jsx("div",{children:A.jsxs("div",{className:"w-[100vw] flex justify-center items-center flex-col  my-10  ",children:[A.jsxs("div",{className:"min-w-[60%] m-4",children:[" ",A.jsx("div",{className:"font-semibold text-4xl",children:"Price Details:"})]}),A.jsxs("div",{className:"min-w-[60%]  border-[2px] ",children:[A.jsxs("div",{className:"w-[100%] font-semibold bg-[#009688]  flex justify-center items-center",children:[A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:"Service"}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:"Base Price"}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:"Weight Charges"}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:"Distance Charges"}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:"Insurance"}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:"Total Price"})]}),A.jsxs("div",{className:"w-[100%] font-semibold  flex justify-center items-center",children:[A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:e.service}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:e.basePrice}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:e.weightCharges}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:e.distanceCharges}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:e.insurance}),A.jsx("div",{className:"w-[25%]  border-[1px] flex  items-center p-1",children:e.totalPrice})]})]})]})}),vQ=({senderFormData:e,receiverFormData:t,packageFormData:n,onBackStep:r,onNextStep:s,packagePrice:a})=>{const[c,i]=q.useState(!1),f=()=>{i(c===!1)};return A.jsxs("div",{className:"mt-3 px-4 md:px-8",children:[A.jsx("div",{className:"w-full flex justify-center items-center",children:A.jsxs("div",{className:"bg-white w-full max-w-4xl border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Sender Information"}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-6 text-gray-700",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Name:"})," ",e.sendername]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Contact:"})," ",e.sendercontact]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Email:"})," ",e.senderemail]}),A.jsxs("p",{children:[A.jsx("strong",{children:"CNIC:"})," ",e.sendercnic]})]})]})]})}),A.jsx("div",{className:"w-full flex justify-center items-center mt-6",children:A.jsxs("div",{className:"bg-white w-full max-w-4xl border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Receiver Information"}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-6 pb-2 text-gray-700",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Name:"})," ",t.receivername]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Contact:"})," ",t.receivercontact]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Area/Town:"})," ",t.receiverarea]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Email:"})," ",t.receiveremail]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"CNIC:"})," ",t.receivercnic]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Building/House no:"})," ",t.receiverhouseno]})]})]}),A.jsx("div",{className:"text-gray-700",children:A.jsxs("p",{children:[A.jsx("strong",{children:"Full Address:"})," ",t.receiveraddress]})})]})}),A.jsx("div",{className:"w-full flex justify-center items-center mt-6",children:A.jsxs("div",{className:"bg-white w-full max-w-4xl border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Package Information"}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-6 text-gray-700",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Origin City:"})," ",n.originCity]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Weight:"})," ",n.weight," kg"]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Destination City:"})," ",n.destinationCity]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pieces:"})," ",n.pieces]})]})]}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-6 text-gray-700 mt-4",children:[A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Shipment Type:"})," ",n.shipmentType]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Delivery Method:"})," ",n.deliveryMethod]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Sensitive Product:"})," ",n.sensitivePackage]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Insurance:"})," ",n.insurance]}),n.deliveryMethod==="pickUpRider"&&A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pick-up Date:"})," ",n.pickupdate]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pickup Time:"})," ",n.pickuptime]})]})]})]}),n.deliveryMethod==="pickUpRider"&&A.jsx("div",{className:"text-gray-700 mt-4",children:A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pickup Address:"})," ",n.pickupaddress]})}),A.jsx("div",{className:"text-gray-700 mt-4",children:A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Description:"})," ",n.packageDescription]})})]})}),A.jsxs("div",{className:"w-full flex flex-col items-center mt-6",children:[A.jsxs("div",{className:"w-full max-w-4xl flex justify-end gap-2 items-center px-2 mr-[10%]",children:[A.jsxs("p",{className:"text-lg md:text-xl",children:[A.jsx("strong",{className:"text-2xl",children:"Total Price:"})," ",a.totalPrice]}),c?A.jsx(Jte,{size:28,onClick:f,className:"cursor-pointer"}):A.jsx(Yte,{size:28,onClick:f,className:"cursor-pointer"})]}),c&&A.jsx(Lnt,{packagePrice:a})]}),A.jsx("div",{className:"w-full flex justify-center my-10",children:A.jsxs("div",{className:"w-full max-w-4xl flex flex-col sm:flex-row justify-between gap-4",children:[A.jsx("button",{onClick:r,className:"bg-[#FF7043] text-white sm:w-28 h-10  rounded-full hover:bg-[#009688] transition duration-200 ease-in-out",children:"Back"}),A.jsx("button",{onClick:s,className:"bg-[#009688] mb-10 text-white py-2 px-4 md:mr-[10%] rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out",children:"Make Payment"})]})})]})},Mnt="modulepreload",Nnt=function(e){return"/"+e},fY={},B6=function(t,n,r){let s=Promise.resolve();if(n&&n.length>0){document.getElementsByTagName("link");const c=document.querySelector("meta[property=csp-nonce]"),i=(c==null?void 0:c.nonce)||(c==null?void 0:c.getAttribute("nonce"));s=Promise.allSettled(n.map(f=>{if(f=Nnt(f),f in fY)return;fY[f]=!0;const g=f.endsWith(".css"),y=g?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${f}"]${y}`))return;const b=document.createElement("link");if(b.rel=g?"stylesheet":Mnt,g||(b.as="script"),b.crossOrigin="",b.href=f,i&&b.setAttribute("nonce",i),document.head.appendChild(b),g)return new Promise((T,S)=>{b.addEventListener("load",T),b.addEventListener("error",()=>S(new Error(`Unable to preload CSS for ${f}`)))})}))}function a(c){const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=c,window.dispatchEvent(i),!i.defaultPrevented)throw c}return s.then(c=>{for(const i of c||[])i.status==="rejected"&&a(i.reason);return t().catch(a)})};function sa(e){"@babel/helpers - typeof";return sa=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},sa(e)}var Id=Uint8Array,Wf=Uint16Array,xQ=Int32Array,ZP=new Id([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0,0,0,0]),XP=new Id([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13,0,0]),E6=new Id([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),zde=function(e,t){for(var n=new Wf(31),r=0;r<31;++r)n[r]=t+=1<<e[r-1];for(var s=new xQ(n[30]),r=1;r<30;++r)for(var a=n[r];a<n[r+1];++a)s[a]=a-n[r]<<5|r;return{b:n,r:s}},Qde=zde(ZP,2),Hde=Qde.b,T6=Qde.r;Hde[28]=258,T6[258]=28;var Vde=zde(XP,0),Rnt=Vde.b,pY=Vde.r,I6=new Wf(32768);for(var sl=0;sl<32768;++sl){var Z0=(sl&43690)>>1|(sl&21845)<<1;Z0=(Z0&52428)>>2|(Z0&13107)<<2,Z0=(Z0&61680)>>4|(Z0&3855)<<4,I6[sl]=((Z0&65280)>>8|(Z0&255)<<8)>>1}var eg=function(e,t,n){for(var r=e.length,s=0,a=new Wf(t);s<r;++s)e[s]&&++a[e[s]-1];var c=new Wf(t);for(s=1;s<t;++s)c[s]=c[s-1]+a[s-1]<<1;var i;if(n){i=new Wf(1<<t);var f=15-t;for(s=0;s<r;++s)if(e[s])for(var g=s<<4|e[s],y=t-e[s],b=c[e[s]-1]++<<y,T=b|(1<<y)-1;b<=T;++b)i[I6[b]>>f]=g}else for(i=new Wf(r),s=0;s<r;++s)e[s]&&(i[s]=I6[c[e[s]-1]++]>>15-e[s]);return i},Zy=new Id(288);for(var sl=0;sl<144;++sl)Zy[sl]=8;for(var sl=144;sl<256;++sl)Zy[sl]=9;for(var sl=256;sl<280;++sl)Zy[sl]=7;for(var sl=280;sl<288;++sl)Zy[sl]=8;var oB=new Id(32);for(var sl=0;sl<32;++sl)oB[sl]=5;var Ont=eg(Zy,9,0),Dnt=eg(Zy,9,1),Unt=eg(oB,5,0),znt=eg(oB,5,1),V5=function(e){for(var t=e[0],n=1;n<e.length;++n)e[n]>t&&(t=e[n]);return t},CA=function(e,t,n){var r=t/8|0;return(e[r]|e[r+1]<<8)>>(t&7)&n},$5=function(e,t){var n=t/8|0;return(e[n]|e[n+1]<<8|e[n+2]<<16)>>(t&7)},_Q=function(e){return(e+7)/8|0},$de=function(e,t,n){return(n==null||n>e.length)&&(n=e.length),new Id(e.subarray(t,n))},Qnt=["unexpected EOF","invalid block type","invalid length/literal","invalid distance","stream finished","no stream handler",,"no callback","invalid UTF-8 data","extra field too long","date not in range 1980-2099","filename too long","stream finishing","invalid zip data"],kA=function(e,t,n){var r=new Error(t||Qnt[e]);if(r.code=e,Error.captureStackTrace&&Error.captureStackTrace(r,kA),!n)throw r;return r},Hnt=function(e,t,n,r){var s=e.length,a=0;if(!s||t.f&&!t.l)return n||new Id(0);var c=!n,i=c||t.i!=2,f=t.i;c&&(n=new Id(s*3));var g=function(Ht){var Zt=n.length;if(Ht>Zt){var pn=new Id(Math.max(Zt*2,Ht));pn.set(n),n=pn}},y=t.f||0,b=t.p||0,T=t.b||0,S=t.l,U=t.d,N=t.m,W=t.n,L=s*8;do{if(!S){y=CA(e,b,1);var Q=CA(e,b+1,3);if(b+=3,Q)if(Q==1)S=Dnt,U=znt,N=9,W=5;else if(Q==2){var Y=CA(e,b,31)+257,le=CA(e,b+10,15)+4,pe=Y+CA(e,b+5,31)+1;b+=14;for(var _e=new Id(pe),ye=new Id(19),he=0;he<le;++he)ye[E6[he]]=CA(e,b+he*3,7);b+=le*3;for(var be=V5(ye),Te=(1<<be)-1,Ee=eg(ye,be,1),he=0;he<pe;){var Ne=Ee[CA(e,b,Te)];b+=Ne&15;var V=Ne>>4;if(V<16)_e[he++]=V;else{var Ge=0,Je=0;for(V==16?(Je=3+CA(e,b,3),b+=2,Ge=_e[he-1]):V==17?(Je=3+CA(e,b,7),b+=3):V==18&&(Je=11+CA(e,b,127),b+=7);Je--;)_e[he++]=Ge}}var Ue=_e.subarray(0,Y),Qe=_e.subarray(Y);N=V5(Ue),W=V5(Qe),S=eg(Ue,N,1),U=eg(Qe,W,1)}else kA(1);else{var V=_Q(b)+4,Z=e[V-4]|e[V-3]<<8,ne=V+Z;if(ne>s){f&&kA(0);break}i&&g(T+Z),n.set(e.subarray(V,ne),T),t.b=T+=Z,t.p=b=ne*8,t.f=y;continue}if(b>L){f&&kA(0);break}}i&&g(T+131072);for(var xe=(1<<N)-1,at=(1<<W)-1,we=b;;we=b){var Ge=S[$5(e,b)&xe],me=Ge>>4;if(b+=Ge&15,b>L){f&&kA(0);break}if(Ge||kA(2),me<256)n[T++]=me;else if(me==256){we=b,S=null;break}else{var Ze=me-254;if(me>264){var he=me-257,ot=ZP[he];Ze=CA(e,b,(1<<ot)-1)+Hde[he],b+=ot}var vt=U[$5(e,b)&at],Qt=vt>>4;vt||kA(3),b+=vt&15;var Qe=Rnt[Qt];if(Qt>3){var ot=XP[Qt];Qe+=$5(e,b)&(1<<ot)-1,b+=ot}if(b>L){f&&kA(0);break}i&&g(T+131072);var Ot=T+Ze;if(T<Qe){var kt=a-Qe,Me=Math.min(Qe,Ot);for(kt+T<0&&kA(3);T<Me;++T)n[T]=r[kt+T]}for(;T<Ot;++T)n[T]=n[T-Qe]}}t.l=S,t.p=we,t.b=T,t.f=y,S&&(y=1,t.m=N,t.d=U,t.n=W)}while(!y);return T!=n.length&&c?$de(n,0,T):n.subarray(0,T)},Rg=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8},R2=function(e,t,n){n<<=t&7;var r=t/8|0;e[r]|=n,e[r+1]|=n>>8,e[r+2]|=n>>16},G5=function(e,t){for(var n=[],r=0;r<e.length;++r)e[r]&&n.push({s:r,f:e[r]});var s=n.length,a=n.slice();if(!s)return{t:Kde,l:0};if(s==1){var c=new Id(n[0].s+1);return c[n[0].s]=1,{t:c,l:1}}n.sort(function(ne,Y){return ne.f-Y.f}),n.push({s:-1,f:25001});var i=n[0],f=n[1],g=0,y=1,b=2;for(n[0]={s:-1,f:i.f+f.f,l:i,r:f};y!=s-1;)i=n[n[g].f<n[b].f?g++:b++],f=n[g!=y&&n[g].f<n[b].f?g++:b++],n[y++]={s:-1,f:i.f+f.f,l:i,r:f};for(var T=a[0].s,r=1;r<s;++r)a[r].s>T&&(T=a[r].s);var S=new Wf(T+1),U=j6(n[y-1],S,0);if(U>t){var r=0,N=0,W=U-t,L=1<<W;for(a.sort(function(Y,le){return S[le.s]-S[Y.s]||Y.f-le.f});r<s;++r){var Q=a[r].s;if(S[Q]>t)N+=L-(1<<U-S[Q]),S[Q]=t;else break}for(N>>=W;N>0;){var V=a[r].s;S[V]<t?N-=1<<t-S[V]++-1:++r}for(;r>=0&&N;--r){var Z=a[r].s;S[Z]==t&&(--S[Z],++N)}U=t}return{t:new Id(S),l:U}},j6=function(e,t,n){return e.s==-1?Math.max(j6(e.l,t,n+1),j6(e.r,t,n+1)):t[e.s]=n},AY=function(e){for(var t=e.length;t&&!e[--t];);for(var n=new Wf(++t),r=0,s=e[0],a=1,c=function(f){n[r++]=f},i=1;i<=t;++i)if(e[i]==s&&i!=t)++a;else{if(!s&&a>2){for(;a>138;a-=138)c(32754);a>2&&(c(a>10?a-11<<5|28690:a-3<<5|12305),a=0)}else if(a>3){for(c(s),--a;a>6;a-=6)c(8304);a>2&&(c(a-3<<5|8208),a=0)}for(;a--;)c(s);a=1,s=e[i]}return{c:n.subarray(0,r),n:t}},O2=function(e,t){for(var n=0,r=0;r<t.length;++r)n+=e[r]*t[r];return n},Gde=function(e,t,n){var r=n.length,s=_Q(t+2);e[s]=r&255,e[s+1]=r>>8,e[s+2]=e[s]^255,e[s+3]=e[s+1]^255;for(var a=0;a<r;++a)e[s+a+4]=n[a];return(s+4+r)*8},mY=function(e,t,n,r,s,a,c,i,f,g,y){Rg(t,y++,n),++s[256];for(var b=G5(s,15),T=b.t,S=b.l,U=G5(a,15),N=U.t,W=U.l,L=AY(T),Q=L.c,V=L.n,Z=AY(N),ne=Z.c,Y=Z.n,le=new Wf(19),pe=0;pe<Q.length;++pe)++le[Q[pe]&31];for(var pe=0;pe<ne.length;++pe)++le[ne[pe]&31];for(var _e=G5(le,7),ye=_e.t,he=_e.l,be=19;be>4&&!ye[E6[be-1]];--be);var Te=g+5<<3,Ee=O2(s,Zy)+O2(a,oB)+c,Ne=O2(s,T)+O2(a,N)+c+14+3*be+O2(le,ye)+2*le[16]+3*le[17]+7*le[18];if(f>=0&&Te<=Ee&&Te<=Ne)return Gde(t,y,e.subarray(f,f+g));var Ge,Je,Ue,Qe;if(Rg(t,y,1+(Ne<Ee)),y+=2,Ne<Ee){Ge=eg(T,S,0),Je=T,Ue=eg(N,W,0),Qe=N;var xe=eg(ye,he,0);Rg(t,y,V-257),Rg(t,y+5,Y-1),Rg(t,y+10,be-4),y+=14;for(var pe=0;pe<be;++pe)Rg(t,y+3*pe,ye[E6[pe]]);y+=3*be;for(var at=[Q,ne],we=0;we<2;++we)for(var me=at[we],pe=0;pe<me.length;++pe){var Ze=me[pe]&31;Rg(t,y,xe[Ze]),y+=ye[Ze],Ze>15&&(Rg(t,y,me[pe]>>5&127),y+=me[pe]>>12)}}else Ge=Ont,Je=Zy,Ue=Unt,Qe=oB;for(var pe=0;pe<i;++pe){var ot=r[pe];if(ot>255){var Ze=ot>>18&31;R2(t,y,Ge[Ze+257]),y+=Je[Ze+257],Ze>7&&(Rg(t,y,ot>>23&31),y+=ZP[Ze]);var vt=ot&31;R2(t,y,Ue[vt]),y+=Qe[vt],vt>3&&(R2(t,y,ot>>5&8191),y+=XP[vt])}else R2(t,y,Ge[ot]),y+=Je[ot]}return R2(t,y,Ge[256]),y+Je[256]},Vnt=new xQ([65540,131080,131088,131104,262176,1048704,1048832,2114560,2117632]),Kde=new Id(0),$nt=function(e,t,n,r,s,a){var c=a.z||e.length,i=new Id(r+c+5*(1+Math.ceil(c/7e3))+s),f=i.subarray(r,i.length-s),g=a.l,y=(a.r||0)&7;if(t){y&&(f[0]=a.r>>3);for(var b=Vnt[t-1],T=b>>13,S=b&8191,U=(1<<n)-1,N=a.p||new Wf(32768),W=a.h||new Wf(U+1),L=Math.ceil(n/3),Q=2*L,V=function(Dt){return(e[Dt]^e[Dt+1]<<L^e[Dt+2]<<Q)&U},Z=new xQ(25e3),ne=new Wf(288),Y=new Wf(32),le=0,pe=0,_e=a.i||0,ye=0,he=a.w||0,be=0;_e+2<c;++_e){var Te=V(_e),Ee=_e&32767,Ne=W[Te];if(N[Ee]=Ne,W[Te]=Ee,he<=_e){var Ge=c-_e;if((le>7e3||ye>24576)&&(Ge>423||!g)){y=mY(e,f,0,Z,ne,Y,pe,ye,be,_e-be,y),ye=le=pe=0,be=_e;for(var Je=0;Je<286;++Je)ne[Je]=0;for(var Je=0;Je<30;++Je)Y[Je]=0}var Ue=2,Qe=0,xe=S,at=Ee-Ne&32767;if(Ge>2&&Te==V(_e-at))for(var we=Math.min(T,Ge)-1,me=Math.min(32767,_e),Ze=Math.min(258,Ge);at<=me&&--xe&&Ee!=Ne;){if(e[_e+Ue]==e[_e+Ue-at]){for(var ot=0;ot<Ze&&e[_e+ot]==e[_e+ot-at];++ot);if(ot>Ue){if(Ue=ot,Qe=at,ot>we)break;for(var vt=Math.min(at,ot-2),Qt=0,Je=0;Je<vt;++Je){var Ot=_e-at+Je&32767,kt=N[Ot],Me=Ot-kt&32767;Me>Qt&&(Qt=Me,Ne=Ot)}}}Ee=Ne,Ne=N[Ee],at+=Ee-Ne&32767}if(Qe){Z[ye++]=268435456|T6[Ue]<<18|pY[Qe];var Ht=T6[Ue]&31,Zt=pY[Qe]&31;pe+=ZP[Ht]+XP[Zt],++ne[257+Ht],++Y[Zt],he=_e+Ue,++le}else Z[ye++]=e[_e],++ne[e[_e]]}}for(_e=Math.max(_e,he);_e<c;++_e)Z[ye++]=e[_e],++ne[e[_e]];y=mY(e,f,g,Z,ne,Y,pe,ye,be,_e-be,y),g||(a.r=y&7|f[y/8|0]<<3,y-=7,a.h=W,a.p=N,a.i=_e,a.w=he)}else{for(var _e=a.w||0;_e<c+g;_e+=65535){var pn=_e+65535;pn>=c&&(f[y/8|0]=g,pn=c),y=Gde(f,y+1,e.subarray(_e,pn))}a.i=c}return $de(i,0,r+_Q(y)+s)},Wde=function(){var e=1,t=0;return{p:function(n){for(var r=e,s=t,a=n.length|0,c=0;c!=a;){for(var i=Math.min(c+2655,a);c<i;++c)s+=r+=n[c];r=(r&65535)+15*(r>>16),s=(s&65535)+15*(s>>16)}e=r,t=s},d:function(){return e%=65521,t%=65521,(e&255)<<24|(e&65280)<<8|(t&255)<<8|t>>8}}},Gnt=function(e,t,n,r,s){if(!s&&(s={l:1},t.dictionary)){var a=t.dictionary.subarray(-32768),c=new Id(a.length+e.length);c.set(a),c.set(e,a.length),e=c,s.w=a.length}return $nt(e,t.level==null?6:t.level,t.mem==null?s.l?Math.ceil(Math.max(8,Math.min(13,Math.log(e.length)))*1.5):20:12+t.mem,n,r,s)},qde=function(e,t,n){for(;n;++t)e[t]=n,n>>>=8},Knt=function(e,t){var n=t.level,r=n==0?0:n<6?1:n==9?3:2;if(e[0]=120,e[1]=r<<6|(t.dictionary&&32),e[1]|=31-(e[0]<<8|e[1])%31,t.dictionary){var s=Wde();s.p(t.dictionary),qde(e,2,s.d())}},Wnt=function(e,t){return((e[0]&15)!=8||e[0]>>4>7||(e[0]<<8|e[1])%31)&&kA(6,"invalid zlib data"),(e[1]>>5&1)==+!t&&kA(6,"invalid zlib data: "+(e[1]&32?"need":"unexpected")+" dictionary"),(e[1]>>3&4)+2};function F6(e,t){t||(t={});var n=Wde();n.p(e);var r=Gnt(e,t,t.dictionary?6:2,4);return Knt(r,t),qde(r,r.length-4,n.d()),r}function qnt(e,t){return Hnt(e.subarray(Wnt(e,t),-4),{i:2},t,t)}var Znt=typeof TextDecoder<"u"&&new TextDecoder,Xnt=0;try{Znt.decode(Kde,{stream:!0}),Xnt=1}catch{}var is=function(){return typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:this}();function K5(){is.console&&typeof is.console.log=="function"&&is.console.log.apply(is.console,arguments)}var Sa={log:K5,warn:function(e){is.console&&(typeof is.console.warn=="function"?is.console.warn.apply(is.console,arguments):K5.call(null,arguments))},error:function(e){is.console&&(typeof is.console.error=="function"?is.console.error.apply(is.console,arguments):K5(e))}};function W5(e,t,n){var r=new XMLHttpRequest;r.open("GET",e),r.responseType="blob",r.onload=function(){ex(r.response,t,n)},r.onerror=function(){Sa.error("could not download file")},r.send()}function gY(e){var t=new XMLHttpRequest;t.open("HEAD",e,!1);try{t.send()}catch{}return t.status>=200&&t.status<=299}function q3(e){try{e.dispatchEvent(new MouseEvent("click"))}catch{var t=document.createEvent("MouseEvents");t.initMouseEvent("click",!0,!0,window,0,0,0,80,20,!1,!1,!1,!1,0,null),e.dispatchEvent(t)}}var PC,P6,ex=is.saveAs||((typeof window>"u"?"undefined":sa(window))!=="object"||window!==is?function(){}:typeof HTMLAnchorElement<"u"&&"download"in HTMLAnchorElement.prototype?function(e,t,n){var r=is.URL||is.webkitURL,s=document.createElement("a");t=t||e.name||"download",s.download=t,s.rel="noopener",typeof e=="string"?(s.href=e,s.origin!==location.origin?gY(s.href)?W5(e,t,n):q3(s,s.target="_blank"):q3(s)):(s.href=r.createObjectURL(e),setTimeout(function(){r.revokeObjectURL(s.href)},4e4),setTimeout(function(){q3(s)},0))}:"msSaveOrOpenBlob"in navigator?function(e,t,n){if(t=t||e.name||"download",typeof e=="string")if(gY(e))W5(e,t,n);else{var r=document.createElement("a");r.href=e,r.target="_blank",setTimeout(function(){q3(r)})}else navigator.msSaveOrOpenBlob(function(s,a){return a===void 0?a={autoBom:!1}:sa(a)!=="object"&&(Sa.warn("Deprecated: Expected third argument to be a object"),a={autoBom:!a}),a.autoBom&&/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(s.type)?new Blob(["\uFEFF",s],{type:s.type}):s}(e,n),t)}:function(e,t,n,r){if((r=r||open("","_blank"))&&(r.document.title=r.document.body.innerText="downloading..."),typeof e=="string")return W5(e,t,n);var s=e.type==="application/octet-stream",a=/constructor/i.test(is.HTMLElement)||is.safari,c=/CriOS\/[\d]+/.test(navigator.userAgent);if((c||s&&a)&&(typeof FileReader>"u"?"undefined":sa(FileReader))==="object"){var i=new FileReader;i.onloadend=function(){var y=i.result;y=c?y:y.replace(/^data:[^;]*;/,"data:attachment/file;"),r?r.location.href=y:location=y,r=null},i.readAsDataURL(e)}else{var f=is.URL||is.webkitURL,g=f.createObjectURL(e);r?r.location=g:location.href=g,r=null,setTimeout(function(){f.revokeObjectURL(g)},4e4)}});/**
 * A class to parse color values
 * @author Stoyan Stefanov <sstoo@gmail.com>
 * {@link   http://www.phpied.com/rgb-color-parser-in-javascript/}
 * @license Use it if you like it
 */function Zde(e){var t;e=e||"",this.ok=!1,e.charAt(0)=="#"&&(e=e.substr(1,6)),e={aliceblue:"f0f8ff",antiquewhite:"faebd7",aqua:"00ffff",aquamarine:"7fffd4",azure:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"000000",blanchedalmond:"ffebcd",blue:"0000ff",blueviolet:"8a2be2",brown:"a52a2a",burlywood:"deb887",cadetblue:"5f9ea0",chartreuse:"7fff00",chocolate:"d2691e",coral:"ff7f50",cornflowerblue:"6495ed",cornsilk:"fff8dc",crimson:"dc143c",cyan:"00ffff",darkblue:"00008b",darkcyan:"008b8b",darkgoldenrod:"b8860b",darkgray:"a9a9a9",darkgreen:"006400",darkkhaki:"bdb76b",darkmagenta:"8b008b",darkolivegreen:"556b2f",darkorange:"ff8c00",darkorchid:"9932cc",darkred:"8b0000",darksalmon:"e9967a",darkseagreen:"8fbc8f",darkslateblue:"483d8b",darkslategray:"2f4f4f",darkturquoise:"00ced1",darkviolet:"9400d3",deeppink:"ff1493",deepskyblue:"00bfff",dimgray:"696969",dodgerblue:"1e90ff",feldspar:"d19275",firebrick:"b22222",floralwhite:"fffaf0",forestgreen:"228b22",fuchsia:"ff00ff",gainsboro:"dcdcdc",ghostwhite:"f8f8ff",gold:"ffd700",goldenrod:"daa520",gray:"808080",green:"008000",greenyellow:"adff2f",honeydew:"f0fff0",hotpink:"ff69b4",indianred:"cd5c5c",indigo:"4b0082",ivory:"fffff0",khaki:"f0e68c",lavender:"e6e6fa",lavenderblush:"fff0f5",lawngreen:"7cfc00",lemonchiffon:"fffacd",lightblue:"add8e6",lightcoral:"f08080",lightcyan:"e0ffff",lightgoldenrodyellow:"fafad2",lightgrey:"d3d3d3",lightgreen:"90ee90",lightpink:"ffb6c1",lightsalmon:"ffa07a",lightseagreen:"20b2aa",lightskyblue:"87cefa",lightslateblue:"8470ff",lightslategray:"778899",lightsteelblue:"b0c4de",lightyellow:"ffffe0",lime:"00ff00",limegreen:"32cd32",linen:"faf0e6",magenta:"ff00ff",maroon:"800000",mediumaquamarine:"66cdaa",mediumblue:"0000cd",mediumorchid:"ba55d3",mediumpurple:"9370d8",mediumseagreen:"3cb371",mediumslateblue:"7b68ee",mediumspringgreen:"00fa9a",mediumturquoise:"48d1cc",mediumvioletred:"c71585",midnightblue:"191970",mintcream:"f5fffa",mistyrose:"ffe4e1",moccasin:"ffe4b5",navajowhite:"ffdead",navy:"000080",oldlace:"fdf5e6",olive:"808000",olivedrab:"6b8e23",orange:"ffa500",orangered:"ff4500",orchid:"da70d6",palegoldenrod:"eee8aa",palegreen:"98fb98",paleturquoise:"afeeee",palevioletred:"d87093",papayawhip:"ffefd5",peachpuff:"ffdab9",peru:"cd853f",pink:"ffc0cb",plum:"dda0dd",powderblue:"b0e0e6",purple:"800080",red:"ff0000",rosybrown:"bc8f8f",royalblue:"4169e1",saddlebrown:"8b4513",salmon:"fa8072",sandybrown:"f4a460",seagreen:"2e8b57",seashell:"fff5ee",sienna:"a0522d",silver:"c0c0c0",skyblue:"87ceeb",slateblue:"6a5acd",slategray:"708090",snow:"fffafa",springgreen:"00ff7f",steelblue:"4682b4",tan:"d2b48c",teal:"008080",thistle:"d8bfd8",tomato:"ff6347",turquoise:"40e0d0",violet:"ee82ee",violetred:"d02090",wheat:"f5deb3",white:"ffffff",whitesmoke:"f5f5f5",yellow:"ffff00",yellowgreen:"9acd32"}[e=(e=e.replace(/ /g,"")).toLowerCase()]||e;for(var n=[{re:/^rgb\((\d{1,3}),\s*(\d{1,3}),\s*(\d{1,3})\)$/,example:["rgb(123, 234, 45)","rgb(255,234,245)"],process:function(i){return[parseInt(i[1]),parseInt(i[2]),parseInt(i[3])]}},{re:/^(\w{2})(\w{2})(\w{2})$/,example:["#00ff00","336699"],process:function(i){return[parseInt(i[1],16),parseInt(i[2],16),parseInt(i[3],16)]}},{re:/^(\w{1})(\w{1})(\w{1})$/,example:["#fb0","f0f"],process:function(i){return[parseInt(i[1]+i[1],16),parseInt(i[2]+i[2],16),parseInt(i[3]+i[3],16)]}}],r=0;r<n.length;r++){var s=n[r].re,a=n[r].process,c=s.exec(e);c&&(t=a(c),this.r=t[0],this.g=t[1],this.b=t[2],this.ok=!0)}this.r=this.r<0||isNaN(this.r)?0:this.r>255?255:this.r,this.g=this.g<0||isNaN(this.g)?0:this.g>255?255:this.g,this.b=this.b<0||isNaN(this.b)?0:this.b>255?255:this.b,this.toRGB=function(){return"rgb("+this.r+", "+this.g+", "+this.b+")"},this.toHex=function(){var i=this.r.toString(16),f=this.g.toString(16),g=this.b.toString(16);return i.length==1&&(i="0"+i),f.length==1&&(f="0"+f),g.length==1&&(g="0"+g),"#"+i+f+g}}/**
 * @license
 * Joseph Myers does not specify a particular license for his work.
 *
 * Author: Joseph Myers
 * Accessed from: http://www.myersdaily.org/joseph/javascript/md5.js
 *
 * Modified by: Owen Leong
 */function q5(e,t){var n=e[0],r=e[1],s=e[2],a=e[3];n=vd(n,r,s,a,t[0],7,-680876936),a=vd(a,n,r,s,t[1],12,-389564586),s=vd(s,a,n,r,t[2],17,606105819),r=vd(r,s,a,n,t[3],22,-1044525330),n=vd(n,r,s,a,t[4],7,-176418897),a=vd(a,n,r,s,t[5],12,1200080426),s=vd(s,a,n,r,t[6],17,-1473231341),r=vd(r,s,a,n,t[7],22,-45705983),n=vd(n,r,s,a,t[8],7,1770035416),a=vd(a,n,r,s,t[9],12,-1958414417),s=vd(s,a,n,r,t[10],17,-42063),r=vd(r,s,a,n,t[11],22,-1990404162),n=vd(n,r,s,a,t[12],7,1804603682),a=vd(a,n,r,s,t[13],12,-40341101),s=vd(s,a,n,r,t[14],17,-1502002290),n=xd(n,r=vd(r,s,a,n,t[15],22,1236535329),s,a,t[1],5,-165796510),a=xd(a,n,r,s,t[6],9,-1069501632),s=xd(s,a,n,r,t[11],14,643717713),r=xd(r,s,a,n,t[0],20,-373897302),n=xd(n,r,s,a,t[5],5,-701558691),a=xd(a,n,r,s,t[10],9,38016083),s=xd(s,a,n,r,t[15],14,-660478335),r=xd(r,s,a,n,t[4],20,-405537848),n=xd(n,r,s,a,t[9],5,568446438),a=xd(a,n,r,s,t[14],9,-1019803690),s=xd(s,a,n,r,t[3],14,-187363961),r=xd(r,s,a,n,t[8],20,1163531501),n=xd(n,r,s,a,t[13],5,-1444681467),a=xd(a,n,r,s,t[2],9,-51403784),s=xd(s,a,n,r,t[7],14,1735328473),n=_d(n,r=xd(r,s,a,n,t[12],20,-1926607734),s,a,t[5],4,-378558),a=_d(a,n,r,s,t[8],11,-2022574463),s=_d(s,a,n,r,t[11],16,1839030562),r=_d(r,s,a,n,t[14],23,-35309556),n=_d(n,r,s,a,t[1],4,-1530992060),a=_d(a,n,r,s,t[4],11,1272893353),s=_d(s,a,n,r,t[7],16,-155497632),r=_d(r,s,a,n,t[10],23,-1094730640),n=_d(n,r,s,a,t[13],4,681279174),a=_d(a,n,r,s,t[0],11,-358537222),s=_d(s,a,n,r,t[3],16,-722521979),r=_d(r,s,a,n,t[6],23,76029189),n=_d(n,r,s,a,t[9],4,-640364487),a=_d(a,n,r,s,t[12],11,-421815835),s=_d(s,a,n,r,t[15],16,530742520),n=wd(n,r=_d(r,s,a,n,t[2],23,-995338651),s,a,t[0],6,-198630844),a=wd(a,n,r,s,t[7],10,1126891415),s=wd(s,a,n,r,t[14],15,-1416354905),r=wd(r,s,a,n,t[5],21,-57434055),n=wd(n,r,s,a,t[12],6,1700485571),a=wd(a,n,r,s,t[3],10,-1894986606),s=wd(s,a,n,r,t[10],15,-1051523),r=wd(r,s,a,n,t[1],21,-2054922799),n=wd(n,r,s,a,t[8],6,1873313359),a=wd(a,n,r,s,t[15],10,-30611744),s=wd(s,a,n,r,t[6],15,-1560198380),r=wd(r,s,a,n,t[13],21,1309151649),n=wd(n,r,s,a,t[4],6,-145523070),a=wd(a,n,r,s,t[11],10,-1120210379),s=wd(s,a,n,r,t[2],15,718787259),r=wd(r,s,a,n,t[9],21,-343485551),e[0]=gy(n,e[0]),e[1]=gy(r,e[1]),e[2]=gy(s,e[2]),e[3]=gy(a,e[3])}function YP(e,t,n,r,s,a){return t=gy(gy(t,e),gy(r,a)),gy(t<<s|t>>>32-s,n)}function vd(e,t,n,r,s,a,c){return YP(t&n|~t&r,e,t,s,a,c)}function xd(e,t,n,r,s,a,c){return YP(t&r|n&~r,e,t,s,a,c)}function _d(e,t,n,r,s,a,c){return YP(t^n^r,e,t,s,a,c)}function wd(e,t,n,r,s,a,c){return YP(n^(t|~r),e,t,s,a,c)}function Xde(e){var t,n=e.length,r=[1732584193,-271733879,-1732584194,271733878];for(t=64;t<=e.length;t+=64)q5(r,Ynt(e.substring(t-64,t)));e=e.substring(t-64);var s=[0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0];for(t=0;t<e.length;t++)s[t>>2]|=e.charCodeAt(t)<<(t%4<<3);if(s[t>>2]|=128<<(t%4<<3),t>55)for(q5(r,s),t=0;t<16;t++)s[t]=0;return s[14]=8*n,q5(r,s),r}function Ynt(e){var t,n=[];for(t=0;t<64;t+=4)n[t>>2]=e.charCodeAt(t)+(e.charCodeAt(t+1)<<8)+(e.charCodeAt(t+2)<<16)+(e.charCodeAt(t+3)<<24);return n}PC=is.atob.bind(is),P6=is.btoa.bind(is);var yY="0123456789abcdef".split("");function Jnt(e){for(var t="",n=0;n<4;n++)t+=yY[e>>8*n+4&15]+yY[e>>8*n&15];return t}function ert(e){return String.fromCharCode((255&e)>>0,(65280&e)>>8,(16711680&e)>>16,(4278190080&e)>>24)}function k6(e){return Xde(e).map(ert).join("")}var trt=function(e){for(var t=0;t<e.length;t++)e[t]=Jnt(e[t]);return e.join("")}(Xde("hello"))!="5d41402abc4b2a76b9719d911017c592";function gy(e,t){if(trt){var n=(65535&e)+(65535&t);return(e>>16)+(t>>16)+(n>>16)<<16|65535&n}return e+t&4294967295}/**
 * @license
 * FPDF is released under a permissive license: there is no usage restriction.
 * You may embed it freely in your application (commercial or not), with or
 * without modifications.
 *
 * Reference: http://www.fpdf.org/en/script/script37.php
 */function L6(e,t){var n,r,s,a;if(e!==n){for(var c=(s=e,a=1+(256/e.length>>0),new Array(a+1).join(s)),i=[],f=0;f<256;f++)i[f]=f;var g=0;for(f=0;f<256;f++){var y=i[f];g=(g+y+c.charCodeAt(f))%256,i[f]=i[g],i[g]=y}n=e,r=i}else i=r;var b=t.length,T=0,S=0,U="";for(f=0;f<b;f++)S=(S+(y=i[T=(T+1)%256]))%256,i[T]=i[S],i[S]=y,c=i[(i[T]+i[S])%256],U+=String.fromCharCode(t.charCodeAt(f)^c);return U}/**
 * @license
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 * Author: Owen Leong (@owenl131)
 * Date: 15 Oct 2020
 * References:
 * https://www.cs.cmu.edu/~dst/Adobe/Gallery/anon21jul01-pdf-encryption.txt
 * https://github.com/foliojs/pdfkit/blob/master/lib/security.js
 * http://www.fpdf.org/en/script/script37.php
 */var vY={print:4,modify:8,copy:16,"annot-forms":32};function b1(e,t,n,r){this.v=1,this.r=2;var s=192;e.forEach(function(i){if(vY.perm!==void 0)throw new Error("Invalid permission: "+i);s+=vY[i]}),this.padding="(¿N^NuAd\0NVÿú\b..\0¶Ðh>/\f©þdSiz";var a=(t+this.padding).substr(0,32),c=(n+this.padding).substr(0,32);this.O=this.processOwnerPassword(a,c),this.P=-(1+(255^s)),this.encryptionKey=k6(a+this.O+this.lsbFirstWord(this.P)+this.hexToBytes(r)).substr(0,5),this.U=L6(this.encryptionKey,this.padding)}function C1(e){if(/[^\u0000-\u00ff]/.test(e))throw new Error("Invalid PDF Name Object: "+e+", Only accept ASCII characters.");for(var t="",n=e.length,r=0;r<n;r++){var s=e.charCodeAt(r);s<33||s===35||s===37||s===40||s===41||s===47||s===60||s===62||s===91||s===93||s===123||s===125||s>126?t+="#"+("0"+s.toString(16)).slice(-2):t+=e[r]}return t}function xY(e){if(sa(e)!=="object")throw new Error("Invalid Context passed to initialize PubSub (jsPDF-module)");var t={};this.subscribe=function(n,r,s){if(s=s||!1,typeof n!="string"||typeof r!="function"||typeof s!="boolean")throw new Error("Invalid arguments passed to PubSub.subscribe (jsPDF-module)");t.hasOwnProperty(n)||(t[n]={});var a=Math.random().toString(35);return t[n][a]=[r,!!s],a},this.unsubscribe=function(n){for(var r in t)if(t[r][n])return delete t[r][n],Object.keys(t[r]).length===0&&delete t[r],!0;return!1},this.publish=function(n){if(t.hasOwnProperty(n)){var r=Array.prototype.slice.call(arguments,1),s=[];for(var a in t[n]){var c=t[n][a];try{c[0].apply(e,r)}catch(i){is.console&&Sa.error("jsPDF PubSub Error",i.message,i)}c[1]&&s.push(a)}s.length&&s.forEach(this.unsubscribe)}},this.getTopics=function(){return t}}function aB(e){if(!(this instanceof aB))return new aB(e);var t="opacity,stroke-opacity".split(",");for(var n in e)e.hasOwnProperty(n)&&t.indexOf(n)>=0&&(this[n]=e[n]);this.id="",this.objectNumber=-1}function Yde(e,t){this.gState=e,this.matrix=t,this.id="",this.objectNumber=-1}function hy(e,t,n,r,s){if(!(this instanceof hy))return new hy(e,t,n,r,s);this.type=e==="axial"?2:3,this.coords=t,this.colors=n,Yde.call(this,r,s)}function px(e,t,n,r,s){if(!(this instanceof px))return new px(e,t,n,r,s);this.boundingBox=e,this.xStep=t,this.yStep=n,this.stream="",this.cloneIndex=0,Yde.call(this,r,s)}function Ni(e){var t,n=typeof arguments[0]=="string"?arguments[0]:"p",r=arguments[1],s=arguments[2],a=arguments[3],c=[],i=1,f=16,g="S",y=null;sa(e=e||{})==="object"&&(n=e.orientation,r=e.unit||r,s=e.format||s,a=e.compress||e.compressPdf||a,(y=e.encryption||null)!==null&&(y.userPassword=y.userPassword||"",y.ownerPassword=y.ownerPassword||"",y.userPermissions=y.userPermissions||[]),i=typeof e.userUnit=="number"?Math.abs(e.userUnit):1,e.precision!==void 0&&(t=e.precision),e.floatPrecision!==void 0&&(f=e.floatPrecision),g=e.defaultPathOperation||"S"),c=e.filters||(a===!0?["FlateEncode"]:c),r=r||"mm",n=(""+(n||"P")).toLowerCase();var b=e.putOnlyUsedFonts||!1,T={},S={internal:{},__private__:{}};S.__private__.PubSub=xY;var U="1.3",N=S.__private__.getPdfVersion=function(){return U};S.__private__.setPdfVersion=function(ce){U=ce};var W={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};S.__private__.getPageFormats=function(){return W};var L=S.__private__.getPageFormat=function(ce){return W[ce]};s=s||"a4";var Q={COMPAT:"compat",ADVANCED:"advanced"},V=Q.COMPAT;function Z(){this.saveGraphicsState(),Oe(new ve(cn,0,0,-cn,0,wu()*cn).toString()+" cm"),this.setFontSize(this.getFontSize()/cn),g="n",V=Q.ADVANCED}function ne(){this.restoreGraphicsState(),g="S",V=Q.COMPAT}var Y=S.__private__.combineFontStyleAndFontWeight=function(ce,Ke){if(ce=="bold"&&Ke=="normal"||ce=="bold"&&Ke==400||ce=="normal"&&Ke=="italic"||ce=="bold"&&Ke=="italic")throw new Error("Invalid Combination of fontweight and fontstyle");return Ke&&(ce=Ke==400||Ke==="normal"?ce==="italic"?"italic":"normal":Ke!=700&&Ke!=="bold"||ce!=="normal"?(Ke==700?"bold":Ke)+""+ce:"bold"),ce};S.advancedAPI=function(ce){var Ke=V===Q.COMPAT;return Ke&&Z.call(this),typeof ce!="function"||(ce(this),Ke&&ne.call(this)),this},S.compatAPI=function(ce){var Ke=V===Q.ADVANCED;return Ke&&ne.call(this),typeof ce!="function"||(ce(this),Ke&&Z.call(this)),this},S.isAdvancedAPI=function(){return V===Q.ADVANCED};var le,pe=function(ce){if(V!==Q.ADVANCED)throw new Error(ce+" is only available in 'advanced' API mode. You need to call advancedAPI() first.")},_e=S.roundToPrecision=S.__private__.roundToPrecision=function(ce,Ke){var Ft=t||Ke;if(isNaN(ce)||isNaN(Ft))throw new Error("Invalid argument passed to jsPDF.roundToPrecision");return ce.toFixed(Ft).replace(/0+$/,"")};le=S.hpf=S.__private__.hpf=typeof f=="number"?function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return _e(ce,f)}:f==="smart"?function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return _e(ce,ce>-1&&ce<1?16:5)}:function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.hpf");return _e(ce,16)};var ye=S.f2=S.__private__.f2=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.f2");return _e(ce,2)},he=S.__private__.f3=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.f3");return _e(ce,3)},be=S.scale=S.__private__.scale=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.scale");return V===Q.COMPAT?ce*cn:V===Q.ADVANCED?ce:void 0},Te=function(ce){return V===Q.COMPAT?wu()-ce:V===Q.ADVANCED?ce:void 0},Ee=function(ce){return be(Te(ce))};S.__private__.setPrecision=S.setPrecision=function(ce){typeof parseInt(ce,10)=="number"&&(t=parseInt(ce,10))};var Ne,Ge="00000000000000000000000000000000",Je=S.__private__.getFileId=function(){return Ge},Ue=S.__private__.setFileId=function(ce){return Ge=ce!==void 0&&/^[a-fA-F0-9]{32}$/.test(ce)?ce.toUpperCase():Ge.split("").map(function(){return"ABCDEF0123456789".charAt(Math.floor(16*Math.random()))}).join(""),y!==null&&(Ml=new b1(y.userPermissions,y.userPassword,y.ownerPassword,Ge)),Ge};S.setFileId=function(ce){return Ue(ce),this},S.getFileId=function(){return Je()};var Qe=S.__private__.convertDateToPDFDate=function(ce){var Ke=ce.getTimezoneOffset(),Ft=Ke<0?"+":"-",sn=Math.floor(Math.abs(Ke/60)),Sn=Math.abs(Ke%60),On=[Ft,Ze(sn),"'",Ze(Sn),"'"].join("");return["D:",ce.getFullYear(),Ze(ce.getMonth()+1),Ze(ce.getDate()),Ze(ce.getHours()),Ze(ce.getMinutes()),Ze(ce.getSeconds()),On].join("")},xe=S.__private__.convertPDFDateToDate=function(ce){var Ke=parseInt(ce.substr(2,4),10),Ft=parseInt(ce.substr(6,2),10)-1,sn=parseInt(ce.substr(8,2),10),Sn=parseInt(ce.substr(10,2),10),On=parseInt(ce.substr(12,2),10),dr=parseInt(ce.substr(14,2),10);return new Date(Ke,Ft,sn,Sn,On,dr,0)},at=S.__private__.setCreationDate=function(ce){var Ke;if(ce===void 0&&(ce=new Date),ce instanceof Date)Ke=Qe(ce);else{if(!/^D:(20[0-2][0-9]|203[0-7]|19[7-9][0-9])(0[0-9]|1[0-2])([0-2][0-9]|3[0-1])(0[0-9]|1[0-9]|2[0-3])(0[0-9]|[1-5][0-9])(0[0-9]|[1-5][0-9])(\+0[0-9]|\+1[0-4]|-0[0-9]|-1[0-1])'(0[0-9]|[1-5][0-9])'?$/.test(ce))throw new Error("Invalid argument passed to jsPDF.setCreationDate");Ke=ce}return Ne=Ke},we=S.__private__.getCreationDate=function(ce){var Ke=Ne;return ce==="jsDate"&&(Ke=xe(Ne)),Ke};S.setCreationDate=function(ce){return at(ce),this},S.getCreationDate=function(ce){return we(ce)};var me,Ze=S.__private__.padd2=function(ce){return("0"+parseInt(ce)).slice(-2)},ot=S.__private__.padd2Hex=function(ce){return("00"+(ce=ce.toString())).substr(ce.length)},vt=0,Qt=[],Ot=[],kt=0,Me=[],Ht=[],Zt=!1,pn=Ot,Dt=function(){vt=0,kt=0,Ot=[],Qt=[],Me=[],Nt=pt(),rn=pt()};S.__private__.setCustomOutputDestination=function(ce){Zt=!0,pn=ce};var hn=function(ce){Zt||(pn=ce)};S.__private__.resetCustomOutputDestination=function(){Zt=!1,pn=Ot};var Oe=S.__private__.out=function(ce){return ce=ce.toString(),kt+=ce.length+1,pn.push(ce),pn},nn=S.__private__.write=function(ce){return Oe(arguments.length===1?ce.toString():Array.prototype.join.call(arguments," "))},Vt=S.__private__.getArrayBuffer=function(ce){for(var Ke=ce.length,Ft=new ArrayBuffer(Ke),sn=new Uint8Array(Ft);Ke--;)sn[Ke]=ce.charCodeAt(Ke);return Ft},$t=[["Helvetica","helvetica","normal","WinAnsiEncoding"],["Helvetica-Bold","helvetica","bold","WinAnsiEncoding"],["Helvetica-Oblique","helvetica","italic","WinAnsiEncoding"],["Helvetica-BoldOblique","helvetica","bolditalic","WinAnsiEncoding"],["Courier","courier","normal","WinAnsiEncoding"],["Courier-Bold","courier","bold","WinAnsiEncoding"],["Courier-Oblique","courier","italic","WinAnsiEncoding"],["Courier-BoldOblique","courier","bolditalic","WinAnsiEncoding"],["Times-Roman","times","normal","WinAnsiEncoding"],["Times-Bold","times","bold","WinAnsiEncoding"],["Times-Italic","times","italic","WinAnsiEncoding"],["Times-BoldItalic","times","bolditalic","WinAnsiEncoding"],["ZapfDingbats","zapfdingbats","normal",null],["Symbol","symbol","normal",null]];S.__private__.getStandardFonts=function(){return $t};var xn=e.fontSize||16;S.__private__.setFontSize=S.setFontSize=function(ce){return xn=V===Q.ADVANCED?ce/cn:ce,this};var Xt,gn=S.__private__.getFontSize=S.getFontSize=function(){return V===Q.COMPAT?xn:xn*cn},rr=e.R2L||!1;S.__private__.setR2L=S.setR2L=function(ce){return rr=ce,this},S.__private__.getR2L=S.getR2L=function(){return rr};var Gt,Rn=S.__private__.setZoomMode=function(ce){var Ke=[void 0,null,"fullwidth","fullheight","fullpage","original"];if(/^(?:\d+\.\d*|\d*\.\d+|\d+)%$/.test(ce))Xt=ce;else if(isNaN(ce)){if(Ke.indexOf(ce)===-1)throw new Error('zoom must be Integer (e.g. 2), a percentage Value (e.g. 300%) or fullwidth, fullheight, fullpage, original. "'+ce+'" is not recognized.');Xt=ce}else Xt=parseInt(ce,10)};S.__private__.getZoomMode=function(){return Xt};var wt,qt=S.__private__.setPageMode=function(ce){if([void 0,null,"UseNone","UseOutlines","UseThumbs","FullScreen"].indexOf(ce)==-1)throw new Error('Page mode must be one of UseNone, UseOutlines, UseThumbs, or FullScreen. "'+ce+'" is not recognized.');Gt=ce};S.__private__.getPageMode=function(){return Gt};var fn=S.__private__.setLayoutMode=function(ce){if([void 0,null,"continuous","single","twoleft","tworight","two"].indexOf(ce)==-1)throw new Error('Layout mode must be one of continuous, single, twoleft, tworight. "'+ce+'" is not recognized.');wt=ce};S.__private__.getLayoutMode=function(){return wt},S.__private__.setDisplayMode=S.setDisplayMode=function(ce,Ke,Ft){return Rn(ce),fn(Ke),qt(Ft),this};var Un={title:"",subject:"",author:"",keywords:"",creator:""};S.__private__.getDocumentProperty=function(ce){if(Object.keys(Un).indexOf(ce)===-1)throw new Error("Invalid argument passed to jsPDF.getDocumentProperty");return Un[ce]},S.__private__.getDocumentProperties=function(){return Un},S.__private__.setDocumentProperties=S.setProperties=S.setDocumentProperties=function(ce){for(var Ke in Un)Un.hasOwnProperty(Ke)&&ce[Ke]&&(Un[Ke]=ce[Ke]);return this},S.__private__.setDocumentProperty=function(ce,Ke){if(Object.keys(Un).indexOf(ce)===-1)throw new Error("Invalid arguments passed to jsPDF.setDocumentProperty");return Un[ce]=Ke};var Yt,cn,Ln,Hn,_r,fr={},xr={},bi=[],Vn={},Es={},ki={},hs={},mi=null,br=0,gr=[],Ir=new xY(S),Kr=e.hotfixes||[],Mt={},je={},De=[],ve=function ce(Ke,Ft,sn,Sn,On,dr){if(!(this instanceof ce))return new ce(Ke,Ft,sn,Sn,On,dr);isNaN(Ke)&&(Ke=1),isNaN(Ft)&&(Ft=0),isNaN(sn)&&(sn=0),isNaN(Sn)&&(Sn=1),isNaN(On)&&(On=0),isNaN(dr)&&(dr=0),this._matrix=[Ke,Ft,sn,Sn,On,dr]};Object.defineProperty(ve.prototype,"sx",{get:function(){return this._matrix[0]},set:function(ce){this._matrix[0]=ce}}),Object.defineProperty(ve.prototype,"shy",{get:function(){return this._matrix[1]},set:function(ce){this._matrix[1]=ce}}),Object.defineProperty(ve.prototype,"shx",{get:function(){return this._matrix[2]},set:function(ce){this._matrix[2]=ce}}),Object.defineProperty(ve.prototype,"sy",{get:function(){return this._matrix[3]},set:function(ce){this._matrix[3]=ce}}),Object.defineProperty(ve.prototype,"tx",{get:function(){return this._matrix[4]},set:function(ce){this._matrix[4]=ce}}),Object.defineProperty(ve.prototype,"ty",{get:function(){return this._matrix[5]},set:function(ce){this._matrix[5]=ce}}),Object.defineProperty(ve.prototype,"a",{get:function(){return this._matrix[0]},set:function(ce){this._matrix[0]=ce}}),Object.defineProperty(ve.prototype,"b",{get:function(){return this._matrix[1]},set:function(ce){this._matrix[1]=ce}}),Object.defineProperty(ve.prototype,"c",{get:function(){return this._matrix[2]},set:function(ce){this._matrix[2]=ce}}),Object.defineProperty(ve.prototype,"d",{get:function(){return this._matrix[3]},set:function(ce){this._matrix[3]=ce}}),Object.defineProperty(ve.prototype,"e",{get:function(){return this._matrix[4]},set:function(ce){this._matrix[4]=ce}}),Object.defineProperty(ve.prototype,"f",{get:function(){return this._matrix[5]},set:function(ce){this._matrix[5]=ce}}),Object.defineProperty(ve.prototype,"rotation",{get:function(){return Math.atan2(this.shx,this.sx)}}),Object.defineProperty(ve.prototype,"scaleX",{get:function(){return this.decompose().scale.sx}}),Object.defineProperty(ve.prototype,"scaleY",{get:function(){return this.decompose().scale.sy}}),Object.defineProperty(ve.prototype,"isIdentity",{get:function(){return this.sx===1&&this.shy===0&&this.shx===0&&this.sy===1&&this.tx===0&&this.ty===0}}),ve.prototype.join=function(ce){return[this.sx,this.shy,this.shx,this.sy,this.tx,this.ty].map(le).join(ce)},ve.prototype.multiply=function(ce){var Ke=ce.sx*this.sx+ce.shy*this.shx,Ft=ce.sx*this.shy+ce.shy*this.sy,sn=ce.shx*this.sx+ce.sy*this.shx,Sn=ce.shx*this.shy+ce.sy*this.sy,On=ce.tx*this.sx+ce.ty*this.shx+this.tx,dr=ce.tx*this.shy+ce.ty*this.sy+this.ty;return new ve(Ke,Ft,sn,Sn,On,dr)},ve.prototype.decompose=function(){var ce=this.sx,Ke=this.shy,Ft=this.shx,sn=this.sy,Sn=this.tx,On=this.ty,dr=Math.sqrt(ce*ce+Ke*Ke),zr=(ce/=dr)*Ft+(Ke/=dr)*sn;Ft-=ce*zr,sn-=Ke*zr;var Jr=Math.sqrt(Ft*Ft+sn*sn);return zr/=Jr,ce*(sn/=Jr)<Ke*(Ft/=Jr)&&(ce=-ce,Ke=-Ke,zr=-zr,dr=-dr),{scale:new ve(dr,0,0,Jr,0,0),translate:new ve(1,0,0,1,Sn,On),rotate:new ve(ce,Ke,-Ke,ce,0,0),skew:new ve(1,0,zr,1,0,0)}},ve.prototype.toString=function(ce){return this.join(" ")},ve.prototype.inversed=function(){var ce=this.sx,Ke=this.shy,Ft=this.shx,sn=this.sy,Sn=this.tx,On=this.ty,dr=1/(ce*sn-Ke*Ft),zr=sn*dr,Jr=-Ke*dr,Yi=-Ft*dr,Vi=ce*dr;return new ve(zr,Jr,Yi,Vi,-zr*Sn-Yi*On,-Jr*Sn-Vi*On)},ve.prototype.applyToPoint=function(ce){var Ke=ce.x*this.sx+ce.y*this.shx+this.tx,Ft=ce.x*this.shy+ce.y*this.sy+this.ty;return new ta(Ke,Ft)},ve.prototype.applyToRectangle=function(ce){var Ke=this.applyToPoint(ce),Ft=this.applyToPoint(new ta(ce.x+ce.w,ce.y+ce.h));return new Yp(Ke.x,Ke.y,Ft.x-Ke.x,Ft.y-Ke.y)},ve.prototype.clone=function(){var ce=this.sx,Ke=this.shy,Ft=this.shx,sn=this.sy,Sn=this.tx,On=this.ty;return new ve(ce,Ke,Ft,sn,Sn,On)},S.Matrix=ve;var Re=S.matrixMult=function(ce,Ke){return Ke.multiply(ce)},ze=new ve(1,0,0,1,0,0);S.unitMatrix=S.identityMatrix=ze;var tt=function(ce,Ke){if(!Es[ce]){var Ft=(Ke instanceof hy?"Sh":"P")+(Object.keys(Vn).length+1).toString(10);Ke.id=Ft,Es[ce]=Ft,Vn[Ft]=Ke,Ir.publish("addPattern",Ke)}};S.ShadingPattern=hy,S.TilingPattern=px,S.addShadingPattern=function(ce,Ke){return pe("addShadingPattern()"),tt(ce,Ke),this},S.beginTilingPattern=function(ce){pe("beginTilingPattern()"),au(ce.boundingBox[0],ce.boundingBox[1],ce.boundingBox[2]-ce.boundingBox[0],ce.boundingBox[3]-ce.boundingBox[1],ce.matrix)},S.endTilingPattern=function(ce,Ke){pe("endTilingPattern()"),Ke.stream=Ht[me].join(`
`),tt(ce,Ke),Ir.publish("endTilingPattern",Ke),De.pop().restore()};var gt=S.__private__.newObject=function(){var ce=pt();return Lt(ce,!0),ce},pt=S.__private__.newObjectDeferred=function(){return vt++,Qt[vt]=function(){return kt},vt},Lt=function(ce,Ke){return Ke=typeof Ke=="boolean"&&Ke,Qt[ce]=kt,Ke&&Oe(ce+" 0 obj"),ce},jt=S.__private__.newAdditionalObject=function(){var ce={objId:pt(),content:""};return Me.push(ce),ce},Nt=pt(),rn=pt(),_n=S.__private__.decodeColorString=function(ce){var Ke=ce.split(" ");if(Ke.length!==2||Ke[1]!=="g"&&Ke[1]!=="G")Ke.length===5&&(Ke[4]==="k"||Ke[4]==="K")&&(Ke=[(1-Ke[0])*(1-Ke[3]),(1-Ke[1])*(1-Ke[3]),(1-Ke[2])*(1-Ke[3]),"r"]);else{var Ft=parseFloat(Ke[0]);Ke=[Ft,Ft,Ft,"r"]}for(var sn="#",Sn=0;Sn<3;Sn++)sn+=("0"+Math.floor(255*parseFloat(Ke[Sn])).toString(16)).slice(-2);return sn},Pn=S.__private__.encodeColorString=function(ce){var Ke;typeof ce=="string"&&(ce={ch1:ce});var Ft=ce.ch1,sn=ce.ch2,Sn=ce.ch3,On=ce.ch4,dr=ce.pdfColorType==="draw"?["G","RG","K"]:["g","rg","k"];if(typeof Ft=="string"&&Ft.charAt(0)!=="#"){var zr=new Zde(Ft);if(zr.ok)Ft=zr.toHex();else if(!/^\d*\.?\d*$/.test(Ft))throw new Error('Invalid color "'+Ft+'" passed to jsPDF.encodeColorString.')}if(typeof Ft=="string"&&/^#[0-9A-Fa-f]{3}$/.test(Ft)&&(Ft="#"+Ft[1]+Ft[1]+Ft[2]+Ft[2]+Ft[3]+Ft[3]),typeof Ft=="string"&&/^#[0-9A-Fa-f]{6}$/.test(Ft)){var Jr=parseInt(Ft.substr(1),16);Ft=Jr>>16&255,sn=Jr>>8&255,Sn=255&Jr}if(sn===void 0||On===void 0&&Ft===sn&&sn===Sn)if(typeof Ft=="string")Ke=Ft+" "+dr[0];else switch(ce.precision){case 2:Ke=ye(Ft/255)+" "+dr[0];break;case 3:default:Ke=he(Ft/255)+" "+dr[0]}else if(On===void 0||sa(On)==="object"){if(On&&!isNaN(On.a)&&On.a===0)return Ke=["1.","1.","1.",dr[1]].join(" ");if(typeof Ft=="string")Ke=[Ft,sn,Sn,dr[1]].join(" ");else switch(ce.precision){case 2:Ke=[ye(Ft/255),ye(sn/255),ye(Sn/255),dr[1]].join(" ");break;default:case 3:Ke=[he(Ft/255),he(sn/255),he(Sn/255),dr[1]].join(" ")}}else if(typeof Ft=="string")Ke=[Ft,sn,Sn,On,dr[2]].join(" ");else switch(ce.precision){case 2:Ke=[ye(Ft),ye(sn),ye(Sn),ye(On),dr[2]].join(" ");break;case 3:default:Ke=[he(Ft),he(sn),he(Sn),he(On),dr[2]].join(" ")}return Ke},sr=S.__private__.getFilters=function(){return c},Cr=S.__private__.putStream=function(ce){var Ke=(ce=ce||{}).data||"",Ft=ce.filters||sr(),sn=ce.alreadyAppliedFilters||[],Sn=ce.addLength1||!1,On=Ke.length,dr=ce.objectId,zr=function(mr){return mr};if(y!==null&&dr===void 0)throw new Error("ObjectId must be passed to putStream for file encryption");y!==null&&(zr=Ml.encryptor(dr,0));var Jr={};Ft===!0&&(Ft=["FlateEncode"]);var Yi=ce.additionalKeyValues||[],Vi=(Jr=Ni.API.processDataByFilters!==void 0?Ni.API.processDataByFilters(Ke,Ft):{data:Ke,reverseChain:[]}).reverseChain+(Array.isArray(sn)?sn.join(" "):sn.toString());if(Jr.data.length!==0&&(Yi.push({key:"Length",value:Jr.data.length}),Sn===!0&&Yi.push({key:"Length1",value:On})),Vi.length!=0)if(Vi.split("/").length-1==1)Yi.push({key:"Filter",value:Vi});else{Yi.push({key:"Filter",value:"["+Vi+"]"});for(var _s=0;_s<Yi.length;_s+=1)if(Yi[_s].key==="DecodeParms"){for(var Ho=[],To=0;To<Jr.reverseChain.split("/").length-1;To+=1)Ho.push("null");Ho.push(Yi[_s].value),Yi[_s].value="["+Ho.join(" ")+"]"}}Oe("<<");for(var Mr=0;Mr<Yi.length;Mr++)Oe("/"+Yi[Mr].key+" "+Yi[Mr].value);Oe(">>"),Jr.data.length!==0&&(Oe("stream"),Oe(zr(Jr.data)),Oe("endstream"))},Ar=S.__private__.putPage=function(ce){var Ke=ce.number,Ft=ce.data,sn=ce.objId,Sn=ce.contentsObjId;Lt(sn,!0),Oe("<</Type /Page"),Oe("/Parent "+ce.rootDictionaryObjId+" 0 R"),Oe("/Resources "+ce.resourceDictionaryObjId+" 0 R"),Oe("/MediaBox ["+parseFloat(le(ce.mediaBox.bottomLeftX))+" "+parseFloat(le(ce.mediaBox.bottomLeftY))+" "+le(ce.mediaBox.topRightX)+" "+le(ce.mediaBox.topRightY)+"]"),ce.cropBox!==null&&Oe("/CropBox ["+le(ce.cropBox.bottomLeftX)+" "+le(ce.cropBox.bottomLeftY)+" "+le(ce.cropBox.topRightX)+" "+le(ce.cropBox.topRightY)+"]"),ce.bleedBox!==null&&Oe("/BleedBox ["+le(ce.bleedBox.bottomLeftX)+" "+le(ce.bleedBox.bottomLeftY)+" "+le(ce.bleedBox.topRightX)+" "+le(ce.bleedBox.topRightY)+"]"),ce.trimBox!==null&&Oe("/TrimBox ["+le(ce.trimBox.bottomLeftX)+" "+le(ce.trimBox.bottomLeftY)+" "+le(ce.trimBox.topRightX)+" "+le(ce.trimBox.topRightY)+"]"),ce.artBox!==null&&Oe("/ArtBox ["+le(ce.artBox.bottomLeftX)+" "+le(ce.artBox.bottomLeftY)+" "+le(ce.artBox.topRightX)+" "+le(ce.artBox.topRightY)+"]"),typeof ce.userUnit=="number"&&ce.userUnit!==1&&Oe("/UserUnit "+ce.userUnit),Ir.publish("putPage",{objId:sn,pageContext:gr[Ke],pageNumber:Ke,page:Ft}),Oe("/Contents "+Sn+" 0 R"),Oe(">>"),Oe("endobj");var On=Ft.join(`
`);return V===Q.ADVANCED&&(On+=`
Q`),Lt(Sn,!0),Cr({data:On,filters:sr(),objectId:Sn}),Oe("endobj"),sn},pr=S.__private__.putPages=function(){var ce,Ke,Ft=[];for(ce=1;ce<=br;ce++)gr[ce].objId=pt(),gr[ce].contentsObjId=pt();for(ce=1;ce<=br;ce++)Ft.push(Ar({number:ce,data:Ht[ce],objId:gr[ce].objId,contentsObjId:gr[ce].contentsObjId,mediaBox:gr[ce].mediaBox,cropBox:gr[ce].cropBox,bleedBox:gr[ce].bleedBox,trimBox:gr[ce].trimBox,artBox:gr[ce].artBox,userUnit:gr[ce].userUnit,rootDictionaryObjId:Nt,resourceDictionaryObjId:rn}));Lt(Nt,!0),Oe("<</Type /Pages");var sn="/Kids [";for(Ke=0;Ke<br;Ke++)sn+=Ft[Ke]+" 0 R ";Oe(sn+"]"),Oe("/Count "+br),Oe(">>"),Oe("endobj"),Ir.publish("postPutPages")},Wr=function(ce){Ir.publish("putFont",{font:ce,out:Oe,newObject:gt,putStream:Cr}),ce.isAlreadyPutted!==!0&&(ce.objectNumber=gt(),Oe("<<"),Oe("/Type /Font"),Oe("/BaseFont /"+C1(ce.postScriptName)),Oe("/Subtype /Type1"),typeof ce.encoding=="string"&&Oe("/Encoding /"+ce.encoding),Oe("/FirstChar 32"),Oe("/LastChar 255"),Oe(">>"),Oe("endobj"))},vi=function(){for(var ce in fr)fr.hasOwnProperty(ce)&&(b===!1||b===!0&&T.hasOwnProperty(ce))&&Wr(fr[ce])},ti=function(ce){ce.objectNumber=gt();var Ke=[];Ke.push({key:"Type",value:"/XObject"}),Ke.push({key:"Subtype",value:"/Form"}),Ke.push({key:"BBox",value:"["+[le(ce.x),le(ce.y),le(ce.x+ce.width),le(ce.y+ce.height)].join(" ")+"]"}),Ke.push({key:"Matrix",value:"["+ce.matrix.toString()+"]"});var Ft=ce.pages[1].join(`
`);Cr({data:Ft,additionalKeyValues:Ke,objectId:ce.objectNumber}),Oe("endobj")},Ai=function(){for(var ce in Mt)Mt.hasOwnProperty(ce)&&ti(Mt[ce])},Ci=function(ce,Ke){var Ft,sn=[],Sn=1/(Ke-1);for(Ft=0;Ft<1;Ft+=Sn)sn.push(Ft);if(sn.push(1),ce[0].offset!=0){var On={offset:0,color:ce[0].color};ce.unshift(On)}if(ce[ce.length-1].offset!=1){var dr={offset:1,color:ce[ce.length-1].color};ce.push(dr)}for(var zr="",Jr=0,Yi=0;Yi<sn.length;Yi++){for(Ft=sn[Yi];Ft>ce[Jr+1].offset;)Jr++;var Vi=ce[Jr].offset,_s=(Ft-Vi)/(ce[Jr+1].offset-Vi),Ho=ce[Jr].color,To=ce[Jr+1].color;zr+=ot(Math.round((1-_s)*Ho[0]+_s*To[0]).toString(16))+ot(Math.round((1-_s)*Ho[1]+_s*To[1]).toString(16))+ot(Math.round((1-_s)*Ho[2]+_s*To[2]).toString(16))}return zr.trim()},Vs=function(ce,Ke){Ke||(Ke=21);var Ft=gt(),sn=Ci(ce.colors,Ke),Sn=[];Sn.push({key:"FunctionType",value:"0"}),Sn.push({key:"Domain",value:"[0.0 1.0]"}),Sn.push({key:"Size",value:"["+Ke+"]"}),Sn.push({key:"BitsPerSample",value:"8"}),Sn.push({key:"Range",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Sn.push({key:"Decode",value:"[0.0 1.0 0.0 1.0 0.0 1.0]"}),Cr({data:sn,additionalKeyValues:Sn,alreadyAppliedFilters:["/ASCIIHexDecode"],objectId:Ft}),Oe("endobj"),ce.objectNumber=gt(),Oe("<< /ShadingType "+ce.type),Oe("/ColorSpace /DeviceRGB");var On="/Coords ["+le(parseFloat(ce.coords[0]))+" "+le(parseFloat(ce.coords[1]))+" ";ce.type===2?On+=le(parseFloat(ce.coords[2]))+" "+le(parseFloat(ce.coords[3])):On+=le(parseFloat(ce.coords[2]))+" "+le(parseFloat(ce.coords[3]))+" "+le(parseFloat(ce.coords[4]))+" "+le(parseFloat(ce.coords[5])),Oe(On+="]"),ce.matrix&&Oe("/Matrix ["+ce.matrix.toString()+"]"),Oe("/Function "+Ft+" 0 R"),Oe("/Extend [true true]"),Oe(">>"),Oe("endobj")},Zo=function(ce,Ke){var Ft=pt(),sn=gt();Ke.push({resourcesOid:Ft,objectOid:sn}),ce.objectNumber=sn;var Sn=[];Sn.push({key:"Type",value:"/Pattern"}),Sn.push({key:"PatternType",value:"1"}),Sn.push({key:"PaintType",value:"1"}),Sn.push({key:"TilingType",value:"1"}),Sn.push({key:"BBox",value:"["+ce.boundingBox.map(le).join(" ")+"]"}),Sn.push({key:"XStep",value:le(ce.xStep)}),Sn.push({key:"YStep",value:le(ce.yStep)}),Sn.push({key:"Resources",value:Ft+" 0 R"}),ce.matrix&&Sn.push({key:"Matrix",value:"["+ce.matrix.toString()+"]"}),Cr({data:ce.stream,additionalKeyValues:Sn,objectId:ce.objectNumber}),Oe("endobj")},Rs=function(ce){var Ke;for(Ke in Vn)Vn.hasOwnProperty(Ke)&&(Vn[Ke]instanceof hy?Vs(Vn[Ke]):Vn[Ke]instanceof px&&Zo(Vn[Ke],ce))},Eo=function(ce){for(var Ke in ce.objectNumber=gt(),Oe("<<"),ce)switch(Ke){case"opacity":Oe("/ca "+ye(ce[Ke]));break;case"stroke-opacity":Oe("/CA "+ye(ce[Ke]))}Oe(">>"),Oe("endobj")},Xl=function(){var ce;for(ce in ki)ki.hasOwnProperty(ce)&&Eo(ki[ce])},Li=function(){for(var ce in Oe("/XObject <<"),Mt)Mt.hasOwnProperty(ce)&&Mt[ce].objectNumber>=0&&Oe("/"+ce+" "+Mt[ce].objectNumber+" 0 R");Ir.publish("putXobjectDict"),Oe(">>")},ho=function(){Ml.oid=gt(),Oe("<<"),Oe("/Filter /Standard"),Oe("/V "+Ml.v),Oe("/R "+Ml.r),Oe("/U <"+Ml.toHexString(Ml.U)+">"),Oe("/O <"+Ml.toHexString(Ml.O)+">"),Oe("/P "+Ml.P),Oe(">>"),Oe("endobj")},xc=function(){for(var ce in Oe("/Font <<"),fr)fr.hasOwnProperty(ce)&&(b===!1||b===!0&&T.hasOwnProperty(ce))&&Oe("/"+ce+" "+fr[ce].objectNumber+" 0 R");Oe(">>")},Yl=function(){if(Object.keys(Vn).length>0){for(var ce in Oe("/Shading <<"),Vn)Vn.hasOwnProperty(ce)&&Vn[ce]instanceof hy&&Vn[ce].objectNumber>=0&&Oe("/"+ce+" "+Vn[ce].objectNumber+" 0 R");Ir.publish("putShadingPatternDict"),Oe(">>")}},so=function(ce){if(Object.keys(Vn).length>0){for(var Ke in Oe("/Pattern <<"),Vn)Vn.hasOwnProperty(Ke)&&Vn[Ke]instanceof S.TilingPattern&&Vn[Ke].objectNumber>=0&&Vn[Ke].objectNumber<ce&&Oe("/"+Ke+" "+Vn[Ke].objectNumber+" 0 R");Ir.publish("putTilingPatternDict"),Oe(">>")}},Jl=function(){if(Object.keys(ki).length>0){var ce;for(ce in Oe("/ExtGState <<"),ki)ki.hasOwnProperty(ce)&&ki[ce].objectNumber>=0&&Oe("/"+ce+" "+ki[ce].objectNumber+" 0 R");Ir.publish("putGStateDict"),Oe(">>")}},Os=function(ce){Lt(ce.resourcesOid,!0),Oe("<<"),Oe("/ProcSet [/PDF /Text /ImageB /ImageC /ImageI]"),xc(),Yl(),so(ce.objectOid),Jl(),Li(),Oe(">>"),Oe("endobj")},Dc=function(){var ce=[];vi(),Xl(),Ai(),Rs(ce),Ir.publish("putResources"),ce.forEach(Os),Os({resourcesOid:rn,objectOid:Number.MAX_SAFE_INTEGER}),Ir.publish("postPutResources")},of=function(){Ir.publish("putAdditionalObjects");for(var ce=0;ce<Me.length;ce++){var Ke=Me[ce];Lt(Ke.objId,!0),Oe(Ke.content),Oe("endobj")}Ir.publish("postPutAdditionalObjects")},af=function(ce){xr[ce.fontName]=xr[ce.fontName]||{},xr[ce.fontName][ce.fontStyle]=ce.id},wh=function(ce,Ke,Ft,sn,Sn){var On={id:"F"+(Object.keys(fr).length+1).toString(10),postScriptName:ce,fontName:Ke,fontStyle:Ft,encoding:sn,isStandardFont:Sn||!1,metadata:{}};return Ir.publish("addFont",{font:On,instance:this}),fr[On.id]=On,af(On),On.id},bh=function(ce){for(var Ke=0,Ft=$t.length;Ke<Ft;Ke++){var sn=wh.call(this,ce[Ke][0],ce[Ke][1],ce[Ke][2],$t[Ke][3],!0);b===!1&&(T[sn]=!0);var Sn=ce[Ke][0].split("-");af({id:sn,fontName:Sn[0],fontStyle:Sn[1]||""})}Ir.publish("addFonts",{fonts:fr,dictionary:xr})},vl=function(ce){return ce.foo=function(){try{return ce.apply(this,arguments)}catch(sn){var Ke=sn.stack||"";~Ke.indexOf(" at ")&&(Ke=Ke.split(" at ")[1]);var Ft="Error in function "+Ke.split(`
`)[0].split("<")[0]+": "+sn.message;if(!is.console)throw new Error(Ft);is.console.error(Ft,sn),is.alert&&alert(Ft)}},ce.foo.bar=ce,ce.foo},Rd=function(ce,Ke){var Ft,sn,Sn,On,dr,zr,Jr,Yi,Vi;if(Sn=(Ke=Ke||{}).sourceEncoding||"Unicode",dr=Ke.outputEncoding,(Ke.autoencode||dr)&&fr[Yt].metadata&&fr[Yt].metadata[Sn]&&fr[Yt].metadata[Sn].encoding&&(On=fr[Yt].metadata[Sn].encoding,!dr&&fr[Yt].encoding&&(dr=fr[Yt].encoding),!dr&&On.codePages&&(dr=On.codePages[0]),typeof dr=="string"&&(dr=On[dr]),dr)){for(Jr=!1,zr=[],Ft=0,sn=ce.length;Ft<sn;Ft++)(Yi=dr[ce.charCodeAt(Ft)])?zr.push(String.fromCharCode(Yi)):zr.push(ce[Ft]),zr[Ft].charCodeAt(0)>>8&&(Jr=!0);ce=zr.join("")}for(Ft=ce.length;Jr===void 0&&Ft!==0;)ce.charCodeAt(Ft-1)>>8&&(Jr=!0),Ft--;if(!Jr)return ce;for(zr=Ke.noBOM?[]:[254,255],Ft=0,sn=ce.length;Ft<sn;Ft++){if((Vi=(Yi=ce.charCodeAt(Ft))>>8)>>8)throw new Error("Character at position "+Ft+" of string '"+ce+"' exceeds 16bits. Cannot be encoded into UCS-2 BE");zr.push(Vi),zr.push(Yi-(Vi<<8))}return String.fromCharCode.apply(void 0,zr)},No=S.__private__.pdfEscape=S.pdfEscape=function(ce,Ke){return Rd(ce,Ke).replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},kl=S.__private__.beginPage=function(ce){Ht[++br]=[],gr[br]={objId:0,contentsObjId:0,userUnit:Number(i),artBox:null,bleedBox:null,cropBox:null,trimBox:null,mediaBox:{bottomLeftX:0,bottomLeftY:0,topRightX:Number(ce[0]),topRightY:Number(ce[1])}},iu(br),hn(Ht[me])},Ll=function(ce,Ke){var Ft,sn,Sn;switch(n=Ke||n,typeof ce=="string"&&(Ft=L(ce.toLowerCase()),Array.isArray(Ft)&&(sn=Ft[0],Sn=Ft[1])),Array.isArray(ce)&&(sn=ce[0]*cn,Sn=ce[1]*cn),isNaN(sn)&&(sn=s[0],Sn=s[1]),(sn>14400||Sn>14400)&&(Sa.warn("A page in a PDF can not be wider or taller than 14400 userUnit. jsPDF limits the width/height to 14400"),sn=Math.min(14400,sn),Sn=Math.min(14400,Sn)),s=[sn,Sn],n.substr(0,1)){case"l":Sn>sn&&(s=[Sn,sn]);break;case"p":sn>Sn&&(s=[Sn,sn])}kl(s),uf(ap),Oe(vo),_l!==0&&Oe(_l+" J"),Qo!==0&&Oe(Qo+" j"),Ir.publish("addPage",{pageNumber:br})},ec=function(ce){ce>0&&ce<=br&&(Ht.splice(ce,1),gr.splice(ce,1),br--,me>br&&(me=br),this.setPage(me))},iu=function(ce){ce>0&&ce<=br&&(me=ce)},lf=S.__private__.getNumberOfPages=S.getNumberOfPages=function(){return Ht.length-1},qu=function(ce,Ke,Ft){var sn,Sn=void 0;return Ft=Ft||{},ce=ce!==void 0?ce:fr[Yt].fontName,Ke=Ke!==void 0?Ke:fr[Yt].fontStyle,sn=ce.toLowerCase(),xr[sn]!==void 0&&xr[sn][Ke]!==void 0?Sn=xr[sn][Ke]:xr[ce]!==void 0&&xr[ce][Ke]!==void 0?Sn=xr[ce][Ke]:Ft.disableWarning===!1&&Sa.warn("Unable to look up font label for font '"+ce+"', '"+Ke+"'. Refer to getFontList() for available fonts."),Sn||Ft.noFallback||(Sn=xr.times[Ke])==null&&(Sn=xr.times.normal),Sn},su=S.__private__.putInfo=function(){var ce=gt(),Ke=function(sn){return sn};for(var Ft in y!==null&&(Ke=Ml.encryptor(ce,0)),Oe("<<"),Oe("/Producer ("+No(Ke("jsPDF "+Ni.version))+")"),Un)Un.hasOwnProperty(Ft)&&Un[Ft]&&Oe("/"+Ft.substr(0,1).toUpperCase()+Ft.substr(1)+" ("+No(Ke(Un[Ft]))+")");Oe("/CreationDate ("+No(Ke(Ne))+")"),Oe(">>"),Oe("endobj")},xl=S.__private__.putCatalog=function(ce){var Ke=(ce=ce||{}).rootDictionaryObjId||Nt;switch(gt(),Oe("<<"),Oe("/Type /Catalog"),Oe("/Pages "+Ke+" 0 R"),Xt||(Xt="fullwidth"),Xt){case"fullwidth":Oe("/OpenAction [3 0 R /FitH null]");break;case"fullheight":Oe("/OpenAction [3 0 R /FitV null]");break;case"fullpage":Oe("/OpenAction [3 0 R /Fit]");break;case"original":Oe("/OpenAction [3 0 R /XYZ null null 1]");break;default:var Ft=""+Xt;Ft.substr(Ft.length-1)==="%"&&(Xt=parseInt(Xt)/100),typeof Xt=="number"&&Oe("/OpenAction [3 0 R /XYZ null null "+ye(Xt)+"]")}switch(wt||(wt="continuous"),wt){case"continuous":Oe("/PageLayout /OneColumn");break;case"single":Oe("/PageLayout /SinglePage");break;case"two":case"twoleft":Oe("/PageLayout /TwoColumnLeft");break;case"tworight":Oe("/PageLayout /TwoColumnRight")}Gt&&Oe("/PageMode /"+Gt),Ir.publish("putCatalog"),Oe(">>"),Oe("endobj")},cf=S.__private__.putTrailer=function(){Oe("trailer"),Oe("<<"),Oe("/Size "+(vt+1)),Oe("/Root "+vt+" 0 R"),Oe("/Info "+(vt-1)+" 0 R"),y!==null&&Oe("/Encrypt "+Ml.oid+" 0 R"),Oe("/ID [ <"+Ge+"> <"+Ge+"> ]"),Oe(">>")},ip=S.__private__.putHeader=function(){Oe("%PDF-"+U),Oe("%ºß¬à")},Ch=S.__private__.putXRef=function(){var ce="0000000000";Oe("xref"),Oe("0 "+(vt+1)),Oe("0000000000 65535 f ");for(var Ke=1;Ke<=vt;Ke++)typeof Qt[Ke]=="function"?Oe((ce+Qt[Ke]()).slice(-10)+" 00000 n "):Qt[Ke]!==void 0?Oe((ce+Qt[Ke]).slice(-10)+" 00000 n "):Oe("0000000000 00000 n ")},Aa=S.__private__.buildDocument=function(){Dt(),hn(Ot),Ir.publish("buildDocument"),ip(),pr(),of(),Dc(),y!==null&&ho(),su(),xl();var ce=kt;return Ch(),cf(),Oe("startxref"),Oe(""+ce),Oe("%%EOF"),hn(Ht[me]),Ot.join(`
`)},Zu=S.__private__.getBlob=function(ce){return new Blob([Vt(ce)],{type:"application/pdf"})},Xu=S.output=S.__private__.output=vl(function(ce,Ke){switch(typeof(Ke=Ke||{})=="string"?Ke={filename:Ke}:Ke.filename=Ke.filename||"generated.pdf",ce){case void 0:return Aa();case"save":S.save(Ke.filename);break;case"arraybuffer":return Vt(Aa());case"blob":return Zu(Aa());case"bloburi":case"bloburl":if(is.URL!==void 0&&typeof is.URL.createObjectURL=="function")return is.URL&&is.URL.createObjectURL(Zu(Aa()))||void 0;Sa.warn("bloburl is not supported by your system, because URL.createObjectURL is not supported by your browser.");break;case"datauristring":case"dataurlstring":var Ft="",sn=Aa();try{Ft=P6(sn)}catch{Ft=P6(unescape(encodeURIComponent(sn)))}return"data:application/pdf;filename="+Ke.filename+";base64,"+Ft;case"pdfobjectnewwindow":if(Object.prototype.toString.call(is)==="[object Window]"){var Sn="https://cdnjs.cloudflare.com/ajax/libs/pdfobject/2.1.1/pdfobject.min.js",On=' integrity="sha512-4ze/a9/4jqu+tX9dfOqJYSvyYd5M6qum/3HpCLr+/Jqf0whc37VUbkpNGHR7/8pSnCFw47T1fmIpwBV7UySh3g==" crossorigin="anonymous"';Ke.pdfObjectUrl&&(Sn=Ke.pdfObjectUrl,On="");var dr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><script src="'+Sn+'"'+On+'><\/script><script >PDFObject.embed("'+this.output("dataurlstring")+'", '+JSON.stringify(Ke)+");<\/script></body></html>",zr=is.open();return zr!==null&&zr.document.write(dr),zr}throw new Error("The option pdfobjectnewwindow just works in a browser-environment.");case"pdfjsnewwindow":if(Object.prototype.toString.call(is)==="[object Window]"){var Jr='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe id="pdfViewer" src="'+(Ke.pdfJsUrl||"examples/PDF.js/web/viewer.html")+"?file=&downloadName="+Ke.filename+'" width="500px" height="400px" /></body></html>',Yi=is.open();if(Yi!==null){Yi.document.write(Jr);var Vi=this;Yi.document.documentElement.querySelector("#pdfViewer").onload=function(){Yi.document.title=Ke.filename,Yi.document.documentElement.querySelector("#pdfViewer").contentWindow.PDFViewerApplication.open(Vi.output("bloburl"))}}return Yi}throw new Error("The option pdfjsnewwindow just works in a browser-environment.");case"dataurlnewwindow":if(Object.prototype.toString.call(is)!=="[object Window]")throw new Error("The option dataurlnewwindow just works in a browser-environment.");var _s='<html><style>html, body { padding: 0; margin: 0; } iframe { width: 100%; height: 100%; border: 0;}  </style><body><iframe src="'+this.output("datauristring",Ke)+'"></iframe></body></html>',Ho=is.open();if(Ho!==null&&(Ho.document.write(_s),Ho.document.title=Ke.filename),Ho||typeof safari>"u")return Ho;break;case"datauri":case"dataurl":return is.document.location.href=this.output("datauristring",Ke);default:return null}}),ji=function(ce){return Array.isArray(Kr)===!0&&Kr.indexOf(ce)>-1};switch(r){case"pt":cn=1;break;case"mm":cn=72/25.4;break;case"cm":cn=72/2.54;break;case"in":cn=72;break;case"px":cn=ji("px_scaling")==1?.75:96/72;break;case"pc":case"em":cn=12;break;case"ex":cn=6;break;default:if(typeof r!="number")throw new Error("Invalid unit: "+r);cn=r}var Ml=null;at(),Ue();var Ur=function(ce){return y!==null?Ml.encryptor(ce,0):function(Ke){return Ke}},sp=S.__private__.getPageInfo=S.getPageInfo=function(ce){if(isNaN(ce)||ce%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfo");return{objId:gr[ce].objId,pageNumber:ce,pageContext:gr[ce]}},Sr=S.__private__.getPageInfoByObjId=function(ce){if(isNaN(ce)||ce%1!=0)throw new Error("Invalid argument passed to jsPDF.getPageInfoByObjId");for(var Ke in gr)if(gr[Ke].objId===ce)break;return sp(Ke)},op=S.__private__.getCurrentPageInfo=S.getCurrentPageInfo=function(){return{objId:gr[me].objId,pageNumber:me,pageContext:gr[me]}};S.addPage=function(){return Ll.apply(this,arguments),this},S.setPage=function(){return iu.apply(this,arguments),hn.call(this,Ht[me]),this},S.insertPage=function(ce){return this.addPage(),this.movePage(me,ce),this},S.movePage=function(ce,Ke){var Ft,sn;if(ce>Ke){Ft=Ht[ce],sn=gr[ce];for(var Sn=ce;Sn>Ke;Sn--)Ht[Sn]=Ht[Sn-1],gr[Sn]=gr[Sn-1];Ht[Ke]=Ft,gr[Ke]=sn,this.setPage(Ke)}else if(ce<Ke){Ft=Ht[ce],sn=gr[ce];for(var On=ce;On<Ke;On++)Ht[On]=Ht[On+1],gr[On]=gr[On+1];Ht[Ke]=Ft,gr[Ke]=sn,this.setPage(Ke)}return this},S.deletePage=function(){return ec.apply(this,arguments),this},S.__private__.text=S.text=function(ce,Ke,Ft,sn,Sn){var On,dr,zr,Jr,Yi,Vi,_s,Ho,To,Mr=(sn=sn||{}).scope||this;if(typeof ce=="number"&&typeof Ke=="number"&&(typeof Ft=="string"||Array.isArray(Ft))){var mr=Ft;Ft=Ke,Ke=ce,ce=mr}if(arguments[3]instanceof ve?(pe("The transform parameter of text() with a Matrix value"),To=Sn):(zr=arguments[4],Jr=arguments[5],sa(_s=arguments[3])==="object"&&_s!==null||(typeof zr=="string"&&(Jr=zr,zr=null),typeof _s=="string"&&(Jr=_s,_s=null),typeof _s=="number"&&(zr=_s,_s=null),sn={flags:_s,angle:zr,align:Jr})),isNaN(Ke)||isNaN(Ft)||ce==null)throw new Error("Invalid arguments passed to jsPDF.text");if(ce.length===0)return Mr;var ya="",Rr=!1,xo=typeof sn.lineHeightFactor=="number"?sn.lineHeightFactor:ds,Ea=Mr.internal.scaleFactor;function Lr(As){return As=As.split("	").join(Array(sn.TabLen||9).join(" ")),No(As,_s)}function Bh(As){for(var lo,Jo=As.concat(),va=[],Qa=Jo.length;Qa--;)typeof(lo=Jo.shift())=="string"?va.push(lo):Array.isArray(As)&&(lo.length===1||lo[1]===void 0&&lo[2]===void 0)?va.push(lo[0]):va.push([lo[0],lo[1],lo[2]]);return va}function Hd(As,lo){var Jo;if(typeof As=="string")Jo=lo(As)[0];else if(Array.isArray(As)){for(var va,Qa,oi=As.concat(),zc=[],lp=oi.length;lp--;)typeof(va=oi.shift())=="string"?zc.push(lo(va)[0]):Array.isArray(va)&&typeof va[0]=="string"&&(Qa=lo(va[0],va[1],va[2]),zc.push([Qa[0],Qa[1],Qa[2]]));Jo=zc}return Jo}var bu=!1,ed=!0;if(typeof ce=="string")bu=!0;else if(Array.isArray(ce)){var Vd=ce.concat();dr=[];for(var na,ao=Vd.length;ao--;)(typeof(na=Vd.shift())!="string"||Array.isArray(na)&&typeof na[0]!="string")&&(ed=!1);bu=ed}if(bu===!1)throw new Error('Type of text must be string or Array. "'+ce+'" is not recognized.');typeof ce=="string"&&(ce=ce.match(/[\r?\n]/)?ce.split(/\r\n|\r|\n/g):[ce]);var Cc=xn/Mr.internal.scaleFactor,Wn=Cc*(xo-1);switch(sn.baseline){case"bottom":Ft-=Wn;break;case"top":Ft+=Cc-Wn;break;case"hanging":Ft+=Cc-2*Wn;break;case"middle":Ft+=Cc/2-Wn}if((Vi=sn.maxWidth||0)>0&&(typeof ce=="string"?ce=Mr.splitTextToSize(ce,Vi):Object.prototype.toString.call(ce)==="[object Array]"&&(ce=ce.reduce(function(As,lo){return As.concat(Mr.splitTextToSize(lo,Vi))},[]))),On={text:ce,x:Ke,y:Ft,options:sn,mutex:{pdfEscape:No,activeFontKey:Yt,fonts:fr,activeFontSize:xn}},Ir.publish("preProcessText",On),ce=On.text,zr=(sn=On.options).angle,!(To instanceof ve)&&zr&&typeof zr=="number"){zr*=Math.PI/180,sn.rotationDirection===0&&(zr=-zr),V===Q.ADVANCED&&(zr=-zr);var $d=Math.cos(zr),rc=Math.sin(zr);To=new ve($d,rc,-rc,$d,0,0)}else zr&&zr instanceof ve&&(To=zr);V!==Q.ADVANCED||To||(To=ze),(Yi=sn.charSpace||oo)!==void 0&&(ya+=le(be(Yi))+` Tc
`,this.setCharSpace(this.getCharSpace()||0)),(Ho=sn.horizontalScale)!==void 0&&(ya+=le(100*Ho)+` Tz
`),sn.lang;var Gs=-1,Cu=sn.renderingMode!==void 0?sn.renderingMode:sn.stroke,Su=Mr.internal.getCurrentPageInfo().pageContext;switch(Cu){case 0:case!1:case"fill":Gs=0;break;case 1:case!0:case"stroke":Gs=1;break;case 2:case"fillThenStroke":Gs=2;break;case 3:case"invisible":Gs=3;break;case 4:case"fillAndAddForClipping":Gs=4;break;case 5:case"strokeAndAddPathForClipping":Gs=5;break;case 6:case"fillThenStrokeAndAddToPathForClipping":Gs=6;break;case 7:case"addToPathForClipping":Gs=7}var lu=Su.usedRenderingMode!==void 0?Su.usedRenderingMode:-1;Gs!==-1?ya+=Gs+` Tr
`:lu!==-1&&(ya+=`0 Tr
`),Gs!==-1&&(Su.usedRenderingMode=Gs),Jr=sn.align||"left";var wl,Uc=xn*xo,Sc=Mr.internal.pageSize.getWidth(),Ua=fr[Yt];Yi=sn.charSpace||oo,Vi=sn.maxWidth||0,_s=Object.assign({autoencode:!0,noBOM:!0},sn.flags);var Gd=[],hf=function(As){return Mr.getStringUnitWidth(As,{font:Ua,charSpace:Yi,fontSize:xn,doKerning:!1})*xn/Ea};if(Object.prototype.toString.call(ce)==="[object Array]"){var Ol;dr=Bh(ce),Jr!=="left"&&(wl=dr.map(hf));var Dl,Kd=0;if(Jr==="right"){Ke-=wl[0],ce=[],ao=dr.length;for(var td=0;td<ao;td++)td===0?(Dl=yo(Ke),Ol=ma(Ft)):(Dl=be(Kd-wl[td]),Ol=-Uc),ce.push([dr[td],Dl,Ol]),Kd=wl[td]}else if(Jr==="center"){Ke-=wl[0]/2,ce=[],ao=dr.length;for(var aa=0;aa<ao;aa++)aa===0?(Dl=yo(Ke),Ol=ma(Ft)):(Dl=be((Kd-wl[aa])/2),Ol=-Uc),ce.push([dr[aa],Dl,Ol]),Kd=wl[aa]}else if(Jr==="left"){ce=[],ao=dr.length;for(var yn=0;yn<ao;yn++)ce.push(dr[yn])}else if(Jr==="justify"&&Ua.encoding==="Identity-H"){ce=[],ao=dr.length,Vi=Vi!==0?Vi:Sc;for(var $n=0,jn=0;jn<ao;jn++)if(Ol=jn===0?ma(Ft):-Uc,Dl=jn===0?yo(Ke):$n,jn<ao-1){var Hr=be((Vi-wl[jn])/(dr[jn].split(" ").length-1)),ci=dr[jn].split(" ");ce.push([ci[0]+" ",Dl,Ol]),$n=0;for(var Bi=1;Bi<ci.length;Bi++){var _o=(hf(ci[Bi-1]+" "+ci[Bi])-hf(ci[Bi]))*Ea+Hr;Bi==ci.length-1?ce.push([ci[Bi],_o,0]):ce.push([ci[Bi]+" ",_o,0]),$n-=_o}}else ce.push([dr[jn],Dl,Ol]);ce.push(["",$n,0])}else{if(Jr!=="justify")throw new Error('Unrecognized alignment option, use "left", "center", "right" or "justify".');for(ce=[],ao=dr.length,Vi=Vi!==0?Vi:Sc,jn=0;jn<ao;jn++)Ol=jn===0?ma(Ft):-Uc,Dl=jn===0?yo(Ke):0,jn<ao-1?Gd.push(le(be((Vi-wl[jn])/(dr[jn].split(" ").length-1)))):Gd.push(0),ce.push([dr[jn],Dl,Ol])}}var Ys=typeof sn.R2L=="boolean"?sn.R2L:rr;Ys===!0&&(ce=Hd(ce,function(As,lo,Jo){return[As.split("").reverse().join(""),lo,Jo]})),On={text:ce,x:Ke,y:Ft,options:sn,mutex:{pdfEscape:No,activeFontKey:Yt,fonts:fr,activeFontSize:xn}},Ir.publish("postProcessText",On),ce=On.text,Rr=On.mutex.isHex||!1;var Wd=fr[Yt].encoding;Wd!=="WinAnsiEncoding"&&Wd!=="StandardEncoding"||(ce=Hd(ce,function(As,lo,Jo){return[Lr(As),lo,Jo]})),dr=Bh(ce),ce=[];for(var nd,la,Bc,Ec=0,Tc=1,cu=Array.isArray(dr[0])?Tc:Ec,bl="",fs=function(As,lo,Jo){var va="";return Jo instanceof ve?(Jo=typeof sn.angle=="number"?Re(Jo,new ve(1,0,0,1,As,lo)):Re(new ve(1,0,0,1,As,lo),Jo),V===Q.ADVANCED&&(Jo=Re(new ve(1,0,0,-1,0,0),Jo)),va=Jo.join(" ")+` Tm
`):va=le(As)+" "+le(lo)+` Td
`,va},cl=0;cl<dr.length;cl++){switch(bl="",cu){case Tc:Bc=(Rr?"<":"(")+dr[cl][0]+(Rr?">":")"),nd=parseFloat(dr[cl][1]),la=parseFloat(dr[cl][2]);break;case Ec:Bc=(Rr?"<":"(")+dr[cl]+(Rr?">":")"),nd=yo(Ke),la=ma(Ft)}Gd!==void 0&&Gd[cl]!==void 0&&(bl=Gd[cl]+` Tw
`),cl===0?ce.push(bl+fs(nd,la,To)+Bc):cu===Ec?ce.push(bl+Bc):cu===Tc&&ce.push(bl+fs(nd,la,To)+Bc)}ce=cu===Ec?ce.join(` Tj
T* `):ce.join(` Tj
`),ce+=` Tj
`;var za=`BT
/`;return za+=Yt+" "+xn+` Tf
`,za+=le(xn*xo)+` TL
`,za+=ll+`
`,za+=ya,za+=ce,Oe(za+="ET"),T[Yt]=!0,Mr};var _c=S.__private__.clip=S.clip=function(ce){return Oe(ce==="evenodd"?"W*":"W"),this};S.clipEvenOdd=function(){return _c("evenodd")},S.__private__.discardPath=S.discardPath=function(){return Oe("n"),this};var ou=S.__private__.isValidStyle=function(ce){var Ke=!1;return[void 0,null,"S","D","F","DF","FD","f","f*","B","B*","n"].indexOf(ce)!==-1&&(Ke=!0),Ke};S.__private__.setDefaultPathOperation=S.setDefaultPathOperation=function(ce){return ou(ce)&&(g=ce),this};var Od=S.__private__.getStyle=S.getStyle=function(ce){var Ke=g;switch(ce){case"D":case"S":Ke="S";break;case"F":Ke="f";break;case"FD":case"DF":Ke="B";break;case"f":case"f*":case"B":case"B*":Ke=ce}return Ke},cr=S.close=function(){return Oe("h"),this};S.stroke=function(){return Oe("S"),this},S.fill=function(ce){return Pi("f",ce),this},S.fillEvenOdd=function(ce){return Pi("f*",ce),this},S.fillStroke=function(ce){return Pi("B",ce),this},S.fillStrokeEvenOdd=function(ce){return Pi("B*",ce),this};var Pi=function(ce,Ke){sa(Ke)==="object"?Dd(Ke,ce):Oe(ce)},Ii=function(ce){ce===null||V===Q.ADVANCED&&ce===void 0||(ce=Od(ce),Oe(ce))};function Nl(ce,Ke,Ft,sn,Sn){var On=new px(Ke||this.boundingBox,Ft||this.xStep,sn||this.yStep,this.gState,Sn||this.matrix);On.stream=this.stream;var dr=ce+"$$"+this.cloneIndex+++"$$";return tt(dr,On),On}var Dd=function(ce,Ke){var Ft=Es[ce.key],sn=Vn[Ft];if(sn instanceof hy)Oe("q"),Oe(Si(Ke)),sn.gState&&S.setGState(sn.gState),Oe(ce.matrix.toString()+" cm"),Oe("/"+Ft+" sh"),Oe("Q");else if(sn instanceof px){var Sn=new ve(1,0,0,-1,0,wu());ce.matrix&&(Sn=Sn.multiply(ce.matrix||ze),Ft=Nl.call(sn,ce.key,ce.boundingBox,ce.xStep,ce.yStep,Sn).id),Oe("q"),Oe("/Pattern cs"),Oe("/"+Ft+" scn"),sn.gState&&S.setGState(sn.gState),Oe(Ke),Oe("Q")}},Si=function(ce){switch(ce){case"f":case"F":return"W n";case"f*":return"W* n";case"B":return"W S";case"B*":return"W* S";case"S":return"W S";case"n":return"W n"}},$s=S.moveTo=function(ce,Ke){return Oe(le(be(ce))+" "+le(Ee(Ke))+" m"),this},us=S.lineTo=function(ce,Ke){return Oe(le(be(ce))+" "+le(Ee(Ke))+" l"),this},wc=S.curveTo=function(ce,Ke,Ft,sn,Sn,On){return Oe([le(be(ce)),le(Ee(Ke)),le(be(Ft)),le(Ee(sn)),le(be(Sn)),le(Ee(On)),"c"].join(" ")),this};S.__private__.line=S.line=function(ce,Ke,Ft,sn,Sn){if(isNaN(ce)||isNaN(Ke)||isNaN(Ft)||isNaN(sn)||!ou(Sn))throw new Error("Invalid arguments passed to jsPDF.line");return V===Q.COMPAT?this.lines([[Ft-ce,sn-Ke]],ce,Ke,[1,1],Sn||"S"):this.lines([[Ft-ce,sn-Ke]],ce,Ke,[1,1]).stroke()},S.__private__.lines=S.lines=function(ce,Ke,Ft,sn,Sn,On){var dr,zr,Jr,Yi,Vi,_s,Ho,To,Mr,mr,ya,Rr;if(typeof ce=="number"&&(Rr=Ft,Ft=Ke,Ke=ce,ce=Rr),sn=sn||[1,1],On=On||!1,isNaN(Ke)||isNaN(Ft)||!Array.isArray(ce)||!Array.isArray(sn)||!ou(Sn)||typeof On!="boolean")throw new Error("Invalid arguments passed to jsPDF.lines");for($s(Ke,Ft),dr=sn[0],zr=sn[1],Yi=ce.length,mr=Ke,ya=Ft,Jr=0;Jr<Yi;Jr++)(Vi=ce[Jr]).length===2?(mr=Vi[0]*dr+mr,ya=Vi[1]*zr+ya,us(mr,ya)):(_s=Vi[0]*dr+mr,Ho=Vi[1]*zr+ya,To=Vi[2]*dr+mr,Mr=Vi[3]*zr+ya,mr=Vi[4]*dr+mr,ya=Vi[5]*zr+ya,wc(_s,Ho,To,Mr,mr,ya));return On&&cr(),Ii(Sn),this},S.path=function(ce){for(var Ke=0;Ke<ce.length;Ke++){var Ft=ce[Ke],sn=Ft.c;switch(Ft.op){case"m":$s(sn[0],sn[1]);break;case"l":us(sn[0],sn[1]);break;case"c":wc.apply(this,sn);break;case"h":cr()}}return this},S.__private__.rect=S.rect=function(ce,Ke,Ft,sn,Sn){if(isNaN(ce)||isNaN(Ke)||isNaN(Ft)||isNaN(sn)||!ou(Sn))throw new Error("Invalid arguments passed to jsPDF.rect");return V===Q.COMPAT&&(sn=-sn),Oe([le(be(ce)),le(Ee(Ke)),le(be(Ft)),le(be(sn)),"re"].join(" ")),Ii(Sn),this},S.__private__.triangle=S.triangle=function(ce,Ke,Ft,sn,Sn,On,dr){if(isNaN(ce)||isNaN(Ke)||isNaN(Ft)||isNaN(sn)||isNaN(Sn)||isNaN(On)||!ou(dr))throw new Error("Invalid arguments passed to jsPDF.triangle");return this.lines([[Ft-ce,sn-Ke],[Sn-Ft,On-sn],[ce-Sn,Ke-On]],ce,Ke,[1,1],dr,!0),this},S.__private__.roundedRect=S.roundedRect=function(ce,Ke,Ft,sn,Sn,On,dr){if(isNaN(ce)||isNaN(Ke)||isNaN(Ft)||isNaN(sn)||isNaN(Sn)||isNaN(On)||!ou(dr))throw new Error("Invalid arguments passed to jsPDF.roundedRect");var zr=4/3*(Math.SQRT2-1);return Sn=Math.min(Sn,.5*Ft),On=Math.min(On,.5*sn),this.lines([[Ft-2*Sn,0],[Sn*zr,0,Sn,On-On*zr,Sn,On],[0,sn-2*On],[0,On*zr,-Sn*zr,On,-Sn,On],[2*Sn-Ft,0],[-Sn*zr,0,-Sn,-On*zr,-Sn,-On],[0,2*On-sn],[0,-On*zr,Sn*zr,-On,Sn,-On]],ce+Sn,Ke,[1,1],dr,!0),this},S.__private__.ellipse=S.ellipse=function(ce,Ke,Ft,sn,Sn){if(isNaN(ce)||isNaN(Ke)||isNaN(Ft)||isNaN(sn)||!ou(Sn))throw new Error("Invalid arguments passed to jsPDF.ellipse");var On=4/3*(Math.SQRT2-1)*Ft,dr=4/3*(Math.SQRT2-1)*sn;return $s(ce+Ft,Ke),wc(ce+Ft,Ke-dr,ce+On,Ke-sn,ce,Ke-sn),wc(ce-On,Ke-sn,ce-Ft,Ke-dr,ce-Ft,Ke),wc(ce-Ft,Ke+dr,ce-On,Ke+sn,ce,Ke+sn),wc(ce+On,Ke+sn,ce+Ft,Ke+dr,ce+Ft,Ke),Ii(Sn),this},S.__private__.circle=S.circle=function(ce,Ke,Ft,sn){if(isNaN(ce)||isNaN(Ke)||isNaN(Ft)||!ou(sn))throw new Error("Invalid arguments passed to jsPDF.circle");return this.ellipse(ce,Ke,Ft,Ft,sn)},S.setFont=function(ce,Ke,Ft){return Ft&&(Ke=Y(Ke,Ft)),Yt=qu(ce,Ke,{disableWarning:!1}),this};var Da=S.__private__.getFont=S.getFont=function(){return fr[qu.apply(S,arguments)]};S.__private__.getFontList=S.getFontList=function(){var ce,Ke,Ft={};for(ce in xr)if(xr.hasOwnProperty(ce))for(Ke in Ft[ce]=[],xr[ce])xr[ce].hasOwnProperty(Ke)&&Ft[ce].push(Ke);return Ft},S.addFont=function(ce,Ke,Ft,sn,Sn){var On=["StandardEncoding","MacRomanEncoding","Identity-H","WinAnsiEncoding"];return arguments[3]&&On.indexOf(arguments[3])!==-1?Sn=arguments[3]:arguments[3]&&On.indexOf(arguments[3])==-1&&(Ft=Y(Ft,sn)),Sn=Sn||"Identity-H",wh.call(this,ce,Ke,Ft,Sn)};var ds,ap=e.lineWidth||.200025,Yu=S.__private__.getLineWidth=S.getLineWidth=function(){return ap},uf=S.__private__.setLineWidth=S.setLineWidth=function(ce){return ap=ce,Oe(le(be(ce))+" w"),this};S.__private__.setLineDash=Ni.API.setLineDash=Ni.API.setLineDashPattern=function(ce,Ke){if(ce=ce||[],Ke=Ke||0,isNaN(Ke)||!Array.isArray(ce))throw new Error("Invalid arguments passed to jsPDF.setLineDash");return ce=ce.map(function(Ft){return le(be(Ft))}).join(" "),Ke=le(be(Ke)),Oe("["+ce+"] "+Ke+" d"),this};var Ju=S.__private__.getLineHeight=S.getLineHeight=function(){return xn*ds};S.__private__.getLineHeight=S.getLineHeight=function(){return xn*ds};var df=S.__private__.setLineHeightFactor=S.setLineHeightFactor=function(ce){return typeof(ce=ce||1.15)=="number"&&(ds=ce),this},Xo=S.__private__.getLineHeightFactor=S.getLineHeightFactor=function(){return ds};df(e.lineHeight);var yo=S.__private__.getHorizontalCoordinate=function(ce){return be(ce)},ma=S.__private__.getVerticalCoordinate=function(ce){return V===Q.ADVANCED?ce:gr[me].mediaBox.topRightY-gr[me].mediaBox.bottomLeftY-be(ce)},Yo=S.__private__.getHorizontalCoordinateString=S.getHorizontalCoordinateString=function(ce){return le(yo(ce))},Rl=S.__private__.getVerticalCoordinateString=S.getVerticalCoordinateString=function(ce){return le(ma(ce))},vo=e.strokeColor||"0 G";S.__private__.getStrokeColor=S.getDrawColor=function(){return _n(vo)},S.__private__.setStrokeColor=S.setDrawColor=function(ce,Ke,Ft,sn){return vo=Pn({ch1:ce,ch2:Ke,ch3:Ft,ch4:sn,pdfColorType:"draw",precision:2}),Oe(vo),this};var xs=e.fillColor||"0 g";S.__private__.getFillColor=S.getFillColor=function(){return _n(xs)},S.__private__.setFillColor=S.setFillColor=function(ce,Ke,Ft,sn){return xs=Pn({ch1:ce,ch2:Ke,ch3:Ft,ch4:sn,pdfColorType:"fill",precision:2}),Oe(xs),this};var ll=e.textColor||"0 g",tc=S.__private__.getTextColor=S.getTextColor=function(){return _n(ll)};S.__private__.setTextColor=S.setTextColor=function(ce,Ke,Ft,sn){return ll=Pn({ch1:ce,ch2:Ke,ch3:Ft,ch4:sn,pdfColorType:"text",precision:3}),this};var oo=e.charSpace,Sh=S.__private__.getCharSpace=S.getCharSpace=function(){return parseFloat(oo||0)};S.__private__.setCharSpace=S.setCharSpace=function(ce){if(isNaN(ce))throw new Error("Invalid argument passed to jsPDF.setCharSpace");return oo=ce,this};var _l=0;S.CapJoinStyles={0:0,butt:0,but:0,miter:0,1:1,round:1,rounded:1,circle:1,2:2,projecting:2,project:2,square:2,bevel:2},S.__private__.setLineCap=S.setLineCap=function(ce){var Ke=S.CapJoinStyles[ce];if(Ke===void 0)throw new Error("Line cap style of '"+ce+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return _l=Ke,Oe(Ke+" J"),this};var Qo=0;S.__private__.setLineJoin=S.setLineJoin=function(ce){var Ke=S.CapJoinStyles[ce];if(Ke===void 0)throw new Error("Line join style of '"+ce+"' is not recognized. See or extend .CapJoinStyles property for valid styles");return Qo=Ke,Oe(Ke+" j"),this},S.__private__.setLineMiterLimit=S.__private__.setMiterLimit=S.setLineMiterLimit=S.setMiterLimit=function(ce){if(ce=ce||0,isNaN(ce))throw new Error("Invalid argument passed to jsPDF.setLineMiterLimit");return Oe(le(be(ce))+" M"),this},S.GState=aB,S.setGState=function(ce){(ce=typeof ce=="string"?ki[hs[ce]]:Ud(null,ce)).equals(mi)||(Oe("/"+ce.id+" gs"),mi=ce)};var Ud=function(ce,Ke){if(!ce||!hs[ce]){var Ft=!1;for(var sn in ki)if(ki.hasOwnProperty(sn)&&ki[sn].equals(Ke)){Ft=!0;break}if(Ft)Ke=ki[sn];else{var Sn="GS"+(Object.keys(ki).length+1).toString(10);ki[Sn]=Ke,Ke.id=Sn}return ce&&(hs[ce]=Ke.id),Ir.publish("addGState",Ke),Ke}};S.addGState=function(ce,Ke){return Ud(ce,Ke),this},S.saveGraphicsState=function(){return Oe("q"),bi.push({key:Yt,size:xn,color:ll}),this},S.restoreGraphicsState=function(){Oe("Q");var ce=bi.pop();return Yt=ce.key,xn=ce.size,ll=ce.color,mi=null,this},S.setCurrentTransformationMatrix=function(ce){return Oe(ce.toString()+" cm"),this},S.comment=function(ce){return Oe("#"+ce),this};var ta=function(ce,Ke){var Ft=ce||0;Object.defineProperty(this,"x",{enumerable:!0,get:function(){return Ft},set:function(On){isNaN(On)||(Ft=parseFloat(On))}});var sn=Ke||0;Object.defineProperty(this,"y",{enumerable:!0,get:function(){return sn},set:function(On){isNaN(On)||(sn=parseFloat(On))}});var Sn="pt";return Object.defineProperty(this,"type",{enumerable:!0,get:function(){return Sn},set:function(On){Sn=On.toString()}}),this},Yp=function(ce,Ke,Ft,sn){ta.call(this,ce,Ke),this.type="rect";var Sn=Ft||0;Object.defineProperty(this,"w",{enumerable:!0,get:function(){return Sn},set:function(dr){isNaN(dr)||(Sn=parseFloat(dr))}});var On=sn||0;return Object.defineProperty(this,"h",{enumerable:!0,get:function(){return On},set:function(dr){isNaN(dr)||(On=parseFloat(dr))}}),this},bc=function(){this.page=br,this.currentPage=me,this.pages=Ht.slice(0),this.pagesContext=gr.slice(0),this.x=Ln,this.y=Hn,this.matrix=_r,this.width=Ds(me),this.height=wu(me),this.outputDestination=pn,this.id="",this.objectNumber=-1};bc.prototype.restore=function(){br=this.page,me=this.currentPage,gr=this.pagesContext,Ht=this.pages,Ln=this.x,Hn=this.y,_r=this.matrix,nc(me,this.width),Qd(me,this.height),pn=this.outputDestination};var au=function(ce,Ke,Ft,sn,Sn){De.push(new bc),br=me=0,Ht=[],Ln=ce,Hn=Ke,_r=Sn,kl([Ft,sn])},zd=function(ce){if(je[ce])De.pop().restore();else{var Ke=new bc,Ft="Xo"+(Object.keys(Mt).length+1).toString(10);Ke.id=Ft,je[ce]=Ft,Mt[Ft]=Ke,Ir.publish("addFormObject",Ke),De.pop().restore()}};for(var ga in S.beginFormObject=function(ce,Ke,Ft,sn,Sn){return au(ce,Ke,Ft,sn,Sn),this},S.endFormObject=function(ce){return zd(ce),this},S.doFormObject=function(ce,Ke){var Ft=Mt[je[ce]];return Oe("q"),Oe(Ke.toString()+" cm"),Oe("/"+Ft.id+" Do"),Oe("Q"),this},S.getFormObject=function(ce){var Ke=Mt[je[ce]];return{x:Ke.x,y:Ke.y,width:Ke.width,height:Ke.height,matrix:Ke.matrix}},S.save=function(ce,Ke){return ce=ce||"generated.pdf",(Ke=Ke||{}).returnPromise=Ke.returnPromise||!1,Ke.returnPromise===!1?(ex(Zu(Aa()),ce),typeof ex.unload=="function"&&is.setTimeout&&setTimeout(ex.unload,911),this):new Promise(function(Ft,sn){try{var Sn=ex(Zu(Aa()),ce);typeof ex.unload=="function"&&is.setTimeout&&setTimeout(ex.unload,911),Ft(Sn)}catch(On){sn(On.message)}})},Ni.API)Ni.API.hasOwnProperty(ga)&&(ga==="events"&&Ni.API.events.length?function(ce,Ke){var Ft,sn,Sn;for(Sn=Ke.length-1;Sn!==-1;Sn--)Ft=Ke[Sn][0],sn=Ke[Sn][1],ce.subscribe.apply(ce,[Ft].concat(typeof sn=="function"?[sn]:sn))}(Ir,Ni.API.events):S[ga]=Ni.API[ga]);var Ds=S.getPageWidth=function(ce){return(gr[ce=ce||me].mediaBox.topRightX-gr[ce].mediaBox.bottomLeftX)/cn},nc=S.setPageWidth=function(ce,Ke){gr[ce].mediaBox.topRightX=Ke*cn+gr[ce].mediaBox.bottomLeftX},wu=S.getPageHeight=function(ce){return(gr[ce=ce||me].mediaBox.topRightY-gr[ce].mediaBox.bottomLeftY)/cn},Qd=S.setPageHeight=function(ce,Ke){gr[ce].mediaBox.topRightY=Ke*cn+gr[ce].mediaBox.bottomLeftY};return S.internal={pdfEscape:No,getStyle:Od,getFont:Da,getFontSize:gn,getCharSpace:Sh,getTextColor:tc,getLineHeight:Ju,getLineHeightFactor:Xo,getLineWidth:Yu,write:nn,getHorizontalCoordinate:yo,getVerticalCoordinate:ma,getCoordinateString:Yo,getVerticalCoordinateString:Rl,collections:{},newObject:gt,newAdditionalObject:jt,newObjectDeferred:pt,newObjectDeferredBegin:Lt,getFilters:sr,putStream:Cr,events:Ir,scaleFactor:cn,pageSize:{getWidth:function(){return Ds(me)},setWidth:function(ce){nc(me,ce)},getHeight:function(){return wu(me)},setHeight:function(ce){Qd(me,ce)}},encryptionOptions:y,encryption:Ml,getEncryptor:Ur,output:Xu,getNumberOfPages:lf,pages:Ht,out:Oe,f2:ye,f3:he,getPageInfo:sp,getPageInfoByObjId:Sr,getCurrentPageInfo:op,getPDFVersion:N,Point:ta,Rectangle:Yp,Matrix:ve,hasHotfix:ji},Object.defineProperty(S.internal.pageSize,"width",{get:function(){return Ds(me)},set:function(ce){nc(me,ce)},enumerable:!0,configurable:!0}),Object.defineProperty(S.internal.pageSize,"height",{get:function(){return wu(me)},set:function(ce){Qd(me,ce)},enumerable:!0,configurable:!0}),bh.call(S,$t),Yt="F1",Ll(s,n),Ir.publish("initialized"),S}b1.prototype.lsbFirstWord=function(e){return String.fromCharCode(e>>0&255,e>>8&255,e>>16&255,e>>24&255)},b1.prototype.toHexString=function(e){return e.split("").map(function(t){return("0"+(255&t.charCodeAt(0)).toString(16)).slice(-2)}).join("")},b1.prototype.hexToBytes=function(e){for(var t=[],n=0;n<e.length;n+=2)t.push(String.fromCharCode(parseInt(e.substr(n,2),16)));return t.join("")},b1.prototype.processOwnerPassword=function(e,t){return L6(k6(t).substr(0,5),e)},b1.prototype.encryptor=function(e,t){var n=k6(this.encryptionKey+String.fromCharCode(255&e,e>>8&255,e>>16&255,255&t,t>>8&255)).substr(0,10);return function(r){return L6(n,r)}},aB.prototype.equals=function(e){var t,n="id,objectNumber,equals";if(!e||sa(e)!==sa(this))return!1;var r=0;for(t in this)if(!(n.indexOf(t)>=0)){if(this.hasOwnProperty(t)&&!e.hasOwnProperty(t)||this[t]!==e[t])return!1;r++}for(t in e)e.hasOwnProperty(t)&&n.indexOf(t)<0&&r--;return r===0},Ni.API={events:[]},Ni.version="2.5.2";var Gl=Ni.API,wQ=1,o_=function(e){return e.replace(/\\/g,"\\\\").replace(/\(/g,"\\(").replace(/\)/g,"\\)")},l1=function(e){return e.replace(/\\\\/g,"\\").replace(/\\\(/g,"(").replace(/\\\)/g,")")},ps=function(e){return e.toFixed(2)},X0=function(e){return e.toFixed(5)};Gl.__acroform__={};var sf=function(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e},_Y=function(e){return e*wQ},Rm=function(e){var t=new ehe,n=pi.internal.getHeight(e)||0,r=pi.internal.getWidth(e)||0;return t.BBox=[0,0,Number(ps(r)),Number(ps(n))],t},nrt=Gl.__acroform__.setBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBit");return e|=1<<t},rrt=Gl.__acroform__.clearBit=function(e,t){if(e=e||0,t=t||0,isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBit");return e&=~(1<<t)},irt=Gl.__acroform__.getBit=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBit");return e&1<<t?1:0},gc=Gl.__acroform__.getBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.getBitForPdf");return irt(e,t-1)},yc=Gl.__acroform__.setBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.setBitForPdf");return nrt(e,t-1)},vc=Gl.__acroform__.clearBitForPdf=function(e,t){if(isNaN(e)||isNaN(t))throw new Error("Invalid arguments passed to jsPDF.API.__acroform__.clearBitForPdf");return rrt(e,t-1)},srt=Gl.__acroform__.calculateCoordinates=function(e,t){var n=t.internal.getHorizontalCoordinate,r=t.internal.getVerticalCoordinate,s=e[0],a=e[1],c=e[2],i=e[3],f={};return f.lowerLeft_X=n(s)||0,f.lowerLeft_Y=r(a+i)||0,f.upperRight_X=n(s+c)||0,f.upperRight_Y=r(a)||0,[Number(ps(f.lowerLeft_X)),Number(ps(f.lowerLeft_Y)),Number(ps(f.upperRight_X)),Number(ps(f.upperRight_Y))]},ort=function(e){if(e.appearanceStreamContent)return e.appearanceStreamContent;if(e.V||e.DV){var t=[],n=e._V||e.DV,r=M6(e,n),s=e.scope.internal.getFont(e.fontName,e.fontStyle).id;t.push("/Tx BMC"),t.push("q"),t.push("BT"),t.push(e.scope.__private__.encodeColorString(e.color)),t.push("/"+s+" "+ps(r.fontSize)+" Tf"),t.push("1 0 0 1 0 0 Tm"),t.push(r.text),t.push("ET"),t.push("Q"),t.push("EMC");var a=Rm(e);return a.scope=e.scope,a.stream=t.join(`
`),a}},M6=function(e,t){var n=e.fontSize===0?e.maxFontSize:e.fontSize,r={text:"",fontSize:""},s=(t=(t=t.substr(0,1)=="("?t.substr(1):t).substr(t.length-1)==")"?t.substr(0,t.length-1):t).split(" ");s=e.multiline?s.map(function(he){return he.split(`
`)}):s.map(function(he){return[he]});var a=n,c=pi.internal.getHeight(e)||0;c=c<0?-c:c;var i=pi.internal.getWidth(e)||0;i=i<0?-i:i;var f=function(he,be,Te){if(he+1<s.length){var Ee=be+" "+s[he+1][0];return Z3(Ee,e,Te).width<=i-4}return!1};a++;e:for(;a>0;){t="",a--;var g,y,b=Z3("3",e,a).height,T=e.multiline?c-a:(c-b)/2,S=T+=2,U=0,N=0,W=0;if(a<=0){t=`(...) Tj
`,t+="% Width of Text: "+Z3(t,e,a=12).width+", FieldWidth:"+i+`
`;break}for(var L="",Q=0,V=0;V<s.length;V++)if(s.hasOwnProperty(V)){var Z=!1;if(s[V].length!==1&&W!==s[V].length-1){if((b+2)*(Q+2)+2>c)continue e;L+=s[V][W],Z=!0,N=V,V--}else{L=(L+=s[V][W]+" ").substr(L.length-1)==" "?L.substr(0,L.length-1):L;var ne=parseInt(V),Y=f(ne,L,a),le=V>=s.length-1;if(Y&&!le){L+=" ",W=0;continue}if(Y||le){if(le)N=ne;else if(e.multiline&&(b+2)*(Q+2)+2>c)continue e}else{if(!e.multiline||(b+2)*(Q+2)+2>c)continue e;N=ne}}for(var pe="",_e=U;_e<=N;_e++){var ye=s[_e];if(e.multiline){if(_e===N){pe+=ye[W]+" ",W=(W+1)%ye.length;continue}if(_e===U){pe+=ye[ye.length-1]+" ";continue}}pe+=ye[0]+" "}switch(pe=pe.substr(pe.length-1)==" "?pe.substr(0,pe.length-1):pe,y=Z3(pe,e,a).width,e.textAlign){case"right":g=i-y-2;break;case"center":g=(i-y)/2;break;case"left":default:g=2}t+=ps(g)+" "+ps(S)+` Td
`,t+="("+o_(pe)+`) Tj
`,t+=-ps(g)+` 0 Td
`,S=-(a+2),y=0,U=Z?N:N+1,Q++,L=""}break}return r.text=t,r.fontSize=a,r},Z3=function(e,t,n){var r=t.scope.internal.getFont(t.fontName,t.fontStyle),s=t.scope.getStringUnitWidth(e,{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n);return{height:t.scope.getStringUnitWidth("3",{font:r,fontSize:parseFloat(n),charSpace:0})*parseFloat(n)*1.5,width:s}},art={fields:[],xForms:[],acroFormDictionaryRoot:null,printedOut:!1,internal:null,isInitialized:!1},lrt=function(e,t){var n={type:"reference",object:e};t.internal.getPageInfo(e.page).pageContext.annotations.find(function(r){return r.type===n.type&&r.object===n.object})===void 0&&t.internal.getPageInfo(e.page).pageContext.annotations.push(n)},crt=function(e,t){for(var n in e)if(e.hasOwnProperty(n)){var r=n,s=e[n];t.internal.newObjectDeferredBegin(s.objId,!0),sa(s)==="object"&&typeof s.putStream=="function"&&s.putStream(),delete e[r]}},urt=function(e,t){if(t.scope=e,e.internal!==void 0&&(e.internal.acroformPlugin===void 0||e.internal.acroformPlugin.isInitialized===!1)){if(sm.FieldNum=0,e.internal.acroformPlugin=JSON.parse(JSON.stringify(art)),e.internal.acroformPlugin.acroFormDictionaryRoot)throw new Error("Exception while creating AcroformDictionary");wQ=e.internal.scaleFactor,e.internal.acroformPlugin.acroFormDictionaryRoot=new the,e.internal.acroformPlugin.acroFormDictionaryRoot.scope=e,e.internal.acroformPlugin.acroFormDictionaryRoot._eventID=e.internal.events.subscribe("postPutResources",function(){(function(n){n.internal.events.unsubscribe(n.internal.acroformPlugin.acroFormDictionaryRoot._eventID),delete n.internal.acroformPlugin.acroFormDictionaryRoot._eventID,n.internal.acroformPlugin.printedOut=!0})(e)}),e.internal.events.subscribe("buildDocument",function(){(function(n){n.internal.acroformPlugin.acroFormDictionaryRoot.objId=void 0;var r=n.internal.acroformPlugin.acroFormDictionaryRoot.Fields;for(var s in r)if(r.hasOwnProperty(s)){var a=r[s];a.objId=void 0,a.hasAnnotation&&lrt(a,n)}})(e)}),e.internal.events.subscribe("putCatalog",function(){(function(n){if(n.internal.acroformPlugin.acroFormDictionaryRoot===void 0)throw new Error("putCatalogCallback: Root missing.");n.internal.write("/AcroForm "+n.internal.acroformPlugin.acroFormDictionaryRoot.objId+" 0 R")})(e)}),e.internal.events.subscribe("postPutPages",function(n){(function(r,s){var a=!r;for(var c in r||(s.internal.newObjectDeferredBegin(s.internal.acroformPlugin.acroFormDictionaryRoot.objId,!0),s.internal.acroformPlugin.acroFormDictionaryRoot.putStream()),r=r||s.internal.acroformPlugin.acroFormDictionaryRoot.Kids)if(r.hasOwnProperty(c)){var i=r[c],f=[],g=i.Rect;if(i.Rect&&(i.Rect=srt(i.Rect,s)),s.internal.newObjectDeferredBegin(i.objId,!0),i.DA=pi.createDefaultAppearanceStream(i),sa(i)==="object"&&typeof i.getKeyValueListForStream=="function"&&(f=i.getKeyValueListForStream()),i.Rect=g,i.hasAppearanceStream&&!i.appearanceStreamContent){var y=ort(i);f.push({key:"AP",value:"<</N "+y+">>"}),s.internal.acroformPlugin.xForms.push(y)}if(i.appearanceStreamContent){var b="";for(var T in i.appearanceStreamContent)if(i.appearanceStreamContent.hasOwnProperty(T)){var S=i.appearanceStreamContent[T];if(b+="/"+T+" ",b+="<<",Object.keys(S).length>=1||Array.isArray(S)){for(var c in S)if(S.hasOwnProperty(c)){var U=S[c];typeof U=="function"&&(U=U.call(s,i)),b+="/"+c+" "+U+" ",s.internal.acroformPlugin.xForms.indexOf(U)>=0||s.internal.acroformPlugin.xForms.push(U)}}else typeof(U=S)=="function"&&(U=U.call(s,i)),b+="/"+c+" "+U,s.internal.acroformPlugin.xForms.indexOf(U)>=0||s.internal.acroformPlugin.xForms.push(U);b+=">>"}f.push({key:"AP",value:`<<
`+b+">>"})}s.internal.putStream({additionalKeyValues:f,objectId:i.objId}),s.internal.out("endobj")}a&&crt(s.internal.acroformPlugin.xForms,s)})(n,e)}),e.internal.acroformPlugin.isInitialized=!0}},Jde=Gl.__acroform__.arrayToPdfArray=function(e,t,n){var r=function(c){return c};if(Array.isArray(e)){for(var s="[",a=0;a<e.length;a++)switch(a!==0&&(s+=" "),sa(e[a])){case"boolean":case"number":case"object":s+=e[a].toString();break;case"string":e[a].substr(0,1)!=="/"?(t!==void 0&&n&&(r=n.internal.getEncryptor(t)),s+="("+o_(r(e[a].toString()))+")"):s+=e[a].toString()}return s+="]"}throw new Error("Invalid argument passed to jsPDF.__acroform__.arrayToPdfArray")},Z5=function(e,t,n){var r=function(s){return s};return t!==void 0&&n&&(r=n.internal.getEncryptor(t)),(e=e||"").toString(),e="("+o_(r(e))+")"},$m=function(){this._objId=void 0,this._scope=void 0,Object.defineProperty(this,"objId",{get:function(){if(this._objId===void 0){if(this.scope===void 0)return;this._objId=this.scope.internal.newObjectDeferred()}return this._objId},set:function(e){this._objId=e}}),Object.defineProperty(this,"scope",{value:this._scope,writable:!0})};$m.prototype.toString=function(){return this.objId+" 0 R"},$m.prototype.putStream=function(){var e=this.getKeyValueListForStream();this.scope.internal.putStream({data:this.stream,additionalKeyValues:e,objectId:this.objId}),this.scope.internal.out("endobj")},$m.prototype.getKeyValueListForStream=function(){var e=[],t=Object.getOwnPropertyNames(this).filter(function(a){return a!="content"&&a!="appearanceStreamContent"&&a!="scope"&&a!="objId"&&a.substring(0,1)!="_"});for(var n in t)if(Object.getOwnPropertyDescriptor(this,t[n]).configurable===!1){var r=t[n],s=this[r];s&&(Array.isArray(s)?e.push({key:r,value:Jde(s,this.objId,this.scope)}):s instanceof $m?(s.scope=this.scope,e.push({key:r,value:s.objId+" 0 R"})):typeof s!="function"&&e.push({key:r,value:s}))}return e};var ehe=function(){$m.call(this),Object.defineProperty(this,"Type",{value:"/XObject",configurable:!1,writable:!0}),Object.defineProperty(this,"Subtype",{value:"/Form",configurable:!1,writable:!0}),Object.defineProperty(this,"FormType",{value:1,configurable:!1,writable:!0});var e,t=[];Object.defineProperty(this,"BBox",{configurable:!1,get:function(){return t},set:function(n){t=n}}),Object.defineProperty(this,"Resources",{value:"2 0 R",configurable:!1,writable:!0}),Object.defineProperty(this,"stream",{enumerable:!1,configurable:!0,set:function(n){e=n.trim()},get:function(){return e||null}})};sf(ehe,$m);var the=function(){$m.call(this);var e,t=[];Object.defineProperty(this,"Kids",{enumerable:!1,configurable:!0,get:function(){return t.length>0?t:void 0}}),Object.defineProperty(this,"Fields",{enumerable:!1,configurable:!1,get:function(){return t}}),Object.defineProperty(this,"DA",{enumerable:!1,configurable:!1,get:function(){if(e){var n=function(r){return r};return this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),"("+o_(n(e))+")"}},set:function(n){e=n}})};sf(the,$m);var sm=function e(){$m.call(this);var t=4;Object.defineProperty(this,"F",{enumerable:!1,configurable:!1,get:function(){return t},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute F supplied.');t=L}}),Object.defineProperty(this,"showWhenPrinted",{enumerable:!0,configurable:!0,get:function(){return!!gc(t,3)},set:function(L){L?this.F=yc(t,3):this.F=vc(t,3)}});var n=0;Object.defineProperty(this,"Ff",{enumerable:!1,configurable:!1,get:function(){return n},set:function(L){if(isNaN(L))throw new Error('Invalid value "'+L+'" for attribute Ff supplied.');n=L}});var r=[];Object.defineProperty(this,"Rect",{enumerable:!1,configurable:!1,get:function(){if(r.length!==0)return r},set:function(L){r=L!==void 0?L:[]}}),Object.defineProperty(this,"x",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[0])?0:r[0]},set:function(L){r[0]=L}}),Object.defineProperty(this,"y",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[1])?0:r[1]},set:function(L){r[1]=L}}),Object.defineProperty(this,"width",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[2])?0:r[2]},set:function(L){r[2]=L}}),Object.defineProperty(this,"height",{enumerable:!0,configurable:!0,get:function(){return!r||isNaN(r[3])?0:r[3]},set:function(L){r[3]=L}});var s="";Object.defineProperty(this,"FT",{enumerable:!0,configurable:!1,get:function(){return s},set:function(L){switch(L){case"/Btn":case"/Tx":case"/Ch":case"/Sig":s=L;break;default:throw new Error('Invalid value "'+L+'" for attribute FT supplied.')}}});var a=null;Object.defineProperty(this,"T",{enumerable:!0,configurable:!1,get:function(){if(!a||a.length<1){if(this instanceof nF)return;a="FieldObject"+e.FieldNum++}var L=function(Q){return Q};return this.scope&&(L=this.scope.internal.getEncryptor(this.objId)),"("+o_(L(a))+")"},set:function(L){a=L.toString()}}),Object.defineProperty(this,"fieldName",{configurable:!0,enumerable:!0,get:function(){return a},set:function(L){a=L}});var c="helvetica";Object.defineProperty(this,"fontName",{enumerable:!0,configurable:!0,get:function(){return c},set:function(L){c=L}});var i="normal";Object.defineProperty(this,"fontStyle",{enumerable:!0,configurable:!0,get:function(){return i},set:function(L){i=L}});var f=0;Object.defineProperty(this,"fontSize",{enumerable:!0,configurable:!0,get:function(){return f},set:function(L){f=L}});var g=void 0;Object.defineProperty(this,"maxFontSize",{enumerable:!0,configurable:!0,get:function(){return g===void 0?50/wQ:g},set:function(L){g=L}});var y="black";Object.defineProperty(this,"color",{enumerable:!0,configurable:!0,get:function(){return y},set:function(L){y=L}});var b="/F1 0 Tf 0 g";Object.defineProperty(this,"DA",{enumerable:!0,configurable:!1,get:function(){if(!(!b||this instanceof nF||this instanceof My))return Z5(b,this.objId,this.scope)},set:function(L){L=L.toString(),b=L}});var T=null;Object.defineProperty(this,"DV",{enumerable:!1,configurable:!1,get:function(){if(T)return this instanceof Xc?T:Z5(T,this.objId,this.scope)},set:function(L){L=L.toString(),T=this instanceof Xc?L:L.substr(0,1)==="("?l1(L.substr(1,L.length-2)):l1(L)}}),Object.defineProperty(this,"defaultValue",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xc?l1(T.substr(1,T.length-1)):T},set:function(L){L=L.toString(),T=this instanceof Xc?"/"+L:L}});var S=null;Object.defineProperty(this,"_V",{enumerable:!1,configurable:!1,get:function(){if(S)return S},set:function(L){this.V=L}}),Object.defineProperty(this,"V",{enumerable:!1,configurable:!1,get:function(){if(S)return this instanceof Xc?S:Z5(S,this.objId,this.scope)},set:function(L){L=L.toString(),S=this instanceof Xc?L:L.substr(0,1)==="("?l1(L.substr(1,L.length-2)):l1(L)}}),Object.defineProperty(this,"value",{enumerable:!0,configurable:!0,get:function(){return this instanceof Xc?l1(S.substr(1,S.length-1)):S},set:function(L){L=L.toString(),S=this instanceof Xc?"/"+L:L}}),Object.defineProperty(this,"hasAnnotation",{enumerable:!0,configurable:!0,get:function(){return this.Rect}}),Object.defineProperty(this,"Type",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Annot":null}}),Object.defineProperty(this,"Subtype",{enumerable:!0,configurable:!1,get:function(){return this.hasAnnotation?"/Widget":null}});var U,N=!1;Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return N},set:function(L){L=!!L,N=L}}),Object.defineProperty(this,"page",{enumerable:!0,configurable:!0,get:function(){if(U)return U},set:function(L){U=L}}),Object.defineProperty(this,"readOnly",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,1)},set:function(L){L?this.Ff=yc(this.Ff,1):this.Ff=vc(this.Ff,1)}}),Object.defineProperty(this,"required",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,2)},set:function(L){L?this.Ff=yc(this.Ff,2):this.Ff=vc(this.Ff,2)}}),Object.defineProperty(this,"noExport",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,3)},set:function(L){L?this.Ff=yc(this.Ff,3):this.Ff=vc(this.Ff,3)}});var W=null;Object.defineProperty(this,"Q",{enumerable:!0,configurable:!1,get:function(){if(W!==null)return W},set:function(L){if([0,1,2].indexOf(L)===-1)throw new Error('Invalid value "'+L+'" for attribute Q supplied.');W=L}}),Object.defineProperty(this,"textAlign",{get:function(){var L;switch(W){case 0:default:L="left";break;case 1:L="center";break;case 2:L="right"}return L},configurable:!0,enumerable:!0,set:function(L){switch(L){case"right":case 2:W=2;break;case"center":case 1:W=1;break;case"left":case 0:default:W=0}}})};sf(sm,$m);var Bx=function(){sm.call(this),this.FT="/Ch",this.V="()",this.fontName="zapfdingbats";var e=0;Object.defineProperty(this,"TI",{enumerable:!0,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"topIndex",{enumerable:!0,configurable:!0,get:function(){return e},set:function(n){e=n}});var t=[];Object.defineProperty(this,"Opt",{enumerable:!0,configurable:!1,get:function(){return Jde(t,this.objId,this.scope)},set:function(n){var r,s;s=[],typeof(r=n)=="string"&&(s=function(a,c,i){i||(i=1);for(var f,g=[];f=c.exec(a);)g.push(f[i]);return g}(r,/\((.*?)\)/g)),t=s}}),this.getOptions=function(){return t},this.setOptions=function(n){t=n,this.sort&&t.sort()},this.addOption=function(n){n=(n=n||"").toString(),t.push(n),this.sort&&t.sort()},this.removeOption=function(n,r){for(r=r||!1,n=(n=n||"").toString();t.indexOf(n)!==-1&&(t.splice(t.indexOf(n),1),r!==!1););},Object.defineProperty(this,"combo",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,18)},set:function(n){n?this.Ff=yc(this.Ff,18):this.Ff=vc(this.Ff,18)}}),Object.defineProperty(this,"edit",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,19)},set:function(n){this.combo===!0&&(n?this.Ff=yc(this.Ff,19):this.Ff=vc(this.Ff,19))}}),Object.defineProperty(this,"sort",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,20)},set:function(n){n?(this.Ff=yc(this.Ff,20),t.sort()):this.Ff=vc(this.Ff,20)}}),Object.defineProperty(this,"multiSelect",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,22)},set:function(n){n?this.Ff=yc(this.Ff,22):this.Ff=vc(this.Ff,22)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,23)},set:function(n){n?this.Ff=yc(this.Ff,23):this.Ff=vc(this.Ff,23)}}),Object.defineProperty(this,"commitOnSelChange",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,27)},set:function(n){n?this.Ff=yc(this.Ff,27):this.Ff=vc(this.Ff,27)}}),this.hasAppearanceStream=!1};sf(Bx,sm);var Ex=function(){Bx.call(this),this.fontName="helvetica",this.combo=!1};sf(Ex,Bx);var Tx=function(){Ex.call(this),this.combo=!0};sf(Tx,Ex);var kC=function(){Tx.call(this),this.edit=!0};sf(kC,Tx);var Xc=function(){sm.call(this),this.FT="/Btn",Object.defineProperty(this,"noToggleToOff",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,15)},set:function(n){n?this.Ff=yc(this.Ff,15):this.Ff=vc(this.Ff,15)}}),Object.defineProperty(this,"radio",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,16)},set:function(n){n?this.Ff=yc(this.Ff,16):this.Ff=vc(this.Ff,16)}}),Object.defineProperty(this,"pushButton",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,17)},set:function(n){n?this.Ff=yc(this.Ff,17):this.Ff=vc(this.Ff,17)}}),Object.defineProperty(this,"radioIsUnison",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,26)},set:function(n){n?this.Ff=yc(this.Ff,26):this.Ff=vc(this.Ff,26)}});var e,t={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var n=function(a){return a};if(this.scope&&(n=this.scope.internal.getEncryptor(this.objId)),Object.keys(t).length!==0){var r,s=[];for(r in s.push("<<"),t)s.push("/"+r+" ("+o_(n(t[r]))+")");return s.push(">>"),s.join(`
`)}},set:function(n){sa(n)==="object"&&(t=n)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return t.CA||""},set:function(n){typeof n=="string"&&(t.CA=n)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return e},set:function(n){e=n}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return e.substr(1,e.length-1)},set:function(n){e="/"+n}})};sf(Xc,sm);var LC=function(){Xc.call(this),this.pushButton=!0};sf(LC,Xc);var Ix=function(){Xc.call(this),this.radio=!0,this.pushButton=!1;var e=[];Object.defineProperty(this,"Kids",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t!==void 0?t:[]}})};sf(Ix,Xc);var nF=function(){var e,t;sm.call(this),Object.defineProperty(this,"Parent",{enumerable:!1,configurable:!1,get:function(){return e},set:function(s){e=s}}),Object.defineProperty(this,"optionName",{enumerable:!1,configurable:!0,get:function(){return t},set:function(s){t=s}});var n,r={};Object.defineProperty(this,"MK",{enumerable:!1,configurable:!1,get:function(){var s=function(i){return i};this.scope&&(s=this.scope.internal.getEncryptor(this.objId));var a,c=[];for(a in c.push("<<"),r)c.push("/"+a+" ("+o_(s(r[a]))+")");return c.push(">>"),c.join(`
`)},set:function(s){sa(s)==="object"&&(r=s)}}),Object.defineProperty(this,"caption",{enumerable:!0,configurable:!0,get:function(){return r.CA||""},set:function(s){typeof s=="string"&&(r.CA=s)}}),Object.defineProperty(this,"AS",{enumerable:!1,configurable:!1,get:function(){return n},set:function(s){n=s}}),Object.defineProperty(this,"appearanceState",{enumerable:!0,configurable:!0,get:function(){return n.substr(1,n.length-1)},set:function(s){n="/"+s}}),this.caption="l",this.appearanceState="Off",this._AppearanceType=pi.RadioButton.Circle,this.appearanceStreamContent=this._AppearanceType.createAppearanceStream(this.optionName)};sf(nF,sm),Ix.prototype.setAppearance=function(e){if(!("createAppearanceStream"in e)||!("getCA"in e))throw new Error("Couldn't assign Appearance to RadioButton. Appearance was Invalid!");for(var t in this.Kids)if(this.Kids.hasOwnProperty(t)){var n=this.Kids[t];n.appearanceStreamContent=e.createAppearanceStream(n.optionName),n.caption=e.getCA()}},Ix.prototype.createOption=function(e){var t=new nF;return t.Parent=this,t.optionName=e,this.Kids.push(t),drt.call(this.scope,t),t};var MC=function(){Xc.call(this),this.fontName="zapfdingbats",this.caption="3",this.appearanceState="On",this.value="On",this.textAlign="center",this.appearanceStreamContent=pi.CheckBox.createAppearanceStream()};sf(MC,Xc);var My=function(){sm.call(this),this.FT="/Tx",Object.defineProperty(this,"multiline",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,13)},set:function(t){t?this.Ff=yc(this.Ff,13):this.Ff=vc(this.Ff,13)}}),Object.defineProperty(this,"fileSelect",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,21)},set:function(t){t?this.Ff=yc(this.Ff,21):this.Ff=vc(this.Ff,21)}}),Object.defineProperty(this,"doNotSpellCheck",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,23)},set:function(t){t?this.Ff=yc(this.Ff,23):this.Ff=vc(this.Ff,23)}}),Object.defineProperty(this,"doNotScroll",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,24)},set:function(t){t?this.Ff=yc(this.Ff,24):this.Ff=vc(this.Ff,24)}}),Object.defineProperty(this,"comb",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,25)},set:function(t){t?this.Ff=yc(this.Ff,25):this.Ff=vc(this.Ff,25)}}),Object.defineProperty(this,"richText",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,26)},set:function(t){t?this.Ff=yc(this.Ff,26):this.Ff=vc(this.Ff,26)}});var e=null;Object.defineProperty(this,"MaxLen",{enumerable:!0,configurable:!1,get:function(){return e},set:function(t){e=t}}),Object.defineProperty(this,"maxLength",{enumerable:!0,configurable:!0,get:function(){return e},set:function(t){Number.isInteger(t)&&(e=t)}}),Object.defineProperty(this,"hasAppearanceStream",{enumerable:!0,configurable:!0,get:function(){return this.V||this.DV}})};sf(My,sm);var NC=function(){My.call(this),Object.defineProperty(this,"password",{enumerable:!0,configurable:!0,get:function(){return!!gc(this.Ff,14)},set:function(e){e?this.Ff=yc(this.Ff,14):this.Ff=vc(this.Ff,14)}}),this.password=!0};sf(NC,My);var pi={CheckBox:{createAppearanceStream:function(){return{N:{On:pi.CheckBox.YesNormal},D:{On:pi.CheckBox.YesPushDown,Off:pi.CheckBox.OffPushDown}}},YesPushDown:function(e){var t=Rm(e);t.scope=e.scope;var n=[],r=e.scope.internal.getFont(e.fontName,e.fontStyle).id,s=e.scope.__private__.encodeColorString(e.color),a=M6(e,e.caption);return n.push("0.749023 g"),n.push("0 0 "+ps(pi.internal.getWidth(e))+" "+ps(pi.internal.getHeight(e))+" re"),n.push("f"),n.push("BMC"),n.push("q"),n.push("0 0 1 rg"),n.push("/"+r+" "+ps(a.fontSize)+" Tf "+s),n.push("BT"),n.push(a.text),n.push("ET"),n.push("Q"),n.push("EMC"),t.stream=n.join(`
`),t},YesNormal:function(e){var t=Rm(e);t.scope=e.scope;var n=e.scope.internal.getFont(e.fontName,e.fontStyle).id,r=e.scope.__private__.encodeColorString(e.color),s=[],a=pi.internal.getHeight(e),c=pi.internal.getWidth(e),i=M6(e,e.caption);return s.push("1 g"),s.push("0 0 "+ps(c)+" "+ps(a)+" re"),s.push("f"),s.push("q"),s.push("0 0 1 rg"),s.push("0 0 "+ps(c-1)+" "+ps(a-1)+" re"),s.push("W"),s.push("n"),s.push("0 g"),s.push("BT"),s.push("/"+n+" "+ps(i.fontSize)+" Tf "+r),s.push(i.text),s.push("ET"),s.push("Q"),t.stream=s.join(`
`),t},OffPushDown:function(e){var t=Rm(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ps(pi.internal.getWidth(e))+" "+ps(pi.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}},RadioButton:{Circle:{createAppearanceStream:function(e){var t={D:{Off:pi.RadioButton.Circle.OffPushDown},N:{}};return t.N[e]=pi.RadioButton.Circle.YesNormal,t.D[e]=pi.RadioButton.Circle.YesPushDown,t},getCA:function(){return"l"},YesNormal:function(e){var t=Rm(e);t.scope=e.scope;var n=[],r=pi.internal.getWidth(e)<=pi.internal.getHeight(e)?pi.internal.getWidth(e)/4:pi.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=pi.internal.Bezier_C,a=Number((r*s).toFixed(5));return n.push("q"),n.push("1 0 0 1 "+X0(pi.internal.getWidth(e)/2)+" "+X0(pi.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+a+" "+a+" "+r+" 0 "+r+" c"),n.push("-"+a+" "+r+" -"+r+" "+a+" -"+r+" 0 c"),n.push("-"+r+" -"+a+" -"+a+" -"+r+" 0 -"+r+" c"),n.push(a+" -"+r+" "+r+" -"+a+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Rm(e);t.scope=e.scope;var n=[],r=pi.internal.getWidth(e)<=pi.internal.getHeight(e)?pi.internal.getWidth(e)/4:pi.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*pi.internal.Bezier_C).toFixed(5)),c=Number((r*pi.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+X0(pi.internal.getWidth(e)/2)+" "+X0(pi.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),n.push("0 g"),n.push("q"),n.push("1 0 0 1 "+X0(pi.internal.getWidth(e)/2)+" "+X0(pi.internal.getHeight(e)/2)+" cm"),n.push(r+" 0 m"),n.push(r+" "+c+" "+c+" "+r+" 0 "+r+" c"),n.push("-"+c+" "+r+" -"+r+" "+c+" -"+r+" 0 c"),n.push("-"+r+" -"+c+" -"+c+" -"+r+" 0 -"+r+" c"),n.push(c+" -"+r+" "+r+" -"+c+" "+r+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t},OffPushDown:function(e){var t=Rm(e);t.scope=e.scope;var n=[],r=pi.internal.getWidth(e)<=pi.internal.getHeight(e)?pi.internal.getWidth(e)/4:pi.internal.getHeight(e)/4;r=Number((.9*r).toFixed(5));var s=Number((2*r).toFixed(5)),a=Number((s*pi.internal.Bezier_C).toFixed(5));return n.push("0.749023 g"),n.push("q"),n.push("1 0 0 1 "+X0(pi.internal.getWidth(e)/2)+" "+X0(pi.internal.getHeight(e)/2)+" cm"),n.push(s+" 0 m"),n.push(s+" "+a+" "+a+" "+s+" 0 "+s+" c"),n.push("-"+a+" "+s+" -"+s+" "+a+" -"+s+" 0 c"),n.push("-"+s+" -"+a+" -"+a+" -"+s+" 0 -"+s+" c"),n.push(a+" -"+s+" "+s+" -"+a+" "+s+" 0 c"),n.push("f"),n.push("Q"),t.stream=n.join(`
`),t}},Cross:{createAppearanceStream:function(e){var t={D:{Off:pi.RadioButton.Cross.OffPushDown},N:{}};return t.N[e]=pi.RadioButton.Cross.YesNormal,t.D[e]=pi.RadioButton.Cross.YesPushDown,t},getCA:function(){return"8"},YesNormal:function(e){var t=Rm(e);t.scope=e.scope;var n=[],r=pi.internal.calculateCross(e);return n.push("q"),n.push("1 1 "+ps(pi.internal.getWidth(e)-2)+" "+ps(pi.internal.getHeight(e)-2)+" re"),n.push("W"),n.push("n"),n.push(ps(r.x1.x)+" "+ps(r.x1.y)+" m"),n.push(ps(r.x2.x)+" "+ps(r.x2.y)+" l"),n.push(ps(r.x4.x)+" "+ps(r.x4.y)+" m"),n.push(ps(r.x3.x)+" "+ps(r.x3.y)+" l"),n.push("s"),n.push("Q"),t.stream=n.join(`
`),t},YesPushDown:function(e){var t=Rm(e);t.scope=e.scope;var n=pi.internal.calculateCross(e),r=[];return r.push("0.749023 g"),r.push("0 0 "+ps(pi.internal.getWidth(e))+" "+ps(pi.internal.getHeight(e))+" re"),r.push("f"),r.push("q"),r.push("1 1 "+ps(pi.internal.getWidth(e)-2)+" "+ps(pi.internal.getHeight(e)-2)+" re"),r.push("W"),r.push("n"),r.push(ps(n.x1.x)+" "+ps(n.x1.y)+" m"),r.push(ps(n.x2.x)+" "+ps(n.x2.y)+" l"),r.push(ps(n.x4.x)+" "+ps(n.x4.y)+" m"),r.push(ps(n.x3.x)+" "+ps(n.x3.y)+" l"),r.push("s"),r.push("Q"),t.stream=r.join(`
`),t},OffPushDown:function(e){var t=Rm(e);t.scope=e.scope;var n=[];return n.push("0.749023 g"),n.push("0 0 "+ps(pi.internal.getWidth(e))+" "+ps(pi.internal.getHeight(e))+" re"),n.push("f"),t.stream=n.join(`
`),t}}},createDefaultAppearanceStream:function(e){var t=e.scope.internal.getFont(e.fontName,e.fontStyle).id,n=e.scope.__private__.encodeColorString(e.color);return"/"+t+" "+e.fontSize+" Tf "+n}};pi.internal={Bezier_C:.551915024494,calculateCross:function(e){var t=pi.internal.getWidth(e),n=pi.internal.getHeight(e),r=Math.min(t,n);return{x1:{x:(t-r)/2,y:(n-r)/2+r},x2:{x:(t-r)/2+r,y:(n-r)/2},x3:{x:(t-r)/2,y:(n-r)/2},x4:{x:(t-r)/2+r,y:(n-r)/2+r}}}},pi.internal.getWidth=function(e){var t=0;return sa(e)==="object"&&(t=_Y(e.Rect[2])),t},pi.internal.getHeight=function(e){var t=0;return sa(e)==="object"&&(t=_Y(e.Rect[3])),t};var drt=Gl.addField=function(e){if(urt(this,e),!(e instanceof sm))throw new Error("Invalid argument passed to jsPDF.addField.");var t;return(t=e).scope.internal.acroformPlugin.printedOut&&(t.scope.internal.acroformPlugin.printedOut=!1,t.scope.internal.acroformPlugin.acroFormDictionaryRoot=null),t.scope.internal.acroformPlugin.acroFormDictionaryRoot.Fields.push(t),e.page=e.scope.internal.getCurrentPageInfo().pageNumber,this};Gl.AcroFormChoiceField=Bx,Gl.AcroFormListBox=Ex,Gl.AcroFormComboBox=Tx,Gl.AcroFormEditBox=kC,Gl.AcroFormButton=Xc,Gl.AcroFormPushButton=LC,Gl.AcroFormRadioButton=Ix,Gl.AcroFormCheckBox=MC,Gl.AcroFormTextField=My,Gl.AcroFormPasswordField=NC,Gl.AcroFormAppearance=pi,Gl.AcroForm={ChoiceField:Bx,ListBox:Ex,ComboBox:Tx,EditBox:kC,Button:Xc,PushButton:LC,RadioButton:Ix,CheckBox:MC,TextField:My,PasswordField:NC,Appearance:pi},Ni.AcroForm={ChoiceField:Bx,ListBox:Ex,ComboBox:Tx,EditBox:kC,Button:Xc,PushButton:LC,RadioButton:Ix,CheckBox:MC,TextField:My,PasswordField:NC,Appearance:pi};var hrt=Ni.AcroForm;function nhe(e){return e.reduce(function(t,n,r){return t[n]=r,t},{})}(function(e){e.__addimage__={};var t="UNKNOWN",n={PNG:[[137,80,78,71]],TIFF:[[77,77,0,42],[73,73,42,0]],JPEG:[[255,216,255,224,void 0,void 0,74,70,73,70,0],[255,216,255,225,void 0,void 0,69,120,105,102,0,0],[255,216,255,219],[255,216,255,238]],JPEG2000:[[0,0,0,12,106,80,32,32]],GIF87a:[[71,73,70,56,55,97]],GIF89a:[[71,73,70,56,57,97]],WEBP:[[82,73,70,70,void 0,void 0,void 0,void 0,87,69,66,80]],BMP:[[66,77],[66,65],[67,73],[67,80],[73,67],[80,84]]},r=e.__addimage__.getImageFileTypeByImageData=function(he,be){var Te,Ee,Ne,Ge,Je,Ue=t;if((be=be||t)==="RGBA"||he.data!==void 0&&he.data instanceof Uint8ClampedArray&&"height"in he&&"width"in he)return"RGBA";if(Y(he))for(Je in n)for(Ne=n[Je],Te=0;Te<Ne.length;Te+=1){for(Ge=!0,Ee=0;Ee<Ne[Te].length;Ee+=1)if(Ne[Te][Ee]!==void 0&&Ne[Te][Ee]!==he[Ee]){Ge=!1;break}if(Ge===!0){Ue=Je;break}}else for(Je in n)for(Ne=n[Je],Te=0;Te<Ne.length;Te+=1){for(Ge=!0,Ee=0;Ee<Ne[Te].length;Ee+=1)if(Ne[Te][Ee]!==void 0&&Ne[Te][Ee]!==he.charCodeAt(Ee)){Ge=!1;break}if(Ge===!0){Ue=Je;break}}return Ue===t&&be!==t&&(Ue=be),Ue},s=function he(be){for(var Te=this.internal.write,Ee=this.internal.putStream,Ne=(0,this.internal.getFilters)();Ne.indexOf("FlateEncode")!==-1;)Ne.splice(Ne.indexOf("FlateEncode"),1);be.objectId=this.internal.newObject();var Ge=[];if(Ge.push({key:"Type",value:"/XObject"}),Ge.push({key:"Subtype",value:"/Image"}),Ge.push({key:"Width",value:be.width}),Ge.push({key:"Height",value:be.height}),be.colorSpace===W.INDEXED?Ge.push({key:"ColorSpace",value:"[/Indexed /DeviceRGB "+(be.palette.length/3-1)+" "+("sMask"in be&&be.sMask!==void 0?be.objectId+2:be.objectId+1)+" 0 R]"}):(Ge.push({key:"ColorSpace",value:"/"+be.colorSpace}),be.colorSpace===W.DEVICE_CMYK&&Ge.push({key:"Decode",value:"[1 0 1 0 1 0 1 0]"})),Ge.push({key:"BitsPerComponent",value:be.bitsPerComponent}),"decodeParameters"in be&&be.decodeParameters!==void 0&&Ge.push({key:"DecodeParms",value:"<<"+be.decodeParameters+">>"}),"transparency"in be&&Array.isArray(be.transparency)){for(var Je="",Ue=0,Qe=be.transparency.length;Ue<Qe;Ue++)Je+=be.transparency[Ue]+" "+be.transparency[Ue]+" ";Ge.push({key:"Mask",value:"["+Je+"]"})}be.sMask!==void 0&&Ge.push({key:"SMask",value:be.objectId+1+" 0 R"});var xe=be.filter!==void 0?["/"+be.filter]:void 0;if(Ee({data:be.data,additionalKeyValues:Ge,alreadyAppliedFilters:xe,objectId:be.objectId}),Te("endobj"),"sMask"in be&&be.sMask!==void 0){var at="/Predictor "+be.predictor+" /Colors 1 /BitsPerComponent "+be.bitsPerComponent+" /Columns "+be.width,we={width:be.width,height:be.height,colorSpace:"DeviceGray",bitsPerComponent:be.bitsPerComponent,decodeParameters:at,data:be.sMask};"filter"in be&&(we.filter=be.filter),he.call(this,we)}if(be.colorSpace===W.INDEXED){var me=this.internal.newObject();Ee({data:pe(new Uint8Array(be.palette)),objectId:me}),Te("endobj")}},a=function(){var he=this.internal.collections.addImage_images;for(var be in he)s.call(this,he[be])},c=function(){var he,be=this.internal.collections.addImage_images,Te=this.internal.write;for(var Ee in be)Te("/I"+(he=be[Ee]).index,he.objectId,"0","R")},i=function(){this.internal.collections.addImage_images||(this.internal.collections.addImage_images={},this.internal.events.subscribe("putResources",a),this.internal.events.subscribe("putXobjectDict",c))},f=function(){var he=this.internal.collections.addImage_images;return i.call(this),he},g=function(){return Object.keys(this.internal.collections.addImage_images).length},y=function(he){return typeof e["process"+he.toUpperCase()]=="function"},b=function(he){return sa(he)==="object"&&he.nodeType===1},T=function(he,be){if(he.nodeName==="IMG"&&he.hasAttribute("src")){var Te=""+he.getAttribute("src");if(Te.indexOf("data:image/")===0)return PC(unescape(Te).split("base64,").pop());var Ee=e.loadFile(Te,!0);if(Ee!==void 0)return Ee}if(he.nodeName==="CANVAS"){if(he.width===0||he.height===0)throw new Error("Given canvas must have data. Canvas width: "+he.width+", height: "+he.height);var Ne;switch(be){case"PNG":Ne="image/png";break;case"WEBP":Ne="image/webp";break;case"JPEG":case"JPG":default:Ne="image/jpeg"}return PC(he.toDataURL(Ne,1).split("base64,").pop())}},S=function(he){var be=this.internal.collections.addImage_images;if(be){for(var Te in be)if(he===be[Te].alias)return be[Te]}},U=function(he,be,Te){return he||be||(he=-96,be=-96),he<0&&(he=-1*Te.width*72/he/this.internal.scaleFactor),be<0&&(be=-1*Te.height*72/be/this.internal.scaleFactor),he===0&&(he=be*Te.width/Te.height),be===0&&(be=he*Te.height/Te.width),[he,be]},N=function(he,be,Te,Ee,Ne,Ge){var Je=U.call(this,Te,Ee,Ne),Ue=this.internal.getCoordinateString,Qe=this.internal.getVerticalCoordinateString,xe=f.call(this);if(Te=Je[0],Ee=Je[1],xe[Ne.index]=Ne,Ge){Ge*=Math.PI/180;var at=Math.cos(Ge),we=Math.sin(Ge),me=function(ot){return ot.toFixed(4)},Ze=[me(at),me(we),me(-1*we),me(at),0,0,"cm"]}this.internal.write("q"),Ge?(this.internal.write([1,"0","0",1,Ue(he),Qe(be+Ee),"cm"].join(" ")),this.internal.write(Ze.join(" ")),this.internal.write([Ue(Te),"0","0",Ue(Ee),"0","0","cm"].join(" "))):this.internal.write([Ue(Te),"0","0",Ue(Ee),Ue(he),Qe(be+Ee),"cm"].join(" ")),this.isAdvancedAPI()&&this.internal.write([1,0,0,-1,0,0,"cm"].join(" ")),this.internal.write("/I"+Ne.index+" Do"),this.internal.write("Q")},W=e.color_spaces={DEVICE_RGB:"DeviceRGB",DEVICE_GRAY:"DeviceGray",DEVICE_CMYK:"DeviceCMYK",CAL_GREY:"CalGray",CAL_RGB:"CalRGB",LAB:"Lab",ICC_BASED:"ICCBased",INDEXED:"Indexed",PATTERN:"Pattern",SEPARATION:"Separation",DEVICE_N:"DeviceN"};e.decode={DCT_DECODE:"DCTDecode",FLATE_DECODE:"FlateDecode",LZW_DECODE:"LZWDecode",JPX_DECODE:"JPXDecode",JBIG2_DECODE:"JBIG2Decode",ASCII85_DECODE:"ASCII85Decode",ASCII_HEX_DECODE:"ASCIIHexDecode",RUN_LENGTH_DECODE:"RunLengthDecode",CCITT_FAX_DECODE:"CCITTFaxDecode"};var L=e.image_compression={NONE:"NONE",FAST:"FAST",MEDIUM:"MEDIUM",SLOW:"SLOW"},Q=e.__addimage__.sHashCode=function(he){var be,Te,Ee=0;if(typeof he=="string")for(Te=he.length,be=0;be<Te;be++)Ee=(Ee<<5)-Ee+he.charCodeAt(be),Ee|=0;else if(Y(he))for(Te=he.byteLength/2,be=0;be<Te;be++)Ee=(Ee<<5)-Ee+he[be],Ee|=0;return Ee},V=e.__addimage__.validateStringAsBase64=function(he){(he=he||"").toString().trim();var be=!0;return he.length===0&&(be=!1),he.length%4!=0&&(be=!1),/^[A-Za-z0-9+/]+$/.test(he.substr(0,he.length-2))===!1&&(be=!1),/^[A-Za-z0-9/][A-Za-z0-9+/]|[A-Za-z0-9+/]=|==$/.test(he.substr(-2))===!1&&(be=!1),be},Z=e.__addimage__.extractImageFromDataUrl=function(he){var be=(he=he||"").split("base64,"),Te=null;if(be.length===2){var Ee=/^data:(\w*\/\w*);*(charset=(?!charset=)[\w=-]*)*;*$/.exec(be[0]);Array.isArray(Ee)&&(Te={mimeType:Ee[1],charset:Ee[2],data:be[1]})}return Te},ne=e.__addimage__.supportsArrayBuffer=function(){return typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"};e.__addimage__.isArrayBuffer=function(he){return ne()&&he instanceof ArrayBuffer};var Y=e.__addimage__.isArrayBufferView=function(he){return ne()&&typeof Uint32Array<"u"&&(he instanceof Int8Array||he instanceof Uint8Array||typeof Uint8ClampedArray<"u"&&he instanceof Uint8ClampedArray||he instanceof Int16Array||he instanceof Uint16Array||he instanceof Int32Array||he instanceof Uint32Array||he instanceof Float32Array||he instanceof Float64Array)},le=e.__addimage__.binaryStringToUint8Array=function(he){for(var be=he.length,Te=new Uint8Array(be),Ee=0;Ee<be;Ee++)Te[Ee]=he.charCodeAt(Ee);return Te},pe=e.__addimage__.arrayBufferToBinaryString=function(he){for(var be="",Te=Y(he)?he:new Uint8Array(he),Ee=0;Ee<Te.length;Ee+=8192)be+=String.fromCharCode.apply(null,Te.subarray(Ee,Ee+8192));return be};e.addImage=function(){var he,be,Te,Ee,Ne,Ge,Je,Ue,Qe;if(typeof arguments[1]=="number"?(be=t,Te=arguments[1],Ee=arguments[2],Ne=arguments[3],Ge=arguments[4],Je=arguments[5],Ue=arguments[6],Qe=arguments[7]):(be=arguments[1],Te=arguments[2],Ee=arguments[3],Ne=arguments[4],Ge=arguments[5],Je=arguments[6],Ue=arguments[7],Qe=arguments[8]),sa(he=arguments[0])==="object"&&!b(he)&&"imageData"in he){var xe=he;he=xe.imageData,be=xe.format||be||t,Te=xe.x||Te||0,Ee=xe.y||Ee||0,Ne=xe.w||xe.width||Ne,Ge=xe.h||xe.height||Ge,Je=xe.alias||Je,Ue=xe.compression||Ue,Qe=xe.rotation||xe.angle||Qe}var at=this.internal.getFilters();if(Ue===void 0&&at.indexOf("FlateEncode")!==-1&&(Ue="SLOW"),isNaN(Te)||isNaN(Ee))throw new Error("Invalid coordinates passed to jsPDF.addImage");i.call(this);var we=_e.call(this,he,be,Je,Ue);return N.call(this,Te,Ee,Ne,Ge,we,Qe),this};var _e=function(he,be,Te,Ee){var Ne,Ge,Je;if(typeof he=="string"&&r(he)===t){he=unescape(he);var Ue=ye(he,!1);(Ue!==""||(Ue=e.loadFile(he,!0))!==void 0)&&(he=Ue)}if(b(he)&&(he=T(he,be)),be=r(he,be),!y(be))throw new Error("addImage does not support files of type '"+be+"', please ensure that a plugin for '"+be+"' support is added.");if(((Je=Te)==null||Je.length===0)&&(Te=function(Qe){return typeof Qe=="string"||Y(Qe)?Q(Qe):Y(Qe.data)?Q(Qe.data):null}(he)),(Ne=S.call(this,Te))||(ne()&&(he instanceof Uint8Array||be==="RGBA"||(Ge=he,he=le(he))),Ne=this["process"+be.toUpperCase()](he,g.call(this),Te,function(Qe){return Qe&&typeof Qe=="string"&&(Qe=Qe.toUpperCase()),Qe in e.image_compression?Qe:L.NONE}(Ee),Ge)),!Ne)throw new Error("An unknown error occurred whilst processing the image.");return Ne},ye=e.__addimage__.convertBase64ToBinaryString=function(he,be){var Te;be=typeof be!="boolean"||be;var Ee,Ne="";if(typeof he=="string"){Ee=(Te=Z(he))!==null?Te.data:he;try{Ne=PC(Ee)}catch(Ge){if(be)throw V(Ee)?new Error("atob-Error in jsPDF.convertBase64ToBinaryString "+Ge.message):new Error("Supplied Data is not a valid base64-String jsPDF.convertBase64ToBinaryString ")}}return Ne};e.getImageProperties=function(he){var be,Te,Ee="";if(b(he)&&(he=T(he)),typeof he=="string"&&r(he)===t&&((Ee=ye(he,!1))===""&&(Ee=e.loadFile(he)||""),he=Ee),Te=r(he),!y(Te))throw new Error("addImage does not support files of type '"+Te+"', please ensure that a plugin for '"+Te+"' support is added.");if(!ne()||he instanceof Uint8Array||(he=le(he)),!(be=this["process"+Te.toUpperCase()](he)))throw new Error("An unknown error occurred whilst processing the image");return be.fileType=Te,be}})(Ni.API),function(e){var t=function(n){if(n!==void 0&&n!="")return!0};Ni.API.events.push(["addPage",function(n){this.internal.getPageInfo(n.pageNumber).pageContext.annotations=[]}]),e.events.push(["putPage",function(n){for(var r,s,a,c=this.internal.getCoordinateString,i=this.internal.getVerticalCoordinateString,f=this.internal.getPageInfoByObjId(n.objId),g=n.pageContext.annotations,y=!1,b=0;b<g.length&&!y;b++)switch((r=g[b]).type){case"link":(t(r.options.url)||t(r.options.pageNumber))&&(y=!0);break;case"reference":case"text":case"freetext":y=!0}if(y!=0){this.internal.write("/Annots [");for(var T=0;T<g.length;T++){r=g[T];var S=this.internal.pdfEscape,U=this.internal.getEncryptor(n.objId);switch(r.type){case"reference":this.internal.write(" "+r.object.objId+" 0 R ");break;case"text":var N=this.internal.newAdditionalObject(),W=this.internal.newAdditionalObject(),L=this.internal.getEncryptor(N.objId),Q=r.title||"Note";a="<</Type /Annot /Subtype /Text "+(s="/Rect ["+c(r.bounds.x)+" "+i(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w)+" "+i(r.bounds.y)+"] ")+"/Contents ("+S(L(r.contents))+")",a+=" /Popup "+W.objId+" 0 R",a+=" /P "+f.objId+" 0 R",a+=" /T ("+S(L(Q))+") >>",N.content=a;var V=N.objId+" 0 R";a="<</Type /Annot /Subtype /Popup "+(s="/Rect ["+c(r.bounds.x+30)+" "+i(r.bounds.y+r.bounds.h)+" "+c(r.bounds.x+r.bounds.w+30)+" "+i(r.bounds.y)+"] ")+" /Parent "+V,r.open&&(a+=" /Open true"),a+=" >>",W.content=a,this.internal.write(N.objId,"0 R",W.objId,"0 R");break;case"freetext":s="/Rect ["+c(r.bounds.x)+" "+i(r.bounds.y)+" "+c(r.bounds.x+r.bounds.w)+" "+i(r.bounds.y+r.bounds.h)+"] ";var Z=r.color||"#000000";a="<</Type /Annot /Subtype /FreeText "+s+"/Contents ("+S(U(r.contents))+")",a+=" /DS(font: Helvetica,sans-serif 12.0pt; text-align:left; color:#"+Z+")",a+=" /Border [0 0 0]",a+=" >>",this.internal.write(a);break;case"link":if(r.options.name){var ne=this.annotations._nameMap[r.options.name];r.options.pageNumber=ne.page,r.options.top=ne.y}else r.options.top||(r.options.top=0);if(s="/Rect ["+r.finalBounds.x+" "+r.finalBounds.y+" "+r.finalBounds.w+" "+r.finalBounds.h+"] ",a="",r.options.url)a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /A <</S /URI /URI ("+S(U(r.options.url))+") >>";else if(r.options.pageNumber)switch(a="<</Type /Annot /Subtype /Link "+s+"/Border [0 0 0] /Dest ["+this.internal.getPageInfo(r.options.pageNumber).objId+" 0 R",r.options.magFactor=r.options.magFactor||"XYZ",r.options.magFactor){case"Fit":a+=" /Fit]";break;case"FitH":a+=" /FitH "+r.options.top+"]";break;case"FitV":r.options.left=r.options.left||0,a+=" /FitV "+r.options.left+"]";break;case"XYZ":default:var Y=i(r.options.top);r.options.left=r.options.left||0,r.options.zoom===void 0&&(r.options.zoom=0),a+=" /XYZ "+r.options.left+" "+Y+" "+r.options.zoom+"]"}a!=""&&(a+=" >>",this.internal.write(a))}}this.internal.write("]")}}]),e.createAnnotation=function(n){var r=this.internal.getCurrentPageInfo();switch(n.type){case"link":this.link(n.bounds.x,n.bounds.y,n.bounds.w,n.bounds.h,n);break;case"text":case"freetext":r.pageContext.annotations.push(n)}},e.link=function(n,r,s,a,c){var i=this.internal.getCurrentPageInfo(),f=this.internal.getCoordinateString,g=this.internal.getVerticalCoordinateString;i.pageContext.annotations.push({finalBounds:{x:f(n),y:g(r),w:f(n+s),h:g(r+a)},options:c,type:"link"})},e.textWithLink=function(n,r,s,a){var c,i,f=this.getTextWidth(n),g=this.internal.getLineHeight()/this.internal.scaleFactor;if(a.maxWidth!==void 0){i=a.maxWidth;var y=this.splitTextToSize(n,i).length;c=Math.ceil(g*y)}else i=f,c=g;return this.text(n,r,s,a),s+=.2*g,a.align==="center"&&(r-=f/2),a.align==="right"&&(r-=f),this.link(r,s-g,i,c,a),f},e.getTextWidth=function(n){var r=this.internal.getFontSize();return this.getStringUnitWidth(n)*r/this.internal.scaleFactor}}(Ni.API),function(e){var t={1569:[65152],1570:[65153,65154],1571:[65155,65156],1572:[65157,65158],1573:[65159,65160],1574:[65161,65162,65163,65164],1575:[65165,65166],1576:[65167,65168,65169,65170],1577:[65171,65172],1578:[65173,65174,65175,65176],1579:[65177,65178,65179,65180],1580:[65181,65182,65183,65184],1581:[65185,65186,65187,65188],1582:[65189,65190,65191,65192],1583:[65193,65194],1584:[65195,65196],1585:[65197,65198],1586:[65199,65200],1587:[65201,65202,65203,65204],1588:[65205,65206,65207,65208],1589:[65209,65210,65211,65212],1590:[65213,65214,65215,65216],1591:[65217,65218,65219,65220],1592:[65221,65222,65223,65224],1593:[65225,65226,65227,65228],1594:[65229,65230,65231,65232],1601:[65233,65234,65235,65236],1602:[65237,65238,65239,65240],1603:[65241,65242,65243,65244],1604:[65245,65246,65247,65248],1605:[65249,65250,65251,65252],1606:[65253,65254,65255,65256],1607:[65257,65258,65259,65260],1608:[65261,65262],1609:[65263,65264,64488,64489],1610:[65265,65266,65267,65268],1649:[64336,64337],1655:[64477],1657:[64358,64359,64360,64361],1658:[64350,64351,64352,64353],1659:[64338,64339,64340,64341],1662:[64342,64343,64344,64345],1663:[64354,64355,64356,64357],1664:[64346,64347,64348,64349],1667:[64374,64375,64376,64377],1668:[64370,64371,64372,64373],1670:[64378,64379,64380,64381],1671:[64382,64383,64384,64385],1672:[64392,64393],1676:[64388,64389],1677:[64386,64387],1678:[64390,64391],1681:[64396,64397],1688:[64394,64395],1700:[64362,64363,64364,64365],1702:[64366,64367,64368,64369],1705:[64398,64399,64400,64401],1709:[64467,64468,64469,64470],1711:[64402,64403,64404,64405],1713:[64410,64411,64412,64413],1715:[64406,64407,64408,64409],1722:[64414,64415],1723:[64416,64417,64418,64419],1726:[64426,64427,64428,64429],1728:[64420,64421],1729:[64422,64423,64424,64425],1733:[64480,64481],1734:[64473,64474],1735:[64471,64472],1736:[64475,64476],1737:[64482,64483],1739:[64478,64479],1740:[64508,64509,64510,64511],1744:[64484,64485,64486,64487],1746:[64430,64431],1747:[64432,64433]},n={65247:{65154:65269,65156:65271,65160:65273,65166:65275},65248:{65154:65270,65156:65272,65160:65274,65166:65276},65165:{65247:{65248:{65258:65010}}},1617:{1612:64606,1613:64607,1614:64608,1615:64609,1616:64610}},r={1612:64606,1613:64607,1614:64608,1615:64609,1616:64610},s=[1570,1571,1573,1575];e.__arabicParser__={};var a=e.__arabicParser__.isInArabicSubstitutionA=function(N){return t[N.charCodeAt(0)]!==void 0},c=e.__arabicParser__.isArabicLetter=function(N){return typeof N=="string"&&/^[\u0600-\u06FF\u0750-\u077F\u08A0-\u08FF\uFB50-\uFDFF\uFE70-\uFEFF]+$/.test(N)},i=e.__arabicParser__.isArabicEndLetter=function(N){return c(N)&&a(N)&&t[N.charCodeAt(0)].length<=2},f=e.__arabicParser__.isArabicAlfLetter=function(N){return c(N)&&s.indexOf(N.charCodeAt(0))>=0};e.__arabicParser__.arabicLetterHasIsolatedForm=function(N){return c(N)&&a(N)&&t[N.charCodeAt(0)].length>=1};var g=e.__arabicParser__.arabicLetterHasFinalForm=function(N){return c(N)&&a(N)&&t[N.charCodeAt(0)].length>=2};e.__arabicParser__.arabicLetterHasInitialForm=function(N){return c(N)&&a(N)&&t[N.charCodeAt(0)].length>=3};var y=e.__arabicParser__.arabicLetterHasMedialForm=function(N){return c(N)&&a(N)&&t[N.charCodeAt(0)].length==4},b=e.__arabicParser__.resolveLigatures=function(N){var W=0,L=n,Q="",V=0;for(W=0;W<N.length;W+=1)L[N.charCodeAt(W)]!==void 0?(V++,typeof(L=L[N.charCodeAt(W)])=="number"&&(Q+=String.fromCharCode(L),L=n,V=0),W===N.length-1&&(L=n,Q+=N.charAt(W-(V-1)),W-=V-1,V=0)):(L=n,Q+=N.charAt(W-V),W-=V,V=0);return Q};e.__arabicParser__.isArabicDiacritic=function(N){return N!==void 0&&r[N.charCodeAt(0)]!==void 0};var T=e.__arabicParser__.getCorrectForm=function(N,W,L){return c(N)?a(N)===!1?-1:!g(N)||!c(W)&&!c(L)||!c(L)&&i(W)||i(N)&&!c(W)||i(N)&&f(W)||i(N)&&i(W)?0:y(N)&&c(W)&&!i(W)&&c(L)&&g(L)?3:i(N)||!c(L)?1:2:-1},S=function(N){var W=0,L=0,Q=0,V="",Z="",ne="",Y=(N=N||"").split("\\s+"),le=[];for(W=0;W<Y.length;W+=1){for(le.push(""),L=0;L<Y[W].length;L+=1)V=Y[W][L],Z=Y[W][L-1],ne=Y[W][L+1],c(V)?(Q=T(V,Z,ne),le[W]+=Q!==-1?String.fromCharCode(t[V.charCodeAt(0)][Q]):V):le[W]+=V;le[W]=b(le[W])}return le.join(" ")},U=e.__arabicParser__.processArabic=e.processArabic=function(){var N,W=typeof arguments[0]=="string"?arguments[0]:arguments[0].text,L=[];if(Array.isArray(W)){var Q=0;for(L=[],Q=0;Q<W.length;Q+=1)Array.isArray(W[Q])?L.push([S(W[Q][0]),W[Q][1],W[Q][2]]):L.push([S(W[Q])]);N=L}else N=S(W);return typeof arguments[0]=="string"?N:(arguments[0].text=N,arguments[0])};e.events.push(["preProcessText",U])}(Ni.API),Ni.API.autoPrint=function(e){var t;switch((e=e||{}).variant=e.variant||"non-conform",e.variant){case"javascript":this.addJS("print({});");break;case"non-conform":default:this.internal.events.subscribe("postPutResources",function(){t=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /Named"),this.internal.out("/Type /Action"),this.internal.out("/N /Print"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){this.internal.out("/OpenAction "+t+" 0 R")})}return this},function(e){var t=function(){var n=void 0;Object.defineProperty(this,"pdf",{get:function(){return n},set:function(i){n=i}});var r=150;Object.defineProperty(this,"width",{get:function(){return r},set:function(i){r=isNaN(i)||Number.isInteger(i)===!1||i<0?150:i,this.getContext("2d").pageWrapXEnabled&&(this.getContext("2d").pageWrapX=r+1)}});var s=300;Object.defineProperty(this,"height",{get:function(){return s},set:function(i){s=isNaN(i)||Number.isInteger(i)===!1||i<0?300:i,this.getContext("2d").pageWrapYEnabled&&(this.getContext("2d").pageWrapY=s+1)}});var a=[];Object.defineProperty(this,"childNodes",{get:function(){return a},set:function(i){a=i}});var c={};Object.defineProperty(this,"style",{get:function(){return c},set:function(i){c=i}}),Object.defineProperty(this,"parentNode",{})};t.prototype.getContext=function(n,r){var s;if((n=n||"2d")!=="2d")return null;for(s in r)this.pdf.context2d.hasOwnProperty(s)&&(this.pdf.context2d[s]=r[s]);return this.pdf.context2d._canvas=this,this.pdf.context2d},t.prototype.toDataURL=function(){throw new Error("toDataURL is not implemented.")},e.events.push(["initialized",function(){this.canvas=new t,this.canvas.pdf=this}])}(Ni.API),function(e){var t={left:0,top:0,bottom:0,right:0},n=!1,r=function(){this.internal.__cell__===void 0&&(this.internal.__cell__={},this.internal.__cell__.padding=3,this.internal.__cell__.headerFunction=void 0,this.internal.__cell__.margins=Object.assign({},t),this.internal.__cell__.margins.width=this.getPageWidth(),s.call(this))},s=function(){this.internal.__cell__.lastCell=new a,this.internal.__cell__.pages=1},a=function(){var f=arguments[0];Object.defineProperty(this,"x",{enumerable:!0,get:function(){return f},set:function(N){f=N}});var g=arguments[1];Object.defineProperty(this,"y",{enumerable:!0,get:function(){return g},set:function(N){g=N}});var y=arguments[2];Object.defineProperty(this,"width",{enumerable:!0,get:function(){return y},set:function(N){y=N}});var b=arguments[3];Object.defineProperty(this,"height",{enumerable:!0,get:function(){return b},set:function(N){b=N}});var T=arguments[4];Object.defineProperty(this,"text",{enumerable:!0,get:function(){return T},set:function(N){T=N}});var S=arguments[5];Object.defineProperty(this,"lineNumber",{enumerable:!0,get:function(){return S},set:function(N){S=N}});var U=arguments[6];return Object.defineProperty(this,"align",{enumerable:!0,get:function(){return U},set:function(N){U=N}}),this};a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align)},a.prototype.toArray=function(){return[this.x,this.y,this.width,this.height,this.text,this.lineNumber,this.align]},e.setHeaderFunction=function(f){return r.call(this),this.internal.__cell__.headerFunction=typeof f=="function"?f:void 0,this},e.getTextDimensions=function(f,g){r.call(this);var y=(g=g||{}).fontSize||this.getFontSize(),b=g.font||this.getFont(),T=g.scaleFactor||this.internal.scaleFactor,S=0,U=0,N=0,W=this;if(!Array.isArray(f)&&typeof f!="string"){if(typeof f!="number")throw new Error("getTextDimensions expects text-parameter to be of type String or type Number or an Array of Strings.");f=String(f)}var L=g.maxWidth;L>0?typeof f=="string"?f=this.splitTextToSize(f,L):Object.prototype.toString.call(f)==="[object Array]"&&(f=f.reduce(function(V,Z){return V.concat(W.splitTextToSize(Z,L))},[])):f=Array.isArray(f)?f:[f];for(var Q=0;Q<f.length;Q++)S<(N=this.getStringUnitWidth(f[Q],{font:b})*y)&&(S=N);return S!==0&&(U=f.length),{w:S/=T,h:Math.max((U*y*this.getLineHeightFactor()-y*(this.getLineHeightFactor()-1))/T,0)}},e.cellAddPage=function(){r.call(this),this.addPage();var f=this.internal.__cell__.margins||t;return this.internal.__cell__.lastCell=new a(f.left,f.top,void 0,void 0),this.internal.__cell__.pages+=1,this};var c=e.cell=function(){var f;f=arguments[0]instanceof a?arguments[0]:new a(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5]),r.call(this);var g=this.internal.__cell__.lastCell,y=this.internal.__cell__.padding,b=this.internal.__cell__.margins||t,T=this.internal.__cell__.tableHeaderRow,S=this.internal.__cell__.printHeaders;return g.lineNumber!==void 0&&(g.lineNumber===f.lineNumber?(f.x=(g.x||0)+(g.width||0),f.y=g.y||0):g.y+g.height+f.height+b.bottom>this.getPageHeight()?(this.cellAddPage(),f.y=b.top,S&&T&&(this.printHeaderRow(f.lineNumber,!0),f.y+=T[0].height)):f.y=g.y+g.height||f.y),f.text[0]!==void 0&&(this.rect(f.x,f.y,f.width,f.height,n===!0?"FD":void 0),f.align==="right"?this.text(f.text,f.x+f.width-y,f.y+y,{align:"right",baseline:"top"}):f.align==="center"?this.text(f.text,f.x+f.width/2,f.y+y,{align:"center",baseline:"top",maxWidth:f.width-y-y}):this.text(f.text,f.x+y,f.y+y,{align:"left",baseline:"top",maxWidth:f.width-y-y})),this.internal.__cell__.lastCell=f,this};e.table=function(f,g,y,b,T){if(r.call(this),!y)throw new Error("No data for PDF table.");var S,U,N,W,L=[],Q=[],V=[],Z={},ne={},Y=[],le=[],pe=(T=T||{}).autoSize||!1,_e=T.printHeaders!==!1,ye=T.css&&T.css["font-size"]!==void 0?16*T.css["font-size"]:T.fontSize||12,he=T.margins||Object.assign({width:this.getPageWidth()},t),be=typeof T.padding=="number"?T.padding:3,Te=T.headerBackgroundColor||"#c8c8c8",Ee=T.headerTextColor||"#000";if(s.call(this),this.internal.__cell__.printHeaders=_e,this.internal.__cell__.margins=he,this.internal.__cell__.table_font_size=ye,this.internal.__cell__.padding=be,this.internal.__cell__.headerBackgroundColor=Te,this.internal.__cell__.headerTextColor=Ee,this.setFontSize(ye),b==null)Q=L=Object.keys(y[0]),V=L.map(function(){return"left"});else if(Array.isArray(b)&&sa(b[0])==="object")for(L=b.map(function(xe){return xe.name}),Q=b.map(function(xe){return xe.prompt||xe.name||""}),V=b.map(function(xe){return xe.align||"left"}),S=0;S<b.length;S+=1)ne[b[S].name]=b[S].width*(19.049976/25.4);else Array.isArray(b)&&typeof b[0]=="string"&&(Q=L=b,V=L.map(function(){return"left"}));if(pe||Array.isArray(b)&&typeof b[0]=="string")for(S=0;S<L.length;S+=1){for(Z[W=L[S]]=y.map(function(xe){return xe[W]}),this.setFont(void 0,"bold"),Y.push(this.getTextDimensions(Q[S],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w),U=Z[W],this.setFont(void 0,"normal"),N=0;N<U.length;N+=1)Y.push(this.getTextDimensions(U[N],{fontSize:this.internal.__cell__.table_font_size,scaleFactor:this.internal.scaleFactor}).w);ne[W]=Math.max.apply(null,Y)+be+be,Y=[]}if(_e){var Ne={};for(S=0;S<L.length;S+=1)Ne[L[S]]={},Ne[L[S]].text=Q[S],Ne[L[S]].align=V[S];var Ge=i.call(this,Ne,ne);le=L.map(function(xe){return new a(f,g,ne[xe],Ge,Ne[xe].text,void 0,Ne[xe].align)}),this.setTableHeaderRow(le),this.printHeaderRow(1,!1)}var Je=b.reduce(function(xe,at){return xe[at.name]=at.align,xe},{});for(S=0;S<y.length;S+=1){"rowStart"in T&&T.rowStart instanceof Function&&T.rowStart({row:S,data:y[S]},this);var Ue=i.call(this,y[S],ne);for(N=0;N<L.length;N+=1){var Qe=y[S][L[N]];"cellStart"in T&&T.cellStart instanceof Function&&T.cellStart({row:S,col:N,data:Qe},this),c.call(this,new a(f,g,ne[L[N]],Ue,Qe,S+2,Je[L[N]]))}}return this.internal.__cell__.table_x=f,this.internal.__cell__.table_y=g,this};var i=function(f,g){var y=this.internal.__cell__.padding,b=this.internal.__cell__.table_font_size,T=this.internal.scaleFactor;return Object.keys(f).map(function(S){var U=f[S];return this.splitTextToSize(U.hasOwnProperty("text")?U.text:U,g[S]-y-y)},this).map(function(S){return this.getLineHeightFactor()*S.length*b/T+y+y},this).reduce(function(S,U){return Math.max(S,U)},0)};e.setTableHeaderRow=function(f){r.call(this),this.internal.__cell__.tableHeaderRow=f},e.printHeaderRow=function(f,g){if(r.call(this),!this.internal.__cell__.tableHeaderRow)throw new Error("Property tableHeaderRow does not exist.");var y;if(n=!0,typeof this.internal.__cell__.headerFunction=="function"){var b=this.internal.__cell__.headerFunction(this,this.internal.__cell__.pages);this.internal.__cell__.lastCell=new a(b[0],b[1],b[2],b[3],void 0,-1)}this.setFont(void 0,"bold");for(var T=[],S=0;S<this.internal.__cell__.tableHeaderRow.length;S+=1){y=this.internal.__cell__.tableHeaderRow[S].clone(),g&&(y.y=this.internal.__cell__.margins.top||0,T.push(y)),y.lineNumber=f;var U=this.getTextColor();this.setTextColor(this.internal.__cell__.headerTextColor),this.setFillColor(this.internal.__cell__.headerBackgroundColor),c.call(this,y),this.setTextColor(U)}T.length>0&&this.setTableHeaderRow(T),this.setFont(void 0,"normal"),n=!1}}(Ni.API);var rhe={italic:["italic","oblique","normal"],oblique:["oblique","italic","normal"],normal:["normal","oblique","italic"]},ihe=["ultra-condensed","extra-condensed","condensed","semi-condensed","normal","semi-expanded","expanded","extra-expanded","ultra-expanded"],N6=nhe(ihe),she=[100,200,300,400,500,600,700,800,900],frt=nhe(she);function R6(e){var t=e.family.replace(/"|'/g,"").toLowerCase(),n=function(a){return rhe[a=a||"normal"]?a:"normal"}(e.style),r=function(a){if(!a)return 400;if(typeof a=="number")return a>=100&&a<=900&&a%100==0?a:400;if(/^\d00$/.test(a))return parseInt(a);switch(a){case"bold":return 700;case"normal":default:return 400}}(e.weight),s=function(a){return typeof N6[a=a||"normal"]=="number"?a:"normal"}(e.stretch);return{family:t,style:n,weight:r,stretch:s,src:e.src||[],ref:e.ref||{name:t,style:[s,n,r].join(" ")}}}function wY(e,t,n,r){var s;for(s=n;s>=0&&s<t.length;s+=r)if(e[t[s]])return e[t[s]];for(s=n;s>=0&&s<t.length;s-=r)if(e[t[s]])return e[t[s]]}var prt={"sans-serif":"helvetica",fixed:"courier",monospace:"courier",terminal:"courier",cursive:"times",fantasy:"times",serif:"times"},bY={caption:"times",icon:"times",menu:"times","message-box":"times","small-caption":"times","status-bar":"times"};function CY(e){return[e.stretch,e.style,e.weight,e.family].join(" ")}function Art(e,t,n){for(var r=(n=n||{}).defaultFontFamily||"times",s=Object.assign({},prt,n.genericFontFamilies||{}),a=null,c=null,i=0;i<t.length;++i)if(s[(a=R6(t[i])).family]&&(a.family=s[a.family]),e.hasOwnProperty(a.family)){c=e[a.family];break}if(!(c=c||e[r]))throw new Error("Could not find a font-family for the rule '"+CY(a)+"' and default family '"+r+"'.");if(c=function(f,g){if(g[f])return g[f];var y=N6[f],b=y<=N6.normal?-1:1,T=wY(g,ihe,y,b);if(!T)throw new Error("Could not find a matching font-stretch value for "+f);return T}(a.stretch,c),c=function(f,g){if(g[f])return g[f];for(var y=rhe[f],b=0;b<y.length;++b)if(g[y[b]])return g[y[b]];throw new Error("Could not find a matching font-style for "+f)}(a.style,c),!(c=function(f,g){if(g[f])return g[f];if(f===400&&g[500])return g[500];if(f===500&&g[400])return g[400];var y=frt[f],b=wY(g,she,y,f<400?-1:1);if(!b)throw new Error("Could not find a matching font-weight for value "+f);return b}(a.weight,c)))throw new Error("Failed to resolve a font for the rule '"+CY(a)+"'.");return c}function SY(e){return e.trimLeft()}function mrt(e,t){for(var n=0;n<e.length;){if(e.charAt(n)===t)return[e.substring(0,n),e.substring(n+1)];n+=1}return null}function grt(e){var t=e.match(/^(-[a-z_]|[a-z_])[a-z0-9_-]*/i);return t===null?null:[t[0],e.substring(t[0].length)]}var X3,BY,EY,X5=["times"];(function(e){var t,n,r,s,a,c,i,f,g,y=function(we){return we=we||{},this.isStrokeTransparent=we.isStrokeTransparent||!1,this.strokeOpacity=we.strokeOpacity||1,this.strokeStyle=we.strokeStyle||"#000000",this.fillStyle=we.fillStyle||"#000000",this.isFillTransparent=we.isFillTransparent||!1,this.fillOpacity=we.fillOpacity||1,this.font=we.font||"10px sans-serif",this.textBaseline=we.textBaseline||"alphabetic",this.textAlign=we.textAlign||"left",this.lineWidth=we.lineWidth||1,this.lineJoin=we.lineJoin||"miter",this.lineCap=we.lineCap||"butt",this.path=we.path||[],this.transform=we.transform!==void 0?we.transform.clone():new f,this.globalCompositeOperation=we.globalCompositeOperation||"normal",this.globalAlpha=we.globalAlpha||1,this.clip_path=we.clip_path||[],this.currentPoint=we.currentPoint||new c,this.miterLimit=we.miterLimit||10,this.lastPoint=we.lastPoint||new c,this.lineDashOffset=we.lineDashOffset||0,this.lineDash=we.lineDash||[],this.margin=we.margin||[0,0,0,0],this.prevPageLastElemOffset=we.prevPageLastElemOffset||0,this.ignoreClearRect=typeof we.ignoreClearRect!="boolean"||we.ignoreClearRect,this};e.events.push(["initialized",function(){this.context2d=new b(this),t=this.internal.f2,n=this.internal.getCoordinateString,r=this.internal.getVerticalCoordinateString,s=this.internal.getHorizontalCoordinate,a=this.internal.getVerticalCoordinate,c=this.internal.Point,i=this.internal.Rectangle,f=this.internal.Matrix,g=new y}]);var b=function(we){Object.defineProperty(this,"canvas",{get:function(){return{parentNode:!1,style:!1}}});var me=we;Object.defineProperty(this,"pdf",{get:function(){return me}});var Ze=!1;Object.defineProperty(this,"pageWrapXEnabled",{get:function(){return Ze},set:function(hn){Ze=!!hn}});var ot=!1;Object.defineProperty(this,"pageWrapYEnabled",{get:function(){return ot},set:function(hn){ot=!!hn}});var vt=0;Object.defineProperty(this,"posX",{get:function(){return vt},set:function(hn){isNaN(hn)||(vt=hn)}});var Qt=0;Object.defineProperty(this,"posY",{get:function(){return Qt},set:function(hn){isNaN(hn)||(Qt=hn)}}),Object.defineProperty(this,"margin",{get:function(){return g.margin},set:function(hn){var Oe;typeof hn=="number"?Oe=[hn,hn,hn,hn]:((Oe=new Array(4))[0]=hn[0],Oe[1]=hn.length>=2?hn[1]:Oe[0],Oe[2]=hn.length>=3?hn[2]:Oe[0],Oe[3]=hn.length>=4?hn[3]:Oe[1]),g.margin=Oe}});var Ot=!1;Object.defineProperty(this,"autoPaging",{get:function(){return Ot},set:function(hn){Ot=hn}});var kt=0;Object.defineProperty(this,"lastBreak",{get:function(){return kt},set:function(hn){kt=hn}});var Me=[];Object.defineProperty(this,"pageBreaks",{get:function(){return Me},set:function(hn){Me=hn}}),Object.defineProperty(this,"ctx",{get:function(){return g},set:function(hn){hn instanceof y&&(g=hn)}}),Object.defineProperty(this,"path",{get:function(){return g.path},set:function(hn){g.path=hn}});var Ht=[];Object.defineProperty(this,"ctxStack",{get:function(){return Ht},set:function(hn){Ht=hn}}),Object.defineProperty(this,"fillStyle",{get:function(){return this.ctx.fillStyle},set:function(hn){var Oe;Oe=T(hn),this.ctx.fillStyle=Oe.style,this.ctx.isFillTransparent=Oe.a===0,this.ctx.fillOpacity=Oe.a,this.pdf.setFillColor(Oe.r,Oe.g,Oe.b,{a:Oe.a}),this.pdf.setTextColor(Oe.r,Oe.g,Oe.b,{a:Oe.a})}}),Object.defineProperty(this,"strokeStyle",{get:function(){return this.ctx.strokeStyle},set:function(hn){var Oe=T(hn);this.ctx.strokeStyle=Oe.style,this.ctx.isStrokeTransparent=Oe.a===0,this.ctx.strokeOpacity=Oe.a,Oe.a===0?this.pdf.setDrawColor(255,255,255):(Oe.a,this.pdf.setDrawColor(Oe.r,Oe.g,Oe.b))}}),Object.defineProperty(this,"lineCap",{get:function(){return this.ctx.lineCap},set:function(hn){["butt","round","square"].indexOf(hn)!==-1&&(this.ctx.lineCap=hn,this.pdf.setLineCap(hn))}}),Object.defineProperty(this,"lineWidth",{get:function(){return this.ctx.lineWidth},set:function(hn){isNaN(hn)||(this.ctx.lineWidth=hn,this.pdf.setLineWidth(hn))}}),Object.defineProperty(this,"lineJoin",{get:function(){return this.ctx.lineJoin},set:function(hn){["bevel","round","miter"].indexOf(hn)!==-1&&(this.ctx.lineJoin=hn,this.pdf.setLineJoin(hn))}}),Object.defineProperty(this,"miterLimit",{get:function(){return this.ctx.miterLimit},set:function(hn){isNaN(hn)||(this.ctx.miterLimit=hn,this.pdf.setMiterLimit(hn))}}),Object.defineProperty(this,"textBaseline",{get:function(){return this.ctx.textBaseline},set:function(hn){this.ctx.textBaseline=hn}}),Object.defineProperty(this,"textAlign",{get:function(){return this.ctx.textAlign},set:function(hn){["right","end","center","left","start"].indexOf(hn)!==-1&&(this.ctx.textAlign=hn)}});var Zt=null;function pn(hn,Oe){if(Zt===null){var nn=function(Vt){var $t=[];return Object.keys(Vt).forEach(function(xn){Vt[xn].forEach(function(Xt){var gn=null;switch(Xt){case"bold":gn={family:xn,weight:"bold"};break;case"italic":gn={family:xn,style:"italic"};break;case"bolditalic":gn={family:xn,weight:"bold",style:"italic"};break;case"":case"normal":gn={family:xn}}gn!==null&&(gn.ref={name:xn,style:Xt},$t.push(gn))})}),$t}(hn.getFontList());Zt=function(Vt){for(var $t={},xn=0;xn<Vt.length;++xn){var Xt=R6(Vt[xn]),gn=Xt.family,rr=Xt.stretch,Gt=Xt.style,Rn=Xt.weight;$t[gn]=$t[gn]||{},$t[gn][rr]=$t[gn][rr]||{},$t[gn][rr][Gt]=$t[gn][rr][Gt]||{},$t[gn][rr][Gt][Rn]=Xt}return $t}(nn.concat(Oe))}return Zt}var Dt=null;Object.defineProperty(this,"fontFaces",{get:function(){return Dt},set:function(hn){Zt=null,Dt=hn}}),Object.defineProperty(this,"font",{get:function(){return this.ctx.font},set:function(hn){var Oe;if(this.ctx.font=hn,(Oe=/^\s*(?=(?:(?:[-a-z]+\s*){0,2}(italic|oblique))?)(?=(?:(?:[-a-z]+\s*){0,2}(small-caps))?)(?=(?:(?:[-a-z]+\s*){0,2}(bold(?:er)?|lighter|[1-9]00))?)(?:(?:normal|\1|\2|\3)\s*){0,3}((?:xx?-)?(?:small|large)|medium|smaller|larger|[.\d]+(?:\%|in|[cem]m|ex|p[ctx]))(?:\s*\/\s*(normal|[.\d]+(?:\%|in|[cem]m|ex|p[ctx])))?\s*([-_,\"\'\sa-z]+?)\s*$/i.exec(hn))!==null){var nn=Oe[1],Vt=(Oe[2],Oe[3]),$t=Oe[4],xn=(Oe[5],Oe[6]),Xt=/^([.\d]+)((?:%|in|[cem]m|ex|p[ctx]))$/i.exec($t)[2];$t=Math.floor(Xt==="px"?parseFloat($t)*this.pdf.internal.scaleFactor:Xt==="em"?parseFloat($t)*this.pdf.getFontSize():parseFloat($t)*this.pdf.internal.scaleFactor),this.pdf.setFontSize($t);var gn=function(Un){var Yt,cn,Ln=[],Hn=Un.trim();if(Hn==="")return X5;if(Hn in bY)return[bY[Hn]];for(;Hn!=="";){switch(cn=null,Yt=(Hn=SY(Hn)).charAt(0)){case'"':case"'":cn=mrt(Hn.substring(1),Yt);break;default:cn=grt(Hn)}if(cn===null||(Ln.push(cn[0]),(Hn=SY(cn[1]))!==""&&Hn.charAt(0)!==","))return X5;Hn=Hn.replace(/^,/,"")}return Ln}(xn);if(this.fontFaces){var rr=Art(pn(this.pdf,this.fontFaces),gn.map(function(Un){return{family:Un,stretch:"normal",weight:Vt,style:nn}}));this.pdf.setFont(rr.ref.name,rr.ref.style)}else{var Gt="";(Vt==="bold"||parseInt(Vt,10)>=700||nn==="bold")&&(Gt="bold"),nn==="italic"&&(Gt+="italic"),Gt.length===0&&(Gt="normal");for(var Rn="",wt={arial:"Helvetica",Arial:"Helvetica",verdana:"Helvetica",Verdana:"Helvetica",helvetica:"Helvetica",Helvetica:"Helvetica","sans-serif":"Helvetica",fixed:"Courier",monospace:"Courier",terminal:"Courier",cursive:"Times",fantasy:"Times",serif:"Times"},qt=0;qt<gn.length;qt++){if(this.pdf.internal.getFont(gn[qt],Gt,{noFallback:!0,disableWarning:!0})!==void 0){Rn=gn[qt];break}if(Gt==="bolditalic"&&this.pdf.internal.getFont(gn[qt],"bold",{noFallback:!0,disableWarning:!0})!==void 0)Rn=gn[qt],Gt="bold";else if(this.pdf.internal.getFont(gn[qt],"normal",{noFallback:!0,disableWarning:!0})!==void 0){Rn=gn[qt],Gt="normal";break}}if(Rn===""){for(var fn=0;fn<gn.length;fn++)if(wt[gn[fn]]){Rn=wt[gn[fn]];break}}Rn=Rn===""?"Times":Rn,this.pdf.setFont(Rn,Gt)}}}}),Object.defineProperty(this,"globalCompositeOperation",{get:function(){return this.ctx.globalCompositeOperation},set:function(hn){this.ctx.globalCompositeOperation=hn}}),Object.defineProperty(this,"globalAlpha",{get:function(){return this.ctx.globalAlpha},set:function(hn){this.ctx.globalAlpha=hn}}),Object.defineProperty(this,"lineDashOffset",{get:function(){return this.ctx.lineDashOffset},set:function(hn){this.ctx.lineDashOffset=hn,at.call(this)}}),Object.defineProperty(this,"lineDash",{get:function(){return this.ctx.lineDash},set:function(hn){this.ctx.lineDash=hn,at.call(this)}}),Object.defineProperty(this,"ignoreClearRect",{get:function(){return this.ctx.ignoreClearRect},set:function(hn){this.ctx.ignoreClearRect=!!hn}})};b.prototype.setLineDash=function(we){this.lineDash=we},b.prototype.getLineDash=function(){return this.lineDash.length%2?this.lineDash.concat(this.lineDash):this.lineDash.slice()},b.prototype.fill=function(){Z.call(this,"fill",!1)},b.prototype.stroke=function(){Z.call(this,"stroke",!1)},b.prototype.beginPath=function(){this.path=[{type:"begin"}]},b.prototype.moveTo=function(we,me){if(isNaN(we)||isNaN(me))throw Sa.error("jsPDF.context2d.moveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.moveTo");var Ze=this.ctx.transform.applyToPoint(new c(we,me));this.path.push({type:"mt",x:Ze.x,y:Ze.y}),this.ctx.lastPoint=new c(we,me)},b.prototype.closePath=function(){var we=new c(0,0),me=0;for(me=this.path.length-1;me!==-1;me--)if(this.path[me].type==="begin"&&sa(this.path[me+1])==="object"&&typeof this.path[me+1].x=="number"){we=new c(this.path[me+1].x,this.path[me+1].y);break}this.path.push({type:"close"}),this.ctx.lastPoint=new c(we.x,we.y)},b.prototype.lineTo=function(we,me){if(isNaN(we)||isNaN(me))throw Sa.error("jsPDF.context2d.lineTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.lineTo");var Ze=this.ctx.transform.applyToPoint(new c(we,me));this.path.push({type:"lt",x:Ze.x,y:Ze.y}),this.ctx.lastPoint=new c(Ze.x,Ze.y)},b.prototype.clip=function(){this.ctx.clip_path=JSON.parse(JSON.stringify(this.path)),Z.call(this,null,!0)},b.prototype.quadraticCurveTo=function(we,me,Ze,ot){if(isNaN(Ze)||isNaN(ot)||isNaN(we)||isNaN(me))throw Sa.error("jsPDF.context2d.quadraticCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.quadraticCurveTo");var vt=this.ctx.transform.applyToPoint(new c(Ze,ot)),Qt=this.ctx.transform.applyToPoint(new c(we,me));this.path.push({type:"qct",x1:Qt.x,y1:Qt.y,x:vt.x,y:vt.y}),this.ctx.lastPoint=new c(vt.x,vt.y)},b.prototype.bezierCurveTo=function(we,me,Ze,ot,vt,Qt){if(isNaN(vt)||isNaN(Qt)||isNaN(we)||isNaN(me)||isNaN(Ze)||isNaN(ot))throw Sa.error("jsPDF.context2d.bezierCurveTo: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.bezierCurveTo");var Ot=this.ctx.transform.applyToPoint(new c(vt,Qt)),kt=this.ctx.transform.applyToPoint(new c(we,me)),Me=this.ctx.transform.applyToPoint(new c(Ze,ot));this.path.push({type:"bct",x1:kt.x,y1:kt.y,x2:Me.x,y2:Me.y,x:Ot.x,y:Ot.y}),this.ctx.lastPoint=new c(Ot.x,Ot.y)},b.prototype.arc=function(we,me,Ze,ot,vt,Qt){if(isNaN(we)||isNaN(me)||isNaN(Ze)||isNaN(ot)||isNaN(vt))throw Sa.error("jsPDF.context2d.arc: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.arc");if(Qt=!!Qt,!this.ctx.transform.isIdentity){var Ot=this.ctx.transform.applyToPoint(new c(we,me));we=Ot.x,me=Ot.y;var kt=this.ctx.transform.applyToPoint(new c(0,Ze)),Me=this.ctx.transform.applyToPoint(new c(0,0));Ze=Math.sqrt(Math.pow(kt.x-Me.x,2)+Math.pow(kt.y-Me.y,2))}Math.abs(vt-ot)>=2*Math.PI&&(ot=0,vt=2*Math.PI),this.path.push({type:"arc",x:we,y:me,radius:Ze,startAngle:ot,endAngle:vt,counterclockwise:Qt})},b.prototype.arcTo=function(we,me,Ze,ot,vt){throw new Error("arcTo not implemented.")},b.prototype.rect=function(we,me,Ze,ot){if(isNaN(we)||isNaN(me)||isNaN(Ze)||isNaN(ot))throw Sa.error("jsPDF.context2d.rect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rect");this.moveTo(we,me),this.lineTo(we+Ze,me),this.lineTo(we+Ze,me+ot),this.lineTo(we,me+ot),this.lineTo(we,me),this.lineTo(we+Ze,me),this.lineTo(we,me)},b.prototype.fillRect=function(we,me,Ze,ot){if(isNaN(we)||isNaN(me)||isNaN(Ze)||isNaN(ot))throw Sa.error("jsPDF.context2d.fillRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillRect");if(!S.call(this)){var vt={};this.lineCap!=="butt"&&(vt.lineCap=this.lineCap,this.lineCap="butt"),this.lineJoin!=="miter"&&(vt.lineJoin=this.lineJoin,this.lineJoin="miter"),this.beginPath(),this.rect(we,me,Ze,ot),this.fill(),vt.hasOwnProperty("lineCap")&&(this.lineCap=vt.lineCap),vt.hasOwnProperty("lineJoin")&&(this.lineJoin=vt.lineJoin)}},b.prototype.strokeRect=function(we,me,Ze,ot){if(isNaN(we)||isNaN(me)||isNaN(Ze)||isNaN(ot))throw Sa.error("jsPDF.context2d.strokeRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeRect");U.call(this)||(this.beginPath(),this.rect(we,me,Ze,ot),this.stroke())},b.prototype.clearRect=function(we,me,Ze,ot){if(isNaN(we)||isNaN(me)||isNaN(Ze)||isNaN(ot))throw Sa.error("jsPDF.context2d.clearRect: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.clearRect");this.ignoreClearRect||(this.fillStyle="#ffffff",this.fillRect(we,me,Ze,ot))},b.prototype.save=function(we){we=typeof we!="boolean"||we;for(var me=this.pdf.internal.getCurrentPageInfo().pageNumber,Ze=0;Ze<this.pdf.internal.getNumberOfPages();Ze++)this.pdf.setPage(Ze+1),this.pdf.internal.out("q");if(this.pdf.setPage(me),we){this.ctx.fontSize=this.pdf.internal.getFontSize();var ot=new y(this.ctx);this.ctxStack.push(this.ctx),this.ctx=ot}},b.prototype.restore=function(we){we=typeof we!="boolean"||we;for(var me=this.pdf.internal.getCurrentPageInfo().pageNumber,Ze=0;Ze<this.pdf.internal.getNumberOfPages();Ze++)this.pdf.setPage(Ze+1),this.pdf.internal.out("Q");this.pdf.setPage(me),we&&this.ctxStack.length!==0&&(this.ctx=this.ctxStack.pop(),this.fillStyle=this.ctx.fillStyle,this.strokeStyle=this.ctx.strokeStyle,this.font=this.ctx.font,this.lineCap=this.ctx.lineCap,this.lineWidth=this.ctx.lineWidth,this.lineJoin=this.ctx.lineJoin,this.lineDash=this.ctx.lineDash,this.lineDashOffset=this.ctx.lineDashOffset)},b.prototype.toDataURL=function(){throw new Error("toDataUrl not implemented.")};var T=function(we){var me,Ze,ot,vt;if(we.isCanvasGradient===!0&&(we=we.getColor()),!we)return{r:0,g:0,b:0,a:0,style:we};if(/transparent|rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*0+\s*\)/.test(we))me=0,Ze=0,ot=0,vt=0;else{var Qt=/rgb\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*\)/.exec(we);if(Qt!==null)me=parseInt(Qt[1]),Ze=parseInt(Qt[2]),ot=parseInt(Qt[3]),vt=1;else if((Qt=/rgba\s*\(\s*(\d+)\s*,\s*(\d+)\s*,\s*(\d+)\s*,\s*([\d.]+)\s*\)/.exec(we))!==null)me=parseInt(Qt[1]),Ze=parseInt(Qt[2]),ot=parseInt(Qt[3]),vt=parseFloat(Qt[4]);else{if(vt=1,typeof we=="string"&&we.charAt(0)!=="#"){var Ot=new Zde(we);we=Ot.ok?Ot.toHex():"#000000"}we.length===4?(me=we.substring(1,2),me+=me,Ze=we.substring(2,3),Ze+=Ze,ot=we.substring(3,4),ot+=ot):(me=we.substring(1,3),Ze=we.substring(3,5),ot=we.substring(5,7)),me=parseInt(me,16),Ze=parseInt(Ze,16),ot=parseInt(ot,16)}}return{r:me,g:Ze,b:ot,a:vt,style:we}},S=function(){return this.ctx.isFillTransparent||this.globalAlpha==0},U=function(){return!!(this.ctx.isStrokeTransparent||this.globalAlpha==0)};b.prototype.fillText=function(we,me,Ze,ot){if(isNaN(me)||isNaN(Ze)||typeof we!="string")throw Sa.error("jsPDF.context2d.fillText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.fillText");if(ot=isNaN(ot)?void 0:ot,!S.call(this)){var vt=Ue(this.ctx.transform.rotation),Qt=this.ctx.transform.scaleX;be.call(this,{text:we,x:me,y:Ze,scale:Qt,angle:vt,align:this.textAlign,maxWidth:ot})}},b.prototype.strokeText=function(we,me,Ze,ot){if(isNaN(me)||isNaN(Ze)||typeof we!="string")throw Sa.error("jsPDF.context2d.strokeText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.strokeText");if(!U.call(this)){ot=isNaN(ot)?void 0:ot;var vt=Ue(this.ctx.transform.rotation),Qt=this.ctx.transform.scaleX;be.call(this,{text:we,x:me,y:Ze,scale:Qt,renderingMode:"stroke",angle:vt,align:this.textAlign,maxWidth:ot})}},b.prototype.measureText=function(we){if(typeof we!="string")throw Sa.error("jsPDF.context2d.measureText: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.measureText");var me=this.pdf,Ze=this.pdf.internal.scaleFactor,ot=me.internal.getFontSize(),vt=me.getStringUnitWidth(we)*ot/me.internal.scaleFactor,Qt=function(Ot){var kt=(Ot=Ot||{}).width||0;return Object.defineProperty(this,"width",{get:function(){return kt}}),this};return new Qt({width:vt*=Math.round(96*Ze/72*1e4)/1e4})},b.prototype.scale=function(we,me){if(isNaN(we)||isNaN(me))throw Sa.error("jsPDF.context2d.scale: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.scale");var Ze=new f(we,0,0,me,0,0);this.ctx.transform=this.ctx.transform.multiply(Ze)},b.prototype.rotate=function(we){if(isNaN(we))throw Sa.error("jsPDF.context2d.rotate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.rotate");var me=new f(Math.cos(we),Math.sin(we),-Math.sin(we),Math.cos(we),0,0);this.ctx.transform=this.ctx.transform.multiply(me)},b.prototype.translate=function(we,me){if(isNaN(we)||isNaN(me))throw Sa.error("jsPDF.context2d.translate: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.translate");var Ze=new f(1,0,0,1,we,me);this.ctx.transform=this.ctx.transform.multiply(Ze)},b.prototype.transform=function(we,me,Ze,ot,vt,Qt){if(isNaN(we)||isNaN(me)||isNaN(Ze)||isNaN(ot)||isNaN(vt)||isNaN(Qt))throw Sa.error("jsPDF.context2d.transform: Invalid arguments",arguments),new Error("Invalid arguments passed to jsPDF.context2d.transform");var Ot=new f(we,me,Ze,ot,vt,Qt);this.ctx.transform=this.ctx.transform.multiply(Ot)},b.prototype.setTransform=function(we,me,Ze,ot,vt,Qt){we=isNaN(we)?1:we,me=isNaN(me)?0:me,Ze=isNaN(Ze)?0:Ze,ot=isNaN(ot)?1:ot,vt=isNaN(vt)?0:vt,Qt=isNaN(Qt)?0:Qt,this.ctx.transform=new f(we,me,Ze,ot,vt,Qt)};var N=function(){return this.margin[0]>0||this.margin[1]>0||this.margin[2]>0||this.margin[3]>0};b.prototype.drawImage=function(we,me,Ze,ot,vt,Qt,Ot,kt,Me){var Ht=this.pdf.getImageProperties(we),Zt=1,pn=1,Dt=1,hn=1;ot!==void 0&&kt!==void 0&&(Dt=kt/ot,hn=Me/vt,Zt=Ht.width/ot*kt/ot,pn=Ht.height/vt*Me/vt),Qt===void 0&&(Qt=me,Ot=Ze,me=0,Ze=0),ot!==void 0&&kt===void 0&&(kt=ot,Me=vt),ot===void 0&&kt===void 0&&(kt=Ht.width,Me=Ht.height);for(var Oe,nn=this.ctx.transform.decompose(),Vt=Ue(nn.rotate.shx),$t=new f,xn=($t=($t=($t=$t.multiply(nn.translate)).multiply(nn.skew)).multiply(nn.scale)).applyToRectangle(new i(Qt-me*Dt,Ot-Ze*hn,ot*Zt,vt*pn)),Xt=W.call(this,xn),gn=[],rr=0;rr<Xt.length;rr+=1)gn.indexOf(Xt[rr])===-1&&gn.push(Xt[rr]);if(V(gn),this.autoPaging)for(var Gt=gn[0],Rn=gn[gn.length-1],wt=Gt;wt<Rn+1;wt++){this.pdf.setPage(wt);var qt=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],fn=wt===1?this.posY+this.margin[0]:this.margin[0],Un=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Yt=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],cn=wt===1?0:Un+(wt-2)*Yt;if(this.ctx.clip_path.length!==0){var Ln=this.path;Oe=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Oe,this.posX+this.margin[3],-cn+fn+this.ctx.prevPageLastElemOffset),ne.call(this,"fill",!0),this.path=Ln}var Hn=JSON.parse(JSON.stringify(xn));Hn=Q([Hn],this.posX+this.margin[3],-cn+fn+this.ctx.prevPageLastElemOffset)[0];var _r=(wt>Gt||wt<Rn)&&N.call(this);_r&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],qt,Yt,null).clip().discardPath()),this.pdf.addImage(we,"JPEG",Hn.x,Hn.y,Hn.w,Hn.h,null,null,Vt),_r&&this.pdf.restoreGraphicsState()}else this.pdf.addImage(we,"JPEG",xn.x,xn.y,xn.w,xn.h,null,null,Vt)};var W=function(we,me,Ze){var ot=[];me=me||this.pdf.internal.pageSize.width,Ze=Ze||this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2];var vt=this.posY+this.ctx.prevPageLastElemOffset;switch(we.type){default:case"mt":case"lt":ot.push(Math.floor((we.y+vt)/Ze)+1);break;case"arc":ot.push(Math.floor((we.y+vt-we.radius)/Ze)+1),ot.push(Math.floor((we.y+vt+we.radius)/Ze)+1);break;case"qct":var Qt=Qe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,we.x1,we.y1,we.x,we.y);ot.push(Math.floor((Qt.y+vt)/Ze)+1),ot.push(Math.floor((Qt.y+Qt.h+vt)/Ze)+1);break;case"bct":var Ot=xe(this.ctx.lastPoint.x,this.ctx.lastPoint.y,we.x1,we.y1,we.x2,we.y2,we.x,we.y);ot.push(Math.floor((Ot.y+vt)/Ze)+1),ot.push(Math.floor((Ot.y+Ot.h+vt)/Ze)+1);break;case"rect":ot.push(Math.floor((we.y+vt)/Ze)+1),ot.push(Math.floor((we.y+we.h+vt)/Ze)+1)}for(var kt=0;kt<ot.length;kt+=1)for(;this.pdf.internal.getNumberOfPages()<ot[kt];)L.call(this);return ot},L=function(){var we=this.fillStyle,me=this.strokeStyle,Ze=this.font,ot=this.lineCap,vt=this.lineWidth,Qt=this.lineJoin;this.pdf.addPage(),this.fillStyle=we,this.strokeStyle=me,this.font=Ze,this.lineCap=ot,this.lineWidth=vt,this.lineJoin=Qt},Q=function(we,me,Ze){for(var ot=0;ot<we.length;ot++)switch(we[ot].type){case"bct":we[ot].x2+=me,we[ot].y2+=Ze;case"qct":we[ot].x1+=me,we[ot].y1+=Ze;case"mt":case"lt":case"arc":default:we[ot].x+=me,we[ot].y+=Ze}return we},V=function(we){return we.sort(function(me,Ze){return me-Ze})},Z=function(we,me){for(var Ze,ot,vt=this.fillStyle,Qt=this.strokeStyle,Ot=this.lineCap,kt=this.lineWidth,Me=Math.abs(kt*this.ctx.transform.scaleX),Ht=this.lineJoin,Zt=JSON.parse(JSON.stringify(this.path)),pn=JSON.parse(JSON.stringify(this.path)),Dt=[],hn=0;hn<pn.length;hn++)if(pn[hn].x!==void 0)for(var Oe=W.call(this,pn[hn]),nn=0;nn<Oe.length;nn+=1)Dt.indexOf(Oe[nn])===-1&&Dt.push(Oe[nn]);for(var Vt=0;Vt<Dt.length;Vt++)for(;this.pdf.internal.getNumberOfPages()<Dt[Vt];)L.call(this);if(V(Dt),this.autoPaging)for(var $t=Dt[0],xn=Dt[Dt.length-1],Xt=$t;Xt<xn+1;Xt++){this.pdf.setPage(Xt),this.fillStyle=vt,this.strokeStyle=Qt,this.lineCap=Ot,this.lineWidth=Me,this.lineJoin=Ht;var gn=this.pdf.internal.pageSize.width-this.margin[3]-this.margin[1],rr=Xt===1?this.posY+this.margin[0]:this.margin[0],Gt=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],Rn=this.pdf.internal.pageSize.height-this.margin[0]-this.margin[2],wt=Xt===1?0:Gt+(Xt-2)*Rn;if(this.ctx.clip_path.length!==0){var qt=this.path;Ze=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Ze,this.posX+this.margin[3],-wt+rr+this.ctx.prevPageLastElemOffset),ne.call(this,we,!0),this.path=qt}if(ot=JSON.parse(JSON.stringify(Zt)),this.path=Q(ot,this.posX+this.margin[3],-wt+rr+this.ctx.prevPageLastElemOffset),me===!1||Xt===0){var fn=(Xt>$t||Xt<xn)&&N.call(this);fn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],gn,Rn,null).clip().discardPath()),ne.call(this,we,me),fn&&this.pdf.restoreGraphicsState()}this.lineWidth=kt}else this.lineWidth=Me,ne.call(this,we,me),this.lineWidth=kt;this.path=Zt},ne=function(we,me){if((we!=="stroke"||me||!U.call(this))&&(we==="stroke"||me||!S.call(this))){for(var Ze,ot,vt=[],Qt=this.path,Ot=0;Ot<Qt.length;Ot++){var kt=Qt[Ot];switch(kt.type){case"begin":vt.push({begin:!0});break;case"close":vt.push({close:!0});break;case"mt":vt.push({start:kt,deltas:[],abs:[]});break;case"lt":var Me=vt.length;if(Qt[Ot-1]&&!isNaN(Qt[Ot-1].x)&&(Ze=[kt.x-Qt[Ot-1].x,kt.y-Qt[Ot-1].y],Me>0)){for(;Me>=0;Me--)if(vt[Me-1].close!==!0&&vt[Me-1].begin!==!0){vt[Me-1].deltas.push(Ze),vt[Me-1].abs.push(kt);break}}break;case"bct":Ze=[kt.x1-Qt[Ot-1].x,kt.y1-Qt[Ot-1].y,kt.x2-Qt[Ot-1].x,kt.y2-Qt[Ot-1].y,kt.x-Qt[Ot-1].x,kt.y-Qt[Ot-1].y],vt[vt.length-1].deltas.push(Ze);break;case"qct":var Ht=Qt[Ot-1].x+2/3*(kt.x1-Qt[Ot-1].x),Zt=Qt[Ot-1].y+2/3*(kt.y1-Qt[Ot-1].y),pn=kt.x+2/3*(kt.x1-kt.x),Dt=kt.y+2/3*(kt.y1-kt.y),hn=kt.x,Oe=kt.y;Ze=[Ht-Qt[Ot-1].x,Zt-Qt[Ot-1].y,pn-Qt[Ot-1].x,Dt-Qt[Ot-1].y,hn-Qt[Ot-1].x,Oe-Qt[Ot-1].y],vt[vt.length-1].deltas.push(Ze);break;case"arc":vt.push({deltas:[],abs:[],arc:!0}),Array.isArray(vt[vt.length-1].abs)&&vt[vt.length-1].abs.push(kt)}}ot=me?null:we==="stroke"?"stroke":"fill";for(var nn=!1,Vt=0;Vt<vt.length;Vt++)if(vt[Vt].arc)for(var $t=vt[Vt].abs,xn=0;xn<$t.length;xn++){var Xt=$t[xn];Xt.type==="arc"?pe.call(this,Xt.x,Xt.y,Xt.radius,Xt.startAngle,Xt.endAngle,Xt.counterclockwise,void 0,me,!nn):Te.call(this,Xt.x,Xt.y),nn=!0}else if(vt[Vt].close===!0)this.pdf.internal.out("h"),nn=!1;else if(vt[Vt].begin!==!0){var gn=vt[Vt].start.x,rr=vt[Vt].start.y;Ee.call(this,vt[Vt].deltas,gn,rr),nn=!0}ot&&_e.call(this,ot),me&&ye.call(this)}},Y=function(we){var me=this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor,Ze=me*(this.pdf.internal.getLineHeightFactor()-1);switch(this.ctx.textBaseline){case"bottom":return we-Ze;case"top":return we+me-Ze;case"hanging":return we+me-2*Ze;case"middle":return we+me/2-Ze;case"ideographic":return we;case"alphabetic":default:return we}},le=function(we){return we+this.pdf.internal.getFontSize()/this.pdf.internal.scaleFactor*(this.pdf.internal.getLineHeightFactor()-1)};b.prototype.createLinearGradient=function(){var we=function(){};return we.colorStops=[],we.addColorStop=function(me,Ze){this.colorStops.push([me,Ze])},we.getColor=function(){return this.colorStops.length===0?"#000000":this.colorStops[0][1]},we.isCanvasGradient=!0,we},b.prototype.createPattern=function(){return this.createLinearGradient()},b.prototype.createRadialGradient=function(){return this.createLinearGradient()};var pe=function(we,me,Ze,ot,vt,Qt,Ot,kt,Me){for(var Ht=Ge.call(this,Ze,ot,vt,Qt),Zt=0;Zt<Ht.length;Zt++){var pn=Ht[Zt];Zt===0&&(Me?he.call(this,pn.x1+we,pn.y1+me):Te.call(this,pn.x1+we,pn.y1+me)),Ne.call(this,we,me,pn.x2,pn.y2,pn.x3,pn.y3,pn.x4,pn.y4)}kt?ye.call(this):_e.call(this,Ot)},_e=function(we){switch(we){case"stroke":this.pdf.internal.out("S");break;case"fill":this.pdf.internal.out("f")}},ye=function(){this.pdf.clip(),this.pdf.discardPath()},he=function(we,me){this.pdf.internal.out(n(we)+" "+r(me)+" m")},be=function(we){var me;switch(we.align){case"right":case"end":me="right";break;case"center":me="center";break;case"left":case"start":default:me="left"}var Ze=this.pdf.getTextDimensions(we.text),ot=Y.call(this,we.y),vt=le.call(this,ot)-Ze.h,Qt=this.ctx.transform.applyToPoint(new c(we.x,ot)),Ot=this.ctx.transform.decompose(),kt=new f;kt=(kt=(kt=kt.multiply(Ot.translate)).multiply(Ot.skew)).multiply(Ot.scale);for(var Me,Ht,Zt,pn=this.ctx.transform.applyToRectangle(new i(we.x,ot,Ze.w,Ze.h)),Dt=kt.applyToRectangle(new i(we.x,vt,Ze.w,Ze.h)),hn=W.call(this,Dt),Oe=[],nn=0;nn<hn.length;nn+=1)Oe.indexOf(hn[nn])===-1&&Oe.push(hn[nn]);if(V(Oe),this.autoPaging)for(var Vt=Oe[0],$t=Oe[Oe.length-1],xn=Vt;xn<$t+1;xn++){this.pdf.setPage(xn);var Xt=xn===1?this.posY+this.margin[0]:this.margin[0],gn=this.pdf.internal.pageSize.height-this.posY-this.margin[0]-this.margin[2],rr=this.pdf.internal.pageSize.height-this.margin[2],Gt=rr-this.margin[0],Rn=this.pdf.internal.pageSize.width-this.margin[1],wt=Rn-this.margin[3],qt=xn===1?0:gn+(xn-2)*Gt;if(this.ctx.clip_path.length!==0){var fn=this.path;Me=JSON.parse(JSON.stringify(this.ctx.clip_path)),this.path=Q(Me,this.posX+this.margin[3],-1*qt+Xt),ne.call(this,"fill",!0),this.path=fn}var Un=Q([JSON.parse(JSON.stringify(Dt))],this.posX+this.margin[3],-qt+Xt+this.ctx.prevPageLastElemOffset)[0];we.scale>=.01&&(Ht=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ht*we.scale),Zt=this.lineWidth,this.lineWidth=Zt*we.scale);var Yt=this.autoPaging!=="text";if(Yt||Un.y+Un.h<=rr){if(Yt||Un.y>=Xt&&Un.x<=Rn){var cn=Yt?we.text:this.pdf.splitTextToSize(we.text,we.maxWidth||Rn-Un.x)[0],Ln=Q([JSON.parse(JSON.stringify(pn))],this.posX+this.margin[3],-qt+Xt+this.ctx.prevPageLastElemOffset)[0],Hn=Yt&&(xn>Vt||xn<$t)&&N.call(this);Hn&&(this.pdf.saveGraphicsState(),this.pdf.rect(this.margin[3],this.margin[0],wt,Gt,null).clip().discardPath()),this.pdf.text(cn,Ln.x,Ln.y,{angle:we.angle,align:me,renderingMode:we.renderingMode}),Hn&&this.pdf.restoreGraphicsState()}}else Un.y<rr&&(this.ctx.prevPageLastElemOffset+=rr-Un.y);we.scale>=.01&&(this.pdf.setFontSize(Ht),this.lineWidth=Zt)}else we.scale>=.01&&(Ht=this.pdf.internal.getFontSize(),this.pdf.setFontSize(Ht*we.scale),Zt=this.lineWidth,this.lineWidth=Zt*we.scale),this.pdf.text(we.text,Qt.x+this.posX,Qt.y+this.posY,{angle:we.angle,align:me,renderingMode:we.renderingMode,maxWidth:we.maxWidth}),we.scale>=.01&&(this.pdf.setFontSize(Ht),this.lineWidth=Zt)},Te=function(we,me,Ze,ot){Ze=Ze||0,ot=ot||0,this.pdf.internal.out(n(we+Ze)+" "+r(me+ot)+" l")},Ee=function(we,me,Ze){return this.pdf.lines(we,me,Ze,null,null)},Ne=function(we,me,Ze,ot,vt,Qt,Ot,kt){this.pdf.internal.out([t(s(Ze+we)),t(a(ot+me)),t(s(vt+we)),t(a(Qt+me)),t(s(Ot+we)),t(a(kt+me)),"c"].join(" "))},Ge=function(we,me,Ze,ot){for(var vt=2*Math.PI,Qt=Math.PI/2;me>Ze;)me-=vt;var Ot=Math.abs(Ze-me);Ot<vt&&ot&&(Ot=vt-Ot);for(var kt=[],Me=ot?-1:1,Ht=me;Ot>1e-5;){var Zt=Ht+Me*Math.min(Ot,Qt);kt.push(Je.call(this,we,Ht,Zt)),Ot-=Math.abs(Zt-Ht),Ht=Zt}return kt},Je=function(we,me,Ze){var ot=(Ze-me)/2,vt=we*Math.cos(ot),Qt=we*Math.sin(ot),Ot=vt,kt=-Qt,Me=Ot*Ot+kt*kt,Ht=Me+Ot*vt+kt*Qt,Zt=4/3*(Math.sqrt(2*Me*Ht)-Ht)/(Ot*Qt-kt*vt),pn=Ot-Zt*kt,Dt=kt+Zt*Ot,hn=pn,Oe=-Dt,nn=ot+me,Vt=Math.cos(nn),$t=Math.sin(nn);return{x1:we*Math.cos(me),y1:we*Math.sin(me),x2:pn*Vt-Dt*$t,y2:pn*$t+Dt*Vt,x3:hn*Vt-Oe*$t,y3:hn*$t+Oe*Vt,x4:we*Math.cos(Ze),y4:we*Math.sin(Ze)}},Ue=function(we){return 180*we/Math.PI},Qe=function(we,me,Ze,ot,vt,Qt){var Ot=we+.5*(Ze-we),kt=me+.5*(ot-me),Me=vt+.5*(Ze-vt),Ht=Qt+.5*(ot-Qt),Zt=Math.min(we,vt,Ot,Me),pn=Math.max(we,vt,Ot,Me),Dt=Math.min(me,Qt,kt,Ht),hn=Math.max(me,Qt,kt,Ht);return new i(Zt,Dt,pn-Zt,hn-Dt)},xe=function(we,me,Ze,ot,vt,Qt,Ot,kt){var Me,Ht,Zt,pn,Dt,hn,Oe,nn,Vt,$t,xn,Xt,gn,rr,Gt=Ze-we,Rn=ot-me,wt=vt-Ze,qt=Qt-ot,fn=Ot-vt,Un=kt-Qt;for(Ht=0;Ht<41;Ht++)Vt=(Oe=(Zt=we+(Me=Ht/40)*Gt)+Me*((Dt=Ze+Me*wt)-Zt))+Me*(Dt+Me*(vt+Me*fn-Dt)-Oe),$t=(nn=(pn=me+Me*Rn)+Me*((hn=ot+Me*qt)-pn))+Me*(hn+Me*(Qt+Me*Un-hn)-nn),Ht==0?(xn=Vt,Xt=$t,gn=Vt,rr=$t):(xn=Math.min(xn,Vt),Xt=Math.min(Xt,$t),gn=Math.max(gn,Vt),rr=Math.max(rr,$t));return new i(Math.round(xn),Math.round(Xt),Math.round(gn-xn),Math.round(rr-Xt))},at=function(){if(this.prevLineDash||this.ctx.lineDash.length||this.ctx.lineDashOffset){var we,me,Ze=(we=this.ctx.lineDash,me=this.ctx.lineDashOffset,JSON.stringify({lineDash:we,lineDashOffset:me}));this.prevLineDash!==Ze&&(this.pdf.setLineDash(this.ctx.lineDash,this.ctx.lineDashOffset),this.prevLineDash=Ze)}}})(Ni.API),function(e){var t=function(a){var c,i,f,g,y,b,T,S,U,N;for(i=[],f=0,g=(a+=c="\0\0\0\0".slice(a.length%4||4)).length;g>f;f+=4)(y=(a.charCodeAt(f)<<24)+(a.charCodeAt(f+1)<<16)+(a.charCodeAt(f+2)<<8)+a.charCodeAt(f+3))!==0?(b=(y=((y=((y=((y=(y-(N=y%85))/85)-(U=y%85))/85)-(S=y%85))/85)-(T=y%85))/85)%85,i.push(b+33,T+33,S+33,U+33,N+33)):i.push(122);return function(W,L){for(var Q=L;Q>0;Q--)W.pop()}(i,c.length),String.fromCharCode.apply(String,i)+"~>"},n=function(a){var c,i,f,g,y,b=String,T="length",S=255,U="charCodeAt",N="slice",W="replace";for(a[N](-2),a=a[N](0,-2)[W](/\s/g,"")[W]("z","!!!!!"),f=[],g=0,y=(a+=c="uuuuu"[N](a[T]%5||5))[T];y>g;g+=5)i=52200625*(a[U](g)-33)+614125*(a[U](g+1)-33)+7225*(a[U](g+2)-33)+85*(a[U](g+3)-33)+(a[U](g+4)-33),f.push(S&i>>24,S&i>>16,S&i>>8,S&i);return function(L,Q){for(var V=Q;V>0;V--)L.pop()}(f,c[T]),b.fromCharCode.apply(b,f)},r=function(a){var c=new RegExp(/^([0-9A-Fa-f]{2})+$/);if((a=a.replace(/\s/g,"")).indexOf(">")!==-1&&(a=a.substr(0,a.indexOf(">"))),a.length%2&&(a+="0"),c.test(a)===!1)return"";for(var i="",f=0;f<a.length;f+=2)i+=String.fromCharCode("0x"+(a[f]+a[f+1]));return i},s=function(a){for(var c=new Uint8Array(a.length),i=a.length;i--;)c[i]=a.charCodeAt(i);return a=(c=F6(c)).reduce(function(f,g){return f+String.fromCharCode(g)},"")};e.processDataByFilters=function(a,c){var i=0,f=a||"",g=[];for(typeof(c=c||[])=="string"&&(c=[c]),i=0;i<c.length;i+=1)switch(c[i]){case"ASCII85Decode":case"/ASCII85Decode":f=n(f),g.push("/ASCII85Encode");break;case"ASCII85Encode":case"/ASCII85Encode":f=t(f),g.push("/ASCII85Decode");break;case"ASCIIHexDecode":case"/ASCIIHexDecode":f=r(f),g.push("/ASCIIHexEncode");break;case"ASCIIHexEncode":case"/ASCIIHexEncode":f=f.split("").map(function(y){return("0"+y.charCodeAt().toString(16)).slice(-2)}).join("")+">",g.push("/ASCIIHexDecode");break;case"FlateEncode":case"/FlateEncode":f=s(f),g.push("/FlateDecode");break;default:throw new Error('The filter: "'+c[i]+'" is not implemented')}return{data:f,reverseChain:g.reverse().join(" ")}}}(Ni.API),function(e){e.loadFile=function(t,n,r){return function(s,a,c){a=a!==!1,c=typeof c=="function"?c:function(){};var i=void 0;try{i=function(f,g,y){var b=new XMLHttpRequest,T=0,S=function(U){var N=U.length,W=[],L=String.fromCharCode;for(T=0;T<N;T+=1)W.push(L(255&U.charCodeAt(T)));return W.join("")};if(b.open("GET",f,!g),b.overrideMimeType("text/plain; charset=x-user-defined"),g===!1&&(b.onload=function(){b.status===200?y(S(this.responseText)):y(void 0)}),b.send(null),g&&b.status===200)return S(b.responseText)}(s,a,c)}catch{}return i}(t,n,r)},e.loadImageFile=e.loadFile}(Ni.API),function(e){function t(){return(is.html2canvas?Promise.resolve(is.html2canvas):B6(()=>Promise.resolve().then(()=>dfe),[])).catch(function(c){return Promise.reject(new Error("Could not load html2canvas: "+c))}).then(function(c){return c.default?c.default:c})}function n(){return(is.DOMPurify?Promise.resolve(is.DOMPurify):B6(()=>import("./purify.es-C_uT9hQ1.js"),[])).catch(function(c){return Promise.reject(new Error("Could not load dompurify: "+c))}).then(function(c){return c.default?c.default:c})}var r=function(c){var i=sa(c);return i==="undefined"?"undefined":i==="string"||c instanceof String?"string":i==="number"||c instanceof Number?"number":i==="function"||c instanceof Function?"function":c&&c.constructor===Array?"array":c&&c.nodeType===1?"element":i==="object"?"object":"unknown"},s=function(c,i){var f=document.createElement(c);for(var g in i.className&&(f.className=i.className),i.innerHTML&&i.dompurify&&(f.innerHTML=i.dompurify.sanitize(i.innerHTML)),i.style)f.style[g]=i.style[g];return f},a=function c(i){var f=Object.assign(c.convert(Promise.resolve()),JSON.parse(JSON.stringify(c.template))),g=c.convert(Promise.resolve(),f);return g=(g=g.setProgress(1,c,1,[c])).set(i)};(a.prototype=Object.create(Promise.prototype)).constructor=a,a.convert=function(c,i){return c.__proto__=i||a.prototype,c},a.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null,callback:function(){}},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],enableLinks:!0,x:0,y:0,html2canvas:{},jsPDF:{},backgroundColor:"transparent"}},a.prototype.from=function(c,i){return this.then(function(){switch(i=i||function(f){switch(r(f)){case"string":return"string";case"element":return f.nodeName.toLowerCase()==="canvas"?"canvas":"element";default:return"unknown"}}(c)){case"string":return this.then(n).then(function(f){return this.set({src:s("div",{innerHTML:c,dompurify:f})})});case"element":return this.set({src:c});case"canvas":return this.set({canvas:c});case"img":return this.set({img:c});default:return this.error("Unknown source type.")}})},a.prototype.to=function(c){switch(c){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},a.prototype.toContainer=function(){return this.thenList([function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}]).then(function(){var c={position:"relative",display:"inline-block",width:(typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?Math.max(this.prop.src.clientWidth,this.prop.src.scrollWidth,this.prop.src.offsetWidth):this.opt.windowWidth)+"px",left:0,right:0,top:0,margin:"auto",backgroundColor:this.opt.backgroundColor},i=function f(g,y){for(var b=g.nodeType===3?document.createTextNode(g.nodeValue):g.cloneNode(!1),T=g.firstChild;T;T=T.nextSibling)y!==!0&&T.nodeType===1&&T.nodeName==="SCRIPT"||b.appendChild(f(T,y));return g.nodeType===1&&(g.nodeName==="CANVAS"?(b.width=g.width,b.height=g.height,b.getContext("2d").drawImage(g,0,0)):g.nodeName!=="TEXTAREA"&&g.nodeName!=="SELECT"||(b.value=g.value),b.addEventListener("load",function(){b.scrollTop=g.scrollTop,b.scrollLeft=g.scrollLeft},!0)),b}(this.prop.src,this.opt.html2canvas.javascriptEnabled);i.tagName==="BODY"&&(c.height=Math.max(document.body.scrollHeight,document.body.offsetHeight,document.documentElement.clientHeight,document.documentElement.scrollHeight,document.documentElement.offsetHeight)+"px"),this.prop.overlay=s("div",{className:"html2pdf__overlay",style:{position:"fixed",overflow:"hidden",zIndex:1e3,left:"-100000px",right:0,bottom:0,top:0}}),this.prop.container=s("div",{className:"html2pdf__container",style:c}),this.prop.container.appendChild(i),this.prop.container.firstChild.appendChild(s("div",{style:{clear:"both",border:"0 none transparent",margin:0,padding:0,height:0}})),this.prop.container.style.float="none",this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay),this.prop.container.firstChild.style.position="relative",this.prop.container.height=Math.max(this.prop.container.firstChild.clientHeight,this.prop.container.firstChild.scrollHeight,this.prop.container.firstChild.offsetHeight)+"px"})},a.prototype.toCanvas=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(i){var f=Object.assign({},this.opt.html2canvas);return delete f.onrendered,i(this.prop.container,f)}).then(function(i){(this.opt.html2canvas.onrendered||function(){})(i),this.prop.canvas=i,document.body.removeChild(this.prop.overlay)})},a.prototype.toContext2d=function(){var c=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(c).then(t).then(function(i){var f=this.opt.jsPDF,g=this.opt.fontFaces,y=typeof this.opt.width!="number"||isNaN(this.opt.width)||typeof this.opt.windowWidth!="number"||isNaN(this.opt.windowWidth)?1:this.opt.width/this.opt.windowWidth,b=Object.assign({async:!0,allowTaint:!0,scale:y,scrollX:this.opt.scrollX||0,scrollY:this.opt.scrollY||0,backgroundColor:"#ffffff",imageTimeout:15e3,logging:!0,proxy:null,removeContainer:!0,foreignObjectRendering:!1,useCORS:!1},this.opt.html2canvas);if(delete b.onrendered,f.context2d.autoPaging=this.opt.autoPaging===void 0||this.opt.autoPaging,f.context2d.posX=this.opt.x,f.context2d.posY=this.opt.y,f.context2d.margin=this.opt.margin,f.context2d.fontFaces=g,g)for(var T=0;T<g.length;++T){var S=g[T],U=S.src.find(function(N){return N.format==="truetype"});U&&f.addFont(U.url,S.ref.name,S.ref.style)}return b.windowHeight=b.windowHeight||0,b.windowHeight=b.windowHeight==0?Math.max(this.prop.container.clientHeight,this.prop.container.scrollHeight,this.prop.container.offsetHeight):b.windowHeight,f.context2d.save(!0),i(this.prop.container,b)}).then(function(i){this.opt.jsPDF.context2d.restore(!0),(this.opt.html2canvas.onrendered||function(){})(i),this.prop.canvas=i,document.body.removeChild(this.prop.overlay)})},a.prototype.toImg=function(){return this.thenList([function(){return this.prop.canvas||this.toCanvas()}]).then(function(){var c=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=c})},a.prototype.toPdf=function(){return this.thenList([function(){return this.toContext2d()}]).then(function(){this.prop.pdf=this.prop.pdf||this.opt.jsPDF})},a.prototype.output=function(c,i,f){return(f=f||"pdf").toLowerCase()==="img"||f.toLowerCase()==="image"?this.outputImg(c,i):this.outputPdf(c,i)},a.prototype.outputPdf=function(c,i){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){return this.prop.pdf.output(c,i)})},a.prototype.outputImg=function(c){return this.thenList([function(){return this.prop.img||this.toImg()}]).then(function(){switch(c){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+c+'" is not supported.'}})},a.prototype.save=function(c){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).set(c?{filename:c}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},a.prototype.doCallback=function(){return this.thenList([function(){return this.prop.pdf||this.toPdf()}]).then(function(){this.prop.callback(this.prop.pdf)})},a.prototype.set=function(c){if(r(c)!=="object")return this;var i=Object.keys(c||{}).map(function(f){if(f in a.template.prop)return function(){this.prop[f]=c[f]};switch(f){case"margin":return this.setMargin.bind(this,c.margin);case"jsPDF":return function(){return this.opt.jsPDF=c.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,c.pageSize);default:return function(){this.opt[f]=c[f]}}},this);return this.then(function(){return this.thenList(i)})},a.prototype.get=function(c,i){return this.then(function(){var f=c in a.template.prop?this.prop[c]:this.opt[c];return i?i(f):f})},a.prototype.setMargin=function(c){return this.then(function(){switch(r(c)){case"number":c=[c,c,c,c];case"array":if(c.length===2&&(c=[c[0],c[1],c[0],c[1]]),c.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=c}).then(this.setPageSize)},a.prototype.setPageSize=function(c){function i(f,g){return Math.floor(f*g/72*96)}return this.then(function(){(c=c||Ni.getPageSize(this.opt.jsPDF)).hasOwnProperty("inner")||(c.inner={width:c.width-this.opt.margin[1]-this.opt.margin[3],height:c.height-this.opt.margin[0]-this.opt.margin[2]},c.inner.px={width:i(c.inner.width,c.k),height:i(c.inner.height,c.k)},c.inner.ratio=c.inner.height/c.inner.width),this.prop.pageSize=c})},a.prototype.setProgress=function(c,i,f,g){return c!=null&&(this.progress.val=c),i!=null&&(this.progress.state=i),f!=null&&(this.progress.n=f),g!=null&&(this.progress.stack=g),this.progress.ratio=this.progress.val/this.progress.state,this},a.prototype.updateProgress=function(c,i,f,g){return this.setProgress(c?this.progress.val+c:null,i||null,f?this.progress.n+f:null,g?this.progress.stack.concat(g):null)},a.prototype.then=function(c,i){var f=this;return this.thenCore(c,i,function(g,y){return f.updateProgress(null,null,1,[g]),Promise.prototype.then.call(this,function(b){return f.updateProgress(null,g),b}).then(g,y).then(function(b){return f.updateProgress(1),b})})},a.prototype.thenCore=function(c,i,f){f=f||Promise.prototype.then,c&&(c=c.bind(this)),i&&(i=i.bind(this));var g=Promise.toString().indexOf("[native code]")!==-1&&Promise.name==="Promise"?this:a.convert(Object.assign({},this),Promise.prototype),y=f.call(g,c,i);return a.convert(y,this.__proto__)},a.prototype.thenExternal=function(c,i){return Promise.prototype.then.call(this,c,i)},a.prototype.thenList=function(c){var i=this;return c.forEach(function(f){i=i.thenCore(f)}),i},a.prototype.catch=function(c){c&&(c=c.bind(this));var i=Promise.prototype.catch.call(this,c);return a.convert(i,this)},a.prototype.catchExternal=function(c){return Promise.prototype.catch.call(this,c)},a.prototype.error=function(c){return this.then(function(){throw new Error(c)})},a.prototype.using=a.prototype.set,a.prototype.saveAs=a.prototype.save,a.prototype.export=a.prototype.output,a.prototype.run=a.prototype.then,Ni.getPageSize=function(c,i,f){if(sa(c)==="object"){var g=c;c=g.orientation,i=g.unit||i,f=g.format||f}i=i||"mm",f=f||"a4",c=(""+(c||"P")).toLowerCase();var y,b=(""+f).toLowerCase(),T={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(i){case"pt":y=1;break;case"mm":y=72/25.4;break;case"cm":y=72/2.54;break;case"in":y=72;break;case"px":y=.75;break;case"pc":case"em":y=12;break;case"ex":y=6;break;default:throw"Invalid unit: "+i}var S,U=0,N=0;if(T.hasOwnProperty(b))U=T[b][1]/y,N=T[b][0]/y;else try{U=f[1],N=f[0]}catch{throw new Error("Invalid format: "+f)}if(c==="p"||c==="portrait")c="p",N>U&&(S=N,N=U,U=S);else{if(c!=="l"&&c!=="landscape")throw"Invalid orientation: "+c;c="l",U>N&&(S=N,N=U,U=S)}return{width:N,height:U,unit:i,k:y,orientation:c}},e.html=function(c,i){(i=i||{}).callback=i.callback||function(){},i.html2canvas=i.html2canvas||{},i.html2canvas.canvas=i.html2canvas.canvas||this.canvas,i.jsPDF=i.jsPDF||this,i.fontFaces=i.fontFaces?i.fontFaces.map(R6):null;var f=new a(i);return i.worker?f:f.from(c).doCallback()}}(Ni.API),Ni.API.addJS=function(e){return EY=e,this.internal.events.subscribe("postPutResources",function(){X3=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/Names [(EmbeddedJS) "+(X3+1)+" 0 R]"),this.internal.out(">>"),this.internal.out("endobj"),BY=this.internal.newObject(),this.internal.out("<<"),this.internal.out("/S /JavaScript"),this.internal.out("/JS ("+EY+")"),this.internal.out(">>"),this.internal.out("endobj")}),this.internal.events.subscribe("putCatalog",function(){X3!==void 0&&BY!==void 0&&this.internal.out("/Names <</JavaScript "+X3+" 0 R>>")}),this},function(e){var t;e.events.push(["postPutResources",function(){var n=this,r=/^(\d+) 0 obj$/;if(this.outline.root.children.length>0)for(var s=n.outline.render().split(/\r\n/),a=0;a<s.length;a++){var c=s[a],i=r.exec(c);if(i!=null){var f=i[1];n.internal.newObjectDeferredBegin(f,!1)}n.internal.write(c)}if(this.outline.createNamedDestinations){var g=this.internal.pages.length,y=[];for(a=0;a<g;a++){var b=n.internal.newObject();y.push(b);var T=n.internal.getPageInfo(a+1);n.internal.write("<< /D["+T.objId+" 0 R /XYZ null null null]>> endobj")}var S=n.internal.newObject();for(n.internal.write("<< /Names [ "),a=0;a<y.length;a++)n.internal.write("(page_"+(a+1)+")"+y[a]+" 0 R");n.internal.write(" ] >>","endobj"),t=n.internal.newObject(),n.internal.write("<< /Dests "+S+" 0 R"),n.internal.write(">>","endobj")}}]),e.events.push(["putCatalog",function(){this.outline.root.children.length>0&&(this.internal.write("/Outlines",this.outline.makeRef(this.outline.root)),this.outline.createNamedDestinations&&this.internal.write("/Names "+t+" 0 R"))}]),e.events.push(["initialized",function(){var n=this;n.outline={createNamedDestinations:!1,root:{children:[]}},n.outline.add=function(r,s,a){var c={title:s,options:a,children:[]};return r==null&&(r=this.root),r.children.push(c),c},n.outline.render=function(){return this.ctx={},this.ctx.val="",this.ctx.pdf=n,this.genIds_r(this.root),this.renderRoot(this.root),this.renderItems(this.root),this.ctx.val},n.outline.genIds_r=function(r){r.id=n.internal.newObjectDeferred();for(var s=0;s<r.children.length;s++)this.genIds_r(r.children[s])},n.outline.renderRoot=function(r){this.objStart(r),this.line("/Type /Outlines"),r.children.length>0&&(this.line("/First "+this.makeRef(r.children[0])),this.line("/Last "+this.makeRef(r.children[r.children.length-1]))),this.line("/Count "+this.count_r({count:0},r)),this.objEnd()},n.outline.renderItems=function(r){for(var s=this.ctx.pdf.internal.getVerticalCoordinateString,a=0;a<r.children.length;a++){var c=r.children[a];this.objStart(c),this.line("/Title "+this.makeString(c.title)),this.line("/Parent "+this.makeRef(r)),a>0&&this.line("/Prev "+this.makeRef(r.children[a-1])),a<r.children.length-1&&this.line("/Next "+this.makeRef(r.children[a+1])),c.children.length>0&&(this.line("/First "+this.makeRef(c.children[0])),this.line("/Last "+this.makeRef(c.children[c.children.length-1])));var i=this.count=this.count_r({count:0},c);if(i>0&&this.line("/Count "+i),c.options&&c.options.pageNumber){var f=n.internal.getPageInfo(c.options.pageNumber);this.line("/Dest ["+f.objId+" 0 R /XYZ 0 "+s(0)+" 0]")}this.objEnd()}for(var g=0;g<r.children.length;g++)this.renderItems(r.children[g])},n.outline.line=function(r){this.ctx.val+=r+`\r
`},n.outline.makeRef=function(r){return r.id+" 0 R"},n.outline.makeString=function(r){return"("+n.internal.pdfEscape(r)+")"},n.outline.objStart=function(r){this.ctx.val+=`\r
`+r.id+` 0 obj\r
<<\r
`},n.outline.objEnd=function(){this.ctx.val+=`>> \r
endobj\r
`},n.outline.count_r=function(r,s){for(var a=0;a<s.children.length;a++)r.count++,this.count_r(r,s.children[a]);return r.count}}])}(Ni.API),function(e){var t=[192,193,194,195,196,197,198,199];e.processJPEG=function(n,r,s,a,c,i){var f,g=this.decode.DCT_DECODE,y=null;if(typeof n=="string"||this.__addimage__.isArrayBuffer(n)||this.__addimage__.isArrayBufferView(n)){switch(n=c||n,n=this.__addimage__.isArrayBuffer(n)?new Uint8Array(n):n,(f=function(b){for(var T,S=256*b.charCodeAt(4)+b.charCodeAt(5),U=b.length,N={width:0,height:0,numcomponents:1},W=4;W<U;W+=2){if(W+=S,t.indexOf(b.charCodeAt(W+1))!==-1){T=256*b.charCodeAt(W+5)+b.charCodeAt(W+6),N={width:256*b.charCodeAt(W+7)+b.charCodeAt(W+8),height:T,numcomponents:b.charCodeAt(W+9)};break}S=256*b.charCodeAt(W+2)+b.charCodeAt(W+3)}return N}(n=this.__addimage__.isArrayBufferView(n)?this.__addimage__.arrayBufferToBinaryString(n):n)).numcomponents){case 1:i=this.color_spaces.DEVICE_GRAY;break;case 4:i=this.color_spaces.DEVICE_CMYK;break;case 3:i=this.color_spaces.DEVICE_RGB}y={data:n,width:f.width,height:f.height,colorSpace:i,bitsPerComponent:8,filter:g,index:r,alias:s}}return y}}(Ni.API);var c1,Y3,TY,IY,jY,yrt=function(){var e,t,n;function r(a){var c,i,f,g,y,b,T,S,U,N,W,L,Q,V;for(this.data=a,this.pos=8,this.palette=[],this.imgData=[],this.transparency={},this.animation=null,this.text={},b=null;;){switch(c=this.readUInt32(),U=(function(){var Z,ne;for(ne=[],Z=0;Z<4;++Z)ne.push(String.fromCharCode(this.data[this.pos++]));return ne}).call(this).join("")){case"IHDR":this.width=this.readUInt32(),this.height=this.readUInt32(),this.bits=this.data[this.pos++],this.colorType=this.data[this.pos++],this.compressionMethod=this.data[this.pos++],this.filterMethod=this.data[this.pos++],this.interlaceMethod=this.data[this.pos++];break;case"acTL":this.animation={numFrames:this.readUInt32(),numPlays:this.readUInt32()||1/0,frames:[]};break;case"PLTE":this.palette=this.read(c);break;case"fcTL":b&&this.animation.frames.push(b),this.pos+=4,b={width:this.readUInt32(),height:this.readUInt32(),xOffset:this.readUInt32(),yOffset:this.readUInt32()},y=this.readUInt16(),g=this.readUInt16()||100,b.delay=1e3*y/g,b.disposeOp=this.data[this.pos++],b.blendOp=this.data[this.pos++],b.data=[];break;case"IDAT":case"fdAT":for(U==="fdAT"&&(this.pos+=4,c-=4),a=(b!=null?b.data:void 0)||this.imgData,L=0;0<=c?L<c:L>c;0<=c?++L:--L)a.push(this.data[this.pos++]);break;case"tRNS":switch(this.transparency={},this.colorType){case 3:if(f=this.palette.length/3,this.transparency.indexed=this.read(c),this.transparency.indexed.length>f)throw new Error("More transparent colors than palette size");if((N=f-this.transparency.indexed.length)>0)for(Q=0;0<=N?Q<N:Q>N;0<=N?++Q:--Q)this.transparency.indexed.push(255);break;case 0:this.transparency.grayscale=this.read(c)[0];break;case 2:this.transparency.rgb=this.read(c)}break;case"tEXt":T=(W=this.read(c)).indexOf(0),S=String.fromCharCode.apply(String,W.slice(0,T)),this.text[S]=String.fromCharCode.apply(String,W.slice(T+1));break;case"IEND":return b&&this.animation.frames.push(b),this.colors=(function(){switch(this.colorType){case 0:case 3:case 4:return 1;case 2:case 6:return 3}}).call(this),this.hasAlphaChannel=(V=this.colorType)===4||V===6,i=this.colors+(this.hasAlphaChannel?1:0),this.pixelBitlength=this.bits*i,this.colorSpace=(function(){switch(this.colors){case 1:return"DeviceGray";case 3:return"DeviceRGB"}}).call(this),void(this.imgData=new Uint8Array(this.imgData));default:this.pos+=c}if(this.pos+=4,this.pos>this.data.length)throw new Error("Incomplete or corrupt PNG file")}}r.prototype.read=function(a){var c,i;for(i=[],c=0;0<=a?c<a:c>a;0<=a?++c:--c)i.push(this.data[this.pos++]);return i},r.prototype.readUInt32=function(){return this.data[this.pos++]<<24|this.data[this.pos++]<<16|this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.readUInt16=function(){return this.data[this.pos++]<<8|this.data[this.pos++]},r.prototype.decodePixels=function(a){var c=this.pixelBitlength/8,i=new Uint8Array(this.width*this.height*c),f=0,g=this;if(a==null&&(a=this.imgData),a.length===0)return new Uint8Array(0);function y(b,T,S,U){var N,W,L,Q,V,Z,ne,Y,le,pe,_e,ye,he,be,Te,Ee,Ne,Ge,Je,Ue,Qe,xe=Math.ceil((g.width-b)/S),at=Math.ceil((g.height-T)/U),we=g.width==xe&&g.height==at;for(be=c*xe,ye=we?i:new Uint8Array(be*at),Z=a.length,he=0,W=0;he<at&&f<Z;){switch(a[f++]){case 0:for(Q=Ne=0;Ne<be;Q=Ne+=1)ye[W++]=a[f++];break;case 1:for(Q=Ge=0;Ge<be;Q=Ge+=1)N=a[f++],V=Q<c?0:ye[W-c],ye[W++]=(N+V)%256;break;case 2:for(Q=Je=0;Je<be;Q=Je+=1)N=a[f++],L=(Q-Q%c)/c,Te=he&&ye[(he-1)*be+L*c+Q%c],ye[W++]=(Te+N)%256;break;case 3:for(Q=Ue=0;Ue<be;Q=Ue+=1)N=a[f++],L=(Q-Q%c)/c,V=Q<c?0:ye[W-c],Te=he&&ye[(he-1)*be+L*c+Q%c],ye[W++]=(N+Math.floor((V+Te)/2))%256;break;case 4:for(Q=Qe=0;Qe<be;Q=Qe+=1)N=a[f++],L=(Q-Q%c)/c,V=Q<c?0:ye[W-c],he===0?Te=Ee=0:(Te=ye[(he-1)*be+L*c+Q%c],Ee=L&&ye[(he-1)*be+(L-1)*c+Q%c]),ne=V+Te-Ee,Y=Math.abs(ne-V),pe=Math.abs(ne-Te),_e=Math.abs(ne-Ee),le=Y<=pe&&Y<=_e?V:pe<=_e?Te:Ee,ye[W++]=(N+le)%256;break;default:throw new Error("Invalid filter algorithm: "+a[f-1])}if(!we){var me=((T+he*U)*g.width+b)*c,Ze=he*be;for(Q=0;Q<xe;Q+=1){for(var ot=0;ot<c;ot+=1)i[me++]=ye[Ze++];me+=(S-1)*c}}he++}}return a=qnt(a),g.interlaceMethod==1?(y(0,0,8,8),y(4,0,8,8),y(0,4,4,8),y(2,0,4,4),y(0,2,2,4),y(1,0,2,2),y(0,1,1,2)):y(0,0,1,1),i},r.prototype.decodePalette=function(){var a,c,i,f,g,y,b,T,S;for(i=this.palette,y=this.transparency.indexed||[],g=new Uint8Array((y.length||0)+i.length),f=0,a=0,c=b=0,T=i.length;b<T;c=b+=3)g[f++]=i[c],g[f++]=i[c+1],g[f++]=i[c+2],g[f++]=(S=y[a++])!=null?S:255;return g},r.prototype.copyToImageData=function(a,c){var i,f,g,y,b,T,S,U,N,W,L;if(f=this.colors,N=null,i=this.hasAlphaChannel,this.palette.length&&(N=(L=this._decodedPalette)!=null?L:this._decodedPalette=this.decodePalette(),f=4,i=!0),U=(g=a.data||a).length,b=N||c,y=T=0,f===1)for(;y<U;)S=N?4*c[y/4]:T,W=b[S++],g[y++]=W,g[y++]=W,g[y++]=W,g[y++]=i?b[S++]:255,T=S;else for(;y<U;)S=N?4*c[y/4]:T,g[y++]=b[S++],g[y++]=b[S++],g[y++]=b[S++],g[y++]=i?b[S++]:255,T=S},r.prototype.decode=function(){var a;return a=new Uint8Array(this.width*this.height*4),this.copyToImageData(a,this.decodePixels()),a};var s=function(){if(Object.prototype.toString.call(is)==="[object Window]"){try{t=is.document.createElement("canvas"),n=t.getContext("2d")}catch{return!1}return!0}return!1};return s(),e=function(a){var c;if(s()===!0)return n.width=a.width,n.height=a.height,n.clearRect(0,0,a.width,a.height),n.putImageData(a,0,0),(c=new Image).src=t.toDataURL(),c;throw new Error("This method requires a Browser with Canvas-capability.")},r.prototype.decodeFrames=function(a){var c,i,f,g,y,b,T,S;if(this.animation){for(S=[],i=y=0,b=(T=this.animation.frames).length;y<b;i=++y)c=T[i],f=a.createImageData(c.width,c.height),g=this.decodePixels(new Uint8Array(c.data)),this.copyToImageData(f,g),c.imageData=f,S.push(c.image=e(f));return S}},r.prototype.renderFrame=function(a,c){var i,f,g;return i=(f=this.animation.frames)[c],g=f[c-1],c===0&&a.clearRect(0,0,this.width,this.height),(g!=null?g.disposeOp:void 0)===1?a.clearRect(g.xOffset,g.yOffset,g.width,g.height):(g!=null?g.disposeOp:void 0)===2&&a.putImageData(g.imageData,g.xOffset,g.yOffset),i.blendOp===0&&a.clearRect(i.xOffset,i.yOffset,i.width,i.height),a.drawImage(i.image,i.xOffset,i.yOffset)},r.prototype.animate=function(a){var c,i,f,g,y,b,T=this;return i=0,b=this.animation,g=b.numFrames,f=b.frames,y=b.numPlays,(c=function(){var S,U;if(S=i++%g,U=f[S],T.renderFrame(a,S),g>1&&i/g<y)return T.animation._timeout=setTimeout(c,U.delay)})()},r.prototype.stopAnimation=function(){var a;return clearTimeout((a=this.animation)!=null?a._timeout:void 0)},r.prototype.render=function(a){var c,i;return a._png&&a._png.stopAnimation(),a._png=this,a.width=this.width,a.height=this.height,c=a.getContext("2d"),this.animation?(this.decodeFrames(c),this.animate(c)):(i=c.createImageData(this.width,this.height),this.copyToImageData(i,this.decodePixels()),c.putImageData(i,0,0))},r}();/**
 * @license
 *
 * Copyright (c) 2014 James Robb, https://github.com/jamesbrobb
 *
 * Permission is hereby granted, free of charge, to any person obtaining
 * a copy of this software and associated documentation files (the
 * "Software"), to deal in the Software without restriction, including
 * without limitation the rights to use, copy, modify, merge, publish,
 * distribute, sublicense, and/or sell copies of the Software, and to
 * permit persons to whom the Software is furnished to do so, subject to
 * the following conditions:
 *
 * The above copyright notice and this permission notice shall be
 * included in all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
 * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF
 * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
 * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE
 * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION
 * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION
 * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.
 * ====================================================================
 *//**
 * @license
 * (c) Dean McNamee <dean@gmail.com>, 2013.
 *
 * https://github.com/deanm/omggif
 *
 * Permission is hereby granted, free of charge, to any person obtaining a copy
 * of this software and associated documentation files (the "Software"), to
 * deal in the Software without restriction, including without limitation the
 * rights to use, copy, modify, merge, publish, distribute, sublicense, and/or
 * sell copies of the Software, and to permit persons to whom the Software is
 * furnished to do so, subject to the following conditions:
 *
 * The above copyright notice and this permission notice shall be included in
 * all copies or substantial portions of the Software.
 *
 * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
 * IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
 * FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
 * AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
 * LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
 * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS
 * IN THE SOFTWARE.
 *
 * omggif is a JavaScript implementation of a GIF 89a encoder and decoder,
 * including animation and compression.  It does not rely on any specific
 * underlying system, so should run in the browser, Node, or Plask.
 */function vrt(e){var t=0;if(e[t++]!==71||e[t++]!==73||e[t++]!==70||e[t++]!==56||(e[t++]+1&253)!=56||e[t++]!==97)throw new Error("Invalid GIF 87a/89a header.");var n=e[t++]|e[t++]<<8,r=e[t++]|e[t++]<<8,s=e[t++],a=s>>7,c=1<<(7&s)+1;e[t++],e[t++];var i=null,f=null;a&&(i=t,f=c,t+=3*c);var g=!0,y=[],b=0,T=null,S=0,U=null;for(this.width=n,this.height=r;g&&t<e.length;)switch(e[t++]){case 33:switch(e[t++]){case 255:if(e[t]!==11||e[t+1]==78&&e[t+2]==69&&e[t+3]==84&&e[t+4]==83&&e[t+5]==67&&e[t+6]==65&&e[t+7]==80&&e[t+8]==69&&e[t+9]==50&&e[t+10]==46&&e[t+11]==48&&e[t+12]==3&&e[t+13]==1&&e[t+16]==0)t+=14,U=e[t++]|e[t++]<<8,t++;else for(t+=12;;){if(!((he=e[t++])>=0))throw Error("Invalid block size");if(he===0)break;t+=he}break;case 249:if(e[t++]!==4||e[t+4]!==0)throw new Error("Invalid graphics extension block.");var N=e[t++];b=e[t++]|e[t++]<<8,T=e[t++],!(1&N)&&(T=null),S=N>>2&7,t++;break;case 254:for(;;){if(!((he=e[t++])>=0))throw Error("Invalid block size");if(he===0)break;t+=he}break;default:throw new Error("Unknown graphic control label: 0x"+e[t-1].toString(16))}break;case 44:var W=e[t++]|e[t++]<<8,L=e[t++]|e[t++]<<8,Q=e[t++]|e[t++]<<8,V=e[t++]|e[t++]<<8,Z=e[t++],ne=Z>>6&1,Y=1<<(7&Z)+1,le=i,pe=f,_e=!1;Z>>7&&(_e=!0,le=t,pe=Y,t+=3*Y);var ye=t;for(t++;;){var he;if(!((he=e[t++])>=0))throw Error("Invalid block size");if(he===0)break;t+=he}y.push({x:W,y:L,width:Q,height:V,has_local_palette:_e,palette_offset:le,palette_size:pe,data_offset:ye,data_length:t-ye,transparent_index:T,interlaced:!!ne,delay:b,disposal:S});break;case 59:g=!1;break;default:throw new Error("Unknown gif block: 0x"+e[t-1].toString(16))}this.numFrames=function(){return y.length},this.loopCount=function(){return U},this.frameInfo=function(be){if(be<0||be>=y.length)throw new Error("Frame index out of range.");return y[be]},this.decodeAndBlitFrameBGRA=function(be,Te){var Ee=this.frameInfo(be),Ne=Ee.width*Ee.height,Ge=new Uint8Array(Ne);FY(e,Ee.data_offset,Ge,Ne);var Je=Ee.palette_offset,Ue=Ee.transparent_index;Ue===null&&(Ue=256);var Qe=Ee.width,xe=n-Qe,at=Qe,we=4*(Ee.y*n+Ee.x),me=4*((Ee.y+Ee.height)*n+Ee.x),Ze=we,ot=4*xe;Ee.interlaced===!0&&(ot+=4*n*7);for(var vt=8,Qt=0,Ot=Ge.length;Qt<Ot;++Qt){var kt=Ge[Qt];if(at===0&&(at=Qe,(Ze+=ot)>=me&&(ot=4*xe+4*n*(vt-1),Ze=we+(Qe+xe)*(vt<<1),vt>>=1)),kt===Ue)Ze+=4;else{var Me=e[Je+3*kt],Ht=e[Je+3*kt+1],Zt=e[Je+3*kt+2];Te[Ze++]=Zt,Te[Ze++]=Ht,Te[Ze++]=Me,Te[Ze++]=255}--at}},this.decodeAndBlitFrameRGBA=function(be,Te){var Ee=this.frameInfo(be),Ne=Ee.width*Ee.height,Ge=new Uint8Array(Ne);FY(e,Ee.data_offset,Ge,Ne);var Je=Ee.palette_offset,Ue=Ee.transparent_index;Ue===null&&(Ue=256);var Qe=Ee.width,xe=n-Qe,at=Qe,we=4*(Ee.y*n+Ee.x),me=4*((Ee.y+Ee.height)*n+Ee.x),Ze=we,ot=4*xe;Ee.interlaced===!0&&(ot+=4*n*7);for(var vt=8,Qt=0,Ot=Ge.length;Qt<Ot;++Qt){var kt=Ge[Qt];if(at===0&&(at=Qe,(Ze+=ot)>=me&&(ot=4*xe+4*n*(vt-1),Ze=we+(Qe+xe)*(vt<<1),vt>>=1)),kt===Ue)Ze+=4;else{var Me=e[Je+3*kt],Ht=e[Je+3*kt+1],Zt=e[Je+3*kt+2];Te[Ze++]=Me,Te[Ze++]=Ht,Te[Ze++]=Zt,Te[Ze++]=255}--at}}}function FY(e,t,n,r){for(var s=e[t++],a=1<<s,c=a+1,i=c+1,f=s+1,g=(1<<f)-1,y=0,b=0,T=0,S=e[t++],U=new Int32Array(4096),N=null;;){for(;y<16&&S!==0;)b|=e[t++]<<y,y+=8,S===1?S=e[t++]:--S;if(y<f)break;var W=b&g;if(b>>=f,y-=f,W!==a){if(W===c)break;for(var L=W<i?W:N,Q=0,V=L;V>a;)V=U[V]>>8,++Q;var Z=V;if(T+Q+(L!==W?1:0)>r)return void Sa.log("Warning, gif stream longer than expected.");n[T++]=Z;var ne=T+=Q;for(L!==W&&(n[T++]=Z),V=L;Q--;)V=U[V],n[--ne]=255&V,V>>=8;N!==null&&i<4096&&(U[i++]=N<<8|Z,i>=g+1&&f<12&&(++f,g=g<<1|1)),N=W}else i=c+1,g=(1<<(f=s+1))-1,N=null}return T!==r&&Sa.log("Warning, gif stream shorter than expected."),n}/**
 * @license
  Copyright (c) 2008, Adobe Systems Incorporated
  All rights reserved.

  Redistribution and use in source and binary forms, with or without 
  modification, are permitted provided that the following conditions are
  met:

  * Redistributions of source code must retain the above copyright notice, 
    this list of conditions and the following disclaimer.
  
  * Redistributions in binary form must reproduce the above copyright
    notice, this list of conditions and the following disclaimer in the 
    documentation and/or other materials provided with the distribution.
  
  * Neither the name of Adobe Systems Incorporated nor the names of its 
    contributors may be used to endorse or promote products derived from 
    this software without specific prior written permission.

  THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS
  IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO,
  THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR
  PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT OWNER OR 
  CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO,
  PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR
  PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF
  LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING
  NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
  SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
*/function Y5(e){var t,n,r,s,a,c=Math.floor,i=new Array(64),f=new Array(64),g=new Array(64),y=new Array(64),b=new Array(65535),T=new Array(65535),S=new Array(64),U=new Array(64),N=[],W=0,L=7,Q=new Array(64),V=new Array(64),Z=new Array(64),ne=new Array(256),Y=new Array(2048),le=[0,1,5,6,14,15,27,28,2,4,7,13,16,26,29,42,3,8,12,17,25,30,41,43,9,11,18,24,31,40,44,53,10,19,23,32,39,45,52,54,20,22,33,38,46,51,55,60,21,34,37,47,50,56,59,61,35,36,48,49,57,58,62,63],pe=[0,0,1,5,1,1,1,1,1,1,0,0,0,0,0,0,0],_e=[0,1,2,3,4,5,6,7,8,9,10,11],ye=[0,0,2,1,3,3,2,4,3,5,5,4,4,0,0,1,125],he=[1,2,3,0,4,17,5,18,33,49,65,6,19,81,97,7,34,113,20,50,129,145,161,8,35,66,177,193,21,82,209,240,36,51,98,114,130,9,10,22,23,24,25,26,37,38,39,40,41,42,52,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,225,226,227,228,229,230,231,232,233,234,241,242,243,244,245,246,247,248,249,250],be=[0,0,3,1,1,1,1,1,1,1,1,1,0,0,0,0,0],Te=[0,1,2,3,4,5,6,7,8,9,10,11],Ee=[0,0,2,1,2,4,4,3,4,7,5,4,4,0,1,2,119],Ne=[0,1,2,3,17,4,5,33,49,6,18,65,81,7,97,113,19,34,50,129,8,20,66,145,161,177,193,9,35,51,82,240,21,98,114,209,10,22,36,52,225,37,241,23,24,25,26,38,39,40,41,42,53,54,55,56,57,58,67,68,69,70,71,72,73,74,83,84,85,86,87,88,89,90,99,100,101,102,103,104,105,106,115,116,117,118,119,120,121,122,130,131,132,133,134,135,136,137,138,146,147,148,149,150,151,152,153,154,162,163,164,165,166,167,168,169,170,178,179,180,181,182,183,184,185,186,194,195,196,197,198,199,200,201,202,210,211,212,213,214,215,216,217,218,226,227,228,229,230,231,232,233,234,242,243,244,245,246,247,248,249,250];function Ge(we,me){for(var Ze=0,ot=0,vt=new Array,Qt=1;Qt<=16;Qt++){for(var Ot=1;Ot<=we[Qt];Ot++)vt[me[ot]]=[],vt[me[ot]][0]=Ze,vt[me[ot]][1]=Qt,ot++,Ze++;Ze*=2}return vt}function Je(we){for(var me=we[0],Ze=we[1]-1;Ze>=0;)me&1<<Ze&&(W|=1<<L),Ze--,--L<0&&(W==255?(Ue(255),Ue(0)):Ue(W),L=7,W=0)}function Ue(we){N.push(we)}function Qe(we){Ue(we>>8&255),Ue(255&we)}function xe(we,me,Ze,ot,vt){for(var Qt,Ot=vt[0],kt=vt[240],Me=function($t,xn){var Xt,gn,rr,Gt,Rn,wt,qt,fn,Un,Yt,cn=0;for(Un=0;Un<8;++Un){Xt=$t[cn],gn=$t[cn+1],rr=$t[cn+2],Gt=$t[cn+3],Rn=$t[cn+4],wt=$t[cn+5],qt=$t[cn+6];var Ln=Xt+(fn=$t[cn+7]),Hn=Xt-fn,_r=gn+qt,fr=gn-qt,xr=rr+wt,bi=rr-wt,Vn=Gt+Rn,Es=Gt-Rn,ki=Ln+Vn,hs=Ln-Vn,mi=_r+xr,br=_r-xr;$t[cn]=ki+mi,$t[cn+4]=ki-mi;var gr=.707106781*(br+hs);$t[cn+2]=hs+gr,$t[cn+6]=hs-gr;var Ir=.382683433*((ki=Es+bi)-(br=fr+Hn)),Kr=.5411961*ki+Ir,Mt=1.306562965*br+Ir,je=.707106781*(mi=bi+fr),De=Hn+je,ve=Hn-je;$t[cn+5]=ve+Kr,$t[cn+3]=ve-Kr,$t[cn+1]=De+Mt,$t[cn+7]=De-Mt,cn+=8}for(cn=0,Un=0;Un<8;++Un){Xt=$t[cn],gn=$t[cn+8],rr=$t[cn+16],Gt=$t[cn+24],Rn=$t[cn+32],wt=$t[cn+40],qt=$t[cn+48];var Re=Xt+(fn=$t[cn+56]),ze=Xt-fn,tt=gn+qt,gt=gn-qt,pt=rr+wt,Lt=rr-wt,jt=Gt+Rn,Nt=Gt-Rn,rn=Re+jt,_n=Re-jt,Pn=tt+pt,sr=tt-pt;$t[cn]=rn+Pn,$t[cn+32]=rn-Pn;var Cr=.707106781*(sr+_n);$t[cn+16]=_n+Cr,$t[cn+48]=_n-Cr;var Ar=.382683433*((rn=Nt+Lt)-(sr=gt+ze)),pr=.5411961*rn+Ar,Wr=1.306562965*sr+Ar,vi=.707106781*(Pn=Lt+gt),ti=ze+vi,Ai=ze-vi;$t[cn+40]=Ai+pr,$t[cn+24]=Ai-pr,$t[cn+8]=ti+Wr,$t[cn+56]=ti-Wr,cn++}for(Un=0;Un<64;++Un)Yt=$t[Un]*xn[Un],S[Un]=Yt>0?Yt+.5|0:Yt-.5|0;return S}(we,me),Ht=0;Ht<64;++Ht)U[le[Ht]]=Me[Ht];var Zt=U[0]-Ze;Ze=U[0],Zt==0?Je(ot[0]):(Je(ot[T[Qt=32767+Zt]]),Je(b[Qt]));for(var pn=63;pn>0&&U[pn]==0;)pn--;if(pn==0)return Je(Ot),Ze;for(var Dt,hn=1;hn<=pn;){for(var Oe=hn;U[hn]==0&&hn<=pn;)++hn;var nn=hn-Oe;if(nn>=16){Dt=nn>>4;for(var Vt=1;Vt<=Dt;++Vt)Je(kt);nn&=15}Qt=32767+U[hn],Je(vt[(nn<<4)+T[Qt]]),Je(b[Qt]),hn++}return pn!=63&&Je(Ot),Ze}function at(we){we=Math.min(Math.max(we,1),100),a!=we&&(function(me){for(var Ze=[16,11,10,16,24,40,51,61,12,12,14,19,26,58,60,55,14,13,16,24,40,57,69,56,14,17,22,29,51,87,80,62,18,22,37,56,68,109,103,77,24,35,55,64,81,104,113,92,49,64,78,87,103,121,120,101,72,92,95,98,112,100,103,99],ot=0;ot<64;ot++){var vt=c((Ze[ot]*me+50)/100);vt=Math.min(Math.max(vt,1),255),i[le[ot]]=vt}for(var Qt=[17,18,24,47,99,99,99,99,18,21,26,66,99,99,99,99,24,26,56,99,99,99,99,99,47,66,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99,99],Ot=0;Ot<64;Ot++){var kt=c((Qt[Ot]*me+50)/100);kt=Math.min(Math.max(kt,1),255),f[le[Ot]]=kt}for(var Me=[1,1.387039845,1.306562965,1.175875602,1,.785694958,.5411961,.275899379],Ht=0,Zt=0;Zt<8;Zt++)for(var pn=0;pn<8;pn++)g[Ht]=1/(i[le[Ht]]*Me[Zt]*Me[pn]*8),y[Ht]=1/(f[le[Ht]]*Me[Zt]*Me[pn]*8),Ht++}(we<50?Math.floor(5e3/we):Math.floor(200-2*we)),a=we)}this.encode=function(we,me){me&&at(me),N=new Array,W=0,L=7,Qe(65496),Qe(65504),Qe(16),Ue(74),Ue(70),Ue(73),Ue(70),Ue(0),Ue(1),Ue(1),Ue(0),Qe(1),Qe(1),Ue(0),Ue(0),function(){Qe(65499),Qe(132),Ue(0);for(var gn=0;gn<64;gn++)Ue(i[gn]);Ue(1);for(var rr=0;rr<64;rr++)Ue(f[rr])}(),function(gn,rr){Qe(65472),Qe(17),Ue(8),Qe(rr),Qe(gn),Ue(3),Ue(1),Ue(17),Ue(0),Ue(2),Ue(17),Ue(1),Ue(3),Ue(17),Ue(1)}(we.width,we.height),function(){Qe(65476),Qe(418),Ue(0);for(var gn=0;gn<16;gn++)Ue(pe[gn+1]);for(var rr=0;rr<=11;rr++)Ue(_e[rr]);Ue(16);for(var Gt=0;Gt<16;Gt++)Ue(ye[Gt+1]);for(var Rn=0;Rn<=161;Rn++)Ue(he[Rn]);Ue(1);for(var wt=0;wt<16;wt++)Ue(be[wt+1]);for(var qt=0;qt<=11;qt++)Ue(Te[qt]);Ue(17);for(var fn=0;fn<16;fn++)Ue(Ee[fn+1]);for(var Un=0;Un<=161;Un++)Ue(Ne[Un])}(),Qe(65498),Qe(12),Ue(3),Ue(1),Ue(0),Ue(2),Ue(17),Ue(3),Ue(17),Ue(0),Ue(63),Ue(0);var Ze=0,ot=0,vt=0;W=0,L=7,this.encode.displayName="_encode_";for(var Qt,Ot,kt,Me,Ht,Zt,pn,Dt,hn,Oe=we.data,nn=we.width,Vt=we.height,$t=4*nn,xn=0;xn<Vt;){for(Qt=0;Qt<$t;){for(Ht=$t*xn+Qt,pn=-1,Dt=0,hn=0;hn<64;hn++)Zt=Ht+(Dt=hn>>3)*$t+(pn=4*(7&hn)),xn+Dt>=Vt&&(Zt-=$t*(xn+1+Dt-Vt)),Qt+pn>=$t&&(Zt-=Qt+pn-$t+4),Ot=Oe[Zt++],kt=Oe[Zt++],Me=Oe[Zt++],Q[hn]=(Y[Ot]+Y[kt+256>>0]+Y[Me+512>>0]>>16)-128,V[hn]=(Y[Ot+768>>0]+Y[kt+1024>>0]+Y[Me+1280>>0]>>16)-128,Z[hn]=(Y[Ot+1280>>0]+Y[kt+1536>>0]+Y[Me+1792>>0]>>16)-128;Ze=xe(Q,g,Ze,t,r),ot=xe(V,y,ot,n,s),vt=xe(Z,y,vt,n,s),Qt+=32}xn+=8}if(L>=0){var Xt=[];Xt[1]=L+1,Xt[0]=(1<<L+1)-1,Je(Xt)}return Qe(65497),new Uint8Array(N)},e=e||50,function(){for(var we=String.fromCharCode,me=0;me<256;me++)ne[me]=we(me)}(),t=Ge(pe,_e),n=Ge(be,Te),r=Ge(ye,he),s=Ge(Ee,Ne),function(){for(var we=1,me=2,Ze=1;Ze<=15;Ze++){for(var ot=we;ot<me;ot++)T[32767+ot]=Ze,b[32767+ot]=[],b[32767+ot][1]=Ze,b[32767+ot][0]=ot;for(var vt=-(me-1);vt<=-we;vt++)T[32767+vt]=Ze,b[32767+vt]=[],b[32767+vt][1]=Ze,b[32767+vt][0]=me-1+vt;we<<=1,me<<=1}}(),function(){for(var we=0;we<256;we++)Y[we]=19595*we,Y[we+256>>0]=38470*we,Y[we+512>>0]=7471*we+32768,Y[we+768>>0]=-11059*we,Y[we+1024>>0]=-21709*we,Y[we+1280>>0]=32768*we+8421375,Y[we+1536>>0]=-27439*we,Y[we+1792>>0]=-5329*we}(),at(e)}/**
 * @license
 * Copyright (c) 2017 Aras Abbasi
 *
 * Licensed under the MIT License.
 * http://opensource.org/licenses/mit-license
 */function SA(e,t){if(this.pos=0,this.buffer=e,this.datav=new DataView(e.buffer),this.is_with_alpha=!!t,this.bottom_up=!0,this.flag=String.fromCharCode(this.buffer[0])+String.fromCharCode(this.buffer[1]),this.pos+=2,["BM","BA","CI","CP","IC","PT"].indexOf(this.flag)===-1)throw new Error("Invalid BMP File");this.parseHeader(),this.parseBGR()}function PY(e){function t(pe){if(!pe)throw Error("assert :P")}function n(pe,_e,ye){for(var he=0;4>he;he++)if(pe[_e+he]!=ye.charCodeAt(he))return!0;return!1}function r(pe,_e,ye,he,be){for(var Te=0;Te<be;Te++)pe[_e+Te]=ye[he+Te]}function s(pe,_e,ye,he){for(var be=0;be<he;be++)pe[_e+be]=ye}function a(pe){return new Int32Array(pe)}function c(pe,_e){for(var ye=[],he=0;he<pe;he++)ye.push(new _e);return ye}function i(pe,_e){var ye=[];return function he(be,Te,Ee){for(var Ne=Ee[Te],Ge=0;Ge<Ne&&(be.push(Ee.length>Te+1?[]:new _e),!(Ee.length<Te+1));Ge++)he(be[Ge],Te+1,Ee)}(ye,0,pe),ye}var f=function(){var pe=this;function _e(G,ee){for(var Ae=1<<ee-1>>>0;G&Ae;)Ae>>>=1;return Ae?(G&Ae-1)+Ae:G}function ye(G,ee,Ae,Fe,Ve){t(!(Fe%Ae));do G[ee+(Fe-=Ae)]=Ve;while(0<Fe)}function he(G,ee,Ae,Fe,Ve){if(t(2328>=Ve),512>=Ve)var it=a(512);else if((it=a(Ve))==null)return 0;return function(st,lt,He,St,on,En){var Tn,It,er=lt,zn=1<<He,un=a(16),An=a(16);for(t(on!=0),t(St!=null),t(st!=null),t(0<He),It=0;It<on;++It){if(15<St[It])return 0;++un[St[It]]}if(un[0]==on)return 0;for(An[1]=0,Tn=1;15>Tn;++Tn){if(un[Tn]>1<<Tn)return 0;An[Tn+1]=An[Tn]+un[Tn]}for(It=0;It<on;++It)Tn=St[It],0<St[It]&&(En[An[Tn]++]=It);if(An[15]==1)return(St=new be).g=0,St.value=En[0],ye(st,er,1,zn,St),zn;var Jn,ur=-1,Xn=zn-1,Vr=0,wr=1,ei=1,Nr=1<<He;for(It=0,Tn=1,on=2;Tn<=He;++Tn,on<<=1){if(wr+=ei<<=1,0>(ei-=un[Tn]))return 0;for(;0<un[Tn];--un[Tn])(St=new be).g=Tn,St.value=En[It++],ye(st,er+Vr,on,Nr,St),Vr=_e(Vr,Tn)}for(Tn=He+1,on=2;15>=Tn;++Tn,on<<=1){if(wr+=ei<<=1,0>(ei-=un[Tn]))return 0;for(;0<un[Tn];--un[Tn]){if(St=new be,(Vr&Xn)!=ur){for(er+=Nr,Jn=1<<(ur=Tn)-He;15>ur&&!(0>=(Jn-=un[ur]));)++ur,Jn<<=1;zn+=Nr=1<<(Jn=ur-He),st[lt+(ur=Vr&Xn)].g=Jn+He,st[lt+ur].value=er-lt-ur}St.g=Tn-He,St.value=En[It++],ye(st,er+(Vr>>He),on,Nr,St),Vr=_e(Vr,Tn)}}return wr!=2*An[15]-1?0:zn}(G,ee,Ae,Fe,Ve,it)}function be(){this.value=this.g=0}function Te(){this.value=this.g=0}function Ee(){this.G=c(5,be),this.H=a(5),this.jc=this.Qb=this.qb=this.nd=0,this.pd=c(ao,Te)}function Ne(G,ee,Ae,Fe){t(G!=null),t(ee!=null),t(2147483648>Fe),G.Ca=254,G.I=0,G.b=-8,G.Ka=0,G.oa=ee,G.pa=Ae,G.Jd=ee,G.Yc=Ae+Fe,G.Zc=4<=Fe?Ae+Fe-4+1:Ae,Qt(G)}function Ge(G,ee){for(var Ae=0;0<ee--;)Ae|=kt(G,128)<<ee;return Ae}function Je(G,ee){var Ae=Ge(G,ee);return Ot(G)?-Ae:Ae}function Ue(G,ee,Ae,Fe){var Ve,it=0;for(t(G!=null),t(ee!=null),t(4294967288>Fe),G.Sb=Fe,G.Ra=0,G.u=0,G.h=0,4<Fe&&(Fe=4),Ve=0;Ve<Fe;++Ve)it+=ee[Ae+Ve]<<8*Ve;G.Ra=it,G.bb=Fe,G.oa=ee,G.pa=Ae}function Qe(G){for(;8<=G.u&&G.bb<G.Sb;)G.Ra>>>=8,G.Ra+=G.oa[G.pa+G.bb]<<$d-8>>>0,++G.bb,G.u-=8;Ze(G)&&(G.h=1,G.u=0)}function xe(G,ee){if(t(0<=ee),!G.h&&ee<=Wn){var Ae=me(G)&Cc[ee];return G.u+=ee,Qe(G),Ae}return G.h=1,G.u=0}function at(){this.b=this.Ca=this.I=0,this.oa=[],this.pa=0,this.Jd=[],this.Yc=0,this.Zc=[],this.Ka=0}function we(){this.Ra=0,this.oa=[],this.h=this.u=this.bb=this.Sb=this.pa=0}function me(G){return G.Ra>>>(G.u&$d-1)>>>0}function Ze(G){return t(G.bb<=G.Sb),G.h||G.bb==G.Sb&&G.u>$d}function ot(G,ee){G.u=ee,G.h=Ze(G)}function vt(G){G.u>=rc&&(t(G.u>=rc),Qe(G))}function Qt(G){t(G!=null&&G.oa!=null),G.pa<G.Zc?(G.I=(G.oa[G.pa++]|G.I<<8)>>>0,G.b+=8):(t(G!=null&&G.oa!=null),G.pa<G.Yc?(G.b+=8,G.I=G.oa[G.pa++]|G.I<<8):G.Ka?G.b=0:(G.I<<=8,G.b+=8,G.Ka=1))}function Ot(G){return Ge(G,1)}function kt(G,ee){var Ae=G.Ca;0>G.b&&Qt(G);var Fe=G.b,Ve=Ae*ee>>>8,it=(G.I>>>Fe>Ve)+0;for(it?(Ae-=Ve,G.I-=Ve+1<<Fe>>>0):Ae=Ve+1,Fe=Ae,Ve=0;256<=Fe;)Ve+=8,Fe>>=8;return Fe=7^Ve+Gs[Fe],G.b-=Fe,G.Ca=(Ae<<Fe)-1,it}function Me(G,ee,Ae){G[ee+0]=Ae>>24&255,G[ee+1]=Ae>>16&255,G[ee+2]=Ae>>8&255,G[ee+3]=Ae>>0&255}function Ht(G,ee){return G[ee+0]<<0|G[ee+1]<<8}function Zt(G,ee){return Ht(G,ee)|G[ee+2]<<16}function pn(G,ee){return Ht(G,ee)|Ht(G,ee+2)<<16}function Dt(G,ee){var Ae=1<<ee;return t(G!=null),t(0<ee),G.X=a(Ae),G.X==null?0:(G.Mb=32-ee,G.Xa=ee,1)}function hn(G,ee){t(G!=null),t(ee!=null),t(G.Xa==ee.Xa),r(ee.X,0,G.X,0,1<<ee.Xa)}function Oe(){this.X=[],this.Xa=this.Mb=0}function nn(G,ee,Ae,Fe){t(Ae!=null),t(Fe!=null);var Ve=Ae[0],it=Fe[0];return Ve==0&&(Ve=(G*it+ee/2)/ee),it==0&&(it=(ee*Ve+G/2)/G),0>=Ve||0>=it?0:(Ae[0]=Ve,Fe[0]=it,1)}function Vt(G,ee){return G+(1<<ee)-1>>>ee}function $t(G,ee){return((4278255360&G)+(4278255360&ee)>>>0&4278255360)+((16711935&G)+(16711935&ee)>>>0&16711935)>>>0}function xn(G,ee){pe[ee]=function(Ae,Fe,Ve,it,st,lt,He){var St;for(St=0;St<st;++St){var on=pe[G](lt[He+St-1],Ve,it+St);lt[He+St]=$t(Ae[Fe+St],on)}}}function Xt(){this.ud=this.hd=this.jd=0}function gn(G,ee){return((4278124286&(G^ee))>>>1)+(G&ee)>>>0}function rr(G){return 0<=G&&256>G?G:0>G?0:255<G?255:void 0}function Gt(G,ee){return rr(G+(G-ee+.5>>1))}function Rn(G,ee,Ae){return Math.abs(ee-Ae)-Math.abs(G-Ae)}function wt(G,ee,Ae,Fe,Ve,it,st){for(Fe=it[st-1],Ae=0;Ae<Ve;++Ae)it[st+Ae]=Fe=$t(G[ee+Ae],Fe)}function qt(G,ee,Ae,Fe,Ve){var it;for(it=0;it<Ae;++it){var st=G[ee+it],lt=st>>8&255,He=16711935&(He=(He=16711935&st)+((lt<<16)+lt));Fe[Ve+it]=(4278255360&st)+He>>>0}}function fn(G,ee){ee.jd=G>>0&255,ee.hd=G>>8&255,ee.ud=G>>16&255}function Un(G,ee,Ae,Fe,Ve,it){var st;for(st=0;st<Fe;++st){var lt=ee[Ae+st],He=lt>>>8,St=lt,on=255&(on=(on=lt>>>16)+((G.jd<<24>>24)*(He<<24>>24)>>>5));St=255&(St=(St=St+((G.hd<<24>>24)*(He<<24>>24)>>>5))+((G.ud<<24>>24)*(on<<24>>24)>>>5)),Ve[it+st]=(4278255360&lt)+(on<<16)+St}}function Yt(G,ee,Ae,Fe,Ve){pe[ee]=function(it,st,lt,He,St,on,En,Tn,It){for(He=En;He<Tn;++He)for(En=0;En<It;++En)St[on++]=Ve(lt[Fe(it[st++])])},pe[G]=function(it,st,lt,He,St,on,En){var Tn=8>>it.b,It=it.Ea,er=it.K[0],zn=it.w;if(8>Tn)for(it=(1<<it.b)-1,zn=(1<<Tn)-1;st<lt;++st){var un,An=0;for(un=0;un<It;++un)un&it||(An=Fe(He[St++])),on[En++]=Ve(er[An&zn]),An>>=Tn}else pe["VP8LMapColor"+Ae](He,St,er,zn,on,En,st,lt,It)}}function cn(G,ee,Ae,Fe,Ve){for(Ae=ee+Ae;ee<Ae;){var it=G[ee++];Fe[Ve++]=it>>16&255,Fe[Ve++]=it>>8&255,Fe[Ve++]=it>>0&255}}function Ln(G,ee,Ae,Fe,Ve){for(Ae=ee+Ae;ee<Ae;){var it=G[ee++];Fe[Ve++]=it>>16&255,Fe[Ve++]=it>>8&255,Fe[Ve++]=it>>0&255,Fe[Ve++]=it>>24&255}}function Hn(G,ee,Ae,Fe,Ve){for(Ae=ee+Ae;ee<Ae;){var it=(st=G[ee++])>>16&240|st>>12&15,st=st>>0&240|st>>28&15;Fe[Ve++]=it,Fe[Ve++]=st}}function _r(G,ee,Ae,Fe,Ve){for(Ae=ee+Ae;ee<Ae;){var it=(st=G[ee++])>>16&248|st>>13&7,st=st>>5&224|st>>3&31;Fe[Ve++]=it,Fe[Ve++]=st}}function fr(G,ee,Ae,Fe,Ve){for(Ae=ee+Ae;ee<Ae;){var it=G[ee++];Fe[Ve++]=it>>0&255,Fe[Ve++]=it>>8&255,Fe[Ve++]=it>>16&255}}function xr(G,ee,Ae,Fe,Ve,it){if(it==0)for(Ae=ee+Ae;ee<Ae;)Me(Fe,((it=G[ee++])[0]>>24|it[1]>>8&65280|it[2]<<8&16711680|it[3]<<24)>>>0),Ve+=32;else r(Fe,Ve,G,ee,Ae)}function bi(G,ee){pe[ee][0]=pe[G+"0"],pe[ee][1]=pe[G+"1"],pe[ee][2]=pe[G+"2"],pe[ee][3]=pe[G+"3"],pe[ee][4]=pe[G+"4"],pe[ee][5]=pe[G+"5"],pe[ee][6]=pe[G+"6"],pe[ee][7]=pe[G+"7"],pe[ee][8]=pe[G+"8"],pe[ee][9]=pe[G+"9"],pe[ee][10]=pe[G+"10"],pe[ee][11]=pe[G+"11"],pe[ee][12]=pe[G+"12"],pe[ee][13]=pe[G+"13"],pe[ee][14]=pe[G+"0"],pe[ee][15]=pe[G+"0"]}function Vn(G){return G==Af||G==mf||G==up||G==gf}function Es(){this.eb=[],this.size=this.A=this.fb=0}function ki(){this.y=[],this.f=[],this.ea=[],this.F=[],this.Tc=this.Ed=this.Cd=this.Fd=this.lb=this.Db=this.Ab=this.fa=this.J=this.W=this.N=this.O=0}function hs(){this.Rd=this.height=this.width=this.S=0,this.f={},this.f.RGBA=new Es,this.f.kb=new ki,this.sd=null}function mi(){this.width=[0],this.height=[0],this.Pd=[0],this.Qd=[0],this.format=[0]}function br(){this.Id=this.fd=this.Md=this.hb=this.ib=this.da=this.bd=this.cd=this.j=this.v=this.Da=this.Sd=this.ob=0}function gr(G){return alert("todo:WebPSamplerProcessPlane"),G.T}function Ir(G,ee){var Ae=G.T,Fe=ee.ba.f.RGBA,Ve=Fe.eb,it=Fe.fb+G.ka*Fe.A,st=ul[ee.ba.S],lt=G.y,He=G.O,St=G.f,on=G.N,En=G.ea,Tn=G.W,It=ee.cc,er=ee.dc,zn=ee.Mc,un=ee.Nc,An=G.ka,Jn=G.ka+G.T,ur=G.U,Xn=ur+1>>1;for(An==0?st(lt,He,null,null,St,on,En,Tn,St,on,En,Tn,Ve,it,null,null,ur):(st(ee.ec,ee.fc,lt,He,It,er,zn,un,St,on,En,Tn,Ve,it-Fe.A,Ve,it,ur),++Ae);An+2<Jn;An+=2)It=St,er=on,zn=En,un=Tn,on+=G.Rc,Tn+=G.Rc,it+=2*Fe.A,st(lt,(He+=2*G.fa)-G.fa,lt,He,It,er,zn,un,St,on,En,Tn,Ve,it-Fe.A,Ve,it,ur);return He+=G.fa,G.j+Jn<G.o?(r(ee.ec,ee.fc,lt,He,ur),r(ee.cc,ee.dc,St,on,Xn),r(ee.Mc,ee.Nc,En,Tn,Xn),Ae--):1&Jn||st(lt,He,null,null,St,on,En,Tn,St,on,En,Tn,Ve,it+Fe.A,null,null,ur),Ae}function Kr(G,ee,Ae){var Fe=G.F,Ve=[G.J];if(Fe!=null){var it=G.U,st=ee.ba.S,lt=st==cp||st==up;ee=ee.ba.f.RGBA;var He=[0],St=G.ka;He[0]=G.T,G.Kb&&(St==0?--He[0]:(--St,Ve[0]-=G.width),G.j+G.ka+G.T==G.o&&(He[0]=G.o-G.j-St));var on=ee.eb;St=ee.fb+St*ee.A,G=lo(Fe,Ve[0],G.width,it,He,on,St+(lt?0:3),ee.A),t(Ae==He),G&&Vn(st)&&za(on,St,lt,it,He,ee.A)}return 0}function Mt(G){var ee=G.ma,Ae=ee.ba.S,Fe=11>Ae,Ve=Ae==Eh||Ae==qd||Ae==cp||Ae==eA||Ae==12||Vn(Ae);if(ee.memory=null,ee.Ib=null,ee.Jb=null,ee.Nd=null,!ed(ee.Oa,G,Ve?11:12))return 0;if(Ve&&Vn(Ae)&&dr(),G.da)alert("todo:use_scaling");else{if(Fe){if(ee.Ib=gr,G.Kb){if(Ae=G.U+1>>1,ee.memory=a(G.U+2*Ae),ee.memory==null)return 0;ee.ec=ee.memory,ee.fc=0,ee.cc=ee.ec,ee.dc=ee.fc+G.U,ee.Mc=ee.cc,ee.Nc=ee.dc+Ae,ee.Ib=Ir,dr()}}else alert("todo:EmitYUV");Ve&&(ee.Jb=Kr,Fe&&Sn())}if(Fe&&!_0){for(G=0;256>G;++G)id[G]=89858*(G-128)+sc>>kh,b0[G]=-22014*(G-128)+sc,w0[G]=-45773*(G-128),nA[G]=113618*(G-128)+sc>>kh;for(G=Ap;G<fm;++G)ee=76283*(G-16)+sc>>kh,rA[G-Ap]=xo(ee,255),uv[G-Ap]=xo(ee+8>>4,15);_0=1}return 1}function je(G){var ee=G.ma,Ae=G.U,Fe=G.T;return t(!(1&G.ka)),0>=Ae||0>=Fe?0:(Ae=ee.Ib(G,ee),ee.Jb!=null&&ee.Jb(G,ee,Ae),ee.Dc+=Ae,1)}function De(G){G.ma.memory=null}function ve(G,ee,Ae,Fe){return xe(G,8)!=47?0:(ee[0]=xe(G,14)+1,Ae[0]=xe(G,14)+1,Fe[0]=xe(G,1),xe(G,3)!=0?0:!G.h)}function Re(G,ee){if(4>G)return G+1;var Ae=G-2>>1;return(2+(1&G)<<Ae)+xe(ee,Ae)+1}function ze(G,ee){return 120<ee?ee-120:1<=(Ae=((Ae=cm[ee-1])>>4)*G+(8-(15&Ae)))?Ae:1;var Ae}function tt(G,ee,Ae){var Fe=me(Ae),Ve=G[ee+=255&Fe].g-8;return 0<Ve&&(ot(Ae,Ae.u+8),Fe=me(Ae),ee+=G[ee].value,ee+=Fe&(1<<Ve)-1),ot(Ae,Ae.u+G[ee].g),G[ee].value}function gt(G,ee,Ae){return Ae.g+=G.g,Ae.value+=G.value<<ee>>>0,t(8>=Ae.g),G.g}function pt(G,ee,Ae){var Fe=G.xc;return t((ee=Fe==0?0:G.vc[G.md*(Ae>>Fe)+(ee>>Fe)])<G.Wb),G.Ya[ee]}function Lt(G,ee,Ae,Fe){var Ve=G.ab,it=G.c*ee,st=G.C;ee=st+ee;var lt=Ae,He=Fe;for(Fe=G.Ta,Ae=G.Ua;0<Ve--;){var St=G.gc[Ve],on=st,En=ee,Tn=lt,It=He,er=(He=Fe,lt=Ae,St.Ea);switch(t(on<En),t(En<=St.nc),St.hc){case 2:lu(Tn,It,(En-on)*er,He,lt);break;case 0:var zn=on,un=En,An=He,Jn=lt,ur=(Nr=St).Ea;zn==0&&(Cu(Tn,It,null,null,1,An,Jn),wt(Tn,It+1,0,0,ur-1,An,Jn+1),It+=ur,Jn+=ur,++zn);for(var Xn=1<<Nr.b,Vr=Xn-1,wr=Vt(ur,Nr.b),ei=Nr.K,Nr=Nr.w+(zn>>Nr.b)*wr;zn<un;){var Ts=ei,rs=Nr,Oi=1;for(Su(Tn,It,An,Jn-ur,1,An,Jn);Oi<ur;){var Zi=(Oi&~Vr)+Xn;Zi>ur&&(Zi=ur),(0,Gd[Ts[rs++]>>8&15])(Tn,It+ +Oi,An,Jn+Oi-ur,Zi-Oi,An,Jn+Oi),Oi=Zi}It+=ur,Jn+=ur,++zn&Vr||(Nr+=wr)}En!=St.nc&&r(He,lt-er,He,lt+(En-on-1)*er,er);break;case 1:for(er=Tn,un=It,ur=(Tn=St.Ea)-(Jn=Tn&~(An=(It=1<<St.b)-1)),zn=Vt(Tn,St.b),Xn=St.K,St=St.w+(on>>St.b)*zn;on<En;){for(Vr=Xn,wr=St,ei=new Xt,Nr=un+Jn,Ts=un+Tn;un<Nr;)fn(Vr[wr++],ei),hf(ei,er,un,It,He,lt),un+=It,lt+=It;un<Ts&&(fn(Vr[wr++],ei),hf(ei,er,un,ur,He,lt),un+=ur,lt+=ur),++on&An||(St+=zn)}break;case 3:if(Tn==He&&It==lt&&0<St.b){for(un=He,Tn=er=lt+(En-on)*er-(Jn=(En-on)*Vt(St.Ea,St.b)),It=He,An=lt,zn=[],Jn=(ur=Jn)-1;0<=Jn;--Jn)zn[Jn]=It[An+Jn];for(Jn=ur-1;0<=Jn;--Jn)un[Tn+Jn]=zn[Jn];wl(St,on,En,He,er,He,lt)}else wl(St,on,En,Tn,It,He,lt)}lt=Fe,He=Ae}He!=Ae&&r(Fe,Ae,lt,He,it)}function jt(G,ee){var Ae=G.V,Fe=G.Ba+G.c*G.C,Ve=ee-G.C;if(t(ee<=G.l.o),t(16>=Ve),0<Ve){var it=G.l,st=G.Ta,lt=G.Ua,He=it.width;if(Lt(G,Ve,Ae,Fe),Ve=lt=[lt],t((Ae=G.C)<(Fe=ee)),t(it.v<it.va),Fe>it.o&&(Fe=it.o),Ae<it.j){var St=it.j-Ae;Ae=it.j,Ve[0]+=St*He}if(Ae>=Fe?Ae=0:(Ve[0]+=4*it.v,it.ka=Ae-it.j,it.U=it.va-it.v,it.T=Fe-Ae,Ae=1),Ae){if(lt=lt[0],11>(Ae=G.ca).S){var on=Ae.f.RGBA,En=(Fe=Ae.S,Ve=it.U,it=it.T,St=on.eb,on.A),Tn=it;for(on=on.fb+G.Ma*on.A;0<Tn--;){var It=st,er=lt,zn=Ve,un=St,An=on;switch(Fe){case Jp:Ol(It,er,zn,un,An);break;case Eh:Dl(It,er,zn,un,An);break;case Af:Dl(It,er,zn,un,An),za(un,An,0,zn,1,0);break;case Th:aa(It,er,zn,un,An);break;case qd:xr(It,er,zn,un,An,1);break;case mf:xr(It,er,zn,un,An,1),za(un,An,0,zn,1,0);break;case cp:xr(It,er,zn,un,An,0);break;case up:xr(It,er,zn,un,An,0),za(un,An,1,zn,1,0);break;case eA:Kd(It,er,zn,un,An);break;case gf:Kd(It,er,zn,un,An),As(un,An,zn,1,0);break;case lm:td(It,er,zn,un,An);break;default:t(0)}lt+=He,on+=En}G.Ma+=it}else alert("todo:EmitRescaledRowsYUVA");t(G.Ma<=Ae.height)}}G.C=ee,t(G.C<=G.i)}function Nt(G){var ee;if(0<G.ua)return 0;for(ee=0;ee<G.Wb;++ee){var Ae=G.Ya[ee].G,Fe=G.Ya[ee].H;if(0<Ae[1][Fe[1]+0].g||0<Ae[2][Fe[2]+0].g||0<Ae[3][Fe[3]+0].g)return 0}return 1}function rn(G,ee,Ae,Fe,Ve,it){if(G.Z!=0){var st=G.qd,lt=G.rd;for(t(Qc[G.Z]!=null);ee<Ae;++ee)Qc[G.Z](st,lt,Fe,Ve,Fe,Ve,it),st=Fe,lt=Ve,Ve+=it;G.qd=st,G.rd=lt}}function _n(G,ee){var Ae=G.l.ma,Fe=Ae.Z==0||Ae.Z==1?G.l.j:G.C;if(Fe=G.C<Fe?Fe:G.C,t(ee<=G.l.o),ee>Fe){var Ve=G.l.width,it=Ae.ca,st=Ae.tb+Ve*Fe,lt=G.V,He=G.Ba+G.c*Fe,St=G.gc;t(G.ab==1),t(St[0].hc==3),Sc(St[0],Fe,ee,lt,He,it,st),rn(Ae,Fe,ee,it,st,Ve)}G.C=G.Ma=ee}function Pn(G,ee,Ae,Fe,Ve,it,st){var lt=G.$/Fe,He=G.$%Fe,St=G.m,on=G.s,En=Ae+G.$,Tn=En;Ve=Ae+Fe*Ve;var It=Ae+Fe*it,er=280+on.ua,zn=G.Pb?lt:16777216,un=0<on.ua?on.Wa:null,An=on.wc,Jn=En<It?pt(on,He,lt):null;t(G.C<it),t(It<=Ve);var ur=!1;e:for(;;){for(;ur||En<It;){var Xn=0;if(lt>=zn){var Vr=En-Ae;t((zn=G).Pb),zn.wd=zn.m,zn.xd=Vr,0<zn.s.ua&&hn(zn.s.Wa,zn.s.vb),zn=lt+um}if(He&An||(Jn=pt(on,He,lt)),t(Jn!=null),Jn.Qb&&(ee[En]=Jn.qb,ur=!0),!ur)if(vt(St),Jn.jc){Xn=St,Vr=ee;var wr=En,ei=Jn.pd[me(Xn)&ao-1];t(Jn.jc),256>ei.g?(ot(Xn,Xn.u+ei.g),Vr[wr]=ei.value,Xn=0):(ot(Xn,Xn.u+ei.g-256),t(256<=ei.value),Xn=ei.value),Xn==0&&(ur=!0)}else Xn=tt(Jn.G[0],Jn.H[0],St);if(St.h)break;if(ur||256>Xn){if(!ur)if(Jn.nd)ee[En]=(Jn.qb|Xn<<8)>>>0;else{if(vt(St),ur=tt(Jn.G[1],Jn.H[1],St),vt(St),Vr=tt(Jn.G[2],Jn.H[2],St),wr=tt(Jn.G[3],Jn.H[3],St),St.h)break;ee[En]=(wr<<24|ur<<16|Xn<<8|Vr)>>>0}if(ur=!1,++En,++He>=Fe&&(He=0,++lt,st!=null&&lt<=it&&!(lt%16)&&st(G,lt),un!=null))for(;Tn<En;)Xn=ee[Tn++],un.X[(506832829*Xn&4294967295)>>>un.Mb]=Xn}else if(280>Xn){if(Xn=Re(Xn-256,St),Vr=tt(Jn.G[4],Jn.H[4],St),vt(St),Vr=ze(Fe,Vr=Re(Vr,St)),St.h)break;if(En-Ae<Vr||Ve-En<Xn)break e;for(wr=0;wr<Xn;++wr)ee[En+wr]=ee[En+wr-Vr];for(En+=Xn,He+=Xn;He>=Fe;)He-=Fe,++lt,st!=null&&lt<=it&&!(lt%16)&&st(G,lt);if(t(En<=Ve),He&An&&(Jn=pt(on,He,lt)),un!=null)for(;Tn<En;)Xn=ee[Tn++],un.X[(506832829*Xn&4294967295)>>>un.Mb]=Xn}else{if(!(Xn<er))break e;for(ur=Xn-280,t(un!=null);Tn<En;)Xn=ee[Tn++],un.X[(506832829*Xn&4294967295)>>>un.Mb]=Xn;Xn=En,t(!(ur>>>(Vr=un).Xa)),ee[Xn]=Vr.X[ur],ur=!0}ur||t(St.h==Ze(St))}if(G.Pb&&St.h&&En<Ve)t(G.m.h),G.a=5,G.m=G.wd,G.$=G.xd,0<G.s.ua&&hn(G.s.vb,G.s.Wa);else{if(St.h)break e;st!=null&&st(G,lt>it?it:lt),G.a=0,G.$=En-Ae}return 1}return G.a=3,0}function sr(G){t(G!=null),G.vc=null,G.yc=null,G.Ya=null;var ee=G.Wa;ee!=null&&(ee.X=null),G.vb=null,t(G!=null)}function Cr(){var G=new zd;return G==null?null:(G.a=0,G.xb=jh,bi("Predictor","VP8LPredictors"),bi("Predictor","VP8LPredictors_C"),bi("PredictorAdd","VP8LPredictorsAdd"),bi("PredictorAdd","VP8LPredictorsAdd_C"),lu=qt,hf=Un,Ol=cn,Dl=Ln,Kd=Hn,td=_r,aa=fr,pe.VP8LMapColor32b=Uc,pe.VP8LMapColor8b=Ua,G)}function Ar(G,ee,Ae,Fe,Ve){var it=1,st=[G],lt=[ee],He=Fe.m,St=Fe.s,on=null,En=0;e:for(;;){if(Ae)for(;it&&xe(He,1);){var Tn=st,It=lt,er=Fe,zn=1,un=er.m,An=er.gc[er.ab],Jn=xe(un,2);if(er.Oc&1<<Jn)it=0;else{switch(er.Oc|=1<<Jn,An.hc=Jn,An.Ea=Tn[0],An.nc=It[0],An.K=[null],++er.ab,t(4>=er.ab),Jn){case 0:case 1:An.b=xe(un,3)+2,zn=Ar(Vt(An.Ea,An.b),Vt(An.nc,An.b),0,er,An.K),An.K=An.K[0];break;case 3:var ur,Xn=xe(un,8)+1,Vr=16<Xn?0:4<Xn?1:2<Xn?2:3;if(Tn[0]=Vt(An.Ea,Vr),An.b=Vr,ur=zn=Ar(Xn,1,0,er,An.K)){var wr,ei=Xn,Nr=An,Ts=1<<(8>>Nr.b),rs=a(Ts);if(rs==null)ur=0;else{var Oi=Nr.K[0],Zi=Nr.w;for(rs[0]=Nr.K[0][0],wr=1;wr<1*ei;++wr)rs[wr]=$t(Oi[Zi+wr],rs[wr-1]);for(;wr<4*Ts;++wr)rs[wr]=0;Nr.K[0]=null,Nr.K[0]=rs,ur=1}}zn=ur;break;case 2:break;default:t(0)}it=zn}}if(st=st[0],lt=lt[0],it&&xe(He,1)&&!(it=1<=(En=xe(He,4))&&11>=En)){Fe.a=3;break e}var Us;if(Us=it)t:{var Js,Di,_a,wo=Fe,qr=st,Ia=lt,Is=En,bo=Ae,Ul=wo.m,ca=wo.s,ra=[null],wa=1,eo=0,Mn=mg[Is];n:for(;;){if(bo&&xe(Ul,1)){var Gn=xe(Ul,3)+2,Ic=Vt(qr,Gn),ks=Vt(Ia,Gn),en=Ic*ks;if(!Ar(Ic,ks,0,wo,ra))break n;for(ra=ra[0],ca.xc=Gn,Js=0;Js<en;++Js){var Zd=ra[Js]>>8&65535;ra[Js]=Zd,Zd>=wa&&(wa=Zd+1)}}if(Ul.h)break n;for(Di=0;5>Di;++Di){var fo=ic[Di];!Di&&0<Is&&(fo+=1<<Is),eo<fo&&(eo=fo)}var gp=c(wa*Mn,be),yg=wa,vg=c(yg,Ee);if(vg==null)var Xd=null;else t(65536>=yg),Xd=vg;var sd=a(eo);if(Xd==null||sd==null||gp==null){wo.a=1;break n}var mm=gp;for(Js=_a=0;Js<wa;++Js){var dl=Xd[Js],Yd=dl.G,od=dl.H,bf=0,sA=1,gm=0;for(Di=0;5>Di;++Di){fo=ic[Di],Yd[Di]=mm,od[Di]=_a,!Di&&0<Is&&(fo+=1<<Is);i:{var zl,Cf=fo,ja=wo,Sf=sd,C0=mm,Ql=_a,yp=0,uu=ja.m,js=xe(uu,1);if(s(Sf,0,0,Cf),js){var $i=xe(uu,1)+1,oA=xe(uu,1),Iu=xe(uu,oA==0?1:8);Sf[Iu]=1,$i==2&&(Sf[Iu=xe(uu,8)]=1);var Jd=1}else{var eh=a(19),jc=xe(uu,4)+4;if(19<jc){ja.a=3;var Lh=0;break i}for(zl=0;zl<jc;++zl)eh[Va[zl]]=xe(uu,3);var ju=void 0,Fc=void 0,Ui=ja,ym=eh,Bf=Cf,Mh=Sf,vp=0,ad=Ui.m,th=8,oc=c(128,be);r:for(;he(oc,0,7,ym,19);){if(xe(ad,1)){var aA=2+2*xe(ad,3);if((ju=2+xe(ad,aA))>Bf)break r}else ju=Bf;for(Fc=0;Fc<Bf&&ju--;){vt(ad);var Ef=oc[0+(127&me(ad))];ot(ad,ad.u+Ef.g);var ld=Ef.value;if(16>ld)Mh[Fc++]=ld,ld!=0&&(th=ld);else{var $a=ld==16,xp=ld-16,Hl=x0[xp],Fa=xe(ad,dp[xp])+Hl;if(Fc+Fa>Bf)break r;for(var cd=$a?th:0;0<Fa--;)Mh[Fc++]=cd}}vp=1;break r}vp||(Ui.a=3),Jd=vp}(Jd=Jd&&!uu.h)&&(yp=he(C0,Ql,8,Sf,Cf)),Jd&&yp!=0?Lh=yp:(ja.a=3,Lh=0)}if(Lh==0)break n;if(sA&&xa[Di]==1&&(sA=mm[_a].g==0),bf+=mm[_a].g,_a+=Lh,3>=Di){var Nh,Rh=sd[0];for(Nh=1;Nh<fo;++Nh)sd[Nh]>Rh&&(Rh=sd[Nh]);gm+=Rh}}if(dl.nd=sA,dl.Qb=0,sA&&(dl.qb=(Yd[3][od[3]+0].value<<24|Yd[1][od[1]+0].value<<16|Yd[2][od[2]+0].value)>>>0,bf==0&&256>Yd[0][od[0]+0].value&&(dl.Qb=1,dl.qb+=Yd[0][od[0]+0].value<<8)),dl.jc=!dl.Qb&&6>gm,dl.jc){var Tf,Ga=dl;for(Tf=0;Tf<ao;++Tf){var du=Tf,hu=Ga.pd[du],nh=Ga.G[0][Ga.H[0]+du];256<=nh.value?(hu.g=nh.g+256,hu.value=nh.value):(hu.g=0,hu.value=0,du>>=gt(nh,8,hu),du>>=gt(Ga.G[1][Ga.H[1]+du],16,hu),du>>=gt(Ga.G[2][Ga.H[2]+du],0,hu),gt(Ga.G[3][Ga.H[3]+du],24,hu))}}}ca.vc=ra,ca.Wb=wa,ca.Ya=Xd,ca.yc=gp,Us=1;break t}Us=0}if(!(it=Us)){Fe.a=3;break e}if(0<En){if(St.ua=1<<En,!Dt(St.Wa,En)){Fe.a=1,it=0;break e}}else St.ua=0;var Vc=Fe,lA=st,$c=lt,cA=Vc.s,uA=cA.xc;if(Vc.c=lA,Vc.i=$c,cA.md=Vt(lA,uA),cA.wc=uA==0?-1:(1<<uA)-1,Ae){Fe.xb=gg;break e}if((on=a(st*lt))==null){Fe.a=1,it=0;break e}it=(it=Pn(Fe,on,0,st,lt,lt,null))&&!He.h;break e}return it?(Ve!=null?Ve[0]=on:(t(on==null),t(Ae)),Fe.$=0,Ae||sr(St)):sr(St),it}function pr(G,ee){var Ae=G.c*G.i,Fe=Ae+ee+16*ee;return t(G.c<=ee),G.V=a(Fe),G.V==null?(G.Ta=null,G.Ua=0,G.a=1,0):(G.Ta=G.V,G.Ua=G.Ba+Ae+ee,1)}function Wr(G,ee){var Ae=G.C,Fe=ee-Ae,Ve=G.V,it=G.Ba+G.c*Ae;for(t(ee<=G.l.o);0<Fe;){var st=16<Fe?16:Fe,lt=G.l.ma,He=G.l.width,St=He*st,on=lt.ca,En=lt.tb+He*Ae,Tn=G.Ta,It=G.Ua;Lt(G,st,Ve,it),Jo(Tn,It,on,En,St),rn(lt,Ae,Ae+st,on,En,He),Fe-=st,Ve+=st*G.c,Ae+=st}t(Ae==ee),G.C=G.Ma=ee}function vi(){this.ub=this.yd=this.td=this.Rb=0}function ti(){this.Kd=this.Ld=this.Ud=this.Td=this.i=this.c=0}function Ai(){this.Fb=this.Bb=this.Cb=0,this.Zb=a(4),this.Lb=a(4)}function Ci(){this.Yb=function(){var G=[];return function ee(Ae,Fe,Ve){for(var it=Ve[Fe],st=0;st<it&&(Ae.push(Ve.length>Fe+1?[]:0),!(Ve.length<Fe+1));st++)ee(Ae[st],Fe+1,Ve)}(G,0,[3,11]),G}()}function Vs(){this.jb=a(3),this.Wc=i([4,8],Ci),this.Xc=i([4,17],Ci)}function Zo(){this.Pc=this.wb=this.Tb=this.zd=0,this.vd=new a(4),this.od=new a(4)}function Rs(){this.ld=this.La=this.dd=this.tc=0}function Eo(){this.Na=this.la=0}function Xl(){this.Sc=[0,0],this.Eb=[0,0],this.Qc=[0,0],this.ia=this.lc=0}function Li(){this.ad=a(384),this.Za=0,this.Ob=a(16),this.$b=this.Ad=this.ia=this.Gc=this.Hc=this.Dd=0}function ho(){this.uc=this.M=this.Nb=0,this.wa=Array(new Rs),this.Y=0,this.ya=Array(new Li),this.aa=0,this.l=new so}function xc(){this.y=a(16),this.f=a(8),this.ea=a(8)}function Yl(){this.cb=this.a=0,this.sc="",this.m=new at,this.Od=new vi,this.Kc=new ti,this.ed=new Zo,this.Qa=new Ai,this.Ic=this.$c=this.Aa=0,this.D=new ho,this.Xb=this.Va=this.Hb=this.zb=this.yb=this.Ub=this.za=0,this.Jc=c(8,at),this.ia=0,this.pb=c(4,Xl),this.Pa=new Vs,this.Bd=this.kc=0,this.Ac=[],this.Bc=0,this.zc=[0,0,0,0],this.Gd=Array(new xc),this.Hd=0,this.rb=Array(new Eo),this.sb=0,this.wa=Array(new Rs),this.Y=0,this.oc=[],this.pc=0,this.sa=[],this.ta=0,this.qa=[],this.ra=0,this.Ha=[],this.B=this.R=this.Ia=0,this.Ec=[],this.M=this.ja=this.Vb=this.Fc=0,this.ya=Array(new Li),this.L=this.aa=0,this.gd=i([4,2],Rs),this.ga=null,this.Fa=[],this.Cc=this.qc=this.P=0,this.Gb=[],this.Uc=0,this.mb=[],this.nb=0,this.rc=[],this.Ga=this.Vc=0}function so(){this.T=this.U=this.ka=this.height=this.width=0,this.y=[],this.f=[],this.ea=[],this.Rc=this.fa=this.W=this.N=this.O=0,this.ma="void",this.put="VP8IoPutHook",this.ac="VP8IoSetupHook",this.bc="VP8IoTeardownHook",this.ha=this.Kb=0,this.data=[],this.hb=this.ib=this.da=this.o=this.j=this.va=this.v=this.Da=this.ob=this.w=0,this.F=[],this.J=0}function Jl(){var G=new Yl;return G!=null&&(G.a=0,G.sc="OK",G.cb=0,G.Xb=0,Bu||(Bu=af)),G}function Os(G,ee,Ae){return G.a==0&&(G.a=ee,G.sc=Ae,G.cb=0),0}function Dc(G,ee,Ae){return 3<=Ae&&G[ee+0]==157&&G[ee+1]==1&&G[ee+2]==42}function of(G,ee){if(G==null)return 0;if(G.a=0,G.sc="OK",ee==null)return Os(G,2,"null VP8Io passed to VP8GetHeaders()");var Ae=ee.data,Fe=ee.w,Ve=ee.ha;if(4>Ve)return Os(G,7,"Truncated header.");var it=Ae[Fe+0]|Ae[Fe+1]<<8|Ae[Fe+2]<<16,st=G.Od;if(st.Rb=!(1&it),st.td=it>>1&7,st.yd=it>>4&1,st.ub=it>>5,3<st.td)return Os(G,3,"Incorrect keyframe parameters.");if(!st.yd)return Os(G,4,"Frame not displayable.");Fe+=3,Ve-=3;var lt=G.Kc;if(st.Rb){if(7>Ve)return Os(G,7,"cannot parse picture header");if(!Dc(Ae,Fe,Ve))return Os(G,3,"Bad code word");lt.c=16383&(Ae[Fe+4]<<8|Ae[Fe+3]),lt.Td=Ae[Fe+4]>>6,lt.i=16383&(Ae[Fe+6]<<8|Ae[Fe+5]),lt.Ud=Ae[Fe+6]>>6,Fe+=7,Ve-=7,G.za=lt.c+15>>4,G.Ub=lt.i+15>>4,ee.width=lt.c,ee.height=lt.i,ee.Da=0,ee.j=0,ee.v=0,ee.va=ee.width,ee.o=ee.height,ee.da=0,ee.ib=ee.width,ee.hb=ee.height,ee.U=ee.width,ee.T=ee.height,s((it=G.Pa).jb,0,255,it.jb.length),t((it=G.Qa)!=null),it.Cb=0,it.Bb=0,it.Fb=1,s(it.Zb,0,0,it.Zb.length),s(it.Lb,0,0,it.Lb)}if(st.ub>Ve)return Os(G,7,"bad partition length");Ne(it=G.m,Ae,Fe,st.ub),Fe+=st.ub,Ve-=st.ub,st.Rb&&(lt.Ld=Ot(it),lt.Kd=Ot(it)),lt=G.Qa;var He,St=G.Pa;if(t(it!=null),t(lt!=null),lt.Cb=Ot(it),lt.Cb){if(lt.Bb=Ot(it),Ot(it)){for(lt.Fb=Ot(it),He=0;4>He;++He)lt.Zb[He]=Ot(it)?Je(it,7):0;for(He=0;4>He;++He)lt.Lb[He]=Ot(it)?Je(it,6):0}if(lt.Bb)for(He=0;3>He;++He)St.jb[He]=Ot(it)?Ge(it,8):255}else lt.Bb=0;if(it.Ka)return Os(G,3,"cannot parse segment header");if((lt=G.ed).zd=Ot(it),lt.Tb=Ge(it,6),lt.wb=Ge(it,3),lt.Pc=Ot(it),lt.Pc&&Ot(it)){for(St=0;4>St;++St)Ot(it)&&(lt.vd[St]=Je(it,6));for(St=0;4>St;++St)Ot(it)&&(lt.od[St]=Je(it,6))}if(G.L=lt.Tb==0?0:lt.zd?1:2,it.Ka)return Os(G,3,"cannot parse filter header");var on=Ve;if(Ve=He=Fe,Fe=He+on,lt=on,G.Xb=(1<<Ge(G.m,2))-1,on<3*(St=G.Xb))Ae=7;else{for(He+=3*St,lt-=3*St,on=0;on<St;++on){var En=Ae[Ve+0]|Ae[Ve+1]<<8|Ae[Ve+2]<<16;En>lt&&(En=lt),Ne(G.Jc[+on],Ae,He,En),He+=En,lt-=En,Ve+=3}Ne(G.Jc[+St],Ae,He,lt),Ae=He<Fe?0:5}if(Ae!=0)return Os(G,Ae,"cannot parse partitions");for(Ae=Ge(He=G.m,7),Ve=Ot(He)?Je(He,4):0,Fe=Ot(He)?Je(He,4):0,lt=Ot(He)?Je(He,4):0,St=Ot(He)?Je(He,4):0,He=Ot(He)?Je(He,4):0,on=G.Qa,En=0;4>En;++En){if(on.Cb){var Tn=on.Zb[En];on.Fb||(Tn+=Ae)}else{if(0<En){G.pb[En]=G.pb[0];continue}Tn=Ae}var It=G.pb[En];It.Sc[0]=hp[xo(Tn+Ve,127)],It.Sc[1]=yf[xo(Tn+0,127)],It.Eb[0]=2*hp[xo(Tn+Fe,127)],It.Eb[1]=101581*yf[xo(Tn+lt,127)]>>16,8>It.Eb[1]&&(It.Eb[1]=8),It.Qc[0]=hp[xo(Tn+St,117)],It.Qc[1]=yf[xo(Tn+He,127)],It.lc=Tn+He}if(!st.Rb)return Os(G,4,"Not a key frame.");for(Ot(it),st=G.Pa,Ae=0;4>Ae;++Ae){for(Ve=0;8>Ve;++Ve)for(Fe=0;3>Fe;++Fe)for(lt=0;11>lt;++lt)St=kt(it,pp[Ae][Ve][Fe][lt])?Ge(it,8):rd[Ae][Ve][Fe][lt],st.Wc[Ae][Ve].Yb[Fe][lt]=St;for(Ve=0;17>Ve;++Ve)st.Xc[Ae][Ve]=st.Wc[Ae][cv[Ve]]}return G.kc=Ot(it),G.kc&&(G.Bd=Ge(it,8)),G.cb=1}function af(G,ee,Ae,Fe,Ve,it,st){var lt=ee[Ve].Yb[Ae];for(Ae=0;16>Ve;++Ve){if(!kt(G,lt[Ae+0]))return Ve;for(;!kt(G,lt[Ae+1]);)if(lt=ee[++Ve].Yb[0],Ae=0,Ve==16)return 16;var He=ee[Ve+1].Yb;if(kt(G,lt[Ae+2])){var St=G,on=0;if(kt(St,(Tn=lt)[(En=Ae)+3]))if(kt(St,Tn[En+6])){for(lt=0,En=2*(on=kt(St,Tn[En+8]))+(Tn=kt(St,Tn[En+9+on])),on=0,Tn=fp[En];Tn[lt];++lt)on+=on+kt(St,Tn[lt]);on+=3+(8<<En)}else kt(St,Tn[En+7])?(on=7+2*kt(St,165),on+=kt(St,145)):on=5+kt(St,159);else on=kt(St,Tn[En+4])?3+kt(St,Tn[En+5]):2;lt=He[2]}else on=1,lt=He[1];He=st+vf[Ve],0>(St=G).b&&Qt(St);var En,Tn=St.b,It=(En=St.Ca>>1)-(St.I>>Tn)>>31;--St.b,St.Ca+=It,St.Ca|=1,St.I-=(En+1&It)<<Tn,it[He]=((on^It)-It)*Fe[(0<Ve)+0]}return 16}function wh(G){var ee=G.rb[G.sb-1];ee.la=0,ee.Na=0,s(G.zc,0,0,G.zc.length),G.ja=0}function bh(G,ee){if(G==null)return 0;if(ee==null)return Os(G,2,"NULL VP8Io parameter in VP8Decode().");if(!G.cb&&!of(G,ee))return 0;if(t(G.cb),ee.ac==null||ee.ac(ee)){ee.ob&&(G.L=0);var Ae=mp[G.L];if(G.L==2?(G.yb=0,G.zb=0):(G.yb=ee.v-Ae>>4,G.zb=ee.j-Ae>>4,0>G.yb&&(G.yb=0),0>G.zb&&(G.zb=0)),G.Va=ee.o+15+Ae>>4,G.Hb=ee.va+15+Ae>>4,G.Hb>G.za&&(G.Hb=G.za),G.Va>G.Ub&&(G.Va=G.Ub),0<G.L){var Fe=G.ed;for(Ae=0;4>Ae;++Ae){var Ve;if(G.Qa.Cb){var it=G.Qa.Lb[Ae];G.Qa.Fb||(it+=Fe.Tb)}else it=Fe.Tb;for(Ve=0;1>=Ve;++Ve){var st=G.gd[Ae][Ve],lt=it;if(Fe.Pc&&(lt+=Fe.vd[0],Ve&&(lt+=Fe.od[0])),0<(lt=0>lt?0:63<lt?63:lt)){var He=lt;0<Fe.wb&&(He=4<Fe.wb?He>>2:He>>1)>9-Fe.wb&&(He=9-Fe.wb),1>He&&(He=1),st.dd=He,st.tc=2*lt+He,st.ld=40<=lt?2:15<=lt?1:0}else st.tc=0;st.La=Ve}}}Ae=0}else Os(G,6,"Frame setup failed"),Ae=G.a;if(Ae=Ae==0){if(Ae){G.$c=0,0<G.Aa||(G.Ic=Am);e:{Ae=G.Ic,Fe=4*(He=G.za);var St=32*He,on=He+1,En=0<G.L?He*(0<G.Aa?2:1):0,Tn=(G.Aa==2?2:1)*He;if((st=Fe+832+(Ve=3*(16*Ae+mp[G.L])/2*St)+(it=G.Fa!=null&&0<G.Fa.length?G.Kc.c*G.Kc.i:0))!=st)Ae=0;else{if(st>G.Vb){if(G.Vb=0,G.Ec=a(st),G.Fc=0,G.Ec==null){Ae=Os(G,1,"no memory during frame initialization.");break e}G.Vb=st}st=G.Ec,lt=G.Fc,G.Ac=st,G.Bc=lt,lt+=Fe,G.Gd=c(St,xc),G.Hd=0,G.rb=c(on+1,Eo),G.sb=1,G.wa=En?c(En,Rs):null,G.Y=0,G.D.Nb=0,G.D.wa=G.wa,G.D.Y=G.Y,0<G.Aa&&(G.D.Y+=He),t(!0),G.oc=st,G.pc=lt,lt+=832,G.ya=c(Tn,Li),G.aa=0,G.D.ya=G.ya,G.D.aa=G.aa,G.Aa==2&&(G.D.aa+=He),G.R=16*He,G.B=8*He,He=(St=mp[G.L])*G.R,St=St/2*G.B,G.sa=st,G.ta=lt+He,G.qa=G.sa,G.ra=G.ta+16*Ae*G.R+St,G.Ha=G.qa,G.Ia=G.ra+8*Ae*G.B+St,G.$c=0,lt+=Ve,G.mb=it?st:null,G.nb=it?lt:null,t(lt+it<=G.Fc+G.Vb),wh(G),s(G.Ac,G.Bc,0,Fe),Ae=1}}if(Ae){if(ee.ka=0,ee.y=G.sa,ee.O=G.ta,ee.f=G.qa,ee.N=G.ra,ee.ea=G.Ha,ee.Vd=G.Ia,ee.fa=G.R,ee.Rc=G.B,ee.F=null,ee.J=0,!lp){for(Ae=-255;255>=Ae;++Ae)va[255+Ae]=0>Ae?-Ae:Ae;for(Ae=-1020;1020>=Ae;++Ae)Qa[1020+Ae]=-128>Ae?-128:127<Ae?127:Ae;for(Ae=-112;112>=Ae;++Ae)oi[112+Ae]=-16>Ae?-16:15<Ae?15:Ae;for(Ae=-255;510>=Ae;++Ae)zc[255+Ae]=0>Ae?0:255<Ae?255:Ae;lp=1}yn=su,$n=ec,Hr=iu,ci=lf,Bi=qu,jn=Ll,_o=xs,Ys=ll,Wd=Sh,nd=_l,la=tc,Bc=oo,Ec=Qo,Tc=Ud,cu=Xo,bl=yo,fs=ma,cl=Yo,Eu[0]=ou,Eu[1]=cf,Eu[2]=op,Eu[3]=_c,Eu[4]=Od,Eu[5]=Pi,Eu[6]=cr,Eu[7]=Ii,Eu[8]=Dd,Eu[9]=Nl,Ih[0]=ji,Ih[1]=Ch,Ih[2]=Aa,Ih[3]=Zu,Ih[4]=Ml,Ih[5]=Ur,Ih[6]=sp,Tu[0]=wc,Tu[1]=ip,Tu[2]=Si,Tu[3]=$s,Tu[4]=ds,Tu[5]=Da,Tu[6]=ap,Ae=1}else Ae=0}Ae&&(Ae=function(It,er){for(It.M=0;It.M<It.Va;++It.M){var zn,un=It.Jc[It.M&It.Xb],An=It.m,Jn=It;for(zn=0;zn<Jn.za;++zn){var ur=An,Xn=Jn,Vr=Xn.Ac,wr=Xn.Bc+4*zn,ei=Xn.zc,Nr=Xn.ya[Xn.aa+zn];if(Xn.Qa.Bb?Nr.$b=kt(ur,Xn.Pa.jb[0])?2+kt(ur,Xn.Pa.jb[2]):kt(ur,Xn.Pa.jb[1]):Nr.$b=0,Xn.kc&&(Nr.Ad=kt(ur,Xn.Bd)),Nr.Za=!kt(ur,145)+0,Nr.Za){var Ts=Nr.Ob,rs=0;for(Xn=0;4>Xn;++Xn){var Oi,Zi=ei[0+Xn];for(Oi=0;4>Oi;++Oi){Zi=dm[Vr[wr+Oi]][Zi];for(var Us=xf[kt(ur,Zi[0])];0<Us;)Us=xf[2*Us+kt(ur,Zi[Us])];Zi=-Us,Vr[wr+Oi]=Zi}r(Ts,rs,Vr,wr,4),rs+=4,ei[0+Xn]=Zi}}else Zi=kt(ur,156)?kt(ur,128)?1:3:kt(ur,163)?2:0,Nr.Ob[0]=Zi,s(Vr,wr,Zi,4),s(ei,0,Zi,4);Nr.Dd=kt(ur,142)?kt(ur,114)?kt(ur,183)?1:3:2:0}if(Jn.m.Ka)return Os(It,7,"Premature end-of-partition0 encountered.");for(;It.ja<It.za;++It.ja){if(Jn=un,ur=(An=It).rb[An.sb-1],Vr=An.rb[An.sb+An.ja],zn=An.ya[An.aa+An.ja],wr=An.kc?zn.Ad:0)ur.la=Vr.la=0,zn.Za||(ur.Na=Vr.Na=0),zn.Hc=0,zn.Gc=0,zn.ia=0;else{var Js,Di;if(ur=Vr,Vr=Jn,wr=An.Pa.Xc,ei=An.ya[An.aa+An.ja],Nr=An.pb[ei.$b],Xn=ei.ad,Ts=0,rs=An.rb[An.sb-1],Zi=Oi=0,s(Xn,Ts,0,384),ei.Za)var _a=0,wo=wr[3];else{Us=a(16);var qr=ur.Na+rs.Na;if(qr=Bu(Vr,wr[1],qr,Nr.Eb,0,Us,0),ur.Na=rs.Na=(0<qr)+0,1<qr)yn(Us,0,Xn,Ts);else{var Ia=Us[0]+3>>3;for(Us=0;256>Us;Us+=16)Xn[Ts+Us]=Ia}_a=1,wo=wr[0]}var Is=15&ur.la,bo=15&rs.la;for(Us=0;4>Us;++Us){var Ul=1&bo;for(Ia=Di=0;4>Ia;++Ia)Is=Is>>1|(Ul=(qr=Bu(Vr,wo,qr=Ul+(1&Is),Nr.Sc,_a,Xn,Ts))>_a)<<7,Di=Di<<2|(3<qr?3:1<qr?2:Xn[Ts+0]!=0),Ts+=16;Is>>=4,bo=bo>>1|Ul<<7,Oi=(Oi<<8|Di)>>>0}for(wo=Is,_a=bo>>4,Js=0;4>Js;Js+=2){for(Di=0,Is=ur.la>>4+Js,bo=rs.la>>4+Js,Us=0;2>Us;++Us){for(Ul=1&bo,Ia=0;2>Ia;++Ia)qr=Ul+(1&Is),Is=Is>>1|(Ul=0<(qr=Bu(Vr,wr[2],qr,Nr.Qc,0,Xn,Ts)))<<3,Di=Di<<2|(3<qr?3:1<qr?2:Xn[Ts+0]!=0),Ts+=16;Is>>=2,bo=bo>>1|Ul<<5}Zi|=Di<<4*Js,wo|=Is<<4<<Js,_a|=(240&bo)<<Js}ur.la=wo,rs.la=_a,ei.Hc=Oi,ei.Gc=Zi,ei.ia=43690&Zi?0:Nr.ia,wr=!(Oi|Zi)}if(0<An.L&&(An.wa[An.Y+An.ja]=An.gd[zn.$b][zn.Za],An.wa[An.Y+An.ja].La|=!wr),Jn.Ka)return Os(It,7,"Premature end-of-file encountered.")}if(wh(It),An=er,Jn=1,zn=(un=It).D,ur=0<un.L&&un.M>=un.zb&&un.M<=un.Va,un.Aa==0)e:{if(zn.M=un.M,zn.uc=ur,Hd(un,zn),Jn=1,zn=(Di=un.D).Nb,ur=(Zi=mp[un.L])*un.R,Vr=Zi/2*un.B,Us=16*zn*un.R,Ia=8*zn*un.B,wr=un.sa,ei=un.ta-ur+Us,Nr=un.qa,Xn=un.ra-Vr+Ia,Ts=un.Ha,rs=un.Ia-Vr+Ia,bo=(Is=Di.M)==0,Oi=Is>=un.Va-1,un.Aa==2&&Hd(un,Di),Di.uc)for(Ul=(qr=un).D.M,t(qr.D.uc),Di=qr.yb;Di<qr.Hb;++Di){_a=Di,wo=Ul;var ca=(ra=(fo=qr).D).Nb;Js=fo.R;var ra=ra.wa[ra.Y+_a],wa=fo.sa,eo=fo.ta+16*ca*Js+16*_a,Mn=ra.dd,Gn=ra.tc;if(Gn!=0)if(t(3<=Gn),fo.L==1)0<_a&&bl(wa,eo,Js,Gn+4),ra.La&&cl(wa,eo,Js,Gn),0<wo&&cu(wa,eo,Js,Gn+4),ra.La&&fs(wa,eo,Js,Gn);else{var Ic=fo.B,ks=fo.qa,en=fo.ra+8*ca*Ic+8*_a,Zd=fo.Ha,fo=fo.Ia+8*ca*Ic+8*_a;ca=ra.ld,0<_a&&(Ys(wa,eo,Js,Gn+4,Mn,ca),nd(ks,en,Zd,fo,Ic,Gn+4,Mn,ca)),ra.La&&(Bc(wa,eo,Js,Gn,Mn,ca),Tc(ks,en,Zd,fo,Ic,Gn,Mn,ca)),0<wo&&(_o(wa,eo,Js,Gn+4,Mn,ca),Wd(ks,en,Zd,fo,Ic,Gn+4,Mn,ca)),ra.La&&(la(wa,eo,Js,Gn,Mn,ca),Ec(ks,en,Zd,fo,Ic,Gn,Mn,ca))}}if(un.ia&&alert("todo:DitherRow"),An.put!=null){if(Di=16*Is,Is=16*(Is+1),bo?(An.y=un.sa,An.O=un.ta+Us,An.f=un.qa,An.N=un.ra+Ia,An.ea=un.Ha,An.W=un.Ia+Ia):(Di-=Zi,An.y=wr,An.O=ei,An.f=Nr,An.N=Xn,An.ea=Ts,An.W=rs),Oi||(Is-=Zi),Is>An.o&&(Is=An.o),An.F=null,An.J=null,un.Fa!=null&&0<un.Fa.length&&Di<Is&&(An.J=Qd(un,An,Di,Is-Di),An.F=un.mb,An.F==null&&An.F.length==0)){Jn=Os(un,3,"Could not decode alpha data.");break e}Di<An.j&&(Zi=An.j-Di,Di=An.j,t(!(1&Zi)),An.O+=un.R*Zi,An.N+=un.B*(Zi>>1),An.W+=un.B*(Zi>>1),An.F!=null&&(An.J+=An.width*Zi)),Di<Is&&(An.O+=An.v,An.N+=An.v>>1,An.W+=An.v>>1,An.F!=null&&(An.J+=An.v),An.ka=Di-An.j,An.U=An.va-An.v,An.T=Is-Di,Jn=An.put(An))}zn+1!=un.Ic||Oi||(r(un.sa,un.ta-ur,wr,ei+16*un.R,ur),r(un.qa,un.ra-Vr,Nr,Xn+8*un.B,Vr),r(un.Ha,un.Ia-Vr,Ts,rs+8*un.B,Vr))}if(!Jn)return Os(It,6,"Output aborted.")}return 1}(G,ee)),ee.bc!=null&&ee.bc(ee),Ae&=1}return Ae?(G.cb=0,Ae):0}function vl(G,ee,Ae,Fe,Ve){Ve=G[ee+Ae+32*Fe]+(Ve>>3),G[ee+Ae+32*Fe]=-256&Ve?0>Ve?0:255:Ve}function Rd(G,ee,Ae,Fe,Ve,it){vl(G,ee,0,Ae,Fe+Ve),vl(G,ee,1,Ae,Fe+it),vl(G,ee,2,Ae,Fe-it),vl(G,ee,3,Ae,Fe-Ve)}function No(G){return(20091*G>>16)+G}function kl(G,ee,Ae,Fe){var Ve,it=0,st=a(16);for(Ve=0;4>Ve;++Ve){var lt=G[ee+0]+G[ee+8],He=G[ee+0]-G[ee+8],St=(35468*G[ee+4]>>16)-No(G[ee+12]),on=No(G[ee+4])+(35468*G[ee+12]>>16);st[it+0]=lt+on,st[it+1]=He+St,st[it+2]=He-St,st[it+3]=lt-on,it+=4,ee++}for(Ve=it=0;4>Ve;++Ve)lt=(G=st[it+0]+4)+st[it+8],He=G-st[it+8],St=(35468*st[it+4]>>16)-No(st[it+12]),vl(Ae,Fe,0,0,lt+(on=No(st[it+4])+(35468*st[it+12]>>16))),vl(Ae,Fe,1,0,He+St),vl(Ae,Fe,2,0,He-St),vl(Ae,Fe,3,0,lt-on),it++,Fe+=32}function Ll(G,ee,Ae,Fe){var Ve=G[ee+0]+4,it=35468*G[ee+4]>>16,st=No(G[ee+4]),lt=35468*G[ee+1]>>16;Rd(Ae,Fe,0,Ve+st,G=No(G[ee+1]),lt),Rd(Ae,Fe,1,Ve+it,G,lt),Rd(Ae,Fe,2,Ve-it,G,lt),Rd(Ae,Fe,3,Ve-st,G,lt)}function ec(G,ee,Ae,Fe,Ve){kl(G,ee,Ae,Fe),Ve&&kl(G,ee+16,Ae,Fe+4)}function iu(G,ee,Ae,Fe){$n(G,ee+0,Ae,Fe,1),$n(G,ee+32,Ae,Fe+128,1)}function lf(G,ee,Ae,Fe){var Ve;for(G=G[ee+0]+4,Ve=0;4>Ve;++Ve)for(ee=0;4>ee;++ee)vl(Ae,Fe,ee,Ve,G)}function qu(G,ee,Ae,Fe){G[ee+0]&&ci(G,ee+0,Ae,Fe),G[ee+16]&&ci(G,ee+16,Ae,Fe+4),G[ee+32]&&ci(G,ee+32,Ae,Fe+128),G[ee+48]&&ci(G,ee+48,Ae,Fe+128+4)}function su(G,ee,Ae,Fe){var Ve,it=a(16);for(Ve=0;4>Ve;++Ve){var st=G[ee+0+Ve]+G[ee+12+Ve],lt=G[ee+4+Ve]+G[ee+8+Ve],He=G[ee+4+Ve]-G[ee+8+Ve],St=G[ee+0+Ve]-G[ee+12+Ve];it[0+Ve]=st+lt,it[8+Ve]=st-lt,it[4+Ve]=St+He,it[12+Ve]=St-He}for(Ve=0;4>Ve;++Ve)st=(G=it[0+4*Ve]+3)+it[3+4*Ve],lt=it[1+4*Ve]+it[2+4*Ve],He=it[1+4*Ve]-it[2+4*Ve],St=G-it[3+4*Ve],Ae[Fe+0]=st+lt>>3,Ae[Fe+16]=St+He>>3,Ae[Fe+32]=st-lt>>3,Ae[Fe+48]=St-He>>3,Fe+=64}function xl(G,ee,Ae){var Fe,Ve=ee-32,it=Ha,st=255-G[Ve-1];for(Fe=0;Fe<Ae;++Fe){var lt,He=it,St=st+G[ee-1];for(lt=0;lt<Ae;++lt)G[ee+lt]=He[St+G[Ve+lt]];ee+=32}}function cf(G,ee){xl(G,ee,4)}function ip(G,ee){xl(G,ee,8)}function Ch(G,ee){xl(G,ee,16)}function Aa(G,ee){var Ae;for(Ae=0;16>Ae;++Ae)r(G,ee+32*Ae,G,ee-32,16)}function Zu(G,ee){var Ae;for(Ae=16;0<Ae;--Ae)s(G,ee,G[ee-1],16),ee+=32}function Xu(G,ee,Ae){var Fe;for(Fe=0;16>Fe;++Fe)s(ee,Ae+32*Fe,G,16)}function ji(G,ee){var Ae,Fe=16;for(Ae=0;16>Ae;++Ae)Fe+=G[ee-1+32*Ae]+G[ee+Ae-32];Xu(Fe>>5,G,ee)}function Ml(G,ee){var Ae,Fe=8;for(Ae=0;16>Ae;++Ae)Fe+=G[ee-1+32*Ae];Xu(Fe>>4,G,ee)}function Ur(G,ee){var Ae,Fe=8;for(Ae=0;16>Ae;++Ae)Fe+=G[ee+Ae-32];Xu(Fe>>4,G,ee)}function sp(G,ee){Xu(128,G,ee)}function Sr(G,ee,Ae){return G+2*ee+Ae+2>>2}function op(G,ee){var Ae,Fe=ee-32;for(Fe=new Uint8Array([Sr(G[Fe-1],G[Fe+0],G[Fe+1]),Sr(G[Fe+0],G[Fe+1],G[Fe+2]),Sr(G[Fe+1],G[Fe+2],G[Fe+3]),Sr(G[Fe+2],G[Fe+3],G[Fe+4])]),Ae=0;4>Ae;++Ae)r(G,ee+32*Ae,Fe,0,Fe.length)}function _c(G,ee){var Ae=G[ee-1],Fe=G[ee-1+32],Ve=G[ee-1+64],it=G[ee-1+96];Me(G,ee+0,16843009*Sr(G[ee-1-32],Ae,Fe)),Me(G,ee+32,16843009*Sr(Ae,Fe,Ve)),Me(G,ee+64,16843009*Sr(Fe,Ve,it)),Me(G,ee+96,16843009*Sr(Ve,it,it))}function ou(G,ee){var Ae,Fe=4;for(Ae=0;4>Ae;++Ae)Fe+=G[ee+Ae-32]+G[ee-1+32*Ae];for(Fe>>=3,Ae=0;4>Ae;++Ae)s(G,ee+32*Ae,Fe,4)}function Od(G,ee){var Ae=G[ee-1+0],Fe=G[ee-1+32],Ve=G[ee-1+64],it=G[ee-1-32],st=G[ee+0-32],lt=G[ee+1-32],He=G[ee+2-32],St=G[ee+3-32];G[ee+0+96]=Sr(Fe,Ve,G[ee-1+96]),G[ee+1+96]=G[ee+0+64]=Sr(Ae,Fe,Ve),G[ee+2+96]=G[ee+1+64]=G[ee+0+32]=Sr(it,Ae,Fe),G[ee+3+96]=G[ee+2+64]=G[ee+1+32]=G[ee+0+0]=Sr(st,it,Ae),G[ee+3+64]=G[ee+2+32]=G[ee+1+0]=Sr(lt,st,it),G[ee+3+32]=G[ee+2+0]=Sr(He,lt,st),G[ee+3+0]=Sr(St,He,lt)}function cr(G,ee){var Ae=G[ee+1-32],Fe=G[ee+2-32],Ve=G[ee+3-32],it=G[ee+4-32],st=G[ee+5-32],lt=G[ee+6-32],He=G[ee+7-32];G[ee+0+0]=Sr(G[ee+0-32],Ae,Fe),G[ee+1+0]=G[ee+0+32]=Sr(Ae,Fe,Ve),G[ee+2+0]=G[ee+1+32]=G[ee+0+64]=Sr(Fe,Ve,it),G[ee+3+0]=G[ee+2+32]=G[ee+1+64]=G[ee+0+96]=Sr(Ve,it,st),G[ee+3+32]=G[ee+2+64]=G[ee+1+96]=Sr(it,st,lt),G[ee+3+64]=G[ee+2+96]=Sr(st,lt,He),G[ee+3+96]=Sr(lt,He,He)}function Pi(G,ee){var Ae=G[ee-1+0],Fe=G[ee-1+32],Ve=G[ee-1+64],it=G[ee-1-32],st=G[ee+0-32],lt=G[ee+1-32],He=G[ee+2-32],St=G[ee+3-32];G[ee+0+0]=G[ee+1+64]=it+st+1>>1,G[ee+1+0]=G[ee+2+64]=st+lt+1>>1,G[ee+2+0]=G[ee+3+64]=lt+He+1>>1,G[ee+3+0]=He+St+1>>1,G[ee+0+96]=Sr(Ve,Fe,Ae),G[ee+0+64]=Sr(Fe,Ae,it),G[ee+0+32]=G[ee+1+96]=Sr(Ae,it,st),G[ee+1+32]=G[ee+2+96]=Sr(it,st,lt),G[ee+2+32]=G[ee+3+96]=Sr(st,lt,He),G[ee+3+32]=Sr(lt,He,St)}function Ii(G,ee){var Ae=G[ee+0-32],Fe=G[ee+1-32],Ve=G[ee+2-32],it=G[ee+3-32],st=G[ee+4-32],lt=G[ee+5-32],He=G[ee+6-32],St=G[ee+7-32];G[ee+0+0]=Ae+Fe+1>>1,G[ee+1+0]=G[ee+0+64]=Fe+Ve+1>>1,G[ee+2+0]=G[ee+1+64]=Ve+it+1>>1,G[ee+3+0]=G[ee+2+64]=it+st+1>>1,G[ee+0+32]=Sr(Ae,Fe,Ve),G[ee+1+32]=G[ee+0+96]=Sr(Fe,Ve,it),G[ee+2+32]=G[ee+1+96]=Sr(Ve,it,st),G[ee+3+32]=G[ee+2+96]=Sr(it,st,lt),G[ee+3+64]=Sr(st,lt,He),G[ee+3+96]=Sr(lt,He,St)}function Nl(G,ee){var Ae=G[ee-1+0],Fe=G[ee-1+32],Ve=G[ee-1+64],it=G[ee-1+96];G[ee+0+0]=Ae+Fe+1>>1,G[ee+2+0]=G[ee+0+32]=Fe+Ve+1>>1,G[ee+2+32]=G[ee+0+64]=Ve+it+1>>1,G[ee+1+0]=Sr(Ae,Fe,Ve),G[ee+3+0]=G[ee+1+32]=Sr(Fe,Ve,it),G[ee+3+32]=G[ee+1+64]=Sr(Ve,it,it),G[ee+3+64]=G[ee+2+64]=G[ee+0+96]=G[ee+1+96]=G[ee+2+96]=G[ee+3+96]=it}function Dd(G,ee){var Ae=G[ee-1+0],Fe=G[ee-1+32],Ve=G[ee-1+64],it=G[ee-1+96],st=G[ee-1-32],lt=G[ee+0-32],He=G[ee+1-32],St=G[ee+2-32];G[ee+0+0]=G[ee+2+32]=Ae+st+1>>1,G[ee+0+32]=G[ee+2+64]=Fe+Ae+1>>1,G[ee+0+64]=G[ee+2+96]=Ve+Fe+1>>1,G[ee+0+96]=it+Ve+1>>1,G[ee+3+0]=Sr(lt,He,St),G[ee+2+0]=Sr(st,lt,He),G[ee+1+0]=G[ee+3+32]=Sr(Ae,st,lt),G[ee+1+32]=G[ee+3+64]=Sr(Fe,Ae,st),G[ee+1+64]=G[ee+3+96]=Sr(Ve,Fe,Ae),G[ee+1+96]=Sr(it,Ve,Fe)}function Si(G,ee){var Ae;for(Ae=0;8>Ae;++Ae)r(G,ee+32*Ae,G,ee-32,8)}function $s(G,ee){var Ae;for(Ae=0;8>Ae;++Ae)s(G,ee,G[ee-1],8),ee+=32}function us(G,ee,Ae){var Fe;for(Fe=0;8>Fe;++Fe)s(ee,Ae+32*Fe,G,8)}function wc(G,ee){var Ae,Fe=8;for(Ae=0;8>Ae;++Ae)Fe+=G[ee+Ae-32]+G[ee-1+32*Ae];us(Fe>>4,G,ee)}function Da(G,ee){var Ae,Fe=4;for(Ae=0;8>Ae;++Ae)Fe+=G[ee+Ae-32];us(Fe>>3,G,ee)}function ds(G,ee){var Ae,Fe=4;for(Ae=0;8>Ae;++Ae)Fe+=G[ee-1+32*Ae];us(Fe>>3,G,ee)}function ap(G,ee){us(128,G,ee)}function Yu(G,ee,Ae){var Fe=G[ee-Ae],Ve=G[ee+0],it=3*(Ve-Fe)+ff[1020+G[ee-2*Ae]-G[ee+Ae]],st=pf[112+(it+4>>3)];G[ee-Ae]=Ha[255+Fe+pf[112+(it+3>>3)]],G[ee+0]=Ha[255+Ve-st]}function uf(G,ee,Ae,Fe){var Ve=G[ee+0],it=G[ee+Ae];return Ri[255+G[ee-2*Ae]-G[ee-Ae]]>Fe||Ri[255+it-Ve]>Fe}function Ju(G,ee,Ae,Fe){return 4*Ri[255+G[ee-Ae]-G[ee+0]]+Ri[255+G[ee-2*Ae]-G[ee+Ae]]<=Fe}function df(G,ee,Ae,Fe,Ve){var it=G[ee-3*Ae],st=G[ee-2*Ae],lt=G[ee-Ae],He=G[ee+0],St=G[ee+Ae],on=G[ee+2*Ae],En=G[ee+3*Ae];return 4*Ri[255+lt-He]+Ri[255+st-St]>Fe?0:Ri[255+G[ee-4*Ae]-it]<=Ve&&Ri[255+it-st]<=Ve&&Ri[255+st-lt]<=Ve&&Ri[255+En-on]<=Ve&&Ri[255+on-St]<=Ve&&Ri[255+St-He]<=Ve}function Xo(G,ee,Ae,Fe){var Ve=2*Fe+1;for(Fe=0;16>Fe;++Fe)Ju(G,ee+Fe,Ae,Ve)&&Yu(G,ee+Fe,Ae)}function yo(G,ee,Ae,Fe){var Ve=2*Fe+1;for(Fe=0;16>Fe;++Fe)Ju(G,ee+Fe*Ae,1,Ve)&&Yu(G,ee+Fe*Ae,1)}function ma(G,ee,Ae,Fe){var Ve;for(Ve=3;0<Ve;--Ve)Xo(G,ee+=4*Ae,Ae,Fe)}function Yo(G,ee,Ae,Fe){var Ve;for(Ve=3;0<Ve;--Ve)yo(G,ee+=4,Ae,Fe)}function Rl(G,ee,Ae,Fe,Ve,it,st,lt){for(it=2*it+1;0<Ve--;){if(df(G,ee,Ae,it,st))if(uf(G,ee,Ae,lt))Yu(G,ee,Ae);else{var He=G,St=ee,on=Ae,En=He[St-2*on],Tn=He[St-on],It=He[St+0],er=He[St+on],zn=He[St+2*on],un=27*(Jn=ff[1020+3*(It-Tn)+ff[1020+En-er]])+63>>7,An=18*Jn+63>>7,Jn=9*Jn+63>>7;He[St-3*on]=Ha[255+He[St-3*on]+Jn],He[St-2*on]=Ha[255+En+An],He[St-on]=Ha[255+Tn+un],He[St+0]=Ha[255+It-un],He[St+on]=Ha[255+er-An],He[St+2*on]=Ha[255+zn-Jn]}ee+=Fe}}function vo(G,ee,Ae,Fe,Ve,it,st,lt){for(it=2*it+1;0<Ve--;){if(df(G,ee,Ae,it,st))if(uf(G,ee,Ae,lt))Yu(G,ee,Ae);else{var He=G,St=ee,on=Ae,En=He[St-on],Tn=He[St+0],It=He[St+on],er=pf[112+((zn=3*(Tn-En))+4>>3)],zn=pf[112+(zn+3>>3)],un=er+1>>1;He[St-2*on]=Ha[255+He[St-2*on]+un],He[St-on]=Ha[255+En+zn],He[St+0]=Ha[255+Tn-er],He[St+on]=Ha[255+It-un]}ee+=Fe}}function xs(G,ee,Ae,Fe,Ve,it){Rl(G,ee,Ae,1,16,Fe,Ve,it)}function ll(G,ee,Ae,Fe,Ve,it){Rl(G,ee,1,Ae,16,Fe,Ve,it)}function tc(G,ee,Ae,Fe,Ve,it){var st;for(st=3;0<st;--st)vo(G,ee+=4*Ae,Ae,1,16,Fe,Ve,it)}function oo(G,ee,Ae,Fe,Ve,it){var st;for(st=3;0<st;--st)vo(G,ee+=4,1,Ae,16,Fe,Ve,it)}function Sh(G,ee,Ae,Fe,Ve,it,st,lt){Rl(G,ee,Ve,1,8,it,st,lt),Rl(Ae,Fe,Ve,1,8,it,st,lt)}function _l(G,ee,Ae,Fe,Ve,it,st,lt){Rl(G,ee,1,Ve,8,it,st,lt),Rl(Ae,Fe,1,Ve,8,it,st,lt)}function Qo(G,ee,Ae,Fe,Ve,it,st,lt){vo(G,ee+4*Ve,Ve,1,8,it,st,lt),vo(Ae,Fe+4*Ve,Ve,1,8,it,st,lt)}function Ud(G,ee,Ae,Fe,Ve,it,st,lt){vo(G,ee+4,1,Ve,8,it,st,lt),vo(Ae,Fe+4,1,Ve,8,it,st,lt)}function ta(){this.ba=new hs,this.ec=[],this.cc=[],this.Mc=[],this.Dc=this.Nc=this.dc=this.fc=0,this.Oa=new br,this.memory=0,this.Ib="OutputFunc",this.Jb="OutputAlphaFunc",this.Nd="OutputRowFunc"}function Yp(){this.data=[],this.offset=this.kd=this.ha=this.w=0,this.na=[],this.xa=this.gb=this.Ja=this.Sa=this.P=0}function bc(){this.nc=this.Ea=this.b=this.hc=0,this.K=[],this.w=0}function au(){this.ua=0,this.Wa=new Oe,this.vb=new Oe,this.md=this.xc=this.wc=0,this.vc=[],this.Wb=0,this.Ya=new Ee,this.yc=new be}function zd(){this.xb=this.a=0,this.l=new so,this.ca=new hs,this.V=[],this.Ba=0,this.Ta=[],this.Ua=0,this.m=new we,this.Pb=0,this.wd=new we,this.Ma=this.$=this.C=this.i=this.c=this.xd=0,this.s=new au,this.ab=0,this.gc=c(4,bc),this.Oc=0}function ga(){this.Lc=this.Z=this.$a=this.i=this.c=0,this.l=new so,this.ic=0,this.ca=[],this.tb=0,this.qd=null,this.rd=0}function Ds(G,ee,Ae,Fe,Ve,it,st){for(G=G==null?0:G[ee+0],ee=0;ee<st;++ee)Ve[it+ee]=G+Ae[Fe+ee]&255,G=Ve[it+ee]}function nc(G,ee,Ae,Fe,Ve,it,st){var lt;if(G==null)Ds(null,null,Ae,Fe,Ve,it,st);else for(lt=0;lt<st;++lt)Ve[it+lt]=G[ee+lt]+Ae[Fe+lt]&255}function wu(G,ee,Ae,Fe,Ve,it,st){if(G==null)Ds(null,null,Ae,Fe,Ve,it,st);else{var lt,He=G[ee+0],St=He,on=He;for(lt=0;lt<st;++lt)St=on+(He=G[ee+lt])-St,on=Ae[Fe+lt]+(-256&St?0>St?0:255:St)&255,St=He,Ve[it+lt]=on}}function Qd(G,ee,Ae,Fe){var Ve=ee.width,it=ee.o;if(t(G!=null&&ee!=null),0>Ae||0>=Fe||Ae+Fe>it)return null;if(!G.Cc){if(G.ga==null){var st;if(G.ga=new ga,(st=G.ga==null)||(st=ee.width*ee.o,t(G.Gb.length==0),G.Gb=a(st),G.Uc=0,G.Gb==null?st=0:(G.mb=G.Gb,G.nb=G.Uc,G.rc=null,st=1),st=!st),!st){st=G.ga;var lt=G.Fa,He=G.P,St=G.qc,on=G.mb,En=G.nb,Tn=He+1,It=St-1,er=st.l;if(t(lt!=null&&on!=null&&ee!=null),Qc[0]=null,Qc[1]=Ds,Qc[2]=nc,Qc[3]=wu,st.ca=on,st.tb=En,st.c=ee.width,st.i=ee.height,t(0<st.c&&0<st.i),1>=St)ee=0;else if(st.$a=lt[He+0]>>0&3,st.Z=lt[He+0]>>2&3,st.Lc=lt[He+0]>>4&3,He=lt[He+0]>>6&3,0>st.$a||1<st.$a||4<=st.Z||1<st.Lc||He)ee=0;else if(er.put=je,er.ac=Mt,er.bc=De,er.ma=st,er.width=ee.width,er.height=ee.height,er.Da=ee.Da,er.v=ee.v,er.va=ee.va,er.j=ee.j,er.o=ee.o,st.$a)e:{t(st.$a==1),ee=Cr();t:for(;;){if(ee==null){ee=0;break e}if(t(st!=null),st.mc=ee,ee.c=st.c,ee.i=st.i,ee.l=st.l,ee.l.ma=st,ee.l.width=st.c,ee.l.height=st.i,ee.a=0,Ue(ee.m,lt,Tn,It),!Ar(st.c,st.i,1,ee,null)||(ee.ab==1&&ee.gc[0].hc==3&&Nt(ee.s)?(st.ic=1,lt=ee.c*ee.i,ee.Ta=null,ee.Ua=0,ee.V=a(lt),ee.Ba=0,ee.V==null?(ee.a=1,ee=0):ee=1):(st.ic=0,ee=pr(ee,st.c)),!ee))break t;ee=1;break e}st.mc=null,ee=0}else ee=It>=st.c*st.i;st=!ee}if(st)return null;G.ga.Lc!=1?G.Ga=0:Fe=it-Ae}t(G.ga!=null),t(Ae+Fe<=it);e:{if(ee=(lt=G.ga).c,it=lt.l.o,lt.$a==0){if(Tn=G.rc,It=G.Vc,er=G.Fa,He=G.P+1+Ae*ee,St=G.mb,on=G.nb+Ae*ee,t(He<=G.P+G.qc),lt.Z!=0)for(t(Qc[lt.Z]!=null),st=0;st<Fe;++st)Qc[lt.Z](Tn,It,er,He,St,on,ee),Tn=St,It=on,on+=ee,He+=ee;else for(st=0;st<Fe;++st)r(St,on,er,He,ee),Tn=St,It=on,on+=ee,He+=ee;G.rc=Tn,G.Vc=It}else{if(t(lt.mc!=null),ee=Ae+Fe,t((st=lt.mc)!=null),t(ee<=st.i),st.C>=ee)ee=1;else if(lt.ic||Sn(),lt.ic){lt=st.V,Tn=st.Ba,It=st.c;var zn=st.i,un=(er=1,He=st.$/It,St=st.$%It,on=st.m,En=st.s,st.$),An=It*zn,Jn=It*ee,ur=En.wc,Xn=un<Jn?pt(En,St,He):null;t(un<=An),t(ee<=zn),t(Nt(En));t:for(;;){for(;!on.h&&un<Jn;){if(St&ur||(Xn=pt(En,St,He)),t(Xn!=null),vt(on),256>(zn=tt(Xn.G[0],Xn.H[0],on)))lt[Tn+un]=zn,++un,++St>=It&&(St=0,++He<=ee&&!(He%16)&&_n(st,He));else{if(!(280>zn)){er=0;break t}zn=Re(zn-256,on);var Vr,wr=tt(Xn.G[4],Xn.H[4],on);if(vt(on),!(un>=(wr=ze(It,wr=Re(wr,on)))&&An-un>=zn)){er=0;break t}for(Vr=0;Vr<zn;++Vr)lt[Tn+un+Vr]=lt[Tn+un+Vr-wr];for(un+=zn,St+=zn;St>=It;)St-=It,++He<=ee&&!(He%16)&&_n(st,He);un<Jn&&St&ur&&(Xn=pt(En,St,He))}t(on.h==Ze(on))}_n(st,He>ee?ee:He);break t}!er||on.h&&un<An?(er=0,st.a=on.h?5:3):st.$=un,ee=er}else ee=Pn(st,st.V,st.Ba,st.c,st.i,ee,Wr);if(!ee){Fe=0;break e}}Ae+Fe>=it&&(G.Cc=1),Fe=1}if(!Fe)return null;if(G.Cc&&((Fe=G.ga)!=null&&(Fe.mc=null),G.ga=null,0<G.Ga))return alert("todo:WebPDequantizeLevels"),null}return G.nb+Ae*Ve}function ce(G,ee,Ae,Fe,Ve,it){for(;0<Ve--;){var st,lt=G,He=ee+(Ae?1:0),St=G,on=ee+(Ae?0:3);for(st=0;st<Fe;++st){var En=St[on+4*st];En!=255&&(En*=32897,lt[He+4*st+0]=lt[He+4*st+0]*En>>23,lt[He+4*st+1]=lt[He+4*st+1]*En>>23,lt[He+4*st+2]=lt[He+4*st+2]*En>>23)}ee+=it}}function Ke(G,ee,Ae,Fe,Ve){for(;0<Fe--;){var it;for(it=0;it<Ae;++it){var st=G[ee+2*it+0],lt=15&(St=G[ee+2*it+1]),He=4369*lt,St=(240&St|St>>4)*He>>16;G[ee+2*it+0]=(240&st|st>>4)*He>>16&240|(15&st|st<<4)*He>>16>>4&15,G[ee+2*it+1]=240&St|lt}ee+=Ve}}function Ft(G,ee,Ae,Fe,Ve,it,st,lt){var He,St,on=255;for(St=0;St<Ve;++St){for(He=0;He<Fe;++He){var En=G[ee+He];it[st+4*He]=En,on&=En}ee+=Ae,st+=lt}return on!=255}function sn(G,ee,Ae,Fe,Ve){var it;for(it=0;it<Ve;++it)Ae[Fe+it]=G[ee+it]>>8}function Sn(){za=ce,As=Ke,lo=Ft,Jo=sn}function On(G,ee,Ae){pe[G]=function(Fe,Ve,it,st,lt,He,St,on,En,Tn,It,er,zn,un,An,Jn,ur){var Xn,Vr=ur-1>>1,wr=lt[He+0]|St[on+0]<<16,ei=En[Tn+0]|It[er+0]<<16;t(Fe!=null);var Nr=3*wr+ei+131074>>2;for(ee(Fe[Ve+0],255&Nr,Nr>>16,zn,un),it!=null&&(Nr=3*ei+wr+131074>>2,ee(it[st+0],255&Nr,Nr>>16,An,Jn)),Xn=1;Xn<=Vr;++Xn){var Ts=lt[He+Xn]|St[on+Xn]<<16,rs=En[Tn+Xn]|It[er+Xn]<<16,Oi=wr+Ts+ei+rs+524296,Zi=Oi+2*(Ts+ei)>>3;Nr=Zi+wr>>1,wr=(Oi=Oi+2*(wr+rs)>>3)+Ts>>1,ee(Fe[Ve+2*Xn-1],255&Nr,Nr>>16,zn,un+(2*Xn-1)*Ae),ee(Fe[Ve+2*Xn-0],255&wr,wr>>16,zn,un+(2*Xn-0)*Ae),it!=null&&(Nr=Oi+ei>>1,wr=Zi+rs>>1,ee(it[st+2*Xn-1],255&Nr,Nr>>16,An,Jn+(2*Xn-1)*Ae),ee(it[st+2*Xn+0],255&wr,wr>>16,An,Jn+(2*Xn+0)*Ae)),wr=Ts,ei=rs}1&ur||(Nr=3*wr+ei+131074>>2,ee(Fe[Ve+ur-1],255&Nr,Nr>>16,zn,un+(ur-1)*Ae),it!=null&&(Nr=3*ei+wr+131074>>2,ee(it[st+ur-1],255&Nr,Nr>>16,An,Jn+(ur-1)*Ae)))}}function dr(){ul[Jp]=ct,ul[Eh]=_f,ul[Th]=Fh,ul[qd]=Ta,ul[cp]=Ji,ul[eA]=hm,ul[lm]=Ph,ul[Af]=_f,ul[mf]=Ta,ul[up]=Ji,ul[gf]=hm}function zr(G){return G&~pm?0>G?0:255:G>>tA}function Jr(G,ee){return zr((19077*G>>8)+(26149*ee>>8)-14234)}function Yi(G,ee,Ae){return zr((19077*G>>8)-(6419*ee>>8)-(13320*Ae>>8)+8708)}function Vi(G,ee){return zr((19077*G>>8)+(33050*ee>>8)-17685)}function _s(G,ee,Ae,Fe,Ve){Fe[Ve+0]=Jr(G,Ae),Fe[Ve+1]=Yi(G,ee,Ae),Fe[Ve+2]=Vi(G,ee)}function Ho(G,ee,Ae,Fe,Ve){Fe[Ve+0]=Vi(G,ee),Fe[Ve+1]=Yi(G,ee,Ae),Fe[Ve+2]=Jr(G,Ae)}function To(G,ee,Ae,Fe,Ve){var it=Yi(G,ee,Ae);ee=it<<3&224|Vi(G,ee)>>3,Fe[Ve+0]=248&Jr(G,Ae)|it>>5,Fe[Ve+1]=ee}function Mr(G,ee,Ae,Fe,Ve){var it=240&Vi(G,ee)|15;Fe[Ve+0]=240&Jr(G,Ae)|Yi(G,ee,Ae)>>4,Fe[Ve+1]=it}function mr(G,ee,Ae,Fe,Ve){Fe[Ve+0]=255,_s(G,ee,Ae,Fe,Ve+1)}function ya(G,ee,Ae,Fe,Ve){Ho(G,ee,Ae,Fe,Ve),Fe[Ve+3]=255}function Rr(G,ee,Ae,Fe,Ve){_s(G,ee,Ae,Fe,Ve),Fe[Ve+3]=255}function xo(G,ee){return 0>G?0:G>ee?ee:G}function Ea(G,ee,Ae){pe[G]=function(Fe,Ve,it,st,lt,He,St,on,En){for(var Tn=on+(-2&En)*Ae;on!=Tn;)ee(Fe[Ve+0],it[st+0],lt[He+0],St,on),ee(Fe[Ve+1],it[st+0],lt[He+0],St,on+Ae),Ve+=2,++st,++He,on+=2*Ae;1&En&&ee(Fe[Ve+0],it[st+0],lt[He+0],St,on)}}function Lr(G,ee,Ae){return Ae==0?G==0?ee==0?6:5:ee==0?4:0:Ae}function Bh(G,ee,Ae,Fe,Ve){switch(G>>>30){case 3:$n(ee,Ae,Fe,Ve,0);break;case 2:jn(ee,Ae,Fe,Ve);break;case 1:ci(ee,Ae,Fe,Ve)}}function Hd(G,ee){var Ae,Fe,Ve=ee.M,it=ee.Nb,st=G.oc,lt=G.pc+40,He=G.oc,St=G.pc+584,on=G.oc,En=G.pc+600;for(Ae=0;16>Ae;++Ae)st[lt+32*Ae-1]=129;for(Ae=0;8>Ae;++Ae)He[St+32*Ae-1]=129,on[En+32*Ae-1]=129;for(0<Ve?st[lt-1-32]=He[St-1-32]=on[En-1-32]=129:(s(st,lt-32-1,127,21),s(He,St-32-1,127,9),s(on,En-32-1,127,9)),Fe=0;Fe<G.za;++Fe){var Tn=ee.ya[ee.aa+Fe];if(0<Fe){for(Ae=-1;16>Ae;++Ae)r(st,lt+32*Ae-4,st,lt+32*Ae+12,4);for(Ae=-1;8>Ae;++Ae)r(He,St+32*Ae-4,He,St+32*Ae+4,4),r(on,En+32*Ae-4,on,En+32*Ae+4,4)}var It=G.Gd,er=G.Hd+Fe,zn=Tn.ad,un=Tn.Hc;if(0<Ve&&(r(st,lt-32,It[er].y,0,16),r(He,St-32,It[er].f,0,8),r(on,En-32,It[er].ea,0,8)),Tn.Za){var An=st,Jn=lt-32+16;for(0<Ve&&(Fe>=G.za-1?s(An,Jn,It[er].y[15],4):r(An,Jn,It[er+1].y,0,4)),Ae=0;4>Ae;Ae++)An[Jn+128+Ae]=An[Jn+256+Ae]=An[Jn+384+Ae]=An[Jn+0+Ae];for(Ae=0;16>Ae;++Ae,un<<=2)An=st,Jn=lt+Hc[Ae],Eu[Tn.Ob[Ae]](An,Jn),Bh(un,zn,16*+Ae,An,Jn)}else if(An=Lr(Fe,Ve,Tn.Ob[0]),Ih[An](st,lt),un!=0)for(Ae=0;16>Ae;++Ae,un<<=2)Bh(un,zn,16*+Ae,st,lt+Hc[Ae]);for(Ae=Tn.Gc,An=Lr(Fe,Ve,Tn.Dd),Tu[An](He,St),Tu[An](on,En),un=zn,An=He,Jn=St,255&(Tn=Ae>>0)&&(170&Tn?Hr(un,256,An,Jn):Bi(un,256,An,Jn)),Tn=on,un=En,255&(Ae>>=8)&&(170&Ae?Hr(zn,320,Tn,un):Bi(zn,320,Tn,un)),Ve<G.Ub-1&&(r(It[er].y,0,st,lt+480,16),r(It[er].f,0,He,St+224,8),r(It[er].ea,0,on,En+224,8)),Ae=8*it*G.B,It=G.sa,er=G.ta+16*Fe+16*it*G.R,zn=G.qa,Tn=G.ra+8*Fe+Ae,un=G.Ha,An=G.Ia+8*Fe+Ae,Ae=0;16>Ae;++Ae)r(It,er+Ae*G.R,st,lt+32*Ae,16);for(Ae=0;8>Ae;++Ae)r(zn,Tn+Ae*G.B,He,St+32*Ae,8),r(un,An+Ae*G.B,on,En+32*Ae,8)}}function bu(G,ee,Ae,Fe,Ve,it,st,lt,He){var St=[0],on=[0],En=0,Tn=He!=null?He.kd:0,It=He??new Yp;if(G==null||12>Ae)return 7;It.data=G,It.w=ee,It.ha=Ae,ee=[ee],Ae=[Ae],It.gb=[It.gb];e:{var er=ee,zn=Ae,un=It.gb;if(t(G!=null),t(zn!=null),t(un!=null),un[0]=0,12<=zn[0]&&!n(G,er[0],"RIFF")){if(n(G,er[0]+8,"WEBP")){un=3;break e}var An=pn(G,er[0]+4);if(12>An||4294967286<An){un=3;break e}if(Tn&&An>zn[0]-8){un=7;break e}un[0]=An,er[0]+=12,zn[0]-=12}un=0}if(un!=0)return un;for(An=0<It.gb[0],Ae=Ae[0];;){e:{var Jn=G;zn=ee,un=Ae;var ur=St,Xn=on,Vr=er=[0];if((Nr=En=[En])[0]=0,8>un[0])un=7;else{if(!n(Jn,zn[0],"VP8X")){if(pn(Jn,zn[0]+4)!=10){un=3;break e}if(18>un[0]){un=7;break e}var wr=pn(Jn,zn[0]+8),ei=1+Zt(Jn,zn[0]+12);if(2147483648<=ei*(Jn=1+Zt(Jn,zn[0]+15))){un=3;break e}Vr!=null&&(Vr[0]=wr),ur!=null&&(ur[0]=ei),Xn!=null&&(Xn[0]=Jn),zn[0]+=18,un[0]-=18,Nr[0]=1}un=0}}if(En=En[0],er=er[0],un!=0)return un;if(zn=!!(2&er),!An&&En)return 3;if(it!=null&&(it[0]=!!(16&er)),st!=null&&(st[0]=zn),lt!=null&&(lt[0]=0),st=St[0],er=on[0],En&&zn&&He==null){un=0;break}if(4>Ae){un=7;break}if(An&&En||!An&&!En&&!n(G,ee[0],"ALPH")){Ae=[Ae],It.na=[It.na],It.P=[It.P],It.Sa=[It.Sa];e:{wr=G,un=ee,An=Ae;var Nr=It.gb;ur=It.na,Xn=It.P,Vr=It.Sa,ei=22,t(wr!=null),t(An!=null),Jn=un[0];var Ts=An[0];for(t(ur!=null),t(Vr!=null),ur[0]=null,Xn[0]=null,Vr[0]=0;;){if(un[0]=Jn,An[0]=Ts,8>Ts){un=7;break e}var rs=pn(wr,Jn+4);if(4294967286<rs){un=3;break e}var Oi=8+rs+1&-2;if(ei+=Oi,0<Nr&&ei>Nr){un=3;break e}if(!n(wr,Jn,"VP8 ")||!n(wr,Jn,"VP8L")){un=0;break e}if(Ts[0]<Oi){un=7;break e}n(wr,Jn,"ALPH")||(ur[0]=wr,Xn[0]=Jn+8,Vr[0]=rs),Jn+=Oi,Ts-=Oi}}if(Ae=Ae[0],It.na=It.na[0],It.P=It.P[0],It.Sa=It.Sa[0],un!=0)break}Ae=[Ae],It.Ja=[It.Ja],It.xa=[It.xa];e:if(Nr=G,un=ee,An=Ae,ur=It.gb[0],Xn=It.Ja,Vr=It.xa,wr=un[0],Jn=!n(Nr,wr,"VP8 "),ei=!n(Nr,wr,"VP8L"),t(Nr!=null),t(An!=null),t(Xn!=null),t(Vr!=null),8>An[0])un=7;else{if(Jn||ei){if(Nr=pn(Nr,wr+4),12<=ur&&Nr>ur-12){un=3;break e}if(Tn&&Nr>An[0]-8){un=7;break e}Xn[0]=Nr,un[0]+=8,An[0]-=8,Vr[0]=ei}else Vr[0]=5<=An[0]&&Nr[wr+0]==47&&!(Nr[wr+4]>>5),Xn[0]=An[0];un=0}if(Ae=Ae[0],It.Ja=It.Ja[0],It.xa=It.xa[0],ee=ee[0],un!=0)break;if(4294967286<It.Ja)return 3;if(lt==null||zn||(lt[0]=It.xa?2:1),st=[st],er=[er],It.xa){if(5>Ae){un=7;break}lt=st,Tn=er,zn=it,G==null||5>Ae?G=0:5<=Ae&&G[ee+0]==47&&!(G[ee+4]>>5)?(An=[0],Nr=[0],ur=[0],Ue(Xn=new we,G,ee,Ae),ve(Xn,An,Nr,ur)?(lt!=null&&(lt[0]=An[0]),Tn!=null&&(Tn[0]=Nr[0]),zn!=null&&(zn[0]=ur[0]),G=1):G=0):G=0}else{if(10>Ae){un=7;break}lt=er,G==null||10>Ae||!Dc(G,ee+3,Ae-3)?G=0:(Tn=G[ee+0]|G[ee+1]<<8|G[ee+2]<<16,zn=16383&(G[ee+7]<<8|G[ee+6]),G=16383&(G[ee+9]<<8|G[ee+8]),1&Tn||3<(Tn>>1&7)||!(Tn>>4&1)||Tn>>5>=It.Ja||!zn||!G?G=0:(st&&(st[0]=zn),lt&&(lt[0]=G),G=1))}if(!G||(st=st[0],er=er[0],En&&(St[0]!=st||on[0]!=er)))return 3;He!=null&&(He[0]=It,He.offset=ee-He.w,t(4294967286>ee-He.w),t(He.offset==He.ha-Ae));break}return un==0||un==7&&En&&He==null?(it!=null&&(it[0]|=It.na!=null&&0<It.na.length),Fe!=null&&(Fe[0]=st),Ve!=null&&(Ve[0]=er),0):un}function ed(G,ee,Ae){var Fe=ee.width,Ve=ee.height,it=0,st=0,lt=Fe,He=Ve;if(ee.Da=G!=null&&0<G.Da,ee.Da&&(lt=G.cd,He=G.bd,it=G.v,st=G.j,11>Ae||(it&=-2,st&=-2),0>it||0>st||0>=lt||0>=He||it+lt>Fe||st+He>Ve))return 0;if(ee.v=it,ee.j=st,ee.va=it+lt,ee.o=st+He,ee.U=lt,ee.T=He,ee.da=G!=null&&0<G.da,ee.da){if(!nn(lt,He,Ae=[G.ib],it=[G.hb]))return 0;ee.ib=Ae[0],ee.hb=it[0]}return ee.ob=G!=null&&G.ob,ee.Kb=G==null||!G.Sd,ee.da&&(ee.ob=ee.ib<3*Fe/4&&ee.hb<3*Ve/4,ee.Kb=0),1}function Vd(G){if(G==null)return 2;if(11>G.S){var ee=G.f.RGBA;ee.fb+=(G.height-1)*ee.A,ee.A=-ee.A}else ee=G.f.kb,G=G.height,ee.O+=(G-1)*ee.fa,ee.fa=-ee.fa,ee.N+=(G-1>>1)*ee.Ab,ee.Ab=-ee.Ab,ee.W+=(G-1>>1)*ee.Db,ee.Db=-ee.Db,ee.F!=null&&(ee.J+=(G-1)*ee.lb,ee.lb=-ee.lb);return 0}function na(G,ee,Ae,Fe){if(Fe==null||0>=G||0>=ee)return 2;if(Ae!=null){if(Ae.Da){var Ve=Ae.cd,it=Ae.bd,st=-2&Ae.v,lt=-2&Ae.j;if(0>st||0>lt||0>=Ve||0>=it||st+Ve>G||lt+it>ee)return 2;G=Ve,ee=it}if(Ae.da){if(!nn(G,ee,Ve=[Ae.ib],it=[Ae.hb]))return 2;G=Ve[0],ee=it[0]}}Fe.width=G,Fe.height=ee;e:{var He=Fe.width,St=Fe.height;if(G=Fe.S,0>=He||0>=St||!(G>=Jp&&13>G))G=2;else{if(0>=Fe.Rd&&Fe.sd==null){st=it=Ve=ee=0;var on=(lt=He*wf[G])*St;if(11>G||(it=(St+1)/2*(ee=(He+1)/2),G==12&&(st=(Ve=He)*St)),(St=a(on+2*it+st))==null){G=1;break e}Fe.sd=St,11>G?((He=Fe.f.RGBA).eb=St,He.fb=0,He.A=lt,He.size=on):((He=Fe.f.kb).y=St,He.O=0,He.fa=lt,He.Fd=on,He.f=St,He.N=0+on,He.Ab=ee,He.Cd=it,He.ea=St,He.W=0+on+it,He.Db=ee,He.Ed=it,G==12&&(He.F=St,He.J=0+on+2*it),He.Tc=st,He.lb=Ve)}if(ee=1,Ve=Fe.S,it=Fe.width,st=Fe.height,Ve>=Jp&&13>Ve)if(11>Ve)G=Fe.f.RGBA,ee&=(lt=Math.abs(G.A))*(st-1)+it<=G.size,ee&=lt>=it*wf[Ve],ee&=G.eb!=null;else{G=Fe.f.kb,lt=(it+1)/2,on=(st+1)/2,He=Math.abs(G.fa),St=Math.abs(G.Ab);var En=Math.abs(G.Db),Tn=Math.abs(G.lb),It=Tn*(st-1)+it;ee&=He*(st-1)+it<=G.Fd,ee&=St*(on-1)+lt<=G.Cd,ee=(ee&=En*(on-1)+lt<=G.Ed)&He>=it&St>=lt&En>=lt,ee&=G.y!=null,ee&=G.f!=null,ee&=G.ea!=null,Ve==12&&(ee&=Tn>=it,ee&=It<=G.Tc,ee&=G.F!=null)}else ee=0;G=ee?0:2}}return G!=0||Ae!=null&&Ae.fd&&(G=Vd(Fe)),G}var ao=64,Cc=[0,1,3,7,15,31,63,127,255,511,1023,2047,4095,8191,16383,32767,65535,131071,262143,524287,1048575,2097151,4194303,8388607,16777215],Wn=24,$d=32,rc=8,Gs=[0,0,1,1,2,2,2,2,3,3,3,3,3,3,3,3,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,4,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,5,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,6,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7,7];xn("Predictor0","PredictorAdd0"),pe.Predictor0=function(){return 4278190080},pe.Predictor1=function(G){return G},pe.Predictor2=function(G,ee,Ae){return ee[Ae+0]},pe.Predictor3=function(G,ee,Ae){return ee[Ae+1]},pe.Predictor4=function(G,ee,Ae){return ee[Ae-1]},pe.Predictor5=function(G,ee,Ae){return gn(gn(G,ee[Ae+1]),ee[Ae+0])},pe.Predictor6=function(G,ee,Ae){return gn(G,ee[Ae-1])},pe.Predictor7=function(G,ee,Ae){return gn(G,ee[Ae+0])},pe.Predictor8=function(G,ee,Ae){return gn(ee[Ae-1],ee[Ae+0])},pe.Predictor9=function(G,ee,Ae){return gn(ee[Ae+0],ee[Ae+1])},pe.Predictor10=function(G,ee,Ae){return gn(gn(G,ee[Ae-1]),gn(ee[Ae+0],ee[Ae+1]))},pe.Predictor11=function(G,ee,Ae){var Fe=ee[Ae+0];return 0>=Rn(Fe>>24&255,G>>24&255,(ee=ee[Ae-1])>>24&255)+Rn(Fe>>16&255,G>>16&255,ee>>16&255)+Rn(Fe>>8&255,G>>8&255,ee>>8&255)+Rn(255&Fe,255&G,255&ee)?Fe:G},pe.Predictor12=function(G,ee,Ae){var Fe=ee[Ae+0];return(rr((G>>24&255)+(Fe>>24&255)-((ee=ee[Ae-1])>>24&255))<<24|rr((G>>16&255)+(Fe>>16&255)-(ee>>16&255))<<16|rr((G>>8&255)+(Fe>>8&255)-(ee>>8&255))<<8|rr((255&G)+(255&Fe)-(255&ee)))>>>0},pe.Predictor13=function(G,ee,Ae){var Fe=ee[Ae-1];return(Gt((G=gn(G,ee[Ae+0]))>>24&255,Fe>>24&255)<<24|Gt(G>>16&255,Fe>>16&255)<<16|Gt(G>>8&255,Fe>>8&255)<<8|Gt(G>>0&255,Fe>>0&255))>>>0};var Cu=pe.PredictorAdd0;pe.PredictorAdd1=wt,xn("Predictor2","PredictorAdd2"),xn("Predictor3","PredictorAdd3"),xn("Predictor4","PredictorAdd4"),xn("Predictor5","PredictorAdd5"),xn("Predictor6","PredictorAdd6"),xn("Predictor7","PredictorAdd7"),xn("Predictor8","PredictorAdd8"),xn("Predictor9","PredictorAdd9"),xn("Predictor10","PredictorAdd10"),xn("Predictor11","PredictorAdd11"),xn("Predictor12","PredictorAdd12"),xn("Predictor13","PredictorAdd13");var Su=pe.PredictorAdd2;Yt("ColorIndexInverseTransform","MapARGB","32b",function(G){return G>>8&255},function(G){return G}),Yt("VP8LColorIndexInverseTransformAlpha","MapAlpha","8b",function(G){return G},function(G){return G>>8&255});var lu,wl=pe.ColorIndexInverseTransform,Uc=pe.MapARGB,Sc=pe.VP8LColorIndexInverseTransformAlpha,Ua=pe.MapAlpha,Gd=pe.VP8LPredictorsAdd=[];Gd.length=16,(pe.VP8LPredictors=[]).length=16,(pe.VP8LPredictorsAdd_C=[]).length=16,(pe.VP8LPredictors_C=[]).length=16;var hf,Ol,Dl,Kd,td,aa,yn,$n,jn,Hr,ci,Bi,_o,Ys,Wd,nd,la,Bc,Ec,Tc,cu,bl,fs,cl,za,As,lo,Jo,va=a(511),Qa=a(2041),oi=a(225),zc=a(767),lp=0,ff=Qa,pf=oi,Ha=zc,Ri=va,Jp=0,Eh=1,Th=2,qd=3,cp=4,eA=5,lm=6,Af=7,mf=8,up=9,gf=10,dp=[2,3,7],x0=[3,3,11],ic=[280,256,256,256,40],xa=[0,1,1,1,0],Va=[17,18,0,1,2,3,4,5,16,6,7,8,9,10,11,12,13,14,15],cm=[24,7,23,25,40,6,39,41,22,26,38,42,56,5,55,57,21,27,54,58,37,43,72,4,71,73,20,28,53,59,70,74,36,44,88,69,75,52,60,3,87,89,19,29,86,90,35,45,68,76,85,91,51,61,104,2,103,105,18,30,102,106,34,46,84,92,67,77,101,107,50,62,120,1,119,121,83,93,17,31,100,108,66,78,118,122,33,47,117,123,49,63,99,109,82,94,0,116,124,65,79,16,32,98,110,48,115,125,81,95,64,114,126,97,111,80,113,127,96,112],mg=[2954,2956,2958,2962,2970,2986,3018,3082,3212,3468,3980,5004],um=8,hp=[4,5,6,7,8,9,10,10,11,12,13,14,15,16,17,17,18,19,20,20,21,21,22,22,23,23,24,25,25,26,27,28,29,30,31,32,33,34,35,36,37,37,38,39,40,41,42,43,44,45,46,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,76,77,78,79,80,81,82,83,84,85,86,87,88,89,91,93,95,96,98,100,101,102,104,106,108,110,112,114,116,118,122,124,126,128,130,132,134,136,138,140,143,145,148,151,154,157],yf=[4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,60,62,64,66,68,70,72,74,76,78,80,82,84,86,88,90,92,94,96,98,100,102,104,106,108,110,112,114,116,119,122,125,128,131,134,137,140,143,146,149,152,155,158,161,164,167,170,173,177,181,185,189,193,197,201,205,209,213,217,221,225,229,234,239,245,249,254,259,264,269,274,279,284],Bu=null,fp=[[173,148,140,0],[176,155,140,135,0],[180,157,141,134,130,0],[254,254,243,230,196,177,153,140,133,130,129,0]],vf=[0,1,4,8,5,2,3,6,9,12,13,10,7,11,14,15],xf=[-0,1,-1,2,-2,3,4,6,-3,5,-4,-5,-6,7,-7,8,-8,-9],rd=[[[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]],[[253,136,254,255,228,219,128,128,128,128,128],[189,129,242,255,227,213,255,219,128,128,128],[106,126,227,252,214,209,255,255,128,128,128]],[[1,98,248,255,236,226,255,255,128,128,128],[181,133,238,254,221,234,255,154,128,128,128],[78,134,202,247,198,180,255,219,128,128,128]],[[1,185,249,255,243,255,128,128,128,128,128],[184,150,247,255,236,224,128,128,128,128,128],[77,110,216,255,236,230,128,128,128,128,128]],[[1,101,251,255,241,255,128,128,128,128,128],[170,139,241,252,236,209,255,255,128,128,128],[37,116,196,243,228,255,255,255,128,128,128]],[[1,204,254,255,245,255,128,128,128,128,128],[207,160,250,255,238,128,128,128,128,128,128],[102,103,231,255,211,171,128,128,128,128,128]],[[1,152,252,255,240,255,128,128,128,128,128],[177,135,243,255,234,225,128,128,128,128,128],[80,129,211,255,194,224,128,128,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[246,1,255,128,128,128,128,128,128,128,128],[255,128,128,128,128,128,128,128,128,128,128]]],[[[198,35,237,223,193,187,162,160,145,155,62],[131,45,198,221,172,176,220,157,252,221,1],[68,47,146,208,149,167,221,162,255,223,128]],[[1,149,241,255,221,224,255,255,128,128,128],[184,141,234,253,222,220,255,199,128,128,128],[81,99,181,242,176,190,249,202,255,255,128]],[[1,129,232,253,214,197,242,196,255,255,128],[99,121,210,250,201,198,255,202,128,128,128],[23,91,163,242,170,187,247,210,255,255,128]],[[1,200,246,255,234,255,128,128,128,128,128],[109,178,241,255,231,245,255,255,128,128,128],[44,130,201,253,205,192,255,255,128,128,128]],[[1,132,239,251,219,209,255,165,128,128,128],[94,136,225,251,218,190,255,255,128,128,128],[22,100,174,245,186,161,255,199,128,128,128]],[[1,182,249,255,232,235,128,128,128,128,128],[124,143,241,255,227,234,128,128,128,128,128],[35,77,181,251,193,211,255,205,128,128,128]],[[1,157,247,255,236,231,255,255,128,128,128],[121,141,235,255,225,227,255,255,128,128,128],[45,99,188,251,195,217,255,224,128,128,128]],[[1,1,251,255,213,255,128,128,128,128,128],[203,1,248,255,255,128,128,128,128,128,128],[137,1,177,255,224,255,128,128,128,128,128]]],[[[253,9,248,251,207,208,255,192,128,128,128],[175,13,224,243,193,185,249,198,255,255,128],[73,17,171,221,161,179,236,167,255,234,128]],[[1,95,247,253,212,183,255,255,128,128,128],[239,90,244,250,211,209,255,255,128,128,128],[155,77,195,248,188,195,255,255,128,128,128]],[[1,24,239,251,218,219,255,205,128,128,128],[201,51,219,255,196,186,128,128,128,128,128],[69,46,190,239,201,218,255,228,128,128,128]],[[1,191,251,255,255,128,128,128,128,128,128],[223,165,249,255,213,255,128,128,128,128,128],[141,124,248,255,255,128,128,128,128,128,128]],[[1,16,248,255,255,128,128,128,128,128,128],[190,36,230,255,236,255,128,128,128,128,128],[149,1,255,128,128,128,128,128,128,128,128]],[[1,226,255,128,128,128,128,128,128,128,128],[247,192,255,128,128,128,128,128,128,128,128],[240,128,255,128,128,128,128,128,128,128,128]],[[1,134,252,255,255,128,128,128,128,128,128],[213,62,250,255,255,128,128,128,128,128,128],[55,93,255,128,128,128,128,128,128,128,128]],[[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128],[128,128,128,128,128,128,128,128,128,128,128]]],[[[202,24,213,235,186,191,220,160,240,175,255],[126,38,182,232,169,184,228,174,255,187,128],[61,46,138,219,151,178,240,170,255,216,128]],[[1,112,230,250,199,191,247,159,255,255,128],[166,109,228,252,211,215,255,174,128,128,128],[39,77,162,232,172,180,245,178,255,255,128]],[[1,52,220,246,198,199,249,220,255,255,128],[124,74,191,243,183,193,250,221,255,255,128],[24,71,130,219,154,170,243,182,255,255,128]],[[1,182,225,249,219,240,255,224,128,128,128],[149,150,226,252,216,205,255,171,128,128,128],[28,108,170,242,183,194,254,223,255,255,128]],[[1,81,230,252,204,203,255,192,128,128,128],[123,102,209,247,188,196,255,233,128,128,128],[20,95,153,243,164,173,255,203,128,128,128]],[[1,222,248,255,216,213,128,128,128,128,128],[168,175,246,252,235,205,255,255,128,128,128],[47,116,215,255,211,212,255,255,128,128,128]],[[1,121,236,253,212,214,255,255,128,128,128],[141,84,213,252,201,202,255,219,128,128,128],[42,80,160,240,162,185,255,205,128,128,128]],[[1,1,255,128,128,128,128,128,128,128,128],[244,1,255,128,128,128,128,128,128,128,128],[238,1,255,128,128,128,128,128,128,128,128]]]],dm=[[[231,120,48,89,115,113,120,152,112],[152,179,64,126,170,118,46,70,95],[175,69,143,80,85,82,72,155,103],[56,58,10,171,218,189,17,13,152],[114,26,17,163,44,195,21,10,173],[121,24,80,195,26,62,44,64,85],[144,71,10,38,171,213,144,34,26],[170,46,55,19,136,160,33,206,71],[63,20,8,114,114,208,12,9,226],[81,40,11,96,182,84,29,16,36]],[[134,183,89,137,98,101,106,165,148],[72,187,100,130,157,111,32,75,80],[66,102,167,99,74,62,40,234,128],[41,53,9,178,241,141,26,8,107],[74,43,26,146,73,166,49,23,157],[65,38,105,160,51,52,31,115,128],[104,79,12,27,217,255,87,17,7],[87,68,71,44,114,51,15,186,23],[47,41,14,110,182,183,21,17,194],[66,45,25,102,197,189,23,18,22]],[[88,88,147,150,42,46,45,196,205],[43,97,183,117,85,38,35,179,61],[39,53,200,87,26,21,43,232,171],[56,34,51,104,114,102,29,93,77],[39,28,85,171,58,165,90,98,64],[34,22,116,206,23,34,43,166,73],[107,54,32,26,51,1,81,43,31],[68,25,106,22,64,171,36,225,114],[34,19,21,102,132,188,16,76,124],[62,18,78,95,85,57,50,48,51]],[[193,101,35,159,215,111,89,46,111],[60,148,31,172,219,228,21,18,111],[112,113,77,85,179,255,38,120,114],[40,42,1,196,245,209,10,25,109],[88,43,29,140,166,213,37,43,154],[61,63,30,155,67,45,68,1,209],[100,80,8,43,154,1,51,26,71],[142,78,78,16,255,128,34,197,171],[41,40,5,102,211,183,4,1,221],[51,50,17,168,209,192,23,25,82]],[[138,31,36,171,27,166,38,44,229],[67,87,58,169,82,115,26,59,179],[63,59,90,180,59,166,93,73,154],[40,40,21,116,143,209,34,39,175],[47,15,16,183,34,223,49,45,183],[46,17,33,183,6,98,15,32,183],[57,46,22,24,128,1,54,17,37],[65,32,73,115,28,128,23,128,205],[40,3,9,115,51,192,18,6,223],[87,37,9,115,59,77,64,21,47]],[[104,55,44,218,9,54,53,130,226],[64,90,70,205,40,41,23,26,57],[54,57,112,184,5,41,38,166,213],[30,34,26,133,152,116,10,32,134],[39,19,53,221,26,114,32,73,255],[31,9,65,234,2,15,1,118,73],[75,32,12,51,192,255,160,43,51],[88,31,35,67,102,85,55,186,85],[56,21,23,111,59,205,45,37,192],[55,38,70,124,73,102,1,34,98]],[[125,98,42,88,104,85,117,175,82],[95,84,53,89,128,100,113,101,45],[75,79,123,47,51,128,81,171,1],[57,17,5,71,102,57,53,41,49],[38,33,13,121,57,73,26,1,85],[41,10,67,138,77,110,90,47,114],[115,21,2,10,102,255,166,23,6],[101,29,16,10,85,128,101,196,26],[57,18,10,102,102,213,34,20,43],[117,20,15,36,163,128,68,1,26]],[[102,61,71,37,34,53,31,243,192],[69,60,71,38,73,119,28,222,37],[68,45,128,34,1,47,11,245,171],[62,17,19,70,146,85,55,62,70],[37,43,37,154,100,163,85,160,1],[63,9,92,136,28,64,32,201,85],[75,15,9,9,64,255,184,119,16],[86,6,28,5,64,255,25,248,1],[56,8,17,132,137,255,55,116,128],[58,15,20,82,135,57,26,121,40]],[[164,50,31,137,154,133,25,35,218],[51,103,44,131,131,123,31,6,158],[86,40,64,135,148,224,45,183,128],[22,26,17,131,240,154,14,1,209],[45,16,21,91,64,222,7,1,197],[56,21,39,155,60,138,23,102,213],[83,12,13,54,192,255,68,47,28],[85,26,85,85,128,128,32,146,171],[18,11,7,63,144,171,4,4,246],[35,27,10,146,174,171,12,26,128]],[[190,80,35,99,180,80,126,54,45],[85,126,47,87,176,51,41,20,32],[101,75,128,139,118,146,116,128,85],[56,41,15,176,236,85,37,9,62],[71,30,17,119,118,255,17,18,138],[101,38,60,138,55,70,43,26,142],[146,36,19,30,171,255,97,27,20],[138,45,61,62,219,1,81,188,64],[32,41,20,117,151,142,20,21,163],[112,19,12,61,195,128,48,4,24]]],pp=[[[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[176,246,255,255,255,255,255,255,255,255,255],[223,241,252,255,255,255,255,255,255,255,255],[249,253,253,255,255,255,255,255,255,255,255]],[[255,244,252,255,255,255,255,255,255,255,255],[234,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255]],[[255,246,254,255,255,255,255,255,255,255,255],[239,253,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[251,255,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[251,254,254,255,255,255,255,255,255,255,255],[254,255,254,255,255,255,255,255,255,255,255]],[[255,254,253,255,254,255,255,255,255,255,255],[250,255,254,255,254,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[217,255,255,255,255,255,255,255,255,255,255],[225,252,241,253,255,255,254,255,255,255,255],[234,250,241,250,253,255,253,254,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[223,254,254,255,255,255,255,255,255,255,255],[238,253,254,254,255,255,255,255,255,255,255]],[[255,248,254,255,255,255,255,255,255,255,255],[249,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,255,255,255,255,255,255,255,255,255],[247,254,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[252,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[253,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[186,251,250,255,255,255,255,255,255,255,255],[234,251,244,254,255,255,255,255,255,255,255],[251,251,243,253,254,255,254,255,255,255,255]],[[255,253,254,255,255,255,255,255,255,255,255],[236,253,254,255,255,255,255,255,255,255,255],[251,253,253,254,254,255,255,255,255,255,255]],[[255,254,254,255,255,255,255,255,255,255,255],[254,254,254,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,254,255,255,255,255,255,255,255,255,255],[254,254,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]],[[[248,255,255,255,255,255,255,255,255,255,255],[250,254,252,254,255,255,255,255,255,255,255],[248,254,249,253,255,255,255,255,255,255,255]],[[255,253,253,255,255,255,255,255,255,255,255],[246,253,253,255,255,255,255,255,255,255,255],[252,254,251,254,254,255,255,255,255,255,255]],[[255,254,252,255,255,255,255,255,255,255,255],[248,254,253,255,255,255,255,255,255,255,255],[253,255,254,254,255,255,255,255,255,255,255]],[[255,251,254,255,255,255,255,255,255,255,255],[245,251,254,255,255,255,255,255,255,255,255],[253,253,254,255,255,255,255,255,255,255,255]],[[255,251,253,255,255,255,255,255,255,255,255],[252,253,254,255,255,255,255,255,255,255,255],[255,254,255,255,255,255,255,255,255,255,255]],[[255,252,255,255,255,255,255,255,255,255,255],[249,255,254,255,255,255,255,255,255,255,255],[255,255,254,255,255,255,255,255,255,255,255]],[[255,255,253,255,255,255,255,255,255,255,255],[250,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]],[[255,255,255,255,255,255,255,255,255,255,255],[254,255,255,255,255,255,255,255,255,255,255],[255,255,255,255,255,255,255,255,255,255,255]]]],cv=[0,1,2,3,6,4,5,6,6,6,6,6,6,6,6,7,0],Ih=[],Eu=[],Tu=[],gg=1,jh=2,Qc=[],ul=[];On("UpsampleRgbLinePair",_s,3),On("UpsampleBgrLinePair",Ho,3),On("UpsampleRgbaLinePair",Rr,4),On("UpsampleBgraLinePair",ya,4),On("UpsampleArgbLinePair",mr,4),On("UpsampleRgba4444LinePair",Mr,2),On("UpsampleRgb565LinePair",To,2);var ct=pe.UpsampleRgbLinePair,Fh=pe.UpsampleBgrLinePair,_f=pe.UpsampleRgbaLinePair,Ta=pe.UpsampleBgraLinePair,Ji=pe.UpsampleArgbLinePair,hm=pe.UpsampleRgba4444LinePair,Ph=pe.UpsampleRgb565LinePair,kh=16,sc=1<<kh-1,Ap=-227,fm=482,tA=6,pm=(256<<tA)-1,_0=0,id=a(256),nA=a(256),w0=a(256),b0=a(256),rA=a(fm-Ap),uv=a(fm-Ap);Ea("YuvToRgbRow",_s,3),Ea("YuvToBgrRow",Ho,3),Ea("YuvToRgbaRow",Rr,4),Ea("YuvToBgraRow",ya,4),Ea("YuvToArgbRow",mr,4),Ea("YuvToRgba4444Row",Mr,2),Ea("YuvToRgb565Row",To,2);var Hc=[0,4,8,12,128,132,136,140,256,260,264,268,384,388,392,396],mp=[0,2,8],iA=[8,7,6,4,4,2,2,2,1,1,1,1],Am=1;this.WebPDecodeRGBA=function(G,ee,Ae,Fe,Ve){var it=Eh,st=new ta,lt=new hs;st.ba=lt,lt.S=it,lt.width=[lt.width],lt.height=[lt.height];var He=lt.width,St=lt.height,on=new mi;if(on==null||G==null)var En=2;else t(on!=null),En=bu(G,ee,Ae,on.width,on.height,on.Pd,on.Qd,on.format,null);if(En!=0?He=0:(He!=null&&(He[0]=on.width[0]),St!=null&&(St[0]=on.height[0]),He=1),He){lt.width=lt.width[0],lt.height=lt.height[0],Fe!=null&&(Fe[0]=lt.width),Ve!=null&&(Ve[0]=lt.height);e:{if(Fe=new so,(Ve=new Yp).data=G,Ve.w=ee,Ve.ha=Ae,Ve.kd=1,ee=[0],t(Ve!=null),((G=bu(Ve.data,Ve.w,Ve.ha,null,null,null,ee,null,Ve))==0||G==7)&&ee[0]&&(G=4),(ee=G)==0){if(t(st!=null),Fe.data=Ve.data,Fe.w=Ve.w+Ve.offset,Fe.ha=Ve.ha-Ve.offset,Fe.put=je,Fe.ac=Mt,Fe.bc=De,Fe.ma=st,Ve.xa){if((G=Cr())==null){st=1;break e}if(function(Tn,It){var er=[0],zn=[0],un=[0];t:for(;;){if(Tn==null)return 0;if(It==null)return Tn.a=2,0;if(Tn.l=It,Tn.a=0,Ue(Tn.m,It.data,It.w,It.ha),!ve(Tn.m,er,zn,un)){Tn.a=3;break t}if(Tn.xb=jh,It.width=er[0],It.height=zn[0],!Ar(er[0],zn[0],1,Tn,null))break t;return 1}return t(Tn.a!=0),0}(G,Fe)){if(Fe=(ee=na(Fe.width,Fe.height,st.Oa,st.ba))==0){t:{Fe=G;n:for(;;){if(Fe==null){Fe=0;break t}if(t(Fe.s.yc!=null),t(Fe.s.Ya!=null),t(0<Fe.s.Wb),t((Ae=Fe.l)!=null),t((Ve=Ae.ma)!=null),Fe.xb!=0){if(Fe.ca=Ve.ba,Fe.tb=Ve.tb,t(Fe.ca!=null),!ed(Ve.Oa,Ae,qd)){Fe.a=2;break n}if(!pr(Fe,Ae.width)||Ae.da)break n;if((Ae.da||Vn(Fe.ca.S))&&Sn(),11>Fe.ca.S||(alert("todo:WebPInitConvertARGBToYUV"),Fe.ca.f.kb.F!=null&&Sn()),Fe.Pb&&0<Fe.s.ua&&Fe.s.vb.X==null&&!Dt(Fe.s.vb,Fe.s.Wa.Xa)){Fe.a=1;break n}Fe.xb=0}if(!Pn(Fe,Fe.V,Fe.Ba,Fe.c,Fe.i,Ae.o,jt))break n;Ve.Dc=Fe.Ma,Fe=1;break t}t(Fe.a!=0),Fe=0}Fe=!Fe}Fe&&(ee=G.a)}else ee=G.a}else{if((G=new Jl)==null){st=1;break e}if(G.Fa=Ve.na,G.P=Ve.P,G.qc=Ve.Sa,of(G,Fe)){if((ee=na(Fe.width,Fe.height,st.Oa,st.ba))==0){if(G.Aa=0,Ae=st.Oa,t((Ve=G)!=null),Ae!=null){if(0<(He=0>(He=Ae.Md)?0:100<He?255:255*He/100)){for(St=on=0;4>St;++St)12>(En=Ve.pb[St]).lc&&(En.ia=He*iA[0>En.lc?0:En.lc]>>3),on|=En.ia;on&&(alert("todo:VP8InitRandom"),Ve.ia=1)}Ve.Ga=Ae.Id,100<Ve.Ga?Ve.Ga=100:0>Ve.Ga&&(Ve.Ga=0)}bh(G,Fe)||(ee=G.a)}}else ee=G.a}ee==0&&st.Oa!=null&&st.Oa.fd&&(ee=Vd(st.ba))}st=ee}it=st!=0?null:11>it?lt.f.RGBA.eb:lt.f.kb.y}else it=null;return it};var wf=[3,4,3,4,4,2,2,4,4,4,2,1,1]};function g(pe,_e){for(var ye="",he=0;he<4;he++)ye+=String.fromCharCode(pe[_e++]);return ye}function y(pe,_e){return(pe[_e+0]<<0|pe[_e+1]<<8|pe[_e+2]<<16)>>>0}function b(pe,_e){return(pe[_e+0]<<0|pe[_e+1]<<8|pe[_e+2]<<16|pe[_e+3]<<24)>>>0}new f;var T=[0],S=[0],U=[],N=new f,W=e,L=function(pe,_e){var ye={},he=0,be=!1,Te=0,Ee=0;if(ye.frames=[],!function(me,Ze,ot,vt){for(var Qt=0;Qt<vt;Qt++)if(me[Ze+Qt]!=ot.charCodeAt(Qt))return!0;return!1}(pe,_e,"RIFF",4)){var Ne,Ge;for(b(pe,_e+=4),_e+=8;_e<pe.length;){var Je=g(pe,_e),Ue=b(pe,_e+=4);_e+=4;var Qe=Ue+(1&Ue);switch(Je){case"VP8 ":case"VP8L":ye.frames[he]===void 0&&(ye.frames[he]={}),(we=ye.frames[he]).src_off=be?Ee:_e-8,we.src_size=Te+Ue+8,he++,be&&(be=!1,Te=0,Ee=0);break;case"VP8X":(we=ye.header={}).feature_flags=pe[_e];var xe=_e+4;we.canvas_width=1+y(pe,xe),xe+=3,we.canvas_height=1+y(pe,xe),xe+=3;break;case"ALPH":be=!0,Te=Qe+8,Ee=_e-8;break;case"ANIM":(we=ye.header).bgcolor=b(pe,_e),xe=_e+4,we.loop_count=(Ne=pe)[(Ge=xe)+0]<<0|Ne[Ge+1]<<8,xe+=2;break;case"ANMF":var at,we;(we=ye.frames[he]={}).offset_x=2*y(pe,_e),_e+=3,we.offset_y=2*y(pe,_e),_e+=3,we.width=1+y(pe,_e),_e+=3,we.height=1+y(pe,_e),_e+=3,we.duration=y(pe,_e),_e+=3,at=pe[_e++],we.dispose=1&at,we.blend=at>>1&1}Je!="ANMF"&&(_e+=Qe)}return ye}}(W,0);L.response=W,L.rgbaoutput=!0,L.dataurl=!1;var Q=L.header?L.header:null,V=L.frames?L.frames:null;if(Q){Q.loop_counter=Q.loop_count,T=[Q.canvas_height],S=[Q.canvas_width];for(var Z=0;Z<V.length&&V[Z].blend!=0;Z++);}var ne=V[0],Y=N.WebPDecodeRGBA(W,ne.src_off,ne.src_size,S,T);ne.rgba=Y,ne.imgwidth=S[0],ne.imgheight=T[0];for(var le=0;le<S[0]*T[0]*4;le++)U[le]=Y[le];return this.width=S,this.height=T,this.data=U,this}(function(e){var t=function(){return typeof F6=="function"},n=function(T,S,U,N){var W=4,L=c;switch(N){case e.image_compression.FAST:W=1,L=a;break;case e.image_compression.MEDIUM:W=6,L=i;break;case e.image_compression.SLOW:W=9,L=f}T=r(T,S,U,L);var Q=F6(T,{level:W});return e.__addimage__.arrayBufferToBinaryString(Q)},r=function(T,S,U,N){for(var W,L,Q,V=T.length/S,Z=new Uint8Array(T.length+V),ne=y(),Y=0;Y<V;Y+=1){if(Q=Y*S,W=T.subarray(Q,Q+S),N)Z.set(N(W,U,L),Q+Y);else{for(var le,pe=ne.length,_e=[];le<pe;le+=1)_e[le]=ne[le](W,U,L);var ye=b(_e.concat());Z.set(_e[ye],Q+Y)}L=W}return Z},s=function(T){var S=Array.apply([],T);return S.unshift(0),S},a=function(T,S){var U,N=[],W=T.length;N[0]=1;for(var L=0;L<W;L+=1)U=T[L-S]||0,N[L+1]=T[L]-U+256&255;return N},c=function(T,S,U){var N,W=[],L=T.length;W[0]=2;for(var Q=0;Q<L;Q+=1)N=U&&U[Q]||0,W[Q+1]=T[Q]-N+256&255;return W},i=function(T,S,U){var N,W,L=[],Q=T.length;L[0]=3;for(var V=0;V<Q;V+=1)N=T[V-S]||0,W=U&&U[V]||0,L[V+1]=T[V]+256-(N+W>>>1)&255;return L},f=function(T,S,U){var N,W,L,Q,V=[],Z=T.length;V[0]=4;for(var ne=0;ne<Z;ne+=1)N=T[ne-S]||0,W=U&&U[ne]||0,L=U&&U[ne-S]||0,Q=g(N,W,L),V[ne+1]=T[ne]-Q+256&255;return V},g=function(T,S,U){if(T===S&&S===U)return T;var N=Math.abs(S-U),W=Math.abs(T-U),L=Math.abs(T+S-U-U);return N<=W&&N<=L?T:W<=L?S:U},y=function(){return[s,a,c,i,f]},b=function(T){var S=T.map(function(U){return U.reduce(function(N,W){return N+Math.abs(W)},0)});return S.indexOf(Math.min.apply(null,S))};e.processPNG=function(T,S,U,N){var W,L,Q,V,Z,ne,Y,le,pe,_e,ye,he,be,Te,Ee,Ne=this.decode.FLATE_DECODE,Ge="";if(this.__addimage__.isArrayBuffer(T)&&(T=new Uint8Array(T)),this.__addimage__.isArrayBufferView(T)){if(T=(Q=new yrt(T)).imgData,L=Q.bits,W=Q.colorSpace,Z=Q.colors,[4,6].indexOf(Q.colorType)!==-1){if(Q.bits===8){pe=(le=Q.pixelBitlength==32?new Uint32Array(Q.decodePixels().buffer):Q.pixelBitlength==16?new Uint16Array(Q.decodePixels().buffer):new Uint8Array(Q.decodePixels().buffer)).length,ye=new Uint8Array(pe*Q.colors),_e=new Uint8Array(pe);var Je,Ue=Q.pixelBitlength-Q.bits;for(Te=0,Ee=0;Te<pe;Te++){for(be=le[Te],Je=0;Je<Ue;)ye[Ee++]=be>>>Je&255,Je+=Q.bits;_e[Te]=be>>>Je&255}}if(Q.bits===16){pe=(le=new Uint32Array(Q.decodePixels().buffer)).length,ye=new Uint8Array(pe*(32/Q.pixelBitlength)*Q.colors),_e=new Uint8Array(pe*(32/Q.pixelBitlength)),he=Q.colors>1,Te=0,Ee=0;for(var Qe=0;Te<pe;)be=le[Te++],ye[Ee++]=be>>>0&255,he&&(ye[Ee++]=be>>>16&255,be=le[Te++],ye[Ee++]=be>>>0&255),_e[Qe++]=be>>>16&255;L=8}N!==e.image_compression.NONE&&t()?(T=n(ye,Q.width*Q.colors,Q.colors,N),Y=n(_e,Q.width,1,N)):(T=ye,Y=_e,Ne=void 0)}if(Q.colorType===3&&(W=this.color_spaces.INDEXED,ne=Q.palette,Q.transparency.indexed)){var xe=Q.transparency.indexed,at=0;for(Te=0,pe=xe.length;Te<pe;++Te)at+=xe[Te];if((at/=255)===pe-1&&xe.indexOf(0)!==-1)V=[xe.indexOf(0)];else if(at!==pe){for(le=Q.decodePixels(),_e=new Uint8Array(le.length),Te=0,pe=le.length;Te<pe;Te++)_e[Te]=xe[le[Te]];Y=n(_e,Q.width,1)}}var we=function(me){var Ze;switch(me){case e.image_compression.FAST:Ze=11;break;case e.image_compression.MEDIUM:Ze=13;break;case e.image_compression.SLOW:Ze=14;break;default:Ze=12}return Ze}(N);return Ne===this.decode.FLATE_DECODE&&(Ge="/Predictor "+we+" "),Ge+="/Colors "+Z+" /BitsPerComponent "+L+" /Columns "+Q.width,(this.__addimage__.isArrayBuffer(T)||this.__addimage__.isArrayBufferView(T))&&(T=this.__addimage__.arrayBufferToBinaryString(T)),(Y&&this.__addimage__.isArrayBuffer(Y)||this.__addimage__.isArrayBufferView(Y))&&(Y=this.__addimage__.arrayBufferToBinaryString(Y)),{alias:U,data:T,index:S,filter:Ne,decodeParameters:Ge,transparency:V,palette:ne,sMask:Y,predictor:we,width:Q.width,height:Q.height,bitsPerComponent:L,colorSpace:W}}}})(Ni.API),function(e){e.processGIF89A=function(t,n,r,s){var a=new vrt(t),c=a.width,i=a.height,f=[];a.decodeAndBlitFrameRGBA(0,f);var g={data:f,width:c,height:i},y=new Y5(100).encode(g,100);return e.processJPEG.call(this,y,n,r,s)},e.processGIF87A=e.processGIF89A}(Ni.API),SA.prototype.parseHeader=function(){if(this.fileSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.reserved=this.datav.getUint32(this.pos,!0),this.pos+=4,this.offset=this.datav.getUint32(this.pos,!0),this.pos+=4,this.headerSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.width=this.datav.getUint32(this.pos,!0),this.pos+=4,this.height=this.datav.getInt32(this.pos,!0),this.pos+=4,this.planes=this.datav.getUint16(this.pos,!0),this.pos+=2,this.bitPP=this.datav.getUint16(this.pos,!0),this.pos+=2,this.compress=this.datav.getUint32(this.pos,!0),this.pos+=4,this.rawSize=this.datav.getUint32(this.pos,!0),this.pos+=4,this.hr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.vr=this.datav.getUint32(this.pos,!0),this.pos+=4,this.colors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.importantColors=this.datav.getUint32(this.pos,!0),this.pos+=4,this.bitPP===16&&this.is_with_alpha&&(this.bitPP=15),this.bitPP<15){var e=this.colors===0?1<<this.bitPP:this.colors;this.palette=new Array(e);for(var t=0;t<e;t++){var n=this.datav.getUint8(this.pos++,!0),r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0);this.palette[t]={red:s,green:r,blue:n,quad:a}}}this.height<0&&(this.height*=-1,this.bottom_up=!1)},SA.prototype.parseBGR=function(){this.pos=this.offset;try{var e="bit"+this.bitPP,t=this.width*this.height*4;this.data=new Uint8Array(t),this[e]()}catch(n){Sa.log("bit decode error:"+n)}},SA.prototype.bit1=function(){var e,t=Math.ceil(this.width/8),n=t%4;for(e=this.height-1;e>=0;e--){for(var r=this.bottom_up?e:this.height-1-e,s=0;s<t;s++)for(var a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+8*s*4,i=0;i<8&&8*s+i<this.width;i++){var f=this.palette[a>>7-i&1];this.data[c+4*i]=f.blue,this.data[c+4*i+1]=f.green,this.data[c+4*i+2]=f.red,this.data[c+4*i+3]=255}n!==0&&(this.pos+=4-n)}},SA.prototype.bit4=function(){for(var e=Math.ceil(this.width/2),t=e%4,n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<e;s++){var a=this.datav.getUint8(this.pos++,!0),c=r*this.width*4+2*s*4,i=a>>4,f=15&a,g=this.palette[i];if(this.data[c]=g.blue,this.data[c+1]=g.green,this.data[c+2]=g.red,this.data[c+3]=255,2*s+1>=this.width)break;g=this.palette[f],this.data[c+4]=g.blue,this.data[c+4+1]=g.green,this.data[c+4+2]=g.red,this.data[c+4+3]=255}t!==0&&(this.pos+=4-t)}},SA.prototype.bit8=function(){for(var e=this.width%4,t=this.height-1;t>=0;t--){for(var n=this.bottom_up?t:this.height-1-t,r=0;r<this.width;r++){var s=this.datav.getUint8(this.pos++,!0),a=n*this.width*4+4*r;if(s<this.palette.length){var c=this.palette[s];this.data[a]=c.red,this.data[a+1]=c.green,this.data[a+2]=c.blue,this.data[a+3]=255}else this.data[a]=255,this.data[a+1]=255,this.data[a+2]=255,this.data[a+3]=255}e!==0&&(this.pos+=4-e)}},SA.prototype.bit15=function(){for(var e=this.width%3,t=parseInt("11111",2),n=this.height-1;n>=0;n--){for(var r=this.bottom_up?n:this.height-1-n,s=0;s<this.width;s++){var a=this.datav.getUint16(this.pos,!0);this.pos+=2;var c=(a&t)/t*255|0,i=(a>>5&t)/t*255|0,f=(a>>10&t)/t*255|0,g=a>>15?255:0,y=r*this.width*4+4*s;this.data[y]=f,this.data[y+1]=i,this.data[y+2]=c,this.data[y+3]=g}this.pos+=e}},SA.prototype.bit16=function(){for(var e=this.width%3,t=parseInt("11111",2),n=parseInt("111111",2),r=this.height-1;r>=0;r--){for(var s=this.bottom_up?r:this.height-1-r,a=0;a<this.width;a++){var c=this.datav.getUint16(this.pos,!0);this.pos+=2;var i=(c&t)/t*255|0,f=(c>>5&n)/n*255|0,g=(c>>11)/t*255|0,y=s*this.width*4+4*a;this.data[y]=g,this.data[y+1]=f,this.data[y+2]=i,this.data[y+3]=255}this.pos+=e}},SA.prototype.bit24=function(){for(var e=this.height-1;e>=0;e--){for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=t*this.width*4+4*n;this.data[c]=a,this.data[c+1]=s,this.data[c+2]=r,this.data[c+3]=255}this.pos+=this.width%4}},SA.prototype.bit32=function(){for(var e=this.height-1;e>=0;e--)for(var t=this.bottom_up?e:this.height-1-e,n=0;n<this.width;n++){var r=this.datav.getUint8(this.pos++,!0),s=this.datav.getUint8(this.pos++,!0),a=this.datav.getUint8(this.pos++,!0),c=this.datav.getUint8(this.pos++,!0),i=t*this.width*4+4*n;this.data[i]=a,this.data[i+1]=s,this.data[i+2]=r,this.data[i+3]=c}},SA.prototype.getData=function(){return this.data},function(e){e.processBMP=function(t,n,r,s){var a=new SA(t,!1),c=a.width,i=a.height,f={data:a.getData(),width:c,height:i},g=new Y5(100).encode(f,100);return e.processJPEG.call(this,g,n,r,s)}}(Ni.API),PY.prototype.getData=function(){return this.data},function(e){e.processWEBP=function(t,n,r,s){var a=new PY(t),c=a.width,i=a.height,f={data:a.getData(),width:c,height:i},g=new Y5(100).encode(f,100);return e.processJPEG.call(this,g,n,r,s)}}(Ni.API),Ni.API.processRGBA=function(e,t,n){for(var r=e.data,s=r.length,a=new Uint8Array(s/4*3),c=new Uint8Array(s/4),i=0,f=0,g=0;g<s;g+=4){var y=r[g],b=r[g+1],T=r[g+2],S=r[g+3];a[i++]=y,a[i++]=b,a[i++]=T,c[f++]=S}var U=this.__addimage__.arrayBufferToBinaryString(a);return{alpha:this.__addimage__.arrayBufferToBinaryString(c),data:U,index:t,alias:n,colorSpace:"DeviceRGB",bitsPerComponent:8,width:e.width,height:e.height}},Ni.API.setLanguage=function(e){return this.internal.languageSettings===void 0&&(this.internal.languageSettings={},this.internal.languageSettings.isSubscribed=!1),{af:"Afrikaans",sq:"Albanian",ar:"Arabic (Standard)","ar-DZ":"Arabic (Algeria)","ar-BH":"Arabic (Bahrain)","ar-EG":"Arabic (Egypt)","ar-IQ":"Arabic (Iraq)","ar-JO":"Arabic (Jordan)","ar-KW":"Arabic (Kuwait)","ar-LB":"Arabic (Lebanon)","ar-LY":"Arabic (Libya)","ar-MA":"Arabic (Morocco)","ar-OM":"Arabic (Oman)","ar-QA":"Arabic (Qatar)","ar-SA":"Arabic (Saudi Arabia)","ar-SY":"Arabic (Syria)","ar-TN":"Arabic (Tunisia)","ar-AE":"Arabic (U.A.E.)","ar-YE":"Arabic (Yemen)",an:"Aragonese",hy:"Armenian",as:"Assamese",ast:"Asturian",az:"Azerbaijani",eu:"Basque",be:"Belarusian",bn:"Bengali",bs:"Bosnian",br:"Breton",bg:"Bulgarian",my:"Burmese",ca:"Catalan",ch:"Chamorro",ce:"Chechen",zh:"Chinese","zh-HK":"Chinese (Hong Kong)","zh-CN":"Chinese (PRC)","zh-SG":"Chinese (Singapore)","zh-TW":"Chinese (Taiwan)",cv:"Chuvash",co:"Corsican",cr:"Cree",hr:"Croatian",cs:"Czech",da:"Danish",nl:"Dutch (Standard)","nl-BE":"Dutch (Belgian)",en:"English","en-AU":"English (Australia)","en-BZ":"English (Belize)","en-CA":"English (Canada)","en-IE":"English (Ireland)","en-JM":"English (Jamaica)","en-NZ":"English (New Zealand)","en-PH":"English (Philippines)","en-ZA":"English (South Africa)","en-TT":"English (Trinidad & Tobago)","en-GB":"English (United Kingdom)","en-US":"English (United States)","en-ZW":"English (Zimbabwe)",eo:"Esperanto",et:"Estonian",fo:"Faeroese",fj:"Fijian",fi:"Finnish",fr:"French (Standard)","fr-BE":"French (Belgium)","fr-CA":"French (Canada)","fr-FR":"French (France)","fr-LU":"French (Luxembourg)","fr-MC":"French (Monaco)","fr-CH":"French (Switzerland)",fy:"Frisian",fur:"Friulian",gd:"Gaelic (Scots)","gd-IE":"Gaelic (Irish)",gl:"Galacian",ka:"Georgian",de:"German (Standard)","de-AT":"German (Austria)","de-DE":"German (Germany)","de-LI":"German (Liechtenstein)","de-LU":"German (Luxembourg)","de-CH":"German (Switzerland)",el:"Greek",gu:"Gujurati",ht:"Haitian",he:"Hebrew",hi:"Hindi",hu:"Hungarian",is:"Icelandic",id:"Indonesian",iu:"Inuktitut",ga:"Irish",it:"Italian (Standard)","it-CH":"Italian (Switzerland)",ja:"Japanese",kn:"Kannada",ks:"Kashmiri",kk:"Kazakh",km:"Khmer",ky:"Kirghiz",tlh:"Klingon",ko:"Korean","ko-KP":"Korean (North Korea)","ko-KR":"Korean (South Korea)",la:"Latin",lv:"Latvian",lt:"Lithuanian",lb:"Luxembourgish",mk:"North Macedonia",ms:"Malay",ml:"Malayalam",mt:"Maltese",mi:"Maori",mr:"Marathi",mo:"Moldavian",nv:"Navajo",ng:"Ndonga",ne:"Nepali",no:"Norwegian",nb:"Norwegian (Bokmal)",nn:"Norwegian (Nynorsk)",oc:"Occitan",or:"Oriya",om:"Oromo",fa:"Persian","fa-IR":"Persian/Iran",pl:"Polish",pt:"Portuguese","pt-BR":"Portuguese (Brazil)",pa:"Punjabi","pa-IN":"Punjabi (India)","pa-PK":"Punjabi (Pakistan)",qu:"Quechua",rm:"Rhaeto-Romanic",ro:"Romanian","ro-MO":"Romanian (Moldavia)",ru:"Russian","ru-MO":"Russian (Moldavia)",sz:"Sami (Lappish)",sg:"Sango",sa:"Sanskrit",sc:"Sardinian",sd:"Sindhi",si:"Singhalese",sr:"Serbian",sk:"Slovak",sl:"Slovenian",so:"Somani",sb:"Sorbian",es:"Spanish","es-AR":"Spanish (Argentina)","es-BO":"Spanish (Bolivia)","es-CL":"Spanish (Chile)","es-CO":"Spanish (Colombia)","es-CR":"Spanish (Costa Rica)","es-DO":"Spanish (Dominican Republic)","es-EC":"Spanish (Ecuador)","es-SV":"Spanish (El Salvador)","es-GT":"Spanish (Guatemala)","es-HN":"Spanish (Honduras)","es-MX":"Spanish (Mexico)","es-NI":"Spanish (Nicaragua)","es-PA":"Spanish (Panama)","es-PY":"Spanish (Paraguay)","es-PE":"Spanish (Peru)","es-PR":"Spanish (Puerto Rico)","es-ES":"Spanish (Spain)","es-UY":"Spanish (Uruguay)","es-VE":"Spanish (Venezuela)",sx:"Sutu",sw:"Swahili",sv:"Swedish","sv-FI":"Swedish (Finland)","sv-SV":"Swedish (Sweden)",ta:"Tamil",tt:"Tatar",te:"Teluga",th:"Thai",tig:"Tigre",ts:"Tsonga",tn:"Tswana",tr:"Turkish",tk:"Turkmen",uk:"Ukrainian",hsb:"Upper Sorbian",ur:"Urdu",ve:"Venda",vi:"Vietnamese",vo:"Volapuk",wa:"Walloon",cy:"Welsh",xh:"Xhosa",ji:"Yiddish",zu:"Zulu"}[e]!==void 0&&(this.internal.languageSettings.languageCode=e,this.internal.languageSettings.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){this.internal.write("/Lang ("+this.internal.languageSettings.languageCode+")")}),this.internal.languageSettings.isSubscribed=!0)),this},c1=Ni.API,Y3=c1.getCharWidthsArray=function(e,t){var n,r,s=(t=t||{}).font||this.internal.getFont(),a=t.fontSize||this.internal.getFontSize(),c=t.charSpace||this.internal.getCharSpace(),i=t.widths?t.widths:s.metadata.Unicode.widths,f=i.fof?i.fof:1,g=t.kerning?t.kerning:s.metadata.Unicode.kerning,y=g.fof?g.fof:1,b=t.doKerning!==!1,T=0,S=e.length,U=0,N=i[0]||f,W=[];for(n=0;n<S;n++)r=e.charCodeAt(n),typeof s.metadata.widthOfString=="function"?W.push((s.metadata.widthOfGlyph(s.metadata.characterToGlyph(r))+c*(1e3/a)||0)/1e3):(T=b&&sa(g[r])==="object"&&!isNaN(parseInt(g[r][U],10))?g[r][U]/y:0,W.push((i[r]||N)/f+T)),U=r;return W},TY=c1.getStringUnitWidth=function(e,t){var n=(t=t||{}).fontSize||this.internal.getFontSize(),r=t.font||this.internal.getFont(),s=t.charSpace||this.internal.getCharSpace();return c1.processArabic&&(e=c1.processArabic(e)),typeof r.metadata.widthOfString=="function"?r.metadata.widthOfString(e,n,s)/n:Y3.apply(this,arguments).reduce(function(a,c){return a+c},0)},IY=function(e,t,n,r){for(var s=[],a=0,c=e.length,i=0;a!==c&&i+t[a]<n;)i+=t[a],a++;s.push(e.slice(0,a));var f=a;for(i=0;a!==c;)i+t[a]>r&&(s.push(e.slice(f,a)),i=0,f=a),i+=t[a],a++;return f!==a&&s.push(e.slice(f,a)),s},jY=function(e,t,n){n||(n={});var r,s,a,c,i,f,g,y=[],b=[y],T=n.textIndent||0,S=0,U=0,N=e.split(" "),W=Y3.apply(this,[" ",n])[0];if(f=n.lineIndent===-1?N[0].length+2:n.lineIndent||0){var L=Array(f).join(" "),Q=[];N.map(function(Z){(Z=Z.split(/\s*\n/)).length>1?Q=Q.concat(Z.map(function(ne,Y){return(Y&&ne.length?`
`:"")+ne})):Q.push(Z[0])}),N=Q,f=TY.apply(this,[L,n])}for(a=0,c=N.length;a<c;a++){var V=0;if(r=N[a],f&&r[0]==`
`&&(r=r.substr(1),V=1),T+S+(U=(s=Y3.apply(this,[r,n])).reduce(function(Z,ne){return Z+ne},0))>t||V){if(U>t){for(i=IY.apply(this,[r,s,t-(T+S),t]),y.push(i.shift()),y=[i.pop()];i.length;)b.push([i.shift()]);U=s.slice(r.length-(y[0]?y[0].length:0)).reduce(function(Z,ne){return Z+ne},0)}else y=[r];b.push(y),T=U+f,S=W}else y.push(r),T+=S+U,S=W}return g=f?function(Z,ne){return(ne?L:"")+Z.join(" ")}:function(Z){return Z.join(" ")},b.map(g)},c1.splitTextToSize=function(e,t,n){var r,s=(n=n||{}).fontSize||this.internal.getFontSize(),a=(function(y){if(y.widths&&y.kerning)return{widths:y.widths,kerning:y.kerning};var b=this.internal.getFont(y.fontName,y.fontStyle);return b.metadata.Unicode?{widths:b.metadata.Unicode.widths||{0:1},kerning:b.metadata.Unicode.kerning||{}}:{font:b.metadata,fontSize:this.internal.getFontSize(),charSpace:this.internal.getCharSpace()}}).call(this,n);r=Array.isArray(e)?e:String(e).split(/\r?\n/);var c=1*this.internal.scaleFactor*t/s;a.textIndent=n.textIndent?1*n.textIndent*this.internal.scaleFactor/s:0,a.lineIndent=n.lineIndent;var i,f,g=[];for(i=0,f=r.length;i<f;i++)g=g.concat(jY.apply(this,[r[i],c,a]));return g},function(e){e.__fontmetrics__=e.__fontmetrics__||{};for(var t="klmnopqrstuvwxyz",n={},r={},s=0;s<t.length;s++)n[t[s]]="0123456789abcdef"[s],r["0123456789abcdef"[s]]=t[s];var a=function(b){return"0x"+parseInt(b,10).toString(16)},c=e.__fontmetrics__.compress=function(b){var T,S,U,N,W=["{"];for(var L in b){if(T=b[L],isNaN(parseInt(L,10))?S="'"+L+"'":(L=parseInt(L,10),S=(S=a(L).slice(2)).slice(0,-1)+r[S.slice(-1)]),typeof T=="number")T<0?(U=a(T).slice(3),N="-"):(U=a(T).slice(2),N=""),U=N+U.slice(0,-1)+r[U.slice(-1)];else{if(sa(T)!=="object")throw new Error("Don't know what to do with value type "+sa(T)+".");U=c(T)}W.push(S+U)}return W.push("}"),W.join("")},i=e.__fontmetrics__.uncompress=function(b){if(typeof b!="string")throw new Error("Invalid argument passed to uncompress.");for(var T,S,U,N,W={},L=1,Q=W,V=[],Z="",ne="",Y=b.length-1,le=1;le<Y;le+=1)(N=b[le])=="'"?T?(U=T.join(""),T=void 0):T=[]:T?T.push(N):N=="{"?(V.push([Q,U]),Q={},U=void 0):N=="}"?((S=V.pop())[0][S[1]]=Q,U=void 0,Q=S[0]):N=="-"?L=-1:U===void 0?n.hasOwnProperty(N)?(Z+=n[N],U=parseInt(Z,16)*L,L=1,Z=""):Z+=N:n.hasOwnProperty(N)?(ne+=n[N],Q[U]=parseInt(ne,16)*L,L=1,U=void 0,ne=""):ne+=N;return W},f={codePages:["WinAnsiEncoding"],WinAnsiEncoding:i("{19m8n201n9q201o9r201s9l201t9m201u8m201w9n201x9o201y8o202k8q202l8r202m9p202q8p20aw8k203k8t203t8v203u9v2cq8s212m9t15m8w15n9w2dw9s16k8u16l9u17s9z17x8y17y9y}")},g={Unicode:{Courier:f,"Courier-Bold":f,"Courier-BoldOblique":f,"Courier-Oblique":f,Helvetica:f,"Helvetica-Bold":f,"Helvetica-BoldOblique":f,"Helvetica-Oblique":f,"Times-Roman":f,"Times-Bold":f,"Times-BoldItalic":f,"Times-Italic":f}},y={Unicode:{"Courier-Oblique":i("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-BoldItalic":i("{'widths'{k3o2q4ycx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2r202m2n2n3m2o3m2p5n202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5n4l4m4m4m4n4m4o4s4p4m4q4m4r4s4s4y4t2r4u3m4v4m4w3x4x5t4y4s4z4s5k3x5l4s5m4m5n3r5o3x5p4s5q4m5r5t5s4m5t3x5u3x5v2l5w1w5x2l5y3t5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q2l6r3m6s3r6t1w6u1w6v3m6w1w6x4y6y3r6z3m7k3m7l3m7m2r7n2r7o1w7p3r7q2w7r4m7s3m7t2w7u2r7v2n7w1q7x2n7y3t202l3mcl4mal2ram3man3mao3map3mar3mas2lat4uau1uav3maw3way4uaz2lbk2sbl3t'fof'6obo2lbp3tbq3mbr1tbs2lbu1ybv3mbz3mck4m202k3mcm4mcn4mco4mcp4mcq5ycr4mcs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz2w203k6o212m6o2dw2l2cq2l3t3m3u2l17s3x19m3m}'kerning'{cl{4qu5kt5qt5rs17ss5ts}201s{201ss}201t{cks4lscmscnscoscpscls2wu2yu201ts}201x{2wu2yu}2k{201ts}2w{4qx5kx5ou5qx5rs17su5tu}2x{17su5tu5ou}2y{4qx5kx5ou5qx5rs17ss5ts}'fof'-6ofn{17sw5tw5ou5qw5rs}7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qs}3v{17su5tu5os5qs}7p{17su5tu}ck{4qu5kt5qt5rs17ss5ts}4l{4qu5kt5qt5rs17ss5ts}cm{4qu5kt5qt5rs17ss5ts}cn{4qu5kt5qt5rs17ss5ts}co{4qu5kt5qt5rs17ss5ts}cp{4qu5kt5qt5rs17ss5ts}6l{4qu5ou5qw5rt17su5tu}5q{ckuclucmucnucoucpu4lu}5r{ckuclucmucnucoucpu4lu}7q{cksclscmscnscoscps4ls}6p{4qu5ou5qw5rt17sw5tw}ek{4qu5ou5qw5rt17su5tu}el{4qu5ou5qw5rt17su5tu}em{4qu5ou5qw5rt17su5tu}en{4qu5ou5qw5rt17su5tu}eo{4qu5ou5qw5rt17su5tu}ep{4qu5ou5qw5rt17su5tu}es{17ss5ts5qs4qu}et{4qu5ou5qw5rt17sw5tw}eu{4qu5ou5qw5rt17ss5ts}ev{17ss5ts5qs4qu}6z{17sw5tw5ou5qw5rs}fm{17sw5tw5ou5qw5rs}7n{201ts}fo{17sw5tw5ou5qw5rs}fp{17sw5tw5ou5qw5rs}fq{17sw5tw5ou5qw5rs}7r{cksclscmscnscoscps4ls}fs{17sw5tw5ou5qw5rs}ft{17su5tu}fu{17su5tu}fv{17su5tu}fw{17su5tu}fz{cksclscmscnscoscps4ls}}}"),"Helvetica-Bold":i("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),Courier:i("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-BoldOblique":i("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Bold":i("{'widths'{k3q2q5ncx2r201n3m201o6o201s2l201t2l201u2l201w3m201x3m201y3m2k1t2l2l202m2n2n3m2o3m2p6o202q6o2r1w2s2l2t2l2u3m2v3t2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w3t3x3t3y3t3z3m4k5x4l4s4m4m4n4s4o4s4p4m4q3x4r4y4s4y4t2r4u3m4v4y4w4m4x5y4y4s4z4y5k3x5l4y5m4s5n3r5o4m5p4s5q4s5r6o5s4s5t4s5u4m5v2l5w1w5x2l5y3u5z3m6k2l6l3m6m3r6n2w6o3r6p2w6q2l6r3m6s3r6t1w6u2l6v3r6w1w6x5n6y3r6z3m7k3r7l3r7m2w7n2r7o2l7p3r7q3m7r4s7s3m7t3m7u2w7v2r7w1q7x2r7y3o202l3mcl4sal2lam3man3mao3map3mar3mas2lat4uau1yav3maw3tay4uaz2lbk2sbl3t'fof'6obo2lbp3rbr1tbs2lbu2lbv3mbz3mck4s202k3mcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw2r2m3rcy2rcz2rdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3rek3mel3mem3men3meo3mep3meq4ser2wes2wet2weu2wev2wew1wex1wey1wez1wfl3rfm3mfn3mfo3mfp3mfq3mfr3tfs3mft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3m3u2l17s4s19m3m}'kerning'{cl{4qt5ks5ot5qy5rw17sv5tv}201t{cks4lscmscnscoscpscls4wv}2k{201ts}2w{4qu5ku7mu5os5qx5ru17su5tu}2x{17su5tu5ou5qs}2y{4qv5kv7mu5ot5qz5ru17su5tu}'fof'-6o7t{cksclscmscnscoscps4ls}3u{17su5tu5os5qu}3v{17su5tu5os5qu}fu{17su5tu5ou5qu}7p{17su5tu5ou5qu}ck{4qt5ks5ot5qy5rw17sv5tv}4l{4qt5ks5ot5qy5rw17sv5tv}cm{4qt5ks5ot5qy5rw17sv5tv}cn{4qt5ks5ot5qy5rw17sv5tv}co{4qt5ks5ot5qy5rw17sv5tv}cp{4qt5ks5ot5qy5rw17sv5tv}6l{17st5tt5ou5qu}17s{ckuclucmucnucoucpu4lu4wu}5o{ckuclucmucnucoucpu4lu4wu}5q{ckzclzcmzcnzcozcpz4lz4wu}5r{ckxclxcmxcnxcoxcpx4lx4wu}5t{ckuclucmucnucoucpu4lu4wu}7q{ckuclucmucnucoucpu4lu}6p{17sw5tw5ou5qu}ek{17st5tt5qu}el{17st5tt5ou5qu}em{17st5tt5qu}en{17st5tt5qu}eo{17st5tt5qu}ep{17st5tt5ou5qu}es{17ss5ts5qu}et{17sw5tw5ou5qu}eu{17sw5tw5ou5qu}ev{17ss5ts5qu}6z{17sw5tw5ou5qu5rs}fm{17sw5tw5ou5qu5rs}fn{17sw5tw5ou5qu5rs}fo{17sw5tw5ou5qu5rs}fp{17sw5tw5ou5qu5rs}fq{17sw5tw5ou5qu5rs}7r{cktcltcmtcntcotcpt4lt5os}fs{17sw5tw5ou5qu5rs}ft{17su5tu5ou5qu}7m{5os}fv{17su5tu5ou5qu}fw{17su5tu5ou5qu}fz{cksclscmscnscoscps4ls}}}"),Symbol:i("{'widths'{k3uaw4r19m3m2k1t2l2l202m2y2n3m2p5n202q6o3k3m2s2l2t2l2v3r2w1t3m3m2y1t2z1wbk2sbl3r'fof'6o3n3m3o3m3p3m3q3m3r3m3s3m3t3m3u1w3v1w3w3r3x3r3y3r3z2wbp3t3l3m5v2l5x2l5z3m2q4yfr3r7v3k7w1o7x3k}'kerning'{'fof'-6o}}"),Helvetica:i("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}"),"Helvetica-BoldOblique":i("{'widths'{k3s2q4scx1w201n3r201o6o201s1w201t1w201u1w201w3m201x3m201y3m2k1w2l2l202m2n2n3r2o3r2p5t202q6o2r1s2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v2l3w3u3x3u3y3u3z3x4k6l4l4s4m4s4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3r4v4s4w3x4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v2l5w1w5x2l5y3u5z3r6k2l6l3r6m3x6n3r6o3x6p3r6q2l6r3x6s3x6t1w6u1w6v3r6w1w6x5t6y3x6z3x7k3x7l3x7m2r7n3r7o2l7p3x7q3r7r4y7s3r7t3r7u3m7v2r7w1w7x2r7y3u202l3rcl4sal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3xbq3rbr1wbs2lbu2obv3rbz3xck4s202k3rcm4scn4sco4scp4scq6ocr4scs4mct4mcu4mcv4mcw1w2m2zcy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3res3ret3reu3rev3rew1wex1wey1wez1wfl3xfm3xfn3xfo3xfp3xfq3xfr3ufs3xft3xfu3xfv3xfw3xfz3r203k6o212m6o2dw2l2cq2l3t3r3u2l17s4m19m3r}'kerning'{cl{4qs5ku5ot5qs17sv5tv}201t{2ww4wy2yw}201w{2ks}201x{2ww4wy2yw}2k{201ts201xs}2w{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}2x{5ow5qs}2y{7qs4qu5kw5os5qw5rs17su5tu7tsfzs}'fof'-6o7p{17su5tu5ot}ck{4qs5ku5ot5qs17sv5tv}4l{4qs5ku5ot5qs17sv5tv}cm{4qs5ku5ot5qs17sv5tv}cn{4qs5ku5ot5qs17sv5tv}co{4qs5ku5ot5qs17sv5tv}cp{4qs5ku5ot5qs17sv5tv}6l{17st5tt5os}17s{2kwclvcmvcnvcovcpv4lv4wwckv}5o{2kucltcmtcntcotcpt4lt4wtckt}5q{2ksclscmscnscoscps4ls4wvcks}5r{2ks4ws}5t{2kwclvcmvcnvcovcpv4lv4wwckv}eo{17st5tt5os}fu{17su5tu5ot}6p{17ss5ts}ek{17st5tt5os}el{17st5tt5os}em{17st5tt5os}en{17st5tt5os}6o{201ts}ep{17st5tt5os}es{17ss5ts}et{17ss5ts}eu{17ss5ts}ev{17ss5ts}6z{17su5tu5os5qt}fm{17su5tu5os5qt}fn{17su5tu5os5qt}fo{17su5tu5os5qt}fp{17su5tu5os5qt}fq{17su5tu5os5qt}fs{17su5tu5os5qt}ft{17su5tu5ot}7m{5os}fv{17su5tu5ot}fw{17su5tu5ot}}}"),ZapfDingbats:i("{'widths'{k4u2k1w'fof'6o}'kerning'{'fof'-6o}}"),"Courier-Bold":i("{'widths'{k3w'fof'6o}'kerning'{'fof'-6o}}"),"Times-Italic":i("{'widths'{k3n2q4ycx2l201n3m201o5t201s2l201t2l201u2l201w3r201x3r201y3r2k1t2l2l202m2n2n3m2o3m2p5n202q5t2r1p2s2l2t2l2u3m2v4n2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v2l3w4n3x4n3y4n3z3m4k5w4l3x4m3x4n4m4o4s4p3x4q3x4r4s4s4s4t2l4u2w4v4m4w3r4x5n4y4m4z4s5k3x5l4s5m3x5n3m5o3r5p4s5q3x5r5n5s3x5t3r5u3r5v2r5w1w5x2r5y2u5z3m6k2l6l3m6m3m6n2w6o3m6p2w6q1w6r3m6s3m6t1w6u1w6v2w6w1w6x4s6y3m6z3m7k3m7l3m7m2r7n2r7o1w7p3m7q2w7r4m7s2w7t2w7u2r7v2s7w1v7x2s7y3q202l3mcl3xal2ram3man3mao3map3mar3mas2lat4wau1vav3maw4nay4waz2lbk2sbl4n'fof'6obo2lbp3mbq3obr1tbs2lbu1zbv3mbz3mck3x202k3mcm3xcn3xco3xcp3xcq5tcr4mcs3xct3xcu3xcv3xcw2l2m2ucy2lcz2ldl4mdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek3mel3mem3men3meo3mep3meq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr4nfs3mft3mfu3mfv3mfw3mfz2w203k6o212m6m2dw2l2cq2l3t3m3u2l17s3r19m3m}'kerning'{cl{5kt4qw}201s{201sw}201t{201tw2wy2yy6q-t}201x{2wy2yy}2k{201tw}2w{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}2x{17ss5ts5os}2y{7qs4qy7rs5ky7mw5os5qx5ru17su5tu}'fof'-6o6t{17ss5ts5qs}7t{5os}3v{5qs}7p{17su5tu5qs}ck{5kt4qw}4l{5kt4qw}cm{5kt4qw}cn{5kt4qw}co{5kt4qw}cp{5kt4qw}6l{4qs5ks5ou5qw5ru17su5tu}17s{2ks}5q{ckvclvcmvcnvcovcpv4lv}5r{ckuclucmucnucoucpu4lu}5t{2ks}6p{4qs5ks5ou5qw5ru17su5tu}ek{4qs5ks5ou5qw5ru17su5tu}el{4qs5ks5ou5qw5ru17su5tu}em{4qs5ks5ou5qw5ru17su5tu}en{4qs5ks5ou5qw5ru17su5tu}eo{4qs5ks5ou5qw5ru17su5tu}ep{4qs5ks5ou5qw5ru17su5tu}es{5ks5qs4qs}et{4qs5ks5ou5qw5ru17su5tu}eu{4qs5ks5qw5ru17su5tu}ev{5ks5qs4qs}ex{17ss5ts5qs}6z{4qv5ks5ou5qw5ru17su5tu}fm{4qv5ks5ou5qw5ru17su5tu}fn{4qv5ks5ou5qw5ru17su5tu}fo{4qv5ks5ou5qw5ru17su5tu}fp{4qv5ks5ou5qw5ru17su5tu}fq{4qv5ks5ou5qw5ru17su5tu}7r{5os}fs{4qv5ks5ou5qw5ru17su5tu}ft{17su5tu5qs}fu{17su5tu5qs}fv{17su5tu5qs}fw{17su5tu5qs}}}"),"Times-Roman":i("{'widths'{k3n2q4ycx2l201n3m201o6o201s2l201t2l201u2l201w2w201x2w201y2w2k1t2l2l202m2n2n3m2o3m2p5n202q6o2r1m2s2l2t2l2u3m2v3s2w1t2x2l2y1t2z1w3k3m3l3m3m3m3n3m3o3m3p3m3q3m3r3m3s3m203t2l203u2l3v1w3w3s3x3s3y3s3z2w4k5w4l4s4m4m4n4m4o4s4p3x4q3r4r4s4s4s4t2l4u2r4v4s4w3x4x5t4y4s4z4s5k3r5l4s5m4m5n3r5o3x5p4s5q4s5r5y5s4s5t4s5u3x5v2l5w1w5x2l5y2z5z3m6k2l6l2w6m3m6n2w6o3m6p2w6q2l6r3m6s3m6t1w6u1w6v3m6w1w6x4y6y3m6z3m7k3m7l3m7m2l7n2r7o1w7p3m7q3m7r4s7s3m7t3m7u2w7v3k7w1o7x3k7y3q202l3mcl4sal2lam3man3mao3map3mar3mas2lat4wau1vav3maw3say4waz2lbk2sbl3s'fof'6obo2lbp3mbq2xbr1tbs2lbu1zbv3mbz2wck4s202k3mcm4scn4sco4scp4scq5tcr4mcs3xct3xcu3xcv3xcw2l2m2tcy2lcz2ldl4sdm4sdn4sdo4sdp4sdq4sds4sdt4sdu4sdv4sdw4sdz3mek2wel2wem2wen2weo2wep2weq4mer2wes2wet2weu2wev2wew1wex1wey1wez1wfl3mfm3mfn3mfo3mfp3mfq3mfr3sfs3mft3mfu3mfv3mfw3mfz3m203k6o212m6m2dw2l2cq2l3t3m3u1w17s4s19m3m}'kerning'{cl{4qs5ku17sw5ou5qy5rw201ss5tw201ws}201s{201ss}201t{ckw4lwcmwcnwcowcpwclw4wu201ts}2k{201ts}2w{4qs5kw5os5qx5ru17sx5tx}2x{17sw5tw5ou5qu}2y{4qs5kw5os5qx5ru17sx5tx}'fof'-6o7t{ckuclucmucnucoucpu4lu5os5rs}3u{17su5tu5qs}3v{17su5tu5qs}7p{17sw5tw5qs}ck{4qs5ku17sw5ou5qy5rw201ss5tw201ws}4l{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cm{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cn{4qs5ku17sw5ou5qy5rw201ss5tw201ws}co{4qs5ku17sw5ou5qy5rw201ss5tw201ws}cp{4qs5ku17sw5ou5qy5rw201ss5tw201ws}6l{17su5tu5os5qw5rs}17s{2ktclvcmvcnvcovcpv4lv4wuckv}5o{ckwclwcmwcnwcowcpw4lw4wu}5q{ckyclycmycnycoycpy4ly4wu5ms}5r{cktcltcmtcntcotcpt4lt4ws}5t{2ktclvcmvcnvcovcpv4lv4wuckv}7q{cksclscmscnscoscps4ls}6p{17su5tu5qw5rs}ek{5qs5rs}el{17su5tu5os5qw5rs}em{17su5tu5os5qs5rs}en{17su5qs5rs}eo{5qs5rs}ep{17su5tu5os5qw5rs}es{5qs}et{17su5tu5qw5rs}eu{17su5tu5qs5rs}ev{5qs}6z{17sv5tv5os5qx5rs}fm{5os5qt5rs}fn{17sv5tv5os5qx5rs}fo{17sv5tv5os5qx5rs}fp{5os5qt5rs}fq{5os5qt5rs}7r{ckuclucmucnucoucpu4lu5os}fs{17sv5tv5os5qx5rs}ft{17ss5ts5qs}fu{17sw5tw5qs}fv{17sw5tw5qs}fw{17ss5ts5qs}fz{ckuclucmucnucoucpu4lu5os5rs}}}"),"Helvetica-Oblique":i("{'widths'{k3p2q4mcx1w201n3r201o6o201s1q201t1q201u1q201w2l201x2l201y2l2k1w2l1w202m2n2n3r2o3r2p5t202q6o2r1n2s2l2t2l2u2r2v3u2w1w2x2l2y1w2z1w3k3r3l3r3m3r3n3r3o3r3p3r3q3r3r3r3s3r203t2l203u2l3v1w3w3u3x3u3y3u3z3r4k6p4l4m4m4m4n4s4o4s4p4m4q3x4r4y4s4s4t1w4u3m4v4m4w3r4x5n4y4s4z4y5k4m5l4y5m4s5n4m5o3x5p4s5q4m5r5y5s4m5t4m5u3x5v1w5w1w5x1w5y2z5z3r6k2l6l3r6m3r6n3m6o3r6p3r6q1w6r3r6s3r6t1q6u1q6v3m6w1q6x5n6y3r6z3r7k3r7l3r7m2l7n3m7o1w7p3r7q3m7r4s7s3m7t3m7u3m7v2l7w1u7x2l7y3u202l3rcl4mal2lam3ran3rao3rap3rar3ras2lat4tau2pav3raw3uay4taz2lbk2sbl3u'fof'6obo2lbp3rbr1wbs2lbu2obv3rbz3xck4m202k3rcm4mcn4mco4mcp4mcq6ocr4scs4mct4mcu4mcv4mcw1w2m2ncy1wcz1wdl4sdm4ydn4ydo4ydp4ydq4yds4ydt4sdu4sdv4sdw4sdz3xek3rel3rem3ren3reo3rep3req5ter3mes3ret3reu3rev3rew1wex1wey1wez1wfl3rfm3rfn3rfo3rfp3rfq3rfr3ufs3xft3rfu3rfv3rfw3rfz3m203k6o212m6o2dw2l2cq2l3t3r3u1w17s4m19m3r}'kerning'{5q{4wv}cl{4qs5kw5ow5qs17sv5tv}201t{2wu4w1k2yu}201x{2wu4wy2yu}17s{2ktclucmucnu4otcpu4lu4wycoucku}2w{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}2x{17sy5ty5oy5qs}2y{7qs4qz5k1m17sy5ow5qx5rsfsu5ty7tufzu}'fof'-6o7p{17sv5tv5ow}ck{4qs5kw5ow5qs17sv5tv}4l{4qs5kw5ow5qs17sv5tv}cm{4qs5kw5ow5qs17sv5tv}cn{4qs5kw5ow5qs17sv5tv}co{4qs5kw5ow5qs17sv5tv}cp{4qs5kw5ow5qs17sv5tv}6l{17sy5ty5ow}do{17st5tt}4z{17st5tt}7s{fst}dm{17st5tt}dn{17st5tt}5o{ckwclwcmwcnwcowcpw4lw4wv}dp{17st5tt}dq{17st5tt}7t{5ow}ds{17st5tt}5t{2ktclucmucnu4otcpu4lu4wycoucku}fu{17sv5tv5ow}6p{17sy5ty5ow5qs}ek{17sy5ty5ow}el{17sy5ty5ow}em{17sy5ty5ow}en{5ty}eo{17sy5ty5ow}ep{17sy5ty5ow}es{17sy5ty5qs}et{17sy5ty5ow5qs}eu{17sy5ty5ow5qs}ev{17sy5ty5ow5qs}6z{17sy5ty5ow5qs}fm{17sy5ty5ow5qs}fn{17sy5ty5ow5qs}fo{17sy5ty5ow5qs}fp{17sy5ty5qs}fq{17sy5ty5ow5qs}7r{5ow}fs{17sy5ty5ow5qs}ft{17sv5tv5ow}7m{5ow}fv{17sv5tv5ow}fw{17sv5tv5ow}}}")}};e.events.push(["addFont",function(b){var T=b.font,S=y.Unicode[T.postScriptName];S&&(T.metadata.Unicode={},T.metadata.Unicode.widths=S.widths,T.metadata.Unicode.kerning=S.kerning);var U=g.Unicode[T.postScriptName];U&&(T.metadata.Unicode.encoding=U,T.encoding=U.codePages[0])}])}(Ni.API),function(e){var t=function(n){for(var r=n.length,s=new Uint8Array(r),a=0;a<r;a++)s[a]=n.charCodeAt(a);return s};e.API.events.push(["addFont",function(n){var r=void 0,s=n.font,a=n.instance;if(!s.isStandardFont){if(a===void 0)throw new Error("Font does not exist in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");if(typeof(r=a.existsFileInVFS(s.postScriptName)===!1?a.loadFile(s.postScriptName):a.getFileFromVFS(s.postScriptName))!="string")throw new Error("Font is not stored as string-data in vFS, import fonts or remove declaration doc.addFont('"+s.postScriptName+"').");(function(c,i){i=/^\x00\x01\x00\x00/.test(i)?t(i):t(PC(i)),c.metadata=e.API.TTFFont.open(i),c.metadata.Unicode=c.metadata.Unicode||{encoding:{},kerning:{},widths:[]},c.metadata.glyIdsUsed=[0]})(s,r)}}])}(Ni),function(e){function t(){return(is.canvg?Promise.resolve(is.canvg):B6(()=>import("./index.es-HoOqXyPA.js"),[])).catch(function(n){return Promise.reject(new Error("Could not load canvg: "+n))}).then(function(n){return n.default?n.default:n})}Ni.API.addSvgAsImage=function(n,r,s,a,c,i,f,g){if(isNaN(r)||isNaN(s))throw Sa.error("jsPDF.addSvgAsImage: Invalid coordinates",arguments),new Error("Invalid coordinates passed to jsPDF.addSvgAsImage");if(isNaN(a)||isNaN(c))throw Sa.error("jsPDF.addSvgAsImage: Invalid measurements",arguments),new Error("Invalid measurements (width and/or height) passed to jsPDF.addSvgAsImage");var y=document.createElement("canvas");y.width=a,y.height=c;var b=y.getContext("2d");b.fillStyle="#fff",b.fillRect(0,0,y.width,y.height);var T={ignoreMouse:!0,ignoreAnimation:!0,ignoreDimensions:!0},S=this;return t().then(function(U){return U.fromString(b,n,T)},function(){return Promise.reject(new Error("Could not load canvg."))}).then(function(U){return U.render(T)}).then(function(){S.addImage(y.toDataURL("image/jpeg",1),r,s,a,c,f,g)})}}(),Ni.API.putTotalPages=function(e){var t,n=0;parseInt(this.internal.getFont().id.substr(1),10)<15?(t=new RegExp(e,"g"),n=this.internal.getNumberOfPages()):(t=new RegExp(this.pdfEscape16(e,this.internal.getFont()),"g"),n=this.pdfEscape16(this.internal.getNumberOfPages()+"",this.internal.getFont()));for(var r=1;r<=this.internal.getNumberOfPages();r++)for(var s=0;s<this.internal.pages[r].length;s++)this.internal.pages[r][s]=this.internal.pages[r][s].replace(t,n);return this},Ni.API.viewerPreferences=function(e,t){var n;e=e||{},t=t||!1;var r,s,a,c={HideToolbar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideMenubar:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},HideWindowUI:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},FitWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},CenterWindow:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.3},DisplayDocTitle:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.4},NonFullScreenPageMode:{defaultValue:"UseNone",value:"UseNone",type:"name",explicitSet:!1,valueSet:["UseNone","UseOutlines","UseThumbs","UseOC"],pdfVersion:1.3},Direction:{defaultValue:"L2R",value:"L2R",type:"name",explicitSet:!1,valueSet:["L2R","R2L"],pdfVersion:1.3},ViewArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},ViewClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintArea:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintClip:{defaultValue:"CropBox",value:"CropBox",type:"name",explicitSet:!1,valueSet:["MediaBox","CropBox","TrimBox","BleedBox","ArtBox"],pdfVersion:1.4},PrintScaling:{defaultValue:"AppDefault",value:"AppDefault",type:"name",explicitSet:!1,valueSet:["AppDefault","None"],pdfVersion:1.6},Duplex:{defaultValue:"",value:"none",type:"name",explicitSet:!1,valueSet:["Simplex","DuplexFlipShortEdge","DuplexFlipLongEdge","none"],pdfVersion:1.7},PickTrayByPDFSize:{defaultValue:!1,value:!1,type:"boolean",explicitSet:!1,valueSet:[!0,!1],pdfVersion:1.7},PrintPageRange:{defaultValue:"",value:"",type:"array",explicitSet:!1,valueSet:null,pdfVersion:1.7},NumCopies:{defaultValue:1,value:1,type:"integer",explicitSet:!1,valueSet:null,pdfVersion:1.7}},i=Object.keys(c),f=[],g=0,y=0,b=0;function T(U,N){var W,L=!1;for(W=0;W<U.length;W+=1)U[W]===N&&(L=!0);return L}if(this.internal.viewerpreferences===void 0&&(this.internal.viewerpreferences={},this.internal.viewerpreferences.configuration=JSON.parse(JSON.stringify(c)),this.internal.viewerpreferences.isSubscribed=!1),n=this.internal.viewerpreferences.configuration,e==="reset"||t===!0){var S=i.length;for(b=0;b<S;b+=1)n[i[b]].value=n[i[b]].defaultValue,n[i[b]].explicitSet=!1}if(sa(e)==="object"){for(s in e)if(a=e[s],T(i,s)&&a!==void 0){if(n[s].type==="boolean"&&typeof a=="boolean")n[s].value=a;else if(n[s].type==="name"&&T(n[s].valueSet,a))n[s].value=a;else if(n[s].type==="integer"&&Number.isInteger(a))n[s].value=a;else if(n[s].type==="array"){for(g=0;g<a.length;g+=1)if(r=!0,a[g].length===1&&typeof a[g][0]=="number")f.push(String(a[g]-1));else if(a[g].length>1){for(y=0;y<a[g].length;y+=1)typeof a[g][y]!="number"&&(r=!1);r===!0&&f.push([a[g][0]-1,a[g][1]-1].join(" "))}n[s].value="["+f.join(" ")+"]"}else n[s].value=n[s].defaultValue;n[s].explicitSet=!0}}return this.internal.viewerpreferences.isSubscribed===!1&&(this.internal.events.subscribe("putCatalog",function(){var U,N=[];for(U in n)n[U].explicitSet===!0&&(n[U].type==="name"?N.push("/"+U+" /"+n[U].value):N.push("/"+U+" "+n[U].value));N.length!==0&&this.internal.write(`/ViewerPreferences
<<
`+N.join(`
`)+`
>>`)}),this.internal.viewerpreferences.isSubscribed=!0),this.internal.viewerpreferences.configuration=n,this},function(e){var t=function(){var r='<rdf:RDF xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"><rdf:Description rdf:about="" xmlns:jspdf="'+this.internal.__metadata__.namespaceuri+'"><jspdf:metadata>',s=unescape(encodeURIComponent('<x:xmpmeta xmlns:x="adobe:ns:meta/">')),a=unescape(encodeURIComponent(r)),c=unescape(encodeURIComponent(this.internal.__metadata__.metadata)),i=unescape(encodeURIComponent("</jspdf:metadata></rdf:Description></rdf:RDF>")),f=unescape(encodeURIComponent("</x:xmpmeta>")),g=a.length+c.length+i.length+s.length+f.length;this.internal.__metadata__.metadata_object_number=this.internal.newObject(),this.internal.write("<< /Type /Metadata /Subtype /XML /Length "+g+" >>"),this.internal.write("stream"),this.internal.write(s+a+c+i+f),this.internal.write("endstream"),this.internal.write("endobj")},n=function(){this.internal.__metadata__.metadata_object_number&&this.internal.write("/Metadata "+this.internal.__metadata__.metadata_object_number+" 0 R")};e.addMetadata=function(r,s){return this.internal.__metadata__===void 0&&(this.internal.__metadata__={metadata:r,namespaceuri:s||"http://jspdf.default.namespaceuri/"},this.internal.events.subscribe("putCatalog",n),this.internal.events.subscribe("postPutResources",t)),this}}(Ni.API),function(e){var t=e.API,n=t.pdfEscape16=function(a,c){for(var i,f=c.metadata.Unicode.widths,g=["","0","00","000","0000"],y=[""],b=0,T=a.length;b<T;++b){if(i=c.metadata.characterToGlyph(a.charCodeAt(b)),c.metadata.glyIdsUsed.push(i),c.metadata.toUnicode[i]=a.charCodeAt(b),f.indexOf(i)==-1&&(f.push(i),f.push([parseInt(c.metadata.widthOfGlyph(i),10)])),i=="0")return y.join("");i=i.toString(16),y.push(g[4-i.length],i)}return y.join("")},r=function(a){var c,i,f,g,y,b,T;for(y=`/CIDInit /ProcSet findresource begin
12 dict begin
begincmap
/CIDSystemInfo <<
  /Registry (Adobe)
  /Ordering (UCS)
  /Supplement 0
>> def
/CMapName /Adobe-Identity-UCS def
/CMapType 2 def
1 begincodespacerange
<0000><ffff>
endcodespacerange`,f=[],b=0,T=(i=Object.keys(a).sort(function(S,U){return S-U})).length;b<T;b++)c=i[b],f.length>=100&&(y+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar`,f=[]),a[c]!==void 0&&a[c]!==null&&typeof a[c].toString=="function"&&(g=("0000"+a[c].toString(16)).slice(-4),c=("0000"+(+c).toString(16)).slice(-4),f.push("<"+c+"><"+g+">"));return f.length&&(y+=`
`+f.length+` beginbfchar
`+f.join(`
`)+`
endbfchar
`),y+=`endcmap
CMapName currentdict /CMap defineresource pop
end
end`};t.events.push(["putFont",function(a){(function(c){var i=c.font,f=c.out,g=c.newObject,y=c.putStream;if(i.metadata instanceof e.API.TTFFont&&i.encoding==="Identity-H"){for(var b=i.metadata.Unicode.widths,T=i.metadata.subset.encode(i.metadata.glyIdsUsed,1),S="",U=0;U<T.length;U++)S+=String.fromCharCode(T[U]);var N=g();y({data:S,addLength1:!0,objectId:N}),f("endobj");var W=g();y({data:r(i.metadata.toUnicode),addLength1:!0,objectId:W}),f("endobj");var L=g();f("<<"),f("/Type /FontDescriptor"),f("/FontName /"+C1(i.fontName)),f("/FontFile2 "+N+" 0 R"),f("/FontBBox "+e.API.PDFObject.convert(i.metadata.bbox)),f("/Flags "+i.metadata.flags),f("/StemV "+i.metadata.stemV),f("/ItalicAngle "+i.metadata.italicAngle),f("/Ascent "+i.metadata.ascender),f("/Descent "+i.metadata.decender),f("/CapHeight "+i.metadata.capHeight),f(">>"),f("endobj");var Q=g();f("<<"),f("/Type /Font"),f("/BaseFont /"+C1(i.fontName)),f("/FontDescriptor "+L+" 0 R"),f("/W "+e.API.PDFObject.convert(b)),f("/CIDToGIDMap /Identity"),f("/DW 1000"),f("/Subtype /CIDFontType2"),f("/CIDSystemInfo"),f("<<"),f("/Supplement 0"),f("/Registry (Adobe)"),f("/Ordering ("+i.encoding+")"),f(">>"),f(">>"),f("endobj"),i.objectNumber=g(),f("<<"),f("/Type /Font"),f("/Subtype /Type0"),f("/ToUnicode "+W+" 0 R"),f("/BaseFont /"+C1(i.fontName)),f("/Encoding /"+i.encoding),f("/DescendantFonts ["+Q+" 0 R]"),f(">>"),f("endobj"),i.isAlreadyPutted=!0}})(a)}]),t.events.push(["putFont",function(a){(function(c){var i=c.font,f=c.out,g=c.newObject,y=c.putStream;if(i.metadata instanceof e.API.TTFFont&&i.encoding==="WinAnsiEncoding"){for(var b=i.metadata.rawData,T="",S=0;S<b.length;S++)T+=String.fromCharCode(b[S]);var U=g();y({data:T,addLength1:!0,objectId:U}),f("endobj");var N=g();y({data:r(i.metadata.toUnicode),addLength1:!0,objectId:N}),f("endobj");var W=g();f("<<"),f("/Descent "+i.metadata.decender),f("/CapHeight "+i.metadata.capHeight),f("/StemV "+i.metadata.stemV),f("/Type /FontDescriptor"),f("/FontFile2 "+U+" 0 R"),f("/Flags 96"),f("/FontBBox "+e.API.PDFObject.convert(i.metadata.bbox)),f("/FontName /"+C1(i.fontName)),f("/ItalicAngle "+i.metadata.italicAngle),f("/Ascent "+i.metadata.ascender),f(">>"),f("endobj"),i.objectNumber=g();for(var L=0;L<i.metadata.hmtx.widths.length;L++)i.metadata.hmtx.widths[L]=parseInt(i.metadata.hmtx.widths[L]*(1e3/i.metadata.head.unitsPerEm));f("<</Subtype/TrueType/Type/Font/ToUnicode "+N+" 0 R/BaseFont/"+C1(i.fontName)+"/FontDescriptor "+W+" 0 R/Encoding/"+i.encoding+" /FirstChar 29 /LastChar 255 /Widths "+e.API.PDFObject.convert(i.metadata.hmtx.widths)+">>"),f("endobj"),i.isAlreadyPutted=!0}})(a)}]);var s=function(a){var c,i=a.text||"",f=a.x,g=a.y,y=a.options||{},b=a.mutex||{},T=b.pdfEscape,S=b.activeFontKey,U=b.fonts,N=S,W="",L=0,Q="",V=U[N].encoding;if(U[N].encoding!=="Identity-H")return{text:i,x:f,y:g,options:y,mutex:b};for(Q=i,N=S,Array.isArray(i)&&(Q=i[0]),L=0;L<Q.length;L+=1)U[N].metadata.hasOwnProperty("cmap")&&(c=U[N].metadata.cmap.unicode.codeMap[Q[L].charCodeAt(0)]),c||Q[L].charCodeAt(0)<256&&U[N].metadata.hasOwnProperty("Unicode")?W+=Q[L]:W+="";var Z="";return parseInt(N.slice(1))<14||V==="WinAnsiEncoding"?Z=T(W,N).split("").map(function(ne){return ne.charCodeAt(0).toString(16)}).join(""):V==="Identity-H"&&(Z=n(W,U[N])),b.isHex=!0,{text:Z,x:f,y:g,options:y,mutex:b}};t.events.push(["postProcessText",function(a){var c=a.text||"",i=[],f={text:c,x:a.x,y:a.y,options:a.options,mutex:a.mutex};if(Array.isArray(c)){var g=0;for(g=0;g<c.length;g+=1)Array.isArray(c[g])&&c[g].length===3?i.push([s(Object.assign({},f,{text:c[g][0]})).text,c[g][1],c[g][2]]):i.push(s(Object.assign({},f,{text:c[g]})).text);a.text=i}else a.text=s(Object.assign({},f,{text:c})).text}])}(Ni),function(e){var t=function(){return this.internal.vFS===void 0&&(this.internal.vFS={}),!0};e.existsFileInVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0},e.addFileToVFS=function(n,r){return t.call(this),this.internal.vFS[n]=r,this},e.getFileFromVFS=function(n){return t.call(this),this.internal.vFS[n]!==void 0?this.internal.vFS[n]:null}}(Ni.API),function(e){e.__bidiEngine__=e.prototype.__bidiEngine__=function(r){var s,a,c,i,f,g,y,b=t,T=[[0,3,0,1,0,0,0],[0,3,0,1,2,2,0],[0,3,0,17,2,0,1],[0,3,5,5,4,1,0],[0,3,21,21,4,0,1],[0,3,5,5,4,2,0]],S=[[2,0,1,1,0,1,0],[2,0,1,1,0,2,0],[2,0,2,1,3,2,0],[2,0,2,33,3,1,1]],U={L:0,R:1,EN:2,AN:3,N:4,B:5,S:6},N={0:0,5:1,6:2,7:3,32:4,251:5,254:6,255:7},W=["(",")","(","<",">","<","[","]","[","{","}","{","«","»","«","‹","›","‹","⁅","⁆","⁅","⁽","⁾","⁽","₍","₎","₍","≤","≥","≤","〈","〉","〈","﹙","﹚","﹙","﹛","﹜","﹛","﹝","﹞","﹝","﹤","﹥","﹤"],L=new RegExp(/^([1-4|9]|1[0-9]|2[0-9]|3[0168]|4[04589]|5[012]|7[78]|159|16[0-9]|17[0-2]|21[569]|22[03489]|250)$/),Q=!1,V=0;this.__bidiEngine__={};var Z=function(he){var be=he.charCodeAt(),Te=be>>8,Ee=N[Te];return Ee!==void 0?b[256*Ee+(255&be)]:Te===252||Te===253?"AL":L.test(Te)?"L":Te===8?"R":"N"},ne=function(he){for(var be,Te=0;Te<he.length;Te++){if((be=Z(he.charAt(Te)))==="L")return!1;if(be==="R")return!0}return!1},Y=function(he,be,Te,Ee){var Ne,Ge,Je,Ue,Qe=be[Ee];switch(Qe){case"L":case"R":Q=!1;break;case"N":case"AN":break;case"EN":Q&&(Qe="AN");break;case"AL":Q=!0,Qe="R";break;case"WS":Qe="N";break;case"CS":Ee<1||Ee+1>=be.length||(Ne=Te[Ee-1])!=="EN"&&Ne!=="AN"||(Ge=be[Ee+1])!=="EN"&&Ge!=="AN"?Qe="N":Q&&(Ge="AN"),Qe=Ge===Ne?Ge:"N";break;case"ES":Qe=(Ne=Ee>0?Te[Ee-1]:"B")==="EN"&&Ee+1<be.length&&be[Ee+1]==="EN"?"EN":"N";break;case"ET":if(Ee>0&&Te[Ee-1]==="EN"){Qe="EN";break}if(Q){Qe="N";break}for(Je=Ee+1,Ue=be.length;Je<Ue&&be[Je]==="ET";)Je++;Qe=Je<Ue&&be[Je]==="EN"?"EN":"N";break;case"NSM":if(c&&!i){for(Ue=be.length,Je=Ee+1;Je<Ue&&be[Je]==="NSM";)Je++;if(Je<Ue){var xe=he[Ee],at=xe>=1425&&xe<=2303||xe===64286;if(Ne=be[Je],at&&(Ne==="R"||Ne==="AL")){Qe="R";break}}}Qe=Ee<1||(Ne=be[Ee-1])==="B"?"N":Te[Ee-1];break;case"B":Q=!1,s=!0,Qe=V;break;case"S":a=!0,Qe="N";break;case"LRE":case"RLE":case"LRO":case"RLO":case"PDF":Q=!1;break;case"BN":Qe="N"}return Qe},le=function(he,be,Te){var Ee=he.split("");return Te&&pe(Ee,Te,{hiLevel:V}),Ee.reverse(),be&&be.reverse(),Ee.join("")},pe=function(he,be,Te){var Ee,Ne,Ge,Je,Ue,Qe=-1,xe=he.length,at=0,we=[],me=V?S:T,Ze=[];for(Q=!1,s=!1,a=!1,Ne=0;Ne<xe;Ne++)Ze[Ne]=Z(he[Ne]);for(Ge=0;Ge<xe;Ge++){if(Ue=at,we[Ge]=Y(he,Ze,we,Ge),Ee=240&(at=me[Ue][U[we[Ge]]]),at&=15,be[Ge]=Je=me[at][5],Ee>0)if(Ee===16){for(Ne=Qe;Ne<Ge;Ne++)be[Ne]=1;Qe=-1}else Qe=-1;if(me[at][6])Qe===-1&&(Qe=Ge);else if(Qe>-1){for(Ne=Qe;Ne<Ge;Ne++)be[Ne]=Je;Qe=-1}Ze[Ge]==="B"&&(be[Ge]=0),Te.hiLevel|=Je}a&&function(ot,vt,Qt){for(var Ot=0;Ot<Qt;Ot++)if(ot[Ot]==="S"){vt[Ot]=V;for(var kt=Ot-1;kt>=0&&ot[kt]==="WS";kt--)vt[kt]=V}}(Ze,be,xe)},_e=function(he,be,Te,Ee,Ne){if(!(Ne.hiLevel<he)){if(he===1&&V===1&&!s)return be.reverse(),void(Te&&Te.reverse());for(var Ge,Je,Ue,Qe,xe=be.length,at=0;at<xe;){if(Ee[at]>=he){for(Ue=at+1;Ue<xe&&Ee[Ue]>=he;)Ue++;for(Qe=at,Je=Ue-1;Qe<Je;Qe++,Je--)Ge=be[Qe],be[Qe]=be[Je],be[Je]=Ge,Te&&(Ge=Te[Qe],Te[Qe]=Te[Je],Te[Je]=Ge);at=Ue}at++}}},ye=function(he,be,Te){var Ee=he.split(""),Ne={hiLevel:V};return Te||(Te=[]),pe(Ee,Te,Ne),function(Ge,Je,Ue){if(Ue.hiLevel!==0&&y)for(var Qe,xe=0;xe<Ge.length;xe++)Je[xe]===1&&(Qe=W.indexOf(Ge[xe]))>=0&&(Ge[xe]=W[Qe+1])}(Ee,Te,Ne),_e(2,Ee,be,Te,Ne),_e(1,Ee,be,Te,Ne),Ee.join("")};return this.__bidiEngine__.doBidiReorder=function(he,be,Te){if(function(Ne,Ge){if(Ge)for(var Je=0;Je<Ne.length;Je++)Ge[Je]=Je;i===void 0&&(i=ne(Ne)),g===void 0&&(g=ne(Ne))}(he,be),c||!f||g)if(c&&f&&i^g)V=i?1:0,he=le(he,be,Te);else if(!c&&f&&g)V=i?1:0,he=ye(he,be,Te),he=le(he,be);else if(!c||i||f||g){if(c&&!f&&i^g)he=le(he,be),i?(V=0,he=ye(he,be,Te)):(V=1,he=ye(he,be,Te),he=le(he,be));else if(c&&i&&!f&&g)V=1,he=ye(he,be,Te),he=le(he,be);else if(!c&&!f&&i^g){var Ee=y;i?(V=1,he=ye(he,be,Te),V=0,y=!1,he=ye(he,be,Te),y=Ee):(V=0,he=ye(he,be,Te),he=le(he,be),V=1,y=!1,he=ye(he,be,Te),y=Ee,he=le(he,be))}}else V=0,he=ye(he,be,Te);else V=i?1:0,he=ye(he,be,Te);return he},this.__bidiEngine__.setOptions=function(he){he&&(c=he.isInputVisual,f=he.isOutputVisual,i=he.isInputRtl,g=he.isOutputRtl,y=he.isSymmetricSwapping)},this.__bidiEngine__.setOptions(r),this.__bidiEngine__};var t=["BN","BN","BN","BN","BN","BN","BN","BN","BN","S","B","S","WS","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","B","B","B","S","WS","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","BN","BN","BN","BN","BN","BN","B","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","BN","CS","N","ET","ET","ET","ET","N","N","N","N","L","N","N","BN","N","N","ET","ET","EN","EN","N","L","N","N","N","EN","L","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","L","L","L","L","L","L","L","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","L","N","N","N","N","N","ET","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","NSM","R","NSM","NSM","R","NSM","NSM","R","NSM","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","N","N","N","N","N","R","R","R","R","R","N","N","N","N","N","N","N","N","N","N","N","AN","AN","AN","AN","AN","AN","N","N","AL","ET","ET","AL","CS","AL","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","AN","AN","AN","AN","AN","AN","AN","AN","AN","ET","AN","AN","AL","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AN","N","NSM","NSM","NSM","NSM","NSM","NSM","AL","AL","NSM","NSM","N","NSM","NSM","NSM","NSM","AL","AL","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","AL","AL","NSM","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","R","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","R","R","N","N","N","N","R","N","N","N","N","N","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","WS","BN","BN","BN","L","R","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","B","LRE","RLE","PDF","LRO","RLO","CS","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","WS","BN","BN","BN","BN","BN","N","LRI","RLI","FSI","PDI","BN","BN","BN","BN","BN","BN","EN","L","N","N","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","L","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","ES","ES","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","N","N","N","N","N","R","NSM","R","R","R","R","R","R","R","R","R","R","ES","R","R","R","R","R","R","R","R","R","R","R","R","R","N","R","R","R","R","R","N","R","N","R","R","N","R","R","N","R","R","R","R","R","R","R","R","R","R","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","NSM","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","CS","N","CS","N","N","CS","N","N","N","N","N","N","N","N","N","ET","N","N","ES","ES","N","N","N","N","N","ET","ET","N","N","N","N","N","AL","AL","AL","AL","AL","N","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","AL","N","N","BN","N","N","N","ET","ET","ET","N","N","N","N","N","ES","CS","ES","CS","CS","EN","EN","EN","EN","EN","EN","EN","EN","EN","EN","CS","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","N","N","N","N","N","N","N","N","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","L","N","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","L","L","L","N","N","L","L","L","N","N","N","ET","ET","N","N","N","ET","ET","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N","N"],n=new e.__bidiEngine__({isInputVisual:!0});e.API.events.push(["postProcessText",function(r){var s=r.text,a=(r.x,r.y,r.options||{}),c=(r.mutex,a.lang,[]);if(a.isInputVisual=typeof a.isInputVisual!="boolean"||a.isInputVisual,n.setOptions(a),Object.prototype.toString.call(s)==="[object Array]"){var i=0;for(c=[],i=0;i<s.length;i+=1)Object.prototype.toString.call(s[i])==="[object Array]"?c.push([n.doBidiReorder(s[i][0]),s[i][1],s[i][2]]):c.push([n.doBidiReorder(s[i])]);r.text=c}else r.text=n.doBidiReorder(s);n.setOptions({isInputVisual:!0})}])}(Ni),Ni.API.TTFFont=function(){function e(t){var n;if(this.rawData=t,n=this.contents=new Xy(t),this.contents.pos=4,n.readString(4)==="ttcf")throw new Error("TTCF not supported.");n.pos=0,this.parse(),this.subset=new Lrt(this),this.registerTTF()}return e.open=function(t){return new e(t)},e.prototype.parse=function(){return this.directory=new xrt(this.contents),this.head=new wrt(this),this.name=new Ert(this),this.cmap=new ohe(this),this.toUnicode={},this.hhea=new brt(this),this.maxp=new Trt(this),this.hmtx=new Irt(this),this.post=new Srt(this),this.os2=new Crt(this),this.loca=new krt(this),this.glyf=new jrt(this),this.ascender=this.os2.exists&&this.os2.ascender||this.hhea.ascender,this.decender=this.os2.exists&&this.os2.decender||this.hhea.decender,this.lineGap=this.os2.exists&&this.os2.lineGap||this.hhea.lineGap,this.bbox=[this.head.xMin,this.head.yMin,this.head.xMax,this.head.yMax]},e.prototype.registerTTF=function(){var t,n,r,s,a;if(this.scaleFactor=1e3/this.head.unitsPerEm,this.bbox=(function(){var c,i,f,g;for(g=[],c=0,i=(f=this.bbox).length;c<i;c++)t=f[c],g.push(Math.round(t*this.scaleFactor));return g}).call(this),this.stemV=0,this.post.exists?(r=255&(s=this.post.italic_angle),32768&(n=s>>16)&&(n=-(1+(65535^n))),this.italicAngle=+(n+"."+r)):this.italicAngle=0,this.ascender=Math.round(this.ascender*this.scaleFactor),this.decender=Math.round(this.decender*this.scaleFactor),this.lineGap=Math.round(this.lineGap*this.scaleFactor),this.capHeight=this.os2.exists&&this.os2.capHeight||this.ascender,this.xHeight=this.os2.exists&&this.os2.xHeight||0,this.familyClass=(this.os2.exists&&this.os2.familyClass||0)>>8,this.isSerif=(a=this.familyClass)===1||a===2||a===3||a===4||a===5||a===7,this.isScript=this.familyClass===10,this.flags=0,this.post.isFixedPitch&&(this.flags|=1),this.isSerif&&(this.flags|=2),this.isScript&&(this.flags|=8),this.italicAngle!==0&&(this.flags|=64),this.flags|=32,!this.cmap.unicode)throw new Error("No unicode cmap for font")},e.prototype.characterToGlyph=function(t){var n;return((n=this.cmap.unicode)!=null?n.codeMap[t]:void 0)||0},e.prototype.widthOfGlyph=function(t){var n;return n=1e3/this.head.unitsPerEm,this.hmtx.forGlyph(t).advance*n},e.prototype.widthOfString=function(t,n,r){var s,a,c,i;for(c=0,a=0,i=(t=""+t).length;0<=i?a<i:a>i;a=0<=i?++a:--a)s=t.charCodeAt(a),c+=this.widthOfGlyph(this.characterToGlyph(s))+r*(1e3/n)||0;return c*(n/1e3)},e.prototype.lineHeight=function(t,n){var r;return n==null&&(n=!1),r=n?this.lineGap:0,(this.ascender+r-this.decender)/1e3*t},e}();var om,Xy=function(){function e(t){this.data=t??[],this.pos=0,this.length=this.data.length}return e.prototype.readByte=function(){return this.data[this.pos++]},e.prototype.writeByte=function(t){return this.data[this.pos++]=t},e.prototype.readUInt32=function(){return 16777216*this.readByte()+(this.readByte()<<16)+(this.readByte()<<8)+this.readByte()},e.prototype.writeUInt32=function(t){return this.writeByte(t>>>24&255),this.writeByte(t>>16&255),this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt32=function(){var t;return(t=this.readUInt32())>=2147483648?t-4294967296:t},e.prototype.writeInt32=function(t){return t<0&&(t+=4294967296),this.writeUInt32(t)},e.prototype.readUInt16=function(){return this.readByte()<<8|this.readByte()},e.prototype.writeUInt16=function(t){return this.writeByte(t>>8&255),this.writeByte(255&t)},e.prototype.readInt16=function(){var t;return(t=this.readUInt16())>=32768?t-65536:t},e.prototype.writeInt16=function(t){return t<0&&(t+=65536),this.writeUInt16(t)},e.prototype.readString=function(t){var n,r;for(r=[],n=0;0<=t?n<t:n>t;n=0<=t?++n:--n)r[n]=String.fromCharCode(this.readByte());return r.join("")},e.prototype.writeString=function(t){var n,r,s;for(s=[],n=0,r=t.length;0<=r?n<r:n>r;n=0<=r?++n:--n)s.push(this.writeByte(t.charCodeAt(n)));return s},e.prototype.readShort=function(){return this.readInt16()},e.prototype.writeShort=function(t){return this.writeInt16(t)},e.prototype.readLongLong=function(){var t,n,r,s,a,c,i,f;return t=this.readByte(),n=this.readByte(),r=this.readByte(),s=this.readByte(),a=this.readByte(),c=this.readByte(),i=this.readByte(),f=this.readByte(),128&t?-1*(72057594037927940*(255^t)+281474976710656*(255^n)+1099511627776*(255^r)+4294967296*(255^s)+16777216*(255^a)+65536*(255^c)+256*(255^i)+(255^f)+1):72057594037927940*t+281474976710656*n+1099511627776*r+4294967296*s+16777216*a+65536*c+256*i+f},e.prototype.writeLongLong=function(t){var n,r;return n=Math.floor(t/4294967296),r=4294967295&t,this.writeByte(n>>24&255),this.writeByte(n>>16&255),this.writeByte(n>>8&255),this.writeByte(255&n),this.writeByte(r>>24&255),this.writeByte(r>>16&255),this.writeByte(r>>8&255),this.writeByte(255&r)},e.prototype.readInt=function(){return this.readInt32()},e.prototype.writeInt=function(t){return this.writeInt32(t)},e.prototype.read=function(t){var n,r;for(n=[],r=0;0<=t?r<t:r>t;r=0<=t?++r:--r)n.push(this.readByte());return n},e.prototype.write=function(t){var n,r,s,a;for(a=[],r=0,s=t.length;r<s;r++)n=t[r],a.push(this.writeByte(n));return a},e}(),xrt=function(){var e;function t(n){var r,s,a;for(this.scalarType=n.readInt(),this.tableCount=n.readShort(),this.searchRange=n.readShort(),this.entrySelector=n.readShort(),this.rangeShift=n.readShort(),this.tables={},s=0,a=this.tableCount;0<=a?s<a:s>a;s=0<=a?++s:--s)r={tag:n.readString(4),checksum:n.readInt(),offset:n.readInt(),length:n.readInt()},this.tables[r.tag]=r}return t.prototype.encode=function(n){var r,s,a,c,i,f,g,y,b,T,S,U,N;for(N in S=Object.keys(n).length,f=Math.log(2),b=16*Math.floor(Math.log(S)/f),c=Math.floor(b/f),y=16*S-b,(s=new Xy).writeInt(this.scalarType),s.writeShort(S),s.writeShort(b),s.writeShort(c),s.writeShort(y),a=16*S,g=s.pos+a,i=null,U=[],n)for(T=n[N],s.writeString(N),s.writeInt(e(T)),s.writeInt(g),s.writeInt(T.length),U=U.concat(T),N==="head"&&(i=g),g+=T.length;g%4;)U.push(0),g++;return s.write(U),r=2981146554-e(s.data),s.pos=i+8,s.writeUInt32(r),s.data},e=function(n){var r,s,a,c;for(n=ahe.call(n);n.length%4;)n.push(0);for(a=new Xy(n),s=0,r=0,c=n.length;r<c;r=r+=4)s+=a.readUInt32();return 4294967295&s},t}(),_rt={}.hasOwnProperty,hg=function(e,t){for(var n in t)_rt.call(t,n)&&(e[n]=t[n]);function r(){this.constructor=e}return r.prototype=t.prototype,e.prototype=new r,e.__super__=t.prototype,e};om=function(){function e(t){var n;this.file=t,n=this.file.directory.tables[this.tag],this.exists=!!n,n&&(this.offset=n.offset,this.length=n.length,this.parse(this.file.contents))}return e.prototype.parse=function(){},e.prototype.encode=function(){},e.prototype.raw=function(){return this.exists?(this.file.contents.pos=this.offset,this.file.contents.read(this.length)):null},e}();var wrt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="head",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.revision=n.readInt(),this.checkSumAdjustment=n.readInt(),this.magicNumber=n.readInt(),this.flags=n.readShort(),this.unitsPerEm=n.readShort(),this.created=n.readLongLong(),this.modified=n.readLongLong(),this.xMin=n.readShort(),this.yMin=n.readShort(),this.xMax=n.readShort(),this.yMax=n.readShort(),this.macStyle=n.readShort(),this.lowestRecPPEM=n.readShort(),this.fontDirectionHint=n.readShort(),this.indexToLocFormat=n.readShort(),this.glyphDataFormat=n.readShort()},t.prototype.encode=function(n){var r;return(r=new Xy).writeInt(this.version),r.writeInt(this.revision),r.writeInt(this.checkSumAdjustment),r.writeInt(this.magicNumber),r.writeShort(this.flags),r.writeShort(this.unitsPerEm),r.writeLongLong(this.created),r.writeLongLong(this.modified),r.writeShort(this.xMin),r.writeShort(this.yMin),r.writeShort(this.xMax),r.writeShort(this.yMax),r.writeShort(this.macStyle),r.writeShort(this.lowestRecPPEM),r.writeShort(this.fontDirectionHint),r.writeShort(n),r.writeShort(this.glyphDataFormat),r.data},t}(),kY=function(){function e(t,n){var r,s,a,c,i,f,g,y,b,T,S,U,N,W,L,Q,V;switch(this.platformID=t.readUInt16(),this.encodingID=t.readShort(),this.offset=n+t.readInt(),b=t.pos,t.pos=this.offset,this.format=t.readUInt16(),this.length=t.readUInt16(),this.language=t.readUInt16(),this.isUnicode=this.platformID===3&&this.encodingID===1&&this.format===4||this.platformID===0&&this.format===4,this.codeMap={},this.format){case 0:for(f=0;f<256;++f)this.codeMap[f]=t.readByte();break;case 4:for(S=t.readUInt16(),T=S/2,t.pos+=6,a=function(){var Z,ne;for(ne=[],f=Z=0;0<=T?Z<T:Z>T;f=0<=T?++Z:--Z)ne.push(t.readUInt16());return ne}(),t.pos+=2,N=function(){var Z,ne;for(ne=[],f=Z=0;0<=T?Z<T:Z>T;f=0<=T?++Z:--Z)ne.push(t.readUInt16());return ne}(),g=function(){var Z,ne;for(ne=[],f=Z=0;0<=T?Z<T:Z>T;f=0<=T?++Z:--Z)ne.push(t.readUInt16());return ne}(),y=function(){var Z,ne;for(ne=[],f=Z=0;0<=T?Z<T:Z>T;f=0<=T?++Z:--Z)ne.push(t.readUInt16());return ne}(),s=(this.length-t.pos+this.offset)/2,i=function(){var Z,ne;for(ne=[],f=Z=0;0<=s?Z<s:Z>s;f=0<=s?++Z:--Z)ne.push(t.readUInt16());return ne}(),f=L=0,V=a.length;L<V;f=++L)for(W=a[f],r=Q=U=N[f];U<=W?Q<=W:Q>=W;r=U<=W?++Q:--Q)y[f]===0?c=r+g[f]:(c=i[y[f]/2+(r-U)-(T-f)]||0)!==0&&(c+=g[f]),this.codeMap[r]=65535&c}t.pos=b}return e.encode=function(t,n){var r,s,a,c,i,f,g,y,b,T,S,U,N,W,L,Q,V,Z,ne,Y,le,pe,_e,ye,he,be,Te,Ee,Ne,Ge,Je,Ue,Qe,xe,at,we,me,Ze,ot,vt,Qt,Ot,kt,Me,Ht,Zt;switch(Ee=new Xy,c=Object.keys(t).sort(function(pn,Dt){return pn-Dt}),n){case"macroman":for(N=0,W=function(){var pn=[];for(U=0;U<256;++U)pn.push(0);return pn}(),Q={0:0},a={},Ne=0,Qe=c.length;Ne<Qe;Ne++)Q[kt=t[s=c[Ne]]]==null&&(Q[kt]=++N),a[s]={old:t[s],new:Q[t[s]]},W[s]=Q[t[s]];return Ee.writeUInt16(1),Ee.writeUInt16(0),Ee.writeUInt32(12),Ee.writeUInt16(0),Ee.writeUInt16(262),Ee.writeUInt16(0),Ee.write(W),{charMap:a,subtable:Ee.data,maxGlyphID:N+1};case"unicode":for(be=[],b=[],V=0,Q={},r={},L=g=null,Ge=0,xe=c.length;Ge<xe;Ge++)Q[ne=t[s=c[Ge]]]==null&&(Q[ne]=++V),r[s]={old:ne,new:Q[ne]},i=Q[ne]-s,L!=null&&i===g||(L&&b.push(L),be.push(s),g=i),L=s;for(L&&b.push(L),b.push(65535),be.push(65535),ye=2*(_e=be.length),pe=2*Math.pow(Math.log(_e)/Math.LN2,2),T=Math.log(pe/2)/Math.LN2,le=2*_e-pe,f=[],Y=[],S=[],U=Je=0,at=be.length;Je<at;U=++Je){if(he=be[U],y=b[U],he===65535){f.push(0),Y.push(0);break}if(he-(Te=r[he].new)>=32768)for(f.push(0),Y.push(2*(S.length+_e-U)),s=Ue=he;he<=y?Ue<=y:Ue>=y;s=he<=y?++Ue:--Ue)S.push(r[s].new);else f.push(Te-he),Y.push(0)}for(Ee.writeUInt16(3),Ee.writeUInt16(1),Ee.writeUInt32(12),Ee.writeUInt16(4),Ee.writeUInt16(16+8*_e+2*S.length),Ee.writeUInt16(0),Ee.writeUInt16(ye),Ee.writeUInt16(pe),Ee.writeUInt16(T),Ee.writeUInt16(le),Qt=0,we=b.length;Qt<we;Qt++)s=b[Qt],Ee.writeUInt16(s);for(Ee.writeUInt16(0),Ot=0,me=be.length;Ot<me;Ot++)s=be[Ot],Ee.writeUInt16(s);for(Me=0,Ze=f.length;Me<Ze;Me++)i=f[Me],Ee.writeUInt16(i);for(Ht=0,ot=Y.length;Ht<ot;Ht++)Z=Y[Ht],Ee.writeUInt16(Z);for(Zt=0,vt=S.length;Zt<vt;Zt++)N=S[Zt],Ee.writeUInt16(N);return{charMap:r,subtable:Ee.data,maxGlyphID:V+1}}},e}(),ohe=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="cmap",t.prototype.parse=function(n){var r,s,a;for(n.pos=this.offset,this.version=n.readUInt16(),a=n.readUInt16(),this.tables=[],this.unicode=null,s=0;0<=a?s<a:s>a;s=0<=a?++s:--s)r=new kY(n,this.offset),this.tables.push(r),r.isUnicode&&this.unicode==null&&(this.unicode=r);return!0},t.encode=function(n,r){var s,a;return r==null&&(r="macroman"),s=kY.encode(n,r),(a=new Xy).writeUInt16(0),a.writeUInt16(1),s.table=a.data.concat(s.subtable),s},t}(),brt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="hhea",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.ascender=n.readShort(),this.decender=n.readShort(),this.lineGap=n.readShort(),this.advanceWidthMax=n.readShort(),this.minLeftSideBearing=n.readShort(),this.minRightSideBearing=n.readShort(),this.xMaxExtent=n.readShort(),this.caretSlopeRise=n.readShort(),this.caretSlopeRun=n.readShort(),this.caretOffset=n.readShort(),n.pos+=8,this.metricDataFormat=n.readShort(),this.numberOfMetrics=n.readUInt16()},t}(),Crt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="OS/2",t.prototype.parse=function(n){if(n.pos=this.offset,this.version=n.readUInt16(),this.averageCharWidth=n.readShort(),this.weightClass=n.readUInt16(),this.widthClass=n.readUInt16(),this.type=n.readShort(),this.ySubscriptXSize=n.readShort(),this.ySubscriptYSize=n.readShort(),this.ySubscriptXOffset=n.readShort(),this.ySubscriptYOffset=n.readShort(),this.ySuperscriptXSize=n.readShort(),this.ySuperscriptYSize=n.readShort(),this.ySuperscriptXOffset=n.readShort(),this.ySuperscriptYOffset=n.readShort(),this.yStrikeoutSize=n.readShort(),this.yStrikeoutPosition=n.readShort(),this.familyClass=n.readShort(),this.panose=function(){var r,s;for(s=[],r=0;r<10;++r)s.push(n.readByte());return s}(),this.charRange=function(){var r,s;for(s=[],r=0;r<4;++r)s.push(n.readInt());return s}(),this.vendorID=n.readString(4),this.selection=n.readShort(),this.firstCharIndex=n.readShort(),this.lastCharIndex=n.readShort(),this.version>0&&(this.ascent=n.readShort(),this.descent=n.readShort(),this.lineGap=n.readShort(),this.winAscent=n.readShort(),this.winDescent=n.readShort(),this.codePageRange=function(){var r,s;for(s=[],r=0;r<2;r=++r)s.push(n.readInt());return s}(),this.version>1))return this.xHeight=n.readShort(),this.capHeight=n.readShort(),this.defaultChar=n.readShort(),this.breakChar=n.readShort(),this.maxContext=n.readShort()},t}(),Srt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="post",t.prototype.parse=function(n){var r,s,a;switch(n.pos=this.offset,this.format=n.readInt(),this.italicAngle=n.readInt(),this.underlinePosition=n.readShort(),this.underlineThickness=n.readShort(),this.isFixedPitch=n.readInt(),this.minMemType42=n.readInt(),this.maxMemType42=n.readInt(),this.minMemType1=n.readInt(),this.maxMemType1=n.readInt(),this.format){case 65536:break;case 131072:var c;for(s=n.readUInt16(),this.glyphNameIndex=[],c=0;0<=s?c<s:c>s;c=0<=s?++c:--c)this.glyphNameIndex.push(n.readUInt16());for(this.names=[],a=[];n.pos<this.offset+this.length;)r=n.readByte(),a.push(this.names.push(n.readString(r)));return a;case 151552:return s=n.readUInt16(),this.offsets=n.read(s);case 196608:break;case 262144:return this.map=(function(){var i,f,g;for(g=[],c=i=0,f=this.file.maxp.numGlyphs;0<=f?i<f:i>f;c=0<=f?++i:--i)g.push(n.readUInt32());return g}).call(this)}},t}(),Brt=function(e,t){this.raw=e,this.length=e.length,this.platformID=t.platformID,this.encodingID=t.encodingID,this.languageID=t.languageID},Ert=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="name",t.prototype.parse=function(n){var r,s,a,c,i,f,g,y,b,T,S;for(n.pos=this.offset,n.readShort(),r=n.readShort(),f=n.readShort(),s=[],c=0;0<=r?c<r:c>r;c=0<=r?++c:--c)s.push({platformID:n.readShort(),encodingID:n.readShort(),languageID:n.readShort(),nameID:n.readShort(),length:n.readShort(),offset:this.offset+f+n.readShort()});for(g={},c=b=0,T=s.length;b<T;c=++b)a=s[c],n.pos=a.offset,y=n.readString(a.length),i=new Brt(y,a),g[S=a.nameID]==null&&(g[S]=[]),g[a.nameID].push(i);this.strings=g,this.copyright=g[0],this.fontFamily=g[1],this.fontSubfamily=g[2],this.uniqueSubfamily=g[3],this.fontName=g[4],this.version=g[5];try{this.postscriptName=g[6][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}catch{this.postscriptName=g[4][0].raw.replace(/[\x00-\x19\x80-\xff]/g,"")}return this.trademark=g[7],this.manufacturer=g[8],this.designer=g[9],this.description=g[10],this.vendorUrl=g[11],this.designerUrl=g[12],this.license=g[13],this.licenseUrl=g[14],this.preferredFamily=g[15],this.preferredSubfamily=g[17],this.compatibleFull=g[18],this.sampleText=g[19]},t}(),Trt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="maxp",t.prototype.parse=function(n){return n.pos=this.offset,this.version=n.readInt(),this.numGlyphs=n.readUInt16(),this.maxPoints=n.readUInt16(),this.maxContours=n.readUInt16(),this.maxCompositePoints=n.readUInt16(),this.maxComponentContours=n.readUInt16(),this.maxZones=n.readUInt16(),this.maxTwilightPoints=n.readUInt16(),this.maxStorage=n.readUInt16(),this.maxFunctionDefs=n.readUInt16(),this.maxInstructionDefs=n.readUInt16(),this.maxStackElements=n.readUInt16(),this.maxSizeOfInstructions=n.readUInt16(),this.maxComponentElements=n.readUInt16(),this.maxComponentDepth=n.readUInt16()},t}(),Irt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="hmtx",t.prototype.parse=function(n){var r,s,a,c,i,f,g;for(n.pos=this.offset,this.metrics=[],r=0,f=this.file.hhea.numberOfMetrics;0<=f?r<f:r>f;r=0<=f?++r:--r)this.metrics.push({advance:n.readUInt16(),lsb:n.readInt16()});for(a=this.file.maxp.numGlyphs-this.file.hhea.numberOfMetrics,this.leftSideBearings=function(){var y,b;for(b=[],r=y=0;0<=a?y<a:y>a;r=0<=a?++y:--y)b.push(n.readInt16());return b}(),this.widths=(function(){var y,b,T,S;for(S=[],y=0,b=(T=this.metrics).length;y<b;y++)c=T[y],S.push(c.advance);return S}).call(this),s=this.widths[this.widths.length-1],g=[],r=i=0;0<=a?i<a:i>a;r=0<=a?++i:--i)g.push(this.widths.push(s));return g},t.prototype.forGlyph=function(n){return n in this.metrics?this.metrics[n]:{advance:this.metrics[this.metrics.length-1].advance,lsb:this.leftSideBearings[n-this.metrics.length]}},t}(),ahe=[].slice,jrt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="glyf",t.prototype.parse=function(){return this.cache={}},t.prototype.glyphFor=function(n){var r,s,a,c,i,f,g,y,b,T;return n in this.cache?this.cache[n]:(c=this.file.loca,r=this.file.contents,s=c.indexOf(n),(a=c.lengthOf(n))===0?this.cache[n]=null:(r.pos=this.offset+s,i=(f=new Xy(r.read(a))).readShort(),y=f.readShort(),T=f.readShort(),g=f.readShort(),b=f.readShort(),this.cache[n]=i===-1?new Prt(f,y,T,g,b):new Frt(f,i,y,T,g,b),this.cache[n]))},t.prototype.encode=function(n,r,s){var a,c,i,f,g;for(i=[],c=[],f=0,g=r.length;f<g;f++)a=n[r[f]],c.push(i.length),a&&(i=i.concat(a.encode(s)));return c.push(i.length),{table:i,offsets:c}},t}(),Frt=function(){function e(t,n,r,s,a,c){this.raw=t,this.numberOfContours=n,this.xMin=r,this.yMin=s,this.xMax=a,this.yMax=c,this.compound=!1}return e.prototype.encode=function(){return this.raw.data},e}(),Prt=function(){function e(t,n,r,s,a){var c,i;for(this.raw=t,this.xMin=n,this.yMin=r,this.xMax=s,this.yMax=a,this.compound=!0,this.glyphIDs=[],this.glyphOffsets=[],c=this.raw;i=c.readShort(),this.glyphOffsets.push(c.pos),this.glyphIDs.push(c.readUInt16()),32&i;)c.pos+=1&i?4:2,128&i?c.pos+=8:64&i?c.pos+=4:8&i&&(c.pos+=2)}return e.prototype.encode=function(){var t,n,r;for(n=new Xy(ahe.call(this.raw.data)),t=0,r=this.glyphIDs.length;t<r;++t)n.pos=this.glyphOffsets[t];return n.data},e}(),krt=function(e){function t(){return t.__super__.constructor.apply(this,arguments)}return hg(t,om),t.prototype.tag="loca",t.prototype.parse=function(n){var r,s;return n.pos=this.offset,r=this.file.head.indexToLocFormat,this.offsets=r===0?(function(){var a,c;for(c=[],s=0,a=this.length;s<a;s+=2)c.push(2*n.readUInt16());return c}).call(this):(function(){var a,c;for(c=[],s=0,a=this.length;s<a;s+=4)c.push(n.readUInt32());return c}).call(this)},t.prototype.indexOf=function(n){return this.offsets[n]},t.prototype.lengthOf=function(n){return this.offsets[n+1]-this.offsets[n]},t.prototype.encode=function(n,r){for(var s=new Uint32Array(this.offsets.length),a=0,c=0,i=0;i<s.length;++i)if(s[i]=a,c<r.length&&r[c]==i){++c,s[i]=a;var f=this.offsets[i],g=this.offsets[i+1]-f;g>0&&(a+=g)}for(var y=new Array(4*s.length),b=0;b<s.length;++b)y[4*b+3]=255&s[b],y[4*b+2]=(65280&s[b])>>8,y[4*b+1]=(16711680&s[b])>>16,y[4*b]=(4278190080&s[b])>>24;return y},t}(),Lrt=function(){function e(t){this.font=t,this.subset={},this.unicodes={},this.next=33}return e.prototype.generateCmap=function(){var t,n,r,s,a;for(n in s=this.font.cmap.tables[0].codeMap,t={},a=this.subset)r=a[n],t[n]=s[r];return t},e.prototype.glyphsFor=function(t){var n,r,s,a,c,i,f;for(s={},c=0,i=t.length;c<i;c++)s[a=t[c]]=this.font.glyf.glyphFor(a);for(a in n=[],s)(r=s[a])!=null&&r.compound&&n.push.apply(n,r.glyphIDs);if(n.length>0)for(a in f=this.glyphsFor(n))r=f[a],s[a]=r;return s},e.prototype.encode=function(t,n){var r,s,a,c,i,f,g,y,b,T,S,U,N,W,L;for(s in r=ohe.encode(this.generateCmap(),"unicode"),c=this.glyphsFor(t),S={0:0},L=r.charMap)S[(f=L[s]).old]=f.new;for(U in T=r.maxGlyphID,c)U in S||(S[U]=T++);return y=function(Q){var V,Z;for(V in Z={},Q)Z[Q[V]]=V;return Z}(S),b=Object.keys(y).sort(function(Q,V){return Q-V}),N=function(){var Q,V,Z;for(Z=[],Q=0,V=b.length;Q<V;Q++)i=b[Q],Z.push(y[i]);return Z}(),a=this.font.glyf.encode(c,N,S),g=this.font.loca.encode(a.offsets,N),W={cmap:this.font.cmap.raw(),glyf:a.table,loca:g,hmtx:this.font.hmtx.raw(),hhea:this.font.hhea.raw(),maxp:this.font.maxp.raw(),post:this.font.post.raw(),name:this.font.name.raw(),head:this.font.head.encode(n)},this.font.os2.exists&&(W["OS/2"]=this.font.os2.raw()),this.font.directory.encode(W)},e}();Ni.API.PDFObject=function(){var e;function t(){}return e=function(n,r){return(Array(r+1).join("0")+n).slice(-r)},t.convert=function(n){var r,s,a,c;if(Array.isArray(n))return"["+function(){var i,f,g;for(g=[],i=0,f=n.length;i<f;i++)r=n[i],g.push(t.convert(r));return g}().join(" ")+"]";if(typeof n=="string")return"/"+n;if(n!=null&&n.isString)return"("+n+")";if(n instanceof Date)return"(D:"+e(n.getUTCFullYear(),4)+e(n.getUTCMonth(),2)+e(n.getUTCDate(),2)+e(n.getUTCHours(),2)+e(n.getUTCMinutes(),2)+e(n.getUTCSeconds(),2)+"Z)";if({}.toString.call(n)==="[object Object]"){for(s in a=["<<"],n)c=n[s],a.push("/"+s+" "+t.convert(c));return a.push(">>"),a.join(`
`)}return""+n},t}();const Mrt=Object.freeze(Object.defineProperty({__proto__:null,AcroForm:hrt,AcroFormAppearance:pi,AcroFormButton:Xc,AcroFormCheckBox:MC,AcroFormChoiceField:Bx,AcroFormComboBox:Tx,AcroFormEditBox:kC,AcroFormListBox:Ex,AcroFormPasswordField:NC,AcroFormPushButton:LC,AcroFormRadioButton:Ix,AcroFormTextField:My,GState:aB,ShadingPattern:hy,TilingPattern:px,default:Ni,jsPDF:Ni},Symbol.toStringTag,{value:"Module"}));function Uw(e){return yl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4"},child:[]},{tag:"polyline",attr:{points:"7 10 12 15 17 10"},child:[]},{tag:"line",attr:{x1:"12",y1:"15",x2:"12",y2:"3"},child:[]}]})(e)}function rF(e){return yl({tag:"svg",attr:{viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:"2",strokeLinecap:"round",strokeLinejoin:"round"},child:[{tag:"path",attr:{d:"M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"},child:[]},{tag:"circle",attr:{cx:"12",cy:"12",r:"3"},child:[]}]})(e)}/*!
 * html2canvas 1.4.1 <https://html2canvas.hertzen.com>
 * Copyright (c) 2022 Niklas von Hertzen <https://hertzen.com>
 * Released under MIT License
 *//*! *****************************************************************************
Copyright (c) Microsoft Corporation.

Permission to use, copy, modify, and/or distribute this software for any
purpose with or without fee is hereby granted.

THE SOFTWARE IS PROVIDED "AS IS" AND THE AUTHOR DISCLAIMS ALL WARRANTIES WITH
REGARD TO THIS SOFTWARE INCLUDING ALL IMPLIED WARRANTIES OF MERCHANTABILITY
AND FITNESS. IN NO EVENT SHALL THE AUTHOR BE LIABLE FOR ANY SPECIAL, DIRECT,
INDIRECT, OR CONSEQUENTIAL DAMAGES OR ANY DAMAGES WHATSOEVER RESULTING FROM
LOSS OF USE, DATA OR PROFITS, WHETHER IN AN ACTION OF CONTRACT, NEGLIGENCE OR
OTHER TORTIOUS ACTION, ARISING OUT OF OR IN CONNECTION WITH THE USE OR
PERFORMANCE OF THIS SOFTWARE.
***************************************************************************** */var O6=function(e,t){return O6=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(n,r){n.__proto__=r}||function(n,r){for(var s in r)Object.prototype.hasOwnProperty.call(r,s)&&(n[s]=r[s])},O6(e,t)};function am(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Class extends value "+String(t)+" is not a constructor or null");O6(e,t);function n(){this.constructor=e}e.prototype=t===null?Object.create(t):(n.prototype=t.prototype,new n)}var D6=function(){return D6=Object.assign||function(t){for(var n,r=1,s=arguments.length;r<s;r++){n=arguments[r];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(t[a]=n[a])}return t},D6.apply(this,arguments)};function dh(e,t,n,r){function s(a){return a instanceof n?a:new n(function(c){c(a)})}return new(n||(n=Promise))(function(a,c){function i(y){try{g(r.next(y))}catch(b){c(b)}}function f(y){try{g(r.throw(y))}catch(b){c(b)}}function g(y){y.done?a(y.value):s(y.value).then(i,f)}g((r=r.apply(e,[])).next())})}function Cd(e,t){var n={label:0,sent:function(){if(a[0]&1)throw a[1];return a[1]},trys:[],ops:[]},r,s,a,c;return c={next:i(0),throw:i(1),return:i(2)},typeof Symbol=="function"&&(c[Symbol.iterator]=function(){return this}),c;function i(g){return function(y){return f([g,y])}}function f(g){if(r)throw new TypeError("Generator is already executing.");for(;n;)try{if(r=1,s&&(a=g[0]&2?s.return:g[0]?s.throw||((a=s.return)&&a.call(s),0):s.next)&&!(a=a.call(s,g[1])).done)return a;switch(s=0,a&&(g=[g[0]&2,a.value]),g[0]){case 0:case 1:a=g;break;case 4:return n.label++,{value:g[1],done:!1};case 5:n.label++,s=g[1],g=[0];continue;case 7:g=n.ops.pop(),n.trys.pop();continue;default:if(a=n.trys,!(a=a.length>0&&a[a.length-1])&&(g[0]===6||g[0]===2)){n=0;continue}if(g[0]===3&&(!a||g[1]>a[0]&&g[1]<a[3])){n.label=g[1];break}if(g[0]===6&&n.label<a[1]){n.label=a[1],a=g;break}if(a&&n.label<a[2]){n.label=a[2],n.ops.push(g);break}a[2]&&n.ops.pop(),n.trys.pop();continue}g=t.call(e,n)}catch(y){g=[6,y],s=0}finally{r=a=0}if(g[0]&5)throw g[1];return{value:g[0]?g[1]:void 0,done:!0}}}function J3(e,t,n){if(arguments.length===2)for(var r=0,s=t.length,a;r<s;r++)(a||!(r in t))&&(a||(a=Array.prototype.slice.call(t,0,r)),a[r]=t[r]);return e.concat(a||t)}var h0=function(){function e(t,n,r,s){this.left=t,this.top=n,this.width=r,this.height=s}return e.prototype.add=function(t,n,r,s){return new e(this.left+t,this.top+n,this.width+r,this.height+s)},e.fromClientRect=function(t,n){return new e(n.left+t.windowBounds.left,n.top+t.windowBounds.top,n.width,n.height)},e.fromDOMRectList=function(t,n){var r=Array.from(n).find(function(s){return s.width!==0});return r?new e(r.left+t.windowBounds.left,r.top+t.windowBounds.top,r.width,r.height):e.EMPTY},e.EMPTY=new e(0,0,0,0),e}(),JP=function(e,t){return h0.fromClientRect(e,t.getBoundingClientRect())},Nrt=function(e){var t=e.body,n=e.documentElement;if(!t||!n)throw new Error("Unable to get document size");var r=Math.max(Math.max(t.scrollWidth,n.scrollWidth),Math.max(t.offsetWidth,n.offsetWidth),Math.max(t.clientWidth,n.clientWidth)),s=Math.max(Math.max(t.scrollHeight,n.scrollHeight),Math.max(t.offsetHeight,n.offsetHeight),Math.max(t.clientHeight,n.clientHeight));return new h0(0,0,r,s)},ek=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=e.charCodeAt(n++);(a&64512)===56320?t.push(((s&1023)<<10)+(a&1023)+65536):(t.push(s),n--)}else t.push(s)}return t},Ac=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var c=e[s];c<=65535?r.push(c):(c-=65536,r.push((c>>10)+55296,c%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},LY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",Rrt=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var eT=0;eT<LY.length;eT++)Rrt[LY.charCodeAt(eT)]=eT;var MY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",sC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var tT=0;tT<MY.length;tT++)sC[MY.charCodeAt(tT)]=tT;var Ort=function(e){var t=e.length*.75,n=e.length,r,s=0,a,c,i,f;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),y=Array.isArray(g)?g:new Uint8Array(g);for(r=0;r<n;r+=4)a=sC[e.charCodeAt(r)],c=sC[e.charCodeAt(r+1)],i=sC[e.charCodeAt(r+2)],f=sC[e.charCodeAt(r+3)],y[s++]=a<<2|c>>4,y[s++]=(c&15)<<4|i>>2,y[s++]=(i&3)<<6|f&63;return g},Drt=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},Urt=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},jx=5,bQ=11,J5=2,zrt=bQ-jx,lhe=65536>>jx,Qrt=1<<jx,eR=Qrt-1,Hrt=1024>>jx,Vrt=lhe+Hrt,$rt=Vrt,Grt=32,Krt=$rt+Grt,Wrt=65536>>bQ,qrt=1<<zrt,Zrt=qrt-1,NY=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},Xrt=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},Yrt=function(e,t){var n=Ort(e),r=Array.isArray(n)?Urt(n):new Uint32Array(n),s=Array.isArray(n)?Drt(n):new Uint16Array(n),a=24,c=NY(s,a/2,r[4]/2),i=r[5]===2?NY(s,(a+r[4])/2):Xrt(r,Math.ceil((a+r[4])/4));return new Jrt(r[0],r[1],r[2],r[3],c,i)},Jrt=function(){function e(t,n,r,s,a,c){this.initialValue=t,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=c}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>jx],n=(n<<J5)+(t&eR),this.data[n];if(t<=65535)return n=this.index[lhe+(t-55296>>jx)],n=(n<<J5)+(t&eR),this.data[n];if(t<this.highStart)return n=Krt-Wrt+(t>>bQ),n=this.index[n],n+=t>>jx&Zrt,n=this.index[n],n=(n<<J5)+(t&eR),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),RY="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",eit=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var nT=0;nT<RY.length;nT++)eit[RY.charCodeAt(nT)]=nT;var tit="KwAAAAAAAAAACA4AUD0AADAgAAACAAAAAAAIABAAGABAAEgAUABYAGAAaABgAGgAYgBqAF8AZwBgAGgAcQB5AHUAfQCFAI0AlQCdAKIAqgCyALoAYABoAGAAaABgAGgAwgDKAGAAaADGAM4A0wDbAOEA6QDxAPkAAQEJAQ8BFwF1AH0AHAEkASwBNAE6AUIBQQFJAVEBWQFhAWgBcAF4ATAAgAGGAY4BlQGXAZ8BpwGvAbUBvQHFAc0B0wHbAeMB6wHxAfkBAQIJAvEBEQIZAiECKQIxAjgCQAJGAk4CVgJeAmQCbAJ0AnwCgQKJApECmQKgAqgCsAK4ArwCxAIwAMwC0wLbAjAA4wLrAvMC+AIAAwcDDwMwABcDHQMlAy0DNQN1AD0DQQNJA0kDSQNRA1EDVwNZA1kDdQB1AGEDdQBpA20DdQN1AHsDdQCBA4kDkQN1AHUAmQOhA3UAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AKYDrgN1AHUAtgO+A8YDzgPWAxcD3gPjA+sD8wN1AHUA+wMDBAkEdQANBBUEHQQlBCoEFwMyBDgEYABABBcDSARQBFgEYARoBDAAcAQzAXgEgASIBJAEdQCXBHUAnwSnBK4EtgS6BMIEyAR1AHUAdQB1AHUAdQCVANAEYABgAGAAYABgAGAAYABgANgEYADcBOQEYADsBPQE/AQEBQwFFAUcBSQFLAU0BWQEPAVEBUsFUwVbBWAAYgVgAGoFcgV6BYIFigWRBWAAmQWfBaYFYABgAGAAYABgAKoFYACxBbAFuQW6BcEFwQXHBcEFwQXPBdMF2wXjBeoF8gX6BQIGCgYSBhoGIgYqBjIGOgZgAD4GRgZMBmAAUwZaBmAAYABgAGAAYABgAGAAYABgAGAAYABgAGIGYABpBnAGYABgAGAAYABgAGAAYABgAGAAYAB4Bn8GhQZgAGAAYAB1AHcDFQSLBmAAYABgAJMGdQA9A3UAmwajBqsGqwaVALMGuwbDBjAAywbSBtIG1QbSBtIG0gbSBtIG0gbdBuMG6wbzBvsGAwcLBxMHAwcbByMHJwcsBywHMQcsB9IGOAdAB0gHTgfSBkgHVgfSBtIG0gbSBtIG0gbSBtIG0gbSBiwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdgAGAALAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAdbB2MHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB2kH0gZwB64EdQB1AHUAdQB1AHUAdQB1AHUHfQdgAIUHjQd1AHUAlQedB2AAYAClB6sHYACzB7YHvgfGB3UAzgfWBzMB3gfmB1EB7gf1B/0HlQENAQUIDQh1ABUIHQglCBcDLQg1CD0IRQhNCEEDUwh1AHUAdQBbCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIaQhjCGQIZQhmCGcIaAhpCGMIZAhlCGYIZwhoCGkIYwhkCGUIZghnCGgIcAh3CHoIMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIgggwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAALAcsBywHLAcsBywHLAcsBywHLAcsB4oILAcsB44I0gaWCJ4Ipgh1AHUAqgiyCHUAdQB1AHUAdQB1AHUAdQB1AHUAtwh8AXUAvwh1AMUIyQjRCNkI4AjoCHUAdQB1AO4I9gj+CAYJDgkTCS0HGwkjCYIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiCCIIIggiAAIAAAAFAAYABgAGIAXwBgAHEAdQBFAJUAogCyAKAAYABgAEIA4ABGANMA4QDxAMEBDwE1AFwBLAE6AQEBUQF4QkhCmEKoQrhCgAHIQsAB0MLAAcABwAHAAeDC6ABoAHDCwMMAAcABwAHAAdDDGMMAAcAB6MM4wwjDWMNow3jDaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAGgAaABoAEjDqABWw6bDqABpg6gAaABoAHcDvwOPA+gAaABfA/8DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DvwO/A78DpcPAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcAB9cPKwkyCToJMAB1AHUAdQBCCUoJTQl1AFUJXAljCWcJawkwADAAMAAwAHMJdQB2CX4JdQCECYoJjgmWCXUAngkwAGAAYABxAHUApgn3A64JtAl1ALkJdQDACTAAMAAwADAAdQB1AHUAdQB1AHUAdQB1AHUAowYNBMUIMAAwADAAMADICcsJ0wnZCRUE4QkwAOkJ8An4CTAAMAB1AAAKvwh1AAgKDwoXCh8KdQAwACcKLgp1ADYKqAmICT4KRgowADAAdQB1AE4KMAB1AFYKdQBeCnUAZQowADAAMAAwADAAMAAwADAAMAAVBHUAbQowADAAdQC5CXUKMAAwAHwBxAijBogEMgF9CoQKiASMCpQKmgqIBKIKqgquCogEDQG2Cr4KxgrLCjAAMADTCtsKCgHjCusK8Qr5CgELMAAwADAAMAB1AIsECQsRC3UANAEZCzAAMAAwADAAMAB1ACELKQswAHUANAExCzkLdQBBC0kLMABRC1kLMAAwADAAMAAwADAAdQBhCzAAMAAwAGAAYABpC3ELdwt/CzAAMACHC4sLkwubC58Lpwt1AK4Ltgt1APsDMAAwADAAMAAwADAAMAAwAL4LwwvLC9IL1wvdCzAAMADlC+kL8Qv5C/8LSQswADAAMAAwADAAMAAwADAAMAAHDDAAMAAwADAAMAAODBYMHgx1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1ACYMMAAwADAAdQB1AHUALgx1AHUAdQB1AHUAdQA2DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AD4MdQBGDHUAdQB1AHUAdQB1AEkMdQB1AHUAdQB1AFAMMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQBYDHUAdQB1AF8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUA+wMVBGcMMAAwAHwBbwx1AHcMfwyHDI8MMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAYABgAJcMMAAwADAAdQB1AJ8MlQClDDAAMACtDCwHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsB7UMLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHdQB1AHUAdQB1AHUAdQB1AHUAdQB1AHUAdQB1AA0EMAC9DDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAsBywHLAcsBywHLAcsBywHLQcwAMEMyAwsBywHLAcsBywHLAcsBywHLAcsBywHzAwwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwAHUAdQB1ANQM2QzhDDAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMABgAGAAYABgAGAAYABgAOkMYADxDGAA+AwADQYNYABhCWAAYAAODTAAMAAwADAAFg1gAGAAHg37AzAAMAAwADAAYABgACYNYAAsDTQNPA1gAEMNPg1LDWAAYABgAGAAYABgAGAAYABgAGAAUg1aDYsGVglhDV0NcQBnDW0NdQ15DWAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAlQCBDZUAiA2PDZcNMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAnw2nDTAAMAAwADAAMAAwAHUArw23DTAAMAAwADAAMAAwADAAMAAwADAAMAB1AL8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAB1AHUAdQB1AHUAdQDHDTAAYABgAM8NMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA1w11ANwNMAAwAD0B5A0wADAAMAAwADAAMADsDfQN/A0EDgwOFA4wABsOMAAwADAAMAAwADAAMAAwANIG0gbSBtIG0gbSBtIG0gYjDigOwQUuDsEFMw7SBjoO0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGQg5KDlIOVg7SBtIGXg5lDm0OdQ7SBtIGfQ6EDooOjQ6UDtIGmg6hDtIG0gaoDqwO0ga0DrwO0gZgAGAAYADEDmAAYAAkBtIGzA5gANIOYADaDokO0gbSBt8O5w7SBu8O0gb1DvwO0gZgAGAAxA7SBtIG0gbSBtIGYABgAGAAYAAED2AAsAUMD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHJA8sBywHLAcsBywHLAccDywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywPLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAc0D9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAccD9IG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIGFA8sBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHLAcsBywHPA/SBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gbSBtIG0gYUD0QPlQCVAJUAMAAwADAAMACVAJUAlQCVAJUAlQCVAEwPMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAA//8EAAQABAAEAAQABAAEAAQABAANAAMAAQABAAIABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQACgATABcAHgAbABoAHgAXABYAEgAeABsAGAAPABgAHABLAEsASwBLAEsASwBLAEsASwBLABgAGAAeAB4AHgATAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABYAGwASAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWAA0AEQAeAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAFAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJABYAGgAbABsAGwAeAB0AHQAeAE8AFwAeAA0AHgAeABoAGwBPAE8ADgBQAB0AHQAdAE8ATwAXAE8ATwBPABYAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AHgAeAFAATwBAAE8ATwBPAEAATwBQAFAATwBQAB4AHgAeAB4AHgAeAB0AHQAdAB0AHgAdAB4ADgBQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgBQAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAJAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAkACQAJAAkACQAJAAkABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAFAAHgAeAB4AKwArAFAAUABQAFAAGABQACsAKwArACsAHgAeAFAAHgBQAFAAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUAAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAYAA0AKwArAB4AHgAbACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAB4ABAAEAB4ABAAEABMABAArACsAKwArACsAKwArACsAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAKwArACsAKwBWAFYAVgBWAB4AHgArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AGgAaABoAGAAYAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQAEwAEACsAEwATAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABLAEsASwBLAEsASwBLAEsASwBLABoAGQAZAB4AUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQABMAUAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABABQAFAABAAEAB4ABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUAAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAFAABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQAUABQAB4AHgAYABMAUAArACsABAAbABsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAFAABAAEAAQABAAEAFAABAAEAAQAUAAEAAQABAAEAAQAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArACsAHgArAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAUAAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEAA0ADQBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUAArACsAKwBQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABABQACsAKwArACsAKwArACsAKwAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUAAaABoAUABQAFAAUABQAEwAHgAbAFAAHgAEACsAKwAEAAQABAArAFAAUABQAFAAUABQACsAKwArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQACsAUABQACsAKwAEACsABAAEAAQABAAEACsAKwArACsABAAEACsAKwAEAAQABAArACsAKwAEACsAKwArACsAKwArACsAUABQAFAAUAArAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLAAQABABQAFAAUAAEAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsAKwAEAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAArACsAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AGwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAKwArACsAKwArAAQABAAEACsAKwArACsAUABQACsAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAAQAUAArAFAAUABQAFAAUABQACsAKwArAFAAUABQACsAUABQAFAAUAArACsAKwBQAFAAKwBQACsAUABQACsAKwArAFAAUAArACsAKwBQAFAAUAArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArAAQABAAEAAQABAArACsAKwAEAAQABAArAAQABAAEAAQAKwArAFAAKwArACsAKwArACsABAArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAHgAeAB4AHgAeAB4AGwAeACsAKwArACsAKwAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAUABQAFAAKwArACsAKwArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwAOAFAAUABQAFAAUABQAFAAHgBQAAQABAAEAA4AUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAKwArAAQAUAAEAAQABAAEAAQABAAEACsABAAEAAQAKwAEAAQABAAEACsAKwArACsAKwArACsABAAEACsAKwArACsAKwArACsAUAArAFAAUAAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAFAABAAEAAQABAAEAAQABAArAAQABAAEACsABAAEAAQABABQAB4AKwArACsAKwBQAFAAUAAEAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQABoAUABQAFAAUABQAFAAKwAEAAQABAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQACsAUAArACsAUABQAFAAUABQAFAAUAArACsAKwAEACsAKwArACsABAAEAAQABAAEAAQAKwAEACsABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArAAQABAAeACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAXAAqACoAKgAqACoAKgAqACsAKwArACsAGwBcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAeAEsASwBLAEsASwBLAEsASwBLAEsADQANACsAKwArACsAKwBcAFwAKwBcACsAXABcAFwAXABcACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAXAArAFwAXABcAFwAXABcAFwAXABcAFwAKgBcAFwAKgAqACoAKgAqACoAKgAqACoAXAArACsAXABcAFwAXABcACsAXAArACoAKgAqACoAKgAqACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwBcAFwAXABcAFAADgAOAA4ADgAeAA4ADgAJAA4ADgANAAkAEwATABMAEwATAAkAHgATAB4AHgAeAAQABAAeAB4AHgAeAB4AHgBLAEsASwBLAEsASwBLAEsASwBLAFAAUABQAFAAUABQAFAAUABQAFAADQAEAB4ABAAeAAQAFgARABYAEQAEAAQAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQADQAEAAQABAAEAAQADQAEAAQAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAA0ADQAeAB4AHgAeAB4AHgAEAB4AHgAeAB4AHgAeACsAHgAeAA4ADgANAA4AHgAeAB4AHgAeAAkACQArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgBcAEsASwBLAEsASwBLAEsASwBLAEsADQANAB4AHgAeAB4AXABcAFwAXABcAFwAKgAqACoAKgBcAFwAXABcACoAKgAqAFwAKgAqACoAXABcACoAKgAqACoAKgAqACoAXABcAFwAKgAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKgAqAFwAKgBLAEsASwBLAEsASwBLAEsASwBLACoAKgAqACoAKgAqAFAAUABQAFAAUABQACsAUAArACsAKwArACsAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAKwBQACsAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsABAAEAAQAHgANAB4AHgAeAB4AHgAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUAArACsADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAWABEAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQANAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAANAA0AKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUAArAAQABAArACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqAA0ADQAVAFwADQAeAA0AGwBcACoAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwAeAB4AEwATAA0ADQAOAB4AEwATAB4ABAAEAAQACQArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAHgArACsAKwATABMASwBLAEsASwBLAEsASwBLAEsASwBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAXABcAFwAXABcACsAKwArACsAKwArACsAKwArACsAKwBcAFwAXABcAFwAXABcAFwAXABcAFwAXAArACsAKwArAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAXAArACsAKwAqACoAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAArACsAHgAeAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcACoAKgAqACoAKgAqACoAKgAqACoAKwAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKwArAAQASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACoAKgAqACoAKgAqACoAXAAqACoAKgAqACoAKgArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABABQAFAAUABQAFAAUABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwANAA0AHgANAA0ADQANAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAEAAQABAAEAAQAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwAeAB4AHgAeAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArAA0ADQANAA0ADQBLAEsASwBLAEsASwBLAEsASwBLACsAKwArAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAA0ADQBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUAAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArAAQABAAEAB4ABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAAQAUABQAFAAUABQAFAABABQAFAABAAEAAQAUAArACsAKwArACsABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQACsAUAArAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAFAAUABQACsAHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQACsAKwAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQACsAHgAeAB4AHgAeAB4AHgAOAB4AKwANAA0ADQANAA0ADQANAAkADQANAA0ACAAEAAsABAAEAA0ACQANAA0ADAAdAB0AHgAXABcAFgAXABcAFwAWABcAHQAdAB4AHgAUABQAFAANAAEAAQAEAAQABAAEAAQACQAaABoAGgAaABoAGgAaABoAHgAXABcAHQAVABUAHgAeAB4AHgAeAB4AGAAWABEAFQAVABUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ADQAeAA0ADQANAA0AHgANAA0ADQAHAB4AHgAeAB4AKwAEAAQABAAEAAQABAAEAAQABAAEAFAAUAArACsATwBQAFAAUABQAFAAHgAeAB4AFgARAE8AUABPAE8ATwBPAFAAUABQAFAAUAAeAB4AHgAWABEAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArABsAGwAbABsAGwAbABsAGgAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGgAbABsAGwAbABoAGwAbABoAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbABsAGwAbAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAHgAeAFAAGgAeAB0AHgBQAB4AGgAeAB4AHgAeAB4AHgAeAB4AHgBPAB4AUAAbAB4AHgBQAFAAUABQAFAAHgAeAB4AHQAdAB4AUAAeAFAAHgBQAB4AUABPAFAAUAAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAHgBQAFAAUABQAE8ATwBQAFAAUABQAFAATwBQAFAATwBQAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAUABQAFAATwBPAE8ATwBPAE8ATwBPAE8ATwBQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABPAB4AHgArACsAKwArAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHQAdAB4AHgAeAB0AHQAeAB4AHQAeAB4AHgAdAB4AHQAbABsAHgAdAB4AHgAeAB4AHQAeAB4AHQAdAB0AHQAeAB4AHQAeAB0AHgAdAB0AHQAdAB0AHQAeAB0AHgAeAB4AHgAeAB0AHQAdAB0AHgAeAB4AHgAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB4AHgAeAB0AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAeAB0AHQAdAB0AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAdAB4AHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAWABEAHgAeAB4AHgAeAB4AHQAeAB4AHgAeAB4AHgAeACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAWABEAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAFAAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAeAB4AHQAdAB0AHQAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB0AHQAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB0AHQAeAB4AHQAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AHQAdAB0AHgAeAB0AHgAeAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlAB4AHQAdAB4AHgAdAB4AHgAeAB4AHQAdAB4AHgAeAB4AJQAlAB0AHQAlAB4AJQAlACUAIAAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAeAB4AHgAeAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHgAdAB0AHQAeAB0AJQAdAB0AHgAdAB0AHgAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHQAdAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAdAB0AHQAdACUAHgAlACUAJQAdACUAJQAdAB0AHQAlACUAHQAdACUAHQAdACUAJQAlAB4AHQAeAB4AHgAeAB0AHQAlAB0AHQAdAB0AHQAdACUAJQAlACUAJQAdACUAJQAgACUAHQAdACUAJQAlACUAJQAlACUAJQAeAB4AHgAlACUAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB0AHgAeAB4AFwAXABcAFwAXABcAHgATABMAJQAeAB4AHgAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARABYAEQAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAWABEAFgARABYAEQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAWABEAFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AFgARAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAdAB0AHQAdAB0AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAFAAUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAEAAQABAAeAB4AKwArACsAKwArABMADQANAA0AUAATAA0AUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUAANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAA0ADQANAA0ADQANAA0ADQAeAA0AFgANAB4AHgAXABcAHgAeABcAFwAWABEAFgARABYAEQAWABEADQANAA0ADQATAFAADQANAB4ADQANAB4AHgAeAB4AHgAMAAwADQANAA0AHgANAA0AFgANAA0ADQANAA0ADQANAA0AHgANAB4ADQANAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArACsAKwArACsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArAA0AEQARACUAJQBHAFcAVwAWABEAFgARABYAEQAWABEAFgARACUAJQAWABEAFgARABYAEQAWABEAFQAWABEAEQAlAFcAVwBXAFcAVwBXAFcAVwBXAAQABAAEAAQABAAEACUAVwBXAFcAVwA2ACUAJQBXAFcAVwBHAEcAJQAlACUAKwBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBRAFcAUQBXAFEAVwBXAFcAVwBXAFcAUQBXAFcAVwBXAFcAVwBRAFEAKwArAAQABAAVABUARwBHAFcAFQBRAFcAUQBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFEAVwBRAFcAUQBXAFcAVwBXAFcAVwBRAFcAVwBXAFcAVwBXAFEAUQBXAFcAVwBXABUAUQBHAEcAVwArACsAKwArACsAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwAlACUAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACsAKwArACsAKwArACsAKwArACsAKwArAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAUQBRAFEAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBPAE8ATwBPAE8ATwBPAE8AJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADQATAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABLAEsASwBLAEsASwBLAEsASwBLAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAABAAEAAQABAAeAAQABAAEAAQABAAEAAQABAAEAAQAHgBQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUABQAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAeAA0ADQANAA0ADQArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AUAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAB4AHgAeAB4AHgAeAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AUABQAFAAUABQAFAAUABQAFAAUABQAAQAUABQAFAABABQAFAAUABQAAQAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAeAB4AHgAeAAQAKwArACsAUABQAFAAUABQAFAAHgAeABoAHgArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAADgAOABMAEwArACsAKwArACsAKwArACsABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwANAA0ASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUAAeAB4AHgBQAA4AUABQAAQAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArAB4AWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYAFgAWABYACsAKwArAAQAHgAeAB4AHgAeAB4ADQANAA0AHgAeAB4AHgArAFAASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArAB4AHgBcAFwAXABcAFwAKgBcAFwAXABcAFwAXABcAFwAXABcAEsASwBLAEsASwBLAEsASwBLAEsAXABcAFwAXABcACsAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAFAAUABQAAQAUABQAFAAUABQAFAAUABQAAQABAArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAHgANAA0ADQBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKgAqACoAXAAqACoAKgBcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXAAqAFwAKgAqACoAXABcACoAKgBcAFwAXABcAFwAKgAqAFwAKgBcACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFwAXABcACoAKgBQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAA0ADQBQAFAAUAAEAAQAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQADQAEAAQAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAVABVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBUAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVAFUAVQBVACsAKwArACsAKwArACsAKwArACsAKwArAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAWQBZAFkAKwArACsAKwBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAWgBaAFoAKwArACsAKwAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYABgAGAAYAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAKwArACsAKwArAFYABABWAFYAVgBWAFYAVgBWAFYAVgBWAB4AVgBWAFYAVgBWAFYAVgBWAFYAVgBWAFYAVgArAFYAVgBWAFYAVgArAFYAKwBWAFYAKwBWAFYAKwBWAFYAVgBWAFYAVgBWAFYAVgBWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAEQAWAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAaAB4AKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAGAARABEAGAAYABMAEwAWABEAFAArACsAKwArACsAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACUAJQAlACUAJQAWABEAFgARABYAEQAWABEAFgARABYAEQAlACUAFgARACUAJQAlACUAJQAlACUAEQAlABEAKwAVABUAEwATACUAFgARABYAEQAWABEAJQAlACUAJQAlACUAJQAlACsAJQAbABoAJQArACsAKwArAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAcAKwATACUAJQAbABoAJQAlABYAEQAlACUAEQAlABEAJQBXAFcAVwBXAFcAVwBXAFcAVwBXABUAFQAlACUAJQATACUAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXABYAJQARACUAJQAlAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAWACUAEQAlABYAEQARABYAEQARABUAVwBRAFEAUQBRAFEAUQBRAFEAUQBRAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAEcARwArACsAVwBXAFcAVwBXAFcAKwArAFcAVwBXAFcAVwBXACsAKwBXAFcAVwBXAFcAVwArACsAVwBXAFcAKwArACsAGgAbACUAJQAlABsAGwArAB4AHgAeAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwAEAAQABAAQAB0AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsADQANAA0AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAA0AUABQAFAAUAArACsAKwArAFAAUABQAFAAUABQAFAAUAANAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwArAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwBQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwANAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAB4AUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAUABQAFAAUABQAAQABAAEACsABAAEACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAKwBQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAA0ADQANAA0ADQANAA0ADQAeACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAArACsAKwArAFAAUABQAFAAUAANAA0ADQANAA0ADQAUACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsADQANAA0ADQANAA0ADQBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAB4AHgAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArAAQABAANACsAKwBQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAB4AHgAeAB4AHgArACsAKwArACsAKwAEAAQABAAEAAQABAAEAA0ADQAeAB4AHgAeAB4AKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwAeACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEACsASwBLAEsASwBLAEsASwBLAEsASwANAA0ADQANAFAABAAEAFAAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAeAA4AUAArACsAKwArACsAKwArACsAKwAEAFAAUABQAFAADQANAB4ADQAEAAQABAAEAB4ABAAEAEsASwBLAEsASwBLAEsASwBLAEsAUAAOAFAADQANAA0AKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAANAA0AHgANAA0AHgAEACsAUABQAFAAUABQAFAAUAArAFAAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAA0AKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsABAAEAAQABAArAFAAUABQAFAAUABQAFAAUAArACsAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQACsABAAEAFAABAAEAAQABAAEAAQABAArACsABAAEACsAKwAEAAQABAArACsAUAArACsAKwArACsAKwAEACsAKwArACsAKwBQAFAAUABQAFAABAAEACsAKwAEAAQABAAEAAQABAAEACsAKwArAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsABAAEAAQABAAEAAQABABQAFAAUABQAA0ADQANAA0AHgBLAEsASwBLAEsASwBLAEsASwBLAA0ADQArAB4ABABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAFAAUAAeAFAAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABAAEAAQADgANAA0AEwATAB4AHgAeAA0ADQANAA0ADQANAA0ADQANAA0ADQANAA0ADQANAFAAUABQAFAABAAEACsAKwAEAA0ADQAeAFAAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAFAAKwArACsAKwArACsAKwBLAEsASwBLAEsASwBLAEsASwBLACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAXABcAFwAKwArACoAKgAqACoAKgAqACoAKgAqACoAKgAqACoAKgAqACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBcAFwADQANAA0AKgBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAKwArAFAAKwArAFAAUABQAFAAUABQAFAAUAArAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQAKwAEAAQAKwArAAQABAAEAAQAUAAEAFAABAAEAA0ADQANACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAArACsABAAEAAQABAAEAAQABABQAA4AUAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAABAAEAAQABAAEAAQABAAEAAQABABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAFAABAAEAAQABAAOAB4ADQANAA0ADQAOAB4ABAArACsAKwArACsAKwArACsAUAAEAAQABAAEAAQABAAEAAQABAAEAAQAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAA0ADQANAFAADgAOAA4ADQANACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAEAAQABAAEACsABAAEAAQABAAEAAQABAAEAFAADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAOABMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQACsAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAArACsAKwAEACsABAAEACsABAAEAAQABAAEAAQABABQAAQAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAUABQAFAAUABQAFAAKwBQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAUAArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAABAAEAAQABAAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAaABoAGgAaAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArAA0AUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsADQANAA0ADQANACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABIAEgAQwBDAEMAUABQAFAAUABDAFAAUABQAEgAQwBIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAASABDAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwAJAAkACQAJAAkACQAJABYAEQArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABIAEMAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwANAA0AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArAAQABAAEAAQABAANACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEAA0ADQANAB4AHgAeAB4AHgAeAFAAUABQAFAADQAeACsAKwArACsAKwArACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAANAA0AHgAeACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwAEAFAABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwAEAAQABAAEAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAARwBHABUARwAJACsAKwArACsAKwArACsAKwArACsAKwAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUQBRAFEAKwArACsAKwArACsAKwArACsAKwArACsAKwBRAFEAUQBRACsAKwArACsAKwArACsAKwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUAArACsAHgAEAAQADQAEAAQABAAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAAQABAAEAAQABAAeAB4AHgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAB4AHgAEAAQABAAEAAQABAAEAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4ABAAEAAQAHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwArACsAKwArACsAKwArACsAKwArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAKwArAFAAKwArAFAAUAArACsAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACsAUAArAFAAUABQAFAAUABQAFAAKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwBQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAHgAeAFAAUABQAFAAUAArAFAAKwArACsAUABQAFAAUABQAFAAUAArAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAB4AHgAeAB4AHgAeAB4AHgAeACsAKwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAEsASwBLAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAeAB4AHgAeAB4AHgAeAB4ABAAeAB4AHgAeAB4AHgAeAB4AHgAeAAQAHgAeAA0ADQANAA0AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQAKwAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArAAQABAAEAAQABAAEAAQAKwAEAAQAKwAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwAEAAQABAAEAAQABAAEAFAAUABQAFAAUABQAFAAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwBQAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArABsAUABQAFAAUABQACsAKwBQAFAAUABQAFAAUABQAFAAUAAEAAQABAAEAAQABAAEACsAKwArACsAKwArACsAKwArAB4AHgAeAB4ABAAEAAQABAAEAAQABABQACsAKwArACsASwBLAEsASwBLAEsASwBLAEsASwArACsAKwArABYAFgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAGgBQAFAAUAAaAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAeAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQACsAKwBQAFAAUABQACsAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUAArACsAKwArACsAKwBQACsAKwArACsAUAArAFAAKwBQACsAUABQAFAAKwBQAFAAKwBQACsAKwBQACsAUAArAFAAKwBQACsAUAArAFAAUAArAFAAKwArAFAAUABQAFAAKwBQAFAAUABQAFAAUABQACsAUABQAFAAUAArAFAAUABQAFAAKwBQACsAUABQAFAAUABQAFAAUABQAFAAUAArAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAArACsAKwArACsAUABQAFAAKwBQAFAAUABQAFAAKwBQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwAeAB4AKwArACsAKwArACsAKwArACsAKwArACsAKwArAE8ATwBPAE8ATwBPAE8ATwBPAE8ATwBPAE8AJQAlACUAHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHgAeAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB4AHgAeACUAJQAlAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAdAB0AHQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAKQApACkAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAlACUAJQAlACUAHgAlACUAJQAlACUAIAAgACAAJQAlACAAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACEAIQAhACEAIQAlACUAIAAgACUAJQAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlACUAIAAlACUAJQAlACAAIAAgACUAIAAgACAAJQAlACUAJQAlACUAJQAgACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAlAB4AJQAeACUAJQAlACUAJQAgACUAJQAlACUAHgAlAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAgACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACAAIAAgACAAIAAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeABcAFwAXABUAFQAVAB4AHgAeAB4AJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAgACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlACUAJQAeAB4AHgAeAB4AHgAeAB4AHgAeACUAJQAlACUAJQAlAB4AHgAeAB4AHgAeAB4AHgAlACUAJQAlACUAJQAlACUAHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAgACUAJQAgACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAJQAlACUAJQAlACUAIAAlACUAJQAlACUAJQAlACUAJQAgACAAIAAgACAAIAAgACAAIAAgACUAJQAgACAAIAAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACAAIAAlACAAIAAlACAAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAgACAAIAAlACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAJQAlAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AKwAeAB4AHgAeAB4AHgAeAB4AHgAeAB4AHgArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAEsASwBLAEsASwBLAEsASwBLAEsAKwArACsAKwArACsAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwArAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwAlACUAJQAlACUAJQAlACUAJQAlACUAVwBXACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQBXAFcAVwBXAFcAVwBXAFcAVwBXAFcAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAJQAlACUAKwAEACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArACsAKwArAA==",OY=50,nit=1,che=2,uhe=3,rit=4,iit=5,DY=7,dhe=8,UY=9,yy=10,U6=11,zY=12,z6=13,sit=14,oC=15,Q6=16,rT=17,D2=18,oit=19,QY=20,H6=21,U2=22,tR=23,u1=24,Qf=25,aC=26,lC=27,d1=28,ait=29,ax=30,lit=31,iT=32,sT=33,V6=34,$6=35,G6=36,lB=37,K6=38,yI=39,vI=40,nR=41,hhe=42,cit=43,uit=[9001,65288],fhe="!",co="×",oT="÷",W6=Yrt(tit),Og=[ax,G6],q6=[nit,che,uhe,iit],phe=[yy,dhe],HY=[lC,aC],dit=q6.concat(phe),VY=[K6,yI,vI,V6,$6],hit=[oC,z6],fit=function(e,t){t===void 0&&(t="strict");var n=[],r=[],s=[];return e.forEach(function(a,c){var i=W6.get(a);if(i>OY?(s.push(!0),i-=OY):s.push(!1),["normal","auto","loose"].indexOf(t)!==-1&&[8208,8211,12316,12448].indexOf(a)!==-1)return r.push(c),n.push(Q6);if(i===rit||i===U6){if(c===0)return r.push(c),n.push(ax);var f=n[c-1];return dit.indexOf(f)===-1?(r.push(r[c-1]),n.push(f)):(r.push(c),n.push(ax))}if(r.push(c),i===lit)return n.push(t==="strict"?H6:lB);if(i===hhe||i===ait)return n.push(ax);if(i===cit)return a>=131072&&a<=196605||a>=196608&&a<=262141?n.push(lB):n.push(ax);n.push(i)}),[r,n,s]},rR=function(e,t,n,r){var s=r[n];if(Array.isArray(e)?e.indexOf(s)!==-1:e===s)for(var a=n;a<=r.length;){a++;var c=r[a];if(c===t)return!0;if(c!==yy)break}if(s===yy)for(var a=n;a>0;){a--;var i=r[a];if(Array.isArray(e)?e.indexOf(i)!==-1:e===i)for(var f=n;f<=r.length;){f++;var c=r[f];if(c===t)return!0;if(c!==yy)break}if(i!==yy)break}return!1},$Y=function(e,t){for(var n=e;n>=0;){var r=t[n];if(r===yy)n--;else return r}return 0},pit=function(e,t,n,r,s){if(n[r]===0)return co;var a=r-1;if(Array.isArray(s)&&s[a]===!0)return co;var c=a-1,i=a+1,f=t[a],g=c>=0?t[c]:0,y=t[i];if(f===che&&y===uhe)return co;if(q6.indexOf(f)!==-1)return fhe;if(q6.indexOf(y)!==-1||phe.indexOf(y)!==-1)return co;if($Y(a,t)===dhe)return oT;if(W6.get(e[a])===U6||(f===iT||f===sT)&&W6.get(e[i])===U6||f===DY||y===DY||f===UY||[yy,z6,oC].indexOf(f)===-1&&y===UY||[rT,D2,oit,u1,d1].indexOf(y)!==-1||$Y(a,t)===U2||rR(tR,U2,a,t)||rR([rT,D2],H6,a,t)||rR(zY,zY,a,t))return co;if(f===yy)return oT;if(f===tR||y===tR)return co;if(y===Q6||f===Q6)return oT;if([z6,oC,H6].indexOf(y)!==-1||f===sit||g===G6&&hit.indexOf(f)!==-1||f===d1&&y===G6||y===QY||Og.indexOf(y)!==-1&&f===Qf||Og.indexOf(f)!==-1&&y===Qf||f===lC&&[lB,iT,sT].indexOf(y)!==-1||[lB,iT,sT].indexOf(f)!==-1&&y===aC||Og.indexOf(f)!==-1&&HY.indexOf(y)!==-1||HY.indexOf(f)!==-1&&Og.indexOf(y)!==-1||[lC,aC].indexOf(f)!==-1&&(y===Qf||[U2,oC].indexOf(y)!==-1&&t[i+1]===Qf)||[U2,oC].indexOf(f)!==-1&&y===Qf||f===Qf&&[Qf,d1,u1].indexOf(y)!==-1)return co;if([Qf,d1,u1,rT,D2].indexOf(y)!==-1)for(var b=a;b>=0;){var T=t[b];if(T===Qf)return co;if([d1,u1].indexOf(T)!==-1)b--;else break}if([lC,aC].indexOf(y)!==-1)for(var b=[rT,D2].indexOf(f)!==-1?c:a;b>=0;){var T=t[b];if(T===Qf)return co;if([d1,u1].indexOf(T)!==-1)b--;else break}if(K6===f&&[K6,yI,V6,$6].indexOf(y)!==-1||[yI,V6].indexOf(f)!==-1&&[yI,vI].indexOf(y)!==-1||[vI,$6].indexOf(f)!==-1&&y===vI||VY.indexOf(f)!==-1&&[QY,aC].indexOf(y)!==-1||VY.indexOf(y)!==-1&&f===lC||Og.indexOf(f)!==-1&&Og.indexOf(y)!==-1||f===u1&&Og.indexOf(y)!==-1||Og.concat(Qf).indexOf(f)!==-1&&y===U2&&uit.indexOf(e[i])===-1||Og.concat(Qf).indexOf(y)!==-1&&f===D2)return co;if(f===nR&&y===nR){for(var S=n[a],U=1;S>0&&(S--,t[S]===nR);)U++;if(U%2!==0)return co}return f===iT&&y===sT?co:oT},Ait=function(e,t){t||(t={lineBreak:"normal",wordBreak:"normal"});var n=fit(e,t.lineBreak),r=n[0],s=n[1],a=n[2];(t.wordBreak==="break-all"||t.wordBreak==="break-word")&&(s=s.map(function(i){return[Qf,ax,hhe].indexOf(i)!==-1?lB:i}));var c=t.wordBreak==="keep-all"?a.map(function(i,f){return i&&e[f]>=19968&&e[f]<=40959}):void 0;return[r,s,c]},mit=function(){function e(t,n,r,s){this.codePoints=t,this.required=n===fhe,this.start=r,this.end=s}return e.prototype.slice=function(){return Ac.apply(void 0,this.codePoints.slice(this.start,this.end))},e}(),git=function(e,t){var n=ek(e),r=Ait(n,t),s=r[0],a=r[1],c=r[2],i=n.length,f=0,g=0;return{next:function(){if(g>=i)return{done:!0,value:null};for(var y=co;g<i&&(y=pit(n,a,s,++g,c))===co;);if(y!==co||g===i){var b=new mit(n,y,f,g);return f=g,{value:b,done:!1}}return{done:!0,value:null}}}},yit=1,vit=2,aE=4,GY=8,iF=10,KY=47,RC=92,xit=9,_it=32,aT=34,z2=61,wit=35,bit=36,Cit=37,lT=39,cT=40,Q2=41,Sit=95,Kh=45,Bit=33,Eit=60,Tit=62,Iit=64,jit=91,Fit=93,Pit=61,kit=123,uT=63,Lit=125,WY=124,Mit=126,Nit=128,qY=65533,iR=42,Ax=43,Rit=44,Oit=58,Dit=59,cB=46,Uit=0,zit=8,Qit=11,Hit=14,Vit=31,$it=127,Nm=-1,Ahe=48,mhe=97,ghe=101,Git=102,Kit=117,Wit=122,yhe=65,vhe=69,xhe=70,qit=85,Zit=90,Ed=function(e){return e>=Ahe&&e<=57},Xit=function(e){return e>=55296&&e<=57343},h1=function(e){return Ed(e)||e>=yhe&&e<=xhe||e>=mhe&&e<=Git},Yit=function(e){return e>=mhe&&e<=Wit},Jit=function(e){return e>=yhe&&e<=Zit},est=function(e){return Yit(e)||Jit(e)},tst=function(e){return e>=Nit},dT=function(e){return e===iF||e===xit||e===_it},sF=function(e){return est(e)||tst(e)||e===Sit},ZY=function(e){return sF(e)||Ed(e)||e===Kh},nst=function(e){return e>=Uit&&e<=zit||e===Qit||e>=Hit&&e<=Vit||e===$it},oy=function(e,t){return e!==RC?!1:t!==iF},hT=function(e,t,n){return e===Kh?sF(t)||oy(t,n):sF(e)?!0:!!(e===RC&&oy(e,t))},sR=function(e,t,n){return e===Ax||e===Kh?Ed(t)?!0:t===cB&&Ed(n):Ed(e===cB?t:e)},rst=function(e){var t=0,n=1;(e[t]===Ax||e[t]===Kh)&&(e[t]===Kh&&(n=-1),t++);for(var r=[];Ed(e[t]);)r.push(e[t++]);var s=r.length?parseInt(Ac.apply(void 0,r),10):0;e[t]===cB&&t++;for(var a=[];Ed(e[t]);)a.push(e[t++]);var c=a.length,i=c?parseInt(Ac.apply(void 0,a),10):0;(e[t]===vhe||e[t]===ghe)&&t++;var f=1;(e[t]===Ax||e[t]===Kh)&&(e[t]===Kh&&(f=-1),t++);for(var g=[];Ed(e[t]);)g.push(e[t++]);var y=g.length?parseInt(Ac.apply(void 0,g),10):0;return n*(s+i*Math.pow(10,-c))*Math.pow(10,f*y)},ist={type:2},sst={type:3},ost={type:4},ast={type:13},lst={type:8},cst={type:21},ust={type:9},dst={type:10},hst={type:11},fst={type:12},pst={type:14},fT={type:23},Ast={type:1},mst={type:25},gst={type:24},yst={type:26},vst={type:27},xst={type:28},_st={type:29},wst={type:31},Z6={type:32},_he=function(){function e(){this._value=[]}return e.prototype.write=function(t){this._value=this._value.concat(ek(t))},e.prototype.read=function(){for(var t=[],n=this.consumeToken();n!==Z6;)t.push(n),n=this.consumeToken();return t},e.prototype.consumeToken=function(){var t=this.consumeCodePoint();switch(t){case aT:return this.consumeStringToken(aT);case wit:var n=this.peekCodePoint(0),r=this.peekCodePoint(1),s=this.peekCodePoint(2);if(ZY(n)||oy(r,s)){var a=hT(n,r,s)?vit:yit,c=this.consumeName();return{type:5,value:c,flags:a}}break;case bit:if(this.peekCodePoint(0)===z2)return this.consumeCodePoint(),ast;break;case lT:return this.consumeStringToken(lT);case cT:return ist;case Q2:return sst;case iR:if(this.peekCodePoint(0)===z2)return this.consumeCodePoint(),pst;break;case Ax:if(sR(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case Rit:return ost;case Kh:var i=t,f=this.peekCodePoint(0),g=this.peekCodePoint(1);if(sR(i,f,g))return this.reconsumeCodePoint(t),this.consumeNumericToken();if(hT(i,f,g))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();if(f===Kh&&g===Tit)return this.consumeCodePoint(),this.consumeCodePoint(),gst;break;case cB:if(sR(t,this.peekCodePoint(0),this.peekCodePoint(1)))return this.reconsumeCodePoint(t),this.consumeNumericToken();break;case KY:if(this.peekCodePoint(0)===iR)for(this.consumeCodePoint();;){var y=this.consumeCodePoint();if(y===iR&&(y=this.consumeCodePoint(),y===KY))return this.consumeToken();if(y===Nm)return this.consumeToken()}break;case Oit:return yst;case Dit:return vst;case Eit:if(this.peekCodePoint(0)===Bit&&this.peekCodePoint(1)===Kh&&this.peekCodePoint(2)===Kh)return this.consumeCodePoint(),this.consumeCodePoint(),mst;break;case Iit:var b=this.peekCodePoint(0),T=this.peekCodePoint(1),S=this.peekCodePoint(2);if(hT(b,T,S)){var c=this.consumeName();return{type:7,value:c}}break;case jit:return xst;case RC:if(oy(t,this.peekCodePoint(0)))return this.reconsumeCodePoint(t),this.consumeIdentLikeToken();break;case Fit:return _st;case Pit:if(this.peekCodePoint(0)===z2)return this.consumeCodePoint(),lst;break;case kit:return hst;case Lit:return fst;case Kit:case qit:var U=this.peekCodePoint(0),N=this.peekCodePoint(1);return U===Ax&&(h1(N)||N===uT)&&(this.consumeCodePoint(),this.consumeUnicodeRangeToken()),this.reconsumeCodePoint(t),this.consumeIdentLikeToken();case WY:if(this.peekCodePoint(0)===z2)return this.consumeCodePoint(),ust;if(this.peekCodePoint(0)===WY)return this.consumeCodePoint(),cst;break;case Mit:if(this.peekCodePoint(0)===z2)return this.consumeCodePoint(),dst;break;case Nm:return Z6}return dT(t)?(this.consumeWhiteSpace(),wst):Ed(t)?(this.reconsumeCodePoint(t),this.consumeNumericToken()):sF(t)?(this.reconsumeCodePoint(t),this.consumeIdentLikeToken()):{type:6,value:Ac(t)}},e.prototype.consumeCodePoint=function(){var t=this._value.shift();return typeof t>"u"?-1:t},e.prototype.reconsumeCodePoint=function(t){this._value.unshift(t)},e.prototype.peekCodePoint=function(t){return t>=this._value.length?-1:this._value[t]},e.prototype.consumeUnicodeRangeToken=function(){for(var t=[],n=this.consumeCodePoint();h1(n)&&t.length<6;)t.push(n),n=this.consumeCodePoint();for(var r=!1;n===uT&&t.length<6;)t.push(n),n=this.consumeCodePoint(),r=!0;if(r){var s=parseInt(Ac.apply(void 0,t.map(function(f){return f===uT?Ahe:f})),16),a=parseInt(Ac.apply(void 0,t.map(function(f){return f===uT?xhe:f})),16);return{type:30,start:s,end:a}}var c=parseInt(Ac.apply(void 0,t),16);if(this.peekCodePoint(0)===Kh&&h1(this.peekCodePoint(1))){this.consumeCodePoint(),n=this.consumeCodePoint();for(var i=[];h1(n)&&i.length<6;)i.push(n),n=this.consumeCodePoint();var a=parseInt(Ac.apply(void 0,i),16);return{type:30,start:c,end:a}}else return{type:30,start:c,end:c}},e.prototype.consumeIdentLikeToken=function(){var t=this.consumeName();return t.toLowerCase()==="url"&&this.peekCodePoint(0)===cT?(this.consumeCodePoint(),this.consumeUrlToken()):this.peekCodePoint(0)===cT?(this.consumeCodePoint(),{type:19,value:t}):{type:20,value:t}},e.prototype.consumeUrlToken=function(){var t=[];if(this.consumeWhiteSpace(),this.peekCodePoint(0)===Nm)return{type:22,value:""};var n=this.peekCodePoint(0);if(n===lT||n===aT){var r=this.consumeStringToken(this.consumeCodePoint());return r.type===0&&(this.consumeWhiteSpace(),this.peekCodePoint(0)===Nm||this.peekCodePoint(0)===Q2)?(this.consumeCodePoint(),{type:22,value:r.value}):(this.consumeBadUrlRemnants(),fT)}for(;;){var s=this.consumeCodePoint();if(s===Nm||s===Q2)return{type:22,value:Ac.apply(void 0,t)};if(dT(s))return this.consumeWhiteSpace(),this.peekCodePoint(0)===Nm||this.peekCodePoint(0)===Q2?(this.consumeCodePoint(),{type:22,value:Ac.apply(void 0,t)}):(this.consumeBadUrlRemnants(),fT);if(s===aT||s===lT||s===cT||nst(s))return this.consumeBadUrlRemnants(),fT;if(s===RC)if(oy(s,this.peekCodePoint(0)))t.push(this.consumeEscapedCodePoint());else return this.consumeBadUrlRemnants(),fT;else t.push(s)}},e.prototype.consumeWhiteSpace=function(){for(;dT(this.peekCodePoint(0));)this.consumeCodePoint()},e.prototype.consumeBadUrlRemnants=function(){for(;;){var t=this.consumeCodePoint();if(t===Q2||t===Nm)return;oy(t,this.peekCodePoint(0))&&this.consumeEscapedCodePoint()}},e.prototype.consumeStringSlice=function(t){for(var n=5e4,r="";t>0;){var s=Math.min(n,t);r+=Ac.apply(void 0,this._value.splice(0,s)),t-=s}return this._value.shift(),r},e.prototype.consumeStringToken=function(t){var n="",r=0;do{var s=this._value[r];if(s===Nm||s===void 0||s===t)return n+=this.consumeStringSlice(r),{type:0,value:n};if(s===iF)return this._value.splice(0,r),Ast;if(s===RC){var a=this._value[r+1];a!==Nm&&a!==void 0&&(a===iF?(n+=this.consumeStringSlice(r),r=-1,this._value.shift()):oy(s,a)&&(n+=this.consumeStringSlice(r),n+=Ac(this.consumeEscapedCodePoint()),r=-1))}r++}while(!0)},e.prototype.consumeNumber=function(){var t=[],n=aE,r=this.peekCodePoint(0);for((r===Ax||r===Kh)&&t.push(this.consumeCodePoint());Ed(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0);var s=this.peekCodePoint(1);if(r===cB&&Ed(s))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=GY;Ed(this.peekCodePoint(0));)t.push(this.consumeCodePoint());r=this.peekCodePoint(0),s=this.peekCodePoint(1);var a=this.peekCodePoint(2);if((r===vhe||r===ghe)&&((s===Ax||s===Kh)&&Ed(a)||Ed(s)))for(t.push(this.consumeCodePoint(),this.consumeCodePoint()),n=GY;Ed(this.peekCodePoint(0));)t.push(this.consumeCodePoint());return[rst(t),n]},e.prototype.consumeNumericToken=function(){var t=this.consumeNumber(),n=t[0],r=t[1],s=this.peekCodePoint(0),a=this.peekCodePoint(1),c=this.peekCodePoint(2);if(hT(s,a,c)){var i=this.consumeName();return{type:15,number:n,flags:r,unit:i}}return s===Cit?(this.consumeCodePoint(),{type:16,number:n,flags:r}):{type:17,number:n,flags:r}},e.prototype.consumeEscapedCodePoint=function(){var t=this.consumeCodePoint();if(h1(t)){for(var n=Ac(t);h1(this.peekCodePoint(0))&&n.length<6;)n+=Ac(this.consumeCodePoint());dT(this.peekCodePoint(0))&&this.consumeCodePoint();var r=parseInt(n,16);return r===0||Xit(r)||r>1114111?qY:r}return t===Nm?qY:t},e.prototype.consumeName=function(){for(var t="";;){var n=this.consumeCodePoint();if(ZY(n))t+=Ac(n);else if(oy(n,this.peekCodePoint(0)))t+=Ac(this.consumeEscapedCodePoint());else return this.reconsumeCodePoint(n),t}},e}(),whe=function(){function e(t){this._tokens=t}return e.create=function(t){var n=new _he;return n.write(t),new e(n.read())},e.parseValue=function(t){return e.create(t).parseComponentValue()},e.parseValues=function(t){return e.create(t).parseComponentValues()},e.prototype.parseComponentValue=function(){for(var t=this.consumeToken();t.type===31;)t=this.consumeToken();if(t.type===32)throw new SyntaxError("Error parsing CSS component value, unexpected EOF");this.reconsumeToken(t);var n=this.consumeComponentValue();do t=this.consumeToken();while(t.type===31);if(t.type===32)return n;throw new SyntaxError("Error parsing CSS component value, multiple values found when expecting only one")},e.prototype.parseComponentValues=function(){for(var t=[];;){var n=this.consumeComponentValue();if(n.type===32)return t;t.push(n),t.push()}},e.prototype.consumeComponentValue=function(){var t=this.consumeToken();switch(t.type){case 11:case 28:case 2:return this.consumeSimpleBlock(t.type);case 19:return this.consumeFunction(t)}return t},e.prototype.consumeSimpleBlock=function(t){for(var n={type:t,values:[]},r=this.consumeToken();;){if(r.type===32||Cst(r,t))return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue()),r=this.consumeToken()}},e.prototype.consumeFunction=function(t){for(var n={name:t.value,values:[],type:18};;){var r=this.consumeToken();if(r.type===32||r.type===3)return n;this.reconsumeToken(r),n.values.push(this.consumeComponentValue())}},e.prototype.consumeToken=function(){var t=this._tokens.shift();return typeof t>"u"?Z6:t},e.prototype.reconsumeToken=function(t){this._tokens.unshift(t)},e}(),lE=function(e){return e.type===15},db=function(e){return e.type===17},fa=function(e){return e.type===20},bst=function(e){return e.type===0},X6=function(e,t){return fa(e)&&e.value===t},bhe=function(e){return e.type!==31},zw=function(e){return e.type!==31&&e.type!==4},fg=function(e){var t=[],n=[];return e.forEach(function(r){if(r.type===4){if(n.length===0)throw new Error("Error parsing function args, zero tokens for arg");t.push(n),n=[];return}r.type!==31&&n.push(r)}),n.length&&t.push(n),t},Cst=function(e,t){return t===11&&e.type===12||t===28&&e.type===29?!0:t===2&&e.type===3},Yy=function(e){return e.type===17||e.type===15},Nc=function(e){return e.type===16||Yy(e)},Che=function(e){return e.length>1?[e[0],e[1]]:[e[0]]},$u={type:17,number:0,flags:aE},CQ={type:16,number:50,flags:aE},vy={type:16,number:100,flags:aE},cC=function(e,t,n){var r=e[0],s=e[1];return[Ma(r,t),Ma(typeof s<"u"?s:r,n)]},Ma=function(e,t){if(e.type===16)return e.number/100*t;if(lE(e))switch(e.unit){case"rem":case"em":return 16*e.number;case"px":default:return e.number}return e.number},She="deg",Bhe="grad",Ehe="rad",The="turn",tk={name:"angle",parse:function(e,t){if(t.type===15)switch(t.unit){case She:return Math.PI*t.number/180;case Bhe:return Math.PI/200*t.number;case Ehe:return t.number;case The:return Math.PI*2*t.number}throw new Error("Unsupported angle type")}},Ihe=function(e){return e.type===15&&(e.unit===She||e.unit===Bhe||e.unit===Ehe||e.unit===The)},jhe=function(e){var t=e.filter(fa).map(function(n){return n.value}).join(" ");switch(t){case"to bottom right":case"to right bottom":case"left top":case"top left":return[$u,$u];case"to top":case"bottom":return Dp(0);case"to bottom left":case"to left bottom":case"right top":case"top right":return[$u,vy];case"to right":case"left":return Dp(90);case"to top left":case"to left top":case"right bottom":case"bottom right":return[vy,vy];case"to bottom":case"top":return Dp(180);case"to top right":case"to right top":case"left bottom":case"bottom left":return[vy,$u];case"to left":case"right":return Dp(270)}return 0},Dp=function(e){return Math.PI*e/180},Ny={name:"color",parse:function(e,t){if(t.type===18){var n=Sst[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported color function "'+t.name+'"');return n(e,t.values)}if(t.type===5){if(t.value.length===3){var r=t.value.substring(0,1),s=t.value.substring(1,2),a=t.value.substring(2,3);return xy(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),1)}if(t.value.length===4){var r=t.value.substring(0,1),s=t.value.substring(1,2),a=t.value.substring(2,3),c=t.value.substring(3,4);return xy(parseInt(r+r,16),parseInt(s+s,16),parseInt(a+a,16),parseInt(c+c,16)/255)}if(t.value.length===6){var r=t.value.substring(0,2),s=t.value.substring(2,4),a=t.value.substring(4,6);return xy(parseInt(r,16),parseInt(s,16),parseInt(a,16),1)}if(t.value.length===8){var r=t.value.substring(0,2),s=t.value.substring(2,4),a=t.value.substring(4,6),c=t.value.substring(6,8);return xy(parseInt(r,16),parseInt(s,16),parseInt(a,16),parseInt(c,16)/255)}}if(t.type===20){var i=Jg[t.value.toUpperCase()];if(typeof i<"u")return i}return Jg.TRANSPARENT}},Ry=function(e){return(255&e)===0},Au=function(e){var t=255&e,n=255&e>>8,r=255&e>>16,s=255&e>>24;return t<255?"rgba("+s+","+r+","+n+","+t/255+")":"rgb("+s+","+r+","+n+")"},xy=function(e,t,n,r){return(e<<24|t<<16|n<<8|Math.round(r*255)<<0)>>>0},XY=function(e,t){if(e.type===17)return e.number;if(e.type===16){var n=t===3?1:255;return t===3?e.number/100*n:Math.round(e.number/100*n)}return 0},YY=function(e,t){var n=t.filter(zw);if(n.length===3){var r=n.map(XY),s=r[0],a=r[1],c=r[2];return xy(s,a,c,1)}if(n.length===4){var i=n.map(XY),s=i[0],a=i[1],c=i[2],f=i[3];return xy(s,a,c,f)}return 0};function oR(e,t,n){return n<0&&(n+=1),n>=1&&(n-=1),n<1/6?(t-e)*n*6+e:n<1/2?t:n<2/3?(t-e)*6*(2/3-n)+e:e}var JY=function(e,t){var n=t.filter(zw),r=n[0],s=n[1],a=n[2],c=n[3],i=(r.type===17?Dp(r.number):tk.parse(e,r))/(Math.PI*2),f=Nc(s)?s.number/100:0,g=Nc(a)?a.number/100:0,y=typeof c<"u"&&Nc(c)?Ma(c,1):1;if(f===0)return xy(g*255,g*255,g*255,1);var b=g<=.5?g*(f+1):g+f-g*f,T=g*2-b,S=oR(T,b,i+1/3),U=oR(T,b,i),N=oR(T,b,i-1/3);return xy(S*255,U*255,N*255,y)},Sst={hsl:JY,hsla:JY,rgb:YY,rgba:YY},OC=function(e,t){return Ny.parse(e,whe.create(t).parseComponentValue())},Jg={ALICEBLUE:4042850303,ANTIQUEWHITE:4209760255,AQUA:16777215,AQUAMARINE:2147472639,AZURE:4043309055,BEIGE:4126530815,BISQUE:4293182719,BLACK:255,BLANCHEDALMOND:4293643775,BLUE:65535,BLUEVIOLET:2318131967,BROWN:2771004159,BURLYWOOD:3736635391,CADETBLUE:1604231423,CHARTREUSE:2147418367,CHOCOLATE:3530104575,CORAL:4286533887,CORNFLOWERBLUE:1687547391,CORNSILK:4294499583,CRIMSON:3692313855,CYAN:16777215,DARKBLUE:35839,DARKCYAN:9145343,DARKGOLDENROD:3095837695,DARKGRAY:2846468607,DARKGREEN:6553855,DARKGREY:2846468607,DARKKHAKI:3182914559,DARKMAGENTA:2332068863,DARKOLIVEGREEN:1433087999,DARKORANGE:4287365375,DARKORCHID:2570243327,DARKRED:2332033279,DARKSALMON:3918953215,DARKSEAGREEN:2411499519,DARKSLATEBLUE:1211993087,DARKSLATEGRAY:793726975,DARKSLATEGREY:793726975,DARKTURQUOISE:13554175,DARKVIOLET:2483082239,DEEPPINK:4279538687,DEEPSKYBLUE:12582911,DIMGRAY:1768516095,DIMGREY:1768516095,DODGERBLUE:512819199,FIREBRICK:2988581631,FLORALWHITE:4294635775,FORESTGREEN:579543807,FUCHSIA:4278255615,GAINSBORO:3705462015,GHOSTWHITE:4177068031,GOLD:4292280575,GOLDENROD:3668254975,GRAY:2155905279,GREEN:8388863,GREENYELLOW:2919182335,GREY:2155905279,HONEYDEW:4043305215,HOTPINK:4285117695,INDIANRED:3445382399,INDIGO:1258324735,IVORY:4294963455,KHAKI:4041641215,LAVENDER:3873897215,LAVENDERBLUSH:4293981695,LAWNGREEN:2096890111,LEMONCHIFFON:4294626815,LIGHTBLUE:2916673279,LIGHTCORAL:4034953471,LIGHTCYAN:3774873599,LIGHTGOLDENRODYELLOW:4210742015,LIGHTGRAY:3553874943,LIGHTGREEN:2431553791,LIGHTGREY:3553874943,LIGHTPINK:4290167295,LIGHTSALMON:4288707327,LIGHTSEAGREEN:548580095,LIGHTSKYBLUE:2278488831,LIGHTSLATEGRAY:2005441023,LIGHTSLATEGREY:2005441023,LIGHTSTEELBLUE:2965692159,LIGHTYELLOW:4294959359,LIME:16711935,LIMEGREEN:852308735,LINEN:4210091775,MAGENTA:4278255615,MAROON:2147483903,MEDIUMAQUAMARINE:1724754687,MEDIUMBLUE:52735,MEDIUMORCHID:3126187007,MEDIUMPURPLE:2473647103,MEDIUMSEAGREEN:1018393087,MEDIUMSLATEBLUE:2070474495,MEDIUMSPRINGGREEN:16423679,MEDIUMTURQUOISE:1221709055,MEDIUMVIOLETRED:3340076543,MIDNIGHTBLUE:421097727,MINTCREAM:4127193855,MISTYROSE:4293190143,MOCCASIN:4293178879,NAVAJOWHITE:4292783615,NAVY:33023,OLDLACE:4260751103,OLIVE:2155872511,OLIVEDRAB:1804477439,ORANGE:4289003775,ORANGERED:4282712319,ORCHID:3664828159,PALEGOLDENROD:4008225535,PALEGREEN:2566625535,PALETURQUOISE:2951671551,PALEVIOLETRED:3681588223,PAPAYAWHIP:4293907967,PEACHPUFF:4292524543,PERU:3448061951,PINK:4290825215,PLUM:3718307327,POWDERBLUE:2967529215,PURPLE:2147516671,REBECCAPURPLE:1714657791,RED:4278190335,ROSYBROWN:3163525119,ROYALBLUE:1097458175,SADDLEBROWN:2336560127,SALMON:4202722047,SANDYBROWN:4104413439,SEAGREEN:780883967,SEASHELL:4294307583,SIENNA:2689740287,SILVER:3233857791,SKYBLUE:2278484991,SLATEBLUE:1784335871,SLATEGRAY:1887473919,SLATEGREY:1887473919,SNOW:4294638335,SPRINGGREEN:16744447,STEELBLUE:1182971135,TAN:3535047935,TEAL:8421631,THISTLE:3636451583,TOMATO:4284696575,TRANSPARENT:0,TURQUOISE:1088475391,VIOLET:4001558271,WHEAT:4125012991,WHITE:4294967295,WHITESMOKE:4126537215,YELLOW:4294902015,YELLOWGREEN:2597139199},Bst={name:"background-clip",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(fa(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Est={name:"background-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},nk=function(e,t){var n=Ny.parse(e,t[0]),r=t[1];return r&&Nc(r)?{color:n,stop:r}:{color:n,stop:null}},eJ=function(e,t){var n=e[0],r=e[e.length-1];n.stop===null&&(n.stop=$u),r.stop===null&&(r.stop=vy);for(var s=[],a=0,c=0;c<e.length;c++){var i=e[c].stop;if(i!==null){var f=Ma(i,t);f>a?s.push(f):s.push(a),a=f}else s.push(null)}for(var g=null,c=0;c<s.length;c++){var y=s[c];if(y===null)g===null&&(g=c);else if(g!==null){for(var b=c-g,T=s[g-1],S=(y-T)/(b+1),U=1;U<=b;U++)s[g+U-1]=S*U;g=null}}return e.map(function(N,W){var L=N.color;return{color:L,stop:Math.max(Math.min(1,s[W]/t),0)}})},Tst=function(e,t,n){var r=t/2,s=n/2,a=Ma(e[0],t)-r,c=s-Ma(e[1],n);return(Math.atan2(c,a)+Math.PI*2)%(Math.PI*2)},Ist=function(e,t,n){var r=typeof e=="number"?e:Tst(e,t,n),s=Math.abs(t*Math.sin(r))+Math.abs(n*Math.cos(r)),a=t/2,c=n/2,i=s/2,f=Math.sin(r-Math.PI/2)*i,g=Math.cos(r-Math.PI/2)*i;return[s,a-g,a+g,c-f,c+f]},TA=function(e,t){return Math.sqrt(e*e+t*t)},tJ=function(e,t,n,r,s){var a=[[0,0],[0,t],[e,0],[e,t]];return a.reduce(function(c,i){var f=i[0],g=i[1],y=TA(n-f,r-g);return(s?y<c.optimumDistance:y>c.optimumDistance)?{optimumCorner:i,optimumDistance:y}:c},{optimumDistance:s?1/0:-1/0,optimumCorner:null}).optimumCorner},jst=function(e,t,n,r,s){var a=0,c=0;switch(e.size){case 0:e.shape===0?a=c=Math.min(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):e.shape===1&&(a=Math.min(Math.abs(t),Math.abs(t-r)),c=Math.min(Math.abs(n),Math.abs(n-s)));break;case 2:if(e.shape===0)a=c=Math.min(TA(t,n),TA(t,n-s),TA(t-r,n),TA(t-r,n-s));else if(e.shape===1){var i=Math.min(Math.abs(n),Math.abs(n-s))/Math.min(Math.abs(t),Math.abs(t-r)),f=tJ(r,s,t,n,!0),g=f[0],y=f[1];a=TA(g-t,(y-n)/i),c=i*a}break;case 1:e.shape===0?a=c=Math.max(Math.abs(t),Math.abs(t-r),Math.abs(n),Math.abs(n-s)):e.shape===1&&(a=Math.max(Math.abs(t),Math.abs(t-r)),c=Math.max(Math.abs(n),Math.abs(n-s)));break;case 3:if(e.shape===0)a=c=Math.max(TA(t,n),TA(t,n-s),TA(t-r,n),TA(t-r,n-s));else if(e.shape===1){var i=Math.max(Math.abs(n),Math.abs(n-s))/Math.max(Math.abs(t),Math.abs(t-r)),b=tJ(r,s,t,n,!1),g=b[0],y=b[1];a=TA(g-t,(y-n)/i),c=i*a}break}return Array.isArray(e.size)&&(a=Ma(e.size[0],r),c=e.size.length===2?Ma(e.size[1],s):a),[a,c]},Fst=function(e,t){var n=Dp(180),r=[];return fg(t).forEach(function(s,a){if(a===0){var c=s[0];if(c.type===20&&c.value==="to"){n=jhe(s);return}else if(Ihe(c)){n=tk.parse(e,c);return}}var i=nk(e,s);r.push(i)}),{angle:n,stops:r,type:1}},pT=function(e,t){var n=Dp(180),r=[];return fg(t).forEach(function(s,a){if(a===0){var c=s[0];if(c.type===20&&["top","left","right","bottom"].indexOf(c.value)!==-1){n=jhe(s);return}else if(Ihe(c)){n=(tk.parse(e,c)+Dp(270))%Dp(360);return}}var i=nk(e,s);r.push(i)}),{angle:n,stops:r,type:1}},Pst=function(e,t){var n=Dp(180),r=[],s=1,a=0,c=3,i=[];return fg(t).forEach(function(f,g){var y=f[0];if(g===0){if(fa(y)&&y.value==="linear"){s=1;return}else if(fa(y)&&y.value==="radial"){s=2;return}}if(y.type===18){if(y.name==="from"){var b=Ny.parse(e,y.values[0]);r.push({stop:$u,color:b})}else if(y.name==="to"){var b=Ny.parse(e,y.values[0]);r.push({stop:vy,color:b})}else if(y.name==="color-stop"){var T=y.values.filter(zw);if(T.length===2){var b=Ny.parse(e,T[1]),S=T[0];db(S)&&r.push({stop:{type:16,number:S.number*100,flags:S.flags},color:b})}}}}),s===1?{angle:(n+Dp(180))%Dp(360),stops:r,type:s}:{size:c,shape:a,stops:r,position:i,type:s}},Fhe="closest-side",Phe="farthest-side",khe="closest-corner",Lhe="farthest-corner",Mhe="circle",Nhe="ellipse",Rhe="cover",Ohe="contain",kst=function(e,t){var n=0,r=3,s=[],a=[];return fg(t).forEach(function(c,i){var f=!0;if(i===0){var g=!1;f=c.reduce(function(b,T){if(g)if(fa(T))switch(T.value){case"center":return a.push(CQ),b;case"top":case"left":return a.push($u),b;case"right":case"bottom":return a.push(vy),b}else(Nc(T)||Yy(T))&&a.push(T);else if(fa(T))switch(T.value){case Mhe:return n=0,!1;case Nhe:return n=1,!1;case"at":return g=!0,!1;case Fhe:return r=0,!1;case Rhe:case Phe:return r=1,!1;case Ohe:case khe:return r=2,!1;case Lhe:return r=3,!1}else if(Yy(T)||Nc(T))return Array.isArray(r)||(r=[]),r.push(T),!1;return b},f)}if(f){var y=nk(e,c);s.push(y)}}),{size:r,shape:n,stops:s,position:a,type:2}},AT=function(e,t){var n=0,r=3,s=[],a=[];return fg(t).forEach(function(c,i){var f=!0;if(i===0?f=c.reduce(function(y,b){if(fa(b))switch(b.value){case"center":return a.push(CQ),!1;case"top":case"left":return a.push($u),!1;case"right":case"bottom":return a.push(vy),!1}else if(Nc(b)||Yy(b))return a.push(b),!1;return y},f):i===1&&(f=c.reduce(function(y,b){if(fa(b))switch(b.value){case Mhe:return n=0,!1;case Nhe:return n=1,!1;case Ohe:case Fhe:return r=0,!1;case Phe:return r=1,!1;case khe:return r=2,!1;case Rhe:case Lhe:return r=3,!1}else if(Yy(b)||Nc(b))return Array.isArray(r)||(r=[]),r.push(b),!1;return y},f)),f){var g=nk(e,c);s.push(g)}}),{size:r,shape:n,stops:s,position:a,type:2}},Lst=function(e){return e.type===1},Mst=function(e){return e.type===2},SQ={name:"image",parse:function(e,t){if(t.type===22){var n={url:t.value,type:0};return e.cache.addImage(t.value),n}if(t.type===18){var r=Dhe[t.name];if(typeof r>"u")throw new Error('Attempting to parse an unsupported image function "'+t.name+'"');return r(e,t.values)}throw new Error("Unsupported image type "+t.type)}};function Nst(e){return!(e.type===20&&e.value==="none")&&(e.type!==18||!!Dhe[e.name])}var Dhe={"linear-gradient":Fst,"-moz-linear-gradient":pT,"-ms-linear-gradient":pT,"-o-linear-gradient":pT,"-webkit-linear-gradient":pT,"radial-gradient":kst,"-moz-radial-gradient":AT,"-ms-radial-gradient":AT,"-o-radial-gradient":AT,"-webkit-radial-gradient":AT,"-webkit-gradient":Pst},Rst={name:"background-image",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t.filter(function(r){return zw(r)&&Nst(r)}).map(function(r){return SQ.parse(e,r)})}},Ost={name:"background-origin",initialValue:"border-box",prefix:!1,type:1,parse:function(e,t){return t.map(function(n){if(fa(n))switch(n.value){case"padding-box":return 1;case"content-box":return 2}return 0})}},Dst={name:"background-position",initialValue:"0% 0%",type:1,prefix:!1,parse:function(e,t){return fg(t).map(function(n){return n.filter(Nc)}).map(Che)}},Ust={name:"background-repeat",initialValue:"repeat",prefix:!1,type:1,parse:function(e,t){return fg(t).map(function(n){return n.filter(fa).map(function(r){return r.value}).join(" ")}).map(zst)}},zst=function(e){switch(e){case"no-repeat":return 1;case"repeat-x":case"repeat no-repeat":return 2;case"repeat-y":case"no-repeat repeat":return 3;case"repeat":default:return 0}},uw;(function(e){e.AUTO="auto",e.CONTAIN="contain",e.COVER="cover"})(uw||(uw={}));var Qst={name:"background-size",initialValue:"0",prefix:!1,type:1,parse:function(e,t){return fg(t).map(function(n){return n.filter(Hst)})}},Hst=function(e){return fa(e)||Nc(e)},rk=function(e){return{name:"border-"+e+"-color",initialValue:"transparent",prefix:!1,type:3,format:"color"}},Vst=rk("top"),$st=rk("right"),Gst=rk("bottom"),Kst=rk("left"),ik=function(e){return{name:"border-radius-"+e,initialValue:"0 0",prefix:!1,type:1,parse:function(t,n){return Che(n.filter(Nc))}}},Wst=ik("top-left"),qst=ik("top-right"),Zst=ik("bottom-right"),Xst=ik("bottom-left"),sk=function(e){return{name:"border-"+e+"-style",initialValue:"solid",prefix:!1,type:2,parse:function(t,n){switch(n){case"none":return 0;case"dashed":return 2;case"dotted":return 3;case"double":return 4}return 1}}},Yst=sk("top"),Jst=sk("right"),eot=sk("bottom"),tot=sk("left"),ok=function(e){return{name:"border-"+e+"-width",initialValue:"0",type:0,prefix:!1,parse:function(t,n){return lE(n)?n.number:0}}},not=ok("top"),rot=ok("right"),iot=ok("bottom"),sot=ok("left"),oot={name:"color",initialValue:"transparent",prefix:!1,type:3,format:"color"},aot={name:"direction",initialValue:"ltr",prefix:!1,type:2,parse:function(e,t){switch(t){case"rtl":return 1;case"ltr":default:return 0}}},lot={name:"display",initialValue:"inline-block",prefix:!1,type:1,parse:function(e,t){return t.filter(fa).reduce(function(n,r){return n|cot(r.value)},0)}},cot=function(e){switch(e){case"block":case"-webkit-box":return 2;case"inline":return 4;case"run-in":return 8;case"flow":return 16;case"flow-root":return 32;case"table":return 64;case"flex":case"-webkit-flex":return 128;case"grid":case"-ms-grid":return 256;case"ruby":return 512;case"subgrid":return 1024;case"list-item":return 2048;case"table-row-group":return 4096;case"table-header-group":return 8192;case"table-footer-group":return 16384;case"table-row":return 32768;case"table-cell":return 65536;case"table-column-group":return 131072;case"table-column":return 262144;case"table-caption":return 524288;case"ruby-base":return 1048576;case"ruby-text":return 2097152;case"ruby-base-container":return 4194304;case"ruby-text-container":return 8388608;case"contents":return 16777216;case"inline-block":return 33554432;case"inline-list-item":return 67108864;case"inline-table":return 134217728;case"inline-flex":return 268435456;case"inline-grid":return 536870912}return 0},uot={name:"float",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"left":return 1;case"right":return 2;case"inline-start":return 3;case"inline-end":return 4}return 0}},dot={name:"letter-spacing",initialValue:"0",prefix:!1,type:0,parse:function(e,t){return t.type===20&&t.value==="normal"?0:t.type===17||t.type===15?t.number:0}},oF;(function(e){e.NORMAL="normal",e.STRICT="strict"})(oF||(oF={}));var hot={name:"line-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"strict":return oF.STRICT;case"normal":default:return oF.NORMAL}}},fot={name:"line-height",initialValue:"normal",prefix:!1,type:4},nJ=function(e,t){return fa(e)&&e.value==="normal"?1.2*t:e.type===17?t*e.number:Nc(e)?Ma(e,t):t},pot={name:"list-style-image",initialValue:"none",type:0,prefix:!1,parse:function(e,t){return t.type===20&&t.value==="none"?null:SQ.parse(e,t)}},Aot={name:"list-style-position",initialValue:"outside",prefix:!1,type:2,parse:function(e,t){switch(t){case"inside":return 0;case"outside":default:return 1}}},Y6={name:"list-style-type",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"disc":return 0;case"circle":return 1;case"square":return 2;case"decimal":return 3;case"cjk-decimal":return 4;case"decimal-leading-zero":return 5;case"lower-roman":return 6;case"upper-roman":return 7;case"lower-greek":return 8;case"lower-alpha":return 9;case"upper-alpha":return 10;case"arabic-indic":return 11;case"armenian":return 12;case"bengali":return 13;case"cambodian":return 14;case"cjk-earthly-branch":return 15;case"cjk-heavenly-stem":return 16;case"cjk-ideographic":return 17;case"devanagari":return 18;case"ethiopic-numeric":return 19;case"georgian":return 20;case"gujarati":return 21;case"gurmukhi":return 22;case"hebrew":return 22;case"hiragana":return 23;case"hiragana-iroha":return 24;case"japanese-formal":return 25;case"japanese-informal":return 26;case"kannada":return 27;case"katakana":return 28;case"katakana-iroha":return 29;case"khmer":return 30;case"korean-hangul-formal":return 31;case"korean-hanja-formal":return 32;case"korean-hanja-informal":return 33;case"lao":return 34;case"lower-armenian":return 35;case"malayalam":return 36;case"mongolian":return 37;case"myanmar":return 38;case"oriya":return 39;case"persian":return 40;case"simp-chinese-formal":return 41;case"simp-chinese-informal":return 42;case"tamil":return 43;case"telugu":return 44;case"thai":return 45;case"tibetan":return 46;case"trad-chinese-formal":return 47;case"trad-chinese-informal":return 48;case"upper-armenian":return 49;case"disclosure-open":return 50;case"disclosure-closed":return 51;case"none":default:return-1}}},ak=function(e){return{name:"margin-"+e,initialValue:"0",prefix:!1,type:4}},mot=ak("top"),got=ak("right"),yot=ak("bottom"),vot=ak("left"),xot={name:"overflow",initialValue:"visible",prefix:!1,type:1,parse:function(e,t){return t.filter(fa).map(function(n){switch(n.value){case"hidden":return 1;case"scroll":return 2;case"clip":return 3;case"auto":return 4;case"visible":default:return 0}})}},_ot={name:"overflow-wrap",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-word":return"break-word";case"normal":default:return"normal"}}},lk=function(e){return{name:"padding-"+e,initialValue:"0",prefix:!1,type:3,format:"length-percentage"}},wot=lk("top"),bot=lk("right"),Cot=lk("bottom"),Sot=lk("left"),Bot={name:"text-align",initialValue:"left",prefix:!1,type:2,parse:function(e,t){switch(t){case"right":return 2;case"center":case"justify":return 1;case"left":default:return 0}}},Eot={name:"position",initialValue:"static",prefix:!1,type:2,parse:function(e,t){switch(t){case"relative":return 1;case"absolute":return 2;case"fixed":return 3;case"sticky":return 4}return 0}},Tot={name:"text-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&X6(t[0],"none")?[]:fg(t).map(function(n){for(var r={color:Jg.TRANSPARENT,offsetX:$u,offsetY:$u,blur:$u},s=0,a=0;a<n.length;a++){var c=n[a];Yy(c)?(s===0?r.offsetX=c:s===1?r.offsetY=c:r.blur=c,s++):r.color=Ny.parse(e,c)}return r})}},Iot={name:"text-transform",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"uppercase":return 2;case"lowercase":return 1;case"capitalize":return 3}return 0}},jot={name:"transform",initialValue:"none",prefix:!0,type:0,parse:function(e,t){if(t.type===20&&t.value==="none")return null;if(t.type===18){var n=kot[t.name];if(typeof n>"u")throw new Error('Attempting to parse an unsupported transform function "'+t.name+'"');return n(t.values)}return null}},Fot=function(e){var t=e.filter(function(n){return n.type===17}).map(function(n){return n.number});return t.length===6?t:null},Pot=function(e){var t=e.filter(function(f){return f.type===17}).map(function(f){return f.number}),n=t[0],r=t[1];t[2],t[3];var s=t[4],a=t[5];t[6],t[7],t[8],t[9],t[10],t[11];var c=t[12],i=t[13];return t[14],t[15],t.length===16?[n,r,s,a,c,i]:null},kot={matrix:Fot,matrix3d:Pot},rJ={type:16,number:50,flags:aE},Lot=[rJ,rJ],Mot={name:"transform-origin",initialValue:"50% 50%",prefix:!0,type:1,parse:function(e,t){var n=t.filter(Nc);return n.length!==2?Lot:[n[0],n[1]]}},Not={name:"visible",initialValue:"none",prefix:!1,type:2,parse:function(e,t){switch(t){case"hidden":return 1;case"collapse":return 2;case"visible":default:return 0}}},DC;(function(e){e.NORMAL="normal",e.BREAK_ALL="break-all",e.KEEP_ALL="keep-all"})(DC||(DC={}));var Rot={name:"word-break",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"break-all":return DC.BREAK_ALL;case"keep-all":return DC.KEEP_ALL;case"normal":default:return DC.NORMAL}}},Oot={name:"z-index",initialValue:"auto",prefix:!1,type:0,parse:function(e,t){if(t.type===20)return{auto:!0,order:0};if(db(t))return{auto:!1,order:t.number};throw new Error("Invalid z-index number parsed")}},Uhe={name:"time",parse:function(e,t){if(t.type===15)switch(t.unit.toLowerCase()){case"s":return 1e3*t.number;case"ms":return t.number}throw new Error("Unsupported time type")}},Dot={name:"opacity",initialValue:"1",type:0,prefix:!1,parse:function(e,t){return db(t)?t.number:1}},Uot={name:"text-decoration-color",initialValue:"transparent",prefix:!1,type:3,format:"color"},zot={name:"text-decoration-line",initialValue:"none",prefix:!1,type:1,parse:function(e,t){return t.filter(fa).map(function(n){switch(n.value){case"underline":return 1;case"overline":return 2;case"line-through":return 3;case"none":return 4}return 0}).filter(function(n){return n!==0})}},Qot={name:"font-family",initialValue:"",prefix:!1,type:1,parse:function(e,t){var n=[],r=[];return t.forEach(function(s){switch(s.type){case 20:case 0:n.push(s.value);break;case 17:n.push(s.number.toString());break;case 4:r.push(n.join(" ")),n.length=0;break}}),n.length&&r.push(n.join(" ")),r.map(function(s){return s.indexOf(" ")===-1?s:"'"+s+"'"})}},Hot={name:"font-size",initialValue:"0",prefix:!1,type:3,format:"length"},Vot={name:"font-weight",initialValue:"normal",type:0,prefix:!1,parse:function(e,t){if(db(t))return t.number;if(fa(t))switch(t.value){case"bold":return 700;case"normal":default:return 400}return 400}},$ot={name:"font-variant",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.filter(fa).map(function(n){return n.value})}},Got={name:"font-style",initialValue:"normal",prefix:!1,type:2,parse:function(e,t){switch(t){case"oblique":return"oblique";case"italic":return"italic";case"normal":default:return"normal"}}},Jc=function(e,t){return(e&t)!==0},Kot={name:"content",initialValue:"none",type:1,prefix:!1,parse:function(e,t){if(t.length===0)return[];var n=t[0];return n.type===20&&n.value==="none"?[]:t}},Wot={name:"counter-increment",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;for(var r=[],s=t.filter(bhe),a=0;a<s.length;a++){var c=s[a],i=s[a+1];if(c.type===20){var f=i&&db(i)?i.number:1;r.push({counter:c.value,increment:f})}}return r}},qot={name:"counter-reset",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return[];for(var n=[],r=t.filter(bhe),s=0;s<r.length;s++){var a=r[s],c=r[s+1];if(fa(a)&&a.value!=="none"){var i=c&&db(c)?c.number:0;n.push({counter:a.value,reset:i})}}return n}},Zot={name:"duration",initialValue:"0s",prefix:!1,type:1,parse:function(e,t){return t.filter(lE).map(function(n){return Uhe.parse(e,n)})}},Xot={name:"quotes",initialValue:"none",prefix:!0,type:1,parse:function(e,t){if(t.length===0)return null;var n=t[0];if(n.type===20&&n.value==="none")return null;var r=[],s=t.filter(bst);if(s.length%2!==0)return null;for(var a=0;a<s.length;a+=2){var c=s[a].value,i=s[a+1].value;r.push({open:c,close:i})}return r}},iJ=function(e,t,n){if(!e)return"";var r=e[Math.min(t,e.length-1)];return r?n?r.open:r.close:""},Yot={name:"box-shadow",initialValue:"none",type:1,prefix:!1,parse:function(e,t){return t.length===1&&X6(t[0],"none")?[]:fg(t).map(function(n){for(var r={color:255,offsetX:$u,offsetY:$u,blur:$u,spread:$u,inset:!1},s=0,a=0;a<n.length;a++){var c=n[a];X6(c,"inset")?r.inset=!0:Yy(c)?(s===0?r.offsetX=c:s===1?r.offsetY=c:s===2?r.blur=c:r.spread=c,s++):r.color=Ny.parse(e,c)}return r})}},Jot={name:"paint-order",initialValue:"normal",prefix:!1,type:1,parse:function(e,t){var n=[0,1,2],r=[];return t.filter(fa).forEach(function(s){switch(s.value){case"stroke":r.push(1);break;case"fill":r.push(0);break;case"markers":r.push(2);break}}),n.forEach(function(s){r.indexOf(s)===-1&&r.push(s)}),r}},eat={name:"-webkit-text-stroke-color",initialValue:"currentcolor",prefix:!1,type:3,format:"color"},tat={name:"-webkit-text-stroke-width",initialValue:"0",type:0,prefix:!1,parse:function(e,t){return lE(t)?t.number:0}},nat=function(){function e(t,n){var r,s;this.animationDuration=ri(t,Zot,n.animationDuration),this.backgroundClip=ri(t,Bst,n.backgroundClip),this.backgroundColor=ri(t,Est,n.backgroundColor),this.backgroundImage=ri(t,Rst,n.backgroundImage),this.backgroundOrigin=ri(t,Ost,n.backgroundOrigin),this.backgroundPosition=ri(t,Dst,n.backgroundPosition),this.backgroundRepeat=ri(t,Ust,n.backgroundRepeat),this.backgroundSize=ri(t,Qst,n.backgroundSize),this.borderTopColor=ri(t,Vst,n.borderTopColor),this.borderRightColor=ri(t,$st,n.borderRightColor),this.borderBottomColor=ri(t,Gst,n.borderBottomColor),this.borderLeftColor=ri(t,Kst,n.borderLeftColor),this.borderTopLeftRadius=ri(t,Wst,n.borderTopLeftRadius),this.borderTopRightRadius=ri(t,qst,n.borderTopRightRadius),this.borderBottomRightRadius=ri(t,Zst,n.borderBottomRightRadius),this.borderBottomLeftRadius=ri(t,Xst,n.borderBottomLeftRadius),this.borderTopStyle=ri(t,Yst,n.borderTopStyle),this.borderRightStyle=ri(t,Jst,n.borderRightStyle),this.borderBottomStyle=ri(t,eot,n.borderBottomStyle),this.borderLeftStyle=ri(t,tot,n.borderLeftStyle),this.borderTopWidth=ri(t,not,n.borderTopWidth),this.borderRightWidth=ri(t,rot,n.borderRightWidth),this.borderBottomWidth=ri(t,iot,n.borderBottomWidth),this.borderLeftWidth=ri(t,sot,n.borderLeftWidth),this.boxShadow=ri(t,Yot,n.boxShadow),this.color=ri(t,oot,n.color),this.direction=ri(t,aot,n.direction),this.display=ri(t,lot,n.display),this.float=ri(t,uot,n.cssFloat),this.fontFamily=ri(t,Qot,n.fontFamily),this.fontSize=ri(t,Hot,n.fontSize),this.fontStyle=ri(t,Got,n.fontStyle),this.fontVariant=ri(t,$ot,n.fontVariant),this.fontWeight=ri(t,Vot,n.fontWeight),this.letterSpacing=ri(t,dot,n.letterSpacing),this.lineBreak=ri(t,hot,n.lineBreak),this.lineHeight=ri(t,fot,n.lineHeight),this.listStyleImage=ri(t,pot,n.listStyleImage),this.listStylePosition=ri(t,Aot,n.listStylePosition),this.listStyleType=ri(t,Y6,n.listStyleType),this.marginTop=ri(t,mot,n.marginTop),this.marginRight=ri(t,got,n.marginRight),this.marginBottom=ri(t,yot,n.marginBottom),this.marginLeft=ri(t,vot,n.marginLeft),this.opacity=ri(t,Dot,n.opacity);var a=ri(t,xot,n.overflow);this.overflowX=a[0],this.overflowY=a[a.length>1?1:0],this.overflowWrap=ri(t,_ot,n.overflowWrap),this.paddingTop=ri(t,wot,n.paddingTop),this.paddingRight=ri(t,bot,n.paddingRight),this.paddingBottom=ri(t,Cot,n.paddingBottom),this.paddingLeft=ri(t,Sot,n.paddingLeft),this.paintOrder=ri(t,Jot,n.paintOrder),this.position=ri(t,Eot,n.position),this.textAlign=ri(t,Bot,n.textAlign),this.textDecorationColor=ri(t,Uot,(r=n.textDecorationColor)!==null&&r!==void 0?r:n.color),this.textDecorationLine=ri(t,zot,(s=n.textDecorationLine)!==null&&s!==void 0?s:n.textDecoration),this.textShadow=ri(t,Tot,n.textShadow),this.textTransform=ri(t,Iot,n.textTransform),this.transform=ri(t,jot,n.transform),this.transformOrigin=ri(t,Mot,n.transformOrigin),this.visibility=ri(t,Not,n.visibility),this.webkitTextStrokeColor=ri(t,eat,n.webkitTextStrokeColor),this.webkitTextStrokeWidth=ri(t,tat,n.webkitTextStrokeWidth),this.wordBreak=ri(t,Rot,n.wordBreak),this.zIndex=ri(t,Oot,n.zIndex)}return e.prototype.isVisible=function(){return this.display>0&&this.opacity>0&&this.visibility===0},e.prototype.isTransparent=function(){return Ry(this.backgroundColor)},e.prototype.isTransformed=function(){return this.transform!==null},e.prototype.isPositioned=function(){return this.position!==0},e.prototype.isPositionedWithZIndex=function(){return this.isPositioned()&&!this.zIndex.auto},e.prototype.isFloating=function(){return this.float!==0},e.prototype.isInlineLevel=function(){return Jc(this.display,4)||Jc(this.display,33554432)||Jc(this.display,268435456)||Jc(this.display,536870912)||Jc(this.display,67108864)||Jc(this.display,134217728)},e}(),rat=function(){function e(t,n){this.content=ri(t,Kot,n.content),this.quotes=ri(t,Xot,n.quotes)}return e}(),sJ=function(){function e(t,n){this.counterIncrement=ri(t,Wot,n.counterIncrement),this.counterReset=ri(t,qot,n.counterReset)}return e}(),ri=function(e,t,n){var r=new _he,s=n!==null&&typeof n<"u"?n.toString():t.initialValue;r.write(s);var a=new whe(r.read());switch(t.type){case 2:var c=a.parseComponentValue();return t.parse(e,fa(c)?c.value:t.initialValue);case 0:return t.parse(e,a.parseComponentValue());case 1:return t.parse(e,a.parseComponentValues());case 4:return a.parseComponentValue();case 3:switch(t.format){case"angle":return tk.parse(e,a.parseComponentValue());case"color":return Ny.parse(e,a.parseComponentValue());case"image":return SQ.parse(e,a.parseComponentValue());case"length":var i=a.parseComponentValue();return Yy(i)?i:$u;case"length-percentage":var f=a.parseComponentValue();return Nc(f)?f:$u;case"time":return Uhe.parse(e,a.parseComponentValue())}break}},iat="data-html2canvas-debug",sat=function(e){var t=e.getAttribute(iat);switch(t){case"all":return 1;case"clone":return 2;case"parse":return 3;case"render":return 4;default:return 0}},J6=function(e,t){var n=sat(e);return n===1||t===n},pg=function(){function e(t,n){if(this.context=t,this.textNodes=[],this.elements=[],this.flags=0,J6(n,3))debugger;this.styles=new nat(t,window.getComputedStyle(n,null)),nU(n)&&(this.styles.animationDuration.some(function(r){return r>0})&&(n.style.animationDuration="0s"),this.styles.transform!==null&&(n.style.transform="none")),this.bounds=JP(this.context,n),J6(n,4)&&(this.flags|=16)}return e}(),oat="AAAAAAAAAAAAEA4AGBkAAFAaAAACAAAAAAAIABAAGAAwADgACAAQAAgAEAAIABAACAAQAAgAEAAIABAACAAQAAgAEAAIABAAQABIAEQATAAIABAACAAQAAgAEAAIABAAVABcAAgAEAAIABAACAAQAGAAaABwAHgAgACIAI4AlgAIABAAmwCjAKgAsAC2AL4AvQDFAMoA0gBPAVYBWgEIAAgACACMANoAYgFkAWwBdAF8AX0BhQGNAZUBlgGeAaMBlQGWAasBswF8AbsBwwF0AcsBYwHTAQgA2wG/AOMBdAF8AekB8QF0AfkB+wHiAHQBfAEIAAMC5gQIAAsCEgIIAAgAFgIeAggAIgIpAggAMQI5AkACygEIAAgASAJQAlgCYAIIAAgACAAKBQoFCgUTBRMFGQUrBSsFCAAIAAgACAAIAAgACAAIAAgACABdAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABoAmgCrwGvAQgAbgJ2AggAHgEIAAgACADnAXsCCAAIAAgAgwIIAAgACAAIAAgACACKAggAkQKZAggAPADJAAgAoQKkAqwCsgK6AsICCADJAggA0AIIAAgACAAIANYC3gIIAAgACAAIAAgACABAAOYCCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAkASoB+QIEAAgACAA8AEMCCABCBQgACABJBVAFCAAIAAgACAAIAAgACAAIAAgACABTBVoFCAAIAFoFCABfBWUFCAAIAAgACAAIAAgAbQUIAAgACAAIAAgACABzBXsFfQWFBYoFigWKBZEFigWKBYoFmAWfBaYFrgWxBbkFCAAIAAgACAAIAAgACAAIAAgACAAIAMEFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAMgFCADQBQgACAAIAAgACAAIAAgACAAIAAgACAAIAO4CCAAIAAgAiQAIAAgACABAAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAD0AggACAD8AggACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIANYFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAMDvwAIAAgAJAIIAAgACAAIAAgACAAIAAgACwMTAwgACAB9BOsEGwMjAwgAKwMyAwsFYgE3A/MEPwMIAEUDTQNRAwgAWQOsAGEDCAAIAAgACAAIAAgACABpAzQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFOgU0BTUFNgU3BTgFOQU6BTQFNQU2BTcFOAU5BToFNAU1BTYFNwU4BTkFIQUoBSwFCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABtAwgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABMAEwACAAIAAgACAAIABgACAAIAAgACAC/AAgACAAyAQgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACAAIAAwAAgACAAIAAgACAAIAAgACAAIAAAARABIAAgACAAIABQASAAIAAgAIABwAEAAjgCIABsAqAC2AL0AigDQAtwC+IJIQqVAZUBWQqVAZUBlQGVAZUBlQGrC5UBlQGVAZUBlQGVAZUBlQGVAXsKlQGVAbAK6wsrDGUMpQzlDJUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAZUBlQGVAfAKAAuZA64AtwCJALoC6ADwAAgAuACgA/oEpgO6AqsD+AAIAAgAswMIAAgACAAIAIkAuwP5AfsBwwPLAwgACAAIAAgACADRA9kDCAAIAOED6QMIAAgACAAIAAgACADuA/YDCAAIAP4DyQAIAAgABgQIAAgAXQAOBAgACAAIAAgACAAIABMECAAIAAgACAAIAAgACAD8AAQBCAAIAAgAGgQiBCoECAExBAgAEAEIAAgACAAIAAgACAAIAAgACAAIAAgACAA4BAgACABABEYECAAIAAgATAQYAQgAVAQIAAgACAAIAAgACAAIAAgACAAIAFoECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAOQEIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAB+BAcACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAEABhgSMBAgACAAIAAgAlAQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAwAEAAQABAADAAMAAwADAAQABAAEAAQABAAEAAQABHATAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAdQMIAAgACAAIAAgACAAIAMkACAAIAAgAfQMIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACACFA4kDCAAIAAgACAAIAOcBCAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAIcDCAAIAAgACAAIAAgACAAIAAgACAAIAJEDCAAIAAgACADFAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABgBAgAZgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAbAQCBXIECAAIAHkECAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACABAAJwEQACjBKoEsgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAC6BMIECAAIAAgACAAIAAgACABmBAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAxwQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAGYECAAIAAgAzgQIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBd0FXwUIAOIF6gXxBYoF3gT5BQAGCAaKBYoFigWKBYoFigWKBYoFigWKBYoFigXWBIoFigWKBYoFigWKBYoFigWKBYsFEAaKBYoFigWKBYoFigWKBRQGCACKBYoFigWKBQgACAAIANEECAAIABgGigUgBggAJgYIAC4GMwaKBYoF0wQ3Bj4GigWKBYoFigWKBYoFigWKBYoFigWKBYoFigUIAAgACAAIAAgACAAIAAgAigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWKBYoFigWLBf///////wQABAAEAAQABAAEAAQABAAEAAQAAwAEAAQAAgAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAQADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUAAAAFAAUAAAAFAAUAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUAAQAAAAUABQAFAAUABQAFAAAAAAAFAAUAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAFAAUAAQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAAABwAHAAcAAAAHAAcABwAFAAEAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAcABwAFAAUAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAAAAQABAAAAAAAAAAAAAAAFAAUABQAFAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAHAAcAAAAHAAcAAAAAAAUABQAHAAUAAQAHAAEABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwABAAUABQAFAAUAAAAAAAAAAAAAAAEAAQABAAEAAQABAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABQANAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABAAEAAQABAAEAAQABAAEAAQABAAEAAQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAABQAHAAUABQAFAAAAAAAAAAcABQAFAAUABQAFAAQABAAEAAQABAAEAAQABAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAEAAQABAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUAAAAFAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAUAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAcABwAFAAcABwAAAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUABwAHAAUABQAFAAUAAAAAAAcABwAAAAAABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAABQAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAAAAAAAAAAABQAFAAAAAAAFAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAFAAUABQAFAAUAAAAFAAUABwAAAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABwAFAAUABQAFAAAAAAAHAAcAAAAAAAcABwAFAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAAAAAAAAAHAAcABwAAAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAABQAHAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAUABQAFAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAHAAcABQAHAAcAAAAFAAcABwAAAAcABwAFAAUAAAAAAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAFAAcABwAFAAUABQAAAAUAAAAHAAcABwAHAAcABwAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAHAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAABwAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAUAAAAFAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABwAFAAUABQAFAAUAAAAFAAUAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABwAFAAUABQAFAAUABQAAAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABQAFAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABQAFAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAHAAUABQAFAAUABQAFAAUABwAHAAcABwAHAAcABwAHAAUABwAHAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABwAHAAcABwAFAAUABwAHAAcAAAAAAAAAAAAHAAcABQAHAAcABwAHAAcABwAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAcABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAUABQAFAAUABQAFAAUAAAAFAAAABQAAAAAABQAFAAUABQAFAAUABQAFAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAFAAUAAAAAAAUABQAFAAUABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABwAFAAcABwAHAAcABwAFAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAUABQAFAAUABwAHAAUABQAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABQAFAAcABwAHAAUABwAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAcABQAFAAUABQAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAAAAAABwAFAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAAAAAAAAAFAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAUABQAHAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAUABQAFAAUABQAHAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAcABwAFAAUABQAFAAcABwAFAAUABwAHAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAFAAcABwAFAAUABwAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAFAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAFAAUABQAAAAAABQAFAAAAAAAAAAAAAAAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAcABwAAAAAAAAAAAAAABwAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAcABwAFAAcABwAAAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAFAAUABQAAAAUABQAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABwAFAAUABQAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAUABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAHAAcABQAHAAUABQAAAAAAAAAAAAAAAAAFAAAABwAHAAcABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAHAAcABwAAAAAABwAHAAAAAAAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABwAHAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAFAAUABwAFAAcABwAFAAcABQAFAAcABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAHAAcABQAFAAUABQAAAAAABwAHAAcABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAHAAUABQAFAAUABQAFAAUABQAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABwAFAAcABwAFAAUABQAFAAUABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAcABwAFAAUABQAFAAcABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAUABQAFAAUABQAHAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAFAAUABQAFAAAAAAAFAAUABwAHAAcABwAFAAAAAAAAAAcAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABwAHAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAcABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUAAAAHAAUABQAFAAUABQAFAAUABwAFAAUABwAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUAAAAAAAAABQAAAAUABQAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAHAAcABwAHAAcAAAAFAAUAAAAHAAcABQAHAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAAAAUABQAFAAAAAAAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAFAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAFAAUABQAAAAAABQAFAAUABQAFAAUABQAAAAUABQAAAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFAAUABQAFAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABQAFAAUABQAFAAUABQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAFAAUABQAFAAUADgAOAA4ADgAOAA4ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAA8ADwAPAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAcABwAHAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAgACAAIAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAMAAwADAAMAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkACQAJAAkAAAAAAAAAAAAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAKAAoACgAAAAAAAAAAAAsADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwACwAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAMAAwADAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAADgAOAA4AAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAAAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4AAAAOAAAAAAAAAAAAAAAAAA4AAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAAAAAAAAAAAA4AAAAOAAAAAAAAAAAADgAOAA4AAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAA4AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4AAAAAAA4ADgAOAA4ADgAOAA4ADgAOAAAADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4ADgAOAAAAAAAAAAAAAAAAAAAAAAAAAAAADgAOAA4ADgAOAA4AAAAAAAAAAAAAAAAAAAAAAA4ADgAOAA4ADgAOAA4ADgAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAOAA4ADgAOAA4ADgAAAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4ADgAOAA4AAAAAAAAAAAA=",oJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",uC=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var mT=0;mT<oJ.length;mT++)uC[oJ.charCodeAt(mT)]=mT;var aat=function(e){var t=e.length*.75,n=e.length,r,s=0,a,c,i,f;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);var g=typeof ArrayBuffer<"u"&&typeof Uint8Array<"u"&&typeof Uint8Array.prototype.slice<"u"?new ArrayBuffer(t):new Array(t),y=Array.isArray(g)?g:new Uint8Array(g);for(r=0;r<n;r+=4)a=uC[e.charCodeAt(r)],c=uC[e.charCodeAt(r+1)],i=uC[e.charCodeAt(r+2)],f=uC[e.charCodeAt(r+3)],y[s++]=a<<2|c>>4,y[s++]=(c&15)<<4|i>>2,y[s++]=(i&3)<<6|f&63;return g},lat=function(e){for(var t=e.length,n=[],r=0;r<t;r+=2)n.push(e[r+1]<<8|e[r]);return n},cat=function(e){for(var t=e.length,n=[],r=0;r<t;r+=4)n.push(e[r+3]<<24|e[r+2]<<16|e[r+1]<<8|e[r]);return n},Fx=5,BQ=11,aR=2,uat=BQ-Fx,zhe=65536>>Fx,dat=1<<Fx,lR=dat-1,hat=1024>>Fx,fat=zhe+hat,pat=fat,Aat=32,mat=pat+Aat,gat=65536>>BQ,yat=1<<uat,vat=yat-1,aJ=function(e,t,n){return e.slice?e.slice(t,n):new Uint16Array(Array.prototype.slice.call(e,t,n))},xat=function(e,t,n){return e.slice?e.slice(t,n):new Uint32Array(Array.prototype.slice.call(e,t,n))},_at=function(e,t){var n=aat(e),r=Array.isArray(n)?cat(n):new Uint32Array(n),s=Array.isArray(n)?lat(n):new Uint16Array(n),a=24,c=aJ(s,a/2,r[4]/2),i=r[5]===2?aJ(s,(a+r[4])/2):xat(r,Math.ceil((a+r[4])/4));return new wat(r[0],r[1],r[2],r[3],c,i)},wat=function(){function e(t,n,r,s,a,c){this.initialValue=t,this.errorValue=n,this.highStart=r,this.highValueIndex=s,this.index=a,this.data=c}return e.prototype.get=function(t){var n;if(t>=0){if(t<55296||t>56319&&t<=65535)return n=this.index[t>>Fx],n=(n<<aR)+(t&lR),this.data[n];if(t<=65535)return n=this.index[zhe+(t-55296>>Fx)],n=(n<<aR)+(t&lR),this.data[n];if(t<this.highStart)return n=mat-gat+(t>>BQ),n=this.index[n],n+=t>>Fx&vat,n=this.index[n],n=(n<<aR)+(t&lR),this.data[n];if(t<=1114111)return this.data[this.highValueIndex]}return this.errorValue},e}(),lJ="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",bat=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(var gT=0;gT<lJ.length;gT++)bat[lJ.charCodeAt(gT)]=gT;var Cat=1,cR=2,uR=3,cJ=4,uJ=5,Sat=7,dJ=8,dR=9,hR=10,hJ=11,fJ=12,pJ=13,AJ=14,fR=15,Bat=function(e){for(var t=[],n=0,r=e.length;n<r;){var s=e.charCodeAt(n++);if(s>=55296&&s<=56319&&n<r){var a=e.charCodeAt(n++);(a&64512)===56320?t.push(((s&1023)<<10)+(a&1023)+65536):(t.push(s),n--)}else t.push(s)}return t},Eat=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(String.fromCodePoint)return String.fromCodePoint.apply(String,e);var n=e.length;if(!n)return"";for(var r=[],s=-1,a="";++s<n;){var c=e[s];c<=65535?r.push(c):(c-=65536,r.push((c>>10)+55296,c%1024+56320)),(s+1===n||r.length>16384)&&(a+=String.fromCharCode.apply(String,r),r.length=0)}return a},Tat=_at(oat),Fp="×",pR="÷",Iat=function(e){return Tat.get(e)},jat=function(e,t,n){var r=n-2,s=t[r],a=t[n-1],c=t[n];if(a===cR&&c===uR)return Fp;if(a===cR||a===uR||a===cJ||c===cR||c===uR||c===cJ)return pR;if(a===dJ&&[dJ,dR,hJ,fJ].indexOf(c)!==-1||(a===hJ||a===dR)&&(c===dR||c===hR)||(a===fJ||a===hR)&&c===hR||c===pJ||c===uJ||c===Sat||a===Cat)return Fp;if(a===pJ&&c===AJ){for(;s===uJ;)s=t[--r];if(s===AJ)return Fp}if(a===fR&&c===fR){for(var i=0;s===fR;)i++,s=t[--r];if(i%2===0)return Fp}return pR},Fat=function(e){var t=Bat(e),n=t.length,r=0,s=0,a=t.map(Iat);return{next:function(){if(r>=n)return{done:!0,value:null};for(var c=Fp;r<n&&(c=jat(t,a,++r))===Fp;);if(c!==Fp||r===n){var i=Eat.apply(null,t.slice(s,r));return s=r,{value:i,done:!1}}return{done:!0,value:null}}}},Pat=function(e){for(var t=Fat(e),n=[],r;!(r=t.next()).done;)r.value&&n.push(r.value.slice());return n},kat=function(e){var t=123;if(e.createRange){var n=e.createRange();if(n.getBoundingClientRect){var r=e.createElement("boundtest");r.style.height=t+"px",r.style.display="block",e.body.appendChild(r),n.selectNode(r);var s=n.getBoundingClientRect(),a=Math.round(s.height);if(e.body.removeChild(r),a===t)return!0}}return!1},Lat=function(e){var t=e.createElement("boundtest");t.style.width="50px",t.style.display="block",t.style.fontSize="12px",t.style.letterSpacing="0px",t.style.wordSpacing="0px",e.body.appendChild(t);var n=e.createRange();t.innerHTML=typeof"".repeat=="function"?"&#128104;".repeat(10):"";var r=t.firstChild,s=ek(r.data).map(function(f){return Ac(f)}),a=0,c={},i=s.every(function(f,g){n.setStart(r,a),n.setEnd(r,a+f.length);var y=n.getBoundingClientRect();a+=f.length;var b=y.x>c.x||y.y>c.y;return c=y,g===0?!0:b});return e.body.removeChild(t),i},Mat=function(){return typeof new Image().crossOrigin<"u"},Nat=function(){return typeof new XMLHttpRequest().responseType=="string"},Rat=function(e){var t=new Image,n=e.createElement("canvas"),r=n.getContext("2d");if(!r)return!1;t.src="data:image/svg+xml,<svg xmlns='http://www.w3.org/2000/svg'></svg>";try{r.drawImage(t,0,0),n.toDataURL()}catch{return!1}return!0},mJ=function(e){return e[0]===0&&e[1]===255&&e[2]===0&&e[3]===255},Oat=function(e){var t=e.createElement("canvas"),n=100;t.width=n,t.height=n;var r=t.getContext("2d");if(!r)return Promise.reject(!1);r.fillStyle="rgb(0, 255, 0)",r.fillRect(0,0,n,n);var s=new Image,a=t.toDataURL();s.src=a;var c=eU(n,n,0,0,s);return r.fillStyle="red",r.fillRect(0,0,n,n),gJ(c).then(function(i){r.drawImage(i,0,0);var f=r.getImageData(0,0,n,n).data;r.fillStyle="red",r.fillRect(0,0,n,n);var g=e.createElement("div");return g.style.backgroundImage="url("+a+")",g.style.height=n+"px",mJ(f)?gJ(eU(n,n,0,0,g)):Promise.reject(!1)}).then(function(i){return r.drawImage(i,0,0),mJ(r.getImageData(0,0,n,n).data)}).catch(function(){return!1})},eU=function(e,t,n,r,s){var a="http://www.w3.org/2000/svg",c=document.createElementNS(a,"svg"),i=document.createElementNS(a,"foreignObject");return c.setAttributeNS(null,"width",e.toString()),c.setAttributeNS(null,"height",t.toString()),i.setAttributeNS(null,"width","100%"),i.setAttributeNS(null,"height","100%"),i.setAttributeNS(null,"x",n.toString()),i.setAttributeNS(null,"y",r.toString()),i.setAttributeNS(null,"externalResourcesRequired","true"),c.appendChild(i),i.appendChild(s),c},gJ=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){return t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},zu={get SUPPORT_RANGE_BOUNDS(){var e=kat(document);return Object.defineProperty(zu,"SUPPORT_RANGE_BOUNDS",{value:e}),e},get SUPPORT_WORD_BREAKING(){var e=zu.SUPPORT_RANGE_BOUNDS&&Lat(document);return Object.defineProperty(zu,"SUPPORT_WORD_BREAKING",{value:e}),e},get SUPPORT_SVG_DRAWING(){var e=Rat(document);return Object.defineProperty(zu,"SUPPORT_SVG_DRAWING",{value:e}),e},get SUPPORT_FOREIGNOBJECT_DRAWING(){var e=typeof Array.from=="function"&&typeof window.fetch=="function"?Oat(document):Promise.resolve(!1);return Object.defineProperty(zu,"SUPPORT_FOREIGNOBJECT_DRAWING",{value:e}),e},get SUPPORT_CORS_IMAGES(){var e=Mat();return Object.defineProperty(zu,"SUPPORT_CORS_IMAGES",{value:e}),e},get SUPPORT_RESPONSE_TYPE(){var e=Nat();return Object.defineProperty(zu,"SUPPORT_RESPONSE_TYPE",{value:e}),e},get SUPPORT_CORS_XHR(){var e="withCredentials"in new XMLHttpRequest;return Object.defineProperty(zu,"SUPPORT_CORS_XHR",{value:e}),e},get SUPPORT_NATIVE_TEXT_SEGMENTATION(){var e=!!(typeof Intl<"u"&&Intl.Segmenter);return Object.defineProperty(zu,"SUPPORT_NATIVE_TEXT_SEGMENTATION",{value:e}),e}},UC=function(){function e(t,n){this.text=t,this.bounds=n}return e}(),Dat=function(e,t,n,r){var s=Qat(t,n),a=[],c=0;return s.forEach(function(i){if(n.textDecorationLine.length||i.trim().length>0)if(zu.SUPPORT_RANGE_BOUNDS){var f=yJ(r,c,i.length).getClientRects();if(f.length>1){var g=EQ(i),y=0;g.forEach(function(T){a.push(new UC(T,h0.fromDOMRectList(e,yJ(r,y+c,T.length).getClientRects()))),y+=T.length})}else a.push(new UC(i,h0.fromDOMRectList(e,f)))}else{var b=r.splitText(i.length);a.push(new UC(i,Uat(e,r))),r=b}else zu.SUPPORT_RANGE_BOUNDS||(r=r.splitText(i.length));c+=i.length}),a},Uat=function(e,t){var n=t.ownerDocument;if(n){var r=n.createElement("html2canvaswrapper");r.appendChild(t.cloneNode(!0));var s=t.parentNode;if(s){s.replaceChild(r,t);var a=JP(e,r);return r.firstChild&&s.replaceChild(r.firstChild,r),a}}return h0.EMPTY},yJ=function(e,t,n){var r=e.ownerDocument;if(!r)throw new Error("Node has no owner document");var s=r.createRange();return s.setStart(e,t),s.setEnd(e,t+n),s},EQ=function(e){if(zu.SUPPORT_NATIVE_TEXT_SEGMENTATION){var t=new Intl.Segmenter(void 0,{granularity:"grapheme"});return Array.from(t.segment(e)).map(function(n){return n.segment})}return Pat(e)},zat=function(e,t){if(zu.SUPPORT_NATIVE_TEXT_SEGMENTATION){var n=new Intl.Segmenter(void 0,{granularity:"word"});return Array.from(n.segment(e)).map(function(r){return r.segment})}return Vat(e,t)},Qat=function(e,t){return t.letterSpacing!==0?EQ(e):zat(e,t)},Hat=[32,160,4961,65792,65793,4153,4241],Vat=function(e,t){for(var n=git(e,{lineBreak:t.lineBreak,wordBreak:t.overflowWrap==="break-word"?"break-word":t.wordBreak}),r=[],s,a=function(){if(s.value){var c=s.value.slice(),i=ek(c),f="";i.forEach(function(g){Hat.indexOf(g)===-1?f+=Ac(g):(f.length&&r.push(f),r.push(Ac(g)),f="")}),f.length&&r.push(f)}};!(s=n.next()).done;)a();return r},$at=function(){function e(t,n,r){this.text=Gat(n.data,r.textTransform),this.textBounds=Dat(t,this.text,r,n)}return e}(),Gat=function(e,t){switch(t){case 1:return e.toLowerCase();case 3:return e.replace(Kat,Wat);case 2:return e.toUpperCase();default:return e}},Kat=/(^|\s|:|-|\(|\))([a-z])/g,Wat=function(e,t,n){return e.length>0?t+n.toUpperCase():e},Qhe=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.src=r.currentSrc||r.src,s.intrinsicWidth=r.naturalWidth,s.intrinsicHeight=r.naturalHeight,s.context.cache.addImage(s.src),s}return t}(pg),Hhe=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.canvas=r,s.intrinsicWidth=r.width,s.intrinsicHeight=r.height,s}return t}(pg),Vhe=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this,a=new XMLSerializer,c=JP(n,r);return r.setAttribute("width",c.width+"px"),r.setAttribute("height",c.height+"px"),s.svg="data:image/svg+xml,"+encodeURIComponent(a.serializeToString(r)),s.intrinsicWidth=r.width.baseVal.value,s.intrinsicHeight=r.height.baseVal.value,s.context.cache.addImage(s.svg),s}return t}(pg),$he=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.value=r.value,s}return t}(pg),tU=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.start=r.start,s.reversed=typeof r.reversed=="boolean"&&r.reversed===!0,s}return t}(pg),qat=[{type:15,flags:0,unit:"px",number:3}],Zat=[{type:16,flags:0,number:50}],Xat=function(e){return e.width>e.height?new h0(e.left+(e.width-e.height)/2,e.top,e.height,e.height):e.width<e.height?new h0(e.left,e.top+(e.height-e.width)/2,e.width,e.width):e},Yat=function(e){var t=e.type===Jat?new Array(e.value.length+1).join("•"):e.value;return t.length===0?e.placeholder||"":t},aF="checkbox",lF="radio",Jat="password",vJ=707406591,TQ=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;switch(s.type=r.type.toLowerCase(),s.checked=r.checked,s.value=Yat(r),(s.type===aF||s.type===lF)&&(s.styles.backgroundColor=3739148031,s.styles.borderTopColor=s.styles.borderRightColor=s.styles.borderBottomColor=s.styles.borderLeftColor=2779096575,s.styles.borderTopWidth=s.styles.borderRightWidth=s.styles.borderBottomWidth=s.styles.borderLeftWidth=1,s.styles.borderTopStyle=s.styles.borderRightStyle=s.styles.borderBottomStyle=s.styles.borderLeftStyle=1,s.styles.backgroundClip=[0],s.styles.backgroundOrigin=[0],s.bounds=Xat(s.bounds)),s.type){case aF:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=qat;break;case lF:s.styles.borderTopRightRadius=s.styles.borderTopLeftRadius=s.styles.borderBottomRightRadius=s.styles.borderBottomLeftRadius=Zat;break}return s}return t}(pg),Ghe=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this,a=r.options[r.selectedIndex||0];return s.value=a&&a.text||"",s}return t}(pg),Khe=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.value=r.value,s}return t}(pg),Whe=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;s.src=r.src,s.width=parseInt(r.width,10)||0,s.height=parseInt(r.height,10)||0,s.backgroundColor=s.styles.backgroundColor;try{if(r.contentWindow&&r.contentWindow.document&&r.contentWindow.document.documentElement){s.tree=Zhe(n,r.contentWindow.document.documentElement);var a=r.contentWindow.document.documentElement?OC(n,getComputedStyle(r.contentWindow.document.documentElement).backgroundColor):Jg.TRANSPARENT,c=r.contentWindow.document.body?OC(n,getComputedStyle(r.contentWindow.document.body).backgroundColor):Jg.TRANSPARENT;s.backgroundColor=Ry(a)?Ry(c)?s.styles.backgroundColor:c:a}}catch{}return s}return t}(pg),elt=["OL","UL","MENU"],xI=function(e,t,n,r){for(var s=t.firstChild,a=void 0;s;s=a)if(a=s.nextSibling,Xhe(s)&&s.data.trim().length>0)n.textNodes.push(new $at(e,s,n.styles));else if(K1(s))if(tfe(s)&&s.assignedNodes)s.assignedNodes().forEach(function(i){return xI(e,i,n,r)});else{var c=qhe(e,s);c.styles.isVisible()&&(tlt(s,c,r)?c.flags|=4:nlt(c.styles)&&(c.flags|=2),elt.indexOf(s.tagName)!==-1&&(c.flags|=8),n.elements.push(c),s.slot,s.shadowRoot?xI(e,s.shadowRoot,c,r):!cF(s)&&!Yhe(s)&&!uF(s)&&xI(e,s,c,r))}},qhe=function(e,t){return rU(t)?new Qhe(e,t):Jhe(t)?new Hhe(e,t):Yhe(t)?new Vhe(e,t):rlt(t)?new $he(e,t):ilt(t)?new tU(e,t):slt(t)?new TQ(e,t):uF(t)?new Ghe(e,t):cF(t)?new Khe(e,t):efe(t)?new Whe(e,t):new pg(e,t)},Zhe=function(e,t){var n=qhe(e,t);return n.flags|=4,xI(e,t,n,n),n},tlt=function(e,t,n){return t.styles.isPositionedWithZIndex()||t.styles.opacity<1||t.styles.isTransformed()||IQ(e)&&n.styles.isTransparent()},nlt=function(e){return e.isPositioned()||e.isFloating()},Xhe=function(e){return e.nodeType===Node.TEXT_NODE},K1=function(e){return e.nodeType===Node.ELEMENT_NODE},nU=function(e){return K1(e)&&typeof e.style<"u"&&!_I(e)},_I=function(e){return typeof e.className=="object"},rlt=function(e){return e.tagName==="LI"},ilt=function(e){return e.tagName==="OL"},slt=function(e){return e.tagName==="INPUT"},olt=function(e){return e.tagName==="HTML"},Yhe=function(e){return e.tagName==="svg"},IQ=function(e){return e.tagName==="BODY"},Jhe=function(e){return e.tagName==="CANVAS"},xJ=function(e){return e.tagName==="VIDEO"},rU=function(e){return e.tagName==="IMG"},efe=function(e){return e.tagName==="IFRAME"},_J=function(e){return e.tagName==="STYLE"},alt=function(e){return e.tagName==="SCRIPT"},cF=function(e){return e.tagName==="TEXTAREA"},uF=function(e){return e.tagName==="SELECT"},tfe=function(e){return e.tagName==="SLOT"},wJ=function(e){return e.tagName.indexOf("-")>0},llt=function(){function e(){this.counters={}}return e.prototype.getCounterValue=function(t){var n=this.counters[t];return n&&n.length?n[n.length-1]:1},e.prototype.getCounterValues=function(t){var n=this.counters[t];return n||[]},e.prototype.pop=function(t){var n=this;t.forEach(function(r){return n.counters[r].pop()})},e.prototype.parse=function(t){var n=this,r=t.counterIncrement,s=t.counterReset,a=!0;r!==null&&r.forEach(function(i){var f=n.counters[i.counter];f&&i.increment!==0&&(a=!1,f.length||f.push(1),f[Math.max(0,f.length-1)]+=i.increment)});var c=[];return a&&s.forEach(function(i){var f=n.counters[i.counter];c.push(i.counter),f||(f=n.counters[i.counter]=[]),f.push(i.reset)}),c},e}(),bJ={integers:[1e3,900,500,400,100,90,50,40,10,9,5,4,1],values:["M","CM","D","CD","C","XC","L","XL","X","IX","V","IV","I"]},CJ={integers:[9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["Ք","Փ","Ւ","Ց","Ր","Տ","Վ","Ս","Ռ","Ջ","Պ","Չ","Ո","Շ","Ն","Յ","Մ","Ճ","Ղ","Ձ","Հ","Կ","Ծ","Խ","Լ","Ի","Ժ","Թ","Ը","Է","Զ","Ե","Դ","Գ","Բ","Ա"]},clt={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,400,300,200,100,90,80,70,60,50,40,30,20,19,18,17,16,15,10,9,8,7,6,5,4,3,2,1],values:["י׳","ט׳","ח׳","ז׳","ו׳","ה׳","ד׳","ג׳","ב׳","א׳","ת","ש","ר","ק","צ","פ","ע","ס","נ","מ","ל","כ","יט","יח","יז","טז","טו","י","ט","ח","ז","ו","ה","ד","ג","ב","א"]},ult={integers:[1e4,9e3,8e3,7e3,6e3,5e3,4e3,3e3,2e3,1e3,900,800,700,600,500,400,300,200,100,90,80,70,60,50,40,30,20,10,9,8,7,6,5,4,3,2,1],values:["ჵ","ჰ","ჯ","ჴ","ხ","ჭ","წ","ძ","ც","ჩ","შ","ყ","ღ","ქ","ფ","ჳ","ტ","ს","რ","ჟ","პ","ო","ჲ","ნ","მ","ლ","კ","ი","თ","ჱ","ზ","ვ","ე","დ","გ","ბ","ა"]},f1=function(e,t,n,r,s,a){return e<t||e>n?uB(e,s,a.length>0):r.integers.reduce(function(c,i,f){for(;e>=i;)e-=i,c+=r.values[f];return c},"")+a},nfe=function(e,t,n,r){var s="";do n||e--,s=r(e)+s,e/=t;while(e*t>=t);return s},hc=function(e,t,n,r,s){var a=n-t+1;return(e<0?"-":"")+(nfe(Math.abs(e),a,r,function(c){return Ac(Math.floor(c%a)+t)})+s)},Zv=function(e,t,n){n===void 0&&(n=". ");var r=t.length;return nfe(Math.abs(e),r,!1,function(s){return t[Math.floor(s%r)]})+n},S1=1,ny=2,ry=4,dC=8,Dg=function(e,t,n,r,s,a){if(e<-9999||e>9999)return uB(e,4,s.length>0);var c=Math.abs(e),i=s;if(c===0)return t[0]+i;for(var f=0;c>0&&f<=4;f++){var g=c%10;g===0&&Jc(a,S1)&&i!==""?i=t[g]+i:g>1||g===1&&f===0||g===1&&f===1&&Jc(a,ny)||g===1&&f===1&&Jc(a,ry)&&e>100||g===1&&f>1&&Jc(a,dC)?i=t[g]+(f>0?n[f-1]:"")+i:g===1&&f>0&&(i=n[f-1]+i),c=Math.floor(c/10)}return(e<0?r:"")+i},SJ="十百千萬",BJ="拾佰仟萬",EJ="マイナス",AR="마이너스",uB=function(e,t,n){var r=n?". ":"",s=n?"、":"",a=n?", ":"",c=n?" ":"";switch(t){case 0:return"•"+c;case 1:return"◦"+c;case 2:return"◾"+c;case 5:var i=hc(e,48,57,!0,r);return i.length<4?"0"+i:i;case 4:return Zv(e,"〇一二三四五六七八九",s);case 6:return f1(e,1,3999,bJ,3,r).toLowerCase();case 7:return f1(e,1,3999,bJ,3,r);case 8:return hc(e,945,969,!1,r);case 9:return hc(e,97,122,!1,r);case 10:return hc(e,65,90,!1,r);case 11:return hc(e,1632,1641,!0,r);case 12:case 49:return f1(e,1,9999,CJ,3,r);case 35:return f1(e,1,9999,CJ,3,r).toLowerCase();case 13:return hc(e,2534,2543,!0,r);case 14:case 30:return hc(e,6112,6121,!0,r);case 15:return Zv(e,"子丑寅卯辰巳午未申酉戌亥",s);case 16:return Zv(e,"甲乙丙丁戊己庚辛壬癸",s);case 17:case 48:return Dg(e,"零一二三四五六七八九",SJ,"負",s,ny|ry|dC);case 47:return Dg(e,"零壹貳參肆伍陸柒捌玖",BJ,"負",s,S1|ny|ry|dC);case 42:return Dg(e,"零一二三四五六七八九",SJ,"负",s,ny|ry|dC);case 41:return Dg(e,"零壹贰叁肆伍陆柒捌玖",BJ,"负",s,S1|ny|ry|dC);case 26:return Dg(e,"〇一二三四五六七八九","十百千万",EJ,s,0);case 25:return Dg(e,"零壱弐参四伍六七八九","拾百千万",EJ,s,S1|ny|ry);case 31:return Dg(e,"영일이삼사오육칠팔구","십백천만",AR,a,S1|ny|ry);case 33:return Dg(e,"零一二三四五六七八九","十百千萬",AR,a,0);case 32:return Dg(e,"零壹貳參四五六七八九","拾百千",AR,a,S1|ny|ry);case 18:return hc(e,2406,2415,!0,r);case 20:return f1(e,1,19999,ult,3,r);case 21:return hc(e,2790,2799,!0,r);case 22:return hc(e,2662,2671,!0,r);case 22:return f1(e,1,10999,clt,3,r);case 23:return Zv(e,"あいうえおかきくけこさしすせそたちつてとなにぬねのはひふへほまみむめもやゆよらりるれろわゐゑをん");case 24:return Zv(e,"いろはにほへとちりぬるをわかよたれそつねならむうゐのおくやまけふこえてあさきゆめみしゑひもせす");case 27:return hc(e,3302,3311,!0,r);case 28:return Zv(e,"アイウエオカキクケコサシスセソタチツテトナニヌネノハヒフヘホマミムメモヤユヨラリルレロワヰヱヲン",s);case 29:return Zv(e,"イロハニホヘトチリヌルヲワカヨタレソツネナラムウヰノオクヤマケフコエテアサキユメミシヱヒモセス",s);case 34:return hc(e,3792,3801,!0,r);case 37:return hc(e,6160,6169,!0,r);case 38:return hc(e,4160,4169,!0,r);case 39:return hc(e,2918,2927,!0,r);case 40:return hc(e,1776,1785,!0,r);case 43:return hc(e,3046,3055,!0,r);case 44:return hc(e,3174,3183,!0,r);case 45:return hc(e,3664,3673,!0,r);case 46:return hc(e,3872,3881,!0,r);case 3:default:return hc(e,48,57,!0,r)}},rfe="data-html2canvas-ignore",TJ=function(){function e(t,n,r){if(this.context=t,this.options=r,this.scrolledElements=[],this.referenceElement=n,this.counters=new llt,this.quoteDepth=0,!n.ownerDocument)throw new Error("Cloned element does not have an owner document");this.documentElement=this.cloneNode(n.ownerDocument.documentElement,!1)}return e.prototype.toIFrame=function(t,n){var r=this,s=dlt(t,n);if(!s.contentWindow)return Promise.reject("Unable to find iframe window");var a=t.defaultView.pageXOffset,c=t.defaultView.pageYOffset,i=s.contentWindow,f=i.document,g=plt(s).then(function(){return dh(r,void 0,void 0,function(){var y,b;return Cd(this,function(T){switch(T.label){case 0:return this.scrolledElements.forEach(ylt),i&&(i.scrollTo(n.left,n.top),/(iPad|iPhone|iPod)/g.test(navigator.userAgent)&&(i.scrollY!==n.top||i.scrollX!==n.left)&&(this.context.logger.warn("Unable to restore scroll position for cloned document"),this.context.windowBounds=this.context.windowBounds.add(i.scrollX-n.left,i.scrollY-n.top,0,0))),y=this.options.onclone,b=this.clonedReferenceElement,typeof b>"u"?[2,Promise.reject("Error finding the "+this.referenceElement.nodeName+" in the cloned document")]:f.fonts&&f.fonts.ready?[4,f.fonts.ready]:[3,2];case 1:T.sent(),T.label=2;case 2:return/(AppleWebKit)/g.test(navigator.userAgent)?[4,flt(f)]:[3,4];case 3:T.sent(),T.label=4;case 4:return typeof y=="function"?[2,Promise.resolve().then(function(){return y(f,b)}).then(function(){return s})]:[2,s]}})})});return f.open(),f.write(mlt(document.doctype)+"<html></html>"),glt(this.referenceElement.ownerDocument,a,c),f.replaceChild(f.adoptNode(this.documentElement),f.documentElement),f.close(),g},e.prototype.createElementClone=function(t){if(J6(t,2))debugger;if(Jhe(t))return this.createCanvasClone(t);if(xJ(t))return this.createVideoClone(t);if(_J(t))return this.createStyleClone(t);var n=t.cloneNode(!1);return rU(n)&&(rU(t)&&t.currentSrc&&t.currentSrc!==t.src&&(n.src=t.currentSrc,n.srcset=""),n.loading==="lazy"&&(n.loading="eager")),wJ(n)?this.createCustomElementClone(n):n},e.prototype.createCustomElementClone=function(t){var n=document.createElement("html2canvascustomelement");return mR(t.style,n),n},e.prototype.createStyleClone=function(t){try{var n=t.sheet;if(n&&n.cssRules){var r=[].slice.call(n.cssRules,0).reduce(function(a,c){return c&&typeof c.cssText=="string"?a+c.cssText:a},""),s=t.cloneNode(!1);return s.textContent=r,s}}catch(a){if(this.context.logger.error("Unable to access cssRules property",a),a.name!=="SecurityError")throw a}return t.cloneNode(!1)},e.prototype.createCanvasClone=function(t){var n;if(this.options.inlineImages&&t.ownerDocument){var r=t.ownerDocument.createElement("img");try{return r.src=t.toDataURL(),r}catch{this.context.logger.info("Unable to inline canvas contents, canvas is tainted",t)}}var s=t.cloneNode(!1);try{s.width=t.width,s.height=t.height;var a=t.getContext("2d"),c=s.getContext("2d");if(c)if(!this.options.allowTaint&&a)c.putImageData(a.getImageData(0,0,t.width,t.height),0,0);else{var i=(n=t.getContext("webgl2"))!==null&&n!==void 0?n:t.getContext("webgl");if(i){var f=i.getContextAttributes();(f==null?void 0:f.preserveDrawingBuffer)===!1&&this.context.logger.warn("Unable to clone WebGL context as it has preserveDrawingBuffer=false",t)}c.drawImage(t,0,0)}return s}catch{this.context.logger.info("Unable to clone canvas as it is tainted",t)}return s},e.prototype.createVideoClone=function(t){var n=t.ownerDocument.createElement("canvas");n.width=t.offsetWidth,n.height=t.offsetHeight;var r=n.getContext("2d");try{return r&&(r.drawImage(t,0,0,n.width,n.height),this.options.allowTaint||r.getImageData(0,0,n.width,n.height)),n}catch{this.context.logger.info("Unable to clone video as it is tainted",t)}var s=t.ownerDocument.createElement("canvas");return s.width=t.offsetWidth,s.height=t.offsetHeight,s},e.prototype.appendChildNode=function(t,n,r){(!K1(n)||!alt(n)&&!n.hasAttribute(rfe)&&(typeof this.options.ignoreElements!="function"||!this.options.ignoreElements(n)))&&(!this.options.copyStyles||!K1(n)||!_J(n))&&t.appendChild(this.cloneNode(n,r))},e.prototype.cloneChildNodes=function(t,n,r){for(var s=this,a=t.shadowRoot?t.shadowRoot.firstChild:t.firstChild;a;a=a.nextSibling)if(K1(a)&&tfe(a)&&typeof a.assignedNodes=="function"){var c=a.assignedNodes();c.length&&c.forEach(function(i){return s.appendChildNode(n,i,r)})}else this.appendChildNode(n,a,r)},e.prototype.cloneNode=function(t,n){if(Xhe(t))return document.createTextNode(t.data);if(!t.ownerDocument)return t.cloneNode(!1);var r=t.ownerDocument.defaultView;if(r&&K1(t)&&(nU(t)||_I(t))){var s=this.createElementClone(t);s.style.transitionProperty="none";var a=r.getComputedStyle(t),c=r.getComputedStyle(t,":before"),i=r.getComputedStyle(t,":after");this.referenceElement===t&&nU(s)&&(this.clonedReferenceElement=s),IQ(s)&&_lt(s);var f=this.counters.parse(new sJ(this.context,a)),g=this.resolvePseudoContent(t,s,c,zC.BEFORE);wJ(t)&&(n=!0),xJ(t)||this.cloneChildNodes(t,s,n),g&&s.insertBefore(g,s.firstChild);var y=this.resolvePseudoContent(t,s,i,zC.AFTER);return y&&s.appendChild(y),this.counters.pop(f),(a&&(this.options.copyStyles||_I(t))&&!efe(t)||n)&&mR(a,s),(t.scrollTop!==0||t.scrollLeft!==0)&&this.scrolledElements.push([s,t.scrollLeft,t.scrollTop]),(cF(t)||uF(t))&&(cF(s)||uF(s))&&(s.value=t.value),s}return t.cloneNode(!1)},e.prototype.resolvePseudoContent=function(t,n,r,s){var a=this;if(r){var c=r.content,i=n.ownerDocument;if(!(!i||!c||c==="none"||c==="-moz-alt-content"||r.display==="none")){this.counters.parse(new sJ(this.context,r));var f=new rat(this.context,r),g=i.createElement("html2canvaspseudoelement");mR(r,g),f.content.forEach(function(b){if(b.type===0)g.appendChild(i.createTextNode(b.value));else if(b.type===22){var T=i.createElement("img");T.src=b.value,T.style.opacity="1",g.appendChild(T)}else if(b.type===18){if(b.name==="attr"){var S=b.values.filter(fa);S.length&&g.appendChild(i.createTextNode(t.getAttribute(S[0].value)||""))}else if(b.name==="counter"){var U=b.values.filter(zw),N=U[0],W=U[1];if(N&&fa(N)){var L=a.counters.getCounterValue(N.value),Q=W&&fa(W)?Y6.parse(a.context,W.value):3;g.appendChild(i.createTextNode(uB(L,Q,!1)))}}else if(b.name==="counters"){var V=b.values.filter(zw),N=V[0],Z=V[1],W=V[2];if(N&&fa(N)){var ne=a.counters.getCounterValues(N.value),Y=W&&fa(W)?Y6.parse(a.context,W.value):3,le=Z&&Z.type===0?Z.value:"",pe=ne.map(function(he){return uB(he,Y,!1)}).join(le);g.appendChild(i.createTextNode(pe))}}}else if(b.type===20)switch(b.value){case"open-quote":g.appendChild(i.createTextNode(iJ(f.quotes,a.quoteDepth++,!0)));break;case"close-quote":g.appendChild(i.createTextNode(iJ(f.quotes,--a.quoteDepth,!1)));break;default:g.appendChild(i.createTextNode(b.value))}}),g.className=iU+" "+sU;var y=s===zC.BEFORE?" "+iU:" "+sU;return _I(n)?n.className.baseValue+=y:n.className+=y,g}}},e.destroy=function(t){return t.parentNode?(t.parentNode.removeChild(t),!0):!1},e}(),zC;(function(e){e[e.BEFORE=0]="BEFORE",e[e.AFTER=1]="AFTER"})(zC||(zC={}));var dlt=function(e,t){var n=e.createElement("iframe");return n.className="html2canvas-container",n.style.visibility="hidden",n.style.position="fixed",n.style.left="-10000px",n.style.top="0px",n.style.border="0",n.width=t.width.toString(),n.height=t.height.toString(),n.scrolling="no",n.setAttribute(rfe,"true"),e.body.appendChild(n),n},hlt=function(e){return new Promise(function(t){if(e.complete){t();return}if(!e.src){t();return}e.onload=t,e.onerror=t})},flt=function(e){return Promise.all([].slice.call(e.images,0).map(hlt))},plt=function(e){return new Promise(function(t,n){var r=e.contentWindow;if(!r)return n("No window assigned for iframe");var s=r.document;r.onload=e.onload=function(){r.onload=e.onload=null;var a=setInterval(function(){s.body.childNodes.length>0&&s.readyState==="complete"&&(clearInterval(a),t(e))},50)}})},Alt=["all","d","content"],mR=function(e,t){for(var n=e.length-1;n>=0;n--){var r=e.item(n);Alt.indexOf(r)===-1&&t.style.setProperty(r,e.getPropertyValue(r))}return t},mlt=function(e){var t="";return e&&(t+="<!DOCTYPE ",e.name&&(t+=e.name),e.internalSubset&&(t+=e.internalSubset),e.publicId&&(t+='"'+e.publicId+'"'),e.systemId&&(t+='"'+e.systemId+'"'),t+=">"),t},glt=function(e,t,n){e&&e.defaultView&&(t!==e.defaultView.pageXOffset||n!==e.defaultView.pageYOffset)&&e.defaultView.scrollTo(t,n)},ylt=function(e){var t=e[0],n=e[1],r=e[2];t.scrollLeft=n,t.scrollTop=r},vlt=":before",xlt=":after",iU="___html2canvas___pseudoelement_before",sU="___html2canvas___pseudoelement_after",IJ=`{
    content: "" !important;
    display: none !important;
}`,_lt=function(e){wlt(e,"."+iU+vlt+IJ+`
         .`+sU+xlt+IJ)},wlt=function(e,t){var n=e.ownerDocument;if(n){var r=n.createElement("style");r.textContent=t,e.appendChild(r)}},ife=function(){function e(){}return e.getOrigin=function(t){var n=e._link;return n?(n.href=t,n.href=n.href,n.protocol+n.hostname+n.port):"about:blank"},e.isSameOrigin=function(t){return e.getOrigin(t)===e._origin},e.setContext=function(t){e._link=t.document.createElement("a"),e._origin=e.getOrigin(t.location.href)},e._origin="about:blank",e}(),blt=function(){function e(t,n){this.context=t,this._options=n,this._cache={}}return e.prototype.addImage=function(t){var n=Promise.resolve();return this.has(t)||(yR(t)||Elt(t))&&(this._cache[t]=this.loadImage(t)).catch(function(){}),n},e.prototype.match=function(t){return this._cache[t]},e.prototype.loadImage=function(t){return dh(this,void 0,void 0,function(){var n,r,s,a,c=this;return Cd(this,function(i){switch(i.label){case 0:return n=ife.isSameOrigin(t),r=!gR(t)&&this._options.useCORS===!0&&zu.SUPPORT_CORS_IMAGES&&!n,s=!gR(t)&&!n&&!yR(t)&&typeof this._options.proxy=="string"&&zu.SUPPORT_CORS_XHR&&!r,!n&&this._options.allowTaint===!1&&!gR(t)&&!yR(t)&&!s&&!r?[2]:(a=t,s?[4,this.proxy(a)]:[3,2]);case 1:a=i.sent(),i.label=2;case 2:return this.context.logger.debug("Added image "+t.substring(0,256)),[4,new Promise(function(f,g){var y=new Image;y.onload=function(){return f(y)},y.onerror=g,(Tlt(a)||r)&&(y.crossOrigin="anonymous"),y.src=a,y.complete===!0&&setTimeout(function(){return f(y)},500),c._options.imageTimeout>0&&setTimeout(function(){return g("Timed out ("+c._options.imageTimeout+"ms) loading image")},c._options.imageTimeout)})];case 3:return[2,i.sent()]}})})},e.prototype.has=function(t){return typeof this._cache[t]<"u"},e.prototype.keys=function(){return Promise.resolve(Object.keys(this._cache))},e.prototype.proxy=function(t){var n=this,r=this._options.proxy;if(!r)throw new Error("No proxy defined");var s=t.substring(0,256);return new Promise(function(a,c){var i=zu.SUPPORT_RESPONSE_TYPE?"blob":"text",f=new XMLHttpRequest;f.onload=function(){if(f.status===200)if(i==="text")a(f.response);else{var b=new FileReader;b.addEventListener("load",function(){return a(b.result)},!1),b.addEventListener("error",function(T){return c(T)},!1),b.readAsDataURL(f.response)}else c("Failed to proxy resource "+s+" with status code "+f.status)},f.onerror=c;var g=r.indexOf("?")>-1?"&":"?";if(f.open("GET",""+r+g+"url="+encodeURIComponent(t)+"&responseType="+i),i!=="text"&&f instanceof XMLHttpRequest&&(f.responseType=i),n._options.imageTimeout){var y=n._options.imageTimeout;f.timeout=y,f.ontimeout=function(){return c("Timed out ("+y+"ms) proxying "+s)}}f.send()})},e}(),Clt=/^data:image\/svg\+xml/i,Slt=/^data:image\/.*;base64,/i,Blt=/^data:image\/.*/i,Elt=function(e){return zu.SUPPORT_SVG_DRAWING||!Ilt(e)},gR=function(e){return Blt.test(e)},Tlt=function(e){return Slt.test(e)},yR=function(e){return e.substr(0,4)==="blob"},Ilt=function(e){return e.substr(-3).toLowerCase()==="svg"||Clt.test(e)},Yr=function(){function e(t,n){this.type=0,this.x=t,this.y=n}return e.prototype.add=function(t,n){return new e(this.x+t,this.y+n)},e}(),p1=function(e,t,n){return new Yr(e.x+(t.x-e.x)*n,e.y+(t.y-e.y)*n)},yT=function(){function e(t,n,r,s){this.type=1,this.start=t,this.startControl=n,this.endControl=r,this.end=s}return e.prototype.subdivide=function(t,n){var r=p1(this.start,this.startControl,t),s=p1(this.startControl,this.endControl,t),a=p1(this.endControl,this.end,t),c=p1(r,s,t),i=p1(s,a,t),f=p1(c,i,t);return n?new e(this.start,r,c,f):new e(f,i,a,this.end)},e.prototype.add=function(t,n){return new e(this.start.add(t,n),this.startControl.add(t,n),this.endControl.add(t,n),this.end.add(t,n))},e.prototype.reverse=function(){return new e(this.end,this.endControl,this.startControl,this.start)},e}(),Np=function(e){return e.type===1},jlt=function(){function e(t){var n=t.styles,r=t.bounds,s=cC(n.borderTopLeftRadius,r.width,r.height),a=s[0],c=s[1],i=cC(n.borderTopRightRadius,r.width,r.height),f=i[0],g=i[1],y=cC(n.borderBottomRightRadius,r.width,r.height),b=y[0],T=y[1],S=cC(n.borderBottomLeftRadius,r.width,r.height),U=S[0],N=S[1],W=[];W.push((a+f)/r.width),W.push((U+b)/r.width),W.push((c+N)/r.height),W.push((g+T)/r.height);var L=Math.max.apply(Math,W);L>1&&(a/=L,c/=L,f/=L,g/=L,b/=L,T/=L,U/=L,N/=L);var Q=r.width-f,V=r.height-T,Z=r.width-b,ne=r.height-N,Y=n.borderTopWidth,le=n.borderRightWidth,pe=n.borderBottomWidth,_e=n.borderLeftWidth,ye=Ma(n.paddingTop,t.bounds.width),he=Ma(n.paddingRight,t.bounds.width),be=Ma(n.paddingBottom,t.bounds.width),Te=Ma(n.paddingLeft,t.bounds.width);this.topLeftBorderDoubleOuterBox=a>0||c>0?pl(r.left+_e/3,r.top+Y/3,a-_e/3,c-Y/3,ea.TOP_LEFT):new Yr(r.left+_e/3,r.top+Y/3),this.topRightBorderDoubleOuterBox=a>0||c>0?pl(r.left+Q,r.top+Y/3,f-le/3,g-Y/3,ea.TOP_RIGHT):new Yr(r.left+r.width-le/3,r.top+Y/3),this.bottomRightBorderDoubleOuterBox=b>0||T>0?pl(r.left+Z,r.top+V,b-le/3,T-pe/3,ea.BOTTOM_RIGHT):new Yr(r.left+r.width-le/3,r.top+r.height-pe/3),this.bottomLeftBorderDoubleOuterBox=U>0||N>0?pl(r.left+_e/3,r.top+ne,U-_e/3,N-pe/3,ea.BOTTOM_LEFT):new Yr(r.left+_e/3,r.top+r.height-pe/3),this.topLeftBorderDoubleInnerBox=a>0||c>0?pl(r.left+_e*2/3,r.top+Y*2/3,a-_e*2/3,c-Y*2/3,ea.TOP_LEFT):new Yr(r.left+_e*2/3,r.top+Y*2/3),this.topRightBorderDoubleInnerBox=a>0||c>0?pl(r.left+Q,r.top+Y*2/3,f-le*2/3,g-Y*2/3,ea.TOP_RIGHT):new Yr(r.left+r.width-le*2/3,r.top+Y*2/3),this.bottomRightBorderDoubleInnerBox=b>0||T>0?pl(r.left+Z,r.top+V,b-le*2/3,T-pe*2/3,ea.BOTTOM_RIGHT):new Yr(r.left+r.width-le*2/3,r.top+r.height-pe*2/3),this.bottomLeftBorderDoubleInnerBox=U>0||N>0?pl(r.left+_e*2/3,r.top+ne,U-_e*2/3,N-pe*2/3,ea.BOTTOM_LEFT):new Yr(r.left+_e*2/3,r.top+r.height-pe*2/3),this.topLeftBorderStroke=a>0||c>0?pl(r.left+_e/2,r.top+Y/2,a-_e/2,c-Y/2,ea.TOP_LEFT):new Yr(r.left+_e/2,r.top+Y/2),this.topRightBorderStroke=a>0||c>0?pl(r.left+Q,r.top+Y/2,f-le/2,g-Y/2,ea.TOP_RIGHT):new Yr(r.left+r.width-le/2,r.top+Y/2),this.bottomRightBorderStroke=b>0||T>0?pl(r.left+Z,r.top+V,b-le/2,T-pe/2,ea.BOTTOM_RIGHT):new Yr(r.left+r.width-le/2,r.top+r.height-pe/2),this.bottomLeftBorderStroke=U>0||N>0?pl(r.left+_e/2,r.top+ne,U-_e/2,N-pe/2,ea.BOTTOM_LEFT):new Yr(r.left+_e/2,r.top+r.height-pe/2),this.topLeftBorderBox=a>0||c>0?pl(r.left,r.top,a,c,ea.TOP_LEFT):new Yr(r.left,r.top),this.topRightBorderBox=f>0||g>0?pl(r.left+Q,r.top,f,g,ea.TOP_RIGHT):new Yr(r.left+r.width,r.top),this.bottomRightBorderBox=b>0||T>0?pl(r.left+Z,r.top+V,b,T,ea.BOTTOM_RIGHT):new Yr(r.left+r.width,r.top+r.height),this.bottomLeftBorderBox=U>0||N>0?pl(r.left,r.top+ne,U,N,ea.BOTTOM_LEFT):new Yr(r.left,r.top+r.height),this.topLeftPaddingBox=a>0||c>0?pl(r.left+_e,r.top+Y,Math.max(0,a-_e),Math.max(0,c-Y),ea.TOP_LEFT):new Yr(r.left+_e,r.top+Y),this.topRightPaddingBox=f>0||g>0?pl(r.left+Math.min(Q,r.width-le),r.top+Y,Q>r.width+le?0:Math.max(0,f-le),Math.max(0,g-Y),ea.TOP_RIGHT):new Yr(r.left+r.width-le,r.top+Y),this.bottomRightPaddingBox=b>0||T>0?pl(r.left+Math.min(Z,r.width-_e),r.top+Math.min(V,r.height-pe),Math.max(0,b-le),Math.max(0,T-pe),ea.BOTTOM_RIGHT):new Yr(r.left+r.width-le,r.top+r.height-pe),this.bottomLeftPaddingBox=U>0||N>0?pl(r.left+_e,r.top+Math.min(ne,r.height-pe),Math.max(0,U-_e),Math.max(0,N-pe),ea.BOTTOM_LEFT):new Yr(r.left+_e,r.top+r.height-pe),this.topLeftContentBox=a>0||c>0?pl(r.left+_e+Te,r.top+Y+ye,Math.max(0,a-(_e+Te)),Math.max(0,c-(Y+ye)),ea.TOP_LEFT):new Yr(r.left+_e+Te,r.top+Y+ye),this.topRightContentBox=f>0||g>0?pl(r.left+Math.min(Q,r.width+_e+Te),r.top+Y+ye,Q>r.width+_e+Te?0:f-_e+Te,g-(Y+ye),ea.TOP_RIGHT):new Yr(r.left+r.width-(le+he),r.top+Y+ye),this.bottomRightContentBox=b>0||T>0?pl(r.left+Math.min(Z,r.width-(_e+Te)),r.top+Math.min(V,r.height+Y+ye),Math.max(0,b-(le+he)),T-(pe+be),ea.BOTTOM_RIGHT):new Yr(r.left+r.width-(le+he),r.top+r.height-(pe+be)),this.bottomLeftContentBox=U>0||N>0?pl(r.left+_e+Te,r.top+ne,Math.max(0,U-(_e+Te)),N-(pe+be),ea.BOTTOM_LEFT):new Yr(r.left+_e+Te,r.top+r.height-(pe+be))}return e}(),ea;(function(e){e[e.TOP_LEFT=0]="TOP_LEFT",e[e.TOP_RIGHT=1]="TOP_RIGHT",e[e.BOTTOM_RIGHT=2]="BOTTOM_RIGHT",e[e.BOTTOM_LEFT=3]="BOTTOM_LEFT"})(ea||(ea={}));var pl=function(e,t,n,r,s){var a=4*((Math.sqrt(2)-1)/3),c=n*a,i=r*a,f=e+n,g=t+r;switch(s){case ea.TOP_LEFT:return new yT(new Yr(e,g),new Yr(e,g-i),new Yr(f-c,t),new Yr(f,t));case ea.TOP_RIGHT:return new yT(new Yr(e,t),new Yr(e+c,t),new Yr(f,g-i),new Yr(f,g));case ea.BOTTOM_RIGHT:return new yT(new Yr(f,t),new Yr(f,t+i),new Yr(e+c,g),new Yr(e,g));case ea.BOTTOM_LEFT:default:return new yT(new Yr(f,g),new Yr(f-c,g),new Yr(e,t+i),new Yr(e,t))}},dF=function(e){return[e.topLeftBorderBox,e.topRightBorderBox,e.bottomRightBorderBox,e.bottomLeftBorderBox]},Flt=function(e){return[e.topLeftContentBox,e.topRightContentBox,e.bottomRightContentBox,e.bottomLeftContentBox]},hF=function(e){return[e.topLeftPaddingBox,e.topRightPaddingBox,e.bottomRightPaddingBox,e.bottomLeftPaddingBox]},Plt=function(){function e(t,n,r){this.offsetX=t,this.offsetY=n,this.matrix=r,this.type=0,this.target=6}return e}(),vT=function(){function e(t,n){this.path=t,this.target=n,this.type=1}return e}(),klt=function(){function e(t){this.opacity=t,this.type=2,this.target=6}return e}(),Llt=function(e){return e.type===0},sfe=function(e){return e.type===1},Mlt=function(e){return e.type===2},jJ=function(e,t){return e.length===t.length?e.some(function(n,r){return n===t[r]}):!1},Nlt=function(e,t,n,r,s){return e.map(function(a,c){switch(c){case 0:return a.add(t,n);case 1:return a.add(t+r,n);case 2:return a.add(t+r,n+s);case 3:return a.add(t,n+s)}return a})},ofe=function(){function e(t){this.element=t,this.inlineLevel=[],this.nonInlineLevel=[],this.negativeZIndex=[],this.zeroOrAutoZIndexOrTransformedOrOpacity=[],this.positiveZIndex=[],this.nonPositionedFloats=[],this.nonPositionedInlineLevel=[]}return e}(),afe=function(){function e(t,n){if(this.container=t,this.parent=n,this.effects=[],this.curves=new jlt(this.container),this.container.styles.opacity<1&&this.effects.push(new klt(this.container.styles.opacity)),this.container.styles.transform!==null){var r=this.container.bounds.left+this.container.styles.transformOrigin[0].number,s=this.container.bounds.top+this.container.styles.transformOrigin[1].number,a=this.container.styles.transform;this.effects.push(new Plt(r,s,a))}if(this.container.styles.overflowX!==0){var c=dF(this.curves),i=hF(this.curves);jJ(c,i)?this.effects.push(new vT(c,6)):(this.effects.push(new vT(c,2)),this.effects.push(new vT(i,4)))}}return e.prototype.getEffects=function(t){for(var n=[2,3].indexOf(this.container.styles.position)===-1,r=this.parent,s=this.effects.slice(0);r;){var a=r.effects.filter(function(f){return!sfe(f)});if(n||r.container.styles.position!==0||!r.parent){if(s.unshift.apply(s,a),n=[2,3].indexOf(r.container.styles.position)===-1,r.container.styles.overflowX!==0){var c=dF(r.curves),i=hF(r.curves);jJ(c,i)||s.unshift(new vT(i,6))}}else s.unshift.apply(s,a);r=r.parent}return s.filter(function(f){return Jc(f.target,t)})},e}(),oU=function(e,t,n,r){e.container.elements.forEach(function(s){var a=Jc(s.flags,4),c=Jc(s.flags,2),i=new afe(s,e);Jc(s.styles.display,2048)&&r.push(i);var f=Jc(s.flags,8)?[]:r;if(a||c){var g=a||s.styles.isPositioned()?n:t,y=new ofe(i);if(s.styles.isPositioned()||s.styles.opacity<1||s.styles.isTransformed()){var b=s.styles.zIndex.order;if(b<0){var T=0;g.negativeZIndex.some(function(U,N){return b>U.element.container.styles.zIndex.order?(T=N,!1):T>0}),g.negativeZIndex.splice(T,0,y)}else if(b>0){var S=0;g.positiveZIndex.some(function(U,N){return b>=U.element.container.styles.zIndex.order?(S=N+1,!1):S>0}),g.positiveZIndex.splice(S,0,y)}else g.zeroOrAutoZIndexOrTransformedOrOpacity.push(y)}else s.styles.isFloating()?g.nonPositionedFloats.push(y):g.nonPositionedInlineLevel.push(y);oU(i,y,a?y:n,f)}else s.styles.isInlineLevel()?t.inlineLevel.push(i):t.nonInlineLevel.push(i),oU(i,t,n,f);Jc(s.flags,8)&&lfe(s,f)})},lfe=function(e,t){for(var n=e instanceof tU?e.start:1,r=e instanceof tU?e.reversed:!1,s=0;s<t.length;s++){var a=t[s];a.container instanceof $he&&typeof a.container.value=="number"&&a.container.value!==0&&(n=a.container.value),a.listValue=uB(n,a.container.styles.listStyleType,!0),n+=r?-1:1}},Rlt=function(e){var t=new afe(e,null),n=new ofe(t),r=[];return oU(t,n,n,r),lfe(t.container,r),n},FJ=function(e,t){switch(t){case 0:return Up(e.topLeftBorderBox,e.topLeftPaddingBox,e.topRightBorderBox,e.topRightPaddingBox);case 1:return Up(e.topRightBorderBox,e.topRightPaddingBox,e.bottomRightBorderBox,e.bottomRightPaddingBox);case 2:return Up(e.bottomRightBorderBox,e.bottomRightPaddingBox,e.bottomLeftBorderBox,e.bottomLeftPaddingBox);case 3:default:return Up(e.bottomLeftBorderBox,e.bottomLeftPaddingBox,e.topLeftBorderBox,e.topLeftPaddingBox)}},Olt=function(e,t){switch(t){case 0:return Up(e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox,e.topRightBorderBox,e.topRightBorderDoubleOuterBox);case 1:return Up(e.topRightBorderBox,e.topRightBorderDoubleOuterBox,e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox);case 2:return Up(e.bottomRightBorderBox,e.bottomRightBorderDoubleOuterBox,e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox);case 3:default:return Up(e.bottomLeftBorderBox,e.bottomLeftBorderDoubleOuterBox,e.topLeftBorderBox,e.topLeftBorderDoubleOuterBox)}},Dlt=function(e,t){switch(t){case 0:return Up(e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox,e.topRightBorderDoubleInnerBox,e.topRightPaddingBox);case 1:return Up(e.topRightBorderDoubleInnerBox,e.topRightPaddingBox,e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox);case 2:return Up(e.bottomRightBorderDoubleInnerBox,e.bottomRightPaddingBox,e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox);case 3:default:return Up(e.bottomLeftBorderDoubleInnerBox,e.bottomLeftPaddingBox,e.topLeftBorderDoubleInnerBox,e.topLeftPaddingBox)}},Ult=function(e,t){switch(t){case 0:return xT(e.topLeftBorderStroke,e.topRightBorderStroke);case 1:return xT(e.topRightBorderStroke,e.bottomRightBorderStroke);case 2:return xT(e.bottomRightBorderStroke,e.bottomLeftBorderStroke);case 3:default:return xT(e.bottomLeftBorderStroke,e.topLeftBorderStroke)}},xT=function(e,t){var n=[];return Np(e)?n.push(e.subdivide(.5,!1)):n.push(e),Np(t)?n.push(t.subdivide(.5,!0)):n.push(t),n},Up=function(e,t,n,r){var s=[];return Np(e)?s.push(e.subdivide(.5,!1)):s.push(e),Np(n)?s.push(n.subdivide(.5,!0)):s.push(n),Np(r)?s.push(r.subdivide(.5,!0).reverse()):s.push(r),Np(t)?s.push(t.subdivide(.5,!1).reverse()):s.push(t),s},cfe=function(e){var t=e.bounds,n=e.styles;return t.add(n.borderLeftWidth,n.borderTopWidth,-(n.borderRightWidth+n.borderLeftWidth),-(n.borderTopWidth+n.borderBottomWidth))},fF=function(e){var t=e.styles,n=e.bounds,r=Ma(t.paddingLeft,n.width),s=Ma(t.paddingRight,n.width),a=Ma(t.paddingTop,n.width),c=Ma(t.paddingBottom,n.width);return n.add(r+t.borderLeftWidth,a+t.borderTopWidth,-(t.borderRightWidth+t.borderLeftWidth+r+s),-(t.borderTopWidth+t.borderBottomWidth+a+c))},zlt=function(e,t){return e===0?t.bounds:e===2?fF(t):cfe(t)},Qlt=function(e,t){return e===0?t.bounds:e===2?fF(t):cfe(t)},vR=function(e,t,n){var r=zlt(B1(e.styles.backgroundOrigin,t),e),s=Qlt(B1(e.styles.backgroundClip,t),e),a=Hlt(B1(e.styles.backgroundSize,t),n,r),c=a[0],i=a[1],f=cC(B1(e.styles.backgroundPosition,t),r.width-c,r.height-i),g=Vlt(B1(e.styles.backgroundRepeat,t),f,a,r,s),y=Math.round(r.left+f[0]),b=Math.round(r.top+f[1]);return[g,y,b,c,i]},A1=function(e){return fa(e)&&e.value===uw.AUTO},_T=function(e){return typeof e=="number"},Hlt=function(e,t,n){var r=t[0],s=t[1],a=t[2],c=e[0],i=e[1];if(!c)return[0,0];if(Nc(c)&&i&&Nc(i))return[Ma(c,n.width),Ma(i,n.height)];var f=_T(a);if(fa(c)&&(c.value===uw.CONTAIN||c.value===uw.COVER)){if(_T(a)){var g=n.width/n.height;return g<a!=(c.value===uw.COVER)?[n.width,n.width/a]:[n.height*a,n.height]}return[n.width,n.height]}var y=_T(r),b=_T(s),T=y||b;if(A1(c)&&(!i||A1(i))){if(y&&b)return[r,s];if(!f&&!T)return[n.width,n.height];if(T&&f){var S=y?r:s*a,U=b?s:r/a;return[S,U]}var N=y?r:n.width,W=b?s:n.height;return[N,W]}if(f){var L=0,Q=0;return Nc(c)?L=Ma(c,n.width):Nc(i)&&(Q=Ma(i,n.height)),A1(c)?L=Q*a:(!i||A1(i))&&(Q=L/a),[L,Q]}var V=null,Z=null;if(Nc(c)?V=Ma(c,n.width):i&&Nc(i)&&(Z=Ma(i,n.height)),V!==null&&(!i||A1(i))&&(Z=y&&b?V/r*s:n.height),Z!==null&&A1(c)&&(V=y&&b?Z/s*r:n.width),V!==null&&Z!==null)return[V,Z];throw new Error("Unable to calculate background-size for element")},B1=function(e,t){var n=e[t];return typeof n>"u"?e[0]:n},Vlt=function(e,t,n,r,s){var a=t[0],c=t[1],i=n[0],f=n[1];switch(e){case 2:return[new Yr(Math.round(r.left),Math.round(r.top+c)),new Yr(Math.round(r.left+r.width),Math.round(r.top+c)),new Yr(Math.round(r.left+r.width),Math.round(f+r.top+c)),new Yr(Math.round(r.left),Math.round(f+r.top+c))];case 3:return[new Yr(Math.round(r.left+a),Math.round(r.top)),new Yr(Math.round(r.left+a+i),Math.round(r.top)),new Yr(Math.round(r.left+a+i),Math.round(r.height+r.top)),new Yr(Math.round(r.left+a),Math.round(r.height+r.top))];case 1:return[new Yr(Math.round(r.left+a),Math.round(r.top+c)),new Yr(Math.round(r.left+a+i),Math.round(r.top+c)),new Yr(Math.round(r.left+a+i),Math.round(r.top+c+f)),new Yr(Math.round(r.left+a),Math.round(r.top+c+f))];default:return[new Yr(Math.round(s.left),Math.round(s.top)),new Yr(Math.round(s.left+s.width),Math.round(s.top)),new Yr(Math.round(s.left+s.width),Math.round(s.height+s.top)),new Yr(Math.round(s.left),Math.round(s.height+s.top))]}},$lt="data:image/gif;base64,R0lGODlhAQABAIAAAAAAAP///yH5BAEAAAAALAAAAAABAAEAAAIBRAA7",PJ="Hidden Text",Glt=function(){function e(t){this._data={},this._document=t}return e.prototype.parseMetrics=function(t,n){var r=this._document.createElement("div"),s=this._document.createElement("img"),a=this._document.createElement("span"),c=this._document.body;r.style.visibility="hidden",r.style.fontFamily=t,r.style.fontSize=n,r.style.margin="0",r.style.padding="0",r.style.whiteSpace="nowrap",c.appendChild(r),s.src=$lt,s.width=1,s.height=1,s.style.margin="0",s.style.padding="0",s.style.verticalAlign="baseline",a.style.fontFamily=t,a.style.fontSize=n,a.style.margin="0",a.style.padding="0",a.appendChild(this._document.createTextNode(PJ)),r.appendChild(a),r.appendChild(s);var i=s.offsetTop-a.offsetTop+2;r.removeChild(a),r.appendChild(this._document.createTextNode(PJ)),r.style.lineHeight="normal",s.style.verticalAlign="super";var f=s.offsetTop-r.offsetTop+2;return c.removeChild(r),{baseline:i,middle:f}},e.prototype.getMetrics=function(t,n){var r=t+" "+n;return typeof this._data[r]>"u"&&(this._data[r]=this.parseMetrics(t,n)),this._data[r]},e}(),ufe=function(){function e(t,n){this.context=t,this.options=n}return e}(),Klt=1e4,Wlt=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s._activeEffects=[],s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),r.canvas||(s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px"),s.fontMetrics=new Glt(document),s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.ctx.textBaseline="bottom",s._activeEffects=[],s.context.logger.debug("Canvas renderer initialized ("+r.width+"x"+r.height+") with scale "+r.scale),s}return t.prototype.applyEffects=function(n){for(var r=this;this._activeEffects.length;)this.popEffect();n.forEach(function(s){return r.applyEffect(s)})},t.prototype.applyEffect=function(n){this.ctx.save(),Mlt(n)&&(this.ctx.globalAlpha=n.opacity),Llt(n)&&(this.ctx.translate(n.offsetX,n.offsetY),this.ctx.transform(n.matrix[0],n.matrix[1],n.matrix[2],n.matrix[3],n.matrix[4],n.matrix[5]),this.ctx.translate(-n.offsetX,-n.offsetY)),sfe(n)&&(this.path(n.path),this.ctx.clip()),this._activeEffects.push(n)},t.prototype.popEffect=function(){this._activeEffects.pop(),this.ctx.restore()},t.prototype.renderStack=function(n){return dh(this,void 0,void 0,function(){var r;return Cd(this,function(s){switch(s.label){case 0:return r=n.element.container.styles,r.isVisible()?[4,this.renderStackContent(n)]:[3,2];case 1:s.sent(),s.label=2;case 2:return[2]}})})},t.prototype.renderNode=function(n){return dh(this,void 0,void 0,function(){return Cd(this,function(r){switch(r.label){case 0:if(Jc(n.container.flags,16))debugger;return n.container.styles.isVisible()?[4,this.renderNodeBackgroundAndBorders(n)]:[3,3];case 1:return r.sent(),[4,this.renderNodeContent(n)];case 2:r.sent(),r.label=3;case 3:return[2]}})})},t.prototype.renderTextWithLetterSpacing=function(n,r,s){var a=this;if(r===0)this.ctx.fillText(n.text,n.bounds.left,n.bounds.top+s);else{var c=EQ(n.text);c.reduce(function(i,f){return a.ctx.fillText(f,i,n.bounds.top+s),i+a.ctx.measureText(f).width},n.bounds.left)}},t.prototype.createFontStyle=function(n){var r=n.fontVariant.filter(function(c){return c==="normal"||c==="small-caps"}).join(""),s=Jlt(n.fontFamily).join(", "),a=lE(n.fontSize)?""+n.fontSize.number+n.fontSize.unit:n.fontSize.number+"px";return[[n.fontStyle,r,n.fontWeight,a,s].join(" "),s,a]},t.prototype.renderTextNode=function(n,r){return dh(this,void 0,void 0,function(){var s,a,c,i,f,g,y,b,T=this;return Cd(this,function(S){return s=this.createFontStyle(r),a=s[0],c=s[1],i=s[2],this.ctx.font=a,this.ctx.direction=r.direction===1?"rtl":"ltr",this.ctx.textAlign="left",this.ctx.textBaseline="alphabetic",f=this.fontMetrics.getMetrics(c,i),g=f.baseline,y=f.middle,b=r.paintOrder,n.textBounds.forEach(function(U){b.forEach(function(N){switch(N){case 0:T.ctx.fillStyle=Au(r.color),T.renderTextWithLetterSpacing(U,r.letterSpacing,g);var W=r.textShadow;W.length&&U.text.trim().length&&(W.slice(0).reverse().forEach(function(L){T.ctx.shadowColor=Au(L.color),T.ctx.shadowOffsetX=L.offsetX.number*T.options.scale,T.ctx.shadowOffsetY=L.offsetY.number*T.options.scale,T.ctx.shadowBlur=L.blur.number,T.renderTextWithLetterSpacing(U,r.letterSpacing,g)}),T.ctx.shadowColor="",T.ctx.shadowOffsetX=0,T.ctx.shadowOffsetY=0,T.ctx.shadowBlur=0),r.textDecorationLine.length&&(T.ctx.fillStyle=Au(r.textDecorationColor||r.color),r.textDecorationLine.forEach(function(L){switch(L){case 1:T.ctx.fillRect(U.bounds.left,Math.round(U.bounds.top+g),U.bounds.width,1);break;case 2:T.ctx.fillRect(U.bounds.left,Math.round(U.bounds.top),U.bounds.width,1);break;case 3:T.ctx.fillRect(U.bounds.left,Math.ceil(U.bounds.top+y),U.bounds.width,1);break}}));break;case 1:r.webkitTextStrokeWidth&&U.text.trim().length&&(T.ctx.strokeStyle=Au(r.webkitTextStrokeColor),T.ctx.lineWidth=r.webkitTextStrokeWidth,T.ctx.lineJoin=window.chrome?"miter":"round",T.ctx.strokeText(U.text,U.bounds.left,U.bounds.top+g)),T.ctx.strokeStyle="",T.ctx.lineWidth=0,T.ctx.lineJoin="miter";break}})}),[2]})})},t.prototype.renderReplacedElement=function(n,r,s){if(s&&n.intrinsicWidth>0&&n.intrinsicHeight>0){var a=fF(n),c=hF(r);this.path(c),this.ctx.save(),this.ctx.clip(),this.ctx.drawImage(s,0,0,n.intrinsicWidth,n.intrinsicHeight,a.left,a.top,a.width,a.height),this.ctx.restore()}},t.prototype.renderNodeContent=function(n){return dh(this,void 0,void 0,function(){var r,s,a,c,i,f,Q,Q,g,y,b,T,Z,S,U,ne,N,W,L,Q,V,Z,ne;return Cd(this,function(Y){switch(Y.label){case 0:this.applyEffects(n.getEffects(4)),r=n.container,s=n.curves,a=r.styles,c=0,i=r.textNodes,Y.label=1;case 1:return c<i.length?(f=i[c],[4,this.renderTextNode(f,a)]):[3,4];case 2:Y.sent(),Y.label=3;case 3:return c++,[3,1];case 4:if(!(r instanceof Qhe))return[3,8];Y.label=5;case 5:return Y.trys.push([5,7,,8]),[4,this.context.cache.match(r.src)];case 6:return Q=Y.sent(),this.renderReplacedElement(r,s,Q),[3,8];case 7:return Y.sent(),this.context.logger.error("Error loading image "+r.src),[3,8];case 8:if(r instanceof Hhe&&this.renderReplacedElement(r,s,r.canvas),!(r instanceof Vhe))return[3,12];Y.label=9;case 9:return Y.trys.push([9,11,,12]),[4,this.context.cache.match(r.svg)];case 10:return Q=Y.sent(),this.renderReplacedElement(r,s,Q),[3,12];case 11:return Y.sent(),this.context.logger.error("Error loading svg "+r.svg.substring(0,255)),[3,12];case 12:return r instanceof Whe&&r.tree?(g=new t(this.context,{scale:this.options.scale,backgroundColor:r.backgroundColor,x:0,y:0,width:r.width,height:r.height}),[4,g.render(r.tree)]):[3,14];case 13:y=Y.sent(),r.width&&r.height&&this.ctx.drawImage(y,0,0,r.width,r.height,r.bounds.left,r.bounds.top,r.bounds.width,r.bounds.height),Y.label=14;case 14:if(r instanceof TQ&&(b=Math.min(r.bounds.width,r.bounds.height),r.type===aF?r.checked&&(this.ctx.save(),this.path([new Yr(r.bounds.left+b*.39363,r.bounds.top+b*.79),new Yr(r.bounds.left+b*.16,r.bounds.top+b*.5549),new Yr(r.bounds.left+b*.27347,r.bounds.top+b*.44071),new Yr(r.bounds.left+b*.39694,r.bounds.top+b*.5649),new Yr(r.bounds.left+b*.72983,r.bounds.top+b*.23),new Yr(r.bounds.left+b*.84,r.bounds.top+b*.34085),new Yr(r.bounds.left+b*.39363,r.bounds.top+b*.79)]),this.ctx.fillStyle=Au(vJ),this.ctx.fill(),this.ctx.restore()):r.type===lF&&r.checked&&(this.ctx.save(),this.ctx.beginPath(),this.ctx.arc(r.bounds.left+b/2,r.bounds.top+b/2,b/4,0,Math.PI*2,!0),this.ctx.fillStyle=Au(vJ),this.ctx.fill(),this.ctx.restore())),qlt(r)&&r.value.length){switch(T=this.createFontStyle(a),Z=T[0],S=T[1],U=this.fontMetrics.getMetrics(Z,S).baseline,this.ctx.font=Z,this.ctx.fillStyle=Au(a.color),this.ctx.textBaseline="alphabetic",this.ctx.textAlign=Xlt(r.styles.textAlign),ne=fF(r),N=0,r.styles.textAlign){case 1:N+=ne.width/2;break;case 2:N+=ne.width;break}W=ne.add(N,0,0,-ne.height/2+1),this.ctx.save(),this.path([new Yr(ne.left,ne.top),new Yr(ne.left+ne.width,ne.top),new Yr(ne.left+ne.width,ne.top+ne.height),new Yr(ne.left,ne.top+ne.height)]),this.ctx.clip(),this.renderTextWithLetterSpacing(new UC(r.value,W),a.letterSpacing,U),this.ctx.restore(),this.ctx.textBaseline="alphabetic",this.ctx.textAlign="left"}if(!Jc(r.styles.display,2048))return[3,20];if(r.styles.listStyleImage===null)return[3,19];if(L=r.styles.listStyleImage,L.type!==0)return[3,18];Q=void 0,V=L.url,Y.label=15;case 15:return Y.trys.push([15,17,,18]),[4,this.context.cache.match(V)];case 16:return Q=Y.sent(),this.ctx.drawImage(Q,r.bounds.left-(Q.width+10),r.bounds.top),[3,18];case 17:return Y.sent(),this.context.logger.error("Error loading list-style-image "+V),[3,18];case 18:return[3,20];case 19:n.listValue&&r.styles.listStyleType!==-1&&(Z=this.createFontStyle(a)[0],this.ctx.font=Z,this.ctx.fillStyle=Au(a.color),this.ctx.textBaseline="middle",this.ctx.textAlign="right",ne=new h0(r.bounds.left,r.bounds.top+Ma(r.styles.paddingTop,r.bounds.width),r.bounds.width,nJ(a.lineHeight,a.fontSize.number)/2+1),this.renderTextWithLetterSpacing(new UC(n.listValue,ne),a.letterSpacing,nJ(a.lineHeight,a.fontSize.number)/2+2),this.ctx.textBaseline="bottom",this.ctx.textAlign="left"),Y.label=20;case 20:return[2]}})})},t.prototype.renderStackContent=function(n){return dh(this,void 0,void 0,function(){var r,s,L,a,c,L,i,f,L,g,y,L,b,T,L,S,U,L,N,W,L;return Cd(this,function(Q){switch(Q.label){case 0:if(Jc(n.element.container.flags,16))debugger;return[4,this.renderNodeBackgroundAndBorders(n.element)];case 1:Q.sent(),r=0,s=n.negativeZIndex,Q.label=2;case 2:return r<s.length?(L=s[r],[4,this.renderStack(L)]):[3,5];case 3:Q.sent(),Q.label=4;case 4:return r++,[3,2];case 5:return[4,this.renderNodeContent(n.element)];case 6:Q.sent(),a=0,c=n.nonInlineLevel,Q.label=7;case 7:return a<c.length?(L=c[a],[4,this.renderNode(L)]):[3,10];case 8:Q.sent(),Q.label=9;case 9:return a++,[3,7];case 10:i=0,f=n.nonPositionedFloats,Q.label=11;case 11:return i<f.length?(L=f[i],[4,this.renderStack(L)]):[3,14];case 12:Q.sent(),Q.label=13;case 13:return i++,[3,11];case 14:g=0,y=n.nonPositionedInlineLevel,Q.label=15;case 15:return g<y.length?(L=y[g],[4,this.renderStack(L)]):[3,18];case 16:Q.sent(),Q.label=17;case 17:return g++,[3,15];case 18:b=0,T=n.inlineLevel,Q.label=19;case 19:return b<T.length?(L=T[b],[4,this.renderNode(L)]):[3,22];case 20:Q.sent(),Q.label=21;case 21:return b++,[3,19];case 22:S=0,U=n.zeroOrAutoZIndexOrTransformedOrOpacity,Q.label=23;case 23:return S<U.length?(L=U[S],[4,this.renderStack(L)]):[3,26];case 24:Q.sent(),Q.label=25;case 25:return S++,[3,23];case 26:N=0,W=n.positiveZIndex,Q.label=27;case 27:return N<W.length?(L=W[N],[4,this.renderStack(L)]):[3,30];case 28:Q.sent(),Q.label=29;case 29:return N++,[3,27];case 30:return[2]}})})},t.prototype.mask=function(n){this.ctx.beginPath(),this.ctx.moveTo(0,0),this.ctx.lineTo(this.canvas.width,0),this.ctx.lineTo(this.canvas.width,this.canvas.height),this.ctx.lineTo(0,this.canvas.height),this.ctx.lineTo(0,0),this.formatPath(n.slice(0).reverse()),this.ctx.closePath()},t.prototype.path=function(n){this.ctx.beginPath(),this.formatPath(n),this.ctx.closePath()},t.prototype.formatPath=function(n){var r=this;n.forEach(function(s,a){var c=Np(s)?s.start:s;a===0?r.ctx.moveTo(c.x,c.y):r.ctx.lineTo(c.x,c.y),Np(s)&&r.ctx.bezierCurveTo(s.startControl.x,s.startControl.y,s.endControl.x,s.endControl.y,s.end.x,s.end.y)})},t.prototype.renderRepeat=function(n,r,s,a){this.path(n),this.ctx.fillStyle=r,this.ctx.translate(s,a),this.ctx.fill(),this.ctx.translate(-s,-a)},t.prototype.resizeImage=function(n,r,s){var a;if(n.width===r&&n.height===s)return n;var c=(a=this.canvas.ownerDocument)!==null&&a!==void 0?a:document,i=c.createElement("canvas");i.width=Math.max(1,r),i.height=Math.max(1,s);var f=i.getContext("2d");return f.drawImage(n,0,0,n.width,n.height,0,0,r,s),i},t.prototype.renderBackgroundImage=function(n){return dh(this,void 0,void 0,function(){var r,s,a,c,i,f;return Cd(this,function(g){switch(g.label){case 0:r=n.styles.backgroundImage.length-1,s=function(y){var b,T,S,ye,Ge,Je,Te,Ee,pe,U,ye,Ge,Je,Te,Ee,N,W,L,Q,V,Z,ne,Y,le,pe,_e,ye,he,be,Te,Ee,Ne,Ge,Je,Ue,Qe,xe,at,we,me,Ze,ot;return Cd(this,function(vt){switch(vt.label){case 0:if(y.type!==0)return[3,5];b=void 0,T=y.url,vt.label=1;case 1:return vt.trys.push([1,3,,4]),[4,a.context.cache.match(T)];case 2:return b=vt.sent(),[3,4];case 3:return vt.sent(),a.context.logger.error("Error loading background-image "+T),[3,4];case 4:return b&&(S=vR(n,r,[b.width,b.height,b.width/b.height]),ye=S[0],Ge=S[1],Je=S[2],Te=S[3],Ee=S[4],pe=a.ctx.createPattern(a.resizeImage(b,Te,Ee),"repeat"),a.renderRepeat(ye,pe,Ge,Je)),[3,6];case 5:Lst(y)?(U=vR(n,r,[null,null,null]),ye=U[0],Ge=U[1],Je=U[2],Te=U[3],Ee=U[4],N=Ist(y.angle,Te,Ee),W=N[0],L=N[1],Q=N[2],V=N[3],Z=N[4],ne=document.createElement("canvas"),ne.width=Te,ne.height=Ee,Y=ne.getContext("2d"),le=Y.createLinearGradient(L,V,Q,Z),eJ(y.stops,W).forEach(function(Qt){return le.addColorStop(Qt.stop,Au(Qt.color))}),Y.fillStyle=le,Y.fillRect(0,0,Te,Ee),Te>0&&Ee>0&&(pe=a.ctx.createPattern(ne,"repeat"),a.renderRepeat(ye,pe,Ge,Je))):Mst(y)&&(_e=vR(n,r,[null,null,null]),ye=_e[0],he=_e[1],be=_e[2],Te=_e[3],Ee=_e[4],Ne=y.position.length===0?[CQ]:y.position,Ge=Ma(Ne[0],Te),Je=Ma(Ne[Ne.length-1],Ee),Ue=jst(y,Ge,Je,Te,Ee),Qe=Ue[0],xe=Ue[1],Qe>0&&xe>0&&(at=a.ctx.createRadialGradient(he+Ge,be+Je,0,he+Ge,be+Je,Qe),eJ(y.stops,Qe*2).forEach(function(Qt){return at.addColorStop(Qt.stop,Au(Qt.color))}),a.path(ye),a.ctx.fillStyle=at,Qe!==xe?(we=n.bounds.left+.5*n.bounds.width,me=n.bounds.top+.5*n.bounds.height,Ze=xe/Qe,ot=1/Ze,a.ctx.save(),a.ctx.translate(we,me),a.ctx.transform(1,0,0,Ze,0,0),a.ctx.translate(-we,-me),a.ctx.fillRect(he,ot*(be-me)+me,Te,Ee*ot),a.ctx.restore()):a.ctx.fill())),vt.label=6;case 6:return r--,[2]}})},a=this,c=0,i=n.styles.backgroundImage.slice(0).reverse(),g.label=1;case 1:return c<i.length?(f=i[c],[5,s(f)]):[3,4];case 2:g.sent(),g.label=3;case 3:return c++,[3,1];case 4:return[2]}})})},t.prototype.renderSolidBorder=function(n,r,s){return dh(this,void 0,void 0,function(){return Cd(this,function(a){return this.path(FJ(s,r)),this.ctx.fillStyle=Au(n),this.ctx.fill(),[2]})})},t.prototype.renderDoubleBorder=function(n,r,s,a){return dh(this,void 0,void 0,function(){var c,i;return Cd(this,function(f){switch(f.label){case 0:return r<3?[4,this.renderSolidBorder(n,s,a)]:[3,2];case 1:return f.sent(),[2];case 2:return c=Olt(a,s),this.path(c),this.ctx.fillStyle=Au(n),this.ctx.fill(),i=Dlt(a,s),this.path(i),this.ctx.fill(),[2]}})})},t.prototype.renderNodeBackgroundAndBorders=function(n){return dh(this,void 0,void 0,function(){var r,s,a,c,i,f,g,y,b=this;return Cd(this,function(T){switch(T.label){case 0:return this.applyEffects(n.getEffects(2)),r=n.container.styles,s=!Ry(r.backgroundColor)||r.backgroundImage.length,a=[{style:r.borderTopStyle,color:r.borderTopColor,width:r.borderTopWidth},{style:r.borderRightStyle,color:r.borderRightColor,width:r.borderRightWidth},{style:r.borderBottomStyle,color:r.borderBottomColor,width:r.borderBottomWidth},{style:r.borderLeftStyle,color:r.borderLeftColor,width:r.borderLeftWidth}],c=Zlt(B1(r.backgroundClip,0),n.curves),s||r.boxShadow.length?(this.ctx.save(),this.path(c),this.ctx.clip(),Ry(r.backgroundColor)||(this.ctx.fillStyle=Au(r.backgroundColor),this.ctx.fill()),[4,this.renderBackgroundImage(n.container)]):[3,2];case 1:T.sent(),this.ctx.restore(),r.boxShadow.slice(0).reverse().forEach(function(S){b.ctx.save();var U=dF(n.curves),N=S.inset?0:Klt,W=Nlt(U,-N+(S.inset?1:-1)*S.spread.number,(S.inset?1:-1)*S.spread.number,S.spread.number*(S.inset?-2:2),S.spread.number*(S.inset?-2:2));S.inset?(b.path(U),b.ctx.clip(),b.mask(W)):(b.mask(U),b.ctx.clip(),b.path(W)),b.ctx.shadowOffsetX=S.offsetX.number+N,b.ctx.shadowOffsetY=S.offsetY.number,b.ctx.shadowColor=Au(S.color),b.ctx.shadowBlur=S.blur.number,b.ctx.fillStyle=S.inset?Au(S.color):"rgba(0,0,0,1)",b.ctx.fill(),b.ctx.restore()}),T.label=2;case 2:i=0,f=0,g=a,T.label=3;case 3:return f<g.length?(y=g[f],y.style!==0&&!Ry(y.color)&&y.width>0?y.style!==2?[3,5]:[4,this.renderDashedDottedBorder(y.color,y.width,i,n.curves,2)]:[3,11]):[3,13];case 4:return T.sent(),[3,11];case 5:return y.style!==3?[3,7]:[4,this.renderDashedDottedBorder(y.color,y.width,i,n.curves,3)];case 6:return T.sent(),[3,11];case 7:return y.style!==4?[3,9]:[4,this.renderDoubleBorder(y.color,y.width,i,n.curves)];case 8:return T.sent(),[3,11];case 9:return[4,this.renderSolidBorder(y.color,i,n.curves)];case 10:T.sent(),T.label=11;case 11:i++,T.label=12;case 12:return f++,[3,3];case 13:return[2]}})})},t.prototype.renderDashedDottedBorder=function(n,r,s,a,c){return dh(this,void 0,void 0,function(){var i,f,g,y,b,T,S,U,N,W,L,Q,V,Z,ne,Y,ne,Y;return Cd(this,function(le){return this.ctx.save(),i=Ult(a,s),f=FJ(a,s),c===2&&(this.path(f),this.ctx.clip()),Np(f[0])?(g=f[0].start.x,y=f[0].start.y):(g=f[0].x,y=f[0].y),Np(f[1])?(b=f[1].end.x,T=f[1].end.y):(b=f[1].x,T=f[1].y),s===0||s===2?S=Math.abs(g-b):S=Math.abs(y-T),this.ctx.beginPath(),c===3?this.formatPath(i):this.formatPath(f.slice(0,2)),U=r<3?r*3:r*2,N=r<3?r*2:r,c===3&&(U=r,N=r),W=!0,S<=U*2?W=!1:S<=U*2+N?(L=S/(2*U+N),U*=L,N*=L):(Q=Math.floor((S+N)/(U+N)),V=(S-Q*U)/(Q-1),Z=(S-(Q+1)*U)/Q,N=Z<=0||Math.abs(N-V)<Math.abs(N-Z)?V:Z),W&&(c===3?this.ctx.setLineDash([0,U+N]):this.ctx.setLineDash([U,N])),c===3?(this.ctx.lineCap="round",this.ctx.lineWidth=r):this.ctx.lineWidth=r*2+1.1,this.ctx.strokeStyle=Au(n),this.ctx.stroke(),this.ctx.setLineDash([]),c===2&&(Np(f[0])&&(ne=f[3],Y=f[0],this.ctx.beginPath(),this.formatPath([new Yr(ne.end.x,ne.end.y),new Yr(Y.start.x,Y.start.y)]),this.ctx.stroke()),Np(f[1])&&(ne=f[1],Y=f[2],this.ctx.beginPath(),this.formatPath([new Yr(ne.end.x,ne.end.y),new Yr(Y.start.x,Y.start.y)]),this.ctx.stroke())),this.ctx.restore(),[2]})})},t.prototype.render=function(n){return dh(this,void 0,void 0,function(){var r;return Cd(this,function(s){switch(s.label){case 0:return this.options.backgroundColor&&(this.ctx.fillStyle=Au(this.options.backgroundColor),this.ctx.fillRect(this.options.x,this.options.y,this.options.width,this.options.height)),r=Rlt(n),[4,this.renderStack(r)];case 1:return s.sent(),this.applyEffects([]),[2,this.canvas]}})})},t}(ufe),qlt=function(e){return e instanceof Khe||e instanceof Ghe?!0:e instanceof TQ&&e.type!==lF&&e.type!==aF},Zlt=function(e,t){switch(e){case 0:return dF(t);case 2:return Flt(t);case 1:default:return hF(t)}},Xlt=function(e){switch(e){case 1:return"center";case 2:return"right";case 0:default:return"left"}},Ylt=["-apple-system","system-ui"],Jlt=function(e){return/iPhone OS 15_(0|1)/.test(window.navigator.userAgent)?e.filter(function(t){return Ylt.indexOf(t)===-1}):e},ect=function(e){am(t,e);function t(n,r){var s=e.call(this,n,r)||this;return s.canvas=r.canvas?r.canvas:document.createElement("canvas"),s.ctx=s.canvas.getContext("2d"),s.options=r,s.canvas.width=Math.floor(r.width*r.scale),s.canvas.height=Math.floor(r.height*r.scale),s.canvas.style.width=r.width+"px",s.canvas.style.height=r.height+"px",s.ctx.scale(s.options.scale,s.options.scale),s.ctx.translate(-r.x,-r.y),s.context.logger.debug("EXPERIMENTAL ForeignObject renderer initialized ("+r.width+"x"+r.height+" at "+r.x+","+r.y+") with scale "+r.scale),s}return t.prototype.render=function(n){return dh(this,void 0,void 0,function(){var r,s;return Cd(this,function(a){switch(a.label){case 0:return r=eU(this.options.width*this.options.scale,this.options.height*this.options.scale,this.options.scale,this.options.scale,n),[4,tct(r)];case 1:return s=a.sent(),this.options.backgroundColor&&(this.ctx.fillStyle=Au(this.options.backgroundColor),this.ctx.fillRect(0,0,this.options.width*this.options.scale,this.options.height*this.options.scale)),this.ctx.drawImage(s,-this.options.x*this.options.scale,-this.options.y*this.options.scale),[2,this.canvas]}})})},t}(ufe),tct=function(e){return new Promise(function(t,n){var r=new Image;r.onload=function(){t(r)},r.onerror=n,r.src="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(new XMLSerializer().serializeToString(e))})},nct=function(){function e(t){var n=t.id,r=t.enabled;this.id=n,this.enabled=r,this.start=Date.now()}return e.prototype.debug=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.debug=="function"?console.debug.apply(console,J3([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.getTime=function(){return Date.now()-this.start},e.prototype.info=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&typeof window<"u"&&window.console&&typeof console.info=="function"&&console.info.apply(console,J3([this.id,this.getTime()+"ms"],t))},e.prototype.warn=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.warn=="function"?console.warn.apply(console,J3([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.prototype.error=function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];this.enabled&&(typeof window<"u"&&window.console&&typeof console.error=="function"?console.error.apply(console,J3([this.id,this.getTime()+"ms"],t)):this.info.apply(this,t))},e.instances={},e}(),rct=function(){function e(t,n){var r;this.windowBounds=n,this.instanceName="#"+e.instanceCount++,this.logger=new nct({id:this.instanceName,enabled:t.logging}),this.cache=(r=t.cache)!==null&&r!==void 0?r:new blt(this,t)}return e.instanceCount=1,e}(),qx=function(e,t){return t===void 0&&(t={}),ict(e,t)};typeof window<"u"&&ife.setContext(window);var ict=function(e,t){return dh(void 0,void 0,void 0,function(){var n,r,s,a,c,i,f,g,y,b,T,S,U,N,W,L,Q,V,Z,ne,le,Y,le,pe,_e,ye,he,be,Te,Ee,Ne,Ge,Je,Ue,Qe,xe,at,we,me,Ze;return Cd(this,function(ot){switch(ot.label){case 0:if(!e||typeof e!="object")return[2,Promise.reject("Invalid element provided as first argument")];if(n=e.ownerDocument,!n)throw new Error("Element is not attached to a Document");if(r=n.defaultView,!r)throw new Error("Document is not attached to a Window");return s={allowTaint:(pe=t.allowTaint)!==null&&pe!==void 0?pe:!1,imageTimeout:(_e=t.imageTimeout)!==null&&_e!==void 0?_e:15e3,proxy:t.proxy,useCORS:(ye=t.useCORS)!==null&&ye!==void 0?ye:!1},a=D6({logging:(he=t.logging)!==null&&he!==void 0?he:!0,cache:t.cache},s),c={windowWidth:(be=t.windowWidth)!==null&&be!==void 0?be:r.innerWidth,windowHeight:(Te=t.windowHeight)!==null&&Te!==void 0?Te:r.innerHeight,scrollX:(Ee=t.scrollX)!==null&&Ee!==void 0?Ee:r.pageXOffset,scrollY:(Ne=t.scrollY)!==null&&Ne!==void 0?Ne:r.pageYOffset},i=new h0(c.scrollX,c.scrollY,c.windowWidth,c.windowHeight),f=new rct(a,i),g=(Ge=t.foreignObjectRendering)!==null&&Ge!==void 0?Ge:!1,y={allowTaint:(Je=t.allowTaint)!==null&&Je!==void 0?Je:!1,onclone:t.onclone,ignoreElements:t.ignoreElements,inlineImages:g,copyStyles:g},f.logger.debug("Starting document clone with size "+i.width+"x"+i.height+" scrolled to "+-i.left+","+-i.top),b=new TJ(f,e,y),T=b.clonedReferenceElement,T?[4,b.toIFrame(n,i)]:[2,Promise.reject("Unable to find element in cloned iframe")];case 1:return S=ot.sent(),U=IQ(T)||olt(T)?Nrt(T.ownerDocument):JP(f,T),N=U.width,W=U.height,L=U.left,Q=U.top,V=sct(f,T,t.backgroundColor),Z={canvas:t.canvas,backgroundColor:V,scale:(Qe=(Ue=t.scale)!==null&&Ue!==void 0?Ue:r.devicePixelRatio)!==null&&Qe!==void 0?Qe:1,x:((xe=t.x)!==null&&xe!==void 0?xe:0)+L,y:((at=t.y)!==null&&at!==void 0?at:0)+Q,width:(we=t.width)!==null&&we!==void 0?we:Math.ceil(N),height:(me=t.height)!==null&&me!==void 0?me:Math.ceil(W)},g?(f.logger.debug("Document cloned, using foreign object rendering"),le=new ect(f,Z),[4,le.render(T)]):[3,3];case 2:return ne=ot.sent(),[3,5];case 3:return f.logger.debug("Document cloned, element located at "+L+","+Q+" with size "+N+"x"+W+" using computed rendering"),f.logger.debug("Starting DOM parsing"),Y=Zhe(f,T),V===Y.styles.backgroundColor&&(Y.styles.backgroundColor=Jg.TRANSPARENT),f.logger.debug("Starting renderer for element at "+Z.x+","+Z.y+" with size "+Z.width+"x"+Z.height),le=new Wlt(f,Z),[4,le.render(Y)];case 4:ne=ot.sent(),ot.label=5;case 5:return(!((Ze=t.removeContainer)!==null&&Ze!==void 0)||Ze)&&(TJ.destroy(S)||f.logger.error("Cannot detach cloned iframe as it is not in the DOM anymore")),f.logger.debug("Finished rendering"),[2,ne]}})})},sct=function(e,t,n){var r=t.ownerDocument,s=r.documentElement?OC(e,getComputedStyle(r.documentElement).backgroundColor):Jg.TRANSPARENT,a=r.body?OC(e,getComputedStyle(r.body).backgroundColor):Jg.TRANSPARENT,c=typeof n=="string"?OC(e,n):n===null?Jg.TRANSPARENT:4294967295;return t===r.documentElement?Ry(s)?Ry(a)?c:a:s:c};const dfe=Object.freeze(Object.defineProperty({__proto__:null,default:qx},Symbol.toStringTag,{value:"Module"})),hb=({barCode:e,senderData:t,receiverData:n,packageData:r,totalPrice:s,position:a})=>{const[c,i]=q.useState(null),f=()=>{const y=document.getElementById(`label-${a}`);qx(y,{scale:2}).then(T=>{i(T.toDataURL("image/png"))})};q.useEffect(()=>{f()},[]);const g=async()=>{const y=document.getElementById(`label-${a}`);if(!y)return;const b=await qx(y,{scale:2}),T=b.toDataURL("image/png"),S=new Ni("p","mm","a4"),U=100,N=b.height*U/b.width;S.addImage(T,"PNG",10,10,U,N),S.save("label.pdf")};return A.jsx("div",{children:A.jsx("div",{className:"w-full flex justify-center mt-4",children:A.jsxs("div",{className:"w-[50%] flex flex-col items-center ",children:[A.jsxs("div",{className:"w-[100mm] p-2 absolute left-[-9999px] ",id:`label-${a}`,children:[A.jsxs("div",{className:"flex justify-between font-bold text-2xl mb-4",children:[A.jsx("div",{children:"SWIFTLOGIX"}),A.jsx("div",{children:r.shipmentType})]}),A.jsx("div",{className:"h-[1px] w-full bg-black"}),A.jsxs("div",{className:"flex justify-between mb-4",children:[A.jsxs("div",{children:[A.jsx("div",{className:"font-bold",children:"From:"}),A.jsx("div",{className:"pl-6",children:t.sendername}),A.jsx("div",{className:"pl-6",children:t.sendercontact}),A.jsx("div",{className:"pl-6",children:r.originCity})]}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex gap-2",children:[A.jsxs("div",{className:"font-bold",children:[s,"  RS"]}),r.insurance==="yes"&&A.jsx("div",{className:"font-bold",children:" - INSURED "}),r.insurance==="no"&&A.jsx("div",{className:"font-bold",children:" - UNINSURED"})]}),A.jsxs("div",{children:["ACTWGT : ",r.weight,"kg"]})]})]}),A.jsx("div",{className:"h-[1px] w-full bg-black"}),A.jsxs("div",{className:"mb-4",children:[A.jsx("div",{className:"font-bold",children:"To:"}),A.jsx("div",{className:"pl-6",children:n.receivername}),A.jsx("div",{className:"pl-6",children:n.receivercontact}),A.jsx("div",{className:"pl-6",children:n.receiveraddress}),A.jsx("div",{className:"pl-6",children:r.destinationCity})]}),A.jsx("div",{className:"h-[1px] w-full bg-black"}),A.jsxs("div",{className:"flex flex-col items-center mt-2",children:[A.jsx("div",{className:"font-bold mb-3",children:"SWIFTLOGIX  TRACKING #"}),A.jsx("img",{src:e.barcode,alt:"Shipment Barcode"})]})]}),c&&A.jsx("div",{className:"w-[150px] h-auto mt-4 border border-gray-300 p-2  hover:scale-105 transition-all duration-100",children:A.jsx("img",{src:c,alt:"Generated Label",className:"w-full"})}),A.jsx("div",{className:"flex justify-center my-6",children:A.jsxs("button",{type:"button",onClick:g,className:"bg-[#009688] text-white flex items-center justify-center gap-2 py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out hover:scale-105",children:[A.jsx("span",{children:"Label"})," ",A.jsx(Uw,{})]})})]})})})},jQ="/assets/paid-lAdVyfrh.png",fb=({senderData:e,receiverData:t,packageData:n,packagePrice:r,scheduleTime:s,trackingId:a,qrcode:c,paymentMethod:i,position:f})=>{const[g,y]=q.useState(null),b=()=>{const S=document.getElementById(`receipt-${f}`);qx(S,{scale:2}).then(N=>{y(N.toDataURL("image/png"))})};q.useEffect(()=>{b()},[]);const T=async()=>{try{const S=document.getElementById(`receipt-${f}`),U=await qx(S,{scale:2,useCORS:!0}),N=U.toDataURL("image/png"),W=new Ni("l","mm",[297,210]),L=277,Q=U.height*L/U.width;W.addImage(N,"PNG",10,10,L,Q),W.save("receipt.pdf")}catch(S){console.error("Error generating PDF:",S)}};return A.jsxs(A.Fragment,{children:[A.jsxs("div",{id:`receipt-${f}`,className:"max-w-6xl mx-auto p-2 bg-white rounded-md absolute left-[-9999px]",children:[A.jsxs("div",{className:"w-full flex justify-between p-3",children:[A.jsx("h2",{className:"text-lg font-bold text-center",children:"SWIFTLOGIX"}),A.jsx("h2",{className:"text-lg font-bold text-center",children:n.shipmentType})]}),A.jsxs("div",{className:"w-full  flex text-center text-[18px] font-bold ",children:[A.jsx("div",{className:"flex-1 border border-black p-2 rounded-tl-lg",children:"Shipment Information"}),A.jsx("div",{className:"flex-1 border border-black p-2",children:"Client Information"}),A.jsx("div",{className:"flex-1 border border-black p-2 rounded-tr-lg",children:"Price Information"})]}),A.jsxs("div",{className:"flex border border-black  ",children:[A.jsxs("div",{className:"flex-1 border-r border-black p-2",children:[A.jsxs("div",{className:"flex justify-between gap-1",children:[A.jsxs("div",{children:[A.jsx("p",{className:"font-bold",children:"Tracking Id#:"}),A.jsx("p",{children:a})]}),A.jsx("div",{children:A.jsx("img",{src:c,alt:"QRCode"})})]}),A.jsxs("p",{className:" border-black",children:[A.jsx("b",{children:"Schedule Date/Time: "}),s]}),A.jsxs("p",{className:"",children:[A.jsx("b",{children:"Origin: "}),n.originCity]}),A.jsxs("p",{className:"",children:[A.jsx("b",{children:"Destination: "}),n.destinationCity]}),A.jsxs("p",{className:"",children:[A.jsx("b",{children:"Weight: "}),n.weight,"kg"]}),A.jsxs("p",{className:"",children:[A.jsx("b",{children:"Pieces: "}),n.pieces]}),A.jsxs("p",{className:"",children:[A.jsx("b",{children:"Sensitive: "}),n.sensitivePackage]})]}),A.jsxs("div",{className:"flex-1 border-r border-black p-2",children:[A.jsx("p",{className:"font-bold",children:"From:"}),A.jsxs("p",{children:["     ",e.sendername]}),A.jsxs("p",{children:["     ",e.sendercontact]}),A.jsxs("p",{children:["     ",n.originCity]}),A.jsx("p",{className:"font-bold",children:"To:"}),A.jsxs("p",{children:["     ",t.receivername]}),A.jsxs("p",{children:["     ",t.receivercontact]}),A.jsxs("p",{children:["     ",t.receiveraddress]}),A.jsxs("p",{children:["     ",n.destinationCity]})]}),A.jsxs("div",{className:"flex-1 p-2",children:[A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Charged Base: "})," ",r.basePrice," Rs"]}),A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Charged Weight: "}),r.weightCharges," Rs"]}),A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Charged Distance: "}),r.distanceCharges," Rs"]}),r.insurance==="yes"&&A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Insurance: "}),"100% (50 Rs)"]}),r.insurance==="no"&&A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Insurance: "}),"0% (0 Rs)"]}),A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Rate: "}),r.totalPrice," Rs"]}),A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Payable Amount: "}),r.totalPrice," Rs"]}),A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Payment Method: "}),i]}),A.jsxs("p",{children:[A.jsx("span",{className:"font-bold",children:"Pay By: "}),n.payby]}),(n==null?void 0:n.paid)&&A.jsx("div",{className:"w-full flex justify-center",children:A.jsx("img",{src:jQ,alt:"paid",className:"w-20 py-4"})})]})]}),A.jsx("div",{className:"w-full flex justify-end",children:A.jsx("div",{children:"www.SwiftLogix.com"})})]}),g&&A.jsx("div",{className:"w-[150px] h-[150px]  mt-4 border hover:scale-105 transition-all duration-150 border-gray-300 p-2",children:A.jsx("img",{src:g,alt:"Generated Receipt",className:"w-full"})}),A.jsx("div",{className:"flex justify-center my-6",children:A.jsxs("button",{type:"button",onClick:T,className:"bg-[#009688] text-white py-2 px-4 flex gap-2 items-center justify-center rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out hover:scale-105",children:[A.jsx("span",{children:"Receipt"})," ",A.jsx(Uw,{})]})})]})},hfe="/assets/mastercard-CENMZqJ9.svg",ffe="data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiA/PjwhRE9DVFlQRSBzdmcgIFBVQkxJQyAnLS8vVzNDLy9EVEQgU1ZHIDEuMS8vRU4nICAnaHR0cDovL3d3dy53My5vcmcvR3JhcGhpY3MvU1ZHLzEuMS9EVEQvc3ZnMTEuZHRkJz48c3ZnIGhlaWdodD0iNTEycHgiIHN0eWxlPSJlbmFibGUtYmFja2dyb3VuZDpuZXcgMCAwIDUxMiA1MTI7IiB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCA1MTIgNTEyIiB3aWR0aD0iNTEycHgiIHhtbDpzcGFjZT0icHJlc2VydmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyIgeG1sbnM6eGxpbms9Imh0dHA6Ly93d3cudzMub3JnLzE5OTkveGxpbmsiPjxnIGlkPSLlvaLnirZfMV8zXyIgc3R5bGU9ImVuYWJsZS1iYWNrZ3JvdW5kOm5ldyAgICA7Ij48ZyBpZD0i5b2i54q2XzEiPjxnPjxwYXRoIGQ9Ik0yMTEuMzI4LDE4NC40NDVsLTIzLjQ2NSwxNDQuMjA4aDM3LjU0MmwyMy40NjgtMTQ0LjIwOCAgICAgSDIxMS4zMjh6IE0xNTYuMjc2LDE4NC40NDVsLTM1Ljc5NCw5OS4xODVsLTQuMjM0LTIxLjM1OGwwLjAwMywwLjAwN2wtMC45MzMtNC43ODdjLTQuMzMyLTkuMzM2LTE0LjM2NS0yNy4wOC0zMy4zMS00Mi4yMjMgICAgIGMtNS42MDEtNC40NzYtMTEuMjQ3LTguMjk2LTE2LjcwNS0xMS41NTlsMzIuNTMxLDEyNC45NDNoMzkuMTE2bDU5LjczMy0xNDQuMjA4SDE1Ni4yNzZ6IE0zMDIuNzk3LDIyNC40OCAgICAgYzAtMTYuMzA0LDM2LjU2My0xNC4yMDksNTIuNjI5LTUuMzU2bDUuMzU3LTMwLjk3MmMwLDAtMTYuNTM0LTYuMjg4LTMzLjc2OC02LjI4OGMtMTguNjMyLDAtNjIuODc1LDguMTQ4LTYyLjg3NSw0Ny43MzkgICAgIGMwLDM3LjI2LDUxLjkyOCwzNy43MjMsNTEuOTI4LDU3LjI4NWMwLDE5LjU2Mi00Ni41NzQsMTYuMDY2LTYxLjk0NCwzLjcyNmwtNS41ODYsMzIuMzczYzAsMCwxNi43NjMsOC4xNDgsNDIuMzgyLDguMTQ4ICAgICBjMjUuNjE2LDAsNjQuMjcyLTEzLjI3MSw2NC4yNzItNDkuMzdDMzU1LjE5MiwyNDQuMjcyLDMwMi43OTcsMjQwLjc4LDMwMi43OTcsMjI0LjQ4eiBNNDU1Ljk5NywxODQuNDQ1aC0zMC4xODUgICAgIGMtMTMuOTM4LDAtMTcuMzMyLDEwLjc0Ny0xNy4zMzIsMTAuNzQ3bC01NS45ODgsMTMzLjQ2MWgzOS4xMzFsNy44MjgtMjEuNDE5aDQ3LjcyOGw0LjQwMywyMS40MTloMzQuNDcyTDQ1NS45OTcsMTg0LjQ0NXogICAgICBNNDEwLjI3LDI3Ny42NDFsMTkuNzI4LTUzLjk2NmwxMS4wOTgsNTMuOTY2SDQxMC4yN3oiIHN0eWxlPSJmaWxsLXJ1bGU6ZXZlbm9kZDtjbGlwLXJ1bGU6ZXZlbm9kZDtmaWxsOiMwMDVCQUM7Ii8+PC9nPjwvZz48L2c+PGcgaWQ9IuW9oueKtl8xXzJfIiBzdHlsZT0iZW5hYmxlLWJhY2tncm91bmQ6bmV3ICAgIDsiPjxnIGlkPSLlvaLnirZfMV8xXyI+PGc+PHBhdGggZD0iTTEwNC4xMzIsMTk4LjAyMmMwLDAtMS41NTQtMTMuMDE1LTE4LjE0NC0xMy4wMTVIMjUuNzE1ICAgICBsLTAuNzA2LDIuNDQ2YzAsMCwyOC45NzIsNS45MDYsNTYuNzY3LDI4LjAzM2MyNi41NjIsMjEuMTQ4LDM1LjIyNyw0Ny41MSwzNS4yMjcsNDcuNTFMMTA0LjEzMiwxOTguMDIyeiIgc3R5bGU9ImZpbGwtcnVsZTpldmVub2RkO2NsaXAtcnVsZTpldmVub2RkO2ZpbGw6I0Y2QUMxRDsiLz48L2c+PC9nPjwvZz48L3N2Zz4=",pfe="/assets/cash-NtQVibiH.png",oct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAADHElEQVR4nO2ZPU8UURSGT0hw54L/wUZjZlFKkE6tRFfjB/4CEzuJljDXUBujEWYU7UnwIzIxVCYCakGWqJUuJpqIQiBxpWLnNIC5ZjZuwbK7SNjrWZj3SU5Fsbnvc+45MwMRAAAAAAAAAAAAAAAAAADAX/zDrUf9tDPop51PgauiIK0MSpnAdRaG3JZua40yeJBSftp5EKTVbwSuKjad76p5e+G7ahLBqy1vuxUBQdoZRvjqn0atlZmPsaPkBASuM4TuV5ICVA4ClJwA31UFCFByAh621/7BTHgeFVbPYMcCRjodCAgFBUyda4aAUFDAYm+Tud+GEZSREsCazESm+i3ILs3s6eqdvCEvYKWfzPPjqUQKuPXutryAkoSJs82bxpF0QFnLNfYlbAwBpYp3QryYR46lzKP2vS8guzRjrry82jgCUFQxg7k+x1y70wUBLNgkX/s2v5jiBuj/KwECtOyYhAANAYle1BnsAIIA6S5k3AD5IBgjSD4MFijsAA0B4l3IuAHyQTBGkHwYLFDYAbo+QS5fbzKfe1Ime7LFvO1qNVMd++tS+Bytawdf6CeTu5QyU531CRwC9PbCf39KWQkeN0BvLaDY+RbDxwjStWd++diZPnPA5F/cNOsLz4r1a3zAzFw8BAFs4eklXrjl4a/OjRqzPL6h1r4/Lv4NN0DXV0D2RMuGUOPOLw+/VPnQgwCus4DyR8145FQTsDb/FAK4zgLebEfAjycQwJZHULxwqwn4OYYRZGwv4fhpJ1645eGvfhs106exhI2Nx9DXHRUeQ0OvOPPjijt/J+HjPUDXljCLFzES/xTxoRufIoy0hNme1KZxhE8RWuBz9GV8jja7rfAPGQ0B4l3IuAHyQTBGkHwYLFDYARoCxLuQcQPkg2CMIPkwWKCwA/TeE7AifShOuICc9KE4yQIij+5JH4qTLKDQR0ciTevSB+OkCijeAk2B9MF4lxTZwAzQPvbolfThOKkCShIij3yMI6oafuTRItmmoKkt8ugua/oYeVSQ7jhunMpzP12wLgAAAAAAAAAAAAAAAAAAALRb+QPhQE64KLB0agAAAABJRU5ErkJggg==",FQ=({onBackStep:e,onCashPayment:t,onCardPayment:n,walletPoints:r,onWalletPayment:s,isWalletShow:a,setpackageFormData:c,packageFormData:i})=>{const[f,g]=q.useState(null),[y,b]=q.useState(null),[T,S]=q.useState("idle"),U=Q=>{b(null),g(Q.target.value)},N=Q=>{b(Q.target.value),c({...i,payby:Q.target.value})},W=()=>{e()},L=()=>{S("processing"),f==="Cash"?t():f==="Card"?n():f==="Wallet"&&s()};return A.jsxs("div",{className:"max-w-3xl mx-auto my-10 p-6 bg-white rounded-lg shadow-lg",children:[A.jsx("div",{className:"text-3xl font-bold text-gray-700 text-center mb-6",children:"Choose a payment method"}),A.jsx("div",{className:"w-full mb-3 border-[1px] "}),A.jsxs("div",{className:"flex justify-between",children:[A.jsxs("div",{children:[A.jsx("input",{onChange:U,type:"radio",value:"Card",name:"paymentmethod",id:"paymentmethod",className:"scale-150"}),A.jsx("span",{className:"ml-2 font-semibold text-gray-700 ",children:"Card"})]}),A.jsxs("div",{className:"flex gap-1",children:[A.jsx("img",{src:hfe,alt:"mastercard",className:"w-12 h-8 shadow-lg rounded-sm border shadow-white"}),A.jsx("img",{src:ffe,alt:"visacard",className:"w-12 h-8 border rounded-sm shadow-lg  shadow-white"})]})]}),A.jsx("div",{className:"w-full my-3 border-[1px] "}),A.jsxs("div",{className:"flex justify-between",children:[A.jsxs("div",{children:[A.jsx("input",{onChange:U,type:"radio",value:"Cash",name:"paymentmethod",id:"paymentmethod",className:"scale-150"}),A.jsx("span",{className:"ml-2 font-semibold text-gray-700 ",children:"Cash"})]}),A.jsx("div",{children:A.jsx("img",{src:pfe,alt:"cash",className:"w-12 h-8 rounded-sm shadow-lg  shadow-white"})})]}),f==="Cash"&&A.jsxs("div",{className:"flex justify-center gap-6",children:[A.jsxs("div",{children:[A.jsx("input",{onChange:N,type:"radio",value:"sender",name:"payby",id:"payby",className:"scale-150"}),A.jsx("span",{className:"ml-2 text-[14px] text-gray-700 ",children:"Pay by Sender"})]}),A.jsxs("div",{children:[A.jsx("input",{onChange:N,type:"radio",value:"receiver",name:"payby",id:"payby",className:"scale-150"}),A.jsx("span",{className:"ml-2  text-[14px] text-gray-700 ",children:"Pay by Receiver"})]})]}),A.jsx("div",{className:"w-full my-3 border-[1px] "}),a&&A.jsxs("div",{className:"flex justify-between",children:[A.jsxs("div",{children:[A.jsx("input",{onChange:U,type:"radio",value:"Wallet",name:"paymentmethod",id:"paymentmethod",className:"scale-150"}),A.jsx("span",{className:"ml-2 font-semibold text-gray-700 ",children:"Wallet"})]}),A.jsx("div",{children:A.jsx("img",{src:oct,alt:"cash",className:"w-11 rounded-sm shadow-lg  shadow-white"})})]}),A.jsxs("div",{className:"flex justify-between mt-6",children:[A.jsx("button",{type:"button",onClick:W,className:"bg-[#FF7043] text-white py-2 px-4 rounded-full hover:bg-[#009688] transition duration-200 ease-in-out",children:"Back"}),f!=="Cash"&&f&&A.jsxs("div",{onClick:!(f==="Wallet"&&r<250)&&L,className:`${f==="Wallet"&&r<250?"text-red-500 text-lg mt-2 font-semibold":"bg-[#009688]  text-white cursor-pointer relative py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out"}`,children:[A.jsx(Vu,{children:T==="success"&&A.jsx(Uo.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{opacity:0},className:"absolute left-[50%]",children:A.jsx(i0,{className:"text-white"})})}),A.jsx(Vu,{children:T==="processing"&&A.jsx(Uo.div,{initial:{opacity:0},animate:{opacity:1,rotate:360},exit:{opacity:0},transition:{repeat:1/0,duration:1,ease:"linear"},className:"absolute right-4 h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),f==="Wallet"&&r<250?"Insufficient Points":T==="processing"?"Processing...":T==="success"?"":`Continue to ${f}`]}),f==="Cash"&&y&&A.jsxs("div",{onClick:!(f==="Wallet"&&r<250)&&L,className:`${f==="Wallet"&&r<250?"text-red-500 text-lg mt-2 font-semibold":"bg-[#009688]  text-white cursor-pointer py-2 px-4 relative rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out"}`,children:[A.jsx(Vu,{children:T==="success"&&A.jsx(Uo.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{opacity:0},className:"absolute left-[50%]",children:A.jsx(i0,{className:"text-white"})})}),A.jsx(Vu,{children:T==="processing"&&A.jsx(Uo.div,{initial:{opacity:0},animate:{opacity:1,rotate:360},exit:{opacity:0},transition:{repeat:1/0,duration:1,ease:"linear"},className:"absolute right-4 h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),f==="Wallet"&&r<250?"Insufficient Points":T==="processing"?"Processing...":T==="success"?"":`Continue to ${f}`]})]})]})},ck=({onComplete:e})=>{const t=()=>{e()};return A.jsx("div",{className:"w-full flex justify-center",children:A.jsxs("div",{className:"flex flex-col gap-4 my-4 items-center",children:[A.jsx("div",{className:"font-semibold",children:"Payment Completed!"}),A.jsx("div",{children:A.jsx("button",{type:"button",onClick:t,className:"bg-[#009688] text-white py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out",children:"Continue"})})]})})},act=()=>{const[e,t]=q.useState({success:"",message:"",barcode:""}),[n]=h8(),[r,s]=q.useState("sender"),[a,c]=q.useState(null),[i,f]=q.useState(null),[g,y]=q.useState(null),[b,T]=q.useState(1),[S,U]=q.useState(!1),[N,W]=q.useState(null),L=q.useRef(1),[Q,V]=q.useState({service:"",basePrice:"",weightCharges:"",distanceCharges:"",totalPrice:"",insurance:""}),[Z,ne]=q.useState({sendername:"",sendercontact:"",senderemail:"",sendercnic:""}),[Y,le]=q.useState({receivername:"",receivercontact:"",receiveremail:"",receivercnic:"",receiverarea:"",receiverhouseno:"",receiveraddress:""}),[pe,_e]=q.useState({originCity:"",destinationCity:"",weight:"",pieces:"",pickupdate:"",pickuptime:"",insurance:"",pickupaddress:"",shipmentType:"",deliveryMethod:"",sensitivePackage:"",packageDescription:"",orignalprice:"",payby:""}),ye=Ze=>{const{name:ot,value:vt}=Ze.target;ne({...Z,[ot]:vt})},he=Ze=>{const{name:ot,value:vt}=Ze.target;le({...Y,[ot]:vt})},be=Ze=>{const{name:ot,value:vt}=Ze.target;_e({...pe,[ot]:vt})},Te=()=>{L.current++,T(2),s("receiver")},Ee=()=>{L.current++,T(3),s("package")},Ne=async()=>{try{const ot=await(await fetch("https://swiftlogix.cc/api/calculate-point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)})).json();V({service:ot.service,basePrice:ot.basePrice,weightCharges:ot.weightCharges,distanceCharges:ot.distanceCharges,totalPrice:ot.totalPrice,insurance:ot.insurance}),L.current++,T(4),s("summary")}catch(Ze){console.error("Error submitting form:",Ze)}},Ge=()=>{L.current++,T(5),s("payment")},Je=async()=>{try{const Ze=await fetch("https://swiftlogix.cc/api/scheduleaship-point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderFormData:Z,receiverFormData:Y,packageFormData:pe,packagePrice:Q})});Ze.ok||console.log("response error");const ot=await Ze.json();console.log(ot),t(ot),c(ot.scheduletime),f(ot.trackingid),y(ot.qrcode),W(ot.paymentmethod),pe.paid=ot.paid,ot.success&&(L.current++,L.current++,T(6),s("label"))}catch(Ze){console.error("Error in handleWithCashPayment:",Ze.message)}},Ue=async()=>{try{const Ze=await fetch("https://swiftlogix.cc/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({senderFormData:Z,receiverFormData:Y,packageFormData:pe,packagePrice:Q,endpoint:"schedule-a-ship"})});Ze.ok||console.log("response error");const ot=await Ze.json();ot.url&&(window.location.href=ot.url)}catch(Ze){console.log("Error in handling card payments: ",Ze.message)}};q.useEffect(()=>{if(n.get("payment")==="success"){const Ze=n.get("data");if(Ze){const ot=JSON.parse(decodeURIComponent(Ze));ne(ot.senderData),le(ot.receiverData),_e(ot.packageData),V(ot.packagePrice),f(ot.trackingId),c(ot.datetime),W(ot.paymentMethod)}L.current=5,T(5),s("paid")}else if(n.get("payment")==="failed"){const Ze=n.get("data");if(Ze){const ot=JSON.parse(decodeURIComponent(Ze));ne(ot.senderData),le(ot.receiverData),_e(ot.packageData),V(ot.packagePrice)}L.current=5,T(5),s("payment")}},[n]);const Qe=async()=>{const Ze=await fetch("https://swiftlogix.cc/api/bar-qrcode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:i})});Ze.ok||console.log("response error");const ot=await Ze.json();t(ot),y(ot.qrcode),ot.success===!0&&(L.current++,L.current++,T(6),s("label"))},xe=()=>{L.current--,T(1),s("sender")},at=()=>{L.current--,T(2),s("receiver")},we=()=>{L.current--,T(3),s("package")},me=()=>{L.current--,T(4),s("summary")};return A.jsxs("div",{children:[A.jsx(al,{}),A.jsx(Bs,{}),A.jsx(_h,{}),A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center px-4 py-6 sm:py-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-center",children:"Schedule a Ship"})}),A.jsxs("div",{className:"w-full mt-6 flex justify-center items-center",children:[A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold
                    ${L.current>1?"bg-[#009688] text-white":L.current===1?"bg-[#FF7043] text-white":""}`,children:"01"}),A.jsx("span",{className:`p-1 border w-[15%] h-2  ${L.current>2?"bg-[#009688]":""}  ${L.current>1&&L.current<3?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${L.current>2?"bg-[#009688] text-white":L.current===2?"bg-[#FF7043] text-white":""}`,children:"02"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${L.current>3?"bg-[#009688]":""}  ${L.current>2&&L.current<4?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${L.current>3?"bg-[#009688] text-white":L.current===3?"bg-[#FF7043] text-white":""}`,children:"03"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${L.current>4?"bg-[#009688]":""}  ${L.current>3&&L.current<5?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${L.current>4?"bg-[#009688] text-white":L.current===4?"bg-[#FF7043] text-white":""}`,children:"04"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${L.current>5?"bg-[#009688]":""}  ${L.current>4&&L.current<6?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${L.current>5?"bg-[#009688] text-white":L.current===5?"bg-[#FF7043] text-white":""}`,children:"05"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${L.current>6?"bg-[#009688]":""}  ${L.current>5&&L.current<7?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${L.current>6?"bg-[#009688] text-white":L.current===6?"bg-[#FF7043] text-white":""}`,children:"06"})]}),r==="sender"&&A.jsx(dQ,{senderFormData:Z,onSenderFormDataChange:ye,onNextStep:Te,useMyProfile:S}),r==="receiver"&&A.jsx(gQ,{receiverFormData:Y,onReceiverFormDataChange:he,onBackStep:xe,onNextStep:Ee}),r==="package"&&A.jsx(yQ,{packageFormData:pe,onPackageFormDataChange:be,onBackStep:at,onNextStep:Ne}),r==="summary"&&A.jsx(vQ,{senderFormData:Z,receiverFormData:Y,packageFormData:pe,onBackStep:we,onNextStep:Ge,packagePrice:Q}),r==="payment"&&A.jsx(FQ,{onBackStep:me,onCashPayment:Je,onCardPayment:Ue,isWalletShow:!1,setpackageFormData:_e,packageFormData:pe}),r==="paid"&&A.jsx(ck,{onComplete:Qe}),r==="label"&&A.jsxs("div",{className:"w-full flex flex-col items-center gap-4 mt-4",children:[A.jsx("div",{className:"font-bold  text-center text-3xl md:text-5xl text-[#009688] mb-4",children:e.message}),A.jsxs("div",{className:"flex gap-6 items-center w-full md:w-auto border  px-9 mb-10",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(hb,{barCode:e,senderData:Z,receiverData:Y,packageData:pe,totalPrice:Q.totalPrice,position:1})}),A.jsx("div",{className:"flex-shrink-0  ",children:A.jsx(fb,{senderData:Z,receiverData:Y,packageData:pe,packagePrice:Q,scheduleTime:a,trackingId:i,qrcode:g,paymentMethod:N,position:1})})]})]}),A.jsx(qp,{})]})},a_="/assets/login-CBpXciww.png",em="/assets/view-C-7VnmhL.png",tm="/assets/hide-CcLQG700.png",uk="/assets/mail-AWFIQnLs.gif",PQ=({email:e,userId:t,setOTPCard:n,setOTPVerified:r,navigate:s})=>{const[a,c]=q.useState(["","","",""]),[i,f]=q.useState(!1),[g,y]=q.useState(""),[b,T]=q.useState(120),[S,U]=q.useState(!0);q.useEffect(()=>{let V;return b>0&&(V=setInterval(()=>{T(Z=>Z-1)},1e3)),b===0&&U(!1),()=>clearInterval(V)},[b]);const N=(V,Z)=>{const ne=V.target.value;if(ne.match(/[0-9]/)&&ne.length===1){const Y=[...a];Y[Z]=ne,c(Y),Z===3&&f(!0),Z<3&&document.getElementById(`otp-input-${Z+1}`).focus()}else if(ne===""){const Y=[...a];Y[Z]="",c(Y),f(!1),Z>0&&document.getElementById(`otp-input-${Z-1}`).focus()}},W=async V=>{V.preventDefault(),y("");const ne={otp:a.join(""),userId:t};try{const Y=await fetch("https://swiftlogix.cc/api/verifyotp",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(ne)});Y.ok||console.log("response error");const le=await Y.json();le.success?(n(!1),r(!0),s()):y(le.message)}catch(Y){console.log(Y)}},L=async()=>{try{const V=await fetch("https://swiftlogix.cc/api/resendotp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,userId:t})});if(!V.ok){console.log("response error");return}const Z=await V.json();console.log(Z),Z.success?(y(Z.message),c(["","","",""]),f(!1),y(""),U(!0),T(120)):y(Z.message)}catch(V){console.log(V)}},Q=V=>{const Z=Math.floor(V/60),ne=V%60;return`${Z}:${ne<10?"0":""}${ne}`};return A.jsx("div",{className:" flex items-center justify-center bg-gray-100",children:A.jsxs("div",{className:"p-6 bg-white rounded-3xl shadow-md w-[50%] absolute top-[35%]",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{src:uk,alt:"mailicon"})}),A.jsx("h1",{className:"text-3xl font-semibold text-center text-gray-700 mt-4 mb-4",children:"Verify Email"}),g&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:g}),A.jsxs("p",{className:"font-semibold text-center text-gray-700 mt-4 mb-6",children:["Enter the OTP sent to ",A.jsx("b",{children:e})]}),A.jsxs("form",{onSubmit:W,children:[A.jsx("div",{className:"flex justify-center space-x-4 mb-4",children:a.map((V,Z)=>A.jsx("input",{id:`otp-input-${Z}`,type:"text",value:V,onChange:ne=>N(ne,Z),maxLength:"1",className:"w-12 h-12 text-xl text-center border-2 border-gray-300 rounded focus:outline-[#FF7043] focus:border-blue-500",autoFocus:Z===0},Z))}),A.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4 mb-4",children:[b==0&&A.jsx("button",{type:"button",className:"py-2 px-3 border-2 rounded-2xl ${isResendDisabled ? 'cursor-not-allowed' : 'cursor-pointer'}hover:bg-slate-100",disabled:S,onClick:L,children:"Resend"}),b>0&&A.jsx("p",{children:Q(b)})]}),i&&A.jsx("button",{type:"submit",className:"w-full py-2 bg-[#009688] text-white font-semibold rounded-lg hover:bg-[#FF7043] transition",children:"Verify OTP"})]})]})})},lct=()=>{var le;const e=Mo(),[t,n]=q.useState("idle"),r=nf(),[s,a]=q.useState(((le=r.state)==null?void 0:le.isChange)||!1),[c,i]=q.useState({email:"",password:""}),[f,g]=q.useState({userId:"",name:"",email:"",mobileno:""}),[y,b]=q.useState(!1),[T,S]=q.useState(""),[U,N]=q.useState(!1),[W,L]=q.useState(!1),[Q,V]=q.useState(!1);q.useEffect(()=>{setTimeout(()=>{a(!1)},3e3)},[]);const Z=pe=>{const{name:_e,value:ye}=pe.target;i({...c,[_e]:ye})},ne=()=>{setTimeout(()=>{e("/customer-dashboard")},1e3)},Y=async pe=>{pe.preventDefault(),n("processing"),S("");const _e=await fetch("https://swiftlogix.cc/api/login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});_e.ok||console.log("response error");const ye=await _e.json();ye.success&&ye.verification==="VERIFIED"?(N(!0),n("success"),ne()):ye.success&&ye.verification==="PENDING"?(g(he=>({...he,userId:ye.data._id,name:ye.data.name,email:ye.data.email,mobileno:ye.data.mobileno})),L(!0)):(n("idle"),S(ye.message))};return q.useEffect(()=>{(async()=>{try{(await(await fetch("https://swiftlogix.cc/api/customer-dashboard",{credentials:"include"})).json()).success&&e("/customer-dashboard")}catch(_e){console.error("Error fetching data:",_e)}})()},[]),A.jsxs(A.Fragment,{children:[A.jsx(_h,{}),A.jsx(Bs,{}),A.jsxs(go,{delay:.2,children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-5xl font-semibold text-center",children:"Customer Portal"})}),A.jsxs("div",{className:"flex flex-col lg:flex-row justify-center items-center w-full max-[1025px]:mt-10  max-h-screen overflow-hidden px-4 sm:px-6 lg:px-12 py-8 gap-8",children:[A.jsx("div",{className:"hidden  w-full lg:w-1/2 h-[50vh] lg:h-screen justify-center items-center",children:A.jsxs("div",{className:"bg-[#FF7043] w-[90%] sm:w-[70%] h-[90%] sm:h-[80%] rounded-[40px] sm:rounded-[60px] flex flex-col justify-between items-center pt-4 text-white relative",children:[A.jsx("div",{className:"text-3xl sm:text-6xl mt-5",children:"WELCOME!"}),A.jsx("div",{className:"absolute bottom-4 sm:bottom-6",children:A.jsx("img",{src:a_,alt:"Logo",className:"w-32 sm:w-40 md:w-52 lg:w-64 max-w-full h-auto object-contain"})})]})}),A.jsx("div",{className:"w-full lg:w-1/2 flex justify-center items-center",children:A.jsxs("div",{className:"w-full lg:max-w-[400px] p-6 sm:p-8 bg-white rounded-[10px] shadow-lg",children:[A.jsx("h2",{className:"text-2xl sm:text-3xl text-gray-700 text-center mb-6",children:"Sign In"}),T&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:T}),A.jsxs("form",{onSubmit:Y,children:[A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"email",name:"email",value:c.email,onChange:Z,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Email Address",required:!0})}),A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:y?"text":"password",name:"password",value:c.password,onChange:Z,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>b(!y),children:y?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsx("div",{className:"mb-4 text-right",children:A.jsxs(ss,{to:"/reset",children:[" ",A.jsx("div",{className:"text-[#FF7043] text-sm cursor-pointer",children:"Forgot Password?"})]})}),A.jsxs("button",{type:"submit",disabled:t==="processing",className:"w-full bg-[#009688] hover:bg-[#FF7043] text-white py-3 rounded-md mb-4 transition-all duration-300",children:[A.jsx(Vu,{children:t==="success"&&A.jsx(Uo.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{opacity:0},className:"absolute left-[50%]",children:A.jsx(i0,{className:"text-white"})})}),A.jsx(Vu,{children:t==="processing"&&A.jsx(Uo.div,{initial:{opacity:0},animate:{opacity:1,rotate:360},exit:{opacity:0},transition:{repeat:1/0,duration:1,ease:"linear"},className:"absolute right-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),A.jsx("span",{className:"ml-6",children:t==="processing"?"Processing...":t==="success"?"":"Signin"})]}),A.jsxs("p",{className:"text-center text-sm",children:["Don't have an account?"," ",A.jsx(ss,{to:"/signup",className:"text-[#FF7043]",children:"Signup"})]})]})]})})]})]}),(U||Q)&&A.jsx("div",{className:"w-full flex justify-center items-center fixed top-0 left-0 h-screen bg-black bg-opacity-50 z-50",children:A.jsxs("div",{className:"w-[80%] sm:w-[60%] md:w-[40%] lg:w-[30%] rounded-3xl shadow-2xl bg-white p-5 flex flex-col items-center relative transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20   shadow-2xl rounded-full absolute -top-9"}),A.jsx("p",{className:"mt-10  text-center text-xl sm:text-[36px] text-gray-700 font-semibold",children:"You are successfully logged in!"})]})}),s&&A.jsx("div",{className:"border-none bg-[#009688] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:"New password created"}),A.jsx(al,{}),W&&A.jsx(PQ,{email:f.email,userId:f.userId,setOTPCard:L,setOTPVerified:V})]})},cct=()=>{const e=Mo(),[t,n]=q.useState({name:"",email:"",mobileno:"",password:"",confirmpassword:""}),[r,s]=q.useState("idle"),[a,c]=q.useState(!1),[i,f]=q.useState(!1),[g,y]=q.useState(""),[b,T]=q.useState(!1),[S,U]=q.useState(!1),[N,W]=q.useState({userId:"",name:"",email:"",mobileno:""}),L=Z=>{const{name:ne,value:Y}=Z.target;n({...t,[ne]:Y})},Q=async Z=>{if(Z.preventDefault(),t.password.length<8){y("Password contain minimum 8 characters");return}if(t.password!==t.confirmpassword){y("Passwords do not match");return}y("");try{s("processing");const ne=await fetch("https://swiftlogix.cc/api/signup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});ne.ok||console.log("response error");const Y=await ne.json();Y.success?(W(le=>({...le,userId:Y.data._id,name:Y.data.name,email:Y.data.email,mobileno:Y.data.mobileno})),s("success"),T(!0)):(s("idle"),y(Y.message))}catch(ne){console.error("Error submitting form:",ne)}},V=()=>{e("/customer-dashboard")};return A.jsxs(A.Fragment,{children:[A.jsx(_h,{}),A.jsx(Bs,{}),A.jsxs(go,{delay:.2,children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-5xl font-semibold text-center",children:"Customer Portal"})}),A.jsxs("div",{className:"flex justify-center mt-2 w-full ",children:[A.jsx("div",{className:"left w-full lg:w-1/2   flex justify-center  ",children:A.jsxs("div",{className:"w-full lg:max-w-[400px] p-8 bg-white rounded-[10px] shadow-lg ",children:[A.jsx("h2",{className:"text-3xl text-gray-700 text-center mb-6 ",children:"Sign Up"}),g&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:g}),A.jsxs("form",{onSubmit:Q,children:[A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:t.name,name:"name",onChange:L,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Name",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"email",value:t.email,name:"email",onChange:L,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Email Address",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:t.mobileno,name:"mobileno",onChange:L,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Mobile No",required:!0})}),A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:a?"text":"password",value:t.password,name:"password",onChange:L,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>c(!a),children:a?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:i?"text":"password",value:t.confirmpassword,name:"confirmpassword",onChange:L,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Confirm Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>f(!i),children:i?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsxs("button",{type:"submit",className:"relative w-full bg-[#009688] hover:bg-[#FF7043] text-white py-3 rounded-md mb-4 transition-all duration-300",children:[A.jsx(Vu,{children:r==="success"&&A.jsx(Uo.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{opacity:0},className:"absolute left-[50%]",children:A.jsx(i0,{className:"text-white"})})}),A.jsx(Vu,{children:r==="processing"&&A.jsx(Uo.div,{initial:{opacity:0},animate:{opacity:1,rotate:360},exit:{opacity:0},transition:{repeat:1/0,duration:1,ease:"linear"},className:"absolute right-4 h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),A.jsx("span",{className:"ml-6",children:r==="processing"?"Processing...":r==="success"?" ":"Signup"})]}),A.jsxs("p",{className:"text-center text-sm",children:["Already have an account?"," ",A.jsx(ss,{to:"/login",children:A.jsx("a",{href:"/login",className:"text-[#FF7043]",children:"Signin"})})]})]})]})}),A.jsx("div",{className:"hidden right w-[50%] h-[100%]  justify-center items-center",children:A.jsxs("div",{className:"bg-[#FF7043] w-[70%] h-[80%] rounded-[60px] flex flex-col pt-4 justify-around items-center relative text-white ",children:[A.jsx("div",{className:"text-6xl",children:"WELCOME!"}),A.jsx("div",{className:"className=",absolute:!0,"bottom-0":!0,children:A.jsx("img",{src:a_,alt:"Logo"})})]})})]})]}),S&&A.jsx("div",{className:"w-full flex justify-center absolute top-[50%]",children:A.jsxs("div",{className:"w-[30%]  rounded-3xl shadow-2xl flex justify-center items-center flex-col p-5 relative bg-white transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20 shadow-2xl rounded-full absolute top-[-36px]"}),A.jsx("p",{className:"mt-16 text-gray-700 text-[44px] font-semibold text-center",children:"You are successfully Signed up!"})]})}),A.jsx(al,{}),b&&A.jsx(PQ,{email:N.email,userId:N.userId,setOTPCard:T,setOTPVerified:U,navigate:V})]})},cE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAABK0lEQVR4nO2aOw7CMBBEfSQ4ArE4CFR0DjSUUHJpGKSISICCIEB2bc88KUUqz1sncfwJQQghhBBCCDEGpOUssGZBike08YK22Zg2PJRlu1ghNWe08WQpj9vlWoQ7+T7PtEXALs6fGkR3n+J60oaHsqS4Hsyyi3PrqsP6SXDPAMcA7vKeQbKR9wiUnbxlsGzlLQJmLz9l0GLkpwhcnPw/gxcr/w+B4uV/EalG/huh6uTHiFUr/4lg9fJvp6+ZTK9NeNHbdff8iCLULx/YCwDmVwDMH0EwD4Ng/hEC868wmCdDYJ4Og3lBBMxLYmBeFAXzsjiYN0bAvDUG5s1RMG+PwzuAZwboiEwISM0+i4/Q4JPQHGwaTl0R/IehhyIYyfdQH5QUQgghhBAiFM8VJJwOdP8ahhwAAAAASUVORK5CYII=",Afe=({onClose:e})=>A.jsxs("div",{className:"w-[25vw] bg-white absolute bottom-[5vw] left-[17vw] text-gray-700 p-4 shadow-2xl border rounded-2xl ",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("div",{className:"font-semibold text-lg",children:"Settings"}),A.jsx("div",{onClick:e,children:A.jsx("img",{src:cE,alt:"",className:"w-[24px] cursor-pointer"})})]}),A.jsx("div",{className:"my-2 w-full border border-gray-300"}),A.jsxs("div",{className:"flex flex-col gap-4",children:[A.jsxs("div",{className:"flex justify-between items-center rounded-lg",children:[A.jsx("div",{children:"Theme"}),A.jsx("div",{className:"border rounded-lg p-1",children:A.jsx("select",{name:"theme",id:"theme",children:A.jsx("option",{value:"light",selected:!0,children:"Light"})})})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("div",{children:"Language"}),A.jsx("div",{className:"border p-1 rounded-lg",children:A.jsx("select",{name:"language",id:"language",children:A.jsx("option",{value:"english",selected:!0,children:"English"})})})]})]})]}),mfe=({onClose:e})=>{const[t,n]=q.useState("Successfully scheduled shipment");return A.jsxs("div",{className:"w-[25vw] ml-[17vw] absolute top-[20vh] overflow-y-scroll max-h-[70vh]  min-h-[50vh] border p-2  rounded-xl bg-white shadow-lg",children:[A.jsxs("div",{className:"w-full flex justify-between items-center  ",children:[A.jsx("button",{className:"py-1 px-2 font-semibold  text-white bg-[#009688] rounded-lg",children:"Clear all"}),A.jsx("div",{onClick:e,children:A.jsx("img",{src:cE,alt:"",className:"w-[24px] cursor-pointer"})})]}),A.jsx("div",{className:"my-2 w-full border border-gray-300 mb-4"}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]})]})},v0=()=>{const e="24px",[t,n]=q.useState(!1),[r,s]=q.useState(!1),[a,c]=q.useState(!1),i=S=>S.isActive?"border rounded-lg":"",f=()=>{n(!0)},g=()=>{n(!1)},y=()=>{s(!1)},b=async()=>{try{const U=await(await fetch("https://swiftlogix.cc/api/logout",{credentials:"include"})).json();U.success&&(qi.success("Logout Successfully."),window.location.replace(U.redirect))}catch{qi.error("Failed to Logout.")}},T=()=>c(!a);return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"min-[1226px]:hidden fixed top-4 left-4 z-50",children:A.jsx("button",{onClick:T,className:"text-white bg-teal-600 p-2 rounded-lg shadow-lg",children:a?A.jsx(RF,{size:20}):A.jsx(LF,{size:20})})}),A.jsxs("div",{className:`fixed  top-0 left-0 h-full z-40 bg-teal-600 text-white p-4 w-[70vw] sm:w-[50vw] min-[1226px]:w-[18vw] transition-transform duration-300 ease-in-out 
        ${a?"translate-x-0":"-translate-x-full"} min-[1226px]:translate-x-0 flex flex-col`,children:[A.jsxs("div",{className:"w-full max-w-screen-md mx-auto shadow-2xl rounded-xl p-4 sm:p-6 md:p-8 flex flex-col items-center justify-center mb-6",children:[A.jsx("h1",{className:"text-2xl sm:text-2xl md:text-2xl  min-[1226px]:text-3xl min-[1486px]:text-[38px] font-bold text-center",children:"SWIFTLOGIX"}),A.jsx("h1",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-bold text-center mt-2",children:"Customer Portal"})]}),A.jsx("div",{className:"flex-grow",children:A.jsxs("ul",{className:"font-semibold shadow-sm flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-xl",children:[A.jsx(ss,{className:i,to:"/customer-dashboard",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(mB,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Dashboard"})]})}),A.jsx(ss,{className:i,to:"/customer-profile",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(OF,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Profile"})]})}),A.jsx(ss,{className:i,to:"/wallet",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(nne,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Wallet"})]})}),A.jsx(ss,{className:i,to:"/customer-shipments",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(t8,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Shipments"})]})})]})}),A.jsxs("div",{className:"mt-auto",children:[A.jsx("ul",{className:"font-semibold flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-lg",children:A.jsxs("li",{onClick:f,className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(r8,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Settings"})]})}),A.jsx("ul",{onClick:b,className:"font-semibold flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-lg",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(i8,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Log out"})]})})]}),r&&A.jsx(mfe,{onClose:y}),t&&A.jsx(Afe,{onClose:g})]}),A.jsx(cb,{})]})},uct="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAEQUlEQVR4nO1Y204bVxRdZ3ht0r8pX5H2w5KHtj8QUjWpqiYUsMfQxJBwjW+Ar2AcG6FAg6LGhhgMnsuZVY19jLFFhG/HeQhbWg+WxqO19tlnr6UB7uqu7kp7sYD7fIefZBGPZBHzsoCCLKAiC7Ab2ENF7mFP7mJe5vGIu/iRu7j39YnvY1KW8IcswfKKYAPvFAoKewp5hV2QPnZgMYdnzGFy/MQLuC9L+E0W4XklRdwnmQa5BTIOMgYyohBVvzdBJkFmQeYUMvCYwdTYToQlfC/3kWgQ95FXxCJ9Ig4yrcRkGoj7jdEuQJbw6xX5nQGIR7qwrQT4YtL4Wb+AIo5bY9MxJoMiekXeH69j7QLcXTXzRTUGoxKQAuUmqF1Abd1ob5vcCMhvN8n7sJaFfgGVFxO0U6K9Kv17kBiAfExtJEVexsDarKFfwMnzCZ5OT7AeFZ17fgf0UmojxVV3I11rNKHWbKo9Nj7cdfAiIHgxN4YTqAYMfp42WJ02WJs3aMVEw5y6TKq957Mdq/L6haW7AVr/CNYDTVjzYxBQXxU8nzGuUJsxeBEwWF8UdDYE3TjobYNei3Cm2WVvC5RR0F0F7bCgZQpawU64a2MQ4I9L/WXzuC+vodXFbljBL8NuwRR0wqIxhvoF+HOfB53layQDPZAMNoleh2OiAbmixm4cAmpboJUDfT+QKdB5owjdQtK5jhDozIPuCugl2+RlcgwCDgIGP0XBz5vg+TZoZZp+4G2Cch10l0D3JegsNEk6PtEF0H0FytegXAO9RFegU5fdGvQO9JPn/wsLflwWPHoDHq+AlQh4vgk6mXYnO4jlbthIN0AmwNpcnz4wTJ73u17bBD+ugMfL4GkUvNy6hWjmZvjrtC8fGGmez4K1OPjvEljZAC8TXyCa7oJvYG8H8AFdeb4eA9/PCpYXQTumLmdKIdmcexkZgQ/ozPOni+D73wVPXmj0Aakxz7sJcP+JYOW5Rh9wNef5lgBtPlDTnOcP/gRPZzX6QEVznj9cAs/iGn3gRHOeP1wEz2IafaCqOc8fhsGzqEYfqGvO8wdzYHVVow94mvN8cUrw018afcDTnOdLTwTLWn0g2764OvL8MD7ALI5uFVBbNTqSZQMjzPPD+ACzPXxa9H3A2RLtbXMThsjzg/oA04j19HG35QPWhuifaA97vG8fSMNjGo+ZxXfopU6njQ9XPhAyaL8VzRfdQrKXPX4RFDwKg+exnv5fZxpPuY0f0E9V/xa/3OgDYUFnTdCNNO/DIHu8GhLJD4t4VYthjymUmYKlUGYSeSZhMoWHTOJBzx3vLoZw/2JWxEftA1ZQxPx3D0Sq3+IM7tXnxNTlnPCG9QE7CM8x8ZivB+zoMGUHMVkPiGdWUFj9+oBtom6H8NRe6HOGdZ2IE8IDx8RDOwjTCSJvmyjbIVg+HBNlx0TeNWH6z/jPfpWO39VdfYP1P1mqCg9kjf+7AAAAAElFTkSuQmCC",dct=()=>{const[e,t]=q.useState(!1);return q.useEffect(()=>{const n=()=>t(window.innerWidth>=768);return n(),window.addEventListener("resize",n),()=>window.removeEventListener("resize",n)},[]),A.jsx("div",{className:"my-6 px-4 w-full",children:A.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-[#F7F7F7] relative",children:[A.jsx(Uo.div,{initial:{y:0,opacity:0,zIndex:1},animate:{y:0,x:e?-170:0,opacity:1},transition:{delay:1,duration:.6,ease:"easeOut"},children:A.jsx(ss,{to:"/customer-ratecalculator",children:A.jsxs("div",{className:"md:relative md:left-44 w-[9rem] sm:w-[10rem] h-[7rem] sm:h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-md cursor-pointer transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-lg",children:[A.jsx(n8,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center text-sm",children:"Rate Calculator"})]})})}),A.jsx(Uo.div,{initial:{y:100,opacity:0,zIndex:2},animate:{y:0,x:0,opacity:1},transition:{delay:.3,duration:.6,ease:"easeOut"},children:A.jsx(ss,{to:"/customer-scheduleship",children:A.jsxs("div",{className:"w-[9rem] sm:w-[10rem] h-[7rem] sm:h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-md cursor-pointer transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-lg",children:[A.jsx(sS,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center text-sm",children:"Schedule a Ship"})]})})}),A.jsx(Uo.div,{initial:{y:0,opacity:0,zIndex:1},animate:{y:0,x:e?170:0,opacity:1},transition:{delay:.9,duration:.6,ease:"easeOut"},children:A.jsx(ss,{to:"/customer-reprintlabel",children:A.jsxs("div",{className:"md:relative md:right-44 w-[9rem] sm:w-[10rem] h-[7rem] sm:h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-md cursor-pointer transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-lg",children:[A.jsx(NF,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center text-sm",children:"Reprint Shipping Label"})]})})})]})})},hct=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(""),[a,c]=q.useState(""),[i,f]=q.useState(null),[g,y]=q.useState(null);q.useState(null);const[b,T]=q.useState(""),S=q.useRef(0),U=q.useRef(0),N=q.useRef(!1),W=q.useRef(null),L=["Live-Track your Shipment","Enter Tracking ID"];q.useEffect(()=>{const Z=()=>{const ne=L[S.current],Y=N.current;if(Y?(U.current--,T(ne.substring(0,U.current))):(U.current++,T(ne.substring(0,U.current))),!Y&&U.current===ne.length){N.current=!0,W.current=setTimeout(Z,1e3);return}else Y&&U.current===0&&(N.current=!1,S.current=(S.current+1)%L.length);W.current=setTimeout(Z,Y?60:100)};return Z(),()=>clearTimeout(W.current)},[]);const Q=Z=>{f(""),c(Z.target.value)},V=async()=>{if(!a){f("Tracking Id is required*");return}try{const Z=await fetch("https://swiftlogix.cc/api/track-shipment",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:a})});Z.ok||console.log("Error in response");const ne=await Z.json();if(ne.success){e("/customer-trackingshipment",{state:{shipmentDetail:ne.shipmentDetail,originCityCoords:ne.originCityCoords,destinationCityCoords:ne.destinationCityCoords,trackingId:a}});return}f(ne.message)}catch(Z){console.error("Error:",Z)}};return q.useEffect(()=>{(async()=>{try{const Y=await(await fetch("https://swiftlogix.cc/api/customer-dashboard",{credentials:"include"})).json();if(Y.success){n(Y.userData),y(Y.points);return}e("/login")}catch(ne){console.error("Error fetching data:",ne)}})()},[]),A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row min-h-screen",children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full min-[1226px]:w-[18vw]",children:A.jsx(v0,{userData:t})}),A.jsxs("div",{className:"flex-1 bg-white overflow-y-auto px-4 sm:px-6 lg:px-10",children:[r===""&&A.jsxs("div",{className:"flex flex-col min-h-screen",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center py-6",children:[A.jsxs("div",{className:"flex items-center gap-3 shadow-xl rounded-xl px-4 py-2",children:[A.jsx("h2",{className:"text-3xl sm:text-4xl text-[#009688] font-bold",children:"Hello,"}),A.jsx("p",{className:"text-3xl sm:text-4xl text-gray-700 font-bold",children:t==null?void 0:t.name})]}),A.jsx("div",{className:"mt-4 sm:mt-0",children:A.jsxs("div",{className:"px-4 py-2 shadow-sm flex gap-2 justify-center items-center border rounded-xl",children:[A.jsx("img",{src:uct,alt:"coins",className:"w-6 sm:w-8"}),A.jsx("p",{className:"text-gray-700 font-semibold text-md sm:text-lg",children:g})]})})]}),A.jsx("div",{className:"w-full flex items-center justify-center mb-8",children:A.jsxs("div",{className:"w-full sm:w-[80%] md:w-[60%] flex flex-col items-center",children:[A.jsxs("div",{className:"w-full flex flex-col sm:flex-row items-stretch",children:[A.jsx("input",{type:"text",required:!0,onChange:Q,value:a,placeholder:b,className:"placeholder:text-[#009688] w-full p-4 border-2 border-[#009688] bg-[#F7F7F7] focus:outline-none rounded-t-lg sm:rounded-l-lg sm:rounded-tr-none focus:ring-[#009688] focus:border-[#009688]"}),A.jsx("input",{type:"submit",value:"Track Now",onClick:V,className:"bg-[#009688] hover:bg-[#FF7043] text-white font-semibold p-4 cursor-pointer rounded-b-lg sm:rounded-r-lg sm:rounded-bl-none transition-all duration-300 hover:text-[18px]"})]}),i&&A.jsx("p",{className:"text-red-500 font-semibold text-md mt-2",children:i})]})}),A.jsx(dct,{})]}),A.jsx(al,{})]})]})},gfe=({trackingNumber:e,originCity:t,destinationCity:n,receiverName:r,datetime:s,onClick:a,droppedButtonShow:c,handleDroppedShipments:i,shipmentStatus:f,selectedCard:g,onClickPick:y,deliveryDate:b,processingIndex:T,index:S})=>{const[U,N]=q.useState(!1),W=async()=>{N(!0),i()},L=()=>{y()};return A.jsxs("div",{className:"w-full sm:w-[90%] md:w-[70%] lg:max-w-sm bg-white border rounded-xl shadow-md p-4 hover:scale-105 transition-all duration-300",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2",children:[A.jsxs("span",{className:"font-semibold text-base sm:text-lg text-[#009688]",children:["Tracking# ",e]}),A.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:A.jsx("strong",{children:s})})]}),A.jsxs("div",{className:"text-sm sm:text-base",children:[A.jsxs("p",{className:"text-gray-600",children:["Origin City: ",A.jsx("strong",{children:t})]}),A.jsxs("p",{className:"text-gray-600",children:["Destination City: ",A.jsx("strong",{children:n})]}),A.jsxs("p",{className:"text-gray-600",children:["Receiver Name: ",A.jsx("strong",{children:r})]}),b&&A.jsxs("p",{className:"text-gray-600",children:["Delivery Date: ",A.jsx("strong",{children:b})]})]}),A.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[A.jsx("button",{onClick:a,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:"Shipment Details"}),c&&A.jsxs(A.Fragment,{children:[g==="scheduled"&&A.jsx("button",{disabled:f==="dropped",onClick:W,className:`bg-[#009688] text-white px-4 py-2 rounded-lg ${f!="dropped"&&"hover:bg-[#FF7043]"} transition-all duration-300 text-sm sm:text-base`,children:f==="dropped"?"Dropped":T===S?"Processing...":"Drop?"}),g==="accepted"&&A.jsx("button",{disabled:f==="dropped",onClick:L,className:`bg-[#009688] text-white px-4 py-2 rounded-lg ${f!="dropped"&&"hover:bg-[#FF7043]"} transition-all duration-300 text-sm sm:text-base`,children:f==="accepted"?T===S?"Processing...":"Pick?":"Picked"})]})]})]})},fct=({senderFormData:e,receiverFormData:t,packageFormData:n,packagePrice:r})=>(q.useState(!1),A.jsxs("div",{className:"mt-3 px-4 ",children:[A.jsx("div",{className:"w-full flex justify-center items-center",children:A.jsxs("div",{className:"bg-white w-full md:w-[90%] border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Sender Information"}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 text-gray-700",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Name:"})," ",e.sendername]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Contact:"})," ",e.sendercontact]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Email:"})," ",e.senderemail]}),A.jsxs("p",{children:[A.jsx("strong",{children:"CNIC:"})," ",e.sendercnic]})]})]})]})}),A.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:A.jsxs("div",{className:"bg-white w-full md:w-[90%] border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Receiver Information"}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 pb-2 text-gray-700",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Name:"})," ",t.receivername]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Contact:"})," ",t.receivercontact]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Area/Town:"})," ",t.receiverarea]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Email:"})," ",t.receiveremail]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"CNIC:"})," ",t.receivercnic]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Building/House no:"})," ",t.receiverhouseno]})]})]}),A.jsx("div",{className:"w-full text-gray-700",children:A.jsxs("p",{children:[A.jsx("strong",{children:"Full Address:"})," ",t.receiveraddress]})})]})}),A.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:A.jsxs("div",{className:"bg-white w-full md:w-[90%] border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Package Information"}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 text-gray-700 mb-4",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Origin City:"})," ",n.originCity]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Weight:"})," ",n.weight," kg"]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Destination City:"})," ",n.destinationCity]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pieces:"})," ",n.pieces]})]})]}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 text-gray-700 mb-4",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Shipment Type:"})," ",n.shipmentType]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Delivery Method:"})," ",n.deliveryMethod]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Sensitive Product:"})," ",n.sensitivePackage]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Insurance:"})," ",n.insurance]}),n.deliveryMethod==="pickUpRider"&&A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pick-up Date:"})," ",n.pickupdate]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pickup Time:"})," ",n.pickuptime]})]})]})]}),n.deliveryMethod==="pickUpRider"&&A.jsx("div",{className:"text-gray-700 mb-4",children:A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pickup Address:"})," ",n.pickupaddress]})}),A.jsx("div",{className:"text-gray-700",children:A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Description:"})," ",n.packageDescription]})})]})}),A.jsx("div",{className:"flex flex-col items-center my-4 px-2",children:A.jsx("div",{className:"flex items-center justify-center w-full md:w-[90%] text-gray-800",children:A.jsxs("p",{className:"text-[1.2rem] sm:text-xl",children:[A.jsx("strong",{className:"text-2xl font-bold sm:text-3xl",children:"Total Price:"})," ",r.totalPrice]})})})]})),pct=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(null),[a,c]=q.useState([]),[i,f]=q.useState(null),[g,y]=q.useState(null),[b,T]=q.useState(null),[S,U]=q.useState(!1),[N,W]=q.useState(null);q.useEffect(()=>{(async()=>{const ne=await fetch("https://swiftlogix.cc/api/get-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:r})});ne.ok||console.log("response error");const le=(await ne.json()).shipments;if(le.length>0){const pe=le.map(_e=>({packagePrice:{service:_e.shipmentType,basePrice:_e.basePrice,weightCharges:_e.weightCharges,distanceCharges:_e.distanceCharges,totalPrice:_e.totalPrice,insurance:_e.insurance},senderFormData:{sendername:_e.sendername,sendercontact:_e.sendercontact,senderemail:_e.senderemail,sendercnic:_e.sendercnic},receiverFormData:{receivername:_e.receivername,receivercontact:_e.receivercontact,receiveremail:_e.receiveremail,receivercnic:_e.receivercnic,receiverarea:_e.receiverarea,receiverhouseno:_e.receiverhouseno,receiveraddress:_e.receiveraddress},packageFormData:{originCity:_e.originCity,destinationCity:_e.destinationCity,weight:_e.weight,pieces:_e.pieces,pickupdate:_e.pickupdate||"",pickuptime:_e.pickuptime||"",insurance:_e.insurance,pickupaddress:_e.pickupaddress||"",shipmentType:_e.shipmentType,deliveryMethod:_e.deliveryMethod,sensitivePackage:_e.sensitivePackage,packageDescription:_e.packageDescription},paymentMethod:{paymentMethod:_e.paymentMethod},scheduleTime:{scheduleTime:_e.datetime},trackingId:{trackingId:_e.trackingid}}));c(pe)}else c([])})()},[r]),q.useEffect(()=>{(async()=>{const ne=await fetch("https://swiftlogix.cc/api/get-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"completed"})});ne.ok||console.log("response error");const Y=await ne.json();y(Y.shipments.length)})()},[]),q.useEffect(()=>{(async()=>{const ne=await fetch("https://swiftlogix.cc/api/get-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"scheduled"})});ne.ok||console.log("response error");const Y=await ne.json();T(Y.shipments.length)})()},[]),q.useEffect(()=>{(async()=>{const ne=await fetch("https://swiftlogix.cc/api/get-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"pending"})});ne.ok||console.log("response error");const Y=await ne.json();f(Y.shipments.length)})()},[]),q.useEffect(()=>{s("scheduled")},[]),q.useEffect(()=>{(async()=>{try{if((await(await fetch("https://swiftlogix.cc/api/customer-shipments",{credentials:"include"})).json()).success)return;e("/login")}catch(ne){console.error("Error fetching data:",ne)}})()},[]);const L=Z=>{s(Z),Z==="scheduled"?(document.documentElement.classList.add("bg-[#009688]"),document.documentElement.classList.remove("bg-white")):(document.documentElement.classList.remove("bg-[#009688]"),document.documentElement.classList.add("bg-white"))},Q=()=>{U(Z=>!Z)},V=Z=>{W(Z),U(!1);let ne=[...a];(Z==="Newest"||Z==="Oldest")&&ne.reverse(),c(ne)};return A.jsxs("div",{className:"flex",children:[A.jsx(v0,{}),A.jsx(al,{}),A.jsxs("div",{className:"flex-1 w-full min-[1226px]:ml-[18vw] h-screen bg-white overflow-y-auto relative",children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full shadow-xl font-bold text-[#009688] bg-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-5xl font-semibold",children:"Shipments"})}),A.jsxs("div",{children:[A.jsxs("div",{className:"flex gap-6 p-8",children:[A.jsx(xR,{title:"Completed Shipments",value:g,onClick:()=>L("completed"),isSelected:r==="completed"}),A.jsx(xR,{title:"Scheduled Shipments",value:b,onClick:()=>L("scheduled"),isSelected:r==="scheduled"}),A.jsx(xR,{title:"Pending Shipments",value:i,onClick:()=>L("pending"),isSelected:r==="pending"})]}),A.jsx("div",{className:"px-4 sm:px-6 md:px-8 pb-4 flex gap-4 relative",children:A.jsxs("div",{className:"relative",children:[A.jsxs("div",{className:"inline-flex items-center gap-1 cursor-pointer py-2 px-3 font-semibold rounded-full border",onClick:Q,children:[A.jsx(ene,{size:24,color:S?"#009688":"#FF7043"}),A.jsx("p",{children:"Filter"})]}),S&&A.jsxs("div",{className:"absolute top-full left-0 mt-2 w-[40vw] sm:w-[30vw] md:w-[20vw] lg:w-[14vw] min-w-[150px] max-w-[200px] flex flex-col items-center shadow-lg rounded-lg p-2 border bg-white z-10",children:[A.jsx("div",{onClick:()=>V("Newest"),className:"cursor-pointer hover:bg-[#009688] hover:text-white w-full text-center py-1",children:"Newest"}),A.jsx("div",{className:"my-2 w-[80%] border border-gray-300"}),A.jsx("div",{onClick:()=>V("Oldest"),className:"cursor-pointer hover:bg-[#009688] hover:text-white w-full text-center py-1",children:"Oldest"})]})]})})]}),a.length==0&&A.jsxs("div",{className:"flex justify-center items-center",children:["no ",r," shipments"]}),A.jsx("div",{className:"flex flex-wrap gap-4 max-sm:px-4 sm:pl-8",children:a.map((Z,ne)=>A.jsx(gfe,{trackingNumber:Z.trackingId.trackingId,originCity:Z.packageFormData.originCity,destinationCity:Z.packageFormData.destinationCity,receiverName:Z.receiverFormData.receivername,datetime:Z.scheduleTime.scheduleTime,onClick:()=>n(ne)},ne))}),t!=null&&A.jsxs("div",{className:"absolute top-0 w-full h-auto bg-gray-700 bg-opacity-50 flex justify-center items-center z-50",children:[A.jsx(fct,{senderFormData:a[t].senderFormData,receiverFormData:a[t].receiverFormData,packageFormData:a[t].packageFormData,packagePrice:a[t].packagePrice}),A.jsx("button",{onClick:()=>n(null),className:"fixed top-4 right-10 text-[#FF7043] text-[44px]",children:"×"})]})]})]})};function xR({title:e,value:t,onClick:n,isSelected:r}){return A.jsxs("div",{onClick:n,className:`cursor-pointer p-6 hover:bg-[#009688] rounded-lg shadow-md ${r?"bg-[#009688] text-white":"bg-white"} text-gray-700 hover:text-white`,children:[A.jsx("div",{className:"flex items-center justify-between mb-4",children:A.jsx("h3",{className:"text-lg font-semibold",children:e})}),A.jsx("p",{className:"text-3xl font-bold",children:t})]})}const wT=cw("https://swiftlogix.cc/api",{reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,transports:["websocket"],autoConnect:!1}),kQ=({originCityCoords:e,destinationCityCoords:t,trackingId:n,setLastUpdateAgo:r,setEta:s})=>{const[a,c]=q.useState([0,0]),[i,f]=q.useState("Your Location"),g=q.useRef(null),y=q.useRef(null),b=q.useRef(null),T=q.useRef(null),S=N=>{const[W,L]=N.split(" "),[Q,V,Z]=W.split("/"),[ne,Y,le]=L.split(":");return new Date(Z,V-1,Q,ne,Y,le)},U=N=>{const L=new Date-N,Q=Math.floor(L/(1e3*60)),V=Math.floor(L/(1e3*60*60)),Z=Math.floor(L/(1e3*60*60*24));let ne;Q<1?ne="Just now":Q<60?ne=`${Q} minute${Q!==1?"s":""} ago`:V<24?ne=`${V} hour${V!==1?"s":""} ago`:ne=`${Z} day${Z!==1?"s":""} ago`,r(ne)};return q.useEffect(()=>{(async()=>{const L=await(await fetch("https://swiftlogix.cc/api/get-route-coordinates",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:n})})).json();if(L.success){c(L.route.coordinates);const Q=S(L.route.datetime);U(Q)}})()},[n]),q.useEffect(()=>(wT.connect(),()=>{wT.disconnect()}),[]),wT.emit("register",n),wT.on("receive-location",N=>{console.log(N.coords),c(N.coords)}),q.useEffect(()=>{const N=document.createElement("link");N.rel="stylesheet",N.href="https://api.mapbox.com/mapbox-gl-js/v3.7.0/mapbox-gl.css",document.head.appendChild(N),il.accessToken="pk.eyJ1IjoiaXRzcmVobWFuIiwiYSI6ImNtMjkwd3ZzeDAwZ3Myam42bXE4bmE0b3cifQ.M83dkK35hWBso_XVSYfvoQ";const W=new il.Map({container:"map",style:"mapbox://styles/mapbox/streets-v12",center:a,zoom:7});W.addControl(new il.NavigationControl),W.addControl(new il.GeolocateControl({positionOptions:{enableHighAccuracy:!0},trackUserLocation:!0,showUserHeading:!0})),g.current=W;const L=document.createElement("div");L.innerHTML=`<img src=${wde} style="width: 35px; height: 35px; border-radius: 50%;">`,y.current=new il.Marker({element:L}).setLngLat(a).setPopup(new il.Popup().setHTML(`<h3>${i}</h3>`)).addTo(W);const Q=document.createElement("div");Q.innerHTML=`<img src=${bde} style="width: 35px; height: 35px; border-radius: 50%;">`,b.current=new il.Marker({element:Q}).setLngLat(e).setPopup(new il.Popup().setHTML("<h3>Origin</h3>")).addTo(W);const V=document.createElement("div");V.innerHTML=`<img src=${Cde} style="width: 35px; height: 35px; border-radius: 50%;">`,T.current=new il.Marker({element:V}).setLngLat(t).setPopup(new il.Popup().setHTML("<h3>Destination</h3>")).addTo(W);const Z=async()=>{const ne=`https://api.mapbox.com/directions/v5/mapbox/driving/${e.lng},${e.lat};${t.lng},${t.lat}?geometries=geojson&access_token=${il.accessToken}`,le=await(await fetch(ne)).json();if(le.routes.length>0){const pe=le.routes[0].geometry;W.addSource("route",{type:"geojson",data:{type:"Feature",geometry:pe}}),W.addLayer({id:"route-line",type:"line",source:"route",layout:{"line-join":"round","line-cap":"round"},paint:{"line-color":"#009688","line-width":4}})}};return W.on("load",Z),()=>{document.head.removeChild(N),W.remove()}},[]),q.useEffect(()=>{y.current&&g.current&&(y.current.setLngLat(a),y.current.getPopup().setHTML(`<h3>${i}</h3>`),g.current.flyTo({center:a,zoom:7}))},[a]),q.useEffect(()=>{if(!a||!t)return;(async()=>{il.accessToken="pk.eyJ1IjoiaXRzcmVobWFuIiwiYSI6ImNtMjkwd3ZzeDAwZ3Myam42bXE4bmE0b3cifQ.M83dkK35hWBso_XVSYfvoQ";const W=`https://api.mapbox.com/directions/v5/mapbox/driving/${a[0]},${a[1]};${t.lng},${t.lat}?geometries=geojson&overview=false&access_token=${il.accessToken}`;try{const V=(await(await fetch(W)).json()).routes[0].duration;s(Math.round(V/60))}catch(L){console.error("Failed to fetch ETA:",L)}})()},[a,t]),A.jsx("div",{className:"flex flex-col items-center p-4 w-full",children:A.jsx("div",{id:"map",className:"w-full max-w-[800px] h-[300px] sm:h-[400px] md:h-[500px] border-none shadow-xl rounded-lg"})})};function Act(){var g,y,b,T;const e=nf(),t=(g=e.state)==null?void 0:g.shipmentDetail,n=(y=e.state)==null?void 0:y.originCityCoords,r=(b=e.state)==null?void 0:b.destinationCityCoords,s=(T=e.state)==null?void 0:T.trackingId,[a,c]=q.useState(""),[i,f]=q.useState(null);return A.jsxs("div",{children:[A.jsx(_h,{}),A.jsx(Bs,{}),A.jsx("div",{className:"flex-1 bg-white",children:A.jsxs("div",{className:"w-full bg-white flex flex-col",children:[A.jsx("div",{className:"w-full shadow-lg bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("h1",{className:"text-2xl sm:text-4xl md:text-5xl font-semibold text-center",children:"Shipment Tracking"})}),A.jsxs("div",{className:"flex flex-col lg:flex-row justify-center items-center gap-6 px-4 py-6 w-full",children:[A.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg p-5",children:[A.jsx("div",{className:"w-full border shadow-sm rounded-full py-2 px-4 mb-4 flex justify-center items-center",children:A.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Shipment Details"})}),A.jsxs("div",{className:"flex flex-col gap-3 text-sm sm:text-base text-gray-700",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Tracking ID:"})," ",t==null?void 0:t.trackingid]}),A.jsxs("p",{children:[A.jsx("strong",{children:"From:"})," ",t==null?void 0:t.originCity]}),A.jsxs("p",{children:[A.jsx("strong",{children:"To:"})," ",t==null?void 0:t.destinationCity]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Status:"})," ",t==null?void 0:t.shipmentStatus]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Last Updated:"})," ",a]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Estimated Arrival:"})," ",i!==null?`${i} minutes`:"Calculating ETA..."]})]})]}),A.jsx("div",{className:"w-full max-w-3xl",children:A.jsx(kQ,{originCityCoords:n,destinationCityCoords:r,trackingId:s,setLastUpdateAgo:c,setEta:f})})]})]})}),A.jsx(al,{}),A.jsx(qp,{})]})}const mct=()=>{const[e,t]=q.useState(null),[n,r]=q.useState(""),[s,a]=q.useState(!1),[c,i]=q.useState(!0),[f,g]=q.useState([]),[y,b]=q.useState([]),[T,S]=q.useState("idle"),U=V=>{t(""),r(V.target.value)},N=async V=>{try{const Z=await fetch("https://swiftlogix.cc/api/regenrate-bar-qrcode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shipments:V})});if(!Z.ok){console.log("Error in response");return}const Y=(await Z.json()).bar_qr_codeDataArray;b(Y)}catch(Z){console.log("Error in fetching bar codes",Z.message)}},W=async()=>{try{S("processing");const V=await fetch("https://swiftlogix.cc/api/reprint-label",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reprintLabel:n})});V.ok||console.log("Error in response");const Z=await V.json();S("success");const ne=Z.shipments;if(ne.length>0){const Y=ne.map(le=>({packagePrice:{service:le.shipmentType,basePrice:le.basePrice,weightCharges:le.weightCharges,distanceCharges:le.distanceCharges,totalPrice:le.totalPrice,insurance:le.insurance},senderFormData:{sendername:le.sendername,sendercontact:le.sendercontact,senderemail:le.senderemail,sendercnic:le.sendercnic},receiverFormData:{receivername:le.receivername,receivercontact:le.receivercontact,receiveremail:le.receiveremail,receivercnic:le.receivercnic,receiverarea:le.receiverarea,receiverhouseno:le.receiverhouseno,receiveraddress:le.receiveraddress},packageFormData:{originCity:le.originCity,destinationCity:le.destinationCity,weight:le.weight,pieces:le.pieces,pickupdate:le.pickupdate||"",pickuptime:le.pickuptime||"",insurance:le.insurance,pickupaddress:le.pickupaddress||"",shipmentType:le.shipmentType,deliveryMethod:le.deliveryMethod,sensitivePackage:le.sensitivePackage,payby:le.payby,paid:le.paid},paymentMethod:{paymentMethod:le.paymentMethod},scheduleTime:{scheduleTime:le.datetime},trackingId:{trackingId:le.trackingid}}));g(Y)}N(ne)}catch(V){console.log("Error in fetching shipments",V.message)}},L=async()=>{if(!n){t("Tracking ID is required*");return}if(n.length!=14){t("Enter Valid Tracking ID");return}await W(),i(!1),a(!0)},Q=()=>{g([]),r(""),i(!0),a(!1)};return A.jsxs("div",{children:[A.jsx(al,{}),A.jsx(_h,{}),A.jsx(Bs,{}),A.jsxs(go,{delay:.2,children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-center",children:"Reprint Shipment Label"})}),c&&A.jsx("div",{className:"h-[40vh] flex justify-center items-center w-full",children:A.jsxs("div",{className:"flex flex-col items-center w-full sm:w-[40vw] p-4",children:[A.jsxs("div",{className:"flex flex-col  sm:flex-row w-full gap-4",children:[A.jsx("input",{onChange:U,type:"text",value:n,name:"cnic/mobileno/email",id:"reprint-label",placeholder:"Enter Tracking ID",className:`placeholder:text-[#2632386d] relative w-full px-4 py-2 rounded-lg border-2 border-[#009688]\r
                                    bg-[#F7F7F7] focus:outline-none focus:border-[#FF7043] `}),A.jsx("input",{onClick:L,type:"submit",value:T==="processing"?"Processing...":"Reprint",className:`cursor-pointer font-semibold text-white p-2 bg-[#009688] hover:bg-[#FF7043] rounded-lg md:relative right-6 md:rounded-l-none\r
                                    transition-all ease-in-out duration-300 hover:text-[18px]`})]}),A.jsx("div",{children:e&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:e})})]})}),s&&f.length==0&&A.jsxs("p",{className:"min-h-[30vh] flex justify-center items-center",children:["No, shipments scheduled against ",A.jsx("span",{className:"text-[#FF7043] font-bold",children:n})," "]}),s&&A.jsx(kF,{onClick:Q,className:"absolute left-[10%] mt-4 cursor-pointer"}),s&&A.jsx("div",{className:"w-full flex flex-col items-center mt-10 min-h-[50vh]",children:A.jsx(go,{delay:.2,children:f.map((V,Z)=>{var ne,Y,le,pe;return A.jsxs("div",{className:"flex  gap-4 items-center justify-center w-full md:w-auto border px-4 py-2",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(hb,{barCode:y[Z]||{message:"",barcode:"",qrcode:""},senderData:V.senderFormData,receiverData:V.receiverFormData,packageData:V.packageFormData,totalPrice:V.packagePrice.totalPrice,position:Z})}),A.jsx("div",{className:"flex-shrink-0",children:A.jsx(fb,{senderData:V.senderFormData,receiverData:V.receiverFormData,packageData:V.packageFormData,packagePrice:V.packagePrice,scheduleTime:((ne=V.scheduleTime)==null?void 0:ne.scheduleTime)||"",trackingId:((Y=V.trackingId)==null?void 0:Y.trackingId)||"",qrcode:((le=y[Z])==null?void 0:le.qrcode)||"",paymentMethod:((pe=V.paymentMethod)==null?void 0:pe.paymentMethod)||"",position:Z})})]},Z)})})})]}),A.jsx(qp,{})]})},gct=({oldemail:e,email:t,userId:n,setOTPCard:r,setOTPVerified:s,saveeditDetails:a})=>{const[c,i]=q.useState(["","","",""]),[f,g]=q.useState(!1),[y,b]=q.useState(""),[T,S]=q.useState(120),[U,N]=q.useState(!0),[W,L]=q.useState(!0);q.useEffect(()=>{let Y;return T>0&&(Y=setInterval(()=>{S(le=>le-1)},1e3)),T===0&&N(!1),()=>clearInterval(Y)},[T]);const Q=(Y,le)=>{const pe=Y.target.value;if(pe.match(/[0-9]/)&&pe.length===1){const _e=[...c];_e[le]=pe,i(_e),le===3&&g(!0),le<3&&document.getElementById(`otp-input-${le+1}`).focus()}else if(pe===""){const _e=[...c];_e[le]="",i(_e),g(!1),le>0&&document.getElementById(`otp-input-${le-1}`).focus()}},V=async Y=>{Y.preventDefault(),b("");const pe={otp:c.join(""),userId:n};try{const _e=await fetch("https://swiftlogix.cc/api/verifyotp",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(pe)});_e.ok||console.log("response error");const ye=await _e.json();ye.success?(r(!1),s(!0),a()):b(ye.message)}catch(_e){console.log(_e)}},Z=async()=>{try{L(!1);const Y=await fetch("https://swiftlogix.cc/api/resendotp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,userId:n})});if(!Y.ok){console.log("response error");return}const le=await Y.json();le.success?(L(!0),b(le.message),i(["","","",""]),g(!1),b(""),N(!0),S(120)):(L(!0),b(le.message))}catch(Y){console.log(Y)}},ne=Y=>{const le=Math.floor(Y/60),pe=Y%60;return`${le}:${pe<10?"0":""}${pe}`};return A.jsx("div",{className:" flex items-center justify-center bg-gray-100",children:A.jsxs("div",{className:"p-6 bg-white rounded-3xl shadow-md w-[50%] absolute top-[35%] right-[18%]",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{src:uk,alt:"mailicon"})}),A.jsx("h1",{className:"text-3xl font-semibold text-center text-gray-700 mt-4 mb-4",children:"Verify Email"}),y&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:y}),A.jsxs("p",{className:"font-semibold text-center text-gray-700 mt-4 mb-6",children:["Enter the OTP sent to ",A.jsx("b",{children:e===t?t:e})]}),A.jsxs("form",{onSubmit:V,children:[A.jsx("div",{className:"flex justify-center space-x-4 mb-4",children:c.map((Y,le)=>A.jsx("input",{id:`otp-input-${le}`,type:"text",value:Y,onChange:pe=>Q(pe,le),maxLength:"1",className:"w-12 h-12 text-xl text-center border-2 border-gray-300 rounded focus:outline-[#FF7043] focus:border-blue-500",autoFocus:le===0},le))}),A.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4 mb-4",children:[T==0&&A.jsx("button",{type:"button",className:"py-2 px-3 border-2 rounded-2xl cursor-pointer hover:bg-slate-100",disabled:!W,onClick:Z,children:W?"Resend":"Resending..."}),T>0&&A.jsx("p",{children:ne(T)})]}),f&&A.jsx("button",{type:"submit",className:"w-full py-2 bg-[#009688] text-white font-semibold rounded-lg hover:bg-[#FF7043] transition",children:"Verify OTP"})]})]})})},LQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAABF0lEQVR4nGNgGAWDBvzPc/T6n+/85H+B838K8eP/+U6emBbkO12nguH/IdjpGqYF2S5S//OdF1HB8M3/81zkMC0oteKF+iQA7E3ygiYA2SxUCwqcnv7Pd44Ds9N8uP4XOHf8L3D6Q9DgfKe///OdZv7P9eCDmuP7v8DpIRYLML34P9/V4H++80k8wXH+f6GTGTyIC5xXweTwWADW+PV/vlP5/9BQ5v/19Uz/C5zT/hc4fSRenqAFcHzmf56jMVi+yE32f77TBjAucpOFBocRWA0WvcRa8B89jImNI+ItKIBb9Oh/nlPM/wLnaDCbgHrSLSggDY9a8J+cICKnePiPK0FgWpDv5EkVS/KdHv0vdPbAsGAUDBgAAA1YIUQ09C08AAAAAElFTkSuQmCC",MQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAABFklEQVR4nO2aXQrCMBCEA15Dn72DKNK0eIOewJ+3NsFbKYIXU1EvMBIRREtZxU1UmA/2dbuzmaedGkP+CCwnPXi7gcvP8DlUy117buGyfrzhnd2rD+4bdQjf0hcQNh9/eNxqrS8ghm18W9mTvoB020coCnimsaXaTlGWHfMhKMsOvJ2lfwGF4R9FJBbwb/0NBQiALyBACwmAFhKghQRACwnQQgKghQRoIQHQQgK0kABoIQFaSAC0kAAtJAAett69zLlirndazBc87krwvO6ZD3zGyxusskFrj7oY/n5CUxfD9h529D0BLmHI5+xRX0AIodMJWOkLcFn/GkJHF2B3qMZddQH3Xw3ydchxIwx+CpuPNjwxcbgAG2buLFyWarsAAAAASUVORK5CYII=",yfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEAAAABACAYAAACqaXHeAAAACXBIWXMAAAsTAAALEwEAmpwYAAAC/klEQVR4nO1aPWgUURB+oiBaaZf4A2phEA2INhaBY2c2RjAWQa4QwUoCormZC5eYTrESOzttLZRINOBPZSMi2ojYWIltGmPQWBhF/WTfJmdye2fI3u3PXd4HHxzcezs735uZt483xjg4ODgkCFwpbELJ74N6FQjfg9BrCM1AeQ5Cvy3D3zNQegXlu3ZsMKdY3GjaFSj7vRC6DaVZKCMWhT9B+RZK/YdMuwCX+vdC6UFsp+vzD5SmIIU9Js+A8lkIz7fY+eURMQ/xzpg8AsJj4UrVe3n6CqEnELoM9cimR5l2onxsS8jgt99r/1N/AsJP7ZyG0eBVTJ6AMg3VdV74A5QEw4Nb1/zMkRObIXwOyu/riiBUNHkAxD8A5W81K/4LwldbUcXtLiJ0zT6zNh1GeX9rvGgCEH5Uszo/of7Jltsp8WD47BUiPGy1nTUBSkeioU/nk7PHw9FU6D+clL1VAaUbK1eEnpsEAWM2QPhFjQjXk7T5X0D43YqXKdOQSRgo8eka0d8mbbMhIluVFLaZhIELfdtrt9ikbTZE7fZkOtxuBE4AdREAlwLqagA6ughi9Pju8Cye4DE3iWOz8jTE62neeaHPmTsUn3OBD/EFUJrKgRPN8n58AaSNwr4hm/hSROYv3xo6AeICOVg9FwHqUgCuBqgrgsj5LkAL4cXIQHdIGofQj+zGpy2A8Fhkrr0Fymh86gJUCl2RuZVCV2bj00+Bge7I3OC+L7Px6deA8ehcfyK78ekLsGAL00V/h2WQn6sVtUTHpy4A55pOgLhADlbPRYC6FICrAeqKINwuoG4bROrfAQ7rGVgeRsLf7TXTUle30Mcqw0bGN5ZCLyH0rEqlx8HNjKXwHds8vUSlm0GDk2XQUxh+34cMmivDjrBh2ywpVKxS6RSUfcugo7zkHa1SvYNQ3mcZnBmCdppFNieAtj/X6bUYL0YwfYkTAdMdJMBkjAjwehbzHu1NmsVIYdeaBfjXHBEUsYat6zmmbdGfjO28g4ODg4ODg+l0/AXeUpnPszccZQAAAABJRU5ErkJggg==",vfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGQAAABkCAYAAABw4pVUAAAACXBIWXMAAAsTAAALEwEAmpwYAAAIsElEQVR4nO1daWxVRRT+aGmp1CiKQYUgoKiJrIIKsqO4hEQxIihqFeqGojRiDCKyRFwQt6D+ENFCAaMR/WM0JLgQI2KMIEoEbGQRiQi0oLIIhdIxJzmY5mRu333vzsyd+3q/5Px5eXPmzD33zsxZ5gyQIkWKFClS5C+KAXQHMBrANACLAXwFYB2ArQD2ADjEtId/W8v/WcxtRjMP4pUiSxQC6AtgKoDPAPwLQBki4rUawFwAI1IFBaMAwDAAiwD8Y1ABmehvAO8AGAqgRfrpAB0APAPgN4dKUAFEMsxhmZodzgewAMDRkA9rB4AVAF4FMBHAVQD6MJ92AEqZ2vFvffg/E7nNCuYRpi+S6U0AXdAM0BnAUgDHMzyUXQCWAJjAbUz2X84y7MogA8lYBeA85CGKAFQAOJhhwf0AwA0AWjpatwbxl3qgCbkOA5gNoBXyBDR1bG5iwL/wW1sao4ylLEN1E3Ju4o1HYtGS36wTAQPcAOAu3ub6ggL+Qr8PkLkBwHz+4hMFmnfXBAzqTwB3eL7NbAGgDMDugDGQLdMRCcG1APZpBlEP4DUApyM5aAPgdZZdjqeWjUuvcTuAYxrhyZ1xOZKLKwBs04yrDsBt8BQVAevFh4a+igIAPQFMArAQwCpW9H5+gw+yrbGet7X3AegKs1/LR5rx0ZgfgWeYHbCPNyHoBQDmAdiZowVOirsS5taWioApbBY8QUWATTEqIt9z2TjMZESGIXqLp8McbgJwRNPPZHiwZshp6i8AQyLyHcNTkTJMVbzpMGHkDeGxSsXHtqZcp1nAScDeEflO4/2+aWVIOZ80YIz21iilLo7dVyfN1pamqcER+T5sWRGStgPoYeBLOaLZEjuzU8hK/VYIcNzAmjEgYLG0TeTHGmhgTanXGI8ufHJ4UTMoerOjoBX7ilRMRJ7fcyxsbigyaRVXa+b35Qb4up6qVIC9FHVLLO0UelbDYQnFGq/tFgNGHxl8v3qgkAYA3QwYj9Kir7blup+uWTcuM8B3mAfKUEwUX4+Kfpr15AlY8N4eEp1QaNQE5nmgCMW0x5AX+g1NkMtk5BPvahbB0wzxXueBIlQjovwtGJi6dmuMUiPoqvkExxniXWA470oZoHsMja1MM8VTAkZkvC0YrzcYXOrkgQKUoJmGxkbP6CfBm7JZIqEjuwIaM70F5tDfAwUoQZT0YAq3alKMIuV9PScYbuJpxqRdozyjZQbHV8hJHI35U2JgTqAH/7tgNh5mcaMHClCCyOVvEuWaDMkCE28v5dy2Nizs9R4oQAmi/GKTKNXko+WUTlQlmNDibhoDPFCAEkR2kWlURTVAizXZfDaSxLp5oAAlaIqFcepmm6xyuwYJBjsNL+YncboHClAWd5EnUaDJJabZITRmWZ5XG6PWAyWoRhTVwRiEpaKfrGL8q0RjSvm0he88UIJiqrN47G2C6OuLsA1LNOc2bIYjpSdAxUjfWByn9EocCeuW7yUakn/fJh7wQBHKUYRPnhQLFc8fKxp9bFnIPh4oQjGNtDzWT0V/dDo4I2aIRi9ZFvJSDxShmCi4ZBOv5LKwLxONKEfWJlZ4oAjFRG+wy+k5lJtmtWhER4ZtoU0TB3pUDFTPMtnCcNHf12EabbAQQUuS+72fxfH2FH1RvCTrnQBt12yhuSmkSy47WJkieqZFAdt5oAAliLLubeEs0VdNmEYyQmi7YIsPVRwUE8liE61Ef2SAe6cQmdGiYiSSxSaKRX/0rDNiv8MpC5wxrzyhgZbH2lb0R47VjNjhcFE/iZUeKGOlg3F2zmWK3OjIHS0Xu80xKmMzy2AbPUS/P4dptMahYdgYp3IlONfKWMt9u4A0DMkIz9p1ci/cYXIMCol6tiWK6yRUeulM0YgO6LhCB8euFOqrvcPxvSz6fypMo3GO3e8Syx0q5H3HY/tE9E+hjozo6zhApfP3NDj6Omz66XTYLmSg0EMoa1JmpLuufLPEgUKohKxLdNKcGSnONcmBUutdoi2XcbKljF0ODF6J8UIGKoGbc+2SSrjHSEvHpOs5hdU1ZPYiRWazKsvnIlEuEyZZUMhDMYyDnt0fQo6syo+UaEpGxFFvsNCCQuIoKShTSffl4rStdJBs3VwUskjI8FYuTK7RJAifArcozAOFlHBJ88Yy5FRMoFBzktT0gZ1MKLKgENcVRcs1O7ycX4q5lo+0ZcIZFhRCPF2hQHOk7dkoDM/WlB4KlW1nsGCBMkwujdyxmpBt5Jh9pcZd7arm7piEnP/QgZ7RD6JvKt4ZGZdofEt3wj56cVaGaYXsZX+Zbdyt8Z1dnITSGhJFXH7PZoUHqtvyoMUdl9XSGuB597DogBKHTW8PyzUhZJu0kQNwprfz80U/B23EXWZpandQxWcTU+JcnkpUTFTDgbio9RfBNYJlaVuTJWr/R2tNUtvWHAuYteVwbdAtBCpGonzbx3Is+ddGE/PYZtOgHqzxwC7PYk8+gmMdvlUAUhqqZxf5mCz8Tu9pFnLrPsAXskwUoDj58xpvZ5JoL6+ZnbMsgkm1YqyjmEs0ybdplCbTO5uLv1QC6Bg7Ci8UY71ZM3OsdemmuSigkPIAVtiMgNro+UJ1AJ7mneEgzRRcw5cIOMVQTWJ2bcz1d5Vjqta8mEcNVPg2Zo2mBKtFFkKBkr1SRcCevZELHk+VgqySFlxgSjP9UhoAPApPcX/ApWD5SnXsf/MaA5u4/y+fqCZJN39S2uSPHjw0ZYnWJfHS4hL24sZxSYuyRCfYtZ7oi4r7awL9SaQtBi478watOdtCBrmSQIfYTeI6J80J2rPD0cTdhMrB9LTE8Qmr2NCdY8w+eoKP8tkRimQ2O1Ctk6kRrlVVBmk3b0IiFcvPFxTxmY2FllJ/mgo8LeDbPxN3ab0rFPL5lDlcSlVW2I5CxOtz5j08pkz4xKOQE9vK+Mg2ZVJ+ybGIWqGwA/xbNf+nktuUMY9UASlSpEiRAvmK/wDIuxVX7KydIQAAAABJRU5ErkJggg==",NQ="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAF90lEQVR4nO2dW4wVRRCGW1AxEbzfNYiJEn2SRINKDOOpnsX1AQiaVaMPajQolz3VswgYDR6ib15AwJjog8YX1BdBEyMx8RYxiqLRB00wJhgBhXjbRVCUhd/07BGiO7N7zp6e6Zme/pJKTvYyNV3VU9NdXd1HCI/H4/F4PB6Px+PxeDwFA3U6GxHdCpZPQdEmMG2Dkr+C6a9Yhj5vi3+n5GqwvEX/j+37LjWIZp2GOi0Gyy1QEmOQw1DyYyhapK9luz2lAYvC88C0Ckz7xmj44RJfi56Euv5c2+0rLGgEx0IRg+VeY4YfJrQfLFei0XO87fYWCtTDS8D0eXaG//8TIT9DFFxsu92FAErOhaKB3Ix/9GkYgKLZospAyTvA8mD+xj/ihEEoOV9UESi6pzlSgWU5jDrdLSoYdgYLYPx/3wkHKxOO9MvPTsyXozlhL/rkVOEymH/FcbmOdlTbslUPh4WrQNGyAhgZo0gkHJ7hmpvdqgxD0f3BOcI14vSCbeOqVoUeE84l1srQ+9UR+R0Lrj1VuEKc1bRvVLQXisIFwhWg6JPyOYA+Ei6AJV1nFWTGizHMkMu/qBOvZBk1DB2AojXg667Ckq4TY9GfmdYO/c6krvBmUXaGlhFNhQW5E1Ht8nRdXdPivzEXhlaJsgOmN431/Cjd+Ef1dU0z9iSwfEOUHSj5rSEHrGlD5zpDOr8RZQeKfjZijIimt6wzCq829AT8JMpOs2ykc2MsDCa2rHNhMNFU2BNlByz/yN0Bvd0nGXLAflF2oGhXaUOQkjtE2QHTe2biMa3N/SXM8h1RdsxlQemAHmKOrk/PBQy9d1g+IdxY/zU4EeN0JxifiLmwTjw0IjGYIuC4d6+L47y+thaW18Q/M9Xzh5z9p05zCBcAy9fN9UqZjzBtFK6gk1rlc0B4o3AFNIITwLTHulFVy7Ibvd0ThEuA6eECGBatCT0oXKM068JM+7BIni5cBCyftm5gNaqsFq6CxV0X2a2GlqP0fnkQS2oXCpcBy+etG1qlCT0nXKewFXKs76kie8ig6NEChp+Voio00wc/Fqj378HSGZNElYCi+wrkgHtF1UBPz/h4t2IR9gT09IwXVQQqvNLqViWmQ7qoS1QZxBVt1nq/u5OuVsHSGZPMLqK03Pt/wPLwZNvtLwSoy5tyd0BE82y3u1CA6ZUcHbDednsLB/qCM3KZG+jQ42q2s1OgaLYPPR0bsTYLSm6Ii3JHynxybU6KE17M0AkvJOrk2pxRnhq9mvca6tQliooeUUDJt9oIBXv07plh1+HgFLD8LgPjb08a9cQ7eNpaLqVNuvRRFIlmLeaXYzDKhuTr1WYYXjf4W5exJOpi2tj+e0R+UajcEZieHbNxmO5MueZycw6gZYk6otpdHVzzGVEEUA8nd9ZbaQAcTBl23UZjXPMUxM6Mr3foCHHMsOtzMKWjQ0N0m+vhZGEbXT9poId+kJQQQ2/3mR1WV+9OOnag6dx3O3eufFzYTyNQf8oNrtf1QB3rUDWKk2btO3UQEdU61t/bPSFuS/LT1W/1XQAmlXJjh0weigemR2yucMXFBKlZW2JTetrP56dtwGP5qlFdjcY4sHy7DQe8bzrH35zbJOnabmU9QddOpve+2kzj+iI6X+9YacH4O/TfGtfPtZmFqiMF0+aUG9qamc4+ORWKvh7B+F/pM0gz069Xz5JD7uasdCbfSETTU40Qhbdlqru3e4I+yURvHxoaIdGu+LP+WcYn4kLJ203sYTNwI/RySuzfqc+FE26fefd9SttfyucmeoML4ql9GzNOl4AKH7A6MRuhzNytU6ZS0G0cobJvhcia1BeRkutERUBalTfLLdkr199WkaS8b9aloiKAw8usnS0Rh5rk0U8gKgKiMEh5Bw5kr3zsXylSBfkwDwesLEBDUVBZkdder7QMaHWFqT+3USCYbijU8fPKuvEPpRUZZOeEiOaB6RfrjVe2JT4RbG6uxv/PF6wxPdScG/xm3xgyL9FfHPep3k/sxNmiHo/H4/F4PB6Px+PxeDwekQf/AKpynsBDCWbVAAAAAElFTkSuQmCC",pF="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAGAAAABgCAYAAADimHc4AAAACXBIWXMAAAsTAAALEwEAmpwYAAAEoUlEQVR4nO2cTY8VRRSGO1FXENEF8XMhmmDix8qgIMQ795y+cWLYGMMPUNGEGW5X9QwJCS78A/KhMVFx58K4NRoGFF0Y/4KM7iQxqMgCHCMi6DHVFwbG9OnbVdXm4q33SSqZxdS51e9bfeqjuyvLAAAAAAAAAAAAAAAAAAAAAABXkZL6YumoGFoWQ7+JZUFhqbQYafKeGJ7pvMPIsP+QGP4CYnO7Dmfoc9k72NSV+E+LpXMQn/3udsO/iOFtceKb3gNi6SzE58BUS+dc9gg3wNJJiM9x45zhLwPF7xPE524mGSEDczXbqQ92UQxZ2de7O8jZKUTss/eI5bLSpt6EdwOC8rfKCG//k6uYAsTwgjIWnPIPZnmlNhh6vooUdJeSNX71D6bkM+9AiSFd6QYDwoABEwYGKMiwd79YmhdDS6t7Wdf2cCwfk5Ln3P9kkcCAfyHD2Y1i6U0xfLnFHs5fYvgDN63MAoEBNyAF7xRLF/wXTnReiv5zWQAw4CpVSrF0JXwFS1fE5HsyT2BAVok/Gyf+DSmp4J0wwAOZz+8NSjtN6chj8Zn8HSDaHtZoRfq7WDooBW+RxcG6qpT0pBg61LCP47WXk7QB4qaa2mzH8PcypEfUusXgMbF0Wql7WUq6r1UbkjbA0rza8xvEX2OCdie0HJATN4CPKTOagx4xDitjwact6ydsgKHvattd8JbWMdyYUG/Acqv6SRtglS30xcG61jHmeuuVa1/53xjQMJsYW7II3L57bdy53vrWMYaztyt3wPmYa0/EAFqOTkFm5qmYp1ppG2DpE6X3Hmodw/ARpW0fx1x7GgaY/JV6A9zUsv/o2Ppl/ri+IKPdMdeehgHD2Y1i6JIi4Gk3z28UX12I0SUXO+bakzDAUW0raPFHvftwlefdbMeVMt86Sjv0R0O9N7KWwIA9O+7s9HVKQz+L6d0BAzyQIt/R2KPblz/dK/lev516CrqGGH4/3gA6mnmSvAGya9ctYvjtDlPQWy4mDGiBvN67VSx91Jn418uHLnarNqScgsS9/dC9+F47qjeFAZNACn6hRTpZEsMvyQJvXn0i5v4u6GWxdHxs/ZKeH9uOFA0Qt4Fm6ExD7z3lPrUaG8fObFf3kyoD+Qf3W80xUjTA0GsN4p8cJ9qaWPvzDc0fJNKBxvqpGSCvPnFbtVjSev7+fIN3zMoE9U74qWlATs+A0r0DpPXWme3hcfOtYvnv2rgFDdR6yRlglZmPoaXo2IZPKGPBEb09qRlg6Ovatpb9F6NjW9qtGPCVXic5A/jH2rYu8Ob42P2HlbvrjFonOQOssunm8RzY+wG94Yt6exIz4GYDBkwYGDBhYMCEgQETBgZMjQHaa344qmDM1zm1e1IXOjysgxe8gyWC2P6+7g7rcAfQKYuQ0akg4d/STuVxNSUtqotCw+8EnpCo7TKiiI8Gpv9MoLP8GcTmyA5Hx4PErwzAoX0SKb47bfLBYANGJvC26ghGpB3xFP+se6gTJf6qCXsHm5CO2CPn8wmXPToRf40RZd5zHy1Xz1q177HSLCti+Rs32wkecAEAAAAAAAAAAAAAAAAAAADIppF/AH214A4qrnqSAAAAAElFTkSuQmCC";var AF={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */AF.exports;(function(e,t){(function(){var n,r="4.17.21",s=200,a="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",c="Expected a function",i="Invalid `variable` option passed into `_.template`",f="__lodash_hash_undefined__",g=500,y="__lodash_placeholder__",b=1,T=2,S=4,U=1,N=2,W=1,L=2,Q=4,V=8,Z=16,ne=32,Y=64,le=128,pe=256,_e=512,ye=30,he="...",be=800,Te=16,Ee=1,Ne=2,Ge=3,Je=1/0,Ue=9007199254740991,Qe=17976931348623157e292,xe=NaN,at=4294967295,we=at-1,me=at>>>1,Ze=[["ary",le],["bind",W],["bindKey",L],["curry",V],["curryRight",Z],["flip",_e],["partial",ne],["partialRight",Y],["rearg",pe]],ot="[object Arguments]",vt="[object Array]",Qt="[object AsyncFunction]",Ot="[object Boolean]",kt="[object Date]",Me="[object DOMException]",Ht="[object Error]",Zt="[object Function]",pn="[object GeneratorFunction]",Dt="[object Map]",hn="[object Number]",Oe="[object Null]",nn="[object Object]",Vt="[object Promise]",$t="[object Proxy]",xn="[object RegExp]",Xt="[object Set]",gn="[object String]",rr="[object Symbol]",Gt="[object Undefined]",Rn="[object WeakMap]",wt="[object WeakSet]",qt="[object ArrayBuffer]",fn="[object DataView]",Un="[object Float32Array]",Yt="[object Float64Array]",cn="[object Int8Array]",Ln="[object Int16Array]",Hn="[object Int32Array]",_r="[object Uint8Array]",fr="[object Uint8ClampedArray]",xr="[object Uint16Array]",bi="[object Uint32Array]",Vn=/\b__p \+= '';/g,Es=/\b(__p \+=) '' \+/g,ki=/(__e\(.*?\)|\b__t\)) \+\n'';/g,hs=/&(?:amp|lt|gt|quot|#39);/g,mi=/[&<>"']/g,br=RegExp(hs.source),gr=RegExp(mi.source),Ir=/<%-([\s\S]+?)%>/g,Kr=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,je=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,De=/^\w*$/,ve=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,Re=/[\\^$.*+?()[\]{}|]/g,ze=RegExp(Re.source),tt=/^\s+/,gt=/\s/,pt=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,Lt=/\{\n\/\* \[wrapped with (.+)\] \*/,jt=/,? & /,Nt=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,rn=/[()=,{}\[\]\/\s]/,_n=/\\(\\)?/g,Pn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,sr=/\w*$/,Cr=/^[-+]0x[0-9a-f]+$/i,Ar=/^0b[01]+$/i,pr=/^\[object .+?Constructor\]$/,Wr=/^0o[0-7]+$/i,vi=/^(?:0|[1-9]\d*)$/,ti=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Ai=/($^)/,Ci=/['\n\r\u2028\u2029\\]/g,Vs="\\ud800-\\udfff",Zo="\\u0300-\\u036f",Rs="\\ufe20-\\ufe2f",Eo="\\u20d0-\\u20ff",Xl=Zo+Rs+Eo,Li="\\u2700-\\u27bf",ho="a-z\\xdf-\\xf6\\xf8-\\xff",xc="\\xac\\xb1\\xd7\\xf7",Yl="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",so="\\u2000-\\u206f",Jl=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Os="A-Z\\xc0-\\xd6\\xd8-\\xde",Dc="\\ufe0e\\ufe0f",of=xc+Yl+so+Jl,af="['’]",wh="["+Vs+"]",bh="["+of+"]",vl="["+Xl+"]",Rd="\\d+",No="["+Li+"]",kl="["+ho+"]",Ll="[^"+Vs+of+Rd+Li+ho+Os+"]",ec="\\ud83c[\\udffb-\\udfff]",iu="(?:"+vl+"|"+ec+")",lf="[^"+Vs+"]",qu="(?:\\ud83c[\\udde6-\\uddff]){2}",su="[\\ud800-\\udbff][\\udc00-\\udfff]",xl="["+Os+"]",cf="\\u200d",ip="(?:"+kl+"|"+Ll+")",Ch="(?:"+xl+"|"+Ll+")",Aa="(?:"+af+"(?:d|ll|m|re|s|t|ve))?",Zu="(?:"+af+"(?:D|LL|M|RE|S|T|VE))?",Xu=iu+"?",ji="["+Dc+"]?",Ml="(?:"+cf+"(?:"+[lf,qu,su].join("|")+")"+ji+Xu+")*",Ur="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",sp="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Sr=ji+Xu+Ml,op="(?:"+[No,qu,su].join("|")+")"+Sr,_c="(?:"+[lf+vl+"?",vl,qu,su,wh].join("|")+")",ou=RegExp(af,"g"),Od=RegExp(vl,"g"),cr=RegExp(ec+"(?="+ec+")|"+_c+Sr,"g"),Pi=RegExp([xl+"?"+kl+"+"+Aa+"(?="+[bh,xl,"$"].join("|")+")",Ch+"+"+Zu+"(?="+[bh,xl+ip,"$"].join("|")+")",xl+"?"+ip+"+"+Aa,xl+"+"+Zu,sp,Ur,Rd,op].join("|"),"g"),Ii=RegExp("["+cf+Vs+Xl+Dc+"]"),Nl=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Dd=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Si=-1,$s={};$s[Un]=$s[Yt]=$s[cn]=$s[Ln]=$s[Hn]=$s[_r]=$s[fr]=$s[xr]=$s[bi]=!0,$s[ot]=$s[vt]=$s[qt]=$s[Ot]=$s[fn]=$s[kt]=$s[Ht]=$s[Zt]=$s[Dt]=$s[hn]=$s[nn]=$s[xn]=$s[Xt]=$s[gn]=$s[Rn]=!1;var us={};us[ot]=us[vt]=us[qt]=us[fn]=us[Ot]=us[kt]=us[Un]=us[Yt]=us[cn]=us[Ln]=us[Hn]=us[Dt]=us[hn]=us[nn]=us[xn]=us[Xt]=us[gn]=us[rr]=us[_r]=us[fr]=us[xr]=us[bi]=!0,us[Ht]=us[Zt]=us[Rn]=!1;var wc={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},Da={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},ds={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},ap={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Yu=parseFloat,uf=parseInt,Ju=typeof Qm=="object"&&Qm&&Qm.Object===Object&&Qm,df=typeof self=="object"&&self&&self.Object===Object&&self,Xo=Ju||df||Function("return this")(),yo=t&&!t.nodeType&&t,ma=yo&&!0&&e&&!e.nodeType&&e,Yo=ma&&ma.exports===yo,Rl=Yo&&Ju.process,vo=function(){try{var yn=ma&&ma.require&&ma.require("util").types;return yn||Rl&&Rl.binding&&Rl.binding("util")}catch{}}(),xs=vo&&vo.isArrayBuffer,ll=vo&&vo.isDate,tc=vo&&vo.isMap,oo=vo&&vo.isRegExp,Sh=vo&&vo.isSet,_l=vo&&vo.isTypedArray;function Qo(yn,$n,jn){switch(jn.length){case 0:return yn.call($n);case 1:return yn.call($n,jn[0]);case 2:return yn.call($n,jn[0],jn[1]);case 3:return yn.call($n,jn[0],jn[1],jn[2])}return yn.apply($n,jn)}function Ud(yn,$n,jn,Hr){for(var ci=-1,Bi=yn==null?0:yn.length;++ci<Bi;){var _o=yn[ci];$n(Hr,_o,jn(_o),yn)}return Hr}function ta(yn,$n){for(var jn=-1,Hr=yn==null?0:yn.length;++jn<Hr&&$n(yn[jn],jn,yn)!==!1;);return yn}function Yp(yn,$n){for(var jn=yn==null?0:yn.length;jn--&&$n(yn[jn],jn,yn)!==!1;);return yn}function bc(yn,$n){for(var jn=-1,Hr=yn==null?0:yn.length;++jn<Hr;)if(!$n(yn[jn],jn,yn))return!1;return!0}function au(yn,$n){for(var jn=-1,Hr=yn==null?0:yn.length,ci=0,Bi=[];++jn<Hr;){var _o=yn[jn];$n(_o,jn,yn)&&(Bi[ci++]=_o)}return Bi}function zd(yn,$n){var jn=yn==null?0:yn.length;return!!jn&&dr(yn,$n,0)>-1}function ga(yn,$n,jn){for(var Hr=-1,ci=yn==null?0:yn.length;++Hr<ci;)if(jn($n,yn[Hr]))return!0;return!1}function Ds(yn,$n){for(var jn=-1,Hr=yn==null?0:yn.length,ci=Array(Hr);++jn<Hr;)ci[jn]=$n(yn[jn],jn,yn);return ci}function nc(yn,$n){for(var jn=-1,Hr=$n.length,ci=yn.length;++jn<Hr;)yn[ci+jn]=$n[jn];return yn}function wu(yn,$n,jn,Hr){var ci=-1,Bi=yn==null?0:yn.length;for(Hr&&Bi&&(jn=yn[++ci]);++ci<Bi;)jn=$n(jn,yn[ci],ci,yn);return jn}function Qd(yn,$n,jn,Hr){var ci=yn==null?0:yn.length;for(Hr&&ci&&(jn=yn[--ci]);ci--;)jn=$n(jn,yn[ci],ci,yn);return jn}function ce(yn,$n){for(var jn=-1,Hr=yn==null?0:yn.length;++jn<Hr;)if($n(yn[jn],jn,yn))return!0;return!1}var Ke=Vi("length");function Ft(yn){return yn.split("")}function sn(yn){return yn.match(Nt)||[]}function Sn(yn,$n,jn){var Hr;return jn(yn,function(ci,Bi,_o){if($n(ci,Bi,_o))return Hr=Bi,!1}),Hr}function On(yn,$n,jn,Hr){for(var ci=yn.length,Bi=jn+(Hr?1:-1);Hr?Bi--:++Bi<ci;)if($n(yn[Bi],Bi,yn))return Bi;return-1}function dr(yn,$n,jn){return $n===$n?wl(yn,$n,jn):On(yn,Jr,jn)}function zr(yn,$n,jn,Hr){for(var ci=jn-1,Bi=yn.length;++ci<Bi;)if(Hr(yn[ci],$n))return ci;return-1}function Jr(yn){return yn!==yn}function Yi(yn,$n){var jn=yn==null?0:yn.length;return jn?Mr(yn,$n)/jn:xe}function Vi(yn){return function($n){return $n==null?n:$n[yn]}}function _s(yn){return function($n){return yn==null?n:yn[$n]}}function Ho(yn,$n,jn,Hr,ci){return ci(yn,function(Bi,_o,Ys){jn=Hr?(Hr=!1,Bi):$n(jn,Bi,_o,Ys)}),jn}function To(yn,$n){var jn=yn.length;for(yn.sort($n);jn--;)yn[jn]=yn[jn].value;return yn}function Mr(yn,$n){for(var jn,Hr=-1,ci=yn.length;++Hr<ci;){var Bi=$n(yn[Hr]);Bi!==n&&(jn=jn===n?Bi:jn+Bi)}return jn}function mr(yn,$n){for(var jn=-1,Hr=Array(yn);++jn<yn;)Hr[jn]=$n(jn);return Hr}function ya(yn,$n){return Ds($n,function(jn){return[jn,yn[jn]]})}function Rr(yn){return yn&&yn.slice(0,Gd(yn)+1).replace(tt,"")}function xo(yn){return function($n){return yn($n)}}function Ea(yn,$n){return Ds($n,function(jn){return yn[jn]})}function Lr(yn,$n){return yn.has($n)}function Bh(yn,$n){for(var jn=-1,Hr=yn.length;++jn<Hr&&dr($n,yn[jn],0)>-1;);return jn}function Hd(yn,$n){for(var jn=yn.length;jn--&&dr($n,yn[jn],0)>-1;);return jn}function bu(yn,$n){for(var jn=yn.length,Hr=0;jn--;)yn[jn]===$n&&++Hr;return Hr}var ed=_s(wc),Vd=_s(Da);function na(yn){return"\\"+ap[yn]}function ao(yn,$n){return yn==null?n:yn[$n]}function Cc(yn){return Ii.test(yn)}function Wn(yn){return Nl.test(yn)}function $d(yn){for(var $n,jn=[];!($n=yn.next()).done;)jn.push($n.value);return jn}function rc(yn){var $n=-1,jn=Array(yn.size);return yn.forEach(function(Hr,ci){jn[++$n]=[ci,Hr]}),jn}function Gs(yn,$n){return function(jn){return yn($n(jn))}}function Cu(yn,$n){for(var jn=-1,Hr=yn.length,ci=0,Bi=[];++jn<Hr;){var _o=yn[jn];(_o===$n||_o===y)&&(yn[jn]=y,Bi[ci++]=jn)}return Bi}function Su(yn){var $n=-1,jn=Array(yn.size);return yn.forEach(function(Hr){jn[++$n]=Hr}),jn}function lu(yn){var $n=-1,jn=Array(yn.size);return yn.forEach(function(Hr){jn[++$n]=[Hr,Hr]}),jn}function wl(yn,$n,jn){for(var Hr=jn-1,ci=yn.length;++Hr<ci;)if(yn[Hr]===$n)return Hr;return-1}function Uc(yn,$n,jn){for(var Hr=jn+1;Hr--;)if(yn[Hr]===$n)return Hr;return Hr}function Sc(yn){return Cc(yn)?Ol(yn):Ke(yn)}function Ua(yn){return Cc(yn)?Dl(yn):Ft(yn)}function Gd(yn){for(var $n=yn.length;$n--&&gt.test(yn.charAt($n)););return $n}var hf=_s(ds);function Ol(yn){for(var $n=cr.lastIndex=0;cr.test(yn);)++$n;return $n}function Dl(yn){return yn.match(cr)||[]}function Kd(yn){return yn.match(Pi)||[]}var td=function yn($n){$n=$n==null?Xo:aa.defaults(Xo.Object(),$n,aa.pick(Xo,Dd));var jn=$n.Array,Hr=$n.Date,ci=$n.Error,Bi=$n.Function,_o=$n.Math,Ys=$n.Object,Wd=$n.RegExp,nd=$n.String,la=$n.TypeError,Bc=jn.prototype,Ec=Bi.prototype,Tc=Ys.prototype,cu=$n["__core-js_shared__"],bl=Ec.toString,fs=Tc.hasOwnProperty,cl=0,za=function(){var I=/[^.]+$/.exec(cu&&cu.keys&&cu.keys.IE_PROTO||"");return I?"Symbol(src)_1."+I:""}(),As=Tc.toString,lo=bl.call(Ys),Jo=Xo._,va=Wd("^"+bl.call(fs).replace(Re,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Qa=Yo?$n.Buffer:n,oi=$n.Symbol,zc=$n.Uint8Array,lp=Qa?Qa.allocUnsafe:n,ff=Gs(Ys.getPrototypeOf,Ys),pf=Ys.create,Ha=Tc.propertyIsEnumerable,Ri=Bc.splice,Jp=oi?oi.isConcatSpreadable:n,Eh=oi?oi.iterator:n,Th=oi?oi.toStringTag:n,qd=function(){try{var I=Vl(Ys,"defineProperty");return I({},"",{}),I}catch{}}(),cp=$n.clearTimeout!==Xo.clearTimeout&&$n.clearTimeout,eA=Hr&&Hr.now!==Xo.Date.now&&Hr.now,lm=$n.setTimeout!==Xo.setTimeout&&$n.setTimeout,Af=_o.ceil,mf=_o.floor,up=Ys.getOwnPropertySymbols,gf=Qa?Qa.isBuffer:n,dp=$n.isFinite,x0=Bc.join,ic=Gs(Ys.keys,Ys),xa=_o.max,Va=_o.min,cm=Hr.now,mg=$n.parseInt,um=_o.random,hp=Bc.reverse,yf=Vl($n,"DataView"),Bu=Vl($n,"Map"),fp=Vl($n,"Promise"),vf=Vl($n,"Set"),xf=Vl($n,"WeakMap"),rd=Vl(Ys,"create"),dm=xf&&new xf,pp={},cv=ft(yf),Ih=ft(Bu),Eu=ft(fp),Tu=ft(vf),gg=ft(xf),jh=oi?oi.prototype:n,Qc=jh?jh.valueOf:n,ul=jh?jh.toString:n;function ct(I){if(Ya(I)&&!ts(I)&&!(I instanceof Ji)){if(I instanceof Ta)return I;if(fs.call(I,"__wrapped__"))return ht(I)}return new Ta(I)}var Fh=function(){function I(){}return function(D){if(!ka(D))return{};if(pf)return pf(D);I.prototype=D;var re=new I;return I.prototype=n,re}}();function _f(){}function Ta(I,D){this.__wrapped__=I,this.__actions__=[],this.__chain__=!!D,this.__index__=0,this.__values__=n}ct.templateSettings={escape:Ir,evaluate:Kr,interpolate:Mt,variable:"",imports:{_:ct}},ct.prototype=_f.prototype,ct.prototype.constructor=ct,Ta.prototype=Fh(_f.prototype),Ta.prototype.constructor=Ta;function Ji(I){this.__wrapped__=I,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=at,this.__views__=[]}function hm(){var I=new Ji(this.__wrapped__);return I.__actions__=Kc(this.__actions__),I.__dir__=this.__dir__,I.__filtered__=this.__filtered__,I.__iteratees__=Kc(this.__iteratees__),I.__takeCount__=this.__takeCount__,I.__views__=Kc(this.__views__),I}function Ph(){if(this.__filtered__){var I=new Ji(this);I.__dir__=-1,I.__filtered__=!0}else I=this.clone(),I.__dir__*=-1;return I}function kh(){var I=this.__wrapped__.value(),D=this.__dir__,re=ts(I),Ce=D<0,qe=re?I.length:0,mt=pv(0,qe,this.__views__),Kt=mt.start,ln=mt.end,Cn=ln-Kt,or=Ce?ln:Kt-1,ar=this.__iteratees__,yr=ar.length,Dr=0,hi=Va(Cn,this.__takeCount__);if(!re||!Ce&&qe==Cn&&hi==Cn)return Tf(I,this.__actions__);var Ki=[];e:for(;Cn--&&Dr<hi;){or+=D;for(var ys=-1,Qi=I[or];++ys<yr;){var Hs=ar[ys],Ws=Hs.iteratee,ah=Hs.type,pu=Ws(Qi);if(ah==Ne)Qi=pu;else if(!pu){if(ah==Ee)continue e;break e}}Ki[Dr++]=Qi}return Ki}Ji.prototype=Fh(_f.prototype),Ji.prototype.constructor=Ji;function sc(I){var D=-1,re=I==null?0:I.length;for(this.clear();++D<re;){var Ce=I[D];this.set(Ce[0],Ce[1])}}function Ap(){this.__data__=rd?rd(null):{},this.size=0}function fm(I){var D=this.has(I)&&delete this.__data__[I];return this.size-=D?1:0,D}function tA(I){var D=this.__data__;if(rd){var re=D[I];return re===f?n:re}return fs.call(D,I)?D[I]:n}function pm(I){var D=this.__data__;return rd?D[I]!==n:fs.call(D,I)}function _0(I,D){var re=this.__data__;return this.size+=this.has(I)?0:1,re[I]=rd&&D===n?f:D,this}sc.prototype.clear=Ap,sc.prototype.delete=fm,sc.prototype.get=tA,sc.prototype.has=pm,sc.prototype.set=_0;function id(I){var D=-1,re=I==null?0:I.length;for(this.clear();++D<re;){var Ce=I[D];this.set(Ce[0],Ce[1])}}function nA(){this.__data__=[],this.size=0}function w0(I){var D=this.__data__,re=un(D,I);if(re<0)return!1;var Ce=D.length-1;return re==Ce?D.pop():Ri.call(D,re,1),--this.size,!0}function b0(I){var D=this.__data__,re=un(D,I);return re<0?n:D[re][1]}function rA(I){return un(this.__data__,I)>-1}function uv(I,D){var re=this.__data__,Ce=un(re,I);return Ce<0?(++this.size,re.push([I,D])):re[Ce][1]=D,this}id.prototype.clear=nA,id.prototype.delete=w0,id.prototype.get=b0,id.prototype.has=rA,id.prototype.set=uv;function Hc(I){var D=-1,re=I==null?0:I.length;for(this.clear();++D<re;){var Ce=I[D];this.set(Ce[0],Ce[1])}}function mp(){this.size=0,this.__data__={hash:new sc,map:new(Bu||id),string:new sc}}function iA(I){var D=Oh(this,I).delete(I);return this.size-=D?1:0,D}function Am(I){return Oh(this,I).get(I)}function wf(I){return Oh(this,I).has(I)}function G(I,D){var re=Oh(this,I),Ce=re.size;return re.set(I,D),this.size+=re.size==Ce?0:1,this}Hc.prototype.clear=mp,Hc.prototype.delete=iA,Hc.prototype.get=Am,Hc.prototype.has=wf,Hc.prototype.set=G;function ee(I){var D=-1,re=I==null?0:I.length;for(this.__data__=new Hc;++D<re;)this.add(I[D])}function Ae(I){return this.__data__.set(I,f),this}function Fe(I){return this.__data__.has(I)}ee.prototype.add=ee.prototype.push=Ae,ee.prototype.has=Fe;function Ve(I){var D=this.__data__=new id(I);this.size=D.size}function it(){this.__data__=new id,this.size=0}function st(I){var D=this.__data__,re=D.delete(I);return this.size=D.size,re}function lt(I){return this.__data__.get(I)}function He(I){return this.__data__.has(I)}function St(I,D){var re=this.__data__;if(re instanceof id){var Ce=re.__data__;if(!Bu||Ce.length<s-1)return Ce.push([I,D]),this.size=++re.size,this;re=this.__data__=new Hc(Ce)}return re.set(I,D),this.size=re.size,this}Ve.prototype.clear=it,Ve.prototype.delete=st,Ve.prototype.get=lt,Ve.prototype.has=He,Ve.prototype.set=St;function on(I,D){var re=ts(I),Ce=!re&&Sm(I),qe=!re&&!Ce&&mA(I),mt=!re&&!Ce&&!qe&&kg(I),Kt=re||Ce||qe||mt,ln=Kt?mr(I.length,nd):[],Cn=ln.length;for(var or in I)(D||fs.call(I,or))&&!(Kt&&(or=="length"||qe&&(or=="offset"||or=="parent")||mt&&(or=="buffer"||or=="byteLength"||or=="byteOffset")||ua(or,Cn)))&&ln.push(or);return ln}function En(I){var D=I.length;return D?I[Lh(0,D-1)]:n}function Tn(I,D){return $e(Kc(I),wr(D,0,I.length))}function It(I){return $e(Kc(I))}function er(I,D,re){(re!==n&&!fd(I[D],re)||re===n&&!(D in I))&&Xn(I,D,re)}function zn(I,D,re){var Ce=I[D];(!(fs.call(I,D)&&fd(Ce,re))||re===n&&!(D in I))&&Xn(I,D,re)}function un(I,D){for(var re=I.length;re--;)if(fd(I[re][0],D))return re;return-1}function An(I,D,re,Ce){return Zi(I,function(qe,mt,Kt){D(Ce,qe,re(qe),Kt)}),Ce}function Jn(I,D){return I&&rh(D,uc(D),I)}function ur(I,D){return I&&rh(D,Mu(D),I)}function Xn(I,D,re){D=="__proto__"&&qd?qd(I,D,{configurable:!0,enumerable:!0,value:re,writable:!0}):I[D]=re}function Vr(I,D){for(var re=-1,Ce=D.length,qe=jn(Ce),mt=I==null;++re<Ce;)qe[re]=mt?n:Fb(I,D[re]);return qe}function wr(I,D,re){return I===I&&(re!==n&&(I=I<=re?I:re),D!==n&&(I=I>=D?I:D)),I}function ei(I,D,re,Ce,qe,mt){var Kt,ln=D&b,Cn=D&T,or=D&S;if(re&&(Kt=qe?re(I,Ce,qe,mt):re(I)),Kt!==n)return Kt;if(!ka(I))return I;var ar=ts(I);if(ar){if(Kt=h_(I),!ln)return Kc(I,Kt)}else{var yr=Ka(I),Dr=yr==Zt||yr==pn;if(mA(I))return uA(I,ln);if(yr==nn||yr==ot||Dr&&!qe){if(Kt=Cn||Dr?{}:P0(I),!ln)return Cn?pb(I,ur(Kt,I)):fv(I,Jn(Kt,I))}else{if(!us[yr])return qe?I:{};Kt=Tg(I,yr,ln)}}mt||(mt=new Ve);var hi=mt.get(I);if(hi)return hi;mt.set(I,Kt),Iv(I)?I.forEach(function(Qi){Kt.add(ei(Qi,D,re,Qi,I,mt))}):b_(I)&&I.forEach(function(Qi,Hs){Kt.set(Hs,ei(Qi,D,re,Hs,I,mt))});var Ki=or?Cn?F0:wm:Cn?Mu:uc,ys=ar?n:Ki(I);return ta(ys||I,function(Qi,Hs){ys&&(Hs=Qi,Qi=I[Hs]),zn(Kt,Hs,ei(Qi,D,re,Hs,I,mt))}),Kt}function Nr(I){var D=uc(I);return function(re){return Ts(re,I,D)}}function Ts(I,D,re){var Ce=re.length;if(I==null)return!Ce;for(I=Ys(I);Ce--;){var qe=re[Ce],mt=D[qe],Kt=I[qe];if(Kt===n&&!(qe in I)||!mt(Kt))return!1}return!0}function rs(I,D,re){if(typeof I!="function")throw new la(c);return Ie(function(){I.apply(n,re)},D)}function Oi(I,D,re,Ce){var qe=-1,mt=zd,Kt=!0,ln=I.length,Cn=[],or=D.length;if(!ln)return Cn;re&&(D=Ds(D,xo(re))),Ce?(mt=ga,Kt=!1):D.length>=s&&(mt=Lr,Kt=!1,D=new ee(D));e:for(;++qe<ln;){var ar=I[qe],yr=re==null?ar:re(ar);if(ar=Ce||ar!==0?ar:0,Kt&&yr===yr){for(var Dr=or;Dr--;)if(D[Dr]===yr)continue e;Cn.push(ar)}else mt(D,yr,Ce)||Cn.push(ar)}return Cn}var Zi=u_(bo),Us=u_(Ul,!0);function Js(I,D){var re=!0;return Zi(I,function(Ce,qe,mt){return re=!!D(Ce,qe,mt),re}),re}function Di(I,D,re){for(var Ce=-1,qe=I.length;++Ce<qe;){var mt=I[Ce],Kt=D(mt);if(Kt!=null&&(ln===n?Kt===Kt&&!pd(Kt):re(Kt,ln)))var ln=Kt,Cn=mt}return Cn}function _a(I,D,re,Ce){var qe=I.length;for(re=gs(re),re<0&&(re=-re>qe?0:qe+re),Ce=Ce===n||Ce>qe?qe:gs(Ce),Ce<0&&(Ce+=qe),Ce=re>Ce?0:Tb(Ce);re<Ce;)I[re++]=D;return I}function wo(I,D){var re=[];return Zi(I,function(Ce,qe,mt){D(Ce,qe,mt)&&re.push(Ce)}),re}function qr(I,D,re,Ce,qe){var mt=-1,Kt=I.length;for(re||(re=Mf),qe||(qe=[]);++mt<Kt;){var ln=I[mt];D>0&&re(ln)?D>1?qr(ln,D-1,re,Ce,qe):nc(qe,ln):Ce||(qe[qe.length]=ln)}return qe}var Ia=B0(),Is=B0(!0);function bo(I,D){return I&&Ia(I,D,uc)}function Ul(I,D){return I&&Is(I,D,uc)}function ca(I,D){return au(D,function(re){return gA(I[re])})}function ra(I,D){D=Vc(D,I);for(var re=0,Ce=D.length;I!=null&&re<Ce;)I=I[et(D[re++])];return re&&re==Ce?I:n}function wa(I,D,re){var Ce=D(I);return ts(I)?Ce:nc(Ce,re(I))}function eo(I){return I==null?I===n?Gt:Oe:Th&&Th in Ys(I)?dd(I):K(I)}function Mn(I,D){return I>D}function Gn(I,D){return I!=null&&fs.call(I,D)}function Ic(I,D){return I!=null&&D in Ys(I)}function ks(I,D,re){return I>=Va(D,re)&&I<xa(D,re)}function en(I,D,re){for(var Ce=re?ga:zd,qe=I[0].length,mt=I.length,Kt=mt,ln=jn(mt),Cn=1/0,or=[];Kt--;){var ar=I[Kt];Kt&&D&&(ar=Ds(ar,xo(D))),Cn=Va(ar.length,Cn),ln[Kt]=!re&&(D||qe>=120&&ar.length>=120)?new ee(Kt&&ar):n}ar=I[0];var yr=-1,Dr=ln[0];e:for(;++yr<qe&&or.length<Cn;){var hi=ar[yr],Ki=D?D(hi):hi;if(hi=re||hi!==0?hi:0,!(Dr?Lr(Dr,Ki):Ce(or,Ki,re))){for(Kt=mt;--Kt;){var ys=ln[Kt];if(!(ys?Lr(ys,Ki):Ce(I[Kt],Ki,re)))continue e}Dr&&Dr.push(Ki),or.push(hi)}}return or}function Zd(I,D,re,Ce){return bo(I,function(qe,mt,Kt){D(Ce,re(qe),mt,Kt)}),Ce}function fo(I,D,re){D=Vc(D,I),I=J(I,D);var Ce=I==null?I:I[et(di(D))];return Ce==null?n:Qo(Ce,I,re)}function gp(I){return Ya(I)&&eo(I)==ot}function yg(I){return Ya(I)&&eo(I)==qt}function vg(I){return Ya(I)&&eo(I)==kt}function Xd(I,D,re,Ce,qe){return I===D?!0:I==null||D==null||!Ya(I)&&!Ya(D)?I!==I&&D!==D:sd(I,D,re,Ce,Xd,qe)}function sd(I,D,re,Ce,qe,mt){var Kt=ts(I),ln=ts(D),Cn=Kt?vt:Ka(I),or=ln?vt:Ka(D);Cn=Cn==ot?nn:Cn,or=or==ot?nn:or;var ar=Cn==nn,yr=or==nn,Dr=Cn==or;if(Dr&&mA(I)){if(!mA(D))return!1;Kt=!0,ar=!1}if(Dr&&!ar)return mt||(mt=new Ve),Kt||kg(I)?Ff(I,D,re,Ce,qe,mt):j0(I,D,Cn,re,Ce,qe,mt);if(!(re&U)){var hi=ar&&fs.call(I,"__wrapped__"),Ki=yr&&fs.call(D,"__wrapped__");if(hi||Ki){var ys=hi?I.value():I,Qi=Ki?D.value():D;return mt||(mt=new Ve),qe(ys,Qi,re,Ce,mt)}}return Dr?(mt||(mt=new Ve),Ab(I,D,re,Ce,qe,mt)):!1}function mm(I){return Ya(I)&&Ka(I)==Dt}function dl(I,D,re,Ce){var qe=re.length,mt=qe,Kt=!Ce;if(I==null)return!mt;for(I=Ys(I);qe--;){var ln=re[qe];if(Kt&&ln[2]?ln[1]!==I[ln[0]]:!(ln[0]in I))return!1}for(;++qe<mt;){ln=re[qe];var Cn=ln[0],or=I[Cn],ar=ln[1];if(Kt&&ln[2]){if(or===n&&!(Cn in I))return!1}else{var yr=new Ve;if(Ce)var Dr=Ce(or,ar,Cn,I,D,yr);if(!(Dr===n?Xd(ar,or,U|N,Ce,yr):Dr))return!1}}return!0}function Yd(I){if(!ka(I)||v(I))return!1;var D=gA(I)?va:pr;return D.test(ft(I))}function od(I){return Ya(I)&&eo(I)==xn}function bf(I){return Ya(I)&&Ka(I)==Xt}function sA(I){return Ya(I)&&Ev(I.length)&&!!$s[eo(I)]}function gm(I){return typeof I=="function"?I:I==null?Nu:typeof I=="object"?ts(I)?Ql(I[0],I[1]):C0(I):zh(I)}function zl(I){if(!d(I))return ic(I);var D=[];for(var re in Ys(I))fs.call(I,re)&&re!="constructor"&&D.push(re);return D}function Cf(I){if(!ka(I))return z(I);var D=d(I),re=[];for(var Ce in I)Ce=="constructor"&&(D||!fs.call(I,Ce))||re.push(Ce);return re}function ja(I,D){return I<D}function Sf(I,D){var re=-1,Ce=Lu(I)?jn(I.length):[];return Zi(I,function(qe,mt,Kt){Ce[++re]=D(qe,mt,Kt)}),Ce}function C0(I){var D=Eg(I);return D.length==1&&D[0][2]?C(D[0][0],D[0][1]):function(re){return re===I||dl(re,I,D)}}function Ql(I,D){return Wa(I)&&x(D)?C(et(I),D):function(re){var Ce=Fb(re,I);return Ce===n&&Ce===D?Pb(re,I):Xd(D,Ce,U|N)}}function yp(I,D,re,Ce,qe){I!==D&&Ia(D,function(mt,Kt){if(qe||(qe=new Ve),ka(mt))uu(I,D,Kt,re,yp,Ce,qe);else{var ln=Ce?Ce(se(I,Kt),mt,Kt+"",I,D,qe):n;ln===n&&(ln=mt),er(I,Kt,ln)}},Mu)}function uu(I,D,re,Ce,qe,mt,Kt){var ln=se(I,re),Cn=se(D,re),or=Kt.get(Cn);if(or){er(I,re,or);return}var ar=mt?mt(ln,Cn,re+"",I,D,Kt):n,yr=ar===n;if(yr){var Dr=ts(Cn),hi=!Dr&&mA(Cn),Ki=!Dr&&!hi&&kg(Cn);ar=Cn,Dr||hi||Ki?ts(ln)?ar=ln:Pa(ln)?ar=Kc(ln):hi?(yr=!1,ar=uA(Cn,!0)):Ki?(yr=!1,ar=vm(Cn,!0)):ar=[]:Uh(Cn)||Sm(Cn)?(ar=ln,Sm(ln)?ar=Ib(ln):(!ka(ln)||gA(ln))&&(ar=P0(Cn))):yr=!1}yr&&(Kt.set(Cn,ar),qe(ar,Cn,Ce,mt,Kt),Kt.delete(Cn)),er(I,re,ar)}function js(I,D){var re=I.length;if(re)return D+=D<0?re:0,ua(D,re)?I[D]:n}function $i(I,D,re){D.length?D=Ds(D,function(mt){return ts(mt)?function(Kt){return ra(Kt,mt.length===1?mt[0]:mt)}:mt}):D=[Nu];var Ce=-1;D=Ds(D,xo(Fi()));var qe=Sf(I,function(mt,Kt,ln){var Cn=Ds(D,function(or){return or(mt)});return{criteria:Cn,index:++Ce,value:mt}});return To(qe,function(mt,Kt){return _g(mt,Kt,re)})}function oA(I,D){return Iu(I,D,function(re,Ce){return Pb(I,Ce)})}function Iu(I,D,re){for(var Ce=-1,qe=D.length,mt={};++Ce<qe;){var Kt=D[Ce],ln=ra(I,Kt);re(ln,Kt)&&Mh(mt,Vc(Kt,I),ln)}return mt}function Jd(I){return function(D){return ra(D,I)}}function eh(I,D,re,Ce){var qe=Ce?zr:dr,mt=-1,Kt=D.length,ln=I;for(I===D&&(D=Kc(D)),re&&(ln=Ds(I,xo(re)));++mt<Kt;)for(var Cn=0,or=D[mt],ar=re?re(or):or;(Cn=qe(ln,ar,Cn,Ce))>-1;)ln!==I&&Ri.call(ln,Cn,1),Ri.call(I,Cn,1);return I}function jc(I,D){for(var re=I?D.length:0,Ce=re-1;re--;){var qe=D[re];if(re==Ce||qe!==mt){var mt=qe;ua(qe)?Ri.call(I,qe,1):cd(I,qe)}}return I}function Lh(I,D){return I+mf(um()*(D-I+1))}function ju(I,D,re,Ce){for(var qe=-1,mt=xa(Af((D-I)/(re||1)),0),Kt=jn(mt);mt--;)Kt[Ce?mt:++qe]=I,I+=re;return Kt}function Fc(I,D){var re="";if(!I||D<1||D>Ue)return re;do D%2&&(re+=I),D=mf(D/2),D&&(I+=I);while(D);return re}function Ui(I,D){return Se(X(I,D,Nu),I+"")}function ym(I){return En(Lg(I))}function Bf(I,D){var re=Lg(I);return $e(re,wr(D,0,re.length))}function Mh(I,D,re,Ce){if(!ka(I))return I;D=Vc(D,I);for(var qe=-1,mt=D.length,Kt=mt-1,ln=I;ln!=null&&++qe<mt;){var Cn=et(D[qe]),or=re;if(Cn==="__proto__"||Cn==="constructor"||Cn==="prototype")return I;if(qe!=Kt){var ar=ln[Cn];or=Ce?Ce(ar,Cn,ln):n,or===n&&(or=ka(ar)?ar:ua(D[qe+1])?[]:{})}zn(ln,Cn,or),ln=ln[Cn]}return I}var vp=dm?function(I,D){return dm.set(I,D),I}:Nu,ad=qd?function(I,D){return qd(I,"toString",{configurable:!0,enumerable:!1,value:T_(D),writable:!0})}:Nu;function th(I){return $e(Lg(I))}function oc(I,D,re){var Ce=-1,qe=I.length;D<0&&(D=-D>qe?0:qe+D),re=re>qe?qe:re,re<0&&(re+=qe),qe=D>re?0:re-D>>>0,D>>>=0;for(var mt=jn(qe);++Ce<qe;)mt[Ce]=I[Ce+D];return mt}function aA(I,D){var re;return Zi(I,function(Ce,qe,mt){return re=D(Ce,qe,mt),!re}),!!re}function Ef(I,D,re){var Ce=0,qe=I==null?Ce:I.length;if(typeof D=="number"&&D===D&&qe<=me){for(;Ce<qe;){var mt=Ce+qe>>>1,Kt=I[mt];Kt!==null&&!pd(Kt)&&(re?Kt<=D:Kt<D)?Ce=mt+1:qe=mt}return qe}return ld(I,D,Nu,re)}function ld(I,D,re,Ce){var qe=0,mt=I==null?0:I.length;if(mt===0)return 0;D=re(D);for(var Kt=D!==D,ln=D===null,Cn=pd(D),or=D===n;qe<mt;){var ar=mf((qe+mt)/2),yr=re(I[ar]),Dr=yr!==n,hi=yr===null,Ki=yr===yr,ys=pd(yr);if(Kt)var Qi=Ce||Ki;else or?Qi=Ki&&(Ce||Dr):ln?Qi=Ki&&Dr&&(Ce||!hi):Cn?Qi=Ki&&Dr&&!hi&&(Ce||!ys):hi||ys?Qi=!1:Qi=Ce?yr<=D:yr<D;Qi?qe=ar+1:mt=ar}return Va(mt,we)}function $a(I,D){for(var re=-1,Ce=I.length,qe=0,mt=[];++re<Ce;){var Kt=I[re],ln=D?D(Kt):Kt;if(!re||!fd(ln,Cn)){var Cn=ln;mt[qe++]=Kt===0?0:Kt}}return mt}function xp(I){return typeof I=="number"?I:pd(I)?xe:+I}function Hl(I){if(typeof I=="string")return I;if(ts(I))return Ds(I,Hl)+"";if(pd(I))return ul?ul.call(I):"";var D=I+"";return D=="0"&&1/I==-Je?"-0":D}function Fa(I,D,re){var Ce=-1,qe=zd,mt=I.length,Kt=!0,ln=[],Cn=ln;if(re)Kt=!1,qe=ga;else if(mt>=s){var or=D?null:_m(I);if(or)return Su(or);Kt=!1,qe=Lr,Cn=new ee}else Cn=D?[]:ln;e:for(;++Ce<mt;){var ar=I[Ce],yr=D?D(ar):ar;if(ar=re||ar!==0?ar:0,Kt&&yr===yr){for(var Dr=Cn.length;Dr--;)if(Cn[Dr]===yr)continue e;D&&Cn.push(yr),ln.push(ar)}else qe(Cn,yr,re)||(Cn!==ln&&Cn.push(yr),ln.push(ar))}return ln}function cd(I,D){return D=Vc(D,I),I=J(I,D),I==null||delete I[et(di(D))]}function Nh(I,D,re,Ce){return Mh(I,D,re(ra(I,D)),Ce)}function Rh(I,D,re,Ce){for(var qe=I.length,mt=Ce?qe:-1;(Ce?mt--:++mt<qe)&&D(I[mt],mt,I););return re?oc(I,Ce?0:mt,Ce?mt+1:qe):oc(I,Ce?mt+1:0,Ce?qe:mt)}function Tf(I,D){var re=I;return re instanceof Ji&&(re=re.value()),wu(D,function(Ce,qe){return qe.func.apply(qe.thisArg,nc([Ce],qe.args))},re)}function Ga(I,D,re){var Ce=I.length;if(Ce<2)return Ce?Fa(I[0]):[];for(var qe=-1,mt=jn(Ce);++qe<Ce;)for(var Kt=I[qe],ln=-1;++ln<Ce;)ln!=qe&&(mt[qe]=Oi(mt[qe]||Kt,I[ln],D,re));return Fa(qr(mt,1),D,re)}function du(I,D,re){for(var Ce=-1,qe=I.length,mt=D.length,Kt={};++Ce<qe;){var ln=Ce<mt?D[Ce]:n;re(Kt,I[Ce],ln)}return Kt}function hu(I){return Pa(I)?I:[]}function nh(I){return typeof I=="function"?I:Nu}function Vc(I,D){return ts(I)?I:Wa(I,D)?[I]:rt(jo(I))}var lA=Ui;function $c(I,D,re){var Ce=I.length;return re=re===n?Ce:re,!D&&re>=Ce?I:oc(I,D,re)}var cA=cp||function(I){return Xo.clearTimeout(I)};function uA(I,D){if(D)return I.slice();var re=I.length,Ce=lp?lp(re):new I.constructor(re);return I.copy(Ce),Ce}function S0(I){var D=new I.constructor(I.byteLength);return new zc(D).set(new zc(I)),D}function l_(I,D){var re=D?S0(I.buffer):I.buffer;return new I.constructor(re,I.byteOffset,I.byteLength)}function c_(I){var D=new I.constructor(I.source,sr.exec(I));return D.lastIndex=I.lastIndex,D}function xg(I){return Qc?Ys(Qc.call(I)):{}}function vm(I,D){var re=D?S0(I.buffer):I.buffer;return new I.constructor(re,I.byteOffset,I.length)}function Gc(I,D){if(I!==D){var re=I!==n,Ce=I===null,qe=I===I,mt=pd(I),Kt=D!==n,ln=D===null,Cn=D===D,or=pd(D);if(!ln&&!or&&!mt&&I>D||mt&&Kt&&Cn&&!ln&&!or||Ce&&Kt&&Cn||!re&&Cn||!qe)return 1;if(!Ce&&!mt&&!or&&I<D||or&&re&&qe&&!Ce&&!mt||ln&&re&&qe||!Kt&&qe||!Cn)return-1}return 0}function _g(I,D,re){for(var Ce=-1,qe=I.criteria,mt=D.criteria,Kt=qe.length,ln=re.length;++Ce<Kt;){var Cn=Gc(qe[Ce],mt[Ce]);if(Cn){if(Ce>=ln)return Cn;var or=re[Ce];return Cn*(or=="desc"?-1:1)}}return I.index-D.index}function dv(I,D,re,Ce){for(var qe=-1,mt=I.length,Kt=re.length,ln=-1,Cn=D.length,or=xa(mt-Kt,0),ar=jn(Cn+or),yr=!Ce;++ln<Cn;)ar[ln]=D[ln];for(;++qe<Kt;)(yr||qe<mt)&&(ar[re[qe]]=I[qe]);for(;or--;)ar[ln++]=I[qe++];return ar}function hv(I,D,re,Ce){for(var qe=-1,mt=I.length,Kt=-1,ln=re.length,Cn=-1,or=D.length,ar=xa(mt-ln,0),yr=jn(ar+or),Dr=!Ce;++qe<ar;)yr[qe]=I[qe];for(var hi=qe;++Cn<or;)yr[hi+Cn]=D[Cn];for(;++Kt<ln;)(Dr||qe<mt)&&(yr[hi+re[Kt]]=I[qe++]);return yr}function Kc(I,D){var re=-1,Ce=I.length;for(D||(D=jn(Ce));++re<Ce;)D[re]=I[re];return D}function rh(I,D,re,Ce){var qe=!re;re||(re={});for(var mt=-1,Kt=D.length;++mt<Kt;){var ln=D[mt],Cn=Ce?Ce(re[ln],I[ln],ln,re,I):n;Cn===n&&(Cn=I[ln]),qe?Xn(re,ln,Cn):zn(re,ln,Cn)}return re}function fv(I,D){return rh(I,kf(I),D)}function pb(I,D){return rh(I,Cp(I),D)}function po(I,D){return function(re,Ce){var qe=ts(re)?Ud:An,mt=D?D():{};return qe(re,I,Fi(Ce,2),mt)}}function dA(I){return Ui(function(D,re){var Ce=-1,qe=re.length,mt=qe>1?re[qe-1]:n,Kt=qe>2?re[2]:n;for(mt=I.length>3&&typeof mt=="function"?(qe--,mt):n,Kt&&Ro(re[0],re[1],Kt)&&(mt=qe<3?n:mt,qe=1),D=Ys(D);++Ce<qe;){var ln=re[Ce];ln&&I(D,ln,Ce,mt)}return D})}function u_(I,D){return function(re,Ce){if(re==null)return re;if(!Lu(re))return I(re,Ce);for(var qe=re.length,mt=D?qe:-1,Kt=Ys(re);(D?mt--:++mt<qe)&&Ce(Kt[mt],mt,Kt)!==!1;);return re}}function B0(I){return function(D,re,Ce){for(var qe=-1,mt=Ys(D),Kt=Ce(D),ln=Kt.length;ln--;){var Cn=Kt[I?ln:++qe];if(re(mt[Cn],Cn,mt)===!1)break}return D}}function wg(I,D,re){var Ce=D&W,qe=_p(I);function mt(){var Kt=this&&this!==Xo&&this instanceof mt?qe:I;return Kt.apply(Ce?re:this,arguments)}return mt}function E0(I){return function(D){D=jo(D);var re=Cc(D)?Ua(D):n,Ce=re?re[0]:D.charAt(0),qe=re?$c(re,1).join(""):D.slice(1);return Ce[I]()+qe}}function If(I){return function(D){return wu(Hb(Mg(D).replace(ou,"")),I,"")}}function _p(I){return function(){var D=arguments;switch(D.length){case 0:return new I;case 1:return new I(D[0]);case 2:return new I(D[0],D[1]);case 3:return new I(D[0],D[1],D[2]);case 4:return new I(D[0],D[1],D[2],D[3]);case 5:return new I(D[0],D[1],D[2],D[3],D[4]);case 6:return new I(D[0],D[1],D[2],D[3],D[4],D[5]);case 7:return new I(D[0],D[1],D[2],D[3],D[4],D[5],D[6])}var re=Fh(I.prototype),Ce=I.apply(re,D);return ka(Ce)?Ce:re}}function ih(I,D,re){var Ce=_p(I);function qe(){for(var mt=arguments.length,Kt=jn(mt),ln=mt,Cn=bp(qe);ln--;)Kt[ln]=arguments[ln];var or=mt<3&&Kt[0]!==Cn&&Kt[mt-1]!==Cn?[]:Cu(Kt,Cn);if(mt-=or.length,mt<re)return Sg(I,D,Fu,qe.placeholder,n,Kt,or,n,n,re-mt);var ar=this&&this!==Xo&&this instanceof qe?Ce:I;return Qo(ar,this,Kt)}return qe}function wp(I){return function(D,re,Ce){var qe=Ys(D);if(!Lu(D)){var mt=Fi(re,3);D=uc(D),re=function(ln){return mt(qe[ln],ln,qe)}}var Kt=I(D,re,Ce);return Kt>-1?qe[mt?D[Kt]:Kt]:n}}function Vo(I){return Pf(function(D){var re=D.length,Ce=re,qe=Ta.prototype.thru;for(I&&D.reverse();Ce--;){var mt=D[Ce];if(typeof mt!="function")throw new la(c);if(qe&&!Kt&&bm(mt)=="wrapper")var Kt=new Ta([],!0)}for(Ce=Kt?Ce:re;++Ce<re;){mt=D[Ce];var ln=bm(mt),Cn=ln=="wrapper"?Cl(mt):n;Cn&&$o(Cn[0])&&Cn[1]==(le|V|ne|pe)&&!Cn[4].length&&Cn[9]==1?Kt=Kt[bm(Cn[0])].apply(Kt,Cn[3]):Kt=mt.length==1&&$o(mt)?Kt[ln]():Kt.thru(mt)}return function(){var or=arguments,ar=or[0];if(Kt&&or.length==1&&ts(ar))return Kt.plant(ar).value();for(var yr=0,Dr=re?D[yr].apply(this,or):ar;++yr<re;)Dr=D[yr].call(this,Dr);return Dr}})}function Fu(I,D,re,Ce,qe,mt,Kt,ln,Cn,or){var ar=D&le,yr=D&W,Dr=D&L,hi=D&(V|Z),Ki=D&_e,ys=Dr?n:_p(I);function Qi(){for(var Hs=arguments.length,Ws=jn(Hs),ah=Hs;ah--;)Ws[ah]=arguments[ah];if(hi)var pu=bp(Qi),lh=bu(Ws,pu);if(Ce&&(Ws=dv(Ws,Ce,qe,hi)),mt&&(Ws=hv(Ws,mt,Kt,hi)),Hs-=lh,hi&&Hs<or){var fl=Cu(Ws,pu);return Sg(I,D,Fu,Qi.placeholder,re,Ws,fl,ln,Cn,or-Hs)}var Of=yr?re:this,vA=Dr?Of[I]:I;return Hs=Ws.length,ln?Ws=oe(Ws,ln):Ki&&Hs>1&&Ws.reverse(),ar&&Cn<Hs&&(Ws.length=Cn),this&&this!==Xo&&this instanceof Qi&&(vA=ys||_p(vA)),vA.apply(Of,Ws)}return Qi}function bg(I,D){return function(re,Ce){return Zd(re,I,D(Ce),{})}}function hA(I,D){return function(re,Ce){var qe;if(re===n&&Ce===n)return D;if(re!==n&&(qe=re),Ce!==n){if(qe===n)return Ce;typeof re=="string"||typeof Ce=="string"?(re=Hl(re),Ce=Hl(Ce)):(re=xp(re),Ce=xp(Ce)),qe=I(re,Ce)}return qe}}function xm(I){return Pf(function(D){return D=Ds(D,xo(Fi())),Ui(function(re){var Ce=this;return I(D,function(qe){return Qo(qe,Ce,re)})})})}function T0(I,D){D=D===n?" ":Hl(D);var re=D.length;if(re<2)return re?Fc(D,I):D;var Ce=Fc(D,Af(I/Sc(D)));return Cc(D)?$c(Ua(Ce),0,I).join(""):Ce.slice(0,I)}function Cg(I,D,re,Ce){var qe=D&W,mt=_p(I);function Kt(){for(var ln=-1,Cn=arguments.length,or=-1,ar=Ce.length,yr=jn(ar+Cn),Dr=this&&this!==Xo&&this instanceof Kt?mt:I;++or<ar;)yr[or]=Ce[or];for(;Cn--;)yr[or++]=arguments[++ln];return Qo(Dr,qe?re:this,yr)}return Kt}function d_(I){return function(D,re,Ce){return Ce&&typeof Ce!="number"&&Ro(D,re,Ce)&&(re=Ce=n),D=Ep(D),re===n?(re=D,D=0):re=Ep(re),Ce=Ce===n?D<re?1:-1:Ep(Ce),ju(D,re,Ce,I)}}function I0(I){return function(D,re){return typeof D=="string"&&typeof re=="string"||(D=Ad(D),re=Ad(re)),I(D,re)}}function Sg(I,D,re,Ce,qe,mt,Kt,ln,Cn,or){var ar=D&V,yr=ar?Kt:n,Dr=ar?n:Kt,hi=ar?mt:n,Ki=ar?n:mt;D|=ar?ne:Y,D&=~(ar?Y:ne),D&Q||(D&=~(W|L));var ys=[I,D,qe,hi,yr,Ki,Dr,ln,Cn,or],Qi=re.apply(n,ys);return $o(I)&&ue(Qi,ys),Qi.placeholder=Ce,Pe(Qi,I,D)}function Bg(I){var D=_o[I];return function(re,Ce){if(re=Ad(re),Ce=Ce==null?0:Va(gs(Ce),292),Ce&&dp(re)){var qe=(jo(re)+"e").split("e"),mt=D(qe[0]+"e"+(+qe[1]+Ce));return qe=(jo(mt)+"e").split("e"),+(qe[0]+"e"+(+qe[1]-Ce))}return D(re)}}var _m=vf&&1/Su(new vf([,-0]))[1]==Je?function(I){return new vf(I)}:Rv;function fA(I){return function(D){var re=Ka(D);return re==Dt?rc(D):re==Xt?lu(D):ya(D,I(D))}}function ac(I,D,re,Ce,qe,mt,Kt,ln){var Cn=D&L;if(!Cn&&typeof I!="function")throw new la(c);var or=Ce?Ce.length:0;if(or||(D&=~(ne|Y),Ce=qe=n),Kt=Kt===n?Kt:xa(gs(Kt),0),ln=ln===n?ln:gs(ln),or-=qe?qe.length:0,D&Y){var ar=Ce,yr=qe;Ce=qe=n}var Dr=Cn?n:Cl(I),hi=[I,D,re,Ce,qe,ar,yr,mt,Kt,ln];if(Dr&&F(hi,Dr),I=hi[0],D=hi[1],re=hi[2],Ce=hi[3],qe=hi[4],ln=hi[9]=hi[9]===n?Cn?0:I.length:xa(hi[9]-or,0),!ln&&D&(V|Z)&&(D&=~(V|Z)),!D||D==W)var Ki=wg(I,D,re);else D==V||D==Z?Ki=ih(I,D,ln):(D==ne||D==(W|ne))&&!qe.length?Ki=Cg(I,D,re,Ce):Ki=Fu.apply(n,hi);var ys=Dr?vp:ue;return Pe(ys(Ki,hi),I,D)}function ud(I,D,re,Ce){return I===n||fd(I,Tc[re])&&!fs.call(Ce,re)?D:I}function jf(I,D,re,Ce,qe,mt){return ka(I)&&ka(D)&&(mt.set(D,I),yp(I,D,n,jf,mt),mt.delete(D)),I}function pA(I){return Uh(I)?n:I}function Ff(I,D,re,Ce,qe,mt){var Kt=re&U,ln=I.length,Cn=D.length;if(ln!=Cn&&!(Kt&&Cn>ln))return!1;var or=mt.get(I),ar=mt.get(D);if(or&&ar)return or==D&&ar==I;var yr=-1,Dr=!0,hi=re&N?new ee:n;for(mt.set(I,D),mt.set(D,I);++yr<ln;){var Ki=I[yr],ys=D[yr];if(Ce)var Qi=Kt?Ce(ys,Ki,yr,D,I,mt):Ce(Ki,ys,yr,I,D,mt);if(Qi!==n){if(Qi)continue;Dr=!1;break}if(hi){if(!ce(D,function(Hs,Ws){if(!Lr(hi,Ws)&&(Ki===Hs||qe(Ki,Hs,re,Ce,mt)))return hi.push(Ws)})){Dr=!1;break}}else if(!(Ki===ys||qe(Ki,ys,re,Ce,mt))){Dr=!1;break}}return mt.delete(I),mt.delete(D),Dr}function j0(I,D,re,Ce,qe,mt,Kt){switch(re){case fn:if(I.byteLength!=D.byteLength||I.byteOffset!=D.byteOffset)return!1;I=I.buffer,D=D.buffer;case qt:return!(I.byteLength!=D.byteLength||!mt(new zc(I),new zc(D)));case Ot:case kt:case hn:return fd(+I,+D);case Ht:return I.name==D.name&&I.message==D.message;case xn:case gn:return I==D+"";case Dt:var ln=rc;case Xt:var Cn=Ce&U;if(ln||(ln=Su),I.size!=D.size&&!Cn)return!1;var or=Kt.get(I);if(or)return or==D;Ce|=N,Kt.set(I,D);var ar=Ff(ln(I),ln(D),Ce,qe,mt,Kt);return Kt.delete(I),ar;case rr:if(Qc)return Qc.call(I)==Qc.call(D)}return!1}function Ab(I,D,re,Ce,qe,mt){var Kt=re&U,ln=wm(I),Cn=ln.length,or=wm(D),ar=or.length;if(Cn!=ar&&!Kt)return!1;for(var yr=Cn;yr--;){var Dr=ln[yr];if(!(Kt?Dr in D:fs.call(D,Dr)))return!1}var hi=mt.get(I),Ki=mt.get(D);if(hi&&Ki)return hi==D&&Ki==I;var ys=!0;mt.set(I,D),mt.set(D,I);for(var Qi=Kt;++yr<Cn;){Dr=ln[yr];var Hs=I[Dr],Ws=D[Dr];if(Ce)var ah=Kt?Ce(Ws,Hs,Dr,D,I,mt):Ce(Hs,Ws,Dr,I,D,mt);if(!(ah===n?Hs===Ws||qe(Hs,Ws,re,Ce,mt):ah)){ys=!1;break}Qi||(Qi=Dr=="constructor")}if(ys&&!Qi){var pu=I.constructor,lh=D.constructor;pu!=lh&&"constructor"in I&&"constructor"in D&&!(typeof pu=="function"&&pu instanceof pu&&typeof lh=="function"&&lh instanceof lh)&&(ys=!1)}return mt.delete(I),mt.delete(D),ys}function Pf(I){return Se(X(I,n,Dn),I+"")}function wm(I){return wa(I,uc,kf)}function F0(I){return wa(I,Mu,Cp)}var Cl=dm?function(I){return dm.get(I)}:Rv;function bm(I){for(var D=I.name+"",re=pp[D],Ce=fs.call(pp,D)?re.length:0;Ce--;){var qe=re[Ce],mt=qe.func;if(mt==null||mt==I)return qe.name}return D}function bp(I){var D=fs.call(ct,"placeholder")?ct:I;return D.placeholder}function Fi(){var I=ct.iteratee||I_;return I=I===I_?gm:I,arguments.length?I(arguments[0],arguments[1]):I}function Oh(I,D){var re=I.__data__;return Av(D)?re[typeof D=="string"?"string":"hash"]:re.map}function Eg(I){for(var D=uc(I),re=D.length;re--;){var Ce=D[re],qe=I[Ce];D[re]=[Ce,qe,x(qe)]}return D}function Vl(I,D){var re=ao(I,D);return Yd(re)?re:n}function dd(I){var D=fs.call(I,Th),re=I[Th];try{I[Th]=n;var Ce=!0}catch{}var qe=As.call(I);return Ce&&(D?I[Th]=re:delete I[Th]),qe}var kf=up?function(I){return I==null?[]:(I=Ys(I),au(up(I),function(D){return Ha.call(I,D)}))}:F_,Cp=up?function(I){for(var D=[];I;)nc(D,kf(I)),I=ff(I);return D}:F_,Ka=eo;(yf&&Ka(new yf(new ArrayBuffer(1)))!=fn||Bu&&Ka(new Bu)!=Dt||fp&&Ka(fp.resolve())!=Vt||vf&&Ka(new vf)!=Xt||xf&&Ka(new xf)!=Rn)&&(Ka=function(I){var D=eo(I),re=D==nn?I.constructor:n,Ce=re?ft(re):"";if(Ce)switch(Ce){case cv:return fn;case Ih:return Dt;case Eu:return Vt;case Tu:return Xt;case gg:return Rn}return D});function pv(I,D,re){for(var Ce=-1,qe=re.length;++Ce<qe;){var mt=re[Ce],Kt=mt.size;switch(mt.type){case"drop":I+=Kt;break;case"dropRight":D-=Kt;break;case"take":D=Va(D,I+Kt);break;case"takeRight":I=xa(I,D-Kt);break}}return{start:I,end:D}}function es(I){var D=I.match(Lt);return D?D[1].split(jt):[]}function Lf(I,D,re){D=Vc(D,I);for(var Ce=-1,qe=D.length,mt=!1;++Ce<qe;){var Kt=et(D[Ce]);if(!(mt=I!=null&&re(I,Kt)))break;I=I[Kt]}return mt||++Ce!=qe?mt:(qe=I==null?0:I.length,!!qe&&Ev(qe)&&ua(Kt,qe)&&(ts(I)||Sm(I)))}function h_(I){var D=I.length,re=new I.constructor(D);return D&&typeof I[0]=="string"&&fs.call(I,"index")&&(re.index=I.index,re.input=I.input),re}function P0(I){return typeof I.constructor=="function"&&!d(I)?Fh(ff(I)):{}}function Tg(I,D,re){var Ce=I.constructor;switch(D){case qt:return S0(I);case Ot:case kt:return new Ce(+I);case fn:return l_(I,re);case Un:case Yt:case cn:case Ln:case Hn:case _r:case fr:case xr:case bi:return vm(I,re);case Dt:return new Ce;case hn:case gn:return new Ce(I);case xn:return c_(I);case Xt:return new Ce;case rr:return xg(I)}}function Sp(I,D){var re=D.length;if(!re)return I;var Ce=re-1;return D[Ce]=(re>1?"& ":"")+D[Ce],D=D.join(re>2?", ":" "),I.replace(pt,`{
/* [wrapped with `+D+`] */
`)}function Mf(I){return ts(I)||Sm(I)||!!(Jp&&I&&I[Jp])}function ua(I,D){var re=typeof I;return D=D??Ue,!!D&&(re=="number"||re!="symbol"&&vi.test(I))&&I>-1&&I%1==0&&I<D}function Ro(I,D,re){if(!ka(re))return!1;var Ce=typeof D;return(Ce=="number"?Lu(re)&&ua(D,re.length):Ce=="string"&&D in re)?fd(re[D],I):!1}function Wa(I,D){if(ts(I))return!1;var re=typeof I;return re=="number"||re=="symbol"||re=="boolean"||I==null||pd(I)?!0:De.test(I)||!je.test(I)||D!=null&&I in Ys(D)}function Av(I){var D=typeof I;return D=="string"||D=="number"||D=="symbol"||D=="boolean"?I!=="__proto__":I===null}function $o(I){var D=bm(I),re=ct[D];if(typeof re!="function"||!(D in Ji.prototype))return!1;if(I===re)return!0;var Ce=Cl(re);return!!Ce&&I===Ce[0]}function v(I){return!!za&&za in I}var l=cu?gA:P_;function d(I){var D=I&&I.constructor,re=typeof D=="function"&&D.prototype||Tc;return I===re}function x(I){return I===I&&!ka(I)}function C(I,D){return function(re){return re==null?!1:re[I]===D&&(D!==n||I in Ys(re))}}function B(I){var D=Sv(I,function(Ce){return re.size===g&&re.clear(),Ce}),re=D.cache;return D}function F(I,D){var re=I[1],Ce=D[1],qe=re|Ce,mt=qe<(W|L|le),Kt=Ce==le&&re==V||Ce==le&&re==pe&&I[7].length<=D[8]||Ce==(le|pe)&&D[7].length<=D[8]&&re==V;if(!(mt||Kt))return I;Ce&W&&(I[2]=D[2],qe|=re&W?0:Q);var ln=D[3];if(ln){var Cn=I[3];I[3]=Cn?dv(Cn,ln,D[4]):ln,I[4]=Cn?Cu(I[3],y):D[4]}return ln=D[5],ln&&(Cn=I[5],I[5]=Cn?hv(Cn,ln,D[6]):ln,I[6]=Cn?Cu(I[5],y):D[6]),ln=D[7],ln&&(I[7]=ln),Ce&le&&(I[8]=I[8]==null?D[8]:Va(I[8],D[8])),I[9]==null&&(I[9]=D[9]),I[0]=D[0],I[1]=qe,I}function z(I){var D=[];if(I!=null)for(var re in Ys(I))D.push(re);return D}function K(I){return As.call(I)}function X(I,D,re){return D=xa(D===n?I.length-1:D,0),function(){for(var Ce=arguments,qe=-1,mt=xa(Ce.length-D,0),Kt=jn(mt);++qe<mt;)Kt[qe]=Ce[D+qe];qe=-1;for(var ln=jn(D+1);++qe<D;)ln[qe]=Ce[qe];return ln[D]=re(Kt),Qo(I,this,ln)}}function J(I,D){return D.length<2?I:ra(I,oc(D,0,-1))}function oe(I,D){for(var re=I.length,Ce=Va(D.length,re),qe=Kc(I);Ce--;){var mt=D[Ce];I[Ce]=ua(mt,re)?qe[mt]:n}return I}function se(I,D){if(!(D==="constructor"&&typeof I[D]=="function")&&D!="__proto__")return I[D]}var ue=Le(vp),Ie=lm||function(I,D){return Xo.setTimeout(I,D)},Se=Le(ad);function Pe(I,D,re){var Ce=D+"";return Se(I,Sp(Ce,dt(es(Ce),re)))}function Le(I){var D=0,re=0;return function(){var Ce=cm(),qe=Te-(Ce-re);if(re=Ce,qe>0){if(++D>=be)return arguments[0]}else D=0;return I.apply(n,arguments)}}function $e(I,D){var re=-1,Ce=I.length,qe=Ce-1;for(D=D===n?Ce:D;++re<D;){var mt=Lh(re,qe),Kt=I[mt];I[mt]=I[re],I[re]=Kt}return I.length=D,I}var rt=B(function(I){var D=[];return I.charCodeAt(0)===46&&D.push(""),I.replace(ve,function(re,Ce,qe,mt){D.push(qe?mt.replace(_n,"$1"):Ce||re)}),D});function et(I){if(typeof I=="string"||pd(I))return I;var D=I+"";return D=="0"&&1/I==-Je?"-0":D}function ft(I){if(I!=null){try{return bl.call(I)}catch{}try{return I+""}catch{}}return""}function dt(I,D){return ta(Ze,function(re){var Ce="_."+re[0];D&re[1]&&!zd(I,Ce)&&I.push(Ce)}),I.sort()}function ht(I){if(I instanceof Ji)return I.clone();var D=new Ta(I.__wrapped__,I.__chain__);return D.__actions__=Kc(I.__actions__),D.__index__=I.__index__,D.__values__=I.__values__,D}function ut(I,D,re){(re?Ro(I,D,re):D===n)?D=1:D=xa(gs(D),0);var Ce=I==null?0:I.length;if(!Ce||D<1)return[];for(var qe=0,mt=0,Kt=jn(Af(Ce/D));qe<Ce;)Kt[mt++]=oc(I,qe,qe+=D);return Kt}function xt(I){for(var D=-1,re=I==null?0:I.length,Ce=0,qe=[];++D<re;){var mt=I[D];mt&&(qe[Ce++]=mt)}return qe}function Bt(){var I=arguments.length;if(!I)return[];for(var D=jn(I-1),re=arguments[0],Ce=I;Ce--;)D[Ce-1]=arguments[Ce];return nc(ts(re)?Kc(re):[re],qr(D,1))}var an=Ui(function(I,D){return Pa(I)?Oi(I,qr(D,1,Pa,!0)):[]}),tn=Ui(function(I,D){var re=di(D);return Pa(re)&&(re=n),Pa(I)?Oi(I,qr(D,1,Pa,!0),Fi(re,2)):[]}),Ct=Ui(function(I,D){var re=di(D);return Pa(re)&&(re=n),Pa(I)?Oi(I,qr(D,1,Pa,!0),n,re):[]});function Rt(I,D,re){var Ce=I==null?0:I.length;return Ce?(D=re||D===n?1:gs(D),oc(I,D<0?0:D,Ce)):[]}function wn(I,D,re){var Ce=I==null?0:I.length;return Ce?(D=re||D===n?1:gs(D),D=Ce-D,oc(I,0,D<0?0:D)):[]}function kn(I,D){return I&&I.length?Rh(I,Fi(D,3),!0,!0):[]}function Qn(I,D){return I&&I.length?Rh(I,Fi(D,3),!0):[]}function Jt(I,D,re,Ce){var qe=I==null?0:I.length;return qe?(re&&typeof re!="number"&&Ro(I,D,re)&&(re=0,Ce=qe),_a(I,D,re,Ce)):[]}function In(I,D,re){var Ce=I==null?0:I.length;if(!Ce)return-1;var qe=re==null?0:gs(re);return qe<0&&(qe=xa(Ce+qe,0)),On(I,Fi(D,3),qe)}function dn(I,D,re){var Ce=I==null?0:I.length;if(!Ce)return-1;var qe=Ce-1;return re!==n&&(qe=gs(re),qe=re<0?xa(Ce+qe,0):Va(qe,Ce-1)),On(I,Fi(D,3),qe,!0)}function Dn(I){var D=I==null?0:I.length;return D?qr(I,1):[]}function Fn(I){var D=I==null?0:I.length;return D?qr(I,Je):[]}function bn(I,D){var re=I==null?0:I.length;return re?(D=D===n?1:gs(D),qr(I,D)):[]}function tr(I){for(var D=-1,re=I==null?0:I.length,Ce={};++D<re;){var qe=I[D];Ce[qe[0]]=qe[1]}return Ce}function nr(I){return I&&I.length?I[0]:n}function Yn(I,D,re){var Ce=I==null?0:I.length;if(!Ce)return-1;var qe=re==null?0:gs(re);return qe<0&&(qe=xa(Ce+qe,0)),dr(I,D,qe)}function hr(I){var D=I==null?0:I.length;return D?oc(I,0,-1):[]}var Zr=Ui(function(I){var D=Ds(I,hu);return D.length&&D[0]===I[0]?en(D):[]}),kr=Ui(function(I){var D=di(I),re=Ds(I,hu);return D===di(re)?D=n:re.pop(),re.length&&re[0]===I[0]?en(re,Fi(D,2)):[]}),Fr=Ui(function(I){var D=di(I),re=Ds(I,hu);return D=typeof D=="function"?D:n,D&&re.pop(),re.length&&re[0]===I[0]?en(re,n,D):[]});function Xr(I,D){return I==null?"":x0.call(I,D)}function di(I){var D=I==null?0:I.length;return D?I[D-1]:n}function gi(I,D,re){var Ce=I==null?0:I.length;if(!Ce)return-1;var qe=Ce;return re!==n&&(qe=gs(re),qe=qe<0?xa(Ce+qe,0):Va(qe,Ce-1)),D===D?Uc(I,D,qe):On(I,Jr,qe,!0)}function to(I,D){return I&&I.length?js(I,gs(D)):n}var zs=Ui(ls);function ls(I,D){return I&&I.length&&D&&D.length?eh(I,D):I}function ms(I,D,re){return I&&I.length&&D&&D.length?eh(I,D,Fi(re,2)):I}function yi(I,D,re){return I&&I.length&&D&&D.length?eh(I,D,n,re):I}var zi=Pf(function(I,D){var re=I==null?0:I.length,Ce=Vr(I,D);return jc(I,Ds(D,function(qe){return ua(qe,re)?+qe:qe}).sort(Gc)),Ce});function $r(I,D){var re=[];if(!(I&&I.length))return re;var Ce=-1,qe=[],mt=I.length;for(D=Fi(D,3);++Ce<mt;){var Kt=I[Ce];D(Kt,Ce,I)&&(re.push(Kt),qe.push(Ce))}return jc(I,qe),re}function Xi(I){return I==null?I:hp.call(I)}function Io(I,D,re){var Ce=I==null?0:I.length;return Ce?(re&&typeof re!="number"&&Ro(I,D,re)?(D=0,re=Ce):(D=D==null?0:gs(D),re=re===n?Ce:gs(re)),oc(I,D,re)):[]}function hl(I,D){return Ef(I,D)}function fu(I,D,re){return ld(I,D,Fi(re,2))}function lc(I,D){var re=I==null?0:I.length;if(re){var Ce=Ef(I,D);if(Ce<re&&fd(I[Ce],D))return Ce}return-1}function qa(I,D){return Ef(I,D,!0)}function da(I,D,re){return ld(I,D,Fi(re,2),!0)}function Go(I,D){var re=I==null?0:I.length;if(re){var Ce=Ef(I,D,!0)-1;if(fd(I[Ce],D))return Ce}return-1}function Ks(I){return I&&I.length?$a(I):[]}function Ls(I,D){return I&&I.length?$a(I,Fi(D,2)):[]}function Gi(I){var D=I==null?0:I.length;return D?oc(I,1,D):[]}function Oo(I,D,re){return I&&I.length?(D=re||D===n?1:gs(D),oc(I,0,D<0?0:D)):[]}function Za(I,D,re){var Ce=I==null?0:I.length;return Ce?(D=re||D===n?1:gs(D),D=Ce-D,oc(I,D<0?0:D,Ce)):[]}function Qs(I,D){return I&&I.length?Rh(I,Fi(D,3),!1,!0):[]}function $l(I,D){return I&&I.length?Rh(I,Fi(D,3)):[]}var Pu=Ui(function(I){return Fa(qr(I,1,Pa,!0))}),Wc=Ui(function(I){var D=di(I);return Pa(D)&&(D=n),Fa(qr(I,1,Pa,!0),Fi(D,2))}),Nf=Ui(function(I){var D=di(I);return D=typeof D=="function"?D:n,Fa(qr(I,1,Pa,!0),n,D)});function Dh(I){return I&&I.length?Fa(I):[]}function cc(I,D){return I&&I.length?Fa(I,Fi(D,2)):[]}function ku(I,D){return D=typeof D=="function"?D:n,I&&I.length?Fa(I,n,D):[]}function sh(I){if(!(I&&I.length))return[];var D=0;return I=au(I,function(re){if(Pa(re))return D=xa(re.length,D),!0}),mr(D,function(re){return Ds(I,Vi(re))})}function hd(I,D){if(!(I&&I.length))return[];var re=sh(I);return D==null?re:Ds(re,function(Ce){return Qo(D,n,Ce)})}var AA=Ui(function(I,D){return Pa(I)?Oi(I,D):[]}),Ig=Ui(function(I){return Ga(au(I,Pa))}),mv=Ui(function(I){var D=di(I);return Pa(D)&&(D=n),Ga(au(I,Pa),Fi(D,2))}),k0=Ui(function(I){var D=di(I);return D=typeof D=="function"?D:n,Ga(au(I,Pa),n,D)}),uE=Ui(sh);function hk(I,D){return du(I||[],D||[],zn)}function dE(I,D){return du(I||[],D||[],Mh)}var fk=Ui(function(I){var D=I.length,re=D>1?I[D-1]:n;return re=typeof re=="function"?(I.pop(),re):n,hd(I,re)});function hE(I){var D=ct(I);return D.__chain__=!0,D}function fE(I,D){return D(I),I}function gv(I,D){return D(I)}var pE=Pf(function(I){var D=I.length,re=D?I[0]:0,Ce=this.__wrapped__,qe=function(mt){return Vr(mt,I)};return D>1||this.__actions__.length||!(Ce instanceof Ji)||!ua(re)?this.thru(qe):(Ce=Ce.slice(re,+re+(D?1:0)),Ce.__actions__.push({func:gv,args:[qe],thisArg:n}),new Ta(Ce,this.__chain__).thru(function(mt){return D&&!mt.length&&mt.push(n),mt}))});function AE(){return hE(this)}function mE(){return new Ta(this.value(),this.__chain__)}function gE(){this.__values__===n&&(this.__values__=jv(this.value()));var I=this.__index__>=this.__values__.length,D=I?n:this.__values__[this.__index__++];return{done:I,value:D}}function yE(){return this}function mb(I){for(var D,re=this;re instanceof _f;){var Ce=ht(re);Ce.__index__=0,Ce.__values__=n,D?qe.__wrapped__=Ce:D=Ce;var qe=Ce;re=re.__wrapped__}return qe.__wrapped__=I,D}function Cm(){var I=this.__wrapped__;if(I instanceof Ji){var D=I;return this.__actions__.length&&(D=new Ji(this)),D=D.reverse(),D.__actions__.push({func:gv,args:[Xi],thisArg:n}),new Ta(D,this.__chain__)}return this.thru(Xi)}function Pc(){return Tf(this.__wrapped__,this.__actions__)}var vE=po(function(I,D,re){fs.call(I,re)?++I[re]:Xn(I,re,1)});function yv(I,D,re){var Ce=ts(I)?bc:Js;return re&&Ro(I,D,re)&&(D=n),Ce(I,Fi(D,3))}function pk(I,D){var re=ts(I)?au:wo;return re(I,Fi(D,3))}var Ak=wp(In),vv=wp(dn);function xE(I,D){return qr(f_(I,D),1)}function jg(I,D){return qr(f_(I,D),Je)}function xv(I,D,re){return re=re===n?1:gs(re),qr(f_(I,D),re)}function _E(I,D){var re=ts(I)?ta:Zi;return re(I,Fi(D,3))}function wE(I,D){var re=ts(I)?Yp:Us;return re(I,Fi(D,3))}var mk=po(function(I,D,re){fs.call(I,re)?I[re].push(D):Xn(I,re,[D])});function gk(I,D,re,Ce){I=Lu(I)?I:Lg(I),re=re&&!Ce?gs(re):0;var qe=I.length;return re<0&&(re=xa(qe+re,0)),Bm(I)?re<=qe&&I.indexOf(D,re)>-1:!!qe&&dr(I,D,re)>-1}var yk=Ui(function(I,D,re){var Ce=-1,qe=typeof D=="function",mt=Lu(I)?jn(I.length):[];return Zi(I,function(Kt){mt[++Ce]=qe?Qo(D,Kt,re):fo(Kt,D,re)}),mt}),vk=po(function(I,D,re){Xn(I,re,D)});function f_(I,D){var re=ts(I)?Ds:Sf;return re(I,Fi(D,3))}function gb(I,D,re,Ce){return I==null?[]:(ts(D)||(D=D==null?[]:[D]),re=Ce?n:re,ts(re)||(re=re==null?[]:[re]),$i(I,D,re))}var xk=po(function(I,D,re){I[re?0:1].push(D)},function(){return[[],[]]});function L0(I,D,re){var Ce=ts(I)?wu:Ho,qe=arguments.length<3;return Ce(I,Fi(D,4),re,qe,Zi)}function _k(I,D,re){var Ce=ts(I)?Qd:Ho,qe=arguments.length<3;return Ce(I,Fi(D,4),re,qe,Us)}function Xa(I,D){var re=ts(I)?au:wo;return re(I,M0(Fi(D,3)))}function p_(I){var D=ts(I)?En:ym;return D(I)}function bE(I,D,re){(re?Ro(I,D,re):D===n)?D=1:D=gs(D);var Ce=ts(I)?Tn:Bf;return Ce(I,D)}function A_(I){var D=ts(I)?It:th;return D(I)}function m_(I){if(I==null)return 0;if(Lu(I))return Bm(I)?Sc(I):I.length;var D=Ka(I);return D==Dt||D==Xt?I.size:zl(I).length}function _v(I,D,re){var Ce=ts(I)?ce:aA;return re&&Ro(I,D,re)&&(D=n),Ce(I,Fi(D,3))}var CE=Ui(function(I,D){if(I==null)return[];var re=D.length;return re>1&&Ro(I,D[0],D[1])?D=[]:re>2&&Ro(D[0],D[1],D[2])&&(D=[D[0]]),$i(I,qr(D,1),[])}),wv=eA||function(){return Xo.Date.now()};function bv(I,D){if(typeof D!="function")throw new la(c);return I=gs(I),function(){if(--I<1)return D.apply(this,arguments)}}function g_(I,D,re){return D=re?n:D,D=I&&D==null?I.length:D,ac(I,le,n,n,n,n,D)}function Cv(I,D){var re;if(typeof D!="function")throw new la(c);return I=gs(I),function(){return--I>0&&(re=D.apply(this,arguments)),I<=1&&(D=n),re}}var yb=Ui(function(I,D,re){var Ce=W;if(re.length){var qe=Cu(re,bp(yb));Ce|=ne}return ac(I,Ce,D,re,qe)}),vb=Ui(function(I,D,re){var Ce=W|L;if(re.length){var qe=Cu(re,bp(vb));Ce|=ne}return ac(D,Ce,I,re,qe)});function y_(I,D,re){D=re?n:D;var Ce=ac(I,V,n,n,n,n,n,D);return Ce.placeholder=y_.placeholder,Ce}function v_(I,D,re){D=re?n:D;var Ce=ac(I,Z,n,n,n,n,n,D);return Ce.placeholder=v_.placeholder,Ce}function x_(I,D,re){var Ce,qe,mt,Kt,ln,Cn,or=0,ar=!1,yr=!1,Dr=!0;if(typeof I!="function")throw new la(c);D=Ad(D)||0,ka(re)&&(ar=!!re.leading,yr="maxWait"in re,mt=yr?xa(Ad(re.maxWait)||0,D):mt,Dr="trailing"in re?!!re.trailing:Dr);function hi(fl){var Of=Ce,vA=qe;return Ce=qe=n,or=fl,Kt=I.apply(vA,Of),Kt}function Ki(fl){return or=fl,ln=Ie(Hs,D),ar?hi(fl):Kt}function ys(fl){var Of=fl-Cn,vA=fl-or,Uv=D-Of;return yr?Va(Uv,mt-vA):Uv}function Qi(fl){var Of=fl-Cn,vA=fl-or;return Cn===n||Of>=D||Of<0||yr&&vA>=mt}function Hs(){var fl=wv();if(Qi(fl))return Ws(fl);ln=Ie(Hs,ys(fl))}function Ws(fl){return ln=n,Dr&&Ce?hi(fl):(Ce=qe=n,Kt)}function ah(){ln!==n&&cA(ln),or=0,Ce=Cn=qe=ln=n}function pu(){return ln===n?Kt:Ws(wv())}function lh(){var fl=wv(),Of=Qi(fl);if(Ce=arguments,qe=this,Cn=fl,Of){if(ln===n)return Ki(Cn);if(yr)return cA(ln),ln=Ie(Hs,D),hi(Cn)}return ln===n&&(ln=Ie(Hs,D)),Kt}return lh.cancel=ah,lh.flush=pu,lh}var SE=Ui(function(I,D){return rs(I,1,D)}),BE=Ui(function(I,D,re){return rs(I,Ad(D)||0,re)});function EE(I){return ac(I,_e)}function Sv(I,D){if(typeof I!="function"||D!=null&&typeof D!="function")throw new la(c);var re=function(){var Ce=arguments,qe=D?D.apply(this,Ce):Ce[0],mt=re.cache;if(mt.has(qe))return mt.get(qe);var Kt=I.apply(this,Ce);return re.cache=mt.set(qe,Kt)||mt,Kt};return re.cache=new(Sv.Cache||Hc),re}Sv.Cache=Hc;function M0(I){if(typeof I!="function")throw new la(c);return function(){var D=arguments;switch(D.length){case 0:return!I.call(this);case 1:return!I.call(this,D[0]);case 2:return!I.call(this,D[0],D[1]);case 3:return!I.call(this,D[0],D[1],D[2])}return!I.apply(this,D)}}function Bp(I){return Cv(2,I)}var TE=lA(function(I,D){D=D.length==1&&ts(D[0])?Ds(D[0],xo(Fi())):Ds(qr(D,1),xo(Fi()));var re=D.length;return Ui(function(Ce){for(var qe=-1,mt=Va(Ce.length,re);++qe<mt;)Ce[qe]=D[qe].call(this,Ce[qe]);return Qo(I,this,Ce)})}),xb=Ui(function(I,D){var re=Cu(D,bp(xb));return ac(I,ne,n,D,re)}),IE=Ui(function(I,D){var re=Cu(D,bp(IE));return ac(I,Y,n,D,re)}),wk=Pf(function(I,D){return ac(I,pe,n,n,n,D)});function bk(I,D){if(typeof I!="function")throw new la(c);return D=D===n?D:gs(D),Ui(I,D)}function Ck(I,D){if(typeof I!="function")throw new la(c);return D=D==null?0:xa(gs(D),0),Ui(function(re){var Ce=re[D],qe=$c(re,0,D);return Ce&&nc(qe,Ce),Qo(I,this,qe)})}function Sk(I,D,re){var Ce=!0,qe=!0;if(typeof I!="function")throw new la(c);return ka(re)&&(Ce="leading"in re?!!re.leading:Ce,qe="trailing"in re?!!re.trailing:qe),x_(I,D,{leading:Ce,maxWait:D,trailing:qe})}function Bk(I){return g_(I,1)}function _b(I,D){return xb(nh(D),I)}function jE(){if(!arguments.length)return[];var I=arguments[0];return ts(I)?I:[I]}function wb(I){return ei(I,S)}function FE(I,D){return D=typeof D=="function"?D:n,ei(I,S,D)}function bb(I){return ei(I,b|S)}function PE(I,D){return D=typeof D=="function"?D:n,ei(I,b|S,D)}function kE(I,D){return D==null||Ts(I,D,uc(D))}function fd(I,D){return I===D||I!==I&&D!==D}var LE=I0(Mn),ME=I0(function(I,D){return I>=D}),Sm=gp(function(){return arguments}())?gp:function(I){return Ya(I)&&fs.call(I,"callee")&&!Ha.call(I,"callee")},ts=jn.isArray,Fg=xs?xo(xs):yg;function Lu(I){return I!=null&&Ev(I.length)&&!gA(I)}function Pa(I){return Ya(I)&&Lu(I)}function NE(I){return I===!0||I===!1||Ya(I)&&eo(I)==Ot}var mA=gf||P_,__=ll?xo(ll):vg;function RE(I){return Ya(I)&&I.nodeType===1&&!Uh(I)}function w_(I){if(I==null)return!0;if(Lu(I)&&(ts(I)||typeof I=="string"||typeof I.splice=="function"||mA(I)||kg(I)||Sm(I)))return!I.length;var D=Ka(I);if(D==Dt||D==Xt)return!I.size;if(d(I))return!zl(I).length;for(var re in I)if(fs.call(I,re))return!1;return!0}function OE(I,D){return Xd(I,D)}function Cb(I,D,re){re=typeof re=="function"?re:n;var Ce=re?re(I,D):n;return Ce===n?Xd(I,D,n,re):!!Ce}function Bv(I){if(!Ya(I))return!1;var D=eo(I);return D==Ht||D==Me||typeof I.message=="string"&&typeof I.name=="string"&&!Uh(I)}function DE(I){return typeof I=="number"&&dp(I)}function gA(I){if(!ka(I))return!1;var D=eo(I);return D==Zt||D==pn||D==Qt||D==$t}function Sb(I){return typeof I=="number"&&I==gs(I)}function Ev(I){return typeof I=="number"&&I>-1&&I%1==0&&I<=Ue}function ka(I){var D=typeof I;return I!=null&&(D=="object"||D=="function")}function Ya(I){return I!=null&&typeof I=="object"}var b_=tc?xo(tc):mm;function UE(I,D){return I===D||dl(I,D,Eg(D))}function Bb(I,D,re){return re=typeof re=="function"?re:n,dl(I,D,Eg(D),re)}function Ek(I){return Eb(I)&&I!=+I}function Tk(I){if(l(I))throw new ci(a);return Yd(I)}function Ik(I){return I===null}function jk(I){return I==null}function Eb(I){return typeof I=="number"||Ya(I)&&eo(I)==hn}function Uh(I){if(!Ya(I)||eo(I)!=nn)return!1;var D=ff(I);if(D===null)return!0;var re=fs.call(D,"constructor")&&D.constructor;return typeof re=="function"&&re instanceof re&&bl.call(re)==lo}var Pg=oo?xo(oo):od;function Tv(I){return Sb(I)&&I>=-Ue&&I<=Ue}var Iv=Sh?xo(Sh):bf;function Bm(I){return typeof I=="string"||!ts(I)&&Ya(I)&&eo(I)==gn}function pd(I){return typeof I=="symbol"||Ya(I)&&eo(I)==rr}var kg=_l?xo(_l):sA;function zE(I){return I===n}function QE(I){return Ya(I)&&Ka(I)==Rn}function Fk(I){return Ya(I)&&eo(I)==wt}var Pk=I0(ja),HE=I0(function(I,D){return I<=D});function jv(I){if(!I)return[];if(Lu(I))return Bm(I)?Ua(I):Kc(I);if(Eh&&I[Eh])return $d(I[Eh]());var D=Ka(I),re=D==Dt?rc:D==Xt?Su:Lg;return re(I)}function Ep(I){if(!I)return I===0?I:0;if(I=Ad(I),I===Je||I===-Je){var D=I<0?-1:1;return D*Qe}return I===I?I:0}function gs(I){var D=Ep(I),re=D%1;return D===D?re?D-re:D:0}function Tb(I){return I?wr(gs(I),0,at):0}function Ad(I){if(typeof I=="number")return I;if(pd(I))return xe;if(ka(I)){var D=typeof I.valueOf=="function"?I.valueOf():I;I=ka(D)?D+"":D}if(typeof I!="string")return I===0?I:+I;I=Rr(I);var re=Ar.test(I);return re||Wr.test(I)?uf(I.slice(2),re?2:8):Cr.test(I)?xe:+I}function Ib(I){return rh(I,Mu(I))}function VE(I){return I?wr(gs(I),-Ue,Ue):I===0?I:0}function jo(I){return I==null?"":Hl(I)}var $E=dA(function(I,D){if(d(D)||Lu(D)){rh(D,uc(D),I);return}for(var re in D)fs.call(D,re)&&zn(I,re,D[re])}),jb=dA(function(I,D){rh(D,Mu(D),I)}),C_=dA(function(I,D,re,Ce){rh(D,Mu(D),I,Ce)}),GE=dA(function(I,D,re,Ce){rh(D,uc(D),I,Ce)}),KE=Pf(Vr);function Fv(I,D){var re=Fh(I);return D==null?re:Jn(re,D)}var WE=Ui(function(I,D){I=Ys(I);var re=-1,Ce=D.length,qe=Ce>2?D[2]:n;for(qe&&Ro(D[0],D[1],qe)&&(Ce=1);++re<Ce;)for(var mt=D[re],Kt=Mu(mt),ln=-1,Cn=Kt.length;++ln<Cn;){var or=Kt[ln],ar=I[or];(ar===n||fd(ar,Tc[or])&&!fs.call(I,or))&&(I[or]=mt[or])}return I}),qE=Ui(function(I){return I.push(n,jf),Qo(Mb,n,I)});function kk(I,D){return Sn(I,Fi(D,3),bo)}function Lk(I,D){return Sn(I,Fi(D,3),Ul)}function Mk(I,D){return I==null?I:Ia(I,Fi(D,3),Mu)}function Nk(I,D){return I==null?I:Is(I,Fi(D,3),Mu)}function Rk(I,D){return I&&bo(I,Fi(D,3))}function Ok(I,D){return I&&Ul(I,Fi(D,3))}function Dk(I){return I==null?[]:ca(I,uc(I))}function ZE(I){return I==null?[]:ca(I,Mu(I))}function Fb(I,D,re){var Ce=I==null?n:ra(I,D);return Ce===n?re:Ce}function Uk(I,D){return I!=null&&Lf(I,D,Gn)}function Pb(I,D){return I!=null&&Lf(I,D,Ic)}var kb=bg(function(I,D,re){D!=null&&typeof D.toString!="function"&&(D=As.call(D)),I[D]=re},T_(Nu)),Lb=bg(function(I,D,re){D!=null&&typeof D.toString!="function"&&(D=As.call(D)),fs.call(I,D)?I[D].push(re):I[D]=[re]},Fi),XE=Ui(fo);function uc(I){return Lu(I)?on(I):zl(I)}function Mu(I){return Lu(I)?on(I,!0):Cf(I)}function YE(I,D){var re={};return D=Fi(D,3),bo(I,function(Ce,qe,mt){Xn(re,D(Ce,qe,mt),Ce)}),re}function JE(I,D){var re={};return D=Fi(D,3),bo(I,function(Ce,qe,mt){Xn(re,qe,D(Ce,qe,mt))}),re}var e4=dA(function(I,D,re){yp(I,D,re)}),Mb=dA(function(I,D,re,Ce){yp(I,D,re,Ce)}),t4=Pf(function(I,D){var re={};if(I==null)return re;var Ce=!1;D=Ds(D,function(mt){return mt=Vc(mt,I),Ce||(Ce=mt.length>1),mt}),rh(I,F0(I),re),Ce&&(re=ei(re,b|T|S,pA));for(var qe=D.length;qe--;)cd(re,D[qe]);return re});function Nb(I,D){return r4(I,M0(Fi(D)))}var n4=Pf(function(I,D){return I==null?{}:oA(I,D)});function r4(I,D){if(I==null)return{};var re=Ds(F0(I),function(Ce){return[Ce]});return D=Fi(D),Iu(I,re,function(Ce,qe){return D(Ce,qe[0])})}function Pv(I,D,re){D=Vc(D,I);var Ce=-1,qe=D.length;for(qe||(qe=1,I=n);++Ce<qe;){var mt=I==null?n:I[et(D[Ce])];mt===n&&(Ce=qe,mt=re),I=gA(mt)?mt.call(I):mt}return I}function i4(I,D,re){return I==null?I:Mh(I,D,re)}function zk(I,D,re,Ce){return Ce=typeof Ce=="function"?Ce:n,I==null?I:Mh(I,D,re,Ce)}var s4=fA(uc),o4=fA(Mu);function Qk(I,D,re){var Ce=ts(I),qe=Ce||mA(I)||kg(I);if(D=Fi(D,4),re==null){var mt=I&&I.constructor;qe?re=Ce?new mt:[]:ka(I)?re=gA(mt)?Fh(ff(I)):{}:re={}}return(qe?ta:bo)(I,function(Kt,ln,Cn){return D(re,Kt,ln,Cn)}),re}function Hk(I,D){return I==null?!0:cd(I,D)}function Vk(I,D,re){return I==null?I:Nh(I,D,nh(re))}function $k(I,D,re,Ce){return Ce=typeof Ce=="function"?Ce:n,I==null?I:Nh(I,D,nh(re),Ce)}function Lg(I){return I==null?[]:Ea(I,uc(I))}function Gk(I){return I==null?[]:Ea(I,Mu(I))}function dc(I,D,re){return re===n&&(re=D,D=n),re!==n&&(re=Ad(re),re=re===re?re:0),D!==n&&(D=Ad(D),D=D===D?D:0),wr(Ad(I),D,re)}function Rf(I,D,re){return D=Ep(D),re===n?(re=D,D=0):re=Ep(re),I=Ad(I),ks(I,D,re)}function S_(I,D,re){if(re&&typeof re!="boolean"&&Ro(I,D,re)&&(D=re=n),re===n&&(typeof D=="boolean"?(re=D,D=n):typeof I=="boolean"&&(re=I,I=n)),I===n&&D===n?(I=0,D=1):(I=Ep(I),D===n?(D=I,I=0):D=Ep(D)),I>D){var Ce=I;I=D,D=Ce}if(re||I%1||D%1){var qe=um();return Va(I+qe*(D-I+Yu("1e-"+((qe+"").length-1))),D)}return Lh(I,D)}var Rb=If(function(I,D,re){return D=D.toLowerCase(),I+(re?kv(D):D)});function kv(I){return Qb(jo(I).toLowerCase())}function Mg(I){return I=jo(I),I&&I.replace(ti,ed).replace(Od,"")}function Kk(I,D,re){I=jo(I),D=Hl(D);var Ce=I.length;re=re===n?Ce:wr(gs(re),0,Ce);var qe=re;return re-=D.length,re>=0&&I.slice(re,qe)==D}function Wk(I){return I=jo(I),I&&gr.test(I)?I.replace(mi,Vd):I}function Lv(I){return I=jo(I),I&&ze.test(I)?I.replace(Re,"\\$&"):I}var qk=If(function(I,D,re){return I+(re?"-":"")+D.toLowerCase()}),Zk=If(function(I,D,re){return I+(re?" ":"")+D.toLowerCase()}),a4=E0("toLowerCase");function Ob(I,D,re){I=jo(I),D=gs(D);var Ce=D?Sc(I):0;if(!D||Ce>=D)return I;var qe=(D-Ce)/2;return T0(mf(qe),re)+I+T0(Af(qe),re)}function l4(I,D,re){I=jo(I),D=gs(D);var Ce=D?Sc(I):0;return D&&Ce<D?I+T0(D-Ce,re):I}function Db(I,D,re){I=jo(I),D=gs(D);var Ce=D?Sc(I):0;return D&&Ce<D?T0(D-Ce,re)+I:I}function Xk(I,D,re){return re||D==null?D=0:D&&(D=+D),mg(jo(I).replace(tt,""),D||0)}function c4(I,D,re){return(re?Ro(I,D,re):D===n)?D=1:D=gs(D),Fc(jo(I),D)}function B_(){var I=arguments,D=jo(I[0]);return I.length<3?D:D.replace(I[1],I[2])}var Ub=If(function(I,D,re){return I+(re?"_":"")+D.toLowerCase()});function Yk(I,D,re){return re&&typeof re!="number"&&Ro(I,D,re)&&(D=re=n),re=re===n?at:re>>>0,re?(I=jo(I),I&&(typeof D=="string"||D!=null&&!Pg(D))&&(D=Hl(D),!D&&Cc(I))?$c(Ua(I),0,re):I.split(D,re)):[]}var Jk=If(function(I,D,re){return I+(re?" ":"")+Qb(D)});function eL(I,D,re){return I=jo(I),re=re==null?0:wr(gs(re),0,I.length),D=Hl(D),I.slice(re,re+D.length)==D}function u4(I,D,re){var Ce=ct.templateSettings;re&&Ro(I,D,re)&&(D=n),I=jo(I),D=C_({},D,Ce,ud);var qe=C_({},D.imports,Ce.imports,ud),mt=uc(qe),Kt=Ea(qe,mt),ln,Cn,or=0,ar=D.interpolate||Ai,yr="__p += '",Dr=Wd((D.escape||Ai).source+"|"+ar.source+"|"+(ar===Mt?Pn:Ai).source+"|"+(D.evaluate||Ai).source+"|$","g"),hi="//# sourceURL="+(fs.call(D,"sourceURL")?(D.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Si+"]")+`
`;I.replace(Dr,function(Qi,Hs,Ws,ah,pu,lh){return Ws||(Ws=ah),yr+=I.slice(or,lh).replace(Ci,na),Hs&&(ln=!0,yr+=`' +
__e(`+Hs+`) +
'`),pu&&(Cn=!0,yr+=`';
`+pu+`;
__p += '`),Ws&&(yr+=`' +
((__t = (`+Ws+`)) == null ? '' : __t) +
'`),or=lh+Qi.length,Qi}),yr+=`';
`;var Ki=fs.call(D,"variable")&&D.variable;if(!Ki)yr=`with (obj) {
`+yr+`
}
`;else if(rn.test(Ki))throw new ci(i);yr=(Cn?yr.replace(Vn,""):yr).replace(Es,"$1").replace(ki,"$1;"),yr="function("+(Ki||"obj")+`) {
`+(Ki?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(ln?", __e = _.escape":"")+(Cn?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+yr+`return __p
}`;var ys=Vb(function(){return Bi(mt,hi+"return "+yr).apply(n,Kt)});if(ys.source=yr,Bv(ys))throw ys;return ys}function oh(I){return jo(I).toLowerCase()}function Mv(I){return jo(I).toUpperCase()}function N0(I,D,re){if(I=jo(I),I&&(re||D===n))return Rr(I);if(!I||!(D=Hl(D)))return I;var Ce=Ua(I),qe=Ua(D),mt=Bh(Ce,qe),Kt=Hd(Ce,qe)+1;return $c(Ce,mt,Kt).join("")}function zb(I,D,re){if(I=jo(I),I&&(re||D===n))return I.slice(0,Gd(I)+1);if(!I||!(D=Hl(D)))return I;var Ce=Ua(I),qe=Hd(Ce,Ua(D))+1;return $c(Ce,0,qe).join("")}function E_(I,D,re){if(I=jo(I),I&&(re||D===n))return I.replace(tt,"");if(!I||!(D=Hl(D)))return I;var Ce=Ua(I),qe=Bh(Ce,Ua(D));return $c(Ce,qe).join("")}function tL(I,D){var re=ye,Ce=he;if(ka(D)){var qe="separator"in D?D.separator:qe;re="length"in D?gs(D.length):re,Ce="omission"in D?Hl(D.omission):Ce}I=jo(I);var mt=I.length;if(Cc(I)){var Kt=Ua(I);mt=Kt.length}if(re>=mt)return I;var ln=re-Sc(Ce);if(ln<1)return Ce;var Cn=Kt?$c(Kt,0,ln).join(""):I.slice(0,ln);if(qe===n)return Cn+Ce;if(Kt&&(ln+=Cn.length-ln),Pg(qe)){if(I.slice(ln).search(qe)){var or,ar=Cn;for(qe.global||(qe=Wd(qe.source,jo(sr.exec(qe))+"g")),qe.lastIndex=0;or=qe.exec(ar);)var yr=or.index;Cn=Cn.slice(0,yr===n?ln:yr)}}else if(I.indexOf(Hl(qe),ln)!=ln){var Dr=Cn.lastIndexOf(qe);Dr>-1&&(Cn=Cn.slice(0,Dr))}return Cn+Ce}function d4(I){return I=jo(I),I&&br.test(I)?I.replace(hs,hf):I}var h4=If(function(I,D,re){return I+(re?" ":"")+D.toUpperCase()}),Qb=E0("toUpperCase");function Hb(I,D,re){return I=jo(I),D=re?n:D,D===n?Wn(I)?Kd(I):sn(I):I.match(D)||[]}var Vb=Ui(function(I,D){try{return Qo(I,n,D)}catch(re){return Bv(re)?re:new ci(re)}}),$b=Pf(function(I,D){return ta(D,function(re){re=et(re),Xn(I,re,yb(I[re],I))}),I});function f4(I){var D=I==null?0:I.length,re=Fi();return I=D?Ds(I,function(Ce){if(typeof Ce[1]!="function")throw new la(c);return[re(Ce[0]),Ce[1]]}):[],Ui(function(Ce){for(var qe=-1;++qe<D;){var mt=I[qe];if(Qo(mt[0],this,Ce))return Qo(mt[1],this,Ce)}})}function nL(I){return Nr(ei(I,b))}function T_(I){return function(){return I}}function yA(I,D){return I==null||I!==I?D:I}var p4=Vo(),A4=Vo(!0);function Nu(I){return I}function I_(I){return gm(typeof I=="function"?I:ei(I,b))}function rL(I){return C0(ei(I,b))}function iL(I,D){return Ql(I,ei(D,b))}var m4=Ui(function(I,D){return function(re){return fo(re,I,D)}}),g4=Ui(function(I,D){return function(re){return fo(I,re,D)}});function j_(I,D,re){var Ce=uc(D),qe=ca(D,Ce);re==null&&!(ka(D)&&(qe.length||!Ce.length))&&(re=D,D=I,I=this,qe=ca(D,uc(D)));var mt=!(ka(re)&&"chain"in re)||!!re.chain,Kt=gA(I);return ta(qe,function(ln){var Cn=D[ln];I[ln]=Cn,Kt&&(I.prototype[ln]=function(){var or=this.__chain__;if(mt||or){var ar=I(this.__wrapped__),yr=ar.__actions__=Kc(this.__actions__);return yr.push({func:Cn,args:arguments,thisArg:I}),ar.__chain__=or,ar}return Cn.apply(I,nc([this.value()],arguments))})}),I}function Nv(){return Xo._===this&&(Xo._=Jo),this}function Rv(){}function y4(I){return I=gs(I),Ui(function(D){return js(D,I)})}var Ov=xm(Ds),v4=xm(bc),x4=xm(ce);function zh(I){return Wa(I)?Vi(et(I)):Jd(I)}function Gb(I){return function(D){return I==null?n:ra(I,D)}}var R0=d_(),Em=d_(!0);function F_(){return[]}function P_(){return!1}function k_(){return{}}function _4(){return""}function L_(){return!0}function M_(I,D){if(I=gs(I),I<1||I>Ue)return[];var re=at,Ce=Va(I,at);D=Fi(D),I-=at;for(var qe=mr(Ce,D);++re<I;)D(re);return qe}function sL(I){return ts(I)?Ds(I,et):pd(I)?[I]:Kc(rt(jo(I)))}function oL(I){var D=++cl;return jo(I)+D}var aL=hA(function(I,D){return I+D},0),O0=Bg("ceil"),Kb=hA(function(I,D){return I/D},1),lL=Bg("floor");function w4(I){return I&&I.length?Di(I,Nu,Mn):n}function Wb(I,D){return I&&I.length?Di(I,Fi(D,2),Mn):n}function cL(I){return Yi(I,Nu)}function Dv(I,D){return Yi(I,Fi(D,2))}function Tm(I){return I&&I.length?Di(I,Nu,ja):n}function b4(I,D){return I&&I.length?Di(I,Fi(D,2),ja):n}var C4=hA(function(I,D){return I*D},1),N_=Bg("round"),qb=hA(function(I,D){return I-D},0);function uL(I){return I&&I.length?Mr(I,Nu):0}function S4(I,D){return I&&I.length?Mr(I,Fi(D,2)):0}return ct.after=bv,ct.ary=g_,ct.assign=$E,ct.assignIn=jb,ct.assignInWith=C_,ct.assignWith=GE,ct.at=KE,ct.before=Cv,ct.bind=yb,ct.bindAll=$b,ct.bindKey=vb,ct.castArray=jE,ct.chain=hE,ct.chunk=ut,ct.compact=xt,ct.concat=Bt,ct.cond=f4,ct.conforms=nL,ct.constant=T_,ct.countBy=vE,ct.create=Fv,ct.curry=y_,ct.curryRight=v_,ct.debounce=x_,ct.defaults=WE,ct.defaultsDeep=qE,ct.defer=SE,ct.delay=BE,ct.difference=an,ct.differenceBy=tn,ct.differenceWith=Ct,ct.drop=Rt,ct.dropRight=wn,ct.dropRightWhile=kn,ct.dropWhile=Qn,ct.fill=Jt,ct.filter=pk,ct.flatMap=xE,ct.flatMapDeep=jg,ct.flatMapDepth=xv,ct.flatten=Dn,ct.flattenDeep=Fn,ct.flattenDepth=bn,ct.flip=EE,ct.flow=p4,ct.flowRight=A4,ct.fromPairs=tr,ct.functions=Dk,ct.functionsIn=ZE,ct.groupBy=mk,ct.initial=hr,ct.intersection=Zr,ct.intersectionBy=kr,ct.intersectionWith=Fr,ct.invert=kb,ct.invertBy=Lb,ct.invokeMap=yk,ct.iteratee=I_,ct.keyBy=vk,ct.keys=uc,ct.keysIn=Mu,ct.map=f_,ct.mapKeys=YE,ct.mapValues=JE,ct.matches=rL,ct.matchesProperty=iL,ct.memoize=Sv,ct.merge=e4,ct.mergeWith=Mb,ct.method=m4,ct.methodOf=g4,ct.mixin=j_,ct.negate=M0,ct.nthArg=y4,ct.omit=t4,ct.omitBy=Nb,ct.once=Bp,ct.orderBy=gb,ct.over=Ov,ct.overArgs=TE,ct.overEvery=v4,ct.overSome=x4,ct.partial=xb,ct.partialRight=IE,ct.partition=xk,ct.pick=n4,ct.pickBy=r4,ct.property=zh,ct.propertyOf=Gb,ct.pull=zs,ct.pullAll=ls,ct.pullAllBy=ms,ct.pullAllWith=yi,ct.pullAt=zi,ct.range=R0,ct.rangeRight=Em,ct.rearg=wk,ct.reject=Xa,ct.remove=$r,ct.rest=bk,ct.reverse=Xi,ct.sampleSize=bE,ct.set=i4,ct.setWith=zk,ct.shuffle=A_,ct.slice=Io,ct.sortBy=CE,ct.sortedUniq=Ks,ct.sortedUniqBy=Ls,ct.split=Yk,ct.spread=Ck,ct.tail=Gi,ct.take=Oo,ct.takeRight=Za,ct.takeRightWhile=Qs,ct.takeWhile=$l,ct.tap=fE,ct.throttle=Sk,ct.thru=gv,ct.toArray=jv,ct.toPairs=s4,ct.toPairsIn=o4,ct.toPath=sL,ct.toPlainObject=Ib,ct.transform=Qk,ct.unary=Bk,ct.union=Pu,ct.unionBy=Wc,ct.unionWith=Nf,ct.uniq=Dh,ct.uniqBy=cc,ct.uniqWith=ku,ct.unset=Hk,ct.unzip=sh,ct.unzipWith=hd,ct.update=Vk,ct.updateWith=$k,ct.values=Lg,ct.valuesIn=Gk,ct.without=AA,ct.words=Hb,ct.wrap=_b,ct.xor=Ig,ct.xorBy=mv,ct.xorWith=k0,ct.zip=uE,ct.zipObject=hk,ct.zipObjectDeep=dE,ct.zipWith=fk,ct.entries=s4,ct.entriesIn=o4,ct.extend=jb,ct.extendWith=C_,j_(ct,ct),ct.add=aL,ct.attempt=Vb,ct.camelCase=Rb,ct.capitalize=kv,ct.ceil=O0,ct.clamp=dc,ct.clone=wb,ct.cloneDeep=bb,ct.cloneDeepWith=PE,ct.cloneWith=FE,ct.conformsTo=kE,ct.deburr=Mg,ct.defaultTo=yA,ct.divide=Kb,ct.endsWith=Kk,ct.eq=fd,ct.escape=Wk,ct.escapeRegExp=Lv,ct.every=yv,ct.find=Ak,ct.findIndex=In,ct.findKey=kk,ct.findLast=vv,ct.findLastIndex=dn,ct.findLastKey=Lk,ct.floor=lL,ct.forEach=_E,ct.forEachRight=wE,ct.forIn=Mk,ct.forInRight=Nk,ct.forOwn=Rk,ct.forOwnRight=Ok,ct.get=Fb,ct.gt=LE,ct.gte=ME,ct.has=Uk,ct.hasIn=Pb,ct.head=nr,ct.identity=Nu,ct.includes=gk,ct.indexOf=Yn,ct.inRange=Rf,ct.invoke=XE,ct.isArguments=Sm,ct.isArray=ts,ct.isArrayBuffer=Fg,ct.isArrayLike=Lu,ct.isArrayLikeObject=Pa,ct.isBoolean=NE,ct.isBuffer=mA,ct.isDate=__,ct.isElement=RE,ct.isEmpty=w_,ct.isEqual=OE,ct.isEqualWith=Cb,ct.isError=Bv,ct.isFinite=DE,ct.isFunction=gA,ct.isInteger=Sb,ct.isLength=Ev,ct.isMap=b_,ct.isMatch=UE,ct.isMatchWith=Bb,ct.isNaN=Ek,ct.isNative=Tk,ct.isNil=jk,ct.isNull=Ik,ct.isNumber=Eb,ct.isObject=ka,ct.isObjectLike=Ya,ct.isPlainObject=Uh,ct.isRegExp=Pg,ct.isSafeInteger=Tv,ct.isSet=Iv,ct.isString=Bm,ct.isSymbol=pd,ct.isTypedArray=kg,ct.isUndefined=zE,ct.isWeakMap=QE,ct.isWeakSet=Fk,ct.join=Xr,ct.kebabCase=qk,ct.last=di,ct.lastIndexOf=gi,ct.lowerCase=Zk,ct.lowerFirst=a4,ct.lt=Pk,ct.lte=HE,ct.max=w4,ct.maxBy=Wb,ct.mean=cL,ct.meanBy=Dv,ct.min=Tm,ct.minBy=b4,ct.stubArray=F_,ct.stubFalse=P_,ct.stubObject=k_,ct.stubString=_4,ct.stubTrue=L_,ct.multiply=C4,ct.nth=to,ct.noConflict=Nv,ct.noop=Rv,ct.now=wv,ct.pad=Ob,ct.padEnd=l4,ct.padStart=Db,ct.parseInt=Xk,ct.random=S_,ct.reduce=L0,ct.reduceRight=_k,ct.repeat=c4,ct.replace=B_,ct.result=Pv,ct.round=N_,ct.runInContext=yn,ct.sample=p_,ct.size=m_,ct.snakeCase=Ub,ct.some=_v,ct.sortedIndex=hl,ct.sortedIndexBy=fu,ct.sortedIndexOf=lc,ct.sortedLastIndex=qa,ct.sortedLastIndexBy=da,ct.sortedLastIndexOf=Go,ct.startCase=Jk,ct.startsWith=eL,ct.subtract=qb,ct.sum=uL,ct.sumBy=S4,ct.template=u4,ct.times=M_,ct.toFinite=Ep,ct.toInteger=gs,ct.toLength=Tb,ct.toLower=oh,ct.toNumber=Ad,ct.toSafeInteger=VE,ct.toString=jo,ct.toUpper=Mv,ct.trim=N0,ct.trimEnd=zb,ct.trimStart=E_,ct.truncate=tL,ct.unescape=d4,ct.uniqueId=oL,ct.upperCase=h4,ct.upperFirst=Qb,ct.each=_E,ct.eachRight=wE,ct.first=nr,j_(ct,function(){var I={};return bo(ct,function(D,re){fs.call(ct.prototype,re)||(I[re]=D)}),I}(),{chain:!1}),ct.VERSION=r,ta(["bind","bindKey","curry","curryRight","partial","partialRight"],function(I){ct[I].placeholder=ct}),ta(["drop","take"],function(I,D){Ji.prototype[I]=function(re){re=re===n?1:xa(gs(re),0);var Ce=this.__filtered__&&!D?new Ji(this):this.clone();return Ce.__filtered__?Ce.__takeCount__=Va(re,Ce.__takeCount__):Ce.__views__.push({size:Va(re,at),type:I+(Ce.__dir__<0?"Right":"")}),Ce},Ji.prototype[I+"Right"]=function(re){return this.reverse()[I](re).reverse()}}),ta(["filter","map","takeWhile"],function(I,D){var re=D+1,Ce=re==Ee||re==Ge;Ji.prototype[I]=function(qe){var mt=this.clone();return mt.__iteratees__.push({iteratee:Fi(qe,3),type:re}),mt.__filtered__=mt.__filtered__||Ce,mt}}),ta(["head","last"],function(I,D){var re="take"+(D?"Right":"");Ji.prototype[I]=function(){return this[re](1).value()[0]}}),ta(["initial","tail"],function(I,D){var re="drop"+(D?"":"Right");Ji.prototype[I]=function(){return this.__filtered__?new Ji(this):this[re](1)}}),Ji.prototype.compact=function(){return this.filter(Nu)},Ji.prototype.find=function(I){return this.filter(I).head()},Ji.prototype.findLast=function(I){return this.reverse().find(I)},Ji.prototype.invokeMap=Ui(function(I,D){return typeof I=="function"?new Ji(this):this.map(function(re){return fo(re,I,D)})}),Ji.prototype.reject=function(I){return this.filter(M0(Fi(I)))},Ji.prototype.slice=function(I,D){I=gs(I);var re=this;return re.__filtered__&&(I>0||D<0)?new Ji(re):(I<0?re=re.takeRight(-I):I&&(re=re.drop(I)),D!==n&&(D=gs(D),re=D<0?re.dropRight(-D):re.take(D-I)),re)},Ji.prototype.takeRightWhile=function(I){return this.reverse().takeWhile(I).reverse()},Ji.prototype.toArray=function(){return this.take(at)},bo(Ji.prototype,function(I,D){var re=/^(?:filter|find|map|reject)|While$/.test(D),Ce=/^(?:head|last)$/.test(D),qe=ct[Ce?"take"+(D=="last"?"Right":""):D],mt=Ce||/^find/.test(D);qe&&(ct.prototype[D]=function(){var Kt=this.__wrapped__,ln=Ce?[1]:arguments,Cn=Kt instanceof Ji,or=ln[0],ar=Cn||ts(Kt),yr=function(Hs){var Ws=qe.apply(ct,nc([Hs],ln));return Ce&&Dr?Ws[0]:Ws};ar&&re&&typeof or=="function"&&or.length!=1&&(Cn=ar=!1);var Dr=this.__chain__,hi=!!this.__actions__.length,Ki=mt&&!Dr,ys=Cn&&!hi;if(!mt&&ar){Kt=ys?Kt:new Ji(this);var Qi=I.apply(Kt,ln);return Qi.__actions__.push({func:gv,args:[yr],thisArg:n}),new Ta(Qi,Dr)}return Ki&&ys?I.apply(this,ln):(Qi=this.thru(yr),Ki?Ce?Qi.value()[0]:Qi.value():Qi)})}),ta(["pop","push","shift","sort","splice","unshift"],function(I){var D=Bc[I],re=/^(?:push|sort|unshift)$/.test(I)?"tap":"thru",Ce=/^(?:pop|shift)$/.test(I);ct.prototype[I]=function(){var qe=arguments;if(Ce&&!this.__chain__){var mt=this.value();return D.apply(ts(mt)?mt:[],qe)}return this[re](function(Kt){return D.apply(ts(Kt)?Kt:[],qe)})}}),bo(Ji.prototype,function(I,D){var re=ct[D];if(re){var Ce=re.name+"";fs.call(pp,Ce)||(pp[Ce]=[]),pp[Ce].push({name:D,func:re})}}),pp[Fu(n,L).name]=[{name:"wrapper",func:n}],Ji.prototype.clone=hm,Ji.prototype.reverse=Ph,Ji.prototype.value=kh,ct.prototype.at=pE,ct.prototype.chain=AE,ct.prototype.commit=mE,ct.prototype.next=gE,ct.prototype.plant=mb,ct.prototype.reverse=Cm,ct.prototype.toJSON=ct.prototype.valueOf=ct.prototype.value=Pc,ct.prototype.first=ct.prototype.head,Eh&&(ct.prototype[Eh]=yE),ct},aa=td();ma?((ma.exports=aa)._=aa,yo._=aa):Xo._=aa}).call(Qm)})(AF,AF.exports);AF.exports;const yct=()=>{const[e,t]=q.useState(!1),[n,r]=q.useState(null),s=Mo(),[a,c]=q.useState(!1),[i,f]=q.useState(!1),[g,y]=q.useState(null),[b,T]=q.useState(null),[S,U]=q.useState(null),[N,W]=q.useState(!1),[L,Q]=q.useState(!1),[V,Z]=q.useState(!1),[ne,Y]=q.useState(!0),[le,pe]=q.useState({name:"",email:"",mobileno:"",cnic:"",address:""}),_e=()=>{U(xe=>({...xe,password:"********"})),t(!0)},ye=()=>{let xe=!0,at={};return S.name?/^[A-Za-z\s]+$/.test(S.name)||(at.name="Name must contain only alphabets",xe=!1):(at.name="Name is required*",xe=!1),S.email?/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(S.email)||(at.email="Please enter a valid email address",xe=!1):(at.email="email is required*",xe=!1),S.mobileno?/^[0-9]+$/.test(S.mobileno)?S.mobileno.length<11&&(at.mobileno="Mobile no must be exactly 11 digits",xe=!1):(at.mobileno="Mobile no must contain only digits",xe=!1):(at.mobileno="Mobile no is required*",xe=!1),S.password?S.password.length<8&&(at.password="Password contain minimum 8 characters",xe=!1):(at.password="Password is required*",xe=!1),!S.cnic&&n.cnic!==null?(at.cnic="CNIC is required*",xe=!1):!/^[0-9]{13}$/.test(S.cnic)&&n.cnic!==null&&(at.cnic="CNIC must be exactly 13 digits",xe=!1),!S.address&&n.address!==null&&(at.address="Address is required*",xe=!1),pe(at),xe},he=async()=>{if(ye()){try{Y(!1);const xe=await fetch("https://swiftlogix.cc/api/verifyedit-customer",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({editUserData:S,sendEmail:n==null?void 0:n.email})});xe.ok||console.log("Error in response");const at=await xe.json(),we=[];if(!at.success){we[at.name]=at.message,pe(we);return}Q(!0)}catch{}t(!1)}},be=async()=>{try{const xe=await fetch("https://swiftlogix.cc/api/saveedit-customer",{method:"PUT",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({editUserData:S})});xe.ok||console.log("Error in response"),(await xe.json()).success?(Y(!0),W(!N),qi.success("Your profile has been updated successfully.")):(Y(!0),qi.error("Failed to update profile."))}catch{qi.error("Failed to update profile.")}t(!1)},Te=()=>{U(n),pe({name:"",email:"",mobileno:"",cnic:"",address:""}),t(!1)};q.useEffect(()=>{(async()=>{try{const we=await(await fetch("https://swiftlogix.cc/api/customer-profile",{credentials:"include"})).json();if(we.success){r(we.userData),U(we.userData);return}s("/login")}catch(at){console.error("Error fetching data:",at)}})()},[]);const Ee=()=>{c(!0)},Ne=()=>{f(!0)},Ge=xe=>{const{name:at,value:we}=xe.target;at=="customerCnic"?y(we):T(we),pe({[at]:""})},Je=xe=>{const{name:at,value:we}=xe.target;U({...S,[at]:we}),pe({[at]:""})};q.useEffect(()=>{(async()=>{try{const we=await(await fetch("https://swiftlogix.cc/api/customer-profile",{credentials:"include"})).json();if(we.success){r(we.userData),U(we.userData);return}s("/login")}catch(at){console.error("Error fetching data:",at)}})()},[N]);const Ue=async()=>{let xe={};if(!g){xe.cnic="CNIC is required*",pe(xe);return}if(!/^[0-9]{13}$/.test(g)){xe.cnic="CNIC must be exactly 13 digits",pe(xe);return}try{const at=await fetch("https://swiftlogix.cc/api/add-cnic",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerCnic:g})});if(!at.ok){console.log("Error in response");return}const we=await at.json(),me=[];if(!we.success){me.cnic=we.message,pe(me),qi.error("Failed to added CNIC.");return}c(!1),pe(me),W(!N),qi.success("Your CNIC has been added successfully.")}catch{qi.error("Failed to added CNIC.")}},Qe=async()=>{try{let xe={};if(!b){xe.address="Address is required*",pe(xe);return}const at=await fetch("https://swiftlogix.cc/api/add-address",{method:"PATCH",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({customerAddress:b})});if(!at.ok){console.log("Error in response");return}(await at.json()).success&&(qi.success("Your address has been added successfully."),f(!1),W(!N)),qi.error("Failed to added address.")}catch{qi.error("Failed to added address.")}};return A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row min-h-screen",children:[A.jsx(v0,{}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsxs("div",{className:"flex-1 min-[1226px]:ml-[18vw] w-screen",children:[A.jsx("div",{className:"w-full shadow-xl font-bold text-[#009688] bg-white flex justify-center items-center p-6 md:p-8",children:A.jsx("div",{className:"text-3xl md:text-5xl font-semibold",children:"My Profile"})}),A.jsx("div",{className:"w-full flex justify-center mt-4 px-4",children:A.jsxs("div",{className:"w-full md:w-[60%] flex items-center justify-between p-4 border bg-[#009688] rounded-lg",children:[A.jsxs("div",{className:"w-full flex items-center gap-4 flex-wrap",children:[A.jsx("img",{src:vfe,alt:"",width:72,className:"invert"}),e?A.jsx("input",{onChange:Je,autoFocus:!0,type:"text",name:"name",value:S==null?void 0:S.name,className:"w-full bg-transparent text-[22px] md:text-[28px] font-semibold text-white focus:outline-none"}):A.jsx("p",{className:"text-[22px] md:text-[28px] text-white font-bold",children:n==null?void 0:n.name})]}),e&&A.jsx(OA,{size:24,className:"cursor-pointer"})]})}),A.jsx("div",{className:"w-full flex justify-center",children:le.name&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:le.name})}),A.jsx("div",{className:"w-full flex flex-col md:flex-row gap-6 md:gap-8 mt-8 px-4 justify-center text-gray-700",children:[{label:"Email",icon:LQ,name:"email",value:S==null?void 0:S.email,error:le.email,data:n==null?void 0:n.email},{label:"Mobile No",icon:MQ,name:"mobileno",value:S==null?void 0:S.mobileno,error:le.mobileno,data:n==null?void 0:n.mobileno,maxLength:11}].map((xe,at)=>A.jsxs("div",{className:"flex-1 flex items-center p-3 border rounded-lg bg-white",children:[A.jsx("img",{src:xe.icon,alt:"",className:"w-8 mr-3"}),A.jsxs("div",{className:"w-full",children:[A.jsx("h1",{className:"font-bold text-lg",children:xe.label}),e?A.jsx("input",{onChange:Je,type:"text",name:xe.name,maxLength:xe.maxLength||void 0,value:xe.value,className:"w-full focus:outline-none"}):A.jsx("p",{children:xe.data}),xe.error&&A.jsx("p",{className:"text-red-500 text-sm mt-1",children:xe.error})]}),e&&A.jsx(OA,{size:24,className:"cursor-pointer ml-2"})]},at))}),A.jsxs("div",{className:"w-full flex flex-col md:flex-row gap-6 md:gap-8 mt-8 px-4 justify-center text-gray-700",children:[A.jsxs("div",{className:"flex-1 flex items-center p-3 border rounded-lg bg-white",children:[A.jsx("img",{src:yfe,alt:"",className:"w-8 mr-3"}),A.jsxs("div",{className:"w-full",children:[A.jsx("h1",{className:"font-bold text-lg",children:"Password"}),e?A.jsx("input",{onChange:Je,type:"text",name:"password",value:S==null?void 0:S.password,className:"w-full focus:outline-none"}):A.jsx("p",{className:"overflow-hidden",children:"********"}),le.password&&A.jsx("p",{className:"text-red-500 text-sm mt-1",children:le.password})]}),e&&A.jsx(OA,{size:24,className:"cursor-pointer ml-2"})]}),A.jsxs("div",{className:"flex-1 flex items-center p-3 border rounded-lg bg-white",children:[A.jsx("img",{src:pF,alt:"Card",className:"w-8 mr-3"}),A.jsxs("div",{className:"w-full",children:[A.jsx("h1",{className:"font-bold text-lg",children:"CNIC"}),A.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e&&n.cnic?A.jsx("input",{onChange:Je,type:"text",name:"cnic",value:S==null?void 0:S.cnic,maxLength:13,className:"w-full focus:outline-none"}):A.jsx("p",{children:n==null?void 0:n.cnic}),a&&A.jsxs(A.Fragment,{children:[A.jsx("input",{onChange:Ge,maxLength:13,type:"text",name:"customerCnic",placeholder:"Enter Cnic",value:g,className:"focus:outline-none rounded-md pl-1"}),A.jsx(i0,{onClick:Ue,className:"cursor-pointer text-[#FF7043]"})]}),!a&&!(n!=null&&n.cnic)&&A.jsxs(A.Fragment,{children:[A.jsx("p",{onClick:Ee,className:"cursor-pointer",children:"Add"}),A.jsx(sS,{onClick:Ee,className:"cursor-pointer"})]}),le.cnic&&A.jsx("p",{className:"text-red-500 text-sm mt-1",children:le.cnic})]})]}),e&&(n==null?void 0:n.cnic)&&A.jsx(OA,{size:24,className:"cursor-pointer ml-2"})]})]}),A.jsx("div",{className:"w-full mt-8 px-4 flex flex-col items-center",children:A.jsxs("div",{className:"w-full md:w-[70%] flex items-center p-3 border rounded-lg bg-white",children:[A.jsx("img",{src:NQ,alt:"Address",className:"w-8 mr-3"}),A.jsxs("div",{className:"w-full",children:[A.jsx("h1",{className:"font-bold text-lg",children:"Address"}),A.jsxs("div",{className:"flex gap-2 flex-wrap",children:[e&&n.address?A.jsx("input",{onChange:Je,type:"text",name:"address",value:S==null?void 0:S.address,className:"w-full focus:outline-none"}):A.jsx("p",{children:n==null?void 0:n.address}),i&&A.jsxs("div",{className:"w-full flex gap-2",children:[A.jsx("input",{onChange:Ge,type:"text",name:"customerAddress",placeholder:"Enter address",value:b,className:"w-full focus:outline-none rounded-md pl-1"}),A.jsx(i0,{onClick:Qe,className:"cursor-pointer text-[#FF7043]"})]}),!i&&!(n!=null&&n.address)&&A.jsxs(A.Fragment,{children:[A.jsx("p",{onClick:Ne,className:"cursor-pointer",children:"Add"}),A.jsx(sS,{onClick:Ne,className:"cursor-pointer"})]}),le.address&&A.jsx("p",{className:"text-red-500 text-sm mt-1",children:le.address})]})]}),e&&(n==null?void 0:n.address)&&A.jsx(OA,{size:24,className:"cursor-pointer ml-2"})]})}),A.jsxs("div",{className:"w-full flex flex-col md:flex-row justify-center items-center gap-4 mt-8 mb-12",children:[!e&&A.jsxs("div",{onClick:_e,className:"flex items-center gap-2 bg-[#009688] text-white px-6 py-3 rounded-lg cursor-pointer",children:[A.jsx(OA,{size:20}),A.jsx("span",{children:"Edit"})]}),e&&A.jsxs(A.Fragment,{children:[A.jsx("div",{onClick:Te,className:"bg-[#FF7043] text-white px-6 py-3 rounded-lg cursor-pointer",children:"Cancel"}),A.jsx("div",{onClick:he,className:"bg-[#009688] text-white px-6 py-3 rounded-lg cursor-pointer",children:ne?"Save":"Saving..."})]})]})]}),A.jsx(cb,{}),L&&A.jsx(gct,{oldemail:n.email,email:S.email,userId:n==null?void 0:n._id,setOTPCard:Q,setOTPVerified:Z,saveeditDetails:be})]})},vct=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState([]);return q.useEffect(()=>{(async()=>{try{const i=await(await fetch("https://swiftlogix.cc/api/wallet",{credentials:"include"})).json();if(i.success){n(i.points),s(i.transactions);return}e("/login")}catch(c){console.error("Error fetching data:",c)}})()},[]),A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row",children:[A.jsx(v0,{}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsxs("div",{className:"min-[1226px]:ml-[18vw] w-full",children:[A.jsx("div",{className:"w-full shadow-xl font-bold text-[#009688] bg-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-center",children:"My Wallet"})}),A.jsx("div",{className:"p-4 sm:p-6 md:p-8",children:A.jsxs("h2",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-[#009688] mb-4",children:["Total Points: ",t]})}),A.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[A.jsx("h2",{className:"text-xl sm:text-2xl md:text-3xl font-semibold text-[#009688] mb-4",children:"Points History"}),A.jsx("div",{className:"bg-white p-4 sm:p-6 rounded-lg shadow-md overflow-x-auto",children:A.jsx("ul",{children:r.map((a,c)=>A.jsxs("li",{className:"flex flex-col sm:flex-row justify-between py-2 border-b",children:[A.jsxs("span",{className:`text-lg ${a.transactionType==="Added"?"text-[#4BB543]":"text-[#FC100D]"}`,children:[a.transactionType==="Added"?`+${a.transactionAmount}`:`- ${a.transactionAmount}`," points"]}),A.jsx("span",{className:"text-sm text-gray-700 mt-1 sm:mt-0",children:a.datetime})]},c))})})]})]})]})},xct=({onClose:e})=>A.jsxs("div",{className:"w-[25vw] bg-white absolute bottom-[5vw] left-[17vw] text-gray-700 p-4 shadow-2xl border rounded-2xl ",children:[A.jsxs("div",{className:"flex justify-between",children:[A.jsx("div",{className:"font-semibold text-lg",children:"Settings"}),A.jsx("div",{onClick:e,children:A.jsx("img",{src:cE,alt:"",className:"w-[24px] cursor-pointer"})})]}),A.jsx("div",{className:"my-2 w-full border border-gray-300"}),A.jsxs("div",{className:"flex flex-col gap-4",children:[A.jsxs("div",{className:"flex justify-between items-center rounded-lg",children:[A.jsx("div",{children:"Theme"}),A.jsx("div",{className:"border rounded-lg p-1",children:A.jsx("select",{name:"theme",id:"theme",children:A.jsx("option",{value:"light",selected:!0,children:"Light"})})})]}),A.jsxs("div",{className:"flex justify-between",children:[A.jsx("div",{children:"Language"}),A.jsx("div",{className:"border p-1 rounded-lg",children:A.jsx("select",{name:"language",id:"language",children:A.jsx("option",{value:"english",selected:!0,children:"English"})})})]})]})]}),_ct=({onClose:e})=>{const[t,n]=q.useState("Successfully accepted shipment");return A.jsxs("div",{className:"w-[25vw] ml-[17vw] absolute top-[20vh] overflow-y-scroll max-h-[70vh]  min-h-[50vh] border p-2  rounded-xl bg-white shadow-lg",children:[A.jsxs("div",{className:"w-full flex justify-between items-center  ",children:[A.jsx("button",{className:"py-1 px-2 font-semibold  text-white bg-[#009688] rounded-lg",children:"Clear all"}),A.jsx("div",{onClick:e,children:A.jsx("img",{src:cE,alt:"",className:"w-[24px] cursor-pointer"})})]}),A.jsx("div",{className:"my-2 w-full border border-gray-300 mb-4"}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]}),A.jsxs("div",{className:"w-full bg-white text-gray-700 border mb-1  p-4 rounded-lg shadow-md flex justify-between items-center",children:[A.jsx("span",{children:t}),A.jsx("button",{className:"text-[#FF7043] font-bold text-xl cursor-pointer",children:"×"})]})]})},dk=()=>{const e="24px",[t,n]=q.useState(!1),[r,s]=q.useState(!1),[a,c]=q.useState(!1),i=S=>S.isActive?"border rounded-lg":"",f=()=>{n(!0)},g=()=>{n(!1)},y=()=>{s(!1)},b=async()=>{try{const U=await(await fetch("https://swiftlogix.cc/api/rider-logout",{credentials:"include"})).json();U.success&&window.location.replace(U.redirect)}catch{}},T=()=>c(!a);return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"min-[1226px]:hidden fixed top-4 left-4 z-50",children:A.jsx("button",{onClick:T,className:"text-white bg-teal-600 p-2 rounded-lg shadow-lg",children:a?A.jsx(RF,{size:20}):A.jsx(LF,{size:20})})}),A.jsxs("div",{className:`fixed  top-0 left-0 h-full z-40 bg-teal-600 text-white p-4 w-[70vw] sm:w-[50vw] min-[1226px]:w-[18vw] transition-transform duration-300 ease-in-out 
        ${a?"translate-x-0":"-translate-x-full"} min-[1226px]:translate-x-0 flex flex-col`,children:[A.jsxs("div",{className:"w-full max-w-screen-md mx-auto shadow-2xl rounded-xl p-4 sm:p-6 md:p-8 flex flex-col items-center justify-center mb-6",children:[A.jsx("h1",{className:"text-2xl sm:text-2xl md:text-2xl  min-[1226px]:text-3xl min-[1486px]:text-[38px] font-bold text-center",children:"SWIFTLOGIX"}),A.jsx("h1",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-bold text-center mt-2",children:"Rider Portal"})]}),A.jsx("div",{className:"flex-grow",children:A.jsxs("ul",{className:"font-semibold shadow-sm flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-xl",children:[A.jsx(ss,{className:i,to:"/rider-dashboard",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(mB,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Dashboard"})]})}),A.jsx(ss,{className:i,to:"/rider-profile",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(OF,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Profile"})]})}),A.jsx(ss,{className:i,to:"/rider-wallet",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(nne,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Wallet"})]})}),A.jsx(ss,{className:i,to:"/rider-shipments",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(t8,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Shipments"})]})})]})}),A.jsxs("div",{className:"mt-auto",children:[A.jsx("ul",{className:"font-semibold flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-lg",children:A.jsxs("li",{onClick:f,className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(r8,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Settings"})]})}),A.jsx("ul",{onClick:b,className:"font-semibold flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-lg",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(i8,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Log out"})]})})]}),r&&A.jsx(_ct,{onClose:y}),t&&A.jsx(xct,{onClose:g})]})]})};function wct({currentCity:e,setCurrentCity:t,originCityCoords:n,destinationCityCoords:r,inTransit:s,transitShipments:a}){const c=i=>{t(i)};return A.jsx("div",{className:" bg-white flex flex-col",children:A.jsx("div",{className:"flex justify-center items-center gap-4 ",children:A.jsx(Ude,{updateAddress:c,originCityCoords:n,destinationCityCoords:r,inTransit:s,transitShipments:a})})})}const kJ=cw("https://swiftlogix.cc/api",{reconnection:!0,reconnectionAttempts:10,reconnectionDelay:1e3,transports:["websocket"],autoConnect:!1}),LJ=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(!1),[a,c]=q.useState(null),[i,f]=q.useState([]),[g,y]=q.useState(!1),[b,T]=q.useState(null),[S,U]=q.useState(null),[N,W]=q.useState(null),[L,Q]=q.useState(!1),[V,Z]=q.useState([]),[ne,Y]=q.useState(!1),[le,pe]=q.useState(null);q.useEffect(()=>(kJ.connect(),()=>{kJ.disconnect()}),[]),q.useEffect(()=>{(async()=>{try{const Ee=await(await fetch("https://swiftlogix.cc/api/rider-dashboard",{credentials:"include"})).json();if(Ee.success){c(Ee.userData);return}e("/rider-login")}catch(Te){console.error("Error fetching data:",Te)}})()},[]),q.useEffect(()=>{(async()=>{try{const Ee=await(await fetch("https://swiftlogix.cc/api/get-deliveries",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({currentCity:t})})).json();if(Ee.success){f(Ee.deliveries),console.log(i);return}}catch(Te){console.error("Error fetching data:",Te)}})()},[t,g]);const _e=()=>{setTimeout(()=>{y(!g),T(null)},1e3)},ye=()=>{setTimeout(()=>{Y(!1)},2e3)},he=async be=>{try{if(L){Y(!0),ye();return}pe(be);const Te=await fetch("https://swiftlogix.cc/api/assigned-delivery",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(i[be])});Te.ok||console.log("Error in response");const Ee=await Te.json();Ee.success,T(Ee.message),pe(null),_e()}catch(Te){console.error("Error Assigned Delivery:",Te)}};return q.useEffect(()=>{(async()=>{try{const Te=await fetch("https://swiftlogix.cc/api/check-pick-shipment",{credentials:"include"});Te.ok||console.log("Response error");const Ee=await Te.json();if(Ee.success){const Ne=Ee.transitShipments;Z(Ne),U(Ee.originCityCoords),W(Ee.destinationCityCoords),Q(Ee.success);return}}catch(Te){console.error("Error Fetching Data about rider picked shipment:",Te)}})()},[]),A.jsxs("div",{className:"flex",children:[A.jsx(dk,{}),A.jsxs("div",{className:"flex-1 min-[1226px]:ml-[18vw] h-screen relative bg-white overflow-y-auto",children:[A.jsx(Bs,{}),A.jsxs("div",{className:"flex-1 h-full bg-white  overflow-y-auto",children:[A.jsx("div",{className:"w-full h-[20%] flex min-[1025px]:justify-between max-[1025px]:justify-center items-center px-6 mb-6",children:A.jsxs("div",{className:"flex items-center gap-3 shadow-xl rounded-xl px-4 py-2",children:[A.jsx("h2",{className:"text-2xl sm:text-4xl text-[#009688] font-bold",children:"Hello,"}),A.jsx("p",{className:"text-2xl sm:text-4xl text-gray-700 font-bold",children:a==null?void 0:a.name})]})}),A.jsxs("div",{className:`absolute max-sm:top-[20%] top-[15%] max-[1025px]:left-0 right-0 mx-auto min-[1025px]:mx-0 min-[1025px]:top-10 min-[1025px]:right-10  w-[80%] md:w-[20vw] flex justify-between items-center text-[#009688] px-4 shadow-md py-2 cursor-pointer ${r?"":"rounded-full"}  transition-all duration-300`,onClick:()=>s(!r),children:[A.jsx("span",{className:"text-xl font-semibold",children:"Deliveries"}),A.jsx("span",{className:"hover:border",children:r?A.jsx(Jte,{size:24,color:"#FF7043"}):A.jsx(Yte,{size:24,color:"#FF7043"})})]}),r&&A.jsxs("div",{className:"absolute max-[1025px]:left-0 right-0 mx-auto min-[1025px]:mx-0 max-sm:top-[25%] top-[20%] min-[1025px]:right-10 min-[1025px]:top-[10%]  md:w-[20vw] bg-white shadow-lg rounded-b-lg p-4 mt-2 z-10 max-h-[70vh] sm:max-h-[80vh] overflow-y-auto scrollbar-thin scrollbar-thumb-gray-400 scrollbar-track-gray-200",children:[i.length===0&&A.jsx("span",{className:"flex justify-center text-gray-700",children:"Sorry! No Deliveries."}),A.jsx("ul",{className:"space-y-4",children:i.map((be,Te)=>A.jsxs("li",{className:"text-gray-700 p-4 border rounded-lg shadow-sm bg-white text-sm sm:text-base",children:[A.jsxs("div",{className:"flex max-lg:flex-row flex-col min-[1226px]:flex-row justify-between mb-2 gap-1",children:[A.jsxs("span",{children:[A.jsx("strong",{children:"From:"})," ",be==null?void 0:be.originCity]}),A.jsxs("span",{children:[A.jsx("strong",{children:"To:"})," ",be==null?void 0:be.destinationCity]})]}),A.jsxs("div",{className:"flex max-lg:flex-row flex-col  min-[1226px]:flex-row justify-between mb-2 gap-1",children:[A.jsxs("span",{children:[A.jsx("strong",{children:"Weight:"})," ",be==null?void 0:be.weight," Kg"]}),A.jsxs("span",{children:[A.jsx("strong",{children:"Pieces:"})," ",be==null?void 0:be.pieces]})]}),A.jsxs("div",{className:"flex max-lg:flex-row flex-col  min-[1226px]:flex-row justify-between mb-2 gap-1",children:[A.jsxs("span",{children:[A.jsx("strong",{children:"Date:"})," ",be==null?void 0:be.deliveryDate]}),A.jsxs("span",{children:[A.jsx("strong",{children:"Price:"})," ",be==null?void 0:be.totalPrice]})]}),A.jsx("div",{className:"flex  flex-col   min-[1226px]:flex-row gap-2",children:A.jsx("button",{onClick:()=>he(Te),className:"w-full sm:w-auto px-4 py-2 bg-[#009688] text-white rounded-lg font-semibold transition-all",children:le==Te?"Processing":"Accept"})})]},Te))})]}),A.jsx("div",{className:"ml-[2vw]",children:A.jsx(wct,{currentCity:t,setCurrentCity:n,originCityCoords:S,destinationCityCoords:N,inTransit:L,transitShipments:V})})]}),b&&A.jsx("div",{className:"w-full flex justify-center items-center fixed inset-0 px-4 sm:px-6 lg:px-8",children:A.jsxs("div",{className:"w-full max-w-md sm:max-w-lg p-5 md:max-w-xl lg:max-w-2xl bg-white rounded-3xl shadow-2xl flex flex-col items-center  relative transition-all duration-300",children:[b==="Shipment assigned successfully."&&A.jsx("img",{src:Ld,alt:"Success",className:"w-16 sm:w-20 shadow-2xl rounded-full absolute -top-8"}),A.jsx("p",{className:"text-gray-700 text-center text-xl sm:text-2xl md:text-3xl lg:text-4xl font-semibold",children:b})]})}),ne&&A.jsx("div",{className:"w-full flex justify-center items-center fixed inset-0 px-4 sm:px-6 lg:px-8",children:A.jsx("div",{className:"w-full max-w-md sm:max-w-lg p-5 md:max-w-xl lg:max-w-2xl bg-white rounded-3xl shadow-2xl flex flex-col items-center  relative transition-all duration-300",children:A.jsx("p",{className:"text-gray-700 text-center text-xl sm:text-2xl md:text-3xl lg:text-4xl font-semibold",children:"You are in Transit. First complete current deliveries then accept new ones."})})})]})]})},xfe="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAFoAAABaCAYAAAA4qEECAAAACXBIWXMAAAsTAAALEwEAmpwYAAAFFElEQVR4nO2cTWgcZRjHXwtWaQW/wIOKglXjSRBbtSpN5nk2xUO1pxy0irdQTXffZxNrPLRZxYOCXxeFqncbPEktRayX0qDYqrV4Kqg9qAerBLRWTYv5yzu7wRj23czs7M47s31+8LCQ7Mz8n/8+837MvDPGKIqiKIqiKIqiKIqiKIlBrXIbLM1A6BNY/hGW/4IwgobTEGuhw7G2+vCtpf1JYaMhWDoI4cXgxq4eixD6EJN8uykTqNEuWFoogIFIF/Q3hCZMGYDwG+EN42xh+VVTZGB5d3CTpEdRpylTRFCjOyF8PrhB0rOqvoBJvssUDQgd7SD6T1h6HXW6B9OVK4NrtcNXwY7cGzdzTpvf8COmSKDGm/xi6XsI32IKihvaQfi0V3+NN5miAKF3PJX8O2qVm0zBwVR0M4TPenJ41xQBNMbWQujX9iJpxpQEWH7eU9XzqD50WRGGc9s9As9jgq81JQFPPXh1h7H/9iI0G7OeU+6AKRlws8P2/cxsWGFTo+th6Y/2RkePmpKBeuUxj9Hn8PTwFeGECe8opLAshePrFIV3mFC0Lhq1E/WeKSmwvN/TsR8MI6i+9Rp/50EPm5ICGz3inSlOjV6XvyChnd7hUGNsrSkpGL/7Uu9wVWhn/oKEj3hOsbdNyYFvApb3lBwTleth6R/PKTZiSg7qFHmMXnSzyPyESPSM59T6CY3GGlNy0GisiXNpX0i78xNi+UtPs/GBGRBg+YAnx69yEhANeU4rJ+JnjG9b13mCEw3BRltak4M6LL0E4X2tYdUhWJqD0Dew9B2Ef4g716VwPf/yUcDy/7nvxtvE28419xXvc198DEviJlHxsZ2GqdH1Xp3j29ZB6Iw3z8mtd/TN4AQXX5bMPo4aPQ7hJyH0YpyspeMtM1CwmIfQMTfuj7U6zU3tX6yy3Qs5GE2nCmAQAse3MOaS/pkslY0FSBLFiMrGEOPLiy9sH24IoDF8ufdy6MUclvc7b3p4B4U/Dp6UFDXoIzdtz260Gx4FT4aLHZbeympyJXgSUopYdNP2LEavNp7UkCUP6FiXJo88oEZyyiaEN3dhNL2mRnNao1/pxuhPkx2AzkF4L6rRhniE4j7d4u7OS62wojNZgNCz7vJraqGdL+VOp1s+nDEXS3PphVr+JZGweuU+z/abUwic7oW57XXQdGKTM+dCZ7oQuOxKmT/2dtyHUCNRkhO9q+S2lZ2sorPnYvlCeoFJxFWjDQkWEKIURvcol/QCk4hb5SasW7MWvOmQynN55tKFwB5UgXsiK5nRC3FbGrIz7FEu6YUmM2gm000CKVD0KJc+Ge1W8rcfpKMa3Z9qiCehje5NLv0xekmg65FdZ+HGnu7T/fpFeHBTujA7Yy79M1oDarTkXwha0aJGY5CaH61oUaMRugq1oiW8cdp0SHhTtY0WNRqhK04rWsKbVI6mw607rtEoLI1BoicgPB6/KMXyHgi/DMtvuudbWkvL3m+thT7cev2EW9ZwMl7f3FwXfXrF2uf5tg+ONv/2/++5bf/bz8nmvulo81h8qHlsmo21OE1NbXtaL3UZj7W7HOJcoi2FM9oMKFCj80GNHiCjfc9Etwn6zQwo6LcPsPx58o6QPjMDCvrtAyzXEh+gRrvMgIJ++xDfXrf8dYLT5USZn/0uhA+oDt/Y+SB0AnW6wQw4yMOH1sKRqmt/Wh3D2XgBpHv/6ABX8krUB0VRFEVRFEVRFEVRFEVRFJOFfwHjHvyBvhhv/QAAAABJRU5ErkJggg==",bct=()=>{const e=Mo(),[t,n]=q.useState(!1),[r,s]=q.useState(null),[a,c]=q.useState(null);return q.useEffect(()=>{(async()=>{try{const g=await(await fetch("https://swiftlogix.cc/api/rider-profile",{credentials:"include"})).json();if(g.success){s(g.userData),c(g.userData);return}e("/rider-login")}catch(f){console.error("Error fetching data:",f)}})()},[]),A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row",children:[A.jsx(dk,{}),A.jsxs("div",{className:"min-[1226px]:ml-[18vw] w-full",children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full shadow-xl font-bold text-[#009688] bg-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold",children:"My Profile"})}),A.jsx("div",{className:"w-full flex justify-center mt-4 px-4",children:A.jsxs("div",{className:"w-full max-w-xl flex items-center justify-between p-4 border bg-[#009688] rounded-lg shadow-lg",children:[A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("img",{src:vfe,alt:"",width:64,className:"invert"}),A.jsx("p",{className:"text-xl sm:text-2xl md:text-[28px] text-white font-bold",children:r==null?void 0:r.name})]}),t&&A.jsx(OA,{size:24,className:"cursor-pointer"})]})}),A.jsx("div",{className:"flex flex-col md:flex-row gap-6 mt-10 px-4 justify-center",children:[{icon:LQ,title:"Email",value:r==null?void 0:r.email},{icon:MQ,title:"Mobile No",value:r==null?void 0:r.mobileno}].map((i,f)=>A.jsxs("div",{className:"w-full md:w-[40%] flex items-center p-4 justify-between rounded-lg border shadow-md",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("img",{src:i.icon,alt:"",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:i.title}),A.jsx("p",{children:i.value})]})]}),t&&A.jsx(OA,{size:24,className:"cursor-pointer"})]},f))}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mt-10 px-4 justify-center",children:[A.jsxs("div",{className:"w-full md:w-[40%] flex items-center p-4 justify-between rounded-lg border shadow-md",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("img",{src:yfe,alt:"",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:"Password"}),A.jsx("p",{children:"********"})]})]}),t&&A.jsx(OA,{size:24,className:"cursor-pointer"})]}),A.jsxs("div",{className:"w-full md:w-[40%] flex items-center p-4 gap-3 rounded-lg border shadow-md",children:[A.jsx("img",{src:pF,alt:"Card",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:"CNIC"}),A.jsx("p",{children:r==null?void 0:r.cnic})]})]})]}),A.jsx("div",{className:"flex flex-col items-center mt-10 px-4",children:A.jsxs("div",{className:"w-full max-w-2xl flex items-center p-4 gap-3 rounded-lg border shadow-md",children:[A.jsx("img",{src:NQ,alt:"Address",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:"Address"}),A.jsx("p",{children:r==null?void 0:r.address})]}),t&&A.jsx(OA,{size:24,className:"cursor-pointer ml-auto"})]})}),A.jsx("div",{className:"text-center mt-10 text-[#009688] font-bold text-2xl sm:text-3xl",children:"Vehicle Information"}),A.jsx("div",{className:"mb-10 flex flex-col md:flex-row gap-6 mt-6 px-4 justify-center flex-wrap",children:[{title:"Vehicle Type",value:r==null?void 0:r.vehicleType},{title:"Vehicle Make",value:r==null?void 0:r.vehicleMake},{title:"Vehicle Model",value:r==null?void 0:r.vehicleModel},{title:"License Plate",value:r==null?void 0:r.vehicleNumberPlate}].map((i,f)=>A.jsxs("div",{className:"w-full md:w-[40%] flex items-center p-4 justify-between rounded-lg border shadow-md",children:[A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("img",{src:xfe,alt:"Vehicle",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:i.title}),A.jsx("p",{children:i.value})]})]}),t&&A.jsx(OA,{size:24,className:"cursor-pointer"})]},f))})]})]})},Cct=({onBackStep:e,onCashPayment:t,onCardPayment:n,walletPoints:r,onWalletPayment:s,isWalletShow:a})=>{const[c,i]=q.useState(null),f=b=>{i(b.target.value)},g=()=>{e()},y=()=>{c==="Cash"&&t()};return A.jsxs("div",{className:"max-w-3xl fixed left-0 right-0 mx-auto my-auto p-6 bg-white rounded-lg shadow-lg top-1/2 transform -translate-y-1/2",children:[A.jsx("div",{className:"text-3xl font-bold text-gray-700 text-center mb-6",children:"Choose a withdraw method"}),A.jsx("div",{className:"w-full mb-3 border-[1px] "}),A.jsxs("div",{className:"flex justify-between",children:[A.jsxs("div",{children:[A.jsx("input",{onChange:f,type:"radio",value:"Online",name:"paymentmethod",id:"paymentmethod",className:"scale-150"}),A.jsx("span",{className:"ml-2 font-semibold text-gray-700 ",children:"Online"})]}),A.jsxs("div",{className:"flex gap-1",children:[A.jsx("img",{src:hfe,alt:"mastercard",className:"w-12 h-8 shadow-lg rounded-sm border shadow-white"}),A.jsx("img",{src:ffe,alt:"visacard",className:"w-12 h-8 border rounded-sm shadow-lg  shadow-white"})]})]}),A.jsx("div",{className:"w-full my-3 border-[1px] "}),A.jsxs("div",{className:"flex justify-between",children:[A.jsxs("div",{children:[A.jsx("input",{onChange:f,type:"radio",value:"Cash",name:"paymentmethod",id:"paymentmethod",className:"scale-150"}),A.jsx("span",{className:"ml-2 font-semibold text-gray-700 ",children:"Cash"})]}),A.jsx("div",{children:A.jsx("img",{src:pfe,alt:"cash",className:"w-12 h-8 rounded-sm shadow-lg  shadow-white"})})]}),A.jsx("div",{className:"w-full my-3 border-[1px] "}),A.jsxs("div",{className:"flex justify-between mt-6",children:[A.jsx("button",{type:"button",onClick:g,className:"bg-[#FF7043] text-white py-2 px-4 rounded-full hover:bg-[#009688] transition duration-200 ease-in-out",children:"Back"}),c&&A.jsx("div",{onClick:c!=="Online"&&y,className:`${c==="Online"?"text-red-500 text-lg mt-2 font-semibold":"bg-[#009688]  text-white cursor-pointer py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out"}`,children:c==="Online"?"Not in operation":`Continue to ${c}`})]})]})},Sct=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState([]),[a,c]=q.useState(null),[i,f]=q.useState(!1),[g,y]=q.useState(!1),[b,T]=q.useState(""),[S,U]=q.useState(""),[N,W]=q.useState(""),[L,Q]=q.useState(""),[V,Z]=q.useState(!1),ne=q.useRef(null);q.useEffect(()=>{(async()=>{try{const Ne=await(await fetch("https://swiftlogix.cc/api/rider-wallet",{credentials:"include"})).json();if(Ne.success){c(Ne.userData),n(Ne.points),s(Ne.transactions);return}e("/rider-login")}catch(Ee){console.error("Error fetching data:",Ee)}})()},[]);const Y=()=>{y(!1),f(!0)},le=()=>{f(!1)},pe=()=>{f(!1),y(!0)},_e=async()=>{if(!b||isNaN(b)||b<=0){U("Please enter a valid amount greater than 0.");return}if(parseInt(b)>parseInt(t)){U("Insufficient Points.");return}try{const Te=await fetch("https://swiftlogix.cc/api/withdraw-money-cash",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({withdrawAmount:b})});if(!Te.ok){console.log("Response error");return}const Ee=await Te.json();Ee.success&&(n(Ee.remainingPoints),W(Ee.transactionId),Q(Ee.datetime),Z(!0))}catch{}},ye=()=>{f(!1),Z(!1),y(!1),T(null),W(null),Q(null),window.location.reload()},he=()=>{ne.current&&qx(ne.current,{backgroundColor:null}).then(Te=>{const Ee=document.createElement("a");Ee.download="withdraw-success.png",Ee.href=Te.toDataURL(),Ee.click()})},be=()=>{y(!g),T(null)};return A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row",children:[A.jsx(dk,{}),A.jsxs("div",{className:"w-full min-[1226px]:ml-[18vw]",children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full shadow-xl font-bold text-[#009688] bg-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold",children:"My Wallet"})}),A.jsxs("div",{className:"p-4 sm:p-6 md:p-8 flex flex-col md:flex-row gap-4 md:gap-12 items-start md:items-center",children:[A.jsxs("h2",{className:"text-2xl sm:text-3xl font-semibold text-[#009688]",children:["Total Points: ",t]}),A.jsx("button",{onClick:Y,className:"py-3 px-5 md:py-4 md:px-6 border rounded-lg bg-[#009688] hover:bg-[#FF7043] text-white transition-all ease-in-out duration-300 font-semibold text-lg sm:text-xl",children:"Withdraw"})]}),A.jsxs("div",{className:"p-4 sm:p-6 md:p-8",children:[A.jsx("h2",{className:"text-2xl sm:text-3xl font-semibold text-[#009688] mb-4",children:"Points History"}),A.jsx("div",{className:"bg-white p-4 rounded-lg shadow-md overflow-x-auto",children:A.jsx("ul",{className:"w-full",children:r.map((Te,Ee)=>A.jsxs("li",{className:"flex flex-col sm:flex-row sm:justify-between py-2 border-b text-sm sm:text-base",children:[A.jsxs("span",{className:`font-medium ${Te.transactionType==="Added"?"text-[#4BB543]":"text-[#FC100D]"}`,children:[Te.transactionType==="Added"?`+${Te.transactionAmount}`:`- ${Te.transactionAmount}`," points"]}),Te.paid&&A.jsx("span",{children:A.jsx("img",{src:jQ,alt:"paid",className:"w-12"})}),A.jsx("span",{className:"text-gray-700",children:Te.datetime})]},Ee))})})]})]}),i&&A.jsx(Cct,{onBackStep:le,onCashPayment:pe}),g&&A.jsxs("div",{className:"absolute top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 max-w-sm sm:max-w-md md:max-w-lg lg:max-w-xl xl:max-w-2xl mx-auto p-6 bg-white rounded-lg shadow-lg",children:[A.jsx("div",{className:"text-xl font-bold text-gray-700 text-center mb-4",children:"Enter Withdraw Points"}),A.jsx("div",{onClick:be,children:A.jsx("img",{src:cE,alt:"",className:"absolute right-2 top-1 w-[24px] cursor-pointer"})}),A.jsx("input",{type:"number",value:b,onChange:Te=>T(Te.target.value),placeholder:"Enter amount",className:"w-full p-2 mb-1 border rounded-md border-gray-300"}),S&&A.jsx("p",{className:"text-red-500 mb-2 text-sm",children:S}),A.jsx("button",{onClick:_e,className:"w-full py-2 px-4  text-white rounded-lg bg-[#009688] hover:bg-[#FF7043] transition duration-200 ease-in-out",children:"Withdraw"})]}),V&&A.jsxs("div",{className:"fixed bg-white top-1/2 left-1/2 transform -translate-x-1/2 -translate-y-1/2 w-[90vw] sm:w-[70vw] md:w-[50vw] flex flex-col gap-4",children:[A.jsxs("div",{ref:ne,className:"bg-white",children:[A.jsxs("div",{className:"bg-[#009688] p-4 rounded-tr-lg rounded-tl-lg text-white w-full flex flex-col gap-4 justify-center items-center",children:[A.jsx("div",{children:"Cash"}),A.jsxs("div",{className:"font-semibold text-3xl",children:["Rs. ",b]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"font-semibold",children:a==null?void 0:a.name}),A.jsx("div",{children:"SwiftLogix"})]})]}),A.jsxs("div",{className:"w-full  flex flex-col px-2",children:[A.jsx("div",{className:"font-semibold mb-1 text-lg",children:"Transaction Details"}),A.jsxs("div",{className:"mb-1 flex justify-between",children:[A.jsx("div",{children:"Transaction ID"}),A.jsx("div",{children:N})," "]}),A.jsxs("div",{className:"mb-1 flex justify-between",children:[A.jsx("div",{children:"Transaction Time"}),A.jsx("div",{children:L})," "]})]}),A.jsx("div",{className:"flex justify-center my-4",children:A.jsx("img",{src:Ld,alt:"tick"})})]}),A.jsxs("div",{className:"flex justify-center gap-4",children:[A.jsx("button",{type:"button",onClick:he,className:"bg-[#009688] text-white py-2 px-6 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out",children:"Save"}),A.jsx("button",{type:"button",onClick:ye,className:"bg-[#FF7043] text-white py-2 px-6 rounded-full hover:bg-[#009688] transition duration-200 ease-in-out",children:"Cancel"})]})]})]})},Bct=({trackingNumber:e,originCity:t,destinationCity:n,weight:r,pieces:s,deliveryDate:a,price:c,selectedCard:i,onCancel:f})=>A.jsx(A.Fragment,{children:A.jsxs("div",{className:"max-w-sm w-full bg-white  rounded-lg shadow-md p-4 hover:scale-105 transition-all duration-300",children:[A.jsx("div",{className:"flex justify-start  mb-4",children:A.jsxs("span",{className:"font-semibold text-lg text-[#009688]",children:["Tracking# ",e]})}),A.jsxs("div",{children:[A.jsxs("p",{className:"text-gray-600",children:["Origin City: ",A.jsx("strong",{children:t})]}),A.jsxs("p",{className:"text-gray-600",children:["Destination City: ",A.jsx("strong",{children:n})]}),A.jsxs("p",{className:"text-gray-600",children:["Weight: ",A.jsx("strong",{children:r})]}),A.jsxs("p",{className:"text-gray-600",children:["Pieces: ",A.jsx("strong",{children:s})]}),A.jsxs("p",{className:"text-gray-600",children:["Delivery Date: ",A.jsx("strong",{children:a})]}),A.jsxs("p",{className:"text-gray-600",children:["Price: ",A.jsx("strong",{children:c})]})]}),A.jsx("div",{className:"mt-4 flex justify-end items-center gap-2",children:i==="accepted"&&A.jsx("button",{onClick:f,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300",children:"Cancel"})})]})}),Ect=()=>{const e=Mo();q.useState(null);const[t,n]=q.useState(null),[r,s]=q.useState([]),[a,c]=q.useState(null),[i,f]=q.useState(null),[g,y]=q.useState(null),[b,T]=q.useState(!1),[S,U]=q.useState(null);q.useEffect(()=>{(async()=>{const Q=await fetch("https://swiftlogix.cc/api/get-rider-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:t})});Q.ok||console.log("response error");const V=await Q.json();if(V.success)return s(V.shipments)})()},[t,b]),q.useEffect(()=>{(async()=>{const Q=await fetch("https://swiftlogix.cc/api/get-rider-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"completed"})});Q.ok||console.log("response error");const V=await Q.json();f(V.shipments.length)})()},[]),q.useEffect(()=>{(async()=>{const Q=await fetch("https://swiftlogix.cc/api/get-rider-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"accepted"})});Q.ok||console.log("response error");const V=await Q.json();y(V.shipments.length)})()},[]),q.useEffect(()=>{(async()=>{const Q=await fetch("https://swiftlogix.cc/api/get-rider-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"pending"})});Q.ok||console.log("response error");const V=await Q.json();c(V.shipments.length)})()},[]),q.useEffect(()=>{n("accepted")},[]),q.useEffect(()=>{(async()=>{try{if((await(await fetch("https://swiftlogix.cc/api/rider-shipments",{credentials:"include"})).json()).success)return;e("/rider-login")}catch(Q){console.error("Error fetching data:",Q)}})()},[]);const N=L=>{n(L),L==="scheduled"?(document.documentElement.classList.add("bg-[#009688]"),document.documentElement.classList.remove("bg-white")):(document.documentElement.classList.remove("bg-[#009688]"),document.documentElement.classList.add("bg-white"))},W=async L=>{try{const Q=await fetch("https://swiftlogix.cc/api/rider-cancel-shipment",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(r[L])});Q.ok||console.log("Response error");const V=await Q.json();V.success?qi.success(V.message):qi.error(V.message)}catch{qi.error("Failed to cancel shipment")}};return A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row",children:[A.jsx(dk,{}),A.jsxs("div",{className:"flex-1 min-[1226px]:ml-[18vw] min-h-screen bg-white overflow-y-auto relative",children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full shadow-xl font-bold text-[#009688] bg-white flex justify-center items-center p-4 sm:p-6 md:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold",children:"Shipments"})}),A.jsx("div",{children:A.jsxs("div",{className:"flex flex-col sm:flex-row flex-wrap gap-4 sm:gap-6 p-4 sm:p-6 md:p-8",children:[A.jsx(_R,{title:"Completed Shipments",value:i,onClick:()=>N("completed"),isSelected:t==="completed"}),A.jsx(_R,{title:"Accepted Shipments",value:g,onClick:()=>N("accepted"),isSelected:t==="accepted"}),A.jsx(_R,{title:"Pending Shipments",value:a,onClick:()=>N("pending"),isSelected:t==="pending"})]})}),r.length===0&&A.jsxs("div",{className:"flex justify-center items-center text-lg sm:text-xl text-gray-500 p-4",children:["No ",t," shipments"]}),A.jsx("div",{className:"flex flex-wrap gap-4 px-4 sm:px-6 md:px-8 pb-16",children:r.map((L,Q)=>A.jsx(Bct,{trackingNumber:L.trackingid,originCity:L.originCity,destinationCity:L.destinationCity,weight:L.weight,pieces:L.pieces,deliveryDate:L.deliveryDate,price:L.price,onCancel:()=>W(Q),selectedCard:t},Q))}),S&&A.jsx("div",{className:"w-full flex justify-center absolute top-[50%] right-0 px-4",children:A.jsxs("div",{className:"w-full sm:w-[80%] md:w-[50%] lg:w-[30%] rounded-3xl shadow-2xl flex justify-center items-center flex-col p-6 sm:p-8 relative bg-white transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-16 sm:w-20 shadow-2xl rounded-full absolute -top-10"}),A.jsxs("p",{className:"mt-16 text-gray-700 text-2xl sm:text-3xl md:text-[44px] font-semibold text-center",children:[S,"!"]})]})})]})]})};function _R({title:e,value:t,onClick:n,isSelected:r}){return A.jsxs("div",{onClick:n,className:`cursor-pointer p-6 hover:bg-[#009688] rounded-lg shadow-md ${r?"bg-[#009688] text-white":"bg-white"} text-gray-700 hover:text-white`,children:[A.jsx("div",{className:"flex items-center justify-between mb-4",children:A.jsx("h3",{className:"text-lg font-semibold",children:e})}),A.jsx("p",{className:"text-3xl font-bold",children:t})]})}const Tct=({onNext:e,setRiderInformation:t,riderInformation:n,error:r,setError:s})=>{Mo();const[a,c]=q.useState(!1),[i,f]=q.useState(!1),[g,y]=q.useState(!1),[b,T]=q.useState(!1),[S,U]=q.useState({userId:"",name:"",email:"",mobileno:""}),N=Q=>{const{name:V,value:Z}=Q.target;t({...n,[V]:Z}),s("")},W=Q=>{s("");const{name:V,files:Z}=Q.target,ne=Z[0],Y=["image/jpeg","image/png","image/jpg"],le=20*1024*1024;if(!Y.includes(ne.type)){s("Only JPG, JPEG, or PNG files are allowed*"),t({...n,[V]:null});return}if(ne.size>le){s("File size must be under 20MB*"),t({...n,[V]:null});return}t({...n,[V]:ne})},L=async Q=>{if(Q.preventDefault(),n.password.length<8){s("Password contain minimum 8 characters");return}if(n.password!==n.confirmpassword){s("Passwords do not match");return}if(n.picture==null){s("Picture is required*");return}s(""),e()};return A.jsxs(A.Fragment,{children:[A.jsxs(go,{delay:.2,children:[A.jsxs("div",{className:"flex justify-center w-full ",children:[A.jsx("div",{className:"left h-auto w-full md:w-1/2 mt-4  flex justify-center  ",children:A.jsxs("div",{className:"w-full h-auto   p-8 bg-white rounded-[10px] shadow-lg ",children:[A.jsx("h2",{className:"text-3xl text-gray-700 text-center mb-6 ",children:"Sign Up"}),r&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:r}),A.jsxs("form",{onSubmit:L,method:"POST",enctype:"multipart/form-data",children:[A.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Rider Information"}),A.jsxs("div",{className:"flex w-full justify-around gap-8",children:[A.jsxs("div",{className:"w-full",children:[A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:n.name,name:"name",onChange:N,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Name",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"email",value:n.email,name:"email",onChange:N,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Email Address",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:n.cnic,name:"cnic",onChange:N,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"CNIC",required:!0,maxLength:13,minLength:13})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:n.mobileno,name:"mobileno",onChange:N,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Mobile No",required:!0,maxLength:11,minLength:11})}),A.jsxs("div",{className:"mb-4 mt-8",children:[A.jsx("span",{className:"text-gray-700 mb-2  font-semibold",children:"Date of Birth:"}),A.jsx("input",{type:"date",value:n.dateofbirth,name:"dateofbirth",onChange:N,className:"w-full p-3 border rounded-md focus:outline-none",required:!0})]})]}),A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:a?"text":"password",value:n.password,name:"password",onChange:N,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>c(!a),children:a?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:i?"text":"password",value:n.confirmpassword,name:"confirmpassword",onChange:N,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Confirm Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>f(!i),children:i?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsxs("select",{required:!0,name:"city",id:"city",onChange:N,value:n.city,className:"mb-3 w-full border p-2 rounded-md",children:[A.jsx("option",{value:"",disabled:!0,selected:!0,children:"-- Select City -- (as per CNIC)"}),A.jsxs("optgroup",{label:"Punjab",children:[A.jsx("option",{value:"lahore",children:"Lahore"}),A.jsx("option",{value:"faisalabad",children:"Faisalabad"}),A.jsx("option",{value:"rawalpindi",children:"Rawalpindi"}),A.jsx("option",{value:"gujranwala",children:"Gujranwala"}),A.jsx("option",{value:"multan",children:"Multan"}),A.jsx("option",{value:"sargodha",children:"Sargodha"}),A.jsx("option",{value:"bahawalpur",children:"Bahawalpur"}),A.jsx("option",{value:"sialkot",children:"Sialkot"}),A.jsx("option",{value:"rahim-yar-khan",children:"Rahim Yar Khan"}),A.jsx("option",{value:"sheikhupura",children:"Sheikhupura"}),A.jsx("option",{value:"kasur",children:"Kasur"}),A.jsx("option",{value:"okara",children:"Okara"}),A.jsx("option",{value:"sahiwal",children:"Sahiwal"}),A.jsx("option",{value:"gujrat",children:"Gujrat"}),A.jsx("option",{value:"jhelum",children:"Jhelum"}),A.jsx("option",{value:"mianwali",children:"Mianwali"}),A.jsx("option",{value:"daska",children:"Daska"}),A.jsx("option",{value:"vehari",children:"Vehari"}),A.jsx("option",{value:"bahawalnagar",children:"Bahawalnagar"}),A.jsx("option",{value:"pakpattan",children:"Pakpattan"}),A.jsx("option",{value:"khushab",children:"Khushab"}),A.jsx("option",{value:"khanewal",children:"Khanewal"}),A.jsx("option",{value:"muzaffargarh",children:"Muzaffargarh"}),A.jsx("option",{value:"dera-ghazi-khan",children:"Dera Ghazi Khan"}),A.jsx("option",{value:"sadiqabad",children:"Sadiqabad"}),A.jsx("option",{value:"burewala",children:"Burewala"}),A.jsx("option",{value:"kamoke",children:"Kamoke"}),A.jsx("option",{value:"hafizabad",children:"Hafizabad"}),A.jsx("option",{value:"mandi-bahauddin",children:"Mandi Bahauddin"}),A.jsx("option",{value:"jhang",children:"Jhang"}),A.jsx("option",{value:"toba-tek-singh",children:"Toba Tek Singh"}),A.jsx("option",{value:"chichawatni",children:"Chichawatni"}),A.jsx("option",{value:"chinniot",children:"Chiniot"}),A.jsx("option",{value:"narowal",children:"Narowal"}),A.jsx("option",{value:"shakargarh",children:"Shakargarh"}),A.jsx("option",{value:"mailsi",children:"Mailsi"}),A.jsx("option",{value:"kot-addu",children:"Kot Addu"}),A.jsx("option",{value:"layyah",children:"Layyah"}),A.jsx("option",{value:"lodhran",children:"Lodhran"}),A.jsx("option",{value:"ahmadpur-east",children:"Ahmadpur East"}),A.jsx("option",{value:"kamalia",children:"Kamalia"}),A.jsx("option",{value:"kharian",children:"Kharian"}),A.jsx("option",{value:"chakwal",children:"Chakwal"}),A.jsx("option",{value:"bhakkar",children:"Bhakkar"}),A.jsx("option",{value:"attock",children:"Attock"}),A.jsx("option",{value:"sargodha",children:"Sargodha"})]}),A.jsxs("optgroup",{label:"Sindh",children:[A.jsx("option",{value:"karachi",children:"Karachi"}),A.jsx("option",{value:"hyderabad",children:"Hyderabad"}),A.jsx("option",{value:"sukkur",children:"Sukkur"}),A.jsx("option",{value:"larkana",children:"Larkana"}),A.jsx("option",{value:"mirpur-khas",children:"Mirpur Khas"}),A.jsx("option",{value:"nawabshah",children:"Nawabshah"}),A.jsx("option",{value:"jacobabad",children:"Jacobabad"}),A.jsx("option",{value:"shikarpur",children:"Shikarpur"}),A.jsx("option",{value:"khairpur",children:"Khairpur"}),A.jsx("option",{value:"dadu",children:"Dadu"}),A.jsx("option",{value:"tando-adam",children:"Tando Adam"}),A.jsx("option",{value:"tando-allahyar",children:"Tando Allahyar"}),A.jsx("option",{value:"tando-muhammad-khan",children:"Tando Muhammad Khan"}),A.jsx("option",{value:"badin",children:"Badin"}),A.jsx("option",{value:"matli",children:"Matli"}),A.jsx("option",{value:"sanghar",children:"Sanghar"}),A.jsx("option",{value:"kashmore",children:"Kashmore"}),A.jsx("option",{value:"guddu",children:"Guddu"}),A.jsx("option",{value:"ratodero",children:"Ratodero"}),A.jsx("option",{value:"umerkot",children:"Umerkot"}),A.jsx("option",{value:"mithi",children:"Mithi"}),A.jsx("option",{value:"ghotki",children:"Ghotki"}),A.jsx("option",{value:"kamber",children:"Kamber"}),A.jsx("option",{value:"kotri",children:"Kotri"}),A.jsx("option",{value:"mirpur-mathelo",children:"Mirpur Mathelo"}),A.jsx("option",{value:"naushahro-firoz",children:"Naushahro Firoz"}),A.jsx("option",{value:"sewan",children:"Sewan"}),A.jsx("option",{value:"thatta",children:"Thatta"}),A.jsx("option",{value:"jamshoro",children:"Jamshoro"}),A.jsx("option",{value:"tando-bago",children:"Tando Bago"})]}),A.jsxs("optgroup",{label:"Khyber Pakhtunkhwa",children:[A.jsx("option",{value:"peshawar",children:"Peshawar"}),A.jsx("option",{value:"mardan",children:"Mardan"}),A.jsx("option",{value:"abbottabad",children:"Abbottabad"}),A.jsx("option",{value:"kohat",children:"Kohat"}),A.jsx("option",{value:"dera-ismail-khan",children:"Dera Ismail Khan"}),A.jsx("option",{value:"swat",children:"Swat"}),A.jsx("option",{value:"mingora",children:"Mingora"}),A.jsx("option",{value:"charsadda",children:"Charsadda"}),A.jsx("option",{value:"nowshera",children:"Nowshera"}),A.jsx("option",{value:"mansehra",children:"Mansehra"}),A.jsx("option",{value:"bannu",children:"Bannu"}),A.jsx("option",{value:"haripur",children:"Haripur"}),A.jsx("option",{value:"swabi",children:"Swabi"}),A.jsx("option",{value:"lakki-marwat",children:"Lakki Marwat"}),A.jsx("option",{value:"batkhela",children:"Batkhela"}),A.jsx("option",{value:"chitral",children:"Chitral"}),A.jsx("option",{value:"dir",children:"Dir"}),A.jsx("option",{value:"karak",children:"Karak"}),A.jsx("option",{value:"tank",children:"Tank"}),A.jsx("option",{value:"hangu",children:"Hangu"}),A.jsx("option",{value:"shangla",children:"Shangla"}),A.jsx("option",{value:"battagram",children:"Battagram"}),A.jsx("option",{value:"malakand",children:"Malakand"}),A.jsx("option",{value:"lower-dir",children:"Lower Dir"}),A.jsx("option",{value:"upper-dir",children:"Upper Dir"}),A.jsx("option",{value:"buner",children:"Buner"}),A.jsx("option",{value:"torghar",children:"Torghar"}),A.jsx("option",{value:"kolai-palas",children:"Kolai Palas"})]}),A.jsxs("optgroup",{label:"Balochistan",children:[A.jsx("option",{value:"quetta",children:"Quetta"}),A.jsx("option",{value:"khuzdar",children:"Khuzdar"}),A.jsx("option",{value:"turban",children:"Turbat"}),A.jsx("option",{value:"gwadar",children:"Gwadar"}),A.jsx("option",{value:"sibi",children:"Sibi"}),A.jsx("option",{value:"loralai",children:"Loralai"}),A.jsx("option",{value:"mastung",children:"Mastung"}),A.jsx("option",{value:"zhob",children:"Zhob"}),A.jsx("option",{value:"chaman",children:"Chaman"}),A.jsx("option",{value:"dalbandin",children:"Dalbandin"}),A.jsx("option",{value:"dureji",children:"Dureji"}),A.jsx("option",{value:"kalat",children:"Kalat"}),A.jsx("option",{value:"panjgur",children:"Panjgur"}),A.jsx("option",{value:"nushki",children:"Nushki"}),A.jsx("option",{value:"dadu",children:"Dadu"}),A.jsx("option",{value:"lasbela",children:"Lasbela"}),A.jsx("option",{value:"kharan",children:"Kharan"}),A.jsx("option",{value:"washuk",children:"Washuk"}),A.jsx("option",{value:"kech",children:"Kech"}),A.jsx("option",{value:"aawar",children:"Awaran"})]}),A.jsx("optgroup",{label:"Islamabad Capital Territory",children:A.jsx("option",{value:"islamabad",children:"Islamabad"})}),A.jsxs("optgroup",{label:"Azad Jammu & Kashmir",children:[A.jsx("option",{value:"muzaffarabad",children:"Muzaffarabad"}),A.jsx("option",{value:"mirpur",children:"Mirpur"}),A.jsx("option",{value:"kotli",children:"Kotli"}),A.jsx("option",{value:"bhimber",children:"Bhimber"}),A.jsx("option",{value:"rawalakot",children:"Rawalakot"}),A.jsx("option",{value:"bagh",children:"Bagh"}),A.jsx("option",{value:"pallandri",children:"Pallandri"}),A.jsx("option",{value:"hattian-bala",children:"Hattian Bala"}),A.jsx("option",{value:"haveli",children:"Haveli"})]}),A.jsxs("optgroup",{label:"Gilgit-Baltistan",children:[A.jsx("option",{value:"gilgit",children:"Gilgit"}),A.jsx("option",{value:"skardu",children:"Skardu"}),A.jsx("option",{value:"hunza",children:"Hunza"}),A.jsx("option",{value:"ghizer",children:"Ghizer"}),A.jsx("option",{value:"ghanche",children:"Ghanche"}),A.jsx("option",{value:"diamir",children:"Diamir"}),A.jsx("option",{value:"astore",children:"Astore"}),A.jsx("option",{value:"shigar",children:"Shigar"}),A.jsx("option",{value:"kharmang",children:"Kharmang"}),A.jsx("option",{value:"nagar",children:"Nagar"})]})]}),A.jsx("div",{className:"mb-4",children:A.jsx("textarea",{value:n.address,name:"address",onChange:N,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Full Address",required:!0})}),A.jsxs("div",{className:"mb-4",children:[A.jsx("span",{className:"text-gray-700 mb-2 font-semibold",children:"Picture:"}),A.jsx("input",{type:"file",name:"picture",onChange:W,className:"w-full p-3 border rounded-md focus:outline-none",required:!0})]})]})]}),A.jsx("div",{className:"w-full flex justify-center",children:A.jsx("button",{type:"submit",className:"text-center bg-[#009688] font-semibold hover:bg-[#FF7043] text-white py-3 px-12 rounded-md mb-4 transition-all duration-300",children:"Next"})}),A.jsxs("p",{className:"text-center text-sm",children:["Already have an account?"," ",A.jsx(ss,{to:"/rider-login",children:A.jsx("a",{href:"/login",className:"text-[#FF7043]",children:"Login"})})]})]})]})}),A.jsx("div",{className:"hidden right w-[50%] h-[100%]  justify-center items-center",children:A.jsxs("div",{className:"bg-[#FF7043] w-[70%] h-[80%] rounded-[60px] flex flex-col pt-4 justify-around items-center relative text-white ",children:[A.jsx("div",{className:"text-6xl",children:"WELCOME!"}),A.jsx("div",{className:"className=",absolute:!0,"bottom-0":!0,children:A.jsx("img",{src:a_,alt:"Logo"})})]})})]}),b&&A.jsx("div",{className:"w-full flex justify-center absolute top-[50%]",children:A.jsxs("div",{className:"w-[30%]  rounded-3xl shadow-2xl flex justify-center items-center flex-col p-5 relative bg-white transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20 shadow-2xl rounded-full absolute top-[-36px]"}),A.jsx("p",{className:"mt-16 text-gray-700 text-[44px] font-semibold text-center",children:"You are successfully Signed up!"})]})})]}),g&&A.jsx(PQ,{email:S.email,userId:S.userId,setOTPCard:y,setOTPVerified:T,navigate:handleNavigateToDashBoard})]})},Ict=({onBack:e,vehicleInformation:t,setVehicleInformation:n,handleSignup:r})=>{const[s,a]=q.useState(""),[c,i]=q.useState("idle"),f=T=>{const{name:S,value:U}=T.target;n({...t,[S]:U})},g=T=>{a("");const{name:S,files:U}=T.target,N=U[0],W=["image/jpeg","image/png","image/jpg"],L=20*1024*1024;if(!W.includes(N.type)){a("Only JPG, JPEG, or PNG files are allowed*"),n({...t,[S]:null});return}if(N.size>L){a("File size must be under 20MB*"),n({...t,[S]:null});return}n({...t,[S]:N})},y=T=>{if(T.preventDefault(),t.drivingLicenseFront==null){a("Driving License Front Side required*");return}if(t.drivingLicenseBack==null){a("Driving License Back Side required*");return}if(t.vehicleCardFront==null){a("Vehicle Card Front Side required*");return}if(t.vehicleCardBack==null){a("Vehicle Card Back Side required*");return}if(t.cnicFront==null){a("CNIC Front Side required*");return}if(t.cnicBack==null){a("CNIC Back Side required*");return}a(""),i("processing"),r()},b=()=>{e()};return A.jsx(A.Fragment,{children:A.jsx(go,{delay:.2,children:A.jsxs("div",{className:"flex justify-center  w-full",children:[A.jsx("div",{className:"left w-full md:w-1/2 mt-4  flex justify-center",children:A.jsxs("div",{className:"w-fullh-auto p-8 bg-white rounded-[10px] shadow-lg ",children:[A.jsx("h2",{className:"text-3xl text-gray-700 text-center mb-6 ",children:"Sign Up"}),s&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:s}),A.jsxs("form",{onSubmit:y,children:[A.jsx("h3",{className:"text-xl font-semibold mb-4 text-gray-700",children:"Vehicle Information"}),A.jsx("div",{className:"mt-6",children:A.jsxs("div",{className:"flex flex-around gap-8",children:[A.jsxs("div",{className:"w-full",children:[A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:t.vehicleType,name:"vehicleType",onChange:f,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Vehicle Type",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:t.vehicleMake,name:"vehicleMake",onChange:f,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Vehicle Make",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:t.vehicleModel,name:"vehicleModel",onChange:f,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Vehicle Model",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:t.vehicleNumberPlate,name:"vehicleNumberPlate",onChange:f,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Vehicle Number Plate",required:!0})})]}),A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("span",{className:"text-gray-700 mb-2 font-semibold",children:"Driving License Front/Back:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"file",name:"drivingLicenseFront",onChange:g,className:"w-full p-3 border rounded-md focus:outline-none",required:!0}),A.jsx("input",{type:"file",name:"drivingLicenseBack",onChange:g,className:"w-full p-3 border rounded-md focus:outline-none",required:!0})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("span",{className:"text-gray-700 mb-2 font-semibold",children:"Vehicle Card Front/Back:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"file",name:"vehicleCardFront",onChange:g,className:"w-full p-3 border rounded-md focus:outline-none",required:!0}),A.jsx("input",{type:"file",name:"vehicleCardBack",onChange:g,className:"w-full p-3 border rounded-md focus:outline-none",required:!0})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("span",{className:"text-gray-700 mb-2 font-semibold",children:"CNIC Front/Back:"}),A.jsxs("div",{className:"flex gap-2",children:[A.jsx("input",{type:"file",name:"cnicFront",onChange:g,className:"w-full p-3 border rounded-md focus:outline-none",required:!0}),A.jsx("input",{type:"file",name:"cnicBack",onChange:g,className:"w-full p-3 border rounded-md focus:outline-none",required:!0})]})]})]})]})}),A.jsxs("div",{className:"flex  justify-center gap-4",children:[A.jsx("div",{onClick:b,className:" flex justify-center cursor-pointer px-14 bg-[#FF7043] hover:bg-[#009688] text-white py-3 rounded-md mb-4 transition-all duration-300",children:"Back"}),A.jsx("button",{type:"submit",disabled:c==="processing",className:" bg-[#009688] hover:bg-[#FF7043] text-white h-12  px-12 rounded-md mb-2 transition-all duration-300",children:c==="processing"?"Processing...":c==="success"?" ":"Sign up"})]}),A.jsxs("p",{className:"text-center text-sm",children:["Already have an account?"," ",A.jsx(ss,{to:"/rider-login",children:A.jsx("a",{href:"/login",className:"text-[#FF7043]",children:"Login"})})]})]})]})}),A.jsx("div",{className:"hidden right w-[50%] h-[100%] justify-center items-center",children:A.jsxs("div",{className:"bg-[#FF7043] w-[70%] h-[80%] rounded-[60px] flex flex-col pt-4 justify-around items-center relative text-white ",children:[A.jsx("div",{className:"text-6xl",children:"WELCOME!"}),A.jsx("div",{className:"className=",absolute:!0,"bottom-0":!0,children:A.jsx("img",{src:a_,alt:"Logo"})})]})})]})})})},_fe=({email:e,userId:t,setOTPCard:n,setOTPVerified:r,navigate:s})=>{const[a,c]=q.useState(["","","",""]),[i,f]=q.useState(!1),[g,y]=q.useState(""),[b,T]=q.useState(120),[S,U]=q.useState(!0);q.useEffect(()=>{let Z;return b>0&&(Z=setInterval(()=>{T(ne=>ne-1)},1e3)),b===0&&U(!1),()=>clearInterval(Z)},[b]);const N=(Z,ne)=>{const Y=Z.target.value;if(Y.match(/[0-9]/)&&Y.length===1){const le=[...a];le[ne]=Y,c(le),ne===3&&f(!0),ne<3&&document.getElementById(`otp-input-${ne+1}`).focus()}else if(Y===""){const le=[...a];le[ne]="",c(le),f(!1),ne>0&&document.getElementById(`otp-input-${ne-1}`).focus()}},W=()=>{setTimeout(()=>{r(!0)},1e4)},L=async Z=>{Z.preventDefault(),y("");const Y={otp:a.join(""),userId:t};try{const le=await fetch("https://swiftlogix.cc/api/rider-verifyotp",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Y)});le.ok||console.log("response error");const pe=await le.json();pe.success?(n(!1),r(!0),W()):y(pe.message)}catch(le){console.log(le)}},Q=async()=>{try{const Z=await fetch("http://13.234.75.47:3000/rider-resendotp",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,userId:t})});if(!Z.ok){console.log("response error");return}const ne=await Z.json();console.log(ne),ne.success?(y(ne.message),c(["","","",""]),f(!1),y(""),U(!0),T(120)):y(ne.message)}catch(Z){console.log(Z)}},V=Z=>{const ne=Math.floor(Z/60),Y=Z%60;return`${ne}:${Y<10?"0":""}${Y}`};return A.jsx("div",{className:" flex items-center justify-center bg-gray-100",children:A.jsxs("div",{className:"p-6 bg-white rounded-3xl shadow-md w-[50%] absolute top-[35%]",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{src:uk,alt:"mailicon"})}),A.jsx("h1",{className:"text-3xl font-semibold text-center text-gray-700 mt-4 mb-4",children:"Verify Email"}),g&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:g}),A.jsxs("p",{className:"font-semibold text-center text-gray-700 mt-4 mb-6",children:["Enter the OTP sent to ",A.jsx("b",{children:e})]}),A.jsxs("form",{onSubmit:L,children:[A.jsx("div",{className:"flex justify-center space-x-4 mb-4",children:a.map((Z,ne)=>A.jsx("input",{id:`otp-input-${ne}`,type:"text",value:Z,onChange:Y=>N(Y,ne),maxLength:"1",className:"w-12 h-12 text-xl text-center border-2 border-gray-300 rounded focus:outline-[#FF7043] focus:border-blue-500",autoFocus:ne===0},ne))}),A.jsxs("div",{className:"flex justify-center items-center gap-2 mt-4 mb-4",children:[b==0&&A.jsx("button",{type:"button",className:"py-2 px-3 border-2 rounded-2xl ${isResendDisabled ? 'cursor-not-allowed' : 'cursor-pointer'}hover:bg-slate-100",disabled:S,onClick:Q,children:"Resend"}),b>0&&A.jsx("p",{children:V(b)})]}),i&&A.jsx("button",{type:"submit",className:"w-full py-2 bg-[#009688] text-white font-semibold rounded-lg hover:bg-[#FF7043] transition",children:"Verify OTP"})]})]})})},jct=()=>{const e=Mo(),[t,n]=q.useState({name:"",email:"",cnic:"",mobileno:"",password:"",confirmpassword:"",city:"",address:"",dateofbirth:"",picture:null}),[r,s]=q.useState({vehicleType:"",vehicleMake:"",vehicleModel:"",vehicleNumberPlate:"",drivingLicenseFront:null,drivingLicenseBack:null,vehicleCardFront:null,vehicleCardBack:null,cnicFront:null,cnicBack:null}),[a,c]=q.useState({userId:"",name:"",email:"",mobileno:""}),[i,f]=q.useState("riderinformation"),[g,y]=q.useState(""),[b,T]=q.useState(!1),[S,U]=q.useState(!1),N=async()=>{try{const V=await fetch("https://swiftlogix.cc/api/verify-riderdataexist",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({riderInformation:t})});V.ok||console.log("response error");const Z=await V.json();return Z.success?y(Z.message):f("vehicleinformation")}catch(V){console.error("Error submitting form:",V)}},W=()=>{f("riderinformation")},L=()=>{e("/rider-dashboard")},Q=async()=>{try{const V=new FormData;V.append("vehicleType",r.vehicleType),V.append("vehicleMake",r.vehicleMake),V.append("vehicleModel",r.vehicleModel),V.append("vehicleNumberPlate",r.vehicleNumberPlate),V.append("drivingLicenseFront",r.drivingLicenseFront),V.append("drivingLicenseBack",r.drivingLicenseBack),V.append("vehicleCardFront",r.vehicleCardFront),V.append("vehicleCardBack",r.vehicleCardBack),V.append("cnicFront",r.cnicFront),V.append("cnicBack",r.cnicBack),V.append("name",t.name),V.append("email",t.email),V.append("cnic",t.cnic),V.append("mobileno",t.mobileno),V.append("password",t.password),V.append("confirmpassword",t.confirmpassword),V.append("city",t.city),V.append("address",t.address),V.append("dateofbirth",t.dateofbirth),V.append("picture",t.picture);const Z=await fetch("https://swiftlogix.cc/api/rider-signup",{method:"POST",credentials:"include",body:V});Z.ok||console.log("response error");const ne=await Z.json();ne.success?(c(Y=>({...Y,userId:ne.riderData._id,name:ne.riderData.name,email:ne.riderData.email,mobileno:ne.riderData.mobileno})),T(!0)):y(ne.message)}catch(V){console.error("Error submitting form:",V)}};return A.jsxs(A.Fragment,{children:[A.jsx(_h,{}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsx(go,{delay:.2,children:A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-5xl font-semibold",children:"Rider Portal"})})}),i==="riderinformation"?A.jsx(Tct,{onNext:N,riderInformation:t,setRiderInformation:n,error:g,setError:y}):A.jsx(Ict,{onBack:W,vehicleInformation:r,setVehicleInformation:s,handleSignup:Q}),S&&A.jsx("div",{className:"w-full flex justify-center absolute top-[50%]",children:A.jsxs("div",{className:"w-auto rounded-3xl shadow-2xl flex justify-center items-center flex-col p-5 relative bg-white transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20 shadow-2xl rounded-full absolute top-[-36px]"}),A.jsx("p",{className:"mt-16 text-gray-700 text-[24px] font-semibold text-center",children:"Your application has been successfully submitted."}),A.jsx("p",{className:"text-gray-700 text-[24px] font-semibold text-center",children:"We will review it, and your account will be activated within 24 hours."})]})}),b&&A.jsx(_fe,{email:a.email,userId:a.userId,setOTPCard:T,setOTPVerified:U,navigate:L})]})},Fct=()=>{var pe;const e=Mo(),t=nf(),[n,r]=q.useState("idle"),[s,a]=q.useState(((pe=t.state)==null?void 0:pe.isChange)||!1),[c,i]=q.useState({email:"",password:""}),[f,g]=q.useState({userId:"",name:"",email:"",mobileno:""}),[y,b]=q.useState(!1),[T,S]=q.useState(""),[U,N]=q.useState(!1),[W,L]=q.useState(!1),[Q,V]=q.useState(!1),Z=_e=>{const{name:ye,value:he}=_e.target;i({...c,[ye]:he})};q.useEffect(()=>{setTimeout(()=>{a(!1)},3e3)},[]);const ne=()=>{setTimeout(()=>{e("/rider-dashboard")},1e3)},Y=async _e=>{_e.preventDefault(),S(""),r("processing");const ye=await fetch("https://swiftlogix.cc/api/rider-login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(c)});ye.ok||console.log("response error");const he=await ye.json();console.log(he),he.success&&he.verification==="VERIFIED"?(r("success"),N(!0),ne()):he.success&&he.verification==="PENDING"?(g(be=>({...be,userId:he.data._id,name:he.data.name,email:he.data.email,mobileno:he.data.mobileno})),L(!0)):(r("idle"),S(he.message))},le=()=>{e("/rider-dashboard")};return A.jsxs(A.Fragment,{children:[A.jsx(_h,{}),A.jsx(Bs,{}),A.jsxs(go,{delay:.2,children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-5xl font-semibold text-center",children:"Rider Portal"})}),A.jsxs("div",{className:"flex justify-center items-center w-full",children:[A.jsx("div",{className:"hidden left w-[50%]  justify-center items-center ",children:A.jsxs("div",{className:"bg-[#FF7043] w-[70%] h-[80%] rounded-[60px] flex flex-col pt-4 justify-around items-center relative text-white ",children:[A.jsx("div",{className:"text-6xl",children:"WELCOME!"}),A.jsx("div",{className:"className=",absolute:!0,"bottom-0":!0,children:A.jsx("img",{src:a_,alt:"Logo"})})]})}),A.jsx("div",{className:"right w-full lg:w-1/2 flex justify-center items-center transition-all duration-500 ease-in-out transform",children:A.jsxs("div",{className:"w-[80%] lg:max-w-[400px] p-8 bg-white rounded-[10px] mt-10 shadow-lg",children:[A.jsx("h2",{className:"text-3xl text-gray-700 text-center mb-6",children:"Login"}),T&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:T}),A.jsxs("form",{onSubmit:Y,children:[A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"email",name:"email",value:c.email,onChange:Z,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Email Address",required:!0})}),A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:y?"text":"password",name:"password",value:c.password,onChange:Z,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>b(!y),children:y?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsx("div",{className:"mb-4 text-right",children:A.jsx(ss,{to:"/reset",children:A.jsx("div",{className:"text-[#FF7043] text-sm",children:"Forgot Password?"})})}),A.jsxs("button",{type:"submit",disabled:n==="processing",className:"w-full bg-[#009688] hover:bg-[#FF7043] text-white py-3 rounded-md mb-4 transition-all duration-300",children:[A.jsx(Vu,{children:n==="success"&&A.jsx(Uo.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{opacity:0},className:"absolute left-[50%]",children:A.jsx(i0,{className:"text-white"})})}),A.jsx(Vu,{children:n==="processing"&&A.jsx(Uo.div,{initial:{opacity:0},animate:{opacity:1,rotate:360},exit:{opacity:0},transition:{repeat:1/0,duration:1,ease:"linear"},className:"absolute right-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),A.jsx("span",{className:"ml-6",children:n==="processing"?"Processing...":n==="success"?"":"Signin"})]}),A.jsxs("p",{className:"text-center text-sm",children:["Don't have an account?"," ",A.jsx(ss,{to:"/rider-signup",children:A.jsx("a",{href:"#",className:"text-[#FF7043]",children:"Signup"})})]})]})]})})]})]}),s&&A.jsx("div",{className:"border-none bg-[#009688] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:"New password created"}),U&&A.jsx("div",{className:"w-full flex justify-center items-center fixed top-0 left-0 h-screen bg-black bg-opacity-50 z-50",children:A.jsxs("div",{className:"w-[80%] sm:w-[60%] md:w-[40%] lg:w-[30%] rounded-3xl shadow-2xl bg-white p-5 flex flex-col items-center relative transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20   shadow-2xl rounded-full absolute -top-9"}),A.jsx("p",{className:"mt-10  text-center text-xl sm:text-[36px] text-gray-700 font-semibold",children:"You are successfully logged in!"})]})}),Q&&A.jsx("div",{className:"w-full flex justify-center absolute top-[50%]",children:A.jsxs("div",{className:"w-auto rounded-3xl shadow-2xl flex justify-center items-center flex-col p-5 relative bg-white transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20 shadow-2xl rounded-full absolute top-[-36px]"}),A.jsx("p",{className:"mt-16 text-gray-700 text-[24px] font-semibold text-center",children:"Your application has been successfully submitted."}),A.jsx("p",{className:"text-gray-700 text-[24px] font-semibold text-center",children:"We will review it, and your account will be activated within 24 hours."})]})}),A.jsx(al,{}),W&&A.jsx(_fe,{email:f.email,userId:f.userId,setOTPCard:L,setOTPVerified:V,navigate:le})]})},Pct=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(""),[a,c]=q.useState(!1),[i,f]=q.useState(!0),[g,y]=q.useState([]),[b,T]=q.useState([]),S=Q=>{n(""),s(Q.target.value)},U=async Q=>{try{const V=await fetch("https://swiftlogix.cc/api/regenrate-bar-qrcode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shipments:Q})});if(!V.ok){console.log("Error in response");return}const ne=(await V.json()).bar_qr_codeDataArray;T(ne)}catch(V){console.log("Error in fetching bar codes",V.message)}},N=async()=>{try{const Q=await fetch("https://swiftlogix.cc/api/reprint-label",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reprintLabel:r})});Q.ok||console.log("Error in response");const Z=(await Q.json()).shipments;if(Z.length>0){const ne=Z.map(Y=>({packagePrice:{service:Y.shipmentType,basePrice:Y.basePrice,weightCharges:Y.weightCharges,distanceCharges:Y.distanceCharges,totalPrice:Y.totalPrice,insurance:Y.insurance},senderFormData:{sendername:Y.sendername,sendercontact:Y.sendercontact,senderemail:Y.senderemail,sendercnic:Y.sendercnic},receiverFormData:{receivername:Y.receivername,receivercontact:Y.receivercontact,receiveremail:Y.receiveremail,receivercnic:Y.receivercnic,receiverarea:Y.receiverarea,receiverhouseno:Y.receiverhouseno,receiveraddress:Y.receiveraddress},packageFormData:{originCity:Y.originCity,destinationCity:Y.destinationCity,weight:Y.weight,pieces:Y.pieces,pickupdate:Y.pickupdate||"",pickuptime:Y.pickuptime||"",insurance:Y.insurance,pickupaddress:Y.pickupaddress||"",shipmentType:Y.shipmentType,deliveryMethod:Y.deliveryMethod,sensitivePackage:Y.sensitivePackage,payby:Y.payby,paid:Y.paid},paymentMethod:{paymentMethod:Y.paymentMethod},scheduleTime:{scheduleTime:Y.datetime},trackingId:{trackingId:Y.trackingid}}));y(ne)}U(Z)}catch(Q){console.log("Error in fetching shipments",Q.message)}},W=async()=>{if(!r){n("Tracking ID is required*");return}if(r.length!=14){n("Enter Valid Tracking ID");return}await N(),f(!1),c(!0)},L=()=>{y([]),s(""),f(!0),c(!1)};return q.useEffect(()=>{(async()=>{try{(await(await fetch("https://swiftlogix.cc/api/customer-reprintlabel",{credentials:"include"})).json()).success||e("/login")}catch(V){console.error("Error fetching data:",V)}})()},[]),A.jsxs("div",{className:"flex min-h-screen overflow-hidden",children:[A.jsx(v0,{}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsxs("div",{className:"min-[1226px]:ml-[18vw] w-full flex-1 flex flex-col justify-start items-center",children:[A.jsxs("div",{className:"relative bg-[#009688] text-white w-full py-8 flex justify-center items-center",children:[A.jsx("div",{className:"text-3xl max-[418px]:text-2xl  sm:text-4xl  font-semibold",children:"Reprint Shipment Label"}),a&&A.jsx(kF,{onClick:L,className:"absolute bottom-[-32px] left-[10%]  cursor-pointer text-black"})]}),i&&A.jsx("div",{className:"h-[40vh] flex justify-center items-center w-full",children:A.jsxs("div",{className:"flex flex-col items-center w-full sm:w-[40vw] p-4",children:[A.jsxs("div",{className:"flex flex-col  sm:flex-row w-full gap-4",children:[A.jsx("input",{onChange:S,type:"text",value:r,name:"cnic/mobileno/email",id:"reprint-label",placeholder:"Enter Tracking ID",className:`placeholder:text-[#2632386d] relative w-full px-4 py-2 rounded-lg border-2 border-[#009688]\r
                         bg-[#F7F7F7] focus:outline-none focus:border-[#FF7043] `}),A.jsx("input",{onClick:W,type:"submit",value:"Reprint",className:`cursor-pointer font-semibold text-white p-2 bg-[#009688] hover:bg-[#FF7043] rounded-lg md:relative right-6 md:rounded-l-none\r
                         transition-all ease-in-out duration-300 hover:text-[18px]`})]}),A.jsx("div",{children:t&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:t})})]})}),a&&g.length==0&&A.jsxs("p",{className:"h-full flex justify-center items-center",children:["No, shipments scheduled against ",A.jsx("span",{className:"text-[#FF7043] font-bold",children:r})," "]}),a&&A.jsx("div",{className:"w-full flex flex-col items-center mt-10 gap-4",children:g.map((Q,V)=>{var Z,ne,Y,le;return A.jsxs("div",{className:"flex gap-6 justify-center items-center w-full md:w-auto border mt-2 px-9",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(hb,{barCode:b[V]||{message:"",barcode:"",qrcode:""},senderData:Q.senderFormData,receiverData:Q.receiverFormData,packageData:Q.packageFormData,totalPrice:Q.packagePrice.totalPrice,position:V})}),A.jsx("div",{className:"flex-shrink-0 mt-4 ",children:A.jsx(fb,{senderData:Q.senderFormData,receiverData:Q.receiverFormData,packageData:Q.packageFormData,packagePrice:Q.packagePrice,scheduleTime:((Z=Q.scheduleTime)==null?void 0:Z.scheduleTime)||"",trackingId:((ne=Q.trackingId)==null?void 0:ne.trackingId)||"",qrcode:((Y=b[V])==null?void 0:Y.qrcode)||"",paymentMethod:((le=Q.paymentMethod)==null?void 0:le.paymentMethod)||"",position:V})})]},V)})})]})]})},kct=()=>{const e=Mo(),[t,n]=q.useState("idle"),[r,s]=q.useState({originCity:"",destinationCity:"",weight:"",shipmentType:"",insurance:"",orignalprice:""}),[a,c]=q.useState({weighterror:"",orignalpriceerror:""}),i=g=>{const{name:y,value:b}=g.target;s({...r,[y]:b}),c({...a,weighterror:"",orignalpriceerror:""})};q.useEffect(()=>{(async()=>{try{(await(await fetch("https://swiftlogix.cc/api/customer-ratecalculator",{credentials:"include"})).json()).success||e("/login")}catch(y){console.error("Error fetching data:",y)}})()},[]);const f=async g=>{g.preventDefault();const y=new FormData(g.target),b={};if(y.forEach((T,S)=>{b[S]=T}),!(b.weight>0)){c({...a,weighterror:"Weight must greater than 0",orignalpriceerror:""});return}if(!(/^\d+$/.test(b.orignalprice)||b.insurance==="no")){c({...a,weighterror:"",orignalpriceerror:"Shipment price must be entered in digits only (e.g., 1200)"});return}if(!(b.orignalprice>0)&&b.insurance==="yes"){c({...a,weighterror:"",orignalpriceerror:"Orignal Price must be greater than 0"});return}n("processing");try{const S=await(await fetch("https://swiftlogix.cc/api/calculate-point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).json();n("success"),e("/customer-price-page",{state:{service:S.service,basePrice:S.basePrice,weightCharges:S.weightCharges,distanceCharges:S.distanceCharges,totalPrice:S.totalPrice,insuranceType:S.insurance}})}catch(T){console.error("Error submitting form:",T)}};return A.jsxs("div",{className:"flex min-h-screen overflow-hidden",children:[A.jsx(v0,{}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsxs("div",{className:"min-[1226px]:ml-[18vw] flex-1  flex flex-col justify-start items-center overflow-auto",children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl font-semibold",children:"Rate Calculator"})}),A.jsx("div",{className:"flex justify-center w-full py-10 flex-grow overflow-auto",children:A.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Rate Calculator"}),A.jsxs("form",{onSubmit:f,className:"space-y-6",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"originCity",className:"block text-sm font-medium text-gray-700",children:"Origin City"}),A.jsxs("select",{id:"originCity",name:"originCity",value:r.originCity,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select a city"}),A.jsx("option",{hidden:r.destinationCity==="Karachi",value:"Karachi",children:"Karachi"}),A.jsx("option",{hidden:r.destinationCity==="Islamabad",value:"Islamabad",children:"Islamabad"}),A.jsx("option",{hidden:r.destinationCity==="Lahore",value:"Lahore",children:"Lahore"}),A.jsx("option",{hidden:r.destinationCity==="Rawalpindi",value:"Rawalpindi",children:"Rawalpindi"}),A.jsx("option",{hidden:r.destinationCity==="Faisalabad",value:"Faisalabad",children:"Faisalabad"}),A.jsx("option",{hidden:r.destinationCity==="Sialkot",value:"Sialkot",children:"Sialkot"}),A.jsx("option",{hidden:r.destinationCity==="Multan",value:"Multan",children:"Multan"}),A.jsx("option",{hidden:r.destinationCity==="Peshawar",value:"Peshawar",children:"Peshawar"}),A.jsx("option",{hidden:r.destinationCity==="Quetta",value:"Quetta",children:"Quetta"}),A.jsx("option",{hidden:r.destinationCity==="Bahawalpur",value:"Bahawalpur",children:"Bahawalpur"}),A.jsx("option",{hidden:r.destinationCity==="Gujranwala",value:"Gujranwala",children:"Gujranwala"}),A.jsx("option",{hidden:r.destinationCity==="Sukkar",value:"Sukkur",children:"Sukkur"}),A.jsx("option",{hidden:r.destinationCity==="Mardan",value:"Mardan",children:"Mardan"}),A.jsx("option",{hidden:r.destinationCity==="Abbottabad",value:"Abbottabad",children:"Abbottabad"})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"destinationCity",className:"block text-sm font-medium text-gray-700",children:"Destination City"}),A.jsxs("select",{id:"destinationCity",name:"destinationCity",value:r.destinationCity,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select a city"}),A.jsx("option",{hidden:r.originCity==="Karachi",value:"Karachi",children:"Karachi"}),A.jsx("option",{hidden:r.originCity==="Islamabad",value:"Islamabad",children:"Islamabad"}),A.jsx("option",{hidden:r.originCity==="Lahore",value:"Lahore",children:"Lahore"}),A.jsx("option",{hidden:r.originCity==="Rawalpindi",value:"Rawalpindi",children:"Rawalpindi"}),A.jsx("option",{hidden:r.originCity==="Faisalabad",value:"Faisalabad",children:"Faisalabad"}),A.jsx("option",{hidden:r.originCity==="Sialkot",value:"Sialkot",children:"Sialkot"}),A.jsx("option",{hidden:r.originCity==="Multan",value:"Multan",children:"Multan"}),A.jsx("option",{hidden:r.originCity==="Peshawar",value:"Peshawar",children:"Peshawar"}),A.jsx("option",{hidden:r.originCity==="Quetta",value:"Quetta",children:"Quetta"}),A.jsx("option",{hidden:r.originCity==="Bahawalpur",value:"Bahawalpur",children:"Bahawalpur"}),A.jsx("option",{hidden:r.originCity==="Gujranwala",value:"Gujranwala",children:"Gujranwala"}),A.jsx("option",{hidden:r.originCity==="Sukkar",value:"Sukkur",children:"Sukkur"}),A.jsx("option",{hidden:r.originCity==="Mardan",value:"Mardan",children:"Mardan"}),A.jsx("option",{hidden:r.originCity==="Abbottabad",value:"Abbottabad",children:"Abbottabad"})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700",children:"Weight (in kg)"}),A.jsx("input",{type:"number",id:"weight",name:"weight",value:r.weight,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),a.weighterror&&A.jsx("p",{className:"text-red-500 text-sm mt-1  ",children:a.weighterror})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{htmlFor:"shipmentType",className:"block text-sm font-medium text-gray-700",children:"Shipment Type"}),A.jsxs("select",{id:"shipmentType",name:"shipmentType",value:r.shipmentType,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",children:"Shipment type"}),A.jsx("option",{value:"Ground",children:"Ground"}),A.jsx("option",{value:"Express",children:"Express"})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"insurance",className:"block text-sm font-medium text-gray-700",children:"Insurance Type"}),A.jsxs("select",{id:"insurance",name:"insurance",value:r.insurance,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Insurance Type"}),A.jsx("option",{value:"yes",children:"Yes"}),A.jsx("option",{value:"no",children:"No"})]})]}),r.insurance==="yes"&&A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"insurance",className:"block text-sm font-medium text-gray-700",children:"Shipment Orignal Price"}),A.jsx("input",{type:"text",id:"insurance",name:"orignalprice",value:r.orignalprice,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),a.orignalpriceerror&&A.jsx("p",{className:"text-red-500 text-sm mt-1  ",children:a.orignalpriceerror})]}),A.jsxs("button",{type:"submit",disabled:t==="processing",className:"relative w-full py-2 px-4 bg-[#009688] text-white font-semibold rounded-lg hover:bg-[#FF7043] transition-all duration-300 ease-in-out",children:[A.jsx(Vu,{children:t==="success"&&A.jsx(Uo.div,{initial:{x:100,opacity:0},animate:{x:0,opacity:1},exit:{opacity:0},className:"absolute left-[50%]",children:A.jsx(i0,{className:"text-white"})})}),A.jsx(Vu,{children:t==="processing"&&A.jsx(Uo.div,{initial:{opacity:0},animate:{opacity:1,rotate:360},exit:{opacity:0},transition:{repeat:1/0,duration:1,ease:"linear"},className:"absolute right-4 h-4 w-4 border-2 border-white border-t-transparent rounded-full"})}),A.jsx("span",{className:"ml-6",children:t==="processing"?"Processing...":t==="success"?" ":"Calculate"})]})]})]})})]})]})},Lct=()=>{const e=nf(),{service:t,basePrice:n,weightCharges:r,distanceCharges:s,totalPrice:a,insuranceType:c}=e.state;return A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row min-h-screen overflow-hidden",children:[A.jsx(v0,{}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsxs("div",{className:"flex-1 min-[1226px]:ml-[18vw] flex flex-col justify-start items-center overflow-y-auto",children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-semibold text-center",children:"Rate Calculator"})}),A.jsxs("div",{className:"w-full sm:w-[90%] md:w-[85%] lg:w-[70%] flex flex-col items-center my-8 px-2",children:[A.jsx("div",{className:"w-full m-4 ",children:A.jsx("div",{className:"font-semibold text-2xl sm:text-3xl md:text-4xl",children:"Price Details:"})}),A.jsxs("div",{className:"w-full overflow-x-auto border-[2px]",children:[A.jsxs("div",{className:"min-w-[600px] font-semibold bg-[#009688] flex text-sm sm:text-base",children:[A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Service"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Base Price"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Weight Charges"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Distance Charges"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Insurance"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Total Price"})]}),A.jsxs("div",{className:"min-w-[600px] font-semibold flex text-sm sm:text-base",children:[A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:t}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:n}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:r}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:s}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:c}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:a})]})]}),A.jsx("div",{className:"mt-8",children:A.jsx(ss,{to:"/customer-ratecalculator",children:A.jsx("button",{className:"bg-[#009688] text-white font-medium px-6 py-2 rounded-lg hover:bg-[#FF7043] transition duration-300 hover:scale-105",children:"Recalculate Price"})})})]})]})]})},Mct=()=>{const[e,t]=q.useState({success:"",message:"",barcode:""}),n=Mo(),[r]=h8(),[s,a]=q.useState("sender"),[c,i]=q.useState(null),[f,g]=q.useState(null),[y,b]=q.useState(null),[T,S]=q.useState(null),[U,N]=q.useState(1),[W,L]=q.useState(!0),[Q,V]=q.useState(null),[Z,ne]=q.useState(null),Y=q.useRef(1),[le,pe]=q.useState({service:"",basePrice:"",weightCharges:"",distanceCharges:"",totalPrice:"",insurance:""}),[_e,ye]=q.useState({sendername:"",sendercontact:"",senderemail:"",sendercnic:""}),[he,be]=q.useState({receivername:"",receivercontact:"",receiveremail:"",receivercnic:"",receiverarea:"",receiverhouseno:"",receiveraddress:""}),[Te,Ee]=q.useState({originCity:"",destinationCity:"",weight:"",pieces:"",pickupdate:"",pickuptime:"",insurance:"",pickupaddress:"",shipmentType:"",deliveryMethod:"",sensitivePackage:"",packageDescription:"",orignalprice:"",payby:""}),Ne=Ht=>{const{name:Zt,value:pn}=Ht.target;ye({..._e,[Zt]:pn})},Ge=Ht=>{const{name:Zt,value:pn}=Ht.target;be({...he,[Zt]:pn})},Je=Ht=>{const{name:Zt,value:pn}=Ht.target;Ee({...Te,[Zt]:pn})},Ue=()=>{Y.current++,N(2),a("receiver")},Qe=()=>{Y.current++,N(3),a("package")};q.useEffect(()=>{(async()=>{try{const pn=await(await fetch("https://swiftlogix.cc/api/customer-scheduleship",{credentials:"include"})).json();pn.success||n("/login"),V(pn.userData),ne(pn.points)}catch(Zt){console.error("Error fetching data:",Zt)}})()},[]);const xe=async()=>{try{const Zt=await(await fetch("https://swiftlogix.cc/api/calculate-point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Te)})).json();pe({service:Zt.service,basePrice:Zt.basePrice,weightCharges:Zt.weightCharges,distanceCharges:Zt.distanceCharges,totalPrice:Zt.totalPrice,insurance:Zt.insurance}),Y.current++,N(4),a("summary")}catch(Ht){console.error("Error submitting form:",Ht)}},at=()=>{Y.current++,N(5),a("payment")},we=async()=>{try{const Ht=await fetch("https://swiftlogix.cc/api/scheduleaship-point",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({senderFormData:_e,receiverFormData:he,packageFormData:Te,packagePrice:le})});Ht.ok||console.log("response error");const Zt=await Ht.json();t(Zt),i(Zt.scheduletime),g(Zt.trackingid),S(Zt.qrcode),b(Zt.paymentmethod),Te.paid=Zt.paid,Zt.success===!0&&(Y.current++,Y.current++,N(6),a("label"))}catch(Ht){console.error("Error in handleWithCashPayment:",Ht.message)}},me=async()=>{try{const Ht=await fetch("https://swiftlogix.cc/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({senderFormData:_e,receiverFormData:he,packageFormData:Te,packagePrice:le,endpoint:"customer-scheduleship"})});Ht.ok||console.log("response error");const Zt=await Ht.json();Zt.url&&(window.location.href=Zt.url)}catch(Ht){console.log("Error in handling card payments: ",Ht.message)}},Ze=async()=>{try{const Ht=await fetch("https://swiftlogix.cc/api/wallet-payment",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({senderFormData:_e,receiverFormData:he,packageFormData:Te,packagePrice:le})});Ht.ok||console.log("response error");const Zt=await Ht.json();t(Zt),i(Zt.scheduletime),g(Zt.trackingid),S(Zt.qrcode),b(Zt.paymentmethod),Te.paid=Zt.paid,Te.payby=Zt.payby,Zt.success===!0&&(Y.current++,Y.current++,N(6),a("label"))}catch(Ht){console.error("Error in handleWithCashPayment:",Ht.message)}};q.useEffect(()=>{if(r.get("payment")==="success"){const Ht=r.get("data");if(Ht){const Zt=JSON.parse(decodeURIComponent(Ht));ye(Zt.senderData),be(Zt.receiverData),Ee(Zt.packageData),pe(Zt.packagePrice),g(Zt.trackingId),i(Zt.datetime),b(Zt.paymentMethod)}Y.current=5,N(5),a("paid")}else if(r.get("payment")==="failed"){const Ht=r.get("data");if(Ht){const Zt=JSON.parse(decodeURIComponent(Ht));ye(Zt.senderData),be(Zt.receiverData),Ee(Zt.packageData),pe(Zt.packagePrice)}Y.current=5,N(5),a("payment")}},[r]);const ot=async()=>{const Ht=await fetch("https://swiftlogix.cc/api/bar-qrcode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:f})});Ht.ok||console.log("response error");const Zt=await Ht.json();t(Zt),S(Zt.qrcode),Zt.success===!0&&(Y.current++,Y.current++,N(6),a("label"))},vt=()=>{Y.current--,N(1),a("sender")},Qt=()=>{Y.current--,N(2),a("receiver")},Ot=()=>{Y.current--,N(3),a("package")},kt=()=>{Y.current--,N(4),a("summary")},Me=()=>{ye({sendername:Q.name,sendercontact:Q.mobileno,senderemail:Q.email,sendercnic:Q.cnic})};return A.jsxs("div",{className:"flex ",children:[A.jsx(v0,{}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsxs("div",{className:"flex-1 w-full min-[1226px]:ml-[18vw]  h-screen bg-white overflow-y-auto",children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"md:text-5xl text-4xl font-semibold",children:"Schedule a Ship"})}),A.jsxs("div",{className:"w-full mt-6 flex justify-center items-center",children:[A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold
                    ${Y.current>1?"bg-[#009688] text-white":Y.current===1?"bg-[#FF7043] text-white":""}`,children:"01"}),A.jsx("span",{className:`p-1 border w-[15%] h-2  ${Y.current>2?"bg-[#009688]":""}  ${Y.current>1&&Y.current<3?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Y.current>2?"bg-[#009688] text-white":Y.current===2?"bg-[#FF7043] text-white":""}`,children:"02"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${Y.current>3?"bg-[#009688]":""}  ${Y.current>2&&Y.current<4?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Y.current>3?"bg-[#009688] text-white":Y.current===3?"bg-[#FF7043] text-white":""}`,children:"03"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${Y.current>4?"bg-[#009688]":""}  ${Y.current>3&&Y.current<5?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Y.current>4?"bg-[#009688] text-white":Y.current===4?"bg-[#FF7043] text-white":""}`,children:"04"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${Y.current>5?"bg-[#009688]":""}  ${Y.current>4&&Y.current<6?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Y.current>5?"bg-[#009688] text-white":Y.current===5?"bg-[#FF7043] text-white":""}`,children:"05"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${Y.current>6?"bg-[#009688]":""}  ${Y.current>5&&Y.current<7?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Y.current>6?"bg-[#009688] text-white":Y.current===6?"bg-[#FF7043] text-white":""}`,children:"06"})]}),s==="sender"&&A.jsx(dQ,{senderFormData:_e,onSenderFormDataChange:Ne,onNextStep:Ue,useMyProfile:W,userData:Me}),s==="receiver"&&A.jsx(gQ,{receiverFormData:he,onReceiverFormDataChange:Ge,onBackStep:vt,onNextStep:Qe}),s==="package"&&A.jsx(yQ,{packageFormData:Te,onPackageFormDataChange:Je,onBackStep:Qt,onNextStep:xe}),s==="summary"&&A.jsx(vQ,{senderFormData:_e,receiverFormData:he,packageFormData:Te,onBackStep:Ot,onNextStep:at,packagePrice:le}),s==="payment"&&A.jsx(FQ,{onBackStep:kt,onCashPayment:we,onCardPayment:me,walletPoints:Z,onWalletPayment:Ze,setpackageFormData:Ee,packageFormData:Te,isWalletShow:!0}),s==="paid"&&A.jsx(ck,{onComplete:ot}),s==="label"&&A.jsxs("div",{className:"w-full flex flex-col items-center gap-4 mt-4",children:[A.jsx("div",{className:"font-bold  text-center text-3xl md:text-5xl text-[#009688] mb-4",children:e.message}),A.jsxs("div",{className:"flex gap-6 items-center w-full md:w-auto border  px-9 mb-10",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(hb,{barCode:e,senderData:_e,receiverData:he,packageData:Te,totalPrice:le.totalPrice,position:1})}),A.jsx("div",{className:"flex-shrink-0  ",children:A.jsx(fb,{senderData:_e,receiverData:he,packageData:Te,packagePrice:le,scheduleTime:c,trackingId:f,qrcode:T,paymentMethod:y,position:1})})]})]})]})]})};function Nct(){var b,T,S,U;const e=nf(),t=(b=e.state)==null?void 0:b.shipmentDetail,n=(T=e.state)==null?void 0:T.originCityCoords,r=(S=e.state)==null?void 0:S.destinationCityCoords,s=(U=e.state)==null?void 0:U.trackingId,[a,c]=q.useState(!1),[i,f]=q.useState(""),[g,y]=q.useState(null);return A.jsxs("div",{className:"flex",children:[A.jsx(v0,{}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsx("div",{className:"flex-1 min-[1226px]:ml-[18vw] w-[100vw]  h-screen bg-white overflow-y-auto",children:A.jsxs("div",{className:"w-full bg-white flex flex-col",children:[A.jsx("div",{className:"w-full shadow-lg bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-5xl max-sm:text-2xl font-semibold",children:"Shipment Tracking"})}),A.jsxs("div",{className:"sm:flex justify-center items-center gap-4 px-4 py-6 ",children:[A.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg p-5",children:[A.jsx("div",{className:"w-full border shadow-sm rounded-full py-2 px-4 mb-4 flex justify-center items-center",children:A.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Shipment Details"})}),A.jsxs("div",{className:"flex flex-col gap-3 text-sm sm:text-base text-gray-700",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Tracking ID:"})," ",t==null?void 0:t.trackingid]}),A.jsxs("p",{children:[A.jsx("strong",{children:"From:"})," ",t==null?void 0:t.originCity]}),A.jsxs("p",{children:[A.jsx("strong",{children:"To:"})," ",t==null?void 0:t.destinationCity]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Status:"})," ",t==null?void 0:t.shipmentStatus]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Last Updated:"})," ",i]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Estimated Arrival:"})," ",g!==null?`${g} minutes`:"Calculating ETA..."]})]})]}),A.jsx("div",{className:"w-full",children:A.jsx(kQ,{originCityCoords:n,destinationCityCoords:r,trackingId:s,setLastUpdateAgo:f,setEta:y})})]}),a&&A.jsx("div",{className:"w-full flex justify-center absolute top-[50%] right-[0%]",children:A.jsx("div",{className:"w-[30%]  rounded-3xl shadow-2xl flex justify-center items-center flex-col p-5 relative bg-white transition-all duration-300",children:A.jsx("p",{className:" text-gray-700 text-[44px] font-semibold text-center",children:"Rider Disconected. Try later!"})})})]})})]})}const Rct=()=>{const e=Mo(),[t,n]=q.useState(""),[r,s]=q.useState(null),[a,c]=q.useState("idle"),i=g=>{s(""),n(g.target.value)},f=async()=>{if(!t){s("Tracking Id is required*");return}try{c("processing");const g=await fetch("https://swiftlogix.cc/api/track-shipment",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:t})});g.ok||console.log("Error in response");const y=await g.json();if(y.success){c("success"),e("/track-shipment",{state:{shipmentDetail:y.shipmentDetail,originCityCoords:y.originCityCoords,destinationCityCoords:y.destinationCityCoords,trackingId:t}});return}c("idle"),s(y.message)}catch(g){console.error("Error:",g)}};return A.jsxs("div",{children:[A.jsx(_h,{}),A.jsxs(go,{delay:.2,children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-center",children:"Live Track Shipment"})}),A.jsx("div",{className:"w-full min-h-[40vh] flex justify-center items-center px-4",children:A.jsx("div",{className:"w-full flex justify-center",children:A.jsxs("div",{className:"w-full sm:w-[80%] md:w-[60%] lg:w-[50%] flex flex-col items-center",children:[A.jsxs("div",{className:"w-full flex flex-col sm:flex-row items-center sm:justify-between gap-2",children:[A.jsx("input",{type:"text",required:!0,onChange:i,value:t,disabled:a==="processing",placeholder:"Live-Track your Shipment",className:"placeholder:text-[#2632386d] w-full p-3 sm:p-[15px] rounded-lg sm:rounded-l-lg border-2 border-[#009688] bg-[#F7F7F7] focus:outline-none focus:ring-[#009688] focus:border-[#009688]"}),A.jsx("input",{type:"submit",value:a==="processing"?"Processing...":a==="success"?"Tracked":"Track Now",onClick:f,className:"bg-[#009688] hover:bg-[#FF7043] min-[550px]:relative right-6 cursor-pointer  w-auto p-3 sm:p-[17px] rounded-lg sm:rounded-l-none text-[#F7F7F7] font-semibold transition-all ease-in-out duration-300 hover:text-[18px]"})]}),A.jsx("div",{children:r&&A.jsx("p",{className:"text-red-500 font-semibold text-md mt-2",children:r})})]})})})]}),A.jsx(al,{}),A.jsx(Bs,{}),A.jsx(qp,{})]})},Oct=()=>{Mo();const[e,t]=q.useState({name:"",email:"",password:"",confirmpassword:"",city:"",adminaccesscode:""}),[n,r]=q.useState(!1),[s,a]=q.useState(!1),[c,i]=q.useState(""),[f,g]=q.useState(!1),[y,b]=q.useState(""),T=async()=>{try{const N=document.getElementById("credentials"),W=await qx(N,{scale:2,useCORS:!0}),L=W.toDataURL("image/png"),Q=new Ni("l","mm",[297,210]),V=277,Z=W.height*V/W.width;Q.addImage(L,"PNG",10,10,V,Z),Q.save("credential.pdf"),g(!1),t({name:"",email:"",password:"",confirmpassword:"",city:"",adminaccesscode:""})}catch(N){console.error("Error generating PDF:",N)}},S=N=>{const{name:W,value:L}=N.target;t({...e,[W]:L}),i("")},U=async N=>{if(N.preventDefault(),e.password.length<8){i("Password contain minimum 8 characters");return}if(e.password!==e.confirmpassword){i("Passwords do not match");return}i("");try{const W=await fetch("https://swiftlogix.cc/api/admin-signup",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});W.ok||console.log("response error");const L=await W.json();L.success?(b(L.employeeData),g(!0)):i(L.message)}catch(W){console.error("Error submitting form:",W)}};return A.jsxs(A.Fragment,{children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full flex justify-center items-center",children:A.jsx("div",{className:"flex flex-col items-center text-center",children:A.jsx("img",{src:GF,alt:"SwiftLogix Logo",className:"w-14 py-2 object-contain"})})}),A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-5xl font-semibold text-center",children:"Admin Portal"})}),A.jsxs("div",{className:"flex justify-center mt-2 w-full ",children:[A.jsx("div",{className:"left w-full lg:w-1/2   flex justify-center  ",children:A.jsxs("div",{className:"w-full lg:max-w-[400px] p-8 bg-white rounded-[10px] shadow-lg ",children:[A.jsx("h2",{className:"text-3xl text-gray-700 text-center mb-6 ",children:"Sign Up"}),c&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:c}),A.jsxs("form",{onSubmit:U,children:[A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"text",value:e.name,name:"name",onChange:S,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Username",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"email",value:e.email,name:"email",onChange:S,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Email Address",required:!0})}),A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:n?"text":"password",value:e.password,name:"password",onChange:S,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>r(!n),children:n?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:s?"text":"password",value:e.confirmpassword,name:"confirmpassword",onChange:S,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Confirm Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>a(!s),children:s?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsx("div",{className:"mb-4 border ",children:A.jsxs("select",{onChange:S,name:"city",value:e.city,id:"cities",className:"w-full p-4",required:!0,children:[A.jsx("option",{value:"",selected:!0,disabled:!0,children:"Select City"}),A.jsx("option",{value:"Lahore",children:"Lahore"}),A.jsx("option",{value:"Islamabad",children:"Islamabad"}),A.jsx("option",{value:"Karachi",children:"Karachi"}),A.jsx("option",{value:"Multan",children:"Multan"}),A.jsx("option",{value:"Okara",children:"Okara"}),A.jsx("option",{value:"Gujrat",children:"Gujrat"}),A.jsx("option",{value:"Rawalpindi",children:"Rawalpindi"}),A.jsx("option",{value:"Rahim Yar Khan",children:"Rahim Yar Khan"})]})}),A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"password",value:e.adminaccesscode,name:"adminaccesscode",onChange:S,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Admin access code",required:!0})}),A.jsx("button",{type:"submit",className:"w-full bg-[#009688] hover:bg-[#FF7043] text-white py-3 rounded-md mb-4 transition-all duration-300",children:"Sign Up"}),A.jsxs("p",{className:"text-center text-sm",children:["Already have an account?"," ",A.jsx(ss,{to:"/admin-login",className:"text-[#FF7043]",children:"Signin"})]})]})]})}),A.jsx("div",{className:"hidden right w-[50%] h-[100%]  justify-center items-center",children:A.jsxs("div",{className:"bg-[#FF7043] w-[70%] h-[80%] rounded-[60px] flex flex-col pt-4 justify-around items-center relative text-white ",children:[A.jsx("div",{className:"text-6xl",children:"WELCOME!"}),A.jsx("div",{className:"className=",absolute:!0,"bottom-0":!0,children:A.jsx("img",{src:a_,alt:"Logo"})})]})})]}),A.jsxs("div",{id:"credentials",className:"flex flex-col gap-4 translate-x-[-200%] p-4 text-3xl",children:[A.jsxs("div",{children:["Username: ",y.username]}),A.jsxs("div",{children:["Email: ",y.email]}),A.jsxs("div",{children:["Password: ",y.password]}),A.jsxs("div",{children:["City: ",y.city]})]}),f&&A.jsx("div",{className:"absolute left-0 top-0 right-0 bottom-0 w-full min-h-screen flex items-center justify-center px-4",children:A.jsxs("div",{className:"w-full max-w-md rounded-3xl shadow-2xl flex flex-col justify-center items-center p-6 bg-white relative transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20 h-20 shadow-2xl rounded-full absolute -top-10 bg-white"}),A.jsx("p",{className:"mt-16 text-gray-700 text-2xl sm:text-3xl md:text-4xl font-semibold text-center",children:"Successfully Account Created"}),A.jsx("button",{onClick:T,className:"mt-8 p-4 bg-[#009688] hover:bg-[#FF7043] text-white py-3 rounded-md transition-all duration-300",children:"Save Credentials"})]})})]})},Dct=()=>{const e=Mo(),[t,n]=q.useState({email:"",password:""});q.useState({userId:"",name:"",email:""});const[r,s]=q.useState(!1),[a,c]=q.useState(""),[i,f]=q.useState(!1),g=T=>{const{name:S,value:U}=T.target;n({...t,[S]:U})},y=()=>{setTimeout(()=>{e("/admin-dashboard")},1e3)},b=async T=>{T.preventDefault(),c("");const S=await fetch("https://swiftlogix.cc/api/admin-login",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify(t)});S.ok||console.log("response error");const U=await S.json();U.success?(localStorage.setItem("token",U.token),f(!0),y()):c(U.message)};return A.jsxs(A.Fragment,{children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full flex justify-center items-center",children:A.jsx("div",{className:"flex flex-col items-center text-center",children:A.jsx("img",{src:GF,alt:"SwiftLogix Logo",className:"w-14 py-2 object-contain"})})}),A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-5xl font-semibold text-center",children:"Admin Portal"})}),A.jsxs("div",{className:"flex flex-col lg:flex-row justify-center items-center w-full max-[1025px]:mt-10  max-h-screen overflow-hidden px-4 sm:px-6 lg:px-12 py-8 gap-8",children:[A.jsx("div",{className:"hidden  w-full lg:w-1/2 h-[50vh] lg:h-screen justify-center items-center",children:A.jsxs("div",{className:"bg-[#FF7043] w-[90%] sm:w-[70%] h-[90%] sm:h-[80%] rounded-[40px] sm:rounded-[60px] flex flex-col justify-between items-center pt-4 text-white relative",children:[A.jsx("div",{className:"text-3xl sm:text-6xl mt-5",children:"WELCOME!"}),A.jsx("div",{className:"absolute bottom-4 sm:bottom-6",children:A.jsx("img",{src:a_,alt:"Logo",className:"w-32 sm:w-40 md:w-52 lg:w-64 max-w-full h-auto object-contain"})})]})}),A.jsx("div",{className:"w-full lg:w-1/2 flex justify-center items-center",children:A.jsxs("div",{className:"w-full lg:max-w-[400px] p-6 sm:p-8 bg-white rounded-[10px] shadow-lg",children:[A.jsx("h2",{className:"text-2xl sm:text-3xl text-gray-700 text-center mb-6",children:"Sign In"}),a&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:a}),A.jsxs("form",{onSubmit:b,children:[A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"email",name:"email",value:t.email,onChange:g,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Email Address",required:!0})}),A.jsxs("div",{className:"mb-4 relative",children:[A.jsx("input",{type:r?"text":"password",name:"password",value:t.password,onChange:g,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>s(!r),children:r?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsx("div",{className:"mb-4 text-right",children:A.jsx("a",{href:"#",className:"text-[#FF7043] text-sm",children:"Forgot Password?"})}),A.jsx("button",{type:"submit",className:"w-full bg-[#009688] hover:bg-[#FF7043] text-white py-3 rounded-md mb-4 transition-all duration-300",children:"Login"}),A.jsxs("p",{className:"text-center text-sm",children:["Don't have an account?"," ",A.jsx(ss,{to:"/admin-signup",className:"text-[#FF7043]",children:"Signup"})]})]})]})})]}),i&&A.jsx("div",{className:"w-full flex justify-center items-center fixed top-0 left-0 h-screen bg-black bg-opacity-50 z-50",children:A.jsxs("div",{className:"w-[80%] sm:w-[60%] md:w-[40%] lg:w-[30%] rounded-3xl shadow-2xl bg-white p-5 flex flex-col items-center relative transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20   shadow-2xl rounded-full absolute -top-9"}),A.jsx("p",{className:"mt-10   text-center text-xl sm:text-[36px] text-gray-700 font-semibold",children:"You are successfully logged in."})]})})]})},Ag=()=>{const e="24px",[t,n]=q.useState(!1),[r,s]=q.useState(!1),[a,c]=q.useState(!1),i=Mo(),f=q.useRef(null),g=L=>L.isActive?"border rounded-lg":"",y=()=>{n(!0)},b=()=>{n(!1)},T=()=>{s(!1)},S=()=>{setTimeout(()=>{i("/admin-login")},700)},U=()=>{setTimeout(()=>{localStorage.removeItem("token"),f.current.textContent="Logged out Successfull"},500)},N=async()=>{f.current.textContent="Logging out...",U(),S()},W=()=>c(!a);return A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"min-[1226px]:hidden fixed top-4 left-4 z-50",children:A.jsx("button",{onClick:W,className:"text-white bg-teal-600 p-2 rounded-lg shadow-lg",children:a?A.jsx(RF,{size:20}):A.jsx(LF,{size:20})})}),A.jsxs("div",{className:`fixed  top-0 left-0 h-full z-40 bg-teal-600 text-white p-4 w-[70vw] sm:w-[50vw] min-[1226px]:w-[18vw] transition-transform duration-300 ease-in-out 
        ${a?"translate-x-0":"-translate-x-full"} min-[1226px]:translate-x-0 flex flex-col`,children:[A.jsxs("div",{className:"w-full max-w-screen-md mx-auto shadow-2xl rounded-xl p-4 sm:p-6 md:p-8 flex flex-col items-center justify-center mb-6",children:[A.jsx("h1",{className:"text-2xl sm:text-2xl md:text-2xl  min-[1226px]:text-3xl min-[1486px]:text-[38px] font-bold text-center",children:"SWIFTLOGIX"}),A.jsx("h1",{className:"text-sm sm:text-base md:text-lg lg:text-xl font-bold text-center mt-2",children:"Admin Portal"})]}),A.jsx("div",{className:"flex-grow",children:A.jsxs("ul",{className:"font-semibold shadow-sm flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-xl",children:[A.jsx(ss,{className:g,to:"/admin-dashboard",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(mB,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Dashboard"})]})}),A.jsx(ss,{className:g,to:"/admin-shipments",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(t8,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Shipments"})]})}),A.jsx(ss,{className:g,to:"/admin-payment",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(Bge,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Payment"})]})}),A.jsx(ss,{className:g,to:"/admin-insurance",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(Ege,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Insurance"})]})}),A.jsx(ss,{className:g,to:"/admin-rider",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(MF,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Rider"})]})})]})}),A.jsxs("div",{className:"mt-auto",children:[A.jsx("ul",{className:"font-semibold flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-lg",children:A.jsxs("li",{onClick:y,className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(r8,{size:e,color:"#FF7043"}),A.jsx("span",{children:"Settings"})]})}),A.jsx("ul",{onClick:N,className:"font-semibold flex flex-col gap-4 pl-6 cursor-pointer bg-[#009688] p-2 mt-1 rounded-lg",children:A.jsxs("li",{className:"flex gap-2 hover:border transition-all duration-100 p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(i8,{size:e,color:"#FF7043"}),A.jsx("span",{ref:f,children:"Log out"})]})})]}),r&&A.jsx(mfe,{onClose:T}),t&&A.jsx(Afe,{onClose:b})]})]})},Uct=()=>A.jsx("div",{className:"my-6 px-4 w-full",children:A.jsxs("div",{className:"flex flex-wrap justify-center gap-6 text-[#F7F7F7]",children:[A.jsx(ss,{to:"/admin-ratecalculator",children:A.jsxs("div",{className:"w-[9rem] sm:w-[10rem] h-[7rem] sm:h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-md cursor-pointer transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-lg",children:[A.jsx(n8,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center text-sm",children:"Rate Calculator"})]})}),A.jsx(ss,{to:"/admin-scheduleship",children:A.jsxs("div",{className:"w-[9rem] sm:w-[10rem] h-[7rem] sm:h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-md cursor-pointer transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-lg",children:[A.jsx(sS,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center text-sm",children:"Schedule a Ship"})]})}),A.jsx(ss,{to:"/admin-reprintlabel",children:A.jsxs("div",{className:"w-[9rem] sm:w-[10rem] h-[7rem] sm:h-[7.5rem] bg-[#009688] flex flex-col justify-center items-center gap-2 rounded-lg shadow-md cursor-pointer transition-transform duration-300 ease-in-out hover:scale-105 hover:shadow-lg",children:[A.jsx(NF,{size:24,color:"#FF7043"}),A.jsx("span",{className:"font-semibold text-center text-sm",children:"Reprint Shipping Label"})]})})]})}),zct=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(""),[a,c]=q.useState(""),[i,f]=q.useState(null),g=b=>{f(""),c(b.target.value)};q.useEffect(()=>{(async()=>{try{const T=localStorage.getItem("token"),S=await fetch("https://swiftlogix.cc/api/admin",{method:"GET",headers:{Authorization:`Bearer ${T}`}});S.ok||console.log("Response error");const U=await S.json();U.success||e("/admin-login"),n(U.userData)}catch{}})()},[]);const y=async()=>{if(!a){f("Tracking Id is required*");return}try{const b=await fetch("https://swiftlogix.cc/api/track-shipment",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:a})});b.ok||console.log("Error in response");const T=await b.json();if(T.success){e("/admin-trackingshipment",{state:{shipmentDetail:T.shipmentDetail,originCityCoords:T.originCityCoords,destinationCityCoords:T.destinationCityCoords,trackingId:a}});return}f(T.message)}catch(b){console.error("Error:",b)}};return A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row min-h-screen",children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full min-[1226px]:w-[18vw]",children:A.jsx(Ag,{userData:t})}),A.jsx("div",{className:"flex-1 bg-white overflow-y-auto px-4 sm:px-6 lg:px-10",children:r===""&&A.jsxs("div",{className:"flex flex-col min-h-screen",children:[A.jsx("div",{className:"flex flex-col sm:flex-row justify-between items-center py-6",children:A.jsxs("div",{className:"flex items-center gap-3 shadow-xl rounded-xl px-4 py-2",children:[A.jsx("h2",{className:"text-3xl sm:text-4xl text-[#009688] font-bold",children:"Hello,"}),A.jsx("p",{className:"text-3xl sm:text-4xl text-gray-700 font-bold",children:t==null?void 0:t.city})]})}),A.jsx("div",{className:"w-full flex items-center justify-center mb-8",children:A.jsxs("div",{className:"w-full sm:w-[80%] md:w-[60%] flex flex-col items-center",children:[A.jsxs("div",{className:"w-full flex flex-col sm:flex-row items-stretch",children:[A.jsx("input",{type:"text",required:!0,onChange:g,value:a,placeholder:"Live-Track your Shipment",className:"placeholder:text-[#2632386d] w-full p-4 border-2 border-[#009688] bg-[#F7F7F7] focus:outline-none rounded-t-lg sm:rounded-l-lg sm:rounded-tr-none focus:ring-[#009688] focus:border-[#009688]"}),A.jsx("input",{type:"submit",value:"Track Now",onClick:y,className:"bg-[#009688] hover:bg-[#FF7043] text-white font-semibold p-4 cursor-pointer rounded-b-lg sm:rounded-r-lg sm:rounded-bl-none transition-all duration-300 hover:text-[18px]"})]}),i&&A.jsx("p",{className:"text-red-500 font-semibold text-md mt-2",children:i})]})}),A.jsx(Uct,{})]})})]})},Qct=()=>A.jsx("div",{});function Hct(e){return yl({tag:"svg",attr:{viewBox:"0 0 24 24"},child:[{tag:"path",attr:{d:"M12 22c1.1 0 2-.9 2-2h-4a2 2 0 0 0 2 2zm6-6v-5c0-3.07-1.64-5.64-4.5-6.32V4c0-.83-.67-1.5-1.5-1.5s-1.5.67-1.5 1.5v.68C7.63 5.36 6 7.92 6 11v5l-2 2v1h16v-1l-2-2z"},child:[]}]})(e)}const Vct=({senderFormData:e,receiverFormData:t,packageFormData:n,packagePrice:r,riderInfo:s})=>(q.useState(!1),A.jsxs("div",{className:"mt-3 px-4 ",children:[A.jsx("div",{className:"w-full flex justify-center items-center",children:A.jsxs("div",{className:"bg-white w-full md:w-[90%] border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Sender Information"}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 text-gray-700",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Name:"})," ",e.sendername]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Contact:"})," ",e.sendercontact]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Email:"})," ",e.senderemail]}),A.jsxs("p",{children:[A.jsx("strong",{children:"CNIC:"})," ",e.sendercnic]})]})]})]})}),A.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:A.jsxs("div",{className:"bg-white w-full md:w-[90%] border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Receiver Information"}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 pb-2 text-gray-700",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Name:"})," ",t.receivername]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Contact:"})," ",t.receivercontact]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Area/Town:"})," ",t.receiverarea]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Email:"})," ",t.receiveremail]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"CNIC:"})," ",t.receivercnic]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Building/House no:"})," ",t.receiverhouseno]})]})]}),A.jsx("div",{className:"w-full text-gray-700",children:A.jsxs("p",{children:[A.jsx("strong",{children:"Full Address:"})," ",t.receiveraddress]})})]})}),A.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:A.jsxs("div",{className:"bg-white w-full md:w-[90%] border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Package Information"}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 text-gray-700 mb-4",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Origin City:"})," ",n.originCity]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Weight:"})," ",n.weight," kg"]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Destination City:"})," ",n.destinationCity]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pieces:"})," ",n.pieces]})]})]}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 text-gray-700 mb-4",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Shipment Type:"})," ",n.shipmentType]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Delivery Method:"})," ",n.deliveryMethod]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Sensitive Product:"})," ",n.sensitivePackage]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Insurance:"})," ",n.insurance]}),n.deliveryMethod==="pickUpRider"&&A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pick-up Date:"})," ",n.pickupdate]}),A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pickup Time:"})," ",n.pickuptime]})]})]})]}),n.deliveryMethod==="pickUpRider"&&A.jsx("div",{className:"text-gray-700 mb-4",children:A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Pickup Address:"})," ",n.pickupaddress]})}),A.jsx("div",{className:"text-gray-700",children:A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Description:"})," ",n.packageDescription]})})]})}),s&&A.jsx("div",{className:"w-full flex justify-center items-center mt-4",children:A.jsxs("div",{className:"bg-white w-full md:w-[90%] border border-[#e2e8f0] p-6 rounded-lg shadow-md",children:[A.jsx("h3",{className:"text-2xl font-semibold text-gray-700 mb-4",children:"Rider Information"}),A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-10 text-gray-700",children:[A.jsxs("div",{className:"mb-2 sm:mb-0",children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Name:"})," ",s.name]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Contact:"})," ",s.mobileno]})]}),A.jsxs("div",{children:[A.jsxs("p",{className:"pb-2",children:[A.jsx("strong",{children:"Email:"})," ",s.email]}),A.jsxs("p",{children:[A.jsx("strong",{children:"CNIC:"})," ",s.cnic]})]})]})]})}),A.jsx("div",{className:"flex flex-col items-center my-4 px-2",children:A.jsx("div",{className:"flex items-center justify-center w-full md:w-[90%] text-gray-800",children:A.jsxs("p",{className:"text-[1.2rem] sm:text-xl",children:[A.jsx("strong",{className:"text-2xl font-bold sm:text-3xl",children:"Total Price:"})," ",r.totalPrice]})})})]})),$ct=({allShipments:e,pdfRef:t})=>A.jsxs("div",{ref:t,className:"space-y-6",children:[A.jsx("div",{className:"font-bold text-center ",children:"SWIFTLOGIX"}),e.map((n,r)=>{var s,a,c,i,f,g,y,b,T,S,U,N,W;return A.jsxs("div",{className:"border-2 max-w-4xl  w-full p-4 rounded-lg shadow-sm",children:[A.jsxs("div",{className:"flex justify-between mb-2 text-sm",children:[A.jsxs("div",{children:[A.jsx("span",{className:"font-semibold",children:"Tracking ID:"})," ",(s=n.trackingId)==null?void 0:s.trackingId]}),A.jsxs("div",{children:["Time: ",(a=n.packageFormData)==null?void 0:a.pickuptime,"    ",(c=n.packageFormData)==null?void 0:c.pickupdate]})]}),A.jsx("div",{className:"w-full h-px bg-gray-300 mb-4"}),A.jsxs("div",{className:"flex gap-4 text-sm",children:[A.jsxs("div",{className:"flex-1",children:[A.jsx("div",{className:"mb-2 font-semibold",children:"Sender Information"}),A.jsxs("div",{children:["Name: ",(i=n.senderFormData)==null?void 0:i.sendername]}),A.jsxs("div",{children:["Contact no: ",(f=n.senderFormData)==null?void 0:f.sendercontact]}),A.jsxs("div",{children:["Pay By: ",(g=n.packageFormData)==null?void 0:g.payby]}),((y=n.packageFormData)==null?void 0:y.paid)&&A.jsx("div",{className:"w-full flex justify-center",children:A.jsx("img",{src:jQ,alt:"paid",className:"w-20 py-4"})})]}),A.jsx("div",{className:"w-px bg-gray-300"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("div",{className:"mb-2 font-semibold",children:"Package Information"}),A.jsxs("div",{children:["Origin City: ",(b=n.packageFormData)==null?void 0:b.originCity]}),A.jsxs("div",{children:["Destination City: ",(T=n.packageFormData)==null?void 0:T.destinationCity]}),A.jsxs("div",{children:["Weight: ",(S=n.packageFormData)==null?void 0:S.weight]}),A.jsxs("div",{children:["Pieces: ",(U=n.packageFormData)==null?void 0:U.pieces]}),A.jsxs("div",{className:"",children:["Pickup Address: ",(N=n.packageFormData)==null?void 0:N.pickupaddress]}),A.jsxs("div",{className:"",children:["Description: ",(W=n.packageFormData)==null?void 0:W.packageDescription]})]}),A.jsx("div",{className:"w-px bg-gray-300"}),A.jsxs("div",{className:"flex-1",children:[A.jsx("div",{className:"mb-2 font-semibold",children:"Sender Confirmation"}),A.jsxs("div",{className:"flex items-center  gap-2 mb-4",children:["Picked? ",A.jsx("input",{type:"checkbox",className:"w-5 h-5 mt-4"})]}),A.jsx("div",{children:"Signature: __________________"})]})]})]},r)})]});var wfe={exports:{}};const Gct=NJ(Mrt),Kct=NJ(dfe);/*!
 * html2pdf.js v0.10.1
 * Copyright (c) 2021 Erik Koopmans
 * Released under the MIT License.
 */(function(e,t){(function(r,s){e.exports=s(Gct,Kct)})(self,function(n,r){return function(){var s={"./src/plugin/hyperlinks.js":function(f,g,y){y.r(g),y("./node_modules/core-js/modules/web.dom-collections.for-each.js"),y("./node_modules/core-js/modules/es.string.link.js");var b=y("./src/worker.js"),T=y("./src/utils.js"),S=[],U={toContainer:b.default.prototype.toContainer,toPdf:b.default.prototype.toPdf};b.default.prototype.toContainer=function(){return U.toContainer.call(this).then(function(){if(this.opt.enableLinks){var L=this.prop.container,Q=L.querySelectorAll("a"),V=(0,T.unitConvert)(L.getBoundingClientRect(),this.prop.pageSize.k);S=[],Array.prototype.forEach.call(Q,function(Z){for(var ne=Z.getClientRects(),Y=0;Y<ne.length;Y++){var le=(0,T.unitConvert)(ne[Y],this.prop.pageSize.k);le.left-=V.left,le.top-=V.top;var pe=Math.floor(le.top/this.prop.pageSize.inner.height)+1,_e=this.opt.margin[0]+le.top%this.prop.pageSize.inner.height,ye=this.opt.margin[1]+le.left;S.push({page:pe,top:_e,left:ye,clientRect:le,link:Z})}},this)}})},b.default.prototype.toPdf=function(){return U.toPdf.call(this).then(function(){if(this.opt.enableLinks){S.forEach(function(Q){this.prop.pdf.setPage(Q.page),this.prop.pdf.link(Q.left,Q.top,Q.clientRect.width,Q.clientRect.height,{url:Q.link.href})},this);var L=this.prop.pdf.internal.getNumberOfPages();this.prop.pdf.setPage(L)}})}},"./src/plugin/jspdf-plugin.js":function(f,g,y){y.r(g),y("./node_modules/core-js/modules/es.symbol.js"),y("./node_modules/core-js/modules/es.symbol.description.js"),y("./node_modules/core-js/modules/es.object.to-string.js"),y("./node_modules/core-js/modules/es.symbol.iterator.js"),y("./node_modules/core-js/modules/es.array.iterator.js"),y("./node_modules/core-js/modules/es.string.iterator.js"),y("./node_modules/core-js/modules/web.dom-collections.iterator.js");var b=y("jspdf");function T(S){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?T=function(N){return typeof N}:T=function(N){return N&&typeof Symbol=="function"&&N.constructor===Symbol&&N!==Symbol.prototype?"symbol":typeof N},T(S)}b.jsPDF.getPageSize=function(S,U,N){if(T(S)==="object"){var W=S;S=W.orientation,U=W.unit||U,N=W.format||N}U=U||"mm",N=N||"a4",S=(""+(S||"P")).toLowerCase();var L=(""+N).toLowerCase(),Q={a0:[2383.94,3370.39],a1:[1683.78,2383.94],a2:[1190.55,1683.78],a3:[841.89,1190.55],a4:[595.28,841.89],a5:[419.53,595.28],a6:[297.64,419.53],a7:[209.76,297.64],a8:[147.4,209.76],a9:[104.88,147.4],a10:[73.7,104.88],b0:[2834.65,4008.19],b1:[2004.09,2834.65],b2:[1417.32,2004.09],b3:[1000.63,1417.32],b4:[708.66,1000.63],b5:[498.9,708.66],b6:[354.33,498.9],b7:[249.45,354.33],b8:[175.75,249.45],b9:[124.72,175.75],b10:[87.87,124.72],c0:[2599.37,3676.54],c1:[1836.85,2599.37],c2:[1298.27,1836.85],c3:[918.43,1298.27],c4:[649.13,918.43],c5:[459.21,649.13],c6:[323.15,459.21],c7:[229.61,323.15],c8:[161.57,229.61],c9:[113.39,161.57],c10:[79.37,113.39],dl:[311.81,623.62],letter:[612,792],"government-letter":[576,756],legal:[612,1008],"junior-legal":[576,360],ledger:[1224,792],tabloid:[792,1224],"credit-card":[153,243]};switch(U){case"pt":var V=1;break;case"mm":var V=72/25.4;break;case"cm":var V=72/2.54;break;case"in":var V=72;break;case"px":var V=72/96;break;case"pc":var V=12;break;case"em":var V=12;break;case"ex":var V=6;break;default:throw"Invalid unit: "+U}if(Q.hasOwnProperty(L))var Z=Q[L][1]/V,ne=Q[L][0]/V;else try{var Z=N[1],ne=N[0]}catch{throw new Error("Invalid format: "+N)}if(S==="p"||S==="portrait"){if(S="p",ne>Z){var Y=ne;ne=Z,Z=Y}}else if(S==="l"||S==="landscape"){if(S="l",Z>ne){var Y=ne;ne=Z,Z=Y}}else throw"Invalid orientation: "+S;var le={width:ne,height:Z,unit:U,k:V};return le},g.default=b.jsPDF},"./src/plugin/pagebreaks.js":function(f,g,y){y.r(g),y("./node_modules/core-js/modules/es.array.concat.js"),y("./node_modules/core-js/modules/es.array.slice.js"),y("./node_modules/core-js/modules/es.array.join.js"),y("./node_modules/core-js/modules/web.dom-collections.for-each.js"),y("./node_modules/core-js/modules/es.object.keys.js");var b=y("./src/worker.js"),T=y("./src/utils.js"),S={toContainer:b.default.prototype.toContainer};b.default.template.opt.pagebreak={mode:["css","legacy"],before:[],after:[],avoid:[]},b.default.prototype.toContainer=function(){return S.toContainer.call(this).then(function(){var W=this.prop.container,L=this.prop.pageSize.inner.px.height,Q=[].concat(this.opt.pagebreak.mode),V={avoidAll:Q.indexOf("avoid-all")!==-1,css:Q.indexOf("css")!==-1,legacy:Q.indexOf("legacy")!==-1},Z={},ne=this;["before","after","avoid"].forEach(function(pe){var _e=V.avoidAll&&pe==="avoid";Z[pe]=_e?[]:[].concat(ne.opt.pagebreak[pe]||[]),Z[pe].length>0&&(Z[pe]=Array.prototype.slice.call(W.querySelectorAll(Z[pe].join(", "))))});var Y=W.querySelectorAll(".html2pdf__page-break");Y=Array.prototype.slice.call(Y);var le=W.querySelectorAll("*");Array.prototype.forEach.call(le,function(_e){var ye={before:!1,after:V.legacy&&Y.indexOf(_e)!==-1,avoid:V.avoidAll};if(V.css){var he=window.getComputedStyle(_e),be=["always","page","left","right"],Te=["avoid","avoid-page"];ye={before:ye.before||be.indexOf(he.breakBefore||he.pageBreakBefore)!==-1,after:ye.after||be.indexOf(he.breakAfter||he.pageBreakAfter)!==-1,avoid:ye.avoid||Te.indexOf(he.breakInside||he.pageBreakInside)!==-1}}Object.keys(ye).forEach(function(Qe){ye[Qe]=ye[Qe]||Z[Qe].indexOf(_e)!==-1});var Ee=_e.getBoundingClientRect();if(ye.avoid&&!ye.before){var Ne=Math.floor(Ee.top/L),Ge=Math.floor(Ee.bottom/L),Je=Math.abs(Ee.bottom-Ee.top)/L;Ge!==Ne&&Je<=1&&(ye.before=!0)}if(ye.before){var Ue=(0,T.createElement)("div",{style:{display:"block",height:L-Ee.top%L+"px"}});_e.parentNode.insertBefore(Ue,_e)}if(ye.after){var Ue=(0,T.createElement)("div",{style:{display:"block",height:L-Ee.bottom%L+"px"}});_e.parentNode.insertBefore(Ue,_e.nextSibling)}})})}},"./src/utils.js":function(f,g,y){y.r(g),y.d(g,{objType:function(){return T},createElement:function(){return S},cloneNode:function(){return U},unitConvert:function(){return N},toPx:function(){return W}}),y("./node_modules/core-js/modules/es.number.constructor.js"),y("./node_modules/core-js/modules/es.symbol.js"),y("./node_modules/core-js/modules/es.symbol.description.js"),y("./node_modules/core-js/modules/es.object.to-string.js"),y("./node_modules/core-js/modules/es.symbol.iterator.js"),y("./node_modules/core-js/modules/es.array.iterator.js"),y("./node_modules/core-js/modules/es.string.iterator.js"),y("./node_modules/core-js/modules/web.dom-collections.iterator.js");function b(L){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?b=function(V){return typeof V}:b=function(V){return V&&typeof Symbol=="function"&&V.constructor===Symbol&&V!==Symbol.prototype?"symbol":typeof V},b(L)}var T=function(Q){var V=b(Q);return V==="undefined"?"undefined":V==="string"||Q instanceof String?"string":V==="number"||Q instanceof Number?"number":V==="function"||Q instanceof Function?"function":Q&&Q.constructor===Array?"array":Q&&Q.nodeType===1?"element":V==="object"?"object":"unknown"},S=function(Q,V){var Z=document.createElement(Q);if(V.className&&(Z.className=V.className),V.innerHTML){Z.innerHTML=V.innerHTML;for(var ne=Z.getElementsByTagName("script"),Y=ne.length;Y-- >0;null)ne[Y].parentNode.removeChild(ne[Y])}for(var le in V.style)Z.style[le]=V.style[le];return Z},U=function L(Q,V){for(var Z=Q.nodeType===3?document.createTextNode(Q.nodeValue):Q.cloneNode(!1),ne=Q.firstChild;ne;ne=ne.nextSibling)(V===!0||ne.nodeType!==1||ne.nodeName!=="SCRIPT")&&Z.appendChild(L(ne,V));return Q.nodeType===1&&(Q.nodeName==="CANVAS"?(Z.width=Q.width,Z.height=Q.height,Z.getContext("2d").drawImage(Q,0,0)):(Q.nodeName==="TEXTAREA"||Q.nodeName==="SELECT")&&(Z.value=Q.value),Z.addEventListener("load",function(){Z.scrollTop=Q.scrollTop,Z.scrollLeft=Q.scrollLeft},!0)),Z},N=function(Q,V){if(T(Q)==="number")return Q*72/96/V;var Z={};for(var ne in Q)Z[ne]=Q[ne]*72/96/V;return Z},W=function(Q,V){return Math.floor(Q*V/72*96)}},"./src/worker.js":function(f,g,y){y.r(g),y("./node_modules/core-js/modules/es.object.assign.js"),y("./node_modules/core-js/modules/es.array.map.js"),y("./node_modules/core-js/modules/es.object.keys.js"),y("./node_modules/core-js/modules/es.array.concat.js"),y("./node_modules/core-js/modules/es.object.to-string.js"),y("./node_modules/core-js/modules/es.regexp.to-string.js"),y("./node_modules/core-js/modules/es.function.name.js"),y("./node_modules/core-js/modules/web.dom-collections.for-each.js");var b=y("jspdf"),T=y("html2canvas"),S=y("./src/utils.js"),U=y("./node_modules/es6-promise/dist/es6-promise.js"),N=y.n(U),W=N().Promise,L=function Q(V){var Z=Object.assign(Q.convert(W.resolve()),JSON.parse(JSON.stringify(Q.template))),ne=Q.convert(W.resolve(),Z);return ne=ne.setProgress(1,Q,1,[Q]),ne=ne.set(V),ne};L.prototype=Object.create(W.prototype),L.prototype.constructor=L,L.convert=function(V,Z){return V.__proto__=Z||L.prototype,V},L.template={prop:{src:null,container:null,overlay:null,canvas:null,img:null,pdf:null,pageSize:null},progress:{val:0,state:null,n:0,stack:[]},opt:{filename:"file.pdf",margin:[0,0,0,0],image:{type:"jpeg",quality:.95},enableLinks:!0,html2canvas:{},jsPDF:{}}},L.prototype.from=function(V,Z){function ne(Y){switch((0,S.objType)(Y)){case"string":return"string";case"element":return Y.nodeName.toLowerCase==="canvas"?"canvas":"element";default:return"unknown"}}return this.then(function(){switch(Z=Z||ne(V),Z){case"string":return this.set({src:(0,S.createElement)("div",{innerHTML:V})});case"element":return this.set({src:V});case"canvas":return this.set({canvas:V});case"img":return this.set({img:V});default:return this.error("Unknown source type.")}})},L.prototype.to=function(V){switch(V){case"container":return this.toContainer();case"canvas":return this.toCanvas();case"img":return this.toImg();case"pdf":return this.toPdf();default:return this.error("Invalid target.")}},L.prototype.toContainer=function(){var V=[function(){return this.prop.src||this.error("Cannot duplicate - no source HTML.")},function(){return this.prop.pageSize||this.setPageSize()}];return this.thenList(V).then(function(){var ne={position:"fixed",overflow:"hidden",zIndex:1e3,left:0,right:0,bottom:0,top:0,backgroundColor:"rgba(0,0,0,0.8)"},Y={position:"absolute",width:this.prop.pageSize.inner.width+this.prop.pageSize.unit,left:0,right:0,top:0,height:"auto",margin:"auto",backgroundColor:"white"};ne.opacity=0;var le=(0,S.cloneNode)(this.prop.src,this.opt.html2canvas.javascriptEnabled);this.prop.overlay=(0,S.createElement)("div",{className:"html2pdf__overlay",style:ne}),this.prop.container=(0,S.createElement)("div",{className:"html2pdf__container",style:Y}),this.prop.container.appendChild(le),this.prop.overlay.appendChild(this.prop.container),document.body.appendChild(this.prop.overlay)})},L.prototype.toCanvas=function(){var V=[function(){return document.body.contains(this.prop.container)||this.toContainer()}];return this.thenList(V).then(function(){var ne=Object.assign({},this.opt.html2canvas);return delete ne.onrendered,T(this.prop.container,ne)}).then(function(ne){var Y=this.opt.html2canvas.onrendered||function(){};Y(ne),this.prop.canvas=ne,document.body.removeChild(this.prop.overlay)})},L.prototype.toImg=function(){var V=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(V).then(function(){var ne=this.prop.canvas.toDataURL("image/"+this.opt.image.type,this.opt.image.quality);this.prop.img=document.createElement("img"),this.prop.img.src=ne})},L.prototype.toPdf=function(){var V=[function(){return this.prop.canvas||this.toCanvas()}];return this.thenList(V).then(function(){var ne=this.prop.canvas,Y=this.opt,le=ne.height,pe=Math.floor(ne.width*this.prop.pageSize.inner.ratio),_e=Math.ceil(le/pe),ye=this.prop.pageSize.inner.height,he=document.createElement("canvas"),be=he.getContext("2d");he.width=ne.width,he.height=pe,this.prop.pdf=this.prop.pdf||new b.jsPDF(Y.jsPDF);for(var Te=0;Te<_e;Te++){Te===_e-1&&le%pe!==0&&(he.height=le%pe,ye=he.height*this.prop.pageSize.inner.width/he.width);var Ee=he.width,Ne=he.height;be.fillStyle="white",be.fillRect(0,0,Ee,Ne),be.drawImage(ne,0,Te*pe,Ee,Ne,0,0,Ee,Ne),Te&&this.prop.pdf.addPage();var Ge=he.toDataURL("image/"+Y.image.type,Y.image.quality);this.prop.pdf.addImage(Ge,Y.image.type,Y.margin[1],Y.margin[0],this.prop.pageSize.inner.width,ye)}})},L.prototype.output=function(V,Z,ne){return ne=ne||"pdf",ne.toLowerCase()==="img"||ne.toLowerCase()==="image"?this.outputImg(V,Z):this.outputPdf(V,Z)},L.prototype.outputPdf=function(V,Z){var ne=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(ne).then(function(){return this.prop.pdf.output(V,Z)})},L.prototype.outputImg=function(V,Z){var ne=[function(){return this.prop.img||this.toImg()}];return this.thenList(ne).then(function(){switch(V){case void 0:case"img":return this.prop.img;case"datauristring":case"dataurlstring":return this.prop.img.src;case"datauri":case"dataurl":return document.location.href=this.prop.img.src;default:throw'Image output type "'+V+'" is not supported.'}})},L.prototype.save=function(V){var Z=[function(){return this.prop.pdf||this.toPdf()}];return this.thenList(Z).set(V?{filename:V}:null).then(function(){this.prop.pdf.save(this.opt.filename)})},L.prototype.set=function(V){if((0,S.objType)(V)!=="object")return this;var Z=Object.keys(V||{}).map(function(ne){switch(ne){case"margin":return this.setMargin.bind(this,V.margin);case"jsPDF":return function(){return this.opt.jsPDF=V.jsPDF,this.setPageSize()};case"pageSize":return this.setPageSize.bind(this,V.pageSize);default:return ne in L.template.prop?function(){this.prop[ne]=V[ne]}:function(){this.opt[ne]=V[ne]}}},this);return this.then(function(){return this.thenList(Z)})},L.prototype.get=function(V,Z){return this.then(function(){var Y=V in L.template.prop?this.prop[V]:this.opt[V];return Z?Z(Y):Y})},L.prototype.setMargin=function(V){return this.then(function(){switch((0,S.objType)(V)){case"number":V=[V,V,V,V];case"array":if(V.length===2&&(V=[V[0],V[1],V[0],V[1]]),V.length===4)break;default:return this.error("Invalid margin array.")}this.opt.margin=V}).then(this.setPageSize)},L.prototype.setPageSize=function(V){return this.then(function(){V=V||b.jsPDF.getPageSize(this.opt.jsPDF),V.hasOwnProperty("inner")||(V.inner={width:V.width-this.opt.margin[1]-this.opt.margin[3],height:V.height-this.opt.margin[0]-this.opt.margin[2]},V.inner.px={width:(0,S.toPx)(V.inner.width,V.k),height:(0,S.toPx)(V.inner.height,V.k)},V.inner.ratio=V.inner.height/V.inner.width),this.prop.pageSize=V})},L.prototype.setProgress=function(V,Z,ne,Y){return V!=null&&(this.progress.val=V),Z!=null&&(this.progress.state=Z),ne!=null&&(this.progress.n=ne),Y!=null&&(this.progress.stack=Y),this.progress.ratio=this.progress.val/this.progress.state,this},L.prototype.updateProgress=function(V,Z,ne,Y){return this.setProgress(V?this.progress.val+V:null,Z||null,ne?this.progress.n+ne:null,Y?this.progress.stack.concat(Y):null)},L.prototype.then=function(V,Z){var ne=this;return this.thenCore(V,Z,function(le,pe){return ne.updateProgress(null,null,1,[le]),W.prototype.then.call(this,function(ye){return ne.updateProgress(null,le),ye}).then(le,pe).then(function(ye){return ne.updateProgress(1),ye})})},L.prototype.thenCore=function(V,Z,ne){ne=ne||W.prototype.then;var Y=this;V&&(V=V.bind(Y)),Z&&(Z=Z.bind(Y));var le=W.toString().indexOf("[native code]")!==-1&&W.name==="Promise",pe=le?Y:L.convert(Object.assign({},Y),W.prototype),_e=ne.call(pe,V,Z);return L.convert(_e,Y.__proto__)},L.prototype.thenExternal=function(V,Z){return W.prototype.then.call(this,V,Z)},L.prototype.thenList=function(V){var Z=this;return V.forEach(function(Y){Z=Z.thenCore(Y)}),Z},L.prototype.catch=function(Q){Q&&(Q=Q.bind(this));var V=W.prototype.catch.call(this,Q);return L.convert(V,this)},L.prototype.catchExternal=function(V){return W.prototype.catch.call(this,V)},L.prototype.error=function(V){return this.then(function(){throw new Error(V)})},L.prototype.using=L.prototype.set,L.prototype.saveAs=L.prototype.save,L.prototype.export=L.prototype.output,L.prototype.run=L.prototype.then,g.default=L},"./node_modules/core-js/internals/a-function.js":function(f){f.exports=function(g){if(typeof g!="function")throw TypeError(String(g)+" is not a function");return g}},"./node_modules/core-js/internals/a-possible-prototype.js":function(f,g,y){var b=y("./node_modules/core-js/internals/is-object.js");f.exports=function(T){if(!b(T)&&T!==null)throw TypeError("Can't set "+String(T)+" as a prototype");return T}},"./node_modules/core-js/internals/add-to-unscopables.js":function(f,g,y){var b=y("./node_modules/core-js/internals/well-known-symbol.js"),T=y("./node_modules/core-js/internals/object-create.js"),S=y("./node_modules/core-js/internals/object-define-property.js"),U=b("unscopables"),N=Array.prototype;N[U]==null&&S.f(N,U,{configurable:!0,value:T(null)}),f.exports=function(W){N[U][W]=!0}},"./node_modules/core-js/internals/an-object.js":function(f,g,y){var b=y("./node_modules/core-js/internals/is-object.js");f.exports=function(T){if(!b(T))throw TypeError(String(T)+" is not an object");return T}},"./node_modules/core-js/internals/array-for-each.js":function(f,g,y){var b=y("./node_modules/core-js/internals/array-iteration.js").forEach,T=y("./node_modules/core-js/internals/array-method-is-strict.js"),S=T("forEach");f.exports=S?[].forEach:function(N){return b(this,N,arguments.length>1?arguments[1]:void 0)}},"./node_modules/core-js/internals/array-includes.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-indexed-object.js"),T=y("./node_modules/core-js/internals/to-length.js"),S=y("./node_modules/core-js/internals/to-absolute-index.js"),U=function(N){return function(W,L,Q){var V=b(W),Z=T(V.length),ne=S(Q,Z),Y;if(N&&L!=L){for(;Z>ne;)if(Y=V[ne++],Y!=Y)return!0}else for(;Z>ne;ne++)if((N||ne in V)&&V[ne]===L)return N||ne||0;return!N&&-1}};f.exports={includes:U(!0),indexOf:U(!1)}},"./node_modules/core-js/internals/array-iteration.js":function(f,g,y){var b=y("./node_modules/core-js/internals/function-bind-context.js"),T=y("./node_modules/core-js/internals/indexed-object.js"),S=y("./node_modules/core-js/internals/to-object.js"),U=y("./node_modules/core-js/internals/to-length.js"),N=y("./node_modules/core-js/internals/array-species-create.js"),W=[].push,L=function(Q){var V=Q==1,Z=Q==2,ne=Q==3,Y=Q==4,le=Q==6,pe=Q==7,_e=Q==5||le;return function(ye,he,be,Te){for(var Ee=S(ye),Ne=T(Ee),Ge=b(he,be,3),Je=U(Ne.length),Ue=0,Qe=Te||N,xe=V?Qe(ye,Je):Z||pe?Qe(ye,0):void 0,at,we;Je>Ue;Ue++)if((_e||Ue in Ne)&&(at=Ne[Ue],we=Ge(at,Ue,Ee),Q))if(V)xe[Ue]=we;else if(we)switch(Q){case 3:return!0;case 5:return at;case 6:return Ue;case 2:W.call(xe,at)}else switch(Q){case 4:return!1;case 7:W.call(xe,at)}return le?-1:ne||Y?Y:xe}};f.exports={forEach:L(0),map:L(1),filter:L(2),some:L(3),every:L(4),find:L(5),findIndex:L(6),filterReject:L(7)}},"./node_modules/core-js/internals/array-method-has-species-support.js":function(f,g,y){var b=y("./node_modules/core-js/internals/fails.js"),T=y("./node_modules/core-js/internals/well-known-symbol.js"),S=y("./node_modules/core-js/internals/engine-v8-version.js"),U=T("species");f.exports=function(N){return S>=51||!b(function(){var W=[],L=W.constructor={};return L[U]=function(){return{foo:1}},W[N](Boolean).foo!==1})}},"./node_modules/core-js/internals/array-method-is-strict.js":function(f,g,y){var b=y("./node_modules/core-js/internals/fails.js");f.exports=function(T,S){var U=[][T];return!!U&&b(function(){U.call(null,S||function(){throw 1},1)})}},"./node_modules/core-js/internals/array-species-constructor.js":function(f,g,y){var b=y("./node_modules/core-js/internals/is-object.js"),T=y("./node_modules/core-js/internals/is-array.js"),S=y("./node_modules/core-js/internals/well-known-symbol.js"),U=S("species");f.exports=function(N){var W;return T(N)&&(W=N.constructor,typeof W=="function"&&(W===Array||T(W.prototype))?W=void 0:b(W)&&(W=W[U],W===null&&(W=void 0))),W===void 0?Array:W}},"./node_modules/core-js/internals/array-species-create.js":function(f,g,y){var b=y("./node_modules/core-js/internals/array-species-constructor.js");f.exports=function(T,S){return new(b(T))(S===0?0:S)}},"./node_modules/core-js/internals/classof-raw.js":function(f){var g={}.toString;f.exports=function(y){return g.call(y).slice(8,-1)}},"./node_modules/core-js/internals/classof.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-string-tag-support.js"),T=y("./node_modules/core-js/internals/classof-raw.js"),S=y("./node_modules/core-js/internals/well-known-symbol.js"),U=S("toStringTag"),N=T(function(){return arguments}())=="Arguments",W=function(L,Q){try{return L[Q]}catch{}};f.exports=b?T:function(L){var Q,V,Z;return L===void 0?"Undefined":L===null?"Null":typeof(V=W(Q=Object(L),U))=="string"?V:N?T(Q):(Z=T(Q))=="Object"&&typeof Q.callee=="function"?"Arguments":Z}},"./node_modules/core-js/internals/copy-constructor-properties.js":function(f,g,y){var b=y("./node_modules/core-js/internals/has.js"),T=y("./node_modules/core-js/internals/own-keys.js"),S=y("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),U=y("./node_modules/core-js/internals/object-define-property.js");f.exports=function(N,W){for(var L=T(W),Q=U.f,V=S.f,Z=0;Z<L.length;Z++){var ne=L[Z];b(N,ne)||Q(N,ne,V(W,ne))}}},"./node_modules/core-js/internals/correct-prototype-getter.js":function(f,g,y){var b=y("./node_modules/core-js/internals/fails.js");f.exports=!b(function(){function T(){}return T.prototype.constructor=null,Object.getPrototypeOf(new T)!==T.prototype})},"./node_modules/core-js/internals/create-html.js":function(f,g,y){var b=y("./node_modules/core-js/internals/require-object-coercible.js"),T=y("./node_modules/core-js/internals/to-string.js"),S=/"/g;f.exports=function(U,N,W,L){var Q=T(b(U)),V="<"+N;return W!==""&&(V+=" "+W+'="'+T(L).replace(S,"&quot;")+'"'),V+">"+Q+"</"+N+">"}},"./node_modules/core-js/internals/create-iterator-constructor.js":function(f,g,y){var b=y("./node_modules/core-js/internals/iterators-core.js").IteratorPrototype,T=y("./node_modules/core-js/internals/object-create.js"),S=y("./node_modules/core-js/internals/create-property-descriptor.js"),U=y("./node_modules/core-js/internals/set-to-string-tag.js"),N=y("./node_modules/core-js/internals/iterators.js"),W=function(){return this};f.exports=function(L,Q,V){var Z=Q+" Iterator";return L.prototype=T(b,{next:S(1,V)}),U(L,Z,!1,!0),N[Z]=W,L}},"./node_modules/core-js/internals/create-non-enumerable-property.js":function(f,g,y){var b=y("./node_modules/core-js/internals/descriptors.js"),T=y("./node_modules/core-js/internals/object-define-property.js"),S=y("./node_modules/core-js/internals/create-property-descriptor.js");f.exports=b?function(U,N,W){return T.f(U,N,S(1,W))}:function(U,N,W){return U[N]=W,U}},"./node_modules/core-js/internals/create-property-descriptor.js":function(f){f.exports=function(g,y){return{enumerable:!(g&1),configurable:!(g&2),writable:!(g&4),value:y}}},"./node_modules/core-js/internals/create-property.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-property-key.js"),T=y("./node_modules/core-js/internals/object-define-property.js"),S=y("./node_modules/core-js/internals/create-property-descriptor.js");f.exports=function(U,N,W){var L=b(N);L in U?T.f(U,L,S(0,W)):U[L]=W}},"./node_modules/core-js/internals/define-iterator.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/create-iterator-constructor.js"),S=y("./node_modules/core-js/internals/object-get-prototype-of.js"),U=y("./node_modules/core-js/internals/object-set-prototype-of.js"),N=y("./node_modules/core-js/internals/set-to-string-tag.js"),W=y("./node_modules/core-js/internals/create-non-enumerable-property.js"),L=y("./node_modules/core-js/internals/redefine.js"),Q=y("./node_modules/core-js/internals/well-known-symbol.js"),V=y("./node_modules/core-js/internals/is-pure.js"),Z=y("./node_modules/core-js/internals/iterators.js"),ne=y("./node_modules/core-js/internals/iterators-core.js"),Y=ne.IteratorPrototype,le=ne.BUGGY_SAFARI_ITERATORS,pe=Q("iterator"),_e="keys",ye="values",he="entries",be=function(){return this};f.exports=function(Te,Ee,Ne,Ge,Je,Ue,Qe){T(Ne,Ee,Ge);var xe=function(Me){if(Me===Je&&ot)return ot;if(!le&&Me in me)return me[Me];switch(Me){case _e:return function(){return new Ne(this,Me)};case ye:return function(){return new Ne(this,Me)};case he:return function(){return new Ne(this,Me)}}return function(){return new Ne(this)}},at=Ee+" Iterator",we=!1,me=Te.prototype,Ze=me[pe]||me["@@iterator"]||Je&&me[Je],ot=!le&&Ze||xe(Je),vt=Ee=="Array"&&me.entries||Ze,Qt,Ot,kt;if(vt&&(Qt=S(vt.call(new Te)),Y!==Object.prototype&&Qt.next&&(!V&&S(Qt)!==Y&&(U?U(Qt,Y):typeof Qt[pe]!="function"&&W(Qt,pe,be)),N(Qt,at,!0,!0),V&&(Z[at]=be))),Je==ye&&Ze&&Ze.name!==ye&&(we=!0,ot=function(){return Ze.call(this)}),(!V||Qe)&&me[pe]!==ot&&W(me,pe,ot),Z[Ee]=ot,Je)if(Ot={values:xe(ye),keys:Ue?ot:xe(_e),entries:xe(he)},Qe)for(kt in Ot)(le||we||!(kt in me))&&L(me,kt,Ot[kt]);else b({target:Ee,proto:!0,forced:le||we},Ot);return Ot}},"./node_modules/core-js/internals/define-well-known-symbol.js":function(f,g,y){var b=y("./node_modules/core-js/internals/path.js"),T=y("./node_modules/core-js/internals/has.js"),S=y("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),U=y("./node_modules/core-js/internals/object-define-property.js").f;f.exports=function(N){var W=b.Symbol||(b.Symbol={});T(W,N)||U(W,N,{value:S.f(N)})}},"./node_modules/core-js/internals/descriptors.js":function(f,g,y){var b=y("./node_modules/core-js/internals/fails.js");f.exports=!b(function(){return Object.defineProperty({},1,{get:function(){return 7}})[1]!=7})},"./node_modules/core-js/internals/document-create-element.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/is-object.js"),S=b.document,U=T(S)&&T(S.createElement);f.exports=function(N){return U?S.createElement(N):{}}},"./node_modules/core-js/internals/dom-iterables.js":function(f){f.exports={CSSRuleList:0,CSSStyleDeclaration:0,CSSValueList:0,ClientRectList:0,DOMRectList:0,DOMStringList:0,DOMTokenList:1,DataTransferItemList:0,FileList:0,HTMLAllCollection:0,HTMLCollection:0,HTMLFormElement:0,HTMLSelectElement:0,MediaList:0,MimeTypeArray:0,NamedNodeMap:0,NodeList:1,PaintRequestList:0,Plugin:0,PluginArray:0,SVGLengthList:0,SVGNumberList:0,SVGPathSegList:0,SVGPointList:0,SVGStringList:0,SVGTransformList:0,SourceBufferList:0,StyleSheetList:0,TextTrackCueList:0,TextTrackList:0,TouchList:0}},"./node_modules/core-js/internals/engine-user-agent.js":function(f,g,y){var b=y("./node_modules/core-js/internals/get-built-in.js");f.exports=b("navigator","userAgent")||""},"./node_modules/core-js/internals/engine-v8-version.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/engine-user-agent.js"),S=b.process,U=b.Deno,N=S&&S.versions||U&&U.version,W=N&&N.v8,L,Q;W?(L=W.split("."),Q=L[0]<4?1:L[0]+L[1]):T&&(L=T.match(/Edge\/(\d+)/),(!L||L[1]>=74)&&(L=T.match(/Chrome\/(\d+)/),L&&(Q=L[1]))),f.exports=Q&&+Q},"./node_modules/core-js/internals/enum-bug-keys.js":function(f){f.exports=["constructor","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","toLocaleString","toString","valueOf"]},"./node_modules/core-js/internals/export.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,S=y("./node_modules/core-js/internals/create-non-enumerable-property.js"),U=y("./node_modules/core-js/internals/redefine.js"),N=y("./node_modules/core-js/internals/set-global.js"),W=y("./node_modules/core-js/internals/copy-constructor-properties.js"),L=y("./node_modules/core-js/internals/is-forced.js");f.exports=function(Q,V){var Z=Q.target,ne=Q.global,Y=Q.stat,le,pe,_e,ye,he,be;if(ne?pe=b:Y?pe=b[Z]||N(Z,{}):pe=(b[Z]||{}).prototype,pe)for(_e in V){if(he=V[_e],Q.noTargetGet?(be=T(pe,_e),ye=be&&be.value):ye=pe[_e],le=L(ne?_e:Z+(Y?".":"#")+_e,Q.forced),!le&&ye!==void 0){if(typeof he==typeof ye)continue;W(he,ye)}(Q.sham||ye&&ye.sham)&&S(he,"sham",!0),U(pe,_e,he,Q)}}},"./node_modules/core-js/internals/fails.js":function(f){f.exports=function(g){try{return!!g()}catch{return!0}}},"./node_modules/core-js/internals/function-bind-context.js":function(f,g,y){var b=y("./node_modules/core-js/internals/a-function.js");f.exports=function(T,S,U){if(b(T),S===void 0)return T;switch(U){case 0:return function(){return T.call(S)};case 1:return function(N){return T.call(S,N)};case 2:return function(N,W){return T.call(S,N,W)};case 3:return function(N,W,L){return T.call(S,N,W,L)}}return function(){return T.apply(S,arguments)}}},"./node_modules/core-js/internals/get-built-in.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=function(S){return typeof S=="function"?S:void 0};f.exports=function(S,U){return arguments.length<2?T(b[S]):b[S]&&b[S][U]}},"./node_modules/core-js/internals/global.js":function(f){var g=function(y){return y&&y.Math==Math&&y};f.exports=g(typeof globalThis=="object"&&globalThis)||g(typeof window=="object"&&window)||g(typeof self=="object"&&self)||g(typeof Qm=="object"&&Qm)||function(){return this}()||Function("return this")()},"./node_modules/core-js/internals/has.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-object.js"),T={}.hasOwnProperty;f.exports=Object.hasOwn||function(U,N){return T.call(b(U),N)}},"./node_modules/core-js/internals/hidden-keys.js":function(f){f.exports={}},"./node_modules/core-js/internals/html.js":function(f,g,y){var b=y("./node_modules/core-js/internals/get-built-in.js");f.exports=b("document","documentElement")},"./node_modules/core-js/internals/ie8-dom-define.js":function(f,g,y){var b=y("./node_modules/core-js/internals/descriptors.js"),T=y("./node_modules/core-js/internals/fails.js"),S=y("./node_modules/core-js/internals/document-create-element.js");f.exports=!b&&!T(function(){return Object.defineProperty(S("div"),"a",{get:function(){return 7}}).a!=7})},"./node_modules/core-js/internals/indexed-object.js":function(f,g,y){var b=y("./node_modules/core-js/internals/fails.js"),T=y("./node_modules/core-js/internals/classof-raw.js"),S="".split;f.exports=b(function(){return!Object("z").propertyIsEnumerable(0)})?function(U){return T(U)=="String"?S.call(U,""):Object(U)}:Object},"./node_modules/core-js/internals/inherit-if-required.js":function(f,g,y){var b=y("./node_modules/core-js/internals/is-object.js"),T=y("./node_modules/core-js/internals/object-set-prototype-of.js");f.exports=function(S,U,N){var W,L;return T&&typeof(W=U.constructor)=="function"&&W!==N&&b(L=W.prototype)&&L!==N.prototype&&T(S,L),S}},"./node_modules/core-js/internals/inspect-source.js":function(f,g,y){var b=y("./node_modules/core-js/internals/shared-store.js"),T=Function.toString;typeof b.inspectSource!="function"&&(b.inspectSource=function(S){return T.call(S)}),f.exports=b.inspectSource},"./node_modules/core-js/internals/internal-state.js":function(f,g,y){var b=y("./node_modules/core-js/internals/native-weak-map.js"),T=y("./node_modules/core-js/internals/global.js"),S=y("./node_modules/core-js/internals/is-object.js"),U=y("./node_modules/core-js/internals/create-non-enumerable-property.js"),N=y("./node_modules/core-js/internals/has.js"),W=y("./node_modules/core-js/internals/shared-store.js"),L=y("./node_modules/core-js/internals/shared-key.js"),Q=y("./node_modules/core-js/internals/hidden-keys.js"),V="Object already initialized",Z=T.WeakMap,ne,Y,le,pe=function(Ne){return le(Ne)?Y(Ne):ne(Ne,{})},_e=function(Ne){return function(Ge){var Je;if(!S(Ge)||(Je=Y(Ge)).type!==Ne)throw TypeError("Incompatible receiver, "+Ne+" required");return Je}};if(b||W.state){var ye=W.state||(W.state=new Z),he=ye.get,be=ye.has,Te=ye.set;ne=function(Ne,Ge){if(be.call(ye,Ne))throw new TypeError(V);return Ge.facade=Ne,Te.call(ye,Ne,Ge),Ge},Y=function(Ne){return he.call(ye,Ne)||{}},le=function(Ne){return be.call(ye,Ne)}}else{var Ee=L("state");Q[Ee]=!0,ne=function(Ne,Ge){if(N(Ne,Ee))throw new TypeError(V);return Ge.facade=Ne,U(Ne,Ee,Ge),Ge},Y=function(Ne){return N(Ne,Ee)?Ne[Ee]:{}},le=function(Ne){return N(Ne,Ee)}}f.exports={set:ne,get:Y,has:le,enforce:pe,getterFor:_e}},"./node_modules/core-js/internals/is-array.js":function(f,g,y){var b=y("./node_modules/core-js/internals/classof-raw.js");f.exports=Array.isArray||function(S){return b(S)=="Array"}},"./node_modules/core-js/internals/is-forced.js":function(f,g,y){var b=y("./node_modules/core-js/internals/fails.js"),T=/#|\.prototype\./,S=function(Q,V){var Z=N[U(Q)];return Z==L?!0:Z==W?!1:typeof V=="function"?b(V):!!V},U=S.normalize=function(Q){return String(Q).replace(T,".").toLowerCase()},N=S.data={},W=S.NATIVE="N",L=S.POLYFILL="P";f.exports=S},"./node_modules/core-js/internals/is-object.js":function(f){f.exports=function(g){return typeof g=="object"?g!==null:typeof g=="function"}},"./node_modules/core-js/internals/is-pure.js":function(f){f.exports=!1},"./node_modules/core-js/internals/is-symbol.js":function(f,g,y){var b=y("./node_modules/core-js/internals/get-built-in.js"),T=y("./node_modules/core-js/internals/use-symbol-as-uid.js");f.exports=T?function(S){return typeof S=="symbol"}:function(S){var U=b("Symbol");return typeof U=="function"&&Object(S)instanceof U}},"./node_modules/core-js/internals/iterators-core.js":function(f,g,y){var b=y("./node_modules/core-js/internals/fails.js"),T=y("./node_modules/core-js/internals/object-get-prototype-of.js"),S=y("./node_modules/core-js/internals/create-non-enumerable-property.js"),U=y("./node_modules/core-js/internals/has.js"),N=y("./node_modules/core-js/internals/well-known-symbol.js"),W=y("./node_modules/core-js/internals/is-pure.js"),L=N("iterator"),Q=!1,V=function(){return this},Z,ne,Y;[].keys&&(Y=[].keys(),"next"in Y?(ne=T(T(Y)),ne!==Object.prototype&&(Z=ne)):Q=!0);var le=Z==null||b(function(){var pe={};return Z[L].call(pe)!==pe});le&&(Z={}),(!W||le)&&!U(Z,L)&&S(Z,L,V),f.exports={IteratorPrototype:Z,BUGGY_SAFARI_ITERATORS:Q}},"./node_modules/core-js/internals/iterators.js":function(f){f.exports={}},"./node_modules/core-js/internals/native-symbol.js":function(f,g,y){var b=y("./node_modules/core-js/internals/engine-v8-version.js"),T=y("./node_modules/core-js/internals/fails.js");f.exports=!!Object.getOwnPropertySymbols&&!T(function(){var S=Symbol();return!String(S)||!(Object(S)instanceof Symbol)||!Symbol.sham&&b&&b<41})},"./node_modules/core-js/internals/native-weak-map.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/inspect-source.js"),S=b.WeakMap;f.exports=typeof S=="function"&&/native code/.test(T(S))},"./node_modules/core-js/internals/object-assign.js":function(f,g,y){var b=y("./node_modules/core-js/internals/descriptors.js"),T=y("./node_modules/core-js/internals/fails.js"),S=y("./node_modules/core-js/internals/object-keys.js"),U=y("./node_modules/core-js/internals/object-get-own-property-symbols.js"),N=y("./node_modules/core-js/internals/object-property-is-enumerable.js"),W=y("./node_modules/core-js/internals/to-object.js"),L=y("./node_modules/core-js/internals/indexed-object.js"),Q=Object.assign,V=Object.defineProperty;f.exports=!Q||T(function(){if(b&&Q({b:1},Q(V({},"a",{enumerable:!0,get:function(){V(this,"b",{value:3,enumerable:!1})}}),{b:2})).b!==1)return!0;var Z={},ne={},Y=Symbol(),le="abcdefghijklmnopqrst";return Z[Y]=7,le.split("").forEach(function(pe){ne[pe]=pe}),Q({},Z)[Y]!=7||S(Q({},ne)).join("")!=le})?function(ne,Y){for(var le=W(ne),pe=arguments.length,_e=1,ye=U.f,he=N.f;pe>_e;)for(var be=L(arguments[_e++]),Te=ye?S(be).concat(ye(be)):S(be),Ee=Te.length,Ne=0,Ge;Ee>Ne;)Ge=Te[Ne++],(!b||he.call(be,Ge))&&(le[Ge]=be[Ge]);return le}:Q},"./node_modules/core-js/internals/object-create.js":function(f,g,y){var b=y("./node_modules/core-js/internals/an-object.js"),T=y("./node_modules/core-js/internals/object-define-properties.js"),S=y("./node_modules/core-js/internals/enum-bug-keys.js"),U=y("./node_modules/core-js/internals/hidden-keys.js"),N=y("./node_modules/core-js/internals/html.js"),W=y("./node_modules/core-js/internals/document-create-element.js"),L=y("./node_modules/core-js/internals/shared-key.js"),Q=">",V="<",Z="prototype",ne="script",Y=L("IE_PROTO"),le=function(){},pe=function(Te){return V+ne+Q+Te+V+"/"+ne+Q},_e=function(Te){Te.write(pe("")),Te.close();var Ee=Te.parentWindow.Object;return Te=null,Ee},ye=function(){var Te=W("iframe"),Ee="java"+ne+":",Ne;if(Te.style)return Te.style.display="none",N.appendChild(Te),Te.src=String(Ee),Ne=Te.contentWindow.document,Ne.open(),Ne.write(pe("document.F=Object")),Ne.close(),Ne.F},he,be=function(){try{he=new ActiveXObject("htmlfile")}catch{}be=document.domain&&he?_e(he):ye()||_e(he);for(var Te=S.length;Te--;)delete be[Z][S[Te]];return be()};U[Y]=!0,f.exports=Object.create||function(Ee,Ne){var Ge;return Ee!==null?(le[Z]=b(Ee),Ge=new le,le[Z]=null,Ge[Y]=Ee):Ge=be(),Ne===void 0?Ge:T(Ge,Ne)}},"./node_modules/core-js/internals/object-define-properties.js":function(f,g,y){var b=y("./node_modules/core-js/internals/descriptors.js"),T=y("./node_modules/core-js/internals/object-define-property.js"),S=y("./node_modules/core-js/internals/an-object.js"),U=y("./node_modules/core-js/internals/object-keys.js");f.exports=b?Object.defineProperties:function(W,L){S(W);for(var Q=U(L),V=Q.length,Z=0,ne;V>Z;)T.f(W,ne=Q[Z++],L[ne]);return W}},"./node_modules/core-js/internals/object-define-property.js":function(f,g,y){var b=y("./node_modules/core-js/internals/descriptors.js"),T=y("./node_modules/core-js/internals/ie8-dom-define.js"),S=y("./node_modules/core-js/internals/an-object.js"),U=y("./node_modules/core-js/internals/to-property-key.js"),N=Object.defineProperty;g.f=b?N:function(L,Q,V){if(S(L),Q=U(Q),S(V),T)try{return N(L,Q,V)}catch{}if("get"in V||"set"in V)throw TypeError("Accessors not supported");return"value"in V&&(L[Q]=V.value),L}},"./node_modules/core-js/internals/object-get-own-property-descriptor.js":function(f,g,y){var b=y("./node_modules/core-js/internals/descriptors.js"),T=y("./node_modules/core-js/internals/object-property-is-enumerable.js"),S=y("./node_modules/core-js/internals/create-property-descriptor.js"),U=y("./node_modules/core-js/internals/to-indexed-object.js"),N=y("./node_modules/core-js/internals/to-property-key.js"),W=y("./node_modules/core-js/internals/has.js"),L=y("./node_modules/core-js/internals/ie8-dom-define.js"),Q=Object.getOwnPropertyDescriptor;g.f=b?Q:function(Z,ne){if(Z=U(Z),ne=N(ne),L)try{return Q(Z,ne)}catch{}if(W(Z,ne))return S(!T.f.call(Z,ne),Z[ne])}},"./node_modules/core-js/internals/object-get-own-property-names-external.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-indexed-object.js"),T=y("./node_modules/core-js/internals/object-get-own-property-names.js").f,S={}.toString,U=typeof window=="object"&&window&&Object.getOwnPropertyNames?Object.getOwnPropertyNames(window):[],N=function(W){try{return T(W)}catch{return U.slice()}};f.exports.f=function(L){return U&&S.call(L)=="[object Window]"?N(L):T(b(L))}},"./node_modules/core-js/internals/object-get-own-property-names.js":function(f,g,y){var b=y("./node_modules/core-js/internals/object-keys-internal.js"),T=y("./node_modules/core-js/internals/enum-bug-keys.js"),S=T.concat("length","prototype");g.f=Object.getOwnPropertyNames||function(N){return b(N,S)}},"./node_modules/core-js/internals/object-get-own-property-symbols.js":function(f,g){g.f=Object.getOwnPropertySymbols},"./node_modules/core-js/internals/object-get-prototype-of.js":function(f,g,y){var b=y("./node_modules/core-js/internals/has.js"),T=y("./node_modules/core-js/internals/to-object.js"),S=y("./node_modules/core-js/internals/shared-key.js"),U=y("./node_modules/core-js/internals/correct-prototype-getter.js"),N=S("IE_PROTO"),W=Object.prototype;f.exports=U?Object.getPrototypeOf:function(L){return L=T(L),b(L,N)?L[N]:typeof L.constructor=="function"&&L instanceof L.constructor?L.constructor.prototype:L instanceof Object?W:null}},"./node_modules/core-js/internals/object-keys-internal.js":function(f,g,y){var b=y("./node_modules/core-js/internals/has.js"),T=y("./node_modules/core-js/internals/to-indexed-object.js"),S=y("./node_modules/core-js/internals/array-includes.js").indexOf,U=y("./node_modules/core-js/internals/hidden-keys.js");f.exports=function(N,W){var L=T(N),Q=0,V=[],Z;for(Z in L)!b(U,Z)&&b(L,Z)&&V.push(Z);for(;W.length>Q;)b(L,Z=W[Q++])&&(~S(V,Z)||V.push(Z));return V}},"./node_modules/core-js/internals/object-keys.js":function(f,g,y){var b=y("./node_modules/core-js/internals/object-keys-internal.js"),T=y("./node_modules/core-js/internals/enum-bug-keys.js");f.exports=Object.keys||function(U){return b(U,T)}},"./node_modules/core-js/internals/object-property-is-enumerable.js":function(f,g){var y={}.propertyIsEnumerable,b=Object.getOwnPropertyDescriptor,T=b&&!y.call({1:2},1);g.f=T?function(U){var N=b(this,U);return!!N&&N.enumerable}:y},"./node_modules/core-js/internals/object-set-prototype-of.js":function(f,g,y){var b=y("./node_modules/core-js/internals/an-object.js"),T=y("./node_modules/core-js/internals/a-possible-prototype.js");f.exports=Object.setPrototypeOf||("__proto__"in{}?function(){var S=!1,U={},N;try{N=Object.getOwnPropertyDescriptor(Object.prototype,"__proto__").set,N.call(U,[]),S=U instanceof Array}catch{}return function(L,Q){return b(L),T(Q),S?N.call(L,Q):L.__proto__=Q,L}}():void 0)},"./node_modules/core-js/internals/object-to-string.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-string-tag-support.js"),T=y("./node_modules/core-js/internals/classof.js");f.exports=b?{}.toString:function(){return"[object "+T(this)+"]"}},"./node_modules/core-js/internals/ordinary-to-primitive.js":function(f,g,y){var b=y("./node_modules/core-js/internals/is-object.js");f.exports=function(T,S){var U,N;if(S==="string"&&typeof(U=T.toString)=="function"&&!b(N=U.call(T))||typeof(U=T.valueOf)=="function"&&!b(N=U.call(T))||S!=="string"&&typeof(U=T.toString)=="function"&&!b(N=U.call(T)))return N;throw TypeError("Can't convert object to primitive value")}},"./node_modules/core-js/internals/own-keys.js":function(f,g,y){var b=y("./node_modules/core-js/internals/get-built-in.js"),T=y("./node_modules/core-js/internals/object-get-own-property-names.js"),S=y("./node_modules/core-js/internals/object-get-own-property-symbols.js"),U=y("./node_modules/core-js/internals/an-object.js");f.exports=b("Reflect","ownKeys")||function(W){var L=T.f(U(W)),Q=S.f;return Q?L.concat(Q(W)):L}},"./node_modules/core-js/internals/path.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js");f.exports=b},"./node_modules/core-js/internals/redefine.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/create-non-enumerable-property.js"),S=y("./node_modules/core-js/internals/has.js"),U=y("./node_modules/core-js/internals/set-global.js"),N=y("./node_modules/core-js/internals/inspect-source.js"),W=y("./node_modules/core-js/internals/internal-state.js"),L=W.get,Q=W.enforce,V=String(String).split("String");(f.exports=function(Z,ne,Y,le){var pe=le?!!le.unsafe:!1,_e=le?!!le.enumerable:!1,ye=le?!!le.noTargetGet:!1,he;if(typeof Y=="function"&&(typeof ne=="string"&&!S(Y,"name")&&T(Y,"name",ne),he=Q(Y),he.source||(he.source=V.join(typeof ne=="string"?ne:""))),Z===b){_e?Z[ne]=Y:U(ne,Y);return}else pe?!ye&&Z[ne]&&(_e=!0):delete Z[ne];_e?Z[ne]=Y:T(Z,ne,Y)})(Function.prototype,"toString",function(){return typeof this=="function"&&L(this).source||N(this)})},"./node_modules/core-js/internals/regexp-flags.js":function(f,g,y){var b=y("./node_modules/core-js/internals/an-object.js");f.exports=function(){var T=b(this),S="";return T.global&&(S+="g"),T.ignoreCase&&(S+="i"),T.multiline&&(S+="m"),T.dotAll&&(S+="s"),T.unicode&&(S+="u"),T.sticky&&(S+="y"),S}},"./node_modules/core-js/internals/require-object-coercible.js":function(f){f.exports=function(g){if(g==null)throw TypeError("Can't call method on "+g);return g}},"./node_modules/core-js/internals/set-global.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js");f.exports=function(T,S){try{Object.defineProperty(b,T,{value:S,configurable:!0,writable:!0})}catch{b[T]=S}return S}},"./node_modules/core-js/internals/set-to-string-tag.js":function(f,g,y){var b=y("./node_modules/core-js/internals/object-define-property.js").f,T=y("./node_modules/core-js/internals/has.js"),S=y("./node_modules/core-js/internals/well-known-symbol.js"),U=S("toStringTag");f.exports=function(N,W,L){N&&!T(N=L?N:N.prototype,U)&&b(N,U,{configurable:!0,value:W})}},"./node_modules/core-js/internals/shared-key.js":function(f,g,y){var b=y("./node_modules/core-js/internals/shared.js"),T=y("./node_modules/core-js/internals/uid.js"),S=b("keys");f.exports=function(U){return S[U]||(S[U]=T(U))}},"./node_modules/core-js/internals/shared-store.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/set-global.js"),S="__core-js_shared__",U=b[S]||T(S,{});f.exports=U},"./node_modules/core-js/internals/shared.js":function(f,g,y){var b=y("./node_modules/core-js/internals/is-pure.js"),T=y("./node_modules/core-js/internals/shared-store.js");(f.exports=function(S,U){return T[S]||(T[S]=U!==void 0?U:{})})("versions",[]).push({version:"3.16.0",mode:b?"pure":"global",copyright:"© 2021 Denis Pushkarev (zloirock.ru)"})},"./node_modules/core-js/internals/string-html-forced.js":function(f,g,y){var b=y("./node_modules/core-js/internals/fails.js");f.exports=function(T){return b(function(){var S=""[T]('"');return S!==S.toLowerCase()||S.split('"').length>3})}},"./node_modules/core-js/internals/string-multibyte.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-integer.js"),T=y("./node_modules/core-js/internals/to-string.js"),S=y("./node_modules/core-js/internals/require-object-coercible.js"),U=function(N){return function(W,L){var Q=T(S(W)),V=b(L),Z=Q.length,ne,Y;return V<0||V>=Z?N?"":void 0:(ne=Q.charCodeAt(V),ne<55296||ne>56319||V+1===Z||(Y=Q.charCodeAt(V+1))<56320||Y>57343?N?Q.charAt(V):ne:N?Q.slice(V,V+2):(ne-55296<<10)+(Y-56320)+65536)}};f.exports={codeAt:U(!1),charAt:U(!0)}},"./node_modules/core-js/internals/string-trim.js":function(f,g,y){var b=y("./node_modules/core-js/internals/require-object-coercible.js"),T=y("./node_modules/core-js/internals/to-string.js"),S=y("./node_modules/core-js/internals/whitespaces.js"),U="["+S+"]",N=RegExp("^"+U+U+"*"),W=RegExp(U+U+"*$"),L=function(Q){return function(V){var Z=T(b(V));return Q&1&&(Z=Z.replace(N,"")),Q&2&&(Z=Z.replace(W,"")),Z}};f.exports={start:L(1),end:L(2),trim:L(3)}},"./node_modules/core-js/internals/to-absolute-index.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-integer.js"),T=Math.max,S=Math.min;f.exports=function(U,N){var W=b(U);return W<0?T(W+N,0):S(W,N)}},"./node_modules/core-js/internals/to-indexed-object.js":function(f,g,y){var b=y("./node_modules/core-js/internals/indexed-object.js"),T=y("./node_modules/core-js/internals/require-object-coercible.js");f.exports=function(S){return b(T(S))}},"./node_modules/core-js/internals/to-integer.js":function(f){var g=Math.ceil,y=Math.floor;f.exports=function(b){return isNaN(b=+b)?0:(b>0?y:g)(b)}},"./node_modules/core-js/internals/to-length.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-integer.js"),T=Math.min;f.exports=function(S){return S>0?T(b(S),9007199254740991):0}},"./node_modules/core-js/internals/to-object.js":function(f,g,y){var b=y("./node_modules/core-js/internals/require-object-coercible.js");f.exports=function(T){return Object(b(T))}},"./node_modules/core-js/internals/to-primitive.js":function(f,g,y){var b=y("./node_modules/core-js/internals/is-object.js"),T=y("./node_modules/core-js/internals/is-symbol.js"),S=y("./node_modules/core-js/internals/ordinary-to-primitive.js"),U=y("./node_modules/core-js/internals/well-known-symbol.js"),N=U("toPrimitive");f.exports=function(W,L){if(!b(W)||T(W))return W;var Q=W[N],V;if(Q!==void 0){if(L===void 0&&(L="default"),V=Q.call(W,L),!b(V)||T(V))return V;throw TypeError("Can't convert object to primitive value")}return L===void 0&&(L="number"),S(W,L)}},"./node_modules/core-js/internals/to-property-key.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-primitive.js"),T=y("./node_modules/core-js/internals/is-symbol.js");f.exports=function(S){var U=b(S,"string");return T(U)?U:String(U)}},"./node_modules/core-js/internals/to-string-tag-support.js":function(f,g,y){var b=y("./node_modules/core-js/internals/well-known-symbol.js"),T=b("toStringTag"),S={};S[T]="z",f.exports=String(S)==="[object z]"},"./node_modules/core-js/internals/to-string.js":function(f,g,y){var b=y("./node_modules/core-js/internals/is-symbol.js");f.exports=function(T){if(b(T))throw TypeError("Cannot convert a Symbol value to a string");return String(T)}},"./node_modules/core-js/internals/uid.js":function(f){var g=0,y=Math.random();f.exports=function(b){return"Symbol("+String(b===void 0?"":b)+")_"+(++g+y).toString(36)}},"./node_modules/core-js/internals/use-symbol-as-uid.js":function(f,g,y){var b=y("./node_modules/core-js/internals/native-symbol.js");f.exports=b&&!Symbol.sham&&typeof Symbol.iterator=="symbol"},"./node_modules/core-js/internals/well-known-symbol-wrapped.js":function(f,g,y){var b=y("./node_modules/core-js/internals/well-known-symbol.js");g.f=b},"./node_modules/core-js/internals/well-known-symbol.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/shared.js"),S=y("./node_modules/core-js/internals/has.js"),U=y("./node_modules/core-js/internals/uid.js"),N=y("./node_modules/core-js/internals/native-symbol.js"),W=y("./node_modules/core-js/internals/use-symbol-as-uid.js"),L=T("wks"),Q=b.Symbol,V=W?Q:Q&&Q.withoutSetter||U;f.exports=function(Z){return(!S(L,Z)||!(N||typeof L[Z]=="string"))&&(N&&S(Q,Z)?L[Z]=Q[Z]:L[Z]=V("Symbol."+Z)),L[Z]}},"./node_modules/core-js/internals/whitespaces.js":function(f){f.exports=`	
\v\f\r                　\u2028\u2029\uFEFF`},"./node_modules/core-js/modules/es.array.concat.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/fails.js"),S=y("./node_modules/core-js/internals/is-array.js"),U=y("./node_modules/core-js/internals/is-object.js"),N=y("./node_modules/core-js/internals/to-object.js"),W=y("./node_modules/core-js/internals/to-length.js"),L=y("./node_modules/core-js/internals/create-property.js"),Q=y("./node_modules/core-js/internals/array-species-create.js"),V=y("./node_modules/core-js/internals/array-method-has-species-support.js"),Z=y("./node_modules/core-js/internals/well-known-symbol.js"),ne=y("./node_modules/core-js/internals/engine-v8-version.js"),Y=Z("isConcatSpreadable"),le=9007199254740991,pe="Maximum allowed index exceeded",_e=ne>=51||!T(function(){var Te=[];return Te[Y]=!1,Te.concat()[0]!==Te}),ye=V("concat"),he=function(Te){if(!U(Te))return!1;var Ee=Te[Y];return Ee!==void 0?!!Ee:S(Te)},be=!_e||!ye;b({target:"Array",proto:!0,forced:be},{concat:function(Ee){var Ne=N(this),Ge=Q(Ne,0),Je=0,Ue,Qe,xe,at,we;for(Ue=-1,xe=arguments.length;Ue<xe;Ue++)if(we=Ue===-1?Ne:arguments[Ue],he(we)){if(at=W(we.length),Je+at>le)throw TypeError(pe);for(Qe=0;Qe<at;Qe++,Je++)Qe in we&&L(Ge,Je,we[Qe])}else{if(Je>=le)throw TypeError(pe);L(Ge,Je++,we)}return Ge.length=Je,Ge}})},"./node_modules/core-js/modules/es.array.iterator.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-indexed-object.js"),T=y("./node_modules/core-js/internals/add-to-unscopables.js"),S=y("./node_modules/core-js/internals/iterators.js"),U=y("./node_modules/core-js/internals/internal-state.js"),N=y("./node_modules/core-js/internals/define-iterator.js"),W="Array Iterator",L=U.set,Q=U.getterFor(W);f.exports=N(Array,"Array",function(V,Z){L(this,{type:W,target:b(V),index:0,kind:Z})},function(){var V=Q(this),Z=V.target,ne=V.kind,Y=V.index++;return!Z||Y>=Z.length?(V.target=void 0,{value:void 0,done:!0}):ne=="keys"?{value:Y,done:!1}:ne=="values"?{value:Z[Y],done:!1}:{value:[Y,Z[Y]],done:!1}},"values"),S.Arguments=S.Array,T("keys"),T("values"),T("entries")},"./node_modules/core-js/modules/es.array.join.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/indexed-object.js"),S=y("./node_modules/core-js/internals/to-indexed-object.js"),U=y("./node_modules/core-js/internals/array-method-is-strict.js"),N=[].join,W=T!=Object,L=U("join",",");b({target:"Array",proto:!0,forced:W||!L},{join:function(V){return N.call(S(this),V===void 0?",":V)}})},"./node_modules/core-js/modules/es.array.map.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/array-iteration.js").map,S=y("./node_modules/core-js/internals/array-method-has-species-support.js"),U=S("map");b({target:"Array",proto:!0,forced:!U},{map:function(W){return T(this,W,arguments.length>1?arguments[1]:void 0)}})},"./node_modules/core-js/modules/es.array.slice.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/is-object.js"),S=y("./node_modules/core-js/internals/is-array.js"),U=y("./node_modules/core-js/internals/to-absolute-index.js"),N=y("./node_modules/core-js/internals/to-length.js"),W=y("./node_modules/core-js/internals/to-indexed-object.js"),L=y("./node_modules/core-js/internals/create-property.js"),Q=y("./node_modules/core-js/internals/well-known-symbol.js"),V=y("./node_modules/core-js/internals/array-method-has-species-support.js"),Z=V("slice"),ne=Q("species"),Y=[].slice,le=Math.max;b({target:"Array",proto:!0,forced:!Z},{slice:function(_e,ye){var he=W(this),be=N(he.length),Te=U(_e,be),Ee=U(ye===void 0?be:ye,be),Ne,Ge,Je;if(S(he)&&(Ne=he.constructor,typeof Ne=="function"&&(Ne===Array||S(Ne.prototype))?Ne=void 0:T(Ne)&&(Ne=Ne[ne],Ne===null&&(Ne=void 0)),Ne===Array||Ne===void 0))return Y.call(he,Te,Ee);for(Ge=new(Ne===void 0?Array:Ne)(le(Ee-Te,0)),Je=0;Te<Ee;Te++,Je++)Te in he&&L(Ge,Je,he[Te]);return Ge.length=Je,Ge}})},"./node_modules/core-js/modules/es.function.name.js":function(f,g,y){var b=y("./node_modules/core-js/internals/descriptors.js"),T=y("./node_modules/core-js/internals/object-define-property.js").f,S=Function.prototype,U=S.toString,N=/^\s*function ([^ (]*)/,W="name";b&&!(W in S)&&T(S,W,{configurable:!0,get:function(){try{return U.call(this).match(N)[1]}catch{return""}}})},"./node_modules/core-js/modules/es.number.constructor.js":function(f,g,y){var b=y("./node_modules/core-js/internals/descriptors.js"),T=y("./node_modules/core-js/internals/global.js"),S=y("./node_modules/core-js/internals/is-forced.js"),U=y("./node_modules/core-js/internals/redefine.js"),N=y("./node_modules/core-js/internals/has.js"),W=y("./node_modules/core-js/internals/classof-raw.js"),L=y("./node_modules/core-js/internals/inherit-if-required.js"),Q=y("./node_modules/core-js/internals/is-symbol.js"),V=y("./node_modules/core-js/internals/to-primitive.js"),Z=y("./node_modules/core-js/internals/fails.js"),ne=y("./node_modules/core-js/internals/object-create.js"),Y=y("./node_modules/core-js/internals/object-get-own-property-names.js").f,le=y("./node_modules/core-js/internals/object-get-own-property-descriptor.js").f,pe=y("./node_modules/core-js/internals/object-define-property.js").f,_e=y("./node_modules/core-js/internals/string-trim.js").trim,ye="Number",he=T[ye],be=he.prototype,Te=W(ne(be))==ye,Ee=function(Qe){if(Q(Qe))throw TypeError("Cannot convert a Symbol value to a number");var xe=V(Qe,"number"),at,we,me,Ze,ot,vt,Qt,Ot;if(typeof xe=="string"&&xe.length>2){if(xe=_e(xe),at=xe.charCodeAt(0),at===43||at===45){if(we=xe.charCodeAt(2),we===88||we===120)return NaN}else if(at===48){switch(xe.charCodeAt(1)){case 66:case 98:me=2,Ze=49;break;case 79:case 111:me=8,Ze=55;break;default:return+xe}for(ot=xe.slice(2),vt=ot.length,Qt=0;Qt<vt;Qt++)if(Ot=ot.charCodeAt(Qt),Ot<48||Ot>Ze)return NaN;return parseInt(ot,me)}}return+xe};if(S(ye,!he(" 0o1")||!he("0b1")||he("+0x1"))){for(var Ne=function(xe){var at=arguments.length<1?0:xe,we=this;return we instanceof Ne&&(Te?Z(function(){be.valueOf.call(we)}):W(we)!=ye)?L(new he(Ee(at)),we,Ne):Ee(at)},Ge=b?Y(he):"MAX_VALUE,MIN_VALUE,NaN,NEGATIVE_INFINITY,POSITIVE_INFINITY,EPSILON,isFinite,isInteger,isNaN,isSafeInteger,MAX_SAFE_INTEGER,MIN_SAFE_INTEGER,parseFloat,parseInt,isInteger,fromString,range".split(","),Je=0,Ue;Ge.length>Je;Je++)N(he,Ue=Ge[Je])&&!N(Ne,Ue)&&pe(Ne,Ue,le(he,Ue));Ne.prototype=be,be.constructor=Ne,U(T,ye,Ne)}},"./node_modules/core-js/modules/es.object.assign.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/object-assign.js");b({target:"Object",stat:!0,forced:Object.assign!==T},{assign:T})},"./node_modules/core-js/modules/es.object.keys.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/to-object.js"),S=y("./node_modules/core-js/internals/object-keys.js"),U=y("./node_modules/core-js/internals/fails.js"),N=U(function(){S(1)});b({target:"Object",stat:!0,forced:N},{keys:function(L){return S(T(L))}})},"./node_modules/core-js/modules/es.object.to-string.js":function(f,g,y){var b=y("./node_modules/core-js/internals/to-string-tag-support.js"),T=y("./node_modules/core-js/internals/redefine.js"),S=y("./node_modules/core-js/internals/object-to-string.js");b||T(Object.prototype,"toString",S,{unsafe:!0})},"./node_modules/core-js/modules/es.regexp.to-string.js":function(f,g,y){var b=y("./node_modules/core-js/internals/redefine.js"),T=y("./node_modules/core-js/internals/an-object.js"),S=y("./node_modules/core-js/internals/to-string.js"),U=y("./node_modules/core-js/internals/fails.js"),N=y("./node_modules/core-js/internals/regexp-flags.js"),W="toString",L=RegExp.prototype,Q=L[W],V=U(function(){return Q.call({source:"a",flags:"b"})!="/a/b"}),Z=Q.name!=W;(V||Z)&&b(RegExp.prototype,W,function(){var Y=T(this),le=S(Y.source),pe=Y.flags,_e=S(pe===void 0&&Y instanceof RegExp&&!("flags"in L)?N.call(Y):pe);return"/"+le+"/"+_e},{unsafe:!0})},"./node_modules/core-js/modules/es.string.iterator.js":function(f,g,y){var b=y("./node_modules/core-js/internals/string-multibyte.js").charAt,T=y("./node_modules/core-js/internals/to-string.js"),S=y("./node_modules/core-js/internals/internal-state.js"),U=y("./node_modules/core-js/internals/define-iterator.js"),N="String Iterator",W=S.set,L=S.getterFor(N);U(String,"String",function(Q){W(this,{type:N,string:T(Q),index:0})},function(){var V=L(this),Z=V.string,ne=V.index,Y;return ne>=Z.length?{value:void 0,done:!0}:(Y=b(Z,ne),V.index+=Y.length,{value:Y,done:!1})})},"./node_modules/core-js/modules/es.string.link.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/create-html.js"),S=y("./node_modules/core-js/internals/string-html-forced.js");b({target:"String",proto:!0,forced:S("link")},{link:function(N){return T(this,"a","href",N)}})},"./node_modules/core-js/modules/es.symbol.description.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/descriptors.js"),S=y("./node_modules/core-js/internals/global.js"),U=y("./node_modules/core-js/internals/has.js"),N=y("./node_modules/core-js/internals/is-object.js"),W=y("./node_modules/core-js/internals/object-define-property.js").f,L=y("./node_modules/core-js/internals/copy-constructor-properties.js"),Q=S.Symbol;if(T&&typeof Q=="function"&&(!("description"in Q.prototype)||Q().description!==void 0)){var V={},Z=function(){var ye=arguments.length<1||arguments[0]===void 0?void 0:String(arguments[0]),he=this instanceof Z?new Q(ye):ye===void 0?Q():Q(ye);return ye===""&&(V[he]=!0),he};L(Z,Q);var ne=Z.prototype=Q.prototype;ne.constructor=Z;var Y=ne.toString,le=String(Q("test"))=="Symbol(test)",pe=/^Symbol\((.*)\)[^)]+$/;W(ne,"description",{configurable:!0,get:function(){var ye=N(this)?this.valueOf():this,he=Y.call(ye);if(U(V,ye))return"";var be=le?he.slice(7,-1):he.replace(pe,"$1");return be===""?void 0:be}}),b({global:!0,forced:!0},{Symbol:Z})}},"./node_modules/core-js/modules/es.symbol.iterator.js":function(f,g,y){var b=y("./node_modules/core-js/internals/define-well-known-symbol.js");b("iterator")},"./node_modules/core-js/modules/es.symbol.js":function(f,g,y){var b=y("./node_modules/core-js/internals/export.js"),T=y("./node_modules/core-js/internals/global.js"),S=y("./node_modules/core-js/internals/get-built-in.js"),U=y("./node_modules/core-js/internals/is-pure.js"),N=y("./node_modules/core-js/internals/descriptors.js"),W=y("./node_modules/core-js/internals/native-symbol.js"),L=y("./node_modules/core-js/internals/fails.js"),Q=y("./node_modules/core-js/internals/has.js"),V=y("./node_modules/core-js/internals/is-array.js"),Z=y("./node_modules/core-js/internals/is-object.js"),ne=y("./node_modules/core-js/internals/is-symbol.js"),Y=y("./node_modules/core-js/internals/an-object.js"),le=y("./node_modules/core-js/internals/to-object.js"),pe=y("./node_modules/core-js/internals/to-indexed-object.js"),_e=y("./node_modules/core-js/internals/to-property-key.js"),ye=y("./node_modules/core-js/internals/to-string.js"),he=y("./node_modules/core-js/internals/create-property-descriptor.js"),be=y("./node_modules/core-js/internals/object-create.js"),Te=y("./node_modules/core-js/internals/object-keys.js"),Ee=y("./node_modules/core-js/internals/object-get-own-property-names.js"),Ne=y("./node_modules/core-js/internals/object-get-own-property-names-external.js"),Ge=y("./node_modules/core-js/internals/object-get-own-property-symbols.js"),Je=y("./node_modules/core-js/internals/object-get-own-property-descriptor.js"),Ue=y("./node_modules/core-js/internals/object-define-property.js"),Qe=y("./node_modules/core-js/internals/object-property-is-enumerable.js"),xe=y("./node_modules/core-js/internals/create-non-enumerable-property.js"),at=y("./node_modules/core-js/internals/redefine.js"),we=y("./node_modules/core-js/internals/shared.js"),me=y("./node_modules/core-js/internals/shared-key.js"),Ze=y("./node_modules/core-js/internals/hidden-keys.js"),ot=y("./node_modules/core-js/internals/uid.js"),vt=y("./node_modules/core-js/internals/well-known-symbol.js"),Qt=y("./node_modules/core-js/internals/well-known-symbol-wrapped.js"),Ot=y("./node_modules/core-js/internals/define-well-known-symbol.js"),kt=y("./node_modules/core-js/internals/set-to-string-tag.js"),Me=y("./node_modules/core-js/internals/internal-state.js"),Ht=y("./node_modules/core-js/internals/array-iteration.js").forEach,Zt=me("hidden"),pn="Symbol",Dt="prototype",hn=vt("toPrimitive"),Oe=Me.set,nn=Me.getterFor(pn),Vt=Object[Dt],$t=T.Symbol,xn=S("JSON","stringify"),Xt=Je.f,gn=Ue.f,rr=Ne.f,Gt=Qe.f,Rn=we("symbols"),wt=we("op-symbols"),qt=we("string-to-symbol-registry"),fn=we("symbol-to-string-registry"),Un=we("wks"),Yt=T.QObject,cn=!Yt||!Yt[Dt]||!Yt[Dt].findChild,Ln=N&&L(function(){return be(gn({},"a",{get:function(){return gn(this,"a",{value:7}).a}})).a!=7})?function(mi,br,gr){var Ir=Xt(Vt,br);Ir&&delete Vt[br],gn(mi,br,gr),Ir&&mi!==Vt&&gn(Vt,br,Ir)}:gn,Hn=function(mi,br){var gr=Rn[mi]=be($t[Dt]);return Oe(gr,{type:pn,tag:mi,description:br}),N||(gr.description=br),gr},_r=function(br,gr,Ir){br===Vt&&_r(wt,gr,Ir),Y(br);var Kr=_e(gr);return Y(Ir),Q(Rn,Kr)?(Ir.enumerable?(Q(br,Zt)&&br[Zt][Kr]&&(br[Zt][Kr]=!1),Ir=be(Ir,{enumerable:he(0,!1)})):(Q(br,Zt)||gn(br,Zt,he(1,{})),br[Zt][Kr]=!0),Ln(br,Kr,Ir)):gn(br,Kr,Ir)},fr=function(br,gr){Y(br);var Ir=pe(gr),Kr=Te(Ir).concat(ki(Ir));return Ht(Kr,function(Mt){(!N||bi.call(Ir,Mt))&&_r(br,Mt,Ir[Mt])}),br},xr=function(br,gr){return gr===void 0?be(br):fr(be(br),gr)},bi=function(br){var gr=_e(br),Ir=Gt.call(this,gr);return this===Vt&&Q(Rn,gr)&&!Q(wt,gr)?!1:Ir||!Q(this,gr)||!Q(Rn,gr)||Q(this,Zt)&&this[Zt][gr]?Ir:!0},Vn=function(br,gr){var Ir=pe(br),Kr=_e(gr);if(!(Ir===Vt&&Q(Rn,Kr)&&!Q(wt,Kr))){var Mt=Xt(Ir,Kr);return Mt&&Q(Rn,Kr)&&!(Q(Ir,Zt)&&Ir[Zt][Kr])&&(Mt.enumerable=!0),Mt}},Es=function(br){var gr=rr(pe(br)),Ir=[];return Ht(gr,function(Kr){!Q(Rn,Kr)&&!Q(Ze,Kr)&&Ir.push(Kr)}),Ir},ki=function(br){var gr=br===Vt,Ir=rr(gr?wt:pe(br)),Kr=[];return Ht(Ir,function(Mt){Q(Rn,Mt)&&(!gr||Q(Vt,Mt))&&Kr.push(Rn[Mt])}),Kr};if(W||($t=function(){if(this instanceof $t)throw TypeError("Symbol is not a constructor");var br=!arguments.length||arguments[0]===void 0?void 0:ye(arguments[0]),gr=ot(br),Ir=function(Kr){this===Vt&&Ir.call(wt,Kr),Q(this,Zt)&&Q(this[Zt],gr)&&(this[Zt][gr]=!1),Ln(this,gr,he(1,Kr))};return N&&cn&&Ln(Vt,gr,{configurable:!0,set:Ir}),Hn(gr,br)},at($t[Dt],"toString",function(){return nn(this).tag}),at($t,"withoutSetter",function(mi){return Hn(ot(mi),mi)}),Qe.f=bi,Ue.f=_r,Je.f=Vn,Ee.f=Ne.f=Es,Ge.f=ki,Qt.f=function(mi){return Hn(vt(mi),mi)},N&&(gn($t[Dt],"description",{configurable:!0,get:function(){return nn(this).description}}),U||at(Vt,"propertyIsEnumerable",bi,{unsafe:!0}))),b({global:!0,wrap:!0,forced:!W,sham:!W},{Symbol:$t}),Ht(Te(Un),function(mi){Ot(mi)}),b({target:pn,stat:!0,forced:!W},{for:function(mi){var br=ye(mi);if(Q(qt,br))return qt[br];var gr=$t(br);return qt[br]=gr,fn[gr]=br,gr},keyFor:function(br){if(!ne(br))throw TypeError(br+" is not a symbol");if(Q(fn,br))return fn[br]},useSetter:function(){cn=!0},useSimple:function(){cn=!1}}),b({target:"Object",stat:!0,forced:!W,sham:!N},{create:xr,defineProperty:_r,defineProperties:fr,getOwnPropertyDescriptor:Vn}),b({target:"Object",stat:!0,forced:!W},{getOwnPropertyNames:Es,getOwnPropertySymbols:ki}),b({target:"Object",stat:!0,forced:L(function(){Ge.f(1)})},{getOwnPropertySymbols:function(br){return Ge.f(le(br))}}),xn){var hs=!W||L(function(){var mi=$t();return xn([mi])!="[null]"||xn({a:mi})!="{}"||xn(Object(mi))!="{}"});b({target:"JSON",stat:!0,forced:hs},{stringify:function(br,gr,Ir){for(var Kr=[br],Mt=1,je;arguments.length>Mt;)Kr.push(arguments[Mt++]);if(je=gr,!(!Z(gr)&&br===void 0||ne(br)))return V(gr)||(gr=function(De,ve){if(typeof je=="function"&&(ve=je.call(this,De,ve)),!ne(ve))return ve}),Kr[1]=gr,xn.apply(null,Kr)}})}$t[Dt][hn]||xe($t[Dt],hn,$t[Dt].valueOf),kt($t,pn),Ze[Zt]=!0},"./node_modules/core-js/modules/web.dom-collections.for-each.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/dom-iterables.js"),S=y("./node_modules/core-js/internals/array-for-each.js"),U=y("./node_modules/core-js/internals/create-non-enumerable-property.js");for(var N in T){var W=b[N],L=W&&W.prototype;if(L&&L.forEach!==S)try{U(L,"forEach",S)}catch{L.forEach=S}}},"./node_modules/core-js/modules/web.dom-collections.iterator.js":function(f,g,y){var b=y("./node_modules/core-js/internals/global.js"),T=y("./node_modules/core-js/internals/dom-iterables.js"),S=y("./node_modules/core-js/modules/es.array.iterator.js"),U=y("./node_modules/core-js/internals/create-non-enumerable-property.js"),N=y("./node_modules/core-js/internals/well-known-symbol.js"),W=N("iterator"),L=N("toStringTag"),Q=S.values;for(var V in T){var Z=b[V],ne=Z&&Z.prototype;if(ne){if(ne[W]!==Q)try{U(ne,W,Q)}catch{ne[W]=Q}if(ne[L]||U(ne,L,V),T[V]){for(var Y in S)if(ne[Y]!==S[Y])try{U(ne,Y,S[Y])}catch{ne[Y]=S[Y]}}}}},"./node_modules/es6-promise/dist/es6-promise.js":function(f){/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.8+1e68dce6
 */(function(g,y){f.exports=y()})(this,function(){function g(Yt){var cn=typeof Yt;return Yt!==null&&(cn==="object"||cn==="function")}function y(Yt){return typeof Yt=="function"}var b=void 0;Array.isArray?b=Array.isArray:b=function(Yt){return Object.prototype.toString.call(Yt)==="[object Array]"};var T=b,S=0,U=void 0,N=void 0,W=function(cn,Ln){Te[S]=cn,Te[S+1]=Ln,S+=2,S===2&&(N?N(Ee):Ge())};function L(Yt){N=Yt}function Q(Yt){W=Yt}var V=typeof window<"u"?window:void 0,Z=V||{},ne=Z.MutationObserver||Z.WebKitMutationObserver,Y=typeof self>"u"&&typeof process<"u"&&{}.toString.call(process)==="[object process]",le=typeof Uint8ClampedArray<"u"&&typeof importScripts<"u"&&typeof MessageChannel<"u";function pe(){return function(){return process.nextTick(Ee)}}function _e(){return typeof U<"u"?function(){U(Ee)}:be()}function ye(){var Yt=0,cn=new ne(Ee),Ln=document.createTextNode("");return cn.observe(Ln,{characterData:!0}),function(){Ln.data=Yt=++Yt%2}}function he(){var Yt=new MessageChannel;return Yt.port1.onmessage=Ee,function(){return Yt.port2.postMessage(0)}}function be(){var Yt=setTimeout;return function(){return Yt(Ee,1)}}var Te=new Array(1e3);function Ee(){for(var Yt=0;Yt<S;Yt+=2){var cn=Te[Yt],Ln=Te[Yt+1];cn(Ln),Te[Yt]=void 0,Te[Yt+1]=void 0}S=0}function Ne(){try{var Yt=Function("return this")().require("vertx");return U=Yt.runOnLoop||Yt.runOnContext,_e()}catch{return be()}}var Ge=void 0;Y?Ge=pe():ne?Ge=ye():le?Ge=he():V===void 0?Ge=Ne():Ge=be();function Je(Yt,cn){var Ln=this,Hn=new this.constructor(xe);Hn[Qe]===void 0&&xn(Hn);var _r=Ln._state;if(_r){var fr=arguments[_r-1];W(function(){return Oe(_r,Hn,fr,Ln._result)})}else Dt(Ln,Hn,Yt,cn);return Hn}function Ue(Yt){var cn=this;if(Yt&&typeof Yt=="object"&&Yt.constructor===cn)return Yt;var Ln=new cn(xe);return Me(Ln,Yt),Ln}var Qe=Math.random().toString(36).substring(2);function xe(){}var at=void 0,we=1,me=2;function Ze(){return new TypeError("You cannot resolve a promise with itself")}function ot(){return new TypeError("A promises callback cannot return that same promise.")}function vt(Yt,cn,Ln,Hn){try{Yt.call(cn,Ln,Hn)}catch(_r){return _r}}function Qt(Yt,cn,Ln){W(function(Hn){var _r=!1,fr=vt(Ln,cn,function(xr){_r||(_r=!0,cn!==xr?Me(Hn,xr):Zt(Hn,xr))},function(xr){_r||(_r=!0,pn(Hn,xr))},"Settle: "+(Hn._label||" unknown promise"));!_r&&fr&&(_r=!0,pn(Hn,fr))},Yt)}function Ot(Yt,cn){cn._state===we?Zt(Yt,cn._result):cn._state===me?pn(Yt,cn._result):Dt(cn,void 0,function(Ln){return Me(Yt,Ln)},function(Ln){return pn(Yt,Ln)})}function kt(Yt,cn,Ln){cn.constructor===Yt.constructor&&Ln===Je&&cn.constructor.resolve===Ue?Ot(Yt,cn):Ln===void 0?Zt(Yt,cn):y(Ln)?Qt(Yt,cn,Ln):Zt(Yt,cn)}function Me(Yt,cn){if(Yt===cn)pn(Yt,Ze());else if(g(cn)){var Ln=void 0;try{Ln=cn.then}catch(Hn){pn(Yt,Hn);return}kt(Yt,cn,Ln)}else Zt(Yt,cn)}function Ht(Yt){Yt._onerror&&Yt._onerror(Yt._result),hn(Yt)}function Zt(Yt,cn){Yt._state===at&&(Yt._result=cn,Yt._state=we,Yt._subscribers.length!==0&&W(hn,Yt))}function pn(Yt,cn){Yt._state===at&&(Yt._state=me,Yt._result=cn,W(Ht,Yt))}function Dt(Yt,cn,Ln,Hn){var _r=Yt._subscribers,fr=_r.length;Yt._onerror=null,_r[fr]=cn,_r[fr+we]=Ln,_r[fr+me]=Hn,fr===0&&Yt._state&&W(hn,Yt)}function hn(Yt){var cn=Yt._subscribers,Ln=Yt._state;if(cn.length!==0){for(var Hn=void 0,_r=void 0,fr=Yt._result,xr=0;xr<cn.length;xr+=3)Hn=cn[xr],_r=cn[xr+Ln],Hn?Oe(Ln,Hn,_r,fr):_r(fr);Yt._subscribers.length=0}}function Oe(Yt,cn,Ln,Hn){var _r=y(Ln),fr=void 0,xr=void 0,bi=!0;if(_r){try{fr=Ln(Hn)}catch(Vn){bi=!1,xr=Vn}if(cn===fr){pn(cn,ot());return}}else fr=Hn;cn._state!==at||(_r&&bi?Me(cn,fr):bi===!1?pn(cn,xr):Yt===we?Zt(cn,fr):Yt===me&&pn(cn,fr))}function nn(Yt,cn){try{cn(function(Hn){Me(Yt,Hn)},function(Hn){pn(Yt,Hn)})}catch(Ln){pn(Yt,Ln)}}var Vt=0;function $t(){return Vt++}function xn(Yt){Yt[Qe]=Vt++,Yt._state=void 0,Yt._result=void 0,Yt._subscribers=[]}function Xt(){return new Error("Array Methods must be provided an Array")}var gn=function(){function Yt(cn,Ln){this._instanceConstructor=cn,this.promise=new cn(xe),this.promise[Qe]||xn(this.promise),T(Ln)?(this.length=Ln.length,this._remaining=Ln.length,this._result=new Array(this.length),this.length===0?Zt(this.promise,this._result):(this.length=this.length||0,this._enumerate(Ln),this._remaining===0&&Zt(this.promise,this._result))):pn(this.promise,Xt())}return Yt.prototype._enumerate=function(Ln){for(var Hn=0;this._state===at&&Hn<Ln.length;Hn++)this._eachEntry(Ln[Hn],Hn)},Yt.prototype._eachEntry=function(Ln,Hn){var _r=this._instanceConstructor,fr=_r.resolve;if(fr===Ue){var xr=void 0,bi=void 0,Vn=!1;try{xr=Ln.then}catch(ki){Vn=!0,bi=ki}if(xr===Je&&Ln._state!==at)this._settledAt(Ln._state,Hn,Ln._result);else if(typeof xr!="function")this._remaining--,this._result[Hn]=Ln;else if(_r===fn){var Es=new _r(xe);Vn?pn(Es,bi):kt(Es,Ln,xr),this._willSettleAt(Es,Hn)}else this._willSettleAt(new _r(function(ki){return ki(Ln)}),Hn)}else this._willSettleAt(fr(Ln),Hn)},Yt.prototype._settledAt=function(Ln,Hn,_r){var fr=this.promise;fr._state===at&&(this._remaining--,Ln===me?pn(fr,_r):this._result[Hn]=_r),this._remaining===0&&Zt(fr,this._result)},Yt.prototype._willSettleAt=function(Ln,Hn){var _r=this;Dt(Ln,void 0,function(fr){return _r._settledAt(we,Hn,fr)},function(fr){return _r._settledAt(me,Hn,fr)})},Yt}();function rr(Yt){return new gn(this,Yt).promise}function Gt(Yt){var cn=this;return T(Yt)?new cn(function(Ln,Hn){for(var _r=Yt.length,fr=0;fr<_r;fr++)cn.resolve(Yt[fr]).then(Ln,Hn)}):new cn(function(Ln,Hn){return Hn(new TypeError("You must pass an array to race."))})}function Rn(Yt){var cn=this,Ln=new cn(xe);return pn(Ln,Yt),Ln}function wt(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function qt(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}var fn=function(){function Yt(cn){this[Qe]=$t(),this._result=this._state=void 0,this._subscribers=[],xe!==cn&&(typeof cn!="function"&&wt(),this instanceof Yt?nn(this,cn):qt())}return Yt.prototype.catch=function(Ln){return this.then(null,Ln)},Yt.prototype.finally=function(Ln){var Hn=this,_r=Hn.constructor;return y(Ln)?Hn.then(function(fr){return _r.resolve(Ln()).then(function(){return fr})},function(fr){return _r.resolve(Ln()).then(function(){throw fr})}):Hn.then(Ln,Ln)},Yt}();fn.prototype.then=Je,fn.all=rr,fn.race=Gt,fn.resolve=Ue,fn.reject=Rn,fn._setScheduler=L,fn._setAsap=Q,fn._asap=W;function Un(){var Yt=void 0;if(typeof Qm<"u")Yt=Qm;else if(typeof self<"u")Yt=self;else try{Yt=Function("return this")()}catch{throw new Error("polyfill failed because global object is unavailable in this environment")}var cn=Yt.Promise;if(cn){var Ln=null;try{Ln=Object.prototype.toString.call(cn.resolve())}catch{}if(Ln==="[object Promise]"&&!cn.cast)return}Yt.Promise=fn}return fn.polyfill=Un,fn.Promise=fn,fn})},html2canvas:function(f){f.exports=r},jspdf:function(f){f.exports=n}},a={};function c(f){var g=a[f];if(g!==void 0)return g.exports;var y=a[f]={exports:{}};return s[f].call(y.exports,y,y.exports,c),y.exports}(function(){c.n=function(f){var g=f&&f.__esModule?function(){return f.default}:function(){return f};return c.d(g,{a:g}),g}})(),function(){c.d=function(f,g){for(var y in g)c.o(g,y)&&!c.o(f,y)&&Object.defineProperty(f,y,{enumerable:!0,get:g[y]})}}(),function(){c.o=function(f,g){return Object.prototype.hasOwnProperty.call(f,g)}}(),function(){c.r=function(f){typeof Symbol<"u"&&Symbol.toStringTag&&Object.defineProperty(f,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(f,"__esModule",{value:!0})}}();var i={};return function(){/*!**********************!*\
  !*** ./src/index.js ***!
  \**********************/c.r(i);var f=c("./src/worker.js");c("./src/plugin/jspdf-plugin.js"),c("./src/plugin/pagebreaks.js"),c("./src/plugin/hyperlinks.js");var g=function y(b,T){var S=new y.Worker(T);return b?S.from(b).save():S};g.Worker=f.default,i.default=g}(),i=i.default,i}()})})(wfe);var Wct=wfe.exports;const qct=mF(Wct),Zct=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(null),[a,c]=q.useState([]),[i,f]=q.useState([]),[g,y]=q.useState(null),[b,T]=q.useState(null),[S,U]=q.useState(null),[N,W]=q.useState(null);q.useState(null);const[L,Q]=q.useState(!1),[V,Z]=q.useState(null),[ne,Y]=q.useState(null),[le,pe]=q.useState(null),[_e,ye]=q.useState({}),[he,be]=q.useState(!1),[Te,Ee]=q.useState(!1),[Ne,Ge]=q.useState(!1),[Je,Ue]=q.useState(""),[Qe,xe]=q.useState(""),[at,we]=q.useState(null),me=q.useRef();q.useEffect(()=>{const Oe=new Date,nn=Oe.getFullYear(),Vt=String(Oe.getMonth()+1).padStart(2,"0"),$t=String(Oe.getDate()).padStart(2,"0"),xn=`${nn}-${Vt}-${$t}`;Ue(xn)},[]),q.useEffect(()=>{(async()=>{try{const nn=localStorage.getItem("token"),Vt=await fetch("https://swiftlogix.cc/api/admin",{method:"GET",headers:{Authorization:`Bearer ${nn}`}});Vt.ok||console.log("Response error");const $t=await Vt.json();$t.success||e("/admin-login"),ye($t.userData)}catch{}})()},[]),q.useEffect(()=>{const Oe=async()=>{const nn=await fetch("https://swiftlogix.cc/api/get-city-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:r,city:_e==null?void 0:_e.city})});nn.ok||console.log("response error");const Vt=await nn.json(),$t=Vt.shipments;if(console.log($t),$t.length>0&&Vt.showRider===!1){const xn=$t.map(Xt=>({packagePrice:{service:Xt.shipmentType,basePrice:Xt.basePrice,weightCharges:Xt.weightCharges,distanceCharges:Xt.distanceCharges,totalPrice:Xt.totalPrice,insurance:Xt.insurance},senderFormData:{sendername:Xt.sendername,sendercontact:Xt.sendercontact,senderemail:Xt.senderemail,sendercnic:Xt.sendercnic},receiverFormData:{receivername:Xt.receivername,receivercontact:Xt.receivercontact,receiveremail:Xt.receiveremail,receivercnic:Xt.receivercnic,receiverarea:Xt.receiverarea,receiverhouseno:Xt.receiverhouseno,receiveraddress:Xt.receiveraddress},packageFormData:{originCity:Xt.originCity,destinationCity:Xt.destinationCity,weight:Xt.weight,pieces:Xt.pieces,pickupdate:Xt.pickupdate||"",pickuptime:Xt.pickuptime||"",insurance:Xt.insurance,pickupaddress:Xt.pickupaddress||"",shipmentType:Xt.shipmentType,deliveryMethod:Xt.deliveryMethod,sensitivePackage:Xt.sensitivePackage,packageDescription:Xt.packageDescription,shipmentStatus:Xt.shipmentStatus,deliveryDate:Xt.deliveryDate||""},paymentMethod:{paymentMethod:Xt.paymentMethod},scheduleTime:{scheduleTime:Xt.datetime},trackingId:{trackingId:Xt.trackingid}}));c(xn),f(xn)}else if($t.length>0&&Vt.showRider===!0){const xn=$t.map(Xt=>({packagePrice:{service:Xt.shipment.shipmentType,basePrice:Xt.shipment.basePrice,weightCharges:Xt.shipment.weightCharges,distanceCharges:Xt.shipment.distanceCharges,totalPrice:Xt.shipment.totalPrice,insurance:Xt.shipment.insurance},senderFormData:{sendername:Xt.shipment.sendername,sendercontact:Xt.shipment.sendercontact,senderemail:Xt.shipment.senderemail,sendercnic:Xt.shipment.sendercnic},receiverFormData:{receivername:Xt.shipment.receivername,receivercontact:Xt.shipment.receivercontact,receiveremail:Xt.shipment.receiveremail,receivercnic:Xt.shipment.receivercnic,receiverarea:Xt.shipment.receiverarea,receiverhouseno:Xt.shipment.receiverhouseno,receiveraddress:Xt.shipment.receiveraddress},packageFormData:{originCity:Xt.shipment.originCity,destinationCity:Xt.shipment.destinationCity,weight:Xt.shipment.weight,pieces:Xt.shipment.pieces,pickupdate:Xt.shipment.pickupdate||"",pickuptime:Xt.shipment.pickuptime||"",insurance:Xt.shipment.insurance,pickupaddress:Xt.shipment.pickupaddress||"",shipmentType:Xt.shipment.shipmentType,deliveryMethod:Xt.shipment.deliveryMethod,sensitivePackage:Xt.shipment.sensitivePackage,packageDescription:Xt.shipment.packageDescription,shipmentStatus:Xt.shipment.shipmentStatus,deliveryDate:Xt.shipment.deliveryDate||""},paymentMethod:{paymentMethod:Xt.shipment.paymentMethod},scheduleTime:{scheduleTime:Xt.shipment.datetime},trackingId:{trackingId:Xt.shipment.trackingid},rider:{name:Xt.rider.name,email:Xt.rider.email,mobileno:Xt.rider.mobileno,cnic:Xt.rider.cnic}}));c(xn),f(xn)}else c([])};Ee(!1),be(!1),Oe()},[r,_e]),q.useEffect(()=>{(async()=>{const nn=await fetch("https://swiftlogix.cc/api/get-city-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"completed",city:_e==null?void 0:_e.city})});nn.ok||console.log("response error");const Vt=await nn.json();T(Vt.shipments.length)})()},[_e]),q.useEffect(()=>{(async()=>{const nn=await fetch("https://swiftlogix.cc/api/get-city-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"scheduled",city:_e==null?void 0:_e.city})});nn.ok||console.log("response error");const Vt=await nn.json();U(Vt.shipments.length)})()},[_e]),q.useEffect(()=>{(async()=>{const nn=await fetch("https://swiftlogix.cc/api/get-city-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"pending",city:_e==null?void 0:_e.city})});nn.ok||console.log("response error");const Vt=await nn.json();y(Vt.shipments.length)})()},[_e]),q.useEffect(()=>{(async()=>{const nn=await fetch("https://swiftlogix.cc/api/get-city-shipments",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"accepted",city:_e==null?void 0:_e.city})});nn.ok||console.log("response error");const Vt=await nn.json();W(Vt.shipments.length)})()},[_e]),q.useEffect(()=>{s("scheduled")},[]);const Ze=Oe=>{s(Oe),Oe==="scheduled"?(document.documentElement.classList.add("bg-[#009688]"),document.documentElement.classList.remove("bg-white")):(document.documentElement.classList.remove("bg-[#009688]"),document.documentElement.classList.add("bg-white"))},ot=async Oe=>{try{we(Oe);const nn=await fetch("https://swiftlogix.cc/api/dropped-shipment",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a[Oe])});if(!nn.ok){console.log("Response error");return}const Vt=await nn.json();we(null),qi.success("Shipment status updated"),window.location.reload()}catch{}},vt=async Oe=>{try{const nn=new Date,Vt=String(nn.getDate()).padStart(2,"0"),$t=String(nn.getMonth()+1).padStart(2,"0"),xn=nn.getFullYear();if(`${Vt}-${$t}-${xn}`!==a[Oe].packageFormData.deliveryDate){qi.error("Please note that pick shipment only the shipment delivery date.");return}we(Oe);const gn=await fetch("https://swiftlogix.cc/api/rider-picked",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(a[Oe])});gn.ok||console.log("Response error");const rr=await gn.json();we(null),qi.success("Shipment status updated"),window.location.reload()}catch{}},Qt=Oe=>{const nn=Oe.target.value;Y(nn),c(i),pe("")},Ot=async()=>{if(pe(""),ne.length==0){pe("Tracking Id required*");return}const Oe=a.find(nn=>nn.trackingId.trackingId===ne);if(!Oe){pe("No, shipment found.");return}c([Oe])},kt=()=>{Ue(null),xe(null),be(!he),Ee(!1),s("scheduled"),c(i)},Me=async(Oe,nn)=>{try{Ee(!0);const Vt=await fetch("https://swiftlogix.cc/api/get-shipment-pickbyrider",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({deliveryMethod:"pickUpRider",date:Oe,time:nn})});Vt.ok||console.log("Response error");const $t=await Vt.json(),xn=$t.shipments;if($t.success){if(xn.length){const Xt=xn.map(gn=>({packagePrice:{service:gn.shipmentType,basePrice:gn.basePrice,weightCharges:gn.weightCharges,distanceCharges:gn.distanceCharges,totalPrice:gn.totalPrice,insurance:gn.insurance},senderFormData:{sendername:gn.sendername,sendercontact:gn.sendercontact,senderemail:gn.senderemail,sendercnic:gn.sendercnic},receiverFormData:{receivername:gn.receivername,receivercontact:gn.receivercontact,receiveremail:gn.receiveremail,receivercnic:gn.receivercnic,receiverarea:gn.receiverarea,receiverhouseno:gn.receiverhouseno,receiveraddress:gn.receiveraddress},packageFormData:{originCity:gn.originCity,destinationCity:gn.destinationCity,weight:gn.weight,pieces:gn.pieces,pickupdate:gn.pickupdate||"",pickuptime:gn.pickuptime||"",insurance:gn.insurance,pickupaddress:gn.pickupaddress||"",shipmentType:gn.shipmentType,deliveryMethod:gn.deliveryMethod,sensitivePackage:gn.sensitivePackage,packageDescription:gn.packageDescription,shipmentStatus:gn.shipmentStatus,payby:gn.payby,paid:gn.paid},paymentMethod:{paymentMethod:gn.paymentMethod},scheduleTime:{scheduleTime:gn.datetime},trackingId:{trackingId:gn.trackingid}}));c(Xt)}}else c([])}catch{}},Ht=()=>{setTimeout(()=>{Ge(!1)},2e3)},Zt=async()=>{try{const Oe=await fetch("https://swiftlogix.cc/api/send-notification",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(a)});Oe.ok||console.log("Response error"),(await Oe.json()).success&&(Ge(!0),Ht())}catch{}},pn=Oe=>{const nn=Oe.target.value;Ue(Oe.target.value),Me(nn,Qe)},Dt=Oe=>{const nn=Oe.target.value;xe(Oe.target.value),Me(Je,nn)},hn=()=>{const Oe=me.current,nn={margin:[.5,.5,.5,.5],filename:"shipments.pdf",image:{type:"jpeg",quality:1},html2canvas:{scale:3,useCORS:!0,logging:!1,scrollX:0,scrollY:0,windowWidth:1024},jsPDF:{unit:"in",format:"a4",orientation:"portrait"},pagebreak:{mode:["avoid-all","css","legacy"],after:".page-break",avoid:[".no-break"]}};qct().set(nn).from(Oe).save()};return A.jsxs("div",{className:"flex",children:[A.jsx(Ag,{}),A.jsx(cb,{}),L&&A.jsx("div",{className:"w-full flex justify-center items-center fixed top-0 left-0 h-screen bg-black bg-opacity-50 z-50",children:A.jsxs("div",{className:"w-[80%] sm:w-[60%] md:w-[40%] lg:w-[30%] rounded-3xl shadow-2xl bg-white p-5 flex flex-col items-center relative transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20   shadow-2xl rounded-full absolute -top-9"}),A.jsx("p",{className:"mt-10   text-center text-xl sm:text-[36px] text-gray-700 font-semibold",children:V})]})}),A.jsxs("div",{className:"flex-1 w-full min-[1226px]:ml-[18vw] h-screen bg-white overflow-y-auto relative",children:[A.jsx(Bs,{}),A.jsx("div",{className:"w-full shadow-xl font-bold text-[#009688] bg-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-5xl font-semibold",children:"Shipments"})}),A.jsxs("div",{className:"relative",children:[A.jsxs("div",{className:"flex gap-6 p-8",children:[A.jsx(bT,{title:"Completed Shipments",value:b,onClick:()=>Ze("completed"),isSelected:r==="completed"}),A.jsx(bT,{title:"Scheduled Shipments",value:S,onClick:()=>Ze("scheduled"),isSelected:r==="scheduled"}),A.jsx(bT,{title:"Accepted Shipments",value:N,onClick:()=>Ze("accepted"),isSelected:r==="accepted"}),A.jsx(bT,{title:"Pending Shipments",value:g,onClick:()=>Ze("pending"),isSelected:r==="pending"}),A.jsxs("div",{className:`absolute ${r==="scheduled"?"bottom-5":"bottom-[-37px]"}   text-center right-4 max-sm:top-[13rem]  sm:right-10 md:right-16 p-2 bg-white rounded-lg w-[90%] sm:w-auto`,children:[le&&A.jsx("div",{className:"text-red-600 mb-2 text-sm",children:le}),A.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[A.jsx("input",{type:"text",placeholder:"Tracking ID",value:ne,name:"searchTrackingId",onChange:Qt,className:"flex-1 min-w-0 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#009688] w-full sm:w-auto"}),A.jsx("button",{onClick:Ot,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] w-full sm:w-auto",children:"Search"})]})]})]}),r==="scheduled"&&A.jsxs("div",{className:"px-4 sm:px-6 md:px-8 pb-4 flex items-start gap-4 relative max-sm:absolute max-sm:top-[20rem]",children:[A.jsxs("div",{className:"relative",children:[A.jsxs("div",{onClick:kt,className:`inline-flex items-center gap-1 cursor-pointer py-2 px-3 font-semibold rounded-full border ${he?"border-[#009688]":""}`,children:[A.jsx(ene,{size:24,color:he?"#009688":"#FF7043"}),A.jsx("p",{children:"Filter"})]}),he&&A.jsxs("div",{className:"absolute top-full mt-2 left-0 w-[80vw] sm:w-[60vw] md:w-[40vw] lg:w-[22vw] xl:w-[18vw] min-w-[180px] max-w-[240px] flex flex-col items-center shadow-lg rounded-lg p-3 border bg-white z-30",children:[A.jsx("div",{onClick:()=>Me(Je,Qe),className:`${Te?"bg-[#009688] text-white px-6":""} cursor-pointer p-1 rounded-md hover:text-white hover:bg-[#009688] w-full text-center`,children:"Pick By Rider"}),Te&&A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"w-full mt-2",children:A.jsx("input",{type:"date",id:"date",value:Je,onChange:pn,className:"w-full border rounded px-2 py-1"})}),Je&&A.jsx("div",{className:"w-full mt-2",children:A.jsxs("select",{id:"time",name:"time",value:Qe,onChange:Dt,className:"block w-full px-4 py-2 border rounded",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Time"}),A.jsx("option",{value:"10:00 AM",children:"10:00 AM"}),A.jsx("option",{value:"11:00 AM",children:"11:00 AM"}),A.jsx("option",{value:"12:00 PM",children:"12:00 PM"}),A.jsx("option",{value:"01:00 PM",children:"01:00 PM"}),A.jsx("option",{value:"02:00 PM",children:"02:00 PM"}),A.jsx("option",{value:"03:00 PM",children:"03:00 PM"}),A.jsx("option",{value:"04:00 PM",children:"04:00 PM"}),A.jsx("option",{value:"05:00 PM",children:"05:00 PM"})]})})]})]})]}),Te&&a.length>0&&he&&A.jsxs("div",{className:"flex items-center gap-4 mt-[10px] z-50",children:[A.jsx(NF,{onClick:hn,size:24,color:"#009688",className:"cursor-pointer hover:opacity-80"}),A.jsx(Hct,{onClick:Zt,size:24,color:"#009688",className:"cursor-pointer hover:opacity-80"})]})]})]}),Ne&&A.jsx("div",{className:"border-none bg-[#009688] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:"Successfully sent notification"}),a.length==0&&A.jsxs("div",{className:"flex justify-center items-center",children:["No, ",r," shipments"]}),A.jsx("div",{className:`flex flex-wrap gap-4 max-sm:mt-40 max-sm:px-4 sm:pl-8 ${r!=="scheduled"&&"mt-12  max-sm:mt-24"}`,children:a.map((Oe,nn)=>A.jsx(gfe,{trackingNumber:Oe.trackingId.trackingId,originCity:Oe.packageFormData.originCity,destinationCity:Oe.packageFormData.destinationCity,receiverName:Oe.receiverFormData.receivername,datetime:Oe.scheduleTime.scheduleTime,onClick:()=>n(nn),droppedButtonShow:!0,handleDroppedShipments:()=>ot(nn),shipmentStatus:Oe.packageFormData.shipmentStatus,selectedCard:r,onClickPick:()=>vt(nn),deliveryDate:Oe.packageFormData.deliveryDate,processingIndex:at,index:nn},nn))}),t!=null&&A.jsxs("div",{className:"absolute top-0 w-full h-auto bg-gray-700 bg-opacity-50 flex justify-center items-center z-50",children:[A.jsx(Vct,{senderFormData:a[t].senderFormData,receiverFormData:a[t].receiverFormData,packageFormData:a[t].packageFormData,packagePrice:a[t].packagePrice,riderInfo:a[t].rider}),A.jsx("button",{onClick:()=>n(null),className:"fixed top-4 right-10 text-[#FF7043] text-[44px]",children:"×"})]})]}),Te&&a.length>0&&A.jsx("div",{className:"fixed top-0 left-full transition-transform duration-300 z-50",children:A.jsx($ct,{allShipments:a,pdfRef:me})})]})};function bT({title:e,value:t,onClick:n,isSelected:r}){return A.jsxs("div",{onClick:n,className:`cursor-pointer p-6 hover:bg-[#009688] rounded-lg shadow-md ${r?"bg-[#009688] text-white":"bg-white"} text-gray-700 hover:text-white`,children:[A.jsx("div",{className:"flex items-center justify-between mb-4",children:A.jsx("h3",{className:"text-lg font-semibold",children:e})}),A.jsx("p",{className:"text-3xl font-bold",children:t})]})}const Xct=()=>{const e=Mo(),[t,n]=q.useState("idle"),[r,s]=q.useState({originCity:"",destinationCity:"",weight:"",shipmentType:"",insurance:"",orignalprice:""}),[a,c]=q.useState({weighterror:"",orignalpriceerror:""});q.useEffect(()=>{(async()=>{try{const y=localStorage.getItem("token"),b=await fetch("https://swiftlogix.cc/api/admin",{method:"GET",headers:{Authorization:`Bearer ${y}`}});b.ok||console.log("Response error"),(await b.json()).success||e("/admin-login")}catch{}})()},[]);const i=g=>{const{name:y,value:b}=g.target;s({...r,[y]:b}),c({...a,weighterror:"",orignalpriceerror:""})},f=async g=>{g.preventDefault();const y=new FormData(g.target),b={};if(y.forEach((T,S)=>{b[S]=T}),!(b.weight>0)){c({...a,weighterror:"Weight must greater than 0",orignalpriceerror:""});return}if(!(/^\d+$/.test(b.orignalprice)||b.insurance==="no")){c({...a,weighterror:"",orignalpriceerror:"Shipment price must be entered in digits only (e.g., 1200)"});return}if(!(b.orignalprice>0)&&b.insurance==="yes"){c({...a,weighterror:"",orignalpriceerror:"Orignal Price must be greater than 0"});return}n("processing");try{const S=await(await fetch("https://swiftlogix.cc/api/calculate-point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(b)})).json();n("success"),e("/admin-price-page",{state:{service:S.service,basePrice:S.basePrice,weightCharges:S.weightCharges,distanceCharges:S.distanceCharges,totalPrice:S.totalPrice,insuranceType:S.insurance}})}catch(T){console.error("Error submitting form:",T)}};return A.jsxs("div",{className:"flex min-h-screen overflow-hidden",children:[A.jsx(Bs,{}),A.jsx(Ag,{}),A.jsxs("div",{className:"min-[1226px]:ml-[18vw] flex-1  flex flex-col justify-start items-center overflow-auto",children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl font-semibold",children:"Rate Calculator"})}),A.jsx("div",{className:"flex justify-center w-full py-10 flex-grow overflow-auto",children:A.jsxs("div",{className:"bg-white p-8 rounded-lg shadow-lg w-full max-w-md",children:[A.jsx("h2",{className:"text-2xl font-bold text-center mb-6",children:"Rate Calculator"}),A.jsxs("form",{onSubmit:f,className:"space-y-6",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"originCity",className:"block text-sm font-medium text-gray-700",children:"Origin City"}),A.jsxs("select",{id:"originCity",name:"originCity",value:r.originCity,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select a city"}),A.jsx("option",{hidden:r.destinationCity==="Karachi",value:"Karachi",children:"Karachi"}),A.jsx("option",{hidden:r.destinationCity==="Islamabad",value:"Islamabad",children:"Islamabad"}),A.jsx("option",{hidden:r.destinationCity==="Lahore",value:"Lahore",children:"Lahore"}),A.jsx("option",{hidden:r.destinationCity==="Rawalpindi",value:"Rawalpindi",children:"Rawalpindi"}),A.jsx("option",{hidden:r.destinationCity==="Faisalabad",value:"Faisalabad",children:"Faisalabad"}),A.jsx("option",{hidden:r.destinationCity==="Sialkot",value:"Sialkot",children:"Sialkot"}),A.jsx("option",{hidden:r.destinationCity==="Multan",value:"Multan",children:"Multan"}),A.jsx("option",{hidden:r.destinationCity==="Peshawar",value:"Peshawar",children:"Peshawar"}),A.jsx("option",{hidden:r.destinationCity==="Quetta",value:"Quetta",children:"Quetta"}),A.jsx("option",{hidden:r.destinationCity==="Bahawalpur",value:"Bahawalpur",children:"Bahawalpur"}),A.jsx("option",{hidden:r.destinationCity==="Gujranwala",value:"Gujranwala",children:"Gujranwala"}),A.jsx("option",{hidden:r.destinationCity==="Sukkar",value:"Sukkur",children:"Sukkur"}),A.jsx("option",{hidden:r.destinationCity==="Mardan",value:"Mardan",children:"Mardan"}),A.jsx("option",{hidden:r.destinationCity==="Abbottabad",value:"Abbottabad",children:"Abbottabad"})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"destinationCity",className:"block text-sm font-medium text-gray-700",children:"Destination City"}),A.jsxs("select",{id:"destinationCity",name:"destinationCity",value:r.destinationCity,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,selected:!0,children:"Select a city"}),A.jsx("option",{hidden:r.originCity==="Karachi",value:"Karachi",children:"Karachi"}),A.jsx("option",{hidden:r.originCity==="Islamabad",value:"Islamabad",children:"Islamabad"}),A.jsx("option",{hidden:r.originCity==="Lahore",value:"Lahore",children:"Lahore"}),A.jsx("option",{hidden:r.originCity==="Rawalpindi",value:"Rawalpindi",children:"Rawalpindi"}),A.jsx("option",{hidden:r.originCity==="Faisalabad",value:"Faisalabad",children:"Faisalabad"}),A.jsx("option",{hidden:r.originCity==="Sialkot",value:"Sialkot",children:"Sialkot"}),A.jsx("option",{hidden:r.originCity==="Multan",value:"Multan",children:"Multan"}),A.jsx("option",{hidden:r.originCity==="Peshawar",value:"Peshawar",children:"Peshawar"}),A.jsx("option",{hidden:r.originCity==="Quetta",value:"Quetta",children:"Quetta"}),A.jsx("option",{hidden:r.originCity==="Bahawalpur",value:"Bahawalpur",children:"Bahawalpur"}),A.jsx("option",{hidden:r.originCity==="Gujranwala",value:"Gujranwala",children:"Gujranwala"}),A.jsx("option",{hidden:r.originCity==="Sukkar",value:"Sukkur",children:"Sukkur"}),A.jsx("option",{hidden:r.originCity==="Mardan",value:"Mardan",children:"Mardan"}),A.jsx("option",{hidden:r.originCity==="Abbottabad",value:"Abbottabad",children:"Abbottabad"})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"weight",className:"block text-sm font-medium text-gray-700",children:"Weight (in kg)"}),A.jsx("input",{type:"number",id:"weight",name:"weight",value:r.weight,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),a.weighterror&&A.jsx("p",{className:"text-red-500 text-sm mt-1  ",children:a.weighterror})]}),A.jsxs("div",{className:"mb-6",children:[A.jsx("label",{htmlFor:"shipmentType",className:"block text-sm font-medium text-gray-700",children:"Shipment Type"}),A.jsxs("select",{id:"shipmentType",name:"shipmentType",value:r.shipmentType,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",children:"Shipment type"}),A.jsx("option",{value:"Ground",children:"Ground"}),A.jsx("option",{value:"Express",children:"Express"})]})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"insurance",className:"block text-sm font-medium text-gray-700",children:"Insurance Type"}),A.jsxs("select",{id:"insurance",name:"insurance",value:r.insurance,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0,children:[A.jsx("option",{value:"",disabled:!0,children:"Insurance Type"}),A.jsx("option",{value:"yes",children:"Yes"}),A.jsx("option",{value:"no",children:"No"})]})]}),r.insurance==="yes"&&A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"insurance",className:"block text-sm font-medium text-gray-700",children:"Shipment Orignal Price"}),A.jsx("input",{type:"text",id:"insurance",name:"orignalprice",value:r.orignalprice,onChange:i,className:"mt-1 block w-full px-4 py-2 border border-gray-300 rounded-lg shadow-sm focus:ring-[#FF7043] focus:border-[#FF7043]",required:!0}),a.orignalpriceerror&&A.jsx("p",{className:"text-red-500 text-sm mt-1  ",children:a.orignalpriceerror})]}),A.jsx("button",{type:"submit",className:"w-full py-2 px-4 bg-[#009688] text-white font-semibold rounded-lg hover:bg-[#FF7043] transition-all duration-300 ease-in-out",children:t==="processing"?"Processing...":t==="success"?"Calculated":"Calculate"})]})]})})]})]})},Yct=()=>{const e=nf(),{service:t,basePrice:n,weightCharges:r,distanceCharges:s,totalPrice:a,insuranceType:c}=e.state;return A.jsxs("div",{className:"flex flex-col min-[1226px]:flex-row min-h-screen overflow-hidden",children:[A.jsx(Bs,{}),A.jsx(Ag,{}),A.jsxs("div",{className:"flex-1 min-[1226px]:ml-[18vw] flex flex-col justify-start items-center overflow-y-auto",children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-2xl sm:text-3xl md:text-4xl font-semibold text-center",children:"Rate Calculator"})}),A.jsxs("div",{className:"w-full sm:w-[90%] md:w-[85%] lg:w-[70%] flex flex-col items-center my-8 px-2",children:[A.jsx("div",{className:"w-full m-4 ",children:A.jsx("div",{className:"font-semibold text-2xl sm:text-3xl md:text-4xl",children:"Price Details:"})}),A.jsxs("div",{className:"w-full overflow-x-auto border-[2px]",children:[A.jsxs("div",{className:"min-w-[600px] font-semibold bg-[#009688] flex text-sm sm:text-base",children:[A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Service"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Base Price"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Weight Charges"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Distance Charges"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Insurance"}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:"Total Price"})]}),A.jsxs("div",{className:"min-w-[600px] font-semibold flex text-sm sm:text-base",children:[A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:t}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:n}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:r}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:s}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:c}),A.jsx("div",{className:"w-[16.66%] border-[1px] p-2 text-center",children:a})]})]}),A.jsx("div",{className:"mt-8",children:A.jsx(ss,{to:"/admin-ratecalculator",children:A.jsx("button",{className:"bg-[#009688] text-white font-medium px-6 py-2 rounded-lg hover:bg-[#FF7043] transition duration-300 hover:scale-105",children:"Recalculate Price"})})})]})]})]})},Jct=()=>{const[e,t]=q.useState({success:"",message:"",barcode:""}),n=Mo(),[r]=h8(),[s,a]=q.useState("sender"),[c,i]=q.useState(null),[f,g]=q.useState(null),[y,b]=q.useState(null),[T,S]=q.useState(null),[U,N]=q.useState(1),[W,L]=q.useState(!1),[Q,V]=q.useState(null);q.useState(null);const Z=q.useRef(1),[ne,Y]=q.useState({service:"",basePrice:"",weightCharges:"",distanceCharges:"",totalPrice:"",insurance:""}),[le,pe]=q.useState({sendername:"",sendercontact:"",senderemail:"",sendercnic:""}),[_e,ye]=q.useState({receivername:"",receivercontact:"",receiveremail:"",receivercnic:"",receiverarea:"",receiverhouseno:"",receiveraddress:""}),[he,be]=q.useState({originCity:"",destinationCity:"",weight:"",pieces:"",pickupdate:"",pickuptime:"",insurance:"",pickupaddress:"",shipmentType:"",deliveryMethod:"",sensitivePackage:"",packageDescription:"",orignalprice:""});q.useEffect(()=>{(async()=>{try{const kt=localStorage.getItem("token"),Me=await fetch("https://swiftlogix.cc/api/admin",{method:"GET",headers:{Authorization:`Bearer ${kt}`}});Me.ok||console.log("Response error"),(await Me.json()).success||n("/admin-login")}catch{}})()},[]);const Te=Ot=>{const{name:kt,value:Me}=Ot.target;pe({...le,[kt]:Me})},Ee=Ot=>{const{name:kt,value:Me}=Ot.target;ye({..._e,[kt]:Me})},Ne=Ot=>{const{name:kt,value:Me}=Ot.target;be({...he,[kt]:Me})},Ge=()=>{Z.current++,N(2),a("receiver")},Je=()=>{Z.current++,N(3),a("package")},Ue=async()=>{try{const kt=await(await fetch("https://swiftlogix.cc/api/calculate-point",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(he)})).json();Y({service:kt.service,basePrice:kt.basePrice,weightCharges:kt.weightCharges,distanceCharges:kt.distanceCharges,totalPrice:kt.totalPrice,insurance:kt.insurance}),Z.current++,N(4),a("summary")}catch(Ot){console.error("Error submitting form:",Ot)}},Qe=()=>{Z.current++,N(5),a("payment")},xe=async()=>{try{const Ot=await fetch("https://swiftlogix.cc/api/scheduleaship-point",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({senderFormData:le,receiverFormData:_e,packageFormData:he,packagePrice:ne})});Ot.ok||console.log("response error");const kt=await Ot.json();t(kt),i(kt.scheduletime),g(kt.trackingid),S(kt.qrcode),b(kt.paymentmethod),he.paid=kt.paid,kt.success===!0&&(Z.current++,Z.current++,N(6),a("label"))}catch(Ot){console.error("Error in handleWithCashPayment:",Ot.message)}},at=async()=>{try{const Ot=await fetch("https://swiftlogix.cc/api/checkout",{method:"POST",headers:{"Content-Type":"application/json"},credentials:"include",body:JSON.stringify({senderFormData:le,receiverFormData:_e,packageFormData:he,packagePrice:ne,endpoint:"admin-scheduleship"})});Ot.ok||console.log("response error");const kt=await Ot.json();kt.url&&(window.location.href=kt.url)}catch(Ot){console.log("Error in handling card payments: ",Ot.message)}};q.useEffect(()=>{if(r.get("payment")==="success"){const Ot=r.get("data");if(Ot){const kt=JSON.parse(decodeURIComponent(Ot));pe(kt.senderData),ye(kt.receiverData),be(kt.packageData),Y(kt.packagePrice),g(kt.trackingId),i(kt.datetime),b(kt.paymentMethod)}Z.current=5,N(5),a("paid")}else if(r.get("payment")==="failed"){const Ot=r.get("data");if(Ot){const kt=JSON.parse(decodeURIComponent(Ot));pe(kt.senderData),ye(kt.receiverData),be(kt.packageData),Y(kt.packagePrice)}Z.current=5,N(5),a("payment")}},[r]);const we=async()=>{const Ot=await fetch("https://swiftlogix.cc/api/bar-qrcode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingId:f})});Ot.ok||console.log("response error");const kt=await Ot.json();t(kt),S(kt.qrcode),kt.success===!0&&(Z.current++,Z.current++,N(6),a("label"))},me=()=>{Z.current--,N(1),a("sender")},Ze=()=>{Z.current--,N(2),a("receiver")},ot=()=>{Z.current--,N(3),a("package")},vt=()=>{Z.current--,N(4),a("summary")},Qt=()=>{pe({sendername:Q.name,sendercontact:Q.mobileno,senderemail:Q.email,sendercnic:Q.cnic})};return A.jsxs("div",{className:"flex ",children:[A.jsx(Ag,{}),A.jsxs("div",{className:"flex-1 w-full min-[1226px]:ml-[18vw]  h-screen bg-white overflow-y-auto",children:[A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"md:text-5xl text-4xl font-semibold",children:"Schedule a Ship"})}),A.jsxs("div",{className:"w-full mt-6 flex justify-center items-center",children:[A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold
                    ${Z.current>1?"bg-[#009688] text-white":Z.current===1?"bg-[#FF7043] text-white":""}`,children:"01"}),A.jsx("span",{className:`p-1 border w-[15%] h-2  ${Z.current>2?"bg-[#009688]":""}  ${Z.current>1&&Z.current<3?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Z.current>2?"bg-[#009688] text-white":Z.current===2?"bg-[#FF7043] text-white":""}`,children:"02"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${Z.current>3?"bg-[#009688]":""}  ${Z.current>2&&Z.current<4?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Z.current>3?"bg-[#009688] text-white":Z.current===3?"bg-[#FF7043] text-white":""}`,children:"03"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${Z.current>4?"bg-[#009688]":""}  ${Z.current>3&&Z.current<5?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Z.current>4?"bg-[#009688] text-white":Z.current===4?"bg-[#FF7043] text-white":""}`,children:"04"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${Z.current>5?"bg-[#009688]":""}  ${Z.current>4&&Z.current<6?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Z.current>5?"bg-[#009688] text-white":Z.current===5?"bg-[#FF7043] text-white":""}`,children:"05"}),A.jsx("span",{className:`p-1 border w-[15%] h-2 ${Z.current>6?"bg-[#009688]":""}  ${Z.current>5&&Z.current<7?"bg-[#FF7043]":""}`}),A.jsx("span",{className:`rounded-full border-2 p-3 font-semibold ${Z.current>6?"bg-[#009688] text-white":Z.current===6?"bg-[#FF7043] text-white":""}`,children:"06"})]}),s==="sender"&&A.jsx(dQ,{senderFormData:le,onSenderFormDataChange:Te,onNextStep:Ge,useMyProfile:W,userData:Qt}),s==="receiver"&&A.jsx(gQ,{receiverFormData:_e,onReceiverFormDataChange:Ee,onBackStep:me,onNextStep:Je}),s==="package"&&A.jsx(yQ,{packageFormData:he,onPackageFormDataChange:Ne,onBackStep:Ze,onNextStep:Ue}),s==="summary"&&A.jsx(vQ,{senderFormData:le,receiverFormData:_e,packageFormData:he,onBackStep:ot,onNextStep:Qe,packagePrice:ne}),s==="payment"&&A.jsx(FQ,{onBackStep:vt,onCashPayment:xe,onCardPayment:at,isWalletShow:!1,setpackageFormData:be,packageFormData:he}),s==="paid"&&A.jsx(ck,{onComplete:we}),s==="label"&&A.jsxs("div",{className:"w-full flex flex-col items-center gap-4 mt-4",children:[A.jsx("div",{className:"font-bold  text-center text-3xl md:text-5xl text-[#009688] mb-4",children:e.message}),A.jsxs("div",{className:"flex gap-6 items-center w-full md:w-auto border  px-9 mb-10",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(hb,{barCode:e,senderData:le,receiverData:_e,packageData:he,totalPrice:ne.totalPrice,position:1})}),A.jsx("div",{className:"flex-shrink-0  ",children:A.jsx(fb,{senderData:le,receiverData:_e,packageData:he,packagePrice:ne,scheduleTime:c,trackingId:f,qrcode:T,paymentMethod:y,position:1})})]})]}),A.jsx(Bs,{})]})]})},eut=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(""),[a,c]=q.useState(!1),[i,f]=q.useState(!0),[g,y]=q.useState([]),[b,T]=q.useState([]);q.useEffect(()=>{(async()=>{try{const V=localStorage.getItem("token"),Z=await fetch("https://swiftlogix.cc/api/admin",{method:"GET",headers:{Authorization:`Bearer ${V}`}});Z.ok||console.log("Response error"),(await Z.json()).success||e("/admin-login")}catch{}})()},[]);const S=Q=>{n(""),s(Q.target.value)},U=async Q=>{try{const V=await fetch("https://swiftlogix.cc/api/regenrate-bar-qrcode",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({shipments:Q})});if(!V.ok){console.log("Error in response");return}const ne=(await V.json()).bar_qr_codeDataArray;T(ne)}catch(V){console.log("Error in fetching bar codes",V.message)}},N=async()=>{try{const Q=await fetch("https://swiftlogix.cc/api/reprint-label",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({reprintLabel:r})});Q.ok||console.log("Error in response");const Z=(await Q.json()).shipments;if(Z.length>0){const ne=Z.map(Y=>({packagePrice:{service:Y.shipmentType,basePrice:Y.basePrice,weightCharges:Y.weightCharges,distanceCharges:Y.distanceCharges,totalPrice:Y.totalPrice,insurance:Y.insurance},senderFormData:{sendername:Y.sendername,sendercontact:Y.sendercontact,senderemail:Y.senderemail,sendercnic:Y.sendercnic},receiverFormData:{receivername:Y.receivername,receivercontact:Y.receivercontact,receiveremail:Y.receiveremail,receivercnic:Y.receivercnic,receiverarea:Y.receiverarea,receiverhouseno:Y.receiverhouseno,receiveraddress:Y.receiveraddress},packageFormData:{originCity:Y.originCity,destinationCity:Y.destinationCity,weight:Y.weight,pieces:Y.pieces,pickupdate:Y.pickupdate||"",pickuptime:Y.pickuptime||"",insurance:Y.insurance,pickupaddress:Y.pickupaddress||"",shipmentType:Y.shipmentType,deliveryMethod:Y.deliveryMethod,sensitivePackage:Y.sensitivePackage,payby:Y.payby,paid:Y.paid},paymentMethod:{paymentMethod:Y.paymentMethod},scheduleTime:{scheduleTime:Y.datetime},trackingId:{trackingId:Y.trackingid}}));y(ne)}U(Z)}catch(Q){console.log("Error in fetching shipments",Q.message)}},W=async()=>{if(!r){n("Tracking ID is required*");return}if(r.length!=14){n("Enter Valid Tracking ID");return}await N(),f(!1),c(!0)},L=()=>{y([]),s(""),f(!0),c(!1)};return A.jsxs("div",{className:"flex min-h-screen overflow-hidden",children:[A.jsx(Bs,{}),A.jsx(Ag,{}),A.jsxs("div",{className:"min-[1226px]:ml-[18vw] w-full flex-1 flex flex-col justify-start items-center",children:[A.jsxs("div",{className:"relative bg-[#009688] text-white w-full py-8 flex justify-center items-center",children:[A.jsx("div",{className:"text-3xl max-[418px]:text-2xl  sm:text-4xl  font-semibold",children:"Reprint Shipment Label"}),a&&A.jsx(kF,{onClick:L,className:"absolute bottom-[-32px] left-[10%]  cursor-pointer text-black"})]}),i&&A.jsx("div",{className:"h-[40vh] flex justify-center items-center w-full",children:A.jsxs("div",{className:"flex flex-col items-center w-full sm:w-[40vw] p-4",children:[A.jsxs("div",{className:"flex flex-col  sm:flex-row w-full gap-4",children:[A.jsx("input",{onChange:S,type:"text",value:r,name:"cnic/mobileno/email",id:"reprint-label",placeholder:"Enter Tracking ID",className:`placeholder:text-[#2632386d] relative w-full px-4 py-2 rounded-lg border-2 border-[#009688]\r
                         bg-[#F7F7F7] focus:outline-none focus:border-[#FF7043] `}),A.jsx("input",{onClick:W,type:"submit",value:"Reprint",className:`cursor-pointer font-semibold text-white p-2 bg-[#009688] hover:bg-[#FF7043] rounded-lg md:relative right-6 md:rounded-l-none\r
                         transition-all ease-in-out duration-300 hover:text-[18px]`})]}),A.jsx("div",{children:t&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:t})})]})}),a&&g.length==0&&A.jsxs("p",{className:"h-full flex justify-center items-center",children:["No, shipments scheduled against ",A.jsx("span",{className:"text-[#FF7043] font-bold",children:r})," "]}),a&&A.jsx("div",{className:"w-full flex flex-col items-center mt-10 gap-4",children:g.map((Q,V)=>{var Z,ne,Y,le;return A.jsxs("div",{className:"flex gap-6 justify-center items-center w-full md:w-auto border mt-2 px-9",children:[A.jsx("div",{className:"flex-shrink-0",children:A.jsx(hb,{barCode:b[V]||{message:"",barcode:"",qrcode:""},senderData:Q.senderFormData,receiverData:Q.receiverFormData,packageData:Q.packageFormData,totalPrice:Q.packagePrice.totalPrice,position:V})}),A.jsx("div",{className:"flex-shrink-0 mt-4 ",children:A.jsx(fb,{senderData:Q.senderFormData,receiverData:Q.receiverFormData,packageData:Q.packageFormData,packagePrice:Q.packagePrice,scheduleTime:((Z=Q.scheduleTime)==null?void 0:Z.scheduleTime)||"",trackingId:((ne=Q.trackingId)==null?void 0:ne.trackingId)||"",qrcode:((Y=b[V])==null?void 0:Y.qrcode)||"",paymentMethod:((le=Q.paymentMethod)==null?void 0:le.paymentMethod)||"",position:V})})]},V)})})]})]})},tut=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(""),[a,c]=q.useState(!1),[i,f]=q.useState(!0),[g,y]=q.useState(""),[b,T]=q.useState("");q.useEffect(()=>{(async()=>{try{const Z=localStorage.getItem("token"),ne=await fetch("https://swiftlogix.cc/api/admin",{method:"GET",headers:{Authorization:`Bearer ${Z}`}});ne.ok||console.log("Response error"),(await ne.json()).success||e("/admin-login")}catch{}})()},[]);const S=V=>{n(""),s(V.target.value)},U=async()=>{try{const V=await fetch("https://swiftlogix.cc/api/get-transaction",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:r})});V.ok||console.log("Error in response");const Z=await V.json();Z.success&&y(Z.transaction)}catch(V){console.log("Error in fetching transaction",V.message)}},N=async()=>{if(!r){n("Transaction ID is required*");return}if(r.length!=24){n("Enter Valid Transaction ID");return}await U(),f(!1),c(!0)},W=()=>{y(""),s(""),f(!0),c(!1)},L=()=>{setTimeout(()=>{T(""),window.location.reload()},1e3)},Q=async()=>{try{const V=await fetch("https://swiftlogix.cc/api/transaction-pay",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({transactionId:r})});V.ok||console.log("Response error");const Z=await V.json();Z.success&&(T(Z.message),L())}catch{}};return A.jsxs("div",{className:"flex min-h-screen overflow-hidden",children:[A.jsx(Bs,{}),A.jsx(Ag,{}),A.jsxs("div",{className:"min-[1226px]:ml-[18vw] w-full flex-1 flex flex-col justify-start items-center",children:[A.jsxs("div",{className:"relative bg-[#009688] text-white w-full py-8 flex justify-center items-center",children:[A.jsx("div",{className:"text-3xl max-[418px]:text-2xl  sm:text-4xl  font-semibold",children:"Payment"}),a&&A.jsx(kF,{onClick:W,className:"absolute bottom-[-32px] left-[10%]  cursor-pointer text-black"})]}),i&&A.jsx("div",{className:"h-[40vh] flex justify-center items-center w-full",children:A.jsxs("div",{className:"flex flex-col items-center w-full sm:w-[40vw] p-4",children:[A.jsxs("div",{className:"flex flex-col  sm:flex-row w-full gap-4",children:[A.jsx("input",{onChange:S,type:"text",value:r,name:"cnic/mobileno/email",id:"reprint-label",placeholder:"Enter Transaction ID",className:`placeholder:text-[#2632386d] relative w-full px-4 py-2 rounded-lg border-2 border-[#009688]\r
                         bg-[#F7F7F7] focus:outline-none focus:border-[#FF7043] `}),A.jsx("input",{onClick:N,type:"submit",value:"Search",className:`cursor-pointer font-semibold text-white p-2 bg-[#009688] hover:bg-[#FF7043] rounded-lg md:relative right-6 md:rounded-l-none\r
                         transition-all ease-in-out duration-300 hover:text-[18px]`})]}),A.jsx("div",{children:t&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:t})})]})}),a&&!g&&A.jsxs("p",{className:"absolute top-[25%]",children:[A.jsx("span",{className:"text-[#FF7043] font-bold",children:"Transaction not found"})," "]}),a&&g&&A.jsxs("div",{className:"absolute top-[25%] w-[90vw] sm:w-[70vw] md:w-[50vw] flex flex-col gap-4",children:[A.jsxs("div",{className:"bg-white",children:[A.jsxs("div",{className:"bg-[#009688] p-4 rounded-tr-lg rounded-tl-lg text-white w-full flex flex-col gap-4 justify-center items-center",children:[A.jsxs("div",{className:"font-semibold text-3xl",children:["Rs. ",g==null?void 0:g.transactionAmount]}),A.jsxs("div",{className:"text-center",children:[A.jsx("div",{className:"font-semibold"}),A.jsx("div",{children:"SwiftLogix"})]})]}),A.jsxs("div",{className:"w-full  flex flex-col px-2",children:[A.jsx("div",{className:"font-semibold mb-1 text-lg",children:"Transaction Details"}),A.jsxs("div",{className:"mb-1 flex justify-between",children:[A.jsx("div",{children:"Transaction ID"}),A.jsx("div",{children:g==null?void 0:g._id})," "]}),A.jsxs("div",{className:"mb-1 flex justify-between",children:[A.jsx("div",{children:"Transaction Time"}),A.jsx("div",{children:g==null?void 0:g.datetime})," "]})]}),g.paid&&A.jsx("div",{className:"flex justify-center my-4",children:A.jsx("img",{src:Ld,alt:"tick"})})]}),A.jsx("div",{className:"flex justify-center gap-4",children:A.jsx("button",{type:"button",onClick:Q,className:`${g.paid?"text-red-500 text-3xl mt-2 font-semibold":"bg-[#009688] text-white py-2 px-6 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out"}`,children:g.paid?"Paid":"Pay?"})})]})]}),b&&A.jsx("div",{className:"w-full flex justify-center items-center fixed top-0 left-0 h-screen bg-black bg-opacity-50 z-50",children:A.jsxs("div",{className:"w-[80%] sm:w-[60%] md:w-[40%] lg:w-[30%] rounded-3xl shadow-2xl bg-white p-5 flex flex-col items-center relative transition-all duration-300",children:[A.jsx("img",{src:Ld,alt:"Success",className:"w-20   shadow-2xl rounded-full absolute -top-9"}),A.jsx("p",{className:"mt-10   text-center text-xl sm:text-[36px] text-gray-700 font-semibold",children:b})]})})]})};function nut(){var g,y,b,T;const e=nf(),t=(g=e.state)==null?void 0:g.shipmentDetail,n=(y=e.state)==null?void 0:y.originCityCoords,r=(b=e.state)==null?void 0:b.destinationCityCoords,s=(T=e.state)==null?void 0:T.trackingId,[a,c]=q.useState(""),[i,f]=q.useState(null);return A.jsxs("div",{className:"flex",children:[A.jsx(Bs,{}),A.jsx(Ag,{}),A.jsx("div",{className:"flex-1 min-[1226px]:ml-[18vw] w-[100vw]  h-screen bg-white overflow-y-auto",children:A.jsxs("div",{className:"w-full bg-white flex flex-col",children:[A.jsx("div",{className:"w-full shadow-lg bg-[#009688] text-white flex justify-center items-center p-8",children:A.jsx("div",{className:"text-5xl max-sm:text-2xl font-semibold",children:"Shipment Tracking"})}),A.jsxs("div",{className:"sm:flex  justify-center items-center gap-4 px-4 py-6 ",children:[A.jsxs("div",{className:"w-full max-w-md bg-white rounded-lg shadow-lg p-5",children:[A.jsx("div",{className:"w-full border shadow-sm rounded-full py-2 px-4 mb-4 flex justify-center items-center",children:A.jsx("h2",{className:"text-lg sm:text-xl font-semibold",children:"Shipment Details"})}),A.jsxs("div",{className:"flex flex-col gap-3 text-sm sm:text-base text-gray-700",children:[A.jsxs("p",{children:[A.jsx("strong",{children:"Tracking ID:"})," ",t==null?void 0:t.trackingid]}),A.jsxs("p",{children:[A.jsx("strong",{children:"From:"})," ",t==null?void 0:t.originCity]}),A.jsxs("p",{children:[A.jsx("strong",{children:"To:"})," ",t==null?void 0:t.destinationCity]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Status:"})," ",t==null?void 0:t.shipmentStatus]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Last Updated:"})," ",a]}),A.jsxs("p",{children:[A.jsx("strong",{children:"Estimated Arrival:"})," ",i!==null?`${i} minutes`:"Calculating ETA..."]})]})]}),A.jsx("div",{className:"w-full",children:A.jsx(kQ,{originCityCoords:n,destinationCityCoords:r,trackingId:s,setLastUpdateAgo:c,setEta:f})})]})]})})]})}const rut=()=>A.jsxs(A.Fragment,{children:[A.jsx(al,{}),A.jsx(_h,{}),A.jsx(Bs,{}),A.jsx(go,{children:A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-center",children:"Shipment Insurance Policy"})})}),A.jsx("div",{className:"min-h-screen px-4 sm:px-8 py-6",children:A.jsx(go,{delay:.1,children:A.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 sm:p-10 rounded-2xl shadow-lg space-y-8",children:[A.jsx(go,{delay:.2,children:A.jsxs("p",{className:"text-gray-700 text-lg leading-relaxed",children:["At ",A.jsx("strong",{children:"SwiftLogix"}),", we understand the value of your shipment. That’s why we offer a comprehensive ",A.jsx("strong",{children:"Insurance Policy"})," designed to protect your goods against unforeseen incidents like ",A.jsx("strong",{children:"loss, damage, or theft"})," during transit."]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"What’s Covered?"}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[A.jsxs("li",{children:["Shipment ",A.jsx("strong",{children:"loss"})," during transit"]}),A.jsxs("li",{children:["Shipment ",A.jsx("strong",{children:"damage"})," due to handling or accidents"]}),A.jsxs("li",{children:["Shipment ",A.jsx("strong",{children:"theft"})," or ",A.jsx("strong",{children:"misplacement"})]})]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"Insurance Cost"}),A.jsxs("p",{className:"text-gray-700 mb-2",children:["The insurance premium is ",A.jsx("strong",{children:"2% of your shipment's declared original value"}),"."]}),A.jsx("p",{className:"text-gray-700 italic",children:"Example:"}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[A.jsx("li",{children:"Declared Value: Rs.500"}),A.jsx("li",{children:"Insurance Cost: Rs.10"}),A.jsx("li",{children:"Total Refund if covered: Rs.500"})]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"Refund Policy"}),A.jsxs("p",{className:"text-gray-700 mb-2",children:["If your insured shipment is ",A.jsx("strong",{children:"lost, stolen, or damaged"}),", SwiftLogix will:"]}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[A.jsxs("li",{children:["Refund the ",A.jsx("strong",{children:"full declared value"})," of your shipment (100%)"]}),A.jsxs("li",{children:["Process the refund within ",A.jsx("strong",{children:"7–14 business days"})," after submit claim"]})]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"How to Insure Your Shipment"}),A.jsxs("ol",{className:"list-decimal pl-6 text-gray-700 space-y-1",children:[A.jsxs("li",{children:["Select the ",A.jsx("strong",{children:"“Insurance”"})," option during Schedule Shipment."]}),A.jsxs("li",{children:["Enter your shipment’s ",A.jsx("strong",{children:"original value"})," (invoice or receipt may be required)."]}),A.jsxs("li",{children:["The system will calculate and add the ",A.jsx("strong",{children:"2% insurance fee"})," to your total."]})]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"Important Notes"}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[A.jsxs("li",{children:["Claims must be submitted within ",A.jsx("strong",{children:"7 days"})," of the scheduled delivery date."]}),A.jsx("li",{children:"Proof of value (e.g., invoice or receipt) is required for claims."}),A.jsxs("li",{children:["Insurance does ",A.jsx("strong",{children:"not cover"})," delays, prohibited items, or incorrect address issues."]})]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"Claim Process"}),A.jsxs("p",{className:"text-gray-700 mb-2",children:["To file a claim, visit:"," ",A.jsx(ss,{className:"text-blue-600 underline hover:text-blue-800 transition",to:"/file-claim",children:"Insurance Claim"})]}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[A.jsx("li",{children:"Tracking number"}),A.jsx("li",{children:"Description of the issue"}),A.jsx("li",{children:"Proof of shipment value"}),A.jsx("li",{children:"Any supporting photos or documents"})]})]})}),A.jsx(go,{delay:.2,children:A.jsx("p",{className:"text-gray-700 text-center pt-6 border-t",children:"We’re committed to delivering your items safely—and ensuring peace of mind if anything goes wrong."})})]})})}),A.jsx(qp,{})]}),iut=()=>A.jsxs(A.Fragment,{children:[A.jsx(al,{}),A.jsx(_h,{}),A.jsx(Bs,{}),A.jsx(go,{children:A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-center",children:"Payment Methods"})})}),A.jsx("div",{className:"min-h-screen px-4 sm:px-8 py-6",children:A.jsx(go,{delay:.1,children:A.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 sm:p-10 rounded-2xl shadow-lg space-y-8",children:[A.jsx(go,{delay:.2,children:A.jsxs("p",{className:"text-gray-700 text-lg leading-relaxed",children:["At ",A.jsx("strong",{children:"SwiftLogix"}),", we offer multiple convenient payment options to make your shipment experience smooth and flexible. Choose the method that works best for you."]})}),A.jsx(go,{delay:.3,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"Available Payment Methods"}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[A.jsxs("li",{children:[A.jsx("strong",{children:"Cash Payment"}),A.jsx("br",{}),"Pay in cash at the time of pickup or delivery. Ideal for those who prefer traditional transactions."]}),A.jsxs("li",{children:[A.jsx("strong",{children:"Online Payment"}),A.jsx("br",{}),"Use your ",A.jsx("strong",{children:"credit or debit card"})," through our secure online payment gateway."]}),A.jsxs("li",{children:[A.jsx("strong",{children:"SwiftLogix Wallet"}),A.jsx("br",{}),"An exclusive reward-based wallet for registered customers. Earn and redeem points for shipments."]})]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"SwiftLogix Wallet"}),A.jsxs("p",{className:"text-gray-700 mb-2",children:["The ",A.jsx("strong",{children:"SwiftLogix Wallet"})," is a loyalty-based digital wallet available only to"," ",A.jsx("strong",{children:"registered customers"}),". Here's how it works:"]}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-1",children:[A.jsxs("li",{children:["For every ",A.jsx("strong",{children:"completed shipment"}),", customers earn ",A.jsx("strong",{children:"50 points"}),"."]}),A.jsx("li",{children:"Points are added automatically after successful delivery."}),A.jsxs("li",{children:["When you accumulate ",A.jsx("strong",{children:"250 points"}),", you can redeem them to fully pay for your next shipment."]}),A.jsx("li",{children:"Points can only be used by logged-in customers with active accounts."})]}),A.jsxs("p",{className:"text-gray-700 mt-2",children:[A.jsx("strong",{children:"Note:"})," Wallet access and usage are restricted to verified users with active accounts."]})]})}),A.jsx(go,{delay:.2,children:A.jsx("p",{className:"text-gray-700 text-center pt-6 border-t",children:"Your convenience is our priority. Choose the payment method that suits you best."})})]})})}),A.jsx(qp,{})]}),sut=()=>A.jsxs(A.Fragment,{children:[A.jsx(al,{}),A.jsx(_h,{}),A.jsx(Bs,{}),A.jsx(go,{children:A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-center",children:"Freelance Rider Program"})})}),A.jsx("div",{className:"min-h-screen px-4 sm:px-8 py-6",children:A.jsx(go,{delay:.1,children:A.jsxs("div",{className:"max-w-4xl mx-auto bg-white p-6 sm:p-10 rounded-2xl shadow-lg space-y-8",children:[A.jsx(go,{delay:.2,children:A.jsxs("p",{className:"text-gray-700 text-lg leading-relaxed",children:["Become a ",A.jsx("strong",{children:"SwiftLogix Partner"})," by registering as a freelance rider. Deliver packages, earn rewards, and get paid — all on your own schedule."]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"How It Works"}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[A.jsx("li",{children:"Register online to become a freelance delivery rider."}),A.jsx("li",{children:"Accept available deliveries from the SwiftLogix rider dashboard."}),A.jsx("li",{children:"Pick up shipments from the origin city's SwiftLogix shop/office/franchise."}),A.jsx("li",{children:"Deliver the package to the destination city’s SwiftLogix shop/office/franchise."})]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"Completion & Rewards"}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[A.jsxs("li",{children:["Once a shipment is delivered successfully, it is marked as ",A.jsx("strong",{children:"completed"}),"."]}),A.jsxs("li",{children:["You earn ",A.jsx("strong",{children:"points"})," for every successful delivery, added to your SwiftLogix Wallet."]}),A.jsx("li",{children:"Points can be redeemed for money."})]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"Wallet & Withdrawal"}),A.jsxs("ol",{className:"list-decimal pl-6 text-gray-700 space-y-1",children:[A.jsx("li",{children:"Log in to your SwiftLogix rider account."}),A.jsxs("li",{children:["Open your ",A.jsx("strong",{children:"Wallet"})," to view your earned points."]}),A.jsx("li",{children:"Select the amount of points you want to withdraw."}),A.jsxs("li",{children:["Select a withdrawal method: ",A.jsx("strong",{children:"Online/Card"})," or ",A.jsx("strong",{children:"Cash"}),"."]}),A.jsxs("li",{children:["If choosing ",A.jsx("strong",{children:"Cash"}),", save the withdrawal confirmation/screenshot and visit your nearest SwiftLogix shop/franchise to collect the cash."]})]}),A.jsxs("p",{className:"text-gray-700 mt-2",children:[A.jsx("strong",{children:"Note:"})," Redemption rates and withdrawal limits may vary."]})]})}),A.jsx(go,{delay:.2,children:A.jsxs("section",{children:[A.jsx("h2",{className:"text-2xl font-semibold mb-2 text-gray-800",children:"Start Earning Today"}),A.jsxs("ul",{className:"list-disc pl-6 text-gray-700 space-y-2",children:[A.jsx("li",{children:"No prior experience needed."}),A.jsx("li",{children:"Real-time delivery updates and earnings tracking."})]}),A.jsxs("p",{className:"text-gray-700 mt-2",children:[A.jsx(ss,{to:"/rider-signup",className:"text-blue-600 underline hover:text-blue-800",children:"Register now"})," ","and become a SwiftLogix partner rider."]})]})}),A.jsx(go,{delay:.2,children:A.jsx("p",{className:"text-gray-700 text-center pt-6 border-t",children:"Help us deliver across cities — and grow with SwiftLogix."})})]})})}),A.jsx(qp,{})]}),out=()=>{const[e,t]=q.useState(!1),[n,r]=q.useState(!1),[s,a]=q.useState(!0),[c,i]=q.useState(null),[f,g]=q.useState({trackingid:"",email:"",description:"",proofShipmentValue:null,anySupportingDocument:null}),[y,b]=q.useState({trackingid:"",email:"",description:"",proofShipmentValue:null,anySupportingDocument:null}),T=W=>{const{name:L,value:Q,files:V}=W.target;if(g({...f,[L]:""}),V){const Z=V[0],ne=["image/jpeg","image/png","image/jpg"],Y=20*1024*1024;if(!ne.includes(Z.type)){g(le=>({...le,[L]:"Only JPG, JPEG, or PNG files are allowed*"})),b({...y,[L]:null});return}if(Z.size>Y){g(le=>({...le,[L]:"File size must be under 20MB*"})),b({...y,[L]:null});return}b({...y,[L]:Z})}else b({...y,[L]:Q})},S=()=>{let W=!0,L={};return y.trackingid||(L.trackingid="Tracking Id is required*",W=!1),y.trackingid.length!==14&&(L.trackingid="Tracking Id is invalid*",W=!1),y.email||(L.email="Email Address is required*",W=!1),y.description||(L.description="Description is required*",W=!1),y.proofShipmentValue||(L.proofShipmentValue="Shipment Value Proof is required*",W=!1),y.anySupportingDocument||(L.anySupportingDocument="Other Supporting Document is required*",W=!1),g(L),W},U=()=>{setTimeout(()=>{t(!1),r(!1)},5e3)},N=async W=>{if(S()){W.preventDefault(),a(!1);try{const L=new FormData;L.append("trackingid",y.trackingid),L.append("email",y.email),L.append("description",y.description),L.append("proofShipmentValue",y.proofShipmentValue),L.append("anySupportingDocument",y.anySupportingDocument);const Q=await fetch("https://swiftlogix.cc/api/insurance-claim",{method:"POST",credentials:"include",body:L});Q.ok;const V=await Q.json();i(V.message),a(!0),V.success?(t(!0),U(),b({trackingid:"",email:"",description:"",proofShipmentValue:null,anySupportingDocument:null})):(r(!0),U())}catch{i("Failed to submit claim"),r(!0),U()}}};return A.jsxs(A.Fragment,{children:[A.jsx(al,{}),A.jsx(Bs,{}),A.jsx(_h,{}),A.jsx("div",{className:"w-full bg-[#009688] text-white flex justify-center items-center p-6 sm:p-8",children:A.jsx("div",{className:"text-3xl sm:text-4xl md:text-5xl font-semibold text-center",children:"Insurance Claim"})}),A.jsxs("div",{className:"max-w-xl mx-auto my-10 p-6 bg-white rounded-lg shadow-lg",children:[A.jsx("h2",{className:"text-2xl font-bold text-gray-700 text-center mb-6",children:"Fill the Information"}),A.jsxs("form",{children:[A.jsxs("div",{className:"w-full gap-4",children:[A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"trackingId",className:"block text-sm font-medium text-gray-700",children:"Tracking Id*"}),A.jsx("input",{type:"text",name:"trackingid",value:y.trackingid,onChange:T,className:"w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"}),f.trackingid&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.trackingid})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700",children:"Email Address*"}),A.jsx("input",{type:"email",name:"email",required:!0,value:y.email,onChange:T,className:"w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"}),f.email&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.email})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"issueDescription",className:"block text-sm font-medium text-gray-700",children:"Description*"}),A.jsx("input",{type:"text",name:"description",value:y.description,onChange:T,placeholder:"Describe the issue",className:"w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"}),f.description&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.description})]})]}),A.jsxs("div",{className:"w-full",children:[A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"proofShipmentValue",className:"block text-sm font-medium text-gray-700",children:"Shipment Value Proof* (invoice/receipt)"}),A.jsx("input",{type:"file",name:"proofShipmentValue",onChange:T,className:"w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"}),f.proofShipmentValue&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.proofShipmentValue})]}),A.jsxs("div",{className:"mb-4",children:[A.jsx("label",{htmlFor:"anySupportingDocument",className:"block text-sm font-medium text-gray-700",children:"Other Supporting Document"}),A.jsx("input",{type:"file",name:"anySupportingDocument",onChange:T,className:"w-full mt-1 p-2 border border-gray-300 rounded-md focus:ring-2 focus:ring-[#FF7043] focus:outline-none transition duration-200"}),f.anySupportingDocument&&A.jsx("p",{className:"text-red-500 text-sm mt-2",children:f.anySupportingDocument})]})]})]}),A.jsx("div",{className:"flex justify-end mt-6 ",children:A.jsx("button",{type:"button",onClick:N,className:"bg-[#009688] text-white py-2 px-4 rounded-full hover:bg-[#FF7043] transition duration-200 ease-in-out",children:s?"Submit":"Submiting..."})})]})]}),e&&A.jsx("div",{className:"border-none bg-[#009688] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:"Claim submitted successfully"}),n&&A.jsx("div",{className:"border-none bg-[#FF7043] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:c}),A.jsx(qp,{})]})},aut=({trackingNumber:e,description:t,datetime:n,onClick:r,onAccept:s,onReject:a,selectedCard:c,onPaid:i,processingIndex:f,processingStatus:g,index:y})=>A.jsxs("div",{className:"w-full sm:w-[90%] md:w-[70%] lg:max-w-sm bg-white border rounded-xl shadow-md p-4 hover:scale-105 transition-all duration-300",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-4 gap-2",children:[A.jsxs("span",{className:"font-semibold text-base sm:text-lg text-[#009688]",children:["Tracking ID# ",e]}),A.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:A.jsx("strong",{children:n})})]}),A.jsx("div",{className:"text-sm sm:text-base",children:A.jsxs("p",{className:"text-gray-600",children:[A.jsx("strong",{children:"Description:"})," ",t]})}),A.jsxs("div",{className:"mt-4 flex flex-wrap items-center gap-2",children:[A.jsx("button",{onClick:r,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:"Details"}),c==="pending"&&A.jsxs(A.Fragment,{children:[A.jsx("button",{onClick:s,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:f===y&&g==="accepted"?"Processing...":"Accept"}),A.jsx("button",{onClick:a,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:f===y&&g==="rejected"?"Processing...":"Reject"})]}),c==="accepted"&&A.jsx("button",{onClick:i,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:f===y&&g==="completed"?"Processing...":"Paid?"}),c==="completed"&&A.jsx("img",{src:Ld,alt:"tick"})]})]}),lut=({insuranceClaimData:e})=>A.jsx("div",{className:"mt-6 px-4",children:A.jsx("div",{className:"w-full flex justify-center",children:A.jsx("div",{className:"bg-white w-full max-w-4xl border border-gray-300 p-6 rounded-2xl shadow-md",children:A.jsxs("div",{className:"text-gray-700 space-y-4",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row sm:gap-6",children:[A.jsxs("p",{className:"pb-1",children:[A.jsx("strong",{children:"Tracking ID:"})," ",e==null?void 0:e.trackingid]}),A.jsxs("p",{className:"pb-1",children:[A.jsx("strong",{children:"Description:"})," ",e==null?void 0:e.description]})]}),A.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[A.jsxs("div",{children:[A.jsx("p",{className:"pb-2",children:A.jsx("strong",{children:"Shipment Value Proof:"})}),A.jsxs("div",{className:"flex gap-2 items-center",children:[A.jsx("img",{src:e==null?void 0:e.shipmentValueProof,alt:"Shipment Value Proof",className:"w-40 h-40  rounded-md border"}),A.jsxs("div",{className:"flex flex-col gap-3 ",children:[A.jsx("a",{href:e==null?void 0:e.shipmentValueProof,target:"_blank",rel:"noopener noreferrer",title:"Shipment Value Proof",children:A.jsx(rF,{size:20,className:"cursor-pointer"})}),A.jsx("a",{href:e!=null&&e.shipmentValueProof?e.shipmentValueProof.replace("/upload/","/upload/fl_attachment/"):"#",download:`shipment-proof-${e==null?void 0:e.trackingid}.jpg`,className:"",title:"Download Shipment Value Proof",children:A.jsx(Uw,{size:20,className:"cursor-pointer"})})]})]})]}),A.jsxs("div",{children:[A.jsx("p",{className:"pb-2",children:A.jsx("strong",{children:"Other Supporting Document:"})}),A.jsxs("div",{className:"flex gap-2 items-center",children:[A.jsx("img",{src:e==null?void 0:e.otherSupportingDocument,alt:"Other Supporting Document",className:"w-40 h-40 rounded-md border"}),A.jsxs("div",{className:"flex flex-col gap-3 ",children:[A.jsx("a",{href:e==null?void 0:e.otherSupportingDocument,target:"_blank",rel:"noopener noreferrer",title:"View Supporting Document",children:A.jsx(rF,{size:20,className:"cursor-pointer"})}),A.jsx("a",{href:e!=null&&e.otherSupportingDocument?e.otherSupportingDocument.replace("/upload/","/upload/fl_attachment/"):"#",download:`supporting-document-${e==null?void 0:e.trackingid}.jpg`,title:"Download Supporting Document",children:A.jsx(Uw,{size:20,className:"cursor-pointer"})})]})]})]})]})]})})})}),cut=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(null),[a,c]=q.useState(0),[i,f]=q.useState(0),[g,y]=q.useState(0),[b,T]=q.useState(0),[S,U]=q.useState(null),[N,W]=q.useState({}),[L,Q]=q.useState([]),[V,Z]=q.useState([]),[ne,Y]=q.useState(null),[le,pe]=q.useState(!1),[_e,ye]=q.useState(!1),[he,be]=q.useState(null),[Te,Ee]=q.useState(null),[Ne,Ge]=q.useState(null);q.useEffect(()=>{(async()=>{try{const we=localStorage.getItem("token"),me=await fetch("https://swiftlogix.cc/api/admin",{method:"GET",headers:{Authorization:`Bearer ${we}`}});me.ok||console.log("Response error");const Ze=await me.json();Ze.success||e("/admin-login"),W(Ze.userData)}catch{}})()},[]),q.useEffect(()=>{U("pending")},[]);const Je=at=>{U(at),at==="scheduled"?(document.documentElement.classList.add("bg-[#009688]"),document.documentElement.classList.remove("bg-white")):(document.documentElement.classList.remove("bg-[#009688]"),document.documentElement.classList.add("bg-white"))};q.useEffect(()=>{(async()=>{const we=await fetch("https://swiftlogix.cc/api/get-insurance-claims",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:S,city:N==null?void 0:N.city})});we.ok||console.log("response error");const Ze=(await we.json()).claims;Ze.length>0?(Q(Ze),Z(Ze)):(Q([]),Z([]))})()},[N,S]),q.useEffect(()=>{(async()=>{const we=await fetch("https://swiftlogix.cc/api/get-insurance-claims",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"accepted",city:N==null?void 0:N.city})});we.ok||console.log("response error");const me=await we.json();f(me.claims.length)})()},[N]),q.useEffect(()=>{(async()=>{const we=await fetch("https://swiftlogix.cc/api/get-insurance-claims",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"pending",city:N==null?void 0:N.city})});we.ok||console.log("response error");const me=await we.json();c(me.claims.length)})()},[N]),q.useEffect(()=>{(async()=>{const we=await fetch("https://swiftlogix.cc/api/get-insurance-claims",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"rejected",city:N==null?void 0:N.city})});we.ok||console.log("response error");const me=await we.json();y(me.claims.length)})()},[N]),q.useEffect(()=>{(async()=>{const we=await fetch("https://swiftlogix.cc/api/get-insurance-claims",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"completed",city:N==null?void 0:N.city})});we.ok||console.log("response error");const me=await we.json();T(me.claims.length)})()},[N]);const Ue=at=>{n(""),s(at.target.value),Q(V)},Qe=async()=>{if(n(""),r.length===0){n("Tracking Id required*");return}const at=L.find(we=>we.trackingid===r);if(!at){n("No, insurance claim found.");return}Q([at])},xe=async(at,we)=>{try{Ee(at),Ge(we);const me=L[at].trackingid,Ze=await fetch("https://swiftlogix.cc/api/update-insurance-claims",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({trackingid:me,claimStatus:we})});Ze.ok||console.log("response error");const ot=await Ze.json();be(ot.message),ot.success?(Ee(null),Ge(null),qi.success("Claim status updated"),window.location.reload()):(Ee(null),Ge(null),qi.success("Failed update to claim status"),window.location.reload())}catch{qi.success("Failed update to claim status")}};return A.jsxs("div",{className:"flex min-h-screen overflow-hidden",children:[A.jsx(Ag,{}),A.jsx(cb,{}),A.jsxs("div",{className:"min-[1226px]:ml-[18vw] w-full flex-1 flex flex-col justify-start ",children:[A.jsx("div",{className:"relative bg-[#009688] text-white w-full py-8 flex justify-center items-center",children:A.jsx("div",{className:"text-3xl max-[418px]:text-2xl  sm:text-4xl  font-semibold",children:"Insurance"})}),A.jsx("div",{className:"relative",children:A.jsxs("div",{className:"flex gap-6 p-8",children:[A.jsx(CT,{title:"Completed Claims",value:b,onClick:()=>Je("completed"),isSelected:S==="completed"}),A.jsx(CT,{title:"Pending Claims",value:a,onClick:()=>Je("pending"),isSelected:S==="pending"}),A.jsx(CT,{title:"Accepted Claims",value:i,onClick:()=>Je("accepted"),isSelected:S==="accepted"}),A.jsx(CT,{title:"Rejected Claims",value:g,onClick:()=>Je("rejected"),isSelected:S==="rejected"}),A.jsxs("div",{className:"absolute bottom-[-37px] text-center max-sm:top-[13rem]  right-4 sm:right-10 md:right-16 p-2 bg-white rounded-lg w-[90%] sm:w-auto",children:[t&&A.jsx("div",{className:"text-red-600 mb-2 text-sm",children:t}),A.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[A.jsx("input",{type:"text",placeholder:"Tracking ID",value:r,name:"searchTrackingId",onChange:Ue,className:"flex-1 min-w-0 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#009688] w-full sm:w-auto"}),A.jsx("button",{onClick:Qe,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] w-full sm:w-auto",children:"Search"})]})]})]})}),L.length==0&&A.jsxs("div",{className:"flex justify-center items-center",children:["No, ",S," insurance claims"]}),A.jsx("div",{className:`flex  flex-wrap  gap-4  max-sm:px-4 sm:pl-8 ${S!=="scheduled"&&"sm:mt-12 mt-24"}`,children:L.map((at,we)=>A.jsx(aut,{trackingNumber:at.trackingid,description:at.description,datetime:at.datetime,onClick:()=>Y(we),onAccept:()=>xe(we,"accepted"),onReject:()=>xe(we,"rejected"),onPaid:()=>xe(we,"completed"),selectedCard:S,processingIndex:Te,processingStatus:Ne,index:we},we))}),ne!=null&&A.jsx("div",{className:"fixed inset-0 bg-gray-700 bg-opacity-50 flex justify-center items-center z-50",children:A.jsxs("div",{className:"relative bg-white rounded-lg p-4 max-w-4xl w-full",children:[A.jsx("button",{onClick:()=>Y(null),className:"absolute top-4 right-4 text-[#FF7043] text-3xl font-bold focus:outline-none","aria-label":"Close",children:"×"}),A.jsx(lut,{insuranceClaimData:L[ne]})]})}),le&&A.jsx("div",{className:"border-none bg-[#009688] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:he}),_e&&A.jsx("div",{className:"border-none bg-[#FF7043] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:he})]}),A.jsx(Bs,{})]})};function CT({title:e,value:t,onClick:n,isSelected:r}){return A.jsxs("div",{onClick:n,className:`cursor-pointer p-6 hover:bg-[#009688] rounded-lg shadow-md ${r?"bg-[#009688] text-white":"bg-white"} text-gray-700 hover:text-white`,children:[A.jsx("div",{className:"flex items-center justify-between mb-4",children:A.jsx("h3",{className:"text-lg font-semibold",children:e})}),A.jsx("p",{className:"text-3xl font-bold",children:t})]})}const uut=({email:e,userId:t,setOTPCard:n,setOTPVerified:r})=>{const[s,a]=q.useState(["","","",""]),[c,i]=q.useState(!1),[f,g]=q.useState(""),[y,b]=q.useState(120),[T,S]=q.useState(!0);q.useEffect(()=>{let Q;return y>0?Q=setInterval(()=>{b(V=>V-1)},1e3):S(!1),()=>clearInterval(Q)},[y]);const U=(Q,V)=>{const Z=Q.target.value;if(Z.match(/[0-9]/)&&Z.length===1){const ne=[...s];ne[V]=Z,a(ne),V===s.length-1&&i(!0),V<s.length-1&&document.getElementById(`otp-input-${V+1}`).focus()}else if(Z===""){const ne=[...s];ne[V]="",a(ne),i(!1),V>0&&document.getElementById(`otp-input-${V-1}`).focus()}},N=async Q=>{Q.preventDefault(),g("");const Z={otp:s.join(""),userId:t};try{const ne=await fetch("https://swiftlogix.cc/api/verifyotp-forgot-password",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify(Z)});if(!ne.ok){g("Failed to verify OTP. Please try again.");return}const Y=await ne.json();Y.success?(n(!1),r(!0)):g(Y.message||"OTP verification failed.")}catch{g("OTP verification failed. Please try again.")}},W=async()=>{try{const Q=await fetch("https://swiftlogix.cc/api/resendotp-forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,userId:t})});if(!Q.ok){g("Failed to resend OTP.");return}const V=await Q.json();V.success?(a(["","","",""]),i(!1),g(""),S(!0),b(120)):g(V.message||"Failed to resend OTP.")}catch{g("Failed to resend OTP. Please try again.")}},L=Q=>{const V=Math.floor(Q/60),Z=Q%60;return`${V}:${Z<10?"0":""}${Z}`};return A.jsx("div",{className:"flex items-center justify-center bg-gray-100",children:A.jsxs("div",{className:"p-6 bg-white rounded-3xl shadow-md w-[90%] max-w-[400px] absolute top-[35%]",children:[A.jsx("div",{className:"flex justify-center",children:A.jsx("img",{src:uk,alt:"mail icon",className:"w-24 h-24"})}),A.jsx("h1",{className:"text-3xl font-semibold text-center text-gray-700 mt-4 mb-4",children:"Verify Email"}),f&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:f}),A.jsxs("p",{className:"font-semibold text-center text-gray-700 mt-4 mb-6",children:["Enter the OTP sent to ",A.jsx("b",{children:e})]}),A.jsxs("form",{onSubmit:N,children:[A.jsx("div",{className:"flex justify-center space-x-4 mb-4",children:s.map((Q,V)=>A.jsx("input",{id:`otp-input-${V}`,type:"text",value:Q,onChange:Z=>U(Z,V),maxLength:"1",className:"w-12 h-12 text-xl text-center border-2 border-gray-300 rounded focus:outline-[#FF7043] focus:border-blue-500",autoFocus:V===s.findIndex(Z=>Z==="")},V))}),A.jsx("div",{className:"flex justify-center items-center gap-2 mt-4 mb-4",children:y===0?A.jsx("button",{type:"button",className:`py-2 px-4 border-2 rounded-2xl ${T?"cursor-not-allowed bg-gray-200":"cursor-pointer hover:bg-slate-100"}`,disabled:T,onClick:W,children:"Resend OTP"}):A.jsx("p",{className:"text-gray-600",children:L(y)})}),c&&A.jsx("button",{type:"submit",className:"w-full py-2 bg-[#009688] text-white font-semibold rounded-lg hover:bg-[#FF7043] transition",children:"Verify OTP"})]})]})})},dut=()=>{const e=Mo(),[t,n]=q.useState(""),[r,s]=q.useState(""),[a,c]=q.useState(""),[i,f]=q.useState(!1),[g,y]=q.useState(!1),[b,T]=q.useState(!1),[S,U]=q.useState(!1),[N,W]=q.useState(null),[L,Q]=q.useState(null),[V,Z]=q.useState(null);q.useState(!1);const[ne,Y]=q.useState("idle"),le=Te=>{n(Te.target.value),s("")},pe=Te=>{Z(Te.target.value)},_e=Te=>{s(""),W(Te.target.value)},ye=Te=>{s(""),Q(Te.target.value)},he=async()=>{try{if(!/^[a-zA-Z0-9._%+-]+@[a-zA-Z0-9.-]+\.[a-zA-Z]{2,}$/.test(t)){s("Please enter a valid email address");return}if(V===null){s("Who are you?");return}s(""),Y("processing");const Te=await fetch("https://swiftlogix.cc/api/send-otp-forgot-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:t,type:V})});if(!Te.ok){s("Failed to send OTP. Please check your email and try again.");return}const Ee=await Te.json();Ee.success?(Y("idle"),c(Ee.userId),f(!0)):(Y("idle"),s(Ee.message))}catch{s("Failed to send OTP. Please try again.")}},be=async()=>{try{if(N.length<8){s("Password contain minimum 8 characters");return}if(N!==L){s("Passwords do not match");return}Y("processing");const Te=await fetch("https://swiftlogix.cc/api/create-new-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({password:N,confirmPassword:L,type:V,email:t})});if(!Te.ok){s("Failed to create new password. Try again.");return}const Ee=await Te.json();Ee.success?(Y("success"),V==="rider"?e("/rider-login",{state:{isChange:!0}}):V==="customer"&&e("/login",{state:{isChange:!0}})):(Y("idle"),s(Ee.message))}catch{s("Failed to create new password. Try again.")}};return A.jsxs(A.Fragment,{children:[A.jsx(al,{}),A.jsx(Bs,{}),A.jsxs("div",{className:"h-screen flex flex-col",children:[A.jsxs("div",{className:"w-full flex justify-around items-center border-b py-2",children:[A.jsx("div",{children:A.jsx("img",{src:GF,alt:"SwiftLogix Logo",className:"w-14 py-2 object-contain"})}),A.jsxs("div",{className:"flex gap-4",children:[A.jsx(ss,{to:"/rider-login",children:A.jsxs("li",{className:"flex gap-1 items-center hover:bg-[#009688] p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(MF,{size:24,color:"#FF7043"}),A.jsx("span",{children:"Become a Rider"})]})}),A.jsx(ss,{to:"/login",children:A.jsxs("li",{className:"flex gap-1 items-center hover:bg-[#009688] p-2 rounded-lg hover:text-[#F7F7F7]",children:[A.jsx(OF,{size:18,color:"#FF7043"}),A.jsx("span",{children:"Become a Customer"})]})})]})]}),A.jsx("div",{className:"flex flex-1 justify-center items-center",children:A.jsxs("div",{className:"w-full max-w-[400px] p-6 sm:p-8 bg-white rounded-[10px] shadow-lg",children:[g?A.jsx("h2",{className:"text-2xl sm:text-3xl text-gray-700 text-center mb-6",children:"Create a new password"}):A.jsx("h2",{className:"text-2xl sm:text-3xl text-gray-700 text-center mb-6",children:"Trouble with logging in?"}),!g&&A.jsx("div",{className:"mb-3",children:"Enter your email address, and we'll send you an OTP to get back into your account."}),r&&A.jsx("p",{className:"text-red-500 text-center mb-4",children:r}),A.jsxs("form",{children:[!g&&A.jsxs(A.Fragment,{children:[A.jsx("div",{className:"mb-4",children:A.jsx("input",{type:"email",name:"email",value:t,onChange:le,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Email Address",required:!0})}),A.jsx("div",{className:"mb-4",children:A.jsxs("select",{name:"type",id:"type",value:V,onChange:pe,required:!0,children:[A.jsx("option",{value:"",disabled:!0,selected:!0,children:"Who are you?"}),A.jsx("option",{value:"rider",children:"Rider"}),A.jsx("option",{value:"customer",children:"Customer"})]})}),A.jsx("button",{disabled:!t||ne==="processing",type:"button",onClick:he,className:`w-full bg-[#009688] ${t&&"hover:bg-[#FF7043]"} text-white py-3 rounded-md transition-all duration-300`,children:ne==="processing"?"Processing...":ne==="success"?"Sent":"Send OTP"})]}),g&&A.jsxs(A.Fragment,{children:[A.jsxs("div",{className:"relative mb-4",children:[A.jsx("input",{type:b?"text":"password",value:N,name:"password",onChange:_e,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>T(!b),children:b?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsxs("div",{className:"relative mb-4",children:[A.jsx("input",{type:S?"text":"password",value:L,name:"confirmpassword",onChange:ye,className:"w-full p-3 border rounded-md focus:outline-none",placeholder:"Confirm Password",required:!0}),A.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 cursor-pointer",onClick:()=>U(!S),children:S?A.jsx("img",{src:em,alt:"Show",className:"w-6"}):A.jsx("img",{src:tm,alt:"Hide",className:"w-6"})})]}),A.jsx("button",{disabled:!N&&!L||ne==="processing",type:"button",onClick:be,className:`w-full bg-[#009688] ${N&&L&&"hover:bg-[#FF7043]"} text-white  py-3 rounded-md transition-all duration-300`,children:ne==="processing"?"Processing...":ne==="success"?"Changed":"Change"})]})]})]})}),i&&A.jsx(uut,{email:t,userId:a,setOTPCard:f,setOTPVerified:y})]}),A.jsx(qp,{})]})},hut=({name:e,cnic:t,datetime:n,onClick:r,onAccept:s,onReject:a,selectedCard:c,processingIndex:i,processingStatus:f,index:g})=>A.jsxs("div",{className:"w-full sm:w-[90%] md:w-[70%] lg:max-w-sm bg-white border rounded-xl shadow-md p-4 hover:scale-105 transition-all duration-300",children:[A.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center mb-2 gap-2",children:[A.jsxs("p",{className:"text-gray-600",children:[A.jsx("strong",{children:"Name:"})," ",e]}),c!="active"&&A.jsx("p",{className:"text-gray-600 text-sm sm:text-base",children:A.jsx("strong",{children:n})})]}),c=="active"&&A.jsxs("p",{className:"text-gray-600",children:[A.jsx("strong",{children:"CNIC:"})," ",t]}),A.jsxs("div",{className:"mt-4 flex flex-wrap justify-between items-center gap-2",children:[A.jsx("button",{onClick:r,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:"Details"}),c==="pending"&&A.jsxs("div",{className:"flex gap-2",children:[A.jsx("button",{onClick:s,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:i===g&&f==="active"?"Processing...":"Accept"}),A.jsx("button",{onClick:a,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:i===g&&f==="rejected"?"Processing...":"Reject"})]}),c==="active"&&A.jsx("div",{className:"flex gap-2",children:A.jsx("button",{onClick:a,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:i===g&&f==="rejected"?"Processing...":"Block"})}),c==="rejected"&&A.jsx("div",{className:"flex gap-2",children:A.jsx("button",{onClick:s,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] transition-all duration-300 text-sm sm:text-base",children:i===g&&f==="active"?"Processing...":"Unblock"})})]})]}),fut=({riderData:e,onAccept:t,onReject:n,selectedCard:r})=>A.jsxs("div",{className:"w-full mt-6 mb-10 px-4",children:[A.jsx(Bs,{}),A.jsxs("div",{className:"w-full",children:[A.jsx("div",{className:"absolute top-6 right-24",children:e==null?void 0:e.datetime}),A.jsx("div",{className:"w-full flex justify-center mt-4 px-4",children:A.jsx("div",{className:"w-full max-w-xl flex items-center justify-between p-4 border bg-[#009688] rounded-lg shadow-lg",children:A.jsxs("div",{className:"flex items-center gap-4",children:[A.jsx("img",{src:e==null?void 0:e.picture,alt:"",width:64,height:64,className:"rounded-full object-cover"}),A.jsx("p",{className:"text-xl sm:text-2xl md:text-[28px] text-white font-bold",children:e==null?void 0:e.name})]})})}),A.jsx("div",{className:"flex flex-col md:flex-row gap-6 mt-10 px-4 justify-center",children:[{icon:LQ,title:"Email",value:e==null?void 0:e.email},{icon:MQ,title:"Mobile No",value:e==null?void 0:e.mobileno}].map((s,a)=>A.jsx("div",{className:"w-full md:w-[40%] flex items-center p-4 justify-between rounded-lg border shadow-md",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("img",{src:s.icon,alt:"",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:s.title}),A.jsx("p",{children:s.value})]})]})},a))}),A.jsxs("div",{className:"flex flex-col md:flex-row gap-6 mt-10 px-4 justify-center",children:[A.jsx("div",{className:"w-full md:w-[40%] flex items-center p-4 justify-between rounded-lg border shadow-md",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("img",{src:pF,alt:"Card",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:"CNIC"}),A.jsx("p",{children:e==null?void 0:e.cnic})]})]})}),A.jsxs("div",{className:"w-full md:w-[40%] flex items-center p-4 gap-3 rounded-lg border shadow-md",children:[A.jsx("img",{src:pF,alt:"Card",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:"Date of Birth"}),A.jsx("p",{children:e==null?void 0:e.dateofbirth})]})]})]}),A.jsx("div",{className:"flex flex-col items-center mt-10 px-4",children:A.jsxs("div",{className:"w-full max-w-2xl flex items-center p-4 gap-3 rounded-lg border shadow-md",children:[A.jsx("img",{src:NQ,alt:"Address",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:"Address"}),A.jsx("p",{children:e==null?void 0:e.address})]})]})}),A.jsx("div",{className:"text-center mt-10 text-[#009688] font-bold text-2xl sm:text-3xl",children:"Vehicle Information"}),A.jsx("div",{className:"flex flex-col md:flex-row gap-6 mt-6 px-4 justify-center flex-wrap",children:[{title:"Vehicle Type",value:e==null?void 0:e.vehicleType},{title:"Vehicle Make",value:e==null?void 0:e.vehicleMake},{title:"Vehicle Model",value:e==null?void 0:e.vehicleModel},{title:"License Plate",value:e==null?void 0:e.vehicleNumberPlate}].map((s,a)=>A.jsx("div",{className:"w-full md:w-[40%] flex items-center p-4 justify-between rounded-lg border shadow-md",children:A.jsxs("div",{className:"flex items-center gap-3",children:[A.jsx("img",{src:xfe,alt:"Vehicle",className:"w-[32px]"}),A.jsxs("div",{children:[A.jsx("h1",{className:"font-bold text-lg",children:s.title}),A.jsx("p",{children:s.value})]})]})},a))}),A.jsx("div",{className:"w-full flex flex-col gap-6 mt-6 px-4 justify-center flex-wrap",children:[{title:"Driving License",front:e==null?void 0:e.drivingLicenseFront,back:e==null?void 0:e.drivingLicenseBack},{title:"Vehicle Card",front:e==null?void 0:e.vehicleCardFront,back:e==null?void 0:e.vehicleCardBack},{title:"National Identity Card (CNIC)",front:e==null?void 0:e.cnicFront,back:e==null?void 0:e.cnicBack}].map((s,a)=>A.jsxs("div",{className:"w-full flex flex-col p-4 rounded-lg border shadow-md",children:[A.jsx("h1",{className:"font-bold text-lg mb-4",children:s.title}),A.jsxs("div",{className:"w-full flex flex-wrap gap-4 justify-around",children:[A.jsxs("div",{className:"flex flex-col items-center gap-2",children:[A.jsx("img",{src:s.front,alt:`${s.title} Front`,className:"w-40 h-40 rounded-md border object-cover"}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("a",{href:s.front,target:"_blank",rel:"noopener noreferrer",title:`${s.title} Front`,children:A.jsx(rF,{size:20,className:"cursor-pointer"})}),A.jsx("a",{href:s.front?s.front.replace("/upload/","/upload/fl_attachment/"):"#",download:`${s.title.replace(" ","").toLowerCase()}Front-${e==null?void 0:e.cnic}.jpg`,title:`Download ${s.title} Front`,children:A.jsx(Uw,{size:20,className:"cursor-pointer"})})]})]}),A.jsxs("div",{className:"flex flex-col items-center gap-2",children:[A.jsx("img",{src:s.back,alt:`${s.title} Back`,className:"w-40 h-40 rounded-md border object-cover"}),A.jsxs("div",{className:"flex gap-3",children:[A.jsx("a",{href:s.back,target:"_blank",rel:"noopener noreferrer",title:`${s.title} Back`,children:A.jsx(rF,{size:20,className:"cursor-pointer"})}),A.jsx("a",{href:s.back?s.back.replace("/upload/","/upload/fl_attachment/"):"#",download:`${s.title.replace(" ","").toLowerCase()}Back-${e==null?void 0:e.cnic}.jpg`,title:`Download ${s.title} Back`,children:A.jsx(Uw,{size:20,className:"cursor-pointer"})})]})]})]})]},a))})]})]}),put=()=>{const e=Mo(),[t,n]=q.useState(null),[r,s]=q.useState(null),[a,c]=q.useState(0),[i,f]=q.useState(0),[g,y]=q.useState(0),[b,T]=q.useState(null),[S,U]=q.useState({}),[N,W]=q.useState([]),[L,Q]=q.useState([]),[V,Z]=q.useState(null),[ne,Y]=q.useState(!1),[le,pe]=q.useState(!1),[_e,ye]=q.useState(null),[he,be]=q.useState(null),[Te,Ee]=q.useState(null);q.useEffect(()=>{(async()=>{try{const xe=localStorage.getItem("token"),at=await fetch("https://swiftlogix.cc/api/admin",{method:"GET",headers:{Authorization:`Bearer ${xe}`}});at.ok||console.log("Response error");const we=await at.json();we.success||e("/admin-login"),U(we.userData)}catch{}})()},[]),q.useEffect(()=>{T("pending")},[]);const Ne=Qe=>{T(Qe),Qe==="scheduled"?(document.documentElement.classList.add("bg-[#009688]"),document.documentElement.classList.remove("bg-white")):(document.documentElement.classList.remove("bg-[#009688]"),document.documentElement.classList.add("bg-white"))};q.useEffect(()=>{(async()=>{const xe=await fetch("https://swiftlogix.cc/api/get-riders",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:b,city:S==null?void 0:S.city})});xe.ok||console.log("response error");const we=(await xe.json()).riders;console.log(we),we.length>0?(W(we),Q(we)):(W([]),Q([]))})()},[S,b]),q.useEffect(()=>{(async()=>{const xe=await fetch("https://swiftlogix.cc/api/get-riders",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"rejected",city:S==null?void 0:S.city})});xe.ok||console.log("response error");const at=await xe.json();f(at.riders.length)})()},[S]),q.useEffect(()=>{(async()=>{const xe=await fetch("https://swiftlogix.cc/api/get-riders",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"pending",city:S==null?void 0:S.city})});xe.ok||console.log("response error");const at=await xe.json();c(at.riders.length)})()},[S]),q.useEffect(()=>{(async()=>{const xe=await fetch("https://swiftlogix.cc/api/get-riders",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({selectedCard:"active",city:S==null?void 0:S.city})});xe.ok||console.log("response error");const at=await xe.json();y(at.riders.length)})()},[S]);const Ge=Qe=>{n(""),s(Qe.target.value),W(L)},Je=async()=>{if(n(""),r.length===0){n("Cnic required*");return}const Qe=N.find(xe=>xe.cnic===r);if(!Qe){n("No, rider found.");return}W([Qe])},Ue=async(Qe,xe)=>{try{be(Qe),Ee(xe);const at=N[Qe].cnic,we=await fetch("https://swiftlogix.cc/api/update-riders",{method:"POST",credentials:"include",headers:{"Content-Type":"application/json"},body:JSON.stringify({cnic:at,riderStatus:xe})});we.ok||console.log("response error");const me=await we.json();ye(me.message),me.success?(be(null),Ee(null),qi.success("Rider status updated"),window.location.reload()):(be(null),Ee(null),qi.error("Failed to update rider status"),window.location.reload())}catch{qi.error("Failed to update rider status")}};return A.jsxs("div",{className:"flex min-h-screen overflow-hidden",children:[A.jsx(Bs,{}),A.jsx(Ag,{}),A.jsx(cb,{}),A.jsxs("div",{className:" relative min-[1226px]:ml-[18vw] w-full flex-1 flex flex-col justify-start ",children:[A.jsx("div",{className:"relative bg-[#009688] text-white w-full py-8 flex justify-center items-center",children:A.jsx("div",{className:"text-3xl max-[418px]:text-2xl  sm:text-4xl  font-semibold",children:"Riders"})}),A.jsx("div",{className:"relative",children:A.jsxs("div",{className:"flex gap-6 p-8",children:[A.jsx(wR,{title:"Active Riders",value:g,onClick:()=>Ne("active"),isSelected:b==="active"}),A.jsx(wR,{title:"Pending Riders",value:a,onClick:()=>Ne("pending"),isSelected:b==="pending"}),A.jsx(wR,{title:"Blocked Riders",value:i,onClick:()=>Ne("rejected"),isSelected:b==="rejected"}),A.jsxs("div",{className:"absolute bottom-[-37px] text-center right-4 max-sm:top-[13rem] sm:right-10 md:right-16 p-2 bg-white rounded-lg w-[90%] sm:w-auto",children:[A.jsxs("div",{className:"flex flex-wrap items-center gap-2",children:[A.jsx("input",{type:"text",placeholder:"Enter CNIC",value:r,name:"searchCnic",onChange:Ge,className:"flex-1 min-w-0 border border-gray-300 rounded-lg px-4 py-2 focus:outline-none focus:ring-2 focus:ring-[#009688] w-full sm:w-auto"}),A.jsx("button",{onClick:Je,className:"bg-[#009688] text-white px-4 py-2 rounded-lg hover:bg-[#FF7043] w-full sm:w-auto",children:"Search"})]}),t&&A.jsx("div",{className:"text-red-600 mb-2 text-sm",children:t})]})]})}),N.length==0&&A.jsxs("div",{className:"flex justify-center items-center",children:["No, ",b," riders"]}),A.jsx("div",{className:`flex  flex-wrap gap-4 max-sm:px-4 sm:pl-8 ${b!=="scheduled"&&"sm:mt-12 mt-24 mb-4"}`,children:N.map((Qe,xe)=>A.jsx(hut,{name:Qe.name,cnic:Qe.cnic,datetime:Qe.datetime,onClick:()=>Z(xe),onAccept:()=>Ue(xe,"active"),onReject:()=>Ue(xe,"rejected"),selectedCard:b,processingIndex:he,processingStatus:Te,index:xe},xe))}),V!=null&&A.jsx("div",{className:"absolute inset-0 flex justify-center items-center z-50",children:A.jsxs("div",{className:"relative bg-white  w-full  max-h-screen overflow-y-auto rounded-lg shadow-lg",children:[A.jsx("button",{onClick:()=>Z(null),className:"fixed top-4 right-8 text-[#FF7043] text-3xl font-bold focus:outline-none","aria-label":"Close",children:"×"}),A.jsx(fut,{riderData:N[V],onAccept:()=>Ue(index,"active"),onReject:()=>Ue(index,"rejected"),selectedCard:b})]})}),ne&&A.jsx("div",{className:"border-none bg-[#009688] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:_e}),le&&A.jsx("div",{className:"border-none bg-[#FF7043] text-white w-60 p-4 absolute bottom-8 right-4  bg-opacity-3 backdrop-blur-lg ",children:_e})]})]})};function wR({title:e,value:t,onClick:n,isSelected:r}){return A.jsxs("div",{onClick:n,className:`cursor-pointer p-6 hover:bg-[#009688] rounded-lg shadow-md ${r?"bg-[#009688] text-white":"bg-white"} text-gray-700 hover:text-white`,children:[A.jsx("div",{className:"flex items-center justify-between mb-4",children:A.jsx("h3",{className:"text-lg font-semibold",children:e})}),A.jsx("p",{className:"text-3xl font-bold",children:t})]})}const Aut=W0e([{path:"/",element:A.jsx(Ntt,{})},{path:"/live-track",element:A.jsx(Rct,{})},{path:"/rate-calculator",element:A.jsx(Ott,{})},{path:"/price-page",element:A.jsx(Dtt,{})},{path:"/schedule-a-ship",element:A.jsx(act,{})},{path:"/login",element:A.jsx(lct,{})},{path:"/signup",element:A.jsx(cct,{})},{path:"/customer-dashboard",element:A.jsx(hct,{})},{path:"customer-shipments",element:A.jsx(pct,{})},{path:"/track-shipment",element:A.jsx(Act,{})},{path:"/reprint-shipping-label",element:A.jsx(mct,{})},{path:"/customer-profile",element:A.jsx(yct,{})},{path:"/wallet",element:A.jsx(vct,{})},{path:"/rider-profile",element:A.jsx(bct,{})},{path:"/rider-dashboard",element:A.jsx(LJ,{})},{path:"/rider-wallet",element:A.jsx(Sct,{})},{path:"/rider-shipments",element:A.jsx(Ect,{})},{path:"/rider-dashboard",element:A.jsx(LJ,{})},{path:"/rider-login",element:A.jsx(Fct,{})},{path:"/rider-signup",element:A.jsx(jct,{})},{path:"/customer-reprintlabel",element:A.jsx(Pct,{})},{path:"/customer-ratecalculator",element:A.jsx(kct,{})},{path:"/customer-price-page",element:A.jsx(Lct,{})},{path:"/customer-scheduleship",element:A.jsx(Mct,{})},{path:"/customer-trackingshipment",element:A.jsx(Nct,{})},{path:"/payment-completed",element:A.jsx(ck,{})},{path:"/admin-signup",element:A.jsx(Oct,{})},{path:"/admin-login",element:A.jsx(Dct,{})},{path:"/admin-dashboard",element:A.jsx(zct,{})},{path:"/admin-profile",element:A.jsx(Qct,{})},{path:"/admin-shipments",element:A.jsx(Zct,{})},{path:"/admin-ratecalculator",element:A.jsx(Xct,{})},{path:"/admin-price-page",element:A.jsx(Yct,{})},{path:"/admin-scheduleship",element:A.jsx(Jct,{})},{path:"/admin-reprintlabel",element:A.jsx(eut,{})},{path:"/admin-payment",element:A.jsx(tut,{})},{path:"/admin-trackingshipment",element:A.jsx(nut,{})},{path:"/insurane-policy",element:A.jsx(rut,{})},{path:"/payment-methods",element:A.jsx(iut,{})},{path:"/freelance-rider-program",element:A.jsx(sut,{})},{path:"/file-claim",element:A.jsx(out,{})},{path:"/admin-insurance",element:A.jsx(cut,{})},{path:"/reset",element:A.jsx(dut,{})},{path:"/admin-rider",element:A.jsx(put,{})}]);qte(document.getElementById("root")).render(A.jsx(q.StrictMode,{children:A.jsx(nye,{router:Aut})}));export{sa as _,Qm as c,mF as g};
